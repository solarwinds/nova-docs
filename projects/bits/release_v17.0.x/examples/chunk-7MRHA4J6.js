import{a as Oi}from"./chunk-AEFHANAR.js";import{a as C}from"./chunk-HQU2Q72B.js";import{a as yi}from"./chunk-5VDV6BXS.js";import{a as bi}from"./chunk-3DJIGCHJ.js";import{g as xi}from"./chunk-W53BDDEF.js";import{d as wi}from"./chunk-WA7WOSXK.js";import{e as gi,k as Ci}from"./chunk-J22KVR7U.js";import{k as X,l as Y,m as ii}from"./chunk-N5FUFMYY.js";import{Aa as W,Gb as h,Hb as P,Ia as B,Ib as l,Ja as x,Jb as F,Ka as y,Kb as O,Ob as c,Pb as a,Rb as S,Sa as m,Sb as I,Ub as R,ec as v,fc as u,g as Q,ga as $,gc as G,hc as Z,lb as D,lc as U,mc as d,nc as _,oa as j,ob as o,oc as f,pb as k,qc as g,rc as J,sc as E,ta as H,wb as b,yc as K}from"./chunk-7UJBXEVU.js";import{f as w,g as q}from"./chunk-XR34LRGE.js";var ti=w((me,ei)=>{var Si=xi(),Ii=Si("length");ei.exports=Ii});var ai=w((_e,ci)=>{var ri="\\ud800-\\udfff",Ri="\\u0300-\\u036f",Ei="\\ufe20-\\ufe2f",zi="\\u20d0-\\u20ff",Ai=Ri+Ei+zi,Li="\\ufe0e\\ufe0f",Ni="["+ri+"]",T="["+Ai+"]",V="\\ud83c[\\udffb-\\udfff]",ki="(?:"+T+"|"+V+")",si="[^"+ri+"]",oi="(?:\\ud83c[\\udde6-\\uddff]){2}",li="[\\ud800-\\udbff][\\udc00-\\udfff]",Fi="\\u200d",pi=ki+"?",ui="["+Li+"]?",Ti="(?:"+Fi+"(?:"+[si,oi,li].join("|")+")"+ui+pi+")*",Vi=ui+pi+Ti,Mi="(?:"+[si+T+"?",T,oi,li,Ni].join("|")+")",ni=RegExp(V+"(?="+V+")|"+Mi+Vi,"g");function qi(e){for(var s=ni.lastIndex=0;ni.test(e);)++s;return s}ci.exports=qi});var mi=w((fe,hi)=>{var Qi=ti(),$i=Oi(),ji=ai();function Hi(e){return $i(e)?ji(e):Qi(e)}hi.exports=Hi});var fi=w((ve,_i)=>{var Wi=Ci(),Bi=wi(),Di=gi(),Pi=bi(),Gi=mi(),Zi="[object Map]",Ui="[object Set]";function Ji(e){if(e==null)return 0;if(Di(e))return Pi(e)?Gi(e):e.length;var s=Bi(e);return s==Zi||s==Ui?e.size:Wi(e).length}_i.exports=Ji});var vi=q(yi()),di=q(fi());var z=(()=>{class e{constructor(i){this.zone=i,this.chipsOverflowed=new m}init(){this.initChipResizeObserver(),this.initChipsMutationObserver()}handleOverflow(){this.overflowedChips={flatItems:[],groupedItems:[]},this.processChipsOverflow(),this.chipsOverflowed.emit(this.overflowedChips)}onDestroy(){this.chipResizeObserver?.disconnect(),this.chipsMutationObserver?.disconnect()}initChipResizeObserver(){this.allChips.first&&(this.chipResizeObserver=new ResizeObserver(()=>{this.zone.run(()=>this.handleOverflow())}),this.chipResizeObserver.observe(this.getNativeElement(this.allChips.first)))}initChipsMutationObserver(){let i={childList:!0};this.chipsMutationObserver=new MutationObserver(()=>this.handleOverflow()),this.chipsMutationObserver.observe(this.mainCell.nativeElement,i)}processChipsOverflow(){let i=0,n=1,t=!1,r=this.getRowWidth(),p=this.overflowCounter?.nativeElement.getBoundingClientRect().width||0;this.allChips.toArray().forEach(M=>{let A=this.getNativeElement(M);A.style.display="inline";let L=A.getBoundingClientRect().width,N=()=>n===this.overflowLinesNumber;!N()&&i+L>r&&(n++,i=0),N()&&i+L+p>r&&(i=0,t=!0,t||n++),i+=L,N()&&t&&(A.style.display="none",this.updateOverflowChips(M))})}updateOverflowChips(i){let n=this.findChipItem(i);if(n?.inFlat&&this.overflowedChips.flatItems?.push(i.item),n?.inGroup){let t=this.itemsSource.groupedItems?.indexOf(n.inGroup),r=this.overflowedChips.groupedItems?.find(p=>p.id===`group${t}`);if(r){r.items.push(i.item);return}this.overflowedChips.groupedItems?.push({id:`group${t}`,items:[i.item],label:n.inGroup.label})}}findChipItem(i){if(!(i instanceof C))return;let n=this.itemsSource.flatItems?.find(r=>r===i.item),t=this.itemsSource.groupedItems?.find(r=>r.items.find(p=>p===i.item));return{inFlat:n,inGroup:t}}getNativeElement(i){return i instanceof C?i.host.nativeElement:i.nativeElement}getRowWidth(){return this.nuiChips?.nativeElement.getBoundingClientRect().width-this.clearAll?.nativeElement.getBoundingClientRect().width-parseFloat(getComputedStyle(this.nuiChips?.nativeElement).paddingLeft)-parseFloat(getComputedStyle(this.nuiChips?.nativeElement).paddingRight)}static{this.\u0275fac=function(n){return new(n||e)(H(b))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac})}}return e})();var Yi=["overflowCounterLabel"],ie=["chipsMainCell"],ee=["clearAll"],te=["nuiChips"],ne=["chipItem"],re=[[["",8,"nui-chips-overflowed"]]],se=[".nui-chips-overflowed"];function oe(e,s){if(e&1&&(c(0,"h4",10)(1,"span",11),g(2),a(),c(3,"span",12),g(4),a()()),e&2){let i=u();o(2),E("",i.title,":"),o(2),E("(",i.getItemsCount(),")")}}function le(e,s){if(e&1){let i=R();c(0,"nui-chip",14,2),v("remove",function(){let t=x(i).$implicit,r=u(2);return y(r.onRemove({item:t,group:void 0}))}),a()}if(e&2){let i=s.$implicit,n=s.last;O("group-last",n),l("customClass",i.customClass)("item",i)}}function pe(e,s){if(e&1&&(S(0),h(1,le,2,4,"nui-chip",13),I()),e&2){let i=u();o(),l("ngForOf",i.itemsSource.flatItems)}}function ue(e,s){if(e&1){let i=R();c(0,"nui-chip",18,2),v("remove",function(){let t=x(i).$implicit,r=u(2).$implicit,p=u();return y(p.onRemove({item:t,group:r}))}),a()}if(e&2){let i=s.$implicit,n=s.last,t=u(2).last;O("group-last",n&&!t),l("customClass",i.customClass)("item",i)}}function ce(e,s){if(e&1&&(S(0),c(1,"div",15,2)(3,"div",16),g(4),a()(),h(5,ue,2,4,"nui-chip",17),I()),e&2){let i=u().$implicit;o(),l("ngClass",i.customClass),o(3),E(" ",i.label," "),o(),l("ngForOf",i.items)}}function ae(e,s){if(e&1&&(S(0),h(1,ce,6,3,"ng-container",7),I()),e&2){let i=s.$implicit;o(),l("ngIf",(i.items==null?null:i.items.length)>0)}}function he(e,s){if(e&1){let i=R();c(0,"div",19,3)(2,"a",20),v("click",function(t){x(i);let r=u();return y(r.onRemoveAll(t))}),g(3),a()()}if(e&2){let i=u();o(3),J(i.removeAllLinkText)}}var qe=(()=>{class e{set clearAll(i){this.chipsOverflowService.clearAll=i}set overflowCounter(i){this.chipsOverflowService.overflowCounter=i}get role(){return this.getItemsCount()?"list":null}constructor(i,n){this.zone=i,this.chipsOverflowService=n,this.overflow=!1,this.overflowLinesNumber=1,this.allowRemoveAll=!0,this.autoHide=!0,this.chipRemoved=new m,this.removeAll=new m,this.chipsOverflowed=new m,this.destroy$=new Q}ngOnChanges(i){i.itemsSource&&(this.chipsOverflowService.itemsSource=i.itemsSource.currentValue),i.overflowLinesNumber&&(this.chipsOverflowService.overflowLinesNumber=i.overflowLinesNumber.currentValue),i.overflow&&!i.overflow.currentValue&&this.chipsOverflowService.onDestroy()}ngOnInit(){this.removeAllLinkText=this.removeAllLinkText||$localize`Clear all`}ngAfterViewInit(){this.overflow&&this.initChipsOverflow()}onWinResize(){this.overflow&&this.getItemsCount()&&this.chipsOverflowService.handleOverflow()}getItemsCount(){let i=(0,di.default)(this.itemsSource.flatItems);return(0,vi.default)(this.itemsSource.groupedItems)||(i+=(this.itemsSource.groupedItems||[]).map(n=>n.items.length).reduce((n,t)=>n+t)),i}onRemove(i){this.chipRemoved.emit(i)}onRemoveAll(i){this.removeAll.emit(i),i.preventDefault()}ngOnDestroy(){this.overflow&&this.chipsOverflowService.onDestroy(),this.destroy$.next(),this.destroy$.complete()}initChipsOverflow(){this.chipsOverflowService.mainCell=this.mainCell,this.chipsOverflowService.nuiChips=this.nuiChips,this.chipsOverflowService.allChips=this.allChips,this.chipsOverflowService.itemsSource=this.itemsSource,this.chipsOverflowService.overflowLinesNumber=this.overflowLinesNumber,this.chipsOverflowService.init(),this.chipsOverflowService.chipsOverflowed.pipe($(this.destroy$)).subscribe(i=>{this.chipsOverflowed.emit(i),this.isOverflowed=!!(i.groupedItems?.length||i.flatItems?.length)})}static{this.\u0275fac=function(n){return new(n||e)(k(b),k(z))}}static{this.\u0275cmp=W({type:e,selectors:[["nui-chips"]],contentQueries:function(n,t,r){if(n&1&&U(r,Yi,5),n&2){let p;_(p=f())&&(t.overflowCounter=p.first)}},viewQuery:function(n,t){if(n&1&&(d(ie,5),d(ee,5),d(te,5),d(ne,5)),n&2){let r;_(r=f())&&(t.mainCell=r.first),_(r=f())&&(t.clearAll=r.first),_(r=f())&&(t.nuiChips=r.first),_(r=f())&&(t.allChips=r)}},hostVars:1,hostBindings:function(n,t){n&1&&v("resize",function(){return t.onWinResize()},!1,D),n&2&&P("role",t.role)},inputs:{overflow:"overflow",overflowLinesNumber:"overflowLinesNumber",allowRemoveAll:"allowRemoveAll",autoHide:"autoHide",removeAllLinkText:"removeAllLinkText",itemsSource:"itemsSource",orientation:"orientation",title:"title",customClass:"customClass"},outputs:{chipRemoved:"chipRemoved",removeAll:"removeAll",chipsOverflowed:"chipsOverflowed"},features:[K([z]),B],ngContentSelectors:se,decls:9,vars:11,consts:[["nuiChips",""],["chipsMainCell",""],["chipItem",""],["clearAll",""],[1,"nui-chips","media",3,"ngClass"],["class","nui-chips__title-cell",4,"ngIf"],[1,"nui-chips__main-cell"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","nui-chips__clear-cell",4,"ngIf"],[1,"nui-chips__title-cell"],[1,"nui-chips__title"],[1,"nui-chips__count"],["class","chip-flat",3,"customClass","group-last","item","remove",4,"ngFor","ngForOf"],[1,"chip-flat",3,"remove","customClass","item"],[1,"nui-chips__group-name",3,"ngClass"],[1,"nui-chips__group-label"],[3,"customClass","group-last","item","remove",4,"ngFor","ngForOf"],[3,"remove","customClass","item"],[1,"nui-chips__clear-cell"],["href","",1,"nui-chips__clear",3,"click"]],template:function(n,t){n&1&&(G(re),c(0,"div",4,0),h(2,oe,5,2,"h4",5),c(3,"div",6,1),h(5,pe,2,1,"ng-container",7)(6,ae,2,1,"ng-container",8),Z(7),a(),h(8,he,4,1,"div",9),a()),n&2&&(F("display",t.getItemsCount()!==0||!t.autoHide?"flex":"none"),O("nui-chips__vertical",t.orientation==="vertical"),l("ngClass",t.customClass),o(2),l("ngIf",!!t.title&&t.orientation==="vertical"),o(),F("flex-grow",t.isOverflowed?1:0),o(2),l("ngIf",t.itemsSource.flatItems==null?null:t.itemsSource.flatItems.length),o(),l("ngForOf",t.itemsSource.groupedItems),o(2),l("ngIf",t.allowRemoveAll&&t.getItemsCount()>0))},dependencies:[X,Y,ii,C],styles:[`.nui .nui-chips{display:flex;margin-top:15px;background-color:var(--nui-color-bg-light,#fff);padding:15px 15px 10px}.nui .nui-chips nui-chip,.nui .nui-chips .nui-chips__group-name{margin-bottom:5px}.nui .nui-chips:first-child{margin-top:0}.nui .nui-chips-overflowed__counter{font-size:11px;cursor:pointer}.nui .nui-chips .group-last .nui-chip__value{margin-right:5px}.nui .nui-chips__title-cell{white-space:nowrap;vertical-align:top;line-height:20px;padding:0 5px 5px 0;margin:0}.nui .nui-chips__main-cell{display:flex;flex-wrap:wrap;font-size:0}.nui .nui-chips__clear-cell{text-align:right;white-space:nowrap}.nui .nui-chips__group-name,.nui .nui-chips__group-values,.nui .nui-chips__clear{display:inline-block;font-size:11px;line-height:18px}.nui .nui-chips__group nui-chip:last-of-type .nui-chip__value{border-radius:0 3px 3px 0}.nui .nui-chips__group-label{line-height:14px;font-size:11px;font-weight:400;color:#1119;color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6));white-space:nowrap;margin-right:1px;padding:0 10px;line-height:18px}.nui .nui-chips__group-values{cursor:pointer;margin-right:5px}.nui .nui-chips__group-values.nui .nui-chips__group-noname{margin-right:0}.nui .nui-chips__flat-values nui-chip:first-of-type .nui-chip__value{border-radius:3px 0 0 3px}.nui .nui-chips__flat-values nui-chip:last-of-type .nui-chip__value{border-radius:0 3px 3px 0}.nui .nui-chips__flat-values nui-chip:only-of-type .nui-chip__value{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.nui .nui-chips__clear{vertical-align:top;cursor:pointer;margin-left:10px}.nui .nui-chips__clear:focus{outline:none;z-index:500;box-shadow:0 0 0 2px #00c4d280;border-radius:3px}.nui .nui-chips__vertical{padding:0;flex-wrap:wrap}.nui .nui-chips__vertical nui-chip,.nui .nui-chips__vertical .nui-chips__group-name{margin-bottom:0}.nui .nui-chips__vertical .group-last .nui-chip__value{margin-right:0;margin-bottom:5px}.nui .nui-chips__vertical .nui-chips__title-cell{order:1;flex-grow:1}.nui .nui-chips__vertical .nui-chips__flat-values nui-chip:first-of-type .nui-chip__value{border-radius:3px 3px 0 0}.nui .nui-chips__vertical .nui-chips__flat-values nui-chip:last-of-type .nui-chip__value{border-radius:0 0 3px 3px}.nui .nui-chips__vertical .nui-chips__flat-values nui-chip:only-of-type .nui-chip__value{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.nui .nui-chips__vertical .nui-chips__main-cell{order:3;width:100%;display:flex;flex-direction:column}.nui .nui-chips__vertical .nui-chips__main-cell .nui-chips__flat-values{padding-bottom:5px}.nui .nui-chips__vertical .nui-chips__main-cell .nui-chips__group-name{width:100%;border-radius:3px 3px 0 0}.nui .nui-chips__vertical .nui-chips__main-cell .nui-chips__group-values{display:flex;width:100%;flex-direction:column}.nui .nui-chips__vertical .nui-chips__main-cell .nui-chips__group-values .nui-chips__value-remove{float:right}.nui .nui-chips__vertical .nui-chips__main-cell .nui-chips__group{display:block}.nui .nui-chips__vertical .nui-chips__main-cell .nui-chips__group nui-chip:last-of-type .nui-chip__value{border-radius:0 0 3px 3px}.nui .nui-chips__vertical .nui-chips__main-cell .nui-chips__group-name{display:block}.nui .nui-chips__vertical .nui-chips__main-cell nui-chip{width:100%}.nui .nui-chips__vertical .nui-chips__main-cell nui-chip .nui-chip__value-name{max-width:100%}.nui .nui-chips__vertical .nui-chips__clear{vertical-align:baseline}.nui .nui-chips__vertical .nui-chips__clear-cell{order:2}
`],encapsulation:2})}}return e})();export{qe as a};
