import{m as F}from"./chunk-LF6XSF3V.js";import{h as T,i as ce}from"./chunk-ZEY3WGPI.js";import{i as de,m as le}from"./chunk-BEIUR5OZ.js";import{$ as I,$b as se,Ab as ee,Bb as x,Db as te,G as j,Gc as oe,Ha as L,J as S,K,La as R,N as p,Pb as ne,Q as q,Yc as P,Zc as O,aa as D,ba as f,bc as ie,bd as N,cd as ae,da as E,g as m,h as y,ja as X,la as Y,mc as M,n as W,oa as h,pb as G,q as c,s as w,tc as B,uc as re,v as u,vb as Z,vc as b,w as v,wc as k,z as A,zb as J}from"./chunk-MC3BMXIX.js";import{a as z,b as $}from"./chunk-VBFW7A5V.js";var V=class{dataNodes;expansionModel=new F(!0);trackBy;getLevel;isExpandable;getChildren;toggle(o){this.expansionModel.toggle(this._trackByValue(o))}expand(o){this.expansionModel.select(this._trackByValue(o))}collapse(o){this.expansionModel.deselect(this._trackByValue(o))}isExpanded(o){return this.expansionModel.isSelected(this._trackByValue(o))}toggleDescendants(o){this.expansionModel.isSelected(this._trackByValue(o))?this.collapseDescendants(o):this.expandDescendants(o)}collapseAll(){this.expansionModel.clear()}expandDescendants(o){let e=[o];e.push(...this.getDescendants(o)),this.expansionModel.select(...e.map(t=>this._trackByValue(t)))}collapseDescendants(o){let e=[o];e.push(...this.getDescendants(o)),this.expansionModel.deselect(...e.map(t=>this._trackByValue(t)))}_trackByValue(o){return this.trackBy?this.trackBy(o):o}};var he=class extends V{getChildren;options;constructor(o,e){super(),this.getChildren=o,this.options=e,this.options&&(this.trackBy=this.options.trackBy),this.options?.isExpandable&&(this.isExpandable=this.options.isExpandable)}expandAll(){this.expansionModel.clear();let o=this.dataNodes.reduce((e,t)=>[...e,...this.getDescendants(t),t],[]);this.expansionModel.select(...o.map(e=>this._trackByValue(e)))}getDescendants(o){let e=[];return this._getDescendants(e,o),e.splice(1)}_getDescendants(o,e){o.push(e);let t=this.getChildren(e);Array.isArray(t)?t.forEach(n=>this._getDescendants(o,n)):w(t)&&t.pipe(p(1),j(Boolean)).subscribe(n=>{for(let s of n)this._getDescendants(o,s)})}},_e=new Y("CDK_TREE_NODE_OUTLET_NODE"),H=(()=>{class r{viewContainer=h(Z);_node=h(_e,{optional:!0});constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=x({type:r,selectors:[["","cdkTreeNodeOutlet",""]]})}return r})(),U=class{$implicit;level;index;count;constructor(o){this.$implicit=o}},fe=(()=>{class r{template=h(G);when;constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=x({type:r,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:[0,"cdkTreeNodeDefWhen","when"]}})}return r})();function ue(){return Error("Could not find a tree control, levelAccessor, or childrenAccessor for the tree.")}var pe=(()=>{class r{_differs=h(O);_changeDetectorRef=h(P);_elementRef=h(R);_dir=h(de);_onDestroy=new m;_dataDiffer;_defaultNodeDef;_dataSubscription;_levels=new Map;_parents=new Map;_ariaSets=new Map;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}_dataSource;treeControl;levelAccessor;childrenAccessor;trackBy;expansionKey;_nodeOutlet;_nodeDefs;viewChange=new y({start:0,end:Number.MAX_VALUE});_expansionModel;_flattenedNodes=new y([]);_nodeType=new y(null);_nodes=new y(new Map);_keyManagerNodes=new y([]);_keyManagerFactory=h(ce);_keyManager;_viewInit=!1;constructor(){}ngAfterContentInit(){this._initializeKeyManager()}ngAfterContentChecked(){this._updateDefaultNodeDefinition(),this._subscribeToDataChanges()}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),this._keyManager?.destroy()}ngOnInit(){this._checkTreeControlUsage(),this._initializeDataDiffer()}ngAfterViewInit(){this._viewInit=!0}_updateDefaultNodeDefinition(){let e=this._nodeDefs.filter(t=>!t.when);e.length>1,this._defaultNodeDef=e[0]}_setNodeTypeIfUnset(e){this._nodeType.value===null&&this._nodeType.next(e)}_switchDataSource(e){this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._subscribeToDataChanges()}_getExpansionModel(){return this.treeControl?this.treeControl.expansionModel:(this._expansionModel??=new F(!0),this._expansionModel)}_subscribeToDataChanges(){if(this._dataSubscription)return;let e;le(this._dataSource)?e=this._dataSource.connect(this):w(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=c(this._dataSource)),e&&(this._dataSubscription=this._getRenderData(e).pipe(f(this._onDestroy)).subscribe(t=>{this._renderDataChanges(t)}))}_getRenderData(e){let t=this._getExpansionModel();return v([e,this._nodeType,t.changed.pipe(I(null),E(n=>{this._emitExpansionChanges(n)}))]).pipe(D(([n,s])=>s===null?c({renderNodes:n,flattenedNodes:null,nodeType:s}):this._computeRenderingData(n,s).pipe(u(i=>$(z({},i),{nodeType:s})))))}_renderDataChanges(e){if(e.nodeType===null){this.renderNodeChanges(e.renderNodes);return}this._updateCachedData(e.flattenedNodes),this.renderNodeChanges(e.renderNodes),this._updateKeyManagerItems(e.flattenedNodes)}_emitExpansionChanges(e){if(!e)return;let t=this._nodes.value;for(let n of e.added)t.get(n)?._emitExpansionState(!0);for(let n of e.removed)t.get(n)?._emitExpansionState(!1)}_initializeKeyManager(){let e=v([this._keyManagerNodes,this._nodes]).pipe(u(([n,s])=>n.reduce((i,d)=>{let a=s.get(this._getExpansionKey(d));return a&&i.push(a),i},[]))),t={trackBy:n=>this._getExpansionKey(n.data),skipPredicate:n=>!!n.isDisabled,typeAheadDebounceInterval:!0,horizontalOrientation:this._dir.value};this._keyManager=this._keyManagerFactory(e,t)}_initializeDataDiffer(){let e=this.trackBy??((t,n)=>this._getExpansionKey(n));this._dataDiffer=this._differs.find([]).create(e)}_checkTreeControlUsage(){}renderNodeChanges(e,t=this._dataDiffer,n=this._nodeOutlet.viewContainer,s){let i=t.diff(e);!i&&!this._viewInit||(i?.forEachOperation((d,a,l)=>{if(d.previousIndex==null)this.insertNode(e[l],l,n,s);else if(l==null)n.remove(a);else{let _=n.get(a);n.move(_,l)}}),i?.forEachIdentityChange(d=>{let a=d.item;if(d.currentIndex!=null){let l=n.get(d.currentIndex);l.context.$implicit=a}}),s?this._changeDetectorRef.markForCheck():this._changeDetectorRef.detectChanges())}_getNodeDef(e,t){if(this._nodeDefs.length===1)return this._nodeDefs.first;let n=this._nodeDefs.find(s=>s.when&&s.when(t,e))||this._defaultNodeDef;return n}insertNode(e,t,n,s){let i=this._getLevelAccessor(),d=this._getNodeDef(e,t),a=this._getExpansionKey(e),l=new U(e);s??=this._parents.get(a)??void 0,i?l.level=i(e):s!==void 0&&this._levels.has(this._getExpansionKey(s))?l.level=this._levels.get(this._getExpansionKey(s))+1:l.level=0,this._levels.set(a,l.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(d.template,l,t),C.mostRecentTreeNode&&(C.mostRecentTreeNode.data=e)}isExpanded(e){return!!(this.treeControl?.isExpanded(e)||this._expansionModel?.isSelected(this._getExpansionKey(e)))}toggle(e){this.treeControl?this.treeControl.toggle(e):this._expansionModel&&this._expansionModel.toggle(this._getExpansionKey(e))}expand(e){this.treeControl?this.treeControl.expand(e):this._expansionModel&&this._expansionModel.select(this._getExpansionKey(e))}collapse(e){this.treeControl?this.treeControl.collapse(e):this._expansionModel&&this._expansionModel.deselect(this._getExpansionKey(e))}toggleDescendants(e){this.treeControl?this.treeControl.toggleDescendants(e):this._expansionModel&&(this.isExpanded(e)?this.collapseDescendants(e):this.expandDescendants(e))}expandDescendants(e){if(this.treeControl)this.treeControl.expandDescendants(e);else if(this._expansionModel){let t=this._expansionModel;t.select(this._getExpansionKey(e)),this._getDescendants(e).pipe(p(1),f(this._onDestroy)).subscribe(n=>{t.select(...n.map(s=>this._getExpansionKey(s)))})}}collapseDescendants(e){if(this.treeControl)this.treeControl.collapseDescendants(e);else if(this._expansionModel){let t=this._expansionModel;t.deselect(this._getExpansionKey(e)),this._getDescendants(e).pipe(p(1),f(this._onDestroy)).subscribe(n=>{t.deselect(...n.map(s=>this._getExpansionKey(s)))})}}expandAll(){this.treeControl?this.treeControl.expandAll():this._expansionModel&&this._forEachExpansionKey(e=>this._expansionModel?.select(...e))}collapseAll(){this.treeControl?this.treeControl.collapseAll():this._expansionModel&&this._forEachExpansionKey(e=>this._expansionModel?.deselect(...e))}_getLevelAccessor(){return this.treeControl?.getLevel?.bind(this.treeControl)??this.levelAccessor}_getChildrenAccessor(){return this.treeControl?.getChildren?.bind(this.treeControl)??this.childrenAccessor}_getDirectChildren(e){let t=this._getLevelAccessor(),n=this._expansionModel??this.treeControl?.expansionModel;if(!n)return c([]);let s=this._getExpansionKey(e),i=n.changed.pipe(D(a=>a.added.includes(s)?c(!0):a.removed.includes(s)?c(!1):W),I(this.isExpanded(e)));if(t)return v([i,this._flattenedNodes]).pipe(u(([a,l])=>a?this._findChildrenByLevel(t,l,e,1):[]));let d=this._getChildrenAccessor();if(d)return T(d(e)??[]);throw ue()}_findChildrenByLevel(e,t,n,s){let i=this._getExpansionKey(n),d=t.findIndex(g=>this._getExpansionKey(g)===i),a=e(n),l=a+s,_=[];for(let g=d+1;g<t.length;g++){let Q=e(t[g]);if(Q<=a)break;Q<=l&&_.push(t[g])}return _}_registerNode(e){this._nodes.value.set(this._getExpansionKey(e.data),e),this._nodes.next(this._nodes.value)}_unregisterNode(e){this._nodes.value.delete(this._getExpansionKey(e.data)),this._nodes.next(this._nodes.value)}_getLevel(e){return this._levels.get(this._getExpansionKey(e))}_getSetSize(e){return this._getAriaSet(e).length}_getPositionInSet(e){let t=this._getAriaSet(e),n=this._getExpansionKey(e);return t.findIndex(s=>this._getExpansionKey(s)===n)+1}_getNodeParent(e){let t=this._parents.get(this._getExpansionKey(e.data));return t&&this._nodes.value.get(this._getExpansionKey(t))}_getNodeChildren(e){return this._getDirectChildren(e.data).pipe(u(t=>t.reduce((n,s)=>{let i=this._nodes.value.get(this._getExpansionKey(s));return i&&n.push(i),n},[])))}_sendKeydownToKeyManager(e){if(e.target===this._elementRef.nativeElement)this._keyManager.onKeydown(e);else{let t=this._nodes.getValue();for(let[,n]of t)if(e.target===n._elementRef.nativeElement){this._keyManager.onKeydown(e);break}}}_getDescendants(e){if(this.treeControl)return c(this.treeControl.getDescendants(e));if(this.levelAccessor){let t=this._findChildrenByLevel(this.levelAccessor,this._flattenedNodes.value,e,1/0);return c(t)}if(this.childrenAccessor)return this._getAllChildrenRecursively(e).pipe(S((t,n)=>(t.push(...n),t),[]));throw ue()}_getAllChildrenRecursively(e){return this.childrenAccessor?T(this.childrenAccessor(e)).pipe(p(1),D(t=>{for(let n of t)this._parents.set(this._getExpansionKey(n),e);return c(...t).pipe(K(n=>A(c([n]),this._getAllChildrenRecursively(n))))})):c([])}_getExpansionKey(e){return this.expansionKey?.(e)??e}_getAriaSet(e){let t=this._getExpansionKey(e),n=this._parents.get(t),s=n?this._getExpansionKey(n):null;return this._ariaSets.get(s)??[e]}_findParentForNode(e,t,n){if(!n.length)return null;let s=this._levels.get(this._getExpansionKey(e))??0;for(let i=t-1;i>=0;i--){let d=n[i];if((this._levels.get(this._getExpansionKey(d))??0)<s)return d}return null}_flattenNestedNodesWithExpansion(e,t=0){let n=this._getChildrenAccessor();return n?c(...e).pipe(K(s=>{let i=this._getExpansionKey(s);this._parents.has(i)||this._parents.set(i,null),this._levels.set(i,t);let d=T(n(s));return A(c([s]),d.pipe(p(1),E(a=>{this._ariaSets.set(i,[...a??[]]);for(let l of a??[]){let _=this._getExpansionKey(l);this._parents.set(_,s),this._levels.set(_,t+1)}}),D(a=>a?this._flattenNestedNodesWithExpansion(a,t+1).pipe(u(l=>this.isExpanded(s)?l:[])):c([]))))}),S((s,i)=>(s.push(...i),s),[])):c([...e])}_computeRenderingData(e,t){if(this.childrenAccessor&&t==="flat")return this._clearPreviousCache(),this._ariaSets.set(null,[...e]),this._flattenNestedNodesWithExpansion(e).pipe(u(n=>({renderNodes:n,flattenedNodes:n})));if(this.levelAccessor&&t==="nested"){let n=this.levelAccessor;return c(e.filter(s=>n(s)===0)).pipe(u(s=>({renderNodes:s,flattenedNodes:e})),E(({flattenedNodes:s})=>{this._calculateParents(s)}))}else return t==="flat"?c({renderNodes:e,flattenedNodes:e}).pipe(E(({flattenedNodes:n})=>{this._calculateParents(n)})):(this._clearPreviousCache(),this._ariaSets.set(null,[...e]),this._flattenNestedNodesWithExpansion(e).pipe(u(n=>({renderNodes:e,flattenedNodes:n}))))}_updateCachedData(e){this._flattenedNodes.next(e)}_updateKeyManagerItems(e){this._keyManagerNodes.next(e)}_calculateParents(e){let t=this._getLevelAccessor();if(t){this._clearPreviousCache();for(let n=0;n<e.length;n++){let s=e[n],i=this._getExpansionKey(s);this._levels.set(i,t(s));let d=this._findParentForNode(s,n,e);this._parents.set(i,d);let a=d?this._getExpansionKey(d):null,l=this._ariaSets.get(a)??[];l.splice(n,0,s),this._ariaSets.set(a,l)}}}_forEachExpansionKey(e){let t=[],n=[];this._nodes.value.forEach(s=>{t.push(this._getExpansionKey(s.data)),n.push(this._getDescendants(s.data))}),n.length>0?v(n).pipe(p(1),f(this._onDestroy)).subscribe(s=>{s.forEach(i=>i.forEach(d=>t.push(this._getExpansionKey(d)))),e(t)}):e(t)}_clearPreviousCache(){this._parents.clear(),this._levels.clear(),this._ariaSets.clear()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=J({type:r,selectors:[["cdk-tree"]],contentQueries:function(t,n,s){if(t&1&&B(s,fe,5),t&2){let i;b(i=k())&&(n._nodeDefs=i)}},viewQuery:function(t,n){if(t&1&&re(H,7),t&2){let s;b(s=k())&&(n._nodeOutlet=s.first)}},hostAttrs:["role","tree",1,"cdk-tree"],hostBindings:function(t,n){t&1&&M("keydown",function(i){return n._sendKeydownToKeyManager(i)})},inputs:{dataSource:"dataSource",treeControl:"treeControl",levelAccessor:"levelAccessor",childrenAccessor:"childrenAccessor",trackBy:"trackBy",expansionKey:"expansionKey"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,n){t&1&&se(0,0)},dependencies:[H],encapsulation:2})}return r})(),C=(()=>{class r{_elementRef=h(R);_tree=h(pe);_tabindex=-1;_type="flat";get role(){return"treeitem"}set role(e){}get isExpandable(){return this._isExpandable()}set isExpandable(e){this._inputIsExpandable=e,!(this.data&&!this._isExpandable||!this._inputIsExpandable)&&(this._inputIsExpanded?this.expand():this._inputIsExpanded===!1&&this.collapse())}get isExpanded(){return this._tree.isExpanded(this._data)}set isExpanded(e){this._inputIsExpanded=e,e?this.expand():this.collapse()}isDisabled;typeaheadLabel;getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}activation=new L;expandedChange=new L;static mostRecentTreeNode=null;_destroyed=new m;_dataChanges=new m;_inputIsExpandable=!1;_inputIsExpanded=void 0;_shouldFocus=!0;_parentNodeAriaLevel;get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._dataChanges.next())}_data;get isLeafNode(){return this._tree.treeControl?.isExpandable!==void 0&&!this._tree.treeControl.isExpandable(this._data)?!0:this._tree.treeControl?.isExpandable===void 0&&this._tree.treeControl?.getDescendants(this._data).length===0}get level(){return this._tree._getLevel(this._data)??this._parentNodeAriaLevel}_isExpandable(){return this._tree.treeControl?!this.isLeafNode:this._inputIsExpandable}_getAriaExpanded(){return this._isExpandable()?String(this.isExpanded):null}_getSetSize(){return this._tree._getSetSize(this._data)}_getPositionInSet(){return this._tree._getPositionInSet(this._data)}_changeDetectorRef=h(P);constructor(){r.mostRecentTreeNode=this}ngOnInit(){this._parentNodeAriaLevel=ge(this._elementRef.nativeElement),this._tree._getExpansionModel().changed.pipe(u(()=>this.isExpanded),q()).subscribe(()=>this._changeDetectorRef.markForCheck()),this._tree._setNodeTypeIfUnset(this._type),this._tree._registerNode(this)}ngOnDestroy(){r.mostRecentTreeNode===this&&(r.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}getParent(){return this._tree._getNodeParent(this)??null}getChildren(){return this._tree._getNodeChildren(this)}focus(){this._tabindex=0,this._shouldFocus&&this._elementRef.nativeElement.focus(),this._changeDetectorRef.markForCheck()}unfocus(){this._tabindex=-1,this._changeDetectorRef.markForCheck()}activate(){this.isDisabled||this.activation.next(this._data)}collapse(){this.isExpandable&&this._tree.collapse(this._data)}expand(){this.isExpandable&&this._tree.expand(this._data)}makeFocusable(){this._tabindex=0,this._changeDetectorRef.markForCheck()}_focusItem(){this.isDisabled||this._tree._keyManager.focusItem(this)}_setActiveItem(){this.isDisabled||(this._shouldFocus=!1,this._tree._keyManager.focusItem(this),this._shouldFocus=!0)}_emitExpansionState(e){this.expandedChange.emit(e)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=x({type:r,selectors:[["cdk-tree-node"]],hostAttrs:["role","treeitem",1,"cdk-tree-node"],hostVars:5,hostBindings:function(t,n){t&1&&M("click",function(){return n._setActiveItem()})("focus",function(){return n._focusItem()}),t&2&&(ie("tabindex",n._tabindex),ne("aria-expanded",n._getAriaExpanded())("aria-level",n.level+1)("aria-posinset",n._getPositionInSet())("aria-setsize",n._getSetSize()))},inputs:{role:"role",isExpandable:[2,"isExpandable","isExpandable",N],isExpanded:"isExpanded",isDisabled:[2,"isDisabled","isDisabled",N],typeaheadLabel:[0,"cdkTreeNodeTypeaheadLabel","typeaheadLabel"]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["cdkTreeNode"]})}return r})();function ge(r){let o=r.parentElement;for(;o&&!ye(o);)o=o.parentElement;return o?o.classList.contains("cdk-nested-tree-node")?ae(o.getAttribute("aria-level")):0:-1}function ye(r){let o=r.classList;return!!(o?.contains("cdk-nested-tree-node")||o?.contains("cdk-tree"))}var Be=(()=>{class r extends C{_type="nested";_differs=h(O);_dataDiffer;_children;nodeOutlet;constructor(){super()}ngAfterContentInit(){this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),this._tree._getDirectChildren(this.data).pipe(f(this._destroyed)).subscribe(e=>this.updateChildrenNodes(e)),this.nodeOutlet.changes.pipe(f(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(e){let t=this._getNodeOutlet();if(e&&(this._children=e),t&&this._children){let n=t.viewContainer;this._tree.renderNodeChanges(this._children,this._dataDiffer,n,this._data)}else this._dataDiffer.diff([])}_clear(){let e=this._getNodeOutlet();e&&(e.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){let e=this.nodeOutlet;return e&&e.find(t=>!t._node||t._node===this)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=x({type:r,selectors:[["cdk-nested-tree-node"]],contentQueries:function(t,n,s){if(t&1&&B(s,H,5),t&2){let i;b(i=k())&&(n.nodeOutlet=i)}},hostAttrs:[1,"cdk-nested-tree-node"],exportAs:["cdkNestedTreeNode"],features:[oe([{provide:C,useExisting:r},{provide:_e,useExisting:r}]),te]})}return r})();var Pe=(()=>{class r{_tree=h(pe);_treeNode=h(C);recursive=!1;constructor(){}_toggle(){this.recursive?this._tree.toggleDescendants(this._treeNode.data):this._tree.toggle(this._treeNode.data),this._tree._keyManager.focusItem(this._treeNode)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=x({type:r,selectors:[["","cdkTreeNodeToggle",""]],hostAttrs:["tabindex","-1"],hostBindings:function(t,n){t&1&&M("click",function(i){return n._toggle(),i.stopPropagation()})("keydown.Enter",function(i){return n._toggle(),i.preventDefault()})("keydown.Space",function(i){return n._toggle(),i.preventDefault()})},inputs:{recursive:[2,"cdkTreeNodeToggleRecursive","recursive",N]}})}return r})();var Oe=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=ee({type:r});static \u0275inj=X({})}return r})();export{he as a,H as b,fe as c,pe as d,Be as e,Pe as f,Oe as g};
