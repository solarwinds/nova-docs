import{a as h,b as K}from"./chunk-IJSSJKCS.js";import{a as F,b as H,c as W,d as f,e as q,f as G}from"./chunk-HK5JFI63.js";import{b as R}from"./chunk-FLHK4Y4B.js";import{a as Q}from"./chunk-HB6OB2ZQ.js";import{a as $}from"./chunk-VKEWGOOU.js";import{n as L}from"./chunk-BEIUR5OZ.js";import{e as j,i as B}from"./chunk-LO2VWMBZ.js";import{a as V}from"./chunk-YILH52ZF.js";import{d as A}from"./chunk-OP3E7ERD.js";import{l as z}from"./chunk-EHNCPSLF.js";import{$b as P,Bc as I,Eb as C,Gc as E,Qb as a,Sb as w,Wb as d,Xb as l,Yb as x,Zc as D,ac as T,mc as u,nb as o,nc as s,qc as b,tb as m,uc as M,vc as N,wc as O,xa as _,xc as y,ya as g,yc as v,zb as k,zc as S}from"./chunk-MC3BMXIX.js";function J(r,p){if(r&1&&(d(0,"cdk-nested-tree-node",4),x(1,"button",5),v(2),l()),r&2){let e=p.$implicit;o(2),I(" ",e.name,", fromPage: ",e.page," ")}}function X(r,p){if(r&1){let e=T();d(0,"nui-paginator",14),u("pagerAction",function(n){_(e);let i=s().$implicit,c=y(1),U=s();return g(U.loadNodeItems(i,c,n))}),l()}if(r&2){let e=s().$implicit,t=s();a("id","nui-tree-paginator-component-"+e.name.toLowerCase())("page",1)("pageSize",t.pageSize)("total",t.nodesTotalItems[e.name])}}function Y(r,p){if(r&1){let e=T();d(0,"cdk-nested-tree-node",6,0)(2,"div",7),u("click",function(){let n=_(e).$implicit,i=y(1),c=s();return g(c.onToggleClick(n,i))}),x(3,"nui-icon",8),d(4,"span",9),v(5),l()(),d(6,"div",10)(7,"div",11),u("click",function(n){return _(e),g(n.stopPropagation())}),P(8,12),C(9,X,1,4,"nui-paginator",13),l()()()}if(r&2){let e=p.$implicit,t=s();o(3),b("icon",t.treeControl.isExpanded(e)?"triangle-down":"triangle-right"),o(2),S(e.name),o(),w("nui-tree__body--collapsed",!t.treeControl.isExpanded(e)),a("@expandedState",t.treeControl.isExpanded(e)?"expanded":"collapsed"),o(),a("busy",e.isLoading),o(2),a("ngIf",e.hasPagination&&t.nodesTotalItems[e.name])}}var ge=(()=>{class r{constructor(e,t,n){this.http=e,this.differ=t,this.eventBusService=n,this.pageSize=10,this.nodesTotalItems={},this.treeControl=new F(i=>i.children),this.dataSource=new L(K),this.hasChild=(i,c)=>!!c.children}onToggleClick(e,t){if(this.eventBusService.getStream(j).next(new MouseEvent("click")),e.hasPagination&&e.children&&!e.children.length){let n={page:1,pageSize:this.pageSize};this.loadNodeItems(e,t,n)}}loadNodeItems(e,t,n){e.isLoading||(e.isLoading=!0,this.http.getNodeItems(e.name,n.page,n.pageSize).subscribe(i=>{this.handleNodeTotalItems(e.name,i.total),this.handleNodeContent(e,t,i.items),e.isLoading=!1}))}handleNodeTotalItems(e,t){this.nodesTotalItems[e]=t}handleNodeContent(e,t,n){e.children=[];let i=this.differ.find(e.children).create();e.children=n,t.nodeOutlet.first.viewContainer.clear(),this.cdkTree.renderNodeChanges(e.children,i,t.nodeOutlet.first.viewContainer,e)}static{this.\u0275fac=function(t){return new(t||r)(m(h),m(D),m(B))}}static{this.\u0275cmp=k({type:r,selectors:[["nui-tree-paginator-test"]],viewQuery:function(t,n){if(t&1&&M(f,5),t&2){let i;N(i=O())&&(n.cdkTree=i.first)}},hostAttrs:["id","nui-tree-paginator-example"],standalone:!1,features:[E([h])],decls:3,vars:4,consts:[["nestedNode","cdkNestedTreeNode"],[3,"dataSource","treeControl"],["class","nui-tree__leaf",4,"cdkTreeNodeDef"],["class","nui-tree",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],[1,"nui-tree__leaf"],["nui-button","","displayStyle","action","type","button","disabled",""],[1,"nui-tree"],["cdkTreeNodeToggle","",1,"nui-tree__header",3,"click"],[1,"nui-tree__header-icon",3,"icon"],[1,"nui-tree__header-title"],[1,"nui-tree__body"],["nui-busy","",2,"min-height","20px",3,"click","busy"],["cdkTreeNodeOutlet",""],[3,"id","page","pageSize","total","pagerAction",4,"ngIf"],[3,"pagerAction","id","page","pageSize","total"]],template:function(t,n){t&1&&(d(0,"cdk-tree",1),C(1,J,3,2,"cdk-nested-tree-node",2)(2,Y,10,7,"cdk-nested-tree-node",3),l()),t&2&&(a("@.disabled",!0)("dataSource",n.dataSource)("treeControl",n.treeControl),o(2),a("cdkTreeNodeDefWhen",n.hasChild))},dependencies:[q,W,G,f,H,z,A,V,R,$],styles:[".nui-tree--expanded[_ngcontent-%COMP%]{padding-bottom:5px}.nui-tree__icon[_ngcontent-%COMP%]{align-items:center;align-self:flex-start;display:flex;flex-shrink:0;height:30px;justify-content:center;width:30px;margin-left:-7px}.nui-tree__header[_ngcontent-%COMP%]{align-items:center;border-radius:3px;cursor:pointer;display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.nui-tree__header[_ngcontent-%COMP%]:hover{background-color:var(--nui-color-bg-transparent-hover,rgba(17, 17, 17, .05))}.nui-tree__header-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;text-overflow:ellipsis;line-height:18px;font-size:13px;font-weight:600;color:#111;color:var(--nui-color-text-default,#111)}.nui-tree__header-icon[_ngcontent-%COMP%]{align-items:center;align-self:flex-start;display:flex;flex-shrink:0;height:30px;justify-content:center;width:30px}.nui-tree__header-content[_ngcontent-%COMP%]{align-items:center;display:flex;flex-grow:2;justify-content:flex-start;padding-left:5px;min-width:0;padding-right:5px}.nui-tree__header-content-icon[_ngcontent-%COMP%]{align-items:center;align-self:flex-start;flex-shrink:0;height:30px;justify-content:center;width:30px}.nui-tree__header-content--with-icon[_ngcontent-%COMP%]{padding-left:0}.nui-tree__header-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-grow:2;min-width:0;width:100%}.nui-tree__header.nui-expander__header--empty.nui-expander__header[_ngcontent-%COMP%]{display:inline-flex}.nui-tree__header.nui-expander__header--empty[_ngcontent-%COMP%]   .nui-expander__header-content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.nui-tree__custom-header[_ngcontent-%COMP%]{width:100%}.nui-tree__custom-header--empty[_ngcontent-%COMP%]{display:flex;width:auto}.nui-tree__body[_ngcontent-%COMP%]{border:none;border-left:dotted 2px #d9d9d9;border-left:dotted 2px var(--nui-color-line-default, #d9d9d9);color:#111;color:var(--nui-color-text-default, #111);margin-left:14px;padding-left:14px}.nui-tree__body.hide-left-border[_ngcontent-%COMP%]{border-left:0}.nui-tree__body.ng-animating[_ngcontent-%COMP%], .nui-tree__body--collapsed[_ngcontent-%COMP%]{overflow:hidden}.nui-tree__leaf[_ngcontent-%COMP%]{display:flex;align-items:center}.nui-tree__invisible[_ngcontent-%COMP%]{display:none}.nui-tree[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{min-height:20px}"],data:{animation:[Q]}})}}return r})();export{ge as a};
