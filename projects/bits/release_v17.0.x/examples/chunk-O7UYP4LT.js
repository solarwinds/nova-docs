import{a as ae}from"./chunk-GDNJ5QDM.js";import{a as d,b as L}from"./chunk-S55LKKD2.js";import{a as te,b as ie,d as re,e as ne,f as O,i as oe}from"./chunk-OX7W4O7J.js";import{b as se}from"./chunk-PQ3EDQC5.js";import{a as ce}from"./chunk-MNLBQFGT.js";import{a as Y}from"./chunk-7FMIATJZ.js";import{r as Z,u as y,v as ee}from"./chunk-BEIUR5OZ.js";import{c as X}from"./chunk-WLK22LTS.js";import{k as U,l as G,q as J}from"./chunk-EHNCPSLF.js";import{$b as g,Eb as u,Ha as C,Jc as v,Kc as N,La as z,Pb as P,Qb as a,Rb as H,Sb as b,Tc as K,Ub as q,Wb as c,Xb as p,Yc as W,Zb as Q,Zc as $,_b as j,ac as x,ba as M,da as E,g as V,mc as S,nb as l,nc as n,oc as A,pc as B,tb as _,uc as I,vc as k,wc as D,xa as h,xc as T,ya as f,zb as F}from"./chunk-MC3BMXIX.js";import{g as de}from"./chunk-VBFW7A5V.js";var le=de(ce());var pe=["dropListArea"],me=[[["","repeatHeaderTemplate",""]]],ue=["[repeatHeaderTemplate]"],R=r=>({item:r}),ge=(r,s)=>({item:r,itemIndex:s});function he(r,s){if(r&1){let e=x();c(0,"div",16)(1,"div",17),S("mouseover",function(){h(e);let t=n().itemIndex,o=n();return f(o.mousedOver[t]=!0)})("mouseout",function(){h(e);let t=n().itemIndex,o=n();return f(o.mousedOver[t]=!1)}),g(2,14),p()()}if(r&2){let e=n().item,i=T(1),t=n();b("hide",!t.draggable)("invisible",!t.isItemDraggable(e)),l(),b("nui-dnd-handle",!i.disabled),l(),a("ngTemplateOutlet",t.dragHandleTemplateRef)("ngTemplateOutletContext",v(8,R,e))}}function fe(r,s){if(r&1&&(c(0,"div"),g(1,14),p()),r&2){let e=n(2).item,i=n();b("nui-dnd-preview",!i.isItemDisabled(e)),l(),a("ngTemplateOutlet",i.dragPreviewTemplateRef)("ngTemplateOutletContext",v(4,R,e))}}function _e(r,s){r&1&&(c(0,"div",18),u(1,fe,2,6,"div",19),p())}function be(r,s){if(r&1){let e=x();c(0,"nui-checkbox",20),S("valueChange",function(t){h(e);let o=n().item,m=n();return f(m.itemClicked(t,o))}),p()}if(r&2){let e=n().item,i=n();a("value",e)("checked",i.isItemSelected(e))("disabled",i.isItemDisabled(e))}}function ve(r,s){if(r&1){let e=x();c(0,"nui-radio",21),S("click",function(t){h(e);let o=n().item,m=n();return f(m.itemClicked(t,o))}),p()}if(r&2){let e=n().item,i=n();a("value",e)("checked",i.isItemSelected(e))("disabled",i.isItemDisabled(e))}}function Ce(r,s){if(r&1&&(c(0,"div",22),g(1,14),p()),r&2){let e=n().item,i=n();l(),a("ngTemplateOutlet",i.actionsTemplateRef)("ngTemplateOutletContext",v(2,R,e))}}function xe(r,s){if(r&1){let e=x();c(0,"nui-repeat-item",7,2),S("rowClicked",function(t){let o=h(e).item,m=n();return f(m.itemClicked(t,o))}),u(2,he,3,10,"div",8)(3,_e,2,0,"div",9),c(4,"div",10),u(5,be,1,3,"nui-checkbox",11)(6,ve,1,3,"nui-radio",12),p(),c(7,"div",13),g(8,14),p(),u(9,Ce,2,4,"div",15),p()}if(r&2){let e=s.item,i=s.itemIndex,t=n();b("repeat-group-item--disabled",t.isItemDisabled(e))("nui-dnd-without-drag-handle",t.isItemDraggable(e)&&!t.dragHandleTemplateRef)("nui-dnd-raised-state",t.isItemDraggable(e)&&t.mousedOver[i]),a("cdkDragData",e)("cdkDragPreviewClass",t.dragPreviewClass)("cdkDragDisabled",!t.isItemDraggable(e))("clickable",t.isItemClickable(e))("selectable",t.isItemSelectable(e))("selected",t.isItemSelected(e)&&!t.isItemDisabled(e)),l(2),a("ngIf",t.dragHandleTemplateRef&&!t.virtualScroll),l(),a("ngIf",t.dragPreviewTemplateRef&&!t.virtualScroll),l(2),a("ngIf",t.isModeMulti()),l(),a("ngIf",t.isModeRadio()),l(2),a("ngTemplateOutlet",t.repeatItemTemplateRef)("ngTemplateOutletContext",v(19,R,e)),l(),a("ngIf",t.actionsTemplateRef)}}function Se(r,s){if(r&1&&g(0,14),r&2){let e=s.$implicit,i=s.index;n(2);let t=T(1);a("ngTemplateOutlet",t)("ngTemplateOutletContext",N(2,ge,e,i))}}function Re(r,s){if(r&1&&(c(0,"div"),u(1,Se,1,5,"ng-container",23),p()),r&2){let e=n();l(),a("ngForOf",e.itemsSource)("ngForTrackBy",e.itemConfig==null?null:e.itemConfig.trackBy)}}function we(r,s){if(r&1&&(Q(0),g(1,14),j()),r&2){let e=s.$implicit;n(2);let i=T(1);l(),a("ngTemplateOutlet",i)("ngTemplateOutletContext",v(2,R,e))}}function Ie(r,s){if(r&1&&(c(0,"cdk-virtual-scroll-viewport",24),u(1,we,2,4,"ng-container",25),p()),r&2){let e=n();a("itemSize",e.itemSize),l(),a("cdkVirtualForOf",e.itemsSource)("cdkVirtualForTemplateCacheSize",0)}}var ot=(()=>{class r{set draggable(e){this._draggable=e,this.initializeCDKDropList(),this.dropListRef&&(this.dropListRef.disabled=!this._draggable),!this._draggable&&this._reorderable&&(this._reorderable=!1,this.reorderableChange.emit(this._reorderable))}get draggable(){return this._draggable}set reorderable(e){this._draggable===!1&&this.logger.warn("'reorderable' property must be used only when draggable is true"),e&&!this._draggable&&(this._draggable=!0,this.draggableChange.emit(e)),this.dropListRef&&this._reorderable!==e&&(this.dropListRef.sortingDisabled=!e),this._reorderable=e}get reorderable(){return this._reorderable}get viewportRef(){if(!this.virtualScroll)throw new Error("VirtualScroll is not enabled");return this._viewportRef}get role(){return this.selectionMode!==d.none?"listbox":"list"}get ariaMultiselectable(){return this.isModeMulti()||null}constructor(e,i,t,o,m){this.changeDetector=e,this.logger=i,this.iterableDiffers=t,this.dragDropService=o,this.elRef=m,this.draggableChange=new C(!0),this.reorderableChange=new C(!0),this.width="100%",this.preventRowClick=!1,this.dragPreviewClass="nui-dnd-preview",this.selectionMode=d.none,this.virtualScroll=!1,this.selection=[],this.itemsReordered=new C,this.highlightSelectedItem=!0,this.selectionChange=new C,this.mousedOver=[],this.selectionHasChanged=!1,this.dropListDestroyed=new V,this.intersectionObserverCallback=(w,ke)=>{w[0].isIntersecting&&this.virtualScroll&&this.viewportRef.checkViewportSize()}}ngOnInit(){this.intersectionObserver=new IntersectionObserver(this.intersectionObserverCallback),this.elRef.nativeElement instanceof Element&&this.intersectionObserver.observe(this.elRef.nativeElement),(this.dragPreviewTemplateRef||this.dragHandleTemplateRef||this._reorderable===!0)&&(this._draggable=!0,this.draggableChange.emit(this._draggable)),this.paddingSize=this.paddingSize in L?this.paddingSize:L.compact,!this.itemSize&&this.virtualScroll&&this.logger.error("ERROR: To use virtual scroll feature please set correct value to the 'itemSize' input!"),this.itemsSourceDiff=this.iterableDiffers.find(this.itemsSource||[]).create()}ngDoCheck(){this.itemsSourceDiff.diff(this.itemsSource)&&this.changeDetector.markForCheck()}ngAfterViewInit(){this.initializeCDKDropList()}ngOnDestroy(){this.intersectionObserver?.unobserve(this.elRef.nativeElement),this.disposeCDKDropList()}update(){this.changeDetector.detectChanges()}getFilters(){let e={type:"selection",value:{selection:this.selection,itemsSource:this.itemsSource,selectionMode:this.selectionMode,selectionHasChanged:this.selectionHasChanged}};return this.selectionHasChanged=!1,e}isItemSelected(e){if(!this.highlightSelectedItem)return!1;switch(this.selectionMode){case d.single:case d.radio:case d.singleWithRequiredSelection:case d.radioWithNonRequiredSelection:return this.selection&&(0,le.default)(e,this.selection[0]);case d.multi:return!!(this.selection&&this.selection.length&&this.selection.indexOf(e)!==-1);default:return!1}}itemClicked(e,i){if(!(this.selectionMode===d.none||this.isItemDisabled(i))){if(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),this.isModeMulti()){this.selectionHasChanged=!0,this.multiSelectionChanged(i);return}(this.selectionMode===d.singleWithRequiredSelection||this.selectionMode===d.radio)&&(this.selection=[i]),(this.selectionMode===d.single||this.selectionMode===d.radioWithNonRequiredSelection)&&(this.selection.indexOf(i)!==-1?this.selection=[]:this.selection=[i]),this.changeDetector.markForCheck(),this.selectionHasChanged=!0,this.selectionChange.emit(this.selection)}}multiSelectionChanged(e){this.selection.indexOf(e)===-1?this.selection=[...this.selection,e]:this.selection=this.selection.filter(i=>i!==e),this.selectionChange.emit(this.selection)}isModeMulti(){return this.selectionMode===d.multi}isModeRadio(){return[d.radio,d.radioWithNonRequiredSelection].includes(this.selectionMode)}isItemClickable(e){return!this.preventRowClick&&!this.isItemDisabled(e)}isItemSelectable(e){return!this.isItemDisabled(e)}isItemDisabled(e){return e.disabled??!!this.itemConfig?.isDisabled?.(e)}isItemDraggable(e){return this.virtualScroll||this.isItemDisabled(e)?!1:this.itemConfig&&this.draggable===!1?(this.logger.warn(`Draggable config per item is available only when ${"draggable"} is set to true`),!1):this.itemConfig?.isDraggable?.(e)??this.draggable}initializeCDKDropList(){!this.virtualScroll&&this.dropListArea&&this._draggable&&!this.dropListRef&&(this.dropListRef=this.dragDropService.createDropList(this.dropListArea),this.dropListRef.disabled=!this._draggable,this.dropListRef.data=this.itemsSource,this.dropListRef.dropped.pipe(E(e=>this.itemDropped(e)),M(this.dropListDestroyed)).subscribe(),this.dropListRef.withItems(this.draggableElements.map(e=>e._dragRef)))}disposeCDKDropList(){this.dropListRef&&(this.dropListRef.dispose(),this.dropListDestroyed.next(),this.dropListDestroyed.complete())}itemDropped(e){let i=e.item.data,t=this.itemsSource.indexOf(i.data,0),o=[...this.itemsSource],m=[...this.itemsSource],w=!0;this.mousedOver=[],e.previousContainer===e.container?(te(m,t,e.currentIndex),w=t!==e.currentIndex):ie(e.previousContainer.data,e.container.data,t,e.currentIndex),w&&this.itemsReordered.emit({item:i,previousIndex:t,currentIndex:e.currentIndex,currentState:m,previousState:o,dropListRef:this.dropListRef})}static{this.\u0275fac=function(i){return new(i||r)(_(W),_(X),_($),_(re),_(z))}}static{this.\u0275cmp=F({type:r,selectors:[["nui-repeat"]],viewQuery:function(i,t){if(i&1&&(I(pe,5),I(y,5),I(O,5)),i&2){let o;k(o=D())&&(t.dropListArea=o.first),k(o=D())&&(t._viewportRef=o.first),k(o=D())&&(t.draggableElements=o)}},hostVars:6,hostBindings:function(i,t){i&2&&(P("role",t.role)("aria-multiselectable",t.ariaMultiselectable),H("width",t.width),b("virtual-scroll-viewport",t.virtualScroll))},inputs:{draggable:"draggable",reorderable:"reorderable",preventRowClick:"preventRowClick",repeatItemTemplateRef:"repeatItemTemplateRef",dragHandleTemplateRef:"dragHandleTemplateRef",dragPreviewClass:"dragPreviewClass",dragPreviewTemplateRef:"dragPreviewTemplateRef",actionsTemplateRef:"actionsTemplateRef",selectionMode:"selectionMode",paddingSize:"paddingSize",virtualScroll:"virtualScroll",itemSize:"itemSize",selection:"selection",itemConfig:"itemConfig",itemsSource:"itemsSource",highlightSelectedItem:"highlightSelectedItem"},outputs:{draggableChange:"draggableChange",reorderableChange:"reorderableChange",itemsReordered:"itemsReordered",selectionChange:"selectionChange"},standalone:!1,ngContentSelectors:ue,decls:9,vars:5,consts:[["repeatItems",""],["dropListArea",""],["drag","cdkDrag"],[1,"nui-repeat-header"],["aria-dropeffect","move",1,"repeat-group"],[4,"ngIf"],[3,"itemSize",4,"ngIf"],["cdkDrag","",1,"repeat-group-item",3,"rowClicked","cdkDragData","cdkDragPreviewClass","cdkDragDisabled","clickable","selectable","selected"],["class","nui-repeat-item__controls-drag-handle align-self-center",3,"hide","invisible",4,"ngIf"],["class","nui-repeat-item__controls-drag-handle",4,"ngIf"],[1,"nui-repeat-item__controls-container"],["class","nui-repeat-item__checkbox",3,"value","checked","disabled","valueChange",4,"ngIf"],["class","nui-repeat-item__radio",3,"value","checked","disabled","click",4,"ngIf"],[1,"nui-repeat-item__content-container"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","nui-repeat-item__actions-container",4,"ngIf"],[1,"nui-repeat-item__controls-drag-handle","align-self-center"],["cdkDragHandle","",3,"mouseover","mouseout"],[1,"nui-repeat-item__controls-drag-handle"],[3,"nui-dnd-preview",4,"cdkDragPreview"],[1,"nui-repeat-item__checkbox",3,"valueChange","value","checked","disabled"],[1,"nui-repeat-item__radio",3,"click","value","checked","disabled"],[1,"nui-repeat-item__actions-container"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf","ngForTrackBy"],[3,"itemSize"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize"]],template:function(i,t){i&1&&(A(me),u(0,xe,10,21,"ng-template",null,0,K),c(2,"div")(3,"div",3),B(4),p(),c(5,"ul",4,1),u(7,Re,2,2,"div",5)(8,Ie,2,3,"cdk-virtual-scroll-viewport",6),p()()),i&2&&(l(2),q("nui-repeat nui-repeat__",t.paddingSize,""),l(5),a("ngIf",!t.virtualScroll),l(),a("ngIf",t.virtualScroll&&t.itemSize))},dependencies:[U,G,J,Y,se,Z,ee,y,O,ne,oe,ae],styles:[`.nui .nui-repeat{height:inherit}.nui .nui-repeat__normal .nui-repeat-item{padding-top:5px;padding-bottom:5px}.nui .nui-repeat>ul>cdk-virtual-scroll-viewport{height:100%}.nui .nui-repeat__compact .nui-repeat-item{padding-top:0;padding-bottom:0}.nui .nui-repeat-header{color:var(--nui-color-text-default,#111);background-color:var(--nui-color-bg-light,#fff)}.nui .nui-repeat .repeat-group .nui-repeat-item{cursor:auto}.nui .nui-repeat .repeat-group .nui-repeat-item.nui-repeat-item--clickable{cursor:pointer}.nui .nui-repeat .repeat-group .nui-repeat-item.nui-repeat-item--clickable:hover:not(.nui-repeat-item--selected){border-color:var(--nui-color-line-default,#d9d9d9)}.nui .nui-repeat .repeat-group-item:first-child .nui-repeat-item{border-top:solid 1px;border-top-color:var(--nui-color-line-default,#d9d9d9)}.nui .nui-repeat .repeat-group{margin-bottom:0;padding-left:0;margin-left:0;height:inherit}.nui .nui-repeat .repeat-group-item{position:relative;display:block;color:var(--nui-color-text-default,#111);background-color:var(--nui-color-bg-light,#fff);-webkit-transition:box-shadow .4s;-o-transition:box-shadow .4s;transition:box-shadow .4s}.nui .nui-repeat .repeat-group-item:first-child{border-top-right-radius:0;border-top-left-radius:0}.nui .nui-repeat .repeat-group-item:last-child{margin-bottom:0;border-bottom-right-radius:0;border-bottom-left-radius:0}.nui .nui-repeat .repeat-group-item:hover{cursor:pointer}.nui .nui-repeat .repeat-group-item:hover.nui-dnd-without-drag-handle:not(.cdk-drag-disabled){cursor:move;z-index:1;box-sizing:border-box;box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui .nui-repeat .repeat-group-item--disabled{color:var(--nui-color-text-disabled,rgba(17, 17, 17, .3))}.nui .nui-repeat .repeat-group-item--disabled:hover{cursor:not-allowed}.nui .nui-repeat .nui-repeat-item{border-bottom:solid 1px;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}@supports (-ms-ime-align: auto){.nui .nui-repeat .nui-repeat-item{margin-bottom:.5px}}
`],encapsulation:2,changeDetection:0})}}return r})();export{ot as a};
