import{$ as I,P as j,fa as L}from"./chunk-QFUYJXD4.js";import{a as M}from"./chunk-CAUUXJ5Z.js";import{a as G}from"./chunk-BDWHD4BJ.js";import{a as q}from"./chunk-ZWYP6B5B.js";import{b as $}from"./chunk-CMTYQMWG.js";import{g as P}from"./chunk-6RVLRIW3.js";import{b as B}from"./chunk-WJ3JZRMK.js";import{b as Q}from"./chunk-HOKHJISD.js";import{a as z}from"./chunk-WVQR62UN.js";import{a as J}from"./chunk-5VDV6BXS.js";import{a as W}from"./chunk-32QN6MNL.js";import{d as Y}from"./chunk-W53BDDEF.js";import{d as A}from"./chunk-7KV4WPOL.js";import{l as U,m as V}from"./chunk-N5FUFMYY.js";import{Aa as T,Gb as m,Ib as a,Ja as h,Ka as C,Mc as w,Ob as o,Pb as s,Qb as _,Ub as N,ec as S,fc as u,mc as v,nc as y,ob as i,oc as x,pb as D,pc as b,qc as p,rc as d,sc as O,yc as R}from"./chunk-7UJBXEVU.js";import{a as k,g as F,j as g}from"./chunk-XR34LRGE.js";var Z=F(Y()),H=F(J());var K=["filteringSearch"],X=["filteringSorter"],ee=["filteringRepeat"],te=["filteringPaginator"];function ie(r,c){if(r&1&&(o(0,"div"),p(1),s(),o(2,"div"),p(3),s()),r&2){let e=c.item;i(),O("",e.color,"\xA0"),i(2),d(e.status)}}function re(r,c){r&1&&(o(0,"div",22),_(1,"nui-image",23),o(2,"p",24),p(3,"No data to show"),s()()),r&2&&(i(),a("isWatermark",!0))}function ne(r,c){if(r&1&&(o(0,"span",28),p(1),s()),r&2){let e=u().$implicit,n=u();i(),d(n.showStatus(e))}}function ae(r,c){if(r&1&&(o(0,"nui-checkbox",25)(1,"div",26),_(2,"nui-icon",27),o(3,"span",28),p(4),s(),m(5,ne,2,1,"span",29),s()()),r&2){let e=c.$implicit,n=u();a("value",e)("checked",n.isColorTypeChecked(e)),i(2),a("icon",n.statusIcons[e].iconName),i(2),d(e),i(),a("ngIf",n.isGreaterThanZero(n.showStatus(e)))}}function oe(r,c){if(r&1&&(o(0,"span",28),p(1),s()),r&2){let e=u().$implicit,n=u();i(),d(n.showColor(e))}}function se(r,c){if(r&1&&(o(0,"nui-checkbox",25)(1,"div",26),_(2,"nui-icon",27),o(3,"span",28),p(4),s(),m(5,oe,2,1,"span",29),s()()),r&2){let e=c.$implicit,n=u();a("value",e)("checked",n.isColorCriteriaChecked(e)),i(2),a("icon",n.colorIcons[e].iconName),i(2),d(e),i(),a("ngIf",n.isGreaterThanZero(n.showColor(e)))}}function le(r,c){if(r&1&&(o(0,"div"),_(1,"nui-repeat",30,5),s()),r&2){let e=u(),n=b(1);i(),a("itemsSource",e.filteringState==null||e.filteringState.repeat==null?null:e.filteringState.repeat.itemsSource)("repeatItemTemplateRef",n)}}var ce=[{color:"regular-blue",status:"Critical"},{color:"regular-green",status:"Warning"},{color:"regular-yellow",status:"Up"},{color:"regular-cyan ",status:"Critical"},{color:"regular-magenta",status:"Warning"},{color:"regular-black",status:"Up"},{color:"regular-orange",status:"Up"},{color:"regular-rose",status:"Up"},{color:"regular-violet",status:"Up"},{color:"regular-azure",status:"Critical"},{color:"dark-blue",status:"Warning"},{color:"dark-green",status:"Up"},{color:"dark-yellow",status:"Critical"},{color:"dark-cyan ",status:"Warning"},{color:"dark-magenta",status:"Up"},{color:"dark-black",status:"Critical"},{color:"dark-orange",status:"Warning"},{color:"dark-rose",status:"Up"},{color:"dark-violet",status:"Critical"},{color:"dark-azure",status:"Warning"},{color:"light-blue",status:"Up"},{color:"light-green",status:"Critical"},{color:"light-yellow",status:"Warning"},{color:"light-cyan",status:"Up"},{color:"light-magenta",status:"Critical"},{color:"light-black",status:"Warning"},{color:"light-orange",status:"Up"},{color:"light-rose",status:"Critical"},{color:"light-violet",status:"Warning"},{color:"light-azure",status:"Up"}],ke=(()=>{class r{constructor(e){this.dataSourceService=e,this.panelOptions={panelMode:"collapsible",heading:"Filters"},this.colorExpanderOptions={expanded:!0,header:"Colors"},this.statusExpanderOptions={expanded:!0,header:"Statuses"},this.statusIcons={Critical:{iconName:"status_critical"},Warning:{iconName:"status_warning"},Up:{iconName:"status_up"}},this.colorIcons={azure:{iconName:"record"},black:{iconName:"status_up"},blue:{iconName:"signal-0"},cyan:{iconName:"signal-0"},green:{iconName:"signal-1"},orange:{iconName:"signal-2"},rose:{iconName:"signal-0"},violet:{iconName:"signal-0"},yellow:{iconName:"signal-0"},brown:{iconName:"signal-0"}},this.allStatuses=["Warning","Critical","Up"],this.allColors=["azure","black","blue","cyan","green","orange","rose","violet","yellow","brown"],this.selectedColorTypes=["Up"],this.selectedCriteriaColors=["azure"],this.sorterItems=[{title:$localize`Color`,value:"color"}],this.initialSortDirection=P.ascending,this.sortBy=this.sorterItems[0].value,this.filteringState={repeat:{itemsSource:[]},color:[],status:[],paginator:{total:void 0}},this.page=1,this.searchTerm="",this.chosenColors=[],this.chosenStatuses=[],this.registerComponents=()=>({color:{componentInstance:{detectFilterChanges:!0,getFilters:()=>({type:"string[]",value:this.chosenColors,metadata:{allCategories:this.allColors}})}},status:{componentInstance:{detectFilterChanges:!0,getFilters:()=>({type:"string[]",value:this.chosenStatuses,metadata:{allCategories:this.allStatuses}})}},search:{componentInstance:this.filteringSearch},sorter:{componentInstance:this.filteringSorter},paginator:{componentInstance:this.filteringPaginator}}),this.dataSourceService.setData(ce)}ngAfterViewInit(){return g(this,null,function*(){this.chosenColors=[...this.selectedCriteriaColors],this.chosenStatuses=[...this.selectedColorTypes],this.dataSourceService.registerComponent(k({},this.registerComponents())),this.outputsSubscription=this.dataSourceService.outputsSubject.subscribe(e=>{this.filteringState=e,e&&e.paginator&&e.paginator.reset&&this.filteringPaginator.goToPage(1)}),yield this.applyFilters()})}ngOnDestroy(){this.outputsSubscription&&this.outputsSubscription.unsubscribe()}applyFilters(){return g(this,null,function*(){yield this.dataSourceService.applyFilters()})}onSorterAction(e){return g(this,null,function*(){this.sortBy=e.newValue.sortBy,yield this.applyFilters()})}onSelectedCriteriaChange(e){return g(this,null,function*(){this.chosenColors=e,yield this.applyFilters()})}onSelectedColorTypesChange(e){return g(this,null,function*(){this.chosenStatuses=e,yield this.applyFilters()})}isColorCriteriaChecked(e){return this.selectedCriteriaColors.indexOf(e)>-1}isColorTypeChecked(e){return this.selectedColorTypes.indexOf(e)>-1}hasItems(){return!(0,H.default)((0,Z.default)(this,"filteringState.repeat.itemsSource"))}showStatus(e){return this.filteringState.status?this.filteringState.status[e]:this.filteringState.status}showColor(e){return this.filteringState.color?this.filteringState.color[e]:this.filteringState.color}isGreaterThanZero(e){return e>0}static{this.\u0275fac=function(n){return new(n||r)(D(I))}}static{this.\u0275cmp=T({type:r,selectors:[["nui-client-side-filtering-data-source-example"]],viewQuery:function(n,t){if(n&1&&(v(K,5),v(X,5),v(ee,5),v(te,5)),n&2){let l;y(l=x())&&(t.filteringSearch=l.first),y(l=x())&&(t.filteringSorter=l.first),y(l=x())&&(t.filteringRepeat=l.first),y(l=x())&&(t.filteringPaginator=l.first)}},features:[R([{provide:I,useClass:L}])],decls:27,vars:20,consts:[["listRepeatItemTemplate",""],["emptyListTemplate",""],["filteringSorter",""],["filteringSearch",""],["filteringPaginator",""],["filteringRepeat",""],["id","collapsible-panel",3,"panelMode"],["nuiPanelEmbeddedHeading",""],["nuiPanelEmbeddedBody",""],["icon","orion-sitemaster",1,"mb-5",3,"open","header"],["id","nui-demo-checkbox-group-basic","name","cType",3,"valuesChange","values"],[3,"value","checked",4,"ngFor","ngForOf"],["id","nui-demo-checkbox-group-basic","name","criteriaColor",3,"valuesChange","values"],[1,"push-down"],[1,"d-flex","flex-row"],[1,"mb-3",3,"hidden"],[3,"sorterAction","itemsSource","selectedItem","sortDirection"],[1,"ml-auto"],[3,"search","value"],[4,"ngIf","ngIfElse"],[1,"mt-3",3,"hidden"],[3,"pagerAction","page","total"],[1,"d-flex","flex-column","align-items-center"],["image","no-data-to-show",3,"isWatermark"],[1,"nui-text-small"],[3,"value","checked"],[1,"d-flex","align-items-center"],[1,"mr-2",3,"icon"],[1,"mr-2"],["class","mr-2",4,"ngIf"],["paddingSize","normal",3,"itemsSource","repeatItemTemplateRef"]],template:function(n,t){if(n&1){let l=N();m(0,ie,4,2,"ng-template",null,0,w)(2,re,4,1,"ng-template",null,1,w),o(4,"div")(5,"nui-panel",6)(6,"div",7),p(7),s(),o(8,"div",8)(9,"nui-expander",9)(10,"nui-checkbox-group",10),S("valuesChange",function(f){return h(l),C(t.onSelectedColorTypesChange(f))}),m(11,ae,6,5,"nui-checkbox",11),s()(),o(12,"nui-expander",9)(13,"nui-checkbox-group",12),S("valuesChange",function(f){return h(l),C(t.onSelectedCriteriaChange(f))}),m(14,se,6,5,"nui-checkbox",11),s()()(),o(15,"div",13)(16,"div",14)(17,"div",15)(18,"nui-sorter",16,2),S("sorterAction",function(f){return h(l),C(t.onSorterAction(f))}),s()(),o(20,"div",17)(21,"nui-search",18,3),S("search",function(){return h(l),C(t.applyFilters())}),s()()(),m(23,le,3,2,"div",19),o(24,"div",20)(25,"nui-paginator",21,4),S("pagerAction",function(){return h(l),C(t.applyFilters())}),s()()()()()}if(n&2){let l=b(3);i(5),a("panelMode",t.panelOptions.panelMode),i(2),d(t.panelOptions.heading),i(2),a("open",t.statusExpanderOptions.expanded)("header",t.statusExpanderOptions.header),i(),a("values",t.selectedColorTypes),i(),a("ngForOf",t.allStatuses),i(),a("open",t.colorExpanderOptions.expanded)("header",t.colorExpanderOptions.header),i(),a("values",t.selectedCriteriaColors),i(),a("ngForOf",t.allColors),i(3),a("hidden",!t.hasItems()),i(),a("itemsSource",t.sorterItems)("selectedItem",t.sortBy)("sortDirection",t.initialSortDirection),i(3),a("value",t.searchTerm),i(2),a("ngIf",t.hasItems())("ngIfElse",l),i(),a("hidden",!t.hasItems()),i(),a("page",t.page)("total",t.filteringState==null||t.filteringState.paginator==null?null:t.filteringState.paginator.total)}},dependencies:[U,V,$,z,A,B,G,M,j,W,Q,q],styles:[".push-down[_ngcontent-%COMP%]{min-height:550px}"]})}}return r})();export{ke as a};
