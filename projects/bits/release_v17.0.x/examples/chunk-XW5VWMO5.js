import{a as B,b as G,c as H,d as m,e as J,f as K}from"./chunk-KHXTZZZO.js";import{a as q}from"./chunk-WJ3JZRMK.js";import{a as Q}from"./chunk-32QN6MNL.js";import{a as W}from"./chunk-A5U7KQB6.js";import{q as R,u as F}from"./chunk-CHJVZ6O7.js";import{a as $}from"./chunk-QRWA7LTP.js";import{d as j}from"./chunk-7KV4WPOL.js";import{m as A}from"./chunk-N5FUFMYY.js";import{$c as E,Aa as M,Gb as x,Ib as c,Ja as a,Ka as h,Kb as T,Ob as l,Pb as _,Qb as f,Tb as S,U as b,Ub as C,ec as u,fc as d,ic as P,mc as N,nc as O,oa as w,ob as o,oc as I,pb as g,pc as L,qc as k,rc as D,tc as V,w as v,yc as z}from"./chunk-7UJBXEVU.js";function X(r,p){if(r&1){let e=C();l(0,"cdk-nested-tree-node",4),f(1,"button",5),l(2,"nui-checkbox",6),u("valueChange",function(){let n=a(e).$implicit,i=d();return h(i.leafItemSelectionToggle(n))}),k(3),_()()}if(r&2){let e=p.$implicit,t=d();o(2),c("checked",t.isParentNodeCheckedOn(e)),o(),D(e.name)}}function Y(r,p){if(r&1&&f(0,"nui-spinner",15),r&2){let e=d().$implicit;c("show",e.isLoading)("delay",0)}}function Z(r,p){if(r&1){let e=C();l(0,"cdk-nested-tree-node",7,0)(2,"div",8),u("click",function(){let n=a(e).$implicit,i=L(1),s=d();return h(s.loadMore(n,i))}),f(3,"nui-icon",9),l(4,"nui-checkbox",10),u("click",function(n){return a(e),h(n.stopPropagation())})("valueChange",function(){let n=a(e).$implicit,i=d();return h(i.branchItemSelectionToggle(n))}),l(5,"span",11),k(6),_()()(),l(7,"div",12),x(8,Y,1,2,"nui-spinner",13),S(9,14),_()()}if(r&2){let e=p.$implicit,t=d();o(3),P("icon",t.treeControl.isExpanded(e)?"triangle-down":"triangle-right"),o(),c("checked",t.descendantsAllSelected(e)||t.isParentNodeCheckedOn(e))("indeterminate",t.descendantsPartiallySelected(e)),o(2),V("",e.name," (",e.length,")"),o(),T("nui-tree__body--collapsed",!t.treeControl.isExpanded(e)),c("@expandedState",t.treeControl.isExpanded(e)?"expanded":"collapsed"),o(),c("ngIf",e.isLoading)}}var y=[{name:"Servers",children:[],length:3,isLoading:!1}],U=(()=>{class r{get(){return v({servers:[{name:"Microsoft Server",children:[],length:3,load:"ms-servers"},{name:"Apache Tomcat",children:[{name:"Version 1"},{name:"Version 2",children:[],load:"apache-version-2",length:3},{name:"Version 3"}],length:3,isLoading:!1},{name:"nginx"}],"apache-version-2":[{name:"1.0.5"},{name:"2.1.4"},{name:"8.9.0"}],"ms-servers":[{name:"2019"},{name:"2017"},{name:"2013"}]}).pipe(b(3e3))}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275prov=w({token:r,factory:r.\u0275fac})}}return r})(),_e=(()=>{class r{constructor(e,t){this.http=e,this.differ=t,this.selectionModel=new F(!0),this.treeControl=new B(n=>n.children),this.dataSource=new R(y),this.hasChild=(n,i)=>!!i.length}loadMore(e,t){let n=this.differ.find(e.children).create();e.children?.length===e.length||e.isLoading||(e.isLoading=!0,this.http.get().subscribe(i=>{e.isLoading=!1,e?.load?e.children=i[e?.load]:e.children=i.servers,this.cdkTree.renderNodeChanges(e.children,n,t.nodeOutlet.first.viewContainer,e)}))}descendantsAllSelected(e){let t=this.treeControl.getDescendants(e);return t.length>0&&t.every(n=>this.selectionModel.isSelected(n))}descendantsPartiallySelected(e){return this.treeControl.getDescendants(e).some(i=>this.selectionModel.isSelected(i))&&!this.descendantsAllSelected(e)}branchItemSelectionToggle(e){this.selectionModel.toggle(e);let t=this.treeControl.getDescendants(e);this.selectionModel.isSelected(e)?this.selectionModel.select(...t):this.selectionModel.deselect(...t),t.forEach(n=>{this.selectionModel.isSelected(n)}),this.checkAllParentsSelection(e)}leafItemSelectionToggle(e){this.selectionModel.toggle(e),this.checkAllParentsSelection(e)}isParentNodeCheckedOn(e){return this.selectionModel.isSelected(this.getParentNode(e))&&this.selectionModel.select(e),this.selectionModel.isSelected(e)}checkAllParentsSelection(e){let t=this.getParentNode(e);for(;t;)this.checkRootNodeSelection(t),t=this.getParentNode(t)}checkRootNodeSelection(e){let t=this.selectionModel.isSelected(e),n=this.treeControl.getDescendants(e),i=n.length>0&&n.every(s=>this.selectionModel.isSelected(s));t&&!i?this.selectionModel.deselect(e):!t&&i&&this.selectionModel.select(e)}getParentNode(e){let t;if(y.find(i=>i===e))return;let n=i=>{if(!(t||!i.children)){if(i.children.find(s=>s===e)){t=i;return}return i.children.find(n)}};if(y.forEach(n),!t)throw new Error("Parent wasn't found");return t}static{this.\u0275fac=function(t){return new(t||r)(g(U),g(E))}}static{this.\u0275cmp=M({type:r,selectors:[["nui-tree-checkbox-lazy"]],viewQuery:function(t,n){if(t&1&&N(m,5),t&2){let i;O(i=I())&&(n.cdkTree=i.first)}},features:[z([U])],decls:3,vars:3,consts:[["nestedNode","cdkNestedTreeNode"],[3,"dataSource","treeControl"],["class","nui-tree__leaf",4,"cdkTreeNodeDef"],["class","nui-tree",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],[1,"nui-tree__leaf"],["nui-button","","displayStyle","action","type","button","title","action","disabled",""],[1,"leaf-control",3,"valueChange","checked"],[1,"nui-tree"],["cdkTreeNodeToggle","",1,"nui-tree__header",3,"click"],[1,"nui-tree__header-icon",3,"icon"],[1,"branch-control",3,"click","valueChange","checked","indeterminate"],[1,"nui-tree__header-title"],[1,"nui-tree__body"],[3,"show","delay",4,"ngIf"],["cdkTreeNodeOutlet",""],[3,"show","delay"]],template:function(t,n){t&1&&(l(0,"cdk-tree",1),x(1,X,4,2,"cdk-nested-tree-node",2)(2,Z,10,9,"cdk-nested-tree-node",3),_()),t&2&&(c("dataSource",n.dataSource)("treeControl",n.treeControl),o(2),c("cdkTreeNodeDefWhen",n.hasChild))},dependencies:[J,H,K,m,G,A,j,$,W,Q],styles:[".nui-tree--expanded[_ngcontent-%COMP%]{padding-bottom:5px}.nui-tree__icon[_ngcontent-%COMP%]{align-items:center;align-self:flex-start;display:flex;flex-shrink:0;height:30px;justify-content:center;width:30px;margin-left:-7px}.nui-tree__header[_ngcontent-%COMP%]{align-items:center;border-radius:3px;cursor:pointer;display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.nui-tree__header[_ngcontent-%COMP%]:hover{background-color:var(--nui-color-bg-transparent-hover,rgba(17, 17, 17, .05))}.nui-tree__header-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;text-overflow:ellipsis;line-height:18px;font-size:13px;font-weight:600;color:#111;color:var(--nui-color-text-default,#111)}.nui-tree__header-icon[_ngcontent-%COMP%]{align-items:center;align-self:flex-start;display:flex;flex-shrink:0;height:30px;justify-content:center;width:30px}.nui-tree__header-content[_ngcontent-%COMP%]{align-items:center;display:flex;flex-grow:2;justify-content:flex-start;padding-left:5px;min-width:0;padding-right:5px}.nui-tree__header-content-icon[_ngcontent-%COMP%]{align-items:center;align-self:flex-start;flex-shrink:0;height:30px;justify-content:center;width:30px}.nui-tree__header-content--with-icon[_ngcontent-%COMP%]{padding-left:0}.nui-tree__header-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-grow:2;min-width:0;width:100%}.nui-tree__header.nui-expander__header--empty.nui-expander__header[_ngcontent-%COMP%]{display:inline-flex}.nui-tree__header.nui-expander__header--empty[_ngcontent-%COMP%]   .nui-expander__header-content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.nui-tree__custom-header[_ngcontent-%COMP%]{width:100%}.nui-tree__custom-header--empty[_ngcontent-%COMP%]{display:flex;width:auto}.nui-tree__body[_ngcontent-%COMP%]{border:none;border-left:dotted 2px #d9d9d9;border-left:dotted 2px var(--nui-color-line-default, #d9d9d9);color:#111;color:var(--nui-color-text-default, #111);margin-left:14px;padding-left:14px}.nui-tree__body.hide-left-border[_ngcontent-%COMP%]{border-left:0}.nui-tree__body.ng-animating[_ngcontent-%COMP%], .nui-tree__body--collapsed[_ngcontent-%COMP%]{overflow:hidden}.nui-tree__leaf[_ngcontent-%COMP%]{display:flex;align-items:center}.nui-tree__invisible[_ngcontent-%COMP%]{display:none}"],data:{animation:[q]}})}}return r})();export{U as a,_e as b};
