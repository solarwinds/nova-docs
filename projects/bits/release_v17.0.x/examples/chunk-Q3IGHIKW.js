import{a as h}from"./chunk-WIWC3MGQ.js";import{a as R,b as A,c as H,d as g,e as W,f as q}from"./chunk-KHXTZZZO.js";import{a as Q}from"./chunk-WJ3JZRMK.js";import{a as F}from"./chunk-A5U7KQB6.js";import{q as B}from"./chunk-CHJVZ6O7.js";import{e as $,i as z}from"./chunk-BXWCCJQR.js";import{a as j}from"./chunk-QRWA7LTP.js";import{d as V}from"./chunk-7KV4WPOL.js";import{m as D}from"./chunk-N5FUFMYY.js";import{$c as L,Aa as T,Gb as u,Ib as d,Ja as x,Ka as C,Kb as w,Ob as l,Pb as c,Qb as p,Tb as P,Ub as v,ec as y,fc as a,ic as O,mc as b,nc as E,ob as o,oc as I,pb as m,pc as k,qc as f,rc as S,tc as M,yc as N}from"./chunk-7UJBXEVU.js";function K(n,s){if(n&1&&(l(0,"cdk-nested-tree-node",4),p(1,"button",5),f(2),c()),n&2){let e=s.$implicit;o(2),M(" ",e.name,", fromPage: ",e.page," ")}}function U(n,s){if(n&1){let e=v();l(0,"a",15),y("click",function(){x(e);let i=a(2).$implicit,r=k(1),_=a();return C(_.loadMoreItems(i,r))}),f(1),c()}if(n&2){let e=a(2).$implicit,t=a();o(),M("Load another ",t.pageSize," (of ",t.remainingItemsCount[e.name],")")}}function G(n,s){if(n&1&&p(0,"nui-spinner",16),n&2){let e=a(2).$implicit;d("show",e.isLoading)("delay",0)}}function J(n,s){if(n&1&&(l(0,"div"),p(1,"button",5),u(2,U,2,2,"a",13)(3,G,1,2,"nui-spinner",14),c()),n&2){let e=a().$implicit;o(2),d("ngIf",!e.isLoading),o(),d("ngIf",e.isLoading)}}function X(n,s){if(n&1){let e=v();l(0,"cdk-nested-tree-node",6,0)(2,"div",7),y("click",function(){let i=x(e).$implicit,r=k(1),_=a();return C(_.onToggleClick(i,r))}),p(3,"nui-icon",8),l(4,"span",9),f(5),c()(),l(6,"div",10),P(7,11),u(8,J,4,2,"div",12),c()()}if(n&2){let e=s.$implicit,t=a();o(3),O("icon",t.treeControl.isExpanded(e)?"triangle-down":"triangle-right"),o(2),S(e.name),o(),w("nui-tree__body--collapsed",!t.treeControl.isExpanded(e)),d("@expandedState",t.treeControl.isExpanded(e)?"expanded":"collapsed"),o(2),d("ngIf",e.hasPagination)}}var Y=[{name:"Food",children:[{name:"Vegetables",children:[],page:1,hasPagination:!0},{name:"Fruits",children:[],page:1,hasPagination:!0}]}],pe=(()=>{class n{constructor(e,t,i){this.http=e,this.differ=t,this.eventBusService=i,this.pageSize=10,this.remainingItemsCount={},this.treeControl=new R(r=>r.children),this.dataSource=new B(Y),this.hasChild=(r,_)=>!!_.children}onToggleClick(e,t){this.eventBusService.getStream($).next(new MouseEvent("click")),e.hasPagination&&e.children&&!e.children.length&&(e.page=1,this.loadMoreItems(e,t))}loadMoreItems(e,t){if(e.isLoading)return;e.isLoading=!0;let i=e.page?e.page++:1;this.http.getNodeItems(e.name,i,this.pageSize).subscribe(r=>{this.setRemainingItemsCount(e,r.total),this.handleNodeContent(e,t,r.items),e.isLoading=!1})}setRemainingItemsCount(e,t){this.remainingItemsCount[e.name]=e.children?t-e.children?.length:t}handleNodeContent(e,t,i){let r=this.differ.find(e.children).create();e.children?.push(...i),t.nodeOutlet.first.viewContainer.clear(),this.cdkTree.renderNodeChanges(e.children||[],r,t.nodeOutlet.first.viewContainer,e)}static{this.\u0275fac=function(t){return new(t||n)(m(h),m(L),m(z))}}static{this.\u0275cmp=T({type:n,selectors:[["nui-tree-load-more-example"]],viewQuery:function(t,i){if(t&1&&b(g,5),t&2){let r;E(r=I())&&(i.cdkTree=r.first)}},features:[N([h])],decls:3,vars:3,consts:[["nestedNode","cdkNestedTreeNode"],[3,"dataSource","treeControl"],["class","nui-tree__leaf",4,"cdkTreeNodeDef"],["class","nui-tree",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],[1,"nui-tree__leaf"],["nui-button","","displayStyle","action","type","button","disabled",""],[1,"nui-tree"],["cdkTreeNodeToggle","",1,"nui-tree__header",3,"click"],[1,"nui-tree__header-icon",3,"icon"],[1,"nui-tree__header-title"],[1,"nui-tree__body"],["cdkTreeNodeOutlet",""],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"show","delay",4,"ngIf"],[3,"click"],[3,"show","delay"]],template:function(t,i){t&1&&(l(0,"cdk-tree",1),u(1,K,3,2,"cdk-nested-tree-node",2)(2,X,9,6,"cdk-nested-tree-node",3),c()),t&2&&(d("dataSource",i.dataSource)("treeControl",i.treeControl),o(2),d("cdkTreeNodeDefWhen",i.hasChild))},dependencies:[W,H,q,g,A,D,V,j,F],styles:[".nui-tree--expanded[_ngcontent-%COMP%]{padding-bottom:5px}.nui-tree__icon[_ngcontent-%COMP%]{align-items:center;align-self:flex-start;display:flex;flex-shrink:0;height:30px;justify-content:center;width:30px;margin-left:-7px}.nui-tree__header[_ngcontent-%COMP%]{align-items:center;border-radius:3px;cursor:pointer;display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.nui-tree__header[_ngcontent-%COMP%]:hover{background-color:var(--nui-color-bg-transparent-hover,rgba(17, 17, 17, .05))}.nui-tree__header-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;text-overflow:ellipsis;line-height:18px;font-size:13px;font-weight:600;color:#111;color:var(--nui-color-text-default,#111)}.nui-tree__header-icon[_ngcontent-%COMP%]{align-items:center;align-self:flex-start;display:flex;flex-shrink:0;height:30px;justify-content:center;width:30px}.nui-tree__header-content[_ngcontent-%COMP%]{align-items:center;display:flex;flex-grow:2;justify-content:flex-start;padding-left:5px;min-width:0;padding-right:5px}.nui-tree__header-content-icon[_ngcontent-%COMP%]{align-items:center;align-self:flex-start;flex-shrink:0;height:30px;justify-content:center;width:30px}.nui-tree__header-content--with-icon[_ngcontent-%COMP%]{padding-left:0}.nui-tree__header-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-grow:2;min-width:0;width:100%}.nui-tree__header.nui-expander__header--empty.nui-expander__header[_ngcontent-%COMP%]{display:inline-flex}.nui-tree__header.nui-expander__header--empty[_ngcontent-%COMP%]   .nui-expander__header-content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.nui-tree__custom-header[_ngcontent-%COMP%]{width:100%}.nui-tree__custom-header--empty[_ngcontent-%COMP%]{display:flex;width:auto}.nui-tree__body[_ngcontent-%COMP%]{border:none;border-left:dotted 2px #d9d9d9;border-left:dotted 2px var(--nui-color-line-default, #d9d9d9);color:#111;color:var(--nui-color-text-default, #111);margin-left:14px;padding-left:14px}.nui-tree__body.hide-left-border[_ngcontent-%COMP%]{border-left:0}.nui-tree__body.ng-animating[_ngcontent-%COMP%], .nui-tree__body--collapsed[_ngcontent-%COMP%]{overflow:hidden}.nui-tree__body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none;cursor:pointer}.nui-tree__leaf[_ngcontent-%COMP%]{display:flex;align-items:center}.nui-tree__invisible[_ngcontent-%COMP%]{display:none}.nui-tree[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{min-height:20px}"],data:{animation:[Q]}})}}return n})();export{pe as a};
