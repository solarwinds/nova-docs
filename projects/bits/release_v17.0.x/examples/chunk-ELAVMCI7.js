import{a as k}from"./chunk-RN5LBUPR.js";import{b as m}from"./chunk-X5DNJTN3.js";import{c as H}from"./chunk-EMVJH4OC.js";import{f as w,i as L,n as T}from"./chunk-YS6YGF5L.js";import{A as s,B as I,w as R}from"./chunk-CHJVZ6O7.js";import{s as B}from"./chunk-N5FUFMYY.js";import{Aa as x,Gb as S,Hc as E,Ib as r,Ic as M,Jb as g,M as O,Ob as f,Pb as u,Qb as v,U as V,ec as y,g as _,ga as c,ia as p,mc as d,nc as C,ob as l,oc as h,w as a}from"./chunk-7UJBXEVU.js";function A(o,$){if(o&1&&(f(0,"div")(1,"nui-select-v2-option",4),v(2,"span",5),u()()),o&2){let e=$.$implicit;l(),r("value",e),l(),r("nuiComboboxV2OptionHighlight",e)}}var b=300,K=(()=>{class o{constructor(){this.items=Array.from({length:1e5}).map((e,i)=>$localize`Item ${i}`),this.comboboxControl=new L(""),this.filteredItems=a([...this.items]),this.containerHeight=b,this.destroy$=new _,this.scrollOffset=0,this.calculateContainerHeight=()=>{if(this.combobox.inputValue&&this.viewport.measureRenderedContentSize()<b){this.containerHeight=this.viewport.measureRenderedContentSize();return}this.containerHeight=b}}handleClick(){this.viewport&&this.viewport.scrollToOffset(this.scrollOffset)}ngAfterViewInit(){this.combobox.valueSelected.pipe(c(this.destroy$)).subscribe(()=>{this.scrollOffset=this.viewport.measureScrollOffset()}),this.combobox.valueChanged.pipe(O(e=>e!==void 0),p(e=>this.filteredItems=a(this.filterItems(e))),V(0),p(this.calculateContainerHeight),c(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}filterItems(e){if(!e)return this.items;let i=e?.toLowerCase();return this.items.filter(t=>t.toLowerCase().includes(i))}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=x({type:o,selectors:[["nui-combobox-v2-virtual-scroll-example"]],viewQuery:function(i,t){if(i&1&&(d(s,5),d(m,5)),i&2){let n;C(n=h())&&(t.viewport=n.first),C(n=h())&&(t.combobox=n.first)}},hostAttrs:[1,"combobox-container"],hostBindings:function(i,t){i&1&&y("click",function(){return t.handleClick()})},decls:5,vars:9,consts:()=>{let e;return e=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[["combobox",""],["placeholder",e,3,"formControl","isTypeaheadEnabled"],["itemSize","30",3,"minBufferPx","maxBufferPx"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"d-flex","align-items-center",3,"value"],[3,"nuiComboboxV2OptionHighlight"]]},template:function(i,t){i&1&&(f(0,"nui-combobox-v2",1,0)(2,"cdk-virtual-scroll-viewport",2),S(3,A,3,2,"div",3),E(4,"async"),u()()),i&2&&(r("formControl",t.comboboxControl)("isTypeaheadEnabled",!1),l(2),g("height",t.containerHeight,"px"),r("minBufferPx",300)("maxBufferPx",600),l(),r("cdkVirtualForOf",M(4,7,t.filteredItems)))},dependencies:[w,T,H,m,k,R,I,s,B],encapsulation:2})}}return o})();export{K as a};
