import{a as O}from"./chunk-LEZNP5ZZ.js";import{a as k,b as v,c as N}from"./chunk-K3XZREN6.js";import{a as x}from"./chunk-DVAOCVMG.js";import{c as F}from"./chunk-WRNEF66S.js";import{a as A}from"./chunk-QRWA7LTP.js";import{m as h}from"./chunk-N5FUFMYY.js";import{$b as M,Aa as C,Gb as f,Hc as S,Ib as m,Ic as R,Ja as a,Ka as c,Mc as g,Ob as n,Pb as l,Ub as d,ec as p,fc as _,g as E,ob as s,pb as P,pc as T,qc as u,rc as I}from"./chunk-7UJBXEVU.js";function b(r,B){if(r&1){let e=d();n(0,"nui-dialog-footer")(1,"button",8),p("click",function(){a(e);let t=_(2);return c(t.cancelPopover())}),M(2,1),l(),n(3,"button",9),p("click",function(){a(e);let t=_(2);return c(t.confirmPopover())}),M(4,2),l()()}}function y(r,B){if(r&1){let e=d();n(0,"div")(1,"nui-quick-picker",5),p("presetSelected",function(t){a(e);let o=_();return c(o.handlePresetSelection(t))}),n(2,"nui-time-frame-picker",6),p("changed",function(t){a(e);let o=_();return c(o.updateTf(t))}),l()()(),f(3,b,5,0,"nui-dialog-footer",7)}if(r&2){let e=_();s(),m("presets",e.presets)("selectedPreset",e.acceptedTimeframe.selectedPresetId),s(),m("startModel",e.acceptedTimeframe),s(),m("ngIf",e.showFooter)}}var H=(()=>{class r{constructor(e){this.timeframeService=e,this.selectedPresetKey="lastHour",this.showFooter=!1,this.closePopoverSubject=new E,this.openPopoverSubject=new E,this.presets=e.getDefaultPresets(),this.acceptedTimeframe=this.timeframeService.getTimeframeByPresetId(this.selectedPresetKey),this.tf=this.acceptedTimeframe}updateTf(e){this.tf=e;let i=()=>this.timeframeService.areTimeFrameDatesValid(e),t=()=>this.timeframeService.isEqual(this.tf,this.acceptedTimeframe);i()&&!t()&&(this.showFooter=!0),this.selectedPresetKey=this.tf.selectedPresetId}confirmPopover(){this.showFooter=!1,this.closePopoverSubject.next(),this.acceptedTimeframe=this.tf}cancelPopover(){this.showFooter=!1,this.closePopoverSubject.next()}handlePresetSelection(e){this.selectedPresetKey=e,this.tf=this.timeframeService.getTimeframeByPresetId(e),this.acceptedTimeframe=this.tf,this.closePopoverSubject.next()}static{this.\u0275fac=function(i){return new(i||r)(P(k))}}static{this.\u0275cmp=C({type:r,selectors:[["nui-time-frame-picker-basic-example"]],decls:6,vars:7,consts:()=>{let e;e=$localize`:␟8946b0053f321c7db24853d1b213b1ea9794c789␟2079707468789363335:Custom Range`;let i;i=$localize`:␟bf844a41a29961b6dacc48a20eaf97bef0cf5013␟7452095619502551190: Cancel `;let t;return t=$localize`:␟3c8adc665cde2a280fd027f86fca78239d8a890c␟3416889908563565605: Use `,[["popoverTimeFramePicker",""],i,t,["trigger","click",3,"template","hasPadding","closePopover","modal"],[1,"nui-text-link",2,"cursor","pointer"],["pickerTitle",e,3,"presetSelected","presets","selectedPreset"],[3,"changed","startModel"],[4,"ngIf"],["nui-button","","type","button","displayStyle","action",1,"pr-3","nui-time-frame-picker__cancel",3,"click"],["nui-button","","type","button","displayStyle","primary",1,"nui-time-frame-picker__use",3,"click"]]},template:function(i,t){if(i&1&&(n(0,"nui-popover",3)(1,"span",4),u(2),S(3,"timeFrame"),l()(),f(4,y,4,4,"ng-template",null,0,g)),i&2){let o=T(5);m("template",o)("hasPadding",!1)("closePopover",t.closePopoverSubject)("modal",!0),s(2),I(R(3,5,t.acceptedTimeframe))}},dependencies:[A,x,v,F,h,O,N],encapsulation:2})}}return r})();export{H as a};
