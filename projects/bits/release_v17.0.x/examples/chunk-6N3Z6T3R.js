import{d}from"./chunk-XRSLDQYN.js";import{b as C}from"./chunk-SPX2OUAB.js";import{a as b}from"./chunk-MNLBQFGT.js";import{a as D}from"./chunk-QIJS5XMC.js";import{k as F}from"./chunk-IOE73CTL.js";import{a as v}from"./chunk-7YQPYNLH.js";import{a as y}from"./chunk-ZR5STDHI.js";import{a as S}from"./chunk-Y7C4AM3Q.js";import{Bb as m,Ha as h,tb as c,v as o,wa as n}from"./chunk-MC3BMXIX.js";import{g as s}from"./chunk-VBFW7A5V.js";var p=s(C()),r=s(b()),f=s(v()),l=s(y()),u=s(S()),g=s(D()),V=s(F());var N=(()=>{class a{constructor(e){this.utilService=e,this.ariaLabel="",this.isRemoveValueEnabled=!1,this.changed=new h,this.valueChange=this.changed.pipe(o(({newValue:t})=>t))}ngOnInit(){this.selectedItem=this.value,this.inputValue=this.value?this.value:""}ngOnChanges(e){if(e.value&&!e.value.firstChange){let t=e.value.currentValue;(this.displayValue?(0,V.default)(this.itemsSource,t):(0,p.default)(this.itemsSource,t))&&this.select(e.value.currentValue)}if(e.itemsSource&&this.selectedItem&&this.modelValue&&(0,g.default)(this.selectedItem)){let i=e.itemsSource.currentValue.find(I=>I[this.modelValue]===this.selectedItem);i&&this.select(i)}}getItemDisplay(e){if((0,l.default)(e))return"";if(this.displayValue)return e[this.displayValue];if((0,f.default)(this.displayValueFn)){let t=this.displayValueFn({item:e});if(t)return t}return e}getDisplayValueFormatted(e){if((0,l.default)(e))return"";if(this.displayFormat){let t=this.getItemDisplay(e);return(0,l.default)(t)?"":this.utilService.formatString(this.displayFormat,t)}return this.getItemDisplay(e)}getIconColor(){return this.isDisabled?"gray":"primary-blue"}isItemSelected(e){let t=this.getSelectedItem(),i=this.displayValue&&!(0,u.default)(t)?e[this.displayValue]:e;return(0,r.default)(t,i)}getSelectedItem(){return(0,l.default)(this.itemToSelect)?this.selectedItem:this.itemToSelect}select(e){let t=this.selectedItem;if((0,r.default)(t,e))e===""&&this.changeValue("");else{let i=this.getItemModel(e);this.changed.emit({newValue:i,oldValue:t}),this.changeValue(i)}}getItemModel(e){return e&&this.modelValue?e[this.modelValue]:e}onChange(e){}onTouched(){}writeValue(e){let t;this.modelValue&&this.itemsSource&&this.itemsSource.length?t=this.itemsSource.find(i=>this.getItemModel(i)===e):t=e,this.selectedItem=t,this.inputValue=(0,u.default)(t)?this.getItemDisplay(t):t}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}changeValue(e){this.writeValue(e),this.onChange(e),this.onTouched()}setDisabledState(e){this.isDisabled=e}static{this.\u0275fac=function(t){return new(t||a)(c(d))}}static{this.\u0275dir=m({type:a,inputs:{isDisabled:"isDisabled",inline:"inline",justified:"justified",itemsSource:"itemsSource",value:"value",icon:"icon",displayFormat:"displayFormat",displayValue:"displayValue",modelValue:"modelValue",placeholder:"placeholder",customTemplate:"customTemplate",isInErrorState:"isInErrorState",ariaLabel:"ariaLabel",isRemoveValueEnabled:"isRemoveValueEnabled"},outputs:{changed:"changed",valueChange:"valueChange"},features:[n]})}}return a})();export{N as a};
