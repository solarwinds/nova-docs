import{a as Z}from"./chunk-G7FTRSHE.js";import{b as H,c as z,d as k,e as Q,f as j,g as q,h as J,i as K,j as Y}from"./chunk-ROHHJFB2.js";import{l as C}from"./chunk-CI5QMEPW.js";import{k as X,z as P}from"./chunk-6RVLRIW3.js";import{a as W}from"./chunk-XIOFJX24.js";import{A as f}from"./chunk-CHJVZ6O7.js";import{m as U}from"./chunk-N5FUFMYY.js";import{$b as S,Aa as $,Gb as s,Ib as r,Jb as M,Mc as b,Ob as l,Pb as o,Qb as O,Rb as c,Sb as R,_c as w,fc as I,g,ga as B,jc as G,mc as L,nc as u,ob as n,oc as A,pb as h,pc as N,qc as a,rc as T,sc as p}from"./chunk-7UJBXEVU.js";function ee(e,i){e&1&&(l(0,"th",33),S(1,2),o())}function te(e,i){if(e&1&&(l(0,"td",34),a(1),o()),e&2){let t=i.$implicit;n(),T(t.no)}}function ie(e,i){e&1&&(l(0,"th",33),S(1,3),o())}function ne(e,i){if(e&1&&(l(0,"td",34),a(1),o()),e&2){let t=i.$implicit;n(),p(" ",t.nameTitle," ")}}function le(e,i){e&1&&(l(0,"th",33),S(1,4),o())}function oe(e,i){if(e&1&&(l(0,"td",34),a(1),o()),e&2){let t=i.$implicit;n(),p(" ",t.nameFirst," ")}}function _e(e,i){e&1&&(l(0,"th",33),S(1,5),o())}function re(e,i){if(e&1&&(l(0,"td",34),a(1),o()),e&2){let t=i.$implicit;n(),p(" ",t.nameLast," ")}}function ae(e,i){e&1&&(l(0,"th",33),S(1,6),o())}function Ee(e,i){if(e&1&&(l(0,"td",34),a(1),o()),e&2){let t=i.$implicit;n(),T(t.gender)}}function se(e,i){e&1&&(l(0,"th",33),S(1,7),o())}function me(e,i){if(e&1&&(l(0,"td",34),a(1),o()),e&2){let t=i.$implicit;n(),p(" ",t.country," ")}}function ce(e,i){e&1&&(l(0,"th",33),S(1,8),o())}function Re(e,i){if(e&1&&(l(0,"td",34),a(1),o()),e&2){let t=i.$implicit;n(),T(t.city)}}function Se(e,i){e&1&&(l(0,"th",33),S(1,9),o())}function de(e,i){if(e&1&&(l(0,"td",34),a(1),o()),e&2){let t=i.$implicit;n(),p(" ",t.postcode," ")}}function Te(e,i){e&1&&(l(0,"th",33),S(1,10),o())}function pe(e,i){if(e&1&&(l(0,"td",34),a(1),o()),e&2){let t=i.$implicit;n(),T(t.email)}}function Oe(e,i){e&1&&(l(0,"th",33),S(1,11),o())}function Le(e,i){if(e&1&&(l(0,"td",35),a(1),o()),e&2){let t=i.$implicit;n(),p(" ",t.cell," ")}}function ue(e,i){e&1&&O(0,"tr",36)}function Ae(e,i){e&1&&O(0,"tr",37)}function fe(e,i){if(e&1&&(l(0,"div"),O(1,"nui-progress",38),o()),e&2){let t=I();n(),G("helpText","Loading next ",t.range," items..."),r("show",t.isBusy)}}function Ce(e,i){e&1&&(l(0,"span"),a(1,", scroll down for more."),o())}function Pe(e,i){e&1&&(l(0,"strong"),a(1,". All items loaded."),o())}function ge(e,i){if(e&1&&(l(0,"div",39),a(1," Showing first "),l(2,"span",40),a(3),o(),a(4," of "),l(5,"span",41),a(6),o(),s(7,Ce,2,0,"span",32),o(),s(8,Pe,2,0,"ng-template",null,1,b)),e&2){let t=N(9),_=I();n(3),T(_.users.length),n(3),T(_.totalItems),n(),r("ngIf",_.users.length!==_.totalItems)("ngIfElse",t)}}var ze=(()=>{class e{get totalItems(){return this._totalItems}get isBusy(){return this._isBusy}constructor(t,_){this.selectorService=t,this.cd=_,this._totalItems=0,this.totalPages=0,this.lastPageFetched=0,this.prefetchedDsPageNumber=1,this.range=40,this._isBusy=!1,this.virtualScrollFilterValue={start:0,end:this.range},this.onDestroy$=new g,this.users=[],this.dataSourceObs=new g,this.displayedColumns=["no","nameTitle","nameFirst","nameLast","gender","country","city","postcode","email","cell"],this.gridHeight=400,this.makeSticky=!0,this.dataSource=new Z}ngOnInit(){this.dataSource.outputsSubject.subscribe(t=>{t&&(this.users=t.repeat.itemsSource,this._totalItems=t.totalItems,this.totalPages=Math.floor(this._totalItems/this.range),this.users.length<Math.round(this.viewport.getViewportSize()/this.virtualDirective.rowHeight)&&(this.prefetchedDsPageNumber++,this.dataSource.page=this.prefetchedDsPageNumber,this.dataSource.applyFilters()),this.cd.detectChanges())}),this.dataSource.busy.subscribe(t=>{this._isBusy=t})}ngAfterViewInit(){this.registerVirtualScroll(),this.virtualDirective.setMaxItems(this.range),this.viewport.renderedRangeStream.pipe(B(this.onDestroy$)).subscribe(t=>{if(this.users.length===this._totalItems)return;let _=Math.floor(t.end/this.range);if(_>this.lastPageFetched&&_<=this.totalPages){let E=_*this.range,m=E+this.range;this.virtualScrollFilterValue={start:E,end:m},this.lastPageFetched=_,this.dataSource.page=this.prefetchedDsPageNumber+_,this.dataSource.applyFilters()}}),this.dataSource.applyFilters()}ngOnDestroy(){this.dataSource.busy.unsubscribe(),this.dataSource.outputsSubject.unsubscribe(),this.onDestroy$.next(),this.onDestroy$.complete()}registerVirtualScroll(){this.dataSource.registerComponent({virtualScroll:{componentInstance:{getFilters:()=>({type:"virtualScroll",value:this.virtualScrollFilterValue})}}})}static{this.\u0275fac=function(_){return new(_||e)(h(X),h(w))}}static{this.\u0275cmp=$({type:e,selectors:[["nui-table-virtual-scroll-real-api-progress-footer-example"]],viewQuery:function(_,E){if(_&1&&(L(P,5),L(C,5),L(f,5)),_&2){let m;u(m=A())&&(E.table=m.first),u(m=A())&&(E.virtualDirective=m.first),u(m=A())&&(E.viewport=m.first)}},decls:40,vars:26,consts:()=>{let t;t=$localize`:␟8675a724bb3952337aef7625c81b11e39a82d31b␟4511235385998512563:No.`;let _;_=$localize`:␟fdf7cbdc140d0aab0f0b6c06065a0fd448ed6a2e␟5701618810648052610:Title`;let E;E=$localize`:␟c83b838d845690bcb897f775f53b5316535306dc␟6028371114637047813:First Name`;let m;m=$localize`:␟166b2cc65003221ff5f3ec05d5baca41e6821396␟4407559560004943843:Last Name`;let x;x=$localize`:␟003d4f5e4909ccf01b6a204c688fd6dab15c20bd␟3948439187870398089:Gender`;let D;D=$localize`:␟a43f25a9ac40e8e2441ff0be7a36b8e5d15534df␟516176798986294299:Country`;let y;y=$localize`:␟5c7012b5a926b32d9e45fefdcc8a1a3cb6f023d0␟2314075913167237221:City`;let F;F=$localize`:␟47b3774a0cd5cde96c16a2c6f913b48ae9ce796c␟1940878621012578963:Postcode`;let V;V=$localize`:␟244aae9346da82b0922506c2d2581373a15641cc␟4768749765465246664:Email`;let v;return v=$localize`:␟6f1d7ee33c065fdbd6aaeb2bc3f396b62041eb25␟7535645862736277850:Cell`,[["defaultText",""],["endOfData",""],t,_,E,m,x,D,y,F,V,v,[2,"border-color","lightgrey"],["tableVirtualScroll","",3,"rowHeight","offset"],["nui-table","",3,"dataSource","resizable","reorderable"],["nuiColumnDef","no",3,"columnWidth"],["nui-header-cell","",4,"nuiHeaderCellDef"],["nui-cell","",4,"nuiCellDef"],["nuiColumnDef","nameTitle",3,"columnWidth"],["nuiColumnDef","nameFirst",3,"columnWidth"],["nuiColumnDef","nameLast",3,"columnWidth"],["nuiColumnDef","gender",3,"columnWidth"],["nuiColumnDef","country",3,"columnWidth"],["nuiColumnDef","city",3,"columnWidth"],["nuiColumnDef","postcode",3,"columnWidth"],["nuiColumnDef","email",3,"columnWidth"],["nuiColumnDef","cell",3,"columnWidth"],["nui-cell","","style","overflow: visible",4,"nuiCellDef"],["nui-header-row","",4,"nuiHeaderRowDef","nuiHeaderRowDefSticky"],["nui-row","","density","tiny",4,"nuiRowDef","nuiRowDefColumns"],[1,"d-flex","justify-content-center","align-items-center","nui-demo-scrolling-footer"],[1,"h-100","w-100"],[4,"ngIf","ngIfElse"],["nui-header-cell",""],["nui-cell",""],["nui-cell","",2,"overflow","visible"],["nui-header-row",""],["nui-row","","density","tiny"],[3,"show","helpText"],[1,"h-100","d-flex","justify-content-center","align-items-center"],[1,"px-2"],[1,"pl-2"]]},template:function(_,E){if(_&1&&(l(0,"div",12)(1,"cdk-virtual-scroll-viewport",13)(2,"table",14),c(3,15),s(4,ee,2,0,"th",16)(5,te,2,1,"td",17),R(),c(6,18),s(7,ie,2,0,"th",16)(8,ne,2,1,"td",17),R(),c(9,19),s(10,le,2,0,"th",16)(11,oe,2,1,"td",17),R(),c(12,20),s(13,_e,2,0,"th",16)(14,re,2,1,"td",17),R(),c(15,21),s(16,ae,2,0,"th",16)(17,Ee,2,1,"td",17),R(),c(18,22),s(19,se,2,0,"th",16)(20,me,2,1,"td",17),R(),c(21,23),s(22,ce,2,0,"th",16)(23,Re,2,1,"td",17),R(),c(24,24),s(25,Se,2,0,"th",16)(26,de,2,1,"td",17),R(),c(27,25),s(28,Te,2,0,"th",16)(29,pe,2,1,"td",17),R(),c(30,26),s(31,Oe,2,0,"th",16)(32,Le,2,1,"td",27),R(),s(33,ue,1,0,"tr",28)(34,Ae,1,0,"tr",29),o()()(),l(35,"footer",30)(36,"div",31),s(37,fe,2,3,"div",32)(38,ge,10,4,"ng-template",null,0,b),o()()),_&2){let m=N(39);M("height",E.gridHeight,"px")("max-width",1300,"px"),n(),M("height",E.gridHeight,"px"),r("rowHeight",24)("offset",40),n(),r("dataSource",E.users)("resizable",!1)("reorderable",!0),n(),r("columnWidth",50),n(3),r("columnWidth",100),n(3),r("columnWidth",100),n(3),r("columnWidth",100),n(3),r("columnWidth",100),n(3),r("columnWidth",150),n(3),r("columnWidth",100),n(3),r("columnWidth",100),n(3),r("columnWidth",200),n(3),r("columnWidth",150),n(3),r("nuiHeaderRowDef",E.displayedColumns)("nuiHeaderRowDefSticky",!0),n(),r("nuiRowDefColumns",E.displayedColumns),n(3),r("ngIf",E.isBusy)("ngIfElse",m)}},dependencies:[P,q,H,J,K,Y,Q,j,k,z,C,U,f,W],styles:[".nui-demo-scrolling-footer[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-transparent,transparent);height:24px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);max-width:1285px;line-height:14px;font-size:11px;font-weight:400;color:#1119;color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6))}"],changeDetection:0})}}return e})();export{ze as a};
