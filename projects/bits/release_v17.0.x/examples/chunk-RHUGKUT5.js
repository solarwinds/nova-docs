import{a as k}from"./chunk-KLZ43LXN.js";import{b as a}from"./chunk-M5H3GK2S.js";import{c as H}from"./chunk-JDWR5CD2.js";import{g as w,j as L,o as T}from"./chunk-I5QGFHJG.js";import{r as R,u as s,v as I}from"./chunk-BEIUR5OZ.js";import{r as B}from"./chunk-EHNCPSLF.js";import{Eb as S,G as O,Oc as E,P as V,Pc as M,Qb as r,Rb as g,Wb as f,Xb as d,Yb as v,ba as c,da as p,g as _,mc as y,nb as l,q as m,uc as u,vc as C,wc as h,zb as x}from"./chunk-MC3BMXIX.js";function A(o,$){if(o&1&&(f(0,"div")(1,"nui-select-v2-option",4),v(2,"span",5),d()()),o&2){let e=$.$implicit;l(),r("value",e),l(),r("nuiComboboxV2OptionHighlight",e)}}var b=300,K=(()=>{class o{constructor(){this.items=Array.from({length:1e5}).map((e,t)=>$localize`Item ${t}`),this.comboboxControl=new L(""),this.filteredItems=m([...this.items]),this.containerHeight=b,this.destroy$=new _,this.scrollOffset=0,this.calculateContainerHeight=()=>{if(this.combobox.inputValue&&this.viewport.measureRenderedContentSize()<b){this.containerHeight=this.viewport.measureRenderedContentSize();return}this.containerHeight=b}}handleClick(){this.viewport&&this.viewport.scrollToOffset(this.scrollOffset)}ngAfterViewInit(){this.combobox.valueSelected.pipe(c(this.destroy$)).subscribe(()=>{this.scrollOffset=this.viewport.measureScrollOffset()}),this.combobox.valueChanged.pipe(O(e=>e!==void 0),p(e=>this.filteredItems=m(this.filterItems(e))),V(0),p(this.calculateContainerHeight),c(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}filterItems(e){if(!e)return this.items;let t=e?.toLowerCase();return this.items.filter(i=>i.toLowerCase().includes(t))}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=x({type:o,selectors:[["nui-combobox-v2-virtual-scroll-example"]],viewQuery:function(t,i){if(t&1&&(u(s,5),u(a,5)),t&2){let n;C(n=h())&&(i.viewport=n.first),C(n=h())&&(i.combobox=n.first)}},hostAttrs:[1,"combobox-container"],hostBindings:function(t,i){t&1&&y("click",function(){return i.handleClick()})},standalone:!1,decls:5,vars:9,consts:()=>{let e;return e=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[["combobox",""],["placeholder",e,3,"formControl","isTypeaheadEnabled"],["itemSize","30",3,"minBufferPx","maxBufferPx"],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"d-flex","align-items-center",3,"value"],[3,"nuiComboboxV2OptionHighlight"]]},template:function(t,i){t&1&&(f(0,"nui-combobox-v2",1,0)(2,"cdk-virtual-scroll-viewport",2),S(3,A,3,2,"div",3),E(4,"async"),d()()),t&2&&(r("formControl",i.comboboxControl)("isTypeaheadEnabled",!1),l(2),g("height",i.containerHeight,"px"),r("minBufferPx",300)("maxBufferPx",600),l(),r("cdkVirtualForOf",M(4,7,i.filteredItems)))},dependencies:[w,T,H,a,k,R,I,s,B],encapsulation:2})}}return o})();export{K as a};
