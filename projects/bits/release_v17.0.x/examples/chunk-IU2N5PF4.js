import{a as fe,b as Te}from"./chunk-OYI4FZRC.js";import{P as w,ba as m,fa as G}from"./chunk-57V7DCE5.js";import{b as re,c as ne,d as ae,e as oe,f as se,g as le,h as ce,i as me,j as pe}from"./chunk-ZO7WBSGK.js";import{a as ee}from"./chunk-O7UYP4LT.js";import{a as ie}from"./chunk-QZPWCUUC.js";import{d as Q}from"./chunk-OIGCZEVG.js";import{A as Y,g as K}from"./chunk-LF6XSF3V.js";import{a as te}from"./chunk-EP75EVMT.js";import{a as _e,b as ue,c as de}from"./chunk-O3JQU3EK.js";import{c as Z}from"./chunk-DCCIYGKJ.js";import{a as Ee}from"./chunk-CUY44B7R.js";import{a as W}from"./chunk-CJFOCIHU.js";import{a as J}from"./chunk-YILH52ZF.js";import{u as X}from"./chunk-EHNCPSLF.js";import{Ac as N,Bc as q,Eb as f,Gc as P,Ha as H,Oc as R,Pc as U,Qb as p,Qc as j,Tc as V,Wb as o,Xb as a,Yb as S,Zb as M,_b as y,ac as g,ba as k,g as E,hc as C,ia as $,mc as T,na as F,nb as c,nc as v,tb as d,uc as I,vc as b,wc as O,xa as _,xc as B,ya as u,yc as D,zb as h,zc as z}from"./chunk-MC3BMXIX.js";import{g as De,h as L,i as x}from"./chunk-VBFW7A5V.js";var A=De(Ee());var Fe=["timeFramePicker"];function he(i,s){i&1&&(o(0,"th",14),C(1,0),a())}function ve(i,s){if(i&1&&(o(0,"td",15),D(1),a()),i&2){let e=s.$implicit;c(),N(" ",e.position," ")}}function Ae(i,s){i&1&&(o(0,"th",14),C(1,1),a())}function Me(i,s){if(i&1&&(o(0,"td",15),D(1),a()),i&2){let e=s.$implicit;c(),N(" ",e.issue," ")}}function ye(i,s){i&1&&(o(0,"th",14),C(1,2),a())}function ge(i,s){if(i&1&&(o(0,"td",15),D(1),R(2,"date"),a()),i&2){let e=s.$implicit;c(),N(" ",j(2,1,e.date,"EEEE, MMMM dd, yyyy")," ")}}function Ie(i,s){i&1&&S(0,"tr",16)}function be(i,s){i&1&&S(0,"tr",17)}var Oe=["listSearch"];function Ne(i,s){if(i&1&&(o(0,"div"),D(1),R(2,"date"),a()),i&2){let e=s.item;c(),q(" ",e.issue," - ",j(2,2,e.date,"EEEE, MMMM dd, yyyy")," ")}}function Pe(i,s){if(i&1){let e=g();o(0,"div",5)(1,"nui-time-frame-picker",6),T("changed",function(r){_(e);let n=v();return u(n.updateTf(r))}),a()(),o(2,"nui-dialog-footer")(3,"button",7),T("click",function(){_(e);let r=v();return u(r.cancelPopover())}),C(4,1),a(),o(5,"button",8),T("click",function(){_(e);let r=v();return u(r.confirmPopover())}),C(6,2),a()()}if(i&2){let e=v();c(),p("startModel",e.tf)("maxDate",e.maxDate)("minDate",e.minDate)}}var Se=(()=>{class i extends G{constructor(e,t){super(e),this.filterService=t,this.onDestroy$=new E,this.filterService.filteringSubject.pipe(k(this.onDestroy$)).subscribe(()=>{this.applyFilters()}),super.setData(fe)}getFilteredData(){return x(this,null,function*(){let e=this.filterService.getFilters(),t=e.timeFramePicker,r=yield L(i.prototype,this,"getFilteredData").call(this,e),n=r.repeat?.itemsSource;if(t&&(n=n?.filter(l=>l.date.isBetween(t.value.start,t.value.end)||l.date.isSame(t.value.start)||l.date.isSame(t.value.end))),!r.repeat?.itemsSource||!n)throw new Error("filteredData.repeat is not defined");return r.repeat.itemsSource=n,r})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}static{this.\u0275fac=function(t){return new(t||i)(F(Q),F(m))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),Ce=(()=>{class i extends G{constructor(e,t){super(e),this.filterService=t,this.onDestroy$=new E,this.filterService.filteringSubject.pipe(k(this.onDestroy$)).subscribe(()=>{this.applyFilters()}),super.setData(Te)}getFilteredData(){return x(this,null,function*(){let e=this.filterService.getFilters(),t=e.timeFramePicker,r=yield L(i.prototype,this,"getFilteredData").call(this,e);if(!r.repeat)throw new Error("filteredData.repeat is not defined");let n=r.repeat.itemsSource;return t&&(n=n.filter(l=>l.date.isBetween(t.value.start,t.value.end)||l.date.isSame(t.value.start)||l.date.isSame(t.value.end))),r.repeat.itemsSource=n,r})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}static{this.\u0275fac=function(t){return new(t||i)(F(Q),F(m))}}static{this.\u0275prov=$({token:i,factory:i.\u0275fac})}}return i})(),dt=(()=>{class i{constructor(e){this.filterService=e}ngAfterViewInit(){this.filterService.registerFilter({timeFramePicker:{componentInstance:this.timeFramePicker}}),this.filterService.applyFilters()}applyFilters(){this.filterService.applyFilters()}static{this.\u0275fac=function(t){return new(t||i)(d(m))}}static{this.\u0275cmp=h({type:i,selectors:[["nui-data-filter-basic-example"]],viewQuery:function(t,r){if(t&1&&I(Fe,5),t&2){let n;b(n=O())&&(r.timeFramePicker=n.first)}},standalone:!1,features:[P([m])],decls:6,vars:0,consts:[["timeFramePicker",""],[1,"p-4",2,"border","1px solid black"],[1,"mt-2","mb-2"],[3,"timeFrameChanged"]],template:function(t,r){if(t&1){let n=g();o(0,"div",1)(1,"div",2)(2,"nui-filtering-time-frame-picker",3,0),T("timeFrameChanged",function(){return _(n),u(r.applyFilters())}),a()(),S(4,"nui-divider")(5,"nui-data-filter-table-example"),a()}},dependencies:()=>[W,Re,Le],encapsulation:2})}}return i})(),Re=(()=>{class i{constructor(e,t){this.dataFilter=e,this.dataSourceService=t,this.dataSource=[],this.displayedColumns=["position","issue","date"],this.sorterItems=[{title:$localize`Issue`,value:"issue"}],this.initialSortDirection=K.ascending,this.sortBy=this.sorterItems[0].value}ngAfterViewInit(){this.dataFilter.registerFilter({sorter:{componentInstance:this.sorterComponent}}),this.applyFilters(),this.outputsSubscription=this.dataSourceService.outputsSubject.subscribe(e=>{this.dataSource=e.repeat?.itemsSource})}applyFilters(){this.dataFilter.applyFilters()}onSorterAction(e){this.sortBy=e.newValue.sortBy,this.applyFilters()}ngOnDestroy(){this.outputsSubscription.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(d(m),d(Ce))}}static{this.\u0275cmp=h({type:i,selectors:[["nui-data-filter-table-example"]],viewQuery:function(t,r){if(t&1&&I(w,5),t&2){let n;b(n=O())&&(r.sorterComponent=n.first)}},standalone:!1,features:[P([m,Ce])],decls:16,vars:6,consts:()=>{let e;e=$localize`:␟8675a724bb3952337aef7625c81b11e39a82d31b␟4511235385998512563:No.`;let t;t=$localize`:␟36fad7995cadfb3a6f0d43ef2db280146b3ca022␟5833626790712999947:Issue`;let r;return r=$localize`:␟2f933b826a570836cab04f683970a2d22068458c␟3973931101896534797:Date`,[e,t,r,[1,"p-4",2,"border","1px solid red"],[1,"mb-2"],["id","nui-data-filter-basic-sorter",3,"sorterAction","itemsSource","selectedItem","sortDirection"],["nui-table","","id","nui-data-filter-basic-table",3,"dataSource"],["nuiColumnDef","position"],["nui-header-cell","",4,"nuiHeaderCellDef"],["nui-cell","",4,"nuiCellDef"],["nuiColumnDef","issue"],["nuiColumnDef","date"],["nui-header-row","",4,"nuiHeaderRowDef"],["nui-row","","density","tiny",4,"nuiRowDef","nuiRowDefColumns"],["nui-header-cell",""],["nui-cell",""],["nui-header-row",""],["nui-row","","density","tiny"]]},template:function(t,r){t&1&&(o(0,"div",3)(1,"div",4)(2,"nui-sorter",5),T("sorterAction",function(l){return r.onSorterAction(l)}),a()(),o(3,"table",6),M(4,7),f(5,he,2,0,"th",8)(6,ve,2,1,"td",9),y(),M(7,10),f(8,Ae,2,0,"th",8)(9,Me,2,1,"td",9),y(),M(10,11),f(11,ye,2,0,"th",8)(12,ge,3,4,"td",9),y(),f(13,Ie,1,0,"tr",12)(14,be,1,0,"tr",13),a(),S(15,"nui-data-filter-list-example"),a()),t&2&&(c(2),p("itemsSource",r.sorterItems)("selectedItem",r.sortBy)("sortDirection",r.initialSortDirection),c(),p("dataSource",r.dataSource),c(10),p("nuiHeaderRowDef",r.displayedColumns),c(),p("nuiRowDefColumns",r.displayedColumns))},dependencies:()=>[w,Y,le,re,ce,me,pe,oe,se,ae,ne,we,X],encapsulation:2})}}return i})(),we=(()=>{class i{constructor(e,t){this.filterService=e,this.dataSourceService=t,this.state={repeat:{itemsSource:[]}}}ngAfterViewInit(){this.filterService.registerFilter({search:{componentInstance:this.search}}),this.filterService.applyFilters(),this.outputsSubscription=this.dataSourceService.outputsSubject.subscribe(e=>{this.state=e})}applyFilters(){this.filterService.applyFilters()}ngOnDestroy(){this.outputsSubscription.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(d(m),d(Se))}}static{this.\u0275cmp=h({type:i,selectors:[["nui-data-filter-list-example"]],viewQuery:function(t,r){if(t&1&&I(Oe,5),t&2){let n;b(n=O())&&(r.search=n.first)}},standalone:!1,features:[P([m,Se])],decls:8,vars:2,consts:[["listSearch",""],["filteringRepeat",""],["repeatItemTemplate",""],[1,"p-4",2,"border","1px solid green"],[1,"mb-2"],["id","nui-data-filter-basic-search",3,"inputChange","cancel"],["id","nui-data-filter-basic-repeat",3,"itemsSource","repeatItemTemplateRef"]],template:function(t,r){if(t&1){let n=g();o(0,"div",3)(1,"div",4)(2,"nui-search",5,0),T("inputChange",function(){return _(n),u(r.applyFilters())})("cancel",function(){return _(n),u(r.applyFilters())}),a()(),S(4,"nui-repeat",6,1),f(6,Ne,3,5,"ng-template",null,2,V),a()}if(t&2){let n=B(7);c(4),p("itemsSource",r.state.repeat==null?null:r.state.repeat.itemsSource)("repeatItemTemplateRef",n)}},dependencies:[ee,ie,X],encapsulation:2})}}return i})(),Le=(()=>{class i{constructor(e){this.timeframeService=e,this.timeFrameChanged=new H,this.tf={startDatetime:(0,A.default)("01/01/2019","L"),endDatetime:(0,A.default)("02/12/2019","L")},this.minDate=(0,A.default)("12/01/2018","L"),this.maxDate=(0,A.default)(),this.showFooter=!1,this.closePopoverSubject=new E,this.openPopoverSubject=new E}ngOnInit(){this.acceptedTimeframe=this.tf}updateTf(e){this.tf=e}confirmPopover(){this.closePopoverSubject.next(),this.acceptedTimeframe=this.tf,this.timeFrameChanged.emit(this.acceptedTimeframe)}cancelPopover(){this.showFooter=!1,this.closePopoverSubject.next()}getFilters(){return{type:"range",value:{start:this.acceptedTimeframe.startDatetime.toDate(),end:this.acceptedTimeframe.endDatetime.toDate()}}}static{this.\u0275fac=function(t){return new(t||i)(d(_e))}}static{this.\u0275cmp=h({type:i,selectors:[["nui-filtering-time-frame-picker"]],outputs:{timeFrameChanged:"timeFrameChanged"},standalone:!1,decls:6,vars:7,consts:()=>{let e;e=$localize`:␟6a3777f913cf3f288664f0632b9f24794fdcc24e␟6991067716289442185: Cancel `;let t;return t=$localize`:␟606e2983eb9d921195fc1c6d3785d096258ee2b7␟4164592547297134995: Apply `,[["popoverTimeFramePicker",""],e,t,["trigger","click","id","nui-data-filter-basic-time-frame-picker-popover",3,"template","hasPadding","closePopover","modal"],[1,"nui-text-link",2,"cursor","pointer"],[1,"p-3"],[3,"changed","startModel","maxDate","minDate"],["nui-button","","id","nui-data-filter-basic-time-frame-picker-cancel-btn","type","button","displayStyle","action",3,"click"],["nui-button","","id","nui-data-filter-basic-time-frame-picker-apply-btn","type","button","displayStyle","primary",3,"click"]]},template:function(t,r){if(t&1&&(o(0,"nui-popover",3)(1,"span",4),D(2),R(3,"timeFrame"),a()(),f(4,Pe,7,3,"ng-template",null,0,V)),t&2){let n=B(5);p("template",n)("hasPadding",!1)("closePopover",r.closePopoverSubject)("modal",!0),c(2),z(U(3,5,r.tf))}},dependencies:[J,Z,te,ue,de],encapsulation:2})}}return i})();export{Se as a,Ce as b,dt as c,Re as d,we as e,Le as f};
