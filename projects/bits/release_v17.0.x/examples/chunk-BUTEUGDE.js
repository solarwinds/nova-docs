import{a as N}from"./chunk-OH3MAJHV.js";import{d as L,r as m,s as f}from"./chunk-P53HI2D5.js";import{a as j,i as A}from"./chunk-LVGKZ3JP.js";import{E as V,a as y,x as B}from"./chunk-CHJVZ6O7.js";import{a as H}from"./chunk-KNI7S7QC.js";import{Aa as C,Ca as w,Ib as v,Ob as D,Pb as O,Ra as I,S as _,_c as M,da as u,ec as p,g as a,ga as l,h as b,mb as T,mc as S,nc as R,ob as g,oc as k,pb as s,qc as E,sc as F,wb as d,yb as P,yc as x,za as h}from"./chunk-7UJBXEVU.js";var U="nui-tooltip-panel",W=200,$=(()=>{class n{get message(){return this._message}set message(e){this._message=e,this._markForCheck(),this.ngZone.onMicrotaskEmpty.asObservable().pipe(_(1),l(this.destroy$)).subscribe(()=>{this.overlayComponent?.getOverlayRef()?.updatePosition()})}constructor(e,i,t,o){this._changeDetectorRef=e,this.scrollDispatcher=i,this.ngZone=t,this.overlay=o,this._visibility=!1,this._closeOnInteraction=!1,this._onHide=new a,this.destroy$=new a,this.hiding$=new b(!1)}ngOnInit(){this.updatePopupOverlayConfig()}updatePossiblePositions(e){this.possiblePositions=e,this.overlayComponent.getOverlayRef().getConfig().positionStrategy.withPositions(this.possiblePositions)}show(){this.hiding$.value?this.hiding$.pipe(u(1),_(1)).subscribe(e=>this._show()):this._show()}_show(){this.overlayComponent.show(),this._closeOnInteraction=!0,this._visibility=!0,this._markForCheck()}hide(){this._visibility=!1,this._markForCheck(),this.hiding$.next(!0),setTimeout(()=>{this.overlayComponent.hide(),this.hiding$.next(!1)},W)}afterHidden(){return this._onHide.asObservable()}isVisible(){return this._visibility===!0}ngOnDestroy(){this.overlayComponent.hide(),this._onHide.complete(),this.destroy$.next(),this.destroy$.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(e){this._closeOnInteraction=!0,e.fromState!=="void"&&(this.isVisible()||e.toState===!1&&this._onHide.next())}_handleBodyInteraction(){this._closeOnInteraction&&this.hide()}_markForCheck(){this._changeDetectorRef.markForCheck()}updatePopupOverlayConfig(){let e=this.scrollDispatcher.getAncestorScrollContainers(this.toggleReference),i=this.overlay.position().flexibleConnectedTo(this.toggleReference).withTransformOriginOn(".nui-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(e).withPositions(this.possiblePositions);i.positionChanges.pipe(u(1),l(this.destroy$)).subscribe(t=>{t.scrollableViewProperties.isOverlayClipped&&this.isVisible()&&this.ngZone.run(()=>this.hide())}),this.overlayConfig={positionStrategy:i,panelClass:U,scrollStrategy:this.overlay.scrollStrategies.reposition({autoClose:!0})},this._markForCheck()}static{this.\u0275fac=function(i){return new(i||n)(s(M),s(B),s(d),s(L))}}static{this.\u0275cmp=C({type:n,selectors:[["nui-tooltip-component"]],viewQuery:function(i,t){if(i&1&&S(f,7),i&2){let o;R(o=k())&&(t.overlayComponent=o.first)}},hostAttrs:["aria-hidden","true","role","tooltip"],hostBindings:function(i,t){i&1&&p("click",function(){return t._handleBodyInteraction()},!1,T)},decls:3,vars:4,consts:[[3,"toggleReference","overlayConfig"],[1,"nui-tooltip-body","with-nui-overlay","nui-text-small"]],template:function(i,t){i&1&&(D(0,"nui-overlay",0)(1,"div",1),p("@fadeIn.start",function(){return t._animationStart()})("@fadeIn.done",function(r){return t._animationDone(r)}),E(2),O()()),i&2&&(v("toggleReference",t.toggleReference.nativeElement)("overlayConfig",t.overlayConfig),g(),v("@fadeIn",t._visibility),g(),F(" ",t.message," "))},dependencies:[f],styles:[".nui-tooltip-body[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-inverse,#111);color:var(--nui-color-text-inverse,#fff);font-size:11px;line-height:14px;overflow:hidden;word-wrap:break-word;margin:10px;max-width:250px;padding:5px 10px;box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-tooltip-body.with-nui-overlay[_ngcontent-%COMP%]{margin:unset}"],data:{animation:[N]},changeDetection:0})}}return n})();var ce=(()=>{class n{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this.updateOverlayPositions())}get disabled(){return this._disabled}set disabled(e){this._disabled=y(e),this._disabled&&this.hide()}get ellipsis(){return this._ellipsis}set ellipsis(e){this._ellipsis=y(e)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message),this._message=e!=null?`${e}`.trim():"",!this._message&&this._isTooltipVisible()?this.hide():(this._updateTooltipMessage(),this._ariaDescriber.describe(this._elementRef.nativeElement,this.message))}constructor(e,i,t,o,r,Z){this._elementRef=e,this._viewContainerRef=i,this._ngZone=t,this._ariaDescriber=o,this._focusMonitor=r,this.overlayPositionService=Z,this._position="top",this._disabled=!1,this._ellipsis=!1,this._message="",this._manualListeners=new Map,this._destroyed=new a,this.overlayPositionService.setOverlayPositionConfig({arrowSize:10,arrowPadding:0});let K=e.nativeElement;this._manualListeners.set("mouseenter",()=>this.show()).set("mouseleave",()=>this.hide()),this._manualListeners.forEach((c,Q)=>K.addEventListener(Q,c)),r.monitor(e).pipe(l(this._destroyed)).subscribe(c=>{c?c==="keyboard"&&t.run(()=>this.show()):t.run(()=>this.hide())})}ngOnDestroy(){this._tooltipInstance&&(this._tooltipInstance=void 0),this._manualListeners.forEach((e,i)=>{this._elementRef.nativeElement.removeEventListener(i,e)}),this._manualListeners.clear(),this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.message),this._focusMonitor.stopMonitoring(this._elementRef)}show(){this.canShowTooltip()&&(this._tooltipInstance?this._tooltipInstance?.show():(this.createTooltipComponent(),this._updateTooltipMessage(),setTimeout(()=>{this.canShowTooltip()&&this._tooltipInstance?.show()})))}isOverflowing(){return this._elementRef.nativeElement.scrollWidth>this._elementRef.nativeElement.clientWidth+1}hide(){setTimeout(()=>this._tooltipInstance?.hide())}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_handleKeydown(e){this._isTooltipVisible()&&e.code===H.ESCAPE&&!V(e)&&(e.preventDefault(),e.stopPropagation(),this.hide())}_handleTouchend(){this.hide()}createTooltipComponent(){let e=this._viewContainerRef.createComponent($);this._tooltipInstance=e.instance,this._tooltipInstance.toggleReference=this._elementRef,this._tooltipInstance.possiblePositions=this.overlayPositionService.getPossiblePositionsForPlacement(this.position)}updateOverlayPositions(){if(!this._tooltipInstance)return;let e=this.overlayPositionService.getPossiblePositionsForPlacement(this.position);this._tooltipInstance.updatePossiblePositions(e)}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message)}canShowTooltip(){let e=!(this.disabled||!this.message||this._isTooltipVisible());return this.ellipsis?e&&this.isOverflowing():e}static{this.\u0275fac=function(i){return new(i||n)(s(I),s(P),s(d),s(j),s(A),s(m))}}static{this.\u0275dir=w({type:n,selectors:[["","nuiTooltip",""]],hostBindings:function(i,t){i&1&&p("longpress",function(){return t.show()})("keydown",function(r){return t._handleKeydown(r)})("touchend",function(){return t._handleTouchend()})},inputs:{position:[h.None,"tooltipPlacement","position"],disabled:[h.None,"nuiTooltipDisabled","disabled"],ellipsis:[h.None,"nuiTooltipEllipsis","ellipsis"],message:[h.None,"nuiTooltip","message"]},exportAs:["nuiTooltip"],features:[x([m])]})}}return n})();export{ce as a};
