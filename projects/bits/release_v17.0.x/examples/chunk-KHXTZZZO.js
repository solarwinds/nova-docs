import{p as X,u as z}from"./chunk-CHJVZ6O7.js";import{$c as C,Aa as O,Ba as R,Bb as L,Ca as c,Cb as j,Hb as F,M as w,Ra as y,S as I,Tb as P,_c as $,dd as q,ec as V,ed as K,g as u,ga as g,h as E,lc as m,mc as Q,nc as p,oc as _,pa as S,pb as o,ra as x,rb as A,w as b,y as f,yb as B,yc as U,za as D,zc as H}from"./chunk-7UJBXEVU.js";var N=class{constructor(){this.expansionModel=new z(!0)}toggle(n){this.expansionModel.toggle(this._trackByValue(n))}expand(n){this.expansionModel.select(this._trackByValue(n))}collapse(n){this.expansionModel.deselect(this._trackByValue(n))}isExpanded(n){return this.expansionModel.isSelected(this._trackByValue(n))}toggleDescendants(n){this.expansionModel.isSelected(this._trackByValue(n))?this.collapseDescendants(n):this.expandDescendants(n)}collapseAll(){this.expansionModel.clear()}expandDescendants(n){let e=[n];e.push(...this.getDescendants(n)),this.expansionModel.select(...e.map(t=>this._trackByValue(t)))}collapseDescendants(n){let e=[n];e.push(...this.getDescendants(n)),this.expansionModel.deselect(...e.map(t=>this._trackByValue(t)))}_trackByValue(n){return this.trackBy?this.trackBy(n):n}};var W=class extends N{constructor(n,e){super(),this.getChildren=n,this.options=e,this.options&&(this.trackBy=this.options.trackBy)}expandAll(){this.expansionModel.clear();let n=this.dataNodes.reduce((e,t)=>[...e,...this.getDescendants(t),t],[]);this.expansionModel.select(...n.map(e=>this._trackByValue(e)))}getDescendants(n){let e=[];return this._getDescendants(e,n),e.splice(1)}_getDescendants(n,e){n.push(e);let t=this.getChildren(e);Array.isArray(t)?t.forEach(s=>this._getDescendants(n,s)):f(t)&&t.pipe(I(1),w(Boolean)).subscribe(s=>{for(let r of s)this._getDescendants(n,r)})}},Z=new x("CDK_TREE_NODE_OUTLET_NODE"),M=(()=>{class i{constructor(e,t){this.viewContainer=e,this._node=t}static{this.\u0275fac=function(t){return new(t||i)(o(B),o(Z,8))}}static{this.\u0275dir=c({type:i,selectors:[["","cdkTreeNodeOutlet",""]],standalone:!0})}}return i})(),k=class{constructor(n){this.$implicit=n}},J=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(t){return new(t||i)(o(A))}}static{this.\u0275dir=c({type:i,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:[D.None,"cdkTreeNodeDefWhen","when"]},standalone:!0})}}return i})();var T=(()=>{class i{get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}constructor(e,t){this._differs=e,this._changeDetectorRef=t,this._onDestroy=new u,this._levels=new Map,this.viewChange=new E({start:0,end:Number.MAX_VALUE})}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy),this.treeControl}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){let e=this._nodeDefs.filter(t=>!t.when);e.length>1,this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;X(this._dataSource)?e=this._dataSource.connect(this):f(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=b(this._dataSource)),e&&(this._dataSubscription=e.pipe(g(this._onDestroy)).subscribe(t=>this.renderNodeChanges(t)))}renderNodeChanges(e,t=this._dataDiffer,s=this._nodeOutlet.viewContainer,r){let d=t.diff(e);d&&(d.forEachOperation((a,v,h)=>{if(a.previousIndex==null)this.insertNode(e[h],h,s,r);else if(h==null)s.remove(v),this._levels.delete(a.item);else{let G=s.get(v);s.move(G,h)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,t){if(this._nodeDefs.length===1)return this._nodeDefs.first;let s=this._nodeDefs.find(r=>r.when&&r.when(t,e))||this._defaultNodeDef;return s}insertNode(e,t,s,r){let d=this._getNodeDef(e,t),a=new k(e);this.treeControl.getLevel?a.level=this.treeControl.getLevel(e):typeof r<"u"&&this._levels.has(r)?a.level=this._levels.get(r)+1:a.level=0,this._levels.set(e,a.level),(s||this._nodeOutlet.viewContainer).createEmbeddedView(d.template,a,t),l.mostRecentTreeNode&&(l.mostRecentTreeNode.data=e)}static{this.\u0275fac=function(t){return new(t||i)(o(C),o($))}}static{this.\u0275cmp=O({type:i,selectors:[["cdk-tree"]],contentQueries:function(t,s,r){if(t&1&&m(r,J,5),t&2){let d;p(d=_())&&(s._nodeDefs=d)}},viewQuery:function(t,s){if(t&1&&Q(M,7),t&2){let r;p(r=_())&&(s._nodeOutlet=r.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],standalone:!0,features:[H],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,s){t&1&&P(0,0)},dependencies:[M],encapsulation:2})}}return i})(),l=(()=>{class i{get role(){return"treeitem"}set role(e){this._elementRef.nativeElement.setAttribute("role",e)}static{this.mostRecentTreeNode=null}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}constructor(e,t){this._elementRef=e,this._tree=t,this._destroyed=new u,this._dataChanges=new u,i.mostRecentTreeNode=this,this.role="treeitem"}ngOnInit(){this._parentNodeAriaLevel=Y(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){i.mostRecentTreeNode===this&&(i.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){!this._tree.treeControl.isExpandable&&this._tree.treeControl.getChildren,this.role="treeitem"}static{this.\u0275fac=function(t){return new(t||i)(o(y),o(T))}}static{this.\u0275dir=c({type:i,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(t,s){t&2&&F("aria-expanded",s.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"],standalone:!0})}}return i})();function Y(i){let n=i.parentElement;for(;n&&!ee(n);)n=n.parentElement;return n?n.classList.contains("cdk-nested-tree-node")?K(n.getAttribute("aria-level")):0:-1}function ee(i){let n=i.classList;return!!(n?.contains("cdk-nested-tree-node")||n?.contains("cdk-tree"))}var _e=(()=>{class i extends l{constructor(e,t,s){super(e,t),this._differs=s}ngAfterContentInit(){this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),this._tree.treeControl.getChildren;let e=this._tree.treeControl.getChildren(this.data);Array.isArray(e)?this.updateChildrenNodes(e):f(e)&&e.pipe(g(this._destroyed)).subscribe(t=>this.updateChildrenNodes(t)),this.nodeOutlet.changes.pipe(g(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnInit(){super.ngOnInit()}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(e){let t=this._getNodeOutlet();if(e&&(this._children=e),t&&this._children){let s=t.viewContainer;this._tree.renderNodeChanges(this._children,this._dataDiffer,s,this._data)}else this._dataDiffer.diff([])}_clear(){let e=this._getNodeOutlet();e&&(e.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){let e=this.nodeOutlet;return e&&e.find(t=>!t._node||t._node===this)}static{this.\u0275fac=function(t){return new(t||i)(o(y),o(T),o(C))}}static{this.\u0275dir=c({type:i,selectors:[["cdk-nested-tree-node"]],contentQueries:function(t,s,r){if(t&1&&m(r,M,5),t&2){let d;p(d=_())&&(s.nodeOutlet=d)}},hostAttrs:[1,"cdk-nested-tree-node"],exportAs:["cdkNestedTreeNode"],standalone:!0,features:[U([{provide:l,useExisting:i},{provide:Z,useExisting:i}]),L]})}}return i})();var ve=(()=>{class i{constructor(e,t){this._tree=e,this._treeNode=t,this.recursive=!1}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}static{this.\u0275fac=function(t){return new(t||i)(o(T),o(l))}}static{this.\u0275dir=c({type:i,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,s){t&1&&V("click",function(d){return s._toggle(d)})},inputs:{recursive:[D.HasDecoratorInputTransform,"cdkTreeNodeToggleRecursive","recursive",q]},standalone:!0,features:[j]})}}return i})();var De=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=R({type:i})}static{this.\u0275inj=S({})}}return i})();export{W as a,M as b,J as c,T as d,_e as e,ve as f,De as g};
