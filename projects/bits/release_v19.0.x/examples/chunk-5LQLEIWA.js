import{c as P}from"./chunk-OIGCZEVG.js";import{b as N}from"./chunk-EP75EVMT.js";import{a as z,b as x,c as Q}from"./chunk-O3JQU3EK.js";import{a as S}from"./chunk-DZ2EIOUK.js";import{a as q}from"./chunk-CUY44B7R.js";import{d as I}from"./chunk-OP3E7ERD.js";import{k as v}from"./chunk-EHNCPSLF.js";import{Ac as f,Dc as w,Eb as k,Ec as B,Fc as V,Oc as d,Pc as F,Qb as c,Wb as u,Xb as l,Yb as m,ac as y,mc as C,nb as s,nc as D,tb as T,xa as n,ya as o,yc as h,zb as g}from"./chunk-MC3BMXIX.js";import{g as W}from"./chunk-VBFW7A5V.js";var O=W(q());function E(r,_){if(r&1){let e=y();u(0,"nui-time-frame-bar",4),C("timeFrameChange",function(i){let b=n(e).$implicit,a=D();return o(a.changeTimeFrame(i,b))})("undo",function(){let i=n(e).$implicit;return o(i.undo())})("clear",function(){let i=n(e).$implicit;return o(i.change())}),m(1,"nui-icon",2),h(2),d(3,"timeFrame"),u(4,"nui-quick-picker",3),m(5,"nui-time-frame-picker"),l()()}if(r&2){let e=_.$implicit;c("id",e.id)("timeFrame",e.timeFrame)("historyIndex",e.history.index),s(2),f(" ",F(3,4,e.timeFrame)," ")}}var p=class{get baseDate(){return this._baseDate}constructor(_){this.id=_,this._baseDate=(0,O.default)([2018,5,1,15,0,0]),this.timeFrame=this.getDefaultTF(),this.history=new P,this.zoomIn=e=>this.timeFrame=this.history.save(e),this.undo=()=>this.timeFrame=this.history.undo(),this.change=e=>this.timeFrame=this.history.restart(e),this.history.restart(this.timeFrame)}getDefaultTF(){return{startDatetime:this._baseDate.clone().subtract(1,"week"),endDatetime:this._baseDate.clone()}}},U=(()=>{class r{constructor(e){this.timeframeService=e,this.bars=["first","second","third"].map(t=>new p(t)),this.barNoQuickPick=new p("bar-no-quick-pick")}ngOnInit(){setTimeout(()=>{this.zoomBar(this.bars[1]),this.zoomBar(this.bars[2]),this.zoomBar(this.bars[2])})}zoomBar(e){e.zoomIn(this.zoomTF(e.timeFrame))}zoomTF(e){return{startDatetime:e.startDatetime.clone().add(1,"day"),endDatetime:e.endDatetime.clone().subtract(1,"day")}}changeTimeFrame(e,t){let i=this.timeframeService.reconcileTimeframe(e,void 0,t.baseDate);t.change(i)}static{this.\u0275fac=function(t){return new(t||r)(T(z))}}static{this.\u0275cmp=g({type:r,selectors:[["nui-convenience-time-frame-bar-visual-test"]],standalone:!1,decls:6,vars:6,consts:[[3,"id","timeFrame","historyIndex","timeFrameChange","undo","clear",4,"ngFor","ngForOf"],[3,"timeFrameChange","id","timeFrame"],["icon","calendar",1,"pr-3"],["timeFrameSelection",""],[3,"timeFrameChange","undo","clear","id","timeFrame","historyIndex"]],template:function(t,i){t&1&&(k(0,E,6,6,"nui-time-frame-bar",0),u(1,"nui-time-frame-bar",1),V("timeFrameChange",function(a){return B(i.barNoQuickPick.timeFrame,a)||(i.barNoQuickPick.timeFrame=a),a}),m(2,"nui-icon",2),h(3),d(4,"timeFrame"),m(5,"nui-time-frame-picker",3),l()),t&2&&(c("ngForOf",i.bars),s(),c("id",i.barNoQuickPick.id),w("timeFrame",i.barNoQuickPick.timeFrame),s(2),f(" ",F(4,4,i.barNoQuickPick.timeFrame)," "))},dependencies:[v,I,S,x,N,Q],encapsulation:2})}}return r})();export{U as a};
