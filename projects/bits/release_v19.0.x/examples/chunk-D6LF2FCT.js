import{$ as m}from"./chunk-57V7DCE5.js";import{d as n}from"./chunk-OIGCZEVG.js";import{h as r,ia as o,na as h}from"./chunk-MC3BMXIX.js";import{i as c}from"./chunk-VBFW7A5V.js";var g=(()=>{class s extends m{constructor(a){super(),this.searchService=a,this.url="https://randomuser.me/api",this.seed="sw",this.page=1,this.dataStart=0,this.cache=Array.from({length:0}),this.step=new r(100),this.busy=new r(!1),this.itemsToLoad=new r(500)}getFilteredData(a){return c(this,null,function*(){return this.busy.next(!0),new Promise(i=>{setTimeout(()=>{this.getData(this.dataStart,this.dataStart+this.step.value).then(e=>{e&&(this.cache=this.cache.concat(e.users),this.dataSubject.next(this.cache),i({repeat:{itemsSource:this.cache},itemsToLoad:this.itemsToLoad.value,totalItems:1575,start:e.start}),this.busy.next(!1),this.dataStart+=this.step.value,this.page++)})},500)})})}getData(a=0,i=20){return c(this,null,function*(){let e;try{return e=yield(yield fetch(`${this.url}/?page=${this.page}&results=${i-a}&seed=${this.seed}`)).json(),{users:e?.results.map((t,l)=>({no:this.cache.length+l+1,nameTitle:t.name.title,nameFirst:t.name.first,nameLast:t.name.last,gender:t.gender,country:t.location.country,city:t.location.city,postcode:t.location.postcode,email:t.email,cell:t.cell})),total:e?.results.length,start:a}}catch{console.error("Error responding from server. Please visit https://https://randomuser.me/ to see if it's available")}})}static{this.\u0275fac=function(i){return new(i||s)(h(n))}}static{this.\u0275prov=o({token:s,factory:s.\u0275fac})}}return s})();export{g as a};
