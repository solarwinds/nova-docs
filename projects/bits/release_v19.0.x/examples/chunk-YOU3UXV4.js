import{a as k}from"./chunk-EP75EVMT.js";import{a as E,b as A,c as y}from"./chunk-O3JQU3EK.js";import{a as N}from"./chunk-DZ2EIOUK.js";import{c as x}from"./chunk-DCCIYGKJ.js";import{a as v}from"./chunk-YILH52ZF.js";import{l as F}from"./chunk-EHNCPSLF.js";import{Eb as f,Gc as R,Oc as g,Pc as h,Qb as c,Tc as O,Wb as n,Xb as l,ac as d,g as M,hc as u,mc as p,nb as m,nc as _,tb as T,xa as a,xc as P,ya as s,yc as S,zb as C,zc as I}from"./chunk-MC3BMXIX.js";function b(r,D){if(r&1){let e=d();n(0,"nui-dialog-footer")(1,"button",8),p("click",function(){a(e);let t=_(2);return s(t.cancelPopover())}),u(2,1),l(),n(3,"button",9),p("click",function(){a(e);let t=_(2);return s(t.confirmPopover())}),u(4,2),l()()}}function K(r,D){if(r&1){let e=d();n(0,"div")(1,"nui-quick-picker",5),p("presetSelected",function(t){a(e);let o=_();return s(o.handlePresetSelection(t))}),n(2,"nui-time-frame-picker",6),p("changed",function(t){a(e);let o=_();return s(o.updateTf(t))}),l()()(),f(3,b,5,0,"nui-dialog-footer",7)}if(r&2){let e=_();m(),c("presets",e.presets)("selectedPreset",e.acceptedTimeframe.selectedPresetId),m(),c("startModel",e.acceptedTimeframe),m(),c("ngIf",e.showFooter)}}var H=(()=>{class r{constructor(e){this.timeframeService=e,this.presets={last42Hours:{name:$localize`Last 42 hours`,startDatetimePattern:{hours:-42},endDatetimePattern:{}},last749Days:{name:$localize`Last 749 days`,startDatetimePattern:{days:-749},endDatetimePattern:{}}},this.selectedPresetKey="last42Hours",this.showFooter=!1,this.closePopoverSubject=new M,this.openPopoverSubject=new M,this.timeframeService.currentPresets=this.presets,this.acceptedTimeframe=this.timeframeService.getTimeframeByPresetId(this.selectedPresetKey),this.tf=this.acceptedTimeframe}updateTf(e){this.tf=e;let i=()=>this.timeframeService.areTimeFrameDatesValid(e),t=()=>this.timeframeService.isEqual(this.tf,this.acceptedTimeframe);i()&&!t()&&(this.showFooter=!0),this.selectedPresetKey=this.tf.selectedPresetId}confirmPopover(){this.showFooter=!1,this.closePopoverSubject.next(),this.acceptedTimeframe=this.tf}cancelPopover(){this.showFooter=!1,this.closePopoverSubject.next()}handlePresetSelection(e){this.selectedPresetKey=e,this.tf=this.timeframeService.getTimeframeByPresetId(e),this.acceptedTimeframe=this.tf,this.closePopoverSubject.next()}static{this.\u0275fac=function(i){return new(i||r)(T(E))}}static{this.\u0275cmp=C({type:r,selectors:[["nui-time-frame-picker-custom"]],standalone:!1,features:[R([E])],decls:6,vars:7,consts:()=>{let e;e=$localize`:␟8946b0053f321c7db24853d1b213b1ea9794c789␟2079707468789363335:Custom Range`;let i;i=$localize`:␟bf844a41a29961b6dacc48a20eaf97bef0cf5013␟7452095619502551190: Cancel `;let t;return t=$localize`:␟3c8adc665cde2a280fd027f86fca78239d8a890c␟3416889908563565605: Use `,[["popoverTimeFramePicker",""],i,t,["trigger","click",3,"template","hasPadding","closePopover","modal"],[1,"nui-text-link",2,"cursor","pointer"],["pickerTitle",e,3,"presetSelected","presets","selectedPreset"],[3,"changed","startModel"],[4,"ngIf"],["nui-button","","type","button","displayStyle","action",1,"pr-3","nui-time-frame-picker__cancel",3,"click"],["nui-button","","type","button","displayStyle","primary",1,"nui-time-frame-picker__use",3,"click"]]},template:function(i,t){if(i&1&&(n(0,"nui-popover",3)(1,"span",4),S(2),g(3,"timeFrame"),l()(),f(4,K,4,4,"ng-template",null,0,O)),i&2){let o=P(5);c("template",o)("hasPadding",!1)("closePopover",t.closePopoverSubject)("modal",!0),m(2),I(h(3,5,t.acceptedTimeframe))}},dependencies:[v,N,A,x,F,k,y],encapsulation:2})}}return r})();export{H as a};
