import{a as h,b as Q}from"./chunk-O3JQU3EK.js";import{a as U}from"./chunk-DZ2EIOUK.js";import{c as X}from"./chunk-DCCIYGKJ.js";import{a as W}from"./chunk-CUY44B7R.js";import{a as G}from"./chunk-3SNBLT4R.js";import{a as z}from"./chunk-YILH52ZF.js";import{c as q}from"./chunk-WLK22LTS.js";import{j as V,l as j}from"./chunk-EHNCPSLF.js";import{Eb as F,Ha as E,Jc as $,Qb as _,Tc as w,Wb as o,Xb as r,Yc as L,ac as g,ba as S,g as R,hc as I,ic as P,jc as N,kc as y,mc as u,nb as c,nc as p,oc as M,pc as d,tb as C,tc as A,vc as v,wa as B,wc as D,xa as s,xc as x,ya as l,zb as T}from"./chunk-MC3BMXIX.js";import{g as J}from"./chunk-VBFW7A5V.js";var Z=["*"],H=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=T({type:n,selectors:[["nui-dialog-footer"]],standalone:!1,ngContentSelectors:Z,decls:2,vars:0,consts:[["aria-label","Dialog footer",1,"dialog-footer"]],template:function(t,i){t&1&&(M(),o(0,"div",0),d(1),r())},styles:[`.dialog-footer{display:flex;justify-content:flex-end;padding:15px;text-align:right;border-top:1px solid #d9d9d9;border-top:1px solid var(--nui-color-line-default, #d9d9d9)}.dialog-footer .btn:first-child{margin-left:15px}.dialog-footer .btn+.btn{margin-left:15px;margin-bottom:0}.dialog-footer .btn-group .btn+.btn{margin-left:-1px}.dialog-footer .btn-block+.btn-block{margin-left:0}
`],encapsulation:2})}}return n})();var k=J(W());var ee=[[["","leftContent",""]],"*",[["","rightContent",""]],[["","timeFrameSelection",""]]],te=["[leftContent]","*","[rightContent]","[timeFrameSelection]"],ie=n=>({"px-3 py-2":n});function ne(n,b){if(n&1){let e=g();o(0,"button",18),u("click",function(){s(e);let i=p();return l(i.onUndo())}),r()}}function oe(n,b){if(n&1){let e=g();o(0,"button",19),u("click",function(){s(e);let i=p();return l(i.onClear())}),r()}}function re(n,b){if(n&1){let e=g();o(0,"nui-dialog-footer")(1,"button",22),u("click",function(){s(e);let i=p(2);return l(i.closePopover())}),I(2,1),r(),o(3,"button",23),u("click",function(){s(e);let i=p(2);return l(i.closePopover(!0))}),I(4,2),r()()}}function ae(n,b){if(n&1&&(o(0,"div",20),d(1,3),r(),F(2,re,5,0,"nui-dialog-footer",21)),n&2){let e=p();_("ngClass",$(2,ie,!e.quickPicker)),c(2),_("ngIf",e.changed)}}var Ie=(()=>{class n{constructor(e,t,i){this.timeframeService=e,this.logger=t,this.changeDetectorRef=i,this.timeFrame={startDatetime:(0,k.default)(void 0),endDatetime:(0,k.default)(void 0)},this.timeFrameChange=new E,this.historyIndex=0,this.undo=new E,this.clear=new E,this.closePopoverSubject=new R,this.changed=!1,this.isLeftmostRange=!1,this.isRightmostRange=!1,this.defaultPickerTitle=$localize`:Label indicating that the user can select a custom start date and/or end date:Custom Range`,this.destroy$=new R,this.presets=this.timeframeService.getDefaultPresets()}ngAfterContentInit(){if(!this.timeFramePicker)throw new Error("TimeFramePickerComponent must be present in 'timeFrameSelection' slot");(this.timeFramePicker.minDate||this.timeFramePicker.maxDate||this.timeFramePicker.startModel)&&this.logger.warn(`minDate, maxDate, and startModel inputs set on the TimeFramePickerComponent will be ignored. Use the minDate,
maxDate, and timeFrame inputs on the TimeFrameBarComponent instead.`),this.timeFramePicker.model=this.pickerTimeframe,this.timeFramePicker.minDate=this.minDate,this.timeFramePicker.maxDate=this.maxDate,this.timeFramePicker.changed.pipe(S(this.destroy$)).subscribe(e=>this.updatePickerTf(e)),this.quickPicker&&(this.quickPicker.presets=this.quickPicker.presets||this.timeframeService.getDefaultPresets(),this.quickPicker.pickerTitle=this.quickPicker.pickerTitle===void 0?this.defaultPickerTitle:this.quickPicker.pickerTitle,this.quickPicker.presetSelected.pipe(S(this.destroy$)).subscribe(e=>this.handlePresetSelection(e)))}ngOnChanges(e){if(e.timeFrame){let t=e.timeFrame.currentValue;this.isLeftmostRange=this.minDate&&this.minDate.diff(t.startDatetime)>=0,this.isRightmostRange=this.maxDate&&this.maxDate.diff(t.endDatetime)<=0,this.pickerTimeframe=h.cloneTimeFrame(t),this.humanizedTimeframe=this.timeframeService.getDuration(this.timeFrame).humanize()}}onPopoverShown(){this.timeFramePicker.model=this.pickerTimeframe,this.timeFramePicker.changeDetector.markForCheck(),this.quickPicker&&(this.quickPicker.selectedPreset=this.timeFrame.selectedPresetId,this.quickPicker.changeDetector.markForCheck())}onUndo(){this.undo.emit()}onClear(){this.clear.emit()}updatePickerTf(e){this.pickerTimeframe=e,this.changed=!this.timeframeService.isEqual(this.pickerTimeframe,this.timeFrame),this.changeDetectorRef.markForCheck()}handlePresetSelection(e){this.pickerTimeframe=this.timeframeService.getTimeframeByPresetId(e),this.quickPicker.selectedPreset=e,this.quickPicker.changeDetector.markForCheck(),this.closePopover(!0)}closePopover(e=!1){e&&this.changeTimeFrame(h.cloneTimeFrame(this.pickerTimeframe)),this.closePopoverSubject.next(),this.changed=!1}shiftRange(e){let t=this.timeFrame,i=k.default.duration(e*t.endDatetime.diff(t.startDatetime));this.changeTimeFrame(this.timeframeService.shiftTimeFrame(t,i))}ngOnDestroy(){this.destroy$.next()}changeTimeFrame(e){this.timeFrameChange.emit(e)}static{this.\u0275fac=function(t){return new(t||n)(C(h),C(q),C(L))}}static{this.\u0275cmp=T({type:n,selectors:[["nui-time-frame-bar"]],contentQueries:function(t,i,a){if(t&1&&(A(a,Q,5),A(a,U,5)),t&2){let m;v(m=D())&&(i.timeFramePicker=m.first),v(m=D())&&(i.quickPicker=m.first)}},hostAttrs:["role","spinbutton"],inputs:{minDate:"minDate",maxDate:"maxDate",timeFrame:"timeFrame",historyIndex:"historyIndex"},outputs:{timeFrameChange:"timeFrameChange",undo:"undo",clear:"clear"},standalone:!1,features:[B],ngContentSelectors:te,decls:20,vars:11,consts:()=>{let e;e=$localize`:␟4f26c54d5c3edadf92756d7d3ce466dde1f01e2a␟5775346636203685655:Undo`;let t;t=$localize`:␟e1991c2a3e9fb8fbe05a85b99e4a0151414a5c5c␟648306878592239743:Reset to default`;let i;i=$localize`:e.g. '7 days before' or 'an hour before'␟41f16c4be08949d7372a755efd0ccb65d83b8eac␟4346433796840139965:${"\uFFFD0\uFFFD"}:INTERPOLATION: before`;let a;a=$localize`:e.g. '7 days later' or 'an hour later'␟87d02971b221271ba38f4170b32353446db0650a␟5173278195527438176:${"\uFFFD0\uFFFD"}:INTERPOLATION: later`;let m;m=$localize`:␟bf844a41a29961b6dacc48a20eaf97bef0cf5013␟7452095619502551190: Cancel `;let O;return O=$localize`:Imperative indicating that the user would like to apply, or use,
                the current value␟3c8adc665cde2a280fd027f86fca78239d8a890c␟3416889908563565605: Use `,[["popoverTimeFramePicker",""],m,O,["nuiTooltip",i],["nuiTooltip",a],[1,"nui-time-frame-bar","py-2"],[1,"left-content","pr-4"],[1,"prev",6,"nuiTooltip"],["nui-button","","type","button","icon","caret-left","displayStyle","action",3,"click","disabled"],[1,"picker-label","d-inline-flex","px-3"],["trigger","click",3,"shown","template","hasPadding","closePopover","modal","unlimited"],[1,"picker-label-content","d-inline-flex","align-items-center","nui-text-link"],[1,"next",6,"nuiTooltip"],["nui-button","","type","button","icon","caret-right","displayStyle","action",3,"click","disabled"],[1,"right-content","d-flex","pl-4"],[1,"pr-3"],["nui-button","","class","undo ml-1","type","button","displayStyle","action","icon","undo","nuiTooltip",e,3,"click",4,"ngIf"],["nui-button","","class","clear ml-1","type","button","displayStyle","action","icon","reset","nuiTooltip",t,3,"click",4,"ngIf"],["nui-button","","type","button","displayStyle","action","icon","undo","nuiTooltip",e,1,"undo","ml-1",3,"click"],["nui-button","","type","button","displayStyle","action","icon","reset","nuiTooltip",t,1,"clear","ml-1",3,"click"],[3,"ngClass"],[4,"ngIf"],["nui-button","","type","button","displayStyle","action",1,"cancel","mr-3",3,"click"],["nui-button","","type","button","displayStyle","primary",1,"use",3,"click"]]},template:function(t,i){if(t&1){let a=g();M(ee),o(0,"div",5)(1,"div",6),d(2),r(),o(3,"div",7),P(4,3),o(5,"button",8),u("click",function(){return s(a),l(i.shiftRange(-1))}),r()(),o(6,"div",9)(7,"nui-popover",10),u("shown",function(){return s(a),l(i.onPopoverShown())}),o(8,"div",11),d(9,1),r()()(),o(10,"div",12),P(11,4),o(12,"button",13),u("click",function(){return s(a),l(i.shiftRange(1))}),r()(),o(13,"div",14)(14,"div",15),F(15,ne,1,0,"button",16)(16,oe,1,0,"button",17),r(),d(17,2),r()(),F(18,ae,3,4,"ng-template",null,0,w)}if(t&2){let a=x(19);c(3),N(i.humanizedTimeframe),y(4),c(2),_("disabled",i.isLeftmostRange),c(2),_("template",a)("hasPadding",!1)("closePopover",i.closePopoverSubject)("modal",!0)("unlimited",!0),c(3),N(i.humanizedTimeframe),y(11),c(2),_("disabled",i.isRightmostRange),c(3),_("ngIf",i.historyIndex>1),c(),_("ngIf",i.historyIndex>0)}},dependencies:[z,V,j,H,X,G],styles:['.nui-time-frame-bar[_ngcontent-%COMP%]{display:grid;justify-content:space-between;align-items:center;grid-gap:5px;grid-template-columns:1fr auto auto auto 1fr;grid-template-areas:"left-content   prev picker-label next   right-content"}.nui-time-frame-bar[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]{grid-area:left-content;justify-self:start}.nui-time-frame-bar[_ngcontent-%COMP%]   .prev[_ngcontent-%COMP%]{grid-area:prev}.nui-time-frame-bar[_ngcontent-%COMP%]   .picker-label[_ngcontent-%COMP%]{grid-area:picker-label;cursor:pointer}.nui-time-frame-bar[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%]{grid-area:next}.nui-time-frame-bar[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{grid-area:right-content;justify-self:end}'],changeDetection:0})}}return n})();export{H as a,Ie as b};
