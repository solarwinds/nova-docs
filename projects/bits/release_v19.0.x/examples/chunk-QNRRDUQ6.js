import{a as w}from"./chunk-EP75EVMT.js";import{a as P,b as V,c as X}from"./chunk-O3JQU3EK.js";import{a as b}from"./chunk-DZ2EIOUK.js";import{c as $}from"./chunk-DCCIYGKJ.js";import{a as U}from"./chunk-YILH52ZF.js";import{k as N,l as A}from"./chunk-EHNCPSLF.js";import{Eb as d,Gc as h,Oc as y,Pc as L,Qb as s,Tc as D,Wb as c,Xb as _,Yc as K,ac as T,g as u,hc as S,mc as E,nb as a,nc as o,oc as I,pc as R,tb as M,uc as x,vc as g,wc as k,xa as l,xc as v,ya as p,yc as O,zb as C,zc as F}from"./chunk-MC3BMXIX.js";var j=["scoper"];function z(n,f){if(n&1){let t=T();c(0,"nui-dialog-footer")(1,"button",11),E("click",function(){l(t);let e=o(2).index,r=o();return p(r.cancelPopover(e))}),S(2,2),_(),c(3,"button",12),E("click",function(){l(t);let e=o(2).index,r=o();return p(r.confirmPopover(e))}),S(4,3),_()()}}function G(n,f){if(n&1){let t=T();c(0,"div")(1,"nui-quick-picker",8),E("presetSelected",function(e){l(t);let r=o().index,m=o();return p(m.handlePresetSelection(e,r))}),c(2,"nui-time-frame-picker",9),E("changed",function(e){l(t);let r=o().index,m=o();return p(m.updateTf(e,r))}),_()()(),d(3,z,5,0,"nui-dialog-footer",10)}if(n&2){let t=o().$implicit,i=o();a(),s("presets",t.presets)("selectedPreset",t.acceptedTimeframe.selectedPresetId),a(),s("startModel",t.acceptedTimeframe),a(),s("ngIf",i.showFooter)}}function Q(n,f){if(n&1&&(c(0,"div",5)(1,"nui-time-frame-service-scoper",null,0)(3,"nui-popover",6)(4,"span",7),O(5),y(6,"timeFrame"),_()(),d(7,G,4,4,"ng-template",null,1,D),_()()),n&2){let t=f.$implicit,i=v(8),e=o();a(3),s("template",i)("hasPadding",!1)("closePopover",e.closePopoverSubject)("modal",!0),a(2),F(L(6,5,t.acceptedTimeframe))}}var q=["*"],ae=(()=>{class n{constructor(t){this.cdRef=t,this.pickers=[{id:"1",presets:{last42Hours:{name:$localize`Last 42 hours`,startDatetimePattern:{hours:-42},endDatetimePattern:{}},last749Days:{name:$localize`Last 749 days`,startDatetimePattern:{days:-749},endDatetimePattern:{}}},selectedPresetKey:"last749Days"},{id:"2",presets:{last42Hours:{name:$localize`Last 42 hours`,startDatetimePattern:{hours:-42},endDatetimePattern:{}}},selectedPresetKey:"last42Hours"},{id:"3",presets:{lastYear:{name:$localize`Last year`,startDatetimePattern:{year:-1},endDatetimePattern:{}},last10Years:{name:$localize`Last 10 years`,startDatetimePattern:{year:-10},endDatetimePattern:{}}},selectedPresetKey:"lastYear"}],this.presets={last42Hours:{name:$localize`Last 42 hours`,startDatetimePattern:{hours:-42},endDatetimePattern:{}},last749Days:{name:$localize`Last 749 days`,startDatetimePattern:{days:-749},endDatetimePattern:{}}},this.showFooter=!1,this.closePopoverSubject=new u,this.openPopoverSubject=new u}updateTf(t,i){let e=this.pickers[i];e.tf=t;let r=()=>e.timeframeService?.areTimeFrameDatesValid(t),m=()=>e.timeframeService?.isEqual(e.tf,e.acceptedTimeframe);r()&&!m()&&(this.showFooter=!0),e.selectedPresetKey=e.tf.selectedPresetId}ngAfterViewInit(){this.tfScopers.forEach((t,i)=>{let e=this.pickers[i],r=t.timeframeService;e.timeframeService=r,r.currentPresets=e.presets,e.acceptedTimeframe=r.getTimeframeByPresetId(e.selectedPresetKey),e.tf=e.acceptedTimeframe}),this.cdRef.detectChanges()}confirmPopover(t){let i=this.pickers[t];this.showFooter=!1,this.closePopoverSubject.next(),i.acceptedTimeframe=i.tf}cancelPopover(t){this.showFooter=!1,this.closePopoverSubject.next()}handlePresetSelection(t,i){let e=this.pickers[i];e.selectedPresetKey=t,e.tf=e.timeframeService?.getTimeframeByPresetId(t),e.acceptedTimeframe=e.tf,this.closePopoverSubject.next()}static{this.\u0275fac=function(i){return new(i||n)(M(K))}}static{this.\u0275cmp=C({type:n,selectors:[["nui-time-frame-picker-multiple-custom-pickers"]],viewQuery:function(i,e){if(i&1&&x(j,5),i&2){let r;g(r=k())&&(e.tfScopers=r)}},standalone:!1,decls:1,vars:1,consts:()=>{let t;t=$localize`:␟8946b0053f321c7db24853d1b213b1ea9794c789␟2079707468789363335:Custom Range`;let i;i=$localize`:␟6a3777f913cf3f288664f0632b9f24794fdcc24e␟6991067716289442185: Cancel `;let e;return e=$localize`:␟ed00b437e9ad627b97f49a51d7efc46c7f8001e5␟3260792159339867964: Use `,[["scoper",""],["popoverTimeFramePicker",""],i,e,["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],["trigger","click",3,"template","hasPadding","closePopover","modal"],[1,"nui-text-link",2,"cursor","pointer"],["pickerTitle",t,3,"presetSelected","presets","selectedPreset"],[3,"changed","startModel"],[4,"ngIf"],["nui-button","","type","button","displayStyle","action",1,"pr-3","nui-time-frame-picker__cancel",3,"click"],["nui-button","","type","button","displayStyle","primary",1,"nui-time-frame-picker__use",3,"click"]]},template:function(i,e){i&1&&d(0,Q,9,7,"div",4),i&2&&s("ngForOf",e.pickers)},dependencies:()=>[U,b,V,$,N,A,w,B,X],encapsulation:2})}}return n})(),B=(()=>{class n{constructor(t){this.timeframeService=t}static{this.\u0275fac=function(i){return new(i||n)(M(P))}}static{this.\u0275cmp=C({type:n,selectors:[["nui-time-frame-service-scoper"]],standalone:!1,features:[h([P])],ngContentSelectors:q,decls:1,vars:0,template:function(i,e){i&1&&(I(),R(0))},encapsulation:2})}}return n})();export{ae as a,B as b};
