import{f as T,h as Z}from"./chunk-OX7W4O7J.js";import{$,Bb as _,C as c,F as i,La as B,O as g,Q as h,Sb as b,Z as n,aa as m,ba as u,da as y,g as D,q as f,sb as I,tb as a,tc as w,v as L,vc as R,w as v,wc as C}from"./chunk-MC3BMXIX.js";var F=(()=>{class o{get isDropZoneActive(){return this.targetDropList._dropListRef.isReceiving()||this.targetDropList._dropListRef.isDragging()}get canLastDragItemBeDropped(){return this._canLastDragItemBeDropped}constructor(r,e,t){this.targetDropList=r,this.renderer=e,this.itemDragStarted$=new D,this._destroy$=new D;let p=c(t.nativeElement,"mouseenter"),s=c(t.nativeElement,"mouseleave"),A=i(p,this.itemDragStarted$,this.targetDropList.entered),k=i(s,this.targetDropList.dropped,this.targetDropList.exited);this.showDropZone$=i(A.pipe(g(!0)),k.pipe(g(!1))).pipe(h(),n());let E=i(this.targetDropList.entered.pipe(L(d=>d.item)),this.itemDragStarted$).pipe(n());this.canLastDragItemBeDropped$=v([this.showDropZone$,E]).pipe(m(([d,Q])=>{let l=d?this.canBeDropped?.(Q.data,this.targetDropList)??!0:!1;return this._canLastDragItemBeDropped=l,f(l)}),h(),n()),this.canLastDragItemBeDropped$.pipe(u(this._destroy$)).subscribe()}ngAfterContentInit(){this.draggables.changes.pipe($(this.draggables.toArray()),m(r=>i(...r.map(e=>e.started))),y(r=>this.itemDragStarted$.next(r.source)),u(this._destroy$)).subscribe()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}static{this.\u0275fac=function(e){return new(e||o)(a(Z),a(I),a(B))}}static{this.\u0275dir=_({type:o,selectors:[["","cdkDropList","","nuiDndDropTarget",""]],contentQueries:function(e,t,p){if(e&1&&w(p,T,5),e&2){let s;R(s=C())&&(t.draggables=s)}},hostVars:8,hostBindings:function(e,t){e&2&&b("nui-dnd-dropzone",!0)("nui-dnd-dropzone--active",t.isDropZoneActive)("nui-dnd-dropzone--drop-allowed",t.isDropZoneActive&&t.canLastDragItemBeDropped)("nui-dnd-dropzone--drop-not-allowed",t.isDropZoneActive&&t.canLastDragItemBeDropped===!1)},inputs:{canBeDropped:"canBeDropped"},exportAs:["nuiDndDropTarget"],standalone:!1})}}return o})();export{F as a};
