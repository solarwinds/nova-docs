import{a as L}from"./chunk-JGO3K5JF.js";import{d as V,p as d}from"./chunk-IOE73CTL.js";import{h as k}from"./chunk-ZXL2SUGA.js";import{e as j,i as Y}from"./chunk-LO2VWMBZ.js";import{a as B}from"./chunk-EHNCPSLF.js";import{Bb as T,Ha as l,La as a,Pb as O,Qb as R,Sb as E,Wb as g,Xb as m,Yb as P,Yc as A,ba as C,g as b,mc as S,nb as w,oc as D,pc as f,tb as p,tc as I,uc as v,vc as c,wa as _,wc as h,zb as x}from"./chunk-MC3BMXIX.js";import{a as s,b as u}from"./chunk-VBFW7A5V.js";var H=(()=>{class n{constructor(e){this.host=e,this.toggle=new l}handleElementFocus(e){!this.isDisabled&&!this.disabled&&this.toggle.emit(e)}static{this.\u0275fac=function(t){return new(t||n)(p(a))}}static{this.\u0275dir=T({type:n,selectors:[["","nuiPopupToggle",""]],hostBindings:function(t,i){t&1&&S("click",function(r){return i.handleElementFocus(r)})},inputs:{isDisabled:"isDisabled",disabled:"disabled"},outputs:{toggle:"toggle"},standalone:!1})}}return n})();var F=["popupArea"],U=["*",[["","popupAreaContent",""]]],q=["*","[popupAreaContent]"],N="nui-overlay",X="visible",Q={panelClass:["popup-adapter-overlay",V]},xe=(()=>{class n{get overlayConfig(){return this._overlayConfig}set overlayConfig(e){this._overlayConfig=s(s({},Q),e)}set isOpen(e){if(this.isContentInitialized){this.isOpenHandler(e);return}setTimeout(()=>this.isOpenHandler(e))}get isOpen(){return!!this.popup?.showing}set visible(e){if(this._visible=e,e){this.popup.getOverlayRef().addPanelClass(X);return}this.popup.getOverlayRef().removePanelClass(X)}get visible(){return!!this._visible}constructor(e,t,i,o,r){this.overlay=e,this.cdRef=t,this.eventBusService=i,this.host=o,this.document=r,this.width="auto",this.appendToBody=!1,this.ariaLabel="Popup",this.opened=new l,this._overlayConfig=Q,this.destroy$=new b}ngOnChanges(e){e.appendToBody&&(e.appendToBody?.currentValue===!1?this.customContainer=this.popupArea:this.customContainer=void 0),e.width&&(this.overlayConfig=u(s({},this.overlayConfig),{width:this.width})),(e.directionTop||e.directionRight)&&(this.overlayConfig=u(s({},this.overlayConfig),{positionStrategy:this.getPositionStrategy()}))}ngAfterContentInit(){this.isContentInitialized=!0,this.initToggleRef(),this.overlayConfig=u(s({},this.overlayConfig),{positionStrategy:this.getPositionStrategy()}),this.popupToggle&&this.popupToggle.toggle.subscribe(e=>this.toggleOpened(e))}ngAfterViewInit(){this.overlayConfig=u(s({},this.overlayConfig),{width:this.width}),this.manualOpenControl&&this.manualOpenControl.subscribe(e=>this.toggleOpened(e)),this.appendToBody||(this.customContainer=this.popupArea),this.eventBusService.getStream(j).pipe(C(this.destroy$)).subscribe(e=>{let t=this.popupToggle&&e?this.popupToggle.host.nativeElement.contains(e.target):!1;this.isOpen&&!t&&this.closePopup()}),this.cdRef.detectChanges()}toggleOpened(e){let t=!0;e&&(this.lastEventType==="focusin"&&e.type==="focusin"&&this.isOpen&&(t=!0),this.lastEventType==="focusin"&&e.type==="click"&&(t=!1),e.type==="focusout"&&!this.isOpen&&(t=!1),this.lastEventType=e.type),t&&this.toggle()}closePopup(){this.hide()}ngOnDestroy(){this.isOpen&&this.hide(),this.destroy$.next(),this.destroy$.complete()}getPopupConnectedPosition(){let e={originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},t={originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},i={originX:"end",originY:"top",overlayX:"start",overlayY:"bottom"},o={originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},r={originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},y={originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"};return this.directionTop&&this.directionRight?[y]:this.directionTop?[t,i]:this.directionRight?[o,r]:[e,t,i,o,r,y]}getPositionStrategy(){return this.overlay.position().flexibleConnectedTo(this.toggleReference).withPush(!1).withViewportMargin(0).withPositions(this.getPopupConnectedPosition())}isOpenHandler(e){e?this.show():this.hide()}show(){if(!this.toggleReference)return;this.initToggleRef(),this.popup.show();let e=this.popup.getOverlayRef().overlayElement;this.popupAreaContent=new a(e),this.popupAreaContainer=new a(e.querySelector(`.${N}`)),this.contextClass&&this.contextClass.split(" ").forEach(t=>{this.popupAreaContainer.nativeElement.classList.add(t)}),this.visible=!0,this.opened.emit(this.popup.showing)}hide(){this.visible=!1,setTimeout(()=>{this.popup.hide(),this.opened.emit(this.popup.showing)})}toggle(){this.popup.showing?this.hide():this.show(),this.popup.getOverlayRef().updatePosition()}initToggleRef(){if(this.isHostToggleRef){this.toggleReference=this.host.nativeElement;return}this.toggleReference=this.popupToggle?this.popupToggle.host.nativeElement:this.document.querySelector(this.baseElementSelector)}static{this.\u0275fac=function(t){return new(t||n)(p(k),p(A),p(Y),p(a),p(B))}}static{this.\u0275cmp=x({type:n,selectors:[["nui-popup"]],contentQueries:function(t,i,o){if(t&1&&I(o,H,5),t&2){let r;c(r=h())&&(i.popupToggle=r.first)}},viewQuery:function(t,i){if(t&1&&(v(F,7),v(d,5)),t&2){let o;c(o=h())&&(i.popupArea=o.first),c(o=h())&&(i.popup=o.first)}},hostAttrs:["role","dialog",1,"nui-popup"],hostVars:1,hostBindings:function(t,i){t&2&&O("aria-label",i.ariaLabel)},inputs:{width:"width",overlayConfig:"overlayConfig",contextClass:"contextClass",directionTop:"directionTop",directionRight:"directionRight",manualOpenControl:"manualOpenControl",appendToBody:"appendToBody",baseElementSelector:"baseElementSelector",isHostToggleRef:"isHostToggleRef",ariaLabel:"ariaLabel",isOpen:"isOpen",visible:"visible"},outputs:{opened:"opened"},standalone:!1,features:[_],ngContentSelectors:q,decls:9,vars:5,consts:[["popupArea",""],["nuiClickInterceptor","",1,"nui-popup-container"],[1,"nui-popup__content"],[3,"toggleReference","overlayConfig","customContainer"],[1,"nui-popup__area"],[1,"nui-popup__area--container"]],template:function(t,i){t&1&&(D(U),g(0,"div",1)(1,"div",2),f(2),m(),P(3,"div",null,0),g(5,"nui-overlay",3)(6,"div",4)(7,"div",5),f(8,1),m()()()()),t&2&&(E("nui-popup--opened",i.isOpen),w(5),R("toggleReference",i.toggleReference)("overlayConfig",i.overlayConfig)("customContainer",i.customContainer))},dependencies:[L,d],styles:[`.nui-popup{display:inline-flex;position:relative}.nui-popup__content{display:inline-flex;flex-direction:row}.nui-select-popup-host.nui-popup__area{width:auto}.nui-select-popup-host.nui-popup__area .nui-menu-item .nui-menu-item__action{color:var(--nui-color-text-default,#111)}.nui-select-popup-host.nui-popup__area .nui-menu-item.item-selected .nui-menu-item__action{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1));color:var(--nui-color-text-default,#111);font-weight:600}.nui-select-popup-host.nui-popup__area .nui-menu-item.item-selected .nui-menu-item__action:hover{background-color:var(--nui-color-selected-hover,rgba(0, 196, 210, .2))}.nui-select-popup-host.nui-select--justified.nui-popup__area{max-width:none}.nui-select-popup-host.nui-select--justified .nui-popup__content .menu-button{display:flex;flex-grow:1;max-width:none}.nui-combobox-popup-host{max-width:300px;max-height:300px}.nui-combobox-popup-host.nui-overlay .nui-menu-item .nui-menu-item__action{color:var(--nui-color-text-default,#111)}.nui-combobox-popup-host.nui-overlay .nui-menu-item.item-selected .nui-menu-item__action{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1));color:var(--nui-color-text-default,#111);font-weight:600}.nui-combobox-popup-host.nui-overlay .nui-menu-item.item-selected .nui-menu-item__action:hover{background-color:var(--nui-color-selected-hover,rgba(0, 196, 210, .2))}.nui-combobox-popup-host .nui-combobox__menu{max-height:300px;overflow-y:auto;max-width:400px;overflow-y:initial}.nui-combobox-popup-host.nui-combobox--justified{max-width:none}.nui-selector-append-to-body-host.nui-popup__area{left:-35px;min-width:100px;border:none;color:var(--nui-color-text-link,#0079aa)}.nui-selector-append-to-body-host.nui-popup__area .nui-repeat .nui-repeat-item{border:0}.nui-selector-host.nui-popup__area{min-width:100px;border:none;color:var(--nui-color-text-link,#0079aa)}.nui-selector-host.nui-popup__area .nui-repeat .nui-repeat-item{border:0}.nui-selector-popup-area{min-width:100px;border:none;color:var(--nui-color-text-link,#0079aa)}.nui-selector-popup-area .nui-repeat .nui-repeat-item{border:0}.popup-adapter-overlay .nui-menu-popup-host{min-width:150px;max-width:450px;max-height:300px}.popup-adapter-overlay .nui-menu-popup-host.nui-select--justified{max-width:unset}.popup-adapter-overlay .nui-menu-popup-host .nui-popup__area--container{overflow-x:hidden;overflow-y:auto;margin:5px 0}.popup-adapter-overlay.nui-overlay-panel .nui-overlay{visibility:hidden;padding:0}.popup-adapter-overlay.visible .nui-overlay{visibility:visible}
`],encapsulation:2,changeDetection:0})}}return n})();export{H as a,xe as b};
