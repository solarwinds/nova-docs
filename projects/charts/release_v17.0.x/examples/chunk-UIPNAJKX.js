import{a as j}from"./chunk-MRVUGWFC.js";import{a as X}from"./chunk-7D4B5ONT.js";import{a as K}from"./chunk-G6GWPXJQ.js";import{A as L,C as P,D as R,Ea as N,F as I,Ha as $,I as M,M as V,Z as F,_ as O,ab as G,fa as z,g as k,ga as H,ma as B,qa as D,z as T}from"./chunk-FM3MSO55.js";import{La as A,Ma as b}from"./chunk-JEEHY2QT.js";import{e as w}from"./chunk-FWIJ3MN4.js";import{A as h,Aa as x,Fa as o,Ga as l,Ha as u,La as y,Ua as c,Va as d,cb as m,eb as E,fa as s,q as S,wa as f,ya as r,z as p,za as v}from"./chunk-VSZOZJXN.js";import{a as C,b as _,g as J}from"./chunk-7KJRK3NW.js";var U=J(K());function Q(a,Y){if(a&1){let e=y();o(0,"nui-legend-series",7),c("mouseenter",function(){let i=p(e).$implicit,n=d();return h(n.statusChartAssist.emphasizeSeries(i.id))})("isSelectedChange",function(i){let n=p(e).$implicit,q=d();return h(q.statusChartAssist.toggleSeries(n.id,i))}),o(1,"nui-rich-legend-tile",8)(2,"div",9),m(3),l(),u(4,"nui-icon",10)(5,"nui-chart-marker",11),l()()}if(a&2){let e=Y.$implicit,t=d();r("descriptionPrimary",e.name)("seriesRenderState",t.statusChartAssist.renderStatesIndex[e.id]==null?null:t.statusChartAssist.renderStatesIndex[e.id].state)("isSelected",!t.statusChartAssist.isSeriesHidden(e.id)),s(),r("backgroundColor",t.statusPalette.backgroundColors.get(t.statusChartAssist.getHighlightedValue(e,"y"))),s(),x("tilebox__value--emphasized",t.isStatusSignificant(t.statusChartAssist.getHighlightedValue(e,"y"))),s(),E(" ",t.statusChartAssist.getHighlightedValue(e,"y")," "),s(),r("icon","status_"+t.statusChartAssist.getHighlightedValue(e,"y")),s(),r("marker",t.statusChartAssist.markers.get(e.id))("color",t.statusChartAssist.palette.standardColors.get(e.id))}}var g=["down","critical","warning","unknown","up"],ce=(()=>{class a{compact=!0;statusChart=new z(new D);statusChartAssist=new H(this.statusChart);statusLineRenderer;statusScales;statusPalette=new M(new N((0,U.default)(g,V.filter(X))));ngOnInit(){this.statusLineRenderer=new O({interactionStrategy:new G});let e=new B;this.statusScales={x:e,y:new $().padding(.5)},this.statusScales.y.domain(g),this.statusScales.y.domainCalculator=void 0,this.statusScales.x.formatters.tick=t=>Math.round(t).toString(),this.statusChart.getEventBus().getStream(k).subscribe(console.log),this.update()}update(){this.statusChartAssist.update(this.generateStatusSeriesSet(Math.floor(Math.random()*5+1)))}isStatusSignificant(e){return e!=="unknown"&&e!=="up"}generateStatusSeriesSet(e){let t=j.generateMockStatusSeriesSet(e,20,g),i=new F(this.statusChartAssist.palette.standardColors);return t.map(n=>_(C({},n),{scales:this.statusScales,renderer:this.statusLineRenderer,accessors:i,showInLegend:!0}))}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=S({type:a,selectors:[["nui-chart-example"]],decls:12,vars:7,consts:[["nui-button","","type","button",3,"click"],[1,"nui-chart-layout"],[1,"chart"],[1,"w-100",3,"chart"],[1,"legend"],["seriesUnitLabel","Mbps",3,"mouseleave","active","interactive"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[3,"mouseenter","isSelectedChange","descriptionPrimary","seriesRenderState","isSelected"],[3,"backgroundColor"],["top","",1,"tilebox__value"],["iconSize","small","leftEdge","",3,"icon"],["rightEdge","",3,"marker","color"]],template:function(t,i){t&1&&(o(0,"div")(1,"button",0),c("click",function(){return i.update()}),m(2,"Refresh"),l(),o(3,"button",0),c("click",function(){return i.compact=!i.compact}),m(4," Compact "),l()(),u(5,"hr"),o(6,"div",1)(7,"div",2),u(8,"nui-chart",3),l(),o(9,"div",4)(10,"nui-legend",5),c("mouseleave",function(){return i.statusChartAssist.resetVisibleSeries()}),f(11,Q,6,10,"nui-legend-series",6),l()()()),t&2&&(s(7),v("min-height",i.compact?"150px":"500px"),s(),r("chart",i.statusChart),s(2),r("active",i.statusChartAssist.isLegendActive)("interactive",!0),s(),r("ngForOf",i.statusChartAssist.legendSeriesSet)("ngForTrackBy",i.statusChartAssist.seriesTrackByFn))},dependencies:[w,P,R,I,L,T,b,A],styles:[".tilebox__value[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;padding-bottom:2px;margin-bottom:-2px;font-size:11px}[_ngcontent-%COMP%]:not(.tilebox__value--emphasized){font-weight:400}"]})}return a})();export{ce as a};
