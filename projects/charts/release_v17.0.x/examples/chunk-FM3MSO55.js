import{$ as fa,A as aa,Aa as Ux,B as ct,Ba as xr,C as Sx,Ca as Hx,D as Ex,E as Cx,Ea as Vx,F as ua,Fa as zx,G as co,Ga as Gx,H as Ax,I as fo,J as zl,Ja as Jl,K as Tx,L as ge,M as la,N as ca,O as te,P as un,Q as Ix,Qa as tc,R as Mx,S as Gl,Sa as ec,T as Dx,Ta as rc,_ as Yl,ba as ho,ca as ha,eb as po,fb as nc,g as fx,ga as $l,h as hx,ha as da,i as ia,ia as ql,j as dx,k as lo,ka as Xl,l as Ul,la as jl,m as px,ma as Wl,n as oa,na as Kl,o as mx,oa as Ql,p as gx,q as me,qa as Rx,r as Hl,ra as Nx,s as xx,sa as Lx,t as vx,ta as kx,u as sa,ua as Zl,v as Vl,va as Ox,w as yx,wa as ma,x as bx,xa as Px,y as _x,ya as Fx,z as wx,za as Bx}from"./chunk-JEEHY2QT.js";import{d as Ol,e as Pl,f as pe,j as Fl,k as an,q as Bl}from"./chunk-FWIJ3MN4.js";import{a as pa}from"./chunk-RIV6QGH7.js";import{$a as je,Aa as $e,B as Ml,Fa as Q,Ga as Z,H as en,Ha as qe,Hb as de,I as rn,Ka as nn,Ua as Rl,Va as xt,Wa as fe,Xa as It,_a as Xe,ab as We,bb as he,cb as on,d as Sl,e as so,eb as sn,f as El,fa as ht,ga as it,h as Cl,ib as Nl,j as Al,lb as Ke,na as Dl,p as Tl,pb as Ll,q as mt,qb as kl,r as Il,s as ao,tb as Me,wa as gt,xa as uo,y as Bt,ya as nt,za as Ye}from"./chunk-VSZOZJXN.js";import{B as _l,V as wl,W as P,f as B,g as Ge,m as na,q as bl}from"./chunk-WTXEFW7C.js";import{a as q,b as K,f as ot,g as y}from"./chunk-7KJRK3NW.js";var Ea=ot((cE,Sc)=>{var u0=Ql(),l0=px();function c0(t,e,r){(r!==void 0&&!l0(t[e],r)||r===void 0&&!(e in t))&&u0(t,e,r)}Sc.exports=c0});var Ca=ot((fE,Ec)=>{function f0(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}Ec.exports=f0});var Ac=ot((hE,Cc)=>{var h0=Lx(),d0=Zl();function p0(t){return h0(t,d0(t))}Cc.exports=p0});var Nc=ot((dE,Rc)=>{var Tc=Ea(),m0=Px(),g0=Bx(),x0=Nx(),v0=Ux(),Ic=gx(),Mc=me(),y0=Vl(),b0=_x(),_0=Ul(),w0=ia(),S0=Vx(),E0=wx(),Dc=Ca(),C0=Ac();function A0(t,e,r,n,i,o,s){var a=Dc(t,r),u=Dc(e,r),l=s.get(u);if(l){Tc(t,r,l);return}var c=o?o(a,u,r+"",t,e,s):void 0,f=c===void 0;if(f){var h=Mc(u),d=!h&&b0(u),g=!h&&!d&&E0(u);c=u,h||d||g?Mc(a)?c=a:y0(a)?c=x0(a):d?(f=!1,c=m0(u,!0)):g?(f=!1,c=g0(u,!0)):c=[]:S0(u)||Ic(u)?(c=a,Ic(a)?c=C0(a):(!w0(a)||_0(a))&&(c=v0(u))):f=!1}f&&(s.set(u,c),i(c,u,n,o,s),s.delete(u)),Tc(t,r,c)}Rc.exports=A0});var Aa=ot((pE,kc)=>{var T0=bx(),I0=Ea(),M0=Sx(),D0=Nc(),R0=ia(),N0=Zl(),L0=Ca();function Lc(t,e,r,n,i){t!==e&&M0(e,function(o,s){if(i||(i=new T0),R0(o))D0(t,e,s,r,Lc,n,i);else{var a=n?n(L0(t,s),o,s+"",t,e,i):void 0;a===void 0&&(a=o),I0(t,s,a)}},N0)}kc.exports=Lc});var Bc=ot((mE,Fc)=>{var k0=Aa(),Oc=ia();function Pc(t,e,r,n,i,o){return Oc(t)&&Oc(e)&&(o.set(e,t),k0(t,e,void 0,Pc,o),o.delete(e)),t}Fc.exports=Pc});var Hc=ot((gE,Uc)=>{var O0=Aa(),P0=kx(),F0=P0(function(t,e,r,n){O0(t,e,r,n)});Uc.exports=F0});var Ht=ot((xE,Vc)=>{var B0=vx(),U0=sa(),H0=Bc(),V0=Hc(),z0=U0(function(t){return t.push(void 0,H0),B0(V0,void 0,t)});Vc.exports=z0});var zu=ot((WU,mp)=>{var $b=mx(),qb=fo(),Xb=Ox(),jb=Fx();function Wb(t,e){if(t==null)return{};var r=$b(jb(t),function(n){return[n]});return e=qb(e),Xb(t,r,function(n,i){return e(n,i[0])})}mp.exports=Wb});var Tp=ot((X3,Ap)=>{function g_(t,e,r){var n;return r(t,function(i,o,s){if(e(i,o,s))return n=o,!1}),n}Ap.exports=g_});var Mp=ot((j3,Ip)=>{var x_=Tp(),v_=Ex(),y_=fo();function b_(t,e){return x_(t,y_(e,3),v_)}Ip.exports=b_});var Wu=ot((OH,Op)=>{var H_=oa();function V_(t,e){for(var r=t.length;r--&&H_(e,t[r],0)>-1;);return r}Op.exports=V_});var Ku=ot((PH,Pp)=>{var z_=oa();function G_(t,e){for(var r=-1,n=t.length;++r<n&&z_(e,t[r],0)>-1;);return r}Pp.exports=G_});var Up=ot((FH,Bp)=>{var Y_=ua(),$_=hx(),q_=la(),X_=Wu(),j_=Ku(),Fp=ca(),W_=co();function K_(t,e,r){if(t=W_(t),t&&(r||e===void 0))return $_(t);if(!t||!(e=Y_(e)))return t;var n=Fp(t),i=Fp(e),o=j_(n,i),s=X_(n,i)+1;return q_(n,o,s).join("")}Bp.exports=K_});var zp=ot((BH,Vp)=>{var Q_=ua(),Z_=la(),J_=Wu(),Hp=ca(),tw=co(),ew=fx();function rw(t,e,r){if(t=tw(t),t&&(r||e===void 0))return t.slice(0,ew(t)+1);if(!t||!(e=Q_(e)))return t;var n=Hp(t),i=J_(n,Hp(e))+1;return Z_(n,0,i).join("")}Vp.exports=rw});var $p=ot((UH,Yp)=>{var nw=ua(),iw=la(),ow=Ku(),Gp=ca(),sw=co(),aw=/^\s+/;function uw(t,e,r){if(t=sw(t),t&&(r||e===void 0))return t.replace(aw,"");if(!t||!(e=nw(e)))return t;var n=Gp(t),i=ow(n,Gp(e));return iw(n,i).join("")}Yp.exports=uw});var Ls=ot((BV,sm)=>{var dw=zl();function pw(t){return t&&t.length?dw(t):[]}sm.exports=pw});var dm=ot((mz,hm)=>{var mw=Hl(),gw=zx(),xw=sa(),fm=Rx(),vw=xw(function(t,e){if(t==null)return[];var r=e.length;return r>1&&fm(t,e[0],e[1])?e=[]:r>2&&fm(e[0],e[1],e[2])&&(e=[e[0]]),gw(t,mw(e,1),[])});hm.exports=vw});var Dm=ot((I5,Mm)=>{function Mw(t,e,r,n){for(var i=-1,o=t==null?0:t.length;++i<o;){var s=t[i];e(n,s,r(s),t)}return n}Mm.exports=Mw});var Nm=ot((M5,Rm)=>{var Dw=Cx();function Rw(t,e,r,n){return Dw(t,function(i,o,s){e(n,i,r(i),s)}),n}Rm.exports=Rw});var km=ot((D5,Lm)=>{var Nw=Dm(),Lw=Nm(),kw=fo(),Ow=me();function Pw(t,e){return function(r,n){var i=Ow(r)?Nw:Lw,o=e?e():{};return i(r,t,kw(n,2),o)}}Lm.exports=Pw});var ol=ot((R5,Om)=>{var Fw=Ql(),Bw=km(),Uw=Bw(function(t,e,r){Fw(t,r,e)});Om.exports=Uw});var Wm=ot((AG,jm)=>{var Hw=oa(),Vw=dx(),zw=Math.max;function Gw(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Vw(r);return i<0&&(i=zw(n+i,0)),Hw(t,e,i)}jm.exports=Gw});var Tg=ot((A$,Ag)=>{var Xw=Hl(),jw=fo(),Ww=sa(),Kw=zl(),Cg=Vl(),Qw=yx(),Zw=Ww(function(t){var e=Qw(t);return Cg(e)&&(e=void 0),Kw(Xw(t,1,Cg,!0),jw(e,2))});Ag.exports=Zw});var U=function(t){return t.hidden="hidden",t.deemphasized="deemphasized",t.emphasized="emphasized",t.default="default",t}(U||{}),k=function(t){return t.background="background",t.data="data",t.unclippedData="unclipped-data",t.foreground="foreground",t}(k||{});var ee="mouse_active",Kn="interaction_values_active",qt="interaction_values",vr="interaction_coordinates",Qn="highlight_data_point",mo="select_data_point",De="highlight_series",ic="interaction_series",Nt="interaction_data_points",go="interaction_data_point",Re="destroy",oc="set_domain",xo="refresh",xe="chart_view_status",ln="series_state_change",sc="axes_style_change",vo=new Cl("chart_component"),ut={[k.background]:{name:k.background,order:0,clipped:!0},[k.data]:{name:k.data,order:50,clipped:!0},[k.unclippedData]:{name:k.unclippedData,order:51,clipped:!1},[k.foreground]:{name:k.foreground,order:1e3,clipped:!1}},Xt=-1,St=-2,Qe="ignore-interaction";function yo(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ga(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function ti(){}var Zn=.7,wo=1/Zn,cn="\\s*([+-]?\\d+)\\s*",Jn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yx=/^#([0-9a-f]{3,8})$/,$x=new RegExp(`^rgb\\(${cn},${cn},${cn}\\)$`),qx=new RegExp(`^rgb\\(${ve},${ve},${ve}\\)$`),Xx=new RegExp(`^rgba\\(${cn},${cn},${cn},${Jn}\\)$`),jx=new RegExp(`^rgba\\(${ve},${ve},${ve},${Jn}\\)$`),Wx=new RegExp(`^hsl\\(${Jn},${ve},${ve}\\)$`),Kx=new RegExp(`^hsla\\(${Jn},${ve},${ve},${Jn}\\)$`),ac={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yo(ti,ne,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:uc,formatHex:uc,formatHex8:Qx,formatHsl:Zx,formatRgb:lc,toString:lc});function uc(){return this.rgb().formatHex()}function Qx(){return this.rgb().formatHex8()}function Zx(){return mc(this).formatHsl()}function lc(){return this.rgb().formatRgb()}function ne(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Yx.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?cc(e):r===3?new Ut(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?bo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?bo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$x.exec(t))?new Ut(e[1],e[2],e[3],1):(e=qx.exec(t))?new Ut(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Xx.exec(t))?bo(e[1],e[2],e[3],e[4]):(e=jx.exec(t))?bo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Wx.exec(t))?dc(e[1],e[2]/100,e[3]/100,1):(e=Kx.exec(t))?dc(e[1],e[2]/100,e[3]/100,e[4]):ac.hasOwnProperty(t)?cc(ac[t]):t==="transparent"?new Ut(NaN,NaN,NaN,0):null}function cc(t){return new Ut(t>>16&255,t>>8&255,t&255,1)}function bo(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ut(t,e,r,n)}function Jx(t){return t instanceof ti||(t=ne(t)),t?(t=t.rgb(),new Ut(t.r,t.g,t.b,t.opacity)):new Ut}function jt(t,e,r,n){return arguments.length===1?Jx(t):new Ut(t,e,r,n??1)}function Ut(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}yo(Ut,jt,ga(ti,{brighter(t){return t=t==null?wo:Math.pow(wo,t),new Ut(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Zn:Math.pow(Zn,t),new Ut(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ut(br(this.r),br(this.g),br(this.b),So(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fc,formatHex:fc,formatHex8:t0,formatRgb:hc,toString:hc}));function fc(){return`#${yr(this.r)}${yr(this.g)}${yr(this.b)}`}function t0(){return`#${yr(this.r)}${yr(this.g)}${yr(this.b)}${yr((isNaN(this.opacity)?1:this.opacity)*255)}`}function hc(){let t=So(this.opacity);return`${t===1?"rgb(":"rgba("}${br(this.r)}, ${br(this.g)}, ${br(this.b)}${t===1?")":`, ${t})`}`}function So(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function br(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yr(t){return t=br(t),(t<16?"0":"")+t.toString(16)}function dc(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new re(t,e,r,n)}function mc(t){if(t instanceof re)return new re(t.h,t.s,t.l,t.opacity);if(t instanceof ti||(t=ne(t)),!t)return new re;if(t instanceof re)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),s=NaN,a=o-i,u=(o+i)/2;return a?(e===o?s=(r-n)/a+(r<n)*6:r===o?s=(n-e)/a+2:s=(e-r)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new re(s,a,u,t.opacity)}function gc(t,e,r,n){return arguments.length===1?mc(t):new re(t,e,r,n??1)}function re(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}yo(re,gc,ga(ti,{brighter(t){return t=t==null?wo:Math.pow(wo,t),new re(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Zn:Math.pow(Zn,t),new re(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Ut(xa(t>=240?t-240:t+120,i,n),xa(t,i,n),xa(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new re(pc(this.h),_o(this.s),_o(this.l),So(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=So(this.opacity);return`${t===1?"hsl(":"hsla("}${pc(this.h)}, ${_o(this.s)*100}%, ${_o(this.l)*100}%${t===1?")":`, ${t})`}`}}));function pc(t){return t=(t||0)%360,t<0?t+360:t}function _o(t){return Math.max(0,Math.min(1,t||0))}function xa(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}var F=function(t){return t.Click="click",t.Hover="hover",t.MouseDown="mousedown",t.MouseEnter="mouseenter",t.MouseLeave="mouseleave",t.MouseMove="mousemove",t.MouseUp="mouseup",t}(F||{});var va=Math.PI,ya=2*va,_r=1e-6,e0=ya-_r;function ba(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function xc(){return new ba}ba.prototype=xc.prototype={constructor:ba,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,r,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+r)+","+(this._y1=+n)},bezierCurveTo:function(t,e,r,n,i,o){this._+="C"+ +t+","+ +e+","+ +r+","+ +n+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,r,n,i){t=+t,e=+e,r=+r,n=+n,i=+i;var o=this._x1,s=this._y1,a=r-t,u=n-e,l=o-t,c=s-e,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>_r)if(!(Math.abs(c*a-u*l)>_r)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=r-o,d=n-s,g=a*a+u*u,m=h*h+d*d,p=Math.sqrt(g),x=Math.sqrt(f),b=i*Math.tan((va-Math.acos((g+f-m)/(2*p*x)))/2),v=b/x,S=b/p;Math.abs(v-1)>_r&&(this._+="L"+(t+v*l)+","+(e+v*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>l*d)+","+(this._x1=t+S*a)+","+(this._y1=e+S*u)}},arc:function(t,e,r,n,i,o){t=+t,e=+e,r=+r,o=!!o;var s=r*Math.cos(n),a=r*Math.sin(n),u=t+s,l=e+a,c=1^o,f=o?n-i:i-n;if(r<0)throw new Error("negative radius: "+r);this._x1===null?this._+="M"+u+","+l:(Math.abs(this._x1-u)>_r||Math.abs(this._y1-l)>_r)&&(this._+="L"+u+","+l),r&&(f<0&&(f=f%ya+ya),f>e0?this._+="A"+r+","+r+",0,1,"+c+","+(t-s)+","+(e-a)+"A"+r+","+r+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>_r&&(this._+="A"+r+","+r+",0,"+ +(f>=va)+","+c+","+(this._x1=t+r*Math.cos(i))+","+(this._y1=e+r*Math.sin(i))))},rect:function(t,e,r,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +r+"v"+ +n+"h"+-r+"Z"},toString:function(){return this._}};var wr=xc;function Y(t){return function(){return t}}var _a=Math.abs,Et=Math.atan2,Ze=Math.cos,vc=Math.max,Eo=Math.min,ie=Math.sin,Sr=Math.sqrt,Lt=1e-12,fn=Math.PI,ei=fn/2,hn=2*fn;function yc(t){return t>1?0:t<-1?fn:Math.acos(t)}function wa(t){return t>=1?ei:t<=-1?-ei:Math.asin(t)}function r0(t){return t.innerRadius}function n0(t){return t.outerRadius}function i0(t){return t.startAngle}function o0(t){return t.endAngle}function s0(t){return t&&t.padAngle}function a0(t,e,r,n,i,o,s,a){var u=r-t,l=n-e,c=s-i,f=a-o,h=f*u-c*l;if(!(h*h<Lt))return h=(c*(e-o)-f*(t-i))/h,[t+h*u,e+h*l]}function Co(t,e,r,n,i,o,s){var a=t-r,u=e-n,l=(s?o:-o)/Sr(a*a+u*u),c=l*u,f=-l*a,h=t+c,d=e+f,g=r+c,m=n+f,p=(h+g)/2,x=(d+m)/2,b=g-h,v=m-d,S=b*b+v*v,M=i-o,D=h*m-g*d,E=(v<0?-1:1)*Sr(vc(0,M*M*S-D*D)),N=(D*v-b*E)/S,A=(-D*b-v*E)/S,R=(D*v+b*E)/S,C=(-D*b+v*E)/S,_=N-p,T=A-x,at=R-p,X=C-x;return _*_+T*T>at*at+X*X&&(N=R,A=C),{cx:N,cy:A,x01:-c,y01:-f,x11:N*(i/M-1),y11:A*(i/M-1)}}function Je(){var t=r0,e=n0,r=Y(0),n=null,i=i0,o=o0,s=s0,a=null;function u(){var l,c,f=+t.apply(this,arguments),h=+e.apply(this,arguments),d=i.apply(this,arguments)-ei,g=o.apply(this,arguments)-ei,m=_a(g-d),p=g>d;if(a||(a=l=wr()),h<f&&(c=h,h=f,f=c),!(h>Lt))a.moveTo(0,0);else if(m>hn-Lt)a.moveTo(h*Ze(d),h*ie(d)),a.arc(0,0,h,d,g,!p),f>Lt&&(a.moveTo(f*Ze(g),f*ie(g)),a.arc(0,0,f,g,d,p));else{var x=d,b=g,v=d,S=g,M=m,D=m,E=s.apply(this,arguments)/2,N=E>Lt&&(n?+n.apply(this,arguments):Sr(f*f+h*h)),A=Eo(_a(h-f)/2,+r.apply(this,arguments)),R=A,C=A,_,T;if(N>Lt){var at=wa(N/f*ie(E)),X=wa(N/h*ie(E));(M-=at*2)>Lt?(at*=p?1:-1,v+=at,S-=at):(M=0,v=S=(d+g)/2),(D-=X*2)>Lt?(X*=p?1:-1,x+=X,b-=X):(D=0,x=b=(d+g)/2)}var j=h*Ze(x),pt=h*ie(x),W=f*Ze(S),z=f*ie(S);if(A>Lt){var et=h*Ze(b),rt=h*ie(b),Te=f*Ze(v),le=f*ie(v),At;if(m<fn&&(At=a0(j,pt,Te,le,et,rt,W,z))){var ce=j-At[0],ze=pt-At[1],Zt=et-At[0],Jt=rt-At[1],I=1/ie(yc((ce*Zt+ze*Jt)/(Sr(ce*ce+ze*ze)*Sr(Zt*Zt+Jt*Jt)))/2),O=Sr(At[0]*At[0]+At[1]*At[1]);R=Eo(A,(f-O)/(I-1)),C=Eo(A,(h-O)/(I+1))}}D>Lt?C>Lt?(_=Co(Te,le,j,pt,h,C,p),T=Co(et,rt,W,z,h,C,p),a.moveTo(_.cx+_.x01,_.cy+_.y01),C<A?a.arc(_.cx,_.cy,C,Et(_.y01,_.x01),Et(T.y01,T.x01),!p):(a.arc(_.cx,_.cy,C,Et(_.y01,_.x01),Et(_.y11,_.x11),!p),a.arc(0,0,h,Et(_.cy+_.y11,_.cx+_.x11),Et(T.cy+T.y11,T.cx+T.x11),!p),a.arc(T.cx,T.cy,C,Et(T.y11,T.x11),Et(T.y01,T.x01),!p))):(a.moveTo(j,pt),a.arc(0,0,h,x,b,!p)):a.moveTo(j,pt),!(f>Lt)||!(M>Lt)?a.lineTo(W,z):R>Lt?(_=Co(W,z,et,rt,f,-R,p),T=Co(j,pt,Te,le,f,-R,p),a.lineTo(_.cx+_.x01,_.cy+_.y01),R<A?a.arc(_.cx,_.cy,R,Et(_.y01,_.x01),Et(T.y01,T.x01),!p):(a.arc(_.cx,_.cy,R,Et(_.y01,_.x01),Et(_.y11,_.x11),!p),a.arc(0,0,f,Et(_.cy+_.y11,_.cx+_.x11),Et(T.cy+T.y11,T.cx+T.x11),p),a.arc(T.cx,T.cy,R,Et(T.y11,T.x11),Et(T.y01,T.x01),!p))):a.arc(0,0,f,S,v,p)}if(a.closePath(),l)return a=null,l+""||null}return u.centroid=function(){var l=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-fn/2;return[Ze(c)*l,ie(c)*l]},u.innerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:Y(+l),u):t},u.outerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:Y(+l),u):e},u.cornerRadius=function(l){return arguments.length?(r=typeof l=="function"?l:Y(+l),u):r},u.padRadius=function(l){return arguments.length?(n=l==null?null:typeof l=="function"?l:Y(+l),u):n},u.startAngle=function(l){return arguments.length?(i=typeof l=="function"?l:Y(+l),u):i},u.endAngle=function(l){return arguments.length?(o=typeof l=="function"?l:Y(+l),u):o},u.padAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Y(+l),u):s},u.context=function(l){return arguments.length?(a=l??null,u):a},u}function bc(t){this._context=t}bc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ne(t){return new bc(t)}function Ao(t){return t[0]}function To(t){return t[1]}function dn(){var t=Ao,e=To,r=Y(!0),n=null,i=Ne,o=null;function s(a){var u,l=a.length,c,f=!1,h;for(n==null&&(o=i(h=wr())),u=0;u<=l;++u)!(u<l&&r(c=a[u],u,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(c,u,a),+e(c,u,a));if(h)return o=null,h+""||null}return s.x=function(a){return arguments.length?(t=typeof a=="function"?a:Y(+a),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Y(+a),s):e},s.defined=function(a){return arguments.length?(r=typeof a=="function"?a:Y(!!a),s):r},s.curve=function(a){return arguments.length?(i=a,n!=null&&(o=i(n)),s):i},s.context=function(a){return arguments.length?(a==null?n=o=null:o=i(n=a),s):n},s}function Sa(){var t=Ao,e=null,r=Y(0),n=To,i=Y(!0),o=null,s=Ne,a=null;function u(c){var f,h,d,g=c.length,m,p=!1,x,b=new Array(g),v=new Array(g);for(o==null&&(a=s(x=wr())),f=0;f<=g;++f){if(!(f<g&&i(m=c[f],f,c))===p)if(p=!p)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),d=f-1;d>=h;--d)a.point(b[d],v[d]);a.lineEnd(),a.areaEnd()}p&&(b[f]=+t(m,f,c),v[f]=+r(m,f,c),a.point(e?+e(m,f,c):b[f],n?+n(m,f,c):v[f]))}if(x)return a=null,x+""||null}function l(){return dn().defined(i).curve(s).context(o)}return u.x=function(c){return arguments.length?(t=typeof c=="function"?c:Y(+c),e=null,u):t},u.x0=function(c){return arguments.length?(t=typeof c=="function"?c:Y(+c),u):t},u.x1=function(c){return arguments.length?(e=c==null?null:typeof c=="function"?c:Y(+c),u):e},u.y=function(c){return arguments.length?(r=typeof c=="function"?c:Y(+c),n=null,u):r},u.y0=function(c){return arguments.length?(r=typeof c=="function"?c:Y(+c),u):r},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Y(+c),u):n},u.lineX0=u.lineY0=function(){return l().x(t).y(r)},u.lineY1=function(){return l().x(t).y(n)},u.lineX1=function(){return l().x(e).y(r)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:Y(!!c),u):i},u.curve=function(c){return arguments.length?(s=c,o!=null&&(a=s(o)),u):s},u.context=function(c){return arguments.length?(c==null?o=a=null:a=s(o=c),u):o},u}function _c(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function wc(t){return t}function ri(){var t=wc,e=_c,r=null,n=Y(0),i=Y(hn),o=Y(0);function s(a){var u,l=a.length,c,f,h=0,d=new Array(l),g=new Array(l),m=+n.apply(this,arguments),p=Math.min(hn,Math.max(-hn,i.apply(this,arguments)-m)),x,b=Math.min(Math.abs(p)/l,o.apply(this,arguments)),v=b*(p<0?-1:1),S;for(u=0;u<l;++u)(S=g[d[u]=u]=+t(a[u],u,a))>0&&(h+=S);for(e!=null?d.sort(function(M,D){return e(g[M],g[D])}):r!=null&&d.sort(function(M,D){return r(a[M],a[D])}),u=0,f=h?(p-l*v)/h:0;u<l;++u,m=x)c=d[u],S=g[c],x=m+(S>0?S*f:0)+v,g[c]={data:a[c],index:u,value:S,startAngle:m,endAngle:x,padAngle:b};return g}return s.value=function(a){return arguments.length?(t=typeof a=="function"?a:Y(+a),s):t},s.sortValues=function(a){return arguments.length?(e=a,r=null,s):e},s.sort=function(a){return arguments.length?(r=a,e=null,s):r},s.startAngle=function(a){return arguments.length?(n=typeof a=="function"?a:Y(+a),s):n},s.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:Y(+a),s):i},s.padAngle=function(a){return arguments.length?(o=typeof a=="function"?a:Y(+a),s):o},s}var dp=y(Ht()),zi=y(ct());function ye(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ni(t){return t.length===1&&(t=G0(t)),{left:function(e,r,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)<0?n=o+1:i=o}return n},right:function(e,r,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)>0?i=o:n=o+1}return n}}}function G0(t){return function(e,r){return ye(t(e),r)}}var zc=ni(ye),Gc=zc.right,Y0=zc.left,Gt=Gc;function ii(t,e){var r=t.length,n=-1,i,o,s;if(e==null){for(;++n<r;)if((i=t[n])!=null&&i>=i)for(o=s=i;++n<r;)(i=t[n])!=null&&(o>i&&(o=i),s<i&&(s=i))}else for(;++n<r;)if((i=e(t[n],n,t))!=null&&i>=i)for(o=s=i;++n<r;)(i=e(t[n],n,t))!=null&&(o>i&&(o=i),s<i&&(s=i));return[o,s]}var Yc=Array.prototype,q0=Yc.slice,X0=Yc.map;function Er(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(i);++n<i;)o[n]=t+n*r;return o}var Ta=Math.sqrt(50),Ia=Math.sqrt(10),Ma=Math.sqrt(2);function Mo(t,e,r){var n,i=-1,o,s,a;if(e=+e,t=+t,r=+r,t===e&&r>0)return[t];if((n=e<t)&&(o=t,t=e,e=o),(a=pn(t,e,r))===0||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),s=new Array(o=Math.ceil(e-t+1));++i<o;)s[i]=(t+i)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),s=new Array(o=Math.ceil(t-e+1));++i<o;)s[i]=(t-i)/a;return n&&s.reverse(),s}function pn(t,e,r){var n=(e-t)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),o=n/Math.pow(10,i);return i>=0?(o>=Ta?10:o>=Ia?5:o>=Ma?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Ta?10:o>=Ia?5:o>=Ma?2:1)}function Le(t,e,r){var n=Math.abs(e-t)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),o=n/i;return o>=Ta?i*=10:o>=Ia?i*=5:o>=Ma&&(i*=2),e<t?-i:i}function ke(t,e){var r=t.length,n=-1,i,o;if(e==null){for(;++n<r;)if((i=t[n])!=null&&i>=i)for(o=i;++n<r;)(i=t[n])!=null&&i>o&&(o=i)}else for(;++n<r;)if((i=e(t[n],n,t))!=null&&i>=i)for(o=i;++n<r;)(i=e(t[n],n,t))!=null&&i>o&&(o=i);return o}function Oe(t,e){var r=t.length,n=-1,i,o;if(e==null){for(;++n<r;)if((i=t[n])!=null&&i>=i)for(o=i;++n<r;)(i=t[n])!=null&&o>i&&(o=i)}else for(;++n<r;)if((i=e(t[n],n,t))!=null&&i>=i)for(o=i;++n<r;)(i=e(t[n],n,t))!=null&&o>i&&(o=i);return o}var Do=Array.prototype.slice;function qc(t){return t}var Ro=1,No=2,Ra=3,oi=4,Xc=1e-6;function K0(t){return"translate("+(t+.5)+",0)"}function Q0(t){return"translate(0,"+(t+.5)+")"}function Z0(t){return function(e){return+t(e)}}function J0(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(r){return+t(r)+e}}function tv(){return!this.__axis}function Lo(t,e){var r=[],n=null,i=null,o=6,s=6,a=3,u=t===Ro||t===oi?-1:1,l=t===oi||t===No?"x":"y",c=t===Ro||t===Ra?K0:Q0;function f(h){var d=n??(e.ticks?e.ticks.apply(e,r):e.domain()),g=i??(e.tickFormat?e.tickFormat.apply(e,r):qc),m=Math.max(o,0)+a,p=e.range(),x=+p[0]+.5,b=+p[p.length-1]+.5,v=(e.bandwidth?J0:Z0)(e.copy()),S=h.selection?h.selection():h,M=S.selectAll(".domain").data([null]),D=S.selectAll(".tick").data(d,e).order(),E=D.exit(),N=D.enter().append("g").attr("class","tick"),A=D.select("line"),R=D.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),D=D.merge(N),A=A.merge(N.append("line").attr("stroke","currentColor").attr(l+"2",u*o)),R=R.merge(N.append("text").attr("fill","currentColor").attr(l,u*m).attr("dy",t===Ro?"0em":t===Ra?"0.71em":"0.32em")),h!==S&&(M=M.transition(h),D=D.transition(h),A=A.transition(h),R=R.transition(h),E=E.transition(h).attr("opacity",Xc).attr("transform",function(C){return isFinite(C=v(C))?c(C):this.getAttribute("transform")}),N.attr("opacity",Xc).attr("transform",function(C){var _=this.parentNode.__axis;return c(_&&isFinite(_=_(C))?_:v(C))})),E.remove(),M.attr("d",t===oi||t==No?s?"M"+u*s+","+x+"H0.5V"+b+"H"+u*s:"M0.5,"+x+"V"+b:s?"M"+x+","+u*s+"V0.5H"+b+"V"+u*s:"M"+x+",0.5H"+b),D.attr("opacity",1).attr("transform",function(C){return c(v(C))}),A.attr(l+"2",u*o),R.attr(l,u*m).text(g),S.filter(tv).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===No?"start":t===oi?"end":"middle"),S.each(function(){this.__axis=v})}return f.scale=function(h){return arguments.length?(e=h,f):e},f.ticks=function(){return r=Do.call(arguments),f},f.tickArguments=function(h){return arguments.length?(r=h==null?[]:Do.call(h),f):r.slice()},f.tickValues=function(h){return arguments.length?(n=h==null?null:Do.call(h),f):n&&n.slice()},f.tickFormat=function(h){return arguments.length?(i=h,f):i},f.tickSize=function(h){return arguments.length?(o=s=+h,f):o},f.tickSizeInner=function(h){return arguments.length?(o=+h,f):o},f.tickSizeOuter=function(h){return arguments.length?(s=+h,f):s},f.tickPadding=function(h){return arguments.length?(a=+h,f):a},f}function Na(t){return Lo(Ro,t)}function si(t){return Lo(No,t)}function ko(t){return Lo(Ra,t)}function Oo(t){return Lo(oi,t)}var ev={value:function(){}};function Wc(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Po(r)}function Po(t){this._=t}function rv(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Po.prototype=Wc.prototype={constructor:Po,on:function(t,e){var r=this._,n=rv(t+"",r),i,o=-1,s=n.length;if(arguments.length<2){for(;++o<s;)if((i=(t=n[o]).type)&&(i=nv(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=n[o]).type)r[i]=jc(r[i],t.name,e);else if(e==null)for(i in r)r[i]=jc(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Po(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,o;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],n=0,i=o.length;n<i;++n)o[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,o=n.length;i<o;++i)n[i].value.apply(e,r)}};function nv(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function jc(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=ev,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var Cr=Wc;var Fo="http://www.w3.org/1999/xhtml",La={svg:"http://www.w3.org/2000/svg",xhtml:Fo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pe(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),La.hasOwnProperty(e)?{space:La[e],local:t}:t}function iv(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Fo&&e.documentElement.namespaceURI===Fo?e.createElement(t):e.createElementNS(r,t)}}function ov(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Bo(t){var e=Pe(t);return(e.local?ov:iv)(e)}function sv(){}function Ar(t){return t==null?sv:function(){return this.querySelector(t)}}function Kc(t){typeof t!="function"&&(t=Ar(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var o=e[i],s=o.length,a=n[i]=new Array(s),u,l,c=0;c<s;++c)(u=o[c])&&(l=t.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new ft(n,this._parents)}function av(){return[]}function ai(t){return t==null?av:function(){return this.querySelectorAll(t)}}function Qc(t){typeof t!="function"&&(t=ai(t));for(var e=this._groups,r=e.length,n=[],i=[],o=0;o<r;++o)for(var s=e[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(n.push(t.call(u,u.__data__,l,s)),i.push(u));return new ft(n,i)}function ui(t){return function(){return this.matches(t)}}function Zc(t){typeof t!="function"&&(t=ui(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var o=e[i],s=o.length,a=n[i]=[],u,l=0;l<s;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&a.push(u);return new ft(n,this._parents)}function Uo(t){return new Array(t.length)}function Jc(){return new ft(this._enter||this._groups.map(Uo),this._parents)}function li(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}li.prototype={constructor:li,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function tf(t){return function(){return t}}var ef="$";function uv(t,e,r,n,i,o){for(var s=0,a,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],n[s]=a):r[s]=new li(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function lv(t,e,r,n,i,o,s){var a,u,l={},c=e.length,f=o.length,h=new Array(c),d;for(a=0;a<c;++a)(u=e[a])&&(h[a]=d=ef+s.call(u,u.__data__,a,e),d in l?i[a]=u:l[d]=u);for(a=0;a<f;++a)d=ef+s.call(t,o[a],a,o),(u=l[d])?(n[a]=u,u.__data__=o[a],l[d]=null):r[a]=new li(t,o[a]);for(a=0;a<c;++a)(u=e[a])&&l[h[a]]===u&&(i[a]=u)}function rf(t,e){if(!t)return d=new Array(this.size()),l=-1,this.each(function(D){d[++l]=D}),d;var r=e?lv:uv,n=this._parents,i=this._groups;typeof t!="function"&&(t=tf(t));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=n[l],f=i[l],h=f.length,d=t.call(c,c&&c.__data__,l,n),g=d.length,m=a[l]=new Array(g),p=s[l]=new Array(g),x=u[l]=new Array(h);r(c,f,m,p,x,d,e);for(var b=0,v=0,S,M;b<g;++b)if(S=m[b]){for(b>=v&&(v=b+1);!(M=p[v])&&++v<g;);S._next=M||null}}return s=new ft(s,n),s._enter=a,s._exit=u,s}function nf(){return new ft(this._exit||this._groups.map(Uo),this._parents)}function of(t,e,r){var n=this.enter(),i=this,o=this.exit();return n=typeof t=="function"?t(n):n.append(t+""),e!=null&&(i=e(i)),r==null?o.remove():r(o),n&&i?n.merge(i).order():i}function sf(t){for(var e=this._groups,r=t._groups,n=e.length,i=r.length,o=Math.min(n,i),s=new Array(n),a=0;a<o;++a)for(var u=e[a],l=r[a],c=u.length,f=s[a]=new Array(c),h,d=0;d<c;++d)(h=u[d]||l[d])&&(f[d]=h);for(;a<n;++a)s[a]=e[a];return new ft(s,this._parents)}function af(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],i=n.length-1,o=n[i],s;--i>=0;)(s=n[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function uf(t){t||(t=cv);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var s=r[o],a=s.length,u=i[o]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(e)}return new ft(i,this._parents).order()}function cv(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function lf(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function cf(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function ff(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,o=n.length;i<o;++i){var s=n[i];if(s)return s}return null}function hf(){var t=0;return this.each(function(){++t}),t}function df(){return!this.node()}function pf(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function fv(t){return function(){this.removeAttribute(t)}}function hv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dv(t,e){return function(){this.setAttribute(t,e)}}function pv(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function mv(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function gv(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function mf(t,e){var r=Pe(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?hv:fv:typeof e=="function"?r.local?gv:mv:r.local?pv:dv)(r,e))}function Ho(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function xv(t){return function(){this.style.removeProperty(t)}}function vv(t,e,r){return function(){this.style.setProperty(t,e,r)}}function yv(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function gf(t,e,r){return arguments.length>1?this.each((e==null?xv:typeof e=="function"?yv:vv)(t,e,r??"")):tr(this.node(),t)}function tr(t,e){return t.style.getPropertyValue(e)||Ho(t).getComputedStyle(t,null).getPropertyValue(e)}function bv(t){return function(){delete this[t]}}function _v(t,e){return function(){this[t]=e}}function wv(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function xf(t,e){return arguments.length>1?this.each((e==null?bv:typeof e=="function"?wv:_v)(t,e)):this.node()[t]}function vf(t){return t.trim().split(/^|\s+/)}function ka(t){return t.classList||new yf(t)}function yf(t){this._node=t,this._names=vf(t.getAttribute("class")||"")}yf.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function bf(t,e){for(var r=ka(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function _f(t,e){for(var r=ka(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function Sv(t){return function(){bf(this,t)}}function Ev(t){return function(){_f(this,t)}}function Cv(t,e){return function(){(e.apply(this,arguments)?bf:_f)(this,t)}}function wf(t,e){var r=vf(t+"");if(arguments.length<2){for(var n=ka(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?Cv:e?Sv:Ev)(r,e))}function Av(){this.textContent=""}function Tv(t){return function(){this.textContent=t}}function Iv(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Sf(t){return arguments.length?this.each(t==null?Av:(typeof t=="function"?Iv:Tv)(t)):this.node().textContent}function Mv(){this.innerHTML=""}function Dv(t){return function(){this.innerHTML=t}}function Rv(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ef(t){return arguments.length?this.each(t==null?Mv:(typeof t=="function"?Rv:Dv)(t)):this.node().innerHTML}function Nv(){this.nextSibling&&this.parentNode.appendChild(this)}function Cf(){return this.each(Nv)}function Lv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Af(){return this.each(Lv)}function Tf(t){var e=typeof t=="function"?t:Bo(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function kv(){return null}function If(t,e){var r=typeof t=="function"?t:Bo(t),n=e==null?kv:typeof e=="function"?e:Ar(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Ov(){var t=this.parentNode;t&&t.removeChild(this)}function Mf(){return this.each(Ov)}function Pv(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Fv(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Df(t){return this.select(t?Fv:Pv)}function Rf(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Lf={},L=null;typeof document<"u"&&(Nf=document.documentElement,"onmouseenter"in Nf||(Lf={mouseenter:"mouseover",mouseleave:"mouseout"}));var Nf;function Bv(t,e,r){return t=kf(t,e,r),function(n){var i=n.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,n)}}function kf(t,e,r){return function(n){var i=L;L=n;try{t.call(this,this.__data__,e,r)}finally{L=i}}}function Uv(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Hv(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,i=e.length,o;r<i;++r)o=e[r],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.capture):e[++n]=o;++n?e.length=n:delete this.__on}}}function Vv(t,e,r){var n=Lf.hasOwnProperty(t.type)?Bv:kf;return function(i,o,s){var a=this.__on,u,l=n(e,o,s);if(a){for(var c=0,f=a.length;c<f;++c)if((u=a[c]).type===t.type&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=l,u.capture=r),u.value=e;return}}this.addEventListener(t.type,l,r),u={type:t.type,name:t.name,value:e,listener:l,capture:r},a?a.push(u):this.__on=[u]}}function Of(t,e,r){var n=Uv(t+""),i,o=n.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<o;++i)if((s=n[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=e?Vv:Hv,r==null&&(r=!1),i=0;i<o;++i)this.each(a(n[i],e,r));return this}function Oa(t,e,r,n){var i=L;t.sourceEvent=L,L=t;try{return e.apply(r,n)}finally{L=i}}function Pf(t,e,r){var n=Ho(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function zv(t,e){return function(){return Pf(this,t,e)}}function Gv(t,e){return function(){return Pf(this,t,e.apply(this,arguments))}}function Ff(t,e){return this.each((typeof e=="function"?Gv:zv)(t,e))}var Pa=[null];function ft(t,e){this._groups=t,this._parents=e}function Bf(){return new ft([[document.documentElement]],Pa)}ft.prototype=Bf.prototype={constructor:ft,select:Kc,selectAll:Qc,filter:Zc,data:rf,enter:Jc,exit:nf,join:of,merge:sf,order:af,sort:uf,call:lf,nodes:cf,node:ff,size:hf,empty:df,each:pf,attr:mf,style:gf,property:xf,classed:wf,text:Sf,html:Ef,raise:Cf,lower:Af,append:Tf,insert:If,remove:Mf,clone:Df,datum:Rf,on:Of,dispatch:Ff};var Yt=Bf;function H(t){return typeof t=="string"?new ft([[document.querySelector(t)]],[document.documentElement]):new ft([[t]],Pa)}var Yv=0;function ci(){return new Fa}function Fa(){this._="@"+(++Yv).toString(36)}Fa.prototype=ci.prototype={constructor:Fa,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Vo(){for(var t=L,e;e=t.sourceEvent;)t=e;return t}function zo(t,e){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function fi(t){var e=Vo();return e.changedTouches&&(e=e.changedTouches[0]),zo(t,e)}function Ba(t,e,r){arguments.length<3&&(r=e,e=Vo().changedTouches);for(var n=0,i=e?e.length:0,o;n<i;++n)if((o=e[n]).identifier===r)return zo(t,o);return null}function Go(){L.preventDefault(),L.stopImmediatePropagation()}function Ua(t){var e=t.document.documentElement,r=H(t).on("dragstart.drag",Go,!0);"onselectstart"in e?r.on("selectstart.drag",Go,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ha(t,e){var r=t.document.documentElement,n=H(t).on("dragstart.drag",null);e&&(n.on("click.drag",Go,!0),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function Va(t,e,r,n,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*r+(1+3*t+3*o-3*s)*n+s*i)/6}function Uf(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),i=t[n],o=t[n+1],s=n>0?t[n-1]:2*i-o,a=n<e-1?t[n+2]:2*o-i;return Va((r-n/e)*e,s,i,o,a)}}function Hf(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),i=t[(n+e-1)%e],o=t[n%e],s=t[(n+1)%e],a=t[(n+2)%e];return Va((r-n/e)*e,i,o,s,a)}}function hi(t){return function(){return t}}function $v(t,e){return function(r){return t+r*e}}function qv(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Vf(t){return(t=+t)==1?Yo:function(e,r){return r-e?qv(e,r,t):hi(isNaN(e)?r:e)}}function Yo(t,e){var r=e-t;return r?$v(t,r):hi(isNaN(t)?e:t)}var Tr=function t(e){var r=Vf(e);function n(i,o){var s=r((i=jt(i)).r,(o=jt(o)).r),a=r(i.g,o.g),u=r(i.b,o.b),l=Yo(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return n.gamma=t,n}(1);function zf(t){return function(e){var r=e.length,n=new Array(r),i=new Array(r),o=new Array(r),s,a;for(s=0;s<r;++s)a=jt(e[s]),n[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return n=t(n),i=t(i),o=t(o),a.opacity=1,function(u){return a.r=n(u),a.g=i(u),a.b=o(u),a+""}}}var Xv=zf(Uf),jv=zf(Hf);function Gf(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=t[i]*(1-o)+e[i]*o;return n}}function Yf(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function $f(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),o=new Array(r),s;for(s=0;s<n;++s)i[s]=Fe(t[s],e[s]);for(;s<r;++s)o[s]=e[s];return function(a){for(s=0;s<n;++s)o[s]=i[s](a);return o}}function qf(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Ct(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Xf(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=Fe(t[i],e[i]):n[i]=e[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var Ga=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,za=new RegExp(Ga.source,"g");function Wv(t){return function(){return t}}function Kv(t){return function(e){return t(e)+""}}function di(t,e){var r=Ga.lastIndex=za.lastIndex=0,n,i,o,s=-1,a=[],u=[];for(t=t+"",e=e+"";(n=Ga.exec(t))&&(i=za.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:Ct(n,i)})),r=za.lastIndex;return r<e.length&&(o=e.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?Kv(u[0].x):Wv(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Fe(t,e){var r=typeof e,n;return e==null||r==="boolean"?hi(e):(r==="number"?Ct:r==="string"?(n=ne(e))?(e=n,Tr):di:e instanceof ne?Tr:e instanceof Date?qf:Yf(e)?Gf:Array.isArray(e)?$f:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Xf:Ct)(t,e)}function Ya(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var jf=180/Math.PI,$o={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $a(t,e,r,n,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,u/=a),t*n<e*r&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*jf,skewX:Math.atan(u)*jf,scaleX:s,scaleY:a}}var pi,qa,Wf,qo;function Kf(t){return t==="none"?$o:(pi||(pi=document.createElement("DIV"),qa=document.documentElement,Wf=document.defaultView),pi.style.transform=t,t=Wf.getComputedStyle(qa.appendChild(pi),null).getPropertyValue("transform"),qa.removeChild(pi),t=t.slice(7,-1).split(","),$a(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function Qf(t){return t==null?$o:(qo||(qo=document.createElementNS("http://www.w3.org/2000/svg","g")),qo.setAttribute("transform",t),(t=qo.transform.baseVal.consolidate())?(t=t.matrix,$a(t.a,t.b,t.c,t.d,t.e,t.f)):$o)}function Zf(t,e,r,n){function i(l){return l.length?l.pop()+" ":""}function o(l,c,f,h,d,g){if(l!==f||c!==h){var m=d.push("translate(",null,e,null,r);g.push({i:m-4,x:Ct(l,f)},{i:m-2,x:Ct(c,h)})}else(f||h)&&d.push("translate("+f+e+h+r)}function s(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,n)-2,x:Ct(l,c)})):c&&f.push(i(f)+"rotate("+c+n)}function a(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,n)-2,x:Ct(l,c)}):c&&f.push(i(f)+"skewX("+c+n)}function u(l,c,f,h,d,g){if(l!==f||c!==h){var m=d.push(i(d)+"scale(",null,",",null,")");g.push({i:m-4,x:Ct(l,f)},{i:m-2,x:Ct(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=t(l),c=t(c),o(l.translateX,l.translateY,c.translateX,c.translateY,f,h),s(l.rotate,c.rotate,f,h),a(l.skewX,c.skewX,f,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var g=-1,m=h.length,p;++g<m;)f[(p=h[g]).i]=p.x(d);return f.join("")}}}var Xa=Zf(Kf,"px, ","px)","deg)"),ja=Zf(Qf,", ",")",")");var mn=0,gi=0,mi=0,th=1e3,Xo,xi,jo=0,Ir=0,Wo=0,vi=typeof performance=="object"&&performance.now?performance:Date,eh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function gn(){return Ir||(eh(Qv),Ir=vi.now()+Wo)}function Qv(){Ir=0}function yi(){this._call=this._time=this._next=null}yi.prototype=xn.prototype={constructor:yi,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?gn():+r)+(e==null?0:+e),!this._next&&xi!==this&&(xi?xi._next=this:Xo=this,xi=this),this._call=t,this._time=r,Wa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wa())}};function xn(t,e,r){var n=new yi;return n.restart(t,e,r),n}function rh(){gn(),++mn;for(var t=Xo,e;t;)(e=Ir-t._time)>=0&&t._call.call(null,e),t=t._next;--mn}function Jf(){Ir=(jo=vi.now())+Wo,mn=gi=0;try{rh()}finally{mn=0,Jv(),Ir=0}}function Zv(){var t=vi.now(),e=t-jo;e>th&&(Wo-=e,jo=t)}function Jv(){for(var t,e=Xo,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Xo=r);xi=t,Wa(n)}function Wa(t){if(!mn){gi&&(gi=clearTimeout(gi));var e=t-Ir;e>24?(t<1/0&&(gi=setTimeout(Jf,t-vi.now()-Wo)),mi&&(mi=clearInterval(mi))):(mi||(jo=vi.now(),mi=setInterval(Zv,th)),mn=1,eh(Jf))}}function Ko(t,e,r){var n=new yi;return e=e==null?0:+e,n.restart(function(i){n.stop(),t(i+e)},e,r),n}var ty=Cr("start","end","cancel","interrupt"),ey=[],ih=0,Ka=1,Zo=2,Qo=3,nh=4,Jo=5,bi=6;function er(t,e,r,n,i,o){var s=t.__transition;if(!s)t.__transition={};else if(r in s)return;ry(t,r,{name:e,index:n,group:i,on:ty,tween:ey,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ih})}function _i(t,e){var r=vt(t,e);if(r.state>ih)throw new Error("too late; already scheduled");return r}function kt(t,e){var r=vt(t,e);if(r.state>Qo)throw new Error("too late; already running");return r}function vt(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function ry(t,e,r){var n=t.__transition,i;n[e]=r,r.timer=xn(o,0,r.time);function o(l){r.state=Ka,r.timer.restart(s,r.delay,r.time),r.delay<=l&&s(l-r.delay)}function s(l){var c,f,h,d;if(r.state!==Ka)return u();for(c in n)if(d=n[c],d.name===r.name){if(d.state===Qo)return Ko(s);d.state===nh?(d.state=bi,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete n[c]):+c<e&&(d.state=bi,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete n[c])}if(Ko(function(){r.state===Qo&&(r.state=nh,r.timer.restart(a,r.delay,r.time),a(l))}),r.state=Zo,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Zo){for(r.state=Qo,i=new Array(h=r.tween.length),c=0,f=-1;c<h;++c)(d=r.tween[c].value.call(t,t.__data__,r.index,r.group))&&(i[++f]=d);i.length=f+1}}function a(l){for(var c=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(u),r.state=Jo,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);r.state===Jo&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){r.state=bi,r.timer.stop(),delete n[e];for(var l in n)return;delete t.__transition}}function Mr(t,e){var r=t.__transition,n,i,o=!0,s;if(r){e=e==null?null:e+"";for(s in r){if((n=r[s]).name!==e){o=!1;continue}i=n.state>Zo&&n.state<Jo,n.state=bi,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[s]}o&&delete t.__transition}}function oh(t){return this.each(function(){Mr(this,t)})}function ny(t,e){var r,n;return function(){var i=kt(this,t),o=i.tween;if(o!==r){n=r=o;for(var s=0,a=n.length;s<a;++s)if(n[s].name===e){n=n.slice(),n.splice(s,1);break}}i.tween=n}}function iy(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var o=kt(this,t),s=o.tween;if(s!==n){i=(n=s).slice();for(var a={name:e,value:r},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function sh(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=vt(this.node(),r).tween,i=0,o=n.length,s;i<o;++i)if((s=n[i]).name===t)return s.value;return null}return this.each((e==null?ny:iy)(r,t,e))}function vn(t,e,r){var n=t._id;return t.each(function(){var i=kt(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)}),function(i){return vt(i,n).value[e]}}function ts(t,e){var r;return(typeof e=="number"?Ct:e instanceof ne?Tr:(r=ne(e))?(e=r,Tr):di)(t,e)}function oy(t){return function(){this.removeAttribute(t)}}function sy(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ay(t,e,r){var n,i=r+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===n?o:o=e(n=s,r)}}function uy(t,e,r){var n,i=r+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===n?o:o=e(n=s,r)}}function ly(t,e,r){var n,i,o;return function(){var s,a=r(this),u;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=a+"",s===u?null:s===n&&u===i?o:(i=u,o=e(n=s,a)))}}function cy(t,e,r){var n,i,o;return function(){var s,a=r(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=a+"",s===u?null:s===n&&u===i?o:(i=u,o=e(n=s,a)))}}function ah(t,e){var r=Pe(t),n=r==="transform"?ja:ts;return this.attrTween(t,typeof e=="function"?(r.local?cy:ly)(r,n,vn(this,"attr."+t,e)):e==null?(r.local?sy:oy)(r):(r.local?uy:ay)(r,n,e))}function fy(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function hy(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function dy(t,e){var r,n;function i(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&hy(t,o)),r}return i._value=e,i}function py(t,e){var r,n;function i(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&fy(t,o)),r}return i._value=e,i}function uh(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Pe(t);return this.tween(r,(n.local?dy:py)(n,e))}function my(t,e){return function(){_i(this,t).delay=+e.apply(this,arguments)}}function gy(t,e){return e=+e,function(){_i(this,t).delay=e}}function lh(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?my:gy)(e,t)):vt(this.node(),e).delay}function xy(t,e){return function(){kt(this,t).duration=+e.apply(this,arguments)}}function vy(t,e){return e=+e,function(){kt(this,t).duration=e}}function ch(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?xy:vy)(e,t)):vt(this.node(),e).duration}function yy(t,e){if(typeof e!="function")throw new Error;return function(){kt(this,t).ease=e}}function fh(t){var e=this._id;return arguments.length?this.each(yy(e,t)):vt(this.node(),e).ease}function hh(t){typeof t!="function"&&(t=ui(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var o=e[i],s=o.length,a=n[i]=[],u,l=0;l<s;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&a.push(u);return new Mt(n,this._parents,this._name,this._id)}function dh(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,o=Math.min(n,i),s=new Array(n),a=0;a<o;++a)for(var u=e[a],l=r[a],c=u.length,f=s[a]=new Array(c),h,d=0;d<c;++d)(h=u[d]||l[d])&&(f[d]=h);for(;a<n;++a)s[a]=e[a];return new Mt(s,this._parents,this._name,this._id)}function by(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function _y(t,e,r){var n,i,o=by(e)?_i:kt;return function(){var s=o(this,t),a=s.on;a!==n&&(i=(n=a).copy()).on(e,r),s.on=i}}function ph(t,e){var r=this._id;return arguments.length<2?vt(this.node(),r).on.on(t):this.each(_y(r,t,e))}function wy(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function mh(){return this.on("end.remove",wy(this._id))}function gh(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Ar(t));for(var n=this._groups,i=n.length,o=new Array(i),s=0;s<i;++s)for(var a=n[s],u=a.length,l=o[s]=new Array(u),c,f,h=0;h<u;++h)(c=a[h])&&(f=t.call(c,c.__data__,h,a))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,er(l[h],e,r,h,l,vt(c,r)));return new Mt(o,this._parents,e,r)}function xh(t){var e=this._name,r=this._id;typeof t!="function"&&(t=ai(t));for(var n=this._groups,i=n.length,o=[],s=[],a=0;a<i;++a)for(var u=n[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var h=t.call(c,c.__data__,f,u),d,g=vt(c,r),m=0,p=h.length;m<p;++m)(d=h[m])&&er(d,e,r,m,h,g);o.push(h),s.push(c)}return new Mt(o,s,e,r)}var Sy=Yt.prototype.constructor;function vh(){return new Sy(this._groups,this._parents)}function Ey(t,e){var r,n,i;return function(){var o=tr(this,t),s=(this.style.removeProperty(t),tr(this,t));return o===s?null:o===r&&s===n?i:i=e(r=o,n=s)}}function yh(t){return function(){this.style.removeProperty(t)}}function Cy(t,e,r){var n,i=r+"",o;return function(){var s=tr(this,t);return s===i?null:s===n?o:o=e(n=s,r)}}function Ay(t,e,r){var n,i,o;return function(){var s=tr(this,t),a=r(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),tr(this,t))),s===u?null:s===n&&u===i?o:(i=u,o=e(n=s,a))}}function Ty(t,e){var r,n,i,o="style."+e,s="end."+o,a;return function(){var u=kt(this,t),l=u.on,c=u.value[o]==null?a||(a=yh(e)):void 0;(l!==r||i!==c)&&(n=(r=l).copy()).on(s,i=c),u.on=n}}function bh(t,e,r){var n=(t+="")=="transform"?Xa:ts;return e==null?this.styleTween(t,Ey(t,n)).on("end.style."+t,yh(t)):typeof e=="function"?this.styleTween(t,Ay(t,n,vn(this,"style."+t,e))).each(Ty(this._id,t)):this.styleTween(t,Cy(t,n,e),r).on("end.style."+t,null)}function Iy(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function My(t,e,r){var n,i;function o(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&Iy(t,s,r)),n}return o._value=e,o}function _h(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,My(t,e,r??""))}function Dy(t){return function(){this.textContent=t}}function Ry(t){return function(){var e=t(this);this.textContent=e??""}}function wh(t){return this.tween("text",typeof t=="function"?Ry(vn(this,"text",t)):Dy(t==null?"":t+""))}function Ny(t){return function(e){this.textContent=t.call(this,e)}}function Ly(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&Ny(i)),e}return n._value=t,n}function Sh(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ly(t))}function Eh(){for(var t=this._name,e=this._id,r=es(),n=this._groups,i=n.length,o=0;o<i;++o)for(var s=n[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var c=vt(u,e);er(u,t,r,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Mt(n,this._parents,t,r)}function Ch(){var t,e,r=this,n=r._id,i=r.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};r.each(function(){var l=kt(this,n),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),l.on=e})})}var ky=0;function Mt(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function bn(t){return Yt().transition(t)}function es(){return++ky}var yn=Yt.prototype;Mt.prototype=bn.prototype={constructor:Mt,select:gh,selectAll:xh,filter:hh,merge:dh,selection:vh,transition:Eh,call:yn.call,nodes:yn.nodes,node:yn.node,size:yn.size,empty:yn.empty,each:yn.each,on:ph,attr:ah,attrTween:uh,style:bh,styleTween:_h,text:wh,textTween:Sh,remove:mh,tween:sh,delay:lh,duration:ch,ease:fh,end:Ch};function rs(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Qa={time:null,delay:0,duration:250,ease:rs};function Oy(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))return Qa.time=gn(),Qa;return r}function Ah(t){var e,r;t instanceof Mt?(e=t._id,t=t._name):(e=es(),(r=Qa).time=gn(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,o=0;o<i;++o)for(var s=n[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&er(u,t,e,l,s,r||Oy(u,e));return new Mt(n,this._parents,t,e)}Yt.prototype.interrupt=oh;Yt.prototype.transition=Ah;function ns(t){return function(){return t}}function Th(t,e,r){this.target=t,this.type=e,this.selection=r}function Za(){L.stopImmediatePropagation()}function is(){L.preventDefault(),L.stopImmediatePropagation()}var Ih={name:"drag"},Ja={name:"space"},_n={name:"handle"},wn={name:"center"};function Mh(t){return[+t[0],+t[1]]}function ru(t){return[Mh(t[0]),Mh(t[1])]}function Py(t){return function(e){return Ba(e,L.touches,t)}}var os={name:"x",handles:["w","e"].map(wi),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},tu={name:"y",handles:["n","s"].map(wi),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},YR={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(wi),input:function(t){return t==null?null:ru(t)},output:function(t){return t}},Be={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Dh={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Rh={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Fy={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},By={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function wi(t){return{type:t}}function Uy(){return!L.ctrlKey&&!L.button}function Hy(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Vy(){return navigator.maxTouchPoints||"ontouchstart"in this}function eu(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function zy(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function ss(){return Gy(os)}function Gy(t){var e=Hy,r=Uy,n=Vy,i=!0,o=Cr("start","brush","end"),s=6,a;function u(p){var x=p.property("__brush",m).selectAll(".overlay").data([wi("overlay")]);x.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Be.overlay).merge(x).each(function(){var v=eu(this).extent;H(this).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1])}),p.selectAll(".selection").data([wi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Be.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=p.selectAll(".handle").data(t.handles,function(v){return v.type});b.exit().remove(),b.enter().append("rect").attr("class",function(v){return"handle handle--"+v.type}).attr("cursor",function(v){return Be[v.type]}),p.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(n).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(p,x){p.selection?p.on("start.brush",function(){c(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){c(this,arguments).end()}).tween("brush",function(){var b=this,v=b.__brush,S=c(b,arguments),M=v.selection,D=t.input(typeof x=="function"?x.apply(this,arguments):x,v.extent),E=Fe(M,D);function N(A){v.selection=A===1&&D===null?null:E(A),l.call(b),S.brush()}return M!==null&&D!==null?N:N(1)}):p.each(function(){var b=this,v=arguments,S=b.__brush,M=t.input(typeof x=="function"?x.apply(b,v):x,S.extent),D=c(b,v).beforestart();Mr(b),S.selection=M===null?null:M,l.call(b),D.start().brush().end()})},u.clear=function(p){u.move(p,null)};function l(){var p=H(this),x=eu(this).selection;x?(p.selectAll(".selection").style("display",null).attr("x",x[0][0]).attr("y",x[0][1]).attr("width",x[1][0]-x[0][0]).attr("height",x[1][1]-x[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?x[1][0]-s/2:x[0][0]-s/2}).attr("y",function(b){return b.type[0]==="s"?x[1][1]-s/2:x[0][1]-s/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?x[1][0]-x[0][0]+s:s}).attr("height",function(b){return b.type==="e"||b.type==="w"?x[1][1]-x[0][1]+s:s})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(p,x,b){var v=p.__brush.emitter;return v&&(!b||!v.clean)?v:new f(p,x,b)}function f(p,x,b){this.that=p,this.args=x,this.state=p.__brush,this.active=0,this.clean=b}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return--this.active===0&&(delete this.state.emitter,this.emit("end")),this},emit:function(p){Oa(new Th(u,p,t.output(this.state.selection)),o.apply,o,[p,this.that,this.args])}};function h(){if(a&&!L.touches||!r.apply(this,arguments))return;var p=this,x=L.target.__data__.type,b=(i&&L.metaKey?x="overlay":x)==="selection"?Ih:i&&L.altKey?wn:_n,v=t===tu?null:Fy[x],S=t===os?null:By[x],M=eu(p),D=M.extent,E=M.selection,N=D[0][0],A,R,C=D[0][1],_,T,at=D[1][0],X,j,pt=D[1][1],W,z,et=0,rt=0,Te,le=v&&S&&i&&L.shiftKey,At,ce,ze=L.touches?Py(L.changedTouches[0].identifier):fi,Zt=ze(p),Jt=Zt,I=c(p,arguments,!0).beforestart();x==="overlay"?(E&&(Te=!0),M.selection=E=[[A=t===tu?N:Zt[0],_=t===os?C:Zt[1]],[X=t===tu?at:A,W=t===os?pt:_]]):(A=E[0][0],_=E[0][1],X=E[1][0],W=E[1][1]),R=A,T=_,j=X,z=W;var O=H(p).attr("pointer-events","none"),V=O.selectAll(".overlay").attr("cursor",Be[x]);if(L.touches)I.moved=wt,I.ended=Tt;else{var w=H(L.view).on("mousemove.brush",wt,!0).on("mouseup.brush",Tt,!0);i&&w.on("keydown.brush",Dt,!0).on("keyup.brush",Ie,!0),Ua(L.view)}Za(),Mr(p),l.call(p),I.start();function wt(){var Rt=ze(p);le&&!At&&!ce&&(Math.abs(Rt[0]-Jt[0])>Math.abs(Rt[1]-Jt[1])?ce=!0:At=!0),Jt=Rt,Te=!0,is(),G()}function G(){var Rt;switch(et=Jt[0]-Zt[0],rt=Jt[1]-Zt[1],b){case Ja:case Ih:{v&&(et=Math.max(N-A,Math.min(at-X,et)),R=A+et,j=X+et),S&&(rt=Math.max(C-_,Math.min(pt-W,rt)),T=_+rt,z=W+rt);break}case _n:{v<0?(et=Math.max(N-A,Math.min(at-A,et)),R=A+et,j=X):v>0&&(et=Math.max(N-X,Math.min(at-X,et)),R=A,j=X+et),S<0?(rt=Math.max(C-_,Math.min(pt-_,rt)),T=_+rt,z=W):S>0&&(rt=Math.max(C-W,Math.min(pt-W,rt)),T=_,z=W+rt);break}case wn:{v&&(R=Math.max(N,Math.min(at,A-et*v)),j=Math.max(N,Math.min(at,X+et*v))),S&&(T=Math.max(C,Math.min(pt,_-rt*S)),z=Math.max(C,Math.min(pt,W+rt*S)));break}}j<R&&(v*=-1,Rt=A,A=X,X=Rt,Rt=R,R=j,j=Rt,x in Dh&&V.attr("cursor",Be[x=Dh[x]])),z<T&&(S*=-1,Rt=_,_=W,W=Rt,Rt=T,T=z,z=Rt,x in Rh&&V.attr("cursor",Be[x=Rh[x]])),M.selection&&(E=M.selection),At&&(R=E[0][0],j=E[1][0]),ce&&(T=E[0][1],z=E[1][1]),(E[0][0]!==R||E[0][1]!==T||E[1][0]!==j||E[1][1]!==z)&&(M.selection=[[R,T],[j,z]],l.call(p),I.brush())}function Tt(){if(Za(),L.touches){if(L.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Ha(L.view,Te),w.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);O.attr("pointer-events","all"),V.attr("cursor",Be.overlay),M.selection&&(E=M.selection),zy(E)&&(M.selection=null,l.call(p)),I.end()}function Dt(){switch(L.keyCode){case 16:{le=v&&S;break}case 18:{b===_n&&(v&&(X=j-et*v,A=R+et*v),S&&(W=z-rt*S,_=T+rt*S),b=wn,G());break}case 32:{(b===_n||b===wn)&&(v<0?X=j-et:v>0&&(A=R-et),S<0?W=z-rt:S>0&&(_=T-rt),b=Ja,V.attr("cursor",Be.selection),G());break}default:return}is()}function Ie(){switch(L.keyCode){case 16:{le&&(At=ce=le=!1,G());break}case 18:{b===wn&&(v<0?X=j:v>0&&(A=R),S<0?W=z:S>0&&(_=T),b=_n,G());break}case 32:{b===Ja&&(L.altKey?(v&&(X=j-et*v,A=R+et*v),S&&(W=z-rt*S,_=T+rt*S),b=wn):(v<0?X=j:v>0&&(A=R),S<0?W=z:S>0&&(_=T),b=_n),V.attr("cursor",Be[x]),G());break}default:return}is()}}function d(){c(this,arguments).moved()}function g(){c(this,arguments).ended()}function m(){var p=this.__brush||{selection:null};return p.extent=ru(e.apply(this,arguments)),p.dim=t,p}return u.extent=function(p){return arguments.length?(e=typeof p=="function"?p:ns(ru(p)),u):e},u.filter=function(p){return arguments.length?(r=typeof p=="function"?p:ns(!!p),u):r},u.touchable=function(p){return arguments.length?(n=typeof p=="function"?p:ns(!!p),u):n},u.handleSize=function(p){return arguments.length?(s=+p,u):s},u.keyModifiers=function(p){return arguments.length?(i=!!p,u):i},u.on=function(){var p=o.on.apply(o,arguments);return p===o?u:p},u}var Nh=Math.PI,Yy=Nh/2,$y=Nh*2;var qy=Array.prototype.slice;var $t="$";function as(){}as.prototype=Lh.prototype={constructor:as,has:function(t){return $t+t in this},get:function(t){return this[$t+t]},set:function(t,e){return this[$t+t]=e,this},remove:function(t){var e=$t+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===$t&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===$t&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===$t&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===$t&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===$t&&++t;return t},empty:function(){for(var t in this)if(t[0]===$t)return!1;return!0},each:function(t){for(var e in this)e[0]===$t&&t(this[e],e.slice(1),this)}};function Lh(t,e){var r=new as;if(t instanceof as)t.each(function(a,u){r.set(u,a)});else if(Array.isArray(t)){var n=-1,i=t.length,o;if(e==null)for(;++n<i;)r.set(n,t[n]);else for(;++n<i;)r.set(e(o=t[n],n,t),o)}else if(t)for(var s in t)r.set(s,t[s]);return r}var be=Lh;function us(){}var Dr=be.prototype;us.prototype=Xy.prototype={constructor:us,has:Dr.has,add:function(t){return t+="",this[$t+t]=t,this},remove:Dr.remove,clear:Dr.clear,values:Dr.keys,size:Dr.size,empty:Dr.empty,each:Dr.each};function Xy(t,e){var r=new us;if(t instanceof us)t.each(function(o){r.add(o)});else if(t){var n=-1,i=t.length;if(e==null)for(;++n<i;)r.add(t[n]);else for(;++n<i;)r.add(e(t[n],n,t))}return r}var jy=Array.prototype,kh=jy.slice;function rr(t){return function(){return t}}function Si(){return(Math.random()-.5)*1e-6}function Oh(t){var e=+this._x.call(null,t),r=+this._y.call(null,t);return Ph(this.cover(e,r),e,r,t)}function Ph(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,o=t._root,s={data:n},a=t._x0,u=t._y0,l=t._x1,c=t._y1,f,h,d,g,m,p,x,b;if(!o)return t._root=s,t;for(;o.length;)if((m=e>=(f=(a+l)/2))?a=f:l=f,(p=r>=(h=(u+c)/2))?u=h:c=h,i=o,!(o=o[x=p<<1|m]))return i[x]=s,t;if(d=+t._x.call(null,o.data),g=+t._y.call(null,o.data),e===d&&r===g)return s.next=o,i?i[x]=s:t._root=s,t;do i=i?i[x]=new Array(4):t._root=new Array(4),(m=e>=(f=(a+l)/2))?a=f:l=f,(p=r>=(h=(u+c)/2))?u=h:c=h;while((x=p<<1|m)===(b=(g>=h)<<1|d>=f));return i[b]=o,i[x]=s,t}function Fh(t){var e,r,n=t.length,i,o,s=new Array(n),a=new Array(n),u=1/0,l=1/0,c=-1/0,f=-1/0;for(r=0;r<n;++r)isNaN(i=+this._x.call(null,e=t[r]))||isNaN(o=+this._y.call(null,e))||(s[r]=i,a[r]=o,i<u&&(u=i),i>c&&(c=i),o<l&&(l=o),o>f&&(f=o));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),r=0;r<n;++r)Ph(this,s[r],a[r],t[r]);return this}function Bh(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,o=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,o=(n=Math.floor(e))+1;else{for(var s=i-r,a=this._root,u,l;r>t||t>=i||n>e||e>=o;)switch(l=(e<n)<<1|t<r,u=new Array(4),u[l]=a,a=u,s*=2,l){case 0:i=r+s,o=n+s;break;case 1:r=i-s,o=n+s;break;case 2:i=r+s,n=o-s;break;case 3:r=i-s,n=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=r,this._y0=n,this._x1=i,this._y1=o,this}function Uh(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Hh(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function yt(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i}function Vh(t,e,r){var n,i=this._x0,o=this._y0,s,a,u,l,c=this._x1,f=this._y1,h=[],d=this._root,g,m;for(d&&h.push(new yt(d,i,o,c,f)),r==null?r=1/0:(i=t-r,o=e-r,c=t+r,f=e+r,r*=r);g=h.pop();)if(!(!(d=g.node)||(s=g.x0)>c||(a=g.y0)>f||(u=g.x1)<i||(l=g.y1)<o))if(d.length){var p=(s+u)/2,x=(a+l)/2;h.push(new yt(d[3],p,x,u,l),new yt(d[2],s,x,p,l),new yt(d[1],p,a,u,x),new yt(d[0],s,a,p,x)),(m=(e>=x)<<1|t>=p)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-m],h[h.length-1-m]=g)}else{var b=t-+this._x.call(null,d.data),v=e-+this._y.call(null,d.data),S=b*b+v*v;if(S<r){var M=Math.sqrt(r=S);i=t-M,o=e-M,c=t+M,f=e+M,n=d.data}}return n}function zh(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,r=this._root,n,i,o,s=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,h,d,g,m,p,x;if(!r)return this;if(r.length)for(;;){if((g=c>=(h=(s+u)/2))?s=h:u=h,(m=f>=(d=(a+l)/2))?a=d:l=d,e=r,!(r=r[p=m<<1|g]))return this;if(!r.length)break;(e[p+1&3]||e[p+2&3]||e[p+3&3])&&(n=e,x=p)}for(;r.data!==t;)if(i=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,i?(o?i.next=o:delete i.next,this):e?(o?e[p]=o:delete e[p],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(n?n[x]=r:this._root=r),this):(this._root=o,this)}function Gh(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this}function Yh(){return this._root}function $h(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function qh(t){var e=[],r,n=this._root,i,o,s,a,u;for(n&&e.push(new yt(n,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!t(n=r.node,o=r.x0,s=r.y0,a=r.x1,u=r.y1)&&n.length){var l=(o+a)/2,c=(s+u)/2;(i=n[3])&&e.push(new yt(i,l,c,a,u)),(i=n[2])&&e.push(new yt(i,o,c,l,u)),(i=n[1])&&e.push(new yt(i,l,s,a,c)),(i=n[0])&&e.push(new yt(i,o,s,l,c))}return this}function Xh(t){var e=[],r=[],n;for(this._root&&e.push(new yt(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,s=n.x0,a=n.y0,u=n.x1,l=n.y1,c=(s+u)/2,f=(a+l)/2;(o=i[0])&&e.push(new yt(o,s,a,c,f)),(o=i[1])&&e.push(new yt(o,c,a,u,f)),(o=i[2])&&e.push(new yt(o,s,f,c,l)),(o=i[3])&&e.push(new yt(o,c,f,u,l))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function jh(t){return t[0]}function Wh(t){return arguments.length?(this._x=t,this):this._x}function Kh(t){return t[1]}function Qh(t){return arguments.length?(this._y=t,this):this._y}function Ei(t,e,r){var n=new nu(e??jh,r??Kh,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function nu(t,e,r,n,i,o){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=o,this._root=void 0}function Zh(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var Ot=Ei.prototype=nu.prototype;Ot.copy=function(){var t=new nu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,n;if(!e)return t;if(!e.length)return t._root=Zh(e),t;for(r=[{source:e,target:t._root=new Array(4)}];e=r.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?r.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=Zh(n));return t};Ot.add=Oh;Ot.addAll=Fh;Ot.cover=Bh;Ot.data=Uh;Ot.extent=Hh;Ot.find=Vh;Ot.remove=zh;Ot.removeAll=Gh;Ot.root=Yh;Ot.size=$h;Ot.visit=qh;Ot.visitAfter=Xh;Ot.x=Wh;Ot.y=Qh;function Qy(t){return t.x+t.vx}function Zy(t){return t.y+t.vy}function iu(t){var e,r,n=1,i=1;typeof t!="function"&&(t=rr(t==null?1:+t));function o(){for(var u,l=e.length,c,f,h,d,g,m,p=0;p<i;++p)for(c=Ei(e,Qy,Zy).visitAfter(s),u=0;u<l;++u)f=e[u],g=r[f.index],m=g*g,h=f.x+f.vx,d=f.y+f.vy,c.visit(x);function x(b,v,S,M,D){var E=b.data,N=b.r,A=g+N;if(E){if(E.index>f.index){var R=h-E.x-E.vx,C=d-E.y-E.vy,_=R*R+C*C;_<A*A&&(R===0&&(R=Si(),_+=R*R),C===0&&(C=Si(),_+=C*C),_=(A-(_=Math.sqrt(_)))/_*n,f.vx+=(R*=_)*(A=(N*=N)/(m+N)),f.vy+=(C*=_)*A,E.vx-=R*(A=1-A),E.vy-=C*A)}return}return v>h+A||M<h-A||S>d+A||D<d-A}}function s(u){if(u.data)return u.r=r[u.data.index];for(var l=u.r=0;l<4;++l)u[l]&&u[l].r>u.r&&(u.r=u[l].r)}function a(){if(e){var u,l=e.length,c;for(r=new Array(l),u=0;u<l;++u)c=e[u],r[c.index]=+t(c,u,e)}}return o.initialize=function(u){e=u,a()},o.iterations=function(u){return arguments.length?(i=+u,o):i},o.strength=function(u){return arguments.length?(n=+u,o):n},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:rr(+u),a(),o):t},o}var Jy=10,t1=Math.PI*(3-Math.sqrt(5));function ou(t){var e,r=1,n=.001,i=1-Math.pow(n,1/300),o=0,s=.6,a=be(),u=xn(c),l=Cr("tick","end");t==null&&(t=[]);function c(){f(),l.call("tick",e),r<n&&(u.stop(),l.call("end",e))}function f(g){var m,p=t.length,x;g===void 0&&(g=1);for(var b=0;b<g;++b)for(r+=(o-r)*i,a.each(function(v){v(r)}),m=0;m<p;++m)x=t[m],x.fx==null?x.x+=x.vx*=s:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=s:(x.y=x.fy,x.vy=0);return e}function h(){for(var g=0,m=t.length,p;g<m;++g){if(p=t[g],p.index=g,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var x=Jy*Math.sqrt(g),b=g*t1;p.x=x*Math.cos(b),p.y=x*Math.sin(b)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function d(g){return g.initialize&&g.initialize(t),g}return h(),e={tick:f,restart:function(){return u.restart(c),e},stop:function(){return u.stop(),e},nodes:function(g){return arguments.length?(t=g,h(),a.each(d),e):t},alpha:function(g){return arguments.length?(r=+g,e):r},alphaMin:function(g){return arguments.length?(n=+g,e):n},alphaDecay:function(g){return arguments.length?(i=+g,e):+i},alphaTarget:function(g){return arguments.length?(o=+g,e):o},velocityDecay:function(g){return arguments.length?(s=1-g,e):1-s},force:function(g,m){return arguments.length>1?(m==null?a.remove(g):a.set(g,d(m)),e):a.get(g)},find:function(g,m,p){var x=0,b=t.length,v,S,M,D,E;for(p==null?p=1/0:p*=p,x=0;x<b;++x)D=t[x],v=g-D.x,S=m-D.y,M=v*v+S*S,M<p&&(E=D,p=M);return E},on:function(g,m){return arguments.length>1?(l.on(g,m),e):l.on(g)}}}function Jh(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Rr(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function _e(t){return t=Rr(Math.abs(t)),t?t[1]:NaN}function td(t,e){return function(r,n){for(var i=r.length,o=[],s=0,a=t[0],u=0;i>0&&a>0&&(u+a+1>n&&(a=Math.max(1,n-u)),o.push(r.substring(i-=a,i+a)),!((u+=a+1)>n));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function ed(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var e1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nr(t){if(!(e=e1.exec(t)))throw new Error("invalid format: "+t);var e;return new ls({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}nr.prototype=ls.prototype;function ls(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ls.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rd(t){t:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var su;function nd(t,e){var r=Rr(t,e);if(!r)return t+"";var n=r[0],i=r[1],o=i-(su=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Rr(t,Math.max(0,e+o-1))[0]}function au(t,e){var r=Rr(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var uu={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:Jh,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return au(t*100,e)},r:au,s:nd,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function lu(t){return t}var id=Array.prototype.map,od=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function sd(t){var e=t.grouping===void 0||t.thousands===void 0?lu:td(id.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?lu:ed(id.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"-":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=nr(f);var h=f.fill,d=f.align,g=f.sign,m=f.symbol,p=f.zero,x=f.width,b=f.comma,v=f.precision,S=f.trim,M=f.type;M==="n"?(b=!0,M="g"):uu[M]||(v===void 0&&(v=12),S=!0,M="g"),(p||h==="0"&&d==="=")&&(p=!0,h="0",d="=");var D=m==="$"?r:m==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",E=m==="$"?n:/[%p]/.test(M)?s:"",N=uu[M],A=/[defgprs%]/.test(M);v=v===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function R(C){var _=D,T=E,at,X,j;if(M==="c")T=N(C)+T,C="";else{C=+C;var pt=C<0||1/C<0;if(C=isNaN(C)?u:N(Math.abs(C),v),S&&(C=rd(C)),pt&&+C==0&&g!=="+"&&(pt=!1),_=(pt?g==="("?g:a:g==="-"||g==="("?"":g)+_,T=(M==="s"?od[8+su/3]:"")+T+(pt&&g==="("?")":""),A){for(at=-1,X=C.length;++at<X;)if(j=C.charCodeAt(at),48>j||j>57){T=(j===46?i+C.slice(at+1):C.slice(at))+T,C=C.slice(0,at);break}}}b&&!p&&(C=e(C,1/0));var W=_.length+C.length+T.length,z=W<x?new Array(x-W+1).join(h):"";switch(b&&p&&(C=e(z+C,z.length?x-T.length:1/0),z=""),d){case"<":C=_+C+T+z;break;case"=":C=_+z+C+T;break;case"^":C=z.slice(0,W=z.length>>1)+_+C+T+z.slice(W);break;default:C=z+_+C+T;break}return o(C)}return R.toString=function(){return f+""},R}function c(f,h){var d=l((f=nr(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(_e(h)/3)))*3,m=Math.pow(10,-g),p=od[8+g/3];return function(x){return d(m*x)+p}}return{format:l,formatPrefix:c}}var cs,fs,hs;cu({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function cu(t){return cs=sd(t),fs=cs.format,hs=cs.formatPrefix,cs}function fu(t){return Math.max(0,-_e(Math.abs(t)))}function hu(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_e(e)/3)))*3-_e(Math.abs(t)))}function du(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_e(e)-_e(t))+1}function Wt(){return Math.random()}var r1=function t(e){function r(n,i){return n=n==null?0:+n,i=i==null?1:+i,arguments.length===1?(i=n,n=0):i-=n,function(){return e()*i+n}}return r.source=t,r}(Wt);var pu=function t(e){function r(n,i){var o,s;return n=n==null?0:+n,i=i==null?1:+i,function(){var a;if(o!=null)a=o,o=null;else do o=e()*2-1,a=e()*2-1,s=o*o+a*a;while(!s||s>1);return n+i*a*Math.sqrt(-2*Math.log(s)/s)}}return r.source=t,r}(Wt);var n1=function t(e){function r(){var n=pu.source(e).apply(this,arguments);return function(){return Math.exp(n())}}return r.source=t,r}(Wt);var mu=function t(e){function r(n){return function(){for(var i=0,o=0;o<n;++o)i+=e();return i}}return r.source=t,r}(Wt);var i1=function t(e){function r(n){var i=mu.source(e)(n);return function(){return i()/n}}return r.source=t,r}(Wt);var o1=function t(e){function r(n){return function(){return-Math.log(1-e())/n}}return r.source=t,r}(Wt);function Pt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var ad=Array.prototype,Ci=ad.map,ir=ad.slice;var gu={name:"implicit"};function Ai(){var t=be(),e=[],r=[],n=gu;function i(o){var s=o+"",a=t.get(s);if(!a){if(n!==gu)return n;t.set(s,a=e.push(o))}return r[(a-1)%r.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=be();for(var s=-1,a=o.length,u,l;++s<a;)t.has(l=(u=o[s])+"")||t.set(l,e.push(u));return i},i.range=function(o){return arguments.length?(r=ir.call(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Ai(e,r).unknown(n)},Pt.apply(i,arguments),i}function or(){var t=Ai().unknown(void 0),e=t.domain,r=t.range,n=[0,1],i,o,s=!1,a=0,u=0,l=.5;delete t.unknown;function c(){var f=e().length,h=n[1]<n[0],d=n[h-0],g=n[1-h];i=(g-d)/Math.max(1,f-a+u*2),s&&(i=Math.floor(i)),d+=(g-d-i*(f-a))*l,o=i*(1-a),s&&(d=Math.round(d),o=Math.round(o));var m=Er(f).map(function(p){return d+i*p});return r(h?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),c()):e()},t.range=function(f){return arguments.length?(n=[+f[0],+f[1]],c()):n.slice()},t.rangeRound=function(f){return n=[+f[0],+f[1]],s=!0,c()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(f){return arguments.length?(s=!!f,c()):s},t.padding=function(f){return arguments.length?(a=Math.min(1,u=+f),c()):a},t.paddingInner=function(f){return arguments.length?(a=Math.min(1,f),c()):a},t.paddingOuter=function(f){return arguments.length?(u=+f,c()):u},t.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},t.copy=function(){return or(e(),n).round(s).paddingInner(a).paddingOuter(u).align(l)},Pt.apply(c(),arguments)}function ud(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ud(e())},t}function xu(){return ud(or.apply(null,arguments).paddingInner(1))}function ld(t){return function(){return t}}function vu(t){return+t}var cd=[0,1];function Vt(t){return t}function yu(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:ld(isNaN(e)?NaN:.5)}function fd(t){var e=t[0],r=t[t.length-1],n;return e>r&&(n=e,e=r,r=n),function(i){return Math.max(e,Math.min(r,i))}}function s1(t,e,r){var n=t[0],i=t[1],o=e[0],s=e[1];return i<n?(n=yu(i,n),o=r(s,o)):(n=yu(n,i),o=r(o,s)),function(a){return o(n(a))}}function a1(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),o=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=yu(t[s],t[s+1]),o[s]=r(e[s],e[s+1]);return function(a){var u=Gt(t,a,1,n)-1;return o[u](i[u](a))}}function Nr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ds(){var t=cd,e=cd,r=Fe,n,i,o,s=Vt,a,u,l;function c(){return a=Math.min(t.length,e.length)>2?a1:s1,u=l=null,f}function f(h){return isNaN(h=+h)?o:(u||(u=a(t.map(n),e,r)))(n(s(h)))}return f.invert=function(h){return s(i((l||(l=a(e,t.map(n),Ct)))(h)))},f.domain=function(h){return arguments.length?(t=Ci.call(h,vu),s===Vt||(s=fd(t)),c()):t.slice()},f.range=function(h){return arguments.length?(e=ir.call(h),c()):e.slice()},f.rangeRound=function(h){return e=ir.call(h),r=Ya,c()},f.clamp=function(h){return arguments.length?(s=h?fd(t):Vt,f):s!==Vt},f.interpolate=function(h){return arguments.length?(r=h,c()):r},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return n=h,i=d,c()}}function Ti(t,e){return ds()(t,e)}function bu(t,e,r,n){var i=Le(t,e,r),o;switch(n=nr(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=hu(i,s))&&(n.precision=o),hs(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=du(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=fu(i))&&(n.precision=o-(n.type==="%")*2);break}}return fs(n)}function Lr(t){var e=t.domain;return t.ticks=function(r){var n=e();return Mo(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return bu(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,o=n.length-1,s=n[i],a=n[o],u;return a<s&&(u=s,s=a,a=u,u=i,i=o,o=u),u=pn(s,a,r),u>0?(s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u,u=pn(s,a,r)):u<0&&(s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u,u=pn(s,a,r)),u>0?(n[i]=Math.floor(s/u)*u,n[o]=Math.ceil(a/u)*u,e(n)):u<0&&(n[i]=Math.ceil(s*u)/u,n[o]=Math.floor(a*u)/u,e(n)),t},t}function Ii(){var t=Ti(Vt,Vt);return t.copy=function(){return Nr(t,Ii())},Pt.apply(t,arguments),Lr(t)}function _u(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],o=t[n],s;return o<i&&(s=r,r=n,n=s,s=i,i=o,o=s),t[r]=e.floor(i),t[n]=e.ceil(o),t}var wu=new Date,Su=new Date;function tt(t,e,r,n){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=function(o){return t(o=new Date(+o)),o},i.ceil=function(o){return t(o=new Date(o-1)),e(o,1),t(o),o},i.round=function(o){var s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=function(o,s){return e(o=new Date(+o),s==null?1:Math.floor(s)),o},i.range=function(o,s,a){var u=[],l;if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;do u.push(l=new Date(+o)),e(o,a),t(o);while(l<o&&o<s);return u},i.filter=function(o){return tt(function(s){if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},function(s,a){if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););})},r&&(i.count=function(o,s){return wu.setTime(+o),Su.setTime(+s),t(wu),t(Su),Math.floor(r(wu,Su))},i.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?function(s){return n(s)%o===0}:function(s){return i.count(0,s)%o===0}):i}),i}var ps=tt(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ps.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?tt(function(e){e.setTime(Math.floor(e/t)*t)},function(e,r){e.setTime(+e+r*t)},function(e,r){return(r-e)/t}):ps};var ms=ps,hd=ps.range;var kr=1e3,Ue=6e4,Eu=36e5,gs=864e5,xs=6048e5;var dd=tt(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*kr)},function(t,e){return(e-t)/kr},function(t){return t.getUTCSeconds()}),vs=dd,pd=dd.range;var md=tt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*kr)},function(t,e){t.setTime(+t+e*Ue)},function(t,e){return(e-t)/Ue},function(t){return t.getMinutes()}),Mi=md,u1=md.range;var gd=tt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*kr-t.getMinutes()*Ue)},function(t,e){t.setTime(+t+e*Eu)},function(t,e){return(e-t)/Eu},function(t){return t.getHours()}),Cu=gd,l1=gd.range;var xd=tt(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ue)/gs},function(t){return t.getDate()-1}),sr=xd,c1=xd.range;function Or(t){return tt(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,r){e.setDate(e.getDate()+r*7)},function(e,r){return(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Ue)/xs})}var Pr=Or(0),Sn=Or(1),vd=Or(2),yd=Or(3),ar=Or(4),bd=Or(5),_d=Or(6),wd=Pr.range,f1=Sn.range,h1=vd.range,d1=yd.range,p1=ar.range,m1=bd.range,g1=_d.range;var Sd=tt(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),Di=Sd,x1=Sd.range;var Au=tt(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Au.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:tt(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,r){e.setFullYear(e.getFullYear()+r*t)})};var oe=Au,v1=Au.range;var Ed=tt(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/gs},function(t){return t.getUTCDate()-1}),ys=Ed,y1=Ed.range;function Fr(t){return tt(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCDate(e.getUTCDate()+r*7)},function(e,r){return(r-e)/xs})}var Ri=Fr(0),En=Fr(1),Cd=Fr(2),Ad=Fr(3),ur=Fr(4),Td=Fr(5),Id=Fr(6),Md=Ri.range,b1=En.range,_1=Cd.range,w1=Ad.range,S1=ur.range,E1=Td.range,C1=Id.range;var Tu=tt(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Tu.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:tt(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCFullYear(e.getUTCFullYear()+r*t)})};var Br=Tu,A1=Tu.range;function Iu(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Mu(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ni(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Du(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,u=t.shortMonths,l=Li(i),c=ki(i),f=Li(o),h=ki(o),d=Li(s),g=ki(s),m=Li(a),p=ki(a),x=Li(u),b=ki(u),v={a:pt,A:W,b:z,B:et,c:null,d:Od,e:Od,f:W1,g:ob,G:ab,H:q1,I:X1,j:j1,L:Hd,m:K1,M:Q1,p:rt,q:Te,Q:Bd,s:Ud,S:Z1,u:J1,U:tb,V:eb,w:rb,W:nb,x:null,X:null,y:ib,Y:sb,Z:ub,"%":Fd},S={a:le,A:At,b:ce,B:ze,c:null,d:Pd,e:Pd,f:hb,g:wb,G:Eb,H:lb,I:cb,j:fb,L:zd,m:db,M:pb,p:Zt,q:Jt,Q:Bd,s:Ud,S:mb,u:gb,U:xb,V:vb,w:yb,W:bb,x:null,X:null,y:_b,Y:Sb,Z:Cb,"%":Fd},M={a:R,A:C,b:_,B:T,c:at,d:Ld,e:Ld,f:z1,g:Nd,G:Rd,H:kd,I:kd,j:B1,L:V1,m:F1,M:U1,p:A,q:P1,Q:Y1,s:$1,S:H1,u:R1,U:N1,V:L1,w:D1,W:k1,x:X,X:j,y:Nd,Y:Rd,Z:O1,"%":G1};v.x=D(r,v),v.X=D(n,v),v.c=D(e,v),S.x=D(r,S),S.X=D(n,S),S.c=D(e,S);function D(I,O){return function(V){var w=[],wt=-1,G=0,Tt=I.length,Dt,Ie,Rt;for(V instanceof Date||(V=new Date(+V));++wt<Tt;)I.charCodeAt(wt)===37&&(w.push(I.slice(G,wt)),(Ie=Dd[Dt=I.charAt(++wt)])!=null?Dt=I.charAt(++wt):Ie=Dt==="e"?" ":"0",(Rt=O[Dt])&&(Dt=Rt(V,Ie)),w.push(Dt),G=wt+1);return w.push(I.slice(G,wt)),w.join("")}}function E(I,O){return function(V){var w=Ni(1900,void 0,1),wt=N(w,I,V+="",0),G,Tt;if(wt!=V.length)return null;if("Q"in w)return new Date(w.Q);if("s"in w)return new Date(w.s*1e3+("L"in w?w.L:0));if(O&&!("Z"in w)&&(w.Z=0),"p"in w&&(w.H=w.H%12+w.p*12),w.m===void 0&&(w.m="q"in w?w.q:0),"V"in w){if(w.V<1||w.V>53)return null;"w"in w||(w.w=1),"Z"in w?(G=Mu(Ni(w.y,0,1)),Tt=G.getUTCDay(),G=Tt>4||Tt===0?En.ceil(G):En(G),G=ys.offset(G,(w.V-1)*7),w.y=G.getUTCFullYear(),w.m=G.getUTCMonth(),w.d=G.getUTCDate()+(w.w+6)%7):(G=Iu(Ni(w.y,0,1)),Tt=G.getDay(),G=Tt>4||Tt===0?Sn.ceil(G):Sn(G),G=sr.offset(G,(w.V-1)*7),w.y=G.getFullYear(),w.m=G.getMonth(),w.d=G.getDate()+(w.w+6)%7)}else("W"in w||"U"in w)&&("w"in w||(w.w="u"in w?w.u%7:"W"in w?1:0),Tt="Z"in w?Mu(Ni(w.y,0,1)).getUTCDay():Iu(Ni(w.y,0,1)).getDay(),w.m=0,w.d="W"in w?(w.w+6)%7+w.W*7-(Tt+5)%7:w.w+w.U*7-(Tt+6)%7);return"Z"in w?(w.H+=w.Z/100|0,w.M+=w.Z%100,Mu(w)):Iu(w)}}function N(I,O,V,w){for(var wt=0,G=O.length,Tt=V.length,Dt,Ie;wt<G;){if(w>=Tt)return-1;if(Dt=O.charCodeAt(wt++),Dt===37){if(Dt=O.charAt(wt++),Ie=M[Dt in Dd?O.charAt(wt++):Dt],!Ie||(w=Ie(I,V,w))<0)return-1}else if(Dt!=V.charCodeAt(w++))return-1}return w}function A(I,O,V){var w=l.exec(O.slice(V));return w?(I.p=c[w[0].toLowerCase()],V+w[0].length):-1}function R(I,O,V){var w=d.exec(O.slice(V));return w?(I.w=g[w[0].toLowerCase()],V+w[0].length):-1}function C(I,O,V){var w=f.exec(O.slice(V));return w?(I.w=h[w[0].toLowerCase()],V+w[0].length):-1}function _(I,O,V){var w=x.exec(O.slice(V));return w?(I.m=b[w[0].toLowerCase()],V+w[0].length):-1}function T(I,O,V){var w=m.exec(O.slice(V));return w?(I.m=p[w[0].toLowerCase()],V+w[0].length):-1}function at(I,O,V){return N(I,e,O,V)}function X(I,O,V){return N(I,r,O,V)}function j(I,O,V){return N(I,n,O,V)}function pt(I){return s[I.getDay()]}function W(I){return o[I.getDay()]}function z(I){return u[I.getMonth()]}function et(I){return a[I.getMonth()]}function rt(I){return i[+(I.getHours()>=12)]}function Te(I){return 1+~~(I.getMonth()/3)}function le(I){return s[I.getUTCDay()]}function At(I){return o[I.getUTCDay()]}function ce(I){return u[I.getUTCMonth()]}function ze(I){return a[I.getUTCMonth()]}function Zt(I){return i[+(I.getUTCHours()>=12)]}function Jt(I){return 1+~~(I.getUTCMonth()/3)}return{format:function(I){var O=D(I+="",v);return O.toString=function(){return I},O},parse:function(I){var O=E(I+="",!1);return O.toString=function(){return I},O},utcFormat:function(I){var O=D(I+="",S);return O.toString=function(){return I},O},utcParse:function(I){var O=E(I+="",!0);return O.toString=function(){return I},O}}}var Dd={"-":"",_:" ",0:"0"},bt=/^\s*\d+/,T1=/^%/,I1=/[\\^$*+?|[\]().{}]/g;function $(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(e)+i:i)}function M1(t){return t.replace(I1,"\\$&")}function Li(t){return new RegExp("^(?:"+t.map(M1).join("|")+")","i")}function ki(t){for(var e={},r=-1,n=t.length;++r<n;)e[t[r].toLowerCase()]=r;return e}function D1(t,e,r){var n=bt.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function R1(t,e,r){var n=bt.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function N1(t,e,r){var n=bt.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function L1(t,e,r){var n=bt.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function k1(t,e,r){var n=bt.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function Rd(t,e,r){var n=bt.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Nd(t,e,r){var n=bt.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function O1(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function P1(t,e,r){var n=bt.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function F1(t,e,r){var n=bt.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Ld(t,e,r){var n=bt.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function B1(t,e,r){var n=bt.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function kd(t,e,r){var n=bt.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function U1(t,e,r){var n=bt.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function H1(t,e,r){var n=bt.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function V1(t,e,r){var n=bt.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function z1(t,e,r){var n=bt.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function G1(t,e,r){var n=T1.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Y1(t,e,r){var n=bt.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function $1(t,e,r){var n=bt.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Od(t,e){return $(t.getDate(),e,2)}function q1(t,e){return $(t.getHours(),e,2)}function X1(t,e){return $(t.getHours()%12||12,e,2)}function j1(t,e){return $(1+sr.count(oe(t),t),e,3)}function Hd(t,e){return $(t.getMilliseconds(),e,3)}function W1(t,e){return Hd(t,e)+"000"}function K1(t,e){return $(t.getMonth()+1,e,2)}function Q1(t,e){return $(t.getMinutes(),e,2)}function Z1(t,e){return $(t.getSeconds(),e,2)}function J1(t){var e=t.getDay();return e===0?7:e}function tb(t,e){return $(Pr.count(oe(t)-1,t),e,2)}function Vd(t){var e=t.getDay();return e>=4||e===0?ar(t):ar.ceil(t)}function eb(t,e){return t=Vd(t),$(ar.count(oe(t),t)+(oe(t).getDay()===4),e,2)}function rb(t){return t.getDay()}function nb(t,e){return $(Sn.count(oe(t)-1,t),e,2)}function ib(t,e){return $(t.getFullYear()%100,e,2)}function ob(t,e){return t=Vd(t),$(t.getFullYear()%100,e,2)}function sb(t,e){return $(t.getFullYear()%1e4,e,4)}function ab(t,e){var r=t.getDay();return t=r>=4||r===0?ar(t):ar.ceil(t),$(t.getFullYear()%1e4,e,4)}function ub(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$(e/60|0,"0",2)+$(e%60,"0",2)}function Pd(t,e){return $(t.getUTCDate(),e,2)}function lb(t,e){return $(t.getUTCHours(),e,2)}function cb(t,e){return $(t.getUTCHours()%12||12,e,2)}function fb(t,e){return $(1+ys.count(Br(t),t),e,3)}function zd(t,e){return $(t.getUTCMilliseconds(),e,3)}function hb(t,e){return zd(t,e)+"000"}function db(t,e){return $(t.getUTCMonth()+1,e,2)}function pb(t,e){return $(t.getUTCMinutes(),e,2)}function mb(t,e){return $(t.getUTCSeconds(),e,2)}function gb(t){var e=t.getUTCDay();return e===0?7:e}function xb(t,e){return $(Ri.count(Br(t)-1,t),e,2)}function Gd(t){var e=t.getUTCDay();return e>=4||e===0?ur(t):ur.ceil(t)}function vb(t,e){return t=Gd(t),$(ur.count(Br(t),t)+(Br(t).getUTCDay()===4),e,2)}function yb(t){return t.getUTCDay()}function bb(t,e){return $(En.count(Br(t)-1,t),e,2)}function _b(t,e){return $(t.getUTCFullYear()%100,e,2)}function wb(t,e){return t=Gd(t),$(t.getUTCFullYear()%100,e,2)}function Sb(t,e){return $(t.getUTCFullYear()%1e4,e,4)}function Eb(t,e){var r=t.getUTCDay();return t=r>=4||r===0?ur(t):ur.ceil(t),$(t.getUTCFullYear()%1e4,e,4)}function Cb(){return"+0000"}function Fd(){return"%"}function Bd(t){return+t}function Ud(t){return Math.floor(+t/1e3)}var Cn,bs,Yd,$d,qd;Ru({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ru(t){return Cn=Du(t),bs=Cn.format,Yd=Cn.parse,$d=Cn.utcFormat,qd=Cn.utcParse,Cn}var Oi=1e3,Pi=Oi*60,Fi=Pi*60,Bi=Fi*24,Ab=Bi*7,Xd=Bi*30,Nu=Bi*365;function Tb(t){return new Date(t)}function Ib(t){return t instanceof Date?+t:+new Date(+t)}function Lu(t,e,r,n,i,o,s,a,u){var l=Ti(Vt,Vt),c=l.invert,f=l.domain,h=u(".%L"),d=u(":%S"),g=u("%I:%M"),m=u("%I %p"),p=u("%a %d"),x=u("%b %d"),b=u("%B"),v=u("%Y"),S=[[s,1,Oi],[s,5,5*Oi],[s,15,15*Oi],[s,30,30*Oi],[o,1,Pi],[o,5,5*Pi],[o,15,15*Pi],[o,30,30*Pi],[i,1,Fi],[i,3,3*Fi],[i,6,6*Fi],[i,12,12*Fi],[n,1,Bi],[n,2,2*Bi],[r,1,Ab],[e,1,Xd],[e,3,3*Xd],[t,1,Nu]];function M(E){return(s(E)<E?h:o(E)<E?d:i(E)<E?g:n(E)<E?m:e(E)<E?r(E)<E?p:x:t(E)<E?b:v)(E)}function D(E,N,A,R){if(E==null&&(E=10),typeof E=="number"){var C=Math.abs(A-N)/E,_=ni(function(T){return T[2]}).right(S,C);_===S.length?(R=Le(N/Nu,A/Nu,E),E=t):_?(_=S[C/S[_-1][2]<S[_][2]/C?_-1:_],R=_[1],E=_[0]):(R=Math.max(Le(N,A,E),1),E=a)}return R==null?E:E.every(R)}return l.invert=function(E){return new Date(c(E))},l.domain=function(E){return arguments.length?f(Ci.call(E,Ib)):f().map(Tb)},l.ticks=function(E,N){var A=f(),R=A[0],C=A[A.length-1],_=C<R,T;return _&&(T=R,R=C,C=T),T=D(E,R,C,N),T=T?T.range(R,C+1):[],_?T.reverse():T},l.tickFormat=function(E,N){return N==null?M:u(N)},l.nice=function(E,N){var A=f();return(E=D(E,A[0],A[A.length-1],N))?f(_u(A,E)):l},l.copy=function(){return Nr(l,Lu(t,e,r,n,i,o,s,a,u))},l}function ku(){return Pt.apply(Lu(oe,Di,Pr,sr,Cu,Mi,vs,ms,bs).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ou(){this._=null}function An(t){t.U=t.C=t.L=t.R=t.P=t.N=null}Ou.prototype={constructor:Ou,insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=Wd(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)n=r.U,r===n.L?(i=n.R,i&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(Ui(this,r),t=r,r=t.U),r.C=!1,n.C=!0,Hi(this,n))):(i=n.L,i&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(Hi(this,r),t=r,r=t.U),r.C=!1,n.C=!0,Ui(this,n))),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,r,n=t.L,i=t.R,o,s;if(n?i?o=Wd(i):o=n:o=i,e?e.L===t?e.L=o:e.R=o:this._=o,n&&i?(s=o.C,o.C=t.C,o.L=n,n.U=o,o!==i?(e=o.U,o.U=t.U,t=o.R,e.L=t,o.R=i,i.U=o):(o.U=e,e=o,t=o.R)):(s=t.C,t=o),t&&(t.U=e),!s){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(r=e.R,r.C&&(r.C=!1,e.C=!0,Ui(this,e),r=e.R),r.L&&r.L.C||r.R&&r.R.C){(!r.R||!r.R.C)&&(r.L.C=!1,r.C=!0,Hi(this,r),r=e.R),r.C=e.C,e.C=r.R.C=!1,Ui(this,e),t=this._;break}}else if(r=e.L,r.C&&(r.C=!1,e.C=!0,Hi(this,e),r=e.L),r.L&&r.L.C||r.R&&r.R.C){(!r.L||!r.L.C)&&(r.R.C=!1,r.C=!0,Ui(this,r),r=e.L),r.C=e.C,e.C=r.L.C=!1,Hi(this,e),t=this._;break}r.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function Ui(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function Hi(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function Wd(t){for(;t.L;)t=t.L;return t}var Pu=Ou;function Tn(t,e,r,n){var i=[null,null],o=_t.push(i)-1;return i.left=t,i.right=e,r&&Vi(i,t,e,r),n&&Vi(i,e,t,n),Ft[t.index].halfedges.push(o),Ft[e.index].halfedges.push(o),i}function In(t,e,r){var n=[e,r];return n.left=t,n}function Vi(t,e,r,n){!t[0]&&!t[1]?(t[0]=n,t.left=e,t.right=r):t.left===r?t[1]=n:t[0]=n}function Nb(t,e,r,n,i){var o=t[0],s=t[1],a=o[0],u=o[1],l=s[0],c=s[1],f=0,h=1,d=l-a,g=c-u,m;if(m=e-a,!(!d&&m>0)){if(m/=d,d<0){if(m<f)return;m<h&&(h=m)}else if(d>0){if(m>h)return;m>f&&(f=m)}if(m=n-a,!(!d&&m<0)){if(m/=d,d<0){if(m>h)return;m>f&&(f=m)}else if(d>0){if(m<f)return;m<h&&(h=m)}if(m=r-u,!(!g&&m>0)){if(m/=g,g<0){if(m<f)return;m<h&&(h=m)}else if(g>0){if(m>h)return;m>f&&(f=m)}if(m=i-u,!(!g&&m<0)){if(m/=g,g<0){if(m>h)return;m>f&&(f=m)}else if(g>0){if(m<f)return;m<h&&(h=m)}return!(f>0)&&!(h<1)||(f>0&&(t[0]=[a+f*d,u+f*g]),h<1&&(t[1]=[a+h*d,u+h*g])),!0}}}}}function Lb(t,e,r,n,i){var o=t[1];if(o)return!0;var s=t[0],a=t.left,u=t.right,l=a[0],c=a[1],f=u[0],h=u[1],d=(l+f)/2,g=(c+h)/2,m,p;if(h===c){if(d<e||d>=n)return;if(l>f){if(!s)s=[d,r];else if(s[1]>=i)return;o=[d,i]}else{if(!s)s=[d,i];else if(s[1]<r)return;o=[d,r]}}else if(m=(l-f)/(h-c),p=g-m*d,m<-1||m>1)if(l>f){if(!s)s=[(r-p)/m,r];else if(s[1]>=i)return;o=[(i-p)/m,i]}else{if(!s)s=[(i-p)/m,i];else if(s[1]<r)return;o=[(r-p)/m,r]}else if(c<h){if(!s)s=[e,m*e+p];else if(s[0]>=n)return;o=[n,m*n+p]}else{if(!s)s=[n,m*n+p];else if(s[0]<e)return;o=[e,m*e+p]}return t[0]=s,t[1]=o,!0}function Kd(t,e,r,n){for(var i=_t.length,o;i--;)(!Lb(o=_t[i],t,e,r,n)||!Nb(o,t,e,r,n)||!(Math.abs(o[0][0]-o[1][0])>J||Math.abs(o[0][1]-o[1][1])>J))&&delete _t[i]}function Qd(t){return Ft[t.index]={site:t,halfedges:[]}}function kb(t,e){var r=t.site,n=e.left,i=e.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=e[1],i=e[0]):(n=e[0],i=e[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function Fu(t,e){return e[+(e.left!==t.site)]}function Ob(t,e){return e[+(e.left===t.site)]}function Zd(){for(var t=0,e=Ft.length,r,n,i,o;t<e;++t)if((r=Ft[t])&&(o=(n=r.halfedges).length)){var s=new Array(o),a=new Array(o);for(i=0;i<o;++i)s[i]=i,a[i]=kb(r,_t[n[i]]);for(s.sort(function(u,l){return a[l]-a[u]}),i=0;i<o;++i)a[i]=n[s[i]];for(i=0;i<o;++i)n[i]=a[i]}}function Jd(t,e,r,n){var i=Ft.length,o,s,a,u,l,c,f,h,d,g,m,p,x=!0;for(o=0;o<i;++o)if(s=Ft[o]){for(a=s.site,l=s.halfedges,u=l.length;u--;)_t[l[u]]||l.splice(u,1);for(u=0,c=l.length;u<c;)g=Ob(s,_t[l[u]]),m=g[0],p=g[1],f=Fu(s,_t[l[++u%c]]),h=f[0],d=f[1],(Math.abs(m-h)>J||Math.abs(p-d)>J)&&(l.splice(u,0,_t.push(In(a,g,Math.abs(m-t)<J&&n-p>J?[t,Math.abs(h-t)<J?d:n]:Math.abs(p-n)<J&&r-m>J?[Math.abs(d-n)<J?h:r,n]:Math.abs(m-r)<J&&p-e>J?[r,Math.abs(h-r)<J?d:e]:Math.abs(p-e)<J&&m-t>J?[Math.abs(d-e)<J?h:t,e]:null))-1),++c);c&&(x=!1)}if(x){var b,v,S,M=1/0;for(o=0,x=null;o<i;++o)(s=Ft[o])&&(a=s.site,b=a[0]-t,v=a[1]-e,S=b*b+v*v,S<M&&(M=S,x=s));if(x){var D=[t,e],E=[t,n],N=[r,n],A=[r,e];x.halfedges.push(_t.push(In(a=x.site,D,E))-1,_t.push(In(a,E,N))-1,_t.push(In(a,N,A))-1,_t.push(In(a,A,D))-1)}}for(o=0;o<i;++o)(s=Ft[o])&&(s.halfedges.length||delete Ft[o])}var tp=[],_s;function Pb(){An(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ur(t){var e=t.P,r=t.N;if(!(!e||!r)){var n=e.site,i=t.site,o=r.site;if(n!==o){var s=i[0],a=i[1],u=n[0]-s,l=n[1]-a,c=o[0]-s,f=o[1]-a,h=2*(u*f-l*c);if(!(h>=-ep)){var d=u*u+l*l,g=c*c+f*f,m=(f*d-l*g)/h,p=(u*g-c*d)/h,x=tp.pop()||new Pb;x.arc=t,x.site=i,x.x=m+s,x.y=(x.cy=p+a)+Math.sqrt(m*m+p*p),t.circle=x;for(var b=null,v=Mn._;v;)if(x.y<v.y||x.y===v.y&&x.x<=v.x)if(v.L)v=v.L;else{b=v.P;break}else if(v.R)v=v.R;else{b=v;break}Mn.insert(b,x),b||(_s=x)}}}}function Hr(t){var e=t.circle;e&&(e.P||(_s=e.N),Mn.remove(e),tp.push(e),An(e),t.circle=null)}var np=[];function Fb(){An(this),this.edge=this.site=this.circle=null}function rp(t){var e=np.pop()||new Fb;return e.site=t,e}function Bu(t){Hr(t),Vr.remove(t),np.push(t),An(t)}function ip(t){var e=t.circle,r=e.x,n=e.cy,i=[r,n],o=t.P,s=t.N,a=[t];Bu(t);for(var u=o;u.circle&&Math.abs(r-u.circle.x)<J&&Math.abs(n-u.circle.cy)<J;)o=u.P,a.unshift(u),Bu(u),u=o;a.unshift(u),Hr(u);for(var l=s;l.circle&&Math.abs(r-l.circle.x)<J&&Math.abs(n-l.circle.cy)<J;)s=l.N,a.push(l),Bu(l),l=s;a.push(l),Hr(l);var c=a.length,f;for(f=1;f<c;++f)l=a[f],u=a[f-1],Vi(l.edge,u.site,l.site,i);u=a[0],l=a[c-1],l.edge=Tn(u.site,l.site,null,i),Ur(u),Ur(l)}function op(t){for(var e=t[0],r=t[1],n,i,o,s,a=Vr._;a;)if(o=sp(a,r)-e,o>J)a=a.L;else if(s=e-Bb(a,r),s>J){if(!a.R){n=a;break}a=a.R}else{o>-J?(n=a.P,i=a):s>-J?(n=a,i=a.N):n=i=a;break}Qd(t);var u=rp(t);if(Vr.insert(n,u),!(!n&&!i)){if(n===i){Hr(n),i=rp(n.site),Vr.insert(u,i),u.edge=i.edge=Tn(n.site,u.site),Ur(n),Ur(i);return}if(!i){u.edge=Tn(n.site,u.site);return}Hr(n),Hr(i);var l=n.site,c=l[0],f=l[1],h=t[0]-c,d=t[1]-f,g=i.site,m=g[0]-c,p=g[1]-f,x=2*(h*p-d*m),b=h*h+d*d,v=m*m+p*p,S=[(p*b-d*v)/x+c,(h*v-m*b)/x+f];Vi(i.edge,l,g,S),u.edge=Tn(l,t,null,S),i.edge=Tn(t,g,null,S),Ur(n),Ur(i)}}function sp(t,e){var r=t.site,n=r[0],i=r[1],o=i-e;if(!o)return n;var s=t.P;if(!s)return-1/0;r=s.site;var a=r[0],u=r[1],l=u-e;if(!l)return a;var c=a-n,f=1/o-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-u+l/2+i-o/2)))/f+n:(n+a)/2}function Bb(t,e){var r=t.N;if(r)return sp(r,e);var n=t.site;return n[1]===e?n[0]:1/0}var J=1e-6,ep=1e-12,Vr,Ft,Mn,_t;function Ub(t,e,r){return(t[0]-r[0])*(e[1]-t[1])-(t[0]-e[0])*(r[1]-t[1])}function Hb(t,e){return e[1]-t[1]||e[0]-t[0]}function ws(t,e){var r=t.sort(Hb).pop(),n,i,o;for(_t=[],Ft=new Array(t.length),Vr=new Pu,Mn=new Pu;;)if(o=_s,r&&(!o||r[1]<o.y||r[1]===o.y&&r[0]<o.x))(r[0]!==n||r[1]!==i)&&(op(r),n=r[0],i=r[1]),r=t.pop();else if(o)ip(o.arc);else break;if(Zd(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];Kd(s,a,u,l),Jd(s,a,u,l)}this.edges=_t,this.cells=Ft,Vr=Mn=_t=Ft=null}ws.prototype={constructor:ws,polygons:function(){var t=this.edges;return this.cells.map(function(e){var r=e.halfedges.map(function(n){return Fu(e,t[n])});return r.data=e.site.data,r})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(r,n){if(a=(o=r.halfedges).length)for(var i=r.site,o,s=-1,a,u,l=e[o[a-1]],c=l.left===i?l.right:l.left;++s<a;)u=c,l=e[o[s]],c=l.left===i?l.right:l.left,u&&c&&n<u.index&&n<c.index&&Ub(i,u,c)<0&&t.push([i.data,u.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,r){for(var n=this,i,o=n._found||0,s=n.cells.length,a;!(a=n.cells[o]);)if(++o>=s)return null;var u=t-a.site[0],l=e-a.site[1],c=u*u+l*l;do a=n.cells[i=o],o=null,a.halfedges.forEach(function(f){var h=n.edges[f],d=h.left;if(!((d===a.site||!d)&&!(d=h.right))){var g=t-d[0],m=e-d[1],p=g*g+m*m;p<c&&(c=p,o=d.index)}});while(o!==null);return n._found=i,r==null||c<=r*r?a.site:null}};function zr(t,e,r){this.k=t,this.x=e,this.y=r}zr.prototype={constructor:zr,scale:function(t){return t===1?this:new zr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new zr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Uu=new zr(1,0,0);Hu.prototype=zr.prototype;function Hu(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Uu;return t.__zoom}var cp=y(Ht()),fp=y(te()),hp=y(Ax());var se=[0,0],ap=[0,1];function up(t){return!!t.domainWithTicks}function we(t){return typeof t.bandwidth=="function"}function lp(t){return typeof t.innerScale<"u"}var lr=class t{config;static DEFAULT_CONFIG={stateStyles:{[U.default]:{opacity:1},[U.hidden]:{opacity:0},[U.deemphasized]:{opacity:.1},[U.emphasized]:{opacity:1}}};constructor(e={}){this.config=e,this.config=(0,cp.default)(this.config,t.DEFAULT_CONFIG)}interaction={};getDataPointIndex(e,r,n){return Xt}highlightDataPoint(e,r,n){}getContainerStateStyles=e=>{if(!this.config.stateStyles)throw new Error("stateStyles property is not defined");return this.config.stateStyles[e||U.default]};setSeriesState(e,r){}setDataPointState(e,r){}getDomainOfFilteredData(e,r,n,i){let o=e.data;for(let s of Object.keys(r)){let a=r[s];!a.isDomainFixed||!a.isContinuous()||(o=this.filterDataByDomain(o,e,s,a.domain()))}return this.getDomain(o,e,n,i)}getDomain(e,r,n,i){return!e||e.length===0?se:ii(e,(o,s,a)=>r.accessors.data?.[n]?.(o,s,Array.from(a),r))}filterDataByDomain(e,r,n,i){let o=r.accessors.data?.[n];return e.filter((s,a)=>{let u=o(s,a,e,r);return u>=i[0]&&u<=i[1]})}getRequiredLayers(){return[ut[k.data]]}setupInteraction(e,r,n,i,o){let s=(0,hp.default)(this.interaction,e,{})[r];s&&(0,fp.default)(s,a=>{n.on(r,()=>{let u=n.node().getBoundingClientRect();i.next({eventName:a,data:K(q({},o),{position:u})})})})}};var Vb={annularWidth:20,annularPadding:5,maxThickness:30,annularGrowth:.15,cursor:"default",enableSeriesHighlighting:!0,enableDataPointHighlighting:!0},Se=class extends lr{config;segmentWidth;constructor(e={}){super(e),this.config=e,this.config=(0,dp.default)(this.config,Vb)}draw(e,r){let n=e.containers[k.data],i=e.dataSeries.data,o=e.dataSeries.accessors,s=(u,l)=>this.getArc(e.scales.r.range(),Je(),l)(u);this.segmentWidth=this.getSegmentWidth(e);let a=n.selectAll("path.arc").data(i);a.exit().remove(),a.enter().append("path").attr("class","arc pointer-events nui-chart--path__outline").style("stroke-width",this.config.strokeWidth).style("cursor",this.config.cursor).on("mouseenter",(u,l)=>{this.emitDataPointHighlight(e,u,l,r)}).on("mouseleave",(u,l)=>{this.emitDataPointHighlight(e,null,Xt,r)}).on("click",(u,l)=>{r.next({eventName:mo,data:{seriesId:e.dataSeries.id,index:l,data:u.data,position:this.getDataPointPosition(e.dataSeries,l,e.scales)}})}).merge(a).attr("d",s).attr("fill",(u,l)=>o.data.color?o.data.color(u.data,l,i,e.dataSeries):o.series.color?.(e.dataSeries.id,e.dataSeries))}getDataPointPosition(e,r,n){if(r<0)return;let i=e.data[r],s=this.getArc(n.r.range(),Je(),r).centroid(i);return{x:s[0],y:s[1],width:0,height:0}}getInnerRadius(e,r){if((0,zi.default)(this.segmentWidth)||(0,zi.default)(this.config.annularPadding))throw new Error("Can't compute inner radius");let n=e[1]-e[0]-this.segmentWidth-r*(this.config.annularPadding+this.segmentWidth);return n>=0?n:0}getOuterRadius(e,r){if((0,zi.default)(this.segmentWidth)||(0,zi.default)(this.config.annularPadding))throw new Error("Can't compute outer radius");let n=e[1]-e[0]-r*(this.config.annularPadding+this.segmentWidth);return n>=0?n:0}getArc(e,r,n){let i=this.getInnerRadius(e,n);return r.outerRadius(this.getOuterRadius(e,n)).innerRadius(i)}getSegmentWidth(e){return this.config.maxThickness&&this.config.annularGrowth?Math.min((e.scales.r.range()[1]-e.scales.r.range()[0])*this.config.annularGrowth,this.config.maxThickness):this.config.annularWidth}emitDataPointHighlight(e,r,n,i){let o=this.getDataPointPosition(e.dataSeries,n,e.scales),s={seriesId:e.dataSeries.id,dataSeries:e.dataSeries,index:n,data:r,position:o};this.config.enableSeriesHighlighting&&i.next({eventName:De,data:s}),this.config.enableDataPointHighlighting&&i.next({eventName:Qn,data:s}),i.next({eventName:Nt,data:{interactionType:F.MouseMove,dataPoints:{[e.dataSeries.id]:s}}})}};var Vu=y(ct());var lt=class{constructor(){}chart;initialize(){}update(){}updateDimensions(){}destroy(){}};var pp=class extends lt{contentPositionUpdateSubject=new B;contentPosition={top:0,left:0,width:0,height:0};updateDimensions(){let e=this.chart.getDataManager().chartSeriesSet.reduce((r,n)=>n.renderer instanceof Se&&!(0,Vu.default)(r)?Math.min(r,n.renderer.getInnerRadius(n.scales.r.range(),n.data.length-1)):r,1/0);if((0,Vu.default)(e))throw new Error("Radius is undefined");this.contentPosition=this.getContentPosition(e),this.contentPositionUpdateSubject.next(this.contentPosition)}destroy(){this.contentPositionUpdateSubject.complete()}getContentPosition(e){let r=[this.chart.getGrid().config().dimension.outerHeight()/2,this.chart.getGrid().config().dimension.outerWidth()/2];return{top:r[0]-e/Math.sqrt(2),left:r[1]-e/Math.sqrt(2),width:e*Math.sqrt(2),height:e*Math.sqrt(2)}}};var zb=["*"];function Gb(t,e){if(t&1&&(Q(0,"div",1),It(1),Z()),t&2){let r=xt();Ye("top",r.contentPosition.top,"px")("left",r.contentPosition.left,"px")("height",r.contentPosition.height,"px")("width",r.contentPosition.width,"px")}}var Yb=(()=>{class t{plugin;contentPosition;contentPositionUpdateSubscription;ngOnChanges(r){r.plugin&&(this.contentPositionUpdateSubscription?.unsubscribe(),this.contentPositionUpdateSubscription=this.plugin.contentPositionUpdateSubject.subscribe(n=>{this.contentPosition=n}),this.plugin.chart.updateDimensions())}ngOnDestroy(){this.contentPositionUpdateSubscription&&this.contentPositionUpdateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=mt({type:t,selectors:[["nui-chart-donut-content"]],inputs:{plugin:"plugin"},features:[Bt],ngContentSelectors:zb,decls:1,vars:1,consts:[["class","nui-chart-donut-content d-flex justify-content-center align-items-center text-center",3,"top","left","height","width",4,"ngIf"],[1,"nui-chart-donut-content","d-flex","justify-content-center","align-items-center","text-center"]],template:function(n,i){n&1&&(fe(),gt(0,Gb,2,8,"div",0)),n&2&&nt("ngIf",i.plugin&&i.contentPosition)},dependencies:[pe],styles:[".nui-chart-donut-content[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;width:100%;height:100%;overflow:hidden;text-overflow:ellipsis}"]})}return t})();var gp=y(te()),xp=y(zu()),vp=y(un());var Kb=10,Qb=t=>[{originX:"end",originY:"top",overlayX:"start",overlayY:"center",offsetX:t},{originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:-t}],Zb=t=>[{originX:"end",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-t},{originX:"end",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:t}],Dn=class extends lt{tooltipPositionOffset;orientation;dataPoints;dataPointPositions={};showSubject=new B;hideSubject=new B;overlaySetup;isChartInView=!1;destroy$=new B;seriesVisibilityMap={};constructor(e=Kb,r="right"){super(),this.tooltipPositionOffset=e,this.orientation=r,r==="right"?this.overlaySetup=Qb(e):r==="top"&&(this.overlaySetup=Zb(e))}initialize(){this.chart.getEventBus().getStream(Nt).pipe(P(this.destroy$)).subscribe(e=>{if(e.data.interactionType===F.MouseMove&&this.isChartInView){let r=e.data.dataPoints;this.processHighlightedDataPoints(r)}}),this.chart.getEventBus().getStream(ln).pipe(P(this.destroy$)).subscribe(e=>{e.data.forEach(r=>{this.seriesVisibilityMap[r.seriesId]=r.state!==U.hidden})}),this.chart.getEventBus().getStream(xe).pipe(P(this.destroy$)).subscribe(e=>{this.isChartInView=e.data.isChartInView,this.isChartInView||this.hideSubject.next()})}destroy(){this.destroy$.next(),this.destroy$.complete()}processHighlightedDataPoints(e){let r=(0,xp.default)(e,a=>a.index>=0&&a.position&&this.seriesVisibilityMap[a.seriesId]!==!1);if((0,vp.default)(r).length===0){this.hideSubject.next();return}this.dataPoints=r;let n=this.chart.target?.node()?.parentNode;if(!n)throw new Error("Chart parent node is not defined");let i=n.getBoundingClientRect(),o=n.offsetParent.getBoundingClientRect(),s={x:i.left-o.left,y:i.top-o.top};(0,gp.default)(Object.keys(this.dataPoints),a=>{let u=this.dataPoints[a],l=this.chart.getDataManager().getChartSeries(u.seriesId),c=this.getTooltipPosition(u,l);this.dataPointPositions[a]=this.getAbsolutePosition(c,s)}),this.showSubject.next()}getTooltipPosition(e,r){if(!e.position)throw new Error("Unable to get tooltip position");return{x:e.position.x,y:e.position.y,height:e.position?.height||1,width:e.position?.width||1,overlayPositions:this.overlaySetup}}getAbsolutePosition(e,r){return Object.assign({},e,{x:r.x+this.chart.getGrid().config().dimension.margin.left+e.x,y:r.y+this.chart.getGrid().config().dimension.margin.top+e.y})}};var yp=y(te()),bp=y(aa()),Yu=y(lo());function Jb(t,e){t&1&&nn(0)}var Gu=(()=>{class t{template;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=mt({type:t,selectors:[["nui-chart-tooltip"]],inputs:{template:"template"},decls:3,vars:2,consts:[[1,"nui-chart-tooltip","px-2","py-1","nui-text-small"],[4,"ngTemplateOutlet"]],template:function(n,i){n&1&&(Q(0,"div")(1,"div",0),gt(2,Jb,1,0,"ng-container",1),Z()()),n&2&&(ht(),nt("@tooltip",void 0),ht(),nt("ngTemplateOutlet",i.template))},dependencies:[an],styles:["[_nghost-%COMP%]{display:block;pointer-events:none}.nui-chart-tooltip[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-inverse,#111);color:var(--nui-color-text-inverse,#fff);line-height:normal}"],data:{animation:[Yl("tooltip",[ha(":enter",[ho({opacity:0}),fa(300,ho({opacity:1}))]),ha(":leave",[fa(300,ho({opacity:0}))])])]},changeDetection:0})}return t})();var Yi=(()=>{class t{overlay;overlayPositionBuilder;scrollStrategyOptions;elementRef;template;openRemoteControl;closeRemoteControl;positions;overlayRef;openSubscription;closeSubscription;positionStrategy;constructor(r,n,i,o){this.overlay=r,this.overlayPositionBuilder=n,this.scrollStrategyOptions=i,this.elementRef=o}ngOnInit(){this.positionStrategy=this.overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withPositions(this.positions).withFlexibleDimensions(!1).withPush(!0),this.overlayRef=this.overlay.create({panelClass:"nui-chart-tooltip-pane",positionStrategy:this.positionStrategy,scrollStrategy:this.scrollStrategyOptions.close()}),this.openRemoteControl&&(this.openSubscription=this.openRemoteControl.subscribe(()=>{this.show()})),this.closeRemoteControl&&(this.closeSubscription=this.closeRemoteControl.subscribe(()=>{this.hide()}))}show(){if(this.overlayRef.hasAttached()){this.positionStrategy.apply();return}let r=this.overlayRef.attach(new ql(Gu));r.instance.template=this.template}hide(){this.overlayRef.detach()}ngOnDestroy(){this.hide(),this.openSubscription&&this.openSubscription.unsubscribe(),this.closeSubscription&&this.closeSubscription.unsubscribe()}getOverlayElement(){return this.overlayRef.overlayElement}static \u0275fac=function(n){return new(n||t)(it(Wl),it(jl),it(Xl),it(en))};static \u0275dir=ao({type:t,selectors:[["","nuiChartTooltip",""]],inputs:{template:"template",openRemoteControl:"openRemoteControl",closeRemoteControl:"closeRemoteControl",positions:"positions"}})}return t})();var e_=t=>({dataPoint:t});function r_(t,e){t&1&&nn(0)}function n_(t,e){if(t&1&&gt(0,r_,1,0,"ng-container",4),t&2){let r=xt().$implicit,n=xt(2);nt("ngTemplateOutlet",n.template)("ngTemplateOutletContext",Ke(2,e_,r.value))}}function i_(t,e){if(t&1&&qe(0,"div",5),t&2){let r=xt().$implicit,n=he(2),i=xt(2);Ye("left",i.plugin.dataPointPositions[r.key].x,"px")("top",i.plugin.dataPointPositions[r.key].y,"px")("height",i.plugin.dataPointPositions[r.key].height,"px")("width",i.plugin.dataPointPositions[r.key].width,"px"),nt("template",n)("openRemoteControl",i.openTooltips)("closeRemoteControl",i.closeTooltips)("positions",i.plugin.dataPointPositions[r.key].overlayPositions),uo("series-id",r.key)}}function o_(t,e){if(t&1&&(Q(0,"div"),gt(1,n_,1,4,"ng-template",null,0,Me)(3,i_,1,13,"div",3),Z()),t&2){let r=e.$implicit,n=xt(2);ht(3),nt("ngIf",n.plugin.dataPointPositions[r.key])}}function s_(t,e){if(t&1&&(Q(0,"div"),gt(1,o_,4,1,"div",2),Ll(2,"keyvalue"),Z()),t&2){let r=xt();ht(),nt("ngForOf",kl(2,2,r.plugin.dataPoints))("ngForTrackBy",r.trackByFn)}}var a_=(()=>{class t{changeDetector;plugin;template;tooltips;openTooltips=new B;closeTooltips=new B;unsubscribe$=new B;simulation;tooltipDirectivesIndex={};closePending=!1;isOpen=!1;openTimeout;collisionTimeout;closeTimeout;constructor(r){this.changeDetector=r}ngOnChanges(r){r.plugin&&r.plugin.currentValue&&(this.unsubscribe$.next(),this.plugin.showSubject.pipe(P(this.unsubscribe$)).subscribe(()=>this.handleOpen()),this.plugin.hideSubject.pipe(P(this.unsubscribe$)).subscribe(()=>this.handleClose()))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}trackByFn(r,n){return n.value.seriesId}handleOpen(){this.changeDetector.detectChanges();let r={};this.tooltips.forEach(i=>{let o=i.elementRef.nativeElement.getAttribute("series-id")??void 0;if(!o)throw new Error("SeriesId is not defined");r[o]=i});let n=!(0,bp.default)(r,this.tooltipDirectivesIndex);this.closePending||n||!this.isOpen?(clearTimeout(this.openTimeout),this.openTimeout=window.setTimeout(()=>{this.openTooltips.next(),clearTimeout(this.collisionTimeout),this.collisionTimeout=window.setTimeout(()=>{this.avoidTooltipCollisions(),this.isOpen=!0})})):(this.openTooltips.next(),this.avoidTooltipCollisions(),this.isOpen=!0)}handleClose(){this.simulation&&this.simulation.stop(),this.closePending=!0,clearTimeout(this.closeTimeout),this.closeTimeout=window.setTimeout(()=>{this.closeTooltips.next(),this.closePending=!1,this.isOpen=!1})}avoidTooltipCollisions(){let r={};this.tooltips.forEach(n=>{let i=n.getOverlayElement(),o=n.elementRef.nativeElement.getAttribute("series-id")??void 0;if(!o)throw new Error("SeriesId is not defined");this.tooltipDirectivesIndex[o]=n,r[o]={x:i.offsetLeft,y:i.offsetTop,width:i.clientWidth,height:i.clientHeight}}),this.simulation&&this.simulation.stop(),this.simulation=this.startSimulation(this.tooltipDirectivesIndex,r)}startSimulation(r,n){let i=Object.keys(n).map(a=>{let u=n[a];if((0,Yu.default)(u.height)||(0,Yu.default)(u.width))throw new Error("Position height or width are not defined");let l={seriesId:a,x:u.x,y:u.y,radius:this.isVertical()?u.height/2:u.width/2};return this.isVertical()?l.fx=u.x:l.fy=u.y,l}),o=iu(a=>a.radius).strength(.5).iterations(20),s=ou(i).alphaDecay(.3).force("collisionForce",o);return s.on("tick",()=>{(0,yp.default)(i,a=>{let u=r[a.seriesId];H(u.getOverlayElement()).style(this.isVertical()?"top":"left",(this.isVertical()?a.y:a.x)+"px")})}),s}isVertical(){return this.plugin.orientation==="right"}static \u0275fac=function(n){return new(n||t)(it(de))};static \u0275cmp=mt({type:t,selectors:[["nui-chart-tooltips"]],viewQuery:function(n,i){if(n&1&&Xe(Yi,5),n&2){let o;je(o=We())&&(i.tooltips=o)}},inputs:{plugin:"plugin",template:"template"},features:[Bt],decls:1,vars:1,consts:[["tooltipTemplate",""],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["nuiChartTooltip","","class","chart-tooltips__popover",3,"template","openRemoteControl","closeRemoteControl","positions","left","top","height","width",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["nuiChartTooltip","",1,"chart-tooltips__popover",3,"template","openRemoteControl","closeRemoteControl","positions"]],template:function(n,i){n&1&&gt(0,s_,3,4,"div",1),n&2&&nt("ngIf",i.plugin&&i.plugin.dataPoints)},dependencies:[Pl,pe,an,Yi,Bl],styles:[".chart-tooltips__popover[_ngcontent-%COMP%]{position:absolute;pointer-events:none}"]})}return t})();var _p=y(Ht()),wp=y(zu()),Sp=y(un());var Ss=class extends lt{config;dataPoints;updatePositionSubject=new B;openPopoverSubject=new B;closePopoverSubject=new B;popoverTargetPosition={top:0,left:0,width:0,height:0};DEFAULT_CONFIG={eventStreamId:Nt,interactionType:F.MouseMove};isOpen=!1;destroy$=new B;constructor(e={}){super(),this.config=e,this.config=(0,_p.default)(this.config,this.DEFAULT_CONFIG)}initialize(){this.chart.getEventBus().getStream(this.config.eventStreamId).pipe(P(this.destroy$)).subscribe(e=>{if(e.data.interactionType===this.config.interactionType){let r=e.data.dataPoints??{[e.data.dataPoint.seriesId]:e.data.dataPoint};this.processDataPoints(r)}})}destroy(){this.updatePositionSubject&&this.updatePositionSubject.complete(),this.openPopoverSubject&&this.openPopoverSubject.complete(),this.closePopoverSubject&&this.closePopoverSubject.complete(),this.destroy$&&(this.destroy$.next(),this.destroy$.complete())}getAbsolutePosition(e){let r=this.chart.target?.node()?.parentNode;if(!r)throw new Error("Chart parent node is not defined");let n=Math.min(...e.map(s=>s.position.x)),i=r.offsetLeft+this.chart.getGrid().config().dimension.margin.left+n;return{top:r.offsetTop+this.chart.getGrid().config().dimension.margin.top,left:i,height:r.offsetHeight,width:Math.max(...e.map(s=>s.position.x+(s.position.width||0)))-n}}processDataPoints(e){let r=(0,wp.default)(e,i=>i.index>=0&&i.position),n=(0,Sp.default)(r);n.length>0?(this.popoverTargetPosition=this.getAbsolutePosition(n),this.dataPoints=r,setTimeout(()=>{this.updatePositionSubject.next(this.popoverTargetPosition),this.isOpen||(this.isOpen=!0,this.openPopoverSubject.next())})):setTimeout(()=>{this.closePopoverSubject.next(),this.isOpen=!1})}};var l_=t=>({dataPoints:t});function c_(t,e){t&1&&nn(0)}function f_(t,e){if(t&1&&gt(0,c_,1,0,"ng-container",3),t&2){let r=xt(2);nt("ngTemplateOutlet",r.template)("ngTemplateOutletContext",Ke(2,l_,r.plugin.dataPoints))}}function h_(t,e){if(t&1&&(Q(0,"div"),qe(1,"nui-popover",2),gt(2,f_,1,4,"ng-template",null,0,Me),Z()),t&2){let r=he(3),n=xt();ht(),Ye("height",n.plugin.popoverTargetPosition.height,"px"),nt("unlimited",!0)("template",r)("openPopover",n.plugin.openPopoverSubject)("closePopover",n.plugin.closePopoverSubject)("hasPadding",!1)("container",n.element.nativeElement)("withGrowAfterOpen",!0)}}var d_=(()=>{class t{changeDetector;element;plugin;template;update=new rn;popover;destroy$=new B;initPlugin$=new B;constructor(r,n){this.changeDetector=r,this.element=n}ngOnChanges(r){r.plugin&&!r.plugin.isFirstChange()&&this.initPlugin()}ngOnInit(){this.initPlugin()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.initPlugin$.complete()}initPlugin(){this.initPlugin$.next(),this.plugin?.openPopoverSubject.pipe(P(this.initPlugin$),P(this.destroy$)).subscribe(()=>{this.changeDetector.markForCheck()}),this.plugin?.updatePositionSubject.pipe(P(this.initPlugin$),P(this.destroy$)).subscribe(r=>{this.popover?.resetSize();let n=r.width/2;this.element.nativeElement.style.left=r.left+n+"px",this.element.nativeElement.style.top=r.top+"px",this.popover?.updatePosition(),this.update.next(this.plugin?.dataPoints)})}static \u0275fac=function(n){return new(n||t)(it(de),it(en))};static \u0275cmp=mt({type:t,selectors:[["nui-chart-popover"]],viewQuery:function(n,i){if(n&1&&Xe(po,5),n&2){let o;je(o=We())&&(i.popover=o.first)}},inputs:{plugin:"plugin",template:"template"},outputs:{update:"update"},features:[Bt],decls:1,vars:1,consts:[["popoverTemplate",""],[4,"ngIf"],["trigger","openPopoverSubject","placement","top",1,"chart-popover__popover",3,"unlimited","template","openPopover","closePopover","hasPadding","container","withGrowAfterOpen"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,i){n&1&&gt(0,h_,4,9,"div",1),n&2&&nt("ngIf",i.plugin&&i.plugin.dataPoints)},dependencies:[pe,an,po],styles:["[_nghost-%COMP%]{position:absolute}.chart-popover__popover[_ngcontent-%COMP%]{position:absolute;pointer-events:none}"]})}return t})();var Ep=y(Ul());var p_=["svgContent"],Rn=3,m_=(()=>{class t{changeDetector;marker;drawLine;color;maxSize=20;svgContent;viewBox;height="10px";width="10px";svg=new Ge("");constructor(r){this.changeDetector=r}ngAfterViewInit(){this.svg.subscribe(r=>{this.renderMarkerSvg(r)})}ngOnChanges(r){(r.marker||r.color)&&(r.color&&this.marker.setColor(this.color),this.marker&&this.marker.getSvg&&(0,Ep.default)(this.marker.getSvg)&&this.svg.next(this.marker.getSvg()))}ngOnDestroy(){this.svg.complete()}renderMarkerSvg(r){let n=this.svgContent.nativeElement,i=`<line x1="-10" y1="0" x2="10" y2="0" style="stroke:${this.color};stroke-width:2" />`;n.innerHTML="",this.drawLine&&n.insertAdjacentHTML("beforeend",i),n.insertAdjacentHTML("beforeend",r),setTimeout(()=>{let o=n.getBBox();this.viewBox=`${o.x-Rn} ${o.y-Rn} ${o.width+2*Rn} ${o.height+2*Rn}`,this.width=Math.min(o.width+2*Rn,this.maxSize)+"px",this.height=Math.min(o.height+2*Rn,this.maxSize)+"px",this.changeDetector.markForCheck()})}static \u0275fac=function(n){return new(n||t)(it(de))};static \u0275cmp=mt({type:t,selectors:[["nui-chart-marker"]],viewQuery:function(n,i){if(n&1&&Xe(p_,5),n&2){let o;je(o=We())&&(i.svgContent=o.first)}},inputs:{marker:"marker",drawLine:"drawLine",color:"color",maxSize:"maxSize"},features:[Bt],decls:3,vars:3,consts:[["svgContent",""]],template:function(n,i){n&1&&(Ml(),Q(0,"svg"),qe(1,"g",null,0),Z()),n&2&&uo("width",i.width)("height",i.height)("viewBox",i.viewBox)},styles:["[_nghost-%COMP%]{font-size:0}"]})}return t})();var Cp=y(Gl());var $3=(()=>{class t{elRef;ngZone;cd;chart;resizeObserver;resizeHandler;intersectionObserver;constructor(r,n,i){this.elRef=r,this.ngZone=n,this.cd=i}ngOnInit(){this.intersectionObserver=new IntersectionObserver(this.intersectionObserverCallback),this.intersectionObserver.observe(this.elRef.nativeElement)}ngOnChanges(r){if(r.chart){let n=r.chart.previousValue;n&&n.destroy(),this.chart&&(this.chart.build(this.elRef.nativeElement),this.redraw())}}ngAfterContentInit(){this.chart.getEventBus().getStream(xo).subscribe(()=>{this.chart.updateDimensions()})}ngAfterViewInit(){this.resizeHandler=(0,Cp.default)(()=>this.redraw(),10),this.resizeObserver=new ResizeObserver(()=>{this.ngZone.run(()=>this.resizeHandler())}),this.ngZone.runOutsideAngular(()=>this.resizeObserver?.observe(this.elRef.nativeElement))}ngOnDestroy(){this.intersectionObserver?.unobserve(this.elRef.nativeElement),this.resizeObserver?.unobserve(this.elRef.nativeElement),this.chart?.destroy()}redraw=()=>{this.chart.updateDimensions(),this.cd.detectChanges()};intersectionObserverCallback=r=>{let n={isChartInView:r[0].isIntersecting};this.chart.getEventBus().getStream(xe).next({data:n})};static \u0275fac=function(n){return new(n||t)(it(en),it(Dl),it(de))};static \u0275cmp=mt({type:t,selectors:[["nui-chart"]],inputs:{chart:"chart"},features:[Nl([{provide:vo,useExisting:Sl(()=>t)}]),Bt],decls:0,vars:0,template:function(n,i){},encapsulation:2})}return t})();var Np=y(ct());var $u=y(te()),Rp=y(Mp()),qu=y(ct());var Dp=y(te());var Nn=class{streams={};getStream(e){return this.streams[e]||(this.streams[e]=new B),this.streams[e]}destroy(){(0,Dp.default)(Object.keys(this.streams),e=>{this.streams[e].complete()})}};var Es=class{lastIndex=-1;events=[qt,vr,ee,xo];charts={};subscriptions={};eventBus;constructor(){}addChart(e){let r=(++this.lastIndex).toString();this.charts[r]=e,this.eventBus||this.initializeEventBus(),(0,$u.default)(this.events,n=>{this.subscribe(r,e.getEventBus().getStream(n),i=>{i.broadcast||this.eventBus?.getStream(n).next({chartIndex:r,event:i})})}),this.subscribe(r,e.getEventBus().getStream(Re),n=>{this.removeChart(e),Object.keys(this.charts).length===0&&this.destroy()})}removeChart(e){let r=this.getChartKey(e);if((0,qu.default)(r))throw new Error("Chart not registered!");this.unsubscribeChart(r),delete this.charts[r]}destroy(){this.eventBus?.destroy(),this.eventBus=void 0}initializeEventBus(){this.eventBus=new Nn;for(let e of this.events)this.eventBus.getStream(e).subscribe(r=>{for(let n of Object.keys(this.charts))n!==r.chartIndex&&(r.event.broadcast=!0,this.charts[n].getEventBus().getStream(e).next(r.event))})}subscribe(e,r,n){let i=r.subscribe(n),o=this.subscriptions[e];(0,qu.default)(o)&&(o=[],this.subscriptions[e]=o),o.push(i)}unsubscribeChart(e){(0,$u.default)(this.subscriptions[e],r=>{r.unsubscribe()}),delete this.subscriptions[e]}getChartKey(e){return(0,Rp.default)(this.charts,r=>r===e)}};var Cs=(()=>{class t{collections={};getChartCollection(r){let n=this.collections[r];return(0,Np.default)(n)&&(n=new Es,this.collections[r]=n),n}static \u0275fac=function(n){return new(n||t)};static \u0275prov=so({token:t,factory:t.\u0275fac})}return t})();var iH=(()=>{class t{chartComponent;chartCollectionService;collectionId;constructor(r,n){this.chartComponent=r,this.chartCollectionService=n}ngOnChanges(r){let n=r.collectionId;n&&(n.previousValue&&this.chartCollectionService.getChartCollection(n.previousValue).removeChart(this.chartComponent.chart),n.currentValue&&this.chartCollectionService.getChartCollection(n.currentValue).addChart(this.chartComponent.chart))}static \u0275fac=function(n){return new(n||t)(it(vo),it(Cs))};static \u0275dir=ao({type:t,selectors:[["","nuiChartCollectionId",""]],inputs:{collectionId:[Tl.None,"nuiChartCollectionId","collectionId"]},features:[Bt]})}return t})();var $i=function(t){return t.vertical="vertical",t.horizontal="horizontal",t}($i||{});var w_=["*"],As=(()=>{class t{activeChanged=new rn;active=!1;interactive=!1;orientation=$i.vertical;seriesColor;seriesIcon;seriesUnitLabel;ngOnChanges(r){r.active&&this.activeChanged.emit(this.active)}ngOnDestroy(){this.activeChanged.complete()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=mt({type:t,selectors:[["nui-legend"]],hostAttrs:[1,"d-inline-block"],inputs:{active:"active",interactive:"interactive",orientation:"orientation",seriesColor:"seriesColor",seriesIcon:"seriesIcon",seriesUnitLabel:"seriesUnitLabel"},features:[Bt],ngContentSelectors:w_,decls:2,vars:2,consts:[[1,"nui-legend","d-flex","flex-wrap"]],template:function(n,i){n&1&&(fe(),Q(0,"div",0),It(1),Z()),n&2&&$e("flex-column",i.orientation==="vertical")},encapsulation:2})}return t})();var Xu=y(ge());var S_=["projectedDescription"],E_=["*",[["","legendMenu",""]],[["","description",""]]],C_=["*","[legendMenu]","[description]"],A_=t=>[t];function T_(t,e){if(t&1&&(Q(0,"div",13),on(1),Z()),t&2){let r=xt(2);nt("title",r.descriptionPrimary),ht(),sn(" ",r.descriptionPrimary," ")}}function I_(t,e){if(t&1&&(Q(0,"div",14),on(1),Z()),t&2){let r=xt(2);nt("title",r.descriptionSecondary),ht(),sn(" ",r.descriptionSecondary," ")}}function M_(t,e){if(t&1&&(Q(0,"div",10),gt(1,T_,2,2,"div",11)(2,I_,2,2,"div",12),Z()),t&2){let r=xt();ht(),nt("ngIf",!!r.descriptionPrimary),ht(),nt("ngIf",!!r.descriptionSecondary)}}function D_(t,e){t&1&&(Q(0,"div",15,1),It(2,2),Z())}var kp=(()=>{class t{legend;set active(r){this._active=r}set interactive(r){this._interactive=r}get interactive(){return this._interactive}isSelected=!0;isSelectedChange=new rn;descriptionPrimary;descriptionSecondary;icon;color;set seriesRenderState(r){this._seriesRenderState=r}get seriesRenderState(){return this._seriesRenderState||U.default}projectedDescription;get isInteractiveClassApplied(){return this._interactive}isHorizontalClassApplied=!1;get isActiveClassApplied(){return this._active&&this.seriesRenderState!==U.hidden}_seriesRenderState;_active=!1;_interactive;constructor(r){this.legend=r}ngAfterContentInit(){this.legend&&(this.legend.activeChanged.subscribe(r=>this._active=r),this.icon=this.icon||this.legend.seriesIcon,this._active=this.legend.active,this.interactive=this.interactive??this.legend.interactive,this.isHorizontalClassApplied=this.legend.orientation===$i.horizontal)}onClick(){this.interactive&&this.isSelectedChange.next(!this.isSelected)}hasInputDescription(){return!(0,Xu.default)(this.descriptionPrimary)||!(0,Xu.default)(this.descriptionSecondary)}hasProjectedDescription(){return!!this.projectedDescription&&this.projectedDescription.nativeElement.children.length!==0}static \u0275fac=function(n){return new(n||t)(it(As,9))};static \u0275cmp=mt({type:t,selectors:[["nui-legend-series"]],viewQuery:function(n,i){if(n&1&&Xe(S_,5),n&2){let o;je(o=We())&&(i.projectedDescription=o.first)}},hostAttrs:[1,"nui-legend-series"],hostVars:6,hostBindings:function(n,i){n&1&&Rl("click",function(){return i.onClick()}),n&2&&$e("nui-legend-series--interactive",i.isInteractiveClassApplied)("nui-legend-series--horizontal",i.isHorizontalClassApplied)("inverse",i.isActiveClassApplied)},inputs:{active:"active",interactive:"interactive",isSelected:"isSelected",descriptionPrimary:"descriptionPrimary",descriptionSecondary:"descriptionSecondary",icon:"icon",color:"color",seriesRenderState:"seriesRenderState"},outputs:{isSelectedChange:"isSelectedChange"},ngContentSelectors:C_,decls:12,vars:9,consts:[["descriptionTemplate",""],["projectedDescription",""],[1,"d-flex",3,"ngClass"],[1,"nui-legend-series__tile-wrapper"],[1,"nui-legend-series__tile"],[1,"nui-legend-series__checkbox-wrapper"],[1,"nui-legend-series__checkbox-mark"],[1,"nui-legend-series__checkbox-glyph"],["class","description-container nui-text-small d-flex flex-column justify-content-center",4,"ngIf","ngIfElse"],[1,"legend-menu"],[1,"description-container","nui-text-small","d-flex","flex-column","justify-content-center"],["class","description description-primary",3,"title",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],[1,"description","description-primary",3,"title"],[1,"description","description-secondary",3,"title"],[1,"d-flex"]],template:function(n,i){if(n&1&&(fe(E_),Q(0,"div",2)(1,"div",3)(2,"div",4),It(3),Z(),Q(4,"div",5)(5,"div",6),qe(6,"i",7),Z()()(),gt(7,M_,3,2,"div",8),Q(8,"div",9),It(9,1),Z()(),gt(10,D_,3,0,"ng-template",null,0,Me)),n&2){let o=he(11);$e("nui-legend-series--deselected",!i.isSelected),nt("ngClass",Ke(7,A_,"nui-legend-series--state-"+i.seriesRenderState)),ht(4),$e("nui-legend-series__checkbox--checked",i.isSelected),ht(3),nt("ngIf",i.hasInputDescription())("ngIfElse",o)}},dependencies:[Ol,pe],encapsulation:2,changeDetection:0})}return t})();var N_=["*"],TH=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=mt({type:t,selectors:[["nui-basic-legend-tile"]],ngContentSelectors:N_,decls:2,vars:0,consts:[[1,"nui-basic-legend-tile"]],template:function(n,i){n&1&&(fe(),Q(0,"div",0),It(1),Z())},styles:[".nui-basic-legend-tile[_ngcontent-%COMP%]{height:100%;min-height:30px;min-width:30px;display:flex;align-items:center;justify-content:center}"]})}return t})();var ju=y(lo());var L_=["*",[["","leftEdge",""]],[["","rightEdge",""]],[["","top",""]],[["","bottom",""]]],k_=["*","[leftEdge]","[rightEdge]","[top]","[bottom]"],O_=t=>({"background-color":t});function P_(t,e){if(t&1&&(Q(0,"div",10),on(1),Z()),t&2){let r=xt();ht(),sn(" ",r.value," ")}}function F_(t,e){if(t&1&&(Q(0,"div",11),on(1),Z()),t&2){let r=xt();ht(),sn(" ",r.unitLabel," ")}}function B_(t,e){t&1&&It(0,3)}function U_(t,e){t&1&&It(0,4)}var LH=(()=>{class t{legendSeries;legend;changeDetector;unitLabel;value;backgroundColor;color;seriesHasAdditionalContent;constructor(r,n,i){this.legendSeries=r,this.legend=n,this.changeDetector=i}ngAfterContentInit(){this.legend&&(this.unitLabel=this.unitLabel||this.legend.seriesUnitLabel,this.backgroundColor=this.backgroundColor||this.legend.seriesColor||"white")}ngAfterViewInit(){this.legendSeries&&(this.seriesHasAdditionalContent=this.legendSeries.hasInputDescription()||this.legendSeries.hasProjectedDescription(),this.changeDetector.detectChanges())}hasInputValue(){return!(0,ju.default)(this.value)}hasInputUnitLabel(){return!(0,ju.default)(this.unitLabel)}static \u0275fac=function(n){return new(n||t)(it(kp,1),it(As,9),it(de))};static \u0275cmp=mt({type:t,selectors:[["nui-rich-legend-tile"]],inputs:{unitLabel:"unitLabel",value:"value",backgroundColor:"backgroundColor",color:"color"},ngContentSelectors:k_,decls:15,vars:13,consts:[["icon",""],["rightEdge",""],["projectedTopContent",""],["projectedBottomContent",""],[1,"nui-rich-legend-tile"],[1,"nui-rich-legend-tile__tilebox","d-flex","justify-content-center","align-items-end","flex-column",3,"ngStyle"],["class","nui-rich-legend-tile__tilebox-value nui-rich-legend-tile__ellipsified",4,"ngIf","ngIfElse"],["class","nui-rich-legend-tile__tilebox-unit nui-rich-legend-tile__ellipsified",4,"ngIf","ngIfElse"],[1,"nui-rich-legend-tile__icon"],[1,"nui-rich-legend-tile__point-marker"],[1,"nui-rich-legend-tile__tilebox-value","nui-rich-legend-tile__ellipsified"],[1,"nui-rich-legend-tile__tilebox-unit","nui-rich-legend-tile__ellipsified"]],template:function(n,i){if(n&1&&(fe(L_),Q(0,"div",4)(1,"div",5),gt(2,P_,2,1,"div",6)(3,F_,2,1,"div",7),It(4),Z(),Q(5,"div",8,0),It(7,1),Z(),Q(8,"div",9,1),It(10,2),Z()(),gt(11,B_,1,0,"ng-template",null,2,Me)(13,U_,1,0,"ng-template",null,3,Me)),n&2){let o=he(9),s=he(12),a=he(14);$e("nui-rich-legend-tile--has-point-marker",o.children.length>0)("nui-rich-legend-tile--series-has-additional-content",i.seriesHasAdditionalContent),ht(),Ye("color",i.color),nt("ngStyle",Ke(11,O_,i.backgroundColor)),ht(),nt("ngIf",i.hasInputValue())("ngIfElse",s),ht(),nt("ngIf",i.hasInputUnitLabel())("ngIfElse",a)}},dependencies:[pe,Fl],styles:[".nui-rich-legend-tile[_ngcontent-%COMP%]{position:relative;width:60px;height:100%;line-height:18px}.nui-rich-legend-tile[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:empty{display:none}.nui-rich-legend-tile__tilebox[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 5px;background-color:var(--nui-color-bg-light,#fff)}.nui-rich-legend-tile__ellipsified[_ngcontent-%COMP%]{max-width:100%;overflow:hidden;text-overflow:ellipsis}.nui-rich-legend-tile__tilebox-value[_ngcontent-%COMP%]{text-align:right;font-weight:600}.nui-rich-legend-tile__tilebox-value[_ngcontent-%COMP%]:not(:last-child){margin-bottom:-3px}.nui-rich-legend-tile__tilebox-unit[_ngcontent-%COMP%]{text-align:right;font-size:11px}.nui-rich-legend-tile__tilebox-unit[_ngcontent-%COMP%]:not(:first-child){margin-top:-3px}.nui-rich-legend-tile__point-marker[_ngcontent-%COMP%], .nui-rich-legend-tile__icon[_ngcontent-%COMP%]{position:absolute;line-height:0;top:50%;pointer-events:none}.nui-rich-legend-tile__point-marker[_ngcontent-%COMP%]{right:0;transform:translate(50%,-50%)}.nui-rich-legend-tile__icon[_ngcontent-%COMP%]{left:0;transform:translate(-50%,-50%)}.nui-rich-legend-tile--has-point-marker.nui-rich-legend-tile--series-has-additional-content[_ngcontent-%COMP%]{margin-right:5px}.nui-rich-legend-tile--has-point-marker[_ngcontent-%COMP%]   .nui-rich-legend-tile__tilebox[_ngcontent-%COMP%]{padding-right:7px}"]})}return t})();var qp=y(Mx()),Xp=y(Up()),jp=y(zp()),Wp=y($p());function Ts(t){if(!(0,qp.default)(t,"var("))return t;let e=(0,Xp.default)((0,jp.default)((0,Wp.default)(t,"var("),")"));return getComputedStyle(document.body).getPropertyValue(e)}var Ln=class{values;providedValues;lastUsedIndex;constructor(e){this.values=e,this.reset()}get=e=>{let r=this.providedValues[e];if(!r){let n=++this.lastUsedIndex%this.values.length;r=this.values[n],this.providedValues[e]=r}return r};reset(){this.providedValues={},this.lastUsedIndex=-1}};var kn=class extends Ln{colors;constructor(e){super(e),this.colors=e}};var Kp=y(me());var On=class{sourceProvider;fn;processedColors;constructor(e,r){this.sourceProvider=e,this.fn=r,this.reset()}get=e=>{let r=this.sourceProvider.get(e);if(!r)throw new Error("clr is not defined");let n=this.processedColors[r];return n||(n=this.fn(r),this.processedColors[r]=n),n};reset(){this.processedColors={}}};var lw=.2126,cw=.7152,fw=.0722,Qu=1/12.92,Is=class extends On{constructor(e,r){super(e,n=>{let i=Ts(n),o=jt(i),s=this.getContrastRatio(o,jt(r.light));return this.getContrastRatio(o,jt(r.dark))>s?r.dark:r.light})}getContrastRatio(e,r){let n=this.getRelativeLuminance(e),i=this.getRelativeLuminance(r),o,s;return n>i?(o=n,s=i):(o=i,s=n),(o+.05)/(s+.05)}getRelativeLuminance(e){let r=e.r/255,n=e.g/255,i=e.b/255,o=r<=.03928?r*Qu:this.adjustGamma(r),s=n<=.03928?n*Qu:this.adjustGamma(n),a=i<=.03928?i*Qu:this.adjustGamma(i);return o*lw+s*cw+a*fw}adjustGamma(e){return Math.pow((e+.055)/1.055,2.4)}};var Pn=class{_standardColors;_textColors;_backgroundColors;constructor(e,r={backgroundOpacity:.15}){(0,Kp.default)(e)?this._standardColors=new kn(e):this._standardColors=e,this._textColors=new Is(this.standardColors,{light:"white",dark:"black"}),this._backgroundColors=new On(this.standardColors,n=>{let i=Ts(n),o=jt(i);return o.opacity=r.backgroundOpacity,o.toString()})}get standardColors(){return this._standardColors}get backgroundColors(){return this._backgroundColors}get textColors(){return this._textColors}};var Qp=y(ct()),Ms=class{svg;styledSvg;constructor(e){this.svg=e}getSvg(){return this.styledSvg||this.svg}setColor(e){this.styledSvg=(0,Qp.default)(e)?e:`<g fill="${e}">${this.svg}</g>`}};var Ds=["var(--nui-color-chart-one)","var(--nui-color-chart-two)","var(--nui-color-chart-three)","var(--nui-color-chart-four)","var(--nui-color-chart-five)","var(--nui-color-chart-six)","var(--nui-color-chart-seven)","var(--nui-color-chart-eight)","var(--nui-color-chart-nine)","var(--nui-color-chart-ten)"],nV=["var(--nui-color-chart-one)","var(--nui-color-chart-one-light)","var(--nui-color-chart-two)","var(--nui-color-chart-two-light)","var(--nui-color-chart-three)","var(--nui-color-chart-three-light)","var(--nui-color-chart-four)","var(--nui-color-chart-four-light)","var(--nui-color-chart-five)","var(--nui-color-chart-five-light)","var(--nui-color-chart-six)","var(--nui-color-chart-six-light)","var(--nui-color-chart-seven)","var(--nui-color-chart-seven-light)","var(--nui-color-chart-eight)","var(--nui-color-chart-eight-light)","var(--nui-color-chart-nine)","var(--nui-color-chart-nine-light)","var(--nui-color-chart-ten)","var(--nui-color-chart-ten-light)"];var iV=["var(--nui-color-semantic-down)","var(--nui-color-semantic-down-bg)","var(--nui-color-semantic-critical)","var(--nui-color-semantic-critical-bg)","var(--nui-color-semantic-warning)","var(--nui-color-semantic-warning-bg)","var(--nui-color-semantic-unknown)","var(--nui-color-semantic-unknown-bg)","var(--nui-color-semantic-ok)","var(--nui-color-semantic-ok-bg)","var(--nui-color-semantic-info)","var(--nui-color-semantic-info-bg)","var(--nui-color-chart-ten-light)","var(--nui-color-chart-ten)"],Zp=["m0 0m-4 0a4 4 0 1 0 8 0 4 4 0 1 0-8 0z","m-4,-4l8,0l0,8l-8,0l0,-8z","m0-4 4 8-8 0z","m0-4.95 4.95 4.95-4.95 4.95-4.95-4.95 4.95-4.95z","m0 4-4-8 8 0z","m0-3.805 4.001 2.907-1.528 4.703-4.945 0-1.528-4.703z"],hw=["m0 2c1.105 0 2-.895 2-2 0-1.105-.895-2-2-2-1.105 0-2 .895-2 2 0 1.105.895 2 2 2zm0 2c-2.209 0-4-1.791-4-4 0-2.209 1.791-4 4-4 2.209 0 4 1.791 4 4 0 2.209-1.791 4-4 4z","m-2-2 0 4 4 0 0-4-4 0zm-2-2 8 0 0 8-8 0 0-8z","m0-4-4 8 8.001 0-4.001-8zm0 3.354 1.573 3.146-3.145 0 1.572-3.146z","m0-2.121-2.121 2.121 2.121 2.121 2.121-2.121-2.121-2.121zm0-2.828 4.95 4.95-4.95 4.95-4.95-4.95 4.95-4.95z","m0 4-4-8 8.001 0-4.001 8zm0-3.354 1.573-3.146-3.145 0 1.572 3.146z","m0-1.951-2.237 1.626.855 2.63 2.766 0 .855-2.63-2.237-1.626zm0-1.854 4.001 2.907-1.528 4.703-4.945 0-1.528-4.703 4.001-2.907z"],Rs=[...Zp.map(t=>`<path class="nui-chart--path__outline" d="${t}"></path>`),...hw.map((t,e)=>`<path class="nui-chart--path__outline-fill" stroke="none" d="${Zp[e]}"></path>
            <path class="nui-chart--path__outline" d="${t}"></path>`)].map(t=>new Ms(t));var Fn=class extends Ln{markers;constructor(e){super(e),this.markers=e}};function He(){return new kn(Ds)}function Jp(){return new Pn(He())}function cr(){return new Fn(Rs)}var Bn=class{colorProvider;markerProvider;data;series;constructor(e=He(),r=cr()){this.colorProvider=e,this.markerProvider=r,this.data={x:(n,i,o,s)=>n.x,x0:(n,i,o,s)=>this.data.x(n,i,o,s),x1:(n,i,o,s)=>this.data.x(n,i,o,s),y:(n,i,o,s)=>n.y,y0:(n,i,o,s)=>this.data.y(n,i,o,s),y1:(n,i,o,s)=>this.data.y(n,i,o,s),absoluteX0:(n,i,o,s)=>n.__stack_x?.start??this.data.x0(n,i,o,s),absoluteX1:(n,i,o,s)=>n.__stack_x?.end??this.data.x1(n,i,o,s),absoluteY0:(n,i,o,s)=>n.__stack_y?.start??this.data.y0(n,i,o,s),absoluteY1:(n,i,o,s)=>n.__stack_y?.end??this.data.y1(n,i,o,s)},this.series={color:this.colorProvider?this.colorProvider.get:void 0,marker:this.markerProvider?this.markerProvider.get:void 0}}};var Ns=class{data;series;constructor(){}};var Un=class extends Ns{colorProvider;markerProvider;data;series;constructor(e=He(),r=cr()){super(),this.colorProvider=e,this.markerProvider=r,this.data={value:n=>n.value,category:(n,i,o,s)=>n.category?n.category:this.series.category?this.series.category(s.id,s):null,start:(n,i,o,s)=>{if(n.__bar)return n.__bar.start;if(typeof n.start<"u")return n.start;let a=this.getSingleValue(n,i,o,s);return Number.isFinite(a)?Math.min(0,a):null},end:(n,i,o,s)=>{if(n.__bar)return n.__bar.end;if(typeof n.end<"u")return n.end;let a=this.getSingleValue(n,i,o,s);return Number.isFinite(a)?Math.max(0,a):null}},this.series={color:this.colorProvider?this.colorProvider.get:void 0,marker:this.markerProvider?this.markerProvider.get:void 0,category:(n,i)=>i.name||i.id}}getSingleValue(e,r,n,i){let o;return this.data.value&&(o=this.data.value(e,r,n,i),typeof o>"u"&&(o=e)),o}};var Ve=class extends Un{constructor(e,r){super(e,r),this.data=K(q({},this.data),{startX:(n,i,o,s)=>this.data.start(n,i,o,s),endX:(n,i,o,s)=>this.data.end(n,i,o,s),startY:(n,i,o,s)=>this.data.category(n,i,o,s),endY:(n,i,o,s)=>this.data.category(n,i,o,s),thicknessY:(n,i,o,s)=>this.data.thickness?this.data.thickness(n,i,o,s):void 0})}};var qi=class t{barAccessors;static STATUS_CATEGORY="status";static STATUS_DOMAIN=[t.STATUS_CATEGORY];get data(){return this.barAccessors.data}get series(){return this.barAccessors.series}constructor(e){this.barAccessors=e,e.data.status=r=>r.status}};function tm(t,e){let r=new qi(new Ve(t,e));return r.data.color=(n,i,o,s)=>t.get(r.data.status(n,i,o,s)),r.data.category=()=>qi.STATUS_CATEGORY,r}var em=y(me());function Gr(t,e,r=.5,n=Number.MAX_VALUE){if(!t)return 0;if(!we(t))return t.convert(e);let i=t;if(!(0,em.default)(e))return i.convert(e,r);let o=e;return o.length===1||!i.innerScale||n<=1?i.convert(o[0],r):i.convert(o[0],0)+Gr(i.innerScale,o.slice(1),r,n-1)}var im=y(xx()),Ju=y(ge()),om=y(ct());var rm=y(me()),nm=y(ct());function Zu(t,e){if(!t)return 0;let r=t.invert(e);if(!we(t)||(0,nm.default)(r))return r;let n=t;if(!n.innerScale)return r;let i=Zu(n.innerScale,e-n.convert(r,0));return(0,rm.default)(i)?[r,...i]:[r,i]}var st=class t{static getValueAccessor(e,r){let n=e(r,0);if(typeof n=="number"||typeof n=="string")return e;if(n.valueOf&&typeof n.valueOf()=="number")return(i,o)=>e(i,o).valueOf();throw new Error("Value in the data series does not return numeric valueOf().")}static getClosestIndex(e,r,n){if(e.length===1)return 0;if(e.length===0)return;let i=t.getValueAccessor(r,e[0]);if(typeof n=="string")return e.findIndex(a=>i(a,0)===n);let o=this.findNearestIndex(e,n,r);o=o>0?o-1:o,o=o>=e.length-1&&e.length!==1?e.length-2:o;let s=t.getCloser(i(e[o],o),i(e[o+1],o+1),n);return o+s}static getCloser(e,r,n){return Math.abs(n-e)<=Math.abs(n-r)?0:1}static clampToRange(e,r){return e<r[0]?r[0]:e>r[1]?r[1]:e}static uuid(){let e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let i=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(n==="x"?i:i&3|8).toString(16)})}static cssEscape(e){if(arguments.length===0)throw new TypeError("`cssEscape` requires an argument.");let r=String(e),n=r.length,i=-1,o,s="",a=r.charCodeAt(0);for(;++i<n;){if(o=r.charCodeAt(i),o===0){s+="\uFFFD";continue}if(o>=1&&o<=31||o===127||i===0&&o>=48&&o<=57||i===1&&o>=48&&o<=57&&a===45){s+="\\"+o.toString(16)+" ";continue}if(i===0&&n===1&&o===45){s+="\\"+r.charAt(i);continue}if(o>=128||o===45||o===95||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122){s+=r.charAt(i);continue}s+="\\"+r.charAt(i)}return s}static findNearestIndex(e,r,n=im.default){let i=0,o=e==null?i:e.length;for(;i<o;){let s=i+o>>>1,a=n(e[s],s);a!==null&&a<r?i=s+1:o=s}return Math.round(i)}static getXYValues(e,r,n,i){let o=t.getScaleValues(e,n),s=t.getScaleValues(r,i),a={};return(0,Ju.default)(o)||(a.x=o),(0,Ju.default)(s)||(a.y=s),a}static getScaleValues(e,r){function n(i,o){let s=Zu(o,r);return(0,om.default)(s)||(i[o.id]=s),i}return e.reduce(n,{})}static getInteractionValues(e,r){return e?e[r]??Object.values(e)[0]:null}};var tl=y(ct());var Ee=class extends lr{draw(e,r){}getDataPointPosition(e,r,n){if(r<0||r>=e.data.length)return;let i=e.data[r];if(!e.accessors.data?.x||!e.accessors.data?.y)throw new Error("Can't get dataPointPosition");return{x:n.x.convert(e.accessors.data.x(i,r,e.data,e)),y:n.y.convert(e.accessors.data.y(i,r,e.data,e))}}getDataPointIndex(e,r,n){if((0,tl.default)(r.x))return St;let i=st.getClosestIndex(e.data,(o,s)=>e.accessors.data?.x?.(o,s,e.data,e),r.x);if((0,tl.default)(i))throw new Error("Unable to get data point index");return i}};var am=y(Ht()),um=y(ma()),lm=y(me()),Yr=y(ct()),el=y(Ls());var $r=(()=>{class t extends Ee{config;constructor(r={}){super(r),this.config=r,this.config=(0,am.default)(this.config,this.DEFAULT_CONFIG)}static THICK=11;static THIN=3;static MIN_BAR_SIZE_FOR_ICON=10;static MIN_BAR_THICKNESS=2;static BAR_RECT_CLASS="bar";DEFAULT_CONFIG={transitionDuration:300,padding:1,barClass:"bar-outline",highlightStrategy:void 0,pointerEvents:!0,enableMinBarThickness:!0};barContainerClass="bar-container";draw(r,n){let i=r.containers[k.data],o=r.dataSeries,s=o.accessors,a=this.getAttrsGenerator(o,r.scales),u=ci(),l=i.selectAll(`g.${this.barContainerClass}`).data(o.data);l.exit().remove();let c=l.enter().append("g").classed(this.barContainerClass,!0);c.append("rect").on("click",(h,d)=>{this.emitBarClick(r,h,d,n)});let f=(h,d)=>typeof s.data?.cssClass<"u"&&" "+s.data.cssClass(h,d,o.data,o)||"";c.merge(l).property(u,(h,d)=>a(h,d)).select("rect").attr("class",(h,d)=>`${t.BAR_RECT_CLASS} ${this.config.barClass}${this.config.pointerEvents?" pointer-events":""}`+f(h,d)).style("cursor",this.config.cursor??"").style("stroke-width",this.config?.strokeWidth??"").style("fill",(h,d)=>s.data.color?s.data.color(h,d,o.data,o):s.series.color?.(o.id,o)).attrs(function(){return u.get(this)}).select("rect").style("fill",(h,d)=>s.data.color?s.data.color(h,d,o.data,o):s.series.color?.(o.id,o)).attrs(u.get),s.data.marker&&(c.append("g").classed("bar-icon",!0),c.merge(l).select("g.bar-icon").html(function(h,d){let g=u.get(this);if(!g||(0,Yr.default)(g?.height)||(0,Yr.default)(g?.width))throw new Error("barSize is undefined");if(Math.min(g.height,g.width)-1>=t.MIN_BAR_SIZE_FOR_ICON)return s.data.marker?.(h,d,o.data,o)}).attr("transform",function(){let h=u.get(this);if(!h||(0,Yr.default)(h?.height)||(0,Yr.default)(h?.width))throw new Error("barAttrs is undefined");return`translate(${h.x+h.width/2}, ${h.y+h.height/2})`}))}getDataPointIndex(r,n,i){return this.config.highlightStrategy?this.config.highlightStrategy.getDataPointIndex(this,r,n,i):St}highlightDataPoint(r,n,i){this.config.highlightStrategy&&this.config.highlightStrategy.highlightDataPoint(this,r,n,i)}getDataPointPosition(r,n,i){let o=r.data[n];return o&&this.getAttrsGenerator(r,i)(o,n)}getDataPoint(r,n,i){return{seriesId:r.dataSeries.id,dataSeries:r.dataSeries,index:i,data:n,position:n?this.getDataPointPosition(r.dataSeries,i,r.scales):void 0}}filterDataByDomain(r){return r}getDomain(r,n,i,o){let s=n.accessors.data,a=i.toUpperCase(),u=l=>(c,f,h)=>s[l+a]?.(c,f,Array.from(h),n);if(o.isContinuous())return!r||r.length===0?se:[Oe(r,u("start")),ke(r,u("end"))];{let l=r&&r.length>0?r.map(u("start")):[],c=Math.max(...l.map(f=>(0,lm.default)(f)?f.length:-1));return c>=0?Array.from(Array(c)).map((f,h)=>{let d=l.map(g=>h<g.length?g[h]:[]);return(0,el.default)((0,um.default)(d))}):[(0,el.default)(l)]}}emitBarClick(r,n,i,o){o.next({eventName:mo,data:this.getDataPoint(r,n,i)})}getAttrsGenerator(r,n){let i=r.accessors.data;return(o,s)=>{let a=this.getDimensions(i,o,s,r,n.x,"X"),u=this.getDimensions(i,o,s,r,n.y,"Y");return{x:a.start,width:a.thickness,y:u.start,height:u.thickness}}}getDimensions(r,n,i,o,s,a){let u,l,c=r["thickness"+a],f=o.accessors.data["start"+a],h=o.accessors.data["end"+a];if(l=c?.(n,i,o.data,o),(0,Yr.default)(l)){if(!f||!h)throw new Error("Can't compute dimensions");let d=Gr(s,f(n,i,o.data,o),0),g=Gr(s,h(n,i,o.data,o),1);if(u=Math.min(d,g),l=Math.abs(d-g),we(s)){if((0,Yr.default)(this.config.padding))throw new Error("Config is not defined");u+=this.config.padding,l-=this.config.padding*2}this.config.enableMinBarThickness&&(l=Math.max(l,t.MIN_BAR_THICKNESS))}else{if(!f)throw new Error("Can't compute dimensions");u=Gr(s,f(n,i,o.data,o),.5)-l/2}return{start:u,thickness:l}}}return t})();var ks={stateStyles:{[U.default]:{opacity:0},[U.hidden]:{opacity:0},[U.deemphasized]:{opacity:0},[U.emphasized]:{opacity:1}},ignoreForDomainCalculation:!0},jV={stateStyles:{[U.default]:{opacity:.3},[U.hidden]:{opacity:0},[U.deemphasized]:{opacity:0},[U.emphasized]:{opacity:1}},ignoreForDomainCalculation:!0},qr={enabled:!1,clickable:!1},Hn="gauge-threshold-marker";var Os=class{data={x:e=>e.x,y:e=>e.y}};var Ps=class extends Os{colorProvider;markerProvider;series;constructor(e=He(),r=cr()){super(),this.colorProvider=e,this.markerProvider=r,this.data.defined=(n,i)=>n.hasOwnProperty("defined")?n.defined:!0,this.series={color:this.colorProvider?this.colorProvider.get:void 0,marker:this.markerProvider?this.markerProvider.get:void 0}}};var cm=y(Ht());function rl(t,e){let r=t.range().map(o=>o),n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return e>=n&&e<=i}var Fs=(()=>{class t{static DEFAULT_MARKER_CONTAINER_CLASS="marker";static MARKER_PATH_CLASS="marker-path";static manageMarker(r,n,i,o,s,a=qr){if(!o)throw new Error("Container doesn't exist!");if(r.data.length===0){t.removeMarker(o);return}let u=r.accessors;i<0&&(i=r.data.length-1);let l=r.data[i];if(!u.data?.x||!u.data.y)throw new Error("Color or marker are undefined");let c=n.x.convert(u.data.x(l,i,r.data,r)),f=n.y.convert(u.data.y(l,i,r.data,r));if(typeof c<"u"&&typeof f<"u"&&rl(n.x,c)&&rl(n.y,f)){let h=r.id,d={index:i,data:l,seriesId:h,position:{x:c,y:f},dataSeries:r};if(!u.series?.marker||!u.series?.color)throw new Error("Color or marker are undefined");t.drawMarker(d,u.series.marker(h,r),u.series.color(h,r),o,s,t.DEFAULT_MARKER_CONTAINER_CLASS,a)}else t.removeMarker(o)}static drawMarker(r,n,i,o,s,a=t.DEFAULT_MARKER_CONTAINER_CLASS,u=qr){let l=o.select(`g.${a}`),c=r?.position?.x,f=r?.position?.y,h={transform:`translate(${c}, ${f})`,cursor:"crosshair"},d=()=>`${u.enabled?" pointer-events":""}`,g=()=>`${u.enabled&&u.clickable?" pointer-events-click":""}`;l.empty()&&(l=o.append("g").classed(`${a}${d()}${g()}`,!0)),n.setColor(i),l.attrs(h),l.on("mouseenter",()=>{s.next({eventName:go,data:{interactionType:F.Hover,dataPoint:r}})}),l.on("mouseleave",()=>{s.next({eventName:go,data:{interactionType:F.Hover,dataPoint:K(q({},r),{index:St})}})}),l.on("click",()=>{s.next({eventName:go,data:{interactionType:F.Click,dataPoint:r}})}),!l.selectAll("g > *").size()&&l.node()&&(l.node()?.appendChild(tc.getSvgFromString(n.getSvg())),l.select("path").classed(t.MARKER_PATH_CLASS,!0));let m=l.select("path").node();if(m&&u.enabled){let p=m.getBoundingClientRect();m.setAttribute("x",Math.ceil(r?.position?.x-p.width/2).toString()),m.setAttribute("y",Math.ceil(r?.position?.y-p.height/2).toString())}}static removeMarker(r,n=t.DEFAULT_MARKER_CONTAINER_CLASS){r.select(`g.${n}`).remove()}}return t})();var ji=(()=>{class t extends Ee{config;static UNCLIPPED_DATA_LAYER_NAME="unclipped-data";static LINE_CAP_CLASS_NAME="nui-chart-line-cap";static getStrokeStyleDashed(r){let n=r*2;return`${n},${n}`}static getStrokeStyleDotted(r){return`${r},${r}`}DEFAULT_CONFIG={strokeWidth:2,curveType:Ne,interactive:!0,strokeStyle:"",strokeLinecap:"round",markerInteraction:qr,useEnhancedLineCaps:!1,enhancedLineCap:{radius:3}};constructor(r={}){super(r),this.config=r,this.config=(0,cm.default)(this.config,this.DEFAULT_CONFIG)}draw(r,n){let i=r.containers[k.data],o=r.dataSeries.accessors.series.color?.(r.dataSeries.id,r.dataSeries),s=i.select("path.main");s.empty()&&(s=i.append("path").classed("main",!0).attrs({stroke:o??null,"stroke-width":this.config.strokeWidth??null,"stroke-dasharray":this.config.strokeStyle??null,"stroke-linecap":this.config.strokeLinecap??null,fill:"none"})),this.drawLine(r,s),this.config.interactionStrategy&&this.config.interactionStrategy.draw(this,r,n)}isInfiniteLineData(r){let n=r.dataSeries;return n.data.length===1&&typeof n.accessors.data.x(n.data[0],0,n.data,n)>"u"}drawLine(r,n){this.isInfiniteLineData(r)?this.drawInfiniteLine(r,n):this.drawStandardLine(r,n)}highlightDataPoint(r,n,i){if(!this.config.interactive)return;let o=r.dataSeries;o.accessors.series.marker&&Fs.manageMarker(o,r.scales,n,r.containers[k.foreground],i,this.config.markerInteraction)}getRequiredLayers(){return[ut[k.data],ut[k.foreground],ut[k.unclippedData]]}getDataPointPosition(r,n,i){return super.getDataPointPosition(r,n,i)}drawStandardLine(r,n){let i=r.dataSeries,o=i.accessors,s=!1,a=i.data.filter((l,c)=>{let f=typeof o.data.x(l,c,i.data,i)<"u"&&typeof o.data.y(l,c,i.data,i)<"u";return!f&&!s&&(console.warn("Data point",l,"was skipped as accessors didn't manage to extract any data."),console.warn(" -> accessors.data.x:",o.data.x),console.warn(" -> accessors.data.y:",o.data.y),s=!0),f});if(!this.config.curveType)throw new Error("curveType is not defined");let u=dn().x((l,c)=>r.scales.x.convert(o.data.x(l,c,i.data,i))).y((l,c)=>r.scales.y.convert(o.data.y(l,c,i.data,i))).defined((l,c)=>o.data.defined?o.data.defined(l,c,i.data,i):!0).curve(this.config.curveType);n.attr("d",u(a)??""),this.config.useEnhancedLineCaps&&this.updateLineCaps(a,r,this.config.enhancedLineCap?.fill||n.attr("stroke"))}drawInfiniteLine(r,n){let i=r.dataSeries,o=i.accessors,s=r.scales.y.convert(o.data.y(i.data[0],0,i.data,i)),a=[[r.scales.x.range()[0],s],[r.scales.x.range()[1],s]],l=dn().x(c=>c[0]).y(c=>c[1])(a);if(!l)throw new Error("Line cannot be computed");n.attr("shape-rendering","crispEdges").attr("d",l)}updateLineCaps(r,n,i){let o=n.dataSeries,s=o.accessors,a=r.filter((f,h)=>s?.data?.defined?s?.data?.defined(f,h,o.data,o):!0),u=(f,h)=>n.scales.x.convert(s.data.x(f,h,o.data,o)),l=(f,h)=>n.scales.y.convert(s.data.y(f,h,o.data,o)),c=n.containers[k.unclippedData].selectAll(`.${t.LINE_CAP_CLASS_NAME}`).data(a).attr("cx",u).attr("cy",l);c.enter().append("circle").attr("class",t.LINE_CAP_CLASS_NAME).attr("r",this.config.enhancedLineCap?.radius).attr("cx",u).attr("cy",l).style("stroke-width",this.config.enhancedLineCap?.strokeWidth).style("fill",i).style("stroke",this.config.enhancedLineCap?.stroke),c.exit().remove()}}return t})();var Ki=y(xr()),vm=y(dm()),ym=y(Tx()),bm=y(un());var Wi=function(t){return t.Start="start",t.End="end",t}(Wi||{});var gm=y(Ht());var Bs=function(t){return t.Grayscale="grayscale",t}(Bs||{}),pm=`url("#${Bs.Grayscale}")`,mm=`
0.2126 0.7152 0.0722 0 0
0.2126 0.7152 0.0722 0 0
0.2126 0.7152 0.0722 0 0
0      0      0      1 0
`;var Us=class{data;series;constructor(){this.data={active:e=>e.active},this.series={start:()=>null,end:()=>null,activeColor:()=>"magenta"}}},xm=(()=>{class t extends Ee{static SIDE_INDICATORS_LAYER="side-indicators";DEFAULT_CONFIG={};constructor(r={}){super(r),this.config=(0,gm.default)(this.config,this.DEFAULT_CONFIG)}draw(r,n){let i=r.containers[k.unclippedData],o=r.dataSeries,s=r.scales,a=r.dataSeries.accessors,u=i.select("rect"),l=o.data.length>0?a.data.active(o.data[0],0,r.dataSeries.data,r.dataSeries):!1,c=!l&&a.series.inactiveColor?a.series.inactiveColor:a.series.activeColor;u.empty()&&(u=i.append("rect").attrs({fill:c(o.id,o)}),!l&&!a.series.inactiveColor&&u.style("filter",pm));let f=a.series.start(o.id,o),h=a.series.end(o.id,o),d=h==null?0:s.y.convert(h),m=(f==null?s.y.range()[0]:Math.min(s.y.range()[0],s.y.convert(f)))-d,p=2;u.attrs({x:-p,y:d,height:m<0?0:m,width:p})}getDataPointIndex(r,n,i){return-1}getRequiredLayers(){return[ut[k.unclippedData]]}}return t})();var _m=(()=>{class t{loggerService;static SERIES_ID_SUFFIX="__thresholds-background";constructor(r){this.loggerService=r}injectThresholdsData(r,n){let i={};n.forEach(o=>o.entered=!1);for(let o=0;o<r.data.length;o++){let s=r.data[o],a=r.accessors.data.x(s,o,r.data,r),u=r.accessors.data.y(s,o,r.data,r);s.__thresholds={};let l=this.getZoneByXY(n,i,a,u);l&&(l.entered=!0,s.__thresholds.status=l.value)}}getBackgrounds(r,n,i,o,s={},a=(0,Ki.default)(ks)){r.data.length>0&&typeof r.data[0].__thresholds>"u"&&this.loggerService.warn("Thresholds metadata is not defined on provided data series",r);let u,l=tm(o);return l.data.thickness=c=>s[c.status],we(i.x)?(u=(0,Ki.default)(r.data),l.data.start=r.accessors.data.x,l.data.end=r.accessors.data.x,l.data.color=c=>c.__thresholds&&c.__thresholds.status?o.get(c.__thresholds.status):"transparent",l.data.thickness=c=>s[c.__thresholds.status]):u=this.getBackgroundsDataForContinuousScale(r,n),{id:r.id+t.SERIES_ID_SUFFIX,data:u,accessors:l,scales:i,renderer:new $r(a),showInLegend:!1}}getBackgroundsDataForContinuousScale(r,n){let i=[],o=this.getBreakPoints(r,n),s={};for(let a=0;a<o.length-1;a++){let u=o[a],l=o[a+1];if(!u||!l)throw new Error("p1 or p2 are undefined");let c={x:(u.x+l.x)/2,y:(u.y+l.y)/2},f=this.getZoneByXY(n,s,c.x,c.y);if(f){let h=i[i.length-1];h&&h.end?.valueOf()===u.x&&h.status===f.value?h.end=new Date(l.x):i.push({status:f.value,start:new Date(u.x),end:new Date(l.x)})}}return i}getBreakPoints(r,n){let i=r.accessors.data,o=[];for(let s=0;s<r.data.length-1;s++){let a=r.data[s],u=r.data[s+1],l={x:i.x(a,s,r.data,r).valueOf(),y:i.y(a,s,r.data,r).valueOf()},c={x:i.x(u,s+1,r.data,r).valueOf(),y:i.y(u,s+1,r.data,r).valueOf()};for(let f=0;f<n.length;f++){let h=n[f],d=h.accessors.data.start?.(h.data[0],0,h.data,h),g=h.accessors.data.end?.(h.data[0],0,h.data,h),m=[d,g].map(p=>this.getCrossPointWithY(l,c,p)).filter(p=>p);[l,c].forEach(p=>{(p.y===d||p.y===g)&&(p.isZoneEdge=!0)}),o=(0,ym.default)(o,m,[l,c],(p,x)=>p?.x===x?.x&&p?.isZoneEdge===x?.isZoneEdge)}}return(0,vm.default)(o,"x")}getThresholdZones(r,n,i){let o=new Bn;return o.data.start=s=>s.start,o.data.end=s=>s.end,o.series.color=(s,a)=>i.get(a.value),n.map((s,a)=>({id:r.id+"__"+s.status+"-"+a,value:s.status,data:[{start:s.start,end:s.end}],scales:r.scales,accessors:o}))}getThresholdLines(r){if(r.findIndex(o=>o.entered)===-1)return[];let n={};function i(o,s,a){let u=o(s.data[0],0,s.data,s);typeof u<"u"&&typeof n[u]>"u"&&(n[u]={series:s,accessor:o,zoneBoundary:a})}for(let o of r)o.accessors.data.start&&o.accessors.data.end&&(i(o.accessors.data.start,o,Wi.Start),i(o.accessors.data.end,o,Wi.End));return(0,bm.default)(n).map(o=>this.getThresholdLine(o.series,o.accessor,o.zoneBoundary))}getThresholdLine(r,n,i=Wi.Start){let o=new Ps;o.data.y=n,o.series.color=r.accessors.series.color;let s=new ji({interactive:!1,strokeWidth:1,strokeStyle:ji.getStrokeStyleDashed(1),stateStyles:(0,Ki.default)(ks.stateStyles),ignoreForDomainCalculation:!0});return{id:`${r.id}__${i}__threshold-line`,data:r.data,value:r.value,accessors:o,renderer:s,scales:r.scales,showInLegend:!1}}getCrossPoint(r,n,i,o){let s={x:n.x-r.x,y:n.y-r.y},a={x:o.x-i.x,y:o.y-i.y},u=(-s.y*(r.x-i.x)+s.x*(r.y-i.y))/(-a.x*s.y+s.x*a.y),l=(a.x*(r.y-i.y)-a.y*(r.x-i.x))/(-a.x*s.y+s.x*a.y);if(u>=0&&u<=1&&l>=0&&l<=1)return{x:r.x+l*s.x,y:r.y+l*s.y}}getZoneByXY(r,n,i,o){for(let s of r){n[s.id]||(n[s.id]=0);let a=this.moveZoneIndex(n[s.id],s,i);n[s.id]=a;let u=s.data[a],l=s.accessors.data,c=l.start?.(u,a,s.data,s),f=l.end?.(u,a,s.data,s);if((typeof c>"u"||o>=c)&&(typeof f>"u"||o<=f))return s}return null}moveZoneIndex(r,n,i){for(;r<n.data.length-1&&n.accessors.data.x(n.data[r+1],r+1,n.data,n)<i;)r++;return r}getCrossPointWithY(r,n,i){return this.getCrossPoint(r,n,{x:r.x,y:i},{x:n.x,y:i})}getSideIndicators(r,n,i){let o=[],s=new xm(i||(0,Ki.default)(ks)),a=r.findIndex(u=>u.entered)!==-1;for(let u of r){let l=new Us;l.series={start:()=>u.accessors.data.start?.(u.data[0],0,u.data,u),end:()=>u.accessors.data.end?.(u.data[0],0,u.data,u),activeColor:()=>u.accessors.series.color?.(u.id,u)};let c={id:u.id+"__side-indicator",data:[{active:a}],accessors:l,scales:n,renderer:s,showInLegend:!1};o.push(c)}return o}static \u0275fac=function(n){return new(n||t)(Al(Jl))};static \u0275prov=so({token:t,factory:t.\u0275fac})}return t})();function yw(t,e){return t.each(function(){var r=e.apply(this,arguments),n=H(this);for(var i in r)n.attr(i,r[i])})}function bw(t,e){for(var r in e)t.attr(r,e[r]);return t}function wm(t){return(typeof t=="function"?yw:bw)(this,t)}function _w(t,e,r){return t.each(function(){var n=e.apply(this,arguments),i=H(this);for(var o in n)i.style(o,n[o],r)})}function ww(t,e,r){for(var n in e)t.style(n,e[n],r);return t}function Sm(t,e){return(typeof t=="function"?_w:ww)(this,t,e??"")}function Sw(t,e){return t.each(function(){var r=e.apply(this,arguments),n=H(this);for(var i in r)n.property(i,r[i])})}function Ew(t,e){for(var r in e)t.property(r,e[r]);return t}function Em(t){return(typeof t=="function"?Sw:Ew)(this,t)}function Cw(t,e){return t.each(function(){var r=e.apply(this,arguments),n=H(this).transition(t);for(var i in r)n.attr(i,r[i])})}function Aw(t,e){for(var r in e)t.attr(r,e[r]);return t}function Cm(t){return(typeof t=="function"?Cw:Aw)(this,t)}function Tw(t,e,r){return t.each(function(){var n=e.apply(this,arguments),i=H(this).transition(t);for(var o in n)i.style(o,n[o],r)})}function Iw(t,e,r){for(var n in e)t.style(n,e[n],r);return t}function Am(t,e){return(typeof t=="function"?Tw:Iw)(this,t,e??"")}Yt.prototype.attrs=wm;Yt.prototype.styles=Sm;Yt.prototype.properties=Em;bn.prototype.attrs=Cm;bn.prototype.styles=Am;var C5=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Il({type:t});static \u0275inj=El({providers:[Cs,_m],imports:[ec,rc,nc,Kl]})}return t})();var Qi="quantity",nl="remainder",Zi="threshold-markers",ae=function(t){return t.Donut="donut",t.Horizontal="horizontal",t.Vertical="vertical",t}(ae||{}),il=function(t){return t[t.Small=10]="Small",t[t.Large=15]="Large",t}(il||{}),fr=function(t){return t[t.Small=3]="Small",t[t.Large=4]="Large",t}(fr||{}),Vn=function(t){return t.Warning="warning",t.Critical="critical",t}(Vn||{}),Xr=function(t){return t.Remainder="var(--nui-color-semantic-unknown-bg-hover)",t.Ok="var(--nui-color-chart-one)",t.Warning="var(--nui-color-semantic-warning)",t.Critical="var(--nui-color-semantic-critical)",t}(Xr||{}),Tm=30,Im={top:20,right:25,bottom:20,left:25};var Gm=y(te());var to=y(te()),Fm=y(Dx()),Bm=y(ma()),Um=y(Ix()),sl=y(ol()),Hm=y(un());var Pm=y(me());function Ji(t,e){if(!e||e.length===0)return;if(!(0,Pm.default)(e[0])){t.domain(e);return}if(t.domain(e[0]),!lp(t))return;Ji(t.innerScale,e.slice(1))}var Hs=class{chart;_chartSeriesSet=[];dataIndex={};_scalesIndexByKey={};_scalesIndexById={};get chartSeriesSet(){return this._chartSeriesSet}get scalesIndexByKey(){return this._scalesIndexByKey}get scalesIndexById(){return this._scalesIndexById}constructor(e){this.chart=e}update(e){let r=(0,Fm.default)(e.map(n=>n.id),(n,i,o)=>(0,Um.default)(o,n,i+1));r.length>0&&console.warn("Series set contains duplicate IDs:",r),this._chartSeriesSet=e||[],this.dataIndex=(0,sl.default)(this._chartSeriesSet,n=>n.id),this._scalesIndexByKey=this.buildScalesIndex(this._chartSeriesSet),this._scalesIndexById=(0,sl.default)((0,Bm.default)((0,Hm.default)(this._scalesIndexByKey).map(n=>n.list)),n=>n.id)}getChartSeries(e){return this.dataIndex[e]}updateScaleDomain(e,r){if(!e.isDomainFixed&&e.domainCalculator){let n=this.chartSeriesSet.filter(i=>i.scales[r]===e&&!i.renderer.config.ignoreForDomainCalculation).filter(i=>i.renderState!==U.hidden);if(n.length||this.chart?.configuration?.updateDomainForEmptySeries){let i=e.domainCalculator(n,r,e);Ji(e,i)}}}buildScalesIndex(e){let r={};return(0,to.default)(e,n=>{(0,to.default)(Object.keys(n.scales),i=>{let o=n.scales[i],s=r[i];s||(s={index:{},list:[]},r[i]=s),s.index[o.id]||(s.index[o.id]=o,s.list.push(o))})}),r}updateScaleDomains(){(0,to.default)(Object.keys(this._scalesIndexByKey),e=>{(0,to.default)(this._scalesIndexByKey[e].list,r=>{this.updateScaleDomain(r,e)})})}};var ue=y(te()),Vm=y(aa()),al=y(ct()),zm=y(un());var Vs=class{lasagna;dataManager;interactionDataPointsSubject=new B;rendererSubject=new B;highlightDataPointSubscription;highlightedDataPoints={};renderLayers={};layerIndex={};constructor(e,r){this.lasagna=e,this.dataManager=r,this.highlightDataPointSubscription=this.rendererSubject.subscribe(n=>{n.eventName===Qn&&this.highlightDataPoint(n.data.seriesId,n.data.index)})}update(){let e={};(0,ue.default)(this.dataManager.chartSeriesSet,r=>{let n=this.getSeriesChildContainers(r.id);Object.values(r.scales).findIndex(o=>{if(typeof e[o.id]>"u"){let s=o.isDomainValid();s||console.warn("Invalid scale domain detected for scale:",o),e[o.id]=s}return!e[o.id]})===-1&&r.renderer.draw({dataSeries:r,containers:n,scales:r.scales},this.rendererSubject)})}updateSeriesContainers(){this.layerIndex=this.buildLayerIndex(this.dataManager.chartSeriesSet),this.removeUnusedLayers(),this.addNeededLayers(),this.updateLayerContents()}emitInteractionDataPoints(e){let r=!1,n=this.dataManager.chartSeriesSet.reduce((i,o)=>{let s={};(0,ue.default)(Object.keys(e.values),c=>{let f=o.scales[c].id;s[c]=st.getInteractionValues(e.values[c],f)});let a=St;o.data&&o.data.length>0&&(a=o.renderer.getDataPointIndex(o,s,o.scales));let u=o.renderer.getDataPointPosition(o,a,o.scales),l={seriesId:o.id,dataSeries:o,index:a,data:a>=0?o.data[a]:null,position:u};if(e.interactionType===F.MouseMove){let c=this.highlightedDataPoints[o.id];!(0,al.default)(a)&&((0,al.default)(c)||a===St||a!==c.index)&&(r=!0,this.rendererSubject.next({eventName:Qn,data:l}))}return i[o.id]=l,i},{});(e.interactionType!==F.MouseMove||r)&&this.interactionDataPointsSubject.next({interactionType:e.interactionType,dataPoints:n}),r&&(this.highlightedDataPoints=n)}highlightDataPoint(e,r){let n=this.getSeriesChildContainers(e),i=this.dataManager.getChartSeries(e),o={dataSeries:i,containers:n,scales:i.scales,parentContainer:this.renderLayers.data};i.renderer.highlightDataPoint(o,r,this.rendererSubject)}setSeriesStates(e){(0,ue.default)(e,({seriesId:r,state:n})=>{let i=this.dataManager.getChartSeries(r);if(!i)return;let o=this.getSeriesChildContainers(r),s=i.renderer.getContainerStateStyles(n);(0,ue.default)((0,zm.default)(o),a=>{a.attrs(s)}),i.renderer.setSeriesState(o,n)})}destroy(){this.highlightDataPointSubscription&&this.highlightDataPointSubscription.unsubscribe(),this.rendererSubject&&this.rendererSubject.complete()}buildLayerIndex(e){let r={};return(0,ue.default)(e,n=>{(0,ue.default)(n.renderer.getRequiredLayers(),i=>{if(ut[i.name]&&!(0,Vm.default)(ut[i.name],i))throw new Error(`Custom definition detected for render layer "${i.name}". Custom layers must use a name not already taken by the predefined layer set.`);let o=r[i.name];o||(o={seriesUsing:[],layerDefinition:i},r[i.name]=o),o.seriesUsing.push(n)})}),r}removeUnusedLayers(){(0,ue.default)(Object.keys(this.renderLayers),e=>{this.layerIndex[e]||(this.lasagna.removeLayer(e),delete this.renderLayers[e])})}addNeededLayers(){(0,ue.default)(this.layerIndex,e=>{this.renderLayers[e.layerDefinition.name]||(this.renderLayers[e.layerDefinition.name]=this.lasagna.addLayer(e.layerDefinition))})}updateLayerContents(){(0,ue.default)(Object.keys(this.renderLayers),e=>{let n=this.renderLayers[e].selectAll("g.data-series-container").data(this.layerIndex[e].seriesUsing,i=>i.id).order();n.enter().append("g").attrs({id:i=>this.getChildContainerId(e,i.id),class:"data-series-container"}),n.exit().remove()})}getSeriesChildContainers(e){let r={};return(0,ue.default)(Object.keys(this.renderLayers),n=>{let i=this.renderLayers[n];r[n]=i.selectAll(`#${n}-${st.cssEscape(e)}`)}),r}getChildContainerId(e,r){return e+"-"+r}};var zs=class extends lt{renderEngine;isChartInView=!0;lastInteractionValuesPayload;destroy$=new B;initialize(){this.renderEngine=this.chart.getRenderEngine(),this.chart.getEventBus().getStream(qt).pipe(P(this.destroy$)).subscribe(e=>{this.lastInteractionValuesPayload=e.data,this.isChartInView&&this.chart.getRenderEngine().emitInteractionDataPoints(this.lastInteractionValuesPayload)}),this.renderEngine.interactionDataPointsSubject.pipe(P(this.destroy$)).subscribe(e=>{this.chart.getEventBus().getStream(Nt).next({data:e})}),this.renderEngine.rendererSubject.pipe(P(this.destroy$)).subscribe(e=>{this.chart.getEventBus().getStream(e.eventName).next({data:e.data})}),this.chart.getEventBus().getStream(xe).pipe(P(this.destroy$)).subscribe(e=>{this.isChartInView=e.data.isChartInView,this.isChartInView&&this.lastInteractionValuesPayload&&this.chart.getRenderEngine().emitInteractionDataPoints(this.lastInteractionValuesPayload)})}update(){this.renderEngine.updateSeriesContainers(),this.renderEngine.update()}updateDimensions(){this.renderEngine.update()}destroy(){this.renderEngine.destroy(),this.destroy$.next(),this.destroy$.complete()}};var zn=class{grid;configuration;eventBus=new Nn;element;target;filterDefs;dataManager;renderEngine;updateSubject=new Ge([]);updateDimensionsSubject=new B;seriesStatesSubject=new Ge([]);plugins=[];constructor(e,r){if(this.grid=e,this.configuration=r,!e)throw new Error("Grid has to be defined!");e.updateChartDimensionsSubject=this.updateDimensionsSubject,e.eventBus=this.eventBus}getEventBus(){return this.eventBus}getDataManager(){return this.dataManager}getRenderEngine(){return this.renderEngine}getGrid(){return this.grid}addPlugin(e){e.chart=this,this.plugins.push(e)}removePlugin(e){let r=this.plugins.findIndex(n=>n instanceof e);r!==-1&&(this.plugins[r].destroy(),this.plugins.splice(r,1))}addPlugins(...e){for(let r of e)this.addPlugin(r)}removePlugins(...e){for(let r of e)this.removePlugin(r)}hasPlugin(e){return this.plugins.findIndex(r=>r instanceof e)!==-1}build(e){this.element=e,this.target=H(this.element).append("svg").attrs({class:"nui-chart",height:"100%",width:"100%"}),this.configureCssFilters(),this.buildGrid(),this.dataManager=this.buildDataManager(),this.renderEngine=this.buildRenderEngine(this.grid.getLasagna(),this.dataManager);let r=new zs;r.chart=this,this.plugins.unshift(r);for(let i of this.getGrid().buildPlugins(this))this.addPlugin(i);this.initialize();let n=()=>P(this.getEventBus().getStream(Re));this.updateSubject.pipe(n()).subscribe(i=>this.onUpdate(i)),this.updateDimensionsSubject.pipe(n()).subscribe(()=>this.onUpdateDimensions()),this.seriesStatesSubject.pipe(n()).subscribe(i=>this.onSetSeriesStates(i))}configureCssFilters(){this.filterDefs=this.target?.append("defs"),this.filterDefs?.append("filter").attr("id",Bs.Grayscale).append("feColorMatrix").attr("type","matrix").attr("values",mm)}buildDataManager(){return new Hs(this)}buildGrid(){this.target&&(this.grid.target(this.target),this.grid.build(),this.updateTargetDimensions(this.grid.config().dimension))}buildRenderEngine(e,r){return new Vs(e,r)}update(e){this.updateSubject.next(e)}updateDimensions(){this.updateDimensionsSubject.next()}initialize(){(0,Gm.default)(this.plugins,e=>{e.initialize()})}destroy(){this.eventBus.getStream(Re).next({data:null}),this.eventBus.destroy(),this.plugins.forEach(e=>e.destroy()),this.target?.remove(),this.target=void 0}setSeriesStates(e){this.seriesStatesSubject.next(e),this.eventBus.getStream(ln).next({data:e})}onUpdate(e){this.dataManager.update(e),this.grid.scales=this.dataManager.scalesIndexByKey,this.dataManager.updateScaleDomains(),this.grid.updateRanges(),this.plugins.forEach(r=>r.update())}onUpdateDimensions(){let e=this.grid.config().dimension;this.updateTargetDimensions(e);let r={};e.autoHeight&&(r.height=this.element.clientHeight),e.autoWidth&&(r.width=this.element.clientWidth),this.grid.updateDimensions(r),this.plugins.forEach(n=>n.updateDimensions())}updateTargetDimensions(e){e.autoHeight||this.target?.style("height",e.outerHeight()+"px"),e.autoWidth||this.target?.style("width",e.outerWidth()+"px")}onSetSeriesStates(e){this.renderEngine.setSeriesStates(e)}};var Ym=y(te()),$m=y(ol()),qm=y(un());var hr=function(t){return t.ToggleSeries="ToggleSeries",t.ResetVisibleSeries="ResetVisibleSeries",t.EmphasizeSeries="EmphasizeSeries",t}(hr||{}),Gn=class{seriesId;series;emphasisState;visible;constructor(e,r,n=U.default,i=!0){this.seriesId=e,this.series=r,this.emphasisState=n,this.visible=i}get state(){return this.visible?this.emphasisState:U.hidden}};var jr=class t{chart;palette;markers;static getLabel(e,r,n,i,o){if(!r||e.data.length===0)return null;let s=e.accessors.data?.[o||n];if(!s)return null;let a=r.index<0?e.data.length-1:r.index,u=e.data[a],l=s(u,a,e.data,e),c=e.scales[n];if(!c||!i)return l;let f=c.formatters[i];return f?f(l):l}highlightedDataPoints;isLegendActive=!1;inputSeriesSet=[];legendSeriesSet=[];chartAssistSubject=new B;syncHandlerMap;getVisibleSeriesWithLegendBackup;syncSubscription;legendInteractionAssist;onEvent;constructor(e,r,n=Jp(),i=cr()){this.chart=e,this.palette=n,this.markers=i,this.configureChartEventSubscriptions(e.getEventBus()),r&&(this.seriesProcessor=r),this.legendInteractionAssist=new ul(this),this.syncHandlerMap={[hr.EmphasizeSeries]:this.emphasizeSeries,[hr.ResetVisibleSeries]:this.resetVisibleSeries,[hr.ToggleSeries]:this.toggleSeries}}get renderStatesIndex(){return this.legendInteractionAssist.renderStatesIndex}legendLabelData$(e){let r=this.chart.getEventBus().getStream(Nt).asObservable().pipe(_l(i=>i.data.interactionType===F.MouseMove),bl(i=>i.data.dataPoints[e.id])),n=i=>i&&i.index>=0;return r.pipe(wl(i=>n(i)?na(i.data):na(e.data&&e.data.length?e.data[e.data.length-1]:null)))}seriesProcessor(e){return e}update(e,r=!0){this.inputSeriesSet=e;let n=this.seriesProcessor(e.map(o=>K(q({},o),{data:o.data||[]})));this.legendSeriesSet=n.filter(o=>o.showInLegend||typeof o.showInLegend>"u"),r&&this.legendInteractionAssist.update(n);let i=n.map(o=>Object.assign({renderState:this.renderStatesIndex[o.id]?.state},o));this.chart.update(i),this.publishRenderStates()}toggleSeries=(e,r)=>{this.legendInteractionAssist.setGroupVisibility(e,r),this.update(this.inputSeriesSet,!1),this.chartAssistSubject.next({type:hr.ToggleSeries,payload:{seriesId:e,visible:r}})};resetVisibleSeries=()=>{this.legendInteractionAssist.resetSeries(),this.publishRenderStates(),this.chartAssistSubject.next({type:hr.ResetVisibleSeries,payload:{}})};emphasizeSeries=e=>{this.legendInteractionAssist.emphasizeSeries(e),this.publishRenderStates(),this.chartAssistSubject.next({type:hr.EmphasizeSeries,payload:{seriesId:e}})};isSeriesHidden(e){return this.legendInteractionAssist.isSeriesHidden(e)}seriesTrackByFn(e,r){return r.id}getHighlightedValue(e,r,n,i){if(!this.highlightedDataPoints)return;let o=this.highlightedDataPoints[e.id];return t.getLabel(e,o,r,n,i)}getVisibleSeriesWithLegend=()=>this.legendSeriesSet.filter(e=>!this.isSeriesHidden(e.id));syncWithChartAssist(e){this.getVisibleSeriesWithLegendBackup=this.getVisibleSeriesWithLegend,this.getVisibleSeriesWithLegend=e.getVisibleSeriesWithLegend,this.syncSubscription=e.chartAssistSubject.pipe(P(e.chart.getEventBus().getStream(Re))).subscribe(r=>{let n=Object.keys(r.payload).map(i=>r.payload[i]);this.syncHandlerMap[r.type](...n)})}unsyncChartAssist(){this.getVisibleSeriesWithLegend=this.getVisibleSeriesWithLegendBackup,this.syncSubscription&&this.syncSubscription.unsubscribe()}configureChartEventSubscriptions(e){let r={[Nt]:n=>{n.interactionType===F.MouseMove&&(this.highlightedDataPoints=Object.assign({},n.dataPoints))},[De]:n=>{n.index>=0?this.emphasizeSeries(n.seriesId):this.resetVisibleSeries()},[ee]:n=>{this.isLegendActive=n}};(0,Ym.default)(Object.keys(r),n=>{e.getStream(n).subscribe(i=>{r[n](i.data),this.onEvent&&this.onEvent(i)})})}publishRenderStates(){this.chart.setSeriesStates(this.legendInteractionAssist.getSeriesStates())}},ul=class{chartAssist;seriesGroups={};seriesIndex;renderStatesIndex={};constructor(e){this.chartAssist=e}update(e){this.seriesGroups=this.getSeriesGroups(e),this.seriesIndex=(0,$m.default)(e,r=>r.id),this.resetSeries();for(let r of e.filter(n=>n.renderState))this.renderStatesIndex[r.id]=new Gn(r.id,r,r.renderState===U.hidden?U.default:r.renderState,r.renderState!==U.hidden)}getSeriesStates(){return(0,qm.default)(this.renderStatesIndex)}isSeriesHidden(e){let r=this.renderStatesIndex[e];return r&&!r.visible}getSeriesGroups(e){let r={};for(let n of e){let i=n.id.indexOf("__"),o=i>=0?n.id.substring(0,i):n.id;r[o]||(r[o]=[]),r[o].push(n.id)}return r}setGroupState(e,r){if(this.seriesGroups[e])for(let n of this.seriesGroups[e])this.setRenderState(n,r)}setGroupVisibility(e,r){if(this.seriesGroups[e])for(let n of this.seriesGroups[e])this.setVisibility(n,r)}emphasizeSeries(e){for(let r of Object.keys(this.seriesGroups))this.setGroupState(r,r===e?U.emphasized:U.deemphasized)}resetSeries(){let e=this.chartAssist.getVisibleSeriesWithLegend();if(e.length===1)this.emphasizeSeries(e[0].id);else for(let n of Object.keys(this.seriesGroups))this.setGroupState(n,U.default)}setRenderState(e,r){let n=this.renderStatesIndex[e];n?n.emphasisState=r:(n=new Gn(e,this.seriesIndex[e],r),this.renderStatesIndex[e]=n)}setVisibility(e,r){let n=this.renderStatesIndex[e];n?n.visible=r:(n=new Gn(e,this.seriesIndex[e],U.default,r),this.renderStatesIndex[e]=n)}};var Wr=class{className;color;width;visible=!0;constructor(e){this.className=e}};var Yn=class{_width=0;_height=0;margin={top:0,right:0,bottom:0,left:0};padding={top:0,right:0,bottom:0,left:0};marginLocked={top:!1,right:!1,bottom:!1,left:!1};autoWidth=!0;autoHeight=!0;width(e){return e===void 0?this._width:(this._width=e,this)}height(e){return e===void 0?this._height:(this._height=e,this)}outerWidth(e){let r=this.margin.right+this.margin.left;return e===void 0?this._width+r:(this._width=Math.max(e-r,0),this)}outerHeight(e){let r=this.margin.top+this.margin.bottom;return e===void 0?this._height+r:(this._height=Math.max(e-r,0),this)}};var dr=class{interactive=!0;dimension=new Yn;borders={top:void 0,bottom:void 0,left:void 0,right:void 0};cursor="crosshair";disableRenderAreaHeightCorrection=!1;disableRenderAreaWidthCorrection=!1};function Xm(t,e){let r=t.text(),n=r.split(""),i=t.text("").append("tspan").attr("class",`${Qe} ellipsis`).text("..."),o=t.insert("tspan",":first-child").attr("class",`${Qe} text`).text(r),s=e.ellipsisWidth+e.horizontalPadding*2,a=n.length,u=(o?.node()?.getComputedTextLength()||0)+e.horizontalPadding*2;for(;n.length&&(u>e.widthLimit||n[n.length-1]===" ");)n.pop(),o.text(n.join("")),u=s+(o?.node()?.getComputedTextLength()||0);n.length===a&&i.remove()}var Kr=class{visible=!0;gridTicks=!1;tickSize=5;tickLabel={horizontalPadding:0,overflowHandler:Xm};fit=!1;_approximateTicks=5;get approximateTicks(){return this._approximateTicks}set approximateTicks(e){this._approximateTicks=parseInt(e,10)}padding=0};var dt=(()=>{class t extends dr{static DEFAULT_MARGIN={top:0,right:5,bottom:20,left:30};static DEFAULT_PADDING={left:0,right:0,top:5,bottom:5};axis={top:new Kr,right:new Kr,bottom:new Kr,left:new Kr};interactionPlugins=!0;constructor(){super(),this.dimension.padding=Object.assign({},t.DEFAULT_PADDING),this.dimension.margin=Object.assign({},t.DEFAULT_MARGIN),this.borders.bottom=new Wr("nui-chart-border nui-chart-border--thick"),this.borders.left=new Wr("nui-chart-border nui-chart-border--thick"),this.borders.left.visible=!1,this.axis.left.gridTicks=!0,this.axis.left.tickSize=0,this.axis.left.padding=10,this.axis.right.fit=!0,this.axis.right.tickSize=0,this.axis.right.padding=10,this.axis.bottom.tickLabel.horizontalPadding=5}}return t})();var ll=y(Wm());var Km=y(ma()),Qm=y(Ls());function Zm(t,e){if(e.isContinuous()){let n=t.filter(s=>s!==se);if(n.length===0)return se;let i=Oe(n.filter(s=>typeof s[0]<"u").map(s=>s[0])),o=ke(n.filter(s=>typeof s[1]<"u").map(s=>s[1]));return[i,o]}let r=Math.max(...t.map(n=>n.length));return Array.from(Array(r)).map((n,i)=>{let o=t.map(s=>i<s.length?s[i]:[]);return(0,Qm.default)((0,Km.default)(o))})}function Yw(t,e){return t.reduce((r,n)=>{for(let i of Object.keys(n.scales)){if(i===e)continue;let o=n.scales[i];o.isDomainFixed&&(r[i]||(r[i]=[]),(0,ll.default)(r[i],o)===-1&&r[i].push(o))}return r},{})}var cl=(t,e,r)=>{let n=Yw(t,e),i=t.map(o=>{let s=Object.keys(n).reduce((a,u)=>{let l=o.scales[u];return l&&l.isContinuous()&&(0,ll.default)(n[u],l)!==-1&&(a[u]=l),a},{});return o.renderer.getDomainOfFilteredData(o,s,e,o.scales[e])});return Zm(i,r)},RG=t=>(e,r,n)=>{let i=cl(e,r,n);return[Math.min(i[0],t[0]),Math.max(i[1],t[1])]};var Ce=class{id;domainCalculator=cl;formatters={};isDomainFixed;scaleUnits;isTimeseriesScale=!1;isReversed=!1;_fixDomainValues=[];_d3Scale;constructor(e){this.id=e||st.uuid(),this._d3Scale=this.createD3Scale()}get d3Scale(){return this._d3Scale}get fixDomainValues(){return this._fixDomainValues}setFixDomainValues(e){e.length>1&&(this.domain([e[0],e[e.length-1]]),this.isDomainFixed=!0),this._fixDomainValues=e}range(e){return e?(this._d3Scale.range(this.isReversed?e.reverse():e),this):this._d3Scale.range()}domain(e){return e?(this._d3Scale.domain(e),this):this._d3Scale.domain()}fixDomain(e){return this.domain(e),this.isDomainFixed=!0,this}isDomainValid(){return this.domain().findIndex(e=>e===void 0)===-1}reverse(){return this.reversed(!this.isReversed)}reversed(e){return typeof e>"u"?this.isReversed:(this.isReversed=e,this)}};var Kt=class extends Ce{constructor(e){super(e),this.formatters.tick=r=>r?.toLocaleString()}createD3Scale(){return Ii()}convert(e){return this._d3Scale(e)}invert(e){return this._d3Scale.invert(e)}isContinuous(){return!0}isDomainValid(){return this.domain().findIndex(e=>isNaN(e))===-1}};var Jm=y(ct()),tg=y(co());var Qr=class extends Ce{innerScale;constructor(e){super(e),this.formatters.tick=r=>{if((0,Jm.default)(r))throw new Error("Can't format bandFormatScale");return(0,tg.default)(r)}}createD3Scale(){return or()}convert(e,r=.5){return this._d3Scale(e)+r*this.bandwidth()}invert(e){let r=this._d3Scale.domain();if(this.range()[0]<this.range()[1]){let n=this.getRangeMidPoints(r.map(this._d3Scale));return r[Gt(n,e)]}else{let n=this.getRangeMidPoints(r.map((i,o)=>this._d3Scale(r[r.length-1-o])));return r[r.length-1-Gt(n,e)]}}range(e){let r=e?super.range(e):super.range();return e&&this.innerScale&&this.innerScale.range([0,this.bandwidth()]),r}round(e){return e?(this._d3Scale.round(e),this):this._d3Scale.round()}padding(e){return this._d3Scale.paddingInner(e),this._d3Scale.paddingOuter(e/2),this}align(e){return e?(this._d3Scale.align(e),this):this._d3Scale.align()}bandwidth(){return this._d3Scale.bandwidth()}step(){return this.domain().length?Math.abs(this.range()[1]-this.range()[0])/this.domain().length:0}copyToLinear(){let e=new Kt;return e.domain(this.range()).range(this.range()),e}bandTicks(){let e=[],r=this.range()[0],n=this.step();for(let i=0;i<=this.domain().length;i++)e.push(r+i*n);return e}isContinuous(){return!1}getRangeMidPoints(e){return e.slice(1).map(r=>r-this._d3Scale.step()*this._d3Scale.paddingInner()/2)}};var pg=y(da()),mg=y(me()),gg=y(ge());var fg=y(Hx()),fl=y(te()),$s=y(ge()),hg=y(lo()),$n=y(ct()),dg=y(Ls());var eg=(()=>{class t{target;interactiveArea;gridMargin;static CONTAINER_CLASS="mouse-interactive-area";active=new Ge(!1);interaction=new Ge({type:F.Click,coordinates:{x:0,y:0}});isActive=!1;constructor(r,n,i,o){this.target=r,this.interactiveArea=n,this.gridMargin=o,this.interactiveArea.style("cursor",i).classed(t.CONTAINER_CLASS,!0),this.target.on("mouseover",this.onMouseOver).on("mouseout",this.onMouseOut).on(F.MouseDown,()=>this.onMouseInteraction(F.MouseDown)).on(F.MouseUp,()=>this.onMouseInteraction(F.MouseUp)).on(F.MouseMove,()=>this.onMouseInteraction(F.MouseMove)).on(F.Click,()=>this.onMouseInteraction(F.Click))}onMouseInteraction=r=>{if(L.target.classList.contains(Qe))return;let n=0,i=0,o=parseInt(this.interactiveArea.attr("width"),10)||0,s=parseInt(this.interactiveArea.attr("height"),10)||0;if(/firefox/i.test(navigator.userAgent)){let u=n+L.offsetX-(this.gridMargin?.left||0);u=u>o?o:u,n=u<0?0:u;let l=i+L.offsetY-(this.gridMargin?.top||0);l=l>s?s:l,i=l<0?0:l}else{let u=fi(L.currentTarget),l=u[0]>o?o:u[0];n=l<0?0:l;let c=u[1]>s?s:u[1];i=c<0?0:c}this.interaction.next({type:r,coordinates:{x:n,y:i}})};onMouseOver=()=>{this.isActive||L.target.classList.contains(Qe)||(this.isActive=!0,this.active.next(!0))};onMouseOut=()=>{if(!this.isActive)return;let r=L.relatedTarget;for(;r;){if(r===this.target.node())return;r=r.parentNode}this.isActive=!1,this.active.next(!1)};onMouseEnter=()=>{this.onMouseOver()};onMouseLeave=()=>{this.onMouseOut()}}return t})();var rg=y(xr());var ng=(t,e,r)=>{let n=(i,o,s)=>{let a=r(i,o,s),u=(0,rg.default)(s);Ji(u,a);let c=e(u.d3Scale).scale().ticks(t.approximateTicks);if(c.length<=1)return a;let f=c[1]-c[0];return c[0]>a[0]&&(a[0]=c[0]-f),c[c.length-1]<a[1]&&(a[1]=c[c.length-1]+f),a};return n.domainWithTicks=!0,n};var ig=y(da()),og=y(ge());var Gs=(()=>{class t extends lt{static LAYER_NAME="interaction-line";isChartInView=!1;lastInteractionValuesPayload;interactionLineLayer;destroy$=new B;initialize(){this.interactionLineLayer=this.chart.getGrid().getLasagna().addLayer({name:"interaction-line",order:900,clipped:!0}),this.chart.getEventBus().getStream(qt).pipe(P(this.destroy$)).subscribe(r=>{this.lastInteractionValuesPayload=r.data,this.isChartInView&&this.handleLineUpdate()}),this.chart.getEventBus().getStream(xe).pipe(P(this.destroy$)).subscribe(r=>{this.isChartInView=r.data.isChartInView,this.isChartInView&&this.lastInteractionValuesPayload&&this.handleLineUpdate()})}handleLineUpdate(){let r=this.chart.getGrid();if(!(r instanceof Qt))throw new Error(`${t.name} requires XYGrid`);let n=r.scales;if(this.lastInteractionValuesPayload.interactionType!==F.MouseMove||(0,og.default)(n))return;let i=(0,ig.default)(n.x.index,{id:r.bottomScaleId});if(!i)throw new Error("xScale is not defined");let o=st.getInteractionValues(this.lastInteractionValuesPayload.values.x,i.id);this.updateLine(this.interactionLineLayer,i,o)}updateLine(r,n,i){let o=[];i&&o.push(i);let s=r.selectAll(`.${t.LAYER_NAME}`).data(o),a=l=>n.convert(l),u={class:t.LAYER_NAME,x1:a,y1:0,x2:a,y2:this.chart.getGrid().config().dimension.height()};s.enter().append("line").merge(s).attrs(u),s.exit().remove()}destroy(){this.chart.getGrid().getLasagna().removeLayer(t.LAYER_NAME),this.destroy$.next(),this.destroy$.complete()}}return t})();var sg=y(ge());var Ys=class extends lt{mouseInteractiveArea;destroy$=new B;interactionValuesActive=!0;constructor(e){super(),this.mouseInteractiveArea=e}initialize(){this.mouseInteractiveArea.active.pipe(P(this.destroy$)).subscribe(e=>{this.chart.getEventBus().getStream(ee).next({data:e})}),this.chart.getEventBus().getStream(ee).pipe(P(this.destroy$)).subscribe(e=>{!e.data&&this.chart.getDataManager().chartSeriesSet&&this.highlightReset()}),this.chart.getEventBus().getStream(Kn).pipe(P(this.destroy$)).subscribe(e=>this.interactionValuesActive=e.data),this.mouseInteractiveArea.interaction.pipe(P(this.destroy$)).subscribe(e=>{let r=this.chart.getGrid().scales;if(!(0,sg.default)(r)){if(this.interactionValuesActive){let n=r.x.list,i=r.y.list,o=e.coordinates.x,s=e.coordinates.y,a=st.getXYValues(n,i,o,s);this.chart.getEventBus().getStream(qt).next({data:{interactionType:e.type,values:a}})}this.chart.getEventBus().getStream(vr).next({data:{interactionType:e.type,coordinates:e.coordinates}})}})}update(){this.highlightReset()}updateDimensions(){this.highlightReset()}destroy(){this.destroy$.next(),this.destroy$.complete()}highlightReset(){this.chart.getEventBus().getStream(qt).next({data:{interactionType:F.MouseMove,values:{}}})}};var lg=y(te()),cg=y(ge());var ag=y(Gx()),ug=(()=>{class t{clipPath;static CONTAINER_CLASS="lasagna-container";static LAYER_CLASS="lasagna-layer";layers=[];container;constructor(r,n){this.clipPath=n,this.container=r.append("g").attr("class",`${t.CONTAINER_CLASS} pointer-events`)}addLayer(r){return this.layers=(0,ag.default)(this.layers.concat(r),"order"),this.update(),this.getLayerContainer(r.name)}removeLayer(r){let n=this.layers.findIndex(i=>i.name===r);n!==-1&&(this.layers.splice(n,1),this.update())}getLayerContainer(r){return this.container.select(`.${t.LAYER_CLASS}-${r}`)}getContainer(){return this.container}update(){let r=this.container.selectAll(`g.${t.LAYER_CLASS}`).data(this.layers,n=>n.name).order();r.enter().append("g").attrs({class:n=>`${t.LAYER_CLASS} ${t.LAYER_CLASS}-${n.name}`,"clip-path":n=>n.clipped?`url(#${this.clipPath})`:"","pointer-events":"none"}),r.exit().remove()}}return t})();var pr=.5,mr=(()=>{class t{static GRID_CLASS_NAME="nui-chart-grid";static DEFAULT_BORDER_CLASS_NAME="nui-chart-border";static RENDERING_AREA_CLIP_PATH_PREFIX="clip-path_";static GRID_ELEMENTS_LAYER_NAME="grid-elements";static RENDERING_AREA_LAYER_NAME="rendering-area";static RENDER_AREA_HEIGHT_CORRECTION=1;static RENDER_AREA_WIDTH_CORRECTION=1;static TICK_DIMENSION_CORRECTION=1;updateChartDimensionsSubject;eventBus;container;renderingAreaClipPath;renderingArea;interactiveArea;lasagna;gridElementsLayer;borders={};_scales;_config;_target;getInteractiveArea(){return this.interactiveArea}getLasagna(){return this.lasagna}set scales(r){this._scales=r}get scales(){return this._scales}config(r){return r===void 0?this._config:(this._config=r,this)}target(r){return r===void 0?this._target:(this._target=r,this)}build(){if(!this.config()){let i=new dr;this.config(i)}this.container=this._target.append("g").attrs({class:t.GRID_CLASS_NAME});let r=t.RENDERING_AREA_CLIP_PATH_PREFIX+st.uuid();this.lasagna=new ug(this.container,r),this.renderingArea=this.buildRenderingArea(r),this.adjustRenderingArea(),this.gridElementsLayer=this.lasagna.addLayer({name:t.GRID_ELEMENTS_LAYER_NAME,order:100,clipped:!1});let n=this.buildBorders(this.gridElementsLayer);return n&&(this.borders=n),this}buildPlugins(r){return[]}update(){return(0,cg.default)(this.scales)?this:(this.updateBorders(),this.adjustRenderingArea(),this)}updateDimensions(r){let n=this.config().dimension;return r.width&&n.outerWidth(r.width-this.getOuterWidthDimensionCorrection()),r.height&&n.outerHeight(r.height),this.adjustRenderingArea(),this.updateRanges(),this}updateRanges(){return this.update(),this}getOuterWidthDimensionCorrection(){return t.TICK_DIMENSION_CORRECTION}buildBorders(r){if(!this.config()||!this.config().borders)return;let n=this.config().borders,i={},o=Object.keys(n);return(0,lg.default)(o,s=>{n[s]&&(i[s]=this.createBorder(r,n[s])??void 0)}),i}adjustRenderingArea=()=>{let r=this.config().dimension,n=this.config().disableRenderAreaHeightCorrection,i=this.config().disableRenderAreaWidthCorrection,o={width:Math.max(0,r.width()),height:Math.max(0,r.height()+(n?0:t.RENDER_AREA_HEIGHT_CORRECTION))};n||(o.y=-t.RENDER_AREA_HEIGHT_CORRECTION);let s=K(q({},o),{width:Math.max(0,r.width()-(i?0:t.RENDER_AREA_WIDTH_CORRECTION))});this.renderingAreaClipPath.attrs(o),this.renderingArea.attrs(s)};buildRenderingArea(r){return this.renderingAreaClipPath=this._target.append("clipPath").attr("id",r).append("rect"),this.lasagna.addLayer({name:t.RENDERING_AREA_LAYER_NAME,order:-1,clipped:!0}).append("rect").attrs({"pointer-events":"all",fill:"transparent"})}createBorder(r,n){let i=r.append("line").attr("class",n.className||t.DEFAULT_BORDER_CLASS_NAME);return n.width&&i.style("stroke-width",n.width),n.color&&i.style("stroke",n.color),i.node()}updateBottomBorder(){if(!this.borders.bottom)throw new Error("BottomBorder is not defined");H(this.borders.bottom).attrs({x1:0,y1:this.config().dimension.height()-pr,x2:this.config().dimension.width()+t.TICK_DIMENSION_CORRECTION,y2:this.config().dimension.height()-pr,class:this._config.borders.bottom.className||t.DEFAULT_BORDER_CLASS_NAME}).classed("hidden",!this._config.borders.bottom?.visible)}updateBorders(){this.borders.bottom&&this.updateBottomBorder(),this.borders.top&&H(this.borders.top).attrs({x1:0,y1:pr,x2:this.config().dimension.width()+t.TICK_DIMENSION_CORRECTION,y2:pr}).classed("hidden",!this._config.borders.top?.visible),this.borders.right&&H(this.borders.right).attrs({x1:this.config().dimension.width()-pr,y1:0,x2:this.config().dimension.width()-pr,y2:this.config().dimension.height()+t.TICK_DIMENSION_CORRECTION}).classed("hidden",!this._config.borders.right?.visible),this.borders.left&&H(this.borders.left).attrs({x1:pr,y1:0,x2:pr,y2:this.config().dimension.height()+t.TICK_DIMENSION_CORRECTION}).classed("hidden",!this._config.borders.left?.visible)}}return t})();var Qt=(()=>{class t extends mr{static TICK_LABEL_OVERFLOW_DEBOUNCE_INTERVAL=200;axisX={};axisYLeft={};axisYRight={};gridY={};gridX={};_bottomScaleId;_leftScaleId;_rightScaleId;reconcileMarginsDebounce;handleTickLabelOverflowDebounceIndex={};get bottomScaleId(){if(this._bottomScaleId)return this._bottomScaleId;if(!(0,$s.default)(this.scales))return this.scales.x.list[0].id}set bottomScaleId(r){this._bottomScaleId=r}get leftScaleId(){if(this._leftScaleId)return this._leftScaleId;if(!(0,$s.default)(this.scales))return this.scales.y.list[0].id}set leftScaleId(r){this._leftScaleId=r}get rightScaleId(){return this._rightScaleId}set rightScaleId(r){this._rightScaleId=r}set scales(r){this._scales=r,this._scales&&Object.keys(this._scales).forEach(n=>{let i=this.config().axis.left,o;n!=="x"&&n!=="y"||this._scales[n]?.list?.filter(s=>s instanceof Kt).forEach(s=>{s?.id===this.leftScaleId?(i=this.config().axis.left,o=Oo):s?.id===this.rightScaleId?(i=this.config().axis.right,o=si):s?.id===this.bottomScaleId&&(i=this.config().axis.bottom,o=ko),s.domainCalculator&&!up(s.domainCalculator)&&i.gridTicks&&(s.__domainCalculatedWithTicks=!0,s.domainCalculator=ng(i,o,s.domainCalculator))})})}get scales(){return this._scales}config(r){return r===void 0?this._config:(this._config=r,this)}constructor(r){super(),this.config(r||new dt)}build(){super.build(),this.config().interactive&&(this.interactiveArea=this.renderingArea),this.buildAxes(this.gridElementsLayer),this.recalculateMargins(this.container);let r=()=>P(this.eventBus.getStream(Re));return this.eventBus.getStream(ln).pipe(r()).subscribe(n=>{let i=this.handleSeriesStateChange(n);this.eventBus.getStream(sc).next({data:i})}),this}handleSeriesStateChange(r){if(!this.rightScaleId)return;let n=[{scaleId:this.leftScaleId,element:this.axisYLeft.group},{scaleId:this.rightScaleId,element:this.axisYRight?.group}],i=this.calculateAxesStyles(r,n);for(let o of n)o.scaleId&&o.element.attrs(i[o.scaleId]);return i}calculateAxesStyles(r,n){let o=r.data.filter(s=>s.state===U.emphasized&&s.series).map(s=>s.series);if(o.length>0){let s=(0,dg.default)(o.map(a=>a?.scales.y).filter(a=>!!a));if(s.length<=0)return{};for(let a of s)if(a.id===this.leftScaleId||a.id===this.rightScaleId)return n.reduce((u,l)=>(u[l.scaleId]={opacity:a.id===l.scaleId?1:.1},u),{});return{}}else return n.reduce((s,a)=>(s[a.scaleId]={opacity:1},s),{})}buildPlugins(r){let n=[],i=this.config();return i.interactive&&n.push(new Ys(new eg(this.getLasagna().getContainer(),this.getInteractiveArea(),i.cursor,i.dimension.margin))),i.interactionPlugins&&(n.push(new Gs),n.push(new Zr)),n}update(){return super.update(),this.updateAxes(),this.handleMarginUpdate(),this}drawTicks(r,n,i,o){if(r.visible){let s=o(i.d3Scale).ticks(r.approximateTicks).tickSize(0);i.fixDomainValues?.length&&s.tickValues(i.fixDomainValues),s.tickFormat(i.formatters.tick),n.labelGroup.call(s);let a;i instanceof Qr?a=o(i.copyToLinear().d3Scale).tickSize(r.tickSize).tickValues(i.bandTicks()).tickFormat(()=>""):(a=o(i.d3Scale).tickSize(r.tickSize),i.fixDomainValues?.length&&a.tickValues(i.fixDomainValues),a.tickFormat(()=>""),a.ticks(r.approximateTicks)),n.tickGroup.call(a),this.adjustAxisTicks(n.labelGroup,i)}else n.labelGroup.selectAll("*").remove(),n.tickGroup.selectAll("*").remove()}drawGrids(r,n,i,o,s){let a=l=>l.selectAll(".tick line").classed("nui-zero-line",c=>c===0),u=i(o.d3Scale).tickSize(s);if(o.fixDomainValues?.length&&u.tickValues(o.fixDomainValues),u.tickFormat(()=>"").ticks(r.approximateTicks),r.gridTicks){let l=n.tickGroup.call(u);a(l)}else n.tickGroup.selectAll("*").remove()}updateRanges(){if((0,$s.default)(this.scales))return this;let r=this.config().dimension,n=r.padding;return this.scales.x&&(0,fl.default)(this.scales.x.list,i=>{i.range([n.left,r.width()-n.right])}),this.scales.y&&(0,fl.default)(this.scales.y.list,i=>{i.range([r.height()-n.bottom,n.top])}),super.updateRanges(),this}updateXAxis(){let r=this.bottomScaleId?this.scales.x.index[this.bottomScaleId]:void 0,n=this.config().axis;if(!r)throw new Error("xScale is not defined");this.axisX.group.attr("transform",`translate(0, ${this.config().dimension.height()})`),this.axisX.labelGroup.attr("transform",`translate(0, ${n.bottom.tickSize})`),this.drawTicks(n.bottom,this.axisX,r,ko),this.drawGrids(n.bottom,this.gridX,Na,r,this.config().dimension.height()),this.gridX.tickGroup.attr("transform",`translate(0, ${this.config().dimension.height()})`)}updateYAxes(){let r=this.config().axis,n=this.leftScaleId?this.scales.y.index[this.leftScaleId]:void 0;if(!n)throw new Error("yLeftScale is not defined");if(this.axisYLeft.labelGroup.attr("transform",`translate(${-r.left.tickSize-r.left.padding}, 0)`),this.drawTicks(r.left,this.axisYLeft,n,Oo),this.drawGrids(r.left,this.gridY,si,n,this.config().dimension.width()),this.rightScaleId){let i=this.scales.y.index[this.rightScaleId],o=r.right.padding+this.config().dimension.width()+r.right.tickSize;this.axisYRight.labelGroup.attr("transform",`translate(${o}, 0)`),this.axisYRight.tickGroup.attr("transform",`translate(${this.config().dimension.width()}, 0)`),this.drawTicks(r.right,this.axisYRight,i,si)}}updateAxes(){this.target()&&(this.updateXAxis(),this.updateYAxes())}adjustAxisTicks(r,n){let i=[];r.attr("cursor","default"),r.selectAll("g").each(function(){H(this).classed("sw-hidden",!1).classed("tick-hidden-text",!1),i.push(this)}),this.filterRepeatedElements(i).forEach(a=>{H(a).classed("tick-hidden-text",!0)});let s=this.selectAllAxisLabels(r);s.forEach(a=>{let u=H(a);if(u.select("text").attr("x",0).classed(Qe,!0),u.classed("pointer-events",!0),u.select("title").empty()){let l=u.data()[0],c=n.formatters.tick?n.formatters.tick(l):l;u.append("title").text(c)}}),this.handleTickLabelOverflow(r,n,s)}handleTickLabelOverflow(r,n,i){let o=this.config().axis;if(n.id===this.bottomScaleId&&(n.isContinuous()||!o.bottom.tickLabel.overflowHandler)){this.getElementsToHide(i,this._config.dimension.width(),!0).forEach(p=>{let x=H(p);x.classed("tick-hidden-text",!0),x.classed("pointer-events",!1)});return}(n.id===this.rightScaleId||n.id===this.leftScaleId)&&this.getElementsToHide(i,this._config.dimension.height(),!1).forEach(p=>{H(p).classed("sw-hidden",!0)});let s=this.config().dimension.margin,a=0,u=0,l,c=!1,f=!1,h=o.right.tickLabel.maxWidth,d=o.left.tickLabel.maxWidth;if(n.id===this.bottomScaleId){let m=o.bottom.tickLabel.maxWidth,p=n.bandwidth?n.bandwidth():this.getTickDistance(i);(0,$n.default)(m)?a=p:a=p>m?m:p,u=o.bottom.tickLabel.horizontalPadding,l=o.bottom.tickLabel.overflowHandler}else if(n.id===this.rightScaleId&&!o.right.fit){let m=s.right-o.right.padding-o.right.tickSize;(0,$n.default)(h)?a=m:a=m>h?h:m,u=o.right.tickLabel.horizontalPadding,l=o.right.tickLabel.overflowHandler}else if(n.id===this.leftScaleId&&!o.left.fit){let m=s.left-o.left.padding-o.left.tickSize;(0,$n.default)(d)?a=m:a=m>d?d:m,u=o.left.tickLabel.horizontalPadding,l=o.left.tickLabel.overflowHandler}else if(n.id===this.rightScaleId&&o.right.fit&&!(0,$n.default)(h))a=h,u=o.right.tickLabel.horizontalPadding,l=o.right.tickLabel.overflowHandler,f=!0;else if(n.id===this.leftScaleId&&o.left.fit&&!(0,$n.default)(d))a=d,u=o.left.tickLabel.horizontalPadding,l=o.left.tickLabel.overflowHandler,c=!0;else return;if(!l)return;let g=0;if(r.select(".sample-ellipsis").empty()){let m=r.append("text");g=m.classed("sample-ellipsis",!0).attr("opacity",0).append("tspan").text("...").node()?.getComputedTextLength()||0,m.remove()}this.handleTickLabelOverflowDebounceIndex[n.id]&&(clearTimeout(this.handleTickLabelOverflowDebounceIndex[n.id]),this.handleTickLabelOverflowDebounceIndex[n.id]=null),r.classed("tick-hidden-text",!0),i.forEach(m=>{H(m).classed("pointer-events",!1)}),this.handleTickLabelOverflowDebounceIndex[n.id]=setTimeout(()=>{i.forEach(p=>{let x=H(p);x.select("text").call(l,{widthLimit:a,horizontalPadding:u,ellipsisWidth:g}),x.classed("pointer-events",!0)});let m=this._config.dimension.marginLocked;m&&(f||c)&&(this.handleMarginUpdate(),m.right=f,m.left=c),r.classed("tick-hidden-text",!1)},t.TICK_LABEL_OVERFLOW_DEBOUNCE_INTERVAL)}selectAllAxisLabels(r){let n=[];return r.selectAll("g:not(.tick-hidden-text)").each(function(){n.push(this)}),n}getOuterWidthDimensionCorrection(){return this.config().axis.bottom.visible?mr.TICK_DIMENSION_CORRECTION:0}handleMarginUpdate(){let r=(0,fg.default)(this._config.dimension.margin);this.recalculateMargins(this.container),this.reconcileMarginsWithDebounce(r)}hasRightYAxis(){return this.config().axis.right.visible&&this.rightScaleId?.length>0}buildAxes(r){this.gridY.tickGroup=r.append("g").classed("sw-axis sw-axis-grid sw-axis-gridY",!0),this.gridX.tickGroup=r.append("g").classed("sw-axis sw-axis-grid sw-axis-gridX",!0),this.axisX.group=r.append("g").classed("sw-axis sw-axis-x",!0),this.axisX.tickGroup=this.axisX.group.append("g").classed("sw-axis sw-axis-x sw-axis-x-ticks",!0),this.axisX.labelGroup=this.axisX.group.append("g").classed("sw-axis sw-axis-x sw-axis-x-labels",!0),this.axisYLeft.group=r.append("g").classed("sw-axis sw-axis-y sw-axis-y-left",!0),this.axisYLeft.tickGroup=this.axisYLeft.group.append("g").classed("sw-axis sw-axis-y sw-axis-y-ticks",!0),this.axisYLeft.labelGroup=this.axisYLeft.group.append("g").classed("sw-axis sw-axis-y sw-axis-y-labels",!0),this.axisYRight.group=r.append("g").classed("sw-axis sw-axis-y sw-axis-y-right",!0),this.axisYRight.tickGroup=this.axisYRight.group.append("g").classed("sw-axis sw-axis-y sw-axis-y-ticks",!0),this.axisYRight.labelGroup=this.axisYRight.group.append("g").classed("sw-axis sw-axis-y sw-axis-y-labels",!0)}filterRepeatedElements(r){let n=[r[0]];return r.reduce((i,o)=>{let s=H(o).text();return s!==i&&n.push(o),s},r[0]&&H(r[0]).text()),r.filter(i=>n.indexOf(i)===-1)}getElementsToHide(r,n,i){let o=i?"width":"height",s=this.getTextMeasurement(r,o)<n,a=i?this.getMaxTextWidth(r)<this.getTickDistance(r):!1;if(i?s&&a:s)return[];let l=this.elementsFiltering(r,n,o);return r.filter(c=>l.indexOf(c)===-1)}elementsFiltering(r,n,i){let o,s=2,a=u=>i==="width"?this.getMaxTextWidth(u)>this.getTickDistance(u):this.getTextMeasurement(u,i)>n;do if(o=r.filter((u,l)=>l%s===0),s++,o.length===1&&a(o))break;while(a(o));return o}getTextMeasurement(r,n){let i=n==="width"?5:0;return r.reduce((o,s)=>o+s.getBoundingClientRect()[n]+i,0)}getMaxTextWidth(r){return r.length===0?0:Math.max.apply(null,r.map(n=>n.getBoundingClientRect().width))}getTickDistance(r){if(r.length===0)return 0;let n=1/0;return r.map(o=>{let s=o.getAttribute("transform");if((0,hg.default)(s))throw new Error("tick transform is not defined");return parseFloat(s.slice(s.indexOf("(")+1,s.indexOf(",")))}).reduce((o,s)=>{let a=s-o;return a<n&&(n=a),s}),n}recalculateMargins(r){if(!r)return;let n=this._config.dimension,i=this.config().axis,o=n.outerWidth(),s=n.outerHeight();!n.marginLocked?.left&&i.left.fit&&i.left.visible&&(n.margin.left=this.getMaxTextWidth(this.selectAllAxisLabels(this.axisYLeft.labelGroup))+i.left.tickSize+i.left.padding),!n.marginLocked?.right&&i.right.fit&&this.hasRightYAxis()&&(n.margin.right=this.getMaxTextWidth(this.selectAllAxisLabels(this.axisYRight.labelGroup))+i.right.tickSize+i.right.padding);let a=this.bottomScaleId&&this.scales?this.scales.x?.index[this.bottomScaleId]:void 0;i.bottom.fit&&i.bottom.visible&&(a?.isContinuous()||!i.bottom.tickLabel.overflowHandler)&&this.fitBottomAxis(n);let u=n.margin.top,l=n.margin.bottom;n.margin.top=u,n.margin.bottom=l,n.outerWidth(o),n.outerHeight(s);let c=this.config().dimension.margin.left,f=this.config().dimension.margin.top;r.attr("transform",`translate(${c}, ${f})`)}fitBottomAxis(r){let n=this.scales?.x?.list[0].d3Scale;if(!n)return;let i=0,o=0,s=this.axisX.labelGroup.select(".tick:not(.tick-hidden-text):last-child text").node();if(s){i=s.getBoundingClientRect().width,o=n(s.innerHTML)??0;let a=n.range()[1],u=i/2-Math.abs(a-o)/2;r.margin.right=u>0?u:0}}reconcileMarginsWithDebounce(r){this.reconcileMarginsDebounce&&(clearTimeout(this.reconcileMarginsDebounce),this.reconcileMarginsDebounce=null),this.reconcileMarginsDebounce=setTimeout(()=>{this.areMarginsApproximatelyEqual(r,this._config.dimension.margin)||this.updateChartDimensionsSubject?.next()},100)}isApproximatelyEqual=(r,n)=>Math.abs(r-n)<.1;areMarginsApproximatelyEqual(r,n){return this.isApproximatelyEqual(r.top,n.top)&&this.isApproximatelyEqual(r.right,n.right)&&this.isApproximatelyEqual(r.bottom,n.bottom)&&this.isApproximatelyEqual(r.left,n.left)}}return t})();var $w="tick",Zr=(()=>{class t extends lt{formatterName;static LAYER_NAME="interaction-label";areLabelUpdatesEnabled=!0;isChartInView=!1;lastInteractionValuesPayload;interactionLabelLayer;destroy$=new B;elBBox;constructor(r="title"){super(),this.formatterName=r}initialize(){this.interactionLabelLayer=this.chart.getGrid().getLasagna().addLayer({name:t.LAYER_NAME,order:901,clipped:!1}),this.chart.getEventBus().getStream(qt).pipe(P(this.destroy$)).subscribe(r=>{if(r.data.values?.y){let n=this.chart.getGrid(),i=Object.keys(r.data.values.y),o=n.scales.y.list[0];if(o.isTimeseriesScale&&!i.includes(o.id))return}this.lastInteractionValuesPayload=r.data,this.isChartInView&&this.handleLabelUpdate()}),this.chart.getEventBus().getStream(xe).pipe(P(this.destroy$)).subscribe(r=>{this.isChartInView=r.data.isChartInView,this.isChartInView&&this.lastInteractionValuesPayload&&this.handleLabelUpdate()})}handleLabelUpdate(){let r=this.chart.getGrid();if(!(r instanceof Qt))throw new Error(`${t.name} requires XYGrid`);let n=r.scales;if(!this.areLabelUpdatesEnabled||this.lastInteractionValuesPayload.interactionType!==F.MouseMove||(0,gg.default)(n))return;let i=(0,pg.default)(n.x.index,{id:r.bottomScaleId});if(!i)throw new Error("xScale is not defined");let o=st.getInteractionValues(this.lastInteractionValuesPayload.values.x,i.id);this.updateLabel(i,(0,mg.default)(o)?o.slice(0,o.length-1):o)}updateLabel(r,n){let i=this.interactionLabelLayer.select(`.${t.LAYER_NAME}`);if(i.empty()&&n)i=this.buildInteractionLabel(this.interactionLabelLayer);else if(!n){i.remove();return}let s=(r.formatters[this.formatterName]||r.formatters[$w])?.(n);if(!s)throw new Error("labelContent is not defined");let a=i.select("text").text(s);this.elBBox||(this.elBBox=a.node().getBBox());let u=this.chart.getGrid().config().dimension,l=u.height()-this.elBBox.y;a.attr("transform",`translate(0, ${l})`).style("text-anchor","middle");let c=(this.elBBox.height+this.elBBox.y)*2,f=this.elBBox.width+c,h=[f/2,u.width()-f/2],d=Gr(r,n,.5),g=st.clampToRange(d,h);i.attr("transform",`translate(${g},0)`).select("rect").attrs({transform:`translate(0,${l})`,x:-(f/2),y:this.elBBox.y,width:f,height:this.elBBox.height})}destroy(){this.chart.getGrid().getLasagna().removeLayer(t.LAYER_NAME),this.destroy$.next(),this.destroy$.complete()}buildInteractionLabel(r){let n=r.append("g").attr("class",t.LAYER_NAME);return n.append("rect").attr("class",`${t.LAYER_NAME}__rect`),n.append("text").attr("class",`${t.LAYER_NAME}__text`),n}}return t})();var bg=y(xr()),_g=y(Ht()),qs=y(ct());var gr="gauge-label",Ae="gauge-labels",qn="threshold-label";var Xn=class t{static generateThresholdArcData(e){if(!e.length)return[];let r=t.generateArcValues(e),n=[];return ri().sort(null)(r).forEach((s,a)=>{a%2===1&&n.push(s)}),n}static generateArcValues(e){let r=Array(e.length*2-1).fill(0);return e.forEach((n,i)=>{r[i*2]=i===0?n.value:n.value-e[i-1].value}),r}};var xg=y(xr()),vg=y(Ht()),yg=y(ct());var qw={markerRadius:fr.Large,enabled:!0},jn=class extends Se{config;constructor(e={}){super(e),this.config=e,this.config=(0,vg.default)(this.config,qw)}draw(e,r){let n=e.containers[k.data],i=(0,xg.default)(this.config.enabled?e.dataSeries.data:[]);i.sort((u,l)=>u.value-l.value),this.segmentWidth=this.getSegmentWidth(e);let o=this.getInnerRadius(e.scales.r.range(),0),s=Je().outerRadius(this.getOuterRadius(e.scales.r.range(),0)).innerRadius(o>=0?o:0),a=n.selectAll(`circle.${Hn}`).data(Xn.generateThresholdArcData(i));a.exit().remove(),a.enter().append("circle").attr("class",Hn).merge(a).attr("cx",u=>s.centroid(u)[0]).attr("cy",u=>s.centroid(u)[1]).attr("r",this.config.markerRadius).style("fill",(u,l)=>`var(--nui-color-${i[l].hit?"text-light":"icon-default"})`).style("stroke-width",0)}getInnerRadius(e,r){if((0,yg.default)(this.segmentWidth))throw new Error("Can't compute inner radius");let n=e[1]-e[0]-this.segmentWidth;return n>=0?n:0}};var wg=(()=>{class t extends lt{config;static MARGIN_DEFAULT=25;DEFAULT_CONFIG={padding:5,formatterName:gr,disableThresholdLabels:!1};destroy$=new B;lasagnaLayer;constructor(r={}){super(),this.config=r,this.config=(0,_g.default)(this.config,this.DEFAULT_CONFIG)}initialize(){this.lasagnaLayer=this.chart.getGrid().getLasagna().addLayer({name:Ae,order:ut[k.data].order,clipped:!1}),this.chart.getEventBus().getStream(Nt).pipe(P(this.destroy$)).subscribe(r=>{let n=this.lasagnaLayer.select(`.${Ae}`);if(!n.empty()){let i=r.data.dataPoints,o=Object.keys(i).find((s,a)=>i[s].index===Xt)?0:1;n.style("opacity",o)}})}update(){this.drawThresholdLabels()}updateDimensions(){this.drawThresholdLabels()}destroy(){this.destroy$&&(this.destroy$.next(),this.destroy$.complete())}drawThresholdLabels(){let r=this.chart.getDataManager().chartSeriesSet.find(c=>c.renderer instanceof jn);if((0,qs.default)(r)){console.warn("Threshold series is undefined. As a result, threshold labels for the donut gauge will not be rendered.");return}let n=this.lasagnaLayer.select(`.${Ae}`);n.empty()&&(n=this.lasagnaLayer.append("svg:g").attr("class",Ae).style("opacity",0));let o=r?.renderer?.getOuterRadius(r?.scales.r.range()??[0,0],0)+this.config.padding;if((0,qs.default)(o))throw new Error("Radius is undefined");let s=Je().outerRadius(o).innerRadius(o),a=r?.scales.r.formatters[this.config.formatterName]??(c=>c),u=(0,bg.default)(this.config.disableThresholdLabels?[]:r?.data);if((0,qs.default)(u))throw new Error("Gauge threshold series data is undefined");u.sort((c,f)=>c.value-f.value);let l=n.selectAll(`text.${qn}`).data(Xn.generateThresholdArcData(u));l.exit().remove(),l.enter().append("text").attr("class",qn).merge(l).attr("transform",c=>`translate(${s.centroid(c)})`).attr("title",(c,f)=>a(u[f].value)).style("text-anchor",c=>this.getTextAnchor(c.startAngle)).style("dominant-baseline",c=>this.getAlignmentBaseline(c.startAngle)).text((c,f)=>a(u[f].value))}getTextAnchor(r){let n=Math.cos(r-Math.PI/2);return n>.5?"start":n<-.5?"end":"middle"}getAlignmentBaseline(r){let n=Math.sin(r+Math.PI/2);return n>.5?"text-after-edge":n<-.5?"text-before-edge":"central"}}return t})();var Sg=y(xr()),Eg=y(Ht()),hl=y(ct());var Xs=class extends lt{config;DEFAULT_CONFIG={padding:5,formatterName:gr,disableThresholdLabels:!1,flippedLabels:!1};destroy$=new B;lasagnaLayer;isHorizontal=!0;thresholdsSeries;constructor(e={}){super(),this.config=e,this.config=(0,Eg.default)(this.config,this.DEFAULT_CONFIG)}initialize(){this.lasagnaLayer=this.chart.getGrid().getLasagna().addLayer({name:Ae,order:ut[k.data].order,clipped:!1}),this.chart.getEventBus().getStream(ee).pipe(P(this.destroy$)).subscribe(e=>{let r=this.lasagnaLayer.select(`.${Ae}`);r.empty()||r.style("opacity",e.data?1:0)})}update(){this.updateData(),this.drawThresholdLabels()}updateDimensions(){this.updateData(),this.drawThresholdLabels()}destroy(){this.destroy$&&(this.destroy$.next(),this.destroy$.complete())}updateData(){this.thresholdsSeries=this.chart.getDataManager().chartSeriesSet.find(e=>e.id===Zi),this.isHorizontal=this.thresholdsSeries?.scales.x instanceof Kt}drawThresholdLabels(){if((0,hl.default)(this.thresholdsSeries)){console.warn("Threshold series is undefined. As a result, threshold labels for the linear gauge will not be rendered.");return}let e=this.lasagnaLayer.select(`.${Ae}`);e.empty()&&(e=this.lasagnaLayer.append("svg:g").attr("class",Ae).style("opacity",0));let r=(0,Sg.default)(this.config.disableThresholdLabels?[]:this.thresholdsSeries?.data);if((0,hl.default)(r))throw new Error("Gauge threshold series data is undefined");r.pop();let n=this.thresholdsSeries?.scales[this.isHorizontal?"x":"y"].formatters[this.config.formatterName]??(o=>o),i=e.selectAll(`text.${qn}`).data(r);i.exit().remove(),i.enter().append("text").attr("class",qn).merge(i).attr("transform",(o,s)=>`translate(${this.xTranslate(o,s)}, ${this.yTranslate(o,s)})`).attr("title",(o,s)=>n(r[s].value)).style("text-anchor",o=>this.getTextAnchor()).style("dominant-baseline",o=>this.getAlignmentBaseline()).text((o,s)=>n(r[s].value))}xTranslate=(e,r)=>{if(this.isHorizontal){let n=this.thresholdsSeries,i=this.thresholdsSeries?.accessors?.data?.value?.(e,r,n?.data,n);return this.thresholdsSeries?.scales.x.convert(i)}return this.getLabelOffset()};yTranslate=(e,r)=>{if(this.isHorizontal)return this.getLabelOffset();let n=this.thresholdsSeries,i=this.thresholdsSeries?.accessors?.data?.value?.(e,r,n?.data,n);return this.thresholdsSeries?.scales.y.convert(i)};getLabelOffset(){let e=0;if(!this.config.flippedLabels){let n=this.chart.getGrid().config().dimension;e=this.isHorizontal?n.height():n.width()}let r=this.config.padding;return r=this.config.flippedLabels?-r:r,e+r}getTextAnchor(){return this.isHorizontal?"middle":this.config.flippedLabels?"end":"start"}getAlignmentBaseline(){return this.isHorizontal?this.config.flippedLabels?"text-after-edge":"hanging":"central"}};var Jr=class extends Un{constructor(e,r){super(e,r),this.data=K(q({},this.data),{startX:(n,i,o,s)=>this.data.category(n,i,o,s),endX:(n,i,o,s)=>this.data.category(n,i,o,s),thicknessX:(n,i,o,s)=>this.data.thickness?this.data.thickness(n,i,o,s):void 0,startY:(n,i,o,s)=>this.data.start(n,i,o,s),endY:(n,i,o,s)=>this.data.end(n,i,o,s)})}};function dl(t,e=new Kt){let r=new Qr;t&&t.grouped&&(r.padding(.25),r.innerScale=new Qr);let n;return!t||!t.horizontal?n={x:r,y:e}:(r.reverse(),n={x:e,y:r}),n}var pl=y(ct());var Ig=y(Tg());function Mg(t,e="category"){return t.reduce((r,n)=>{let i=n.accessors.data[e],o=n.data.reduce((s,a,u)=>(s.push(i?.(a,u,n.data,n)),s),[]);return(0,Ig.default)(r,o,s=>s.valueOf())},[])}function Jw(t,e){if(t.length===0)return t;let r=Mg(t.filter(n=>(0,pl.default)(n.preprocess)||n.preprocess));return t.reduce((n,i)=>{if(!(0,pl.default)(i.preprocess)&&!i.preprocess)return n;let o=i.accessors.data.category,s=i.accessors.data.value;if(!s)throw new Error("valueAccessor is not defined");let a=i.data.reduce((l,c,f)=>K(q({},l),{[o(c,f,i.data,i)]:f}),{}),u=[];return r.forEach((l,c)=>{let f;if(a[l]!==void 0){f=i.data[a[l]];let h={},d=e(i)?1:0;h.start=n[c],n[c]+=(s(f,a[l],i.data,i)||0)*d,h.end=n[c],f.__bar=h,u.push(f)}}),i.data=u,n},Array(r.length).fill(0)),t}function Dg(t){return Jw(t,e=>!this.isSeriesHidden(e.id))}var eo=class{colorProvider;data;series;constructor(e=He()){this.colorProvider=e,this.data={value:r=>Number.isFinite(r)?r:r.value},this.series={color:this.colorProvider?this.colorProvider.get:void 0}}};var ml=y(ct());var js=class extends mr{build(){return super.build(),this.recenter(),this}updateDimensions(e){let r=this.config().dimension;if((0,ml.default)(e.width)||r.outerWidth(e.width),(0,ml.default)(e.height)||r.outerHeight(e.height),this.scales){let n=this.scales.r;n&&n.list[0].range([0,Math.min(r.width(),r.height())/2])}return this.adjustRenderingArea(),this.updateRanges(),setTimeout(()=>{this.recenter()}),this}adjustRenderingArea=()=>{let e=this.config().dimension,r={width:e.outerWidth(),height:e.outerHeight(),transform:`translate(${-e.outerWidth()/2}, ${-e.outerHeight()/2})`};this.renderingAreaClipPath.attrs(r),this.renderingArea.attrs(r)};recenter(){this.container.attrs({transform:`translate(${this.config().dimension.outerWidth()/2},${this.config().dimension.outerHeight()/2})`})}};function Rg(){let t=new dr;return t.interactive=!1,new js().config(t)}function tS(t,e){if(!t[0])return t;let r=ri().sort(null),o=t[0].data.reduce((s,a)=>(s.push(t.map(u=>e(u)&&!u.excludeFromArcCalculation?u.accessors.data.value(u.data[s.length],s.length,u.data,u):0)),s),[]).map(s=>r(s));return t.map((s,a)=>K(q({},s),{data:s.preprocess===!1?s.data:o.map(u=>K(q({},u[a]),{data:s.data[0]}))}))}function Ng(t){return tS(t,e=>!this.isSeriesHidden(e.id))}function Lg(){return{r:new Kt().fixDomain(ap)}}var Bg=y(ge()),Ug=y(ct());function kg(t,e=il.Large){let r=new dt;return r.interactionPlugins=!1,r.disableRenderAreaHeightCorrection=!0,r.axis.bottom.visible=!1,r.axis.bottom.gridTicks=!1,r.axis.left.visible=!1,r.axis.left.gridTicks=!1,r.borders.left.visible=!1,r.borders.bottom.visible=!1,r.dimension=new Yn,t===ae.Vertical?(r.dimension.autoWidth=!1,r.dimension.width(e)):(r.dimension.autoHeight=!1,r.dimension.height(e)),r}function gl(){return{padding:0,strokeWidth:0,enableMinBarThickness:!1}}var Og=y(xr()),Pg=y(Ht());var eS={markerRadius:fr.Large,enabled:!0},ro=class extends $r{config;constructor(e={}){super(e),this.config=e,this.config=(0,Pg.default)(this.config,eS)}draw(e,r){let n=e.containers[k.unclippedData],i=e.dataSeries,o=i.accessors,s=(0,Og.default)(this.config.enabled?i.data:[]);s.pop();let a=n.selectAll(`circle.${Hn}`).data(s);a.exit().remove(),a.enter().append("circle").attr("class",Hn).merge(a).attr("cx",(u,l)=>e.scales.x.convert(o?.data?.endX?.(u,l,i.data,i))).attr("cy",(u,l)=>e.scales.y.convert(o?.data?.endY?.(u,l,i.data,i))).attr("r",this.config.markerRadius).style("fill",(u,l)=>`var(--nui-color-${s[l].hit?"text-light":"icon-default"})`).style("stroke-width",0)}getRequiredLayers(){return[ut[k.unclippedData]]}};function Fg(){return{strokeWidth:0,enableSeriesHighlighting:!1}}var Eq=(()=>{class t{static DATA_CATEGORY="gauge";static createChartAssist(r,n,i){let o=n===ae.Donut?Rg():new Qt(kg(n,r.linearThickness)),s=o.config(),a=new zn(o),u=!(0,Bg.default)(r.thresholds?.definitions)&&!r.thresholds?.disableMarkers;if(n===ae.Donut)return u&&(a.addPlugin(i??new wg),s.dimension.margin=t.getMarginForLabelClearance(r,n,s.dimension.margin)),new jr(a,Ng);if(u){let l=!!r.labels?.flipped;a.addPlugin(i??new Xs({flippedLabels:l})),s.dimension.margin=t.getMarginForLabelClearance(r,n,s.dimension.margin)}return new jr(a,Dg)}static assembleSeriesSet(r,n){r.value=r.value??0,r.max=r.max??0;let i=t.clampConfigToRange(r),o=t.generateRenderingAttributes(i,n),s,a=[];return i.thresholds&&(s=t.generateThresholdSeries(i,o),a.push(s)),a=[...t.generateQuantityAndRemainderSeriesSet(i,o,s?.activeThreshold),...a],a}static update(r,n){n.value=n.value??0,n.max=n.max??0;let i=t.clampConfigToRange(n),o=t.generateThresholdsData(i);return r.map(a=>a.id===Qi?K(q({},a),{data:[{category:t.DATA_CATEGORY,value:i.value}],activeThreshold:o.activeThreshold,defaultColor:i.defaultQuantityColor||Xr.Ok}):a.id===nl?K(q({},a),{data:[{category:t.DATA_CATEGORY,value:i.max-i.value}]}):a.id===Zi?(a.renderer.config.enabled=!i.thresholds?.disableMarkers,a.renderer.config.markerRadius=i.thresholds?.markerRadius??fr.Large,q(q({},a),o)):a)}static createStandardThresholdsConfig(r,n){return{definitions:{[Vn.Warning]:{id:Vn.Warning,value:r,enabled:!0,color:Xr.Warning},[Vn.Critical]:{id:Vn.Critical,value:n,enabled:!0,color:Xr.Critical}},reversed:!1,disableMarkers:!1,markerRadius:fr.Large}}static getMarginForLabelClearance(r,n,i){if(n===ae.Donut){let l=r.labels?.clearance??Tm,c=Math.max(...Object.values(i),l);return{top:c,right:c,bottom:c,left:c}}let o,s=!!r.labels?.flipped;n===ae.Horizontal?o=s?"top":"bottom":o=s?"left":"right";let a=r.labels?.clearance??Im[o],u=Math.max(i[o],a);return K(q({},i),{[o]:u})}static generateQuantityAndRemainderSeriesSet(r,n,i){return t.generateQuantityAndRemainderData(r).map(s=>{let{quantityAccessors:a,remainderAccessors:u,scales:l,mainRenderer:c}=n;return a.data&&(a.data.color=(f,h,d,g)=>g.activeThreshold?g.activeThreshold.color:g.defaultColor),u.data&&(u.data.color=()=>r.remainderColor||Xr.Remainder),s.id===Qi&&(s.activeThreshold=i,s.defaultColor=r.defaultQuantityColor||Xr.Ok),K(q({},s),{accessors:s.id===Qi?a:u,scales:l,renderer:c})})}static generateThresholdSeries(r,n){let{quantityAccessors:i,scales:o,thresholdsRenderer:s}=n;return K(q({},t.generateThresholdsData(r)),{accessors:i,scales:o,renderer:s,excludeFromArcCalculation:!0,preprocess:!1})}static generateRenderingAttributes(r,n){let i=t.generateRenderingTools(r,n);return{quantityAccessors:i.quantityAccessorFunction(),remainderAccessors:i.remainderAccessorFunction(),mainRenderer:i.mainRendererFunction(),thresholdsRenderer:i.thresholdsRendererFunction(),scales:i.scaleFunction()}}static generateRenderingTools(r,n){let i={enabled:!r.thresholds?.disableMarkers,markerRadius:r.thresholds?.markerRadius},o=r.labels?.formatter;return{[ae.Donut]:{mainRendererFunction:()=>new Se(Fg()),thresholdsRendererFunction:()=>new jn(i),quantityAccessorFunction:()=>new eo,remainderAccessorFunction:()=>new eo,scaleFunction:()=>{let a=Lg();return a.r.formatters[gr]=o,a}},[ae.Horizontal]:{mainRendererFunction:()=>new $r(gl()),thresholdsRendererFunction:()=>new ro(i),quantityAccessorFunction:()=>new Ve,remainderAccessorFunction:()=>new Ve,scaleFunction:()=>{let a=dl({horizontal:!0});return a.x.formatters[gr]=o,a}},[ae.Vertical]:{mainRendererFunction:()=>new $r(gl()),thresholdsRendererFunction:()=>new ro(i),quantityAccessorFunction:()=>new Jr,remainderAccessorFunction:()=>new Jr,scaleFunction:()=>{let a=dl();return a.y.formatters[gr]=o,a}}}[n]}static generateQuantityAndRemainderData(r){return[{id:Qi,data:[{category:t.DATA_CATEGORY,value:r.value}]},{id:nl,data:[{category:t.DATA_CATEGORY,value:r.max-r.value}]}]}static generateThresholdsData(r){if(!r.thresholds)throw new Error("Thresholds are not defined in the gauge config. Unable to generate threshold data.");let{thresholds:n,activeThreshold:i}=t.prepareThresholdsData(r);return{id:Zi,data:[...n,{id:"max",enabled:!0,category:t.DATA_CATEGORY,value:r.max,color:""}],activeThreshold:i}}static prepareThresholdsData(r){let n=Object.values(r.thresholds?.definitions||[]).filter(o=>o.enabled).map(o=>K(q({},o),{category:t.DATA_CATEGORY,hit:r.thresholds?.reversed?o.value<r.value:o.value<=r.value})).sort((o,s)=>o.value-s.value),i=r.thresholds?.reversed?n?.find(o=>!(0,Ug.default)(o.hit)&&!o.hit):n?.slice().reverse().find(o=>o.hit);return{thresholds:n,activeThreshold:i}}static clampConfigToRange(r){let n=r.value;r.value>r.max&&(console.warn(`Configured gauge value ${r.value} is greaterthan configured max ${r.max}. Clamping value to ${r.max}.`),n=r.max),r.value<0&&(console.warn(`Configured gauge value ${r.value} is less than 0. Clamping value to 0.`),n=0);let i=r.thresholds?.definitions||{};return Object.keys(i||{}).forEach(o=>{let s=i[o];s&&(s.value>r.max&&(console.warn(`Configured threshold value ${s.value} for threshold ${o} is greaterthan configured max ${r.max}. Clamping value to ${r.max}.`),s.value=r.max),s.value<0&&(console.warn(`Configured threshold value ${s.value} is less than 0. Clamping value to 0.`),s.value=0))}),K(q({},r),{thresholds:K(q({},r.thresholds),{definitions:i}),value:n})}}return t})();var Hg=class{valueMap;defaultValue;constructor(e,r){this.valueMap=e,this.defaultValue=r,this.reset()}get=e=>this.valueMap[e]||this.defaultValue;reset(){}};var Vg=class{element;svg;constructor(e){this.element=document.createElement("path"),this.setAttributes({class:"nui-chart-element-marker nui-chart--path__outline","vector-effect":"non-scaling-stroke",d:e})}setColor(e){this.setAttributes({fill:e})}setAttributes(e){for(let r of Object.keys(e))this.element.setAttribute(r,e[r]);this.updateSvg()}getSvg(){return this.svg}updateSvg(){this.svg=this.element.outerHTML}};var Mq=(t,e)=>(r,n,i)=>e(t().concat(r),n,i);var zg=class extends Ce{constructor(e){super(e),this.formatters.tick=r=>r}createD3Scale(){return xu()}convert(e){return this._d3Scale(e)}invert(e){let r=this._d3Scale.domain(),n=r.map(this._d3Scale).slice(0,-1).map(i=>i+this._d3Scale.step()/2);return r[Gt(n,e)]}round(e){return e?(this._d3Scale.round(e),this):this._d3Scale.round()}padding(e){return this._d3Scale.padding(e),this}align(e){return e?(this._d3Scale.align(e),this):this._d3Scale.align()}bandwidth(){return this._d3Scale.bandwidth()}isContinuous(){return!1}};var Gg=y(pa()),no=(t,e)=>new Intl.DateTimeFormat(Gg.default.locale(),e).format(t),rS=t=>no(t,{hour:"numeric",minute:"2-digit",second:"2-digit"}),nS=t=>no(t,{hour:"numeric",minute:"2-digit"}),iS=t=>no(t,{month:"short",day:"2-digit"}),oS=t=>no(t,{month:"short"}),sS=t=>no(t,{year:"numeric"}),io=t=>Mi(t)<t?rS(t):sr(t)<t?nS(t):Di(t)<t?iS(t):oe(t)<t?oS(t):sS(t);var Ws=class extends Ce{constructor(e){super(e),this.formatters.tick=io}createD3Scale(){return ku()}convert(e){return this._d3Scale(e)}invert(e){let r=this._d3Scale.invert(e);return isNaN(r.getTime())?void 0:r}isContinuous(){return!0}isDomainValid(){return this.domain().findIndex(e=>isNaN(e.getTime()))===-1}};var Yg=y(aa()),tn=y(pa());function Wn(t){let e=new Date(t.getFullYear(),0,1).getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset();return Math.max(e,r)!==t.getTimezoneOffset()}var Ks=class extends Ws{_bandScale;_interval;constructor(e,r){super(r),this.interval(e),this._bandScale=or(),this.formatters.title=this.defaultTitleFormatter}interval(e){return e?(this._interval=e,this):this._interval}domain(e){if(e){if(e.length===0||e.length%2!==0)throw new Error("TimeIntervalScale domain has to be defined as a pair of [from, to] time values.");let r=(0,Yg.default)(e,se),n=[];if(!r)for(let o=0;o+1<e.length;o+=2)n.push(...this.getBandsForInterval(e[o],e[o+1]));this._bandScale.domain(n);let i=r?e:[e[0],(0,tn.default)(e[1]).add(this.interval()).toDate()];return super.domain(i)}return super.domain()}range(e){if(e)this._bandScale.range(e);else return super.range();return super.range(e)}getBands(){return this._bandScale.domain()}convert(e,r=.5){let n=this.truncToInterval(e,this.interval());if(!n)throw new Error("Could not convert interval");let i=this._bandScale(n);return typeof i=="number"?i+r*this.bandwidth():super.convert(e)}invert(e){let r=super.invert(e);return this.truncToInterval(r,this.interval())}bandwidth(){return this._bandScale.bandwidth()}truncToInterval(e,r,n=!1){if(!e)return e;let i=Wn(e),o=n?i:Wn(this.domain()[0]),s=o&&!i,a=!o&&i,l=this.interval().asDays()>=1&&a?(0,tn.duration)(1,"hour").asMilliseconds():0,c=new Date(e.getTime()+l),f=0;(s||a)&&(f=s?-60:60);let h=(c.getTimezoneOffset()+f)*6e4,d=c.getTime()-h,g=r.asMilliseconds(),m=d%g;if(m===0)return c;let p=d-m;return new Date(p+h)}isContinuous(){return!0}defaultTitleFormatter=e=>{let r=this.interval().asDays(),n=Wn(e),i=Wn(this.domain()[0]),o=!n&&i,s=n&&!i,a=0;(o||s)&&r>=1&&(a=o?36e5:-36e5);let u=new Date(e.getTime()+a),l=r>=1?(0,tn.default)(u).add(r,"days").toDate():(0,tn.default)(u).add(this.interval()).toDate();return io(u)+" - "+io(l)};getBandsForInterval(e,r){let n=[],i=this.truncToInterval(e,this.interval(),!0);if(!i)throw new Error("Could not get bands for interval");let o=this.interval().asMilliseconds(),s=this.interval().asDays(),a=Wn(e),u=Wn(r),l=!a&&u?(0,tn.duration)(1,"hour").asMilliseconds():0,c=s>=1?new Date(r.getTime()+l):r;for(;i<=c;)n.push(i),i=new Date(i.getTime()+o);return n}};var $g=class{id;formatters;isDomainFixed;constructor(e){}convert(){}invert(){}get d3Scale(){}range(e){}domain(e){}fixDomain(e){return null}isContinuous(){return!1}isDomainValid(){return!0}reverse(){}reversed(e){}};var Qs=class extends dt{constructor(){super(),this.interactionPlugins=!1,this.axis.left.gridTicks=!0,this.axis.left.tickSize=5,this.axis.bottom.gridTicks=!1,this.axis.left.fit=!0,this.axis.bottom.tickSize=5,this.axis.left.tickSize=0,this.dimension.margin.right=0,this.dimension.padding.bottom=2}};var Zs=class extends dt{constructor(){super(),this.interactionPlugins=!1,this.axis.left.gridTicks=!1,this.axis.left.tickSize=0,this.axis.bottom.gridTicks=!0,this.axis.left.fit=!0,this.axis.bottom.fit=!0,this.axis.bottom.tickSize=0,this.axis.left.tickSize=5,this.dimension.padding.left=2,this.borders.left.visible=!0,this.borders.bottom.visible=!1}};var qg=class extends dt{constructor(e={showBottomAxis:!0}){super(),this.interactive=!0,this.interactionPlugins=!1,e.showBottomAxis||(this.axis.bottom.visible=!1,this.borders.bottom.visible=!1),this.axis.left.visible=!1,this.axis.left.gridTicks=!1,this.borders.left.visible=!1,this.dimension.autoHeight=!1,this.dimension.margin.top=0,e.showBottomAxis||(this.dimension.margin.bottom=0),this.dimension.height(30)}};function xl(t=new dt,e=!1,r=!0){return t.interactionPlugins=!1,t.axis.left.visible=!1,t.axis.left.gridTicks=!1,t.dimension.margin.left=5,t.dimension.margin.right=5,t.dimension.margin.bottom=e?t.dimension.margin.bottom:0,t.dimension.padding.top=5,t.dimension.padding.bottom=5,t.dimension.autoHeight=!1,t.dimension.height(36),r&&(t.borders.top=new Wr),e||(t.borders.bottom.visible=!1),t}var Xg=class extends Ss{getAbsolutePosition(e){let r=this.chart.target?.node()?.parentNode;if(!r)throw new Error("Chart parent node is not defined");let n=Math.min(...e.map(a=>a.position.x)),i=Math.min(...e.map(a=>a.position.y)),o=r.offsetLeft+this.chart.getGrid().config().dimension.margin.left+n+this.chart.getGrid().config().dimension.width()/2;return{top:r.offsetTop+i+this.chart.getGrid().config().dimension.height()/2,left:o,height:0,width:0}}};var Js=[{x:"end",y:"center"},{x:"end",y:"bottom"},{x:"center",y:"bottom"},{x:"start",y:"bottom"},{x:"start",y:"center"},{x:"start",y:"top"},{x:"center",y:"top"},{x:"end",y:"top"}],aS={start:"end",end:"start",top:"bottom",bottom:"top"},jg=class extends Dn{getTooltipPosition(e,r){let n=e.data,i=r.renderer,o=r.scales.r,a=i.getOuterRadius(o.range(),e.index)+this.tooltipPositionOffset,u=(n.startAngle+n.endAngle)/2-Math.PI/2;return{x:Math.cos(u)*a,y:Math.sin(u)*a,width:0,height:0,overlayPositions:[this.getOverlayPosition(u)]}}getAbsolutePosition(e,r){let n=super.getAbsolutePosition(e,r);return n.x+=this.chart.getGrid().config().dimension.width()/2,n.y+=this.chart.getGrid().config().dimension.height()/2,n}getOverlayPosition(e){let r=this.getSectionIndex(e,8);return{originX:Js[r].x,originY:Js[r].y,overlayX:this.opposite(Js[r].x),overlayY:this.opposite(Js[r].y)}}getSectionIndex(e,r){let n=Math.round(e/(Math.PI*2/r))%r;for(;n<0;)n+=r;return n}opposite(e){return aS[e]||e}};var Wg=class extends Dn{constructor(e){super()}};var Kg=y(Ht()),vl=y(ge()),ta=y(ct());var vX=(()=>{class t extends lt{config;static LAYER_NAME="zoom-brush";static DEFAULT_CONFIG={enableExternalEvents:!1};grid;brush;zoomBrushLayer;brushElement;destroy$=new B;brushStartX;interactionHandlerMap;constructor(r={}){super(),this.config=r,this.config=(0,Kg.default)(this.config,t.DEFAULT_CONFIG),this.interactionHandlerMap={[F.MouseDown]:this.brushStart,[F.MouseMove]:this.brushMove,[F.MouseUp]:this.brushEnd}}initialize(){this.grid=this.chart.getGrid(),this.zoomBrushLayer=this.grid.getLasagna().addLayer({name:t.LAYER_NAME,order:ut[k.foreground].order+1,clipped:!0}),this.chart.getEventBus().getStream(vr).pipe(P(this.destroy$)).subscribe(r=>{if(r.broadcast&&!this.config.enableExternalEvents)return;let n=r.data;if(!((0,vl.default)(this.grid.scales)||(0,vl.default)(n.coordinates))&&this.interactionHandlerMap[n.interactionType]){let i=n.coordinates&&n.coordinates.x;this.interactionHandlerMap[n.interactionType](i)}}),this.brush=ss(),this.brushElement=this.zoomBrushLayer.append("g").attr("class","brush"),this.chart.getGrid().getInteractiveArea().on("pointerdown",()=>L.target.setPointerCapture(L.pointerId)).on("pointerup",()=>L.target.releasePointerCapture(L.pointerId))}updateDimensions(){let r=this.grid.config().dimension;this.brush.extent([[0,0],[r.width(),r.height()]]),this.brush(this.zoomBrushLayer.select(".brush")),this.brushElement.select(".overlay").style("pointer-events","none"),this.brushElement.select(".selection").attr("stroke",null)}destroy(){this.grid.getLasagna().removeLayer(t.LAYER_NAME),this.destroy$.next(),this.destroy$.complete()}brushStart=r=>{(0,ta.default)(this.brushStartX)&&(this.chart.getEventBus().getStream(Kn).next({data:!1}),this.brushStartX=r)};brushMove=r=>{if((0,ta.default)(this.brushStartX))return;let n=[this.brushStartX,r].sort((i,o)=>i-o);this.brush.move(this.brushElement,n)};brushEnd=r=>{if((0,ta.default)(this.brushStartX))return;let n=[this.brushStartX,r].sort((u,l)=>u-l);this.brushStartX=void 0,this.chart.getEventBus().getStream(Kn).next({data:!0}),this.brush.move(this.brushElement,null);let i=this.grid.scales.x.list;if(!i||n[0]===n[1])return;let o=0,s=this.grid.config();!s.disableRenderAreaWidthCorrection&&n[1]===s.dimension.width()-mr.RENDER_AREA_WIDTH_CORRECTION&&(o=mr.RENDER_AREA_WIDTH_CORRECTION);let a=i.reduce((u,l)=>(u[l.id]=[n[0],n[1]+o].map(c=>l.invert(c)),u),{});this.chart.getEventBus().getStream(oc).next({data:a})}}return t})();var Zg=y(xr());var Qg=class{showBottomAxis;showTopBorder;palette;markers;sparks=[];isLegendActive=!1;gridConfig;lastGridConfig;highlightedDataPoints={};constructor(e=!0,r=!0,n=new Pn(Ds),i=new Fn(Rs)){this.showBottomAxis=e,this.showTopBorder=r,this.palette=n,this.markers=i,this.gridConfig=xl(new dt,!1,r),this.gridConfig.interactionPlugins=!1,this.lastGridConfig=xl(new dt,e,r),this.lastGridConfig.interactionPlugins=!1}update(e){let r=e.map(n=>({id:n.id,chartSeriesSet:[n]}));this.updateSparks(r)}updateSparks(e){let r=(0,Zg.default)(e);this.sparks=r.map((n,i)=>{let o=i===r.length-1,s=n.id?this.sparks.findIndex(a=>a.id===n.id):-1;return s!==-1?n.chart=this.reconfigureChart(this.sparks[s].chart,o):(n.chart=n.chart||this.createChart(o),n.id=n.id||st.uuid()),n.chart.update(n.chartSeriesSet),n})}getHighlightedValue(e,r,n){return jr.getLabel(e,this.highlightedDataPoints[e.id],r,n)}trackByFn(e,r){return r?.id}setRenderState(e,r){}getVisibleSeriesWithLegend(){return[]}createChart(e){let r=new Qt(e?this.lastGridConfig:this.gridConfig),n=new zn(r);return(this.showTopBorder||this.showBottomAxis)&&n.addPlugin(new Gs),e&&this.showBottomAxis&&n.addPlugin(new Zr),this.configureEventSubscriptions(n.getEventBus()),n}configureEventSubscriptions(e){e.getStream(Nt).subscribe(r=>{if(r.data.interactionType===F.MouseMove){let n=r.data.dataPoints;Object.keys(n).forEach(i=>{this.highlightedDataPoints[i]=Object.assign({},n[i])})}}),e.getStream(ee).subscribe(r=>{this.isLegendActive=r.data})}reconfigureChart(e,r){e.getGrid().config(r?this.lastGridConfig:this.gridConfig),e.updateDimensions();let n=e.hasPlugin(Zr);if(r&&!n&&this.showBottomAxis){let i=new Zr;e.addPlugin(i),i.initialize()}else!r&&n&&e.removePlugin(Zr);return e}};var Jg=class{series;data;constructor(){this.series=void 0,this.data=void 0}};var tx=class extends lr{draw(e,r){}highlightDataPoint(e,r,n){}getRequiredLayers(){return[]}getDataPointPosition(e,r,n){}};function HX(t){let e=new Qt;return e.config(t&&t.horizontal?new Zs:new Qs),e}function YX(t,e,r){return t&&t.horizontal?new Ve(e,r):new Jr(e,r)}var oo=y($l()),ex=y(me()),rx=y(ct());var yl=class{scaleKey;levels;selectedDataPointIdxFn;constructor(e,r=1,n){this.scaleKey=e,this.levels=r,this.selectedDataPointIdxFn=n}getDataPointIndex(e,r,n,i){let o=n[this.scaleKey];return typeof o>"u"?St:this.findDataPointByValue(r,o,this.scaleKey,i)}findDataPointByValue(e,r,n,i){let o=n.toUpperCase(),s=e.accessors.data,a=s["start"+o],u=s["end"+o];if(typeof r=="string")return(0,oo.default)(e.data,(l,c)=>r===a?.(l,c,e.data,e));if((0,ex.default)(r))return(0,oo.default)(e.data,(l,c)=>{let f=a?.(l,c,e.data,e),h=Math.min(this.levels,r.length,f.length);for(let d=0;d<h;d++)if(r[d]!==f[d])return!1;return!0});if(r.valueOf){let l=r.valueOf();if(i&&i[n]?.isContinuous()){let c=(0,oo.default)(e.data,(f,h)=>l>=a?.(f,h,e.data,e).valueOf()&&l<=u?.(f,h,e.data,e).valueOf());if(c===-1&&typeof u<"u")if(we(i[n])){let f=(d,g)=>a?.(d,g,e.data,e),h=st.findNearestIndex(e.data,r,f);c=h>=e.data.length||f(e.data[h],h)>l?-1:h}else c=st.getClosestIndex(e.data,(f,h)=>u(f,h,e.data,e),r)??-1;return c}return(0,oo.default)(e.data,(c,f)=>l>=a?.(c,f,e.data,e).valueOf()&&l<=u?.(c,f,e.data,e).valueOf())}return St}highlightDataPoint(e,r,n,i){let o=r.containers[k.data],s=e.getContainerStateStyles,a=(0,rx.default)(this.selectedDataPointIdxFn)?Xt:this.selectedDataPointIdxFn(r.dataSeries.id);o.selectAll(`g.${e.barContainerClass}`).each(function(u,l){let c;n===St?l===a||a===Xt?c=U.default:c=U.deemphasized:n===l||l===a?c=U.emphasized:c=U.deemphasized,H(this).attrs(s(c))})}draw(e,r,n){}};var ea=y($l()),ix=y(me());var nx=class{scaleKey;levels;constructor(e,r=1){this.scaleKey=e,this.levels=r}getDataPointIndex(e,r,n,i){let o=n[this.scaleKey];return typeof o>"u"?St:this.findDataPointByValue(r,o,this.scaleKey)}findDataPointByValue(e,r,n){let i=n.toUpperCase(),o=e.accessors.data,s=o["start"+i],a=o["end"+i];if(typeof r=="string")return(0,ea.default)(e.data,(u,l)=>r===s?.(u,l,e.data,e));if((0,ix.default)(r))return(0,ea.default)(e.data,(u,l)=>{let c=s?.(u,l,e.data,e),f=Math.min(this.levels,r.length,c.length);for(let h=0;h<f;h++)if(r[h]!==c[h])return!1;return!0});if(r.valueOf){let u=r.valueOf();return(0,ea.default)(e.data,(l,c)=>u>=s?.(l,c,e.data,e).valueOf()&&u<=a?.(l,c,e.data,e).valueOf())}return St}highlightDataPoint(e,r,n,i){(n>=0||n===St)&&i.next({eventName:De,data:e.getDataPoint(r,r.dataSeries.data[n],n)})}draw(e,r,n){}};var ox=class extends Se{getArc(e,r,n){return r.outerRadius(e[1]-e[0]).innerRadius(0)}};function n4(t,e,r){let n=t.accessors.data,i=t.data,o=n?.[e];if(!o)throw new Error("Accessor "+e+" not defined!");let s=o(i[0],0,i,t),a=o(i[i.length-1],i.length-1,i,t);if(!s||!a)throw new Error("First or last values not defined!");let u=new Ks(r);u.domain([u.truncToInterval(s,u.interval()),u.truncToInterval(a,u.interval())]);let l=u.getBands(),c=[],f=0;for(let h=0;h<i.length;h++){let d=o(i[h],h,i,t),g=u.truncToInterval(d,u.interval());if(g&&g>l[f])for(c.push(K(q({},i[h-1]),{defined:!1})),c.push(K(q({},i[h]),{defined:!1}));l[f]<d;)f++;c.push(i[h]),f++}return c}var ax=y(lo());var sx=class{INTERACTION_MARGIN=8;draw(e,r,n){let i=r.containers[k.data],o=i.select("path.interaction");if((0,ax.default)(e.config.strokeWidth))throw new Error("renderer.config.strokeWidth is not defined");o.empty()&&(o=i.append("path").classed("interaction",!0).classed("pointer-events pointer-events-click",!0).attrs({"stroke-width":e.config.strokeWidth+2*this.INTERACTION_MARGIN,stroke:"transparent",fill:"none"}).on("mouseenter",()=>{let s={seriesId:r.dataSeries.id,dataSeries:r.dataSeries,index:0,data:r.dataSeries.data[0]};n.next({eventName:De,data:s})}).on("mouseleave",()=>{let s={seriesId:r.dataSeries.id,dataSeries:r.dataSeries,index:Xt};n.next({eventName:De,data:s})}).on("click",(s,a)=>{this.emitEvent(e,ic,F.Click,r,s,a,n)})),e.drawLine(r,o)}getDataPointIndex(e,r,n,i){}highlightDataPoint(e,r,n,i){}emitEvent(e,r,n,i,o,s,a){let u={seriesId:i.dataSeries.id,dataSeries:i.dataSeries,index:s,data:o,position:e.getDataPointPosition(i.dataSeries,s,i.scales)};a.next({eventName:r,data:{interactionType:n,payload:u}})}};var ux=class{strokeWidth=1;interactive=!1;strokeStyle=ji.getStrokeStyleDashed(1);useEnhancedLineCaps=!0};var ra=class extends dt{constructor(){super(),this.dimension.padding.bottom=2}};function g4(){let t=new Qt;return t.config(new ra),t}var cx=y(Ht());var lx=class extends Ee{config;DEFAULT_CONFIG={curveType:Ne,interactive:!0,areaClass:"nui-chart-area",markerInteraction:qr};constructor(e={}){super(e),this.config=e,this.config=(0,cx.default)(this.config,this.DEFAULT_CONFIG)}draw(e,r){let n=e.containers[k.data],i=e.dataSeries.accessors,o=n.select(`path.${this.config.areaClass}`);if(o.empty()){if(!this.config.areaClass)throw new Error("areaClass is not defined");o=n.append("path").classed(this.config.areaClass,!0).attrs({fill:i.series.color?.(e.dataSeries.id,e.dataSeries)}).style("stroke-width",this.config.strokeWidth??1)}this.drawArea(e,o)}drawArea(e,r){let n=e.dataSeries,i=n.accessors,o=!1,s=n.data.filter((u,l)=>{let c=typeof i.data.absoluteX0?.(u,l,n.data,n)<"u"&&typeof i.data.absoluteX1?.(u,l,n.data,n)<"u"&&typeof i.data.absoluteY0?.(u,l,n.data,n)<"u"&&typeof i.data.absoluteY1?.(u,l,n.data,n)<"u";return!c&&!o&&(console.warn("Data point",u,"was skipped as accessors didn't manage to extract any data."),console.warn(" -> accessors.data.x0:",i.data.x0),console.warn(" -> accessors.data.y0:",i.data.y0),console.warn(" -> accessors.data.x1:",i.data.x1),console.warn(" -> accessors.data.y1:",i.data.y1),o=!0),c});if(!this.config.curveType)throw new Error("curveType is not defined");let a=Sa().x0((u,l)=>this.safetyCheck(e.scales.x.convert(i.data.absoluteX0?.(u,l,n.data,n)))).x1((u,l)=>this.safetyCheck(e.scales.x.convert(i.data.absoluteX1?.(u,l,n.data,n)))).y0((u,l)=>this.safetyCheck(e.scales.y.convert(i.data.absoluteY0?.(u,l,n.data,n)))).y1((u,l)=>this.safetyCheck(e.scales.y.convert(i.data.absoluteY1?.(u,l,n.data,n)))).curve(this.config.curveType);r.attr("d",a(s)??"")}getDomain(e,r,n,i){if(!e||e.length===0)return se;let o=r.accessors.data;if(n!=="x"&&n!=="y")return[void 0,void 0];let s=o[`absolute${n.toUpperCase()}0`],a=o[`absolute${n.toUpperCase()}1`];return[Oe(e,(u,l,c)=>Oe([s?.(u,l,c,r),a?.(u,l,c,r)])),ke(e,(u,l,c)=>ke([s?.(u,l,c,r),a?.(u,l,c,r)]))]}getRequiredLayers(){return[ut[k.data],ut[k.foreground]]}filterDataByDomain(e,r,n,i){let o=r.accessors.data[n+"0"],s=r.accessors.data[n+"1"];return e.filter((a,u)=>{let l=o?.(a,u,e,r),c=s?.(a,u,e,r);return Math.max(l,c)>=i[0]&&Math.min(l,c)<=i[1]})}highlightDataPoint(e,r,n){if(!e.dataSeries.accessors.series.marker||!this.config.interactive)return;let s=e.containers[k.foreground];Fs.manageMarker(e.dataSeries,e.scales,r,s,n,this.config.markerInteraction)}safetyCheck(e){return typeof e>"u"||isNaN(e)?0:e}};function uS(t,e){if(t.length===0)return t;let r={},n="x",i="y";for(let o of t){if(o.preprocess===!1)continue;let s=o.accessors.data[n],a=o.accessors.data[i+"0"],u=o.accessors.data[i+"1"],l=e(o)?1:0;o.data.forEach((c,f)=>{let h=s(c,f,o.data,o),d=a?.(c,f,o.data,o),m=(u?.(c,f,o.data,o)-d)*l,p=r[h.valueOf()];typeof p>"u"&&(p=0,r[h.valueOf()]=p);let x=p+m;r[h.valueOf()]=x,c["__stack_"+i]={start:p,end:x}})}return t}function T4(t){return uS(t,e=>!this.isSeriesHidden(e.id))}function lS(t,e){if(t.length===0)return t;let r={},n={},i="x",o="y";for(let s of t)cS(i,o,s,e,n);for(let s of t)fS(i,o,s,e,r,n);return t}function M4(t){return lS(t,e=>!this.isSeriesHidden(e.id))}function cS(t,e,r,n,i){let o=r.accessors.data[t],s=r.accessors.data[e+"0"],a=r.accessors.data[e+"1"],u=n(r)?1:0;r.data.forEach((l,c)=>{let f=o(l,c,r.data,r),h=s?.(l,c,r.data,r),g=(a?.(l,c,r.data,r)-h)*u,m=i[f.valueOf()];typeof m>"u"&&(m=0,i[f.valueOf()]=m),i[f.valueOf()]=m+g})}function fS(t,e,r,n,i,o){let s=r.accessors.data[t],a=r.accessors.data[e+"0"],u=r.accessors.data[e+"1"],l=n(r)?1:0;r.data.forEach((c,f)=>{let h=s(c,f,r.data,r),d=a?.(c,f,r.data,r),m=(u?.(c,f,r.data,r)-d)*l,p=i[h.valueOf()];typeof p>"u"&&(p=0,i[h.valueOf()]=p);let x=m/o[h.valueOf()],b=p+x*100;i[h.valueOf()]=b,c["__stack_"+e]={start:p,end:b}})}function N4(t,e){let r=new Bn(t,e);return r.data.x=n=>n.x,r.data.y=r.data.absoluteY1,r.data.y0=()=>0,r.data.y1=n=>n.y,r}function O4(t=new dt){return t.axis.left.visible=!1,t.axis.left.gridTicks=!1,t.dimension.padding.bottom=5,t.dimension.autoHeight=!1,t.dimension.height(20),t}function B4(t=new dt){return t.axis.bottom.visible=!1,t.dimension.margin.bottom=0,t.dimension.padding.bottom=5,t}var hS=y(Gl()),dS=y(Ht()),pS=y(da()),mS=y(ge()),gS=y(ct()),xS=y(pa());var vS=y(ct());export{U as a,ee as b,qt as c,Qn as d,mo as e,De as f,ic as g,Nt as h,go as i,oc as j,xe as k,ln as l,sc as m,Xt as n,St as o,jt as p,F as q,Vb as r,Se as s,pp as t,Yb as u,Dn as v,a_ as w,Ss as x,d_ as y,m_ as z,$3 as A,iH as B,As as C,kp as D,TH as E,LH as F,Ts as G,kn as H,Pn as I,Ms as J,Ds as K,nV as L,iV as M,Rs as N,Fn as O,Bn as P,Ve as Q,qi as R,tm as S,Gr as T,st as U,Ee as V,$r as W,jV as X,Os as Y,Ps as Z,ji as _,_m as $,C5 as aa,ae as ba,il as ca,fr as da,Vn as ea,zn as fa,jr as ga,Wr as ha,dr as ia,dt as ja,cl as ka,RG as la,Kt as ma,Qr as na,Zr as oa,Gs as pa,Qt as qa,wg as ra,Xs as sa,Jr as ta,dl as ua,Jw as va,Dg as wa,eo as xa,js as ya,Rg as za,tS as Aa,Ng as Ba,Lg as Ca,Eq as Da,Hg as Ea,Vg as Fa,Mq as Ga,zg as Ha,Ws as Ia,Ks as Ja,$g as Ka,Qs as La,Zs as Ma,qg as Na,xl as Oa,Xg as Pa,jg as Qa,Wg as Ra,vX as Sa,Qg as Ta,Jg as Ua,tx as Va,HX as Wa,YX as Xa,yl as Ya,nx as Za,ox as _a,n4 as $a,sx as ab,ux as bb,g4 as cb,lx as db,T4 as eb,M4 as fb,N4 as gb,O4 as hb,B4 as ib};
