import{$ as B,A as P,B as Z,C as R,D as G,Ea as Y,F as L,I as W,Ja as U,M as m,R as C,U as b,W as F,X as H,Z as O,_ as V,fa as y,ga as f,hb as j,ib as $,la as N,ma as z,na as T,qa as _,z as M}from"./chunk-FM3MSO55.js";import{Ba as K}from"./chunk-JEEHY2QT.js";import{e as E}from"./chunk-FWIJ3MN4.js";import{a as J}from"./chunk-RIV6QGH7.js";import{A as p,Fa as l,Ga as c,Ha as S,La as I,Ua as g,Va as d,fa as h,ga as k,q as w,wa as x,ya as o,z as u}from"./chunk-VSZOZJXN.js";import{a as v,b as A,g as D}from"./chunk-7KJRK3NW.js";var X=D(K()),n=D(J());function Q(i,q){if(i&1){let e=I();l(0,"nui-legend-series",6),g("mouseenter",function(){let s=u(e).$implicit,r=d();return p(r.chartAssist.emphasizeSeries(s.id))})("isSelectedChange",function(s){let r=u(e).$implicit,a=d();return p(a.chartAssist.toggleSeries(r.id,s))}),l(1,"nui-rich-legend-tile",7),S(2,"nui-chart-marker",8),c()()}if(i&2){let e=q.$implicit,t=d();o("descriptionPrimary",e.name)("seriesRenderState",t.chartAssist.renderStatesIndex[e.id]==null?null:t.chartAssist.renderStatesIndex[e.id].state)("isSelected",!t.chartAssist.isSeriesHidden(e.id)),h(),o("value",t.chartAssist.getHighlightedValue(e,"y"))("backgroundColor",t.chartAssist.palette.standardColors.get(e.id))("color",t.chartAssist.palette.textColors.get(e.id)),h(),o("marker",t.chartAssist.markers.get(e.id))("color",t.chartAssist.palette.standardColors.get(e.id))}}var me=(()=>{class i{thresholdsService;zones=[{status:"error",start:80},{status:"error",start:-100,end:10},{status:"warning",start:60,end:80},{status:"warning",start:10,end:20}];summaryZones=[...this.zones,{status:"ok",start:20,end:60}];startDate=(0,n.default)([2016,11,25,15,14,29]);uid=b.uuid();chart=new y(new _($()));summaryChart=new y(new _(j()));chartAssist=new f(this.chart);summaryChartAssist=new f(this.summaryChart);tooltipsPlugin;thresholdsPalette;thicknessMap;accessors;renderer;scales;backgroundScales;summaryScales;constructor(e){this.thresholdsService=e,this.scales={x:new U((0,n.duration)(5,"minutes")),y:new z},this.backgroundScales={x:this.scales.x,y:new T},this.summaryScales={x:this.scales.x,y:new T},this.configureGrids(this.scales.y.id),this.summaryChartAssist.syncWithChartAssist(this.chartAssist),this.scales.y.domainCalculator=N([0,100]),this.backgroundScales.y.fixDomain(C.STATUS_DOMAIN),this.summaryScales.y.fixDomain(C.STATUS_DOMAIN),this.thresholdsPalette=new W(new Y({error:m[2],warning:m[4],ok:m[8]},"transparent")),this.thicknessMap={ok:F.THIN},this.renderer=new V,this.accessors=new O(this.chartAssist.palette.standardColors,this.chartAssist.markers)}ngOnInit(){this.update()}update(){let e=ee().map(r=>A(v({},r),{renderer:this.renderer,accessors:this.accessors,scales:this.scales})),t=[...e].map(r=>{let a=this.thresholdsService.getThresholdZones(r,this.summaryZones,this.thresholdsPalette.standardColors);return this.thresholdsService.injectThresholdsData(r,a),this.thresholdsService.getBackgrounds(r,a,this.summaryScales,this.thresholdsPalette.standardColors,this.thicknessMap,(0,X.default)(H))}),s=[];for(let r of e){let a=this.thresholdsService.getThresholdZones(r,this.zones,this.thresholdsPalette.standardColors);this.thresholdsService.injectThresholdsData(r,a),s.push(this.thresholdsService.getBackgrounds(r,a,this.backgroundScales,this.thresholdsPalette.backgroundColors),...this.thresholdsService.getThresholdLines(a),...this.thresholdsService.getSideIndicators(a,this.scales))}this.chartAssist.update([...s,...e]),this.summaryChartAssist.update(t)}configureGrids(e){let t=this.chart.getGrid();t.leftScaleId=e;let s=t.config();s.dimension.width(400),s.dimension.height(110),s.dimension.autoWidth=!1,s.dimension.autoHeight=!1;let r=this.summaryChart.getGrid().config();r.dimension.width(400),r.dimension.autoWidth=!1}static \u0275fac=function(t){return new(t||i)(k(B))};static \u0275cmp=w({type:i,selectors:[["nui-thresholds-summary-with-interval-scale-test"]],decls:6,vars:8,consts:[[1,"d-flex","align-items-start"],[1,"d-flex","flex-column"],[1,"thresholds-main-chart",3,"chart","nuiChartCollectionId"],[1,"thresholds-summary-chart",3,"chart","nuiChartCollectionId"],["seriesUnitLabel","sec",1,"ml-2","thresholds-legend",3,"mouseleave","active","interactive"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[3,"mouseenter","isSelectedChange","descriptionPrimary","seriesRenderState","isSelected"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"]],template:function(t,s){t&1&&(l(0,"div",0)(1,"div",1),S(2,"nui-chart",2)(3,"nui-chart",3),c(),l(4,"nui-legend",4),g("mouseleave",function(){return s.chartAssist.resetVisibleSeries()}),x(5,Q,3,8,"nui-legend-series",5),c()()),t&2&&(h(2),o("chart",s.chart)("nuiChartCollectionId",s.uid),h(),o("chart",s.summaryChart)("nuiChartCollectionId",s.uid),h(),o("active",s.chartAssist.isLegendActive)("interactive",!0),h(),o("ngForOf",s.chartAssist.legendSeriesSet)("ngForTrackBy",s.chartAssist.seriesTrackByFn))},dependencies:[E,R,G,L,P,Z,M],encapsulation:2})}return i})();function ee(){let i="YYYY-MM-DDTHH:mm:ssZ";return[{id:"series-1",name:"Series 1",data:[{x:(0,n.default)("2016-12-25T15:05:00Z",i).toDate(),y:30},{x:(0,n.default)("2016-12-25T15:10:00Z",i).toDate(),y:80},{x:(0,n.default)("2016-12-25T15:15:00Z",i).toDate(),y:80},{x:(0,n.default)("2016-12-25T15:20:00Z",i).toDate(),y:80},{x:(0,n.default)("2016-12-25T15:25:00Z",i).toDate(),y:45},{x:(0,n.default)("2016-12-25T15:30:00Z",i).toDate(),y:60},{x:(0,n.default)("2016-12-25T15:35:00Z",i).toDate(),y:10},{x:(0,n.default)("2016-12-25T15:40:00Z",i).toDate(),y:35}]}]}export{me as a};
