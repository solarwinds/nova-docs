import{a as q}from"./chunk-MRVUGWFC.js";import{A as G,Ia as Y,Z as M,_ as $,ab as J,b as w,c as B,d as L,fa as H,g as V,ga as P,h as R,ja as j,ma as U,q as C,qa as X}from"./chunk-YA4MYKC2.js";import{Ba as Z,Ja as b,Ma as A,Nb as N,O as Q,Q as W,Va as D,Wa as O}from"./chunk-HL7NY4QC.js";import{e as I}from"./chunk-FWIJ3MN4.js";import{Fa as i,Ga as r,Ha as u,Hb as k,Ua as p,Va as g,cb as s,eb as _,fa as c,ga as E,q as S,wa as d,ya as a,za as x}from"./chunk-VSZOZJXN.js";import{a as F,b as y,g as v}from"./chunk-7KJRK3NW.js";var T=v(Z()),z=v(Q()),f=v(W());function ee(o,h){if(o&1&&(i(0,"nui-checkbox",10),s(1),r()),o&2){let e=h.$implicit,n=g();a("value",e)("checked",n.isEventFilterChecked(e)),c(),_(" ",e," ")}}function te(o,h){if(o&1&&(i(0,"nui-checkbox",10),s(1),r()),o&2){let e=h.$implicit,n=g();a("value",e)("checked",n.isInteractionTypeFilterChecked(e)),c(),_(" ",e," ")}}function ne(o,h){if(o&1&&u(0,"nui-example-code",11),o&2){let e=h.$implicit;a("code",e)}}var le=(()=>{class o{logger;changeDetector;parsedEvents=[];eventFilters=[w,B,R,L,V];interactionTypeFilters=[C.Click,C.MouseMove];selectedEventFilters;selectedInteractionTypeFilters;chart;chartAssist;isEventFilterChecked(e){return this.selectedEventFilters.indexOf(e)>-1}onEventFilterChange(e){this.selectedEventFilters=e}isInteractionTypeFilterChecked(e){return this.selectedInteractionTypeFilters.indexOf(e)>-1}onInteractionTypeFilterChange(e){this.selectedInteractionTypeFilters=e}constructor(e,n){this.logger=e,this.changeDetector=n}ngOnInit(){let e=new j;e.cursor="pointer",this.chart=new H(new X(e)),this.chartAssist=new P(this.chart),this.selectAllFilters(),this.chartAssist.update(this.generateDataSeriesSet(2)),(0,z.default)(this.eventFilters,n=>{this.chart.getEventBus().getStream(n).subscribe(t=>{(0,f.default)(this.selectedEventFilters,n)&&(!t.data.interactionType||(0,f.default)(this.selectedInteractionTypeFilters,t.data.interactionType))&&(this.logger.info("EVENT:",n,"DATA:",t.data),this.parsedEvents.unshift(`Event: "${n}" Data: ${JSON.stringify(t.data)}`),this.parsedEvents=this.parsedEvents.slice(0,10),this.changeDetector.markForCheck())})})}selectAllFilters(){this.selectedEventFilters=(0,T.default)(this.eventFilters),this.selectedInteractionTypeFilters=(0,T.default)(this.interactionTypeFilters)}deselectAllFilters(){this.selectedEventFilters=[],this.selectedInteractionTypeFilters=[]}generateDataSeriesSet(e){let n=q.generateMockTimeLineSeriesSet(e,40),t={x:new Y,y:new U},l=new $({interactionStrategy:new J}),m=new M;return n.map(K=>y(F({},K),{scales:t,renderer:l,accessors:m}))}static \u0275fac=function(n){return new(n||o)(E(b),E(k))};static \u0275cmp=S({type:o,selectors:[["nui-chart-event-bus-test"]],decls:31,vars:8,consts:[[1,"d-flex","h-100"],[1,"w-100",3,"chart"],[1,"btn-group"],["type","button","nui-button","",3,"click"],[1,"mx-3"],["name","eventFilter",1,"nui-checkbox-group-inline",3,"valuesChange","values"],[3,"value","checked",4,"ngFor","ngForOf"],["name","interactionTypeFilter",1,"nui-checkbox-group-inline",3,"valuesChange","values"],[1,"mt-3"],["language","typescript",3,"code",4,"ngFor","ngForOf"],[3,"value","checked"],["language","typescript",3,"code"]],template:function(n,t){n&1&&(i(0,"div")(1,"div",0),u(2,"nui-chart",1),r()(),u(3,"hr"),i(4,"div",2)(5,"button",3),p("click",function(){return t.selectAllFilters()}),s(6," Select All "),r(),i(7,"button",3),p("click",function(){return t.deselectAllFilters()}),s(8," Deselect All "),r(),i(9,"button",3),p("click",function(){return t.parsedEvents=[]}),s(10," Clear Log "),r()(),i(11,"h1"),s(12,"Events"),r(),i(13,"div",4)(14,"nui-checkbox-group",5),p("valuesChange",function(m){return t.onEventFilterChange(m)}),d(15,ee,2,3,"nui-checkbox",6),r()(),i(16,"h1"),s(17,"Interaction Types"),r(),i(18,"p"),s(19," (These apply only to "),i(20,"code"),s(21,"interaction_values"),r(),s(22," and "),i(23,"code"),s(24,"interaction_data_points"),r(),s(25,` events.)
`),r(),i(26,"div",4)(27,"nui-checkbox-group",7),p("valuesChange",function(m){return t.onInteractionTypeFilterChange(m)}),d(28,te,2,3,"nui-checkbox",6),r()(),i(29,"div",8),d(30,ne,1,1,"nui-example-code",9),r()),n&2&&(x("min-height",150),c(2),a("chart",t.chart),c(12),a("values",t.selectedEventFilters),c(),a("ngForOf",t.eventFilters),c(12),a("values",t.selectedInteractionTypeFilters),c(),a("ngForOf",t.interactionTypeFilters),c(2),a("ngForOf",t.parsedEvents))},dependencies:[I,G,A,D,O,N],encapsulation:2,changeDetection:0})}return o})();export{le as a};
