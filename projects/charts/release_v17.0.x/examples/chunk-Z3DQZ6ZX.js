import{$ as U,A as F,B as H,C as V,D as B,Ea as $,F as N,I as Y,Ia as q,M as C,R as v,W as b,X as G,Z as W,_ as z,fa as A,ga as x,hb as J,ib as K,la as j,ma as X,na as w,qa as D,z as L}from"./chunk-FM3MSO55.js";import{Ba as ie}from"./chunk-JEEHY2QT.js";import{e as R}from"./chunk-FWIJ3MN4.js";import{a as re}from"./chunk-RIV6QGH7.js";import{A as T,Fa as u,Ga as p,Ha as _,La as P,Ua as f,Va as g,fa as m,ga as M,q as I,wa as O,ya as h,z as y}from"./chunk-VSZOZJXN.js";import{a as E,b as k,g as Z}from"./chunk-7KJRK3NW.js";var Q=Z(ie()),n=Z(re());function ne(e,ee){if(e&1){let t=P();u(0,"nui-legend-series",6),f("mouseenter",function(){let r=y(t).$implicit,i=g();return T(i.chartAssist.emphasizeSeries(r.id))})("isSelectedChange",function(r){let i=y(t).$implicit,o=g();return T(o.chartAssist.toggleSeries(i.id,r))}),u(1,"nui-rich-legend-tile",7),_(2,"nui-chart-marker",8),p()()}if(e&2){let t=ee.$implicit,s=g();h("descriptionPrimary",t.id)("seriesRenderState",s.chartAssist.renderStatesIndex[t.id]==null?null:s.chartAssist.renderStatesIndex[t.id].state)("isSelected",!s.chartAssist.isSeriesHidden(t.id)),m(),h("value",s.chartAssist.getHighlightedValue(t,"y"))("backgroundColor",s.chartAssist.palette.standardColors.get(t.id))("color",s.chartAssist.palette.textColors.get(t.id)),m(),h("marker",s.chartAssist.markers.get(t.id))("color",s.chartAssist.palette.standardColors.get(t.id))}}var l=function(e){return e.Error="error",e.Warning="warning",e.Ok="ok",e}(l||{}),Te=(()=>{class e{thresholdsService;chartAssist;summaryChartAssist;thresholdsPalette;constructor(t){this.thresholdsService=t}ngOnInit(){let t=new A(new D(K())),s=new A(new D(J()));this.chartAssist=new x(t),this.summaryChartAssist=new x(s),this.summaryChartAssist.syncWithChartAssist(this.chartAssist);let r=new q,i={x:r,y:new X};t.getGrid().leftScaleId=i.y.id,i.y.domainCalculator=j([0,100]),this.thresholdsPalette=new Y(new $({[l.Error]:C[2],[l.Warning]:C[4],[l.Ok]:C[8]},"transparent"));let o=new z,d=new W(this.chartAssist.palette.standardColors,this.chartAssist.markers),a=oe().map(se=>k(E({},se),{accessors:d,renderer:o,scales:i})),c=ae(),S=this.createMainChartThresholdSeriesSet(a,i,c),te=this.createSummarySeriesSet(a,r,c);this.chartAssist.update([...S,...a]),this.summaryChartAssist.update(te)}createMainChartThresholdSeriesSet(t,s,r){let i={x:s.x,y:new w().fixDomain(v.STATUS_DOMAIN)},o=[];for(let d of t){let a=this.thresholdsService.getThresholdZones(d,r,this.thresholdsPalette.standardColors);this.thresholdsService.injectThresholdsData(d,a);let c=[this.thresholdsService.getBackgrounds(d,a,i,this.thresholdsPalette.backgroundColors),...this.thresholdsService.getThresholdLines(a),...this.thresholdsService.getSideIndicators(a,s)];o.push(...c)}return o}createSummarySeriesSet(t,s,r){let i=[...r,{status:l.Ok}],o={x:s,y:new w().fixDomain(v.STATUS_DOMAIN)},d={[l.Ok]:b.THIN};return[...t].map(c=>{let S=this.thresholdsService.getThresholdZones(c,i,this.thresholdsPalette.standardColors);return this.thresholdsService.injectThresholdsData(c,S),this.thresholdsService.getBackgrounds(c,S,o,this.thresholdsPalette.standardColors,d,(0,Q.default)(G))})}static \u0275fac=function(s){return new(s||e)(M(U))};static \u0275cmp=I({type:e,selectors:[["nui-thresholds-summary-example"]],decls:7,vars:6,consts:[[1,"nui-chart-layout"],[1,"chart","d-flex","flex-column"],["nuiChartCollectionId","collection",1,"w-100",3,"chart"],[1,"legend"],["seriesUnitLabel","sec",3,"mouseleave","active","interactive"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[3,"mouseenter","isSelectedChange","descriptionPrimary","seriesRenderState","isSelected"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"]],template:function(s,r){s&1&&(u(0,"div",0)(1,"div",1),_(2,"nui-chart",2)(3,"nui-chart",2),p(),u(4,"div",3)(5,"nui-legend",4),f("mouseleave",function(){return r.chartAssist.resetVisibleSeries()}),O(6,ne,3,8,"nui-legend-series",5),p()()()),s&2&&(m(2),h("chart",r.chartAssist.chart),m(),h("chart",r.summaryChartAssist.chart),m(2),h("active",r.chartAssist.isLegendActive)("interactive",!0),m(),h("ngForOf",r.chartAssist.legendSeriesSet)("ngForTrackBy",r.chartAssist.seriesTrackByFn))},dependencies:[R,V,B,N,F,H,L],encapsulation:2})}return e})();function ae(){return[{status:l.Error,start:80},{status:l.Warning,start:60,end:80}]}function oe(){let e="YYYY-MM-DDTHH:mm:ssZ";return[{id:"series-1",name:"Series 1",data:[{x:(0,n.default)("2016-12-25T15:14:29.909Z",e),y:30},{x:(0,n.default)("2016-12-27T15:14:29.909Z",e),y:95},{x:(0,n.default)("2016-12-29T15:14:29.909Z",e),y:15},{x:(0,n.default)("2016-12-31T15:14:29.909Z",e),y:60},{x:(0,n.default)("2017-01-03T15:14:29.909Z",e),y:35}]},{id:"series-2",name:"Series 2",data:[{x:(0,n.default)("2016-12-25T15:14:29.909Z",e),y:60},{x:(0,n.default)("2016-12-27T15:14:29.909Z",e),y:40},{x:(0,n.default)("2016-12-29T15:14:29.909Z",e),y:70},{x:(0,n.default)("2016-12-31T15:14:29.909Z",e),y:45},{x:(0,n.default)("2017-01-03T15:14:29.909Z",e),y:90}]}]}export{Te as a};
