import{a as ce}from"./chunk-G6GWPXJQ.js";import{A as j,Ba as T,C as X,Ca as ne,D as q,Ea as re,F as J,M as K,Q,W as U,Wa as A,_a as ae,fa as p,ga as u,la as Y,ma as Z,na as ee,s as G,t as H,ta as te,u as $,xa as ie,za as w}from"./chunk-FM3MSO55.js";import{La as M,jb as N,kb as W}from"./chunk-JEEHY2QT.js";import{e as B,f as V,n as L}from"./chunk-FWIJ3MN4.js";import{A as v,Fa as o,Ga as l,Ha as f,Ia as b,Ja as P,La as O,Ua as g,Va as d,Ya as R,cb as _,eb as k,fa as r,fb as F,gb as I,hb as z,pb as y,q as E,qb as S,wa as h,ya as a,z as C}from"./chunk-VSZOZJXN.js";import{g as le}from"./chunk-7KJRK3NW.js";var D=le(ce());function de(n,m){if(n&1&&(b(0),o(1,"nui-chart-donut-content",10)(2,"div",11),_(3,"57"),l(),o(4,"div",12),_(5,"donuts"),l()(),P()),n&2){let e=d();r(),a("plugin",e.donutContentPlugin)}}function pe(n,m){if(n&1){let e=O();o(0,"nui-legend-series",13),y(1,"titlecase"),g("mouseenter",function(){let i=C(e).$implicit,s=d();return v(s.chartAssist.emphasizeSeries(i.id))})("isSelectedChange",function(i){let s=C(e).$implicit,c=d();return v(c.chartAssist.toggleSeries(s.id,i))}),f(2,"nui-rich-legend-tile",14)(3,"nui-icon",15),l()}if(n&2){let e=m.$implicit,t=d();R("descriptionPrimary",S(1,5,e.id)),a("seriesRenderState",t.chartAssist.renderStatesIndex[e.id]==null?null:t.chartAssist.renderStatesIndex[e.id].state)("isSelected",!t.chartAssist.isSeriesHidden(e.id)),r(2),a("value",e.data[0]==null?null:e.data[0].value),r(),a("icon",t.iconMap[e.id])}}function ue(n,m){if(n&1&&(o(0,"nui-radio",16),_(1),y(2,"titlecase"),l()),n&2){let e=m.$implicit;a("value",e),r(),k(" ",S(2,2,e)," ")}}var we=(()=>{class n{chartTypes=["horizontal bar","vertical bar","pie","donut"];chartType=this.chartTypes[0];categories=["down","critical","warning","unknown","ok","other"];iconNames=["down","critical","warning","unknown","up","unmanaged"];values=[24,16,7,6,97,4];iconMap=(0,D.default)(this.categories,this.iconNames.map(e=>`status_${e}`));colorProvider=new re((0,D.default)(this.categories,K.filter((e,t)=>t%2===0)));chartAssist;donutContentPlugin;ngOnInit(){this.updateChartType()}updateChartType(){this.buildChart(),this.chartAssist.chart.updateDimensions(),this.updateChart()}buildChart(){switch(this.donutContentPlugin=void 0,this.chartType){case"horizontal bar":{this.chartAssist=new u(new p(A({horizontal:!0})));break}case"vertical bar":{this.chartAssist=new u(new p(A({horizontal:!1})));break}case"pie":{this.chartAssist=new u(new p(w()),T);break}case"donut":{this.donutContentPlugin=new H,this.chartAssist=new u(new p(w()),T),this.chartAssist.chart.addPlugin(this.donutContentPlugin);break}}}getRenderer(){switch(this.chartType){case"horizontal bar":case"vertical bar":return new U;case"pie":return new ae;case"donut":return new G}}updateChart(){let e=this.getAccessors(),t=this.getRenderer(),i=this.getScales();if(!e||!t||!i)throw new Error("Accessors, renderer or scales are unavailable");this.chartAssist.update(this.getChartAssistSeries(this.categories,this.values,e,t,i))}getScales(){let e=new ee,t=new Z;switch(t.domainCalculator=Y([0,0]),this.chartType){case"horizontal bar":return{x:t,y:e};case"vertical bar":return{x:e,y:t};case"pie":case"donut":return ne()}}getAccessors(){switch(this.chartType){case"horizontal bar":return new Q(this.colorProvider);case"vertical bar":return new te(this.colorProvider);case"pie":case"donut":{let e=new ie;return e.series.color=this.colorProvider.get,e}}}getChartAssistSeries(e,t,i,s,c){return e.map((x,se)=>{let oe=t[se]||0;return{id:x,data:[{category:x,value:oe}],accessors:i,renderer:s,scales:c}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=E({type:n,selectors:[["nui-chart-one-dimensional-data-example"]],decls:10,vars:8,consts:[[1,"nui-chart-layout"],[1,"chart",2,"position","relative"],[1,"w-100",3,"chart"],[4,"ngIf"],[1,"legend"],[3,"mouseleave","active","interactive"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-bottom"],[1,"nui-radio-group-inline",3,"valueChange","value"],[3,"value",4,"ngFor","ngForOf"],[3,"plugin"],[1,"nui-text-page"],[1,"nui-text-secondary"],[3,"mouseenter","isSelectedChange","descriptionPrimary","seriesRenderState","isSelected"],["backgroundColor","transparent",3,"value"],[3,"icon"],[3,"value"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1),f(2,"nui-chart",2),h(3,de,6,1,"ng-container",3),l(),o(4,"div",4)(5,"nui-legend",5),g("mouseleave",function(){return i.chartAssist.resetVisibleSeries()}),h(6,pe,4,7,"nui-legend-series",6),l()(),o(7,"div",7)(8,"nui-radio-group",8),z("valueChange",function(c){return I(i.chartType,c)||(i.chartType=c),c}),g("valueChange",function(){return i.updateChartType()}),h(9,ue,3,4,"nui-radio",9),l()()()),t&2&&(r(2),a("chart",i.chartAssist.chart),r(),a("ngIf",i.donutContentPlugin),r(2),a("active",i.chartAssist.isLegendActive)("interactive",!1),r(),a("ngForOf",i.chartAssist.legendSeriesSet)("ngForTrackBy",i.chartAssist.seriesTrackByFn),r(2),F("value",i.chartType),r(),a("ngForOf",i.chartTypes))},dependencies:[B,V,X,q,J,j,$,M,W,N,L],encapsulation:2})}return n})();export{we as a};
