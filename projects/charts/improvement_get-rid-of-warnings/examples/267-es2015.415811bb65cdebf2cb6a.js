"use strict";(self.webpackChunk_nova_ui_charts=self.webpackChunk_nova_ui_charts||[]).push([[267],{267:function(e,t,s){s.r(t),s.d(t,{TypeSwitchExampleModule:function(){return k}});var i=s(66266),r=s(28425),n=s(72773),a=s(58490),c=s(31507),o=s.n(c),u=s(33018),h=s(13458),d=s(38583),l=s(46743),g=s(65804),p=s(83063),v=s(87373);function w(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"nui-chart-donut-content",10),u.TgZ(2,"div",11),u._uU(3,"57"),u.qZA(),u.TgZ(4,"div",12),u._uU(5,"donuts"),u.qZA(),u.qZA(),u.BQk()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("plugin",e.donutContentPlugin)}}function C(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"nui-legend-series",13),u.NdJ("mouseenter",function(){const t=u.CHM(e).$implicit;return u.oxw().chartAssist.emphasizeSeries(t.id)})("isSelectedChange",function(t){const s=u.CHM(e).$implicit;return u.oxw().chartAssist.toggleSeries(s.id,t)}),u.ALo(1,"titlecase"),u._UZ(2,"nui-rich-legend-tile",14),u._UZ(3,"nui-icon",15),u.qZA()}if(2&e){const e=t.$implicit,s=u.oxw();u.s9C("descriptionPrimary",u.lcZ(1,5,e.id)),u.Q6J("seriesRenderState",null==s.chartAssist.renderStatesIndex[e.id]?null:s.chartAssist.renderStatesIndex[e.id].state)("isSelected",!s.chartAssist.isSeriesHidden(e.id)),u.xp6(2),u.Q6J("value",null==e.data[0]?null:e.data[0].value),u.xp6(1),u.Q6J("icon",s.iconMap[e.id])}}function m(e,t){if(1&e&&(u.TgZ(0,"nui-radio",16),u._uU(1),u.ALo(2,"titlecase"),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.hij(" ",u.lcZ(2,2,e)," ")}}let y=(()=>{class e{constructor(){this.chartTypes=["horizontal bar","vertical bar","pie","donut"],this.chartType=this.chartTypes[0],this.categories=["down","critical","warning","unknown","ok","other"],this.iconNames=["down","critical","warning","unknown","up","unmanaged"],this.values=[24,16,7,6,97,4],this.iconMap=o()(this.categories,this.iconNames.map(e=>`status_${e}`)),this.colorProvider=new n.oki(o()(this.categories,n.Sj$.filter((e,t)=>t%2==0)))}ngOnInit(){this.updateChartType()}updateChartType(){this.buildChart(),this.chartAssist.chart.updateDimensions(),this.updateChart()}buildChart(){switch(this.donutContentPlugin=void 0,this.chartType){case"horizontal bar":this.chartAssist=new n.doR(new n.kL2((0,n.skL)({horizontal:!0})));break;case"vertical bar":this.chartAssist=new n.doR(new n.kL2((0,n.skL)({horizontal:!1})));break;case"pie":this.chartAssist=new n.doR(new n.kL2((0,n.Y6Q)()),n.fy$);break;case"donut":this.donutContentPlugin=new n.iM,this.chartAssist=new n.doR(new n.kL2((0,n.Y6Q)()),n.fy$),this.chartAssist.chart.addPlugin(this.donutContentPlugin)}}getRenderer(){switch(this.chartType){case"horizontal bar":case"vertical bar":return new n.Z7w;case"pie":return new n.bOg;case"donut":return new n.E8N}}updateChart(){const e=this.getAccessors(),t=this.getRenderer(),s=this.getScales();if(!e||!t||!s)throw new Error("Accessors, renderer or scales are unavailable");this.chartAssist.update(this.getChartAssistSeries(this.categories,this.values,e,t,s))}getScales(){const e=new n.jS7,t=new n.f$s;switch(t.domainCalculator=(0,n._OB)([0,0]),this.chartType){case"horizontal bar":return{x:t,y:e};case"vertical bar":return{x:e,y:t};case"pie":case"donut":return(0,n._N$)()}}getAccessors(){switch(this.chartType){case"horizontal bar":return new n.HVr(this.colorProvider);case"vertical bar":return new n.a9F(this.colorProvider);case"pie":case"donut":{const e=new n.UDz;return e.series.color=this.colorProvider.get,e}}}getChartAssistSeries(e,t,s,i,r){return e.map((e,n)=>({id:e,data:[{category:e,value:t[n]||0}],accessors:s,renderer:i,scales:r}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["nui-chart-one-dimensional-data-example"]],decls:10,vars:8,consts:[[1,"nui-chart-layout"],[1,"chart",2,"position","relative"],[1,"w-100",3,"chart"],[4,"ngIf"],[1,"legend"],[3,"active","interactive","mouseleave"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-bottom"],[1,"nui-radio-group-inline",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"plugin"],[1,"nui-text-page"],[1,"nui-text-secondary"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange"],["backgroundColor","transparent",3,"value"],[3,"icon"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._UZ(2,"nui-chart",2),u.YNc(3,w,6,1,"ng-container",3),u.qZA(),u.TgZ(4,"div",4),u.TgZ(5,"nui-legend",5),u.NdJ("mouseleave",function(){return t.chartAssist.resetVisibleSeries()}),u.YNc(6,C,4,7,"nui-legend-series",6),u.qZA(),u.qZA(),u.TgZ(7,"div",7),u.TgZ(8,"nui-radio-group",8),u.NdJ("valueChange",function(e){return t.chartType=e})("valueChange",function(){return t.updateChartType()}),u.YNc(9,m,3,4,"nui-radio",9),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Q6J("chart",t.chartAssist.chart),u.xp6(1),u.Q6J("ngIf",t.donutContentPlugin),u.xp6(2),u.Q6J("active",t.chartAssist.isLegendActive)("interactive",!1),u.xp6(1),u.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn),u.xp6(2),u.Q6J("value",t.chartType),u.xp6(1),u.Q6J("ngForOf",t.chartTypes))},directives:[h.x,d.O5,l.F,d.sg,r.wTj,g.k,p.k,v.w,r.oJW,r.UKb],pipes:[d.rS],encapsulation:2}),e})();function A(e,t){if(1&e&&(u.TgZ(0,"nui-radio",9),u._uU(1),u.ALo(2,"titlecase"),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.hij(" ",u.lcZ(2,2,e)," ")}}function f(e,t){if(1&e&&u._UZ(0,"nui-icon",13),2&e){const e=u.oxw().$implicit,t=u.oxw();u.Q6J("icon",t.iconMap[e.id])}}function T(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"nui-legend-series",10),u.NdJ("mouseenter",function(){const t=u.CHM(e).$implicit;return u.oxw().chartAssist.emphasizeSeries(t.id)})("isSelectedChange",function(t){const s=u.CHM(e).$implicit;return u.oxw().chartAssist.toggleSeries(s.id,t)}),u.ALo(1,"titlecase"),u._UZ(2,"nui-rich-legend-tile",11),u.YNc(3,f,1,1,"nui-icon",12),u.qZA()}if(2&e){const e=t.$implicit,s=u.oxw();u.s9C("descriptionPrimary",u.lcZ(1,7,e.id)),u.Q6J("seriesRenderState",null==s.chartAssist.renderStatesIndex[e.id]?null:s.chartAssist.renderStatesIndex[e.id].state)("isSelected",!s.chartAssist.isSeriesHidden(e.id)),u.xp6(2),u.Q6J("value",s.accessors.data.value(e.data[0],0,null,null))("backgroundColor",s.chartAssist.palette.standardColors.get(e.id))("color",s.chartAssist.palette.textColors.get(e.id)),u.xp6(1),u.Q6J("ngIf",s.iconMap[e.id])}}function Z(e,t){if(1&e&&(u.TgZ(0,"nui-radio",9),u._uU(1),u.ALo(2,"titlecase"),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.hij(" ",u.lcZ(2,2,e)," ")}}var S=(()=>{return(e=S||(S={})).StackedBar="stacked bar",e.GroupedBar="grouped bar",e.Line="line",S;var e})();const x=[{path:"1d",component:y},{path:"2d",component:(()=>{class e{constructor(){this.chartTypes=[S.StackedBar,S.GroupedBar,S.Line],this.chartType=this.chartTypes[0],this.mainCategoryOptions=["quarters","statuses"],this.mainCategory=this.mainCategoryOptions[0],this.statuses=["down","critical","warning","unknown","ok","other"],this.quarters=["Q1","Q2","Q3","Q4"],this.iconNames=["down","critical","warning","unknown","up","unmanaged"],this.values=[[24,16,7,6,97,4],[13,8,5,17,5,25],[97,41,24,6,7,6],[45,87,23,48,24,9]],this.iconMap=o()(this.statuses,this.iconNames.map(e=>`status_${e}`))}ngOnInit(){this.updateMainCategory()}updateMainCategory(){const e=new n.syg(new n.oki(o()(this.statuses,n.Sj$.filter((e,t)=>t%2==0)))),t=new n.syg(n.cpE),s=this.mainCategory===this.mainCategoryOptions[0];this.categories=s?this.statuses:this.quarters,this.subCategories=s?this.quarters:this.statuses,this.valueAccessor=s?(e,t)=>this.values[e][t]:(e,t)=>this.values[t][e],this.palette=s?t:e,this.updateChartType()}updateChartType(){this.buildChart(),this.updateChart()}buildChart(){const{grid:e,accessors:t,renderer:s,scales:i,preprocessor:r}=this.getChartAttributes(this.chartType);this.renderer=s,this.accessors=t,this.scales=i;const a=new n.kL2(e);a.addPlugin(new n.$fK),this.chartAssist=new n.doR(a,r,this.palette),this.chartType===S.StackedBar&&(this.chartAssist.seriesProcessor=n.knu)}updateChart(){this.chartAssist.update(this.buildChartSeries(this.categories,this.subCategories,this.valueAccessor))}buildChartSeries(e,t,s){return t.map((t,i)=>({id:t,name:t,data:e.map((e,t)=>({category:e,value:s(i,t)||0})),accessors:this.accessors,renderer:this.renderer,scales:this.scales}))}getChartAttributes(e){const t=this.getChartTools(e),s={grid:t.gridFunction(),accessors:t.accessorFunction(),renderer:t.rendererFunction(),scales:t.scaleFunction()};return t.preprocessor&&(s.preprocessor=t.preprocessor),s}getChartTools(e){return{[S.StackedBar]:{preprocessor:n.knu,gridFunction:n.skL,rendererFunction:()=>new n.Z7w({highlightStrategy:new n.Pkp("x")}),accessorFunction:()=>(0,n.Q6e)(void 0,this.palette.standardColors),scaleFunction:n.CQI},[S.GroupedBar]:{gridFunction:()=>(0,n.skL)({grouped:!0}),rendererFunction:()=>new n.Z7w({highlightStrategy:new n.Pkp("x")}),accessorFunction:()=>{const e=(0,n.Q6e)({grouped:!0},this.palette.standardColors);return e.data.category=(e,t,s,i)=>[e.category,i.name],e},scaleFunction:()=>(0,n.CQI)({grouped:!0})},[S.Line]:{gridFunction:()=>new n.Be5,rendererFunction:()=>new n.Med,accessorFunction:()=>{const e=new n.qxh(this.palette.standardColors);return e.data.x=e=>e.category,e.data.y=e=>e.value,e.data.value=e=>e.value,e},scaleFunction:()=>({x:(new n.jS7).fixDomain(this.categories),y:new n.f$s})}}[e]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["nui-chart-two-dimensional-data-example"]],decls:13,vars:9,consts:[[1,"nui-radio-group-inline",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"nui-chart-layout"],[1,"chart"],[1,"w-100",3,"chart"],[1,"legend"],[3,"active","interactive","mouseleave"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-bottom"],[3,"value"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange"],[3,"value","backgroundColor","color"],["class","mt-1 ml-3",3,"icon",4,"ngIf"],[1,"mt-1","ml-3",3,"icon"]],template:function(e,t){1&e&&(u.TgZ(0,"h3"),u._uU(1," Legend by "),u.TgZ(2,"nui-radio-group",0),u.NdJ("valueChange",function(e){return t.mainCategory=e})("valueChange",function(){return t.updateMainCategory()}),u.YNc(3,A,3,4,"nui-radio",1),u.qZA(),u.qZA(),u.TgZ(4,"div",2),u.TgZ(5,"div",3),u._UZ(6,"nui-chart",4),u.qZA(),u.TgZ(7,"div",5),u.TgZ(8,"nui-legend",6),u.NdJ("mouseleave",function(){return t.chartAssist.resetVisibleSeries()}),u.YNc(9,T,4,9,"nui-legend-series",7),u.qZA(),u.qZA(),u.TgZ(10,"div",8),u.TgZ(11,"nui-radio-group",0),u.NdJ("valueChange",function(e){return t.chartType=e})("valueChange",function(){return t.updateChartType()}),u.YNc(12,Z,3,4,"nui-radio",1),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Q6J("value",t.mainCategory),u.xp6(1),u.Q6J("ngForOf",t.mainCategoryOptions),u.xp6(3),u.Q6J("chart",t.chartAssist.chart),u.xp6(2),u.Q6J("active",t.chartAssist.isLegendActive)("interactive",!1),u.xp6(1),u.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn),u.xp6(2),u.Q6J("value",t.chartType),u.xp6(1),u.Q6J("ngForOf",t.chartTypes))},directives:[r.wTj,d.sg,h.x,l.F,r.UKb,p.k,v.w,d.O5,r.oJW],pipes:[d.rS],encapsulation:2}),e})()}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[a.l,n.$y4,r.Ts3,r.CUE,i.Bz.forChild(x)]]}),e})()}}]);