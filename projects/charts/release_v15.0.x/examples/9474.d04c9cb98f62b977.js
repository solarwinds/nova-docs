"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[9474],{49474:($,S,l)=>{l.r(S),l.d(S,{default:()=>L});var o=l(37691),w=l(41206),P=l(48898),y=l(94611),e=l(48620),O=l(48615),M=l(90361),T=l.n(M),D=l(15439),f=l.n(D),t=l(94650),v=l(42210),h=(()=>{return(a=h||(h={})).Up="up",a.Warning="warning",a.Critical="critical",h;var a})();let B=(()=>{class a{constructor(n){(0,o.Z)(this,"iconService",void 0),(0,o.Z)(this,"chartThreshold",new e.kL2(new e.Be5(new e.mEc))),(0,o.Z)(this,"chartBand",new e.kL2(new e.Be5(new e.mEc))),(0,o.Z)(this,"customMarkers",void 0),(0,o.Z)(this,"thresholdScales",void 0),(0,o.Z)(this,"bandScales",void 0),this.iconService=n;const s=r=>new e.FUO(this.iconService.getStatusIcon(r));this.customMarkers=new e.oki({[h.Up]:s(h.Up),[h.Warning]:s(h.Warning),[h.Critical]:s(h.Critical)})}ngAfterViewInit(){this.chartThreshold.updateDimensions(),this.chartBand.updateDimensions();const n=new e.jS7;n.fixDomain(e.s1E.STATUS_DOMAIN);const s=new e.lTH(f().duration(100,"hours"));s.fixDomain([f()().toDate(),f()().add(1e3,"hours").toDate()]);const r=new e.FBd;r.formatters.labelFormatter=c=>f()(c).format("LL"),this.thresholdScales={y:n,x:r},this.bandScales={y:n,x:s};const i=new e.Z7w,p=(0,e.s_I)(new e.oki(function E(){return{[h.Up]:e.Sj$[9],[h.Warning]:e.Sj$[5],[h.Critical]:e.Sj$[3]}}()));p.data.thickness=c=>c.status===h.Up?e.Z7w.THIN:e.Z7w.THICK;const u=b({numberOfSeries:10,isRandom:!0}).map(c=>({...c,accessors:p,renderer:i,scales:this.thresholdScales})),g=b({numberOfSeries:1,isRandom:!1}).map(c=>({...c,accessors:p,renderer:i,scales:this.thresholdScales}));this.chartThreshold.update(u),this.chartThreshold.setSeriesStates(u.map(c=>({seriesId:c.id,state:e.nTW.deemphasized}))),this.chartBand.update(g)}}return(0,o.Z)(a,"\u0275fac",function(n){return new(n||a)(t.Y36(y.C6t))}),(0,o.Z)(a,"\u0275cmp",t.Xpm({type:a,selectors:[["nui-status-chart-test-example"]],decls:8,vars:2,consts:[[1,"nui-text-page"],[1,"d-flex","flex-column"],[1,"p-2",3,"chart"]],template:function(n,s){1&n&&(t.TgZ(0,"p",0),t._uU(1,"Threshold section example"),t.qZA(),t.TgZ(2,"div",1),t._UZ(3,"nui-chart",2),t.qZA(),t.TgZ(4,"p",0),t._uU(5,"Band (Band'ish) scales on both scales"),t.qZA(),t.TgZ(6,"div",1),t._UZ(7,"nui-chart",2),t.qZA()),2&n&&(t.xp6(3),t.Q6J("chart",s.chartThreshold),t.xp6(4),t.Q6J("chart",s.chartBand))},dependencies:[v.x],encapsulation:2})),a})();function b(a={numberOfSeries:1,isRandom:!0}){const d=r=>f()().add({hours:r}).toDate();return T()(a.numberOfSeries).map((r=a.isRandom,()=>{let i=0;const p=[];for(;i<1e3;){let u=i+(r?100*Math.random():100);u>=1e3&&(u=1e3);const g=Math.random();p.push({start:i,end:u,status:g>.5?h.Up:g>.2?h.Warning:h.Critical}),i=u}return p})).map((r,i)=>({id:"series-"+i,name:"Series "+i,data:r.map(p=>({value:p.end-p.start,status:p.status,start:d(p.start),end:d(p.end)}))}));var r}let z=(()=>{class a{constructor(){(0,o.Z)(this,"palette",new e.syg(new e.oki({connect:e.cpE[0],dns:e.cpE[1],send:e.cpE[2],ttfb:e.cpE[3],cdownload:e.cpE[4]}))),(0,o.Z)(this,"gridChart",new e.kL2(new e.Be5(new e.U$N))),(0,o.Z)(this,"listItems",[{category:"Category 1",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{category:"Category 2",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{category:"Category 3",data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{category:"Category 4",data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}]),(0,o.Z)(this,"scales",void 0)}ngAfterViewInit(){const n=new e.jS7;n.padding(.5);const s=new e.f$s;this.scales={y:n,x:s},this.scales.x.formatters.tick=g=>`${Number(g/1e3).toFixed(1)}s`;const r=new e.Z7w({highlightStrategy:new e.Pkp("x")}),i=new e.HVr;i.data.color=g=>this.palette.standardColors.get(g.type);const p=[],u=[];this.listItems.forEach((g,c)=>{p.push(g.category),u.push({id:`series-${c}`,name:`Series ${c}`,data:g.data.map(m=>({value:m.end-m.start,category:g.category,type:m.type,__bar:{start:m.start,end:m.end}})),accessors:i,scales:this.scales,renderer:r})}),n.fixDomain(p.reverse()),this.gridChart.update(u)}}return(0,o.Z)(a,"\u0275fac",function(n){return new(n||a)}),(0,o.Z)(a,"\u0275cmp",t.Xpm({type:a,selectors:[["nui-chart-waterfall-simple"]],decls:2,vars:1,consts:[[1,"chart"],[1,"d-flex",3,"chart"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"nui-chart",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("chart",s.gridChart))},dependencies:[v.x],encapsulation:2})),a})();var k=l(84080),x=l(98184),Z=l(36895);const W=["templatePortalGrid"],I=["gridChartPlaceholder"];function U(a,d){1&a&&t._UZ(0,"div",9,10)}function A(a,d){if(1&a&&(t.TgZ(0,"div",3),t._UZ(1,"nui-icon",4),t.TgZ(2,"div",5)(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"div",6),t.YNc(6,U,2,0,"div",7),t._UZ(7,"nui-chart",8),t.qZA()()),2&a){const n=d.$implicit,s=d.first;t.xp6(1),t.s9C("icon",n.icon),t.xp6(1),t.Udp("width",200,"px"),t.xp6(2),t.Oqu(n.url),t.xp6(2),t.Q6J("ngIf",s),t.xp6(1),t.Q6J("chart",n.chart)}}function _(a,d){if(1&a&&t._UZ(0,"nui-chart",8),2&a){const n=t.oxw();t.Q6J("chart",n.gridChart)}}const F=[{path:"",component:B},{path:"waterfall",component:(()=>{class a{constructor(n,s,r,i){(0,o.Z)(this,"overlay",void 0),(0,o.Z)(this,"overlayPositionBuilder",void 0),(0,o.Z)(this,"_viewContainerRef",void 0),(0,o.Z)(this,"scrollStrategyOptions",void 0),(0,o.Z)(this,"palette",new e.syg(new e.oki({connect:e.cpE[0],dns:e.cpE[1],send:e.cpE[2],ttfb:e.cpE[3],cdownload:e.cpE[4]}))),(0,o.Z)(this,"gridChart",new e.kL2(new e.Be5)),(0,o.Z)(this,"positionStrategy",void 0),(0,o.Z)(this,"templatePortal",void 0),(0,o.Z)(this,"listItems",[{url:"http://www.google.com",size:924,icon:"xml-file",chart:new e.kL2(new e.Be5(new e.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{url:"http://www2.google.com",size:924,icon:"xml-file",chart:new e.kL2(new e.Be5(new e.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{url:"http://www.google.com/cat.png",size:3333,icon:"image",chart:new e.kL2(new e.Be5(new e.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{url:"http://www.google.com/revenge.png",size:3333,icon:"image",chart:new e.kL2(new e.Be5(new e.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}]),(0,o.Z)(this,"scales",void 0),(0,o.Z)(this,"templatePortalGrid",void 0),(0,o.Z)(this,"gridChartPlaceholder",void 0),this.overlay=n,this.overlayPositionBuilder=s,this._viewContainerRef=r,this.scrollStrategyOptions=i}ngOnInit(){this.gridChart.addPlugin(new e.Rbc),this.gridChart.getEventBus().getStream(e.bdF).subscribe(n=>{const s=n.data;this.listItems.forEach(r=>{this.scales.x.fixDomain(s[this.scales.x.id]),r.chart.updateDimensions()})})}ngAfterViewInit(){this.templatePortal=new k.UE(this.templatePortalGrid,this._viewContainerRef),this.positionStrategy=this.overlayPositionBuilder.flexibleConnectedTo(this.gridChartPlaceholder).withPositions([{overlayX:"start",overlayY:"top",originX:"start",originY:"top"}]).withFlexibleDimensions(!0).withPush(!0);const s=this.overlay.create({positionStrategy:this.positionStrategy,scrollStrategy:this.scrollStrategyOptions.close()}),r=new e.jS7,i=new e.f$s;i.fixDomain([0,1e3]),r.fixDomain(["cat1"]),this.scales={y:r,x:i},this.scales.x.formatters.tick=m=>`${Number(m/1e3).toFixed(1)}s`;const p=new e.Z7w,u=new e.HVr;u.data.color=m=>this.palette.standardColors.get(m.type);let g=0;this.listItems.forEach(m=>{const R=[{id:"series-1",name:"Series 1",data:m.data.map(C=>({value:C.end-C.start,category:"cat1",type:C.type,__bar:{start:C.start,end:C.end}})),accessors:u,scales:this.scales,renderer:p}];m.chart.update(R),m.chart.getEventBus().getStream(e.Rj$).subscribe(console.log),m.chart.getEventBus().getStream(e.q7O).subscribe(console.log),g=m.chart.getGrid().config().dimension.width()});const c=this.gridChart.getGrid().config();c.dimension.height(32*this.listItems.length),c.dimension.width(g),c.dimension.autoHeight=!1,c.axis.left.visible=!1,c.axis.left.gridTicks=!1,c.axis.bottom.gridTicks=!0,this.gridChart.update([{id:"i am grid",name:"i am grid",data:[],accessors:new e.bbc,scales:this.scales,renderer:new e.XqW}]),this.gridChart.updateDimensions(),s.attach(this.templatePortal)}drop(n){(0,w.bA)(this.listItems,n.previousIndex,n.currentIndex)}}return(0,o.Z)(a,"\u0275fac",function(n){return new(n||a)(t.Y36(x.aV),t.Y36(x.wJ),t.Y36(t.s_b),t.Y36(x.uw))}),(0,o.Z)(a,"\u0275cmp",t.Xpm({type:a,selectors:[["nui-chart-waterfall-test"]],viewQuery:function(n,s){if(1&n&&(t.Gf(W,5),t.Gf(I,5)),2&n){let r;t.iGM(r=t.CRH())&&(s.templatePortalGrid=r.first),t.iGM(r=t.CRH())&&(s.gridChartPlaceholder=r.first)}},decls:5,vars:1,consts:[["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","d-flex flex-row align-items-center waterfall-chart-list-item","cdkDrag","",4,"ngFor","ngForOf"],["templatePortalGrid",""],["cdkDrag","",1,"d-flex","flex-row","align-items-center","waterfall-chart-list-item"],[1,"p-2",3,"icon"],[1,"p-2",2,"overflow","hidden"],[1,"d-flex"],["class","d-flex h-100",4,"ngIf"],[1,"d-flex",3,"chart"],[1,"d-flex","h-100"],["gridChartPlaceholder",""]],template:function(n,s){1&n&&(t.TgZ(0,"div")(1,"div",0),t.NdJ("cdkDropListDropped",function(i){return s.drop(i)}),t.YNc(2,A,8,6,"div",1),t.qZA()(),t.YNc(3,_,1,1,"ng-template",null,2,t.W1O)),2&n&&(t.xp6(2),t.Q6J("ngForOf",s.listItems))},dependencies:[w.Wj,w.Zt,y.oJW,Z.sg,Z.O5,v.x],styles:['.nui-dnd-hover-state[_ngcontent-%COMP%]{background:#f2f2f2}.nui-dnd-raised-state[_ngcontent-%COMP%]{z-index:1;box-sizing:border-box;box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-preview[_ngcontent-%COMP%]{border:1px #d9d9d9 solid;background:#f2f2f2;z-index:1;box-sizing:border-box;box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-dropzone.nui-dnd-dropzone--active[_ngcontent-%COMP%]{border:4px dashed #999!important}.nui-dnd-dropzone.nui-dnd-dropzone--drop-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #00c4d2!important;background-color:#00c4d233}.nui-dnd-dropzone.nui-dnd-dropzone--drop-not-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #dd2c00!important;background-color:#dd2c0033}.nui-dnd-dropzone[_ngcontent-%COMP%]   .centered-overlay[_ngcontent-%COMP%], .nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{border-radius:50%;content:"";display:block;height:40px;width:40px;z-index:-1}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{fill:#111}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#00c4d2}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{clip-path:circle(5px);fill:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#dd2c00}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{clip-path:circle(5px);fill:#fff}.waterfall-chart-list-item[_ngcontent-%COMP%]:hover{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.waterfall-chart-list-item[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-content,#fff)}']})),a})()},{path:"waterfall-simple",component:z}];let L=(()=>{class a{}return(0,o.Z)(a,"\u0275fac",function(n){return new(n||a)}),(0,o.Z)(a,"\u0275mod",t.oAB({type:a})),(0,o.Z)(a,"\u0275inj",t.cJS({imports:[w._t,y.Ts3,O.l,e.$y4,P.Bz.forChild(F)]})),a})()}}]);