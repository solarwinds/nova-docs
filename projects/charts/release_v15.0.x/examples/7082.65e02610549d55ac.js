"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[7082],{17082:(F,w,s)=>{s.r(w),s.d(w,{default:()=>E});var o=s(37691),u=s(41206),_=s(48898),l=s(94611),a=s(48620),b=s(50225),P=s(48615),t=s(94650),T=s(21617),U=s.n(T),Z=s(42210);let m=(()=>{class n{constructor(){(0,o.Z)(this,"chartConfig",{horizontal:!0}),(0,o.Z)(this,"chart",new a.kL2((0,a.skL)(this.chartConfig)))}ngOnInit(){const e=(0,a.Q6e)(this.chartConfig),r=(0,a.CQI)(this.chartConfig),d=new a.Z7w({highlightStrategy:new a.Pkp("x")});this.chart.addPlugin(new a.koE);const p=new a.oki(U()(["connect","dns","send","ttfb","cdownload"],a.cpE));e.data.color=c=>p.get(c.type),r.x.formatters.tick=c=>`${parseFloat(Number(c/1e3).toFixed(1)).toLocaleString()}s`,r.y.padding(.5),this.chart.update([{id:"1",name:"Category 1",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{id:"2",name:"Category 2",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{id:"3",name:"Category 3",data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{id:"4",name:"Category 4",data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}].map(c=>({...c,accessors:e,scales:r,renderer:d})))}}return(0,o.Z)(n,"\u0275fac",function(e){return new(e||n)}),(0,o.Z)(n,"\u0275cmp",t.Xpm({type:n,selectors:[["nui-waterfall-chart-simple-example"]],decls:1,vars:1,consts:[[1,"d-flex",3,"chart"]],template:function(e,r){1&e&&t._UZ(0,"nui-chart",0),2&e&&t.Q6J("chart",r.chart)},dependencies:[Z.x],encapsulation:2})),n})();var O=s(84080),C=s(98184),y=s(36895),M=s(63629);const W=["templatePortalGrid"],S=["gridChartPlaceholder"];function k(n,i){1&n&&t._UZ(0,"div",11)}function z(n,i){if(1&n&&(t.TgZ(0,"div",5),t._UZ(1,"nui-icon",6),t.TgZ(2,"div",7)(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"div",8),t.YNc(6,k,1,0,"div",9),t._UZ(7,"nui-chart",10),t.qZA()()),2&n){const e=i.$implicit,r=i.first,d=t.oxw();t.xp6(1),t.s9C("icon",e.icon),t.xp6(1),t.Udp("width",d.rowSize,"px"),t.xp6(2),t.Oqu(e.url),t.xp6(2),t.Q6J("ngIf",r),t.xp6(1),t.Q6J("chart",e.chart)}}function D(n,i){if(1&n&&t._UZ(0,"nui-chart",10),2&n){const e=t.oxw();t.Q6J("chart",e.gridChart)}}let v=(()=>{class n{updateGridPosition(){this.overlayRef.updatePosition()}constructor(e,r,d,p){(0,o.Z)(this,"overlay",void 0),(0,o.Z)(this,"overlayPositionBuilder",void 0),(0,o.Z)(this,"_viewContainerRef",void 0),(0,o.Z)(this,"scrollStrategyOptions",void 0),(0,o.Z)(this,"seriesChartConfig",new a.mEc({showBottomAxis:!1})),(0,o.Z)(this,"iconSize",20),(0,o.Z)(this,"rowSize",200),(0,o.Z)(this,"palette",new a.syg(new a.oki({connect:a.cpE[0],dns:a.cpE[1],send:a.cpE[2],ttfb:a.cpE[3],cdownload:a.cpE[4]}))),(0,o.Z)(this,"gridChart",new a.kL2(new a.Be5)),(0,o.Z)(this,"positionStrategy",void 0),(0,o.Z)(this,"templatePortal",void 0),(0,o.Z)(this,"listItems",function B(n){return[{url:"http://www.google.com",size:924,icon:"xml-file",chart:new a.kL2(new a.Be5(n)),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{url:"http://www2.google.com",size:924,icon:"xml-file",chart:new a.kL2(new a.Be5(n)),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{url:"http://www.google.com/cat.png",size:3333,icon:"image",chart:new a.kL2(new a.Be5(n)),data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{url:"http://www.google.com/revenge.png",size:3333,icon:"image",chart:new a.kL2(new a.Be5(n)),data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}]}(this.seriesChartConfig)),(0,o.Z)(this,"scales",void 0),(0,o.Z)(this,"overlayRef",void 0),(0,o.Z)(this,"templatePortalGrid",void 0),(0,o.Z)(this,"gridChartPlaceholder",void 0),this.overlay=e,this.overlayPositionBuilder=r,this._viewContainerRef=d,this.scrollStrategyOptions=p}ngOnInit(){this.gridChart.addPlugin(new a.Rbc),this.gridChart.getEventBus().getStream(a.bdF).subscribe(e=>{const r=e.data;this.listItems.forEach(d=>{this.scales.x.fixDomain(r[this.scales.x.id]),d.chart.updateDimensions()})})}ngAfterViewInit(){this.templatePortal=new O.UE(this.templatePortalGrid,this._viewContainerRef),this.positionStrategy=this.overlay.position().flexibleConnectedTo(this.gridChartPlaceholder).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}]).withPush(!1),this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy,scrollStrategy:this.scrollStrategyOptions.reposition()});const r=new a.jS7,d=new a.f$s;d.fixDomain([0,1e3]),r.fixDomain(["cat1"]),this.scales={x:d,y:r},this.scales.x.formatters.tick=h=>`${Number(h/1e3).toFixed(1)}s`;const p=new a.Z7w({highlightStrategy:new a.Pkp("x")}),c=new a.HVr;c.data.color=h=>this.palette.standardColors.get(h.type);let x=0;this.listItems.forEach(h=>{const X=[{id:"series-1",name:"Series 1",data:h.data.map(f=>({value:f.end-f.start,start:f.start,end:f.end,category:"cat1",type:f.type})),accessors:c,scales:this.scales,renderer:p}];h.chart.update(X),x=h.chart.getGrid().config().dimension.width()});const g=this.gridChart.getGrid().config();g.dimension.height(this.listItems.length*this.seriesChartConfig.dimension.height()),g.dimension.width(x),g.dimension.autoHeight=!1,g.axis.left.visible=!1,g.axis.left.gridTicks=!1,g.axis.bottom.gridTicks=!0,this.gridChart.update([{id:"i am grid",name:"i am grid",data:[],accessors:new a.bbc,scales:this.scales,renderer:new a.XqW}]),this.gridChart.updateDimensions(),this.overlayRef.attach(this.templatePortal)}drop(e){(0,u.bA)(this.listItems,e.previousIndex,e.currentIndex)}}return(0,o.Z)(n,"\u0275fac",function(e){return new(e||n)(t.Y36(C.aV),t.Y36(C.wJ),t.Y36(t.s_b),t.Y36(C.uw))}),(0,o.Z)(n,"\u0275cmp",t.Xpm({type:n,selectors:[["nui-waterfall-chart-advanced-example"]],viewQuery:function(e,r){if(1&e&&(t.Gf(W,5),t.Gf(S,5)),2&e){let d;t.iGM(d=t.CRH())&&(r.templatePortalGrid=d.first),t.iGM(d=t.CRH())&&(r.gridChartPlaceholder=d.first)}},hostBindings:function(e,r){1&e&&t.NdJ("click",function(){return r.updateGridPosition()},!1,t.evT)},decls:7,vars:3,consts:[[1,"chart","mb-5"],["gridChartPlaceholder",""],["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","d-flex flex-row align-items-center waterfall-chart-list-item","cdkDrag","",4,"ngFor","ngForOf"],["templatePortalGrid",""],["cdkDrag","",1,"d-flex","flex-row","align-items-center","waterfall-chart-list-item"],[1,"p-1",3,"icon"],[1,"p-1",2,"overflow","hidden"],[1,"d-flex"],["class","d-flex h-100",4,"ngIf"],["nuiChartCollectionId","1",1,"d-flex",3,"chart"],[1,"d-flex","h-100"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",null,1),t.TgZ(3,"div",2),t.NdJ("cdkDropListDropped",function(p){return r.drop(p)}),t.YNc(4,z,8,6,"div",3),t.qZA()(),t.YNc(5,D,1,1,"ng-template",null,4,t.W1O)),2&e&&(t.xp6(1),t.Udp("margin-left",r.rowSize+r.iconSize,"px"),t.xp6(3),t.Q6J("ngForOf",r.listItems))},dependencies:[u.Wj,u.Zt,l.oJW,y.sg,y.O5,Z.x,M.V],styles:['.nui-dnd-hover-state[_ngcontent-%COMP%]{background:#f2f2f2}.nui-dnd-raised-state[_ngcontent-%COMP%]{z-index:1;box-sizing:border-box;box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-preview[_ngcontent-%COMP%]{border:1px #d9d9d9 solid;background:#f2f2f2;z-index:1;box-sizing:border-box;box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-dropzone.nui-dnd-dropzone--active[_ngcontent-%COMP%]{border:4px dashed #999!important}.nui-dnd-dropzone.nui-dnd-dropzone--drop-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #00c4d2!important;background-color:#00c4d233}.nui-dnd-dropzone.nui-dnd-dropzone--drop-not-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #dd2c00!important;background-color:#dd2c0033}.nui-dnd-dropzone[_ngcontent-%COMP%]   .centered-overlay[_ngcontent-%COMP%], .nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{border-radius:50%;content:"";display:block;height:40px;width:40px;z-index:-1}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{fill:#111}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#00c4d2}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{clip-path:circle(5px);fill:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#dd2c00}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{clip-path:circle(5px);fill:#fff}.waterfall-chart-list-item[_ngcontent-%COMP%]:hover{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.waterfall-chart-list-item[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-content,#fff)}']})),n})(),I=(()=>{class n{}return(0,o.Z)(n,"\u0275fac",function(e){return new(e||n)}),(0,o.Z)(n,"\u0275cmp",t.Xpm({type:n,selectors:[["nui-chart-docs-waterfall"]],decls:82,vars:1,consts:[["filenamePrefix","waterfall-chart-simple","exampleTitle","Simple Waterfall Chart"],["type","warning",3,"allowDismiss"],["href","../classes/Chart.html","target","_blank"],["href","../classes/XYGrid.html","target","_blank"],["href","../classes/BarStatusGridConfig.html","target","_blank"],["href","https://material.angular.io/cdk/overlay/overview","target","_blank"],["href","https://material.angular.io/cdk/portal/overview","target","_blank"],["href","../classes/HorizontalBarAccessors.html","target","_blank"],["href","../classes/BandScale.html","target","_blank"],["href","../classes/BandScale.html#padding","target","_blank"],["filenamePrefix","waterfall-chart-advanced","exampleTitle","Advanced Waterfall Chart"]],template:function(e,r){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Waterfall Charts"),t.qZA(),t.TgZ(2,"p"),t._uU(3," A Waterfall Chart is a chart that shows a certain category events on the timeline.\n"),t.qZA(),t.TgZ(4,"h2"),t._uU(5,"Simple Waterfall Chart"),t.qZA(),t.TgZ(6,"p"),t._uU(7," To build a simple Waterfall chart follow the instructions in the example source code:\n"),t.qZA(),t.TgZ(8,"nui-example-wrapper",0),t._UZ(9,"nui-waterfall-chart-simple-example"),t.qZA(),t.TgZ(10,"h2"),t._uU(11,"Advanced Waterfall Chart"),t.qZA(),t.TgZ(12,"nui-message",1)(13,"strong"),t._uU(14,"Caution!!!"),t.qZA(),t._uU(15," Example below is provided as a proof of concept and is not meant to be used in production code.\n"),t.qZA(),t.TgZ(16,"p"),t._uU(17," It is possible to build fancy waterfall charts with more complex functionality, like the one below. Each series provides a separate instance of bar chart that is rendered inside grid, which is a separate empty chart positioned using CDK Overlay on top of bar charts.\n"),t.qZA(),t.TgZ(18,"p"),t._uU(19,"To build an advanced Waterfall chart below follow the instructions:"),t.qZA(),t.TgZ(20,"ol")(21,"li"),t._uU(22," Make sure your series provide a new instance of "),t.TgZ(23,"code")(24,"a",2),t._uU(25,"Chart"),t.qZA()(),t._uU(26," with an instance of "),t.TgZ(27,"code")(28,"a",3),t._uU(29,"XYGrid"),t.qZA()(),t._uU(30," passed in as an argument. "),t.TgZ(31,"code"),t._uU(32,"new "),t.TgZ(33,"a",4),t._uU(34,"BarStatusGridConfig"),t.qZA(),t._uU(35,"()"),t.qZA(),t._uU(36," config instance goes as an argument to "),t.TgZ(37,"code"),t._uU(38,"XYGrid"),t.qZA(),t._uU(39," with the "),t.TgZ(40,"code"),t._uU(41,"showBottomAxis"),t.qZA(),t._uU(42," option set to "),t.TgZ(43,"code"),t._uU(44,"false"),t.qZA(),t._uU(45,". "),t.qZA(),t.TgZ(46,"li"),t._uU(47," Instantiate and configure a "),t.TgZ(48,"code")(49,"a",3),t._uU(50,"XYGrid"),t.qZA()()(),t.TgZ(51,"li"),t._uU(52," Instantiate and configure an "),t.TgZ(53,"code")(54,"a",5),t._uU(55,"Overlay"),t.qZA()(),t._uU(56," and corresponding "),t.TgZ(57,"code")(58,"a",6),t._uU(59,"Portal"),t.qZA()(),t._uU(60," to attach the grid to a correct point of the first series on the page. "),t.qZA(),t.TgZ(61,"li"),t._uU(62," Instantiate "),t.TgZ(63,"code")(64,"a",7),t._uU(65,"HorizontalBarAccessors"),t.qZA()(),t._uU(66,". Using the accessor, assign the color or the bar to the corresponding data type retrieved from the "),t.TgZ(67,"code"),t._uU(68,"ChartPalette"),t.qZA(),t._uU(69,". "),t.qZA(),t.TgZ(70,"li"),t._uU(71," Configure the thickness of the bar using the "),t.TgZ(72,"code")(73,"a",8),t._uU(74,"BandScale"),t.qZA()(),t._uU(75," method "),t.TgZ(76,"code")(77,"a",9),t._uU(78,"padding"),t.qZA()(),t._uU(79,". "),t.qZA()(),t.TgZ(80,"nui-example-wrapper",10),t._UZ(81,"nui-waterfall-chart-advanced-example"),t.qZA()),2&e&&(t.xp6(12),t.Q6J("allowDismiss",!1))},dependencies:[l.hD2,l.qqZ,m,v],encapsulation:2})),n})();var q=s(50465);const Y=[{path:"",component:I,data:{srlc:{stage:l.We9.beta},showThemeSwitcher:!0}},{path:"simple",component:m,data:{srlc:{hideIndicator:!0}}},{path:"advanced",component:v,data:{srlc:{hideIndicator:!0}}},{path:"test",component:(()=>{class n{}return(0,o.Z)(n,"\u0275fac",function(e){return new(e||n)}),(0,o.Z)(n,"\u0275cmp",t.Xpm({type:n,selectors:[["waterfall-chart-test-component"]],decls:6,vars:2,consts:[[1,"container"],[1,"d-flex","flex-row"],["id","nui-waterfall-chart-simple",1,"w-100","mb-5"],["id","nui-waterfall-chart-advanced",1,"w-100","mt-5"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"charts-test-harness")(2,"div",1),t._UZ(3,"nui-waterfall-chart-simple-example",2),t.qZA(),t.TgZ(4,"div",1),t._UZ(5,"nui-waterfall-chart-advanced-example",3),t.qZA()()()),2&e&&t.Udp("margin-top",50,"px")},dependencies:[q.m,m,v],encapsulation:2})),n})(),data:{srlc:{hideIndicator:!0}}}];let E=(()=>{class n{}return(0,o.Z)(n,"\u0275fac",function(e){return new(e||n)}),(0,o.Z)(n,"\u0275mod",t.oAB({type:n})),(0,o.Z)(n,"\u0275inj",t.cJS({providers:[{provide:l.V3$,useValue:(0,b.S)("waterfall")}],imports:[u._t,l.Ts3,l.vvu,P.l,a.$y4,l.gkT,_.Bz.forChild(Y)]})),n})()}}]);