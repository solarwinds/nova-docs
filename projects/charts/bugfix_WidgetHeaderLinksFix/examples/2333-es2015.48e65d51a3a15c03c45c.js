"use strict";(self.webpackChunk_nova_ui_charts=self.webpackChunk_nova_ui_charts||[]).push([[2333],{22333:function(t,e,n){n.r(e),n.d(e,{ChartStatusExampleModule:function(){return k}});var r=n(83461),o=n(66266),a=n(28425),s=n(4813),i=n(58490),c=n(21221),d=n.n(c),l=n(16738),p=n.n(l),h=n(33018),g=n(13458),u=(()=>{return(t=u||(u={})).Up="up",t.Warning="warning",t.Critical="critical",u;var t})();let w=(()=>{class t{constructor(t){this.iconService=t,this.chartThreshold=new s.kL2(new s.Be5(new s.mEc)),this.chartBand=new s.kL2(new s.Be5(new s.mEc));const e=t=>new s.FUO(this.iconService.getStatusIcon(t));this.customMarkers=new s.oki({[u.Up]:e(u.Up),[u.Warning]:e(u.Warning),[u.Critical]:e(u.Critical)})}ngAfterViewInit(){this.chartThreshold.updateDimensions(),this.chartBand.updateDimensions();const t=new s.jS7;t.fixDomain(s.s1E.STATUS_DOMAIN);const e=new s.lTH(p().duration(100,"hours"));e.fixDomain([p()().toDate(),p()().add(1e3,"hours").toDate()]);const n=new s.FBd;n.formatters.labelFormatter=t=>p()(t).format("LL"),this.thresholdScales={y:t,x:n},this.bandScales={y:t,x:e};const r=new s.Z7w,o=(0,s.s_I)(new s.oki({[u.Up]:s.lQw[4],[u.Warning]:s.lQw[2],[u.Critical]:s.lQw[1]}));o.data.thickness=t=>t.status===u.Up?s.Z7w.THIN:s.Z7w.THICK;const a=m({numberOfSeries:10,isRandom:!0}).map(t=>Object.assign(Object.assign({},t),{accessors:o,renderer:r,scales:this.thresholdScales})),i=m({numberOfSeries:1,isRandom:!1}).map(t=>Object.assign(Object.assign({},t),{accessors:o,renderer:r,scales:this.thresholdScales}));this.chartThreshold.update(a),this.chartThreshold.setSeriesStates(a.map(t=>({seriesId:t.id,state:s.nTW.deemphasized}))),this.chartBand.update(i)}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(a.C6t))},t.\u0275cmp=h.Xpm({type:t,selectors:[["nui-status-chart-test-example"]],decls:8,vars:2,consts:[[1,"nui-text-page"],[1,"d-flex","flex-column"],[1,"p-2",3,"chart"]],template:function(t,e){1&t&&(h.TgZ(0,"p",0),h._uU(1," Threshold section example\n"),h.qZA(),h.TgZ(2,"div",1),h._UZ(3,"nui-chart",2),h.qZA(),h.TgZ(4,"p",0),h._uU(5," Band (Band'ish) scales on both scales\n"),h.qZA(),h.TgZ(6,"div",1),h._UZ(7,"nui-chart",2),h.qZA()),2&t&&(h.xp6(3),h.Q6J("chart",e.chartThreshold),h.xp6(4),h.Q6J("chart",e.chartBand))},directives:[g.x],encapsulation:2}),t})();function m(t={numberOfSeries:1,isRandom:!0}){const e=t=>p()().add({hours:t}).toDate();return d()(t.numberOfSeries).map((n=t.isRandom,()=>{let t=0;const e=[];for(;t<1e3;){let r=t+(n?100*Math.random():100);r>=1e3&&(r=1e3);const o=Math.random();e.push({start:t,end:r,status:o>.5?u.Up:o>.2?u.Warning:u.Critical}),t=r}return e})).map((t,n)=>({id:"series-"+n,name:"Series "+n,data:t.map(t=>({value:t.end-t.start,status:t.status,start:e(t.start),end:e(t.end)}))}));var n}let f=(()=>{class t{constructor(){this.palette=new s.syg(new s.oki({connect:s.cpE[0],dns:s.cpE[1],send:s.cpE[2],ttfb:s.cpE[3],cdownload:s.cpE[4]})),this.gridChart=new s.kL2(new s.Be5(new s.U$N)),this.listItems=[{category:"Category 1",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{category:"Category 2",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{category:"Category 3",data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{category:"Category 4",data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}]}ngAfterViewInit(){const t=new s.jS7;t.padding(.5);const e=new s.f$s;this.scales={y:t,x:e},this.scales.x.formatters.tick=t=>`${Number(t/1e3).toFixed(1)}s`;const n=new s.Z7w({highlightStrategy:new s.Pkp("x")}),r=new s.HVr;r.data.color=t=>this.palette.standardColors.get(t.type);const o=[],a=[];this.listItems.forEach((t,e)=>{o.push(t.category),a.push({id:`series-${e}`,name:`Series ${e}`,data:t.data.map(e=>({value:e.end-e.start,category:t.category,type:e.type,__bar:{start:e.start,end:e.end}})),accessors:r,scales:this.scales,renderer:n})}),t.fixDomain(o.reverse()),this.gridChart.update(a)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["nui-chart-waterfall-simple"]],decls:2,vars:1,consts:[[1,"chart"],[1,"d-flex",3,"chart"]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"nui-chart",1),h.qZA()),2&t&&(h.xp6(1),h.Q6J("chart",e.gridChart))},directives:[g.x],encapsulation:2}),t})();var x=n(87636),y=n(90625),b=n(38583);const C=["templatePortalGrid"],_=["gridChartPlaceholder"];function v(t,e){1&t&&h._UZ(0,"div",9,10)}function O(t,e){if(1&t&&(h.TgZ(0,"div",3),h._UZ(1,"nui-icon",4),h.TgZ(2,"div",5),h.TgZ(3,"span"),h._uU(4),h.qZA(),h.qZA(),h.TgZ(5,"div",6),h.YNc(6,v,2,0,"div",7),h._UZ(7,"nui-chart",8),h.qZA(),h.qZA()),2&t){const t=e.$implicit,n=e.first;h.xp6(1),h.s9C("icon",t.icon),h.xp6(1),h.Udp("width",200,"px"),h.xp6(2),h.Oqu(t.url),h.xp6(2),h.Q6J("ngIf",n),h.xp6(1),h.Q6J("chart",t.chart)}}function P(t,e){if(1&t&&h._UZ(0,"nui-chart",8),2&t){const t=h.oxw();h.Q6J("chart",t.gridChart)}}const M=[{path:"",component:w},{path:"waterfall",component:(()=>{class t{constructor(t,e,n,r){this.overlay=t,this.overlayPositionBuilder=e,this._viewContainerRef=n,this.scrollStrategyOptions=r,this.palette=new s.syg(new s.oki({connect:s.cpE[0],dns:s.cpE[1],send:s.cpE[2],ttfb:s.cpE[3],cdownload:s.cpE[4]})),this.gridChart=new s.kL2(new s.Be5),this.listItems=[{url:"http://www.google.com",size:924,icon:"xml-file",chart:new s.kL2(new s.Be5(new s.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{url:"http://www2.google.com",size:924,icon:"xml-file",chart:new s.kL2(new s.Be5(new s.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{url:"http://www.google.com/cat.png",size:3333,icon:"image",chart:new s.kL2(new s.Be5(new s.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{url:"http://www.google.com/revenge.png",size:3333,icon:"image",chart:new s.kL2(new s.Be5(new s.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}]}ngOnInit(){this.gridChart.addPlugin(new s.Rbc),this.gridChart.getEventBus().getStream(s.bdF).subscribe(t=>{const e=t.data;this.listItems.forEach(t=>{this.scales.x.fixDomain(e[this.scales.x.id]),t.chart.updateDimensions()})})}ngAfterViewInit(){this.templatePortal=new x.UE(this.templatePortalGrid,this._viewContainerRef),this.positionStrategy=this.overlayPositionBuilder.flexibleConnectedTo(this.gridChartPlaceholder).withPositions([{overlayX:"start",overlayY:"top",originX:"start",originY:"top"}]).withFlexibleDimensions(!0).withPush(!0);const t=this.overlay.create({positionStrategy:this.positionStrategy,scrollStrategy:this.scrollStrategyOptions.close()}),e=new s.jS7,n=new s.f$s;n.fixDomain([0,1e3]),e.fixDomain(["cat1"]),this.scales={y:e,x:n},this.scales.x.formatters.tick=t=>`${Number(t/1e3).toFixed(1)}s`;const r=new s.Z7w,o=new s.HVr;o.data.color=t=>this.palette.standardColors.get(t.type);let a=0;this.listItems.forEach(t=>{const e=[{id:"series-1",name:"Series 1",data:t.data.map(t=>({value:t.end-t.start,category:"cat1",type:t.type,__bar:{start:t.start,end:t.end}})),accessors:o,scales:this.scales,renderer:r}];t.chart.update(e),t.chart.getEventBus().getStream(s.Rj$).subscribe(console.log),t.chart.getEventBus().getStream(s.q7O).subscribe(console.log),a=t.chart.getGrid().config().dimension.width()});const i=this.gridChart.getGrid().config();i.dimension.height(32*this.listItems.length),i.dimension.width(a),i.dimension.autoHeight=!1,i.axis.left.visible=!1,i.axis.left.gridTicks=!1,i.axis.bottom.gridTicks=!0,this.gridChart.update([{id:"i am grid",name:"i am grid",data:[],accessors:new s.bbc,scales:this.scales,renderer:new s.XqW}]),this.gridChart.updateDimensions(),t.attach(this.templatePortal)}drop(t){(0,r.bA)(this.listItems,t.previousIndex,t.currentIndex)}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(y.aV),h.Y36(y.wJ),h.Y36(h.s_b),h.Y36(y.uw))},t.\u0275cmp=h.Xpm({type:t,selectors:[["nui-chart-waterfall-test"]],viewQuery:function(t,e){if(1&t&&(h.Gf(C,5),h.Gf(_,5)),2&t){let t;h.iGM(t=h.CRH())&&(e.templatePortalGrid=t.first),h.iGM(t=h.CRH())&&(e.gridChartPlaceholder=t.first)}},decls:5,vars:1,consts:[["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","d-flex flex-row align-items-center waterfall-chart-list-item","cdkDrag","",4,"ngFor","ngForOf"],["templatePortalGrid",""],["cdkDrag","",1,"d-flex","flex-row","align-items-center","waterfall-chart-list-item"],[1,"p-2",3,"icon"],[1,"p-2",2,"overflow","hidden"],[1,"d-flex"],["class","d-flex h-100",4,"ngIf"],[1,"d-flex",3,"chart"],[1,"d-flex","h-100"],["gridChartPlaceholder",""]],template:function(t,e){1&t&&(h.TgZ(0,"div"),h.TgZ(1,"div",0),h.NdJ("cdkDropListDropped",function(t){return e.drop(t)}),h.YNc(2,O,8,6,"div",1),h.qZA(),h.qZA(),h.YNc(3,P,1,1,"ng-template",null,2,h.W1O)),2&t&&(h.xp6(2),h.Q6J("ngForOf",e.listItems))},directives:[r.Wj,b.sg,r.Zt,a.oJW,b.O5,g.x],styles:['.nui-dnd-hover-state[_ngcontent-%COMP%]{background:#f2f2f2}.nui-dnd-raised-state[_ngcontent-%COMP%]{z-index:1;box-sizing:border-box;box-shadow:0 2px 10px rgba(17,17,17,.3);box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-preview[_ngcontent-%COMP%]{border:1px #d9d9d9 solid;background:#f2f2f2;z-index:1;box-sizing:border-box;box-shadow:0 2px 10px rgba(17,17,17,.3);box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-dropzone.nui-dnd-dropzone--active[_ngcontent-%COMP%]{border:4px dashed #999!important}.nui-dnd-dropzone.nui-dnd-dropzone--drop-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #00c4d2!important;background-color:rgba(0,196,210,.2)}.nui-dnd-dropzone.nui-dnd-dropzone--drop-not-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #dd2c00!important;background-color:rgba(221,44,0,.2)}.nui-dnd-dropzone[_ngcontent-%COMP%]   .centered-overlay[_ngcontent-%COMP%], .nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{border-radius:50%;content:"";display:block;height:40px;width:40px;z-index:-1}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{fill:#111}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#00c4d2}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{-webkit-clip-path:circle(5px);clip-path:circle(5px);fill:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#dd2c00}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{-webkit-clip-path:circle(5px);clip-path:circle(5px);fill:#fff}.waterfall-chart-list-item[_ngcontent-%COMP%]:hover{background-color:rgba(0,196,210,.1);background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.waterfall-chart-list-item[_ngcontent-%COMP%]{background-color:#fff;background-color:var(--nui-color-bg-content,#fff)}']}),t})()},{path:"waterfall-simple",component:f}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[r._t,a.Ts3,i.l,s.$y4,o.Bz.forChild(M)]]}),t})()}}]);