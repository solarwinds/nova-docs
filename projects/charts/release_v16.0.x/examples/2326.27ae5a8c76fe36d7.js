"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[2326],{72326:(Y,f,r)=>{r.r(f),r.d(f,{default:()=>E});var b=r(97474),m=r(29091),e=r(36735),y=r(65164),v=r(43930),p=r.n(v),P=r(64755),C=r.n(P),D=r(28508),s=r.n(D),o=r(99019),S=r(8410),x=r(78634);const i="YYYY-MM-DDTHH:mm:ssZ",n="2016-12-25T15:05:00Z";var h=function(d){return d.Up="up",d.Warning="warning",d.Critical="critical",d}(h||{});const w=[{path:"",component:(()=>{class d{barChart;statusChart;xScaleId="xScale";selectedDataPoints={};labelPlugin=new e.srA;renderer;selectedLabelPosition;colorProvider={get:t=>"selection-box"===t?"transparent":e.z3U[0],reset:()=>{}};ngOnInit(){this.setUpBarChart(),this.setUpStatusChart()}onReset(){this.selectedDataPoints={},this.selectedLabelPosition=void 0,this.redrawCharts(),this.labelPlugin.areLabelUpdatesEnabled=!0,this.barChart.getEventBus().getStream(e.JQI).next({data:{interactionType:e.X82.MouseMove,values:{}}})}setUpBarChart(){this.barChart=new e.t1X(this.configureBarGrid()),this.barChart.addPlugin(new e.Y44),this.barChart.addPlugin(this.labelPlugin),this.barChart.getEventBus().getStream(e.JM).subscribe(this.handleDataPointsInteraction),this.barChart.getEventBus().getStream(e.JQI).subscribe(this.handleInteractionLabelUpdates),this.barChart.getEventBus().getStream(e.C8o).subscribe(this.handleMouseActive);const t=(0,e.QSe)({},this.colorProvider);t.data.cssClass=this.cssClassAccessor;const a=(0,e.ByE)();a.x=new e.P$m((0,D.duration)(5,"minutes"),this.xScaleId),t.data.thickness=this.barThickness(a);const l={highlightStrategy:new e.tVU("x",1,this.selectedDataPointIdxFn),cursor:"pointer"};this.renderer=new e.TDW(l),this.barChart.update(function I(){return[{id:"series-1",data:[{category:s()(n,i).toDate(),value:66},{category:s()(n,i).add(5,"minutes").toDate(),value:14},{category:s()(n,i).add(10,"minutes").toDate(),value:25},{category:s()(n,i).add(15,"minutes").toDate(),value:55},{category:s()(n,i).add(20,"minutes").toDate(),value:33},{category:s()(n,i).add(25,"minutes").toDate(),value:5}]},{id:"selection-box",data:[{category:s()(n,i).toDate(),value:100},{category:s()(n,i).add(5,"minutes").toDate(),value:100},{category:s()(n,i).add(10,"minutes").toDate(),value:100},{category:s()(n,i).add(15,"minutes").toDate(),value:100},{category:s()(n,i).add(20,"minutes").toDate(),value:100},{category:s()(n,i).add(25,"minutes").toDate(),value:100}]}]}().map(u=>({...u,accessors:t,renderer:this.renderer,scales:a})))}setUpStatusChart(){this.statusChart=new e.t1X(this.configureStatusGrid()),this.statusChart.addPlugin(new e.Y44);const t=new e.SOQ;t.fixDomain(e.bPO.STATUS_DOMAIN);const a=new e.P$m((0,D.duration)(5,"minutes"),this.xScaleId);a.fixDomain([s()(n,i).toDate(),s()(n,i).add(25,"minutes").toDate()]);const l={x:a,y:t},u=(0,e.dg1)(new e.W91(function T(){return{[h.Up]:e.qY0[8],[h.Warning]:e.qY0[4],[h.Critical]:e.qY0[2]}}()));u.data.thickness=c=>c.status===h.Up?e.TDW.THIN:e.TDW.THICK,u.data.cssClass=this.cssClassAccessor,this.statusChart.update(function U(){return[{id:"series-1",name:"Series 1",data:[{status:h.Up,start:s()(n,i).toDate(),end:s()(n,i).toDate()},{status:h.Warning,start:s()(n,i).add(5,"minutes").toDate(),end:s()(n,i).add(5,"minutes").toDate()},{status:h.Critical,start:s()(n,i).add(10,"minutes").toDate(),end:s()(n,i).add(10,"minutes").toDate()},{status:h.Up,start:s()(n,i).add(15,"minutes").toDate(),end:s()(n,i).add(15,"minutes").toDate()},{status:h.Critical,start:s()(n,i).add(20,"minutes").toDate(),end:s()(n,i).add(20,"minutes").toDate()},{status:h.Up,start:s()(n,i).add(25,"minutes").toDate(),end:s()(n,i).add(25,"minutes").toDate()}]}]}().map(c=>({...c,accessors:u,renderer:this.renderer,scales:l})))}configureBarGrid(){const t=new e.a_S;return t.axis.left.visible=!1,t.axis.left.gridTicks=!1,t.axis.bottom.fit=!1,t.borders.top=new e.jHN,t.cursor="pointer",t.dimension.padding.top=0,t.dimension.margin.right=t.dimension.margin.left,new e.SFt(t)}configureStatusGrid(){const t=new e.M4m;return t.axis.bottom.visible=!1,t.cursor="pointer",t.dimension.margin.bottom=0,t.dimension.margin.right=t.dimension.margin.left,t.borders.bottom.visible=!1,new e.SFt(t)}redrawCharts(){this.barChart.update(this.barChart.getDataManager().chartSeriesSet),this.statusChart.update(this.statusChart.getDataManager().chartSeriesSet)}handleDataPointsInteraction=t=>{const a=t.data;a.interactionType===e.X82.Click&&(this.selectedDataPoints=a.dataPoints,this.renderer.config.stateStyles&&(this.renderer.config.stateStyles.deemphasized={opacity:.3}),this.redrawCharts(),this.selectedLabelPosition=this.calculateInteractionLabelPosition(a),this.barChart.getEventBus().getStream(e.JQI).next({data:{interactionType:e.X82.MouseMove,values:this.selectedLabelPosition}}))};handleInteractionLabelUpdates=t=>{const a=t.data;a.interactionType===e.X82.MouseMove&&p()(a.values)&&this.selectedLabelPosition?(this.labelPlugin.areLabelUpdatesEnabled=!0,this.barChart.getEventBus().getStream(e.JQI).next({data:{interactionType:e.X82.MouseMove,values:this.selectedLabelPosition},broadcast:!0}),this.labelPlugin.areLabelUpdatesEnabled=!1):a.interactionType===e.X82.MouseMove&&!p()(a.values)&&(this.labelPlugin.areLabelUpdatesEnabled=!0)};handleMouseActive=t=>{this.renderer.config.stateStyles&&(p()(this.selectedDataPoints)||t.data?t.data&&(this.renderer.config.stateStyles.deemphasized={opacity:.1}):this.renderer.config.stateStyles.deemphasized={opacity:.3}),this.barChart.getDataManager().chartSeriesSet.length>0&&this.statusChart.getDataManager().chartSeriesSet.length>0&&this.redrawCharts()};barThickness(t){return(a,l,u,c)=>{let g;const F=(0,e.C6k)(t.x,c.accessors.data?.startX?.(a,l,c.data,c),0),L=(0,e.C6k)(t.x,c.accessors.data?.endX?.(a,l,c.data,c),1);return g=Math.abs(F-L),g-="selection-box"===c.id?2:6,g=Math.max(g,e.TDW.MIN_BAR_THICKNESS),g}}selectedDataPointIdxFn=t=>this.selectedDataPoints?.[t]?.index??e.LPd;cssClassAccessor=(t,a,l,u)=>p()(this.selectedDataPoints)||"selection-box"!==u.id||this.selectedDataPoints[u.id]?.index!==a?"":"selected";calculateInteractionLabelPosition(t){const a=t.dataPoints[Object.keys(t.dataPoints)[0]],l=[a.dataSeries.scales.x],u=[a.dataSeries.scales.y];if(!a.position||C()(a.position.width)||C()(a.position.height))throw new Error("Can't calculate x and y values");return e.QYz.getXYValues(l,u,a.position.x+a.position.width/2,a.position.y+a.position.height/2)}static \u0275fac=function(a){return new(a||d)};static \u0275cmp=o.VBU({type:d,selectors:[["ng-component"]],decls:13,vars:3,consts:[["filenamePrefix","data-point-selection-prototype","exampleTitle","Data Point Selection Prototype"],["type","critical",3,"allowDismiss"],["nuiChartCollectionId","collection",1,"d-flex","chart",3,"chart"],["type","button","nui-button","",3,"click"]],template:function(a,l){1&a&&(o.j41(0,"nui-example-wrapper",0)(1,"nui-message",1)(2,"strong"),o.EFF(3,"Note:"),o.k0s(),o.EFF(4," This is only a prototype, so its implementation is unpolished. Please use discretion when copying the code as there are likely solutions more concise and/or elegant than those presented here. "),o.j41(5,"strong"),o.EFF(6,"For assistance, please contact Blake Simmon or Lukas Holcik."),o.k0s()(),o.nrm(7,"hr")(8,"nui-chart",2)(9,"nui-chart",2)(10,"hr"),o.j41(11,"button",3),o.bIt("click",function(){return l.onReset()}),o.EFF(12,"Reset"),o.k0s()()),2&a&&(o.R7$(1),o.Y8G("allowDismiss",!1),o.R7$(7),o.Y8G("chart",l.statusChart),o.R7$(1),o.Y8G("chart",l.barChart))},dependencies:[m.Qpp,m.tZW,m.VxJ,S.Q,x.p],styles:[".selected{stroke:#52d9e3!important}.chart{max-width:800px}\n"],encapsulation:2})}return d})(),data:{srlc:{hideIndicator:!0}}}];let E=(()=>{class d{static \u0275fac=function(a){return new(a||d)};static \u0275mod=o.$C({type:d});static \u0275inj=o.G2t({imports:[y.r,m.dfW,m.a4p,m.GDi,e.StF,m.s6u,b.iI.forChild(w)]})}return d})()}}]);