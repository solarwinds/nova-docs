"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[5248],{45248:(E,x,d)=>{d.r(x),d.d(x,{default:()=>$});var w=d(48529),P=d(97474),C=d(29091),e=d(36735),M=d(65164),O=d(85406),T=d.n(O),D=d(28508),u=d.n(D),t=d(99019),y=d(8410),h=function(a){return a.Up="up",a.Warning="warning",a.Critical="critical",a}(h||{});let z=(()=>{class a{iconService;chartThreshold=new e.t1X(new e.SFt(new e.M4m));chartBand=new e.t1X(new e.SFt(new e.M4m));customMarkers;thresholdScales;bandScales;constructor(o){this.iconService=o;const n=r=>new e.jqT(this.iconService.getStatusIcon(r));this.customMarkers=new e.W91({[h.Up]:n(h.Up),[h.Warning]:n(h.Warning),[h.Critical]:n(h.Critical)})}ngAfterViewInit(){this.chartThreshold.updateDimensions(),this.chartBand.updateDimensions();const o=new e.SOQ;o.fixDomain(e.bPO.STATUS_DOMAIN);const n=new e.P$m(u().duration(100,"hours"));n.fixDomain([u()().toDate(),u()().add(1e3,"hours").toDate()]);const r=new e.UAQ;r.formatters.labelFormatter=c=>u()(c).format("LL"),this.thresholdScales={y:o,x:r},this.bandScales={y:o,x:n};const s=new e.TDW,i=(0,e.dg1)(new e.W91(function F(){return{[h.Up]:e.qY0[9],[h.Warning]:e.qY0[5],[h.Critical]:e.qY0[3]}}()));i.data.thickness=c=>c.status===h.Up?e.TDW.THIN:e.TDW.THICK;const m=S({numberOfSeries:10,isRandom:!0}).map(c=>({...c,accessors:i,renderer:s,scales:this.thresholdScales})),l=S({numberOfSeries:1,isRandom:!1}).map(c=>({...c,accessors:i,renderer:s,scales:this.thresholdScales}));this.chartThreshold.update(m),this.chartThreshold.setSeriesStates(m.map(c=>({seriesId:c.id,state:e.M_X.deemphasized}))),this.chartBand.update(l)}static \u0275fac=function(n){return new(n||a)(t.rXU(C.y9Q))};static \u0275cmp=t.VBU({type:a,selectors:[["nui-status-chart-test-example"]],decls:8,vars:2,consts:[[1,"nui-text-page"],[1,"d-flex","flex-column"],[1,"p-2",3,"chart"]],template:function(n,r){1&n&&(t.j41(0,"p",0),t.EFF(1,"Threshold section example"),t.k0s(),t.j41(2,"div",1),t.nrm(3,"nui-chart",2),t.k0s(),t.j41(4,"p",0),t.EFF(5,"Band (Band'ish) scales on both scales"),t.k0s(),t.j41(6,"div",1),t.nrm(7,"nui-chart",2),t.k0s()),2&n&&(t.R7$(3),t.Y8G("chart",r.chartThreshold),t.R7$(4),t.Y8G("chart",r.chartBand))},dependencies:[y.Q],encapsulation:2})}return a})();function S(a={numberOfSeries:1,isRandom:!0}){const g=r=>u()().add({hours:r}).toDate();return T()(a.numberOfSeries).map((r=a.isRandom,()=>{let s=0;const i=[];for(;s<1e3;){let m=s+(r?100*Math.random():100);m>=1e3&&(m=1e3);const l=Math.random();i.push({start:s,end:m,status:l>.5?h.Up:l>.2?h.Warning:h.Critical}),s=m}return i})).map((r,s)=>({id:"series-"+s,name:"Series "+s,data:r.map(i=>({value:i.end-i.start,status:i.status,start:g(i.start),end:g(i.end)}))}));var r}let U=(()=>{class a{palette=new e.Shf(new e.W91({connect:e.z3U[0],dns:e.z3U[1],send:e.z3U[2],ttfb:e.z3U[3],cdownload:e.z3U[4]}));gridChart=new e.t1X(new e.SFt(new e.Yje));listItems=[{category:"Category 1",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{category:"Category 2",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{category:"Category 3",data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{category:"Category 4",data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}];scales;ngAfterViewInit(){const o=new e.SOQ;o.padding(.5);const n=new e.kck;this.scales={y:o,x:n},this.scales.x.formatters.tick=l=>`${Number(l/1e3).toFixed(1)}s`;const r=new e.TDW({highlightStrategy:new e.tVU("x")}),s=new e.W99;s.data.color=l=>this.palette.standardColors.get(l.type);const i=[],m=[];this.listItems.forEach((l,c)=>{i.push(l.category),m.push({id:`series-${c}`,name:`Series ${c}`,data:l.data.map(p=>({value:p.end-p.start,category:l.category,type:p.type,__bar:{start:p.start,end:p.end}})),accessors:s,scales:this.scales,renderer:r})}),o.fixDomain(i.reverse()),this.gridChart.update(m)}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=t.VBU({type:a,selectors:[["nui-chart-waterfall-simple"]],decls:2,vars:1,consts:[[1,"chart"],[1,"d-flex",3,"chart"]],template:function(n,r){1&n&&(t.j41(0,"div",0),t.nrm(1,"nui-chart",1),t.k0s()),2&n&&(t.R7$(1),t.Y8G("chart",r.gridChart))},dependencies:[y.Q],encapsulation:2})}return a})();var W=d(56737),v=d(78721),b=d(54739);const k=["templatePortalGrid"],I=["gridChartPlaceholder"];function B(a,g){1&a&&t.nrm(0,"div",9,10)}function G(a,g){if(1&a&&(t.j41(0,"div",3),t.nrm(1,"nui-icon",4),t.j41(2,"div",5)(3,"span"),t.EFF(4),t.k0s()(),t.j41(5,"div",6),t.DNE(6,B,2,0,"div",7),t.nrm(7,"nui-chart",8),t.k0s()()),2&a){const o=g.$implicit,n=g.first;t.R7$(1),t.FS9("icon",o.icon),t.R7$(1),t.xc7("width",200,"px"),t.R7$(2),t.JRh(o.url),t.R7$(2),t.Y8G("ngIf",n),t.R7$(1),t.Y8G("chart",o.chart)}}function R(a,g){if(1&a&&t.nrm(0,"nui-chart",8),2&a){const o=t.XpG();t.Y8G("chart",o.gridChart)}}const X=[{path:"",component:z},{path:"waterfall",component:(()=>{class a{overlay;overlayPositionBuilder;_viewContainerRef;scrollStrategyOptions;palette=new e.Shf(new e.W91({connect:e.z3U[0],dns:e.z3U[1],send:e.z3U[2],ttfb:e.z3U[3],cdownload:e.z3U[4]}));gridChart=new e.t1X(new e.SFt);positionStrategy;templatePortal;listItems=[{url:"http://www.google.com",size:924,icon:"xml-file",chart:new e.t1X(new e.SFt(new e.M4m({showBottomAxis:!1}))),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{url:"http://www2.google.com",size:924,icon:"xml-file",chart:new e.t1X(new e.SFt(new e.M4m({showBottomAxis:!1}))),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{url:"http://www.google.com/cat.png",size:3333,icon:"image",chart:new e.t1X(new e.SFt(new e.M4m({showBottomAxis:!1}))),data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{url:"http://www.google.com/revenge.png",size:3333,icon:"image",chart:new e.t1X(new e.SFt(new e.M4m({showBottomAxis:!1}))),data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}];scales;templatePortalGrid;gridChartPlaceholder;constructor(o,n,r,s){this.overlay=o,this.overlayPositionBuilder=n,this._viewContainerRef=r,this.scrollStrategyOptions=s}ngOnInit(){this.gridChart.addPlugin(new e.jnT),this.gridChart.getEventBus().getStream(e.Nfs).subscribe(o=>{const n=o.data;this.listItems.forEach(r=>{this.scales.x.fixDomain(n[this.scales.x.id]),r.chart.updateDimensions()})})}ngAfterViewInit(){this.templatePortal=new W.VA(this.templatePortalGrid,this._viewContainerRef),this.positionStrategy=this.overlayPositionBuilder.flexibleConnectedTo(this.gridChartPlaceholder).withPositions([{overlayX:"start",overlayY:"top",originX:"start",originY:"top"}]).withFlexibleDimensions(!0).withPush(!0);const n=this.overlay.create({positionStrategy:this.positionStrategy,scrollStrategy:this.scrollStrategyOptions.close()}),r=new e.SOQ,s=new e.kck;s.fixDomain([0,1e3]),r.fixDomain(["cat1"]),this.scales={y:r,x:s},this.scales.x.formatters.tick=p=>`${Number(p/1e3).toFixed(1)}s`;const i=new e.TDW,m=new e.W99;m.data.color=p=>this.palette.standardColors.get(p.type);let l=0;this.listItems.forEach(p=>{const j=[{id:"series-1",name:"Series 1",data:p.data.map(f=>({value:f.end-f.start,category:"cat1",type:f.type,__bar:{start:f.start,end:f.end}})),accessors:m,scales:this.scales,renderer:i}];p.chart.update(j),p.chart.getEventBus().getStream(e.cCe).subscribe(console.log),p.chart.getEventBus().getStream(e.mur).subscribe(console.log),l=p.chart.getGrid().config().dimension.width()});const c=this.gridChart.getGrid().config();c.dimension.height(32*this.listItems.length),c.dimension.width(l),c.dimension.autoHeight=!1,c.axis.left.visible=!1,c.axis.left.gridTicks=!1,c.axis.bottom.gridTicks=!0,this.gridChart.update([{id:"i am grid",name:"i am grid",data:[],accessors:new e.dHF,scales:this.scales,renderer:new e.yhi}]),this.gridChart.updateDimensions(),n.attach(this.templatePortal)}drop(o){(0,w.HD)(this.listItems,o.previousIndex,o.currentIndex)}static \u0275fac=function(n){return new(n||a)(t.rXU(v.hJ),t.rXU(v.lF),t.rXU(t.c1b),t.rXU(v.Tv))};static \u0275cmp=t.VBU({type:a,selectors:[["nui-chart-waterfall-test"]],viewQuery:function(n,r){if(1&n&&(t.GBs(k,5),t.GBs(I,5)),2&n){let s;t.mGM(s=t.lsd())&&(r.templatePortalGrid=s.first),t.mGM(s=t.lsd())&&(r.gridChartPlaceholder=s.first)}},decls:5,vars:1,consts:[["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","d-flex flex-row align-items-center waterfall-chart-list-item","cdkDrag","",4,"ngFor","ngForOf"],["templatePortalGrid",""],["cdkDrag","",1,"d-flex","flex-row","align-items-center","waterfall-chart-list-item"],[1,"p-2",3,"icon"],[1,"p-2",2,"overflow","hidden"],[1,"d-flex"],["class","d-flex h-100",4,"ngIf"],[1,"d-flex",3,"chart"],[1,"d-flex","h-100"],["gridChartPlaceholder",""]],template:function(n,r){1&n&&(t.j41(0,"div")(1,"div",0),t.bIt("cdkDropListDropped",function(i){return r.drop(i)}),t.DNE(2,G,8,6,"div",1),t.k0s()(),t.DNE(3,R,1,1,"ng-template",null,2,t.C5r)),2&n&&(t.R7$(2),t.Y8G("ngForOf",r.listItems))},dependencies:[w.O7,w.T1,C.RlV,b.Sq,b.bT,y.Q],styles:['.nui-dnd-hover-state[_ngcontent-%COMP%]{background:#f2f2f2}.nui-dnd-raised-state[_ngcontent-%COMP%]{z-index:1;box-sizing:border-box;box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-preview[_ngcontent-%COMP%]{border:1px #d9d9d9 solid;background:#f2f2f2;z-index:1;box-sizing:border-box;box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-dropzone.nui-dnd-dropzone--active[_ngcontent-%COMP%]{border:4px dashed #999!important}.nui-dnd-dropzone.nui-dnd-dropzone--drop-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #00c4d2!important;background-color:#00c4d233}.nui-dnd-dropzone.nui-dnd-dropzone--drop-not-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #dd2c00!important;background-color:#dd2c0033}.nui-dnd-dropzone[_ngcontent-%COMP%]   .centered-overlay[_ngcontent-%COMP%], .nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{border-radius:50%;content:"";display:block;height:40px;width:40px;z-index:-1}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{fill:#111}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#00c4d2}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{clip-path:circle(5px);fill:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#dd2c00}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{clip-path:circle(5px);fill:#fff}.waterfall-chart-list-item[_ngcontent-%COMP%]:hover{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.waterfall-chart-list-item[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-content,#fff)}']})}return a})()},{path:"waterfall-simple",component:U}];let $=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=t.$C({type:a});static \u0275inj=t.G2t({imports:[w.ad,C.s6u,M.r,e.StF,P.iI.forChild(X)]})}return a})()}}]);