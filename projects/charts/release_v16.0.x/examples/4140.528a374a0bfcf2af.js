"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[4140],{4140:(ue,j,c)=>{c.r(j),c.d(j,{default:()=>de});var F=c(93779),B=c(97474),g=c(29091),n=c(36735),R=c(90618),$=c(65164),e=c(99019),D=c(28508),h=c.n(D),f=c(54739),_=c(93078),T=c(60598),k=c(29261),v=c(8410),A=c(43846);function P(r,d){if(1&r){const s=e.RV6();e.j41(0,"nui-legend-series",6),e.bIt("mouseenter",function(){const i=e.eBV(s).$implicit,o=e.XpG();return e.Njj(o.chartAssist.emphasizeSeries(i.id))})("isSelectedChange",function(a){const o=e.eBV(s).$implicit,l=e.XpG();return e.Njj(l.chartAssist.toggleSeries(o.id,a))}),e.j41(1,"nui-rich-legend-tile",7),e.nrm(2,"nui-chart-marker",8),e.k0s()()}if(2&r){const s=d.$implicit,t=e.XpG();e.Y8G("descriptionPrimary",s.name)("seriesRenderState",null==t.chartAssist.renderStatesIndex[s.id]?null:t.chartAssist.renderStatesIndex[s.id].state)("isSelected",!t.chartAssist.isSeriesHidden(s.id)),e.R7$(1),e.Y8G("value",t.chartAssist.getHighlightedValue(s,"y"))("backgroundColor",t.chartAssist.palette.standardColors.get(s.id))("color",t.chartAssist.palette.textColors.get(s.id)),e.R7$(1),e.Y8G("marker",t.chartAssist.markers.get(s.id))("color",t.chartAssist.palette.standardColors.get(s.id))}}var y=function(r){return r.Error="error",r.Warning="warning",r}(y||{});let z=(()=>{class r{thresholdsService;chart=new n.t1X(new n.SFt);chartAssist=new n.Wiz(this.chart);thresholdsPalette=new n.Shf(new n.W91({[y.Error]:n.qY0[2],[y.Warning]:n.qY0[4]}));constructor(s){this.thresholdsService=s}ngOnInit(){const s=new n.fpW(this.chartAssist.palette.standardColors,this.chartAssist.markers),t=new n.Epf,a={x:new n.P$m((0,D.duration)(5,"minutes")),y:new n.kck};this.chart.getGrid().leftScaleId=a.y.id;const i={x:a.x,y:(new n.SOQ).fixDomain(n.bPO.STATUS_DOMAIN)},o=function W(){return[{status:y.Error,start:90},{status:y.Error,end:10},{status:y.Warning,start:70,end:90},{status:y.Warning,start:10,end:30}]}(),l=function O(){const r="YYYY-MM-DDTHH:mm:ssZ";return[{id:"series-1",name:"Series 1",data:[{x:h()("2016-12-25T15:05:00Z",r).toDate(),y:30},{x:h()("2016-12-25T15:10:00Z",r).toDate(),y:95},{x:h()("2016-12-25T15:15:00Z",r).toDate(),y:15},{x:h()("2016-12-25T15:20:00Z",r).toDate(),y:60},{x:h()("2016-12-25T15:25:00Z",r).toDate(),y:35},{x:h()("2016-12-25T15:30:00Z",r).toDate(),y:5},{x:h()("2016-12-25T15:35:00Z",r).toDate(),y:60},{x:h()("2016-12-25T15:40:00Z",r).toDate(),y:84},{x:h()("2016-12-25T15:55:00Z",r).toDate(),y:86},{x:h()("2016-12-25T16:00:00Z",r).toDate(),y:35}]}]}().map(u=>({...u,accessors:s,renderer:t,scales:a})),m=[];for(const u of l){const p=this.thresholdsService.getThresholdZones(u,o,this.thresholdsPalette.standardColors);this.thresholdsService.injectThresholdsData(u,p);const E=[this.thresholdsService.getBackgrounds(u,p,i,this.thresholdsPalette.backgroundColors),...this.thresholdsService.getThresholdLines(p),...this.thresholdsService.getSideIndicators(p,a)];m.push(...E)}this.chartAssist.update([...m,...l])}static \u0275fac=function(t){return new(t||r)(e.rXU(n.k5S))};static \u0275cmp=e.VBU({type:r,selectors:[["nui-thresholds-basic-example"]],decls:6,vars:5,consts:[[1,"nui-chart-layout"],[1,"chart"],[1,"w-100",3,"chart"],[1,"legend"],["seriesUnitLabel","sec",3,"active","interactive","mouseleave"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"]],template:function(t,a){1&t&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"nui-chart",2),e.k0s(),e.j41(3,"div",3)(4,"nui-legend",4),e.bIt("mouseleave",function(){return a.chartAssist.resetVisibleSeries()}),e.DNE(5,P,3,8,"nui-legend-series",5),e.k0s()()()),2&t&&(e.R7$(2),e.Y8G("chart",a.chart),e.R7$(2),e.Y8G("active",a.chartAssist.isLegendActive)("interactive",!0),e.R7$(1),e.Y8G("ngForOf",a.chartAssist.legendSeriesSet)("ngForTrackBy",a.chartAssist.seriesTrackByFn))},dependencies:[f.Sq,_.f,T.q,k.L,v.Q,A.C],encapsulation:2})}return r})();var Z=c(64233),M=c(30379),V=c.n(M),x=c(78634);function N(r,d){if(1&r&&e.nrm(0,"nui-icon",8),2&r){const s=d.$implicit,t=e.XpG(3);e.Y8G("icon",t.statusIcons[s])}}function U(r,d){if(1&r&&(e.j41(0,"nui-legend-series",5)(1,"nui-rich-legend-tile",6),e.DNE(2,N,1,1,"nui-icon",7),e.k0s()()),2&r){const s=d.$implicit,t=e.XpG(2);e.Y8G("interactive",!1)("descriptionSecondary",s.name),e.R7$(1),e.Y8G("unitLabel",s.units)("value",t.chartAssist.getHighlightedValue(s,"y"))("backgroundColor",t.statusBgColors.get(t.chartAssist.getHighlightedValue(s,"status"))),e.BMQ("data-title",t.chartAssist.getHighlightedValue(s,"status")),e.R7$(1),e.Y8G("ngIf",t.chartAssist.getHighlightedValue(s,"status"))}}function H(r,d){if(1&r&&(e.j41(0,"div",1),e.nrm(1,"nui-chart",2),e.j41(2,"div",3),e.DNE(3,U,3,7,"nui-legend-series",4),e.k0s()()),2&r){const s=d.$implicit;e.R7$(1),e.Y8G("chart",s.chart),e.R7$(2),e.Y8G("ngIf",s.chartSeriesSet[0])}}var C=function(r){return r.Error="error",r.Warning="warning",r}(C||{});let I=(()=>{class r{thresholdsService;chartAssist;statusBgColors=new n.W91({[C.Error]:G(n.qY0[2],.2),[C.Warning]:G(n.qY0[4],.3)},"transparent");statusIcons={[C.Error]:"status_critical",[C.Warning]:"status_warning"};renderer;accessors;xScale=new n.UAQ;constructor(s){this.thresholdsService=s}ngOnInit(){this.chartAssist=new n.HBo,this.renderer=new n.Epf,this.accessors=new n.fpW(new n.QLZ([n.z3U[0]]),new n.Pbz([n.L8y[0]])),this.accessors.data.status=i=>V()(i,"__thresholds.status");const s=function L(r,d,s){const t=h()([2016,11,25]),a=h().duration(1,"hours");return[{id:"shared-pool-size",name:"Shared pool size",units:"MB",values:[67,16,3,56,26,68,74,45,54,81,13,90,72,61,97,32,64,22,60,11,53,77,88,49,66]},{id:"buffer-cache-size",name:"Buffer cache size",units:"MB",values:[5,15,52,75,64,74,6,24,100,26,91,38,4,45,93,44,59,48,99,96,53,72,32,69,27]},{id:"pga-cache-size",name:"PGA cache size",units:"MB",values:[83,21,43,8,96,100,5,53,14,20,82,23,29,62,33,34,94,72,77,45,81,80,19,26,86]},{id:"db-logical-read-rate",name:"DB logical read rate",units:"%",values:[74,9,10,87,83,41,4,96,100,33,30,26,40,12,21,3,69,59,32,93,62,25,90,58,51]},{id:"buffer-cache-hit-ratio",name:"Buffer cache hit ratio",units:"rps",values:[55,78,26,35,4,37,88,64,71,40,45,9,30,51,72,44,75,39,67,24,19,1,59,11,25]},{id:"library-cache-hit-ratio",name:"Library cache hit ratio",units:"%",values:[71,57,1,3,23,4,79,54,10,29,36,99,34,75,94,24,26,50,73,64,96,12,59,95,97]}].map(o=>({...o,data:Q(o.values,t,a),scales:{x:r,y:new n.kck},renderer:d,accessors:s}))}(this.xScale,this.renderer,this.accessors),t=function X(){return[{status:C.Error,start:90},{status:C.Warning,start:70,end:90}]}(),a=s.map(i=>{const o=this.thresholdsService.getThresholdZones(i,t,this.statusBgColors),l={x:i.scales.x,y:(new n.SOQ).fixDomain(n.bPO.STATUS_DOMAIN)};this.thresholdsService.injectThresholdsData(i,o);const m=this.thresholdsService.getBackgrounds(i,o,l,this.statusBgColors);return{id:i.id,chartSeriesSet:[i,m]}});this.chartAssist.updateSparks(a)}static \u0275fac=function(t){return new(t||r)(e.rXU(n.k5S))};static \u0275cmp=e.VBU({type:r,selectors:[["nui-thresholds-spark-example"]],decls:1,vars:2,consts:[["class","d-flex",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex"],["nuiChartCollectionId","example-collection-id",1,"w-100",3,"chart"],[1,"d-flex","flex-column","pl-2"],[3,"interactive","descriptionSecondary",4,"ngIf"],[3,"interactive","descriptionSecondary"],[3,"unitLabel","value","backgroundColor"],["iconSize","small","leftEdge","",3,"icon",4,"ngIf"],["iconSize","small","leftEdge","",3,"icon"]],template:function(t,a){1&t&&e.DNE(0,H,4,2,"div",0),2&t&&e.Y8G("ngForOf",a.chartAssist.sparks)("ngForTrackBy",a.chartAssist.trackByFn)},dependencies:[f.Sq,f.bT,T.q,k.L,v.Q,x.p,g.RlV],encapsulation:2})}return r})();function Q(r,d,s){return r.map((t,a)=>({x:d.clone().add(h().duration(a*s.asMilliseconds())),y:t}))}function G(r,d){const s=(0,n.XNn)(r),t=(0,Z.Qh)(s);return t.opacity=d,t.toString()}var J=c(70716),w=c.n(J);function q(r,d){if(1&r){const s=e.RV6();e.j41(0,"nui-legend-series",6),e.bIt("mouseenter",function(){const i=e.eBV(s).$implicit,o=e.XpG();return e.Njj(o.chartAssist.emphasizeSeries(i.id))})("isSelectedChange",function(a){const o=e.eBV(s).$implicit,l=e.XpG();return e.Njj(l.chartAssist.toggleSeries(o.id,a))}),e.j41(1,"nui-rich-legend-tile",7),e.nrm(2,"nui-chart-marker",8),e.k0s()()}if(2&r){const s=d.$implicit,t=e.XpG();e.Y8G("descriptionPrimary",s.id)("seriesRenderState",null==t.chartAssist.renderStatesIndex[s.id]?null:t.chartAssist.renderStatesIndex[s.id].state)("isSelected",!t.chartAssist.isSeriesHidden(s.id)),e.R7$(1),e.Y8G("value",t.chartAssist.getHighlightedValue(s,"y"))("backgroundColor",t.chartAssist.palette.standardColors.get(s.id))("color",t.chartAssist.palette.textColors.get(s.id)),e.R7$(1),e.Y8G("marker",t.chartAssist.markers.get(s.id))("color",t.chartAssist.palette.standardColors.get(s.id))}}var S=function(r){return r.Error="error",r.Warning="warning",r.Ok="ok",r}(S||{});let b=(()=>{class r{thresholdsService;chartAssist;summaryChartAssist;thresholdsPalette;constructor(s){this.thresholdsService=s}ngOnInit(){const s=new n.t1X(new n.SFt((0,n.ISM)())),t=new n.t1X(new n.SFt((0,n.dWj)()));this.chartAssist=new n.Wiz(s),this.summaryChartAssist=new n.Wiz(t),this.summaryChartAssist.syncWithChartAssist(this.chartAssist);const a=new n.UAQ,i={x:a,y:new n.kck};s.getGrid().leftScaleId=i.y.id,i.y.domainCalculator=(0,n.zk6)([0,100]),this.thresholdsPalette=new n.Shf(new n.W91({[S.Error]:n.qY0[2],[S.Warning]:n.qY0[4],[S.Ok]:n.qY0[8]},"transparent"));const o=new n.Epf,l=new n.fpW(this.chartAssist.palette.standardColors,this.chartAssist.markers),m=function ee(){const r="YYYY-MM-DDTHH:mm:ssZ";return[{id:"series-1",name:"Series 1",data:[{x:h()("2016-12-25T15:14:29.909Z",r),y:30},{x:h()("2016-12-27T15:14:29.909Z",r),y:95},{x:h()("2016-12-29T15:14:29.909Z",r),y:15},{x:h()("2016-12-31T15:14:29.909Z",r),y:60},{x:h()("2017-01-03T15:14:29.909Z",r),y:35}]},{id:"series-2",name:"Series 2",data:[{x:h()("2016-12-25T15:14:29.909Z",r),y:60},{x:h()("2016-12-27T15:14:29.909Z",r),y:40},{x:h()("2016-12-29T15:14:29.909Z",r),y:70},{x:h()("2016-12-31T15:14:29.909Z",r),y:45},{x:h()("2017-01-03T15:14:29.909Z",r),y:90}]}]}().map(me=>({...me,accessors:l,renderer:o,scales:i})),u=function K(){return[{status:S.Error,start:80},{status:S.Warning,start:60,end:80}]}(),p=this.createMainChartThresholdSeriesSet(m,i,u),E=this.createSummarySeriesSet(m,a,u);this.chartAssist.update([...p,...m]),this.summaryChartAssist.update(E)}createMainChartThresholdSeriesSet(s,t,a){const i={x:t.x,y:(new n.SOQ).fixDomain(n.bPO.STATUS_DOMAIN)},o=[];for(const l of s){const m=this.thresholdsService.getThresholdZones(l,a,this.thresholdsPalette.standardColors);this.thresholdsService.injectThresholdsData(l,m);const u=[this.thresholdsService.getBackgrounds(l,m,i,this.thresholdsPalette.backgroundColors),...this.thresholdsService.getThresholdLines(m),...this.thresholdsService.getSideIndicators(m,t)];o.push(...u)}return o}createSummarySeriesSet(s,t,a){const i=[...a,{status:S.Ok}],o={x:t,y:(new n.SOQ).fixDomain(n.bPO.STATUS_DOMAIN)},l={[S.Ok]:n.TDW.THIN};return[...s].map(u=>{const p=this.thresholdsService.getThresholdZones(u,i,this.thresholdsPalette.standardColors);return this.thresholdsService.injectThresholdsData(u,p),this.thresholdsService.getBackgrounds(u,p,o,this.thresholdsPalette.standardColors,l,w()(n.Pid))})}static \u0275fac=function(t){return new(t||r)(e.rXU(n.k5S))};static \u0275cmp=e.VBU({type:r,selectors:[["nui-thresholds-summary-example"]],decls:7,vars:6,consts:[[1,"nui-chart-layout"],[1,"chart","d-flex","flex-column"],["nuiChartCollectionId","collection",1,"w-100",3,"chart"],[1,"legend"],["seriesUnitLabel","sec",3,"active","interactive","mouseleave"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"]],template:function(t,a){1&t&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"nui-chart",2)(3,"nui-chart",2),e.k0s(),e.j41(4,"div",3)(5,"nui-legend",4),e.bIt("mouseleave",function(){return a.chartAssist.resetVisibleSeries()}),e.DNE(6,q,3,8,"nui-legend-series",5),e.k0s()()()),2&t&&(e.R7$(2),e.Y8G("chart",a.chartAssist.chart),e.R7$(1),e.Y8G("chart",a.summaryChartAssist.chart),e.R7$(2),e.Y8G("active",a.chartAssist.isLegendActive)("interactive",!0),e.R7$(1),e.Y8G("ngForOf",a.chartAssist.legendSeriesSet)("ngForTrackBy",a.chartAssist.seriesTrackByFn))},dependencies:[f.Sq,_.f,T.q,k.L,v.Q,x.p,A.C],encapsulation:2})}return r})(),se=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=e.VBU({type:r,selectors:[["nui-chart-docs-thresholds"]],decls:106,vars:2,consts:[["href","../classes/BarRenderer.html","target","_blank"],["href","../injectables/ThresholdsService.html","target","_blank"],["filenamePrefix","thresholds-basic","exampleTitle","Basic Thresholds For Line Chart"],["href","../classes/TimeIntervalScale.html","target","_blank"],["href","../classes/TimeScale.html","target","_blank"],["filenamePrefix","thresholds-spark","exampleTitle","Thresholds For Spark Charts"],["type","info",3,"allowDismiss"],["href","../classes/SparkChartAssist.html#updateSparks","target","_blank"],["href","../classes/SparkChartAssist.html","target","_blank"],["href","../classes/SparkChartAssist.html#update","target","_blank"],["href","../additional-documentation/spark.html","target","_parent"],["href","../components/ChartComponent.html","target","_blank"],["href","../classes/ChartAssist.html","target","_blank"],["href","../miscellaneous/functions.html#thresholdsTopGridConfig","target","_blank"],["href","../miscellaneous/functions.html#thresholdsSummaryGridConfig","target","_blank"],["href","../classes/ChartAssist.html#syncWithChartAssist","target","_blank"],["type","warning",3,"allowDismiss"],["filenamePrefix","thresholds-summary","exampleTitle","Thresholds Summary"]],template:function(t,a){1&t&&(e.j41(0,"h1"),e.EFF(1,"Thresholds"),e.k0s(),e.j41(2,"p"),e.EFF(3," Unlike in "),e.j41(4,"code"),e.EFF(5,"novajs"),e.k0s(),e.EFF(6," charts, threshold functionality is not built into the chart component. To get threshold specific elements on your chart you need separate data series that will be used by generic renderers such as the "),e.j41(7,"code")(8,"a",0),e.EFF(9,"BarRenderer"),e.k0s()(),e.EFF(10," to display the threshold visualizations. The process of creating the data series needed for thresholds consists mainly of the following:\n"),e.k0s(),e.j41(11,"ol")(12,"li"),e.EFF(13,"Creating one or more zone series that define the threshold areas"),e.k0s(),e.j41(14,"li"),e.EFF(15," Injecting the zone data into the standard data series to provide access to this information from the legend, tooltips, etc. "),e.k0s(),e.j41(16,"li"),e.EFF(17," Creating the threshold series that actually visualize the thresholds on the chart "),e.k0s(),e.j41(18,"li"),e.EFF(19," Creating additional visual elements such as side indicators and horizontal lines indicating the start and end of each threshold zone "),e.k0s()(),e.j41(20,"p"),e.EFF(21," To help you with all of this, we've built a "),e.j41(22,"code")(23,"a",1),e.EFF(24,"ThresholdsService"),e.k0s()(),e.EFF(25," that does the most common tasks in terms of threshold data calculation and new series generation.\n"),e.k0s(),e.j41(26,"p"),e.EFF(27,"Sound complicated still?"),e.k0s(),e.j41(28,"p"),e.EFF(29," Let's give it a try. Check out the inline comments of the following example.\n"),e.k0s(),e.j41(30,"nui-example-wrapper",2),e.nrm(31,"nui-thresholds-basic-example"),e.k0s(),e.j41(32,"p"),e.EFF(33," For the above example we used "),e.j41(34,"code")(35,"a",3),e.EFF(36,"TimeIntervalScale"),e.k0s()(),e.EFF(37," for the horizontal axis, but it can easily be replaced with a continuous "),e.j41(38,"code")(39,"a",4),e.EFF(40,"TimeScale"),e.k0s()(),e.EFF(41," if needed. The service will do more precise calculations of background colored areas for a continuous scale. For an example of this, see the "),e.j41(42,"strong"),e.EFF(43,"Thresholds Summary"),e.k0s(),e.EFF(44," demo farther down the page.\n"),e.k0s(),e.j41(45,"h2"),e.EFF(46,"Spark Chart With Thresholds"),e.k0s(),e.j41(47,"p"),e.EFF(48," The process is similar for a spark chart. To see how, take a look at the inline comments of the example below.\n"),e.k0s(),e.j41(49,"nui-example-wrapper",5),e.nrm(50,"nui-thresholds-spark-example"),e.k0s(),e.j41(51,"nui-message",6),e.EFF(52," When having multiple series per spark, you need to call "),e.j41(53,"code")(54,"a",7),e.EFF(55,"updateSparks()"),e.k0s()(),e.EFF(56," method of "),e.j41(57,"code")(58,"a",8),e.EFF(59,"SparkChartAssist"),e.k0s()(),e.EFF(60," instead of "),e.j41(61,"code")(62,"a",9),e.EFF(63,"update()"),e.k0s()(),e.EFF(64," as usual. "),e.j41(65,"strong"),e.EFF(66,"For general information about implementing spark charts, please see the spark chart page "),e.j41(67,"a",10),e.EFF(68,"here"),e.k0s()(),e.EFF(69,".\n"),e.k0s(),e.j41(70,"h2"),e.EFF(71,"Thresholds Summary"),e.k0s(),e.j41(72,"p"),e.EFF(73," If you want to add an area below the main chart that displays a summary of the threshold data from multiple series, you can add a second "),e.j41(74,"code")(75,"a",11),e.EFF(76,"nui-chart"),e.k0s()(),e.EFF(77," to the page with the help of an additional instance of "),e.j41(78,"code")(79,"a",12),e.EFF(80,"ChartAssist"),e.k0s()(),e.EFF(81,". To configure each of the chart grids to have the correct appearance you can use the "),e.j41(82,"code")(83,"a",13),e.EFF(84,"thresholdsTopGridConfig"),e.k0s()(),e.EFF(85," function for the main chart grid and the "),e.j41(86,"code")(87,"a",14),e.EFF(88,"thresholdsSummaryGridConfig"),e.k0s()(),e.EFF(89," function for the summary chart grid.\n"),e.k0s(),e.j41(90,"p"),e.EFF(91," In order to synchronize the behaviors of the summary chart with the main chart's various legend interaction behaviors, you can invoke ChartAssist's "),e.j41(92,"code")(93,"a",15),e.EFF(94,"syncWithChartAssist"),e.k0s()(),e.EFF(95," method on the summary chart assist passing a reference to the main chart assist.\n"),e.k0s(),e.j41(96,"p"),e.EFF(97," The rest of the process is very similar to what's been shown in the previous examples. For more details about how to implement the summary chart take a look at the inline comments of the example source below.\n"),e.k0s(),e.j41(98,"nui-message",16)(99,"strong"),e.EFF(100,"Note:"),e.k0s(),e.EFF(101," By UX design, the threshold visualizations on the main chart of the following example are only displayed when a series is either hovered on the legend or is the only series selected on the legend. This behavior is meant to keep the visualizations focused on the primary data and to allow the user to inspect the secondary threshold data of each series via the legend if desired.\n"),e.k0s(),e.j41(102,"nui-example-wrapper",17),e.nrm(103,"nui-thresholds-summary-example"),e.k0s(),e.j41(104,"p"),e.EFF(105,"Easy! Isn't it?"),e.k0s()),2&t&&(e.R7$(51),e.Y8G("allowDismiss",!1),e.R7$(47),e.Y8G("allowDismiss",!1))},dependencies:[g.tZW,g.VxJ,z,I,b],encapsulation:2})}return r})();function te(r,d){if(1&r){const s=e.RV6();e.j41(0,"nui-legend-series",6),e.bIt("mouseenter",function(){const i=e.eBV(s).$implicit,o=e.XpG();return e.Njj(o.chartAssist.emphasizeSeries(i.id))})("isSelectedChange",function(a){const o=e.eBV(s).$implicit,l=e.XpG();return e.Njj(l.chartAssist.toggleSeries(o.id,a))}),e.j41(1,"nui-rich-legend-tile",7),e.nrm(2,"nui-chart-marker",8),e.k0s()()}if(2&r){const s=d.$implicit,t=e.XpG();e.Y8G("descriptionPrimary",s.name)("seriesRenderState",null==t.chartAssist.renderStatesIndex[s.id]?null:t.chartAssist.renderStatesIndex[s.id].state)("isSelected",!t.chartAssist.isSeriesHidden(s.id)),e.R7$(1),e.Y8G("value",t.chartAssist.getHighlightedValue(s,"y"))("backgroundColor",t.chartAssist.palette.standardColors.get(s.id))("color",t.chartAssist.palette.textColors.get(s.id)),e.R7$(1),e.Y8G("marker",t.chartAssist.markers.get(s.id))("color",t.chartAssist.palette.standardColors.get(s.id))}}let Y=(()=>{class r{thresholdsService;data;zones;startDate;uid=n.QYz.uuid();chart=new n.t1X(new n.SFt((0,n.ISM)()));summaryChart=new n.t1X(new n.SFt((0,n.dWj)()));chartAssist=new n.Wiz(this.chart);summaryChartAssist=new n.Wiz(this.summaryChart);tooltipsPlugin;thresholdsPalette;thicknessMap;accessors;renderer;scales;backgroundScales;summaryScales;constructor(s){this.thresholdsService=s,this.scales={x:new n.UAQ,y:new n.kck},this.backgroundScales={x:this.scales.x,y:new n.SOQ},this.summaryScales={x:this.scales.x,y:new n.SOQ},this.configureGrids(this.scales.y.id),this.summaryChartAssist.syncWithChartAssist(this.chartAssist),this.scales.y.domainCalculator=(0,n.zk6)([0,100]),this.backgroundScales.y.fixDomain(n.bPO.STATUS_DOMAIN),this.summaryScales.y.fixDomain(n.bPO.STATUS_DOMAIN),this.thresholdsPalette=new n.Shf(new n.W91({error:n.qY0[2],warning:n.qY0[4],ok:n.qY0[8]},"transparent")),this.thicknessMap={ok:n.TDW.THIN},this.renderer=new n.Epf,this.accessors=new n.fpW(this.chartAssist.palette.standardColors,this.chartAssist.markers)}ngOnInit(){this.update(this.data)}ngOnChanges(s){(s.data||s.zones)&&this.update(this.data)}update(s){const t=function re(r,d,s){const t=(a,i)=>({x:s.clone().add(i,"d"),y:a});return Object.keys(r).map(a=>({id:a,name:a,data:r[a].map(t),accessors:d}))}(s,this.accessors,this.startDate).map(o=>({...o,renderer:this.renderer,scales:this.scales})),a=[...t].map(o=>{const l=[...this.zones,{status:"ok"}],m=this.thresholdsService.getThresholdZones(o,l,this.thresholdsPalette.standardColors);return this.thresholdsService.injectThresholdsData(o,m),this.thresholdsService.getBackgrounds(o,m,this.summaryScales,this.thresholdsPalette.standardColors,this.thicknessMap,w()(n.Pid))}),i=[];for(const o of t){const l=this.thresholdsService.getThresholdZones(o,this.zones,this.thresholdsPalette.standardColors);this.thresholdsService.injectThresholdsData(o,l),i.push(this.thresholdsService.getBackgrounds(o,l,this.backgroundScales,this.thresholdsPalette.backgroundColors),...this.thresholdsService.getThresholdLines(l),...this.thresholdsService.getSideIndicators(l,this.scales))}this.chartAssist.update([...i,...t]),this.summaryChartAssist.update(a)}configureGrids(s){const t=this.chart.getGrid();t.leftScaleId=s;const a=t.config();a.dimension.width(400),a.dimension.height(110),a.dimension.autoWidth=!1,a.dimension.autoHeight=!1;const i=this.summaryChart.getGrid().config();i.dimension.width(400),i.dimension.autoWidth=!1}static \u0275fac=function(t){return new(t||r)(e.rXU(n.k5S))};static \u0275cmp=e.VBU({type:r,selectors:[["nui-thresholds-summary-test"]],inputs:{data:"data",zones:"zones",startDate:"startDate"},features:[e.OA$],decls:6,vars:8,consts:[[1,"d-flex","align-items-start"],[1,"d-flex","flex-column"],[1,"thresholds-main-chart",3,"chart","nuiChartCollectionId"],[1,"thresholds-summary-chart",3,"chart","nuiChartCollectionId"],["seriesUnitLabel","sec",1,"ml-2","thresholds-legend",3,"active","interactive","mouseleave"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"]],template:function(t,a){1&t&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"nui-chart",2)(3,"nui-chart",3),e.k0s(),e.j41(4,"nui-legend",4),e.bIt("mouseleave",function(){return a.chartAssist.resetVisibleSeries()}),e.DNE(5,te,3,8,"nui-legend-series",5),e.k0s()()),2&t&&(e.R7$(2),e.Y8G("chart",a.chart)("nuiChartCollectionId",a.uid),e.R7$(1),e.Y8G("chart",a.summaryChart)("nuiChartCollectionId",a.uid),e.R7$(1),e.Y8G("active",a.chartAssist.isLegendActive)("interactive",!0),e.R7$(1),e.Y8G("ngForOf",a.chartAssist.legendSeriesSet)("ngForTrackBy",a.chartAssist.seriesTrackByFn))},dependencies:[f.Sq,_.f,T.q,k.L,v.Q,x.p,A.C],encapsulation:2})}return r})(),ae=(()=>{class r{data={"series-1":[10,30,70,30,10],"series-2":[0,40,60,40,0]};zones=[{status:"error",start:50},{status:"warning",start:20,end:50}];startDate=h()([2016,11,25,15,14,29]);ngOnInit(){}dataChanged(s){this.data=this.validateInput(s)||this.data}zonesChanged(s){this.zones=this.validateInput(s)||this.zones}validateInput(s){let t;try{t=JSON.parse(s)}catch{}return t}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=e.VBU({type:r,selectors:[["nui-thresholds-summary-test-harness"]],decls:11,vars:9,consts:[[1,"nui-thresholds-summary-test-harness"],[3,"data","zones","startDate"],["id","data-input","type","text",1,"w-100","mt-5",3,"ngModel","ngModelChange"],["id","zones-input","rows","13","cols","30",3,"ngModel","ngModelChange"]],template:function(t,a){1&t&&(e.j41(0,"div",0),e.nrm(1,"nui-thresholds-summary-test",1)(2,"br"),e.j41(3,"h2"),e.EFF(4,"Data"),e.k0s(),e.j41(5,"input",2),e.bIt("ngModelChange",function(o){return a.dataChanged(o)}),e.nI1(6,"json"),e.k0s(),e.j41(7,"h2"),e.EFF(8,"Zones"),e.k0s(),e.j41(9,"textarea",3),e.bIt("ngModelChange",function(o){return a.zonesChanged(o)}),e.nI1(10,"json"),e.k0s()()),2&t&&(e.R7$(1),e.Y8G("data",a.data)("zones",a.zones)("startDate",a.startDate),e.R7$(4),e.Y8G("ngModel",e.bMT(6,5,a.data)),e.R7$(4),e.Y8G("ngModel",e.bMT(10,7,a.zones)))},dependencies:[F.me,F.BC,F.vS,Y,f.TG],encapsulation:2})}return r})();var ne=c(60719);function ie(r,d){if(1&r){const s=e.RV6();e.j41(0,"nui-legend-series",6),e.bIt("mouseenter",function(){const i=e.eBV(s).$implicit,o=e.XpG();return e.Njj(o.chartAssist.emphasizeSeries(i.id))})("isSelectedChange",function(a){const o=e.eBV(s).$implicit,l=e.XpG();return e.Njj(l.chartAssist.toggleSeries(o.id,a))}),e.j41(1,"nui-rich-legend-tile",7),e.nrm(2,"nui-chart-marker",8),e.k0s()()}if(2&r){const s=d.$implicit,t=e.XpG();e.Y8G("descriptionPrimary",s.name)("seriesRenderState",null==t.chartAssist.renderStatesIndex[s.id]?null:t.chartAssist.renderStatesIndex[s.id].state)("isSelected",!t.chartAssist.isSeriesHidden(s.id)),e.R7$(1),e.Y8G("value",t.chartAssist.getHighlightedValue(s,"y"))("backgroundColor",t.chartAssist.palette.standardColors.get(s.id))("color",t.chartAssist.palette.textColors.get(s.id)),e.R7$(1),e.Y8G("marker",t.chartAssist.markers.get(s.id))("color",t.chartAssist.palette.standardColors.get(s.id))}}let oe=(()=>{class r{thresholdsService;zones=[{status:"error",start:80},{status:"error",start:-100,end:10},{status:"warning",start:60,end:80},{status:"warning",start:10,end:20}];summaryZones=[...this.zones,{status:"ok",start:20,end:60}];startDate=h()([2016,11,25,15,14,29]);uid=n.QYz.uuid();chart=new n.t1X(new n.SFt((0,n.ISM)()));summaryChart=new n.t1X(new n.SFt((0,n.dWj)()));chartAssist=new n.Wiz(this.chart);summaryChartAssist=new n.Wiz(this.summaryChart);tooltipsPlugin;thresholdsPalette;thicknessMap;accessors;renderer;scales;backgroundScales;summaryScales;constructor(s){this.thresholdsService=s,this.scales={x:new n.P$m((0,D.duration)(5,"minutes")),y:new n.kck},this.backgroundScales={x:this.scales.x,y:new n.SOQ},this.summaryScales={x:this.scales.x,y:new n.SOQ},this.configureGrids(this.scales.y.id),this.summaryChartAssist.syncWithChartAssist(this.chartAssist),this.scales.y.domainCalculator=(0,n.zk6)([0,100]),this.backgroundScales.y.fixDomain(n.bPO.STATUS_DOMAIN),this.summaryScales.y.fixDomain(n.bPO.STATUS_DOMAIN),this.thresholdsPalette=new n.Shf(new n.W91({error:n.qY0[2],warning:n.qY0[4],ok:n.qY0[8]},"transparent")),this.thicknessMap={ok:n.TDW.THIN},this.renderer=new n.Epf,this.accessors=new n.fpW(this.chartAssist.palette.standardColors,this.chartAssist.markers)}ngOnInit(){this.update()}update(){const s=function he(){const r="YYYY-MM-DDTHH:mm:ssZ";return[{id:"series-1",name:"Series 1",data:[{x:h()("2016-12-25T15:05:00Z",r).toDate(),y:30},{x:h()("2016-12-25T15:10:00Z",r).toDate(),y:80},{x:h()("2016-12-25T15:15:00Z",r).toDate(),y:80},{x:h()("2016-12-25T15:20:00Z",r).toDate(),y:80},{x:h()("2016-12-25T15:25:00Z",r).toDate(),y:45},{x:h()("2016-12-25T15:30:00Z",r).toDate(),y:60},{x:h()("2016-12-25T15:35:00Z",r).toDate(),y:10},{x:h()("2016-12-25T15:40:00Z",r).toDate(),y:35}]}]}().map(i=>({...i,renderer:this.renderer,accessors:this.accessors,scales:this.scales})),t=[...s].map(i=>{const o=this.thresholdsService.getThresholdZones(i,this.summaryZones,this.thresholdsPalette.standardColors);return this.thresholdsService.injectThresholdsData(i,o),this.thresholdsService.getBackgrounds(i,o,this.summaryScales,this.thresholdsPalette.standardColors,this.thicknessMap,w()(n.Pid))}),a=[];for(const i of s){const o=this.thresholdsService.getThresholdZones(i,this.zones,this.thresholdsPalette.standardColors);this.thresholdsService.injectThresholdsData(i,o),a.push(this.thresholdsService.getBackgrounds(i,o,this.backgroundScales,this.thresholdsPalette.backgroundColors),...this.thresholdsService.getThresholdLines(o),...this.thresholdsService.getSideIndicators(o,this.scales))}this.chartAssist.update([...a,...s]),this.summaryChartAssist.update(t)}configureGrids(s){const t=this.chart.getGrid();t.leftScaleId=s;const a=t.config();a.dimension.width(400),a.dimension.height(110),a.dimension.autoWidth=!1,a.dimension.autoHeight=!1;const i=this.summaryChart.getGrid().config();i.dimension.width(400),i.dimension.autoWidth=!1}static \u0275fac=function(t){return new(t||r)(e.rXU(n.k5S))};static \u0275cmp=e.VBU({type:r,selectors:[["nui-thresholds-summary-with-interval-scale-test"]],decls:6,vars:8,consts:[[1,"d-flex","align-items-start"],[1,"d-flex","flex-column"],[1,"thresholds-main-chart",3,"chart","nuiChartCollectionId"],[1,"thresholds-summary-chart",3,"chart","nuiChartCollectionId"],["seriesUnitLabel","sec",1,"ml-2","thresholds-legend",3,"active","interactive","mouseleave"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"]],template:function(t,a){1&t&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"nui-chart",2)(3,"nui-chart",3),e.k0s(),e.j41(4,"nui-legend",4),e.bIt("mouseleave",function(){return a.chartAssist.resetVisibleSeries()}),e.DNE(5,ie,3,8,"nui-legend-series",5),e.k0s()()),2&t&&(e.R7$(2),e.Y8G("chart",a.chart)("nuiChartCollectionId",a.uid),e.R7$(1),e.Y8G("chart",a.summaryChart)("nuiChartCollectionId",a.uid),e.R7$(1),e.Y8G("active",a.chartAssist.isLegendActive)("interactive",!0),e.R7$(1),e.Y8G("ngForOf",a.chartAssist.legendSeriesSet)("ngForTrackBy",a.chartAssist.seriesTrackByFn))},dependencies:[f.Sq,_.f,T.q,k.L,v.Q,x.p,A.C],encapsulation:2})}return r})();const ce=[{path:"",component:se,data:{srlc:{stage:g.lcf.beta},showThemeSwitcher:!0}},{path:"basic",component:z,data:{srlc:{hideIndicator:!0}}},{path:"spark",component:I,data:{srlc:{hideIndicator:!0}}},{path:"summary",component:b,data:{srlc:{hideIndicator:!0}}},{path:"summary-test",component:ae,data:{srlc:{hideIndicator:!0}}},{path:"summary-visual-test",component:(()=>{class r{singleSeries={"series-1":[30,95,15,60,35]};thresholdEdges={"series-1":[30,80,80,80,45,60,10,35]};singleSeriesNoHits={"series-1":[30,55,25,55,35]};multipleSeries={"series-1":[30,95,15,60,35],"series-2":[100,40,70,45,90]};zones=[{status:"error",start:80},{status:"error",start:-100,end:10},{status:"warning",start:60,end:80},{status:"warning",start:10,end:20}];startDate=h()([2016,11,25,15,14,29]);static \u0275fac=function(t){return new(t||r)};static \u0275cmp=e.VBU({type:r,selectors:[["nui-thresholds-summary-visual-test"]],decls:8,vars:18,consts:[[1,"nui-thresholds-summary-single-1",3,"data","zones","startDate"],[1,"nui-thresholds-summary-single-2",3,"data","zones","startDate"],[1,"nui-thresholds-summary-single-3",3,"data","zones","startDate"],[1,"nui-thresholds-summary-multiple-1",3,"data","zones","startDate"],[1,"nui-thresholds-summary-multiple-2",3,"data","zones","startDate"],[1,"nui-thresholds-summary-multiple-3",3,"data","zones","startDate"]],template:function(t,a){1&t&&(e.j41(0,"charts-test-harness"),e.nrm(1,"nui-thresholds-summary-test",0)(2,"nui-thresholds-summary-test",1)(3,"nui-thresholds-summary-test",2)(4,"nui-thresholds-summary-with-interval-scale-test")(5,"nui-thresholds-summary-test",3)(6,"nui-thresholds-summary-test",4)(7,"nui-thresholds-summary-test",5),e.k0s()),2&t&&(e.R7$(1),e.Y8G("data",a.singleSeries)("zones",a.zones)("startDate",a.startDate),e.R7$(1),e.Y8G("data",a.singleSeriesNoHits)("zones",a.zones)("startDate",a.startDate),e.R7$(1),e.Y8G("data",a.thresholdEdges)("zones",a.zones)("startDate",a.startDate),e.R7$(2),e.Y8G("data",a.multipleSeries)("zones",a.zones)("startDate",a.startDate),e.R7$(1),e.Y8G("data",a.multipleSeries)("zones",a.zones)("startDate",a.startDate),e.R7$(1),e.Y8G("data",a.multipleSeries)("zones",a.zones)("startDate",a.startDate))},dependencies:[ne.f,Y,oe],encapsulation:2})}return r})(),data:{srlc:{hideIndicator:!0}}}];let de=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=e.$C({type:r});static \u0275inj=e.G2t({providers:[{provide:g.uzs,useValue:(0,R.R)("thresholds")}],imports:[$.r,F.YN,n.StF,g.a4p,g.s6u,g.GDi,B.iI.forChild(ce)]})}return r})()}}]);