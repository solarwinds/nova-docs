"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[7751],{7751:(_,w,i)=>{i.r(w),i.d(w,{default:()=>A});var f=i(48529),x=i(97474),c=i(29091),n=i(36735),b=i(90618),P=i(65164),t=i(99019),k=i(75931),E=i.n(k),v=i(8410);let g=(()=>{class a{chartConfig={horizontal:!0};chart=new n.t1X((0,n._ZX)(this.chartConfig));ngOnInit(){const o=(0,n.QSe)(this.chartConfig),e=(0,n.ByE)(this.chartConfig),r=new n.TDW({highlightStrategy:new n.tVU("x")});this.chart.addPlugin(new n.Y44);const s=new n.W91(E()(["connect","dns","send","ttfb","cdownload"],n.z3U));o.data.color=d=>s.get(d.type),e.x.formatters.tick=d=>`${parseFloat(Number(d/1e3).toFixed(1)).toLocaleString()}s`,e.y.padding(.5),this.chart.update([{id:"1",name:"Category 1",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{id:"2",name:"Category 2",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{id:"3",name:"Category 3",data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{id:"4",name:"Category 4",data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}].map(d=>({...d,accessors:o,scales:e,renderer:r})))}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=t.VBU({type:a,selectors:[["nui-waterfall-chart-simple-example"]],decls:1,vars:1,consts:[[1,"d-flex",3,"chart"]],template:function(e,r){1&e&&t.nrm(0,"nui-chart",0),2&e&&t.Y8G("chart",r.chart)},dependencies:[v.Q],encapsulation:2})}return a})();var M=i(56737),u=i(78721),y=i(54739),S=i(78634);const z=["templatePortalGrid"],j=["gridChartPlaceholder"];function W(a,m){1&a&&t.nrm(0,"div",11)}function D(a,m){if(1&a&&(t.j41(0,"div",5),t.nrm(1,"nui-icon",6),t.j41(2,"div",7)(3,"span"),t.EFF(4),t.k0s()(),t.j41(5,"div",8),t.DNE(6,W,1,0,"div",9),t.nrm(7,"nui-chart",10),t.k0s()()),2&a){const o=m.$implicit,e=m.first,r=t.XpG();t.R7$(1),t.FS9("icon",o.icon),t.R7$(1),t.xc7("width",r.rowSize,"px"),t.R7$(2),t.JRh(o.url),t.R7$(2),t.Y8G("ngIf",e),t.R7$(1),t.Y8G("chart",o.chart)}}function G(a,m){if(1&a&&t.nrm(0,"nui-chart",10),2&a){const o=t.XpG();t.Y8G("chart",o.gridChart)}}let C=(()=>{class a{overlay;overlayPositionBuilder;_viewContainerRef;scrollStrategyOptions;seriesChartConfig=new n.M4m({showBottomAxis:!1});iconSize=20;rowSize=200;palette=new n.Shf(new n.W91({connect:n.z3U[0],dns:n.z3U[1],send:n.z3U[2],ttfb:n.z3U[3],cdownload:n.z3U[4]}));gridChart=new n.t1X(new n.SFt);positionStrategy;templatePortal;listItems=function I(a){return[{url:"http://www.google.com",size:924,icon:"xml-file",chart:new n.t1X(new n.SFt(a)),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{url:"http://www2.google.com",size:924,icon:"xml-file",chart:new n.t1X(new n.SFt(a)),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{url:"http://www.google.com/cat.png",size:3333,icon:"image",chart:new n.t1X(new n.SFt(a)),data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{url:"http://www.google.com/revenge.png",size:3333,icon:"image",chart:new n.t1X(new n.SFt(a)),data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}]}(this.seriesChartConfig);scales;overlayRef;templatePortalGrid;gridChartPlaceholder;updateGridPosition(){this.overlayRef.updatePosition()}constructor(o,e,r,s){this.overlay=o,this.overlayPositionBuilder=e,this._viewContainerRef=r,this.scrollStrategyOptions=s}ngOnInit(){this.gridChart.addPlugin(new n.jnT),this.gridChart.getEventBus().getStream(n.Nfs).subscribe(o=>{const e=o.data;this.listItems.forEach(r=>{this.scales.x.fixDomain(e[this.scales.x.id]),r.chart.updateDimensions()})})}ngAfterViewInit(){this.templatePortal=new M.VA(this.templatePortalGrid,this._viewContainerRef),this.positionStrategy=this.overlay.position().flexibleConnectedTo(this.gridChartPlaceholder).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}]).withPush(!1),this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy,scrollStrategy:this.scrollStrategyOptions.reposition()});const e=new n.SOQ,r=new n.kck;r.fixDomain([0,1e3]),e.fixDomain(["cat1"]),this.scales={x:r,y:e},this.scales.x.formatters.tick=l=>`${Number(l/1e3).toFixed(1)}s`;const s=new n.TDW({highlightStrategy:new n.tVU("x")}),d=new n.W99;d.data.color=l=>this.palette.standardColors.get(l.type);let F=0;this.listItems.forEach(l=>{const U=[{id:"series-1",name:"Series 1",data:l.data.map(h=>({value:h.end-h.start,start:h.start,end:h.end,category:"cat1",type:h.type})),accessors:d,scales:this.scales,renderer:s}];l.chart.update(U),F=l.chart.getGrid().config().dimension.width()});const p=this.gridChart.getGrid().config();p.dimension.height(this.listItems.length*this.seriesChartConfig.dimension.height()),p.dimension.width(F),p.dimension.autoHeight=!1,p.axis.left.visible=!1,p.axis.left.gridTicks=!1,p.axis.bottom.gridTicks=!0,this.gridChart.update([{id:"i am grid",name:"i am grid",data:[],accessors:new n.dHF,scales:this.scales,renderer:new n.yhi}]),this.gridChart.updateDimensions(),this.overlayRef.attach(this.templatePortal)}drop(o){(0,f.HD)(this.listItems,o.previousIndex,o.currentIndex)}static \u0275fac=function(e){return new(e||a)(t.rXU(u.hJ),t.rXU(u.lF),t.rXU(t.c1b),t.rXU(u.Tv))};static \u0275cmp=t.VBU({type:a,selectors:[["nui-waterfall-chart-advanced-example"]],viewQuery:function(e,r){if(1&e&&(t.GBs(z,5),t.GBs(j,5)),2&e){let s;t.mGM(s=t.lsd())&&(r.templatePortalGrid=s.first),t.mGM(s=t.lsd())&&(r.gridChartPlaceholder=s.first)}},hostBindings:function(e,r){1&e&&t.bIt("click",function(){return r.updateGridPosition()},!1,t.EBC)},decls:7,vars:3,consts:[[1,"chart","mb-5"],["gridChartPlaceholder",""],["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","d-flex flex-row align-items-center waterfall-chart-list-item","cdkDrag","",4,"ngFor","ngForOf"],["templatePortalGrid",""],["cdkDrag","",1,"d-flex","flex-row","align-items-center","waterfall-chart-list-item"],[1,"p-1",3,"icon"],[1,"p-1",2,"overflow","hidden"],[1,"d-flex"],["class","d-flex h-100",4,"ngIf"],["nuiChartCollectionId","1",1,"d-flex",3,"chart"],[1,"d-flex","h-100"]],template:function(e,r){1&e&&(t.j41(0,"div",0),t.nrm(1,"div",null,1),t.j41(3,"div",2),t.bIt("cdkDropListDropped",function(d){return r.drop(d)}),t.DNE(4,D,8,6,"div",3),t.k0s()(),t.DNE(5,G,1,1,"ng-template",null,4,t.C5r)),2&e&&(t.R7$(1),t.xc7("margin-left",r.rowSize+r.iconSize,"px"),t.R7$(3),t.Y8G("ngForOf",r.listItems))},dependencies:[f.O7,f.T1,c.RlV,y.Sq,y.bT,v.Q,S.p],styles:['.nui-dnd-hover-state[_ngcontent-%COMP%]{background:#f2f2f2}.nui-dnd-raised-state[_ngcontent-%COMP%]{z-index:1;box-sizing:border-box;box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-preview[_ngcontent-%COMP%]{border:1px #d9d9d9 solid;background:#f2f2f2;z-index:1;box-sizing:border-box;box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-dropzone.nui-dnd-dropzone--active[_ngcontent-%COMP%]{border:4px dashed #999!important}.nui-dnd-dropzone.nui-dnd-dropzone--drop-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #00c4d2!important;background-color:#00c4d233}.nui-dnd-dropzone.nui-dnd-dropzone--drop-not-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #dd2c00!important;background-color:#dd2c0033}.nui-dnd-dropzone[_ngcontent-%COMP%]   .centered-overlay[_ngcontent-%COMP%], .nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{border-radius:50%;content:"";display:block;height:40px;width:40px;z-index:-1}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{fill:#111}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#00c4d2}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{clip-path:circle(5px);fill:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#dd2c00}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{clip-path:circle(5px);fill:#fff}.waterfall-chart-list-item[_ngcontent-%COMP%]:hover{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.waterfall-chart-list-item[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-content,#fff)}']})}return a})(),T=(()=>{class a{static \u0275fac=function(e){return new(e||a)};static \u0275cmp=t.VBU({type:a,selectors:[["nui-chart-docs-waterfall"]],decls:82,vars:1,consts:[["filenamePrefix","waterfall-chart-simple","exampleTitle","Simple Waterfall Chart"],["type","warning",3,"allowDismiss"],["href","../classes/Chart.html","target","_blank"],["href","../classes/XYGrid.html","target","_blank"],["href","../classes/BarStatusGridConfig.html","target","_blank"],["href","https://material.angular.io/cdk/overlay/overview","target","_blank"],["href","https://material.angular.io/cdk/portal/overview","target","_blank"],["href","../classes/HorizontalBarAccessors.html","target","_blank"],["href","../classes/BandScale.html","target","_blank"],["href","../classes/BandScale.html#padding","target","_blank"],["filenamePrefix","waterfall-chart-advanced","exampleTitle","Advanced Waterfall Chart"]],template:function(e,r){1&e&&(t.j41(0,"h1"),t.EFF(1,"Waterfall Charts"),t.k0s(),t.j41(2,"p"),t.EFF(3," A Waterfall Chart is a chart that shows a certain category events on the timeline.\n"),t.k0s(),t.j41(4,"h2"),t.EFF(5,"Simple Waterfall Chart"),t.k0s(),t.j41(6,"p"),t.EFF(7," To build a simple Waterfall chart follow the instructions in the example source code:\n"),t.k0s(),t.j41(8,"nui-example-wrapper",0),t.nrm(9,"nui-waterfall-chart-simple-example"),t.k0s(),t.j41(10,"h2"),t.EFF(11,"Advanced Waterfall Chart"),t.k0s(),t.j41(12,"nui-message",1)(13,"strong"),t.EFF(14,"Caution!!!"),t.k0s(),t.EFF(15," Example below is provided as a proof of concept and is not meant to be used in production code.\n"),t.k0s(),t.j41(16,"p"),t.EFF(17," It is possible to build fancy waterfall charts with more complex functionality, like the one below. Each series provides a separate instance of bar chart that is rendered inside grid, which is a separate empty chart positioned using CDK Overlay on top of bar charts.\n"),t.k0s(),t.j41(18,"p"),t.EFF(19,"To build an advanced Waterfall chart below follow the instructions:"),t.k0s(),t.j41(20,"ol")(21,"li"),t.EFF(22," Make sure your series provide a new instance of "),t.j41(23,"code")(24,"a",2),t.EFF(25,"Chart"),t.k0s()(),t.EFF(26," with an instance of "),t.j41(27,"code")(28,"a",3),t.EFF(29,"XYGrid"),t.k0s()(),t.EFF(30," passed in as an argument. "),t.j41(31,"code"),t.EFF(32,"new "),t.j41(33,"a",4),t.EFF(34,"BarStatusGridConfig"),t.k0s(),t.EFF(35,"()"),t.k0s(),t.EFF(36," config instance goes as an argument to "),t.j41(37,"code"),t.EFF(38,"XYGrid"),t.k0s(),t.EFF(39," with the "),t.j41(40,"code"),t.EFF(41,"showBottomAxis"),t.k0s(),t.EFF(42," option set to "),t.j41(43,"code"),t.EFF(44,"false"),t.k0s(),t.EFF(45,". "),t.k0s(),t.j41(46,"li"),t.EFF(47," Instantiate and configure a "),t.j41(48,"code")(49,"a",3),t.EFF(50,"XYGrid"),t.k0s()()(),t.j41(51,"li"),t.EFF(52," Instantiate and configure an "),t.j41(53,"code")(54,"a",5),t.EFF(55,"Overlay"),t.k0s()(),t.EFF(56," and corresponding "),t.j41(57,"code")(58,"a",6),t.EFF(59,"Portal"),t.k0s()(),t.EFF(60," to attach the grid to a correct point of the first series on the page. "),t.k0s(),t.j41(61,"li"),t.EFF(62," Instantiate "),t.j41(63,"code")(64,"a",7),t.EFF(65,"HorizontalBarAccessors"),t.k0s()(),t.EFF(66,". Using the accessor, assign the color or the bar to the corresponding data type retrieved from the "),t.j41(67,"code"),t.EFF(68,"ChartPalette"),t.k0s(),t.EFF(69,". "),t.k0s(),t.j41(70,"li"),t.EFF(71," Configure the thickness of the bar using the "),t.j41(72,"code")(73,"a",8),t.EFF(74,"BandScale"),t.k0s()(),t.EFF(75," method "),t.j41(76,"code")(77,"a",9),t.EFF(78,"padding"),t.k0s()(),t.EFF(79,". "),t.k0s()(),t.j41(80,"nui-example-wrapper",10),t.nrm(81,"nui-waterfall-chart-advanced-example"),t.k0s()),2&e&&(t.R7$(12),t.Y8G("allowDismiss",!1))},dependencies:[c.tZW,c.VxJ,g,C],encapsulation:2})}return a})();var B=i(60719);const R=[{path:"",component:T,data:{srlc:{stage:c.lcf.beta},showThemeSwitcher:!0}},{path:"simple",component:g,data:{srlc:{hideIndicator:!0}}},{path:"advanced",component:C,data:{srlc:{hideIndicator:!0}}},{path:"test",component:(()=>{class a{static \u0275fac=function(e){return new(e||a)};static \u0275cmp=t.VBU({type:a,selectors:[["waterfall-chart-test-component"]],decls:6,vars:2,consts:[[1,"container"],[1,"d-flex","flex-row"],["id","nui-waterfall-chart-simple",1,"w-100","mb-5"],["id","nui-waterfall-chart-advanced",1,"w-100","mt-5"]],template:function(e,r){1&e&&(t.j41(0,"div",0)(1,"charts-test-harness")(2,"div",1),t.nrm(3,"nui-waterfall-chart-simple-example",2),t.k0s(),t.j41(4,"div",1),t.nrm(5,"nui-waterfall-chart-advanced-example",3),t.k0s()()()),2&e&&t.xc7("margin-top",50,"px")},dependencies:[B.f,g,C],encapsulation:2})}return a})(),data:{srlc:{hideIndicator:!0}}}];let A=(()=>{class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=t.$C({type:a});static \u0275inj=t.G2t({providers:[{provide:c.uzs,useValue:(0,b.R)("waterfall")}],imports:[f.ad,c.s6u,c.a4p,P.r,n.StF,c.GDi,x.iI.forChild(R)]})}return a})()}}]);