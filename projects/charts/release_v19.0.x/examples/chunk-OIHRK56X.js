function p(r){return typeof r=="function"}function H(r){let t=r(o=>{Error.call(o),o.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var me=H(r=>function(t){r(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((o,n)=>`${n+1}) ${o.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function M(r,e){if(r){let t=r.indexOf(e);0<=t&&r.splice(t,1)}}var y=class r{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:o}=this;if(p(o))try{o()}catch(i){e=i instanceof me?i.errors:[i]}let{_teardowns:n}=this;if(n){this._teardowns=null;for(let i of n)try{Be(i)}catch(s){e=e??[],s instanceof me?e=[...e,...s.errors]:e.push(s)}}if(e)throw new me(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Be(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=(t=this._teardowns)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&M(t,e)}remove(e){let{_teardowns:t}=this;t&&M(t,e),e instanceof r&&e._removeParent(this)}};y.EMPTY=(()=>{let r=new y;return r.closed=!0,r})();var Le=y.EMPTY;function pe(r){return r instanceof y||r&&"closed"in r&&p(r.remove)&&p(r.add)&&p(r.unsubscribe)}function Be(r){p(r)?r():r.unsubscribe()}var I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var G={setTimeout(...r){let{delegate:e}=G;return(e?.setTimeout||setTimeout)(...r)},clearTimeout(r){let{delegate:e}=G;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0};function le(r){G.setTimeout(()=>{let{onUnhandledError:e}=I;if(e)e(r);else throw r})}function F(){}var Ze=Me("C",void 0,void 0);function Qe(r){return Me("E",void 0,r)}function Xe(r){return Me("N",r,void 0)}function Me(r,e,t){return{kind:r,value:e,error:t}}var R=null;function K(r){if(I.useDeprecatedSynchronousErrorHandling){let e=!R;if(e&&(R={errorThrown:!1,error:null}),r(),e){let{errorThrown:t,error:o}=R;if(R=null,t)throw o}}else r()}function er(r){I.useDeprecatedSynchronousErrorHandling&&R&&(R.errorThrown=!0,R.error=r)}var W=class extends y{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pe(e)&&e.add(this)):this.destination=Fr}static create(e,t,o){return new U(e,t,o)}next(e){this.isStopped?We(Xe(e),this):this._next(e)}error(e){this.isStopped?We(Qe(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?We(Ze,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},U=class extends W{constructor(e,t,o){super();let n;if(p(e))n=e;else if(e){({next:n,error:t,complete:o}=e);let i;this&&I.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe()):i=e,n=n?.bind(i),t=t?.bind(i),o=o?.bind(i)}this.destination={next:n?Re(n,this):F,error:Re(t??rr,this),complete:o?Re(o,this):F}}};function Re(r,e){return(...t)=>{try{r(...t)}catch(o){I.useDeprecatedSynchronousErrorHandling?er(o):le(o)}}}function rr(r){throw r}function We(r,e){let{onStoppedNotification:t}=I;t&&G.setTimeout(()=>t(r,e))}var Fr={closed:!0,next:F,error:rr,complete:F};var $=typeof Symbol=="function"&&Symbol.observable||"@@observable";function v(r){return r}function Pr(...r){return Ue(r)}function Ue(r){return r.length===0?v:r.length===1?r[0]:function(t){return r.reduce((o,n)=>n(o),t)}}var a=(()=>{class r{constructor(t){t&&(this._subscribe=t)}lift(t){let o=new r;return o.source=this,o.operator=t,o}subscribe(t,o,n){let i=kr(t)?t:new U(t,o,n);return K(()=>{let{operator:s,source:f}=this;i.add(s?s.call(i,f):f?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(o){t.error(o)}}forEach(t,o){return o=tr(o),new o((n,i)=>{let s;s=this.subscribe(f=>{try{t(f)}catch(m){i(m),s?.unsubscribe()}},i,n)})}_subscribe(t){var o;return(o=this.source)===null||o===void 0?void 0:o.subscribe(t)}[$](){return this}pipe(...t){return Ue(t)(this)}toPromise(t){return t=tr(t),new t((o,n)=>{let i;this.subscribe(s=>i=s,s=>n(s),()=>o(i))})}}return r.create=e=>new r(e),r})();function tr(r){var e;return(e=r??I.Promise)!==null&&e!==void 0?e:Promise}function Cr(r){return r&&p(r.next)&&p(r.error)&&p(r.complete)}function kr(r){return r&&r instanceof W||Cr(r)&&pe(r)}var or=H(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var C=(()=>{class r extends a{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let o=new ue(this,this);return o.operator=t,o}_throwIfClosed(){if(this.closed)throw new or}next(t){K(()=>{if(this._throwIfClosed(),!this.isStopped){let o=this.observers.slice();for(let n of o)n.next(t)}})}error(t){K(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:o}=this;for(;o.length;)o.shift().error(t)}})}complete(){K(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:o,isStopped:n,observers:i}=this;return o||n?Le:(i.push(t),new y(()=>M(i,t)))}_checkFinalizedStatuses(t){let{hasError:o,thrownError:n,isStopped:i}=this;o?t.error(n):i&&t.complete()}asObservable(){let t=new a;return t.source=this,t}}return r.create=(e,t)=>new ue(e,t),r})(),ue=class extends C{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.next)===null||o===void 0||o.call(t,e)}error(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.error)===null||o===void 0||o.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,o;return(o=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&o!==void 0?o:Le}};function ce(r){return r&&p(r.schedule)}function qe(r){return r[r.length-1]}function ae(r){return p(qe(r))?r.pop():void 0}function A(r){return ce(qe(r))?r.pop():void 0}function nr(r,e){return typeof qe(r)=="number"?r.pop():e}function sr(r,e,t,o){function n(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function f(d){try{l(o.next(d))}catch(b){s(b)}}function m(d){try{l(o.throw(d))}catch(b){s(b)}}function l(d){d.done?i(d.value):n(d.value).then(f,m)}l((o=o.apply(r,e||[])).next())})}function ir(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],o=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function q(r){return this instanceof q?(this.v=r,this):new q(r)}function fr(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(r,e||[]),n,i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(h){o[h]&&(n[h]=function(w){return new Promise(function(T,g){i.push([h,w,T,g])>1||f(h,w)})})}function f(h,w){try{m(o[h](w))}catch(T){b(i[0][3],T)}}function m(h){h.value instanceof q?Promise.resolve(h.value.v).then(l,d):b(i[0][2],h)}function l(h){f("next",h)}function d(h){f("throw",h)}function b(h,w){h(w),i.shift(),i.length&&f(i[0][0],i[0][1])}}function mr(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof ir=="function"?ir(r):r[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(i){t[i]=r[i]&&function(s){return new Promise(function(f,m){s=r[i](s),n(f,m,s.done,s.value)})}}function n(i,s,f,m){Promise.resolve(m).then(function(l){i({value:l,done:f})},s)}}var J=r=>r&&typeof r.length=="number"&&typeof r!="function";function de(r){return p(r?.then)}function he(r){return p(r[$])}function xe(r){return Symbol.asyncIterator&&p(r?.[Symbol.asyncIterator])}function be(r){return new TypeError(`You provided ${r!==null&&typeof r=="object"?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function jr(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ye=jr();function ve(r){return p(r?.[ye])}function _e(r){return fr(this,arguments,function*(){let t=r.getReader();try{for(;;){let{value:o,done:n}=yield q(t.read());if(n)return yield q(void 0);yield yield q(o)}}finally{t.releaseLock()}})}function we(r){return p(r?.getReader)}function x(r){if(r instanceof a)return r;if(r!=null){if(he(r))return Lr(r);if(J(r))return Mr(r);if(de(r))return Rr(r);if(xe(r))return pr(r);if(ve(r))return Wr(r);if(we(r))return Ur(r)}throw be(r)}function Lr(r){return new a(e=>{let t=r[$]();if(p(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Mr(r){return new a(e=>{for(let t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function Rr(r){return new a(e=>{r.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,le)})}function Wr(r){return new a(e=>{for(let t of r)if(e.next(t),e.closed)return;e.complete()})}function pr(r){return new a(e=>{qr(r,e).catch(t=>e.error(t))})}function Ur(r){return pr(_e(r))}function qr(r,e){var t,o,n,i;return sr(this,void 0,void 0,function*(){try{for(t=mr(r);o=yield t.next(),!o.done;){let s=o.value;if(e.next(s),e.closed)return}}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=t.return)&&(yield i.call(t))}finally{if(n)throw n.error}}e.complete()})}function _(r,e,t,o=0,n=!1){let i=e.schedule(function(){t(),n?r.add(this.schedule(null,o)):this.unsubscribe()},o);if(r.add(i),!n)return i}function Ve(r){return p(r?.lift)}function c(r){return e=>{if(Ve(e))return e.lift(function(t){try{return r(t,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}var u=class extends W{constructor(e,t,o,n,i){super(e),this.onFinalize=i,this._next=t?function(s){try{t(s)}catch(f){e.error(f)}}:super._next,this._error=n?function(s){try{n(s)}catch(f){e.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(s){e.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}};function ge(r,e=0){return c((t,o)=>{t.subscribe(new u(o,n=>_(o,r,()=>o.next(n),e),()=>_(o,r,()=>o.complete(),e),n=>_(o,r,()=>o.error(n),e)))})}function Se(r,e=0){return c((t,o)=>{o.add(r.schedule(()=>t.subscribe(o),e))})}function lr(r,e){return x(r).pipe(Se(e),ge(e))}function ur(r,e){return x(r).pipe(Se(e),ge(e))}function cr(r,e){return new a(t=>{let o=0;return e.schedule(function(){o===r.length?t.complete():(t.next(r[o++]),t.closed||this.schedule())})})}function ar(r,e){return new a(t=>{let o;return _(t,e,()=>{o=r[ye](),_(t,e,()=>{let n,i;try{({value:n,done:i}=o.next())}catch(s){t.error(s);return}i?t.complete():t.next(n)},0,!0)}),()=>p(o?.return)&&o.return()})}function Ee(r,e){if(!r)throw new Error("Iterable cannot be null");return new a(t=>{_(t,e,()=>{let o=r[Symbol.asyncIterator]();_(t,e,()=>{o.next().then(n=>{n.done?t.complete():t.next(n.value)})},0,!0)})})}function dr(r,e){return Ee(_e(r),e)}function hr(r,e){if(r!=null){if(he(r))return lr(r,e);if(J(r))return cr(r,e);if(de(r))return ur(r,e);if(xe(r))return Ee(r,e);if(ve(r))return ar(r,e);if(we(r))return dr(r,e)}throw be(r)}function E(r,e){return e?hr(r,e):x(r)}function Vr(...r){let e=A(r);return E(r,e)}function P(r,e){return c((t,o)=>{let n=0;t.subscribe(new u(o,i=>{o.next(r.call(e,i,n++))}))})}var Ie=class extends y{constructor(e,t){super()}schedule(e,t=0){return this}};var re={setInterval(...r){let{delegate:e}=re;return(e?.setInterval||setInterval)(...r)},clearInterval(r){let{delegate:e}=re;return(e?.clearInterval||clearInterval)(r)},delegate:void 0};var k=class extends Ie{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;let o=this.id,n=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(n,o,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this}requestAsyncId(e,t,o=0){return re.setInterval(e.flush.bind(e,this),o)}recycleAsyncId(e,t,o=0){if(o!=null&&this.delay===o&&this.pending===!1)return t;re.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let o=this._execute(e,t);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o=!1,n;try{this.work(e)}catch(i){o=!0,n=i||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),n}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:o}=t;this.work=this.state=this.scheduler=null,this.pending=!1,M(o,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var te={now(){return(te.delegate||Date).now()},delegate:void 0};var B=class r{constructor(e,t=r.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,o){return new this.schedulerActionCtor(this,e).schedule(o,t)}};B.now=te.now;var j=class extends B{constructor(e,t=B.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let o;this._active=!0;do if(o=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,o){for(;e=t.shift();)e.unsubscribe();throw o}}};var V=new j(k),Oe=V;function xr(r,e,t,o,n,i,s,f){let m=[],l=0,d=0,b=!1,h=()=>{b&&!m.length&&!l&&e.complete()},w=g=>l<o?T(g):m.push(g),T=g=>{i&&e.next(g),l++;let ee=!1;x(t(g,d++)).subscribe(new u(e,S=>{n?.(S),i?w(S):e.next(S)},()=>{ee=!0},void 0,()=>{if(ee)try{for(l--;m.length&&l<o;){let S=m.shift();s?_(e,s,()=>T(S)):T(S)}h()}catch(S){e.error(S)}}))};return r.subscribe(new u(e,w,()=>{b=!0,h()})),()=>{f?.()}}function O(r,e,t=1/0){return p(e)?O((o,n)=>P((i,s)=>e(o,i,n,s))(x(r(o,n))),t):(typeof e=="number"&&(t=e),c((o,n)=>xr(o,n,r,t)))}function oe(r=1/0){return O(v,r)}function br(){return oe(1)}function Z(...r){return br()(E(r,A(r)))}var D=new a(r=>r.complete());function L(r){return r<=0?()=>D:c((e,t)=>{let o=0;e.subscribe(new u(t,n=>{++o<=r&&(t.next(n),r<=o&&t.complete())}))})}function yr(){return c((r,e)=>{r.subscribe(new u(e,F))})}function vr(r){return P(()=>r)}function De(r,e){return e?t=>Z(e.pipe(L(1),yr()),t.pipe(De(r))):O((t,o)=>r(t,o).pipe(L(1),vr(t)))}function _r(r){return r instanceof Date&&!isNaN(r)}function z(r=0,e,t=Oe){let o=-1;return e!=null&&(ce(e)?t=e:o=e),new a(n=>{let i=_r(r)?+r-t.now():r;i<0&&(i=0);let s=0;return t.schedule(function(){n.closed||(n.next(s++),0<=o?this.schedule(void 0,o):n.complete())},i)})}function Dr(r,e=V){let t=z(r,e);return De(()=>t)}function zr(r){return c((e,t)=>{x(r).subscribe(new u(t,()=>t.complete(),F)),!t.closed&&e.subscribe(t)})}function ze(){return c((r,e)=>{let t=null;r._refCount++;let o=new u(e,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount){t=null;return}let n=r._connection,i=t;t=null,n&&(!i||n===i)&&n.unsubscribe(),e.unsubscribe()});r.subscribe(o),o.closed||(t=r.connect())})}var Ne=class extends a{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ve(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new y;let t=this.getSubject();e.add(this.source.subscribe(new u(t,void 0,()=>{this._teardown(),t.complete()},o=>{this._teardown(),t.error(o)},()=>this._teardown()))),e.closed&&(this._connection=null,e=y.EMPTY)}return e}refCount(){return ze()(this)}};var Q={schedule(r){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:o}=Q;o&&(e=o.requestAnimationFrame,t=o.cancelAnimationFrame);let n=e(i=>{t=void 0,r(i)});return new y(()=>t?.(n))},requestAnimationFrame(...r){let{delegate:e}=Q;return(e?.requestAnimationFrame||requestAnimationFrame)(...r)},cancelAnimationFrame(...r){let{delegate:e}=Q;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...r)},delegate:void 0};var Ye=class extends C{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:o}=this;if(e)throw t;return this._throwIfClosed(),o}next(e){super.next(this._value=e)}};var ne=class extends C{constructor(e=1/0,t=1/0,o=te){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:o,_infiniteTimeWindow:n,_timestampProvider:i,_windowTime:s}=this;t||(o.push(e),!n&&o.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:o,_buffer:n}=this,i=n.slice();for(let s=0;s<i.length&&!e.closed;s+=o?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:o,_infiniteTimeWindow:n}=this,i=(n?1:2)*e;if(e<1/0&&i<o.length&&o.splice(0,o.length-i),!n){let s=t.now(),f=0;for(let m=1;m<o.length&&o[m]<=s;m+=2)f=m;f&&o.splice(0,f+1)}}};var Nr=1,He,Ge={};function wr(r){return r in Ge?(delete Ge[r],!0):!1}var gr={setImmediate(r){let e=Nr++;return Ge[e]=!0,He||(He=Promise.resolve()),He.then(()=>wr(e)&&r()),e},clearImmediate(r){wr(r)}};var{setImmediate:Yr,clearImmediate:Hr}=gr,ie={setImmediate(...r){let{delegate:e}=ie;return(e?.setImmediate||Yr)(...r)},clearImmediate(r){let{delegate:e}=ie;return(e?.clearImmediate||Hr)(r)},delegate:void 0};var Ae=class extends k{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,o=0){return o!==null&&o>0?super.requestAsyncId(e,t,o):(e.actions.push(this),e._scheduled||(e._scheduled=ie.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,o=0){if(o!=null&&o>0||o==null&&this.delay>0)return super.recycleAsyncId(e,t,o);e.actions.length===0&&(ie.clearImmediate(t),e._scheduled=void 0)}};var Te=class extends j{flush(e){this._active=!0,this._scheduled=void 0;let{actions:t}=this,o,n=-1;e=e||t.shift();let i=t.length;do if(o=e.execute(e.state,e.delay))break;while(++n<i&&(e=t.shift()));if(this._active=!1,o){for(;++n<i&&(e=t.shift());)e.unsubscribe();throw o}}};var Gr=new Te(Ae);var Fe=class extends k{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,o=0){return o!==null&&o>0?super.requestAsyncId(e,t,o):(e.actions.push(this),e._scheduled||(e._scheduled=Q.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,o=0){if(o!=null&&o>0||o==null&&this.delay>0)return super.recycleAsyncId(e,t,o);e.actions.length===0&&(Q.cancelAnimationFrame(t),e._scheduled=void 0)}};var Pe=class extends j{flush(e){this._active=!0,this._scheduled=void 0;let{actions:t}=this,o,n=-1;e=e||t.shift();let i=t.length;do if(o=e.execute(e.state,e.delay))break;while(++n<i&&(e=t.shift()));if(this._active=!1,o){for(;++n<i&&(e=t.shift());)e.unsubscribe();throw o}}};var Kr=new Pe(Fe);function $r(r,e){let t=p(r)?r:()=>r,o=n=>n.error(t());return new a(e?n=>e.schedule(o,0,n):o)}function Jr(r){return!!r&&(r instanceof a||p(r.lift)&&p(r.subscribe))}var N=H(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});var{isArray:Br}=Array;function Zr(r,e){return Br(e)?r(...e):r(e)}function X(r){return P(e=>Zr(r,e))}var{isArray:Qr}=Array,{getPrototypeOf:Xr,prototype:et,keys:rt}=Object;function Ce(r){if(r.length===1){let e=r[0];if(Qr(e))return{args:e,keys:null};if(tt(e)){let t=rt(e);return{args:t.map(o=>e[o]),keys:t}}}return{args:r,keys:null}}function tt(r){return r&&typeof r=="object"&&Xr(r)===et}function ke(r,e){return r.reduce((t,o,n)=>(t[o]=e[n],t),{})}function ot(...r){let e=A(r),t=ae(r),{args:o,keys:n}=Ce(r);if(o.length===0)return E([],e);let i=new a(nt(o,e,n?s=>ke(n,s):v));return t?i.pipe(X(t)):i}function nt(r,e,t=v){return o=>{Sr(e,()=>{let{length:n}=r,i=new Array(n),s=n,f=n;for(let m=0;m<n;m++)Sr(e,()=>{let l=E(r[m],e),d=!1;l.subscribe(new u(o,b=>{i[m]=b,d||(d=!0,f--),f||o.next(t(i.slice()))},()=>{--s||o.complete()}))},o)},o)}}function Sr(r,e,t){r?_(t,r,e):e()}function it(r){return new a(e=>{x(r()).subscribe(e)})}function st(...r){let e=ae(r),{args:t,keys:o}=Ce(r),n=new a(i=>{let{length:s}=t;if(!s){i.complete();return}let f=new Array(s),m=s,l=s;for(let d=0;d<s;d++){let b=!1;x(t[d]).subscribe(new u(i,h=>{b||(b=!0,l--),f[d]=h},()=>m--,void 0,()=>{(!m||!b)&&(l||i.next(o?ke(o,f):f),i.complete())}))}});return e?n.pipe(X(e)):n}var ft=["addListener","removeListener"],mt=["addEventListener","removeEventListener"],pt=["on","off"];function Ke(r,e,t,o){if(p(t)&&(o=t,t=void 0),o)return Ke(r,e,t).pipe(X(o));let[n,i]=ct(r)?mt.map(s=>f=>r[s](e,f,t)):lt(r)?ft.map(Er(r,e)):ut(r)?pt.map(Er(r,e)):[];if(!n&&J(r))return O(s=>Ke(s,e,t))(x(r));if(!n)throw new TypeError("Invalid event target");return new a(s=>{let f=(...m)=>s.next(1<m.length?m:m[0]);return n(f),()=>i(f)})}function Er(r,e){return t=>o=>r[t](e,o)}function lt(r){return p(r.addListener)&&p(r.removeListener)}function ut(r){return p(r.on)&&p(r.off)}function ct(r){return p(r.addEventListener)&&p(r.removeEventListener)}function at(r=0,e=V){return r<0&&(r=0),z(r,r,e)}function dt(...r){let e=A(r),t=nr(r,1/0),o=r;return o.length?o.length===1?x(o[0]):oe(t)(E(o,e)):D}function Y(r,e){return c((t,o)=>{let n=0;t.subscribe(new u(o,i=>r.call(e,i,n++)&&o.next(i)))})}function Ir(r){return c((e,t)=>{let o=!1,n=null,i=null,s=!1,f=()=>{if(i?.unsubscribe(),i=null,o){o=!1;let l=n;n=null,t.next(l)}s&&t.complete()},m=()=>{i=null,s&&t.complete()};e.subscribe(new u(t,l=>{o=!0,n=l,i||x(r(l)).subscribe(i=new u(t,f,m))},()=>{s=!0,(!o||!i||i.closed)&&t.complete()}))})}function ht(r,e=Oe){return Ir(()=>z(r,e))}function Or(r){return c((e,t)=>{let o=null,n=!1,i;o=e.subscribe(new u(t,void 0,void 0,s=>{i=x(r(s,Or(r)(e))),o?(o.unsubscribe(),o=null,i.subscribe(t)):n=!0})),n&&(o.unsubscribe(),o=null,i.subscribe(t))})}function Ar(r,e,t,o,n){return(i,s)=>{let f=t,m=e,l=0;i.subscribe(new u(s,d=>{let b=l++;m=f?r(m,d,b):(f=!0,d),o&&s.next(m)},n&&(()=>{f&&s.next(m),s.complete()})))}}function xt(r,e){return p(e)?O(r,e,1):O(r,1)}function bt(r,e=V){return c((t,o)=>{let n=null,i=null,s=null,f=()=>{if(n){n.unsubscribe(),n=null;let l=i;i=null,o.next(l)}};function m(){let l=s+r,d=e.now();if(d<l){n=this.schedule(void 0,l-d),o.add(n);return}f()}t.subscribe(new u(o,l=>{i=l,s=e.now(),n||(n=e.schedule(m,r),o.add(n))},()=>{f(),o.complete()},void 0,()=>{i=n=null}))})}function se(r){return c((e,t)=>{let o=!1;e.subscribe(new u(t,n=>{o=!0,t.next(n)},()=>{o||t.next(r),t.complete()}))})}function yt(r,e=v){return r=r??vt,c((t,o)=>{let n,i=!0;t.subscribe(new u(o,s=>{let f=e(s);(i||!r(n,f))&&(i=!1,n=f,o.next(s))}))})}function vt(r,e){return r===e}function je(r=_t){return c((e,t)=>{let o=!1;e.subscribe(new u(t,n=>{o=!0,t.next(n)},()=>o?t.complete():t.error(r())))})}function _t(){return new N}function wt(r){return c((e,t)=>{try{e.subscribe(t)}finally{t.add(r)}})}function gt(r,e){let t=arguments.length>=2;return o=>o.pipe(r?Y((n,i)=>r(n,i,o)):v,L(1),t?se(e):je(()=>new N))}function $e(r){return r<=0?()=>D:c((e,t)=>{let o=[];e.subscribe(new u(t,n=>{o.push(n),r<o.length&&o.shift()},()=>{for(let n of o)t.next(n);t.complete()},void 0,()=>{o=null}))})}function St(r,e){let t=arguments.length>=2;return o=>o.pipe(r?Y((n,i)=>r(n,i,o)):v,$e(1),t?se(e):je(()=>new N))}function Et(){return c((r,e)=>{let t,o=!1;r.subscribe(new u(e,n=>{let i=t;t=n,o&&e.next([i,n]),o=!0}))})}function It(...r){let e=r.length;if(e===0)throw new Error("list of properties cannot be empty.");return P(t=>{let o=t;for(let n=0;n<e;n++){let i=o?.[r[n]];if(typeof i<"u")o=i;else return}return o})}function Ot(r,e){return c(Ar(r,e,arguments.length>=2,!0))}function Tr(r={}){let{connector:e=()=>new C,resetOnError:t=!0,resetOnComplete:o=!0,resetOnRefCountZero:n=!0}=r;return i=>{let s=null,f=null,m=null,l=0,d=!1,b=!1,h=()=>{f?.unsubscribe(),f=null},w=()=>{h(),s=m=null,d=b=!1},T=()=>{let g=s;w(),g?.unsubscribe()};return c((g,ee)=>{l++,!b&&!d&&h();let S=m=m??e();ee.add(()=>{l--,l===0&&!b&&!d&&(f=Je(T,n))}),S.subscribe(ee),s||(s=new U({next:fe=>S.next(fe),error:fe=>{b=!0,h(),f=Je(w,t,fe),S.error(fe)},complete:()=>{d=!0,h(),f=Je(w,o),S.complete()}}),E(g).subscribe(s))})(i)}}function Je(r,e,...t){return e===!0?(r(),null):e===!1?null:e(...t).pipe(L(1)).subscribe(()=>r())}function At(r,e,t){var o,n;let i,s=!1;return r&&typeof r=="object"?(i=(o=r.bufferSize)!==null&&o!==void 0?o:1/0,e=(n=r.windowTime)!==null&&n!==void 0?n:1/0,s=!!r.refCount,t=r.scheduler):i=r??1/0,Tr({connector:()=>new ne(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Tt(r){return Y((e,t)=>r<=t)}function Ft(...r){let e=A(r);return c((t,o)=>{(e?Z(r,t,e):Z(r,t)).subscribe(o)})}function Pt(r,e){return c((t,o)=>{let n=null,i=0,s=!1,f=()=>s&&!n&&o.complete();t.subscribe(new u(o,m=>{n?.unsubscribe();let l=0,d=i++;x(r(m,d)).subscribe(n=new u(o,b=>o.next(e?e(m,b,d,l++):b),()=>{n=null,f()}))},()=>{s=!0,f()}))})}function Ct(r,e,t){let o=p(r)||e||t?{next:r,error:e,complete:t}:r;return o?c((n,i)=>{var s;(s=o.subscribe)===null||s===void 0||s.call(o);let f=!0;n.subscribe(new u(i,m=>{var l;(l=o.next)===null||l===void 0||l.call(o,m),i.next(m)},()=>{var m;f=!1,(m=o.complete)===null||m===void 0||m.call(o),i.complete()},m=>{var l;f=!1,(l=o.error)===null||l===void 0||l.call(o,m),i.error(m)},()=>{var m,l;f&&((m=o.unsubscribe)===null||m===void 0||m.call(o)),(l=o.finalize)===null||l===void 0||l.call(o)}))}):v}export{y as a,Pr as b,a as c,ze as d,Ne as e,C as f,Ye as g,ne as h,Gr as i,Kr as j,D as k,E as l,Vr as m,$r as n,Jr as o,N as p,P as q,ot as r,O as s,oe as t,Z as u,it as v,st as w,Ke as x,z as y,at as z,dt as A,Y as B,ht as C,Or as D,xt as E,bt as F,se as G,L as H,Dr as I,yt as J,wt as K,gt as L,$e as M,St as N,Et as O,It as P,Ot as Q,At as R,Tt as S,Ft as T,Pt as U,zr as V,Ct as W};
