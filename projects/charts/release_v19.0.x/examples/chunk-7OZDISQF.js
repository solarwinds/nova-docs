import{$ as U,A as O,C as $,D as z,Ea as X,F as Y,I as N,Ia as G,Ja as q,M as w,R as D,Z as W,_ as j,fa as P,ga as k,ma as E,na as V,qa as L,z as H}from"./chunk-JLRCU3YI.js";import{e as R}from"./chunk-JQPMAK7F.js";import{a as se}from"./chunk-6NQICH4K.js";import{Aa as A,Ma as n,Ta as d,Ua as c,Va as g,Za as x,gb as T,hb as m,ja as a,pa as I,s as _,t as v,va as M}from"./chunk-YSXLQTCP.js";import{a as f,b as y,g as te}from"./chunk-B7O3QC5Z.js";var l=te(se());function re(r,S){if(r&1){let e=x();d(0,"nui-legend-series",6),T("mouseenter",function(){let s=_(e).$implicit,i=m();return v(i.chartAssist.emphasizeSeries(s.id))})("isSelectedChange",function(s){let i=_(e).$implicit,u=m();return v(u.chartAssist.toggleSeries(i.id,s))}),d(1,"nui-rich-legend-tile",7),g(2,"nui-chart-marker",8),c()()}if(r&2){let e=S.$implicit,t=m();n("descriptionPrimary",e.name)("seriesRenderState",t.chartAssist.renderStatesIndex[e.id]==null?null:t.chartAssist.renderStatesIndex[e.id].state)("isSelected",!t.chartAssist.isSeriesHidden(e.id)),a(),n("value",t.chartAssist.getHighlightedValue(e,"y"))("backgroundColor",t.chartAssist.palette.standardColors.get(e.id))("color",t.chartAssist.palette.textColors.get(e.id)),a(),n("marker",t.chartAssist.markers.get(e.id))("color",t.chartAssist.palette.standardColors.get(e.id))}}function ie(r,S){if(r&1){let e=x();d(0,"nui-legend-series",6),T("mouseenter",function(){let s=_(e).$implicit,i=m();return v(i.reversedThresholdsChartAssist.emphasizeSeries(s.id))})("isSelectedChange",function(s){let i=_(e).$implicit,u=m();return v(u.reversedThresholdsChartAssist.toggleSeries(i.id,s))}),d(1,"nui-rich-legend-tile",7),g(2,"nui-chart-marker",8),c()()}if(r&2){let e=S.$implicit,t=m();n("descriptionPrimary",e.name)("seriesRenderState",t.reversedThresholdsChartAssist.renderStatesIndex[e.id]==null?null:t.reversedThresholdsChartAssist.renderStatesIndex[e.id].state)("isSelected",!t.reversedThresholdsChartAssist.isSeriesHidden(e.id)),a(),n("value",t.reversedThresholdsChartAssist.getHighlightedValue(e,"y"))("backgroundColor",t.reversedThresholdsChartAssist.palette.standardColors.get(e.id))("color",t.reversedThresholdsChartAssist.palette.textColors.get(e.id)),a(),n("marker",t.reversedThresholdsChartAssist.markers.get(e.id))("color",t.reversedThresholdsChartAssist.palette.standardColors.get(e.id))}}var p=function(r){return r.Error="error",r.Warning="warning",r}(p||{}),ve=(()=>{class r{thresholdsService;chart=new P(new L);reversedThresholdsChart=new P(new L);chartAssist=new k(this.chart);reversedThresholdsChartAssist=new k(this.reversedThresholdsChart);thresholdsPalette=new N(new X({[p.Error]:w[2],[p.Warning]:w[4]}));constructor(e){this.thresholdsService=e}ngOnInit(){let e=new W(this.chartAssist.palette.standardColors,this.chartAssist.markers),t=new j,s={x:new q((0,l.duration)(5,"minutes")),y:new E};s.y.fixDomain([0,100]);let i={x:new G,y:new E};i.y.fixDomain([0,100]);let u={x:s.x,y:new V().fixDomain(D.STATUS_DOMAIN)},K={x:i.x,y:new V().fixDomain(D.STATUS_DOMAIN)},Q=ne(),ee=oe(),Z=J().map(o=>y(f({},o),{accessors:e,renderer:t,scales:s})),F=[];for(let o of Z){let h=this.thresholdsService.getThresholdZones(o,Q,this.thresholdsPalette.standardColors);this.thresholdsService.injectThresholdsData(o,h);let C=[...this.thresholdsService.getThresholdLines(h),this.thresholdsService.getBackgrounds(o,h,u,this.thresholdsPalette.backgroundColors)];F.push(...C)}let b=J().map(o=>y(f({},o),{accessors:e,renderer:t,scales:i})),B=[];for(let o of b){let h=this.thresholdsService.getThresholdZones(o,ee,this.thresholdsPalette.standardColors);this.thresholdsService.injectThresholdsData(o,h);let C=[...this.thresholdsService.getThresholdLines(h),this.thresholdsService.getBackgrounds(o,h,K,this.thresholdsPalette.backgroundColors)];B.push(...C)}this.chartAssist.update([...F,...Z]),this.reversedThresholdsChartAssist.update([...B,...b])}static \u0275fac=function(t){return new(t||r)(I(U))};static \u0275cmp=M({type:r,selectors:[["ng-component"]],standalone:!1,decls:13,vars:10,consts:[[1,"nui-chart-layout"],[1,"chart"],[1,"w-100",3,"chart"],[1,"legend"],["seriesUnitLabel","sec",3,"mouseleave","active","interactive"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[3,"mouseenter","isSelectedChange","descriptionPrimary","seriesRenderState","isSelected"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"]],template:function(t,s){t&1&&(d(0,"div",0)(1,"div",1),g(2,"nui-chart",2),c(),d(3,"div",3)(4,"nui-legend",4),T("mouseleave",function(){return s.chartAssist.resetVisibleSeries()}),A(5,re,3,8,"nui-legend-series",5),c()()(),g(6,"br"),d(7,"div",0)(8,"div",1),g(9,"nui-chart",2),c(),d(10,"div",3)(11,"nui-legend",4),T("mouseleave",function(){return s.reversedThresholdsChartAssist.resetVisibleSeries()}),A(12,ie,3,8,"nui-legend-series",5),c()()()),t&2&&(a(2),n("chart",s.chart),a(2),n("active",s.chartAssist.isLegendActive)("interactive",!0),a(),n("ngForOf",s.chartAssist.legendSeriesSet)("ngForTrackBy",s.chartAssist.seriesTrackByFn),a(4),n("chart",s.reversedThresholdsChart),a(2),n("active",s.reversedThresholdsChartAssist.isLegendActive)("interactive",!0),a(),n("ngForOf",s.reversedThresholdsChartAssist.legendSeriesSet)("ngForTrackBy",s.reversedThresholdsChartAssist.seriesTrackByFn))},dependencies:[R,$,z,Y,O,H],encapsulation:2})}return r})();function ne(){return[{status:p.Error,start:70,end:90},{status:p.Warning,start:40,end:70}]}function oe(){return[{status:p.Error,end:20},{status:p.Warning,start:20,end:40}]}function J(){let r="YYYY-MM-DDTHH:mm:ssZ";return[{id:"series-1",name:"Series 1",data:[{x:(0,l.default)("2016-12-25T15:05:00Z",r).toDate(),y:20},{x:(0,l.default)("2016-12-25T15:10:00Z",r).toDate(),y:80},{x:(0,l.default)("2016-12-25T15:15:00Z",r).toDate(),y:10},{x:(0,l.default)("2016-12-25T15:20:00Z",r).toDate(),y:0},{x:(0,l.default)("2016-12-25T15:25:00Z",r).toDate(),y:50},{x:(0,l.default)("2016-12-25T15:30:00Z",r).toDate(),y:20}]}]}export{ve as a};
