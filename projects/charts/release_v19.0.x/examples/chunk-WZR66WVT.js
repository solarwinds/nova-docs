import{a as N}from"./chunk-BLBAPCQI.js";import{A as R,Aa as H,C as L,D as M,F as O,_a as v,fa as B,ga as C,ia as G,ma as $,s as V,t as I,u as F,ya as W}from"./chunk-JLRCU3YI.js";import{Ma as k,ib as A,sb as E,wb as D}from"./chunk-PJ4NWNDH.js";import{e as b,f as y}from"./chunk-JQPMAK7F.js";import{Aa as p,Ma as l,Na as P,Ta as n,Ua as r,Va as g,Za as f,gb as d,hb as u,ja as c,pa as T,qb as o,s as m,t as h,va as w}from"./chunk-YSXLQTCP.js";import{a as x,b as S}from"./chunk-B7O3QC5Z.js";function z(a,_){a&1&&(n(0,"div")(1,"div",11),o(2,"57"),r(),n(3,"div",12),o(4,"donuts"),r()())}function U(a,_){if(a&1){let e=f();n(0,"nui-legend-series",13),d("mouseenter",function(){let t=m(e).$implicit,s=u();return h(s.chartAssist.emphasizeSeries(t.id))})("isSelectedChange",function(t){let s=m(e).$implicit,j=u();return h(j.chartAssist.toggleSeries(s.id,t))}),g(1,"nui-rich-legend-tile",14),r()}if(a&2){let e=_.$implicit,i=u();l("descriptionPrimary",e.name)("seriesRenderState",i.chartAssist.renderStatesIndex[e.id]==null?null:i.chartAssist.renderStatesIndex[e.id].state)("isSelected",!i.chartAssist.isSeriesHidden(e.id)),c(),l("value",i.chartAssist.getHighlightedValue(e,"y","value"))("backgroundColor",i.chartAssist.palette.standardColors.get(e.id))("color",i.chartAssist.palette.textColors.get(e.id))}}function q(a,_){if(a&1){let e=f();n(0,"div",15)(1,"h3"),o(2,"Annular's params"),r(),n(3,"p"),o(4," Setting one of the parameters to 0 will force donut chart to use default annular width of 20px. Default width is also configurable. "),r(),n(5,"span"),o(6,"Donut's width in percents"),r(),n(7,"nui-textbox-number",16),d("valueChange",function(t){m(e);let s=u();return h(s.updateWidth(t))}),r(),n(8,"span"),o(9,"Max donut's width in px"),r(),n(10,"nui-textbox-number",17),d("valueChange",function(t){m(e);let s=u();return h(s.updatemaxWidth(t))}),r()()}if(a&2){let e=u();c(7),l("value",15)("maxValue",80),c(3),l("value",e.renderer.config.maxThickness)}}var se=(()=>{class a{toastr;compact=!1;chart=new B(new W);chartAssist=new C(this.chart);contentPlugin;renderer;scales;interactive=!1;constructor(e){this.toastr=e}ngOnInit(){let e=new G;e.interactive=!1,this.chart.getGrid().config(e),this.scales={r:new $},this.scales.r.fixDomain([0,1]),this.chartAssist=new C(this.chart,this.processSeries),this.contentPlugin=new I,this.chart.addPlugin(this.contentPlugin),this.refreshPie(),this.chart.getEventBus().getStream("click").subscribe(i=>{this.toastr.info({title:"Event Published",message:`event: click; data: ${i.data}`,options:{timeOut:1500}})})}processSeries=e=>H(e,i=>!this.chartAssist.isSeriesHidden(i.id));generateSeriesSet(e=1){let i=N.generateMockOrdinalSeriesSet(["Chrome","Firefox","Edge"],e);return i.forEach(t=>{t.id+=`-${Math.round(Math.random()*100)}`}),i.map(t=>S(x({},t),{accessors:{data:{value:s=>s.value},series:{color:this.chartAssist.palette.standardColors.get}},scales:this.scales,renderer:this.renderer,showInLegend:!0}))}refreshPie(){this.renderer=new v,this.chartAssist.update(this.generateSeriesSet())}updateWidth(e){this.renderer.config.annularGrowth=e/100,this.updateDonut()}updatemaxWidth(e){this.renderer.config.maxThickness=e,this.updateDonut()}refreshPieInteraction(){this.interactive=!this.interactive,this.interactive?this.renderer.interaction={arc:{mouseover:"",mouseout:"",click:""}}:this.renderer.interaction=void 0,this.chartAssist.update(this.generateSeriesSet())}refreshDonut(e){this.renderer=new V,this.chartAssist.update(this.generateSeriesSet(e)),setTimeout(()=>{this.chart.updateDimensions()},0)}showContent(){return!(this.renderer instanceof v)}updateDonut(){setTimeout(()=>{this.chart.updateDimensions()},0)}static \u0275fac=function(i){return new(i||a)(T(D))};static \u0275cmp=w({type:a,selectors:[["nui-pie-chart-example"]],standalone:!1,decls:21,vars:10,consts:[[1,"d-flex","flex-column"],[1,"d-flex","flex-fill","w-100","h-100",2,"position","relative"],[1,"flex-fill","w-100","h-100",3,"chart"],[3,"plugin"],[4,"ngIf"],[1,"d-flex","flex-column","pl-2"],["seriesUnitLabel","Share",3,"mouseleave","active","interactive"],[3,"descriptionPrimary","seriesRenderState","isSelected","mouseenter","isSelectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-group"],["nui-button","","type","button",3,"click"],["class","d-flex flex-column w-25",4,"ngIf"],[1,"nui-text-page"],[1,"nui-text-secondary"],[3,"mouseenter","isSelectedChange","descriptionPrimary","seriesRenderState","isSelected"],[3,"value","backgroundColor","color"],[1,"d-flex","flex-column","w-25"],[3,"valueChange","value","maxValue"],[3,"valueChange","value"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"nui-expander")(2,"div",1),g(3,"nui-chart",2),n(4,"nui-chart-donut-content",3),p(5,z,5,0,"div",4),r(),n(6,"div",5)(7,"nui-legend",6),d("mouseleave",function(){return t.chartAssist.resetVisibleSeries()}),p(8,U,2,6,"nui-legend-series",7),r()()()(),n(9,"div",8)(10,"button",9),d("click",function(){return t.refreshDonut(1)}),o(11," 1 circle donut "),r(),n(12,"button",9),d("click",function(){return t.refreshDonut(2)}),o(13," 2 circle donut "),r(),n(14,"button",9),d("click",function(){return t.refreshPie()}),o(15,"Pie"),r(),n(16,"button",9),d("click",function(){return t.refreshPieInteraction()}),o(17," Refresh and toggle interaction "),r(),n(18,"button",9),d("click",function(){return t.compact=!t.compact}),o(19," Toggle Size "),r()()(),p(20,q,11,3,"div",10)),i&2&&(P("height",t.compact?"150px":"500px"),c(3),l("chart",t.chart),c(),l("plugin",t.contentPlugin),c(),l("ngIf",t.showContent()),c(2),l("active",t.chartAssist.isLegendActive)("interactive",!0),c(),l("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn),c(12),l("ngIf",t.showContent()))},dependencies:[b,y,L,M,O,R,F,k,A,E],encapsulation:2})}return a})();export{se as a};
