"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[888],{86905:(A,y,d)=>{d.r(y),d.d(y,{default:()=>k});var r=d(37691),b=d(48898),p=d(94611),e=d(73177),P=d(93840),S=d(71973),C=d.n(S),x=d(34235),v=d.n(x),D=d(15439),s=d.n(D),o=d(94650),Z=d(13458),T=d(9647);const i="YYYY-MM-DDTHH:mm:ssZ",n="2016-12-25T15:05:00Z";var c=(()=>{return(l=c||(c={})).Up="up",l.Warning="warning",l.Critical="critical",c;var l})();const E=[{path:"",component:(()=>{class l{constructor(){(0,r.Z)(this,"barChart",void 0),(0,r.Z)(this,"statusChart",void 0),(0,r.Z)(this,"xScaleId","xScale"),(0,r.Z)(this,"selectedDataPoints",{}),(0,r.Z)(this,"labelPlugin",new e.$fK),(0,r.Z)(this,"renderer",void 0),(0,r.Z)(this,"selectedLabelPosition",void 0),(0,r.Z)(this,"colorProvider",{get:t=>"selection-box"===t?"transparent":e.cpE[0],reset:()=>{}}),(0,r.Z)(this,"handleDataPointsInteraction",t=>{const a=t.data;a.interactionType===e.s_5.Click&&(this.selectedDataPoints=a.dataPoints,this.renderer.config.stateStyles&&(this.renderer.config.stateStyles.deemphasized={opacity:.3}),this.redrawCharts(),this.selectedLabelPosition=this.calculateInteractionLabelPosition(a),this.barChart.getEventBus().getStream(e.hkV).next({data:{interactionType:e.s_5.MouseMove,values:this.selectedLabelPosition}}))}),(0,r.Z)(this,"handleInteractionLabelUpdates",t=>{const a=t.data;a.interactionType===e.s_5.MouseMove&&C()(a.values)&&this.selectedLabelPosition?(this.labelPlugin.areLabelUpdatesEnabled=!0,this.barChart.getEventBus().getStream(e.hkV).next({data:{interactionType:e.s_5.MouseMove,values:this.selectedLabelPosition},broadcast:!0}),this.labelPlugin.areLabelUpdatesEnabled=!1):a.interactionType===e.s_5.MouseMove&&!C()(a.values)&&(this.labelPlugin.areLabelUpdatesEnabled=!0)}),(0,r.Z)(this,"handleMouseActive",t=>{this.renderer.config.stateStyles&&(C()(this.selectedDataPoints)||t.data?t.data&&(this.renderer.config.stateStyles.deemphasized={opacity:.1}):this.renderer.config.stateStyles.deemphasized={opacity:.3}),this.barChart.getDataManager().chartSeriesSet.length>0&&this.statusChart.getDataManager().chartSeriesSet.length>0&&this.redrawCharts()}),(0,r.Z)(this,"selectedDataPointIdxFn",t=>this.selectedDataPoints?.[t]?.index??e.hZk),(0,r.Z)(this,"cssClassAccessor",(t,a,m,u)=>C()(this.selectedDataPoints)||"selection-box"!==u.id||this.selectedDataPoints[u.id]?.index!==a?"":"selected")}ngOnInit(){this.setUpBarChart(),this.setUpStatusChart()}onReset(){this.selectedDataPoints={},this.selectedLabelPosition=void 0,this.redrawCharts(),this.labelPlugin.areLabelUpdatesEnabled=!0,this.barChart.getEventBus().getStream(e.hkV).next({data:{interactionType:e.s_5.MouseMove,values:{}}})}setUpBarChart(){this.barChart=new e.kL2(this.configureBarGrid()),this.barChart.addPlugin(new e.koE),this.barChart.addPlugin(this.labelPlugin),this.barChart.getEventBus().getStream(e.C1c).subscribe(this.handleDataPointsInteraction),this.barChart.getEventBus().getStream(e.hkV).subscribe(this.handleInteractionLabelUpdates),this.barChart.getEventBus().getStream(e.CCM).subscribe(this.handleMouseActive);const t=(0,e.Q6e)({},this.colorProvider);t.data.cssClass=this.cssClassAccessor;const a=(0,e.CQI)();a.x=new e.lTH((0,D.duration)(5,"minutes"),this.xScaleId),t.data.thickness=this.barThickness(a);const m={highlightStrategy:new e.Pkp("x",1,this.selectedDataPointIdxFn),cursor:"pointer"};this.renderer=new e.Z7w(m),this.barChart.update(function U(){return[{id:"series-1",data:[{category:s()(n,i).toDate(),value:66},{category:s()(n,i).add(5,"minutes").toDate(),value:14},{category:s()(n,i).add(10,"minutes").toDate(),value:25},{category:s()(n,i).add(15,"minutes").toDate(),value:55},{category:s()(n,i).add(20,"minutes").toDate(),value:33},{category:s()(n,i).add(25,"minutes").toDate(),value:5}]},{id:"selection-box",data:[{category:s()(n,i).toDate(),value:100},{category:s()(n,i).add(5,"minutes").toDate(),value:100},{category:s()(n,i).add(10,"minutes").toDate(),value:100},{category:s()(n,i).add(15,"minutes").toDate(),value:100},{category:s()(n,i).add(20,"minutes").toDate(),value:100},{category:s()(n,i).add(25,"minutes").toDate(),value:100}]}]}().map(u=>({...u,accessors:t,renderer:this.renderer,scales:a})))}setUpStatusChart(){this.statusChart=new e.kL2(this.configureStatusGrid()),this.statusChart.addPlugin(new e.koE);const t=new e.jS7;t.fixDomain(e.s1E.STATUS_DOMAIN);const a=new e.lTH((0,D.duration)(5,"minutes"),this.xScaleId);a.fixDomain([s()(n,i).toDate(),s()(n,i).add(25,"minutes").toDate()]);const m={x:a,y:t},u=(0,e.s_I)(new e.oki(function w(){return{[c.Up]:e.Sj$[8],[c.Warning]:e.Sj$[4],[c.Critical]:e.Sj$[2]}}()));u.data.thickness=h=>h.status===c.Up?e.Z7w.THIN:e.Z7w.THICK,u.data.cssClass=this.cssClassAccessor,this.statusChart.update(function I(){return[{id:"series-1",name:"Series 1",data:[{status:c.Up,start:s()(n,i).toDate(),end:s()(n,i).toDate()},{status:c.Warning,start:s()(n,i).add(5,"minutes").toDate(),end:s()(n,i).add(5,"minutes").toDate()},{status:c.Critical,start:s()(n,i).add(10,"minutes").toDate(),end:s()(n,i).add(10,"minutes").toDate()},{status:c.Up,start:s()(n,i).add(15,"minutes").toDate(),end:s()(n,i).add(15,"minutes").toDate()},{status:c.Critical,start:s()(n,i).add(20,"minutes").toDate(),end:s()(n,i).add(20,"minutes").toDate()},{status:c.Up,start:s()(n,i).add(25,"minutes").toDate(),end:s()(n,i).add(25,"minutes").toDate()}]}]}().map(h=>({...h,accessors:u,renderer:this.renderer,scales:m})))}configureBarGrid(){const t=new e.TVc;return t.axis.left.visible=!1,t.axis.left.gridTicks=!1,t.axis.bottom.fit=!1,t.borders.top=new e.gyj,t.cursor="pointer",t.dimension.padding.top=0,t.dimension.margin.right=t.dimension.margin.left,new e.Be5(t)}configureStatusGrid(){const t=new e.mEc;return t.axis.bottom.visible=!1,t.cursor="pointer",t.dimension.margin.bottom=0,t.dimension.margin.right=t.dimension.margin.left,t.borders.bottom.visible=!1,new e.Be5(t)}redrawCharts(){this.barChart.update(this.barChart.getDataManager().chartSeriesSet),this.statusChart.update(this.statusChart.getDataManager().chartSeriesSet)}barThickness(t){return(a,m,u,h)=>{let g;const L=(0,e.OQi)(t.x,h.accessors.data?.startX?.(a,m,h.data,h),0),B=(0,e.OQi)(t.x,h.accessors.data?.endX?.(a,m,h.data,h),1);return g=Math.abs(L-B),g-="selection-box"===h.id?2:6,g=Math.max(g,e.Z7w.MIN_BAR_THICKNESS),g}}calculateInteractionLabelPosition(t){const a=t.dataPoints[Object.keys(t.dataPoints)[0]],m=[a.dataSeries.scales.x],u=[a.dataSeries.scales.y];if(!a.position||v()(a.position.width)||v()(a.position.height))throw new Error("Can't calculate x and y values");return e.tIi.getXYValues(m,u,a.position.x+a.position.width/2,a.position.y+a.position.height/2)}}return(0,r.Z)(l,"\u0275fac",function(t){return new(t||l)}),(0,r.Z)(l,"\u0275cmp",o.Xpm({type:l,selectors:[["ng-component"]],decls:13,vars:3,consts:[["filenamePrefix","data-point-selection-prototype","exampleTitle","Data Point Selection Prototype"],["type","critical",3,"allowDismiss"],["nuiChartCollectionId","collection",1,"d-flex","chart",3,"chart"],["type","button","nui-button","",3,"click"]],template:function(t,a){1&t&&(o.TgZ(0,"nui-example-wrapper",0)(1,"nui-message",1)(2,"strong"),o._uU(3,"Note:"),o.qZA(),o._uU(4," This is only a prototype, so its implementation is unpolished. Please use discretion when copying the code as there are likely solutions more concise and/or elegant than those presented here. "),o.TgZ(5,"strong"),o._uU(6,"For assistance, please contact Blake Simmon or Lukas Holcik."),o.qZA()(),o._UZ(7,"hr")(8,"nui-chart",2)(9,"nui-chart",2)(10,"hr"),o.TgZ(11,"button",3),o.NdJ("click",function(){return a.onReset()}),o._uU(12,"Reset"),o.qZA()()),2&t&&(o.xp6(1),o.Q6J("allowDismiss",!1),o.xp6(7),o.Q6J("chart",a.statusChart),o.xp6(1),o.Q6J("chart",a.barChart))},dependencies:[p.r0F,p.hD2,p.qqZ,Z.x,T.V],styles:[".selected{stroke:#52d9e3!important}.chart{max-width:800px}\n"],encapsulation:2})),l})(),data:{srlc:{hideIndicator:!0}}}];let k=(()=>{class l{}return(0,r.Z)(l,"\u0275fac",function(t){return new(t||l)}),(0,r.Z)(l,"\u0275mod",o.oAB({type:l})),(0,r.Z)(l,"\u0275inj",o.cJS({imports:[P.l,p.Az_,p.vvu,p.gkT,e.$y4,p.Ts3,b.Bz.forChild(E)]})),l})()}}]);