"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[795],{41795:(j,v,l)=>{l.r(v),l.d(v,{ChartStatusExampleModule:()=>F});var C=l(53737),O=l(76697),w=l(75148),e=l(48620),P=l(57378),M=l(90361),T=l.n(M),Z=l(15439),u=l.n(Z),t=l(5e3),y=l(42210),p=(()=>{return(a=p||(p={})).Up="up",a.Warning="warning",a.Critical="critical",p;var a})();let D=(()=>{class a{constructor(n){this.iconService=n,this.chartThreshold=new e.kL2(new e.Be5(new e.mEc)),this.chartBand=new e.kL2(new e.Be5(new e.mEc));const o=s=>new e.FUO(this.iconService.getStatusIcon(s));this.customMarkers=new e.oki({[p.Up]:o(p.Up),[p.Warning]:o(p.Warning),[p.Critical]:o(p.Critical)})}ngAfterViewInit(){this.chartThreshold.updateDimensions(),this.chartBand.updateDimensions();const n=new e.jS7;n.fixDomain(e.s1E.STATUS_DOMAIN);const o=new e.lTH(u().duration(100,"hours"));o.fixDomain([u()().toDate(),u()().add(1e3,"hours").toDate()]);const s=new e.FBd;s.formatters.labelFormatter=c=>u()(c).format("LL"),this.thresholdScales={y:n,x:s},this.bandScales={y:n,x:o};const r=new e.Z7w,d=(0,e.s_I)(new e.oki(function E(){return{[p.Up]:e.Sj$[9],[p.Warning]:e.Sj$[5],[p.Critical]:e.Sj$[3]}}()));d.data.thickness=c=>c.status===p.Up?e.Z7w.THIN:e.Z7w.THICK;const m=b({numberOfSeries:10,isRandom:!0}).map(c=>Object.assign(Object.assign({},c),{accessors:d,renderer:r,scales:this.thresholdScales})),h=b({numberOfSeries:1,isRandom:!1}).map(c=>Object.assign(Object.assign({},c),{accessors:d,renderer:r,scales:this.thresholdScales}));this.chartThreshold.update(m),this.chartThreshold.setSeriesStates(m.map(c=>({seriesId:c.id,state:e.nTW.deemphasized}))),this.chartBand.update(h)}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(w.C6t))},a.\u0275cmp=t.Xpm({type:a,selectors:[["nui-status-chart-test-example"]],decls:8,vars:2,consts:[[1,"nui-text-page"],[1,"d-flex","flex-column"],[1,"p-2",3,"chart"]],template:function(n,o){1&n&&(t.TgZ(0,"p",0),t._uU(1,"Threshold section example"),t.qZA(),t.TgZ(2,"div",1),t._UZ(3,"nui-chart",2),t.qZA(),t.TgZ(4,"p",0),t._uU(5,"Band (Band'ish) scales on both scales"),t.qZA(),t.TgZ(6,"div",1),t._UZ(7,"nui-chart",2),t.qZA()),2&n&&(t.xp6(3),t.Q6J("chart",o.chartThreshold),t.xp6(4),t.Q6J("chart",o.chartBand))},directives:[y.x],encapsulation:2}),a})();function b(a={numberOfSeries:1,isRandom:!0}){const i=s=>u()().add({hours:s}).toDate();return T()(a.numberOfSeries).map((s=a.isRandom,()=>{let r=0;const d=[];for(;r<1e3;){let m=r+(s?100*Math.random():100);m>=1e3&&(m=1e3);const h=Math.random();d.push({start:r,end:m,status:h>.5?p.Up:h>.2?p.Warning:p.Critical}),r=m}return d})).map((s,r)=>({id:"series-"+r,name:"Series "+r,data:s.map(d=>({value:d.end-d.start,status:d.status,start:i(d.start),end:i(d.end)}))}));var s}let z=(()=>{class a{constructor(){this.palette=new e.syg(new e.oki({connect:e.cpE[0],dns:e.cpE[1],send:e.cpE[2],ttfb:e.cpE[3],cdownload:e.cpE[4]})),this.gridChart=new e.kL2(new e.Be5(new e.U$N)),this.listItems=[{category:"Category 1",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{category:"Category 2",data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{category:"Category 3",data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{category:"Category 4",data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}]}ngAfterViewInit(){const n=new e.jS7;n.padding(.5);const o=new e.f$s;this.scales={y:n,x:o},this.scales.x.formatters.tick=h=>`${Number(h/1e3).toFixed(1)}s`;const s=new e.Z7w({highlightStrategy:new e.Pkp("x")}),r=new e.HVr;r.data.color=h=>this.palette.standardColors.get(h.type);const d=[],m=[];this.listItems.forEach((h,c)=>{d.push(h.category),m.push({id:`series-${c}`,name:`Series ${c}`,data:h.data.map(g=>({value:g.end-g.start,category:h.category,type:g.type,__bar:{start:g.start,end:g.end}})),accessors:r,scales:this.scales,renderer:s})}),n.fixDomain(d.reverse()),this.gridChart.update(m)}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["nui-chart-waterfall-simple"]],decls:2,vars:1,consts:[[1,"chart"],[1,"d-flex",3,"chart"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"nui-chart",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("chart",o.gridChart))},directives:[y.x],encapsulation:2}),a})();var B=l(47429),x=l(91314),S=l(69808);const k=["templatePortalGrid"],W=["gridChartPlaceholder"];function I(a,i){1&a&&t._UZ(0,"div",9,10)}function _(a,i){if(1&a&&(t.TgZ(0,"div",3),t._UZ(1,"nui-icon",4),t.TgZ(2,"div",5)(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"div",6),t.YNc(6,I,2,0,"div",7),t._UZ(7,"nui-chart",8),t.qZA()()),2&a){const n=i.$implicit,o=i.first;t.xp6(1),t.s9C("icon",n.icon),t.xp6(1),t.Udp("width",200,"px"),t.xp6(2),t.Oqu(n.url),t.xp6(2),t.Q6J("ngIf",o),t.xp6(1),t.Q6J("chart",n.chart)}}function U(a,i){if(1&a&&t._UZ(0,"nui-chart",8),2&a){const n=t.oxw();t.Q6J("chart",n.gridChart)}}const A=[{path:"",component:D},{path:"waterfall",component:(()=>{class a{constructor(n,o,s,r){this.overlay=n,this.overlayPositionBuilder=o,this._viewContainerRef=s,this.scrollStrategyOptions=r,this.palette=new e.syg(new e.oki({connect:e.cpE[0],dns:e.cpE[1],send:e.cpE[2],ttfb:e.cpE[3],cdownload:e.cpE[4]})),this.gridChart=new e.kL2(new e.Be5),this.listItems=[{url:"http://www.google.com",size:924,icon:"xml-file",chart:new e.kL2(new e.Be5(new e.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:178}]},{url:"http://www2.google.com",size:924,icon:"xml-file",chart:new e.kL2(new e.Be5(new e.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:0,end:22},{type:"dns",start:22,end:39},{type:"send",start:39,end:59},{type:"ttfb",start:59,end:109},{type:"cdownload",start:109,end:788}]},{url:"http://www.google.com/cat.png",size:3333,icon:"image",chart:new e.kL2(new e.Be5(new e.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:178,end:222},{type:"dns",start:222,end:239},{type:"send",start:239,end:259},{type:"ttfb",start:259,end:309},{type:"cdownload",start:309,end:578}]},{url:"http://www.google.com/revenge.png",size:3333,icon:"image",chart:new e.kL2(new e.Be5(new e.mEc({showBottomAxis:!1}))),data:[{type:"connect",start:578,end:590},{type:"dns",start:590,end:799},{type:"send",start:799,end:888},{type:"ttfb",start:888,end:900},{type:"cdownload",start:900,end:990}]}]}ngOnInit(){this.gridChart.addPlugin(new e.Rbc),this.gridChart.getEventBus().getStream(e.bdF).subscribe(n=>{const o=n.data;this.listItems.forEach(s=>{this.scales.x.fixDomain(o[this.scales.x.id]),s.chart.updateDimensions()})})}ngAfterViewInit(){this.templatePortal=new B.UE(this.templatePortalGrid,this._viewContainerRef),this.positionStrategy=this.overlayPositionBuilder.flexibleConnectedTo(this.gridChartPlaceholder).withPositions([{overlayX:"start",overlayY:"top",originX:"start",originY:"top"}]).withFlexibleDimensions(!0).withPush(!0);const o=this.overlay.create({positionStrategy:this.positionStrategy,scrollStrategy:this.scrollStrategyOptions.close()}),s=new e.jS7,r=new e.f$s;r.fixDomain([0,1e3]),s.fixDomain(["cat1"]),this.scales={y:s,x:r},this.scales.x.formatters.tick=g=>`${Number(g/1e3).toFixed(1)}s`;const d=new e.Z7w,m=new e.HVr;m.data.color=g=>this.palette.standardColors.get(g.type);let h=0;this.listItems.forEach(g=>{const L=[{id:"series-1",name:"Series 1",data:g.data.map(f=>({value:f.end-f.start,category:"cat1",type:f.type,__bar:{start:f.start,end:f.end}})),accessors:m,scales:this.scales,renderer:d}];g.chart.update(L),g.chart.getEventBus().getStream(e.Rj$).subscribe(console.log),g.chart.getEventBus().getStream(e.q7O).subscribe(console.log),h=g.chart.getGrid().config().dimension.width()});const c=this.gridChart.getGrid().config();c.dimension.height(32*this.listItems.length),c.dimension.width(h),c.dimension.autoHeight=!1,c.axis.left.visible=!1,c.axis.left.gridTicks=!1,c.axis.bottom.gridTicks=!0,this.gridChart.update([{id:"i am grid",name:"i am grid",data:[],accessors:new e.bbc,scales:this.scales,renderer:new e.XqW}]),this.gridChart.updateDimensions(),o.attach(this.templatePortal)}drop(n){(0,C.bA)(this.listItems,n.previousIndex,n.currentIndex)}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(x.aV),t.Y36(x.wJ),t.Y36(t.s_b),t.Y36(x.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["nui-chart-waterfall-test"]],viewQuery:function(n,o){if(1&n&&(t.Gf(k,5),t.Gf(W,5)),2&n){let s;t.iGM(s=t.CRH())&&(o.templatePortalGrid=s.first),t.iGM(s=t.CRH())&&(o.gridChartPlaceholder=s.first)}},decls:5,vars:1,consts:[["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","d-flex flex-row align-items-center waterfall-chart-list-item","cdkDrag","",4,"ngFor","ngForOf"],["templatePortalGrid",""],["cdkDrag","",1,"d-flex","flex-row","align-items-center","waterfall-chart-list-item"],[1,"p-2",3,"icon"],[1,"p-2",2,"overflow","hidden"],[1,"d-flex"],["class","d-flex h-100",4,"ngIf"],[1,"d-flex",3,"chart"],[1,"d-flex","h-100"],["gridChartPlaceholder",""]],template:function(n,o){1&n&&(t.TgZ(0,"div")(1,"div",0),t.NdJ("cdkDropListDropped",function(r){return o.drop(r)}),t.YNc(2,_,8,6,"div",1),t.qZA()(),t.YNc(3,U,1,1,"ng-template",null,2,t.W1O)),2&n&&(t.xp6(2),t.Q6J("ngForOf",o.listItems))},directives:[C.Wj,S.sg,C.Zt,w.oJW,S.O5,y.x],styles:['.nui-dnd-hover-state[_ngcontent-%COMP%]{background:#f2f2f2}.nui-dnd-raised-state[_ngcontent-%COMP%]{z-index:1;box-sizing:border-box;box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-preview[_ngcontent-%COMP%]{border:1px #d9d9d9 solid;background:#f2f2f2;z-index:1;box-sizing:border-box;box-shadow:0 2px 10px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}.nui-dnd-dropzone.nui-dnd-dropzone--active[_ngcontent-%COMP%]{border:4px dashed #999!important}.nui-dnd-dropzone.nui-dnd-dropzone--drop-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #00c4d2!important;background-color:#00c4d233}.nui-dnd-dropzone.nui-dnd-dropzone--drop-not-allowed[_ngcontent-%COMP%]{cursor:move;border:4px solid #dd2c00!important;background-color:#dd2c0033}.nui-dnd-dropzone[_ngcontent-%COMP%]   .centered-overlay[_ngcontent-%COMP%], .nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.nui-dnd-dropzone[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{border-radius:50%;content:"";display:block;height:40px;width:40px;z-index:-1}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-permanent[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{fill:#111}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#00c4d2}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{clip-path:circle(5px);fill:#fff}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]:before{background-color:#dd2c00}.nui-dnd-dropzone[_ngcontent-%COMP%]   .drop-circle-not-allowed[_ngcontent-%COMP%]   .nui-icon-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{clip-path:circle(5px);fill:#fff}.waterfall-chart-list-item[_ngcontent-%COMP%]:hover{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.waterfall-chart-list-item[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-content,#fff)}']}),a})()},{path:"waterfall-simple",component:z}];let F=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[C._t,w.Ts3,P.l,e.$y4,O.Bz.forChild(A)]]}),a})()}}]);