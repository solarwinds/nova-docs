import{a as G,j as H}from"./chunk-XIF3MCYI.js";import{a as V}from"./chunk-DSSERSRF.js";import{a as B}from"./chunk-NH6CGJVO.js";import{A as L,Ja as F,c as z,ea as W,ha as _,ia as K,ka as U}from"./chunk-JTZX6I73.js";import{Yc as j,pc as N,xe as D}from"./chunk-DKNPFPFG.js";import{f as k,z as s}from"./chunk-TBX5YZGF.js";import{$b as E,Aa as v,Ha as P,Nb as w,Pb as l,Ra as p,Sa as c,Vb as a,Wb as n,Zc as O,ca as y,ec as M,i as b,ic as x,jc as d,tc as A,va as S,wb as g,wc as T,xb as u,xc as h,yc as I}from"./chunk-FGVILFLG.js";import{i as C}from"./chunk-T555DFTC.js";function J(i,X){if(i&1){let e=E();a(0,"button",6),x("click",function(){p(e);let r=d();return c(r.reInitializeDashboard())}),A(1," Restore Widget "),n()}}function Q(i,X){if(i&1){let e=E();a(0,"nui-dashboard",7),I("dashboardChange",function(r){p(e);let o=d();return h(o.dashboard,r)||(o.dashboard=r),c(r)})("gridsterConfigChange",function(r){p(e);let o=d();return h(o.gridsterConfig,r)||(o.gridsterConfig=r),c(r)}),n()}if(i&2){let e=d();T("dashboard",e.dashboard)("gridsterConfig",e.gridsterConfig),l("editMode",e.editMode)}}var f=(()=>{class i extends D{static{this.providerId="AverageRatingKpiDataSource"}constructor(e){super(),this.http=e,this.busy=new b(!1)}getFilteredData(){return C(this,null,function*(){return this.busy.next(!0),new Promise(e=>{this.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(y(()=>this.busy.next(!1))).subscribe({next:t=>{e({result:{value:t.volumeInfo.averageRating}})},error:t=>{e({result:null,error:{type:t.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(t){return new(t||i)(v(s))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac})}}return i})(),R=(()=>{class i extends D{static{this.providerId="RatingsCountKpiDataSource"}constructor(e){super(),this.http=e,this.busy=new b(!1)}getFilteredData(){return C(this,null,function*(){return this.busy.next(!0),new Promise(e=>{this.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(y(()=>this.busy.next(!1))).subscribe({next:t=>{e({result:{value:t.volumeInfo.ratingsCount}})},error:t=>{e({result:null,error:{type:t.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(t){return new(t||i)(v(s))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac})}}return i})(),ge=(()=>{class i{constructor(e,t,r){this.widgetTypesService=e,this.providerRegistry=t,this.changeDetectorRef=r,this.gridsterConfig={},this.editMode=!1}ngOnInit(){let e=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(e,"configurator",K.DataSourceProviders,[f.providerId,R.providerId]),this.providerRegistry.setProviders({[f.providerId]:{provide:W,useClass:f,deps:[s]},[R.providerId]:{provide:W,useClass:R,deps:[s]}}),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){let e=Z,t={[e.id]:this.widgetTypesService.mergeWithWidgetType(e)},r={[e.id]:{cols:4,rows:6,y:0,x:0}};this.dashboard={positions:r,widgets:t}}static{this.\u0275fac=function(t){return new(t||i)(u(V),u(F),u(O))}}static{this.\u0275cmp=P({type:i,selectors:[["widget-editor-setup"]],decls:6,vars:3,consts:()=>{let e;return e=$localize`:␟5fa31edac506213950b479159e840b300d749592␟3766035158759769347: Edit Mode `,[e,[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"valueChange","value"],["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboardChange","gridsterConfigChange","dashboard","gridsterConfig","editMode"]]},template:function(t,r){t&1&&(a(0,"div",1)(1,"nui-switch",2),I("valueChange",function(m){return h(r.editMode,m)||(r.editMode=m),m}),M(2,0),n(),w(3,J,2,0,"button",3),n(),a(4,"div",4),w(5,Q,1,3,"nui-dashboard",5),n()),t&2&&(g(),T("value",r.editMode),g(2),l("ngIf",!(r.dashboard!=null&&r.dashboard.widgets.widget1)),g(2),l("ngIf",r.dashboard))},dependencies:[k,G,H,j,N],styles:[".dashboard[_ngcontent-%COMP%]{height:800px}"]})}}return i})(),Z={id:"widget1",type:"kpi",pizzagna:{[U.Configuration]:{[z]:{providers:{[_.Refresher]:{properties:{interval:60*10,enabled:!0}}}},header:{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}},tiles:{properties:{nodes:["kpi1"]}},kpi1:{id:"kpi1",componentType:B.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating"}},providers:{[_.DataSource]:{providerId:f.providerId},[_.Adapter]:{providerId:L,properties:{componentId:"kpi1",propertyPath:"widgetData"}}}}}}};export{f as a,R as b,ge as c};
