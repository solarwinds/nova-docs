import{a as j,j as X}from"./chunk-XIF3MCYI.js";import{a as V}from"./chunk-DSSERSRF.js";import{Ja as G,ea as N,ha as O,ia as z}from"./chunk-JTZX6I73.js";import{Yc as L,kc as K,pc as R,xe as F}from"./chunk-DKNPFPFG.js";import{f as P}from"./chunk-TBX5YZGF.js";import{$b as T,E as S,F as W,Ha as D,Nb as C,Pb as u,Ra as c,Sa as p,Vb as s,Wb as d,Zc as A,ec as x,i as v,ic as M,jc as l,pa as I,tc as B,wb as g,wc as h,xb as m,xc as b,yc as y,z as E}from"./chunk-FGVILFLG.js";import{g as k,i as f}from"./chunk-T555DFTC.js";var $=k(K());function U(r,w){if(r&1){let e=T();s(0,"button",6),M("click",function(){c(e);let t=l();return p(t.reInitializeDashboard())}),B(1," Restore Widget "),d()}}function Y(r,w){if(r&1){let e=T();s(0,"nui-dashboard",7),y("dashboardChange",function(t){c(e);let a=l();return b(a.dashboard,t)||(a.dashboard=t),p(t)})("gridsterConfigChange",function(t){c(e);let a=l();return b(a.gridsterConfig,t)||(a.gridsterConfig=t),p(t)}),d()}if(r&2){let e=l();h("dashboard",e.dashboard),u("editMode",e.editMode),h("gridsterConfig",e.gridsterConfig)}}var q="https://api.punkapi.com/v2/beers",_=(()=>{class r extends F{constructor(){super(...arguments),this.cache=[],this.busy=new v(!1),this.dataFields=[{id:"id",label:"No",dataType:"number",sortable:!0},{id:"name",label:"Name",dataType:"string",sortable:!0},{id:"tagline",label:"Tagline",dataType:"string",sortable:!0},{id:"first_brewed",label:"First Brewed",dataType:"string",sortable:!0},{id:"description",label:"Description",dataType:"string",sortable:!1},{id:"brewers_tips",label:"Brewer's Tips",dataType:"string",sortable:!1}]}static{this.providerId="BeerDataSource"}getFilteredData(e){return f(this,null,function*(){let i=e.virtualScroll?.value?.start??0,t=e.virtualScroll?.value?.end??0;return i===0&&(this.cache=[]),S(E(this.fetch(i,t)).pipe(I(a=>{a&&(this.cache=this.sortData(this.cache.concat(a.brewInfo),e),this.dataSubject.next(this.cache))}),W(()=>({repeat:{itemsSource:this.cache},dataFields:this.dataFields}))))})}fetch(e,i){return f(this,null,function*(){let t=i-e,a=i/t||0,o=yield(yield fetch(`${q}/?page=${a}&per_page=${t}`)).json();if(Array.isArray(o))return{brewInfo:o.map(n=>({id:n.id,name:n.name,tagline:n.tagline,first_brewed:n.first_brewed,description:n.description,brewers_tips:n.brewers_tips})),total:o.length}})}sortData(e,i){return(0,$.default)(e,i.sorter?.value?.sortBy,i.sorter?.value?.direction)}}return r})(),pe=(()=>{class r{constructor(e,i,t){this.widgetTypesService=e,this.providerRegistry=i,this.changeDetectorRef=t,this.gridsterConfig={},this.editMode=!1}ngOnInit(){let e=this.widgetTypesService.getWidgetType("table",1);this.widgetTypesService.setNode(e,"configurator",z.DataSourceProviders,[_.providerId]),this.providerRegistry.setProviders({[_.providerId]:{provide:N,useClass:_,deps:[]}}),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){let e=J,i={[e.id]:this.widgetTypesService.mergeWithWidgetType(e)},t={[e.id]:{cols:12,rows:6,y:0,x:0}};this.dashboard={positions:t,widgets:i}}static{this.\u0275fac=function(i){return new(i||r)(m(V),m(G),m(A))}}static{this.\u0275cmp=D({type:r,selectors:[["table-widget-example"]],decls:6,vars:3,consts:()=>{let e;return e=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[e,[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"valueChange","value"],["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboardChange","gridsterConfigChange","dashboard","editMode","gridsterConfig"]]},template:function(i,t){i&1&&(s(0,"div",1)(1,"nui-switch",2),y("valueChange",function(o){return b(t.editMode,o)||(t.editMode=o),o}),x(2,0),d(),C(3,U,2,0,"button",3),d(),s(4,"div",4),C(5,Y,1,3,"nui-dashboard",5),d()),i&2&&(g(),h("value",t.editMode),g(2),u("ngIf",!(t.dashboard!=null&&t.dashboard.widgets.tableWidgetId)),g(2),u("ngIf",t.dashboard))},dependencies:[R,P,L,j,X],styles:[".dashboard[_ngcontent-%COMP%]{height:400px}"]})}}return r})(),H=[{id:"column1",label:$localize`Beer Name`,isActive:!0,width:185,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"name"}}}},{id:"column2",label:$localize`Tagline`,isActive:!0,width:250,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"tagline"}}}},{id:"column3",label:$localize`First Brewed`,isActive:!0,width:100,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"first_brewed"}}}},{id:"column4",label:$localize`Description`,isActive:!0,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"description"}}}}],J={id:"tableWidgetId",type:"table",pizzagna:{configuration:{header:{properties:{title:"Stupendous Suds",subtitle:"Try These Brilliant Brews"}},table:{providers:{[O.DataSource]:{providerId:_.providerId}},properties:{configuration:{columns:H,sortable:!0,sorterConfiguration:{descendantSorting:!1,sortBy:""},hasVirtualScroll:!0}}}}}};export{q as a,_ as b,pe as c,J as d};
