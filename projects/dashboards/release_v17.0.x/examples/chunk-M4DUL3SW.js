import{a as pe,j as ge}from"./chunk-32WL3UDE.js";import{a as de}from"./chunk-V2MEVMRQ.js";import{a as Oe}from"./chunk-QWK7WHL2.js";import{d as le,e as Te,f as ue,g as Se}from"./chunk-AMXUNQ4T.js";import{A as ae,Ja as Ce,Ka as ce,c as se,ea as D,ha as I,ia as x,ka as _e}from"./chunk-USCLQP7P.js";import{Ba as te,Jd as re,Yc as oe,ma as J,oa as Q,pa as q,pc as ie,sd as ne,va as Y,xe as w,ya as ee}from"./chunk-NZZJTGI5.js";import{f as G,l as H,z as O}from"./chunk-NEOTMEUH.js";import{$c as F,Aa as U,Ac as L,F as h,G as W,Ha as y,Jc as p,Kc as T,Lc as V,Pb as g,Ra as B,Rb as a,Sa as u,Ta as S,Xb as s,Yb as r,Zb as m,ab as K,bc as v,ca as A,gc as f,i as R,kc as Z,la as z,lc as c,va as b,vc as j,yb as _,yc as P,zb as d,zc as E}from"./chunk-NNMBFNDY.js";import{i as M}from"./chunk-T555DFTC.js";function Ee(o,$){if(o&1&&(s(0,"div",12)(1,"nui-form-field",13),m(2,"nui-textbox",14),r()()),o&2){let e=c();_(),a("control",e.form.get("units"))}}function Ie(o,$){if(o&1){let e=v();s(0,"button",6),Z("click",function(){u(e);let i=c();return S(i.reInitializeDashboard())}),j(1," Restore Widget "),r()}}function Ne(o,$){if(o&1){let e=v();s(0,"nui-dashboard",7),L("dashboardChange",function(i){u(e);let n=c();return E(n.dashboard,i)||(n.dashboard=i),S(i)})("gridsterConfigChange",function(i){u(e);let n=c();return E(n.gridsterConfig,i)||(n.gridsterConfig=i),S(i)}),r()}if(o&2){let e=c();P("dashboard",e.dashboard)("gridsterConfig",e.gridsterConfig),a("editMode",e.editMode)}}var fe=".dashboard[_ngcontent-%COMP%]{height:800px}.kpi-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-description-configuration__custom-content-container[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-dark,#111);border-radius:3px}.kpi-description-configuration__custom-content-header[_ngcontent-%COMP%], .kpi-description-configuration__custom-content[_ngcontent-%COMP%]{color:var(--nui-color-text-light,#fff)}",me=(()=>{class o{static{this.lateLoadKey="CustomKpiDescriptionConfigurationComponent"}constructor(e,t){this.changeDetector=e,this.formBuilder=t,this.label="",this.units="",this.formReady=new K}ngOnInit(){this.form=this.formBuilder.group({label:[this.label,[J.required]]}),this.configurableUnits&&this.form.addControl("units",this.formBuilder.control(this.units));let e=this.form.get("label"),t=e?.valueChanges.pipe(z(e?.value));this.subtitle$=W([t?.pipe(h(i=>i||$localize`no label`))]).pipe(h(i=>i.join(", "))),this.formReady.emit(this.form)}ngOnChanges(e){e.label&&this.form.patchValue({label:e.label.currentValue}),e.units&&this.form.patchValue({units:e.units.currentValue})}static{this.\u0275fac=function(t){return new(t||o)(d(F),d(te))}}static{this.\u0275cmp=y({type:o,selectors:[["custom-kpi-description-configuration"]],inputs:{componentId:"componentId",configurableUnits:"configurableUnits",label:"label",units:"units"},outputs:{formReady:"formReady"},features:[B],decls:17,vars:17,consts:()=>{let e;e=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`;let t;t=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`;let i;i=$localize`:␟4e94d0a3c7c08c9c5ddc4a0011e528b0fcbd355d␟6528105433405779207: Custom Content `;let n;n=$localize`:␟1a0285a47862b78b82cc3a7330db968210e50cc0␟6053005409778889415: The default version of this configurator section displays a background color selector here. `;let C;C=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`;let k;return k=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,[i,n,[3,"formGroup","state"],["headerTitle","Description",3,"subtitle","headerIcon"],[1,"kpi-description-configuration__accordion-content"],[1,"mb-4"],["caption",e,1,"form-group",3,"control"],["formControlName","label","placeholder",t],[1,"my-4","pt-1","px-3","pb-3","kpi-description-configuration__custom-content-container"],[1,"kpi-description-configuration__custom-content-header"],[1,"kpi-description-configuration__custom-content"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",C,1,"form-group",3,"control"],["formControlName","units","placeholder",k]]},template:function(t,i){t&1&&(s(0,"nui-widget-editor-accordion",2),p(1,"nuiWidgetEditorAccordionFormState"),p(2,"async"),m(3,"nui-widget-editor-accordion-header",3),p(4,"async"),p(5,"nuiFormHeaderIconPipe"),p(6,"async"),s(7,"div",4)(8,"div",5)(9,"nui-form-field",6),m(10,"nui-textbox",7),r()(),s(11,"div",8)(12,"h5",9),f(13,0),r(),s(14,"div",10),f(15,1),r()(),g(16,Ee,3,1,"div",11),r()()),t&2&&(a("formGroup",i.form)("state",T(2,8,T(1,6,i.form))),_(3),a("subtitle",T(4,10,i.subtitle$))("headerIcon",T(6,15,V(5,12,i.form,"widget_list"))),_(6),a("control",i.form.get("label")),_(7),a("ngIf",i.configurableUnits))},dependencies:[G,Q,q,Y,ee,Te,le,re,ne,H,ue,Se],styles:[fe],changeDetection:0})}}return o})(),N=(()=>{class o extends w{static{this.providerId="AverageRatingKpiDataSource"}constructor(e){super(),this.http=e,this.busy=new R(!1)}getFilteredData(){return M(this,null,function*(){return this.busy.next(!0),new Promise(e=>{this.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(A(()=>this.busy.next(!1))).subscribe({next:t=>{e({result:{value:t.volumeInfo.averageRating}})},error:t=>{e({result:null,error:{type:t.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(t){return new(t||o)(U(O))}}static{this.\u0275prov=b({token:o,factory:o.\u0275fac})}}return o})(),X=(()=>{class o extends w{static{this.providerId="RatingsCountKpiDataSource"}constructor(e){super(),this.http=e,this.busy=new R(!1)}getFilteredData(){return M(this,null,function*(){return this.busy.next(!0),new Promise(e=>{this.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(A(()=>this.busy.next(!1))).subscribe({next:t=>{e({result:{value:t.volumeInfo.ratingsCount}})},error:t=>{e({result:null,error:{type:t.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(t){return new(t||o)(U(O))}}static{this.\u0275prov=b({token:o,factory:o.\u0275fac})}}return o})(),et=(()=>{class o{constructor(e,t,i,n){this.widgetTypesService=e,this.providerRegistry=t,this.componentRegistry=i,this.changeDetectorRef=n,this.gridsterConfig={},this.editMode=!1}ngOnInit(){let e=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(e,"configurator",x.TileDescriptionConfigComponentType,me.lateLoadKey),this.componentRegistry.registerByLateLoadKey(me),this.widgetTypesService.setNode(e,"configurator",x.DataSourceProviders,[N.providerId,X.providerId]),this.providerRegistry.setProviders({[N.providerId]:{provide:D,useClass:N,deps:[O]},[X.providerId]:{provide:D,useClass:X,deps:[O]}}),this.initializeDashboard()}initializeDashboard(){let e=Me,t={[e.id]:this.widgetTypesService.mergeWithWidgetType(e)},i={[e.id]:{cols:4,rows:6,y:0,x:0}};this.dashboard={positions:i,widgets:t}}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}static{this.\u0275fac=function(t){return new(t||o)(d(de),d(Ce),d(ce),d(F))}}static{this.\u0275cmp=y({type:o,selectors:[["custom-configurator-section-example"]],decls:6,vars:3,consts:()=>{let e;return e=$localize`:␟5fa31edac506213950b479159e840b300d749592␟3766035158759769347: Edit Mode `,[e,[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"valueChange","value"],["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboardChange","gridsterConfigChange","dashboard","gridsterConfig","editMode"]]},template:function(t,i){t&1&&(s(0,"div",1)(1,"nui-switch",2),L("valueChange",function(C){return E(i.editMode,C)||(i.editMode=C),C}),f(2,0),r(),g(3,Ie,2,0,"button",3),r(),s(4,"div",4),g(5,Ne,1,3,"nui-dashboard",5),r()),t&2&&(_(),P("value",i.editMode),_(2),a("ngIf",!(i.dashboard!=null&&i.dashboard.widgets.widget1)),_(2),a("ngIf",i.dashboard))},dependencies:[G,pe,ge,oe,ie],styles:[fe]})}}return o})(),Me={id:"widget1",type:"kpi",pizzagna:{[_e.Configuration]:{[se]:{providers:{[I.Refresher]:{properties:{interval:60*10,enabled:!0}}}},header:{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}},tiles:{properties:{nodes:["kpi1"]}},kpi1:{id:"kpi1",componentType:Oe.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating"}},providers:{[I.DataSource]:{providerId:N.providerId},[I.Adapter]:{providerId:ae,properties:{componentId:"kpi1",propertyPath:"widgetData"}}}}}}};export{me as a,N as b,X as c,et as d};
