import{a as ce,j as fe}from"./chunk-XIF3MCYI.js";import{a as se}from"./chunk-DSSERSRF.js";import{d as pe,h as Se,i as Te,j as he,k as ye,l as Ee,m as P}from"./chunk-QK5DMUAZ.js";import{a as me}from"./chunk-MWCS5XML.js";import{a as ge,c as A,e as le,f as ue,g as _e,h as Ce}from"./chunk-N7RPTMOT.js";import{D as re,Ka as de,N as ae,c,ha as _,ia as w,ka as C}from"./chunk-JTZX6I73.js";import{$c as ie,Ba as q,Jd as ne,Pc as ee,Yc as te,ma as H,md as oe,oa as j,oc as J,pa as Z,pc as Q,va as k,ya as Y}from"./chunk-DKNPFPFG.js";import{e as z,f as K,l as X}from"./chunk-TBX5YZGF.js";import{$b as v,Ha as f,Hc as g,Ic as u,Jc as $,Nb as h,Pb as n,Qa as V,Ra as S,Sa as T,Sb as F,Vb as a,Wb as d,Xb as M,Zc as I,_a as B,ec as N,ic as D,jc as l,tc as y,vc as W,wb as r,wc as R,xb as p,xc as E,yc as b}from"./chunk-FGVILFLG.js";import{a as x,b as U}from"./chunk-T555DFTC.js";function Ne(o,O){if(o&1&&(a(0,"nui-select-v2-option",11),y(1),d()),o&2){let e=O.$implicit;n("value",e.url),r(),W(" ",e.title," ")}}var G=".dashboard[_ngcontent-%COMP%]{height:800px}.custom-configurator-section__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}";function De(o,O){if(o&1){let e=v();a(0,"button",6),D("click",function(){S(e);let t=l();return T(t.reInitializeDashboard())}),y(1," Restore Widget "),d()}}function We(o,O){if(o&1){let e=v();a(0,"nui-dashboard",7),b("dashboardChange",function(t){S(e);let s=l();return E(s.dashboard,t)||(s.dashboard=t),T(t)})("gridsterConfigChange",function(t){S(e);let s=l();return E(s.gridsterConfig,t)||(s.gridsterConfig=t),T(t)}),d()}if(o&2){let e=l();R("dashboard",e.dashboard)("gridsterConfig",e.gridsterConfig),n("editMode",e.editMode)}}var L="example-custom-widget",Ie="imageSelection",Oe=(()=>{class o{static{this.lateLoadKey="CustomWidgetBodyContentComponent"}constructor(e){this.changeDetector=e,this.elementClass=""}static{this.\u0275fac=function(i){return new(i||o)(p(I))}}static{this.\u0275cmp=f({type:o,selectors:[["custom-widget-body"]],hostVars:2,hostBindings:function(i,t){i&2&&F(t.elementClass)},inputs:{elementClass:"elementClass",imageSource:"imageSource"},decls:1,vars:1,consts:[[3,"image"]],template:function(i,t){i&1&&M(0,"nui-image",0),i&2&&n("image",t.imageSource)},dependencies:[ee],styles:[G],changeDetection:0})}}return o})(),Me=(()=>{class o{static{this.lateLoadKey="CustomConfiguratorSectionComponent"}constructor(e,i,t){this.changeDetector=e,this.formBuilder=i,this.configuratorHeading=t,this.imageItems=[],this.formReady=new B}ngOnInit(){this.form=this.formBuilder.group({imageSource:[{},[H.required]]}),this.formReady.emit(this.form)}ngOnChanges(e){e.imageSource&&!e.imageSource.isFirstChange()&&e.imageSource.previousValue!==this.imageSource&&(this.imageDisplayValue=this.imageItems.find(t=>t.url===this.imageSource)?.title,this.form.get("imageSource")?.setValue(this.imageSource))}onChanged(e){this.imageDisplayValue=this.imageItems.find(i=>i.url===e)?.title}static{this.\u0275fac=function(i){return new(i||o)(p(I),p(q),p(me))}}static{this.\u0275cmp=f({type:o,selectors:[["custom-configurator-section"]],inputs:{imageItems:"imageItems",imageSource:"imageSource"},outputs:{formReady:"formReady"},features:[V],decls:17,vars:19,consts:()=>{let e;e=$localize`:␟8347841963dd5a1df3ec102405ca14d65f7543b7␟5420763949073840298:Select an image:`;let i;i=$localize`:␟0915970211b40d860d164b58f027cc2e787b3025␟2388735320732365776:No image selected`;let t;return t=$localize`:␟8c63816d9e1c10b21cfecbea440ee73e942123e5␟7562792424339554158:Image Selection`,[t,[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],[1,"nui-text-secondary",3,"title"],[1,"custom-configurator-section__accordion-content"],["caption",e,3,"control"],["formControlName","imageSource","placeholder",i,3,"valueSelected","popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]]},template:function(i,t){i&1&&(a(0,"nui-widget-editor-accordion",1),g(1,"nuiWidgetEditorAccordionFormState"),g(2,"async"),a(3,"div",2),M(4,"nui-icon",3),g(5,"nuiFormHeaderIconPipe"),g(6,"async"),a(7,"div",4)(8,"span",5),N(9,0),d(),a(10,"div",6),y(11),d()()(),a(12,"div",7)(13,"nui-form-field",8)(14,"nui-select-v2",9),g(15,"async"),D("valueSelected",function(m){return t.onChanged(m)}),h(16,Ne,2,2,"nui-select-v2-option",10),d()()()()),i&2&&(n("formGroup",t.form)("state",u(2,10,u(1,8,t.form))),r(4),n("icon",u(6,15,$(5,12,t.form,"image"))),r(6),n("title",t.imageDisplayValue),r(),W(" ",t.imageDisplayValue," "),r(2),n("control",t.form.get("imageSource")),r(),n("popupViewportMargin",u(15,17,t.configuratorHeading.height$)),r(2),n("ngForOf",t.imageItems))},dependencies:[z,j,Z,k,Y,le,ne,J,oe,ie,X,ue,_e],styles:[G],changeDetection:0})}}return o})(),tt=(()=>{class o{constructor(e,i,t){this.widgetTypesService=e,this.componentRegistry=i,this.changeDetectorRef=t,this.gridsterConfig={},this.editMode=!1}ngOnInit(){this.prepareNovaDashboards(),this.registerImageOptions(),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){let e=be,i={[e.id]:this.widgetTypesService.mergeWithWidgetType(e)},t={[e.id]:{cols:4,rows:11,y:0,x:0}};this.dashboard={positions:t,widgets:i}}prepareNovaDashboards(){this.widgetTypesService.registerWidgetType(L,1,Re),this.componentRegistry.registerByLateLoadKey(Oe),this.componentRegistry.registerByLateLoadKey(Me)}registerImageOptions(){let e=this.widgetTypesService.getWidgetType(L,1);this.widgetTypesService.setNode(e,"configurator",Ie,ve)}static{this.\u0275fac=function(i){return new(i||o)(p(se),p(de),p(I))}}static{this.\u0275cmp=f({type:o,selectors:[["custom-widget"]],decls:6,vars:3,consts:()=>{let e;return e=$localize`:␟5fa31edac506213950b479159e840b300d749592␟3766035158759769347: Edit Mode `,[e,[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"valueChange","value"],["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboardChange","gridsterConfigChange","dashboard","gridsterConfig","editMode"]]},template:function(i,t){i&1&&(a(0,"div",1)(1,"nui-switch",2),b("valueChange",function(m){return E(t.editMode,m)||(t.editMode=m),m}),N(2,0),d(),h(3,De,2,0,"button",3),d(),a(4,"div",4),h(5,We,1,3,"nui-dashboard",5),d()),i&2&&(r(),R("value",t.editMode),r(2),n("ngIf",!(t.dashboard!=null&&t.dashboard.widgets.widget1)),r(2),n("ngIf",t.dashboard))},dependencies:[K,ce,fe,te,Q],styles:[G]})}}return o})(),Re={paths:{widget:{[w.Root]:c},configurator:{[w.Root]:c,[Ie]:"imageSelection.properties.imageItems"}},widget:{[C.Structure]:U(x({[c]:{id:c,componentType:pe.lateLoadKey,providers:{[_.Refresher]:P(),[_.EventProxy]:Ee},properties:{nodes:["header","loading","body"]}},header:Se,loading:Te,body:he},ye("mainContent")),{mainContent:{id:"mainContent",componentType:Oe.lateLoadKey,properties:{elementClass:"d-flex w-100 justify-content-center"}}}),[C.Configuration]:{[c]:{id:c,providers:{[_.Refresher]:P(!1,60)}},header:{properties:{title:$localize`Empty Custom Widget`}}}},configurator:{[C.Structure]:{[c]:{id:c,componentType:ge.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","customConfig"]}},presentation:{id:"presentation",componentType:A.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:Ce.lateLoadKey,providers:{converter:{providerId:re}}},customConfig:{id:"customConfig",componentType:A.lateLoadKey,properties:{headerText:$localize`Custom Widget Configuration`,nodes:["imageSelection"]}},imageSelection:{id:"imageSelection",componentType:Me.lateLoadKey,properties:{imageItems:[]},providers:{[_.Converter]:{providerId:ae,properties:{formParts:[{previewPath:"mainContent.properties",keys:["imageSource"]}]}}}}}}},ve=[{title:"Harry Potter Book Cover",url:"https://imgc.allpostersimages.com/img/print/u-g-F8PQ9I0.jpg?w=550&h=550&p=0"},{title:"Harry Potter Movie Poster",url:"https://images-na.ssl-images-amazon.com/images/I/81gpmMdKOHL._AC_SY741_.jpg"}],be={id:"widget1",type:L,pizzagna:{[C.Configuration]:{header:{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}},mainContent:{properties:{imageSource:ve[0].url}}}}};export{Oe as a,Me as b,tt as c};
