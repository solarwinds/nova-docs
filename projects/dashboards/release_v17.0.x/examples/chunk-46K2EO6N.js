import{a as I,b}from"./chunk-IXZIADBL.js";import{a as y,b as A,c as C,d as D,e as T,f as a,g as P,h as g,i as v}from"./chunk-L2DUPZQB.js";import{a as G}from"./chunk-HYG2HKT6.js";import"./chunk-TWGF5P3J.js";import{g as h}from"./chunk-KEVDW64K.js";import{a as M,j as ve,k as fe}from"./chunk-2PYN5BKZ.js";import{a as E}from"./chunk-32FRYE2I.js";import"./chunk-HCKKPO5O.js";import"./chunk-WBVXEKR6.js";import"./chunk-CGWMOQ73.js";import"./chunk-PPP2Z2XL.js";import"./chunk-ZJPGUU3O.js";import"./chunk-4HXDNOXI.js";import"./chunk-DIKJAFIQ.js";import"./chunk-7EWDUSAE.js";import{b as f,c as m}from"./chunk-IYRXTWZX.js";import"./chunk-ZTRLVS2O.js";import"./chunk-KRZNOVPK.js";import"./chunk-4J5UDC5D.js";import"./chunk-7FOOEARW.js";import"./chunk-OZALKHRQ.js";import"./chunk-35CK72MF.js";import"./chunk-RLYB54YO.js";import"./chunk-QA3WFPNA.js";import"./chunk-QRVY5A5F.js";import"./chunk-7ELEEN5W.js";import"./chunk-AYZMMWI6.js";import"./chunk-LJERMBTK.js";import"./chunk-FBQO6WJ5.js";import"./chunk-ALWGDNZ2.js";import"./chunk-ZKE5BQF3.js";import"./chunk-RAV6TNVJ.js";import"./chunk-LTNK7SWM.js";import"./chunk-4RLLEQLT.js";import"./chunk-LEJP7E4G.js";import"./chunk-3KNFSTNZ.js";import"./chunk-RODZF2WM.js";import"./chunk-CJALCPUW.js";import"./chunk-7VAIFS2G.js";import"./chunk-KPEH2JEB.js";import"./chunk-O3MPXHYJ.js";import{Aa as c,Ja as R,Ka as ge,V as Z,b as Ce,c as d,ea as p,ha as i,ia as j,ka as l}from"./chunk-UNYFFDYX.js";import"./chunk-A2HZGK4R.js";import{Bc as ie,Ec as te,Ed as ce,Hc as oe,Ic as se,Kd as me,Ld as ue,Qc as ae,Yc as de,lc as L,nd as pe,pd as ne,yd as le}from"./chunk-3HSEZOBQ.js";import{L as re,r as ee}from"./chunk-NEOTMEUH.js";import{Aa as S,Ac as k,Bc as J,Ha as Q,Ia as V,Rb as U,Xb as O,Yb as W,gc as X,h as z,rc as Y,sc as $,tc as q,va as K,wa as H,yb as N,yc as B,zb as w,zc as _}from"./chunk-NNMBFNDY.js";import{a as Ae}from"./chunk-JISDZD7Z.js";import{g as F}from"./chunk-T555DFTC.js";var be=F(Ce());var x=(()=>{class o{constructor(t){this.toastService=t,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=(e,r)=>{let n=new z;return setTimeout(()=>{if(this.allowSubmit)e.id||(e.id=te("acme")),n.next(e);else{let s=$localize`Submit failed.`;this.toastService.error({title:s}),n.error(s)}},1e3),n.asObservable()},this.tryRemove=e=>{let r=new z;return setTimeout(()=>{if(this.allowRemoval)r.next(e);else{let n=$localize`Widget removal failed.`;this.toastService.error({title:n}),r.error(n)}},200),r.asObservable()},this.toastService.setConfig({timeOut:2e3})}static{this.\u0275fac=function(e){return new(e||o)(S(ue))}}static{this.\u0275prov=K({token:o,factory:o.\u0275fac})}}return o})();var u=F(Ae());var he={widget1:{cols:6,rows:6,y:0,x:0},"widget1-interval":{cols:6,rows:6,y:0,x:6},widget2:{cols:6,rows:6,y:6,x:0},"widget2-interval":{cols:6,rows:6,y:6,x:6},widget3:{cols:6,rows:6,y:12,x:0},"widget3-interval":{cols:6,rows:6,y:12,x:6},widget4:{cols:6,rows:6,y:18,x:0},"widget4-interval":{cols:6,rows:6,y:18,x:6},widget5:{cols:6,rows:6,y:24,x:0},"widget5-interval":{cols:6,rows:6,y:24,x:6}},Ie=[{id:"widget1",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId},[i.InteractionHandler]:{providerId:Z,properties:{url:"${data.link}"}}}},header:{properties:{title:"Line chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{interaction:"series",legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.Line}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget1-interval",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId},[i.InteractionHandler]:{providerId:Z,properties:{url:"${data.link}"}}}},header:{properties:{title:"Line chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.Line,scales:{x:{type:f.TimeInterval,properties:{interval:24*60*60}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget2",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Area chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedArea}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget2-interval",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Area chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedArea,scales:{x:{type:f.TimeInterval,properties:{interval:24*60*60}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget3",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Stacked percentage area",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedPercentageArea}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget3-interval",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Stacked percentage area",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedPercentageArea,scales:{x:{type:f.TimeInterval,properties:{interval:24*60*60}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget4",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Bar chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedBar,scales:{}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget4-interval",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Bar chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedBar,scales:{x:{type:f.TimeInterval,properties:{interval:24*60*60}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget5",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:g.providerId}}},header:{properties:{title:"Status chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StatusBar}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget5-interval",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:v.providerId}}},header:{properties:{title:"Status chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StatusBar,scales:{x:{type:f.TimeInterval,properties:{interval:24*60*60}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}}];var ye=(()=>{class o{constructor(t,e,r){this.submitHandler=t,this.providerRegistry=e,this.widgetTypesService=r,this.gridsterConfig={},this.editMode=!1,this.providerRegistry.setProviders({[I.providerId]:{provide:p,useClass:I,deps:[]},[b.providerId]:{provide:p,useClass:b,deps:[]},[y.providerId]:{provide:p,useClass:y,deps:[]},[A.providerId]:{provide:p,useClass:A,deps:[]},[C.providerId]:{provide:p,useClass:C,deps:[L]},[D.providerId]:{provide:p,useClass:D,deps:[L]},[T.providerId]:{provide:p,useClass:T,deps:[L]},[h.providerId]:{provide:p,useClass:h,deps:[ie]},[a.providerId]:{provide:p,useClass:a,deps:[]},[P.providerId]:{provide:p,useClass:P,deps:[]},[g.providerId]:{provide:p,useClass:g,deps:[]},[v.providerId]:{provide:p,useClass:v,deps:[]}})}ngOnInit(){let t=Ie.map(r=>this.widgetTypesService.mergeWithWidgetType(r)),e=(0,be.default)(t,r=>r.id);this.dashboard={positions:he,widgets:e}}static{this.\u0275fac=function(e){return new(e||o)(w(x),w(R),w(E))}}static{this.\u0275cmp=Q({type:o,selectors:[["acme-dashboard"]],viewQuery:function(e,r){if(e&1&&Y(M,7),e&2){let n;$(n=q())&&(r.dashboardComponent=n.first)}},features:[J([x])],decls:5,vars:5,consts:()=>{let t;return t=$localize`:␟5cab2718f1d3c09ccb1fca4886710430f59bf7c0␟81810662047948365: Edit mode `,[t,[1,"w-100",2,"height","800px"],[3,"dashboardChange","gridsterConfigChange","nuiWidgetEditor","dashboard","gridsterConfig","editMode"],[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"valueChange","value"]]},template:function(e,r){e&1&&(O(0,"div",1)(1,"nui-dashboard",2),k("dashboardChange",function(s){return _(r.dashboard,s)||(r.dashboard=s),s})("gridsterConfigChange",function(s){return _(r.gridsterConfig,s)||(r.gridsterConfig=s),s}),W()(),O(2,"div",3)(3,"nui-switch",4),k("valueChange",function(s){return _(r.editMode,s)||(r.editMode=s),s}),X(4,0),W()()),e&2&&(N(),U("nuiWidgetEditor",r.submitHandler),B("dashboard",r.dashboard)("gridsterConfig",r.gridsterConfig),U("editMode",r.editMode),N(2),B("value",r.editMode))},dependencies:[M,ve,de],encapsulation:2})}}return o})();var we=[{path:"",component:ye,data:{srlc:{hideIndicator:!0}}}],cr=(()=>{class o{constructor(t,e){this.widgetTypesService=t,this.componentRegistry=e,this.setupDataSourceProviders(),this.setupCustomProportionalWidgetDSConfig()}setupCustomProportionalWidgetDSConfig(){let t=this.widgetTypesService.getWidgetType("proportional",1);delete t.widget.structure[d].providers?.refresher,this.widgetTypesService.setNode(t,"configurator",j.DataSourceConfigComponentType,G.lateLoadKey),this.componentRegistry.registerByLateLoadKey(G)}setupDataSourceProviders(){this.setDataSourceProviders("table",[C.providerId,D.providerId,T.providerId,h.providerId]),this.setDataSourceProviders("kpi",[I.providerId,b.providerId]),this.setDataSourceProviders("proportional",[y.providerId,A.providerId]),this.setDataSourceProviders("timeseries",[a.providerId,P.providerId,g.providerId,v.providerId])}setDataSourceProviders(t,e){let r=this.widgetTypesService.getWidgetType(t,1);this.widgetTypesService.setNode(r,"configurator",j.DataSourceProviders,e)}static{this.\u0275fac=function(e){return new(e||o)(S(E),S(ge))}}static{this.\u0275mod=V({type:o})}static{this.\u0275inj=H({providers:[R],imports:[ee,fe,ce,se,me,ae,le,pe,ne,oe,re.forChild(we)]})}}return o})();export{cr as TimeseriesWidgetPrototypeModule};
