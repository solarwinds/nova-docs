import{a as Q}from"./chunk-LTNK7SWM.js";import{a as Re}from"./chunk-D74OXWBA.js";import{a as $e}from"./chunk-QJJE2JFL.js";import{a as Ke}from"./chunk-7WKDSLAU.js";import{a as pe}from"./chunk-HIJRDBV6.js";import{c as ot}from"./chunk-MOJBH2T7.js";import{a as qe,b as Je,c as et}from"./chunk-MWCS5XML.js";import{a as ke,c as Ce,d as je,e as Ze,f as Qe,g as Ye,h as tt}from"./chunk-N7RPTMOT.js";import{$ as Be,Aa as j,D as be,E as Ue,N as Ve,Na as Xe,W as we,c as ue,ca as He,ha as q,ka as We,ta as ze}from"./chunk-JTZX6I73.js";import{$c as z,Ba as W,J as ft,Jd as K,K as It,_c as ae,id as X,lc as ie,ma as ve,md as k,nb as Le,oa as V,oc as re,pa as w,q as gt,va as B,wa as De,xc as xe,ya as H}from"./chunk-DKNPFPFG.js";import{e as U,f as S,l as Me,q as ye}from"./chunk-TBX5YZGF.js";import{$b as M,Bc as Fe,Ha as T,Hc as E,Ib as te,Ic as v,Jc as oe,Lc as ne,Nb as m,Pb as r,Qa as R,Qb as Se,Ra as h,Sa as P,Va as Ee,Vb as l,Wb as a,Xb as b,Yb as C,Zb as g,Zc as f,_a as ee,ec as A,h as J,ic as G,jc as d,na as Z,pa as Te,pc as he,qc as Pe,rb as Ae,rc as Ge,sc as D,tc as s,uc as y,vc as O,wb as i,xb as _}from"./chunk-FGVILFLG.js";import{f as Oe,g as $}from"./chunk-T555DFTC.js";var ge=Oe((Jt,nt)=>{function Nt(t,p){for(var e,o=-1,n=t.length;++o<n;){var c=p(t[o]);c!==void 0&&(e=e===void 0?c:e+c)}return e}nt.exports=Nt});var le=Oe((eo,it)=>{var Et=It(),At=ge();function St(t,p){return t&&t.length?At(t,Et(p,2)):0}it.exports=St});var Ie=Oe((Ko,ut)=>{var Zt=ge(),Qt=gt();function Yt(t){return t&&t.length?Zt(t,Qt):0}ut.exports=Yt});var rt=$(le());var at=(()=>{class t{static{this.lateLoadKey="DonutContentPercentageFormatterComponent"}constructor(e){this.changeDetector=e,this.destroy$=new J}ngOnChanges(e){e.data&&(this.sum=(0,rt.default)(this.data,o=>o.data[0])),e.properties&&(this.currentMetricData=this.data.find(o=>o.id===this.properties?.currentMetric)?.data[0]||this.data[0].data[0]),this.getProperContentValue()}ngOnInit(){this.chartAssist.chartAssistSubject.pipe(Te(e=>this.emphasizedSeriesData=this.data.find(o=>o.id===e.payload.seriesId)),Te(()=>this.getProperContentValue()),Z(this.destroy$)).subscribe()}getProperSeriesData(){return this.emphasizedSeriesData?this.emphasizedSeriesData?.data[0]:this.currentMetricData}getProperContentValue(){this.chartContent=(this.getProperSeriesData()/this.sum*100).toFixed(2)+"%"}static{this.\u0275fac=function(o){return new(o||t)(_(f))}}static{this.\u0275cmp=T({type:t,selectors:[["ng-component"]],inputs:{data:"data",chartAssist:"chartAssist",properties:"properties"},features:[R],decls:4,vars:1,consts:[[1,"nui-text-page"]],template:function(o,n){o&1&&(C(0),l(1,"div",0)(2,"div",0),s(3),a()(),g()),o&2&&(i(3),O(" ",n.chartContent," "))},encapsulation:2})}}return t})();var pt=$(le());function Pt(t,p){if(t&1&&b(0,"nui-icon",5),t&2){let e=d();r("icon",e.config==null?null:e.config.chartDonutContentIcon)}}function Gt(t,p){if(t&1&&(l(0,"span"),s(1),E(2,"number"),a()),t&2){let e=d();i(),y(oe(2,1,e.sum,"1.0-3"))}}function Ft(t,p){if(t&1&&s(0),t&2){let e=d();y(e.convertedValue)}}function Mt(t,p){if(t&1&&(l(0,"div",6),s(1),a()),t&2){let e=d();i(),O(" ",e.config==null?null:e.config.chartDonutContentLabel," ")}}var lt=(()=>{class t{static{this.lateLoadKey="DonutContentRawFormatterComponent"}constructor(e,o){this.changeDetector=e,this.conversionThreshold=1e6,this.unitConversionPipe=new $e(o)}ngOnChanges(){this.sum=(0,pt.default)(this.data,e=>e.data[0]),this.convertedValue=this.unitConversionPipe.transform(this.sum)}static{this.\u0275fac=function(o){return new(o||t)(_(f),_(xe))}}static{this.\u0275cmp=T({type:t,selectors:[["nui-donut-content-raw-formatter"]],inputs:{data:"data",config:"config"},features:[R],decls:7,vars:4,consts:[["convertedValueDisplay",""],["iconSize","medium",3,"icon",4,"ngIf"],[1,"nui-text-page"],[4,"ngIf","ngIfElse"],["class","nui-text-secondary",4,"ngIf"],["iconSize","medium",3,"icon"],[1,"nui-text-secondary"]],template:function(o,n){if(o&1&&(C(0),m(1,Pt,1,1,"nui-icon",1),l(2,"div",2),m(3,Gt,3,4,"span",3)(4,Ft,1,1,"ng-template",null,0,ne),a(),m(6,Mt,2,1,"div",4),g()),o&2){let c=D(5);i(),r("ngIf",n.config==null?null:n.config.chartDonutContentIcon),i(2),r("ngIf",n.sum<n.conversionThreshold)("ngIfElse",c),i(3),r("ngIf",n.config==null?null:n.config.chartDonutContentLabel)}},dependencies:[S,re,ye],encapsulation:2})}}return t})();var ct=$(le());var st=(()=>{class t{static{this.lateLoadKey="DonutContentSumFormatterComponent"}constructor(e){this.changeDetector=e}ngOnChanges(){this.sum=(0,ct.default)(this.data,e=>e.data[0])}static{this.\u0275fac=function(o){return new(o||t)(_(f))}}static{this.\u0275cmp=T({type:t,selectors:[["nui-dashboards-donut-content-sum-formatter"]],inputs:{data:"data"},features:[R],decls:3,vars:1,consts:[[1,"nui-text-page"]],template:function(o,n){o&1&&(C(0),l(1,"div",0),s(2),a(),g()),o&2&&(i(2),y(n.sum))},encapsulation:2})}}return t})();var _t=(()=>{class t extends pe{static{this.lateLoadKey="PercentageFormatterComponent"}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=Ee(t)))(n||t)}})()}static{this.\u0275cmp=T({type:t,selectors:[["nui-dashboards-percentage-formatter"]],features:[te],decls:2,vars:1,template:function(o,n){o&1&&(C(0),s(1),g()),o&2&&(i(),O(" ",n.data==null?null:n.data.value,"% "))},encapsulation:2})}}return t})();function yt(t,p){if(t&1){let e=M();l(0,"div")(1,"a",6),G("click",function(n){return h(e),P(n.stopPropagation())}),s(2),a()()}if(t&2){let e=d(2);i(),r("href",e.data==null?null:e.data.link,Ae)("title",e.data.name),i(),O(" ",e.data.name," ")}}function vt(t,p){if(t&1&&(l(0,"span",7),s(1),a()),t&2){let e=d(2);Se("font-size",11,"px"),i(),y(e.data.name)}}function Dt(t,p){if(t&1&&(C(0),l(1,"div",2)(2,"span",3),s(3),a(),b(4,"nui-icon",4),m(5,yt,3,3,"div",5)(6,vt,2,3,"ng-template",null,0,ne),a(),g()),t&2){let e=D(7),o=d();i(3),y(o.data.data),i(),r("icon",o.data.icon),i(),r("ngIf",o.data==null?null:o.data.link)("ngIfElse",e)}}var fe=(()=>{class t{static{this.lateLoadKey="StatusWithIconFormatterComponent"}constructor(e){this.changeDetector=e,this.isValid=!1}ngOnChanges(){this.isValid=!!(this.data&&this.data.icon&&this.data.name&&this.data.data)}static{this.\u0275fac=function(o){return new(o||t)(_(f))}}static{this.\u0275cmp=T({type:t,selectors:[["nui-dashboards-status-icon-formatter"]],inputs:{data:"data"},features:[R],decls:1,vars:1,consts:[["noLink",""],[4,"ngIf"],[1,"nui-text-label","align-items-center","status-icon-formatter"],[1,"nui-text-ellipsis","text-right","pl-3"],[1,"nui-icon","nui-icon-line-height","mx-2",3,"icon"],[4,"ngIf","ngIfElse"],["rel","noopener noreferrer",1,"nui-text-link-small","nui-text-ellipsis","link",3,"click","href","title"],[1,"nui-text-ellipsis"]],template:function(o,n){o&1&&m(0,Dt,8,4,"ng-container",1),o&2&&r("ngIf",n.isValid)},dependencies:[S,re],styles:[".status-icon-formatter[_ngcontent-%COMP%]{display:grid;grid-template-columns:50px auto minmax(114px,1fr)}"]})}}return t})();var Lt=["metricsSelect"];function xt(t,p){if(t&1&&(l(0,"nui-select-v2-option",9),s(1),a()),t&2){let e=p.$implicit;r("displayValueContext",e.label)("value",e.id),i(),O(" ",e.label," ")}}function $t(t,p){if(t&1){let e=M();l(0,"div",3)(1,"div")(2,"nui-form-field",4)(3,"nui-select-v2",5,0)(5,"nui-overlay-item",6),G("click",function(){h(e);let n=d();return P(n.unsetMetric())}),s(6,"Unset"),a(),m(7,xt,2,3,"nui-select-v2-option",7),a(),l(8,"nui-validation-message",8),A(9,1),a()()()()}if(t&2){let e=d();r("formGroup",e.form),i(2),r("control",e.form.controls.activeMetricId),i(5),r("ngForOf",e.metrics)}}var Y=(()=>{class t{static{this.lateLoadKey="AggregatorMetricSelectorConfigurationComponent"}constructor(e,o,n){this.changeDetector=e,this.formBuilder=o,this.logger=n,this.formReady=new ee,this.form=this.formBuilder.group({activeMetricId:[]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(e){e.activeMetricId&&(this.form.get("activeMetricId")?.setValue(e.activeMetricId.currentValue),this.metrics.find(n=>n.id===e.activeMetricId.currentValue)||this.logger.warn(`AggregatorMetricSelectorConfigurationComponent: No metric found for id: ${e.activeMetricId.currentValue}`))}unsetMetric(){this.form.controls.activeMetricId.reset(),this.meticsSelect.hideDropdown()}static{this.\u0275fac=function(o){return new(o||t)(_(f),_(W),_(ie))}}static{this.\u0275cmp=T({type:t,selectors:[["nui-aggregator-configurator"]],viewQuery:function(o,n){if(o&1&&he(Lt,5),o&2){let c;Pe(c=Ge())&&(n.meticsSelect=c.first)}},inputs:{metrics:"metrics",activeMetricId:"activeMetricId"},outputs:{formReady:"formReady"},features:[R],decls:1,vars:1,consts:()=>{let e;e=$localize`:␟f43d8212e6ffbc04ea0190118e7f893824ec2686␟8120854355855055890:Default Metric`;let o;o=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`;let n;return n=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[["metricsSelect",""],n,[3,"formGroup",4,"ngIf"],[3,"formGroup"],["caption",e,1,"mb-3",3,"control"],["formControlName","activeMetricId","placeholder",o],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],[3,"displayValueContext","value"]]},template:function(o,n){o&1&&m(0,$t,10,3,"div",2),o&2&&r("ngIf",n.form)},dependencies:[U,S,V,w,B,H,K,ae,k,z,X],encapsulation:2,changeDetection:0})}}return t})();function bt(t,p){if(t&1&&(l(0,"nui-select-v2-option",13),s(1),a()),t&2){let e=p.$implicit;r("displayValueContext",e.label)("value",e.id),i(),O(" ",e.label," ")}}function Ut(t,p){if(t&1&&(l(0,"nui-select-v2-option",13),s(1),a()),t&2){let e=p.$implicit;r("displayValueContext",e.label)("value",e.id),i(),O(" ",e.label," ")}}function Vt(t,p){if(t&1){let e=M();l(0,"div",4)(1,"div",5)(2,"nui-form-field",6)(3,"nui-select-v2",7,0)(5,"nui-overlay-item",8),G("click",function(){h(e);let n=d();return P(n.unsetMetric())}),s(6,"Unset"),a(),m(7,bt,2,3,"nui-select-v2-option",9),a(),l(8,"nui-validation-message",10),A(9,1),a()()(),l(10,"div",5)(11,"nui-form-field",11)(12,"nui-select-v2",12),m(13,Ut,2,3,"nui-select-v2-option",9),a(),l(14,"nui-validation-message",10),A(15,2),a()()()()}if(t&2){let e=d();r("formGroup",e.form),i(2),r("control",e.form.controls.activeMetricId),i(5),r("ngForOf",e.metrics),i(4),r("control",e.form.controls.chartSeriesDataFieldId),i(2),r("ngForOf",e.chartSeriesDataFields)}}var wt={id:"data[0]",label:"data",dataType:null},dt=(()=>{class t extends Y{static{this.lateLoadKey="FieldMapperAggregatorConfiguratorComponent"}constructor(e,o,n,c){super(e,o,n),this.eventBus=c,this.chartSeriesDataFields=[wt],this.form=this.formBuilder.group({activeMetricId:[],chartSeriesDataFieldId:[]}),this.destroy$=new J,this.eventBus.getStream(ze).pipe(Z(this.destroy$)).subscribe(I=>{let N=I.payload;N&&N.dataFieldsConfig?.chartSeriesDataFields$?.pipe(Z(this.destroy$)).subscribe(u=>this.chartSeriesDataFields=u)})}ngOnChanges(e){super.ngOnChanges(e),e.chartSeriesDataFieldId&&this.form.get("chartSeriesDataFieldId")?.setValue(e.chartSeriesDataFieldId.currentValue)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(o){return new(o||t)(_(f),_(W),_(ie),_(He))}}static{this.\u0275cmp=T({type:t,selectors:[["nui-field-mapper-aggregator-configurator"]],inputs:{chartSeriesDataFieldId:"chartSeriesDataFieldId"},features:[te,R],decls:1,vars:1,consts:()=>{let e;e=$localize`:␟f43d8212e6ffbc04ea0190118e7f893824ec2686␟8120854355855055890:Default Metric`;let o;o=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`;let n;n=$localize`:␟8e67f0d2aff5ba1a2d509b591efa53a4d2076369␟5258061076548910132:Chart Series Data Field`;let c;c=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`;let I;I=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `;let N;return N=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[["metricsSelect",""],I,N,[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"mb-4"],["caption",e,1,"mb-4",3,"control"],["formControlName","activeMetricId","placeholder",o],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],["caption",n,1,"mb-4",3,"control"],["formControlName","chartSeriesDataFieldId","placeholder",c],[3,"displayValueContext","value"]]},template:function(o,n){o&1&&m(0,Vt,16,5,"div",3),o&2&&r("ngIf",n.form)},dependencies:[U,S,V,w,B,H,K,ae,k,z,X],encapsulation:2,changeDetection:0})}}return t})();var Bt=()=>["formReady"];function Ht(t,p){if(t&1&&(l(0,"nui-select-v2-option",19),s(1),a()),t&2){let e=p.$implicit;r("value",e.value),i(),O(" ",e.label," ")}}function Wt(t,p){if(t&1&&(l(0,"nui-select-v2-option",19),s(1),a()),t&2){let e=p.$implicit;r("value",e.componentType),i(),O(" ",e.label," ")}}function zt(t,p){}function Xt(t,p){if(t&1){let e=M();C(0,23,0),G("output",function(n){h(e);let c=d(2);return P(c.onFormReady(n.payload))}),m(2,zt,0,0,"ng-template",24),G("attached",function(n){h(e);let c=D(1);return P(c.attached(n))}),g()}if(t&2){let e=D(1),o=d(2);r("componentId",o.getConfigurationComponent())("componentType",o.getConfigurationComponent())("properties",o.configurationComponentProperties)("outputs",Fe(5,Bt)),i(2),r("cdkPortalOutlet",e.portal)}}function kt(t,p){if(t&1&&(C(0,20),l(1,"nui-form-field",21)(2,"nui-select-v2",18),E(3,"async"),m(4,Wt,2,2,"nui-select-v2-option",11),a(),l(5,"nui-validation-message",12),A(6,4),a()(),m(7,Xt,3,6,"ng-container",22),g()),t&2){let e=d();i(),r("showOptionalText",!1)("control",e.form.controls.componentType),i(),r("popupViewportMargin",v(3,5,e.configuratorHeading.height$)),i(2),r("ngForOf",e.contentFormatters),i(3),r("ngIf",!!e.getConfigurationComponent())}}function Kt(t,p){if(t&1&&(l(0,"nui-select-v2-option",19),s(1),a()),t&2){let e=p.$implicit;r("value",e.id),i(),O(" ",e.label," ")}}function qt(t,p){if(t&1&&(l(0,"nui-select-v2-option",19),s(1),a()),t&2){let e=p.$implicit;r("value",e.componentType),i(),O(" ",e.label," ")}}var jt={[Q.DonutChart]:$localize`Donut`,[Q.PieChart]:$localize`Pie`,[Q.VerticalBarChart]:$localize`Vertical Bar`,[Q.HorizontalBarChart]:$localize`Horizontal Bar`},Ot=(()=>{class t{static{this.lateLoadKey="ProportionalChartOptionsEditorComponent"}constructor(e,o,n){this.changeDetector=e,this.configuratorHeading=o,this.formBuilder=n,this.legendPlacement=j.None,this.formReady=new ee,this.chartTypeNamesMap=jt,this.legendFormatters=[],this.contentFormatters=[],this.formatterHasConfigurationComponent=!1,this.currentConfigurationComponent="",this.chartFormatters=[],this.cachedChartOptionsViewModels=[],this.rawFormatter={componentType:"",label:$localize`Raw`,dataTypes:{value:null}}}get chartTypeSelectViewModels(){return(!this.cachedChartOptionsViewModels||this.cachedChartOptionsViewModels.length!==this.chartOptions?.chartTypes?.length)&&(this.cachedChartOptionsViewModels=(this.chartOptions?.chartTypes||[]).map(e=>({label:this.chartTypeNamesMap[e],value:e}))),this.cachedChartOptionsViewModels}get chartTitle(){return this.chartTypeNamesMap[this.form.controls.type.value]}getConfigurationComponent(){return this.getCurrentFormatterDefinition()?.configurationComponent||""}getConfigurationComponentProperties(){this.configurationComponentProperties={contentFormatterProperties:this.contentFormatterProperties,contentFormatterDefinition:this.getCurrentFormatterDefinition(),dsOutput:this.dsOutput}}getCurrentFormatterDefinition(){let e=this.form.get("contentFormatter.componentType")?.value;return this.contentFormatters.find(o=>o.componentType===e)}ngOnInit(){this.form=this.formBuilder.group({type:[this.chartType||"",ve.required],legendPlacement:this.legendPlacement,legendFormatter:this.formBuilder.group({componentType:this.legendFormatterComponentType||this.rawFormatter.componentType}),contentFormatter:this.formBuilder.group({componentType:this.contentFormatterComponentType})}),this.legendFormatters=[this.rawFormatter,...this.chartOptions.legendFormatters||[]],this.contentFormatters=[...this.chartOptions.contentFormatters||[]],this.formReady.emit(this.form)}ngOnChanges(e){e.chartType&&!e.chartType.isFirstChange()&&this.form.get("type")?.setValue(e.chartType.currentValue),e.legendPlacement&&!e.legendPlacement.isFirstChange()&&this.form.get("legendPlacement")?.setValue(e.legendPlacement.currentValue),e.legendFormatterComponentType&&!e.legendFormatterComponentType.isFirstChange()&&this.form.get("legendFormatter").get("componentType")?.setValue(this.legendFormatterComponentType),e.contentFormatterComponentType&&!e.contentFormatterComponentType.isFirstChange()&&this.form.get("contentFormatter").get("componentType")?.setValue(this.contentFormatterComponentType),this.form&&this.getConfigurationComponentProperties()}onFormReady(e){this.form.get("contentFormatter").setControl("properties",e)}static{this.\u0275fac=function(o){return new(o||t)(_(f),_(qe),_(W))}}static{this.\u0275cmp=T({type:t,selectors:[["nui-proportional-chart-options-editor-component"]],inputs:{chartOptions:"chartOptions",chartType:"chartType",legendPlacement:"legendPlacement",legendFormatterComponentType:"legendFormatterComponentType",contentFormatterComponentType:"contentFormatterComponentType",contentFormatterProperties:"contentFormatterProperties",dsOutput:"dsOutput"},outputs:{formReady:"formReady"},features:[R],decls:30,vars:31,consts:()=>{let e;e=$localize`:␟f2102c0b996b067ab2a46c7743fe5931fa47f16d␟7337152278540773645:Chart Type`;let o;o=$localize`:␟35a0bc25979ae578aea9594e8c587200628713e1␟5551943712413491013:Select chart type`;let n;n=$localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`;let c;c=$localize`:␟7f0b920b08ab06e490eff4f718ef3fecc87a719b␟5989769742900149410:Legend format`;let I;I=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `;let N;N=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `;let u;u=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `;let x;x=$localize`:␟7aad3a4ab45c0132aefc2da9c78cde45d3593850␟4108378864701615700:Content format`;let Ne;return Ne=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,[["componentPortal","nuiComponentPortal"],I,N,u,Ne,[3,"formGroup","state"],["headerTitle","Chart options",3,"headerIcon","subtitle"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",e,3,"control"],["formControlName","type","placeholder",o,3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],["formGroupName","contentFormatter",4,"ngIf"],["caption",n,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],["formGroupName","legendFormatter"],["caption",c,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],[3,"value"],["formGroupName","contentFormatter"],["caption",x,1,"mb-4",3,"showOptionalText","control"],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output",4,"ngIf"],["nuiComponentPortal","",3,"output","componentId","componentType","properties","outputs"],[3,"attached","cdkPortalOutlet"]]},template:function(o,n){if(o&1&&(l(0,"nui-widget-editor-accordion",5),E(1,"nuiWidgetEditorAccordionFormState"),E(2,"async"),b(3,"nui-widget-editor-accordion-header",6),E(4,"nuiFormHeaderIconPipe"),E(5,"async"),l(6,"div",7)(7,"div",8)(8,"nui-form-field",9)(9,"nui-select-v2",10),E(10,"async"),m(11,Ht,2,2,"nui-select-v2-option",11),a(),l(12,"nui-validation-message",12),A(13,1),a()()(),l(14,"div",8),m(15,kt,8,7,"ng-container",13),a(),l(16,"div",8)(17,"nui-form-field",14)(18,"nui-select-v2",15),E(19,"async"),m(20,Kt,2,2,"nui-select-v2-option",11),a(),l(21,"nui-validation-message",12),A(22,2),a()()(),C(23,16),l(24,"nui-form-field",17)(25,"nui-select-v2",18),E(26,"async"),m(27,qt,2,2,"nui-select-v2-option",11),a(),l(28,"nui-validation-message",12),A(29,3),a()(),g(),a()()),o&2){let c;r("formGroup",n.form)("state",v(2,18,v(1,16,n.form))),i(3),r("headerIcon",v(5,23,oe(4,20,n.form,"widget_pie-chart")))("subtitle",n.chartTitle),i(5),r("control",n.form.controls.type),i(),r("popupViewportMargin",v(10,25,n.configuratorHeading.height$)),i(2),r("ngForOf",n.chartTypeSelectViewModels),i(4),r("ngIf",((c=n.form.get("type"))==null?null:c.value)==="DonutChart"),i(2),r("showOptionalText",!1)("control",n.form.controls.legendPlacement),i(),r("popupViewportMargin",v(19,27,n.configuratorHeading.height$)),i(2),r("ngForOf",n.chartOptions.legendPlacementOptions),i(4),r("showOptionalText",!1)("control",n.form.controls.componentType),i(),r("popupViewportMargin",v(26,29,n.configuratorHeading.height$)),i(2),r("ngForOf",n.legendFormatters)}},dependencies:[U,S,V,w,B,H,De,Le,Xe,K,k,z,X,Ze,je,Me,Qe,Ye],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0})}}return t})();var Tt=$(ft()),_e=(t,p)=>{let e=p?.chartSeriesDataFieldId||"data[0]",o=t[0];return p?.activeMetricId&&(o=t.find(n=>n.id===p?.activeMetricId),o||console.warn(`No metric with id: ${p?.activeMetricId} found. Taking first available.`)),(0,Tt.default)(o,e)};_e.aggregatorType="fieldMapper";var Rt=$(Ie()),me=(t,p)=>{let e=t.map(x=>x.data[0]),{activeMetricId:o,base100:n}=p||{},c=(0,Rt.default)(e),I=e[0];o&&(I=t.find(x=>x.id===o)?.data[0],I||console.warn(`No metric with id: ${o} found. Taking first available.`));let N=I/c,u=n?N*100:N;return u=Math.round(u*100)/100,u.toString()};me.aggregatorType="percentageAggregator";var Ct=$(Ie()),de=(t,p)=>{let{activeMetricId:e}=p||{};if(e){let o=t.find(n=>n.id===e);if(o)return o.data[0]}return(0,Ct.default)(t.map(o=>o.data[0])).toString()};de.aggregatorType="sumAggregator";var fn=[{componentType:"",label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:fe.lateLoadKey,label:$localize`Status With Icon`,dataTypes:{value:null}},{componentType:Re.lateLoadKey,label:$localize`Link`,dataTypes:{value:null}}],In=[{componentType:pe.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:Ke.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:_t.lateLoadKey,label:$localize`Percentage Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}}],Nn=[{aggregatorType:de.aggregatorType,label:"Sum Aggregator",fn:de,configurationComponent:Y.lateLoadKey},{aggregatorType:me.aggregatorType,label:"Percentage Aggregator",fn:me,properties:{base100:!0},configurationComponent:Y.lateLoadKey},{aggregatorType:_e.aggregatorType,label:"Field Mapper Aggregator",fn:_e,configurationComponent:dt.lateLoadKey}],En={[We.Structure]:{[ue]:{id:ue,componentType:ke.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]},providers:{[q.FormattersRegistry]:{providerId:Be}}},presentation:{id:"presentation",componentType:Ce.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor"]}},titleAndDescription:{id:"titleAndDescription",componentType:tt.lateLoadKey,providers:{[q.Converter]:{providerId:be}}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:Ot.lateLoadKey,properties:{chartOptions:{chartTypes:["PieChart","DonutChart","VerticalBarChart","HorizontalBarChart"],legendPlacementOptions:[{id:j.None,label:$localize`None`},{id:j.Right,label:$localize`Right`},{id:j.Bottom,label:$localize`Bottom`}],contentFormatters:[{componentType:lt.lateLoadKey,label:$localize`Raw`},{componentType:st.lateLoadKey,label:$localize`Sum`},{componentType:at.lateLoadKey,label:$localize`Percentage`,configurationComponent:"DonutContentPercentageConfigurationComponent"}],legendFormatters:[{componentType:fe.lateLoadKey,label:$localize`Status With Icon`},{componentType:Re.lateLoadKey,label:$localize`Link`}]}},providers:{[q.Converter]:{providerId:Ue}}},refresher:ot,dataAndCalculations:{id:"dataAndCalculations",componentType:Ce.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:et.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Je.lateLoadKey},providers:{[q.Converter]:{providerId:Ve,properties:{formParts:[{previewPath:"chart.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}},[q.Broadcaster]:{providerId:we,properties:{configs:[{trackOn:"component",key:"dsOutput",paths:["data.chartOptionsEditor.properties.dsOutput"]}]}}}}}};export{at as a,lt as b,st as c,_t as d,fe as e,Y as f,dt as g,Ot as h,me as i,de as j,fn as k,In as l,Nn as m,En as n};
