import{a as se,f as Ce,j as Se}from"./chunk-32WL3UDE.js";import{a as ne}from"./chunk-V2MEVMRQ.js";import{a as _e}from"./chunk-QWK7WHL2.js";import{a as de}from"./chunk-DIZWAMYX.js";import{e as pe,f as ce,g as le}from"./chunk-AMXUNQ4T.js";import{A as ee,Ja as y,Ka as ae,c as Y,ca as te,ea as ie,ha as T,ia as oe,ka as re}from"./chunk-USCLQP7P.js";import{$c as K,Ba as H,Jd as Q,Yc as V,lc as Z,ma as v,md as J,oa as k,oc as z,pa as B,va as W,wa as x,xe as q,ya as j}from"./chunk-NZZJTGI5.js";import{e as G,l as $,z as u}from"./chunk-NEOTMEUH.js";import{$c as w,Aa as b,Ac as N,Ha as f,Jc as c,Kb as D,Kc as C,Lc as X,Pb as M,Rb as s,Xb as d,Ya as L,Yb as p,Zb as F,ca as U,gc as S,i as P,va as A,vc as R,xc as I,yb as a,yc as O,zb as _,zc as g}from"./chunk-NNMBFNDY.js";import{i as h}from"./chunk-T555DFTC.js";function Te(o,m){if(o&1&&(d(0,"nui-select-v2-option",15),R(1),p()),o&2){let e=m.$implicit;s("value",e.id)("displayValueContext",e),a(),I(" ",e.title," ")}}function Ee(o,m){if(o&1&&(d(0,"nui-select-v2-option",16),R(1),p()),o&2){let e=m.$implicit;s("value",e.id),a(),I(" ",e.label," ")}}var ge=".dashboard[_ngcontent-%COMP%]{height:400px}.datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.custom-data-source-configurator__text-truncate[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;text-overflow:ellipsis}",Oe=(()=>{class o extends Ce{static{this.lateLoadKey="HarryPotterDataSourceConfiguratorComponent"}constructor(e,i,t,n,r,l,ue){super(e,i,t,n,r,l,ue),this.books=[{id:"5MQFrgEACAAJ",title:$localize`Harry Potter and the Sorcerer's Stone`},{id:"5iTebBW-w7QC",title:$localize`Harry Potter and the Chamber of Secrets`}],this.metrics=[{id:"averageRating",label:$localize`Average Rating`},{id:"ratingsCount",label:$localize`Ratings Count`}]}ngOnInit(){super.ngOnInit(),this.form.setControl("properties",this.formBuilder.group({bookId:[this.properties?.bookId??"",v.required],metric:[this.properties?.metric??"",v.required]})),this.form.setControl("dataSource",this.formBuilder.control(null)),this.form.get("providerId")?.setValue(E.providerId),this.form.valueChanges.subscribe(e=>{e.providerId&&this.invokeDataSource(e)})}static{this.\u0275fac=function(i){return new(i||o)(_(w),_(de),_(H),_(y),_(te),_(L),_(Z))}}static{this.\u0275cmp=f({type:o,selectors:[["harry-potter-data-source-configurator"]],features:[D],decls:22,vars:22,consts:()=>{let e;e=$localize`:␟95007a0fa9063ab3274e0ead437ab11d66ecb4ce␟1524342934378610893:Harry Potter Books`;let i;i=$localize`:␟5917f705b20da63f92901333312b2b6cf53b97ac␟8247170666418322694:Select book`;let t;t=$localize`:␟98cf6baf5399e0431880540b4cc423bed2597312␟8377661862958212673:Select metric`;let n;n=$localize`:␟1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0␟1107354728956440783:Data Source`;let r;return r=$localize`:␟61130e5015140154928e22153e1500b52f5b19b9␟9222050352624461451: Harry Potter Books `,[n,r,[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],["title",e,1,"nui-text-secondary"],["formGroupName","properties",1,"datasource-configuration__accordion-content"],["caption","Books",3,"control"],["placeholder",i,"formControlName","bookId",3,"popupViewportMargin"],[3,"value","displayValueContext",4,"ngFor","ngForOf"],["caption","Metrics",3,"control"],["placeholder",t,"formControlName","metric",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],[3,"value","displayValueContext"],[3,"value"]]},template:function(i,t){if(i&1&&(d(0,"nui-widget-editor-accordion",2),c(1,"nuiWidgetEditorAccordionFormState"),c(2,"async"),d(3,"div",3),F(4,"nui-icon",4),c(5,"nuiFormHeaderIconPipe"),c(6,"async"),d(7,"div",5)(8,"span",6),S(9,0),p(),d(10,"div",7),S(11,1),p()()(),d(12,"div",8)(13,"nui-form-field",9)(14,"nui-select-v2",10),c(15,"async"),M(16,Te,2,3,"nui-select-v2-option",11),p()()(),d(17,"div",8)(18,"nui-form-field",12)(19,"nui-select-v2",13),c(20,"async"),M(21,Ee,2,2,"nui-select-v2-option",14),p()()()()),i&2){let n,r;s("formGroup",t.form)("state",C(2,11,C(1,9,t.form))),a(4),s("icon",C(6,16,X(5,13,t.form,"database"))),a(9),s("control",(n=t.form.get("properties"))==null?null:n.get("bookId")),a(),s("popupViewportMargin",C(15,18,t.configuratorHeading.height$)),a(2),s("ngForOf",t.books),a(2),s("control",(r=t.form.get("properties"))==null?null:r.get("metric")),a(),s("popupViewportMargin",C(20,20,t.configuratorHeading.height$)),a(2),s("ngForOf",t.metrics)}},dependencies:[G,pe,Q,J,K,z,k,B,W,j,x,$,ce,le],styles:[ge]})}static{this.\u0275prov=A({token:o,factory:o.\u0275fac})}}return o})(),E=(()=>{class o extends q{static{this.providerId="AcmeKpiDataSource"}constructor(e){super(),this.http=e,this.busy=new P(!1)}updateConfiguration(e){this.properties=e}getFilteredData(){return h(this,null,function*(){return this.busy.next(!0),new Promise(e=>{this.http.get(`https://www.googleapis.com/books/v1/volumes/${this.properties?.bookId}`).pipe(U(()=>this.busy.next(!1))).subscribe({next:i=>{e({result:{value:i.volumeInfo[this.properties?.metric]}})},error:i=>{e({result:null,error:{type:i.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(i){return new(i||o)(b(u))}}static{this.\u0275prov=A({token:o,factory:o.\u0275fac})}}return o})(),He=(()=>{class o{constructor(e,i,t){this.widgetTypesService=e,this.providerRegistry=i,this.componentRegistry=t,this.gridsterConfig={},this.editMode=!1}ngOnInit(){this.componentRegistry.registerByLateLoadKey(Oe),this.providerRegistry.setProviders({[E.providerId]:{provide:ie,useClass:E,deps:[u]}});let e=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(e,"configurator",oe.DataSourceConfigComponentType,Oe.lateLoadKey);let i=me,t={[i.id]:this.widgetTypesService.mergeWithWidgetType(i)},n={[i.id]:{cols:4,rows:6,y:0,x:0}};this.dashboard={positions:n,widgets:t}}static{this.\u0275fac=function(i){return new(i||o)(_(ne),_(y),_(ae))}}static{this.\u0275cmp=f({type:o,selectors:[["custom-data-source-configurator-example"]],decls:5,vars:4,consts:()=>{let e;return e=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[e,[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"valueChange","value"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboardChange","gridsterConfigChange","dashboard","editMode","gridsterConfig"]]},template:function(i,t){i&1&&(d(0,"div",1)(1,"nui-switch",2),N("valueChange",function(r){return g(t.editMode,r)||(t.editMode=r),r}),S(2,0),p()(),d(3,"div",3)(4,"nui-dashboard",4),N("dashboardChange",function(r){return g(t.dashboard,r)||(t.dashboard=r),r})("gridsterConfigChange",function(r){return g(t.gridsterConfig,r)||(t.gridsterConfig=r),r}),p()()),i&2&&(a(),O("value",t.editMode),a(3),O("dashboard",t.dashboard),s("editMode",t.editMode),O("gridsterConfig",t.gridsterConfig))},dependencies:[se,Se,V],styles:[ge]})}}return o})(),me={id:"widget1",type:"kpi",pizzagna:{[re.Configuration]:{[Y]:{providers:{[T.Refresher]:{properties:{interval:60*10,enabled:!0}}}},header:{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}},tiles:{properties:{nodes:["kpi1"]}},kpi1:{id:"kpi1",componentType:_e.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating"}},providers:{[T.DataSource]:{providerId:E.providerId,properties:{bookId:"5MQFrgEACAAJ",metric:"averageRating"}},[T.Adapter]:{providerId:ee,properties:{componentId:"kpi1",propertyPath:"widgetData"}}}}}}};export{Oe as a,E as b,He as c};
