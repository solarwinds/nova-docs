import{c as M}from"./chunk-IYRXTWZX.js";import{a as Pe,b as Ue}from"./chunk-FHSFZ6IZ.js";import{c as ze}from"./chunk-RA3JVS4W.js";import{a as Q,b as be,c as $e}from"./chunk-DIZWAMYX.js";import{a as Le,c as ie,d as b,e as $,f as B,g as z,h as Be}from"./chunk-AMXUNQ4T.js";import{Aa as U,D as Ge,G as Fe,H as he,N as De,O as ye,Q as ve,c as ee,ca as Y,d as ge,ha as g,ka as P,p as Me,qa as J}from"./chunk-USCLQP7P.js";import{$c as k,Ba as y,Ec as Ae,Jd as L,Nc as ue,id as v,ma as A,md as K,oa as q,pa as h,pc as fe,sd as Z,va as D,ya as j}from"./chunk-NZZJTGI5.js";import{e as H,f as Re,l as f}from"./chunk-NEOTMEUH.js";import{$b as w,$c as R,F as Ee,Ha as O,Jc as s,Kc as I,Lc as u,Mc as x,Pb as c,Ra as N,Rb as n,Sa as pe,Ta as Se,Xb as a,Yb as T,Zb as S,_b as X,ab as p,bc as me,ec as ce,fc as Ce,gc as d,h as G,kc as W,lc as Oe,na as de,vc as F,wc as Ne,xc as V,yb as r,zb as l}from"./chunk-NNMBFNDY.js";function Ze(o,m){if(o&1&&(a(0,"nui-select-v2-option",18),F(1),T()),o&2){let e=m.$implicit;n("value",e),r(),V(" ",e.name," ")}}function Ye(o,m){if(o&1&&(a(0,"nui-select-v2-option",18),F(1),T()),o&2){let e=m.$implicit;n("value",e.id),r(),V(" ",e.label," ")}}function Je(o,m){if(o&1&&(a(0,"nui-select-v2-option",18),F(1),T()),o&2){let e=m.$implicit;n("value",e.value),r(),Ne(e.label)}}var He=(()=>{class o{static{this.lateLoadKey="TimeseriesMetadataConfigurationComponent"}constructor(e,t,i,_){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.eventBus=_,this.legendPlacements=[],this.timeSpans=[],this.availableChartTypes=[{label:$localize`Line`,value:M.Line},{label:$localize`Stacked area`,value:M.StackedArea},{label:$localize`Stacked % area`,value:M.StackedPercentageArea},{label:$localize`Bar`,value:M.StackedBar},{label:$localize`Status`,value:M.StatusBar}],this.formReady=new p,this.destroy$=new G,this.form=this.formBuilder.group({leftAxisLabel:[""],startingTimespan:[null,A.required],legendPlacement:[U.None,[A.required]],preset:[M.Line,[A.required]]})}ngOnInit(){this.form.get("startingTimespan")?.valueChanges.pipe(de(this.destroy$)).subscribe(e=>{setTimeout(()=>{this.eventBus.next(Me,{payload:{id:ge}})})}),this.formReady.emit(this.form)}ngOnChanges(e){let t=this.form.get("startingTimespan");e.leftAxisLabel&&this.form.get("leftAxisLabel")?.setValue(this.leftAxisLabel,{emitEvent:!1}),e.startingTimespan&&t?.setValue(this.startingTimespan,{emitEvent:!1}),e.legendPlacement&&this.form.get("legendPlacement")?.setValue(this.legendPlacement,{emitEvent:!1}),e.preset&&this.form.get("preset")?.setValue(this.preset,{emitEvent:!1}),e.timeSpans&&!t?.value&&this.timeSpans?.length>0&&t?.setValue(this.timeSpans[0])}getSecondaryText(){let e=this.form.controls.startingTimespan.value,t=e&&e.name||$localize`No timespan`,i=this.form.controls.legendPlacement.value||$localize`No legend`,_=this.form.controls.leftAxisLabel.value||$localize`No y-axis label`;return`${t}, ${i}, ${_}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||o)(l(R),l(Q),l(y),l(Y))}}static{this.\u0275cmp=O({type:o,selectors:[["nui-timeseries-metadata-configuration"]],inputs:{legendPlacements:"legendPlacements",timeSpans:"timeSpans",startingTimespan:"startingTimespan",legendPlacement:"legendPlacement",leftAxisLabel:"leftAxisLabel",preset:"preset",availableChartTypes:"availableChartTypes"},outputs:{formReady:"formReady"},features:[N],decls:34,vars:36,consts:()=>{let e;e=$localize`:␟7c1e198b83571c6f6d6774bbf5e8ef469b8ed3f8␟83369046626581484:Starting timespan`;let t;t=$localize`:␟cea52b8401042ba9c3aac1cd5a7507d754f0d809␟4391839922437157830:Starting Timespan`;let i;i=$localize`:␟a9e3fc4b717bf285f084fc443a97f4c08b345203␟2498436426359230001:Chart legend`;let _;_=$localize`:␟8137d4a0a1b9974f796c96ea5b70f4ec4304af97␟9008417256629743113:Select Legend Orientation`;let C;C=$localize`:␟20f8b383236e858a2369abf573aa3a662a61dc2c␟7603862017185374134:Chart y-axis label`;let re;re=$localize`:␟da1b3b8ad86495e008972fe0f8dfca60c9c60ac5␟5670370419656051485:Set chart y-axis label`;let ae;ae=$localize`:␟d4821e6eaad5b45a36e2873de2a6e0075c4b7621␟8983610989099122824:Chart type`;let se;se=$localize`:␟d4821e6eaad5b45a36e2873de2a6e0075c4b7621␟8983610989099122824:Chart type`;let _e;_e=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `;let Te;Te=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `;let Ie;Ie=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `;let le;return le=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[_e,Te,Ie,le,[3,"formGroup","state"],["headerTitle","Timeseries metadata",3,"headerIcon","iconColor","subtitle"],[1,"timeseries-metadata-configuration__accordion-content"],[1,"mb-4"],["caption",e,3,"control"],["placeholder",t,"formControlName","startingTimespan",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],["caption",i,3,"control"],["placeholder",_,"formControlName","legendPlacement",3,"popupViewportMargin"],["caption",C,3,"control"],["formControlName","leftAxisLabel","placeholder",re],["caption",ae,3,"control"],["placeholder",se,"formControlName","preset",3,"popupViewportMargin"],[3,"value"]]},template:function(t,i){t&1&&(a(0,"nui-widget-editor-accordion",4),s(1,"nuiWidgetEditorAccordionFormState"),s(2,"async"),S(3,"nui-widget-editor-accordion-header",5),s(4,"nuiFormHeaderIconPipe"),s(5,"async"),s(6,"nuiFormHeaderIconPipe"),s(7,"async"),a(8,"div",6)(9,"div",7)(10,"nui-form-field",8)(11,"nui-select-v2",9),s(12,"async"),c(13,Ze,2,2,"nui-select-v2-option",10),T(),a(14,"nui-validation-message",11),d(15,0),T()()(),a(16,"div",7)(17,"nui-form-field",12)(18,"nui-select-v2",13),s(19,"async"),c(20,Ye,2,2,"nui-select-v2-option",10),T(),a(21,"nui-validation-message",11),d(22,1),T()()(),a(23,"div",7)(24,"nui-form-field",14),S(25,"nui-textbox",15),a(26,"nui-validation-message",11),d(27,2),T()()(),a(28,"nui-form-field",16)(29,"nui-select-v2",17),s(30,"async"),c(31,Je,2,2,"nui-select-v2-option",10),T(),a(32,"nui-validation-message",11),d(33,3),T()()()()),t&2&&(n("formGroup",i.form)("state",I(2,17,I(1,15,i.form))),r(3),n("headerIcon",I(5,22,u(4,19,i.form,"edit")))("iconColor",I(7,28,x(6,24,i.form,"gray","")))("subtitle",i.getSecondaryText()),r(7),n("control",i.form.controls.startingTimespan),r(),n("popupViewportMargin",I(12,30,i.configuratorHeading.height$)),r(2),n("ngForOf",i.timeSpans),r(4),n("control",i.form.controls.legendPlacement),r(),n("popupViewportMargin",I(19,32,i.configuratorHeading.height$)),r(2),n("ngForOf",i.legendPlacements),r(4),n("control",i.form.controls.leftAxisLabel),r(4),n("control",i.form.controls.preset),r(),n("popupViewportMargin",I(30,34,i.configuratorHeading.height$)),r(2),n("ngForOf",i.availableChartTypes))},dependencies:[H,q,h,D,j,Z,L,K,k,v,$,b,f,B,z],styles:[".timeseries-metadata-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]})}}return o})();function ei(o,m){o&1&&(a(0,"div",5)(1,"nui-message",6),ce(2,0),S(3,"b"),Ce(),T()()),o&2&&(r(),n("allowDismiss",!1))}function ii(o,m){if(o&1){let e=me();a(0,"button",7),W("click",function(){pe(e);let i=Oe();return Se(i.addSeries())}),d(1,1),T()}}var qe=(()=>{class o{static{this.lateLoadKey="TimeseriesSeriesCollectionConfigurationComponent"}constructor(e,t,i){this.pizzagnaService=e,this.changeDetector=t,this.eventBus=i,this.series=[],this.formReady=new p,this.destroy$=new G}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnChanges(e){e.allSeries&&!e.allSeries.isFirstChange()&&(this.createSeriesConfigComponents(this.series),setTimeout(()=>this.changeDetector.markForCheck()))}onFormReady(e){this.form=e,this.formReady.emit(e),this.emptySeries$=this.form.valueChanges.pipe(Ee(t=>t.length===0))}onItemsChange(e){this.createSeriesConfigComponents(e);let t={componentId:this.componentId,pizzagnaKey:P.Data,propertyPath:["series"]};this.pizzagnaService.setProperty(t,e)}isPossibleToAddSeries(){let e=this.allSeries&&this.allSeries.length,t=this.series&&this.series.length;return e>t}addSeries(){this.onItemsChange([...this.series,{id:Ae("series"),selectedSeriesId:null}])}createSeriesConfigComponents(e){let t="series",i=e.map(_=>_.id);this.pizzagnaService.createComponentsFromTemplate(t,i)}static{this.\u0275fac=function(t){return new(t||o)(l(J),l(R),l(Y))}}static{this.\u0275cmp=O({type:o,selectors:[["nui-timeseries-series-collection-configuration"]],inputs:{nodes:"nodes",componentId:"componentId",series:"series",availableSeries:"availableSeries",allSeries:"allSeries"},outputs:{formReady:"formReady"},features:[N],decls:4,vars:7,consts:()=>{let e;e=$localize`:␟46a7534407b391db85f57b5fd207e4288d7901c1␟4355007031052301783:${"\uFFFD#3\uFFFD"}:START_BOLD_TEXT:At least one series must be added.${"\uFFFD/#3\uFFFD"}:CLOSE_BOLD_TEXT:`;let t;return t=$localize`:␟6231821a0315549db22f614abdf9b5e9b036a0ca␟8188707268253933960: Add new series
`,[e,t,[3,"itemsChange","formReady","items","nodes","moveButtons"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","type","button","class","ml-4 mb-4",3,"click",4,"ngIf"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],["nui-button","","icon","add","displayStyle","action","type","button",1,"ml-4","mb-4",3,"click"]]},template:function(t,i){t&1&&(a(0,"nui-items-dynamic",2),W("itemsChange",function(C){return i.onItemsChange(C)})("formReady",function(C){return i.onFormReady(C)}),T(),c(1,ei,4,1,"div",3),s(2,"async"),c(3,ii,2,0,"button",4)),t&2&&(n("items",i.series)("nodes",i.nodes)("moveButtons",!1),r(),n("ngIf",I(2,5,i.emptySeries$)&&i.form.touched),r(2),n("ngIf",i.isPossibleToAddSeries()))},dependencies:[Re,fe,ue,Ue,f],encapsulation:2,changeDetection:0})}}return o})();var je=(()=>{class o{static{this.lateLoadKey="TimeseriesTileDescriptionConfigurationComponent"}constructor(e,t){this.formBuilder=e,this.changeDetector=t,this.formReady=new p,this.formDestroy=new p}ngOnInit(){this.form=this.formBuilder.group({label:[this.label,A.required]}),this.formReady.emit(this.form)}ngOnChanges(e){if(e.label){let t=e.label.currentValue;t&&this.form.patchValue({label:t})}}ngOnDestroy(){this.formDestroy.emit(this.form)}static{this.\u0275fac=function(t){return new(t||o)(l(y),l(R))}}static{this.\u0275cmp=O({type:o,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[N],decls:14,vars:21,consts:()=>{let e;e=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`;let t;t=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`;let i;return i=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[i,[3,"formGroup"],[3,"state"],["headerTitle","Description",3,"headerIcon","iconColor","subtitle"],[1,"timeseries-tile-description-configuration__accordion-content"],["caption",e,3,"control"],["formControlName","label","placeholder",t],["for","required"]]},template:function(t,i){if(t&1&&(X(0,1),a(1,"nui-widget-editor-accordion",2),s(2,"nuiWidgetEditorAccordionFormState"),s(3,"async"),S(4,"nui-widget-editor-accordion-header",3),s(5,"nuiFormHeaderIconPipe"),s(6,"async"),s(7,"nuiFormHeaderIconPipe"),s(8,"async"),a(9,"div",4)(10,"nui-form-field",5),S(11,"nui-textbox",6),a(12,"nui-validation-message",7),d(13,0),T()()()(),w()),t&2){let _;n("formGroup",i.form),r(),n("state",I(3,8,I(2,6,i.form.get("label")))),r(3),n("headerIcon",I(6,13,u(5,10,i.form.get("label"),"edit")))("iconColor",I(8,19,x(7,15,i.form.get("label"),"gray","")))("subtitle",(_=i.form.get("label"))==null?null:_.value),r(6),n("control",i.form.get("label"))}},dependencies:[q,h,D,j,Z,L,v,$,b,f,B,z],styles:[".timeseries-tile-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0})}}return o})();function ti(o,m){if(o&1&&(a(0,"nui-select-v2-option",9),F(1),T()),o&2){let e=m.$implicit;n("value",e),r(),V(" ",e.description," ")}}var ke=(()=>{class o{static{this.lateLoadKey="TimeseriesTileIndicatorDataConfigurationComponent"}set selectedSeries(e){this._selectedSeries=e,e&&this.form.patchValue({id:e.id})}get selectedSeries(){return this._selectedSeries}constructor(e,t,i,_){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.pizzagnaService=_,this.formReady=new p,this.formDestroy=new p,this.destroy$=new G}ngOnInit(){this.form=this.formBuilder.group({id:[this.selectedSeriesId||null,[A.required]]}),this.formReady.emit(this.form)}ngOnChanges(e){if(e.allSeries&&(this.selectedSeries=this.allSeries.find(t=>this.selectedSeriesId===t.id)),e.selectedSeriesId){if(!this.allSeries)return;this.selectedSeries=this.allSeries.find(t=>this.selectedSeriesId===t.id)}}onSelect(e){this.selectedSeriesId=e.id,this.selectedSeries=e,this.form.patchValue({id:e.id}),setTimeout(()=>{this.pizzagnaService.setProperty(`${P.Data}.${this.componentId}.properties.selectedSeriesId`,e.id),this.changeDetector.markForCheck()})}ngOnDestroy(){this.formDestroy.emit(this.form),this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||o)(l(R),l(Q),l(y),l(J))}}static{this.\u0275cmp=O({type:o,selectors:[["nui-timeseries-tile-indicator-data-configuration"]],inputs:{componentId:"componentId",selectedSeriesId:"selectedSeriesId",allSeries:"allSeries",availableSeries:"availableSeries"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[N],decls:15,vars:22,consts:()=>{let e;e=$localize`:␟c5efb3039d96058120ee5d8148ceeb972d8d4e1f␟3385528249572340947:Series data`;let t;t=$localize`:␟c5efb3039d96058120ee5d8148ceeb972d8d4e1f␟3385528249572340947:Series data`;let i;return i=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[i,[3,"formGroup"],[3,"state"],["headerTitle","Indicator data",3,"headerIcon","subtitle"],[1,"timeseries-tile-data-configuration__accordion-content"],["caption",e,3,"control"],["placeholder",t,3,"valueSelected","value","popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],[3,"value"]]},template:function(t,i){t&1&&(X(0,1),a(1,"nui-widget-editor-accordion",2),s(2,"nuiWidgetEditorAccordionFormState"),s(3,"async"),S(4,"nui-widget-editor-accordion-header",3),s(5,"nuiFormHeaderIconPipe"),s(6,"async"),a(7,"div",4)(8,"nui-form-field",5)(9,"nui-select-v2",6),s(10,"async"),W("valueSelected",function(C){return i.onSelect(C)}),c(11,ti,2,2,"nui-select-v2-option",7),s(12,"nuiAddData"),T(),a(13,"nui-validation-message",8),d(14,0),T()()()(),w()),t&2&&(n("formGroup",i.form),r(),n("state",I(3,10,I(2,8,i.form.get("id")))),r(3),n("headerIcon",I(6,15,u(5,12,i.form.get("id"),"database")))("subtitle",i.selectedSeries==null?null:i.selectedSeries.description),r(4),n("control",i.form.get("id")),r(),n("value",i.selectedSeries)("popupViewportMargin",I(10,17,i.configuratorHeading.height$)),r(2),n("ngForOf",u(12,19,i.availableSeries,i.selectedSeries)))},dependencies:[H,h,D,L,K,k,v,$,b,f,Pe,B,z],styles:[".timeseries-tile-data-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0})}}return o})();var Nt={[P.Structure]:{[ee]:{id:ee,componentType:Le.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","series"]}},presentation:{id:"presentation",componentType:ie.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","timeseriesMetadata"]}},titleAndDescription:{id:"titleAndDescription",componentType:Be.lateLoadKey,providers:{[g.Converter]:{providerId:Ge}}},timeseriesMetadata:{id:"timeseriesMetadata",componentType:He.lateLoadKey,properties:{legendPlacements:[{id:U.None,label:$localize`None`},{id:U.Right,label:$localize`Right`},{id:U.Bottom,label:$localize`Bottom`}]},providers:{[g.Converter]:{providerId:Fe}}},refresher:ze,dataAndCalculations:{id:"dataAndCalculations",componentType:ie.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:$e.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:be.lateLoadKey},providers:{[g.Converter]:{providerId:De,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}}}},series:{id:"series",componentType:qe.lateLoadKey,providers:{[g.Converter]:{providerId:he}},properties:{template:[{id:"description",componentType:je.lateLoadKey,providers:{[g.Converter]:{providerId:ye,properties:{formParts:[{previewPath:"chart.providers.adapter.properties.series",keys:["label"]}]}}}},{id:"indicatorData",componentType:ke.lateLoadKey,providers:{[g.Converter]:{providerId:ve}}}]}}}};export{He as a,qe as b,je as c,ke as d,Nt as e};
