import{a as F,b as k,c as A,d as S,e as B,g as Q}from"./chunk-X4Y7FFXQ.js";import{Oc as T,ue as q}from"./chunk-3HSEZOBQ.js";import{L as P,u as x,z as N}from"./chunk-NEOTMEUH.js";import{Aa as E,Ia as I,e as b,va as M,wa as O}from"./chunk-NNMBFNDY.js";import"./chunk-JISDZD7Z.js";import{a as g,i as w}from"./chunk-T555DFTC.js";var L=(e,r,i)=>{let t=["POST","PUT","PATCH"].indexOf(e.method.toUpperCase())!==-1,c=n=>["variables","extensions"].indexOf(n.toLowerCase())!==-1,f=e.body.length,s=e.options&&e.options.useMultipart,h;if(s){if(f)return new b(n=>n.error(new Error("File upload is not available when combined with Batching")));if(!t)return new b(n=>n.error(new Error("File upload is not available when GET is used")));if(!i)return new b(n=>n.error(new Error(`To use File upload you need to pass "extractFiles" function from "extract-files" library to HttpLink's options`)));h=i(e.body),s=!!h.files.size}let l={};if(f){if(!t)return new b(n=>n.error(new Error("Batching is not available for GET requests")));l={body:e.body}}else{let n=s?h.clone:e.body;t?l={body:n}:l={params:Object.keys(e.body).reduce((d,a)=>{let p=e.body[a];return d[a]=c(a)?JSON.stringify(p):p,d},{})}}if(s&&t){let n=new FormData;n.append("operations",JSON.stringify(l.body));let u={},d=h.files,a=0;d.forEach(p=>{u[++a]=p}),n.append("map",JSON.stringify(u)),a=0,d.forEach((p,y)=>{n.append(++a+"",y,y.name)}),l.body=n}return r.request(e.method,e.url,g(g({observe:"response",responseType:"json",reportProgress:!1},l),e.options))},U=(e,r)=>e&&r?r.keys().reduce((t,c)=>t.set(c,r.getAll(c)),e):r||e;function J(...e){let r=e.find(i=>typeof i<"u");return typeof r>"u"?e[e.length-1]:r}function K(e){let r=e.headers&&e.headers instanceof x?e.headers:new x(e.headers);if(e.clientAwareness){let{name:i,version:t}=e.clientAwareness;i&&!r.has("apollographql-client-name")&&(r=r.set("apollographql-client-name",i)),t&&!r.has("apollographql-client-version")&&(r=r.set("apollographql-client-version",t))}return r}var C=class extends A{httpClient;options;requester;print=F;constructor(r,i){super(),this.httpClient=r,this.options=i,this.options.operationPrinter&&(this.print=this.options.operationPrinter),this.requester=t=>new k(c=>{let f=t.getContext(),s=(o,H)=>J(f[o],this.options[o],H),h=s("method","POST"),l=s("includeQuery",!0),n=s("includeExtensions",!1),u=s("uri","graphql"),d=s("withCredentials"),a=s("useMultipart"),p=this.options.useGETForQueries===!0,y=t.query.definitions.some(o=>o.kind==="OperationDefinition"&&o.operation==="query");p&&y&&(h="GET");let m={method:h,url:typeof u=="function"?u(t):u,body:{operationName:t.operationName,variables:t.variables},options:{withCredentials:d,useMultipart:a,headers:this.options.headers}};n&&(m.body.extensions=t.extensions),l&&(m.body.query=this.print(t.query));let j=K(f);m.options.headers=U(m.options.headers,j);let v=L(m,this.httpClient,this.options.extractFiles).subscribe({next:o=>{t.setContext({response:o}),c.next(o.body)},error:o=>c.error(o),complete:()=>c.complete()});return()=>{v.closed||v.unsubscribe()}})}request(r){return this.requester(r)}},D=(()=>{class e{httpClient;constructor(i){this.httpClient=i}create(i){return new C(this.httpClient,i)}static \u0275fac=function(t){return new(t||e)(E(N))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var R="https://countries-274616.ew.r.appspot.com/",z=[{path:"overview",loadChildren:()=>w(void 0,null,function*(){return import("./chunk-ZFG6NKS4.js")})},{path:"tutorials",loadChildren:()=>w(void 0,null,function*(){return import("./chunk-HVSHDYWK.js")})},{path:"widget-types",loadChildren:()=>w(void 0,null,function*(){return import("./chunk-4JFRBP26.js")})}],se=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=I({type:e})}static{this.\u0275inj=O({providers:[{provide:B,useFactory:i=>({cache:new S,link:i.create({uri:R})}),deps:[D]}],imports:[q,T,Q,P.forChild(z)]})}}return e})();export{se as default};
