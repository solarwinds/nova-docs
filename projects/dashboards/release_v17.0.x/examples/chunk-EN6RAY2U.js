import{a as J,j as Q}from"./chunk-32WL3UDE.js";import{a as H}from"./chunk-V2MEVMRQ.js";import{a as d}from"./chunk-QWK7WHL2.js";import{A as n,Ja as U,U as W,b as ee,ea as A,ha as o,ia as G,ka as E}from"./chunk-USCLQP7P.js";import{Yc as X,pc as Y,xe as D}from"./chunk-NZZJTGI5.js";import{f as V,z as p}from"./chunk-NEOTMEUH.js";import{$c as j,A as M,Aa as x,Ac as L,Ha as B,Pb as R,Rb as C,Sa as f,Ta as _,X as O,Xb as g,Yb as s,Z as P,bc as K,ca as b,gc as N,i as m,kc as F,lc as h,va as v,vc as z,yb as k,yc as S,zb as I,zc as w}from"./chunk-NNMBFNDY.js";import{g as $,i as y}from"./chunk-T555DFTC.js";var q=$(ee());function te(i,Z){if(i&1){let e=K();g(0,"button",6),F("click",function(){f(e);let r=h();return _(r.reInitializeDashboard())}),z(1," Restore Widget "),s()}}function ie(i,Z){if(i&1){let e=K();g(0,"nui-dashboard",7),L("dashboardChange",function(r){f(e);let a=h();return w(a.dashboard,r)||(a.dashboard=r),_(r)})("gridsterConfigChange",function(r){f(e);let a=h();return w(a.gridsterConfig,r)||(a.gridsterConfig=r),_(r)}),s()}if(i&2){let e=h();S("dashboard",e.dashboard),C("editMode",e.editMode),S("gridsterConfig",e.gridsterConfig)}}var l=(()=>{class i extends D{static{this.providerId="AverageRatingKpiDataSource"}constructor(e){super(),this.http=e,this.busy=new m(!1)}getFilteredData(){return y(this,null,function*(){return this.busy.next(!0),new Promise(e=>{this.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(b(()=>this.busy.next(!1))).subscribe({next:t=>{e({result:{value:t.volumeInfo.averageRating}})},error:t=>{e({result:null,error:{type:t.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(t){return new(t||i)(x(p))}}static{this.\u0275prov=v({token:i,factory:i.\u0275fac})}}return i})(),c=(()=>{class i extends D{static{this.providerId="RatingsCountKpiDataSource"}constructor(e){super(),this.http=e,this.busy=new m(!1)}getFilteredData(){return y(this,null,function*(){return this.busy.next(!0),new Promise(e=>{this.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(P(2e3),b(()=>this.busy.next(!1))).subscribe({next:t=>{e({result:{value:t.volumeInfo.ratingsCount}})},error:t=>{e({result:null,error:{type:t.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(t){return new(t||i)(x(p))}}static{this.\u0275prov=v({token:i,factory:i.\u0275fac})}}return i})(),u=(()=>{class i extends D{static{this.providerId="MockKpiDataSource"}constructor(){super(),this.busy=new m(!1),this.value=3381342}getFilteredData(){return y(this,null,function*(){return this.busy.next(!0),new Promise(e=>{M(this.value).pipe(P(5e3),O(1),b(()=>this.busy.next(!1))).subscribe({next:t=>{e({result:{value:t}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=v({token:i,factory:i.\u0275fac})}}return i})(),ve=(()=>{class i{constructor(e,t,r){this.widgetTypesService=e,this.providerRegistry=t,this.changeDetectorRef=r,this.gridsterConfig={},this.editMode=!1}ngOnInit(){this.setupDashboard(),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}setupDashboard(){let e={providerId:W,properties:{scaleSyncConfig:[{id:"value"},{id:"label"},{id:"units"}]}},t=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(t,"configurator",G.DataSourceProviders,[l.providerId,c.providerId,u.providerId]),this.widgetTypesService.setNode(t,"widget","tiles.providers.kpiScaleSyncBroker",e),this.providerRegistry.setProviders({[l.providerId]:{provide:A,useClass:l,deps:[p]},[c.providerId]:{provide:A,useClass:c,deps:[p]},[u.providerId]:{provide:A,useClass:u,deps:[]}})}initializeDashboard(){let e=re.map(a=>this.widgetTypesService.mergeWithWidgetType(a)),t=(0,q.default)(e,a=>a.id),r={kpiWidgetId:{cols:3,rows:6,y:0,x:0},kpiWidgetId2:{cols:3,rows:6,y:0,x:3},kpiWidgetId3:{cols:3,rows:6,y:0,x:6}};this.dashboard={positions:r,widgets:t}}static{this.\u0275fac=function(t){return new(t||i)(I(H),I(U),I(j))}}static{this.\u0275cmp=B({type:i,selectors:[["kpi-sync-broker-for-all-tiles-example"]],decls:6,vars:3,consts:()=>{let e;return e=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[e,[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"valueChange","value"],["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboardChange","gridsterConfigChange","dashboard","editMode","gridsterConfig"]]},template:function(t,r){t&1&&(g(0,"div",1)(1,"nui-switch",2),L("valueChange",function(T){return w(r.editMode,T)||(r.editMode=T),T}),N(2,0),s(),R(3,te,2,0,"button",3),s(),g(4,"div",4),R(5,ie,1,3,"nui-dashboard",5),s()),t&2&&(k(),S("value",r.editMode),k(2),C("ngIf",!(r.dashboard!=null&&r.dashboard.widgets.kpiWidgetId)),k(2),C("ngIf",r.dashboard))},dependencies:[Y,V,J,Q,X],styles:[".dashboard[_ngcontent-%COMP%]{height:400px}"]})}}return i})(),re=[{id:"kpiWidgetId",type:"kpi",pizzagna:{[E.Configuration]:{header:{properties:{title:"Sync Broker Applied for ALL Widgets",subtitle:"Values are being synced"}},tiles:{properties:{nodes:["kpi1","kpi2","kpi3"]}},kpi1:{id:"kpi1",componentType:d.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating",backgroundColor:"lightpink"}},providers:{[o.DataSource]:{providerId:l.providerId},[o.Adapter]:{providerId:n,properties:{componentId:"kpi1",propertyPath:"widgetData"}}}},kpi2:{id:"kpi2",componentType:d.lateLoadKey,properties:{widgetData:{label:"Another label which might be a pretty long one",units:"Which comes from somewhere",backgroundColor:"skyblue"}},providers:{[o.DataSource]:{providerId:c.providerId},[o.Adapter]:{providerId:n,properties:{componentId:"kpi2",propertyPath:"widgetData"}}}},kpi3:{id:"kpi3",componentType:d.lateLoadKey,properties:{widgetData:{label:"Random",units:"Data"}},providers:{[o.DataSource]:{providerId:u.providerId},[o.Adapter]:{providerId:n,properties:{componentId:"kpi3",propertyPath:"widgetData"}}}}}}},{id:"kpiWidgetId2",type:"kpi",pizzagna:{[E.Configuration]:{header:{properties:{title:"Sync Broker Applied for ALL Widgets",subtitle:"Now the values of label, units, and value are being synced"}},tiles:{properties:{nodes:["kpi1","kpi2","kpi3"]}},kpi1:{id:"kpi1",componentType:d.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating",backgroundColor:"lightpink"}},providers:{[o.DataSource]:{providerId:l.providerId},[o.Adapter]:{providerId:n,properties:{componentId:"kpi1",propertyPath:"widgetData"}}}},kpi2:{id:"kpi2",componentType:d.lateLoadKey,properties:{widgetData:{label:"Another label which might be a pretty long one",units:"Which comes from somewhere",backgroundColor:"skyblue"}},providers:{[o.DataSource]:{providerId:c.providerId},[o.Adapter]:{providerId:n,properties:{componentId:"kpi2",propertyPath:"widgetData"}}}},kpi3:{id:"kpi3",componentType:d.lateLoadKey,properties:{widgetData:{label:"Random",units:"Data"}},providers:{[o.DataSource]:{providerId:u.providerId},[o.Adapter]:{providerId:n,properties:{componentId:"kpi3",propertyPath:"widgetData"}}}}}}},{id:"kpiWidgetId3",type:"kpi",pizzagna:{[E.Configuration]:{header:{properties:{title:"Here We Sync Only Labels and Units",subtitle:"Now only the label, and units are being synced"}},tiles:{properties:{nodes:["kpi1","kpi2","kpi3"]},providers:{kpiScaleSyncBroker:{providerId:W,properties:{scaleSyncConfig:[{id:"label"},{id:"units"}]}}}},kpi1:{id:"kpi1",componentType:d.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating",backgroundColor:"lightpink"}},providers:{[o.DataSource]:{providerId:l.providerId},[o.Adapter]:{providerId:n,properties:{componentId:"kpi1",propertyPath:"widgetData"}}}},kpi2:{id:"kpi2",componentType:d.lateLoadKey,properties:{widgetData:{label:"Another label which might be a pretty long one",units:"Which comes from somewhere",backgroundColor:"skyblue"}},providers:{[o.DataSource]:{providerId:c.providerId},[o.Adapter]:{providerId:n,properties:{componentId:"kpi2",propertyPath:"widgetData"}}}},kpi3:{id:"kpi3",componentType:d.lateLoadKey,properties:{widgetData:{label:"Random",units:"Data"}},providers:{[o.DataSource]:{providerId:u.providerId},[o.Adapter]:{providerId:n,properties:{componentId:"kpi3",propertyPath:"widgetData"}}}}}}}];export{l as a,c as b,u as c,ve as d};
