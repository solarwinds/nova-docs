import{Na as J,Oa as Q,ca as be,la as P,qa as Z}from"./chunk-JTZX6I73.js";import{Aa as De,Ba as H,Hd as Pe,Jd as ve,Kc as Fe,id as Ge,lc as D,ma as ge,na as Ee,nb as q,oa as Re,oc as K,pa as Se,qa as he,sd as Me,va as A,ya as Ae}from"./chunk-DKNPFPFG.js";import{e as V,f as h,k as fe,l as Ne}from"./chunk-TBX5YZGF.js";import{$b as W,Bc as X,F as v,G as b,Ha as I,Hc as M,Ib as x,Ic as z,Jc as Ce,Ka as L,Nb as p,Pb as n,Qa as w,Ra as E,Rb as Te,Sa as R,Sb as Ie,Vb as d,Wb as _,X as se,Xb as u,Yb as U,Zb as $,Zc as C,_ as le,_a as f,_b as ie,ec as G,gc as ue,h as te,hc as me,ic as O,jc as m,kc as B,la as y,lc as N,sc as S,tc as k,va as pe,vc as j,wb as r,xb as a,zc as Oe}from"./chunk-FGVILFLG.js";var je=()=>["formReady"];function Xe(t,c){}function ze(t,c){if(t&1){let e=W();U(0)(1,2,0),O("output",function(o){let s=E(e).$implicit,T=m();return R(T.onEvent(s.id,o))}),p(3,Xe,0,0,"ng-template",3),O("attached",function(o){E(e);let s=S(2);return R(s.attached(o))}),$()()}if(t&2){let e=c.$implicit,i=S(2);r(),n("componentId",e.id)("componentType",e.componentType)("providers",e.providers)("properties",e.properties)("outputs",X(6,je)),r(2),n("cdkPortalOutlet",i.portal)}}var It=(()=>{class t extends Q{static{this.lateLoadKey="FormStackComponent"}constructor(e,i,o,s,T){super(e,i,o),this.formDirective=s,this.eventBus=T,this.elementClass=""}ngOnInit(){this.form=this.formDirective.form}ngOnChanges(e){super.ngOnChanges(e)}onEvent(e,i){i.id==="formReady"&&this.addFormGroup(e,i.payload)}addFormGroup(e,i){this.form.addControl(e,i)}getNodes(){return this.nodes}static{this.\u0275fac=function(i){return new(i||t)(a(C),a(Z),a(D),a(A),a(be))}}static{this.\u0275cmp=I({type:t,selectors:[["nui-form-stack"]],hostVars:2,hostBindings:function(i,o){i&2&&Ie(o.elementClass)},inputs:{nodes:"nodes"},features:[Oe([],[{provide:Ee,useExisting:A}]),x,w],decls:1,vars:2,consts:[["componentPortal","nuiComponentPortal"],[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"output","componentId","componentType","providers","properties","outputs"],[3,"attached","cdkPortalOutlet"]],template:function(i,o){i&1&&p(0,ze,4,7,"ng-container",1),i&2&&n("ngForOf",o.nodeConfigs)("ngForTrackBy",o.trackByFn)},dependencies:[V,q,J],encapsulation:2})}}return t})();var Ve=[[["","headerText",""]],[["","headerButtons",""]],"*"],He=["[headerText]","[headerButtons]","*"],qe=()=>["formReady"];function Ke(t,c){t&1&&ie(0)}function Ze(t,c){t&1&&ie(0)}function Je(t,c){if(t&1&&(d(0,"div",6),k(1),_()),t&2){let e=m();n("title",e.headerText),r(),j(" ",e.headerText," ")}}function Qe(t,c){}function Ye(t,c){if(t&1){let e=W();U(0)(1,7,0),O("output",function(o){let s=E(e).$implicit,T=m();return R(T.onEvent(s.id,o))}),p(3,Qe,0,0,"ng-template",8),O("attached",function(o){E(e);let s=S(2);return R(s.attached(o))}),$()()}if(t&2){let e=c.$implicit,i=S(2);r(),n("componentId",e.id)("componentType",e.componentType)("providers",e.providers)("properties",e.properties)("outputs",X(6,qe)),r(2),n("cdkPortalOutlet",i.portal)}}var Dt=(()=>{class t extends Q{static{this.lateLoadKey="WidgetConfiguratorSectionComponent"}constructor(e,i,o,s){super(e,i,o),this.formBuilder=s,this.nodes=[],this.headerText="",this.formReady=new f,this.formDestroy=new f}getNodes(){return this.nodes}ngOnInit(){this.form=this.formBuilder.group({})}onEvent(e,i){i.id==="formReady"&&this.addFormGroup(e,i.payload),Object.keys(this.form.controls).length===this.getNodes().length&&this.formReady.emit(this.form)}addFormGroup(e,i){this.form.addControl(e,i)}ngOnDestroy(){this.formDestroy.emit(this.form),super.ngOnDestroy()}static{this.\u0275fac=function(i){return new(i||t)(a(C),a(Z),a(D),a(H))}}static{this.\u0275cmp=I({type:t,selectors:[["nui-widget-configurator-section"]],hostAttrs:[1,"nui-widget-configurator-section"],inputs:{headerTextTemplate:"headerTextTemplate",headerButtonsTemplate:"headerButtonsTemplate",nodes:"nodes",headerText:"headerText"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[x],ngContentSelectors:He,decls:9,vars:5,consts:[["componentPortal","nuiComponentPortal"],[1,"widget-configurator-section"],[1,"widget-configurator-section__header","d-flex","justify-content-between","align-items-center"],[4,"ngTemplateOutlet"],["headerText","","class","widget-configurator-section__header-text",3,"title",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["headerText","",1,"widget-configurator-section__header-text",3,"title"],["nuiComponentPortal","",3,"output","componentId","componentType","providers","properties","outputs"],[3,"attached","cdkPortalOutlet"]],template:function(i,o){i&1&&(B(Ve),d(0,"div",1)(1,"div",2),p(2,Ke,1,0,"ng-container",3)(3,Ze,1,0,"ng-container",3)(4,Je,2,2,"div",4),N(5),N(6,1),_(),p(7,Ye,4,7,"ng-container",5),N(8,2),_()),i&2&&(r(2),n("ngTemplateOutlet",o.headerTextTemplate),r(),n("ngTemplateOutlet",o.headerButtonsTemplate),r(),n("ngIf",o.headerText),r(3),n("ngForOf",o.nodeConfigs)("ngForTrackBy",o.trackByFn))},dependencies:[V,h,fe,q,J],styles:[`.widget-configurator-section{margin:15px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9)}.widget-configurator-section__header{padding:15px 5px 15px 15px;height:40px;font-size:16px;font-weight:600;background-color:var(--nui-color-bg-table_header,#f0f0f0);color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6))}.widget-configurator-section__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;text-overflow:ellipsis}
`],encapsulation:2,changeDetection:0})}}return t})();function et(t,c){if(t&1&&u(0,"nui-icon",6),t&2){let e=m();n("icon",e.headerIcon)("iconColor",e.iconColor)}}var Le=(()=>{class t{constructor(){this.subtitle="",this.headerTitle=""}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=I({type:t,selectors:[["nui-widget-editor-accordion-header"]],inputs:{headerIcon:"headerIcon",iconColor:"iconColor",subtitle:"subtitle",headerTitle:"headerTitle"},decls:7,vars:4,consts:()=>{let e;return e=$localize`:␟136bebdedfd259eb00e1a662111145e4bb97681a␟3280038422835881656: ${"\uFFFD0\uFFFD"}:INTERPOLATION: `,[e,[1,"d-flex","align-items-center","px-4","py-2"],["class","align-self-start pt-2",3,"icon","iconColor",4,"ngIf"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],[1,"nui-text-secondary",3,"title"],[1,"align-self-start","pt-2",3,"icon","iconColor"]]},template:function(i,o){i&1&&(d(0,"div",1),p(1,et,1,2,"nui-icon",2),d(2,"div",3)(3,"span",4),G(4,0),_(),d(5,"div",5),k(6),_()()()),i&2&&(r(),n("ngIf",o.headerIcon),r(3),ue(o.headerTitle),me(4),r(),n("title",o.subtitle),r(),j(" ",o.subtitle," "))},dependencies:[h,K],encapsulation:2})}}return t})();var we=(()=>{class t{constructor(){this.accordions=[]}registerAccordion(e){this.accordions.push({instance:e,openSubscription:e.openSubject.subscribe(()=>{this.closeAllAccordions(),e.open=!0}),destroySubscription:e.destroySubject.pipe(se(1)).subscribe(()=>{this.removeAccordion(e)})})}closeAllAccordions(){this.accordions.forEach(e=>{e.instance.closeAccordion()})}removeAccordion(e){let i=this.accordions.findIndex(o=>o.instance===e);this.accordions[i].openSubscription.unsubscribe(),this.accordions.splice(i,1)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=pe({token:t,factory:t.\u0275fac})}}return t})();var ot=[[["","accordionHeader",""],["nui-widget-editor-accordion-header"]],"*"],nt=["[accordionHeader], nui-widget-editor-accordion-header","*"];function rt(t,c){if(t&1&&u(0,"nui-icon",4),t&2){let e=m();n("icon",e.open?"triangle-down":"triangle-left")}}var xe=(()=>{class t{constructor(e,i){this.accordionCoordinator=e,this.cd=i,this.showOpenStateIcon=!0,this.state=P.DEFAULT,this.openToggle=new f,this.open=!1,this.openSubject=new te,this.destroySubject=new te}ngOnInit(){this.accordionCoordinator.registerAccordion(this)}openChange(e){this.openToggle.emit(e),e?this.openSubject.next():this.closeAccordion()}closeAccordion(){this.cd.markForCheck(),this.open=!1}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete()}static{this.\u0275fac=function(i){return new(i||t)(a(we),a(C))}}static{this.\u0275cmp=I({type:t,selectors:[["nui-widget-editor-accordion"]],inputs:{showOpenStateIcon:"showOpenStateIcon",state:"state"},outputs:{openToggle:"openToggle"},ngContentSelectors:nt,decls:6,vars:6,consts:[[1,"nui-widget-editor-accordion"],[3,"openChange","open"],["nuiExpanderHeader","",1,"d-flex","align-items-start"],["class","nui-widget-editor-accordion__edit-icon",3,"icon",4,"ngIf"],[1,"nui-widget-editor-accordion__edit-icon",3,"icon"]],template:function(i,o){i&1&&(B(ot),d(0,"div",0)(1,"nui-expander",1),O("openChange",function(T){return o.openChange(T)}),d(2,"div",2),N(3),p(4,rt,1,1,"nui-icon",3),_(),N(5,1),_()()),i&2&&(r(),n("open",o.open),r(),Te("error-state",o.state==="critical")("warning-state",o.state==="warning"),r(2),n("ngIf",o.showOpenStateIcon))},dependencies:[h,K,Pe],styles:[`.nui-widget-editor-accordion nui-form-field:last-child .nui-form-field{margin-bottom:0}.nui-widget-editor-accordion__edit-icon{padding:10px;margin-left:auto;margin-right:5px}.nui-widget-editor-accordion .nui-expander--expanded{padding-bottom:0}.nui-widget-editor-accordion .nui-expander__header-icon{display:none}.nui-widget-editor-accordion .nui-expander__header .error-state{background-color:var(--nui-color-semantic-critical-bg,#fceae6)}.nui-widget-editor-accordion .nui-expander__header .warning-state{background-color:var(--nui-color-semantic-warning-bg,#fff9e6)}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader]{border-top:1px solid;border-top-color:var(--nui-color-line-default,#d9d9d9);min-height:50px}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] nui-widget-editor-accordion-header,.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]{overflow:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] nui-widget-editor-accordion-header>div,.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div{overflow-x:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] nui-widget-editor-accordion-header>div .nui-text-secondary,.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div .nui-text-secondary{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget-editor-accordion .nui-expander__body{margin:0;padding:0;border-left:none}
`],encapsulation:2,changeDetection:0})}}return t})();function F(t){if(t.valid||t.untouched)return!1;if(t instanceof he)for(let c of Object.keys(t.controls)){let e=t.controls[c];if(F(e))return!0}if(t instanceof De)for(let c=0;c<t.length;c++){let e=t.at(c);if(F(e))return!0}return(t.touched||t.dirty)&&!!t.errors}var Ue=(()=>{class t{transform(e){if(!e)throw new Error("Provided form is undefined");return b([e.statusChanges,e.valueChanges]).pipe(y(null),v(()=>F(e)?P.CRITICAL:P.DEFAULT),le())}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=L({name:"nuiWidgetEditorAccordionFormState",type:t,pure:!1})}}return t})();var $e=(()=>{class t{static{this.ERROR_ICON_DEFAULT="status_critical"}transform(e,i,o=t.ERROR_ICON_DEFAULT){if(!e)throw new Error("Provided form is undefined");return b([e.statusChanges,e.valueChanges]).pipe(y(null),v(()=>F(e)?o:i))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=L({name:"nuiFormHeaderIconPipe",type:t,pure:!1})}}return t})();var ni=(()=>{class t{static{this.lateLoadKey="TitleAndDescriptionConfigurationComponent"}constructor(e,i,o){this.changeDetector=e,this.formBuilder=i,this.logger=o,this.formReady=new f,this.form=this.formBuilder.group({title:["",ge.required],subtitle:[""],url:[""],description:[""],collapsible:[!1],collapsed:[!0]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(e){e.title&&this.form.get("title")?.setValue(this.title),e.url&&this.form.get("url")?.setValue(this.url),e.subtitle&&this.form.get("subtitle")?.setValue(this.subtitle),e.description&&this.form.get("description")?.setValue(this.description),e.collapsible&&this.form.get("collapsible")?.setValue(this.collapsible)}getSecondaryText(){let e=this.form.controls.title.value||$localize`No title`,i=this.form.controls.subtitle.value||$localize`no subtitle`;return`${e}, ${i}`}static{this.\u0275fac=function(i){return new(i||t)(a(C),a(H),a(D))}}static{this.\u0275cmp=I({type:t,selectors:[["nui-title-and-description-configuration"]],inputs:{title:"title",url:"url",subtitle:"subtitle",description:"description",collapsible:"collapsible"},outputs:{formReady:"formReady"},features:[w],decls:25,vars:19,consts:()=>{let e;e=$localize`:␟f75e29ac7734f16cad4d02017646720be3030367␟1720994052291036243:Widget title`;let i;i=$localize`:␟eb94f6289d261b9d7b1288cf92c4099023695dd9␟2301126677959299103:Set widget title`;let o;o=$localize`:␟d2b3deab155463fe2b5ac59000b6e3aa7771afc8␟2073684406211180788:Widget subtitle`;let s;s=$localize`:␟b6d324cd44176b6e2bfe2ff16bbc7e7ee1c412fc␟8934433387734849172:Do not show a subtitle`;let T;T=$localize`:␟cb04bfea86b30d40d2d30630c957bf3fd2e50b83␟9207103926988831681:Widget link URL`;let oe;oe=$localize`:␟02773997819c014e0f299deb7cb8e054003850e1␟3668070782949850100:Do not link to another page`;let ne;ne=$localize`:␟ab83c23bd6135460422e95fca32b4ec38ddff9e6␟3861388441030158101:Widget description`;let re;re=$localize`:␟2f50115d11fc3e29acafe6f99228c2304cffb722␟3301579533722588311:This won't be shown on the widget, but can be helpful for
                          other users who want to re-use this widget on their own dashboards`;let ae;ae=$localize`:␟37b56526e384f843a15323dc730b484a97b4c968␟3830487495946043372:No description`;let de;de=$localize`:␟9de5a44cd2d54fe77e5c12131ab7a21792ce91df␟5450302501374652801:Hide widget header`;let ce;ce=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `;let _e;return _e=$localize`:␟6570353e3fb49053e2327cb92f257eab8ccdd274␟5369485165489692848:Collapsible`,[ce,_e,[3,"formGroup","state"],["headerTitle","Title and Description",3,"headerIcon","subtitle"],[1,"title-and-description-configuration__accordion-content"],[1,"mb-4"],["caption",e,3,"control"],["id","kpi-widget-title","formControlName","title","placeholder",i],["for","required"],["caption",o,3,"control"],["id","kpi-widget-subtitle","formControlName","subtitle","placeholder",s],["caption",T,3,"control"],["id","kpi-widget-url","formControlName","url","placeholder",oe],["caption",ne,"hint",re,3,"control"],["formControlName","description","placeholder",ae],["caption",de,3,"showOptionalText","control"],["formControlName","collapsible"]]},template:function(i,o){i&1&&(d(0,"nui-widget-editor-accordion",2),M(1,"nuiWidgetEditorAccordionFormState"),M(2,"async"),u(3,"nui-widget-editor-accordion-header",3),M(4,"nuiFormHeaderIconPipe"),M(5,"async"),d(6,"div",4)(7,"div",5)(8,"nui-form-field",6),u(9,"nui-textbox",7),d(10,"nui-validation-message",8),G(11,0),_()()(),d(12,"div",5)(13,"nui-form-field",9),u(14,"nui-textbox",10),_()(),d(15,"div",5)(16,"nui-form-field",11),u(17,"nui-textbox",12),_()(),d(18,"div",5)(19,"nui-form-field",13),u(20,"nui-textbox",14),_()(),d(21,"div")(22,"nui-form-field",15)(23,"nui-checkbox",16),G(24,1),_()()()()()),i&2&&(n("formGroup",o.form)("state",z(2,12,z(1,10,o.form))),r(3),n("headerIcon",z(5,17,Ce(4,14,o.form,"widget_list")))("subtitle",o.getSecondaryText()),r(5),n("control",o.form.get("title")),r(5),n("control",o.form.get("subtitle")),r(3),n("control",o.form.get("url")),r(3),n("control",o.form.get("description")),r(3),n("showOptionalText",!1)("control",o.form.get("collapsible")))},dependencies:[Re,Se,A,Ae,Me,ve,Fe,Ge,xe,Le,Ne,Ue,$e],styles:[".title-and-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0})}}return t})();export{It as a,we as b,Dt as c,Le as d,xe as e,Ue as f,$e as g,ni as h};
