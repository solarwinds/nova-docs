import{d as O,h as oe,i as re,j as P,k as R,l as ae}from"./chunk-QK5DMUAZ.js";import{a as ne}from"./chunk-ZKE5BQF3.js";import{Na as ie,c as I,ca as b,d as Q,ea as ee,ha as te,ka as L,m as W,w as x}from"./chunk-JTZX6I73.js";import{Dc as Y,Pc as X,Ud as J,nb as G,pc as H,wd as q}from"./chunk-DKNPFPFG.js";import{f as y}from"./chunk-TBX5YZGF.js";import{$b as v,Bc as Z,Eb as k,Ha as C,Lc as z,Nb as g,Pb as o,Qa as B,Ra as c,Rb as A,Sa as p,Sb as M,V,Vb as l,Wb as d,Xb as E,Yb as j,Za as N,Zb as $,Zc as D,_a as F,h as S,ic as h,jc as r,na as T,sc as w,tc as K,uc as U,wb as u,xb as s}from"./chunk-FGVILFLG.js";import{a as m,b as _}from"./chunk-T555DFTC.js";function ue(n,f){if(n&1){let e=v();l(0,"div",1)(1,"button",2),h("click",function(){c(e);let i=r();return p(i.onBack())}),d(),l(2,"button",3),h("click",function(){c(e);let i=r();return p(i.onHome())}),d(),l(3,"div",4),K(4),d()()}if(n&2){let e=r();u(),o("isRepeat",!0)("disabled",!(!(e.navBarConfig==null||e.navBarConfig.buttons==null||e.navBarConfig.buttons.back==null)&&e.navBarConfig.buttons.back.disabled)),u(),o("isRepeat",!0),u(2),U(e.navBarConfig==null?null:e.navBarConfig.label)}}var me=(()=>{class n{static{this.lateLoadKey="ListNavigationBarComponent"}constructor(e,t){this.changeDetector=e,this.eventBus=t,this.navigated=new F}onBack(){this.navBarConfig&&this.eventBus.getStream(x).next({payload:{back:this.navBarConfig?.buttons?.back?.disabled}})}onHome(){this.eventBus.getStream(x).next({payload:{reset:!0}})}static{this.\u0275fac=function(t){return new(t||n)(s(D),s(b))}}static{this.\u0275cmp=C({type:n,selectors:[["nui-navigation-bar"]],inputs:{navBarConfig:"navBarConfig"},outputs:{navigated:"navigated"},decls:1,vars:1,consts:[["class","list-nav-bar",4,"ngIf"],[1,"list-nav-bar"],["nui-button","","type","button","displayStyle","action","icon","arrow-left",3,"click","isRepeat","disabled"],["nui-button","","type","button","displayStyle","action","icon","overview",3,"click","isRepeat"],[1,"list-nav-bar__label"]],template:function(t,i){t&1&&g(0,ue,5,4,"div",0),t&2&&o("ngIf",i.navBarConfig&&!(i.navBarConfig!=null&&i.navBarConfig.isRoot))},dependencies:[y,H],styles:[".list-nav-bar[_ngcontent-%COMP%]{width:100%;margin:2px 0;padding:0 15px;display:flex;align-items:center}.list-nav-bar__label[_ngcontent-%COMP%]{padding-left:5px;color:#1119}"],changeDetection:0})}}return n})();var ge=()=>["navigated"];function he(n,f){if(n&1&&E(0,"nui-repeat",4),n&2){let e=r(),t=w(3);o("itemsSource",e.data)("repeatItemTemplateRef",t)}}function fe(n,f){n&1&&(l(0,"div",5),E(1,"nui-image",6),d())}function _e(n,f){n&1&&(l(0,"div",5),E(1,"nui-image",6),d())}function Ce(n,f){}function ve(n,f){if(n&1){let e=v();g(0,_e,2,0,"div",3),j(1,7,1),h("output",function(){let i=c(e).item,a=r();return p(a.onListItemEvent(i))}),g(3,Ce,0,0,"ng-template",8),h("attached",function(i){c(e);let a=w(2);return p(a.attached(i))}),$()}if(n&2){let e=f.item,t=w(2),i=r();o("ngIf",!e),u(),o("componentId",i.configuration.componentType)("componentType",i.configuration.componentType)("properties",i.getPropsFor(e))("outputs",Z(6,ge)),u(2),o("cdkPortalOutlet",t.portal)}}var ye=10,le=(()=>{class n{static{this.lateLoadKey="ListWidgetComponent"}constructor(e,t,i,a){this.changeDetector=e,this.zone=t,this.host=i,this.eventBus=a,this.itemFormatterProps=new Map,this.destroy$=new S}ngOnInit(){this.initResizeObserver()}ngOnChanges(e){e.data?.currentValue&&e.data.currentValue.forEach(t=>this.itemFormatterProps.set(t,this.calcItemProps(t)))}onListItemEvent(e){this.eventBus.getStream(x).next({payload:e})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.itemFormatterProps.clear()}getPropsFor(e){return _(m({},this.itemFormatterProps.get(e)),{widgetWidth:this.widgetWidth})}shouldDisplayRepeat(){return this.data?.length>0}calcItemProps(e){return this.configuration?m(m({},ne(this.configuration,e)),this.configuration.itemProperties):e}initResizeObserver(){let e=new Y(this.host,this.zone);e.debounceTime=ye,e.ngAfterViewInit(),e.containerResize.pipe(T(this.destroy$)).subscribe(()=>{this.widgetWidth=this.host.nativeElement.offsetWidth})}static{this.\u0275fac=function(t){return new(t||n)(s(D),s(k),s(N),s(b))}}static{this.\u0275cmp=C({type:n,selectors:[["nui-list-widget"]],hostVars:2,hostBindings:function(t,i){t&2&&M(i.elementClass)},inputs:{data:"data",configuration:"configuration",elementClass:"elementClass"},features:[B],decls:4,vars:2,consts:[["repeatItemTemplate",""],["componentPortal","nuiComponentPortal"],[3,"itemsSource","repeatItemTemplateRef",4,"ngIf"],["class","empty",4,"ngIf"],[3,"itemsSource","repeatItemTemplateRef"],[1,"empty"],["image","no-data-to-show"],["nuiComponentPortal","",3,"output","componentId","componentType","properties","outputs"],[3,"attached","cdkPortalOutlet"]],template:function(t,i){t&1&&g(0,he,1,2,"nui-repeat",2)(1,fe,2,0,"div",3)(2,ve,4,7,"ng-template",null,0,z),t&2&&(o("ngIf",i.shouldDisplayRepeat()),u(),o("ngIf",!i.shouldDisplayRepeat()))},dependencies:[y,X,G,ie,q],styles:["[_nghost-%COMP%]{height:100%;overflow:auto}.empty[_ngcontent-%COMP%]{height:100%;display:grid;place-content:center}"]})}}return n})();function be(n,f){if(n&1){let e=v();l(0,"nui-search",1),h("inputChange",function(i){c(e);let a=r();return p(a.onSearchInputChanged(i))})("cancel",function(i){c(e);let a=r();return p(a.onSearch(i))})("search",function(i){c(e);let a=r();return p(a.onSearch(i))}),d()}if(n&2){let e=r();o("value",e.searchValue)}}var de=(()=>{class n{static{this.lateLoadKey="WidgetSearchComponent"}static{this.defaultSearchDebounce=500}constructor(e,t){this.dataSource=e,this.eventBus=t,this.enabled=!1,this.searchTerm$=new S,this.destroy$=new S}ngOnInit(){this.dataSource.features?.getSupportedFeatures()?.search?.enabled&&(this.enabled=!0),this.registerFilters(),this.handleSearchTermSubscription(this.configuration?.searchOnKeyUp)}ngOnChanges(e){if(e.configuration){let t=e.configuration.currentValue;this.handleSearchTermSubscription(t.searchOnKeyUp)}}onSearchInputChanged(e){this.configuration?.searchOnKeyUp?.enabled&&(this.searchValue=e,this.searchTerm$.next(e))}onSearch(e){this.searchValue=e,this.searchTerm$.next(e)}ngOnDestroy(){this.eventBus.getStream(W).next({payload:""}),this.destroy$.next(),this.destroy$.complete()}registerFilters(){this.dataSource?.registerComponent({search:{componentInstance:{getFilters:()=>({value:this.searchValue})}}})}handleSearchTermSubscription(e){this.searchTermSubscription?.unsubscribe(),this.searchTermSubscription=this.searchTerm$.pipe(T(this.destroy$),V(e?.debounceTime||n.defaultSearchDebounce)).subscribe(t=>{this.eventBus.getStream(Q).next({}),this.eventBus.getStream(W).next({payload:t})})}static{this.\u0275fac=function(t){return new(t||n)(s(ee,8),s(b))}}static{this.\u0275cmp=C({type:n,selectors:[["nui-widget-search"]],hostVars:4,hostBindings:function(t,i){t&2&&A("default",i.enabled)("invisible",!i.enabled)},inputs:{configuration:"configuration",searchValue:"searchValue"},features:[B],decls:1,vars:1,consts:[["class","unlimited-width",3,"value","inputChange","cancel","search",4,"ngIf"],[1,"unlimited-width",3,"inputChange","cancel","search","value"]],template:function(t,i){t&1&&g(0,be,1,1,"nui-search",0),t&2&&o("ngIf",i.enabled)},dependencies:[y,J],styles:[".default[_nghost-%COMP%]{padding:5px 10px}.invisible[_nghost-%COMP%]{height:0}"],changeDetection:0})}}return n})();var it={[L.Structure]:_(m(_(m({[I]:{id:I,componentType:O.lateLoadKey,properties:{nodes:["header","loading","search","body"]},providers:{[te.EventProxy]:ae}},header:oe,loading:re,body:_(m({},P),{properties:_(m({},P.properties),{elementClass:"overflow-auto"})})},R("listWidget")),{search:{id:"search",componentType:de.lateLoadKey}}),R("mainContent")),{mainContent:{id:"mainContent",componentType:O.lateLoadKey,properties:{nodes:["navigationBar","listWidget"]}},navigationBar:{id:"navigationBar",componentType:me.lateLoadKey},listWidget:{id:"listWidget",componentType:le.lateLoadKey,providers:{},properties:{elementClass:"w-100 p-3"}}}),[L.Configuration]:{[I]:{id:I},header:{properties:{title:$localize`Empty Custom Widget`}}}};export{me as a,le as b,de as c,it as d};
