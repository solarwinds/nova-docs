import{a as Ie,g as Fe,j as ye}from"./chunk-XIF3MCYI.js";import{a as he}from"./chunk-DSSERSRF.js";import{a as h}from"./chunk-HIJRDBV6.js";import{a as Ne}from"./chunk-MWCS5XML.js";import{Da as Re,Ja as Ae,Ka as ve,ea as Se,ha as Ce,ia as Oe,ka as fe}from"./chunk-JTZX6I73.js";import{$c as pe,Ba as le,C as Xe,Jd as Me,Yc as Te,id as me,kc as we,lc as de,ma as G,md as Ee,nc as _e,oa as ie,oc as B,pa as oe,pc as ce,sd as ue,ta as ne,va as ae,wa as re,xe as ge,ya as se}from"./chunk-DKNPFPFG.js";import{e as ee,f as b,l as te}from"./chunk-TBX5YZGF.js";import{$b as X,Bc as Y,Ha as A,Hc as D,Ib as K,Ic as x,Lc as V,Nb as g,Ob as q,Pb as r,Qb as k,Ra as v,Sa as I,Vb as s,Wb as l,Xb as C,Zc as y,cc as H,dc as J,ec as O,i as j,ic as Q,jc as S,sc as w,tc as f,vc as $,wb as a,wc as N,xb as u,xc as F,yc as U}from"./chunk-FGVILFLG.js";import{g as Z,i as L}from"./chunk-T555DFTC.js";var Pe=Z(Xe()),Le=Z(we());function $e(i,m){if(i&1&&(s(0,"div",2),C(1,"nui-icon",3),l()),i&2){let e=S();a(),r("icon",e.icon)}}var Ue=()=>({width:36});function De(i,m){if(i&1&&(s(0,"nui-select-v2-option",18),f(1),l()),i&2){let e=m.$implicit;r("value",e.id),a(),$(" ",e.label," ")}}function xe(i,m){if(i&1&&(s(0,"nui-select-v2-option",19),H(1,5),C(2,"nui-icon",20),J(),l()),i&2){let e=m.$implicit;r("value",e),a(2),r("icon",e)}}function Ve(i,m){if(i&1&&(s(0,"div",24),C(1,"nui-icon",20),l()),i&2){let e=S().$implicit;a(),r("icon",e)}}function Ge(i,m){i&1&&(s(0,"span",25),f(1,"Select Item"),l())}function Be(i,m){if(i&1&&(s(0,"div",21),g(1,Ve,2,1,"div",22),C(2,"nui-icon",23),l(),g(3,Ge,2,0,"ng-template",null,1,V)),i&2){let e=m.$implicit,o=m.open,t=w(4);a(),r("ngIf",e)("ngIfElse",t),a(),k("transform",o?"rotate(180deg)":"")}}var z=".dashboard[_ngcontent-%COMP%]{height:400px}.custom-formatter-configurator__icon-select-template[_ngcontent-%COMP%]{height:20px}";function We(i,m){if(i&1){let e=X();s(0,"button",6),Q("click",function(){v(e);let t=S();return I(t.reInitializeDashboard())}),f(1," Restore Widget "),l()}}function ze(i,m){if(i&1){let e=X();s(0,"nui-dashboard",7),U("dashboardChange",function(t){v(e);let n=S();return F(n.dashboard,t)||(n.dashboard=t),I(t)})("gridsterConfigChange",function(t){v(e);let n=S();return F(n.gridsterConfig,t)||(n.gridsterConfig=t),I(t)}),l()}if(i&2){let e=S();N("dashboard",e.dashboard),r("editMode",e.editMode),N("gridsterConfig",e.gridsterConfig)}}var R="https://api.punkapi.com/v2/beers",W=(()=>{class i{static{this.lateLoadKey="CustomFormatterComponent"}constructor(e){this.changeDetector=e}isAboveThreshold(){return parseFloat(this.threshold)<=this.data.value}static{this.\u0275fac=function(o){return new(o||i)(u(y))}}static{this.\u0275cmp=A({type:i,selectors:[["custom-formatter"]],hostAttrs:[1,"d-flex"],inputs:{data:"data",icon:"icon",threshold:"threshold"},decls:4,vars:3,consts:[[1,"d-inline-flex","w-100"],["class","mr-2 d-flex align-items-center",4,"ngIf"],[1,"mr-2","d-flex","align-items-center"],[3,"icon"]],template:function(o,t){o&1&&(s(0,"div",0),g(1,$e,2,1,"div",1),s(2,"div"),f(3),l()()),o&2&&(a(),r("ngIf",t.icon&&t.isAboveThreshold()),a(),q("data-value",t.data.value),a(),$(" ",t.data.value," "))},dependencies:[b,B],styles:[z]})}}return i})(),be=(()=>{class i extends Fe{static{this.lateLoadKey="CustomFormatterConfiguratorComponent"}constructor(e,o,t,n,d){super(e,o,t,n),this.iconService=d,this.options=[]}ngOnInit(){for(let e of this.iconService.icons)e.category==="severity"&&this.options.push(e.name)}addCustomFormControls(e){e.addControl("icon",this.formBuilder.control("",G.required)),e.addControl("threshold",this.formBuilder.control(null,G.required))}static{this.\u0275fac=function(o){return new(o||i)(u(y),u(Ne),u(le),u(de),u(_e))}}static{this.\u0275cmp=A({type:i,selectors:[["custom-formatter-configurator"]],features:[K],decls:22,vars:15,consts:()=>{let e;e=$localize`:␟5049e204c14c648691ac775a64fb504467aeb549␟6555318547274416232:Value`;let o;o=$localize`:␟8963500ed15311446b0523f2611efedf72556b0a␟3855456680169888833:Select value`;let t;t=$localize`:caption | displayed above the icon selection field␟fd8543daec71ca70e94c905a25fa2defaf8d60ea␟7861991600556423311:Icon`;let n;n=$localize`:␟48706c96c19919d44ca7ec6cc81d354c8a452105␟6798423092221387663:Select icon`;let d;d=$localize`:caption | displayed above the threshold textbox␟8bd51130ce656edded4f36f1adb4bd5304bd4292␟903859908728646095:A.B.V. Threshold`;let _;_=$localize`:␟d1805ee940331c69e00628a2af158d6ca5a83fc8␟2311294945879906773:Set threshold`;let c;c=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `;let p;p=$localize`:error message | displayed on blur when icon
                            selection is empty␟c9193339ab5c8a937de6a4df4e04e11994af7288␟2731993003394049626: This field is required `;let E;E=$localize`:error message | displayed on blur when threshold
                            selection is empty␟c9193339ab5c8a937de6a4df4e04e11994af7288␟2731993003394049626: This field is required `;let T;return T=$localize`:␟ddd83bb589d374d09da67f54c6ff12d85bf83577␟9083580692611036294:${"\uFFFD#2\uFFFD"}:START_TAG_NUI_ICON:${"\uFFFD/#2\uFFFD"}:CLOSE_TAG_NUI_ICON:`,[["iconSelectTemplate",""],["empty",""],c,p,E,T,[3,"formGroup"],["formGroupName","dataFieldIds",1,"mt-4"],["caption",e,3,"control"],["placeholder",o,"formControlName","value",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],[1,"mt-4"],["caption",t,3,"control"],["placeholder",n,"formControlName","icon",3,"popupViewportMargin","displayValueTemplate","overlayConfig"],["class","d-flex align-items-center",3,"value",4,"ngFor","ngForOf"],["caption",d,3,"control"],["type","number","formControlName","threshold","placeholder",_],[3,"value"],[1,"d-flex","align-items-center",3,"value"],[3,"icon"],[1,"nui-select-v2__value"],["class","d-flex align-items-center nui-select-v2__value-content",4,"ngIf","ngIfElse"],["icon","caret-down"],[1,"d-flex","align-items-center","nui-select-v2__value-content"],[1,"nui-select-v2__placeholder"]]},template:function(o,t){if(o&1&&(s(0,"form",6)(1,"div",7)(2,"nui-form-field",8)(3,"nui-select-v2",9),D(4,"async"),g(5,De,2,2,"nui-select-v2-option",10),l(),s(6,"nui-validation-message",11),O(7,2),l()()(),s(8,"div",12)(9,"nui-form-field",13)(10,"nui-select-v2",14),D(11,"async"),g(12,xe,3,2,"nui-select-v2-option",15),l(),s(13,"nui-validation-message",11),O(14,3),l()()(),s(15,"div",12)(16,"nui-form-field",16),C(17,"nui-textbox",17),s(18,"nui-validation-message",11),O(19,4),l()()()(),g(20,Be,5,4,"ng-template",null,0,V)),o&2){let n=w(21);r("formGroup",t.form),a(2),r("control",t.dataFieldIds.controls.value),a(),r("popupViewportMargin",x(4,10,t.configuratorHeading.height$)),a(2),r("ngForOf",t.dropdownItems.value),a(4),r("control",t.form.controls.icon),a(),r("popupViewportMargin",x(11,12,t.configuratorHeading.height$))("displayValueTemplate",n)("overlayConfig",Y(14,Ue)),a(2),r("ngForOf",t.options),a(4),r("control",t.form.controls.threshold)}},dependencies:[ee,b,Me,ue,Ee,pe,me,B,ne,ie,oe,ae,se,re,te],styles:[z]})}}return i})(),ct=(()=>{class i{constructor(e,o,t,n,d){this.widgetTypesService=e,this.providerRegistry=o,this.componentRegistry=t,this.tableFormatterRegistryService=n,this.changeDetectorRef=d,this.editMode=!1,this.gridsterConfig={},this.componentRegistry.registerByLateLoadKey(be),this.componentRegistry.registerByLateLoadKey(W);let _=this.widgetTypesService.getWidgetType("table",1),c=[{componentType:h.lateLoadKey,label:$localize`:table formatter|:No formatter`,dataTypes:{value:null}},{componentType:W.lateLoadKey,label:$localize`:table formatter|:Custom formatter`,configurationComponent:be.lateLoadKey,dataTypes:{value:["abv"]}}];this.tableFormatterRegistryService.addItems(c),this.widgetTypesService.setNode(_,"configurator",Oe.DataSourceProviders,[P.providerId]),this.providerRegistry.setProviders({[P.providerId]:{provide:Se,useClass:P,deps:[]}})}ngOnInit(){this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){let e=Ze,o={[e.id]:this.widgetTypesService.mergeWithWidgetType(e)},t={[e.id]:{cols:12,rows:6,y:0,x:0}};this.dashboard={positions:t,widgets:o}}static{this.\u0275fac=function(o){return new(o||i)(u(he),u(Ae),u(ve),u(Re),u(y))}}static{this.\u0275cmp=A({type:i,selectors:[["custom-formatter-example"]],decls:6,vars:3,consts:()=>{let e;return e=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[e,[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"valueChange","value"],["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboardChange","gridsterConfigChange","dashboard","editMode","gridsterConfig"]]},template:function(o,t){o&1&&(s(0,"div",1)(1,"nui-switch",2),U("valueChange",function(d){return F(t.editMode,d)||(t.editMode=d),d}),O(2,0),l(),g(3,We,2,0,"button",3),l(),s(4,"div",4),g(5,ze,1,3,"nui-dashboard",5),l()),o&2&&(a(),N("value",t.editMode),a(2),r("ngIf",!(t.dashboard!=null&&t.dashboard.widgets.tableWidgetId)),a(2),r("ngIf",t.dashboard))},dependencies:[b,ce,Ie,ye,Te],styles:[z]})}}return i})(),P=(()=>{class i extends ge{static{this.providerId="BeerDataSource"}constructor(e){super(),this.logger=e,this.cache=Array.from({length:0}),this.totalItems=325,this.page=1,this.busy=new j(!1),this.dataFields=[{id:"id",label:"No",dataType:"number"},{id:"name",label:"Name",dataType:"string"},{id:"tagline",label:"Tagline",dataType:"string"},{id:"first_brewed",label:"First Brewed",dataType:"string"},{id:"description",label:"Description",dataType:"string"},{id:"brewers_tips",label:"Brewer's Tips",dataType:"string"},{id:"abv",label:"Alcohol By Volume",dataType:"abv"}]}getFilteredData(e){return L(this,null,function*(){let o=e.virtualScroll?.value?.start??0,t=e.virtualScroll?.value?.end??0,n=t-o;if(o===0&&(this.cache=[]),e.sorter?.value&&!(0,Pe.default)(this.lastSortValue,e.sorter.value)&&e.virtualScroll?.value.start===0&&this.lastVirtualScroll){let d=Math.ceil(n?this.totalItems/n:1),_=Math.max(n<80?n:80,1),c=null,p;if(e.sorter?.value?.direction==="desc"){this.cache=[];for(let E=0;E<this.page;++E)c=yield(yield fetch(`${R}/?page=${d-E||1}&per_page=${_}`)).json(),c&&c.length<_&&this.page++,p={brewInfo:c?.map(T=>({id:T.id,name:T.name,tagline:T.tagline,first_brewed:T.first_brewed,description:T.description,brewers_tips:T.brewers_tips})),total:c?.length},this.cache=d-E!==0?this.cache.concat(p.brewInfo):this.cache}if(e.sorter?.value?.direction==="asc"){this.cache=[];for(let E=0;E<this.page;E++)c=yield(yield fetch(`${R}/?page=${E+1}&per_page=${_}`)).json(),p={brewInfo:c?.map(T=>({id:T.id,name:T.name,tagline:T.tagline,first_brewed:T.first_brewed,description:T.description,brewers_tips:T.brewers_tips})),total:c?.length},this.cache=this.cache.concat(p.brewInfo)}return this.lastSortValue=e.sorter?.value,this.lastVirtualScroll=e.virtualScroll?.value,{result:{repeat:{itemsSource:this.sortData(this.cache,e)},paginator:{total:this.totalItems},dataFields:this.dataFields}}}return this.busy.next(!0),new Promise(d=>{setTimeout(()=>{this.getData(o,t,e).then(_=>{_&&(this.cache=this.cache.concat(_.brewInfo),this.dataSubject.next(this.cache),d({result:{repeat:{itemsSource:this.sortData(this.cache,e)},paginator:{total:this.totalItems},dataFields:this.dataFields}}),this.lastSortValue=e.sorter?.value,this.lastVirtualScroll=e.virtualScroll?.value,this.busy.next(!1))})},500)})})}getData(e=0,o=20,t){return L(this,null,function*(){let n=o-e,d=Math.ceil(n?this.totalItems/n:1),_=null,c=Math.max(n<80?n:80,1);return t.sorter?.value?.direction==="asc"&&(_=yield(yield fetch(`${R}/?page=${this.page}&per_page=${c}`)).json()),t.sorter?.value?.direction==="desc"&&(_=yield(yield fetch(`${R}/?page=${d-this.page}&per_page=${c}`)).json()),t.sorter||(_=yield(yield fetch(`${R}/?page=${this.page}&per_page=${c}`)).json()),{brewInfo:_?.map((p,E)=>({id:p.id,abv:p.abv,name:p.name,tagline:p.tagline,first_brewed:p.first_brewed,description:p.description,brewers_tips:p.brewers_tips})),total:_?.length}})}sortData(e,o){return(0,Le.default)(e,o.sorter?.value?.sortBy,o.sorter?.value?.direction)}}return i})(),Ze={id:"tableWidgetId",type:"table",pizzagna:{[fe.Configuration]:{header:{properties:{title:"Stupendous Suds",subtitle:"Try These Brilliant Brews"}},table:{providers:{[Ce.DataSource]:{providerId:P.providerId}},properties:{configuration:{columns:[{id:"column1",label:"Beer Name",isActive:!0,width:185,formatter:{componentType:h.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column2",label:"Tagline",isActive:!0,width:250,formatter:{componentType:h.lateLoadKey,properties:{dataFieldIds:{value:"tagline"}}}},{id:"column3",label:"Alcohol By Volume",isActive:!0,width:150,formatter:{componentType:W.lateLoadKey,properties:{dataFieldIds:{value:"abv"},icon:"severity_error",threshold:"5"}}},{id:"column4",label:"Description",isActive:!0,formatter:{componentType:h.lateLoadKey,properties:{dataFieldIds:{value:"description"}}}}],sorterConfiguration:{descendantSorting:!1,sortBy:""},hasVirtualScroll:!0}}}}}};export{R as a,W as b,be as c,ct as d,P as e,Ze as f};
