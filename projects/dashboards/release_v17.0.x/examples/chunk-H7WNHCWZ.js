import{a as g,b as y,e as v,f as S}from"./chunk-SCLKYUYR.js";import{C as $,kc as T,lc as m,xe as p}from"./chunk-DKNPFPFG.js";import{Aa as h,i as u,va as d}from"./chunk-FGVILFLG.js";import{g as n,i as o}from"./chunk-T555DFTC.js";var s=n($()),b=n(T());var x=(()=>{class r extends p{static{this.providerId="RandomUserDataSource"}constructor(t){super(),this.logger=t,this.seed="sw",this.cache=Array.from({length:0}),this.page=1,this.busy=new u(!1),this.dataFields=[{id:"no",label:$localize`No`,dataType:"number"},{id:"nameTitle",label:$localize`Title`,dataType:"string"},{id:"nameFirst",label:$localize`First`,dataType:"string"},{id:"nameLast",label:$localize`Last`,dataType:"string"},{id:"gender",label:$localize`Gender`,dataType:"string"},{id:"country",label:$localize`Country`,dataType:"string"},{id:"city",label:$localize`City`,dataType:"string"},{id:"postcode",label:$localize`Postcode`,dataType:"number"},{id:"email",label:$localize`E-Mail`,dataType:"string"},{id:"cell",label:$localize`Cell`,dataType:"string"}]}getFilteredData(t){return o(this,null,function*(){if(t.sorter?.value&&!(0,s.default)(this.lastSortValue,t.sorter.value)&&(0,s.default)(this.lastVirtualScroll,t.virtualScroll?.value))return this.lastSortValue=t.sorter?.value,this.lastVirtualScroll=t.virtualScroll?.value,{repeat:{itemsSource:this.sortData(this.cache,t)},paginator:{total:200},dataFields:this.dataFields};this.busy.next(!0);let e=t.virtualScroll&&t.virtualScroll.value,i=e?t.virtualScroll?.value.start:0,a=e?t.virtualScroll?.value.end:0;return new Promise(l=>{setTimeout(()=>{this.getData(i,a).then(c=>{c&&(this.cache=this.cache.concat(c.users),this.dataSubject.next(this.cache),l({repeat:{itemsSource:this.sortData(this.cache,t)},paginator:{total:200},dataFields:this.dataFields}),this.lastSortValue=t.sorter?.value,this.lastVirtualScroll=t.virtualScroll?.value,this.busy.next(!1))})},300)})})}getData(t=0,e=20){return o(this,null,function*(){let i=null;try{return i=yield(yield fetch(`${g}/${y}/${v}/?page=${this.page}&results=${e-t}&seed=${this.seed}`)).json(),{users:i?.results.map((a,l)=>({no:this.cache.length+l+1,nameTitle:a.name.title,nameFirst:a.name.first,nameLast:a.name.last,gender:a.gender,country:a.location.country,city:a.location.city,postcode:a.location.postcode,email:a.email,cell:a.cell})),total:i?.results.length,start:t}}catch{this.logger.error(S)}})}sortData(t,e){return(0,b.default)(t,e.sorter?.value?.sortBy,e.sorter?.value?.direction)}static{this.\u0275fac=function(e){return new(e||r)(h(m))}}static{this.\u0275prov=d({token:r,factory:r.\u0275fac})}}return r})();export{x as a};
