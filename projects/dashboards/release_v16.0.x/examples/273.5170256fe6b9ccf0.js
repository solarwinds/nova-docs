"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[273],{46273:(K,v,s)=>{s.r(v),s.d(v,{ConfiguratorTestModule:()=>$});var y=s(49432),a=s(85907),e=s(8599),b=s(6011),c=s(30321),l=s(21710),g=s(26260),h=s(61523),I=s(97861),T=s.n(I),u=s(52667),w=s(31451),D=s(76211),C=s(54739),t=s(99019),R=s(70716),W=s.n(R),M=s(6447),A=s.n(M),f=s(34176);const E={widget1:{cols:6,rows:6,y:0,x:0},widget2:{cols:6,rows:6,y:0,x:6},widget3:{cols:7,rows:6,y:6,x:0},widget4:{cols:5,rows:6,y:6,x:7}},m=[{id:"widget1",type:"kpi",pizzagna:{[e.K8R.Configuration]:{header:{properties:{title:"KPI Widget!",subtitle:"A bunch of number boxes"}},tiles:{properties:{nodes:["kpi1","kpi2"]}},kpi1:{id:"kpi1",componentType:e.kPo.lateLoadKey,providers:{[e.ShF.DataSource]:{providerId:c.Ml.providerId},[e.ShF.Adapter]:{providerId:e.YcW,properties:{componentId:"kpi1",propertyPath:"widgetData",thresholds:{showThresholds:!0,warningThresholdValue:5,criticalThresholdValue:8}}}},properties:{elementClass:"flex-grow-1",widgetData:{id:"totalStorage",value:0,label:"Total storage"}}},kpi2:{id:"kpi2",componentType:e.kPo.lateLoadKey,providers:{[e.ShF.DataSource]:{providerId:c.se.providerId},[e.ShF.Adapter]:{providerId:e.YcW,properties:{componentId:"kpi2",propertyPath:"widgetData",thresholds:{warningThresholdValue:120,criticalThresholdValue:150}}}},properties:{elementClass:"flex-grow-1",widgetData:{id:"downloadSpeed",value:0,label:"Download speed"}}}}}},{id:"widget2",type:"proportional",pizzagna:{[e.K8R.Configuration]:{header:{properties:{title:"Proportional Widget!",subtitle:"Proportional widget with legend formatters"}},chart:{providers:{[e.ShF.DataSource]:{providerId:l.n.providerId}},properties:{configuration:{chartOptions:{type:e.nEW.PieChart,legendPlacement:e.z4j.Right,legendFormatter:{componentType:e.awW.lateLoadKey}}}}}}}},{id:"widget3",type:"timeseries",pizzagna:{[e.K8R.Configuration]:{[e.ocI]:{providers:{[e.ShF.DataSource]:{providerId:h.gL.providerId}}},header:{properties:{title:"Timeseries Widget!",subtitle:"Basic timeseries widget"}},chart:{providers:{[e.ShF.Adapter]:{properties:{series:[{id:"series-1",label:"Average CPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"},{id:"series-3",label:"Average CPU Load",selectedSeriesId:"series-3"}]}}},properties:{configuration:{legendPlacement:e.z4j.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)"}}},timeframeSelection:{properties:{timeframe:{startDatetime:(0,f.gu)().subtract(7,"day").format(),endDatetime:(0,f.gu)().format(),selectedPresetId:null}}}}}},{id:"widget4",type:"table",pizzagna:{[e.K8R.Configuration]:{header:{properties:{title:"Table Widget!",subtitle:"Basic table widget"}},table:{providers:{[e.ShF.DataSource]:{providerId:g.c.providerId}},properties:{configuration:{columns:[{id:"column1",label:"No",isActive:!0,formatter:{componentType:e.cpx.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:e.cpx.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Location",isActive:!0,formatter:{componentType:e.awW.lateLoadKey,properties:{dataFieldIds:{value:"firstUrlLabel",link:"firstUrl"}}}}],sorterConfiguration:{descendantSorting:!0,sortBy:"column1"},hasVirtualScroll:!0}}}}}}];function P(d,N){if(1&d&&(t.j41(0,"div",3)(1,"div",4),t.EFF(2),t.k0s()()),2&d){const o=N.item;t.R7$(2),t.SpI(" ",o.title," ")}}let O=(()=>{class d{static{this.lateLoadKey="AcmeCloneSelectionComponent"}constructor(o){this.widgetTypesService=o,this.widgetSelected=new t.bkB,this.widgetItems=[]}ngOnInit(){const o=new C.PV;this.widgetItems=m.map(i=>(console.log(i),{title:o.transform(i.type),widget:this.widgetTypesService.mergeWithWidgetType(i)})),this.onSelect([this.widgetItems[0]]),m.forEach(i=>{this.addUnconfiguredWidgetWithConfigLayer(i)})}addUnconfiguredWidgetWithConfigLayer(o){const i=(new C.PV).transform(o.type);this.widgetItems.push({title:`Unconfigured ${i} With Config Layer`,widget:{...W()(this.widgetTypesService.mergeWithWidgetType(o)),id:`unconfiguredWithConfigLayer${i}`,metadata:{needsConfiguration:!0}}}),A()(this.widgetItems[this.widgetItems.length-1].widget.pizzagna,`${e.K8R.Configuration}.header.properties.title`,`Unconfigured ${i} With Config Layer`)}onSelect(o){this.widgetSelected.emit(o[0].widget),this.widgetSelection=o}static{this.\u0275fac=function(i){return new(i||d)(t.rXU(e.Dz_))}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["acme-clone-selection"]],outputs:{widgetSelected:"widgetSelected"},decls:4,vars:3,consts:[[1,"nui-widget-cloner"],["selectionMode","singleWithRequiredSelection",3,"itemsSource","selection","repeatItemTemplateRef","selectionChange"],["widgetClonerItem",""],[1,"nui-widget-cloner__item","d-flex","pt-2","pb-2","align-items-center"],[1,"text-info","ml-3"]],template:function(i,r){if(1&i&&(t.j41(0,"div",0)(1,"nui-repeat",1),t.bIt("selectionChange",function(p){return r.onSelect(p)}),t.k0s()(),t.DNE(2,P,3,1,"ng-template",null,2,t.C5r)),2&i){const n=t.sdS(3);t.R7$(1),t.Y8G("itemsSource",r.widgetItems)("selection",r.widgetSelection)("repeatItemTemplateRef",n)}},dependencies:[a.BWW],styles:[".nui-widget-cloner__item[_ngcontent-%COMP%]{height:60px}"]})}}return d})(),S=(()=>{class d{constructor(o){this.toastService=o,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=i=>{const r=new u.B;return setTimeout(()=>{if(this.allowSubmit)r.next(i);else{const n=$localize`Submit failed.`;this.toastService.error({title:n}),r.error(n)}},1e3),r.asObservable()},this.tryRemove=i=>{const r=new u.B;return setTimeout(()=>{if(this.allowRemoval)r.next(i);else{const n=$localize`Widget removal failed.`;this.toastService.error({title:n}),r.error(n)}},200),r.asObservable()},this.toastService.setConfig({timeOut:2e3})}static{this.\u0275fac=function(i){return new(i||d)(t.KVO(a.fwc))}}static{this.\u0275prov=t.jDH({token:d,factory:d.\u0275fac})}}return d})();var L=s(38723),U=s(17955),z=s(67432);const F=[{path:"",component:(()=>{class d{constructor(o,i,r,n,p){this.providerRegistry=o,this.submitHandler=i,this.themeSwitcherService=r,this.widgetTypesService=n,this.widgetClonerService=p,this.destroy$=new u.B,this.dashboard={positions:{},widgets:{}},this.gridsterConfig={minCols:12,maxCols:12,minRows:12},this.editMode=!1,this.dsError=!1,this.providerRegistry.setProviders({[c.Ml.providerId]:{provide:e.R9t,useClass:c.Ml,deps:[]},[c.se.providerId]:{provide:e.R9t,useClass:c.se,deps:[]},[l.rM.providerId]:{provide:e.R9t,useClass:l.rM,deps:[]},[l.n.providerId]:{provide:e.R9t,useClass:l.n,deps:[]},[l.uO.providerId]:{provide:e.R9t,useClass:l.uO,deps:[]},[g.c.providerId]:{provide:e.R9t,useClass:g.c,deps:[a.ScJ,e.dAx]},[g.W.providerId]:{provide:e.R9t,useClass:g.W,deps:[a.ScJ,e.dAx]},[h.gL.providerId]:{provide:e.R9t,useClass:h.gL,deps:[]},[h.Me.providerId]:{provide:e.R9t,useClass:h.Me,deps:[]}})}ngOnInit(){const o=m.map(r=>({...r,pizzagna:{...this.widgetTypesService.getWidgetType(r.type,r.version).widget,...r.pizzagna}})),i=T()(o,r=>r.id);this.dashboard={positions:E,widgets:i}}onDsErrorChange(o){c.Ml.mockError=o,h.gL.mockError=o,g.c.mockError=o,l.n.mockError=o}onCloneWidget(){this.widgetClonerService.open({dashboardComponent:this.dashboardComponent,trySubmit:this.submitHandler.trySubmit,widgetSelectionComponentType:O}).pipe((0,w.s)(1),(0,D.Q)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||d)(t.rXU(e.g_3),t.rXU(S),t.rXU(a.X7D),t.rXU(e.Dz_),t.rXU(e.jaz))}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["acme-dashboard"]],viewQuery:function(i,r){if(1&i&&t.GBs(e.S5f,7),2&i){let n;t.mGM(n=t.lsd())&&(r.dashboardComponent=n.first)}},features:[t.Jv_([S])],decls:5,vars:6,consts:function(){let o;return o=$localize`:␟489801ff09de9b4a6ca8b6e05a475fa1ca00d98e␟5813529530812520031: Create Widget Clone
`,[["type","button","nui-button","",1,"mb-3","ml-4","nui-widget-cloner-test-button",3,"click"],o,[3,"editMode","dsError","editModeChange","dsErrorChange"],[1,"dashboard"],[3,"nuiWidgetEditor","dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"]]},template:function(i,r){1&i&&(t.j41(0,"button",0),t.bIt("click",function(){return r.onCloneWidget()}),t.pXf(1,1),t.k0s(),t.j41(2,"dashboard-test-harness",2),t.bIt("editModeChange",function(p){return r.editMode=p})("dsErrorChange",function(p){return r.onDsErrorChange(p)}),t.j41(3,"div",3)(4,"nui-dashboard",4),t.bIt("dashboardChange",function(p){return r.dashboard=p})("gridsterConfigChange",function(p){return r.gridsterConfig=p}),t.k0s()()()),2&i&&(t.R7$(2),t.Y8G("editMode",r.editMode)("dsError",r.dsError),t.R7$(2),t.Y8G("nuiWidgetEditor",r.submitHandler)("dashboard",r.dashboard)("gridsterConfig",r.gridsterConfig)("editMode",r.editMode))},dependencies:[L.g,U.S,z.Z,a.Qpp],styles:[".dashboard[_ngcontent-%COMP%]{height:725px;width:1000px}"]})}}return d})(),data:{srlc:{hideIndicator:!0}}}];let $=(()=>{class d{constructor(o){this.widgetTypesService=o;const i=this.widgetTypesService.getWidgetType("proportional",1);delete i.widget.structure[e.ocI].providers?.refresher,this.setDataSourceProviders("table",[g.c.providerId,g.W.providerId]),this.setDataSourceProviders("kpi",[c.Ml.providerId,c.se.providerId]),this.setDataSourceProviders("proportional",[l.rM.providerId,l.n.providerId,l.uO.providerId]),this.setDataSourceProviders("timeseries",[h.gL.providerId,h.Me.providerId])}setDataSourceProviders(o,i){const r=this.widgetTypesService.getWidgetType(o,1);this.widgetTypesService.setNode(r,"configurator",e.Eov.DataSourceProviders,i)}static{this.\u0275fac=function(i){return new(i||d)(t.KVO(e.Dz_))}}static{this.\u0275mod=t.$C({type:d})}static{this.\u0275inj=t.G2t({providers:[e.g_3],imports:[b.W,e.Ua7,a.cec,a.dfW,a.a4p,a.dDW,a.s6u,a.U76,y.iI.forChild(F)]})}}return d})()}}]);