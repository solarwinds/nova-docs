"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[957],{74067:(y,M,a)=>{a.d(M,{Q:()=>e});var o=a(99019),v=a(93779),S=a(65729),P=a(52667),T=a(31451),h=a(8599),E=a(85907),u=a(54739),O=a(55123),D=a(62897),m=a(39111),p=a(32316);function _(t,c){if(1&t&&(o.j41(0,"nui-select-v2-option",14),o.EFF(1),o.k0s()),2&t){const s=c.$implicit;o.Y8G("value",s),o.R7$(1),o.SpI(" ",s," ")}}let e=(()=>{class t{static{this.lateLoadKey="AcmeProportionalDSConfigComponent"}constructor(s,r,l,i,n,d,g){this.changeDetector=s,this.formBuilder=r,this.configuratorHeading=l,this.providerRegistryService=i,this.eventBus=n,this.injector=d,this.logger=g,this.dataSourceProviders=[],this.formReady=new o.bkB,this.dsOutput=new S.m(1),this.dataFieldIds=new P.B,this.destroy$=new P.B}ngOnInit(){this.form=this.formBuilder.group({providerId:[this.providerId||"",[v.k0.required]],properties:this.formBuilder.group({isEuropeOnly:!1})}),this.formReady.emit(this.form)}ngOnChanges(s){s.providerId&&!s.providerId.isFirstChange()&&s.providerId.previousValue!==this.providerId&&(this.form.get("providerId")?.setValue(this.providerId),this.invokeDataSource(this.providerId)),s.properties&&!s.properties.isFirstChange()&&s.properties.previousValue?.isEuropeOnly!==this.properties.isEuropeOnly&&this.form.get("properties.isEuropeOnly")?.setValue(this.properties.isEuropeOnly)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onDataSourceChange(s){this.eventBus.next(h.k71,{}),this.invokeDataSource(s)}invokeDataSource(s){if(!s)return;const r=this.providerRegistryService.getProvider(s);r?(this.dataSource=this.providerRegistryService.getProviderInstance(r,this.injector),this.eventBus.next(h.eyC,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,T.s)(1)).subscribe(l=>{this.eventBus.next(h.FYQ,{payload:l}),this.dsOutput.next(l);const i=l?.result||l;i&&this.dataFieldIds.next(Object.keys(i))}),setTimeout(()=>{this.dataSource.applyFilters()})):this.logger.warn("No provider found for id:",s)}static{this.\u0275fac=function(r){return new(r||t)(o.rXU(o.gRc),o.rXU(v.ok),o.rXU(h.Zk6),o.rXU(h.g_3),o.rXU(h.dAx),o.rXU(o.zZn),o.rXU(E.gPJ))}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["acme-proportional-ds-config"]],inputs:{dataSourceProviders:"dataSourceProviders",properties:"properties",providerId:"providerId"},outputs:{formReady:"formReady"},features:[o.OA$],decls:19,vars:19,consts:function(){let s,r,l,i;return s=$localize`:␟7f3bce5049b2c517378a6624460b84d2da9ce332␟7245698475792706694:Select Data Source`,r=$localize`:␟18c18c5d61f92ef5c3caa37df00fc514fef3d90c␟4806513497858020797:Data Sources`,l=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,i=$localize`:␟3318195914856889c5a2fbab445b0a53999bebd3␟9193916618150782014: Show Europe Only `,[[3,"formGroup","state"],["headerTitle","Data Source",3,"headerIcon","subtitle"],[1,"datasource-configuration__accordion-content"],[1,"mb-4"],["caption",s,3,"control"],["placeholder",r,"formControlName","providerId",3,"popupViewportMargin","valueSelected"],[3,"value",4,"ngFor","ngForOf"],["for","required"],l,["formGroupName","properties"],[3,"control"],["formControlName","isEuropeOnly",1,"nui-checkbox--justified"],[1,"datasource-configuration__checkbox-label"],i,[3,"value"]]},template:function(r,l){if(1&r&&(o.j41(0,"nui-widget-editor-accordion",0),o.nI1(1,"async"),o.nI1(2,"nuiWidgetEditorAccordionFormState"),o.nrm(3,"nui-widget-editor-accordion-header",1),o.nI1(4,"async"),o.nI1(5,"nuiFormHeaderIconPipe"),o.j41(6,"div",2)(7,"div",3)(8,"nui-form-field",4)(9,"nui-select-v2",5),o.bIt("valueSelected",function(n){return l.onDataSourceChange(n)}),o.nI1(10,"async"),o.DNE(11,_,2,2,"nui-select-v2-option",6),o.k0s(),o.j41(12,"nui-validation-message",7),o.pXf(13,8),o.k0s()()(),o.j41(14,"div",9)(15,"nui-form-field",10)(16,"nui-checkbox",11)(17,"div",12),o.pXf(18,13),o.k0s()()()()()()),2&r){let i;o.Y8G("formGroup",l.form)("state",o.bMT(1,8,o.bMT(2,10,l.form))),o.R7$(3),o.Y8G("headerIcon",o.bMT(4,12,o.i5U(5,14,l.form,"database")))("subtitle",null==(i=l.form.get("providerId"))?null:i.value),o.R7$(5),o.Y8G("control",l.form.get("providerId")),o.R7$(1),o.Y8G("popupViewportMargin",o.bMT(10,17,l.configuratorHeading.height$)),o.R7$(2),o.Y8G("ngForOf",l.dataSourceProviders),o.R7$(4),o.Y8G("control",l.form.get("properties.isEuropeOnly"))}},dependencies:[u.Sq,v.BC,v.cb,v.j4,v.JD,v.$R,O.l,D.Y,E.PYJ,E.KSf,E.ED_,E.jYy,E.AVk,u.Jj,m.D,p.h],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.datasource-configuration__checkbox-label[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}"],changeDetection:0})}}return t})()},30720:(y,M,a)=>{a.d(M,{R:()=>m,j:()=>p});var o=a(80216),v=a(52667),S=a(60142),P=a(36006),T=a(85907),E=(a(8599),a(91769)),u=a(99019),O=a(48900);const D=["London","Paris","Brno","Kyiv","Lisbon"];let m=(()=>{class _ extends T.n_V{static{this.providerId="AcmeProportionalDataSource"}static{this.mockError=!1}constructor(t){super(),this.http=t,this.busy=new v.B,this.properties={isEuropeOnly:!1}}getFilteredData(){var t=this;return(0,o.A)(function*(){if(t.busy.next(!0),_.mockError)return new Promise(c=>{t.http.get("http://www.mocky.io/v2/5ec6bfd93200007800d75100?mocky-delay=1000ms").pipe((0,P.j)(()=>{t.busy.next(!1)})).subscribe({error:s=>{c({result:null,error:{type:s.status}})}})});{const c=t.properties.isEuropeOnly?[D]:[];return new Promise(s=>{setTimeout(()=>{s({result:(0,E.j6)(...c)}),t.busy.next(!1)},1e3)})}})()}ngOnDestroy(){this.outputsSubject.complete()}updateConfiguration(t){this.properties=t}static{this.\u0275fac=function(c){return new(c||_)(u.KVO(O.Qq))}}static{this.\u0275prov=u.jDH({token:_,factory:_.\u0275fac})}}return _})(),p=(()=>{class _ extends T.n_V{constructor(){super(...arguments),this.busy=new S.t(!1),this.properties={isEuropeOnly:!1}}static{this.providerId="AcmeProportionalDataSource2"}getFilteredData(){var t=this;return(0,o.A)(function*(){t.busy.next(!1);const c=t.properties.isEuropeOnly?[D]:[];return new Promise(s=>{setTimeout(()=>{s({result:(0,E.m0)(...c)}),t.busy.next(!1)},1e3)})})()}ngOnDestroy(){this.outputsSubject.complete()}updateConfiguration(t){this.properties=t}static{this.\u0275fac=function(){let t;return function(s){return(t||(t=u.xGo(_)))(s||_)}}()}static{this.\u0275prov=u.jDH({token:_,factory:_.\u0275fac})}}return _})()},54384:(y,M,a)=>{a.d(M,{M:()=>m});var o=a(80216),v=a(86759),S=a.n(v),P=a(72270),T=a.n(P),h=a(60142),E=a(85907),u=a(23412),O=a(99019),D=a(48900);let m=(()=>{class p extends E.n_V{static{this.providerId="AcmeTableDataSource"}static{this.mockError=!1}constructor(e,t){super(),this.logger=e,this.http=t,this.page=1,this.busy=new h.t(!1),this.seed="sw",this.cache=Array.from({length:0}),this.dataFields=[{id:"no",label:$localize`No`,dataType:"number"},{id:"nameTitle",label:$localize`Title`,dataType:"string"},{id:"nameFirst",label:$localize`First`,dataType:"string"},{id:"nameLast",label:$localize`Last`,dataType:"string"},{id:"gender",label:$localize`Gender`,dataType:"string",sortable:!1},{id:"country",label:$localize`Country`,dataType:"string",sortable:!1},{id:"city",label:$localize`City`,dataType:"string",sortable:!1},{id:"postcode",label:$localize`Postcode`,dataType:"number",sortable:!1},{id:"email",label:$localize`E-Mail`,dataType:"string",sortable:!1},{id:"cell",label:$localize`Cell`,dataType:"string"}]}getFilteredData(e){var t=this;return(0,o.A)(function*(){if(e.sorter?.value&&!S()(t.lastSortValue,e.sorter.value)&&0===e.virtualScroll?.value.start&&t.lastVirtualScroll)return t.lastSortValue=e.sorter?.value,t.lastVirtualScroll=e.virtualScroll?.value,{result:{repeat:{itemsSource:t.sortData(t.cache,e)},paginator:{total:200},dataFields:t.dataFields}};t.busy.next(!0);const c=e.virtualScroll&&e.virtualScroll.value,s=c?e.virtualScroll?.value.start:0,r=c?e.virtualScroll?.value.end:0;return 0===s&&(t.cache=[]),new Promise(l=>{p.mockError?(t.busy.next(!1),l({result:null,error:{type:"unknownError"}})):setTimeout(()=>{t.getData(s,r).then(i=>{i&&(t.cache=t.cache.concat(i.users),t.dataSubject.next(t.cache),l({result:{repeat:{itemsSource:t.sortData(t.cache,e)},paginator:{total:200},dataFields:t.dataFields}}),t.lastSortValue=e.sorter?.value,t.lastVirtualScroll=e.virtualScroll?.value,t.busy.next(!1))})},300)})})()}getData(e=0,t=20){var c=this;return(0,o.A)(function*(){let s=null;try{return s=yield(yield fetch(`${u.ae}${u.sJ}/?page=${t/(t-e)||0}&results=${t-e}&seed=${c.seed}`)).json(),{users:s?.results.map((r,l)=>({no:c.cache.length+l+1,nameTitle:r.name.title,nameFirst:r.name.first,nameLast:r.name.last,gender:r.gender,country:r.location.country,city:r.location.city,postcode:r.location.postcode,email:r.email,cell:r.cell})),total:s?.results.length,start:e}}catch{c.logger.error(u.U3)}})()}sortData(e,t){return T()(e,t.sorter?.value?.sortBy,t.sorter?.value?.direction)}static{this.\u0275fac=function(t){return new(t||p)(O.KVO(E.gPJ),O.KVO(D.Qq))}}static{this.\u0275prov=O.jDH({token:p,factory:p.\u0275fac})}}return p})()},29242:(y,M,a)=>{a.d(M,{A:()=>D});var o=a(80216),v=a(86759),S=a.n(v),P=a(72270),T=a.n(P),h=a(60142),E=a(85907),u=a(23412),O=a(99019);let D=(()=>{class m extends E.n_V{static{this.providerId="AcmeTableDataSource2"}constructor(_){super(),this.logger=_,this.seed="sw2",this.cache=Array.from({length:0}),this.page=1,this.busy=new h.t(!1),this.dataFields=[{id:"no",label:$localize`No`,dataType:"number"},{id:"nameFirst",label:$localize`First`,dataType:"string"},{id:"nameLast",label:$localize`Last`,dataType:"string"},{id:"country",label:$localize`Country`,dataType:"string"},{id:"city",label:$localize`City`,dataType:"string"}]}getFilteredData(_){var e=this;return(0,o.A)(function*(){if(_.sorter?.value&&!S()(e.lastSortValue,_.sorter.value)&&0===_.virtualScroll?.value.start&&e.lastVirtualScroll)return e.lastSortValue=_.sorter?.value,e.lastVirtualScroll=_.virtualScroll?.value,{repeat:{itemsSource:e.sortData(e.cache,_)},paginator:{total:200},dataFields:e.dataFields};e.busy.next(!0);const t=_.virtualScroll&&_.virtualScroll.value,c=t?_.virtualScroll?.value.start:0,s=t?_.virtualScroll?.value.end:0;return 0===c&&(e.cache=[]),new Promise(r=>{setTimeout(()=>{e.getData(c,s).then(l=>{l?.result?(e.cache=e.cache.concat(l.result.users),e.dataSubject.next(e.cache),r({repeat:{itemsSource:e.sortData(e.cache,_)},paginator:{total:200},dataFields:e.dataFields}),e.lastSortValue=_.sorter?.value,e.lastVirtualScroll=_.virtualScroll?.value,e.busy.next(!1),e.outputsSubject.next(l)):e.outputsSubject.next(l)})},300)})})()}getData(_=0,e=20){var t=this;return(0,o.A)(function*(){let c=null;try{return c=yield(yield fetch(`${u.cN}${u.ae}${u.sJ}/?page=${e/(e-_)||0}&results=${e-_}&seed=${t.seed}`)).json(),{result:{users:c?.results.map((s,r)=>({no:t.cache.length+r+1,nameFirst:s.name.first,nameLast:s.name.last,country:s.location.country,city:s.location.city})),total:c?.results.length,start:_}}}catch{return t.busy.next(!1),t.logger.error(u.U3),{result:null,error:{type:u.U3,message:u.U3}}}})()}sortData(_,e){return T()(_,e.sorter?.value?.sortBy,e.sorter?.value?.direction)}static{this.\u0275fac=function(e){return new(e||m)(O.KVO(E.gPJ))}}static{this.\u0275prov=O.jDH({token:m,factory:m.\u0275fac})}}return m})()},85005:(y,M,a)=>{a.d(M,{D:()=>m});var o=a(80216),v=a(86759),S=a.n(v),P=a(72270),T=a.n(P),h=a(60142),E=a(85907),u=a(8599),O=a(23412),D=a(99019);let m=(()=>{class p extends E.n_V{static{this.providerId="AcmeTableDataSourceNoColumnGeneration"}constructor(e){super(),this.logger=e,this.cache=Array.from({length:0}),this.totalItems=325,this.page=1,this.busy=new h.t(!1),this.features=new E.Bdx({[u.MmZ.DisableTableColumnGeneration]:{enabled:!0}}),this.dataFields=[{id:"id",label:"No",dataType:"number"},{id:"name",label:"Name",dataType:"string"},{id:"tagline",label:"Tagline",dataType:"string"},{id:"first_brewed",label:"First Brewed",dataType:"string"},{id:"description",label:"Description",dataType:"string"},{id:"brewers_tips",label:"Brewer's Tips",dataType:"string"}]}getFilteredData(e){var t=this;return(0,o.A)(function*(){const c=e.virtualScroll?.value?.start??0,s=e.virtualScroll?.value?.end??0,r=s-c;if(0===c&&(t.cache=[]),e.sorter?.value&&!S()(t.lastSortValue,e.sorter.value)&&0===e.virtualScroll?.value.start&&t.lastVirtualScroll){const l=Math.ceil(r?t.totalItems/r:1),i=Math.max(r<80?r:80,1);let d,n=null;if("desc"===e.sorter?.value?.direction){t.cache=[];for(let g=0;g<t.page;++g)n=yield(yield fetch(`${O.wt}/?page=${l-g||1}&per_page=${i}`)).json(),n&&n.length<i&&t.page++,d={brewInfo:n?.map(f=>({id:f.id,name:f.name,tagline:f.tagline,first_brewed:f.first_brewed,description:f.description,brewers_tips:f.brewers_tips})),total:n?.length},t.cache=l-g!=0?t.cache.concat(d.brewInfo):t.cache}if("asc"===e.sorter?.value?.direction){t.cache=[];for(let g=0;g<t.page;g++)n=yield(yield fetch(`${O.wt}/?page=${g+1}&per_page=${i}`)).json(),d={brewInfo:n?.map(f=>({id:f.id,name:f.name,tagline:f.tagline,first_brewed:f.first_brewed,description:f.description,brewers_tips:f.brewers_tips})),total:n?.length},t.cache=t.cache.concat(d.brewInfo)}return t.lastSortValue=e.sorter?.value,t.lastVirtualScroll=e.virtualScroll?.value,{result:{repeat:{itemsSource:t.sortData(t.cache,e)},paginator:{total:t.totalItems},dataFields:t.dataFields}}}return t.busy.next(!0),new Promise(l=>{setTimeout(()=>{t.getData(c,s,e).then(i=>{i&&(t.cache=t.cache.concat(i.brewInfo),t.dataSubject.next(t.cache),l({result:{repeat:{itemsSource:t.sortData(t.cache,e)},paginator:{total:t.totalItems},dataFields:t.dataFields}}),t.lastSortValue=e.sorter?.value,t.lastVirtualScroll=e.virtualScroll?.value,t.busy.next(!1))})},500)})})()}getData(e=0,t=20,c){var s=this;return(0,o.A)(function*(){const r=t-e,l=Math.ceil(r?s.totalItems/r:1);let i=null;const n=Math.max(r<80?r:80,1);return"asc"===c.sorter?.value?.direction&&(i=yield(yield fetch(`${O.wt}/?page=${s.page}&per_page=${n}`)).json()),"desc"===c.sorter?.value?.direction&&(i=yield(yield fetch(`${O.wt}/?page=${l-s.page}&per_page=${n}`)).json()),c.sorter||(i=yield(yield fetch(`${O.wt}/?page=${s.page}&per_page=${n}`)).json()),{brewInfo:i?.map((d,g)=>({id:d.id,name:d.name,tagline:d.tagline,first_brewed:d.first_brewed,description:d.description,brewers_tips:d.brewers_tips})),total:i?.length}})()}sortData(e,t){return T()(e,t.sorter?.value?.sortBy,t.sorter?.value?.direction)}static{this.\u0275fac=function(t){return new(t||p)(D.KVO(E.gPJ))}}static{this.\u0275prov=D.jDH({token:p,factory:p.\u0275fac})}}return p})()},96878:(y,M,a)=>{a.d(M,{E5:()=>_,Q9:()=>p,eF:()=>m,l0:()=>e});var o=a(80216),v=a(28508),S=a.n(v),P=a(60142),T=a(36006),h=a(85907),E=a(8599),u=a(91769),O=a(99019),D=a(48900);let m=(()=>{class r extends h.n_V{static{this.providerId="AcmeTimeseriesDataSource"}static{this.mockError=!1}constructor(i){super(),this.http=i,this.busy=new P.t(!1)}getFilteredData(i){var n=this;return(0,o.A)(function*(){return n.busy.next(!0),new Promise(r.mockError?d=>{n.http.get("http://www.mocky.io/v2/5ec6bfd93200007800d75100?mocky-delay=1000ms").pipe((0,T.j)(()=>{n.busy.next(!1)})).subscribe({error:g=>{d({result:null,error:{type:g.status}})}})}:d=>{setTimeout(()=>{n.busy.next(!1),d({result:{series:t(i,(0,u.bQ)())}})},1e3)})})()}static{this.\u0275fac=function(n){return new(n||r)(O.KVO(D.Qq))}}static{this.\u0275prov=O.jDH({token:r,factory:r.\u0275fac})}}return r})(),p=(()=>{class r extends h.n_V{static{this.providerId="AcmeTimeseriesDataSource2"}constructor(){super(),this.busy=new P.t(!1)}getFilteredData(i){var n=this;return(0,o.A)(function*(){n.busy.next(!0);const d={series:t(i,(0,u.$4)())};return n.busy.next(!1),d})()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=O.jDH({token:r,factory:r.\u0275fac})}}return r})(),_=(()=>{class r extends h.n_V{static{this.providerId="AcmeTimeseriesStatusDataSource"}constructor(){super(),this.busy=new P.t(!1)}getFilteredData(i){var n=this;return(0,o.A)(function*(){n.busy.next(!0);const d={series:s(i,(0,u.Pd)())};return n.busy.next(!1),d})()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=O.jDH({token:r,factory:r.\u0275fac})}}return r})(),e=(()=>{class r extends h.n_V{static{this.providerId="AcmeTimeseriesStatusIntervalDataSource"}constructor(){super(),this.busy=new P.t(!1)}getFilteredData(i){var n=this;return(0,o.A)(function*(){n.busy.next(!0);const d={series:t(i,(0,u.qg)())};return n.busy.next(!1),d})()}}return r})();function t(r,l){const i=r.timeframe;let n=l;return i&&(n=n.map(d=>({id:d.id,name:d.name,description:d.description,link:d.link,secondaryLink:d.secondaryLink,data:d.data.filter(g=>function c(r,l,i){const n=S()(r);return n.isBetween(l,i)||n.isSame(l)||n.isSame(i)}(g.x,i.value.startDatetime,i.value.endDatetime))}))),n}function s(r,l){let i=t(r,l);return r.timeframe&&(i=(0,E.x8z)(r.timeframe.value,i,l)),i}}}]);