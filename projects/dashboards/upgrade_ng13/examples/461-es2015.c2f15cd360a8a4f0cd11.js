"use strict";(self.webpackChunk_nova_ui_dashboards=self.webpackChunk_nova_ui_dashboards||[]).push([[461],{48280:function(e,r,i){i.r(r),i.d(r,{TimeseriesWidgetPrototypeModule:function(){return A}});var t=i(38583),s=i(99763),a=i(46806),o=i(69063),d=i(93877),p=i(4758),l=i(40837),n=i(5596),c=i(33618),g=i(85631),v=i(55350),u=i(55206),m=i(59311),f=i.n(m),h=i(79765),I=i(33018);let w=(()=>{class e{constructor(e){this.toastService=e,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=(e,r)=>{const i=new h.xQ;return setTimeout(()=>{if(this.allowSubmit)e.id||(e.id=(0,a.VjN)("acme")),i.next(e);else{const e=$localize`Submit failed.`;this.toastService.error({title:e}),i.error(e)}},1e3),i.asObservable()},this.tryRemove=e=>{const r=new h.xQ;return setTimeout(()=>{if(this.allowRemoval)r.next(e);else{const e=$localize`Widget removal failed.`;this.toastService.error({title:e}),r.error(e)}},200),r.asObservable()},this.toastService.setConfig({timeOut:2e3})}}return e.\u0275fac=function(r){return new(r||e)(I.LFG(a.klp))},e.\u0275prov=I.Yz7({token:e,factory:e.\u0275fac}),e})();var b=i(16738),C=i.n(b);const S={widget1:{cols:6,rows:6,y:0,x:0},"widget1-interval":{cols:6,rows:6,y:0,x:6},widget2:{cols:6,rows:6,y:6,x:0},"widget2-interval":{cols:6,rows:6,y:6,x:6},widget3:{cols:6,rows:6,y:12,x:0},"widget3-interval":{cols:6,rows:6,y:12,x:6},widget4:{cols:6,rows:6,y:18,x:0},"widget4-interval":{cols:6,rows:6,y:18,x:6},widget5:{cols:6,rows:6,y:24,x:0},"widget5-interval":{cols:6,rows:6,y:24,x:6}},y=[{id:"widget1",type:"timeseries",pizzagna:{[o.xW5.Configuration]:{[o.XMI]:{providers:{[o.Muk.DataSource]:{providerId:u.wi.providerId},[o.Muk.InteractionHandler]:{providerId:o.DJm,properties:{url:"${data.link}"}}}},header:{properties:{title:"Line chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[o.Muk.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{interaction:"series",legendPlacement:o.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:o.CKZ.Line}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:C()().format()}}}}},{id:"widget1-interval",type:"timeseries",pizzagna:{[o.xW5.Configuration]:{[o.XMI]:{providers:{[o.Muk.DataSource]:{providerId:u.wi.providerId},[o.Muk.InteractionHandler]:{providerId:o.DJm,properties:{url:"${data.link}"}}}},header:{properties:{title:"Line chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[o.Muk.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:o.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:o.CKZ.Line,scales:{x:{type:o.D9N.TimeInterval,properties:{interval:86400}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:C()().format()}}}}},{id:"widget2",type:"timeseries",pizzagna:{[o.xW5.Configuration]:{[o.XMI]:{providers:{[o.Muk.DataSource]:{providerId:u.wi.providerId}}},header:{properties:{title:"Area chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[o.Muk.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:o.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:o.CKZ.StackedArea}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:C()().format()}}}}},{id:"widget2-interval",type:"timeseries",pizzagna:{[o.xW5.Configuration]:{[o.XMI]:{providers:{[o.Muk.DataSource]:{providerId:u.wi.providerId}}},header:{properties:{title:"Area chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[o.Muk.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:o.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:o.CKZ.StackedArea,scales:{x:{type:o.D9N.TimeInterval,properties:{interval:86400}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:C()().format()}}}}},{id:"widget3",type:"timeseries",pizzagna:{[o.xW5.Configuration]:{[o.XMI]:{providers:{[o.Muk.DataSource]:{providerId:u.wi.providerId}}},header:{properties:{title:"Stacked percentage area",subtitle:"Basic timeseries widget"}},chart:{providers:{[o.Muk.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:o.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:o.CKZ.StackedPercentageArea}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:C()().format()}}}}},{id:"widget3-interval",type:"timeseries",pizzagna:{[o.xW5.Configuration]:{[o.XMI]:{providers:{[o.Muk.DataSource]:{providerId:u.wi.providerId}}},header:{properties:{title:"Stacked percentage area",subtitle:"Basic timeseries widget"}},chart:{providers:{[o.Muk.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:o.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:o.CKZ.StackedPercentageArea,scales:{x:{type:o.D9N.TimeInterval,properties:{interval:86400}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:C()().format()}}}}},{id:"widget4",type:"timeseries",pizzagna:{[o.xW5.Configuration]:{[o.XMI]:{providers:{[o.Muk.DataSource]:{providerId:u.wi.providerId}}},header:{properties:{title:"Bar chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[o.Muk.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:o.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:o.CKZ.StackedBar,scales:{}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:C()().format()}}}}},{id:"widget4-interval",type:"timeseries",pizzagna:{[o.xW5.Configuration]:{[o.XMI]:{providers:{[o.Muk.DataSource]:{providerId:u.wi.providerId}}},header:{properties:{title:"Bar chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[o.Muk.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:o.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:o.CKZ.StackedBar,scales:{x:{type:o.D9N.TimeInterval,properties:{interval:86400}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:C()().format()}}}}},{id:"widget5",type:"timeseries",pizzagna:{[o.xW5.Configuration]:{[o.XMI]:{providers:{[o.Muk.DataSource]:{providerId:u.oC.providerId}}},header:{properties:{title:"Status chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[o.Muk.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:o.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:o.CKZ.StatusBar}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:C()().format()}}}}},{id:"widget5-interval",type:"timeseries",pizzagna:{[o.xW5.Configuration]:{[o.XMI]:{providers:{[o.Muk.DataSource]:{providerId:u.Yj.providerId}}},header:{properties:{title:"Status chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[o.Muk.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:o.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:o.CKZ.StatusBar,scales:{x:{type:o.D9N.TimeInterval,properties:{interval:86400}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:C()().format()}}}}}];var x=i(46276),k=i(54607);const D=[{path:"",component:(()=>{class e{constructor(e,r,i){this.submitHandler=e,this.providerRegistry=r,this.widgetTypesService=i,this.gridsterConfig={},this.editMode=!1,this.providerRegistry.setProviders({[p.i.providerId]:{provide:o.Fk3,useClass:p.i,deps:[]},[p.L2.providerId]:{provide:o.Fk3,useClass:p.L2,deps:[]},[l.Q.providerId]:{provide:o.Fk3,useClass:l.Q,deps:[]},[l.s.providerId]:{provide:o.Fk3,useClass:l.s,deps:[]},[n.g.providerId]:{provide:o.Fk3,useClass:n.g,deps:[a.mQy]},[c.W.providerId]:{provide:o.Fk3,useClass:c.W,deps:[a.mQy]},[g.t.providerId]:{provide:o.Fk3,useClass:g.t,deps:[a.mQy]},[v.n.providerId]:{provide:o.Fk3,useClass:v.n,deps:[a.oDG]},[u.wi.providerId]:{provide:o.Fk3,useClass:u.wi,deps:[]},[u.u2.providerId]:{provide:o.Fk3,useClass:u.u2,deps:[]},[u.oC.providerId]:{provide:o.Fk3,useClass:u.oC,deps:[]},[u.Yj.providerId]:{provide:o.Fk3,useClass:u.Yj,deps:[]}})}ngOnInit(){const e=y.map(e=>this.widgetTypesService.mergeWithWidgetType(e)),r=f()(e,e=>e.id);this.dashboard={positions:S,widgets:r}}}return e.\u0275fac=function(r){return new(r||e)(I.Y36(w),I.Y36(o.CNH),I.Y36(o.xTe))},e.\u0275cmp=I.Xpm({type:e,selectors:[["acme-dashboard"]],viewQuery:function(e,r){if(1&e&&I.Gf(o.MXM,7),2&e){let e;I.iGM(e=I.CRH())&&(r.dashboardComponent=e.first)}},features:[I._Bn([w])],decls:5,vars:5,consts:function(){let e;return e=$localize`:␟c0390f914462a77b0ab8e053abf7c77af5b1da81␟6640158718767573444: Edit mode `,[[1,"w-100",2,"height","800px"],[3,"nuiWidgetEditor","dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"],[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"value","valueChange"],e]},template:function(e,r){1&e&&(I.TgZ(0,"div",0),I.TgZ(1,"nui-dashboard",1),I.NdJ("dashboardChange",function(e){return r.dashboard=e})("gridsterConfigChange",function(e){return r.gridsterConfig=e}),I.qZA(),I.qZA(),I.TgZ(2,"div",2),I.TgZ(3,"nui-switch",3),I.NdJ("valueChange",function(e){return r.editMode=e}),I.SDv(4,4),I.qZA(),I.qZA()),2&e&&(I.xp6(1),I.Q6J("nuiWidgetEditor",r.submitHandler)("dashboard",r.dashboard)("gridsterConfig",r.gridsterConfig)("editMode",r.editMode),I.xp6(2),I.Q6J("value",r.editMode))},directives:[x.M,k.t,a.qUD],encapsulation:2}),e})(),data:{srlc:{hideIndicator:!0}}}];let A=(()=>{class e{constructor(e,r){this.widgetTypesService=e,this.componentRegistry=r,this.setupDataSourceProviders(),this.setupCustomProportionalWidgetDSConfig()}setupCustomProportionalWidgetDSConfig(){var e;const r=this.widgetTypesService.getWidgetType("proportional",1);null===(e=r.widget.structure[o.XMI].providers)||void 0===e||delete e.refresher,this.widgetTypesService.setNode(r,"configurator",o.ACc.DataSourceConfigComponentType,d.b.lateLoadKey),this.componentRegistry.registerByLateLoadKey(d.b)}setupDataSourceProviders(){this.setDataSourceProviders("table",[n.g.providerId,c.W.providerId,g.t.providerId,v.n.providerId]),this.setDataSourceProviders("kpi",[p.i.providerId,p.L2.providerId]),this.setDataSourceProviders("proportional",[l.Q.providerId,l.s.providerId]),this.setDataSourceProviders("timeseries",[u.wi.providerId,u.u2.providerId,u.oC.providerId,u.Yj.providerId])}setDataSourceProviders(e,r){const i=this.widgetTypesService.getWidgetType(e,1);this.widgetTypesService.setNode(i,"configurator",o.ACc.DataSourceProviders,r)}}return e.\u0275fac=function(r){return new(r||e)(I.LFG(o.xTe),I.LFG(o.hiK))},e.\u0275mod=I.oAB({type:e}),e.\u0275inj=I.cJS({providers:[o.CNH],imports:[[t.ez,o.Pi,a.Gsl,a.Az_,a.C6o,a.sF0,a.ZuS,a.qAs,a.cJ5,a.Ts3,s.Bz.forChild(D)]]}),e})()}}]);