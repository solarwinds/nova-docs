!function(){var e,t,o,r,n,i,a,u,c,s;function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,o){return t&&g(e.prototype,t),o&&g(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,o){var r=m(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(arguments.length<3?e:o):n.value}}).apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var o,r=_(e);if(t){var n=_(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return y(this,o)}}function y(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunk_nova_ui_dashboards=self.webpackChunk_nova_ui_dashboards||[]).push([[768],{14050:function(e,t,o){var r={"./custom-data-source-configurator-docs.component.html":99679,"./custom-data-source-configurator-docs.component.ts":23304,"./custom-data-source-configurator.module.ts":30569,"./example/custom-data-source-configurator-example.component.html":41284,"./example/custom-data-source-configurator-example.component.less":73207,"./example/custom-data-source-configurator-example.component.ts":20489,"components/docs/tutorials/customization/data-source-configurator/custom-data-source-configurator-docs.component.html":99679,"components/docs/tutorials/customization/data-source-configurator/custom-data-source-configurator-docs.component.ts":23304,"components/docs/tutorials/customization/data-source-configurator/custom-data-source-configurator.module.ts":30569,"components/docs/tutorials/customization/data-source-configurator/example/custom-data-source-configurator-example.component.html":41284,"components/docs/tutorials/customization/data-source-configurator/example/custom-data-source-configurator-example.component.less":73207,"components/docs/tutorials/customization/data-source-configurator/example/custom-data-source-configurator-example.component.ts":20489};function n(e){var t=i(e);return o(t)}function i(e){if(!o.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=i,e.exports=n,n.id=14050},52768:function(g,m,Z){"use strict";var y,w;Z.r(m),Z.d(m,{CustomDataSourceConfiguratorModuleRoute:function(){return V}});var T=Z(90665),A=Z(99763),q=Z(46806),C=Z(69063),x=Z(33018),U=Z(64762),k=Z(91841),S=Z(26215),O=Z(68939),D=Z(4433),I=Z(38583),M=Z(52238),j=Z(76e3),P=Z(46276),z=Z(54607);function R(e,t){if(1&e&&(x.TgZ(0,"nui-select-v2-option",15),x._uU(1),x.qZA()),2&e){var o=t.$implicit;x.Q6J("value",o.id)("displayValueContext",o),x.xp6(1),x.hij(" ",o.title," ")}}function J(e,t){if(1&e&&(x.TgZ(0,"nui-select-v2-option",16),x._uU(1),x.qZA()),2&e){var o=t.$implicit;x.Q6J("value",o.id),x.xp6(1),x.hij(" ",o.label," ")}}var F,N=".dashboard[_ngcontent-%COMP%]{height:400px}.datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.custom-data-source-configurator__text-truncate[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}",Y=((F=function(n){v(a,n);var i=b(a);function a(n,u,c,s,l,g,f){var h;return p(this,a),(h=i.call(this,n,u,c,s,l,g,f)).books=[{id:"5MQFrgEACAAJ",title:$localize(e||(e=d(["Harry Potter and the Sorcerer's Stone"])))},{id:"5iTebBW-w7QC",title:$localize(t||(t=d(["Harry Potter and the Chamber of Secrets"])))}],h.metrics=[{id:"averageRating",label:$localize(o||(o=d(["Average Rating"])))},{id:"ratingsCount",label:$localize(r||(r=d(["Ratings Count"])))}],h}return f(a,[{key:"ngOnInit",value:function(){var e,t,o,r,n,i=this;h(_(a.prototype),"ngOnInit",this).call(this),this.form.setControl("properties",this.formBuilder.group({bookId:[null!==(t=null===(e=this.properties)||void 0===e?void 0:e.bookId)&&void 0!==t?t:"",T.kI.required],metric:[null!==(r=null===(o=this.properties)||void 0===o?void 0:o.metric)&&void 0!==r?r:"",T.kI.required]})),this.form.setControl("dataSource",this.formBuilder.control(null)),null===(n=this.form.get("providerId"))||void 0===n||n.setValue(Q.providerId),this.form.valueChanges.subscribe(function(e){!e.providerId||i.invokeDataSource(e)})}}]),a}(C.cY_)).lateLoadKey="HarryPotterDataSourceConfiguratorComponent",F.\u0275fac=function(e){return new(e||F)(x.Y36(x.sBO),x.Y36(C.p3D),x.Y36(T.qu),x.Y36(C.CNH),x.Y36(C.nYw),x.Y36(x.zs3),x.Y36(q.mQy))},F.\u0275cmp=x.Xpm({type:F,selectors:[["harry-potter-data-source-configurator"]],features:[x.qOj],decls:22,vars:22,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],$localize(n||(n=d([":\u241f1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0\u241f1107354728956440783:Data Source"]))),["title",$localize(i||(i=d([":\u241f95007a0fa9063ab3274e0ead437ab11d66ecb4ce\u241f1524342934378610893:Harry Potter Books"]))),1,"nui-text-secondary"],$localize(a||(a=d([":\u241f8bcb45038a513d8312d1d2f1f4347ed125280072\u241f7538390454408088367: Harry Potter Books "]))),["formGroupName","properties",1,"datasource-configuration__accordion-content"],["caption","Books",3,"control"],["placeholder",$localize(u||(u=d([":\u241f5917f705b20da63f92901333312b2b6cf53b97ac\u241f8247170666418322694:Select book"]))),"formControlName","bookId",3,"popupViewportMargin"],[3,"value","displayValueContext",4,"ngFor","ngForOf"],["caption","Metrics",3,"control"],["placeholder",$localize(c||(c=d([":\u241f98cf6baf5399e0431880540b4cc423bed2597312\u241f8377661862958212673:Select metric"]))),"formControlName","metric",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],[3,"value","displayValueContext"],[3,"value"]]},template:function(e,t){var o,r;1&e&&(x.TgZ(0,"nui-widget-editor-accordion",0),x.ALo(1,"async"),x.ALo(2,"nuiWidgetEditorAccordionFormState"),x.TgZ(3,"div",1),x._UZ(4,"nui-icon",2),x.ALo(5,"async"),x.ALo(6,"nuiFormHeaderIconPipe"),x.TgZ(7,"div",3),x.TgZ(8,"span",4),x.SDv(9,5),x.qZA(),x.TgZ(10,"div",6),x.SDv(11,7),x.qZA(),x.qZA(),x.qZA(),x.TgZ(12,"div",8),x.TgZ(13,"nui-form-field",9),x.TgZ(14,"nui-select-v2",10),x.ALo(15,"async"),x.YNc(16,R,2,3,"nui-select-v2-option",11),x.qZA(),x.qZA(),x.qZA(),x.TgZ(17,"div",8),x.TgZ(18,"nui-form-field",12),x.TgZ(19,"nui-select-v2",13),x.ALo(20,"async"),x.YNc(21,J,2,2,"nui-select-v2-option",14),x.qZA(),x.qZA(),x.qZA(),x.qZA()),2&e&&(x.Q6J("formGroup",t.form)("state",x.lcZ(1,9,x.lcZ(2,11,t.form))),x.xp6(4),x.Q6J("icon",x.lcZ(5,13,x.xi3(6,15,t.form,"database"))),x.xp6(9),x.Q6J("control",null==(o=t.form.get("properties"))?null:o.get("bookId")),x.xp6(1),x.Q6J("popupViewportMargin",x.lcZ(15,18,t.configuratorHeading.height$)),x.xp6(2),x.Q6J("ngForOf",t.books),x.xp6(2),x.Q6J("control",null==(r=t.form.get("properties"))?null:r.get("metric")),x.xp6(1),x.Q6J("popupViewportMargin",x.lcZ(20,20,t.configuratorHeading.height$)),x.xp6(2),x.Q6J("ngForOf",t.metrics))},directives:[D.J,T.JL,T.sg,q.oJW,T.x0,q.hgI,q.j_n,T.JJ,T.u,I.sg,q.rLF],pipes:[I.Ov,M.F,j.d],styles:[N]}),F.\u0275prov=x.Yz7({token:F,factory:F.\u0275fac}),F),Q=function(){var e=function(e){v(o,e);var t=b(o);function o(e){var r;return p(this,o),(r=t.call(this)).http=e,r.busy=new S.X(!1),r}return f(o,[{key:"updateConfiguration",value:function(e){this.properties=e}},{key:"getFilteredData",value:function(){return(0,U.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.busy.next(!0),new Promise(function(e){var o;t.http.get("https://www.googleapis.com/books/v1/volumes/".concat(null===(o=t.properties)||void 0===o?void 0:o.bookId)).pipe((0,O.x)(function(){return t.busy.next(!1)})).subscribe({next:function(o){var r;e({result:{value:o.volumeInfo[null===(r=t.properties)||void 0===r?void 0:r.metric]}})},error:function(t){e({result:null,error:{type:t.status}})}})})));case 1:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){this.outputsSubject.complete()}}]),o}(q.LvN);return e.providerId="AcmeKpiDataSource",e.\u0275fac=function(t){return new(t||e)(x.LFG(k.eN))},e.\u0275prov=x.Yz7({token:e,factory:e.\u0275fac}),e}(),$=function(){var e=function(){function e(t,o,r){p(this,e),this.widgetTypesService=t,this.providerRegistry=o,this.componentRegistry=r,this.gridsterConfig={},this.editMode=!1}return f(e,[{key:"ngOnInit",value:function(){this.componentRegistry.registerByLateLoadKey(Y),this.providerRegistry.setProviders(l({},Q.providerId,{provide:C.Fk3,useClass:Q,deps:[k.eN]}));var e=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(e,"configurator",C.ACc.DataSourceConfigComponentType,Y.lateLoadKey);var t=L,o=l({},t.id,this.widgetTypesService.mergeWithWidgetType(t));this.dashboard={positions:l({},t.id,{cols:4,rows:6,y:0,x:0}),widgets:o}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(x.Y36(C.xTe),x.Y36(C.CNH),x.Y36(C.hiK))},e.\u0275cmp=x.Xpm({type:e,selectors:[["custom-data-source-configurator-example"]],decls:5,vars:4,consts:function(){return[[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"value","valueChange"],$localize(s||(s=d([":\u241f18d630a3c524dbab6dc528571782a939a7bc95b1\u241f861097914887003123: Edit Mode "]))),[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange"]]},template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"nui-switch",1),x.NdJ("valueChange",function(e){return t.editMode=e}),x.SDv(2,2),x.qZA(),x.qZA(),x.TgZ(3,"div",3),x.TgZ(4,"nui-dashboard",4),x.NdJ("dashboardChange",function(e){return t.dashboard=e})("gridsterConfigChange",function(e){return t.gridsterConfig=e}),x.qZA(),x.qZA()),2&e&&(x.xp6(1),x.Q6J("value",t.editMode),x.xp6(3),x.Q6J("dashboard",t.dashboard)("editMode",t.editMode)("gridsterConfig",t.gridsterConfig))},directives:[q.qUD,P.M,z.t],styles:[N]}),e}(),L={id:"widget1",type:"kpi",pizzagna:l({},C.xW5.Configuration,(w={},l(w,C.XMI,{providers:l({},C.Muk.Refresher,{properties:{interval:600,enabled:!0}})}),l(w,"header",{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}}),l(w,"tiles",{properties:{nodes:["kpi1"]}}),l(w,"kpi1",{id:"kpi1",componentType:C.ufE.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating"}},providers:(y={},l(y,C.Muk.DataSource,{providerId:Q.providerId,properties:{bookId:"5MQFrgEACAAJ",metric:"averageRating"}}),l(y,C.Muk.Adapter,{providerId:C.u1$,properties:{componentId:"kpi1",propertyPath:"widgetData"}}),y)}),w))},H=[{path:"",component:function(){var e=f(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=x.Xpm({type:e,selectors:[["nui-custom-data-source-configurator-docs"]],decls:120,vars:1,consts:[["href","../additional-documentation/tutorials/customization/configurator-section.html","target","_parent"],["href","../additional-documentation/tutorials/adding-a-data-source.html","target","_parent"],["href","../components/DataSourceConfigurationComponent.html","target","_blank"],["href","../components/DataSourceConfigurationV2Component.html ","target","_blank"],["href","../classes/WidgetTypesService.html","target","_blank"],["href","../injectables/ComponentRegistryService.html","target","_blank"],["href","../additional-documentation/getting-started.html","target","_parent"],["href","../injectables/ConfiguratorHeadingService.html","target","_blank"],["href","../interfaces/IConfigurable.html","target","_blank"],["type","info",3,"allowDismiss"],["filenamePrefix","custom-data-source-configurator-example","exampleTitle","Custom Data Source Configurator"]],template:function(e,t){1&e&&(x.TgZ(0,"h1"),x._uU(1,"Implementing a Custom Data Source Configurator"),x.qZA(),x.TgZ(2,"p"),x._uU(3," In the "),x.TgZ(4,"a",0),x._uU(5,"Custom Configurator Section"),x.qZA(),x._uU(6," tutorial, we walked through giving users the ability to configure a widget behavior or layout that's not configurable out of the box. And, in the "),x.TgZ(7,"a",1),x._uU(8,"Adding a Data Source"),x.qZA(),x._uU(9," tutorial, we walked through the basics of how to create a data source and register it for use by a widget.\n"),x.qZA(),x.TgZ(10,"p"),x._uU(11," While developing a dashboard, you might find that a statically configured data source isn't necessarily flexible enough for your end-users. In fact, they may want the ability to change the configuration of a data source to adjust its output in some way. In this tutorial, we'll add user configurability to a data source by creating a custom configurator component that allows the user to select which Harry Potter book and/or metric for which a data source will return a value.\n"),x.qZA(),x.TgZ(12,"p"),x.TgZ(13,"strong"),x._uU(14,"Note:"),x.qZA(),x._uU(15," Off the shelf, the Nova Dashboards framework provides "),x.TgZ(16,"code"),x.TgZ(17,"a",2),x._uU(18,"DataSourceConfigurationComponent"),x.qZA(),x.qZA(),x._uU(19," which allows the user to select a data source class name from a drop down. In the tutorial, however, we will create a custom configuration component that extends a newer version of the component called "),x.TgZ(20,"code"),x.TgZ(21,"a",3),x._uU(22,"DataSourceConfigurationV2Component"),x.qZA(),x.qZA(),x._uU(23," This new component has functionality similar to the original, but it adds the ability to present friendly provider names for users to select from instead of just raw class names. Additionally, it allows users to select from any pre-configured properties on the data source.\n"),x.qZA(),x.TgZ(24,"h2"),x._uU(25,"Fundamental Concepts"),x.qZA(),x.TgZ(26,"ul"),x.TgZ(27,"li"),x.TgZ(28,"code"),x.TgZ(29,"a",4),x._uU(30,"WidgetTypesService"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(31,"li"),x.TgZ(32,"code"),x.TgZ(33,"a",5),x._uU(34,"ComponentRegistryService"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(35,"li"),x._uU(36," Custom data source configurator "),x.qZA(),x.TgZ(37,"li"),x._uU(38," Data source "),x.qZA(),x.qZA(),x.TgZ(39,"h2"),x._uU(40,"Basic Steps"),x.qZA(),x.TgZ(41,"ol"),x.TgZ(42,"li"),x._uU(43," Follow the instructions "),x.TgZ(44,"a",6),x._uU(45,"here"),x.qZA(),x._uU(46," to set up your environment for dashboard development. "),x.qZA(),x.TgZ(47,"li"),x._uU(48," Follow the instructions from previous tutorials to get a basic dashboard up and running. "),x.qZA(),x.TgZ(49,"li"),x._uU(50," Create a component that extends "),x.TgZ(51,"code"),x.TgZ(52,"a",3),x._uU(53,"DataSourceConfigurationV2Component"),x.qZA(),x.qZA(),x._uU(54,". Since our properties are going to be editable by the user, we'll need to override the properties on the form to be a form group instead of a single form control. "),x.qZA(),x.TgZ(55,"li"),x._uU(56," Ensure that the following modules are included in the imports of the custom configurator section component's parent module: "),x.TgZ(57,"code"),x._uU(58,"NuiDashboardConfiguratorModule"),x.qZA(),x._uU(59,", "),x.TgZ(60,"code"),x._uU(61,"NuiFormFieldModule"),x.qZA(),x._uU(62,", "),x.TgZ(63,"code"),x._uU(64,"NuiTextboxModule"),x.qZA(),x._uU(65,", "),x.TgZ(66,"code"),x._uU(67,"NuiValidationMessageModule"),x.qZA(),x._uU(68,", and "),x.TgZ(69,"code"),x._uU(70,"NuiSelectV2Module"),x.qZA(),x.qZA(),x.TgZ(71,"li"),x._uU(72," In case you have custom content, like formatters etc., and you use "),x.TgZ(73,"code"),x._uU(74,"nui-select-v2"),x.qZA(),x._uU(75," and "),x.TgZ(76,"code"),x._uU(77,"nui-combobox-v2"),x.qZA(),x._uU(78," components, it is possible that in case of large lists the component overlay may go beyond the configurator heading due to its high z-index. To fix this, use the "),x.TgZ(79,"code"),x._uU(80,"nui-select-v2"),x.qZA(),x._uU(81," and "),x.TgZ(82,"code"),x._uU(83,"nui-combobox-v2"),x.qZA(),x._uU(84," components input "),x.TgZ(85,"code"),x._uU(86,"popupViewportMargin"),x.qZA(),x._uU(87," and pass the height of the configurator heading into it. You can get the height of the configurator heading by simply injecting the "),x.TgZ(88,"code"),x.TgZ(89,"a",7),x._uU(90,"ConfiguratorHeadingService"),x.qZA(),x.qZA(),x._uU(91," and use its "),x.TgZ(92,"code"),x._uU(93,"height$"),x.qZA(),x._uU(94," observable and async pipe to instantly get the current height of the configurator heading. "),x.qZA(),x.TgZ(95,"li"),x._uU(96," Create a data source with properties that will be configurable by the end-user. The data source will need to receive updates to those properties by implementing an "),x.TgZ(97,"code"),x._uU(98,"updateConfiguration"),x.qZA(),x._uU(99," method prescribed by the "),x.TgZ(100,"code"),x.TgZ(101,"a",8),x._uU(102,"IConfigurable"),x.qZA(),x.qZA(),x._uU(103," interface. This method will be called automatically anytime the user selects a new value for a property. "),x.qZA(),x.TgZ(104,"li"),x._uU(105," Register the custom configurator component using the "),x.TgZ(106,"code"),x.TgZ(107,"a",5),x._uU(108,"ComponentRegistryService"),x.qZA(),x.qZA(),x._uU(109," to make it available for late load by the dashboard framework. "),x.qZA(),x.TgZ(110,"li"),x._uU(111," Use the "),x.TgZ(112,"code"),x.TgZ(113,"a",4),x._uU(114,"WidgetTypesService"),x.qZA(),x.qZA(),x._uU(115," to replace the existing configurator component with our custom one. "),x.qZA(),x.qZA(),x.TgZ(116,"nui-message",9),x._uU(117," For details on how to create a custom data source configurator, take a look at the inline comments under the source expander of the following example.\n"),x.qZA(),x.TgZ(118,"nui-example-wrapper",10),x._UZ(119,"custom-data-source-configurator-example"),x.qZA()),2&e&&(x.xp6(116),x.Q6J("allowDismiss",!1))},directives:[q.qqZ,q.hD2,$],encapsulation:2}),e}(),data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}}],V=function(){var e=f(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.oAB({type:e}),e.\u0275inj=x.cJS({providers:[{provide:q.V3$,useFactory:function(){return Z(14050)}}],imports:[[A.Bz.forChild(H),q.vvu,q.Az_,q.gkT,C.Qpk,C.Pi,q.C6o,q.YMY,q.cJ5,q.qAs,q.uCA,q.Ts3,T.UX]]}),e}()}}])}();