"use strict";(self.webpackChunk_nova_ui_dashboards=self.webpackChunk_nova_ui_dashboards||[]).push([[448],{94448:function(e,t,o){o.r(t),o.d(t,{CustomWidgetModule:function(){return S}});var i=o(38583),n=o(91841),a=o(90665),r=o(99763),s=o(46806),d=o(69063),u=o(33018),c=o(4433),g=o(52238),l=o(76e3),m=o(46276),h=o(54607);function p(e,t){if(1&e&&(u.TgZ(0,"nui-select-v2-option",11),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.url),u.xp6(1),u.hij(" ",e.title," ")}}const f=".dashboard[_ngcontent-%COMP%]{height:800px}.custom-configurator-section__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}";function Z(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",6),u.NdJ("click",function(){return u.CHM(e),u.oxw().reInitializeDashboard()}),u._uU(1,"Restore Widget"),u.qZA()}}function y(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"nui-dashboard",7),u.NdJ("dashboardChange",function(t){return u.CHM(e),u.oxw().dashboard=t})("gridsterConfigChange",function(t){return u.CHM(e),u.oxw().gridsterConfig=t}),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("dashboard",e.dashboard)("gridsterConfig",e.gridsterConfig)("editMode",e.editMode)}}const T="example-custom-widget",w="imageSelection";let b=(()=>{class e{constructor(e){this.changeDetector=e,this.elementClass=""}}return e.lateLoadKey="CustomWidgetBodyContentComponent",e.\u0275fac=function(t){return new(t||e)(u.Y36(u.sBO))},e.\u0275cmp=u.Xpm({type:e,selectors:[["custom-widget-body"]],hostVars:2,hostBindings:function(e,t){2&e&&u.Tol(t.elementClass)},inputs:{elementClass:"elementClass",imageSource:"imageSource"},decls:1,vars:1,consts:[[3,"image"]],template:function(e,t){1&e&&u._UZ(0,"nui-image",0),2&e&&u.Q6J("image",t.imageSource)},directives:[s.cuP],styles:[f],changeDetection:0}),e})(),v=(()=>{class e{constructor(e,t,o){this.changeDetector=e,this.formBuilder=t,this.configuratorHeading=o,this.imageItems=[],this.formReady=new u.vpe}ngOnInit(){this.form=this.formBuilder.group({imageSource:[{},[a.kI.required]]}),this.formReady.emit(this.form)}ngOnChanges(e){var t,o;e.imageSource&&!e.imageSource.isFirstChange()&&e.imageSource.previousValue!==this.imageSource&&(this.imageDisplayValue=null===(t=this.imageItems.find(e=>e.url===this.imageSource))||void 0===t?void 0:t.title,null===(o=this.form.get("imageSource"))||void 0===o||o.setValue(this.imageSource))}onChanged(e){var t;this.imageDisplayValue=null===(t=this.imageItems.find(t=>t.url===e))||void 0===t?void 0:t.title}}return e.lateLoadKey="CustomConfiguratorSectionComponent",e.\u0275fac=function(t){return new(t||e)(u.Y36(u.sBO),u.Y36(a.qu),u.Y36(d.p3D))},e.\u0275cmp=u.Xpm({type:e,selectors:[["custom-configurator-section"]],inputs:{imageItems:"imageItems",imageSource:"imageSource"},outputs:{formReady:"formReady"},features:[u.TTD],decls:17,vars:19,consts:function(){let e,t,o;return e=$localize`:␟8c63816d9e1c10b21cfecbea440ee73e942123e5␟7562792424339554158:Image Selection`,t=$localize`:␟8347841963dd5a1df3ec102405ca14d65f7543b7␟5420763949073840298:Select an image:`,o=$localize`:␟0915970211b40d860d164b58f027cc2e787b3025␟2388735320732365776:No image selected`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"custom-configurator-section__accordion-content"],["caption",t,3,"control"],["formControlName","imageSource","placeholder",o,3,"popupViewportMargin","valueSelected"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]]},template:function(e,t){1&e&&(u.TgZ(0,"nui-widget-editor-accordion",0),u.ALo(1,"async"),u.ALo(2,"nuiWidgetEditorAccordionFormState"),u.TgZ(3,"div",1),u._UZ(4,"nui-icon",2),u.ALo(5,"async"),u.ALo(6,"nuiFormHeaderIconPipe"),u.TgZ(7,"div",3),u.TgZ(8,"span",4),u.SDv(9,5),u.qZA(),u.TgZ(10,"div",6),u._uU(11),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"div",7),u.TgZ(13,"nui-form-field",8),u.TgZ(14,"nui-select-v2",9),u.NdJ("valueSelected",function(e){return t.onChanged(e)}),u.ALo(15,"async"),u.YNc(16,p,2,2,"nui-select-v2-option",10),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.Q6J("formGroup",t.form)("state",u.lcZ(1,8,u.lcZ(2,10,t.form))),u.xp6(4),u.Q6J("icon",u.lcZ(5,12,u.xi3(6,14,t.form,"image"))),u.xp6(6),u.Q6J("title",t.imageDisplayValue),u.xp6(1),u.hij(" ",t.imageDisplayValue," "),u.xp6(2),u.Q6J("control",t.form.get("imageSource")),u.xp6(1),u.Q6J("popupViewportMargin",u.lcZ(15,17,t.configuratorHeading.height$)),u.xp6(2),u.Q6J("ngForOf",t.imageItems))},directives:[c.J,a.JL,a.sg,s.oJW,s.hgI,s.j_n,a.JJ,a.u,i.sg,s.rLF],pipes:[i.Ov,g.F,l.d],styles:[f],changeDetection:0}),e})(),A=(()=>{class e{constructor(e,t,o){this.widgetTypesService=e,this.componentRegistry=t,this.changeDetectorRef=o,this.gridsterConfig={},this.editMode=!1}ngOnInit(){this.prepareNovaDashboards(),this.registerImageOptions(),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){const e=q,t={[e.id]:this.widgetTypesService.mergeWithWidgetType(e)};this.dashboard={positions:{[e.id]:{cols:4,rows:11,y:0,x:0}},widgets:t}}prepareNovaDashboards(){this.widgetTypesService.registerWidgetType(T,1,_),this.componentRegistry.registerByLateLoadKey(b),this.componentRegistry.registerByLateLoadKey(v)}registerImageOptions(){const e=this.widgetTypesService.getWidgetType(T,1);this.widgetTypesService.setNode(e,"configurator",w,C)}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(d.xTe),u.Y36(d.hiK),u.Y36(u.sBO))},e.\u0275cmp=u.Xpm({type:e,selectors:[["custom-widget"]],decls:6,vars:3,consts:function(){let e;return e=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"value","valueChange"],e,["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"]]},template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"nui-switch",1),u.NdJ("valueChange",function(e){return t.editMode=e}),u.SDv(2,2),u.qZA(),u.YNc(3,Z,2,0,"button",3),u.qZA(),u.TgZ(4,"div",4),u.YNc(5,y,1,3,"nui-dashboard",5),u.qZA()),2&e&&(u.xp6(1),u.Q6J("value",t.editMode),u.xp6(2),u.Q6J("ngIf",!(null!=t.dashboard&&t.dashboard.widgets.widget1)),u.xp6(2),u.Q6J("ngIf",t.dashboard))},directives:[s.qUD,i.O5,s.r0F,m.M,h.t],styles:[f]}),e})();const _={paths:{widget:{[d.ACc.Root]:d.XMI},configurator:{[d.ACc.Root]:d.XMI,[w]:"imageSelection.properties.imageItems"}},widget:{[d.xW5.Structure]:Object.assign(Object.assign({[d.XMI]:{id:d.XMI,componentType:d.aAT.lateLoadKey,providers:{[d.Muk.Refresher]:(0,d.j5E)(),[d.Muk.EventProxy]:d.gIB},properties:{nodes:["header","loading","body"]}},header:d.zer,loading:d.CyH,body:d.Q$d},(0,d.O9d)("mainContent")),{mainContent:{id:"mainContent",componentType:b.lateLoadKey,properties:{elementClass:"d-flex w-100 justify-content-center"}}}),[d.xW5.Configuration]:{[d.XMI]:{id:d.XMI,providers:{[d.Muk.Refresher]:(0,d.j5E)(!1,60)}},header:{properties:{title:$localize`Empty Custom Widget`}}}},configurator:{[d.xW5.Structure]:{[d.XMI]:{id:d.XMI,componentType:d.PIV.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","customConfig"]}},presentation:{id:"presentation",componentType:d.jFY.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:d.Usc.lateLoadKey,providers:{converter:{providerId:d.j4g}}},customConfig:{id:"customConfig",componentType:d.jFY.lateLoadKey,properties:{headerText:$localize`Custom Widget Configuration`,nodes:["imageSelection"]}},imageSelection:{id:"imageSelection",componentType:v.lateLoadKey,properties:{imageItems:[]},providers:{[d.Muk.Converter]:{providerId:d.VXI,properties:{formParts:[{previewPath:"mainContent.properties",keys:["imageSource"]}]}}}}}}},C=[{title:"Harry Potter Book Cover",url:"https://imgc.allpostersimages.com/img/print/u-g-F8PQ9I0.jpg?w=550&h=550&p=0"},{title:"Harry Potter Movie Poster",url:"https://images-na.ssl-images-amazon.com/images/I/81gpmMdKOHL._AC_SY741_.jpg"}],q={id:"widget1",type:T,pizzagna:{[d.xW5.Configuration]:{header:{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}},mainContent:{properties:{imageSource:C[0].url}}}}},U=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["custom-widget-docs"]],decls:124,vars:3,consts:[["href","../additional-documentation/tutorials/customization/configurator-section.html","target","_parent"],["href","../components/WidgetHeaderComponent.html","target","_blank"],["href","https://nova-ui.solarwinds.io/bits/release_v12.x/components/ImageComponent.html","target","_blank"],["type","critical",3,"allowDismiss"],["href","../classes/WidgetTypesService.html","target","_blank"],["href","../injectables/ComponentRegistryService.html","target","_blank"],["href","../additional-documentation/getting-started.html","target","_parent"],["href","../modules/NuiDashboardConfiguratorModule.html","target","_blank"],["href","https://angular.io/api/forms/ReactiveFormsModule","target","_blank"],["type","info",3,"allowDismiss"],["filenamePrefix","custom-widget.component","exampleTitle","Custom Widget"]],template:function(e,t){1&e&&(u.TgZ(0,"h1"),u._uU(1,"Implementing a Custom Widget"),u.qZA(),u.TgZ(2,"p"),u._uU(3," In the "),u.TgZ(4,"a",0),u._uU(5,"Custom Configurator Section"),u.qZA(),u._uU(6," tutorial, we talked about giving users the ability to configure a widget behavior or layout that's not configurable out of the box. This includes such things as providing a product-specific way for users to configure a data source. That tutorial covered the first step to achieving something like this by demonstrating how to replace an existing widget configurator (editor) section with your own implementation. In this tutorial, we'll go a step further and create a custom widget that actually reacts to changes triggered by users as they interact with the custom configurator section.\n"),u.qZA(),u.TgZ(7,"p"),u._uU(8," To keep things simple we'll create a custom widget body and reuse the standard "),u.TgZ(9,"code"),u.TgZ(10,"a",1),u._uU(11,"WidgetHeaderComponent"),u.qZA(),u.qZA(),u._uU(12," as our header. The widget body will consist of a "),u.TgZ(13,"code"),u.TgZ(14,"a",2),u._uU(15,"nui-image"),u.qZA(),u.qZA(),u._uU(16,", and we'll create a custom configurator section that can be used to update the source url of the image. In a later tutorial, we'll create a custom data source configurator section and go over the small amount of additional wiring required to give users the ability to change the configuration of a data source.\n"),u.qZA(),u.TgZ(17,"nui-message",3),u.TgZ(18,"strong"),u._uU(19,"Note:"),u.qZA(),u._uU(20," Implementing a custom widget should be an extremely rare occurrence, and it should be done only with the utmost caution. If you or someone on your team is thinking about implementing one, please discuss it with UX leadership and the Nova development team before proceeding.\n"),u.qZA(),u.TgZ(21,"h2"),u._uU(22,"Fundamental Concepts"),u.qZA(),u.TgZ(23,"ul"),u.TgZ(24,"li"),u.TgZ(25,"code"),u.TgZ(26,"a",4),u._uU(27,"WidgetTypesService"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(28,"li"),u.TgZ(29,"code"),u.TgZ(30,"a",5),u._uU(31,"ComponentRegistryService"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(32,"li"),u._uU(33," Custom configurator section component "),u.qZA(),u.TgZ(34,"li"),u._uU(35," Custom widget body "),u.qZA(),u.qZA(),u.TgZ(36,"h2"),u._uU(37,"Basic Steps"),u.qZA(),u.TgZ(38,"ol"),u.TgZ(39,"li"),u._uU(40," Follow the instructions "),u.TgZ(41,"a",6),u._uU(42,"here"),u.qZA(),u._uU(43," to set up your environment for dashboard development. "),u.qZA(),u.TgZ(44,"li"),u._uU(45," Follow the instructions from previous tutorials to get a basic dashboard up and running. "),u.qZA(),u.TgZ(46,"li"),u._uU(47," Create a component that will serve as the custom widget body. In this tutorial, the widget body will consist of a simple "),u.TgZ(48,"code"),u._uU(49,"nui-image"),u.qZA(),u._uU(50,". "),u.qZA(),u.TgZ(51,"li"),u._uU(52," Create a component that will serve as the custom configurator section. In this tutorial, the custom configurator section will allow users to update the source url for the image in the custom widget. "),u.qZA(),u.TgZ(53,"li"),u._uU(54," Ensure that "),u.TgZ(55,"code"),u._uU(56,"NuiImageModule"),u.qZA(),u._uU(57," is included in the imports of the custom widget component's parent module. "),u.qZA(),u.TgZ(58,"li"),u._uU(59," Ensure that the following modules are included in the imports of the custom configurator section component's parent module: "),u.TgZ(60,"code"),u.TgZ(61,"a",7),u._uU(62,"NuiDashboardConfiguratorModule"),u.qZA(),u.qZA(),u._uU(63,", "),u.TgZ(64,"code"),u._uU(65,"NuiFormFieldModule"),u.qZA(),u._uU(66,", "),u.TgZ(67,"code"),u._uU(68,"NuiSelectV2Module"),u.qZA(),u._uU(69,", "),u.TgZ(70,"code"),u._uU(71,"NuiIconModule"),u.qZA(),u._uU(72,", and Angular's "),u.TgZ(73,"code"),u.TgZ(74,"a",8),u._uU(75,"ReactiveFormsModule"),u.qZA(),u.qZA(),u._uU(76,". "),u.qZA(),u.TgZ(77,"li"),u._uU(78," Add the custom widget body and configurator section component class names to the declarations of the module(s) in which they're implemented. In this example, the class names are "),u.TgZ(79,"code"),u._uU(80,"CustomWidgetBodyContentComponent"),u.qZA(),u._uU(81," and "),u.TgZ(82,"code"),u._uU(83,"CustomConfiguratorSectionComponent"),u.qZA(),u._uU(84," respectively. "),u.qZA(),u.TgZ(85,"li"),u._uU(86," Prepare the dashboard framework to use our custom components by doing the following: "),u.TgZ(87,"ol"),u.TgZ(88,"li"),u._uU(89," Register the new widget type using the "),u.TgZ(90,"code"),u.TgZ(91,"a",4),u._uU(92,"WidgetTypesService"),u.qZA(),u.qZA(),u._uU(93,". "),u.qZA(),u.TgZ(94,"li"),u._uU(95," Register the custom widget body and custom configurator section components using the "),u.TgZ(96,"code"),u.TgZ(97,"a",5),u._uU(98,"ComponentRegistryService"),u.qZA(),u.qZA(),u._uU(99,". This will make them available for late load by the dashboard framework. "),u.qZA(),u.TgZ(100,"li"),u._uU(101," Initialize the image source url options to be displayed in the custom configurator section dropdown using the "),u.TgZ(102,"code"),u.TgZ(103,"a",4),u._uU(104,"WidgetTypesService"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(105,"nui-message",9),u.TgZ(106,"strong"),u._uU(107,"Note:"),u.qZA(),u._uU(108," In this tutorial, the above three steps are performed in the component's "),u.TgZ(109,"code"),u._uU(110,"ngOnInit"),u.qZA(),u._uU(111,". But, in a real-world app, widget type modifications and component registrations like this may make more sense in a parent module's constructor. Moving framework initialization procedures such as these to a higher level in an app's hierarchy ensures that multiple dashboard instances within a common parent module have access to the same modifications. "),u.qZA(),u.qZA(),u.TgZ(112,"li"),u._uU(113," At this point you should have a custom widget on the dashboard that displays an image. "),u.qZA(),u.TgZ(114,"li"),u._uU(115," You should also be able to open the widget editor using the Edit button in the menu at the top-right corner of the widget and see the custom configurator section in the editor. "),u.qZA(),u.TgZ(116,"li"),u._uU(117," Changing the image selection in the dropdown should update the image in the widget preview. "),u.qZA(),u.TgZ(118,"li"),u._uU(119," Clicking the Save Changes button in the editor should update the widget on the dashboard to show the newly selected image. "),u.qZA(),u.qZA(),u.TgZ(120,"nui-message",9),u._uU(121," For more detailed information about implementing a custom widget, take a look at the inline comments under the source expander of the following example.\n"),u.qZA(),u.TgZ(122,"nui-example-wrapper",10),u._UZ(123,"custom-widget"),u.qZA()),2&e&&(u.xp6(17),u.Q6J("allowDismiss",!1),u.xp6(88),u.Q6J("allowDismiss",!1),u.xp6(15),u.Q6J("allowDismiss",!1))},directives:[s.qqZ,s.hD2,A],encapsulation:2}),e})(),data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}},{path:"example",component:A,data:{srlc:{hideIndicator:!0}}}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[i.ez,a.UX,n.JF,d.Pi,d.Qpk,s.vvu,s.C6o,s.Ts3,s.sF0,s.gkT,s.qAs,s.cJ5,s.Az_,r.Bz.forChild(U)]]}),e})()}}]);