!function(){"use strict";var e,t,r,i,o,n,a,s,d,c,l,u,p;function v(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=I(e);if(t){var o=I(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return S(this,r)}}function S(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunk_nova_ui_dashboards=self.webpackChunk_nova_ui_dashboards||[]).push([[502],{80502:function(h,w,S){var I,C,k,T,x,D;S.r(w),S.d(w,{Prototype1Module:function(){return Se}});var R,A=S(38583),Z=S(91841),W=S(99763),F=S(46806),_=S(69063),M=S(93877),P=S(4758),z=S(40837),L=S(64762),O=S(49977),N=S.n(O),q=S(92080),J=S.n(q),j=S(26215),Q=S(7484),E=S(33018),$=((R=function(e){b(r,e);var t=y(r);function r(e){var i;return g(this,r),(i=t.call(this)).logger=e,i.cache=Array.from({length:0}),i.totalItems=325,i.page=1,i.busy=new j.X(!1),i.dataFields=[],i}return m(r,[{key:"getFilteredData",value:function(e){var t,r,i,o,n,a,s,d,c,l,u,p,v,f;return(0,L.mG)(this,void 0,void 0,regeneratorRuntime.mark(function g(){var h,m,b,w,y,S,I,C,k,T=this;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(h=null!==(i=null===(r=null===(t=e.virtualScroll)||void 0===t?void 0:t.value)||void 0===r?void 0:r.start)&&void 0!==i?i:0,m=null!==(a=null===(n=null===(o=e.virtualScroll)||void 0===o?void 0:o.value)||void 0===n?void 0:n.end)&&void 0!==a?a:0,b=m-h,0===h&&(this.cache=[]),!(null===(s=e.sorter)||void 0===s?void 0:s.value)||N()(this.lastSortValue,e.sorter.value)||0!==(null===(d=e.virtualScroll)||void 0===d?void 0:d.value.start)||!this.lastVirtualScroll){g.next=34;break}if(w=Math.ceil(b?this.totalItems/b:1),y=Math.max(b<80?b:80,1),I=null,"desc"!==(null===(l=null===(c=e.sorter)||void 0===c?void 0:c.value)||void 0===l?void 0:l.direction)){g.next=19;break}this.cache=[],C=0;case 7:if(!(C<this.page)){g.next=19;break}return g.next=10,fetch("".concat(Q.Wg,"/?page=").concat(w-C||1,"&per_page=").concat(y));case 10:return g.next=12,g.sent.json();case 12:(I=g.sent)&&I.length<y&&this.page++,S={brewInfo:null==I?void 0:I.map(function(e){return{id:e.id,name:e.name,tagline:e.tagline,first_brewed:e.first_brewed,description:e.description,brewers_tips:e.brewers_tips}}),total:null==I?void 0:I.length},this.cache=w-C!=0?this.cache.concat(S.brewInfo):this.cache;case 16:++C,g.next=7;break;case 19:if("asc"!==(null===(p=null===(u=e.sorter)||void 0===u?void 0:u.value)||void 0===p?void 0:p.direction)){g.next=33;break}this.cache=[],k=0;case 22:if(!(k<this.page)){g.next=33;break}return g.next=25,fetch("".concat(Q.Wg,"/?page=").concat(k+1,"&per_page=").concat(y));case 25:return g.next=27,g.sent.json();case 27:I=g.sent,S={brewInfo:null==I?void 0:I.map(function(e){return{id:e.id,name:e.name,tagline:e.tagline,first_brewed:e.first_brewed,description:e.description,brewers_tips:e.brewers_tips}}),total:null==I?void 0:I.length},this.cache=this.cache.concat(S.brewInfo);case 30:k++,g.next=22;break;case 33:return g.abrupt("return",(this.lastSortValue=null===(v=e.sorter)||void 0===v?void 0:v.value,this.lastVirtualScroll=null===(f=e.virtualScroll)||void 0===f?void 0:f.value,{result:{repeat:{itemsSource:this.sortData(this.cache,e)},paginator:{total:this.totalItems},dataFields:this.dataFields}}));case 34:return g.abrupt("return",(this.busy.next(!0),new Promise(function(t){setTimeout(function(){T.getData(h,m,e).then(function(r){var i,o;!r||(T.cache=T.cache.concat(r.brewInfo),T.dataSubject.next(T.cache),t({result:{repeat:{itemsSource:T.sortData(T.cache,e)},paginator:{total:T.totalItems},dataFields:T.dataFields}}),T.lastSortValue=null===(i=e.sorter)||void 0===i?void 0:i.value,T.lastVirtualScroll=null===(o=e.virtualScroll)||void 0===o?void 0:o.value,T.busy.next(!1))})},500)})));case 35:case"end":return g.stop()}},g,this)}))}},{key:"getData",value:function(){var e,t,r,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=arguments.length>2?arguments[2]:void 0;return(0,L.mG)(this,void 0,void 0,regeneratorRuntime.mark(function s(){var d,c,l,u;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(d=n-o,c=Math.ceil(d?this.totalItems/d:1),l=null,u=Math.max(d<80?d:80,1),s.t0="asc"===(null===(t=null===(e=a.sorter)||void 0===e?void 0:e.value)||void 0===t?void 0:t.direction),!s.t0){s.next=10;break}return s.next=7,fetch("".concat(Q.Wg,"/?page=").concat(this.page,"&per_page=").concat(u));case 7:return s.next=9,s.sent.json();case 9:l=s.sent;case 10:if(s.t1="desc"===(null===(i=null===(r=a.sorter)||void 0===r?void 0:r.value)||void 0===i?void 0:i.direction),!s.t1){s.next=17;break}return s.next=14,fetch("".concat(Q.Wg,"/?page=").concat(c-this.page,"&per_page=").concat(u));case 14:return s.next=16,s.sent.json();case 16:l=s.sent;case 17:if(s.t2=a.sorter,s.t2){s.next=24;break}return s.next=21,fetch("".concat(Q.Wg,"/?page=").concat(this.page,"&per_page=").concat(u));case 21:return s.next=23,s.sent.json();case 23:l=s.sent;case 24:return s.abrupt("return",{brewInfo:null==l?void 0:l.map(function(e,t){return{id:e.id,name:e.name,tagline:e.tagline,first_brewed:e.first_brewed,description:e.description,brewers_tips:e.brewers_tips}}),total:null==l?void 0:l.length});case 25:case"end":return s.stop()}},s,this)}))}},{key:"sortData",value:function(e,t){var r,i,o,n;return J()(e,null===(i=null===(r=t.sorter)||void 0===r?void 0:r.value)||void 0===i?void 0:i.sortBy,null===(n=null===(o=t.sorter)||void 0===o?void 0:o.value)||void 0===n?void 0:n.direction)}}]),r}(F.LvN)).providerId="AcmeTableDataSourceNoDataFields",R.\u0275fac=function(e){return new(e||R)(E.LFG(F.mQy))},R.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac}),R),B=S(5596),K=S(33618),U=S(85631),Y=S(6376),H=S(55350),G=S(55206),V=S(59311),X=S.n(V),ee=S(79765),te=S(15257),re=S(46782),ie=S(37524),oe=S.n(ie),ne=S(12666),ae=S.n(ne),se=S(16738),de=S.n(se),ce=function(){var e,t=function(e){b(r,e);var t=y(r);function r(){return g(this,r),t.apply(this,arguments)}return m(r,[{key:"getFilteredData",value:function(e){return(0,L.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({}));case 1:case"end":return e.stop()}},e)}))}}]),r}(F.LvN);return t.\u0275fac=function(r){return(e||(e=E.n5z(t)))(r||t)},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac}),t}(),le=function(){var e=function(){function e(t){g(this,e),this.globalFilters=t}return m(e,[{key:"getLink",value:function(e){if(!this.globalFilters)return e;var t=this.globalFilters.getFilters();return e+"/search?"+Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e].data.value)}).join("&")}}]),e}();return e.providerId="HeaderLinkProviderService",e.\u0275fac=function(t){return new(t||e)(E.LFG(ce,8))},e.\u0275prov=E.Yz7({token:e,factory:e.\u0275fac}),e}(),ue={widget1:{cols:5,rows:6,y:0,x:0},widget2:{cols:7,rows:6,y:0,x:5},widget3:{cols:6,rows:6,y:6,x:0},widget4:{cols:6,rows:6,y:6,x:6}},pe=[{id:"widget1",type:"kpi",pizzagna:f({},_.xW5.Configuration,{header:{properties:{title:"KPI Widget!",subtitle:"A bunch of number boxes",collapsible:!0}},tiles:{providers:{interaction:{providerId:_.DJm,properties:{url:"${data.link}"}}},properties:{nodes:["kpi1","kpi2","kpi3"]}},kpi1:{id:"kpi1",providers:(I={},f(I,_.Muk.DataSource,{providerId:P.i.providerId}),f(I,_.Muk.Adapter,{providerId:_.u1$,properties:{componentId:"kpi1",propertyPath:"widgetData"}}),f(I,_.Muk.KpiColorPrioritizer,{providerId:_.tSO,properties:{rules:[{comparisonType:">",value:2,color:"var(--nui-color-chart-four)"},{comparisonType:"==",value:1.5,color:"var(--nui-color-chart-seven)"},{comparisonType:"<",value:1,color:"var(--nui-color-chart-one)"}]}}),I),properties:{configuration:{formatters:f({},_.Klf.Value,{formatter:{componentType:_.PEA.lateLoadKey,properties:{dataFieldIds:{value:"value"}}}})},widgetData:{id:"totalStorage",value:0,label:"Total storage",units:"Bytes",icon:"state_ok",link:"http://www.google.com"}}},kpi2:{id:"kpi2",providers:f({},_.Muk.DataSource,{providerId:P.L2.providerId,properties:{numberFormat:"1.1-1"}}),properties:{configuration:{formatters:f({},_.Klf.Value,{formatter:{componentType:_.Cg1.lateLoadKey,properties:{dataFieldIds:{value:"icon"}}}})},widgetData:{id:"downloadSpeed",value:0,label:"Download SUPER DUPER VERY LONG STRING Speed",icon:"state_ok",units:"MB/S"}}},kpi3:{id:"kpi3",providers:f({},_.Muk.DataSource,{providerId:P.sR.providerId}),properties:{configuration:{formatters:f({},_.Klf.Value,{formatter:{componentType:_.aDR.lateLoadKey,properties:{dataFieldIds:{value:"value"}}}})},widgetData:{id:"uploadSpeed",value:0,label:"Upload Speed",units:"MB/S"}}}})},{id:"widget2",type:"proportional",pizzagna:f({},_.xW5.Configuration,(k={},f(k,_.XMI,{providers:f({},_.Muk.InteractionHandler,{providerId:_.DJm,properties:{url:"${data.link}"}})}),f(k,"header",{properties:{title:"Proportional Widget!",subtitle:"Proportional widget with legend formatters"}}),f(k,"chart",{providers:(C={},f(C,_.Muk.DataSource,{providerId:z.s.providerId}),f(C,_.Muk.Adapter,{properties:f({},_.Muk.DataSource,{properties:{isEuropeOnly:!1}})}),C),properties:{configuration:{interactive:!0,chartDonutContentLabel:"Some label",chartDonutContentIcon:"printer",chartOptions:{type:_.EMX.VerticalBarChart,legendPlacement:_.woB.Right},chartColors:["gray","orange","black"]}}}),k))},{id:"widget3",type:"timeseries",pizzagna:f({},_.xW5.Configuration,(x={},f(x,_.XMI,{providers:(T={},f(T,_.Muk.DataSource,{providerId:G.wi.providerId}),f(T,_.Muk.InteractionHandler,{providerId:_.DJm}),T)}),f(x,"header",{providers:{dynamicLinkProvider:{providerId:le.providerId}},properties:{title:"Timeseries Widget!",subtitle:"Basic timeseries widget",url:"https://www.google.com"}}),f(x,"chart",{providers:f({},_.Muk.Adapter,{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}),properties:{configuration:{legendPlacement:_.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",chartColors:["var(--nui-color-chart-eight)","var(--nui-color-chart-nine)","var(--nui-color-chart-ten)"]}}}),f(x,"timeframeSelection",{properties:{timeframe:{selectedPresetId:"last7Days"},minDate:de()().subtract(10,"days").format(),maxDate:de()().format()}}),x))},{id:"widget4",type:"table",pizzagna:f({},_.xW5.Configuration,(D={},f(D,_.XMI,{providers:f({},_.Muk.InteractionHandler,{providerId:_.DJm})}),f(D,"header",{properties:{title:"Table Widget!",subtitle:"Basic table widget",collapsible:!0}}),f(D,"table",{providers:f({},_.Muk.DataSource,{providerId:B.g.providerId}),properties:{configuration:{interactive:!0,columns:[{id:"column1",label:"No",isActive:!0,formatter:{componentType:_.aDR.lateLoadKey,properties:{dataFieldIds:{value:"no"}}}},{id:"column2",label:"Title",isActive:!0,formatter:{componentType:_.aDR.lateLoadKey,properties:{dataFieldIds:{value:"nameTitle"}}}},{id:"column3",label:"First Name",isActive:!0,formatter:{componentType:_.aDR.lateLoadKey,properties:{dataFieldIds:{value:"nameFirst"}}}},{id:"column4",label:"Last Name",isActive:!0,formatter:{componentType:_.aDR.lateLoadKey,properties:{dataFieldIds:{value:"nameLast"}}}},{id:"column5",label:"E-Mail",isActive:!0,formatter:{componentType:_.aDR.lateLoadKey,properties:{dataFieldIds:{value:"email"}}}}],sorterConfiguration:{descendantSorting:!0,sortBy:"column4"},hasVirtualScroll:!0,searchConfiguration:{enabled:!0}}}}),D))}];function ve(e,t){if(1&e&&(E.TgZ(0,"div",3),E.TgZ(1,"div",4),E._uU(2),E.qZA(),E.qZA()),2&e){var r=t.item;E.xp6(2),E.hij(" ",r.title," ")}}var fe=function(){var e=function(){function e(t){g(this,e),this.widgetTypesService=t,this.widgetSelected=new E.vpe,this.widgetItems=[]}return m(e,[{key:"ngOnInit",value:function(){var e=this,t=new A.rS;this.widgetItems=pe.map(function(r){return{title:t.transform(r.type),widget:e.widgetTypesService.mergeWithWidgetType(r)}}),pe.forEach(function(t){e.addUnconfiguredWidgetWithConfigLayer(t)})}},{key:"addUnconfiguredWidget",value:function(e){var t=(new A.rS).transform(e);this.widgetItems.push({title:"Unconfigured ".concat(t),widget:{id:"unconfigured".concat(t),type:e,metadata:{needsConfiguration:!0},pizzagna:oe()(this.widgetTypesService.getWidgetType(e).widget)}}),ae()(this.widgetItems[this.widgetItems.length-1].widget.pizzagna,"".concat(_.xW5.Structure,".header.properties.title"),"Unconfigured ".concat(t))}},{key:"addUnconfiguredWidgetWithConfigLayer",value:function(e){var t=(new A.rS).transform(e.type);this.widgetItems.push({title:"Unconfigured ".concat(t," With Config Layer"),widget:Object.assign(Object.assign({},oe()(this.widgetTypesService.mergeWithWidgetType(e))),{id:"unconfiguredWithConfigLayer".concat(t),metadata:{needsConfiguration:!0}})}),ae()(this.widgetItems[this.widgetItems.length-1].widget.pizzagna,"".concat(_.xW5.Configuration,".header.properties.title"),"Unconfigured ".concat(t," With Config Layer"))}},{key:"onSelect",value:function(e){this.widgetSelected.emit(e[0].widget),this.widgetSelection=e}}]),e}();return e.lateLoadKey="AcmeCloneSelectionComponent",e.\u0275fac=function(t){return new(t||e)(E.Y36(_.xTe))},e.\u0275cmp=E.Xpm({type:e,selectors:[["acme-clone-selection"]],outputs:{widgetSelected:"widgetSelected"},decls:4,vars:3,consts:[[1,"nui-widget-cloner"],["selectionMode","singleWithRequiredSelection",3,"itemsSource","selection","repeatItemTemplateRef","selectionChange"],["widgetClonerItem",""],[1,"nui-widget-cloner__item","d-flex","pt-2","pb-2","align-items-center"],[1,"text-info","ml-3"]],template:function(e,t){if(1&e&&(E.TgZ(0,"div",0),E.TgZ(1,"nui-repeat",1),E.NdJ("selectionChange",function(e){return t.onSelect(e)}),E.qZA(),E.qZA(),E.YNc(2,ve,3,1,"ng-template",null,2,E.W1O)),2&e){var r=E.MAs(3);E.xp6(1),E.Q6J("itemsSource",t.widgetItems)("selection",t.widgetSelection)("repeatItemTemplateRef",r)}},directives:[F.$N6],styles:[".nui-widget-cloner__item[_ngcontent-%COMP%]{height:60px}"]}),e}();function ge(e,t){if(1&e&&(E.TgZ(0,"div",3),E.TgZ(1,"div",4),E._uU(2),E.qZA(),E.qZA()),2&e){var r=t.item;E.xp6(2),E.hij(" ",r.title," ")}}var he=function(){var e=function(e){b(r,e);var t=y(r);function r(e){return g(this,r),t.call(this,e)}return m(r,[{key:"ngOnInit",value:function(){var e=this,t=new A.rS;this.widgetItems=pe.map(function(r){return{title:t.transform(r.type),widget:e.widgetTypesService.mergeWithWidgetType(r)}})}}]),r}(fe);return e.lateLoadKey="AcmeCloneSelectionComponent",e.\u0275fac=function(t){return new(t||e)(E.Y36(_.xTe))},e.\u0275cmp=E.Xpm({type:e,selectors:[["acme-clone-selection"]],features:[E.qOj],decls:4,vars:3,consts:[[1,"nui-widget-cloner"],["selectionMode","singleWithRequiredSelection",3,"itemsSource","selection","repeatItemTemplateRef","selectionChange"],["widgetClonerItem",""],[1,"nui-widget-cloner__item","d-flex","pt-2","pb-2","align-items-center"],[1,"text-info","ml-3"]],template:function(e,t){if(1&e&&(E.TgZ(0,"div",0),E.TgZ(1,"nui-repeat",1),E.NdJ("selectionChange",function(e){return t.onSelect(e)}),E.qZA(),E.qZA(),E.YNc(2,ge,3,1,"ng-template",null,2,E.W1O)),2&e){var r=E.MAs(3);E.xp6(1),E.Q6J("itemsSource",t.widgetItems)("selection",t.widgetSelection)("repeatItemTemplateRef",r)}},directives:[F.$N6],styles:[".nui-widget-cloner__item[_ngcontent-%COMP%]{height:60px}"]}),e}(),me=function(){var r=m(function r(i){var o=this;g(this,r),this.toastService=i,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=function(t,r){var i=new ee.xQ;return setTimeout(function(){if(o.allowSubmit)i.next(t);else{var r=$localize(e||(e=v(["Submit failed."])));o.toastService.error({title:r}),i.error(r)}},1e3),i.asObservable()},this.tryRemove=function(e){var r=new ee.xQ;return setTimeout(function(){if(o.allowRemoval)r.next(e);else{var i=$localize(t||(t=v(["Widget removal failed."])));o.toastService.error({title:i}),r.error(i)}},200),r.asObservable()},this.toastService.setConfig({timeOut:2e3})});return r.\u0275fac=function(e){return new(e||r)(E.LFG(F.klp))},r.\u0275prov=E.Yz7({token:r,factory:r.\u0275fac}),r}(),be=S(46276),we=S(54607),ye=[{path:"",component:function(){var e=function(){function e(t,r,i,o,n,a){var s,d=this;g(this,e),this.providerRegistry=t,this.submitHandler=r,this.widgetTypesService=i,this.widgetClonerService=o,this.refreshSettings=n,this.globalFilters=a,this.dashboard={positions:{},widgets:{}},this.gridsterConfig={minCols:12,maxCols:12,minRows:12},this.editMode=!1,this.systemRefreshInterval=60,this.searchQuery="solarwinds",this.destroy$=new ee.xQ,this.globalFilters.registerComponent({q:{componentInstance:{getFilters:function(){return{data:{type:"string",value:d.searchQuery}}}}}}),this.providerRegistry.setProviders((f(s={},P.i.providerId,{provide:_.Fk3,useClass:P.i,deps:[Z.eN]}),f(s,P.L2.providerId,{provide:_.Fk3,useClass:P.L2,deps:[Z.eN]}),f(s,P.sR.providerId,{provide:_.Fk3,useClass:P.sR,deps:[]}),f(s,z.Q.providerId,{provide:_.Fk3,useClass:z.Q,deps:[Z.eN]}),f(s,z.s.providerId,{provide:_.Fk3,useClass:z.s,deps:[]}),f(s,B.g.providerId,{provide:_.Fk3,useClass:B.g,deps:[F.mQy,Z.eN]}),f(s,K.W.providerId,{provide:_.Fk3,useClass:K.W,deps:[F.mQy]}),f(s,U.t.providerId,{provide:_.Fk3,useClass:U.t,deps:[F.mQy]}),f(s,$.providerId,{provide:_.Fk3,useClass:$,deps:[F.mQy]}),f(s,H.n.providerId,{provide:_.Fk3,useClass:H.n,deps:[F.oDG]}),f(s,G.wi.providerId,{provide:_.Fk3,useClass:G.wi,deps:[Z.eN]}),f(s,G.u2.providerId,{provide:_.Fk3,useClass:G.u2,deps:[]}),f(s,Y.a.providerId,{provide:_.Fk3,useClass:Y.a,deps:[F.mQy,Z.eN]}),f(s,le.providerId,{provide:_.B5u,useClass:le,deps:[[new E.FiY,ce]]}),s))}return m(e,[{key:"ngOnInit",value:function(){var e,t,r=this;null===(t=null===(e=this.widgetTypesService.getWidgetType("table").configurator)||void 0===e?void 0:e[_.xW5.Structure].presentation.properties)||void 0===t||t.nodes.push("refresher"),this.refreshSettings.refreshRateSeconds=this.systemRefreshInterval;var i=pe.map(function(e){return r.widgetTypesService.mergeWithWidgetType(e)}),o=X()(i,function(e){return e.id});this.dashboard={positions:ue,widgets:o}}},{key:"onDsErrorSwitch",value:function(e){z.Q.mockError=e,P.i.mockError=e,P.L2.mockError=e,B.g.mockError=e,G.wi.mockError=e}},{key:"onShowButtonSwitch",value:function(e,t){for(var r=0,i=Object.keys(this.dashboard.widgets);r<i.length;r++){var o=i[r];this.dashboard=(0,F.zdu)(this.dashboard,"widgets.".concat(o,".pizzagna.configuration.header.properties.").concat(t),e)}}},{key:"ngAfterViewInit",value:function(){var e=this;this.dashboardComponent.eventBus.subscribeUntil(_.MOJ,this.destroy$,function(t){e.widgetClonerService.open({widget:e.dashboard.widgets[t.widgetId],dashboardComponent:e.dashboardComponent,trySubmit:e.submitHandler.trySubmit,widgetSelectionComponentType:he}).pipe((0,te.q)(1),(0,re.R)(e.destroy$)).subscribe()})}},{key:"onCloneWidget",value:function(){this.widgetClonerService.open({dashboardComponent:this.dashboardComponent,trySubmit:this.submitHandler.trySubmit,widgetSelectionComponentType:fe}).pipe((0,te.q)(1),(0,re.R)(this.destroy$)).subscribe()}},{key:"onEditWithCloner",value:function(){this.dashboardComponent.eventBus.next(_.MOJ,{widgetId:pe[0].id})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"onSystemRefreshIntervalClick",value:function(){this.refreshSettings.refreshRateSeconds=this.systemRefreshInterval}}]),e}();return e.\u0275fac=function(t){return new(t||e)(E.Y36(_.CNH),E.Y36(me),E.Y36(_.xTe),E.Y36(_.$Ie),E.Y36(_.g4s),E.Y36(ce))},e.\u0275cmp=E.Xpm({type:e,selectors:[["acme-dashboard"]],viewQuery:function(e,t){var r;(1&e&&E.Gf(_.MXM,7),2&e)&&(E.iGM(r=E.CRH())&&(t.dashboardComponent=r.first))},features:[E._Bn([me,ce])],decls:28,vars:11,consts:function(){return[["type","button","nui-button","",1,"mb-3","ml-4",3,"click"],$localize(r||(r=v([":\u241f08a1b409eac8269dd4dce8a2b3bd976356ba40ee\u241f7260316479095556147:Create Widget Clone"]))),$localize(i||(i=v([":\u241f4e17d1961186f54a679f7623cd03e5c49c411f65\u241f639090956363340116:Simulate edit with cloner"]))),[1,"w-100",2,"height","725px"],[3,"nuiWidgetEditor","dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"],[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"value","valueChange"],$localize(o||(o=v([":\u241fc0390f914462a77b0ab8e053abf7c77af5b1da81\u241f6640158718767573444: Edit mode "]))),$localize(n||(n=v([":\u241fdb70aaa4da7a9f7c0fa3a218907f9fa354a19038\u241f5855643886473775120: Allow Submit "]))),$localize(a||(a=v([":\u241fd289dfdc6c4e23b49a96db083f95f1087ed1400a\u241f3687117978364204872: Allow Removal "]))),$localize(s||(s=v([":\u241f3299af3b186d7701f4c0626e41eba58af8382723\u241f4106211393112768148: Show Edit Button "]))),$localize(d||(d=v([":\u241f30251ad3dcd7facd3a222d48fb2ba02f8503c52c\u241f8096484277280346189: Show Remove Button "]))),[1,"ml-3",3,"valueChange"],$localize(c||(c=v([":\u241fc355f0feb3f72b3594e6e975456cd0a2dac1d929\u241f870224976565315483: Data Source Error "]))),[1,"d-flex","flex-row"],[2,"width","300px"],["caption",$localize(l||(l=v([":\u241f90504d9af68fb3aa81accb4bc3005526deb04093\u241f5488473345097746222:System refresh interval (seconds)"])))],[3,"value","valueChange"],["type","button","nui-button","",1,"ml-4",3,"click"],$localize(u||(u=v([":\u241f4de55e520d95a021a3b6dcb94b34b5b2364abef8\u241f1472280137824054907:Update system refresh interval "]))),[1,"mt-4"],["caption",$localize(p||(p=v([":\u241fb3cbfe131ba0c10de2f194b783e0ca697cdeaef9\u241f4452935965886173182:Search query for Timeseries widget"])))],[3,"value","textChange"]]},template:function(e,t){1&e&&(E.TgZ(0,"button",0),E.NdJ("click",function(){return t.onCloneWidget()}),E.SDv(1,1),E.qZA(),E.TgZ(2,"button",0),E.NdJ("click",function(){return t.onEditWithCloner()}),E.SDv(3,2),E.qZA(),E.TgZ(4,"div",3),E.TgZ(5,"nui-dashboard",4),E.NdJ("dashboardChange",function(e){return t.dashboard=e})("gridsterConfigChange",function(e){return t.gridsterConfig=e}),E.qZA(),E.qZA(),E.TgZ(6,"div",5),E.TgZ(7,"nui-switch",6),E.NdJ("valueChange",function(e){return t.editMode=e}),E.SDv(8,7),E.qZA(),E.TgZ(9,"nui-switch",6),E.NdJ("valueChange",function(e){return t.submitHandler.allowSubmit=e}),E.SDv(10,8),E.qZA(),E.TgZ(11,"nui-switch",6),E.NdJ("valueChange",function(e){return t.submitHandler.allowRemoval=e}),E.SDv(12,9),E.qZA(),E.TgZ(13,"nui-switch",6),E.NdJ("valueChange",function(e){return t.onShowButtonSwitch(e,"editable")}),E.SDv(14,10),E.qZA(),E.TgZ(15,"nui-switch",6),E.NdJ("valueChange",function(e){return t.onShowButtonSwitch(e,"removable")}),E.SDv(16,11),E.qZA(),E.TgZ(17,"nui-switch",12),E.NdJ("valueChange",function(e){return t.onDsErrorSwitch(e)}),E.SDv(18,13),E.qZA(),E.qZA(),E.TgZ(19,"div",14),E.TgZ(20,"div",15),E.TgZ(21,"nui-form-field",16),E.TgZ(22,"nui-textbox-number",17),E.NdJ("valueChange",function(e){return t.systemRefreshInterval=e}),E.qZA(),E.qZA(),E.qZA(),E.TgZ(23,"button",18),E.NdJ("click",function(){return t.onSystemRefreshIntervalClick()}),E.SDv(24,19),E.qZA(),E.qZA(),E.TgZ(25,"div",20),E.TgZ(26,"nui-form-field",21),E.TgZ(27,"nui-textbox",22),E.NdJ("textChange",function(e){return t.searchQuery=e}),E.qZA(),E.qZA(),E.qZA()),2&e&&(E.xp6(5),E.Q6J("nuiWidgetEditor",t.submitHandler)("dashboard",t.dashboard)("gridsterConfig",t.gridsterConfig)("editMode",t.editMode),E.xp6(2),E.Q6J("value",t.editMode),E.xp6(2),E.Q6J("value",t.submitHandler.allowSubmit),E.xp6(2),E.Q6J("value",t.submitHandler.allowRemoval),E.xp6(2),E.Q6J("value",!0),E.xp6(2),E.Q6J("value",!0),E.xp6(7),E.Q6J("value",t.systemRefreshInterval),E.xp6(5),E.Q6J("value",t.searchQuery))},directives:[F.r0F,be.M,we.t,F.qUD,F.hgI,F.I5I,F.XHW],styles:[".nui-theme-switcher-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;padding:10px;background-color:#fff;background-color:var(--nui-color-bg-light,#fff)}"]}),e}(),data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}}],Se=function(){var e=function(){function e(t,r){g(this,e),this.widgetTypesService=t,this.componentRegistry=r,this.setupDataSourceProviders(),this.setupCustomProportionalWidgetDSConfig()}return m(e,[{key:"setupCustomProportionalWidgetDSConfig",value:function(){var e,t=this.widgetTypesService.getWidgetType("proportional",1);null===(e=t.widget.structure[_.XMI].providers)||void 0===e||delete e.refresher,this.widgetTypesService.setNode(t,"configurator",_.ACc.DataSourceConfigComponentType,M.b.lateLoadKey),this.componentRegistry.registerByLateLoadKey(M.b)}},{key:"setupDataSourceProviders",value:function(){this.setDataSourceProviders("table",[B.g.providerId,K.W.providerId,U.t.providerId,H.n.providerId,Y.a.providerId,$.providerId]);var e=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(e,"configurator",_.ACc.DataSourceConfigComponentType,_.cY_.lateLoadKey),this.setDataSourceProviders("kpi",[{providerId:P.i.providerId,label:"Acme KPI Data Source 1"},{providerId:P.L2.providerId,label:"Acme KPI Data Source 2",properties:{numberFormat:"1.1-1"}},{providerId:P.sR.providerId,label:"Acme KPI Data Source 3"}]),this.setDataSourceProviders("proportional",[z.Q.providerId,z.s.providerId]),this.setDataSourceProviders("timeseries",[G.wi.providerId,G.u2.providerId])}},{key:"setDataSourceProviders",value:function(e,t){var r=this.widgetTypesService.getWidgetType(e,1);this.widgetTypesService.setNode(r,"configurator",_.ACc.DataSourceProviders,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(E.LFG(_.xTe),E.LFG(_.hiK))},e.\u0275mod=E.oAB({type:e}),e.\u0275inj=E.cJS({providers:[_.CNH],imports:[[A.ez,Z.JF,_.Pi,F.Gsl,F.Az_,F.vvu,F.cJ5,F.Ts3,F.sF0,F.ZuS,W.Bz.forChild(ye),F.C6o,F.YMY]]}),e}()}}])}();