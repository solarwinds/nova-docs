(self.webpackChunk_nova_ui_dashboards=self.webpackChunk_nova_ui_dashboards||[]).push([[63],{69901:function(e,t,i){"use strict";i.d(t,{RU:function(){return y},KY:function(){return v},tQ:function(){return f},sm:function(){return D},IM:function(){return G},IX:function(){return K}});var o=i(33018),n=i(38583);function r(e,t){if(1&e&&o._UZ(0,"div",3),2&e){const e=t.index,i=o.oxw();o.Q6J("ngStyle",i.gridRenderer.getGridColumnStyle(e))}}function s(e,t){if(1&e&&o._UZ(0,"div",4),2&e){const e=t.index,i=o.oxw();o.Q6J("ngStyle",i.gridRenderer.getGridRowStyle(e))}}const a=["*"];function l(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",8),o.NdJ("mousedown",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)})("touchstart",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)}),o.qZA()}}function c(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",9),o.NdJ("mousedown",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)})("touchstart",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)}),o.qZA()}}function d(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",10),o.NdJ("mousedown",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)})("touchstart",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)}),o.qZA()}}function u(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",11),o.NdJ("mousedown",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)})("touchstart",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)}),o.qZA()}}function p(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",12),o.NdJ("mousedown",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)})("touchstart",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)}),o.qZA()}}function h(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",13),o.NdJ("mousedown",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)})("touchstart",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)}),o.qZA()}}function g(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",14),o.NdJ("mousedown",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)})("touchstart",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)}),o.qZA()}}function m(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",15),o.NdJ("mousedown",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)})("touchstart",function(t){return o.CHM(e),o.oxw().resize.dragStartDelay(t)}),o.qZA()}}var f=(()=>{return(e=f||(f={})).Fit="fit",e.ScrollVertical="scrollVertical",e.ScrollHorizontal="scrollHorizontal",e.Fixed="fixed",e.VerticalFixed="verticalFixed",e.HorizontalFixed="horizontalFixed",f;var e})(),v=(()=>{return(e=v||(v={})).Always="always",e.OnDragAndResize="onDrag&Resize",e.None="none",v;var e})(),y=(()=>{return(e=y||(y={})).None="none",e.CompactUp="compactUp",e.CompactLeft="compactLeft",e.CompactUpAndLeft="compactUp&Left",e.CompactLeftAndUp="compactLeft&Up",e.CompactRight="compactRight",e.CompactUpAndRight="compactUp&Right",e.CompactRightAndUp="compactRight&Up",e.CompactDown="compactDown",e.CompactDownAndLeft="compactDown&Left",e.CompactLeftAndDown="compactLeft&Down",e.CompactDownAndRight="compactDown&Right",e.CompactRightAndDown="compactRight&Down",y;var e})(),b=(()=>{return(e=b||(b={})).LTR="ltr",e.RTL="rtl",b;var e})();class C{constructor(e){this.gridster=e}destroy(){delete this.gridster}checkCompact(){this.gridster.$options.compactType!==y.None&&(this.gridster.$options.compactType===y.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===y.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===y.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===y.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===y.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===y.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===y.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===y.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===y.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===y.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===y.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===y.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(e){this.gridster.$options.compactType!==y.None&&(this.gridster.$options.compactType===y.CompactUp?this.moveTillCollision(e,"y",-1):this.gridster.$options.compactType===y.CompactLeft?this.moveTillCollision(e,"x",-1):this.gridster.$options.compactType===y.CompactUpAndLeft?(this.moveTillCollision(e,"y",-1),this.moveTillCollision(e,"x",-1)):this.gridster.$options.compactType===y.CompactLeftAndUp?(this.moveTillCollision(e,"x",-1),this.moveTillCollision(e,"y",-1)):this.gridster.$options.compactType===y.CompactUpAndRight?(this.moveTillCollision(e,"y",-1),this.moveTillCollision(e,"x",1)):this.gridster.$options.compactType===y.CompactDown?this.moveTillCollision(e,"y",1):this.gridster.$options.compactType===y.CompactDownAndLeft?(this.moveTillCollision(e,"y",1),this.moveTillCollision(e,"x",-1)):this.gridster.$options.compactType===y.CompactLeftAndDown?(this.moveTillCollision(e,"x",-1),this.moveTillCollision(e,"y",1)):this.gridster.$options.compactType===y.CompactDownAndRight?(this.moveTillCollision(e,"y",1),this.moveTillCollision(e,"x",1)):this.gridster.$options.compactType===y.CompactRightAndDown&&(this.moveTillCollision(e,"x",1),this.moveTillCollision(e,"y",1)))}checkCompactMovement(e,t){let i=!1;this.gridster.grid.forEach(o=>{!1!==o.$item.compactEnabled&&this.moveTillCollision(o.$item,e,t)&&(i=!0,o.item[e]=o.$item[e],o.itemChanged())}),i&&this.checkCompact()}moveTillCollision(e,t,i){return e[t]+=i,this.gridster.checkCollision(e)?(e[t]-=i,!1):(this.moveTillCollision(e,t,i),!0)}}const x={gridType:f.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:y.None,mobileBreakpoint:640,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:v.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,disableAutoPositionOnConflict:!1,dirType:b.LTR};class w{static merge(e,t,i){for(const o in t)void 0!==t[o]&&i.hasOwnProperty(o)&&(e[o]="object"==typeof t[o]?w.merge(e[o],t[o],i[o]):t[o]);return e}static debounce(e,t){let i;return function(){const o=this,n=arguments,r=()=>{i=void 0,e.apply(o,n)};clearTimeout(i),i=setTimeout(r,t)}}static checkTouchEvent(e){void 0===e.clientX&&e.touches&&(e.touches&&e.touches.length?(e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY):e.changedTouches&&e.changedTouches.length&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY))}static checkContentClassForEvent(e,t){if(e.$options.draggable.ignoreContent){if(!w.checkDragHandleClass(t.target,t.currentTarget,e.$options.draggable.dragHandleClass,e.$options.draggable.ignoreContentClass))return!0}else if(w.checkContentClass(t.target,t.currentTarget,e.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(e,t){return w.checkContentClass(t.target,t.currentTarget,e.$options.draggable.ignoreContentClass)||w.checkContentClass(t.target,t.currentTarget,e.$options.draggable.dragHandleClass)}static checkDragHandleClass(e,t,i,o){if(!e||e===t)return!1;if(e.hasAttribute("class")){const t=e.getAttribute("class").split(" ");if(t.indexOf(i)>-1)return!0;if(t.indexOf(o)>-1)return!1}return w.checkDragHandleClass(e.parentNode,t,i,o)}static checkContentClass(e,t,i){return!(!e||e===t)&&(!!(e.hasAttribute("class")&&e.getAttribute("class").split(" ").indexOf(i)>-1)||w.checkContentClass(e.parentNode,t,i))}static compareItems(e,t){return e.y>t.y?-1:e.y<t.y?1:e.x>t.x?-1:1}}class T{constructor(e){this.gridster=e}destroy(){delete this.initialItem,delete this.gridster.movingItem,this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridster,this.emptyCellExit&&(this.emptyCellExit(),this.emptyCellExit=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.emptyCellClick&&this.gridster.options.emptyCellClickCallback?(this.emptyCellClick=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb.bind(this)),this.emptyCellClickTouch=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb.bind(this))):!this.gridster.$options.enableEmptyCellClick&&this.emptyCellClick&&this.emptyCellClickTouch&&(this.emptyCellClick(),this.emptyCellClickTouch(),this.emptyCellClick=null,this.emptyCellClickTouch=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.emptyCellContextMenu&&this.gridster.options.emptyCellContextMenuCallback?this.emptyCellContextMenu=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb.bind(this)):!this.gridster.$options.enableEmptyCellContextMenu&&this.emptyCellContextMenu&&(this.emptyCellContextMenu(),this.emptyCellContextMenu=null),this.gridster.$options.enableEmptyCellDrop&&!this.emptyCellDrop&&this.gridster.options.emptyCellDropCallback?(this.emptyCellDrop=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop.bind(this)),this.gridster.zone.runOutsideAngular(()=>{this.emptyCellMove=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver.bind(this))}),this.emptyCellExit=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.emptyCellDrop&&this.emptyCellMove&&this.emptyCellExit&&(this.emptyCellDrop(),this.emptyCellMove(),this.emptyCellExit(),this.emptyCellMove=null,this.emptyCellDrop=null,this.emptyCellExit=null),this.gridster.$options.enableEmptyCellDrag&&!this.emptyCellDrag&&this.gridster.options.emptyCellDragCallback?(this.emptyCellDrag=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown.bind(this)),this.emptyCellDragTouch=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown.bind(this))):!this.gridster.$options.enableEmptyCellDrag&&this.emptyCellDrag&&this.emptyCellDragTouch&&(this.emptyCellDrag(),this.emptyCellDragTouch(),this.emptyCellDrag=null,this.emptyCellDragTouch=null)}emptyCellClickCb(e){if(!this.gridster||this.gridster.movingItem||w.checkContentClassForEmptyCellClickEvent(this.gridster,e))return;const t=this.getValidItemFromEvent(e);!t||(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(e,t),this.gridster.cdRef.markForCheck())}emptyCellContextMenuCb(e){if(this.gridster.movingItem||w.checkContentClassForEmptyCellClickEvent(this.gridster,e))return;e.preventDefault(),e.stopPropagation();const t=this.getValidItemFromEvent(e);!t||(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(e,t),this.gridster.cdRef.markForCheck())}emptyCellDragDrop(e){const t=this.getValidItemFromEvent(e);!t||(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(e,t),this.gridster.cdRef.markForCheck())}emptyCellDragOver(e){e.preventDefault(),e.stopPropagation();const t=this.getValidItemFromEvent(e);t?(e.dataTransfer&&(e.dataTransfer.dropEffect="move"),this.gridster.movingItem=t):(e.dataTransfer&&(e.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()}emptyCellMouseDown(e){if(w.checkContentClassForEmptyCellClickEvent(this.gridster,e))return;e.preventDefault(),e.stopPropagation();const t=this.getValidItemFromEvent(e);!t||1!==e.buttons||(this.initialItem=t,this.gridster.movingItem=t,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.emptyCellMMove=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove.bind(this)),this.emptyCellMMoveTouch=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove.bind(this))}),this.emptyCellUp=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp.bind(this)),this.emptyCellUpTouch=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp.bind(this)))}emptyCellMouseMove(e){e.preventDefault(),e.stopPropagation();const t=this.getValidItemFromEvent(e,this.initialItem);!t||(this.gridster.movingItem=t,this.gridster.previewStyle())}emptyCellMouseUp(e){this.emptyCellMMove(),this.emptyCellMMoveTouch(),this.emptyCellUp(),this.emptyCellUpTouch();const t=this.getValidItemFromEvent(e,this.initialItem);t&&(this.gridster.movingItem=t),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(e,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()}getPixelsX(e,t){const i=this.gridster.options.scale;return i?(e.clientX-t.left)/i+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():e.clientX+this.gridster.el.scrollLeft-t.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(e,t){const i=this.gridster.options.scale;return i?(e.clientY-t.top)/i+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():e.clientY+this.gridster.el.scrollTop-t.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(e,t){e.preventDefault(),e.stopPropagation(),w.checkTouchEvent(e);const i=this.gridster.el.getBoundingClientRect(),o=this.getPixelsX(e,i),n=this.getPixelsY(e,i),r={x:this.gridster.pixelsToPositionX(o,Math.floor,!0),y:this.gridster.pixelsToPositionY(n,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(t&&(r.cols=Math.min(Math.abs(t.x-r.x)+1,this.gridster.$options.emptyCellDragMaxCols),r.rows=Math.min(Math.abs(t.y-r.y)+1,this.gridster.$options.emptyCellDragMaxRows),t.x<r.x?r.x=t.x:t.x-r.x>this.gridster.$options.emptyCellDragMaxCols-1&&(r.x=this.gridster.movingItem?this.gridster.movingItem.x:0),t.y<r.y?r.y=t.y:t.y-r.y>this.gridster.$options.emptyCellDragMaxRows-1&&(r.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(r))return r}}class S{constructor(e){this.gridster=e}destroy(){delete this.gridster}updateItem(e,t,i){if(this.gridster.mobile)this.clearCellPosition(i,e),i.setStyle(e,"height",this.gridster.$options.keepFixedHeightInMobile?(t.rows-1)*this.gridster.$options.margin+t.rows*this.gridster.$options.fixedRowHeight+"px":t.rows*this.gridster.curWidth/t.cols+"px"),i.setStyle(e,"width",this.gridster.$options.keepFixedWidthInMobile?this.gridster.$options.fixedColWidth+"px":""),i.setStyle(e,"margin-bottom",this.gridster.$options.margin+"px"),i.setStyle(e,b.LTR?"margin-right":"margin-left","");else{const o=Math.round(this.gridster.curColWidth*t.x),n=Math.round(this.gridster.curRowHeight*t.y),r=this.gridster.curColWidth*t.cols-this.gridster.$options.margin,s=this.gridster.curRowHeight*t.rows-this.gridster.$options.margin;this.setCellPosition(i,e,o,n),i.setStyle(e,"width",r+"px"),i.setStyle(e,"height",s+"px");let a=null,l=null;this.gridster.$options.outerMargin&&(this.gridster.rows===t.rows+t.y&&(a=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===t.cols+t.x&&(l=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),i.setStyle(e,"margin-bottom",a),i.setStyle(e,b.LTR?"margin-right":"margin-left",l)}}updateGridster(){let e="",t="",i="",o="";if(this.gridster.$options.gridType===f.Fit)e=f.Fit,t=f.ScrollVertical,i=f.ScrollHorizontal,o=f.Fixed;else if(this.gridster.$options.gridType===f.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,e=f.ScrollVertical,t=f.Fit,i=f.ScrollHorizontal,o=f.Fixed;else if(this.gridster.$options.gridType===f.ScrollHorizontal){const n=this.gridster.$options.rowHeightRatio;this.gridster.curColWidth=this.gridster.curRowHeight*(n>=1?n:n+1),e=f.ScrollHorizontal,t=f.Fit,i=f.ScrollVertical,o=f.Fixed}else this.gridster.$options.gridType===f.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),e=f.Fixed,t=f.Fit,i=f.ScrollVertical,o=f.ScrollHorizontal):this.gridster.$options.gridType===f.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),e=f.ScrollVertical,t=f.Fit,i=f.ScrollHorizontal,o=f.Fixed):this.gridster.$options.gridType===f.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),e=f.ScrollHorizontal,t=f.Fit,i=f.ScrollVertical,o=f.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==f.Fit?this.gridster.renderer.removeClass(this.gridster.el,e):this.gridster.renderer.addClass(this.gridster.el,e),this.gridster.renderer.removeClass(this.gridster.el,t),this.gridster.renderer.removeClass(this.gridster.el,i),this.gridster.renderer.removeClass(this.gridster.el,o)}getGridColumnStyle(e){return Object.assign(Object.assign({},this.getLeftPosition(this.gridster.curColWidth*e)),{width:this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}getGridRowStyle(e){return Object.assign(Object.assign({},this.getTopPosition(this.gridster.curRowHeight*e)),{width:this.gridster.gridColumns.length*this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}getLeftPosition(e){const t=this.gridster.$options.dirType===b.RTL?-e:e;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+t+"px)"}:{left:this.getLeftMargin()+t+"px"}}getTopPosition(e){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+e+"px)"}:{top:this.getTopMargin()+e+"px"}}clearCellPosition(e,t){this.gridster.$options.useTransformPositioning?e.setStyle(t,"transform",""):(e.setStyle(t,"top",""),e.setStyle(t,"left",""))}setCellPosition(e,t,i,o){const n=this.gridster.$options.dirType===b.RTL?-i:i;this.gridster.$options.useTransformPositioning?e.setStyle(t,"transform","translate3d("+n+"px, "+o+"px, 0)"):(e.setStyle(t,"left",this.getLeftMargin()+n+"px"),e.setStyle(t,"top",this.getTopMargin()+o+"px"))}getLeftMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}let I,_,A,z,k,Z,O,P,$,F=(()=>{class e{constructor(e,t){this.renderer=t,this.el=e.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(e=>this.previewStyle(e))}ngOnDestroy(){this.sub.unsubscribe(),delete this.el}previewStyle(e){e?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,e,this.renderer)):this.renderer.setStyle(this.el,"display","")}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(o.Qsj))},e.\u0275cmp=o.Xpm({type:e,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},decls:0,vars:0,template:function(e,t){},styles:["gridster-preview{position:absolute;display:none;background:rgba(0,0,0,.15)}\n"],encapsulation:2}),e})(),D=(()=>{class e{constructor(e,t,i,n){this.renderer=t,this.cdRef=i,this.zone=n,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.previewStyle$=new o.vpe,this.el=e.nativeElement,this.$options=JSON.parse(JSON.stringify(x)),this.calculateLayoutDebounce=w.debounce(this.calculateLayout.bind(this),0),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new T(this),this.compact=new C(this),this.gridRenderer=new S(this)}static checkCollisionTwoItemsForSwaping(e,t){return e.x+(1===e.cols?0:1)<t.x+t.cols&&e.x+e.cols>t.x+(1===t.cols?0:1)&&e.y+(1===e.rows?0:1)<t.y+t.rows&&e.y+e.rows>t.y+(1===t.rows?0:1)}checkCollisionTwoItems(e,t){if(!(e.x<t.x+t.cols&&e.x+e.cols>t.x&&e.y<t.y+t.rows&&e.y+e.rows>t.y))return!1;if(!this.$options.allowMultiLayer)return!0;const i=this.$options.defaultLayerIndex;return(void 0===e.layerIndex?i:e.layerIndex)===(void 0===t.layerIndex?i:t.layerIndex)}ngOnInit(){this.options.initCallback&&this.options.initCallback(this)}ngOnChanges(e){e.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged.bind(this),resize:this.onResize.bind(this),getNextPossiblePosition:this.getNextPossiblePosition.bind(this),getFirstPossiblePosition:this.getFirstPossiblePosition.bind(this),getLastPossiblePosition:this.getLastPossiblePosition.bind(this),getItemComponent:e=>this.getItemComponent(e)},this.columns=this.$options.minCols,this.rows=this.$options.minRows,this.setGridSize(),this.calculateLayout())}resize(){let e,t;"fit"!==this.$options.gridType||this.mobile?(t=this.el.clientWidth,e=this.el.clientHeight):(t=this.el.offsetWidth,e=this.el.offsetHeight),(t!==this.curWidth||e!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=w.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize.bind(this)),this.emptyCell.updateOptions()}optionsChanged(){this.setOptions();let e,t=this.grid.length-1;for(;t>=0;t--)e=this.grid[t],e.updateOptions();this.calculateLayout()}ngOnDestroy(){this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),delete this.emptyCell,this.compact.destroy(),delete this.compact}onResize(){this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())}checkIfToResize(){const e=this.el.clientWidth,t=this.el.offsetWidth,i=this.el.scrollWidth,o=this.el.clientHeight,n=this.el.offsetHeight,r=this.el.scrollHeight;return!(e<t&&r>n&&r-n<t-e||o<n&&i>t&&i-t<n-o)}setGridSize(){const e=this.el;let t,i;this.$options.setGridSize||this.$options.gridType===f.Fit&&!this.mobile?(t=e.offsetWidth,i=e.offsetHeight):(t=e.clientWidth,i=e.clientHeight),this.curWidth=t,this.curHeight=i}setGridDimensions(){this.setGridSize(),!this.mobile&&this.$options.mobileBreakpoint>this.curWidth?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&this.$options.mobileBreakpoint<this.curWidth&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let e,t=this.$options.minRows,i=this.$options.minCols,o=this.grid.length-1;for(;o>=0;o--)e=this.grid[o],e.notPlaced||(t=Math.max(t,e.$item.y+e.$item.rows),i=Math.max(i,e.$item.x+e.$item.cols));(this.columns!==i||this.rows!==t)&&(this.columns=i,this.rows=t,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let e=-this.$options.margin;null!==this.$options.outerMarginLeft?(e+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(e+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(e+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(e+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-e)/this.columns;let t=-this.$options.margin;null!==this.$options.outerMarginTop?(t+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(t+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?(t+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(t+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-t)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let e,t=this.grid.length-1;for(;t>=0;t--)e=this.grid[t],e.setSize(),e.drag.toggle(),e.resize.toggle();setTimeout(this.resize.bind(this),100)}updateGrid(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):("none"===this.$options.displayGrid||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=e.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=e.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(e){void 0===e.$item.cols&&(e.$item.cols=this.$options.defaultItemCols,e.item.cols=e.$item.cols,e.itemChanged()),void 0===e.$item.rows&&(e.$item.rows=this.$options.defaultItemRows,e.item.rows=e.$item.rows,e.itemChanged()),-1===e.$item.x||-1===e.$item.y?this.autoPositionItem(e):this.checkCollision(e.$item)&&(this.$options.disableWarnings||(e.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(e.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?e.notPlaced=!0:this.autoPositionItem(e)),this.grid.push(e),this.calculateLayoutDebounce()}removeItem(e){this.grid.splice(this.grid.indexOf(e),1),this.calculateLayoutDebounce(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(e.item,e)}checkCollision(e){let t=!1;if(this.options.itemValidateCallback&&(t=!this.options.itemValidateCallback(e)),!t&&this.checkGridCollision(e)&&(t=!0),!t){const i=this.findItemWithItem(e);i&&(t=i)}return t}checkGridCollision(e){const t=e.cols*e.rows;return!(e.y>-1&&e.x>-1&&e.cols+e.x<=this.$options.maxCols&&e.rows+e.y<=this.$options.maxRows&&e.cols<=(void 0===e.maxItemCols?this.$options.maxItemCols:e.maxItemCols)&&e.cols>=(void 0===e.minItemCols?this.$options.minItemCols:e.minItemCols)&&e.rows<=(void 0===e.maxItemRows?this.$options.maxItemRows:e.maxItemRows)&&e.rows>=(void 0===e.minItemRows?this.$options.minItemRows:e.minItemRows)&&(void 0===e.minItemArea?this.$options.minItemArea:e.minItemArea)<=t&&(void 0===e.maxItemArea?this.$options.maxItemArea:e.maxItemArea)>=t)}findItemWithItem(e){let t,i=0;for(;i<this.grid.length;i++)if(t=this.grid[i],t.$item!==e&&this.checkCollisionTwoItems(t.$item,e))return t;return!1}findItemsWithItem(e){const t=[];let i,o=0;for(;o<this.grid.length;o++)i=this.grid[o],i.$item!==e&&this.checkCollisionTwoItems(i.$item,e)&&t.push(i);return t}autoPositionItem(e){this.getNextPossiblePosition(e.$item)?(e.notPlaced=!1,e.item.x=e.$item.x,e.item.y=e.$item.y,e.itemChanged()):(e.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(e.item,["cols","rows","x","y"])))}getNextPossiblePosition(e,t={}){-1===e.cols&&(e.cols=this.$options.defaultItemCols),-1===e.rows&&(e.rows=this.$options.defaultItemRows),this.setGridDimensions();let i,o=t.y||0;for(;o<this.rows;o++)for(e.y=o,i=t.x||0;i<this.columns;i++)if(e.x=i,!this.checkCollision(e))return!0;const n=this.$options.maxRows>=this.rows+e.rows;return this.rows<=this.columns&&n||!(this.$options.maxCols>=this.columns+e.cols)?!!n&&(e.y=this.rows,e.x=0,!0):(e.x=this.columns,e.y=0,!0)}getFirstPossiblePosition(e){const t=Object.assign({},e);return this.getNextPossiblePosition(t),t}getLastPossiblePosition(e){let t={y:0,x:0};t=this.grid.reduce((e,t)=>{const i={y:t.$item.y+t.$item.rows-1,x:t.$item.x+t.$item.cols-1};return 1===w.compareItems(e,i)?i:e},t);const i=Object.assign({},e);return this.getNextPossiblePosition(i,t),i}pixelsToPositionX(e,t,i){const o=t(e/this.curColWidth);return i?o:Math.max(o,0)}pixelsToPositionY(e,t,i){const o=t(e/this.curRowHeight);return i?o:Math.max(o,0)}positionXToPixels(e){return e*this.curColWidth}positionYToPixels(e){return e*this.curRowHeight}getItemComponent(e){return this.grid.find(t=>t.item===e)}checkCollisionForSwaping(e){let t=!1;if(this.options.itemValidateCallback&&(t=!this.options.itemValidateCallback(e)),!t&&this.checkGridCollision(e)&&(t=!0),!t){const i=this.findItemWithItemForSwapping(e);i&&(t=i)}return t}findItemWithItemForSwapping(t){let i,o=this.grid.length-1;for(;o>-1;o--)if(i=this.grid[o],i.$item!==t&&e.checkCollisionTwoItemsForSwaping(i.$item,t))return i;return!1}previewStyle(e=!1){this.movingItem?(this.compact&&e&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next()}static getNewArrayLength(e,t,i){const o=Math.max(e,Math.floor(t/i));return o<0?0:Number.isFinite(o)?Math.floor(o):0}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["gridster"]],inputs:{options:"options"},features:[o.TTD],ngContentSelectors:a,decls:4,vars:4,consts:[["class","gridster-column",3,"ngStyle",4,"ngFor","ngForOf"],["class","gridster-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"],[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"]],template:function(e,t){1&e&&(o.F$t(),o.YNc(0,r,1,1,"div",0),o.YNc(1,s,1,1,"div",1),o.Hsn(2),o._UZ(3,"gridster-preview",2)),2&e&&(o.Q6J("ngForOf",t.gridColumns),o.xp6(1),o.Q6J("ngForOf",t.gridRows),o.xp6(2),o.Q6J("gridRenderer",t.gridRenderer)("previewStyle$",t.previewStyle$))},directives:[n.sg,F,n.PC],styles:["gridster{position:relative;box-sizing:border-box;background:grey;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}\n"],encapsulation:2}),e})();class M{constructor(e){this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=e,this.gridster=e.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){delete this.gridster,delete this.gridsterItem}pushItems(e,t){if(this.gridster.$options.pushItems&&!t){this.pushedItemsOrder=[],this.iteration=0;const t=this.push(this.gridsterItem,e);return t||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],t}return!1}restoreTempItems(){let e=this.pushedItemsTemp.length-1;for(;e>-1;e--)this.removeFromTempPushed(this.pushedItemsTemp[e])}restoreItems(){let e=0;const t=this.pushedItems.length;let i;for(;e<t;e++)i=this.pushedItems[e],i.$item.x=i.item.x||0,i.$item.y=i.item.y||0,i.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let e=0;const t=this.pushedItems.length;let i;for(;e<t;e++)i=this.pushedItems[e],i.checkItemChanges(i.$item,i.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let e=this.pushedItems.length-1,t=!1;for(;e>-1;e--)this.checkPushedItem(this.pushedItems[e],e)&&(t=!0);t&&this.checkPushBack()}push(e,t){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(e.$item)||""===t)return!1;const i=this.gridster.findItemsWithItem(e.$item),o=t===this.fromNorth||t===this.fromWest;i.sort((e,t)=>o?t.$item.y-e.$item.y||t.$item.x-e.$item.x:e.$item.y-t.$item.y||e.$item.x-t.$item.x);let n,r=0,s=!0;const a=[];for(;r<i.length;r++){if(n=i[r],n===this.gridsterItem)continue;if(!n.canBeDragged()){s=!1;break}const o=this.pushedItemsTemp.indexOf(n);if(o>-1&&this.pushedItemsTempPath[o].length>10){s=!1;break}if(this.tryPattern[t][0].call(this,n,e))this.pushedItemsOrder.push(n),a.push(n);else if(this.tryPattern[t][1].call(this,n,e))this.pushedItemsOrder.push(n),a.push(n);else if(this.tryPattern[t][2].call(this,n,e))this.pushedItemsOrder.push(n),a.push(n);else{if(!this.tryPattern[t][3].call(this,n,e)){s=!1;break}this.pushedItemsOrder.push(n),a.push(n)}}if(!s&&(r=this.pushedItemsOrder.lastIndexOf(a[0]),r>-1)){let e=this.pushedItemsOrder.length-1;for(;e>=r;e--)n=this.pushedItemsOrder[e],this.pushedItemsOrder.pop(),this.removeFromTempPushed(n),this.removeFromPushedItem(n)}return this.iteration++,s}trySouth(e,t){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(e),e.$item.y=t.$item.y+t.$item.rows,this.push(e,this.fromNorth)?(e.setSize(),this.addToPushed(e),!0):(this.removeFromTempPushed(e),!1))}tryNorth(e,t){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(e),e.$item.y=t.$item.y-e.$item.rows,this.push(e,this.fromSouth)?(e.setSize(),this.addToPushed(e),!0):(this.removeFromTempPushed(e),!1))}tryEast(e,t){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(e),e.$item.x=t.$item.x+t.$item.cols,this.push(e,this.fromWest)?(e.setSize(),this.addToPushed(e),!0):(this.removeFromTempPushed(e),!1))}tryWest(e,t){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(e),e.$item.x=t.$item.x-e.$item.cols,this.push(e,this.fromEast)?(e.setSize(),this.addToPushed(e),!0):(this.removeFromTempPushed(e),!1))}addToTempPushed(e){let t=this.pushedItemsTemp.indexOf(e);-1===t&&(t=this.pushedItemsTemp.push(e)-1,this.pushedItemsTempPath[t]=[]),this.pushedItemsTempPath[t].push({x:e.$item.x,y:e.$item.y})}removeFromTempPushed(e){const t=this.pushedItemsTemp.indexOf(e),i=this.pushedItemsTempPath[t].pop();!i||(e.$item.x=i.x,e.$item.y=i.y,e.setSize(),this.pushedItemsTempPath[t].length||(this.pushedItemsTemp.splice(t,1),this.pushedItemsTempPath.splice(t,1)))}addToPushed(e){if(this.pushedItems.indexOf(e)<0)this.pushedItems.push(e),this.pushedItemsPath.push([{x:e.item.x||0,y:e.item.y||0},{x:e.$item.x,y:e.$item.y}]);else{const t=this.pushedItems.indexOf(e);this.pushedItemsPath[t].push({x:e.$item.x,y:e.$item.y})}}removeFromPushed(e){e>-1&&(this.pushedItems.splice(e,1),this.pushedItemsPath.splice(e,1))}removeFromPushedItem(e){const t=this.pushedItems.indexOf(e);t>-1&&(this.pushedItemsPath[t].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1)))}checkPushedItem(e,t){const i=this.pushedItemsPath[t];let o,n,r,s=i.length-2,a=!1;for(;s>-1;s--)o=i[s],n=e.$item.x,r=e.$item.y,e.$item.x=o.x,e.$item.y=o.y,this.gridster.findItemWithItem(e.$item)?(e.$item.x=n,e.$item.y=r):(e.setSize(),i.splice(s+1,i.length-s-1),a=!0);return i.length<2&&this.removeFromPushed(t),a}}function R(e,t,i,o,n,r,s,a,l,c){I=e.$options.scrollSensitivity,_=e.$options.scrollSpeed,A=e.el,z=l,k=c;const d=A.offsetWidth,u=A.scrollLeft,p=A.scrollTop,h=i-p;if(!e.$options.disableScrollVertical)if(s.clientY<r.clientY&&A.offsetHeight+p-i-n<I){if(V(),z&&k&&!k.s||$)return;$=J(1,a,s)}else if(s.clientY>r.clientY&&p>0&&h<I){if(Y(),z&&k&&!k.n||P)return;P=J(-1,a,s)}else s.clientY!==r.clientY&&B();const g=t-u;if(!e.$options.disableScrollHorizontal)if(s.clientX<r.clientX&&u+d-t-o<=I){if(Q(),z&&k&&!k.e||Z)return;Z=L(1,a,s)}else if(s.clientX>r.clientX&&u>0&&g<I){if(N(),z&&k&&!k.w||O)return;O=L(-1,a,s)}else s.clientX!==r.clientX&&q()}function J(e,t,i){let o=i.clientY;return setInterval(()=>{(!A||-1===e&&A.scrollTop-_<0)&&B(),A.scrollTop+=e*_,o+=e*_,t({clientX:i.clientX,clientY:o})},50)}function L(e,t,i){let o=i.clientX;return setInterval(()=>{(!A||-1===e&&A.scrollLeft-_<0)&&q(),A.scrollLeft+=e*_,o+=e*_,t({clientX:o,clientY:i.clientY})},50)}function E(){q(),B(),A=null}function q(){N(),Q()}function B(){V(),Y()}function N(){Z&&(clearInterval(Z),Z=0)}function Q(){O&&(clearInterval(O),O=0)}function Y(){$&&(clearInterval($),$=0)}function V(){P&&(clearInterval(P),P=0)}class W{constructor(e){this.gridsterItem=e,this.gridster=e.gridster}destroy(){delete this.gridster,delete this.gridsterItem,delete this.swapedItem}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){const e=this.swapedItem.$item.x,t=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=e,this.swapedItem.$item.y=t):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(e){let t;if(t=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(e.$item):this.gridster.checkCollision(e.$item),t&&!0!==t&&t.canBeDragged()){const i=t,o=i.$item.x,n=i.$item.y,r=e.$item.x,s=e.$item.y,a=r-o,l=s-n;i.$item.x=e.item.x-a,i.$item.y=e.item.y-l,e.$item.x=i.item.x+a,e.$item.y=i.item.y+l,this.gridster.checkCollision(i.$item)||this.gridster.checkCollision(e.$item)?(e.$item.x=r,e.$item.y=s,i.$item.x=o,i.$item.y=n):(i.setSize(),this.swapedItem=i,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}class j{constructor(e,t,i){this.zone=i,this.collision=!1,this.gridsterItem=e,this.gridster=t,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),delete this.gridsterItem,delete this.gridster,delete this.collision,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(e){e.which&&1!==e.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,e),e.stopPropagation(),e.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragFunction),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragFunction)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=e.clientX,this.originalClientY=e.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.diffLeft=this.gridster.$options.dirType===b.RTL?e.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:e.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=e.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new M(this.gridsterItem),this.swap=new W(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}dragMove(e){e.stopPropagation(),e.preventDefault(),w.checkTouchEvent(e),this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,R(this.gridster,this.left,this.top,this.width,this.height,e,this.lastMouse,this.calculateItemPositionFromMousePosition.bind(this)),this.calculateItemPositionFromMousePosition(e)}calculateItemPositionFromMousePosition(e){this.gridster.options.scale?this.calculateItemPositionWithScale(e,this.gridster.options.scale):this.calculateItemPositionWithoutScale(e),this.calculateItemPosition(),this.lastMouse.clientX=e.clientX,this.lastMouse.clientY=e.clientY,this.zone.run(()=>{this.gridster.updateGrid()})}calculateItemPositionWithScale(e,t){this.left=this.gridster.$options.dirType===b.RTL?this.gridster.el.scrollWidth-this.originalClientX+(e.clientX-this.originalClientX)/t+this.diffLeft:this.originalClientX+(e.clientX-this.originalClientX)/t+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(e.clientY-this.originalClientY)/t+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(e){this.left=this.gridster.$options.dirType===b.RTL?this.gridster.el.scrollWidth-e.clientX+this.diffLeft:e.clientX+this.offsetLeft-this.diffLeft,this.top=e.clientY+this.offsetTop-this.diffTop}dragStop(e){e.stopPropagation(),e.preventDefault(),E(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,e)).then(this.makeDrag.bind(this),this.cancelDrag.bind(this)):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})}cancelDrag(){this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}makeDrag(){this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&!0!==this.collision&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){const e=this.path[this.path.length-1];let t="";e.x<this.gridsterItem.$item.x?t=this.push.fromWest:e.x>this.gridsterItem.$item.x?t=this.push.fromEast:e.y<this.gridsterItem.$item.y?t=this.push.fromNorth:e.y>this.gridsterItem.$item.y&&(t=this.push.fromSouth),this.push.pushItems(t,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}this.gridster.previewStyle(!0)}toggle(){const e=this.gridsterItem.canBeDragged();!this.enabled&&e?(this.enabled=!this.enabled,this.dragStartFunction=this.dragStartDelay.bind(this),this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartFunction),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartFunction)):this.enabled&&!e&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}dragStartDelay(e){if(e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("gridster-item-resizable-handler")>-1||w.checkContentClassForEvent(this.gridster,e))return;if(w.checkTouchEvent(e),!this.gridster.$options.draggable.delayStart)return void this.dragStart(e);const t=setTimeout(()=>{this.dragStart(e),l()},this.gridster.$options.draggable.delayStart),i=this.gridsterItem.renderer.listen("document","mouseup",l),o=this.gridsterItem.renderer.listen("document","mouseleave",l),n=this.gridsterItem.renderer.listen("window","blur",l),r=this.gridsterItem.renderer.listen("document","touchmove",function(t){w.checkTouchEvent(t),(Math.abs(t.clientX-e.clientX)>9||Math.abs(t.clientY-e.clientY)>9)&&l()}),s=this.gridsterItem.renderer.listen("document","touchend",l),a=this.gridsterItem.renderer.listen("document","touchcancel",l);function l(){clearTimeout(t),n(),i(),o(),r(),s(),a()}}}class H{constructor(e){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=e,this.gridster=e.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){delete this.gridster,delete this.gridsterItem}pushItems(e){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,e)}restoreItems(){let e=0;const t=this.pushedItems.length;let i;for(;e<t;e++)i=this.pushedItems[e],i.$item.x=i.item.x||0,i.$item.y=i.item.y||0,i.$item.cols=i.item.cols||1,i.$item.row=i.item.row||1,i.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let e=0;const t=this.pushedItems.length;let i;for(;e<t;e++)i=this.pushedItems[e],i.checkItemChanges(i.$item,i.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let e=this.pushedItems.length-1,t=!1;for(;e>-1;e--)this.checkPushedItem(this.pushedItems[e],e)&&(t=!0);t&&this.checkPushBack()}push(e,t){const i=this.gridster.checkCollision(e.$item);if(i&&!0!==i&&i!==this.gridsterItem&&i.canBeResized()){if(this.tryPattern[t].call(this,i,e,t))return!0}else if(!1===i)return!0;return!1}trySouth(e,t,i){const o=e.$item.y,n=e.$item.rows;return e.$item.y=t.$item.y+t.$item.rows,e.$item.rows=n+o-e.$item.y,this.gridster.checkCollisionTwoItems(e.$item,t.$item)||this.gridster.checkGridCollision(e.$item)?(e.$item.y=o,e.$item.rows=n,!1):(e.setSize(),this.addToPushed(e),this.push(t,i),!0)}tryNorth(e,t,i){const o=e.$item.rows;return e.$item.rows=t.$item.y-e.$item.y,this.gridster.checkCollisionTwoItems(e.$item,t.$item)||this.gridster.checkGridCollision(e.$item)?(e.$item.rows=o,!1):(e.setSize(),this.addToPushed(e),this.push(t,i),!0)}tryEast(e,t,i){const o=e.$item.x,n=e.$item.cols;return e.$item.x=t.$item.x+t.$item.cols,e.$item.cols=n+o-e.$item.x,this.gridster.checkCollisionTwoItems(e.$item,t.$item)||this.gridster.checkGridCollision(e.$item)?(e.$item.x=o,e.$item.cols=n,!1):(e.setSize(),this.addToPushed(e),this.push(t,i),!0)}tryWest(e,t,i){const o=e.$item.cols;return e.$item.cols=t.$item.x-e.$item.x,this.gridster.checkCollisionTwoItems(e.$item,t.$item)||this.gridster.checkGridCollision(e.$item)?(e.$item.cols=o,!1):(e.setSize(),this.addToPushed(e),this.push(t,i),!0)}addToPushed(e){if(this.pushedItems.indexOf(e)<0)this.pushedItems.push(e),this.pushedItemsPath.push([{x:e.item.x||0,y:e.item.y||0,cols:e.item.cols||0,rows:e.item.rows||0},{x:e.$item.x,y:e.$item.y,cols:e.$item.cols,rows:e.$item.rows}]);else{const t=this.pushedItems.indexOf(e);this.pushedItemsPath[t].push({x:e.$item.x,y:e.$item.y,cols:e.$item.cols,rows:e.$item.rows})}}removeFromPushed(e){e>-1&&(this.pushedItems.splice(e,1),this.pushedItemsPath.splice(e,1))}checkPushedItem(e,t){const i=this.pushedItemsPath[t];let o,n,r,s,a,l=i.length-2;for(;l>-1;l--)o=i[l],n=e.$item.x,r=e.$item.y,s=e.$item.cols,a=e.$item.rows,e.$item.x=o.x,e.$item.y=o.y,e.$item.cols=o.cols,e.$item.rows=o.rows,this.gridster.findItemWithItem(e.$item)?(e.$item.x=n,e.$item.y=r,e.$item.cols=s,e.$item.rows=a):(e.setSize(),i.splice(l+1,i.length-1-l));return i.length<2&&(this.removeFromPushed(t),!0)}}class U{constructor(e,t,i){this.zone=i,this.gridsterItem=e,this.gridster=t,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={w:!1,e:!1,n:!1,s:!1}}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridsterItem,delete this.gridster}dragStart(e){var t,i,o;e.which&&1!==e.which||(this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,e),e.stopPropagation(),e.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragFunction),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragFunction)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=e.clientX,this.lastMouse.clientY=e.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=e.clientX,this.originalClientY=e.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=e.clientX+this.offsetLeft-this.left,this.diffRight=e.clientX+this.offsetLeft-this.right,this.diffTop=e.clientY+this.offsetTop-this.top,this.diffBottom=e.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new M(this.gridsterItem),this.pushResize=new H(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),(null===(t=e.target)||void 0===t?void 0:t.hasAttribute("class"))&&e.target.getAttribute("class").split(" ").indexOf("handle-n")>-1?(this.resizeEventScrollType.n=!0,this.directionFunction=this.handleN):(null===(i=e.target)||void 0===i?void 0:i.hasAttribute("class"))&&e.target.getAttribute("class").split(" ").indexOf("handle-w")>-1?this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):(null===(o=e.target)||void 0===o?void 0:o.hasAttribute("class"))&&e.target.getAttribute("class").split(" ").indexOf("handle-s")>-1?(this.resizeEventScrollType.s=!0,this.directionFunction=this.handleS):e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("handle-e")>-1?this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("handle-nw")>-1?this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("handle-ne")>-1?this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("handle-sw")>-1?this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("handle-se")>-1&&(this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE)))}dragMove(e){e.stopPropagation(),e.preventDefault(),w.checkTouchEvent(e),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,R(this.gridster,this.left,this.top,this.width,this.height,e,this.lastMouse,this.directionFunction.bind(this),!0,this.resizeEventScrollType);const t=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(e.clientX-this.originalClientX)/t,clientY:this.originalClientY+(e.clientY-this.originalClientY)/t}),this.lastMouse.clientX=e.clientX,this.lastMouse.clientY=e.clientY,this.zone.run(()=>{this.gridster.updateGrid()})}dragStop(e){e.stopPropagation(),e.preventDefault(),E(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,e)).then(this.makeResize.bind(this),this.cancelResize.bind(this)):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})}cancelResize(){this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}makeResize(){this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}handleN(e){if(this.top=e.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight,this.top=this.bottom-this.minHeight),this.newPosition=this.gridster.pixelsToPositionY(this.top+this.margin,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)}handleW(e){if(this.left=(this.gridster.$options.dirType===b.RTL?this.originalClientX+(this.originalClientX-e.clientX):e.clientX)+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width&&(this.width=this.minWidth,this.left=this.right-this.minWidth),this.newPosition=this.gridster.pixelsToPositionX(this.left+this.margin,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)}handleS(e){if(this.height=e.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.newPosition=this.gridster.pixelsToPositionY(this.bottom,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.rows=this.itemBackup[3],void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)}handleE(e){if(this.width=(this.gridster.$options.dirType===b.RTL?this.originalClientX+(this.originalClientX-e.clientX):e.clientX)+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.newPosition=this.gridster.pixelsToPositionX(this.right,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.cols=this.itemBackup[2],void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)}handleNW(e){this.handleN(e),this.handleW(e)}handleNE(e){this.handleN(e),this.handleE(e)}handleSW(e){this.handleS(e),this.handleW(e)}handleSE(e){this.handleS(e),this.handleE(e)}toggle(){this.resizeEnabled=this.gridsterItem.canBeResized()}dragStartDelay(e){if(w.checkTouchEvent(e),!this.gridster.$options.resizable.delayStart)return void this.dragStart(e);const t=setTimeout(()=>{this.dragStart(e),l()},this.gridster.$options.resizable.delayStart),i=this.gridsterItem.renderer.listen("document","mouseup",l),o=this.gridsterItem.renderer.listen("document","mouseleave",l),n=this.gridsterItem.renderer.listen("window","blur",l),r=this.gridsterItem.renderer.listen("document","touchmove",function(t){w.checkTouchEvent(t),(Math.abs(t.clientX-e.clientX)>9||Math.abs(t.clientY-e.clientY)>9)&&l()}),s=this.gridsterItem.renderer.listen("document","touchend",l),a=this.gridsterItem.renderer.listen("document","touchcancel",l);function l(){clearTimeout(t),n(),i(),o(),r(),s(),a()}}setItemTop(e){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,e)}setItemLeft(e){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,e,this.top)}setItemHeight(e){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",e+"px")}setItemWidth(e){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",e+"px")}}let G=(()=>{class e{constructor(e,t,i,n){this.renderer=i,this.zone=n,this.itemInit=new o.vpe,this.itemChange=new o.vpe,this.itemResize=new o.vpe,this.el=e.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=t,this.drag=new j(this,t,this.zone),this.resize=new U(this,t,this.zone)}get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(e){e.item&&(this.updateOptions(),this.init||this.gridster.calculateLayoutDebounce()),e.item&&e.item.previousValue&&this.setSize()}updateOptions(){this.$item=w.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0})}ngOnDestroy(){this.gridster.removeItem(this),delete this.gridster,this.drag.destroy(),delete this.drag,this.resize.destroy(),delete this.resize}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){const e=this.$item.x*this.gridster.curColWidth,t=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,i=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=this.$item.y*this.gridster.curRowHeight,this.left=e,!this.init&&t>0&&i>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(t!==this.width||i!==this.height)&&(this.width=t,this.height=i,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(e,t){e.rows===t.rows&&e.cols===t.cols&&e.x===t.x&&e.y===t.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=t.x||0,this.$item.y=t.y||0,this.$item.cols=t.cols||1,this.$item.rows=t.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayoutDebounce(),this.itemChanged()))}canBeDragged(){const e=this.gridster.$options.draggable.enabled;return!this.gridster.mobile&&e&&(void 0===this.$item.dragEnabled?e:this.$item.dragEnabled)}canBeResized(){const e=this.gridster.$options.resizable.enabled;return!this.gridster.mobile&&e&&(void 0===this.$item.resizeEnabled?e:this.$item.resizeEnabled)}bringToFront(e){if(e&&e<=0)return;const t=this.getLayerIndex(),i=this.gridster.$options.maxLayerIndex;if(t<i){const o=e?t+e:i;this.item.layerIndex=this.$item.layerIndex=o>i?i:o}}sendToBack(e){if(e&&e<=0)return;const t=this.getLayerIndex();if(t>0){const i=e?t-e:0;this.item.layerIndex=this.$item.layerIndex=i<0?0:i}}getLayerIndex(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(D),o.Y36(o.Qsj),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Udp("z-index",t.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},features:[o.TTD],ngContentSelectors:a,decls:9,vars:8,consts:[["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(e,t){1&e&&(o.F$t(),o.Hsn(0),o.YNc(1,l,1,0,"div",0),o.YNc(2,c,1,0,"div",1),o.YNc(3,d,1,0,"div",2),o.YNc(4,u,1,0,"div",3),o.YNc(5,p,1,0,"div",4),o.YNc(6,h,1,0,"div",5),o.YNc(7,g,1,0,"div",6),o.YNc(8,m,1,0,"div",7)),2&e&&(o.xp6(1),o.Q6J("ngIf",t.gridster.$options.resizable.handles.s&&t.resize.resizeEnabled),o.xp6(1),o.Q6J("ngIf",t.gridster.$options.resizable.handles.e&&t.resize.resizeEnabled),o.xp6(1),o.Q6J("ngIf",t.gridster.$options.resizable.handles.n&&t.resize.resizeEnabled),o.xp6(1),o.Q6J("ngIf",t.gridster.$options.resizable.handles.w&&t.resize.resizeEnabled),o.xp6(1),o.Q6J("ngIf",t.gridster.$options.resizable.handles.se&&t.resize.resizeEnabled),o.xp6(1),o.Q6J("ngIf",t.gridster.$options.resizable.handles.ne&&t.resize.resizeEnabled),o.xp6(1),o.Q6J("ngIf",t.gridster.$options.resizable.handles.sw&&t.resize.resizeEnabled),o.xp6(1),o.Q6J("ngIf",t.gridster.$options.resizable.handles.nw&&t.resize.resizeEnabled))},directives:[n.O5],styles:["gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:white;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}\n"],encapsulation:2}),e})(),K=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[n.ez]]}),e})()},98411:function(e){e.exports=function(e,t){for(var i,o=-1,n=e.length;++o<n;){var r=t(e[o]);void 0!==r&&(i=void 0===i?r:i+r)}return i}},74585:function(e,t,i){var o=i(94710),n=i(56369),r=i(83987);e.exports=function(e,t,i){var s=e.length;if(s<2)return s?r(e[0]):[];for(var a=-1,l=Array(s);++a<s;)for(var c=e[a],d=-1;++d<s;)d!=a&&(l[a]=o(l[a]||c,e[d],t,i));return r(n(l,1),t,i)}},25687:function(e){e.exports=function(e,t,i){for(var o=-1,n=e.length,r=t.length,s={};++o<n;)i(s,e[o],o<r?t[o]:void 0);return s}},89378:function(e,t,i){var o=i(71166),n=Object.prototype,r=n.hasOwnProperty;e.exports=function(e,t,i,s){return void 0===e||o(e,n[i])&&!r.call(s,i)?t:e}},37648:function(e){var t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};e.exports=function(e){return"\\"+t[e]}},8110:function(e){e.exports=/<%-([\s\S]+?)%>/g},47218:function(e){e.exports=/<%([\s\S]+?)%>/g},34311:function(e){e.exports=/<%=([\s\S]+?)%>/g},68322:function(e,t,i){var o=i(11694),n=i(30906),r=i(42970),s=n(function(e,t,i,n){o(t,r(t),e,n)});e.exports=s},72304:function(e,t,i){var o=i(81638),n=i(84441),r=i(88062),s=n(function(e,t){try{return o(e,void 0,t)}catch(i){return r(i)?i:new Error(i)}});e.exports=s},93300:function(e,t,i){var o=i(94710),n=i(56369),r=i(84441),s=i(82027),a=r(function(e,t){return s(e)?o(e,n(t,1,s,!0)):[]});e.exports=a},88062:function(e,t,i){var o=i(72802),n=i(27503),r=i(82358);e.exports=function(e){if(!n(e))return!1;var t=o(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!r(e)}},76275:function(e,t,i){var o=i(98411),n=i(80290);e.exports=function(e){return e&&e.length?o(e,n):0}},82455:function(e,t,i){var o=i(5245),n=i(98411);e.exports=function(e,t){return e&&e.length?n(e,o(t,2)):0}},62848:function(e,t,i){var o=i(68322),n=i(72304),r=i(60253),s=i(89378),a=i(37648),l=i(88062),c=i(71100),d=i(59108),u=i(34311),p=i(11171),h=i(41233),g=/\b__p \+= '';/g,m=/\b(__p \+=) '' \+/g,f=/(__e\(.*?\)|\b__t\)) \+\n'';/g,v=/[()=,{}\[\]\/\s]/,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,b=/($^)/,C=/['\n\r\u2028\u2029\\]/g,x=Object.prototype.hasOwnProperty;e.exports=function(e,t,i){var w=p.imports._.templateSettings||p;i&&c(e,t,i)&&(t=void 0),e=h(e),t=o({},t,w,s);var T,S,I=o({},t.imports,w.imports,s),_=d(I),A=r(I,_),z=0,k=t.interpolate||b,Z="__p += '",O=RegExp((t.escape||b).source+"|"+k.source+"|"+(k===u?y:b).source+"|"+(t.evaluate||b).source+"|$","g"),P=x.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(O,function(t,i,o,n,r,s){return o||(o=n),Z+=e.slice(z,s).replace(C,a),i&&(T=!0,Z+="' +\n__e("+i+") +\n'"),r&&(S=!0,Z+="';\n"+r+";\n__p += '"),o&&(Z+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),z=s+t.length,t}),Z+="';\n";var $=x.call(t,"variable")&&t.variable;if($){if(v.test($))throw new Error("Invalid `variable` option passed into `_.template`")}else Z="with (obj) {\n"+Z+"\n}\n";Z=(S?Z.replace(g,""):Z).replace(m,"$1").replace(f,"$1;"),Z="function("+($||"obj")+") {\n"+($?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(T?", __e = _.escape":"")+(S?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Z+"return __p\n}";var F=n(function(){return Function(_,P+"return "+Z).apply(void 0,A)});if(F.source=Z,l(F))throw F;return F}},11171:function(e,t,i){var o=i(56411),n=i(8110),r=i(47218),s=i(34311);e.exports={escape:n,evaluate:r,interpolate:s,variable:"",imports:{_:{escape:o}}}},9728:function(e,t,i){var o=i(56369),n=i(84441),r=i(83987),s=i(82027),a=n(function(e){return r(o(e,1,s,!0))});e.exports=a},18622:function(e,t,i){var o=i(11375),n=i(84441),r=i(74585),s=i(82027),a=n(function(e){return r(o(e,s))});e.exports=a},31507:function(e,t,i){var o=i(23898),n=i(25687);e.exports=function(e,t){return n(e||[],t||[],o)}},93576:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(15730),n=i(67104),r=i(96232),s=i(23915),a=i(68273),l=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var o=this.operator,r=n.toSubscriber(e,t,i);if(r.add(o?o.call(r,this.source):this.source||a.config.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),a.config.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),o.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var i=this;return new(t=c(t))(function(t,o){var n;n=i.subscribe(function(t){try{e(t)}catch(i){o(i),n&&n.unsubscribe()}},o,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[r.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:s.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=c(e))(function(e,i){var o;t.subscribe(function(e){return o=e},function(e){return i(e)},function(){return e(o)})})},e.create=function(t){return new e(t)},e}();function c(e){if(e||(e=a.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=l},16011:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(68273),n=i(32434);t.empty={closed:!0,next:function(e){},error:function(e){if(o.config.useDeprecatedSynchronousErrorHandling)throw e;n.hostReportError(e)},complete:function(){}}},13409:function(e,t,i){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i(93576),s=i(67241),a=i(43984),l=i(25639),c=i(45298),d=i(81476),u=function(e){function t(t){var i=e.call(this,t)||this;return i.destination=t,i}return n(t,e),t}(s.Subscriber);t.SubjectSubscriber=u;var p=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return n(t,e),t.prototype[d.rxSubscriber]=function(){return new u(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new l.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,i=t.length,o=t.slice(),n=0;n<i;n++)o[n].next(e)},t.prototype.error=function(e){if(this.closed)throw new l.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,i=t.length,o=t.slice(),n=0;n<i;n++)o[n].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new l.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,i=e.slice(),o=0;o<t;o++)i[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new l.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new l.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new c.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new r.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(r.Observable);t.Subject=p;var h=function(e){function t(t,i){var o=e.call(this)||this;return o.destination=t,o.source=i,o}return n(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):a.Subscription.EMPTY},t}(p);t.AnonymousSubject=h},45298:function(e,t,i){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,i){var o=e.call(this)||this;return o.subject=t,o.subscriber=i,o.closed=!1,o}return n(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}},t}(i(43984).Subscription);t.SubjectSubscription=r},67241:function(e,t,i){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i(67382),s=i(16011),a=i(43984),l=i(81476),c=i(68273),d=i(32434),u=function(e){function t(i,o,n){var r=e.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=s.empty;break;case 1:if(!i){r.destination=s.empty;break}if("object"==typeof i){i instanceof t?(r.syncErrorThrowable=i.syncErrorThrowable,r.destination=i,i.add(r)):(r.syncErrorThrowable=!0,r.destination=new p(r,i));break}default:r.syncErrorThrowable=!0,r.destination=new p(r,i,o,n)}return r}return n(t,e),t.prototype[l.rxSubscriber]=function(){return this},t.create=function(e,i,o){var n=new t(e,i,o);return n.syncErrorThrowable=!1,n},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(a.Subscription);t.Subscriber=u;var p=function(e){function t(t,i,o,n){var a=e.call(this)||this;a._parentSubscriber=t;var l,c=a;return r.isFunction(i)?l=i:i&&(l=i.next,o=i.error,n=i.complete,i!==s.empty&&(c=Object.create(i),r.isFunction(c.unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=l,a._error=o,a._complete=n,a}return n(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,i=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):d.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;d.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var i=function(){return e._complete.call(e._context)};c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw i;d.hostReportError(i)}},t.prototype.__tryOrSetError=function(e,t,i){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(o){return c.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=o,e.syncErrorThrown=!0,!0):(d.hostReportError(o),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u);t.SafeSubscriber=p},43984:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(40993),n=i(54720),r=i(67382),s=i(18574),a=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var i=this,a=i._parentOrParents,c=i._ctorUnsubscribe,d=i._unsubscribe,u=i._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof e)a.remove(this);else if(null!==a)for(var p=0;p<a.length;++p)a[p].remove(this);if(r.isFunction(d)){c&&(this._unsubscribe=void 0);try{d.call(this)}catch(m){t=m instanceof s.UnsubscriptionError?l(m.errors):[m]}}if(o.isArray(u)){p=-1;for(var h=u.length;++p<h;){var g=u[p];if(n.isObject(g))try{g.unsubscribe()}catch(f){t=t||[],f instanceof s.UnsubscriptionError?t=t.concat(l(f.errors)):t.push(f)}}}if(t)throw new s.UnsubscriptionError(t)}},e.prototype.add=function(t){var i=t;if(!t)return e.EMPTY;switch(typeof t){case"function":i=new e(t);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof e)){var o=i;(i=new e)._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=i._parentOrParents;if(null===n)i._parentOrParents=this;else if(n instanceof e){if(n===this)return i;i._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return i;n.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[i]:r.push(i),i},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}},e.EMPTY=((t=new e).closed=!0,t),e;var t}();function l(e){return e.reduce(function(e,t){return e.concat(t instanceof s.UnsubscriptionError?t.errors:t)},[])}t.Subscription=a},68273:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}}},96232:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},81476:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),t.$$rxSubscriber=t.rxSubscriber},25639:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}();t.ObjectUnsubscribedError=i},18574:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}();t.UnsubscriptionError=i},15730:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(67241);t.canReportError=function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof o.Subscriber?t:null}return!0}},32434:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hostReportError=function(e){setTimeout(function(){throw e},0)}},72516:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=function(e){return e}},40993:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},67382:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e}},54720:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return null!==e&&"object"==typeof e}},23915:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(72516);function n(e){return 0===e.length?o.identity:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(e)},t.pipeFromArray=n},67104:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(67241),n=i(81476),r=i(16011);t.toSubscriber=function(e,t,i){if(e){if(e instanceof o.Subscriber)return e;if(e[n.rxSubscriber])return e[n.rxSubscriber]()}return e||t||i?new o.Subscriber(e,t,i):new o.Subscriber(r.empty)}},54195:function(e,t,i){"use strict";i.d(t,{b:function(){return n}});var o=i(33018);let n=(()=>{class e{}return e.lateLoadKey="PreviewOverlayComponent",e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-preview-overlay"]],decls:2,vars:0,consts:function(){let e;return e=$localize`:36f866e0b0a8bef9afb11118ed659ea964fc92105742578784537038340:This is a non-interactive widget preview`,[[1,"nui-text-label","content"],e]},template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.SDv(1,1),o.qZA())},styles:["[_nghost-%COMP%]{opacity:0;transition-property:opacity;transition-duration:.5s;position:absolute;z-index:1060;background-color:#fff;background-color:var(--nui-color-bg-content_popover,#fff);height:100%;width:100%}[_nghost-%COMP%]:hover{opacity:.96}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:center;align-items:center;position:absolute;top:0;right:2px;bottom:2px;left:2px;cursor:not-allowed}"]}),e})()},46276:function(e,t,i){"use strict";i.d(t,{M:function(){return g}});var o=i(33018),n=i(46806),r=i(69901),s=i(83118),a=i.n(s),l=i(39973),c=i(65470);const d={displayGrid:r.KY.None,gridType:r.tQ.VerticalFixed,compactType:r.RU.CompactUp,margin:15,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,mobileBreakpoint:640,minCols:12,maxCols:12,minRows:12,fixedRowHeight:44,minItemArea:1,defaultItemCols:6,defaultItemRows:6,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,scrollSensitivity:10,scrollSpeed:20,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{enabled:!1,ignoreContent:!0,dragHandleClass:"nui-dashboard__widget--drag-handle"},resizable:{enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0}},swap:!1,pushItems:!0,pushResizeItems:!0,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1};function u(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"nui-widget",5),o.NdJ("widgetChange",function(t){return o.CHM(e),o.oxw(2).onWidgetChange(t)}),o.qZA()}if(2&e){const e=o.oxw().$implicit;o.Q6J("widget",e.value),o.uIk("widget-id",e.key)("widget-type",e.value.type)}}function p(e,t){if(1&e&&(o.TgZ(0,"gridster-item",3),o.YNc(1,u,1,3,"nui-widget",4),o.qZA()),2&e){const e=t.$implicit,i=o.oxw(),n=o.MAs(4);o.Q6J("item",i.dashboard.positions[e.key])("nuiGridsterItemWidgetId",e.key),o.xp6(1),o.Q6J("ngIf",i.shouldWidgetRender(e.key))("ngIfElse",n)}}function h(e,t){1&e&&(o.TgZ(0,"div",6),o._UZ(1,"nui-loading",7),o.qZA()),2&e&&(o.xp6(1),o.Q6J("active",!0))}let g=(()=>{class e{constructor(e){this.eventBus=e,this.editMode=!1,this.gridsterConfigChange=new o.vpe,this.dashboardChange=new o.vpe,this.gridsterItemsVisibilityMap={},this.orderWidgets=(e,t)=>{const i=this.dashboard.positions[e.key],o=this.dashboard.positions[t.key];return i.y-o.y||i.x-o.x},this.trackByFn=(e,t)=>t.key,this.updateWidgetPosition=(e,t)=>{const i=t.widgetId,o=(0,n.zdu)(this.dashboard,"positions."+i,e);this.dashboardChange.emit(o),this.eventBus.getStream(l.Xi).next({widgetId:i,payload:e})},this.emitWidgetResize=(e,t)=>{const i=t.widgetId;this.eventBus.getStream(l.pV).next({widgetId:i,payload:{widgetId:i,height:t.height,width:t.width}})}}get dashboard(){return this.dashboardBuffer||this._dashboard}set dashboard(e){this._dashboard=e,this.dashboardBuffer=null}get hostClass(){return!0}ngAfterViewInit(){setTimeout(()=>this.calculateWidgetsVisibility())}onGridsterScroll(){this.calculateWidgetsVisibility()}ngOnChanges(e){var t,i,o;if(e.gridsterConfig){if(e.gridsterConfig.isFirstChange()){const e=a()(this.gridsterConfig||{},d);this.hookEvent(e,"itemChangeCallback",this.updateWidgetPosition),this.hookEvent(e,"itemResizeCallback",this.emitWidgetResize),this.gridsterConfigChange.emit(e)}(null===(t=this.gridsterConfig)||void 0===t?void 0:t.api)&&(null===(o=(i=this.gridsterConfig.api).optionsChanged)||void 0===o||o.call(i))}if(e.editMode){if(!this.gridsterConfig.resizable)throw new Error("Gridster's resizable prop is undefined");if(this.gridsterConfig.resizable.enabled=this.editMode,!this.gridsterConfig.draggable)throw new Error("Gridster's draggable prop is undefined");this.gridsterConfig.draggable.enabled=this.editMode,this.gridsterConfigChange.emit(Object.assign({},this.gridsterConfig)),this.eventBus.getStream(l.N9).next({payload:this.editMode})}}onWidgetChange(e){!this.dashboard.widgets[e.id]||this.updateWidget(e)}updateWidget(e){var t,i,o,r,s;let a=this.dashboard;if(!this.dashboard.positions[e.id]&&(null===(t=this.gridsterConfig)||void 0===t?void 0:t.api)){const t=null===(o=(i=this.gridsterConfig.api).getFirstPossiblePosition)||void 0===o?void 0:o.call(i,{x:0,y:0,rows:null===(r=this.gridsterConfig)||void 0===r?void 0:r.defaultItemRows,cols:null===(s=this.gridsterConfig)||void 0===s?void 0:s.defaultItemCols});a=(0,n.zdu)(a,`positions.${e.id}`,t)}a=(0,n.zdu)(a,`widgets.${e.id}`,e),this.dashboardBuffer=a,this.dashboardChange.emit(a)}removeWidget(e,t=!0){let i=this.dashboard;if(!i.widgets[e])return;const o=Object.assign({},i.widgets);if(delete o[e],i=(0,n.zdu)(i,"widgets",o),t){const t=Object.assign({},i.positions);delete t[e],i=(0,n.zdu)(i,"positions",t)}this.dashboardChange.emit(i)}shouldWidgetRender(e){var t;return!(null===(t=this.belowFoldLazyLoadingConfig)||void 0===t?void 0:t.enabled)||this.gridsterItemsVisibilityMap[e]}hookEvent(e,t,i){const o=e[t];e[t]=(e,t)=>{i(e,t),o&&o(e,t)}}calculateWidgetsVisibility(){var e;if(!(null===(e=this.belowFoldLazyLoadingConfig)||void 0===e?void 0:e.enabled))return;const t=this.gridster.el.getBoundingClientRect();this.gridsterItemsVisibilityMap=this.gridsterItems.reduce((e,i)=>{var o;const{el:n}=i,r=i.widgetId;if(!(null===(o=this.belowFoldLazyLoadingConfig.configuration)||void 0===o?void 0:o.reloadWidgetsOnScroll)&&e[r])return e;const s=n.getBoundingClientRect();return e[r]=(s.top>t.top&&s.top<t.bottom||s.bottom>t.top&&s.bottom<t.bottom)&&(s.left>t.left&&s.left<t.right||s.right>t.left&&s.right<t.right),e},this.gridsterItemsVisibilityMap)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(c.Bc))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-dashboard"]],viewQuery:function(e,t){if(1&e&&(o.Gf(r.sm,5),o.Gf(r.IM,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.gridster=e.first),o.iGM(e=o.CRH())&&(t.gridsterItems=e)}},hostVars:2,hostBindings:function(e,t){2&e&&o.ekj("nui-dashboard",t.hostClass)},inputs:{gridsterConfig:"gridsterConfig",dashboard:"dashboard",editMode:"editMode",belowFoldLazyLoadingConfig:"belowFoldLazyLoadingConfig"},outputs:{gridsterConfigChange:"gridsterConfigChange",dashboardChange:"dashboardChange"},features:[o._Bn([{provide:c.Bc,useClass:n.Ndp}]),o.TTD],decls:5,vars:6,consts:[[1,"nui-dashboard__gridster",3,"options","scroll"],["class","nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId",4,"ngFor","ngForOf","ngForTrackBy"],["emptyWidgetTpl",""],[1,"nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId"],["class","w-100 h-100 d-block",3,"widget","widgetChange",4,"ngIf","ngIfElse"],[1,"w-100","h-100","d-block",3,"widget","widgetChange"],[1,"w-100","h-100","d-block"],[3,"active"]],template:function(e,t){1&e&&(o.TgZ(0,"gridster",0),o.NdJ("scroll",function(){return t.onGridsterScroll()}),o.YNc(1,p,2,4,"gridster-item",1),o.ALo(2,"keyvalue"),o.qZA(),o.YNc(3,h,2,1,"ng-template",null,2,o.W1O)),2&e&&(o.Q6J("options",t.gridsterConfig),o.xp6(1),o.Q6J("ngForOf",o.xi3(2,3,t.dashboard.widgets,t.orderWidgets))("ngForTrackBy",t.trackByFn))},styles:['.nui-dashboard__gridster{background-color:#f0f0f0;background-color:var(--nui-color-bg-workspace,#f0f0f0)}.nui-dashboard__gridster .gridster-preview{border-width:4px;border-style:solid;border-color:#00c4d2;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:rgba(0,196,210,.1);background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.nui-dashboard__gridster .gridster-preview:before{background-color:#00c4d2;background-color:var(--nui-color-selected-contrast,#00c4d2);border-radius:50%;content:"";display:block;height:40px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:40px;z-index:1}.nui-dashboard__gridster .gridster-preview:after{color:#fff;color:var(--nui-color-icon-light,#fff);content:"+";display:block;font-size:19px;font-weight:bold;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);z-index:2}.nui-dashboard__gridster-item{box-shadow:0 0 5px #999;box-shadow:0 0 var(--nui-space-xs, 5px) var(--nui-color-line-dark, #999999);background-color:#fff;background-color:var(--nui-color-bg-light,#fff)}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler{border-bottom-color:#00c4d2;border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);margin:0;z-index:2000}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler.handle-se{border-bottom-color:#00c4d2;border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);right:2px;bottom:2px}.mobile .nui-dashboard__gridster-item.nui-dashboard__gridster-item{height:auto!important}\n'],encapsulation:2}),e})()},92677:function(e,t,i){"use strict";i.d(t,{I:function(){return l}});var o=i(79765),n=i(18989),r=i(92954),s=(i(65470),i(33018)),a=i(46806);let l=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.pizzagnaService=t,this.logger=i,this.destroyed$=new o.xQ}ngOnChanges(e){(e.nodes||e.template)&&this.updateNodeConfigs({changesNodes:e.nodes,changesTemplate:e.template})}ngDoCheck(){this.checkNodeConfigs()&&(this.updateNodeConfigs(),this.changeDetector.detectChanges())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}trackByFn(e,t){return t.id}checkNodeConfigs(){const e=this.getNodes();if(!this.nodeComponentsConfigs||e.length!==this.nodeComponentsConfigs.length)return!0;for(let t=0;t<e.length;t++)if(this.pizzagnaService.getComponent(e[t])!==this.nodeComponentsConfigs[t])return!0;return!1}updateNodeComponentConfigs(){const e=this.getNodes();this.nodeComponentsConfigs=e&&e.map(e=>{const t=this.pizzagnaService.getComponent(e);if(void 0===t)throw new Error("No component with id '"+e+"' was defined in the configuration.");return t})}updateNodeConfigs(e){this.nodeConfigs=(0,n.n)(this.nodeConfigs,this.getTemplateChangeForNodes(e),this.getNodeComponentsConfigs())}getNodeComponentsConfigs(){const e={currentValue:void 0,previousValue:this.nodeComponentsConfigs?[...this.nodeComponentsConfigs]:void 0};return this.updateNodeComponentConfigs(),e.currentValue=this.nodeComponentsConfigs,e}getTemplateChangeForNodes(e){const{changesNodes:t,changesTemplate:i}=e||{},o=e=>{var t;return e&&(null===(t=this.getNodes())||void 0===t?void 0:t.map(()=>e))};return{currentValue:o(i?i.currentValue:this.template),previousValue:t?this.template:o(i?i.previousValue:this.template)}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.sBO),s.LFG(r.p),s.LFG(a.mQy))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})()},54910:function(e,t,i){"use strict";i.d(t,{i:function(){return p}});var o=i(29569),n=i.n(o),r=i(79765),s=i(46782),a=i(7350),l=i(92954),c=i(39973),d=i(65470),u=i(33018);let p=(()=>{class e{constructor(e,t,i){this.eventBus=e,this.dataSource=t,this.pizzagnaService=i,this.destroy$=new r.xQ,this.dataSource&&(this.setupRefreshListener(),this.dataSource.outputsSubject.pipe((0,s.R)(this.destroy$)).subscribe(e=>this.handleDataSourceUpdate(e)),this.dataSource.busy&&this.dataSource.busy.pipe((0,s.R)(this.destroy$)).subscribe(e=>{this.eventBus.getStream(c.QD).next({payload:{componentId:this.componentId,busy:e}})}))}setupRefreshListener(){this.eventBus.getStream(c.RG).pipe((0,s.R)(this.destroy$)).subscribe(()=>this.handleRefresh())}handleRefresh(){this.eventBus.getStream(c.R1).next(),this.dataSource.applyFilters()}handleDataSourceUpdate(e){this.lastValue=n()(null==e?void 0:e.result)?e:null==e?void 0:e.result,this.updateOutput(this.lastValue),this.eventBus.getStream(a.PF).next({payload:Object.assign({componentId:this.componentId},e)})}ngOnDestroy(){this.updateOutput(void 0);const e={payload:{componentId:this.componentId}};this.eventBus.getStream(a.yX).next(e);const t={payload:{componentId:this.componentId,busy:!1}};this.eventBus.getStream(c.QD).next(t),this.destroy$.next(),this.destroy$.complete()}updateConfiguration(e){e.componentId&&(this.componentId=e.componentId),this.updateAdapterProperties(e),this.updateDataSourceProperties(e),void 0!==this.lastValue&&this.updateOutput(this.lastValue)}updateAdapterProperties(e){this.propertyPath=e.propertyPath}updateDataSourceProperties(e){var t,i;const o=null===(t=null==e?void 0:e.dataSource)||void 0===t?void 0:t.properties;if(this.dataSourceConfiguration!==o){this.dataSourceConfiguration=o;const t=this.dataSource;(null==t?void 0:t.updateConfiguration)&&t.updateConfiguration(null===(i=e.dataSource)||void 0===i?void 0:i.properties),this.eventBus.getStream(c.RG).next()}void 0===this.dataSourceConfiguration&&void 0===o&&setTimeout(()=>this.eventBus.getStream(c.RG).next())}updateOutput(e){this.pizzagnaService.setProperty({pizzagnaKey:d.xW.Data,componentId:this.componentId,propertyPath:[this.propertyPath]},this.processOutput(e))}processOutput(e){return e}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(d.nY),u.LFG(d.Fk,8),u.LFG(l.p))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e})()},43925:function(e,t,i){"use strict";i.d(t,{I:function(){return s}});var o=i(39973),n=i(65470),r=i(33018);let s=(()=>{class e{constructor(e){this.eventBus=e,this.initializeSubscriptions()}updateConfiguration(e){this.properties=e}initializeSubscriptions(){this.eventBus.getStream(o.b1).subscribe(e=>{var t,i,o;(!(null===(t=this.properties)||void 0===t?void 0:t.interactionType)||(null===(i=this.properties)||void 0===i?void 0:i.interactionType)===(null===(o=e.payload)||void 0===o?void 0:o.interactionType))&&this.handleInteraction(e.payload)})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(n.nY))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})()},83645:function(e,t,i){"use strict";i.d(t,{O:function(){return c}});var o=i(62848),n=i.n(o),r=i(65470),s=i(43925),a=i(33018),l=i(46806);Window;let c=(()=>{class e extends s.I{constructor(e,t,i){super(e),this.window=t,this.logger=i,this.templateOptions={evaluate:null}}handleInteraction(e){var t;if(!(null===(t=this.properties)||void 0===t?void 0:t.url))return void this.logger.warn("The target url has not been defined.");const i=n()(this.properties.url,this.templateOptions)({data:e.data});!i||(this.properties.newWindow?this.window.open(i):this.window.location.href=i)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(r.nY),a.LFG("windowObject"),a.LFG(l.mQy))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})()},43397:function(e,t,i){"use strict";i.d(t,{g:function(){return s}});var o=i(26215),n=i(27386),r=i(33018);let s=(()=>{class e{constructor(){this._refreshRateSeconds=n.Q,this.refreshRateSeconds$=new o.X(this.refreshRateSeconds)}get refreshRateSeconds(){return this._refreshRateSeconds}set refreshRateSeconds(e){this._refreshRateSeconds=e,this.refreshRateSeconds$.next(this._refreshRateSeconds)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},388:function(e,t,i){"use strict";i.d(t,{q:function(){return d}});var o=i(79765),n=i(46782),r=i(39973),s=i(65470),a=i(27386),l=i(33018),c=i(43397);let d=(()=>{class e{constructor(e,t,i){this.eventBus=e,this.ngZone=t,this.refresherSettings=i,this.enabled=!0,this.overrideDefaultSettings=!0,this.interval=a.Q,this.eventDef=r.RG,this.destroy$=new o.xQ,this.refresherSettings.refreshRateSeconds$.pipe((0,n.R)(this.destroy$)).subscribe(e=>{this.overrideDefaultSettings||this.initializeInterval()})}updateConfiguration(e){var t,i,o,n;this.interval=null!==(t=e.interval)&&void 0!==t?t:a.Q,this.enabled=null===(i=e.enabled)||void 0===i||i,this.overrideDefaultSettings=null===(o=e.overrideDefaultSettings)||void 0===o||o,this.eventDef=null!==(n=e.event)&&void 0!==n?n:r.RG,this.initializeInterval()}ngOnDestroy(){this.clearInterval(),this.destroy$.next(),this.destroy$.complete()}initializeInterval(){this.clearInterval(),!(void 0===this.interval||this.getInterval()<=0||!1===this.enabled)&&this.ngZone.runOutsideAngular(()=>{this.intervalRef=setInterval(()=>{this.ngZone.run(()=>{this.performAction()})},1e3*this.getInterval())})}performAction(){this.eventBus.getStream(this.eventDef).next()}getInterval(){return this.overrideDefaultSettings?this.interval:this.refresherSettings.refreshRateSeconds}clearInterval(){void 0!==this.intervalRef&&(clearInterval(this.intervalRef),this.intervalRef=void 0)}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(s.nY),l.LFG(l.R0b),l.LFG(c.g))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac}),e})()},37367:function(e,t,i){"use strict";i.d(t,{Y:function(){return _}});var o=i(64762),n=i(33018),r=i(46806),s=i(56693),a=i(59796),l=i(77393),c=i(20377),d=i(85345);class u{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new p(e,this.resultSelector))}}class p extends l.L{constructor(e,t,i=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;(0,a.k)(e)?t.push(new g(e)):t.push("function"==typeof e[c.hZ]?new h(e[c.hZ]()):new m(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let i=0;i<t;i++){let t=e[i];t.stillUnsubscribed?this.destination.add(t.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,i=this.destination;for(let r=0;r<t;r++){let t=e[r];if("function"==typeof t.hasValue&&!t.hasValue())return}let o=!1;const n=[];for(let r=0;r<t;r++){let t=e[r],s=t.next();if(t.hasCompleted()&&(o=!0),s.done)return void i.complete();n.push(s.value)}this.resultSelector?this._tryresultSelector(n):i.next(n),o&&i.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class h{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class g{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[c.hZ](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class m extends d.Ds{constructor(e,t,i){super(e),this.parent=t,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[c.hZ](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return(0,d.ft)(this.observable,new d.IY(this))}}var f=i(66682),v=i(43190),y=i(39761),b=i(68307),C=i(54395),x=i(46782),w=i(92954),T=i(39973),S=i(65470),I=i(54910);let _=class extends I.i{constructor(e,t,i,o){super(e,t,i),this.virtualViewport=o}setupRefreshListener(){const e=function(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),(0,s.n)(e,void 0).lift(new u(t))}(this.eventBus.getStream(T.j7),this.eventBus.getStream(T.RG)).pipe((0,v.w)(()=>this.eventBus.getStream(T.RG).pipe((0,y.O)(void 0))),(0,b.b)(()=>this.virtualViewport.reset({emitFirstPage:!1})));(0,f.T)(e,this.eventBus.getStream(T.df)).pipe((0,C.b)(10),(0,b.b)(()=>this.handleRefresh()),(0,x.R)(this.destroy$)).subscribe()}updateAdapterProperties(e){this.dataPath=e.dataPath,this.dataFieldsPath=e.dataFieldsPath,this.totalItemsPath=e.totalItemsPath}updateOutput(e){var t,i;const o=null===(t=null==e?void 0:e.paginator)||void 0===t?void 0:t.total,n=null===(i=null==e?void 0:e.repeat)||void 0===i?void 0:i.itemsSource,r=null==e?void 0:e.dataFields;this.pizzagnaService.setProperty({pizzagnaKey:S.xW.Data,componentId:this.componentId,propertyPath:[this.totalItemsPath]},o),this.pizzagnaService.setProperty({pizzagnaKey:S.xW.Data,componentId:this.componentId,propertyPath:[this.dataPath]},n),this.pizzagnaService.setProperty({pizzagnaKey:S.xW.Data,componentId:this.componentId,propertyPath:[this.dataFieldsPath]},r)}};_=(0,o.gn)([(0,o.fM)(0,(0,n.tBr)(S.nY)),(0,o.fM)(1,(0,n.tBr)(S.Fk)),(0,o.fM)(3,(0,n.FiY)()),(0,o.w6)("design:paramtypes",[r.Ndp,Object,w.p,r.zCP])],_)},81354:function(e,t,i){"use strict";i.d(t,{f:function(){return u}});var o=i(64762),n=i(33018),r=i(46806),s=i(13742),a=i.n(s),l=i(92954),c=i(65470),d=i(54910);let u=class extends d.i{constructor(e,t,i){super(e,t,i),this.seriesIndex=[]}updateConfiguration(e){this.seriesIndex=a()(e.series),super.updateConfiguration(e)}processOutput(e){return e&&Object.assign(Object.assign({},e),{series:this.buildSeriesSet(null==e?void 0:e.series)})}buildSeriesSet(e){return e?e.filter(e=>this.seriesIndex.find(t=>t.selectedSeriesId===e.id)).map(e=>{var t;return{id:e.id,data:e.data,link:e.link,secondaryLink:e.secondaryLink,legendDescriptionPrimary:null===(t=this.seriesIndex.find(t=>t.selectedSeriesId===e.id))||void 0===t?void 0:t.label,legendDescriptionSecondary:e.description}}):[]}};u=(0,o.gn)([(0,o.fM)(0,(0,n.tBr)(c.nY)),(0,o.fM)(1,(0,n.tBr)(c.Fk)),(0,o.w6)("design:paramtypes",[r.Ndp,Object,l.p])],u)},27386:function(e,t,i){"use strict";i.d(t,{Q:function(){return o}});const o=300},52409:function(e,t,i){"use strict";i.d(t,{q:function(){return n}});var o=i(33018);let n=(()=>{class e{}return e.lateLoadKey="TemplateLoadErrorComponent",e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:0,template:function(e,t){1&e&&(o.TgZ(0,"code"),o.TgZ(1,"pre"),o._uU(2,"Template load error!"),o.qZA(),o.qZA())},encapsulation:2}),e})()},13385:function(e,t,i){"use strict";i.d(t,{w:function(){return o},K:function(){return n}});var o=(()=>{return(e=o||(o={})).None="None",e.Right="Right",e.Bottom="Bottom",o;var e})(),n=(()=>{return(e=n||(n={}))[e.URL=0]="URL",e[e.HTML=1]="HTML",n;var e})()},61817:function(e,t,i){"use strict";i.d(t,{n:function(){return m}});var o=i(33018),n=i(46806),r=i(79765),s=i(25624),a=i(40494),l=i(28726),c=i(54195),d=i(38583),u=i(87636),p=i(30510);const h=["previewPizzagnaComponent"];function g(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"nui-pizzagna",8,9),o.NdJ("pizzagnaChange",function(t){return o.CHM(e),o.oxw().onPizzagnaChange(t)}),o.ALo(2,"nuiPizzagnaRoot"),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("rootNode",o.xi3(2,2,e.previewWidget,"widget"))("pizzagna",null==e.previewWidget?null:e.previewWidget.pizzagna)}}let m=(()=>{class e{constructor(e,t){this.widgetTypesService=e,this.changeDetector=t,this.result=new o.vpe,this.formPortalAttached=new o.vpe,this.submitError=new r.xQ,this.destroy$=new r.xQ}ngOnInit(){this.previewWidget||(this.previewWidget={id:null,type:"previewPlaceholder",pizzagna:this.widgetTypesService.getWidgetType("previewPlaceholder").widget})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleSubmitError(){this.submitError.next()}onFormPortalAttached(e){this.formPortalAttached.emit(e)}updateWidget(e){this.previewWidget=e,this.changeDetector.markForCheck()}formCancel(){this.result.next(null)}formSubmit(){this.result.next(this.previewWidget)}onPizzagnaChange(e){this.previewWidget&&(this.previewWidget.pizzagna=e)}}return e.lateLoadKey="ConfiguratorComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(a.x),o.Y36(o.sBO))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-configurator"]],viewQuery:function(e,t){if(1&e&&o.Gf(h,7),2&e){let e;o.iGM(e=o.CRH())&&(t.previewPizzagnaComponent=e.first)}},hostAttrs:[1,"nui-configurator"],inputs:{formPortal:"formPortal",previewWidget:"previewWidget"},outputs:{result:"result",formPortalAttached:"formPortalAttached"},features:[o._Bn([l.m,{provide:n.nse,useValue:".nui-dashwiz-step--active .configurator-scrollable"}])],decls:9,vars:4,consts:[[1,"nui-configurator__backdrop"],[1,"nui-configurator__content"],["orientation","right","paneSize","30vw","paneMinSize","20vw","paneMaxSize","80vw","isResizable","true",1,"h-100",3,"headerPadding","sidePaneBodyPadding"],[1,"nui-configurator__preview","d-flex","align-items-center","justify-content-center"],[1,"nui-configurator__preview-area"],["class","flex-grow-1 w-100",3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],["nuiPanelEmbeddedBody","",1,"nui-configurator__body"],[3,"cdkPortalOutlet","attached"],[1,"flex-grow-1","w-100",3,"rootNode","pizzagna","pizzagnaChange"],["previewPizzagnaComponent",""]],template:function(e,t){1&e&&(o._UZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"nui-panel",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o._UZ(5,"nui-preview-overlay"),o.YNc(6,g,3,5,"nui-pizzagna",5),o.qZA(),o.qZA(),o.TgZ(7,"div",6),o.ynx(8,7),o.NdJ("attached",function(e){return t.onFormPortalAttached(e)}),o.BQk(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.Q6J("headerPadding",!1)("sidePaneBodyPadding",!1),o.xp6(4),o.Q6J("ngIf",null==t.previewWidget?null:t.previewWidget.pizzagna),o.xp6(2),o.Q6J("cdkPortalOutlet",t.formPortal))},directives:[n.yXm,c.b,d.O5,u.Pl,s.R],pipes:[p.l],styles:[".nui-configurator__backdrop[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:rgba(17,17,17,.5);background-color:var(--nui-color-overlay-modal,rgba(17, 17, 17, .5));opacity:.5;filter:alpha(opacity=50)}.nui-configurator__content[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040}.nui-configurator__heading[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #d9d9d9}.nui-configurator__body[_ngcontent-%COMP%]{overflow-anchor:none;height:100vh}.nui-configurator__preview[_ngcontent-%COMP%]{height:100vh}.nui-configurator__preview-area[_ngcontent-%COMP%]{display:flex;width:80%;position:relative;background-color:#fff;background-color:var(--nui-color-bg-content_popover,#fff);border:1px solid;border-color:#d9d9d9;border-color:var(--nui-color-line-default,#d9d9d9);margin:auto;min-height:40vh;max-height:80vh;overflow:hidden}"]}),e})()},64874:function(e,t,i){"use strict";i.d(t,{O:function(){return n}});var o=i(33018);let n=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-drop-area"]],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;border:3px solid;border-color:#00c4d2;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:rgba(0,196,210,.2);background-color:var(--nui-color-busy-default,rgba(0, 196, 210, .2))}"]}),e})()},89563:function(e,t,i){"use strict";i.d(t,{P:function(){return m}});var o=i(90665),n=i(92677),r=i(92954),s=i(65470),a=i(33018),l=i(46806),c=i(38583),d=i(46747),u=i(87636);function p(e,t){}const h=function(){return["formReady"]};function g(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.ynx(1,1,2),a.NdJ("output",function(t){const i=a.CHM(e).$implicit;return a.oxw().onEvent(i.id,t)}),a.YNc(3,p,0,0,"ng-template",3),a.NdJ("attached",function(t){return a.CHM(e),a.MAs(2).attached(t)}),a.BQk(),a.BQk()}if(2&e){const e=t.$implicit,i=a.MAs(2);a.xp6(1),a.Q6J("componentId",e.id)("componentType",e.componentType)("providers",e.providers)("properties",e.properties)("outputs",a.DdM(6,h)),a.xp6(2),a.Q6J("cdkPortalOutlet",i.portal)}}let m=(()=>{class e extends n.I{constructor(e,t,i,o,n){super(e,t,i),this.formDirective=o,this.eventBus=n,this.elementClass=""}ngOnInit(){this.form=this.formDirective.form}ngOnChanges(e){super.ngOnChanges(e)}onEvent(e,t){"formReady"===t.id&&this.addFormGroup(e,t.payload)}addFormGroup(e,t){this.form.addControl(e,t)}getNodes(){return this.nodes}}return e.lateLoadKey="FormStackComponent",e.\u0275fac=function(t){return new(t||e)(a.Y36(a.sBO),a.Y36(r.p),a.Y36(l.mQy),a.Y36(o.sg),a.Y36(s.nY))},e.\u0275cmp=a.Xpm({type:e,selectors:[["nui-form-stack"]],hostVars:2,hostBindings:function(e,t){2&e&&a.Tol(t.elementClass)},inputs:{nodes:"nodes"},features:[a._Bn([],[{provide:o.gN,useExisting:o.sg}]),a.qOj,a.TTD],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&a.YNc(0,g,4,7,"ng-container",0),2&e&&a.Q6J("ngForOf",t.nodeConfigs)("ngForTrackBy",t.trackByFn)},directives:[c.sg,d.$,u.Pl],encapsulation:2}),e})()},96899:function(e,t,i){"use strict";i.d(t,{C:function(){return c}});var o=i(33018),n=i(46806),r=i(38583);function s(e,t){if(1&e&&o._UZ(0,"nui-icon",4),2&e){const e=o.oxw(2);o.Q6J("icon",null==e.data?null:e.data.value)}}function a(e,t){if(1&e&&(o.TgZ(0,"div",2),o.YNc(1,s,1,1,"nui-icon",3),o.qZA()),2&e){const e=o.oxw(),t=o.MAs(2);o.xp6(1),o.Q6J("ngIf",e.iconFound)("ngIfElse",t)}}function l(e,t){1&e&&o._UZ(0,"nui-icon",5)}let c=(()=>{class e{constructor(e,t){this.changeDetector=e,this.iconService=t,this.isValid=!1,this.iconFound=!0}ngOnChanges(){var e,t;this.isValid=!!(null===(e=this.data)||void 0===e?void 0:e.value),this.iconFound=!!this.iconService.getIconData(null===(t=this.data)||void 0===t?void 0:t.value)}}return e.lateLoadKey="IconFormatterComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(n.C6t))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],inputs:{data:"data"},features:[o.TTD],decls:3,vars:1,consts:function(){let e;return e=$localize`:8cf3dbb8fe1e2fa079d4c2167cd4c81cdcfe89c27731831112083433420:Unknown icon`,[["class","d-flex align-items-center justify-content-center",4,"ngIf"],["iconNotFound",""],[1,"d-flex","align-items-center","justify-content-center"],[3,"icon",4,"ngIf","ngIfElse"],[3,"icon"],["title",e,"iconColor","disabled-gray","icon","help"]]},template:function(e,t){1&e&&(o.YNc(0,a,2,2,"div",0),o.YNc(1,l,1,0,"ng-template",null,1,o.W1O)),2&e&&o.Q6J("ngIf",t.isValid)},directives:[r.O5,n.oJW],encapsulation:2}),e})()},62878:function(e,t,i){"use strict";i.d(t,{s:function(){return s}});var o=i(33018),n=i(38583);function r(e,t){if(1&e&&(o.TgZ(0,"a",2),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.Q6J("href",null==e.data?null:e.data.link,o.LSH),o.xp6(1),o.hij(" ",null==e.data?null:e.data.value," ")}}let s=(()=>{class e{constructor(e){this.changeDetector=e,this.isValid=!1}ngOnChanges(e){this.isValid=Boolean(this.data&&this.data.value&&this.data.link)}}return e.lateLoadKey="LinkFormatterComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],inputs:{data:"data"},features:[o.TTD],decls:2,vars:1,consts:[[1,"link-formatter-container"],["class","nui-text-ellipsis","target","_blank",3,"href",4,"ngIf"],["target","_blank",1,"nui-text-ellipsis",3,"href"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,r,2,2,"a",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",t.isValid))},directives:[n.O5],styles:[".link-formatter-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}"]}),e})()},24803:function(e,t,i){"use strict";i.d(t,{a:function(){return n}});var o=i(33018);let n=(()=>{class e{constructor(e){this.changeDetector=e}}return e.lateLoadKey="RawFormatterComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Tol(t.elementClass)},inputs:{data:"data",elementClass:"elementClass"},decls:2,vars:1,template:function(e,t){1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e&&(o.xp6(1),o.Oqu(null==t.data?null:t.data.value))},encapsulation:2}),e})()},66213:function(e,t,i){"use strict";i.d(t,{Q:function(){return s}});var o=i(33018),n=i(35720),r=i(46806);let s=(()=>{class e{constructor(e,t){this.el=e,this.heading=t,this.disableCloseButton=!1,this.close=new o.vpe}ngOnChanges(){this.heading.height$.next(+getComputedStyle(this.el.nativeElement).height.slice(0,-2))}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(n.p))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-configurator-heading"]],inputs:{configuratorTitle:"configuratorTitle",disableCloseButton:"disableCloseButton"},outputs:{close:"close"},features:[o.TTD],decls:4,vars:3,consts:[[1,"configurator-heading","d-flex","justify-content-between","align-items-center","p-4"],[1,"nui-text-panel","nui-text-ellipsis",3,"title"],["nui-button","","type","button","displayStyle","action","icon","close",3,"disabled","click"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"span",1),o._uU(2),o.qZA(),o.TgZ(3,"button",2),o.NdJ("click",function(){return t.close.emit()}),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.Q6J("title",t.configuratorTitle),o.xp6(1),o.hij(" ",t.configuratorTitle," "),o.xp6(1),o.Q6J("disabled",t.disableCloseButton))},directives:[r.r0F],styles:["[_nghost-%COMP%]{z-index:1080;background-color:#fff;background-color:var(--nui-color-bg-content,#fff)}[_nghost-%COMP%]   .configurator-heading[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#d9d9d9;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),e})()},83385:function(e,t,i){"use strict";i.d(t,{e:function(){return r}});var o=i(15257),n=i(33018);let r=(()=>{class e{constructor(){this.accordions=[]}registerAccordion(e){this.accordions.push({instance:e,openSubscription:e.openSubject.subscribe(()=>{this.closeAllAccordions(),e.open=!0}),destroySubscription:e.destroySubject.pipe((0,o.q)(1)).subscribe(()=>{this.removeAccordion(e)})})}closeAllAccordions(){this.accordions.forEach(e=>{e.instance.closeAccordion()})}removeAccordion(e){const t=this.accordions.findIndex(t=>t.instance===e);this.accordions[t].openSubscription.unsubscribe(),this.accordions.splice(t,1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})()},6432:function(e,t,i){"use strict";i.d(t,{j:function(){return b}});var o=i(33018),n=i(92677),r=i(92954),s=i(46806),a=i(90665),l=i(38583),c=i(46747),d=i(87636);function u(e,t){1&e&&o.GkF(0)}function p(e,t){1&e&&o.GkF(0)}function h(e,t){if(1&e&&(o.TgZ(0,"div",5),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.Q6J("title",e.headerText),o.xp6(1),o.hij(" ",e.headerText," ")}}function g(e,t){}const m=function(){return["formReady"]};function f(e,t){if(1&e){const e=o.EpF();o.ynx(0),o.ynx(1,6,7),o.NdJ("output",function(t){const i=o.CHM(e).$implicit;return o.oxw().onEvent(i.id,t)}),o.YNc(3,g,0,0,"ng-template",8),o.NdJ("attached",function(t){return o.CHM(e),o.MAs(2).attached(t)}),o.BQk(),o.BQk()}if(2&e){const e=t.$implicit,i=o.MAs(2);o.xp6(1),o.Q6J("componentId",e.id)("componentType",e.componentType)("providers",e.providers)("properties",e.properties)("outputs",o.DdM(6,m)),o.xp6(2),o.Q6J("cdkPortalOutlet",i.portal)}}const v=[[["","headerText",""]],[["","headerButtons",""]],"*"],y=["[headerText]","[headerButtons]","*"];let b=(()=>{class e extends n.I{constructor(e,t,i,n){super(e,t,i),this.formBuilder=n,this.nodes=[],this.headerText="",this.formReady=new o.vpe,this.formDestroy=new o.vpe}getNodes(){return this.nodes}ngOnInit(){this.form=this.formBuilder.group({})}onEvent(e,t){"formReady"===t.id&&this.addFormGroup(e,t.payload),Object.keys(this.form.controls).length===this.getNodes().length&&this.formReady.emit(this.form)}addFormGroup(e,t){this.form.addControl(e,t)}ngOnDestroy(){this.formDestroy.emit(this.form),super.ngOnDestroy()}}return e.lateLoadKey="WidgetConfiguratorSectionComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(r.p),o.Y36(s.mQy),o.Y36(a.qu))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-widget-configurator-section"]],hostAttrs:[1,"nui-widget-configurator-section"],inputs:{headerTextTemplate:"headerTextTemplate",headerButtonsTemplate:"headerButtonsTemplate",nodes:"nodes",headerText:"headerText"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[o.qOj],ngContentSelectors:y,decls:9,vars:5,consts:[[1,"widget-configurator-section"],[1,"widget-configurator-section__header","d-flex","justify-content-between","align-items-center"],[4,"ngTemplateOutlet"],["headerText","","class","widget-configurator-section__header-text",3,"title",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["headerText","",1,"widget-configurator-section__header-text",3,"title"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&(o.F$t(v),o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.YNc(2,u,1,0,"ng-container",2),o.YNc(3,p,1,0,"ng-container",2),o.YNc(4,h,2,2,"div",3),o.Hsn(5),o.Hsn(6,1),o.qZA(),o.YNc(7,f,4,7,"ng-container",4),o.Hsn(8,2),o.qZA()),2&e&&(o.xp6(2),o.Q6J("ngTemplateOutlet",t.headerTextTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",t.headerButtonsTemplate),o.xp6(1),o.Q6J("ngIf",t.headerText),o.xp6(3),o.Q6J("ngForOf",t.nodeConfigs)("ngForTrackBy",t.trackByFn))},directives:[l.tP,l.O5,l.sg,c.$,d.Pl],styles:[".widget-configurator-section{margin:15px;border-radius:3px;border:1px solid;border-color:#d9d9d9;border-color:var(--nui-color-line-default,#d9d9d9)}.widget-configurator-section__header{padding:15px 5px 15px 15px;height:40px;font-size:16px;font-weight:600;background-color:#f0f0f0;background-color:var(--nui-color-bg-table_header,#f0f0f0);color:rgba(17,17,17,.6);color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6))}.widget-configurator-section__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),e})()},4433:function(e,t,i){"use strict";i.d(t,{J:function(){return p}});var o=i(79765),n=i(65470),r=i(33018),s=i(83385),a=i(46806),l=i(38583);function c(e,t){if(1&e&&r._UZ(0,"nui-icon",4),2&e){const e=r.oxw();r.Q6J("icon",e.open?"triangle-down":"triangle-left")}}const d=[[["","accordionHeader",""]],"*"],u=["[accordionHeader]","*"];let p=(()=>{class e{constructor(e,t){this.accordionCoordinator=e,this.cd=t,this.showOpenStateIcon=!0,this.state=n.Nc.DEFAULT,this.open=!1,this.openSubject=new o.xQ,this.destroySubject=new o.xQ}ngOnInit(){this.accordionCoordinator.registerAccordion(this)}openChange(e){e?this.openSubject.next():this.closeAccordion()}closeAccordion(){this.cd.markForCheck(),this.open=!1}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(s.e),r.Y36(r.sBO))},e.\u0275cmp=r.Xpm({type:e,selectors:[["nui-widget-editor-accordion"]],inputs:{showOpenStateIcon:"showOpenStateIcon",state:"state"},ngContentSelectors:u,decls:6,vars:6,consts:[[1,"nui-widget-editor-accordion"],[3,"open","openChange"],["nuiExpanderHeader","",1,"d-flex","align-items-start"],["class","nui-widget-editor-accordion__edit-icon",3,"icon",4,"ngIf"],[1,"nui-widget-editor-accordion__edit-icon",3,"icon"]],template:function(e,t){1&e&&(r.F$t(d),r.TgZ(0,"div",0),r.TgZ(1,"nui-expander",1),r.NdJ("openChange",function(e){return t.openChange(e)}),r.TgZ(2,"div",2),r.Hsn(3),r.YNc(4,c,1,1,"nui-icon",3),r.qZA(),r.Hsn(5,1),r.qZA(),r.qZA()),2&e&&(r.xp6(1),r.Q6J("open",t.open),r.xp6(1),r.ekj("error-state","critical"===t.state)("warning-state","warning"===t.state),r.xp6(2),r.Q6J("ngIf",t.showOpenStateIcon))},directives:[a.Fxv,l.O5,a.oJW],styles:[".nui-widget-editor-accordion nui-form-field:last-child .nui-form-field{margin-bottom:0}.nui-widget-editor-accordion__edit-icon{padding:10px;margin-left:auto;margin-right:5px}.nui-widget-editor-accordion .nui-expander--expanded{padding-bottom:0}.nui-widget-editor-accordion .nui-expander__header-icon{display:none}.nui-widget-editor-accordion .nui-expander__header .error-state{background-color:#fceae6;background-color:var(--nui-color-semantic-critical-bg,#fceae6)}.nui-widget-editor-accordion .nui-expander__header .warning-state{background-color:#fff9e6;background-color:var(--nui-color-semantic-warning-bg,#fff9e6)}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader]{border-top:1px solid;border-top-color:#d9d9d9;border-top-color:var(--nui-color-line-default,#d9d9d9);min-height:50px}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]{overflow:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div{overflow-x:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div .nui-text-secondary{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget-editor-accordion .nui-expander__body{margin:0;padding:0;border-left:none}\n"],encapsulation:2,changeDetection:0}),e})()},19797:function(e,t,i){"use strict";i.d(t,{b:function(){return w}});var o=i(58102),n=i.n(o),r=i(26215),s=i(79765),a=i(46782),l=i(25624),c=i(39973),d=i(65470),u=i(61817),p=i(33018),h=i(90665),g=i(28726),m=i(66213),f=i(77341),v=i(23309),y=i(38583);const b=["formPizzagnaComponent"];function C(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"nui-pizzagna",6,7),p.NdJ("pizzagnaChange",function(t){return p.CHM(e),p.oxw(2).formPizzagna=t}),p.qZA()}if(2&e){const e=p.oxw(2);p.Q6J("rootNode",e.formRoot)("pizzagna",e.formPizzagna)}}function x(e,t){if(1&e&&(p.TgZ(0,"div",4),p.YNc(1,C,2,2,"nui-pizzagna",5),p.qZA()),2&e){const e=p.oxw();p.Q6J("formGroup",e.form),p.xp6(1),p.Q6J("ngIf",e.formPizzagna)}}let w=(()=>{class e{constructor(e,t,i,o){this.changeDetector=e,this.formBuilder=t,this.previewService=i,this.configurator=o,this.navigationControl=new r.X({busyState:{busy:!1},allowStepChange:!0}),this.busy=!1,this.destroy$=new s.xQ,this.form=this.formBuilder.group({})}set formPizzagnaComponent(e){var t;null===(t=null==e?void 0:e.eventBus)||void 0===t||t.getStream(c.xZ).pipe((0,a.R)(this.destroy$)).subscribe(e=>{var t,i,o;const n=e.payload;null===(o=null===(i=null===(t=this.configurator)||void 0===t?void 0:t.previewPizzagnaComponent)||void 0===i?void 0:i.eventBus)||void 0===o||o.getStream(n.id).next(n.payload)}),this._formPizzagnaComponent=e}ngOnInit(){var e;this.previewService.preview=null===(e=this.configurator.previewWidget)||void 0===e?void 0:e.pizzagna[d.xW.Configuration],this.previewService.previewChanged.pipe((0,a.R)(this.destroy$)).subscribe(e=>{this.onPreviewPizzagnaUpdate(e),this.changeDetector.detectChanges()}),this.configurator.submitError.pipe((0,a.R)(this.destroy$)).subscribe(()=>{this.toggleBusy()}),this.changeDetector.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewPizzagnaUpdate(t){var i;const o=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(i=this.configurator.previewWidget)||void 0===i?void 0:i.pizzagna),{[d.xW.Configuration]:t})});this.configurator.updateWidget(o);const r=n()(t,e.TITLE_PATH,"");this.configuratorTitle=$localize`Editing ${r}`}onFinish(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0});this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}}return e.lateLoadKey="WidgetEditorComponent",e.TITLE_PATH="header.properties.title",e.\u0275fac=function(t){return new(t||e)(p.Y36(p.sBO),p.Y36(h.qu),p.Y36(g.m),p.Y36(u.n))},e.\u0275cmp=p.Xpm({type:e,selectors:[["nui-widget-editor"]],viewQuery:function(e,t){if(1&e&&p.Gf(b,5),2&e){let e;p.iGM(e=p.CRH())&&(t.formPizzagnaComponent=e.first)}},hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",formRoot:"formRoot"},decls:5,vars:5,consts:function(){let e;return e=$localize`:afa960379d26eb20fd22e6e10537c1c5ec74c5d14319441956121197474:Save Changes`,[[3,"configuratorTitle","disableCloseButton","close"],["finishText",e,3,"hideHeader","navigationControl","finish","cancel"],[3,"stepTemplate"],["step1",""],[3,"formGroup"],[3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],[3,"rootNode","pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(e,t){if(1&e&&(p.TgZ(0,"nui-configurator-heading",0),p.NdJ("close",function(){return t.onCancel()}),p.qZA(),p.TgZ(1,"nui-dashwiz",1),p.NdJ("finish",function(){return t.onFinish()})("cancel",function(){return t.onCancel()}),p._UZ(2,"nui-dashwiz-step",2),p.qZA(),p.YNc(3,x,2,2,"ng-template",null,3,p.W1O)),2&e){const e=p.MAs(4);p.Q6J("configuratorTitle",t.configuratorTitle)("disableCloseButton",t.busy),p.xp6(1),p.Q6J("hideHeader",!0)("navigationControl",t.navigationControl),p.xp6(1),p.Q6J("stepTemplate",e)}},directives:[m.Q,f.i,v.u,h.JL,h.sg,y.O5,l.R],encapsulation:2,changeDetection:0}),e})()},36233:function(e,t,i){"use strict";i.d(t,{s:function(){return T}});var o=i(33018),n=i(90665),r=i(79765),s=i(15257),a=i(5358),l=i(65470),c=i(7350),d=i(66297),u=i(35720),p=i(46806),h=i(4433),g=i(38583),m=i(46747),f=i(87636),v=i(52238),y=i(76e3);function b(e,t){if(1&e&&(o.TgZ(0,"nui-select-v2-option",14),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.Q6J("title",e)("value",e),o.xp6(1),o.hij(" ",e," ")}}function C(e,t){}const x=function(){return["errorState"]},w=function(e){return{dataSource:e}};let T=(()=>{class e{constructor(e,t,i,n,s,a,l){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.providerRegistryService=n,this.eventBus=s,this.injector=a,this.logger=l,this.dataSourceProviders=[],this.errorComponent=d.K.lateLoadKey,this.formReady=new o.vpe,this.hasDataSourceError=!1,this.dsOutput=new r.xQ,this.dataFieldIds=new r.xQ}ngOnInit(){this.form=this.formBuilder.group({providerId:[this.providerId||"",[n.kI.required]],properties:this.formBuilder.group(this.properties||{})}),this.form.setValidators([()=>this.hasDataSourceError?{dataSourceError:!0}:null]),this.formReady.emit(this.form)}ngOnChanges(e){var t;e.providerId&&!e.providerId.isFirstChange()&&e.providerId.previousValue!==this.providerId&&(null===(t=this.form.get("providerId"))||void 0===t||t.setValue(this.providerId),this.invokeDataSource(this.providerId))}onDataSourceChange(e){this.eventBus.next(c.ay,{}),this.invokeDataSource(e)}invokeDataSource(e){if(!e)return;const t=this.providerRegistryService.getProvider(e);t?(this.dataSource=this.providerRegistryService.getProviderInstance(t,this.injector),this.eventBus.next(c.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,s.q)(1)).subscribe(e=>{this.eventBus.next(c.PF,{payload:e}),this.dsOutput.next(e);const t=(null==e?void 0:e.result)||e;t&&this.dataFieldIds.next(Object.keys(t))}),setTimeout(()=>{this.dataSource.applyFilters()})):this.logger.warn("No provider found for id:",e)}onErrorState(e){this.hasDataSourceError=e,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}return e.lateLoadKey="DataSourceConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(u.p),o.Y36(n.qu),o.Y36(a.C),o.Y36(l.nY),o.Y36(o.zs3),o.Y36(p.mQy))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",errorComponent:"errorComponent",properties:"properties",providerId:"providerId"},outputs:{formReady:"formReady"},features:[o.TTD],decls:20,vars:28,consts:function(){let e,t,i;return e=$localize`:1b6bc6d5daaa6ec75d201690bb6f782f30bf98a01107354728956440783:Data Source`,t=$localize`:7f3bce5049b2c517378a6624460b84d2da9ce3327245698475792706694:Select Data Source`,i=$localize`:18c18c5d61f92ef5c3caa37df00fc514fef3d90c4806513497858020797:Data Sources`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],["caption",t,3,"control"],["placeholder",i,"formControlName","providerId",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"nui-widget-editor-accordion",0),o.ALo(1,"async"),o.ALo(2,"nuiWidgetEditorAccordionFormState"),o.TgZ(3,"div",1),o._UZ(4,"nui-icon",2),o.ALo(5,"async"),o.ALo(6,"nuiFormHeaderIconPipe"),o.TgZ(7,"div",3),o.TgZ(8,"span",4),o.SDv(9,5),o.qZA(),o.TgZ(10,"div",6),o._uU(11),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"div",7),o.TgZ(13,"nui-form-field",8),o.TgZ(14,"nui-select-v2",9),o.NdJ("valueSelected",function(e){return t.onDataSourceChange(e)}),o.ALo(15,"async"),o.YNc(16,b,2,3,"nui-select-v2-option",10),o.qZA(),o.qZA(),o.ynx(17,11,12),o.NdJ("output",function(e){return t.onErrorState(e.payload)}),o.YNc(19,C,0,0,"ng-template",13),o.NdJ("attached",function(t){return o.CHM(e),o.MAs(18).attached(t)}),o.BQk(),o.qZA(),o.qZA()}if(2&e){const e=o.MAs(18);let i,n,r;o.Q6J("formGroup",t.form)("state",o.lcZ(1,14,o.lcZ(2,16,t.form))),o.xp6(4),o.Q6J("icon",o.lcZ(5,18,o.xi3(6,20,t.form,"database"))),o.xp6(6),o.Q6J("title",null==(i=t.form.get("providerId"))?null:i.value),o.xp6(1),o.hij(" ",null==(n=t.form.get("providerId"))?null:n.value," "),o.xp6(2),o.Q6J("control",t.form.get("providerId")),o.xp6(1),o.Q6J("title",null==(r=t.form.get("providerId"))?null:r.value)("popupViewportMargin",o.lcZ(15,23,t.configuratorHeading.height$)),o.xp6(2),o.Q6J("ngForOf",t.dataSourceProviders),o.xp6(1),o.Q6J("componentId",t.errorComponent)("componentType",t.errorComponent)("outputs",o.DdM(25,x))("properties",o.VKq(26,w,t.dataSource)),o.xp6(2),o.Q6J("cdkPortalOutlet",e.portal)}},directives:[h.J,n.JL,n.sg,p.oJW,p.hgI,p.j_n,n.JJ,n.u,g.sg,m.$,f.Pl,p.rLF],pipes:[g.Ov,v.F,y.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})()},66297:function(e,t,i){"use strict";i.d(t,{K:function(){return p}});var o=i(33018),n=i(46782),r=i(79765),s=i(29569),a=i.n(s),l=i(38583),c=i(46806);function d(e,t){1&e&&(o.TgZ(0,"nui-message",2),o.TgZ(1,"b"),o.SDv(2,3),o.qZA(),o.qZA()),2&e&&o.Q6J("allowDismiss",!1)}function u(e,t){if(1&e&&(o.TgZ(0,"nui-message",4),o.TgZ(1,"b"),o.SDv(2,5),o.qZA(),o._uU(3),o.qZA()),2&e){const e=o.oxw();o.Q6J("allowDismiss",!1),o.xp6(3),o.hij(" ",e.dataSourceError.message||e.dataSourceError.type," ")}}let p=(()=>{class e{constructor(e){this.changeDetector=e,this.errorState=new o.vpe,this.onDestroy$=new r.xQ,this.dataSourceClear$=new r.xQ}ngOnChanges(e){e.dataSource&&this.onDataSourceChanged()}onDataSourceChanged(){var e,t,i;this.dataSourceClear$.next(),null===(t=null===(e=this.dataSource)||void 0===e?void 0:e.busy)||void 0===t||t.pipe((0,n.R)(this.dataSourceClear$)).subscribe(e=>{this.busy=e,this.changeDetector.markForCheck()}),null===(i=this.dataSource)||void 0===i||i.outputsSubject.pipe((0,n.R)(this.dataSourceClear$)).subscribe(e=>{this.data=a()(null==e?void 0:e.result)?e:null==e?void 0:e.result,this.dataSourceError=null==e?void 0:e.error,this.errorState.emit(!!this.dataSourceError),this.changeDetector.markForCheck()})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete(),this.dataSourceClear$.next(),this.dataSourceClear$.complete()}}return e.lateLoadKey="DataSourceErrorComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-data-source-error"]],inputs:{dataSource:"dataSource"},outputs:{errorState:"errorState"},features:[o.TTD],decls:3,vars:2,consts:function(){let e,t;return e=$localize`:7471accb59033b8bee2f7d6907d8deefcfe7d5de8643306703234832815:Select a data source`,t=$localize`:c399afe21627dcfed1a9865c0e084fac997896c24016661485141937765:Something went wrong with the data source: `,[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],e,["type","critical",1,"mt-4","d-block",3,"allowDismiss"],t]},template:function(e,t){1&e&&(o.TgZ(0,"div"),o.YNc(1,d,3,1,"nui-message",0),o.YNc(2,u,4,2,"nui-message",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",!t.dataSource),o.xp6(1),o.Q6J("ngIf",t.dataSourceError))},directives:[l.O5,c.qqZ],encapsulation:2,changeDetection:0}),e})()},35484:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var o=i(66297),n=i(33018),r=i(38583),s=i(46806);function a(e,t){1&e&&(n.TgZ(0,"nui-message",2),n.TgZ(1,"b"),n.SDv(2,3),n.qZA(),n.qZA()),2&e&&n.Q6J("allowDismiss",!1)}function l(e,t){1&e&&(n.TgZ(0,"nui-message",2),n.TgZ(1,"b"),n.SDv(2,4),n.qZA(),n.qZA()),2&e&&n.Q6J("allowDismiss",!1)}function c(e,t){if(1&e&&(n.TgZ(0,"nui-message",5),n.TgZ(1,"b"),n.SDv(2,6),n.qZA(),n._uU(3),n.qZA()),2&e){const e=n.oxw();n.Q6J("allowDismiss",!1),n.xp6(3),n.hij(" ",e.dataSourceError.message||e.dataSourceError.type," ")}}let d=(()=>{class e extends o.K{constructor(e){super(e),this.changeDetector=e}ngOnDestroy(){super.ngOnDestroy()}}return e.lateLoadKey="TableDataSourceErrorComponent",e.\u0275fac=function(t){return new(t||e)(n.Y36(n.sBO))},e.\u0275cmp=n.Xpm({type:e,selectors:[["nui-table-data-source-error"]],features:[n.qOj],decls:4,vars:3,consts:function(){let e,t,i;return e=$localize`:f4720e7c5bf93bfef522f919823f31793a4a09fb3836782658203534481:Data source needs to be configured`,t=$localize`:7471accb59033b8bee2f7d6907d8deefcfe7d5de8643306703234832815:Select a data source`,i=$localize`:c399afe21627dcfed1a9865c0e084fac997896c24016661485141937765:Something went wrong with the data source: `,[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],e,t,["type","critical",1,"mt-4","d-block",3,"allowDismiss"],i]},template:function(e,t){1&e&&(n.TgZ(0,"div"),n.YNc(1,a,3,1,"nui-message",0),n.YNc(2,l,3,1,"nui-message",0),n.YNc(3,c,4,2,"nui-message",1),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.dataSource&&!(null!=t.data&&t.data.dataFields.length)&&!t.dataSourceError&&!t.busy),n.xp6(1),n.Q6J("ngIf",!t.dataSource),n.xp6(1),n.Q6J("ngIf",t.dataSourceError))},directives:[r.O5,s.qqZ],encapsulation:2,changeDetection:0}),e})()},95228:function(e,t,i){"use strict";i.d(t,{F:function(){return p}});var o=i(33018),n=i(90665),r=i(98640),s=i(79765),a=i(46782),l=i(31500),c=i(46806),d=i(38583);function u(e,t){if(1&e&&(o.TgZ(0,"nui-select-v2-option",7),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e.label," ")}}let p=(()=>{class e{constructor(e,t){this.fb=e,this.cd=t,this.possibleUnits=[l.j1.Second,l.j1.Minute,l.j1.Hour],this.unitItems=[],this.displayedUnitItems=[],this.currentUnit=null,this.valueChangeFix=r.Z,this.destroy$$=new s.xQ}ngOnInit(){this.generateUnitItems(),this.filterUnitItems(),this.createForm()}ngOnDestroy(){this.destroy$$.next(),this.destroy$$.complete()}getNumberMin(){if(!this.unitControl.value||null==this.minSeconds)return;const e=(0,l.if)(l.j1.Second,this.unitControl.value.id);return Math.ceil(this.minSeconds*e)}getNumberMax(){if(!this.unitControl.value||null==this.maxSeconds)return;const e=(0,l.if)(l.j1.Second,this.unitControl.value.id);return Math.floor(this.maxSeconds*e)}writeValue(e){if(isFinite(e)&&this.isRangeValid()&&this.unitControl.value){const t=(0,l.if)(l.j1.Second,this.unitControl.value.id);this.numberControl.setValue(e*t)}else this.numberControl.setValue(null);this.cd.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){}setDisabledState(e){e?(this.numberControl.disable({emitEvent:!1}),this.unitControl.disable({emitEvent:!1})):(this.numberControl.enable({emitEvent:!1}),this.unitControl.enable({emitEvent:!1})),this.cd.markForCheck()}resetUnits(){this.unitControl.setValue(this.displayedUnitItems[0])}generateUnitItems(){this.possibleUnits.forEach((e,t)=>{this.unitItems[t]={id:e,label:l.jq[e]}})}filterUnitItems(){this.displayedUnitItems=this.unitItems.filter(e=>{let t=!1;if(null!=this.maxSeconds){const i=(0,l.if)(l.j1.Second,e.id);t=Math.floor(this.maxSeconds*i)<=0}return!t})}createForm(){this.form=this.fb.group({number:[1,[n.kI.required]],unit:this.displayedUnitItems[0]}),this.numberControl=this.form.get("number"),this.unitControl=this.form.get("unit"),this.unitControl.value&&(this.currentUnit=this.unitControl.value.id),this.form.valueChanges.pipe((0,a.R)(this.destroy$$)).subscribe(()=>{this.updateError(),this.emitValueChange()})}updateError(){this.isNumberValid()?this.numberControl.setErrors(null):this.numberControl.setErrors({invalidNumber:!0})}emitValueChange(){const e=this.numberControl.value,t=this.unitControl.value;if(null==e||null==t)return void(this.onChange&&this.onChange(null));const i=(0,l.if)(t.id,l.j1.Second);this.onChange&&this.onChange(e*i)}isRangeValid(){return this.minSeconds<=this.maxSeconds||null==this.maxSeconds}isNumberValid(){const e=this.numberControl.value;return!(e<this.minSeconds||e%1!=0)&&(!(e*(0,l.if)(this.unitControl.value.id,l.j1.Second)>this.maxSeconds)&&this.isRangeValid())}getNumberValidationMessage(){const e={min:this.getNumberMin(),max:this.getNumberMax(),whole:!0};return this.getLocalizedNumberValidationMessage(e)}getLocalizedNumberValidationMessage(e){const{min:t,max:i,whole:o}=e;let n;return n=o?$localize`a whole number`:$localize`a number`,null!=t&&null!=i?t===i?$localize`Must be ${n} equal to ${t}`:$localize`Must be ${n} between ${t} and ${i}`:null==t&&null!=i?$localize`Must be ${n} not larger than ${i}`:null!=t&&null==i?$localize`Must be ${n} not smaller than ${t}`:$localize`Must be ${n}`}validate(){var e;return(null===(e=this.form.get("number"))||void 0===e?void 0:e.errors)||null}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(n.qu),o.Y36(o.sBO))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-refresh-rate-configurator"]],inputs:{minSeconds:"minSeconds",maxSeconds:"maxSeconds"},features:[o._Bn([{provide:n.JU,useExisting:(0,o.Gpc)(()=>e),multi:!0},{provide:n.Cf,useExisting:(0,o.Gpc)(()=>e),multi:!0}])],decls:8,vars:6,consts:[[1,"d-flex","flex-column",3,"formGroup"],[1,"d-flex","flex-row"],["formControlName","number","customBoxWidth","90px",3,"minValue","maxValue","valueChange"],["formControlName","unit",1,"ml-3"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["for","invalidNumber"],[3,"value"]],template:function(e,t){1&e&&(o.TgZ(0,"form",0),o.TgZ(1,"div",1),o.TgZ(2,"nui-textbox-number",2),o.NdJ("valueChange",function(){return t.valueChangeFix()}),o.qZA(),o.TgZ(3,"nui-select-v2",3),o.YNc(4,u,2,2,"nui-select-v2-option",4),o.qZA(),o.qZA(),o.TgZ(5,"nui-form-field",5),o.TgZ(6,"nui-validation-message",6),o._uU(7),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.Q6J("formGroup",t.form),o.xp6(2),o.Q6J("minValue",t.minSeconds)("maxValue",t.maxSeconds),o.xp6(2),o.Q6J("ngForOf",t.displayedUnitItems),o.xp6(1),o.Q6J("control",t.form.get("number")),o.xp6(2),o.hij(" ",t.getNumberValidationMessage()," "))},directives:[n._Y,n.JL,n.sg,c.I5I,n.JJ,n.u,c.j_n,d.sg,c.hgI,c.CfE,c.rLF],encapsulation:2,changeDetection:0}),e})()},31500:function(e,t,i){"use strict";i.d(t,{j1:function(){return o},jq:function(){return r},FF:function(){return s},if:function(){return a}});var o=(()=>{return(e=o||(o={})).Second="second",e.Minute="minute",e.Hour="hour",o;var e})();const n={[o.Second]:1e3,[o.Minute]:6e4,[o.Hour]:36e5},r={[o.Hour]:$localize`:hours unit (long):hours`,[o.Minute]:$localize`:minutes unit (long):minutes`,[o.Second]:$localize`:seconds unit (long):seconds`},s={[o.Hour]:$localize`:hours unit (short):h`,[o.Minute]:$localize`:minutes unit (short):min`,[o.Second]:$localize`:seconds unit (short):sec`};function a(e,t){return n[e]/n[t]}},98348:function(e,t,i){"use strict";i.d(t,{O:function(){return b}});var o=i(33018),n=i(90665),r=i(79765),s=i(90739),a=i(46782),l=i(45435),c=i(68307),d=i(95228),u=i(31500),p=i(46806),h=i(43397),g=i(4433),m=i(38583),f=i(52238),v=i(76e3);function y(e,t){if(1&e&&(o.TgZ(0,"div",15),o.SDv(1,16),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.pQV(e.getDurationLabel(e.refresherSettings.refreshRateSeconds)),o.QtT(1)}}let b=(()=>{class e{constructor(e,t,i,n,s){this.changeDetector=e,this.formBuilder=t,this.logger=i,this.refresherSettings=n,this.cd=s,this.minSeconds=1,this.maxSeconds=86400,this.overrideDefaultSettingsCaption=$localize`Custom refresh rate`,this.overrideDefaultSettings=!0,this.formReady=new o.vpe,this.destroyed$=new r.xQ,this.resetInterval=()=>{var e;this.refreshRateComp.resetUnits(),null===(e=this.form.get("interval"))||void 0===e||e.setValue(this.interval||this.minSeconds)}}ngOnInit(){var e;this.form=this.formBuilder.group({enabled:[!0,[n.kI.required]],overrideDefaultSettings:[this.overrideDefaultSettings,[n.kI.required]],interval:[null!==(e=this.interval)&&void 0!==e?e:0,[n.kI.required]]}),this.form.statusChanges.pipe((0,a.R)(this.destroyed$)).subscribe(()=>{this.form.markAllAsTouched(),this.cd.detectChanges()}),(0,s.aj)([this.form.controls.enabled.valueChanges,this.form.controls.overrideDefaultSettings.valueChanges]).pipe((0,l.h)(e=>e.some(e=>!e)),(0,c.b)(this.resetInterval),(0,a.R)(this.destroyed$)).subscribe(),this.formReady.emit(this.form)}ngOnChanges(e){var t,i,o,n,r,s;e.enabled&&(null===(i=null===(t=this.form)||void 0===t?void 0:t.get("enabled"))||void 0===i||i.patchValue(this.enabled)),e.interval&&(null===(n=null===(o=this.form)||void 0===o?void 0:o.get("interval"))||void 0===n||n.patchValue(this.interval)),e.overrideDefaultSettings&&(null===(s=null===(r=this.form)||void 0===r?void 0:r.get("overrideDefaultSettings"))||void 0===s||s.patchValue(this.overrideDefaultSettings))}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getHeaderSubtitle(){var e,t,i;let o="";return(null===(e=this.form.get("enabled"))||void 0===e?void 0:e.value)?(o+=$localize`Enabled`,o+=", ",(null===(t=this.form.get("overrideDefaultSettings"))||void 0===t?void 0:t.value)?o+=this.getDurationLabel(null===(i=this.form.get("interval"))||void 0===i?void 0:i.value):o+=$localize`Use default value`+" ("+this.getDurationLabel(this.refresherSettings.refreshRateSeconds)+")"):o+=$localize`Disabled`,o}getDurationLabel(e){let t=e,i="";const o=Math.floor(t/3600);t%=3600;const n=Math.floor(t/60),r=t%60;return o>0&&(i+=o+" "+u.FF[u.j1.Hour]+" "),n>0&&(i+=n+" "+u.FF[u.j1.Minute]+" "),r>0&&(i+=r+" "+u.FF[u.j1.Second]+" "),i=i.trim(),""===i?"0 "+u.FF[u.j1.Second]:i}}return e.lateLoadKey="RefresherConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(n.qu),o.Y36(p.mQy),o.Y36(h.g),o.Y36(o.sBO))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-refresher-configuration"]],viewQuery:function(e,t){if(1&e&&o.Gf(d.F,5),2&e){let e;o.iGM(e=o.CRH())&&(t.refreshRateComp=e.first)}},inputs:{enabled:"enabled",interval:"interval",minSeconds:"minSeconds",maxSeconds:"maxSeconds",overrideDefaultSettingsCaption:"overrideDefaultSettingsCaption",overrideDefaultSettings:"overrideDefaultSettings"},outputs:{formReady:"formReady"},features:[o.TTD],decls:26,vars:25,consts:function(){let e,t,i;return e=$localize`:c8d1785038d461ec66b5799db21864182b35900a1102717806459547726:Refresh`,t=$localize`:913ac9d5354818a43028659e12bb79cc3a8d19e32148212086281974142:Refresh widget periodically`,i=$localize`:d4a0303469acbc423b1d78a0b58542656f39cdfe2636978669188691313: By default, the widget will refresh every ${"\ufffd0\ufffd"}:INTERPOLATION:. `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"d-flex","flex-column","nui-refresher-configuration__accordion-content"],[3,"control"],["formControlName","enabled"],t,[1,"mt-4"],["formControlName","overrideDefaultSettings"],["class","nui-help-hint",4,"ngIf"],["formControlName","interval",3,"minSeconds","maxSeconds"],[1,"nui-help-hint"],i]},template:function(e,t){if(1&e&&(o.TgZ(0,"nui-widget-editor-accordion",0),o.ALo(1,"async"),o.ALo(2,"nuiWidgetEditorAccordionFormState"),o.TgZ(3,"div",1),o._UZ(4,"nui-icon",2),o.ALo(5,"async"),o.ALo(6,"nuiFormHeaderIconPipe"),o.TgZ(7,"div",3),o.TgZ(8,"span",4),o.SDv(9,5),o.qZA(),o.TgZ(10,"div",6),o._uU(11),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"div",7),o.TgZ(13,"div"),o.TgZ(14,"nui-form-field",8),o.TgZ(15,"nui-switch",9),o.SDv(16,10),o.qZA(),o.qZA(),o.qZA(),o.TgZ(17,"div"),o.TgZ(18,"div",11),o.TgZ(19,"nui-form-field",8),o.TgZ(20,"nui-switch",12),o._uU(21),o.YNc(22,y,2,1,"div",13),o.qZA(),o.qZA(),o.qZA(),o.TgZ(23,"div",11),o.TgZ(24,"nui-form-field",8),o._UZ(25,"nui-refresh-rate-configurator",14),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){let e,i,n;o.Q6J("formGroup",t.form)("state",o.lcZ(1,16,o.lcZ(2,18,t.form))),o.xp6(4),o.Q6J("icon",o.lcZ(5,20,o.xi3(6,22,t.form,"reset"))),o.xp6(6),o.Q6J("title",t.getHeaderSubtitle()),o.xp6(1),o.Oqu(t.getHeaderSubtitle()),o.xp6(3),o.Q6J("control",t.form.get("enabled")),o.xp6(3),o.ekj("hidden",!(null!=(e=t.form.get("enabled"))&&e.value)),o.xp6(2),o.Q6J("control",t.form.get("overrideDefaultSettings")),o.xp6(2),o.hij("",t.overrideDefaultSettingsCaption," "),o.xp6(1),o.Q6J("ngIf",!(null!=(i=t.form.get("overrideDefaultSettings"))&&i.value)),o.xp6(1),o.ekj("hidden",!(null!=(n=t.form.get("overrideDefaultSettings"))&&n.value)),o.xp6(1),o.Q6J("control",t.form.get("interval")),o.xp6(1),o.Q6J("minSeconds",t.minSeconds)("maxSeconds",t.maxSeconds)}},directives:[g.J,n.JL,n.sg,p.oJW,p.hgI,p.qUD,n.JJ,n.u,m.O5,d.F],pipes:[m.Ov,f.F,v.d],styles:[".nui-refresher-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),e})()},41450:function(e,t,i){"use strict";i.d(t,{U:function(){return d}});var o=i(33018),n=i(90665),r=i(46806),s=i(4433),a=i(38583),l=i(52238),c=i(76e3);let d=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.formBuilder=t,this.logger=i,this.formReady=new o.vpe,this.form=this.formBuilder.group({title:["",n.kI.required],subtitle:[""],url:[""],description:[""],collapsible:[!1],collapsed:[!0]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(e){var t,i,o,n,r;e.title&&(null===(t=this.form.get("title"))||void 0===t||t.setValue(this.title)),e.url&&(null===(i=this.form.get("url"))||void 0===i||i.setValue(this.url)),e.subtitle&&(null===(o=this.form.get("subtitle"))||void 0===o||o.setValue(this.subtitle)),e.description&&(null===(n=this.form.get("description"))||void 0===n||n.setValue(this.description)),e.collapsible&&(null===(r=this.form.get("collapsible"))||void 0===r||r.setValue(this.collapsible))}getSecondaryText(){return`${this.form.controls.title.value||$localize`No title`}, ${this.form.controls.subtitle.value||$localize`no subtitle`}`}}return e.lateLoadKey="TitleAndDescriptionConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(n.qu),o.Y36(r.mQy))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-title-and-description-configuration"]],inputs:{title:"title",url:"url",subtitle:"subtitle",description:"description",collapsible:"collapsible"},outputs:{formReady:"formReady"},features:[o.TTD],decls:31,vars:20,consts:function(){let e,t,i,o,n,r,s,a,l,c,d,u,p;return e=$localize`:c1f3e3c0c4876967ade530f67b0696f7c1f5aa766274813085792990828:Title and Description`,t=$localize`:f75e29ac7734f16cad4d02017646720be30303671720994052291036243:Widget title`,i=$localize`:eb94f6289d261b9d7b1288cf92c4099023695dd92301126677959299103:Set widget title`,o=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,n=$localize`:d2b3deab155463fe2b5ac59000b6e3aa7771afc82073684406211180788:Widget subtitle`,r=$localize`:b6d324cd44176b6e2bfe2ff16bbc7e7ee1c412fc8934433387734849172:Do not show a subtitle`,s=$localize`:cb04bfea86b30d40d2d30630c957bf3fd2e50b839207103926988831681:Widget link URL`,a=$localize`:02773997819c014e0f299deb7cb8e054003850e13668070782949850100:Do not link to another page`,l=$localize`:ab83c23bd6135460422e95fca32b4ec38ddff9e63861388441030158101:Widget description`,c=$localize`:2f50115d11fc3e29acafe6f99228c2304cffb7223301579533722588311:This won't be shown on the widget, but can be helpful for
                          other users who want to re-use this widget on their own dashboards`,d=$localize`:37b56526e384f843a15323dc730b484a97b4c9683830487495946043372:No description`,u=$localize`:9de5a44cd2d54fe77e5c12131ab7a21792ce91df5450302501374652801:Hide widget header`,p=$localize`:6570353e3fb49053e2327cb92f257eab8ccdd2745369485165489692848:Collapsible`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"title-and-description-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["id","kpi-widget-title","formControlName","title","placeholder",i],["for","required"],o,["caption",n,3,"control"],["id","kpi-widget-subtitle","formControlName","subtitle","placeholder",r],["caption",s,3,"control"],["id","kpi-widget-url","formControlName","url","placeholder",a],["caption",l,"hint",c,3,"control"],["formControlName","description","placeholder",d],["caption",u,3,"showOptionalText","control"],["formControlName","collapsible"],p]},template:function(e,t){1&e&&(o.TgZ(0,"nui-widget-editor-accordion",0),o.ALo(1,"async"),o.ALo(2,"nuiWidgetEditorAccordionFormState"),o.TgZ(3,"div",1),o._UZ(4,"nui-icon",2),o.ALo(5,"async"),o.ALo(6,"nuiFormHeaderIconPipe"),o.TgZ(7,"div",3),o.TgZ(8,"span",4),o.SDv(9,5),o.qZA(),o.TgZ(10,"div",6),o._uU(11),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"div",7),o.TgZ(13,"div",8),o.TgZ(14,"nui-form-field",9),o._UZ(15,"nui-textbox",10),o.TgZ(16,"nui-validation-message",11),o.SDv(17,12),o.qZA(),o.qZA(),o.qZA(),o.TgZ(18,"div",8),o.TgZ(19,"nui-form-field",13),o._UZ(20,"nui-textbox",14),o.qZA(),o.qZA(),o.TgZ(21,"div",8),o.TgZ(22,"nui-form-field",15),o._UZ(23,"nui-textbox",16),o.qZA(),o.qZA(),o.TgZ(24,"div",8),o.TgZ(25,"nui-form-field",17),o._UZ(26,"nui-textbox",18),o.qZA(),o.qZA(),o.TgZ(27,"div"),o.TgZ(28,"nui-form-field",19),o.TgZ(29,"nui-checkbox",20),o.SDv(30,21),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.Q6J("formGroup",t.form)("state",o.lcZ(1,11,o.lcZ(2,13,t.form))),o.xp6(4),o.Q6J("icon",o.lcZ(5,15,o.xi3(6,17,t.form,"widget_list"))),o.xp6(6),o.Q6J("title",t.getSecondaryText()),o.xp6(1),o.Oqu(t.getSecondaryText()),o.xp6(3),o.Q6J("control",t.form.get("title")),o.xp6(5),o.Q6J("control",t.form.get("subtitle")),o.xp6(3),o.Q6J("control",t.form.get("url")),o.xp6(3),o.Q6J("control",t.form.get("description")),o.xp6(3),o.Q6J("showOptionalText",!1)("control",t.form.get("collapsible")))},directives:[s.J,n.JL,n.sg,r.oJW,r.hgI,r.XHW,n.JJ,n.u,r.CfE,r.bK4],pipes:[a.Ov,l.F,c.d],styles:[".title-and-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})()},50191:function(e,t,i){"use strict";i.d(t,{P:function(){return l}});var o=i(33018),n=i(90665),r=i(79765),s=i(46782),a=i(24141);let l=(()=>{class e{constructor(e,t){this.formBuilder=e,this.changeDetector=t,this.onDestroy$=new r.xQ,this.isWidthMessageDisplayed=!1,this.form=this.formBuilder.group({description:this.formBuilder.control({}),presentation:this.formBuilder.control({})}),this.form.valueChanges.pipe((0,s.R)(this.onDestroy$)).subscribe(e=>{var t;const i=Object.assign(Object.assign({id:null===(t=this.input)||void 0===t?void 0:t.id},e.description),{formatter:e.presentation});this.changeFn(i)})}ngOnInit(){(0,a.t)(this.formControl,()=>{this.form.markAllAsTouched()})}registerOnChange(e){this.changeFn=e}registerOnTouched(e){}setDisabledState(e){}validate(e){return this.form.valid?null:{error:"error"}}writeValue(e){this.input=e,this.form.setValue({presentation:(null==e?void 0:e.formatter)||{},description:e},{emitEvent:!1}),this.changeDetector.markForCheck()}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return e.lateLoadKey="TableColumnConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(n.qu),o.Y36(o.sBO))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-table-column-configuration"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[o._Bn([{provide:n.JU,useExisting:(0,o.Gpc)(()=>e),multi:!0},{provide:n.Cf,useExisting:(0,o.Gpc)(()=>e),multi:!0}])],decls:3,vars:4,consts:[[3,"formGroup"],[3,"formControl","isWidthMessageDisplayed"],[3,"formControl"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"nui-description-configuration-v2",1),o._UZ(2,"nui-presentation-configuration-v2",2),o.qZA()),2&e&&(o.Q6J("formGroup",t.form),o.xp6(1),o.Q6J("formControl",t.form.controls.description)("isWidthMessageDisplayed",t.isWidthMessageDisplayed),o.xp6(1),o.Q6J("formControl",t.form.controls.presentation))},encapsulation:2}),e})()},29014:function(e,t,i){"use strict";i.d(t,{O:function(){return k}});var o=i(33018),n=i(90665),r=i(46806),s=i(29569),a=i.n(s),l=i(23348),c=i.n(l),d=i(79765),u=i(46782),p=i(92954),h=i(65470),g=i(72459),m=i(7350),f=i(34357),v=i(38583),y=i(83461),b=i(6432),C=i(50191),x=i(64874),w=i(48248);function T(e,t){if(1&e&&o._UZ(0,"nui-drop-area",16),2&e){const e=o.oxw(3);o.Udp("height",e.draggedItemHeight,"px")}}function S(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"div",17),o._UZ(2,"nui-icon",18),o.qZA(),o.BQk(),o.TgZ(3,"span",19),o.ALo(4,"nuiWidgetConfiguratorSectionHeader"),o._uU(5),o.ALo(6,"nuiWidgetConfiguratorSectionHeader"),o.qZA()),2&e){const e=o.oxw(),t=e.$implicit,i=e.index,n=o.oxw(2);o.xp6(3),o.Q6J("title",o.Dn7(4,2,null==t?null:t.value.label,i,n.columnLabel)),o.xp6(2),o.hij(" ",o.Dn7(6,6,null==t?null:t.value.label,i,n.columnLabel)," ")}}function I(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",20),o.TgZ(1,"button",21),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().index;return o.oxw(2).removeItem(t)}),o.qZA(),o.qZA()}if(2&e){const e=o.oxw().index;o.xp6(1),o.MGl("id","table-widget-remove-column-btn-",e,"")}}function _(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",10),o.NdJ("cdkDragStarted",function(t){return o.CHM(e),o.oxw(2).cdkDragStarted(t)}),o.YNc(1,T,1,2,"nui-drop-area",11),o.YNc(2,S,7,10,"ng-template",null,12,o.W1O),o.YNc(4,I,2,1,"ng-template",null,13,o.W1O),o.TgZ(6,"nui-widget-configurator-section",14),o._UZ(7,"nui-table-column-configuration",15),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit,i=o.MAs(3),n=o.MAs(5),r=o.oxw(2);o.xp6(6),o.Q6J("headerTextTemplate",i)("headerButtonsTemplate",n),o.xp6(1),o.Q6J("formControl",e)("isWidthMessageDisplayed",r.isWidthMessageDisplayed)}}function A(e,t){1&e&&(o.TgZ(0,"div",22),o.TgZ(1,"nui-message",23),o.TgZ(2,"b"),o.SDv(3,24),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.Q6J("allowDismiss",!1))}function z(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",2),o.NdJ("cdkDropListDropped",function(t){return o.CHM(e),o.oxw().drop(t)}),o.TgZ(1,"div",3),o.YNc(2,_,8,4,"div",4),o.YNc(3,A,4,1,"div",5),o.ALo(4,"async"),o.TgZ(5,"button",6),o.NdJ("click",function(){return o.CHM(e),o.oxw().addColumn()}),o.SDv(6,7),o.qZA(),o.TgZ(7,"button",8),o.NdJ("click",function(){return o.CHM(e),o.oxw().onResetColumns()}),o.SDv(8,9),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("formGroup",e.form),o.xp6(2),o.Q6J("ngForOf",e.columnForms)("ngForTrackBy",e.trackBy),o.xp6(1),o.Q6J("ngIf",o.lcZ(4,4,e.emptyColumns$)&&e.form.touched)}}let k=(()=>{class e{constructor(e,t,i,n,r,s,l){this.formBuilder=e,this.changeDetector=t,this.dialogService=i,this.pizzagnaService=n,this.dataSourceManager=r,this.tableFormatterRegistry=s,this.eventBus=l,this.columns=[],this.formReady=new o.vpe,this.dataSourceFields=[],this.isWidthMessageDisplayed=!1,this.columnLabel=$localize`Column`,this.onDestroy$=new d.xQ,this.form=this.formBuilder.group({columns:this.formBuilder.array([])}),this.form.controls.columns.valueChanges.pipe((0,u.R)(this.onDestroy$)).subscribe(e=>{this.isWidthMessageDisplayed=this.getWidthMessageDisplayed(e),this.changeDetector.markForCheck()}),this.eventBus.subscribeUntil(m.gg,this.onDestroy$,e=>{!e.payload||(this.dataSource=e.payload,this.changeDetector.markForCheck())}),this.eventBus.subscribeUntil(m.PF,this.onDestroy$,e=>{var t,i,o,n;if(null===(t=e.payload)||void 0===t?void 0:t.error)return;const{dataFields:r}=a()(e.payload.result)?e.payload:e.payload.result||{};this.dataSourceFields=null!=r?r:[];const s=null===(n=null===(o=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===o?void 0:o.getFeatureConfig(h.ni.DisableTableColumnGeneration))||void 0===n?void 0:n.enabled,l=this.mergeColumns(this.dataSourceFields,this.getColumns());(null==l?void 0:l.length)||s?this.updateColumns(l):s||this.resetColumns(!1),this.changeDetector.markForCheck()}),r.error$.pipe((0,u.R)(this.onDestroy$)).subscribe(e=>{this.dataSourceError=e,this.changeDetector.markForCheck()})}get columnForms(){return this.form.controls.columns.controls}ngOnInit(){var e,t,i;if(this.formReady.emit(this.form),this.template&&!(null===(e=this.tableFormatterRegistry.getItems())||void 0===e?void 0:e.length)){const e=null===(i=null===(t=this.template)||void 0===t?void 0:t[1].properties)||void 0===i?void 0:i.formatters;this.tableFormatterRegistry.addItems(e)}}ngOnChanges(e){e.columns&&this.updateColumns(this.columns,!1)}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}getColumns(){return this.form.controls.columns.value}updateColumns(e,t=!0){const i=this.form.controls.columns;i.controls=e.map(e=>{const t=new n.NI(e);t.setParent(i);const o=i.controls.find(t=>t.value.id===e.id);return o&&(t.markAsTouched=o.markAsTouched),t}),i.updateValueAndValidity({emitEvent:t}),this.changeDetector.markForCheck()}trackBy(e,t){var i;return null===(i=null==t?void 0:t.value)||void 0===i?void 0:i.id}addColumn(){this.form.controls.columns.push(new n.NI({id:(0,r.VjN)("column"),label:"",isActive:!0,formatter:{}}))}onResetColumns(){var e;this.resetColumns(!!(null===(e=this.getColumns())||void 0===e?void 0:e.length))}resetColumns(e){const t=()=>{var e;const t=null===(e=this.dataSourceFields)||void 0===e?void 0:e.map(e=>({id:(0,r.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:e.id}}},isActive:!0,label:e.label,width:void 0,sortable:e.sortable}));this.updateColumns(t)};e?this.dialogService.confirm({title:$localize`Are you sure?`,message:$localize`Resetting the columns will revert them to their default configurations. Do you wish to proceed?`,confirmText:$localize`Reset Columns`}).result.then(e=>{e&&t()},()=>{}):t()}mergeColumns(e,t){const i=e.map(e=>e.id);return t.filter(e=>{var t,o,n,r;return!!(null===(o=null===(t=e.formatter)||void 0===t?void 0:t.properties)||void 0===o?void 0:o.dataFieldIds)&&c()(null===(r=null===(n=e.formatter)||void 0===n?void 0:n.properties)||void 0===r?void 0:r.dataFieldIds).some(e=>i.includes(e))})}getWidthMessageDisplayed(e){let t=0;for(const i of e)if("number"!=typeof i.width&&t++,t>1)return!1;return!0}moveItem(e,t){const i=this.form.controls.columns,o=i.at(e);i.removeAt(e),i.insert(t,o),this.changeDetector.detectChanges()}removeItem(e){this.form.controls.columns.removeAt(e),this.changeDetector.detectChanges()}drop(e){this.moveItem(e.previousIndex,e.currentIndex)}cdkDragStarted(e){this.draggedItemHeight=e.source.element.nativeElement.offsetHeight}}return e.lateLoadKey="TableColumnsConfigurationV2Component",e.\u0275fac=function(t){return new(t||e)(o.Y36(n.qu),o.Y36(o.sBO),o.Y36(r.xAy),o.Y36(p.p),o.Y36(g.q),o.Y36(f.C),o.Y36(h.nY))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",componentId:"componentId",template:"template"},outputs:{formReady:"formReady"},features:[o.TTD],decls:2,vars:1,consts:function(){let e,t,i;return e=$localize`:cbd02e5e4d0d50f0117496aaa79dc6304fbfd3961222079118033004998:Add new column `,t=$localize`:455f2c8ce869f6093d63c54a5f01683788a84f9d2733625511847836093:Reset columns `,i=$localize`:de46acf5ee4d137a30dbc57e48aef06379e6e5008256146955477966251:At least one column must be added.`,[[1,"nui-table-columns-configuration"],["cdkDropList","",3,"formGroup","cdkDropListDropped",4,"ngIf"],["cdkDropList","",3,"formGroup","cdkDropListDropped"],["formArrayName","columns"],["cdkDrag","","class","nui-table-columns-configuration__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],e,["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],t,["cdkDrag","",1,"nui-table-columns-configuration__node-item",3,"cdkDragStarted"],["class","nui-table-columns-configuration__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],[1,"no-margin",3,"headerTextTemplate","headerButtonsTemplate"],[3,"formControl","isWidthMessageDisplayed"],[1,"nui-table-columns-configuration__drop-area"],["cdkDragHandle","",1,"nui-table-columns-configuration__drag-handler"],["icon","drag"],[1,"nui-table-columns-configuration__header-text",3,"title"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],i]},template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,z,9,6,"div",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",!t.dataSourceError&&t.dataSourceFields.length))},directives:[v.O5,y.Wj,n.JL,n.sg,n.CE,v.sg,r.r0F,y.Zt,y.Hk,b.j,C.P,n.JJ,n.oH,x.O,y.Bh,r.oJW,r.qqZ],pipes:[v.Ov,w.l],styles:[".nui-table-columns-configuration__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-table-columns-configuration__drag-handler{cursor:move;display:flex}.nui-table-columns-configuration__node-item{background-color:#fff;background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-table-columns-configuration__node-item .widget-configurator-section{margin:0}.nui-table-columns-configuration__drop-area{margin:15px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px rgba(17,17,17,.3);box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),e})()},53294:function(e,t,i){"use strict";i.d(t,{U:function(){return m}});var o=i(33018),n=i(58102),r=i.n(n),s=i(79765),a=i(46782),l=i(90665),c=i(35720),d=i(4433),u=i(46806),p=i(38583);function h(e,t){if(1&e&&(o.TgZ(0,"nui-select-v2-option",18),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.Q6J("value",e.id),o.xp6(1),o.hij(" ",e.label," ")}}function g(e,t){1&e&&(o.TgZ(0,"nui-message",19),o.tHW(1,20),o._UZ(2,"b"),o.N_p(),o.qZA()),2&e&&o.Q6J("allowDismiss",!1)}let m=(()=>{class e{constructor(e,t,i){this.formBuilder=e,this.configuratorHeading=t,this.changeDetector=i,this.columns=[],this.formReady=new o.vpe,this.sortableColumns=[],this.onDestroy$=new s.xQ}ngOnInit(){this.form=this.formBuilder.group({sorterConfiguration:this.formBuilder.group({sortBy:r()(this.sorterConfiguration,"sortBy",""),descendantSorting:r()(this.sorterConfiguration,"descendantSorting",!1)})}),this.form.valueChanges.pipe((0,a.R)(this.onDestroy$)).subscribe(e=>{this.setAccordionSubtitleValues(e)}),this.formReady.emit(this.form)}ngOnChanges(e){var t,i,o,n;const r=null===(t=this.form.get("sorterConfiguration"))||void 0===t?void 0:t.get("sortBy"),s=null===(i=this.form.get("sorterConfiguration"))||void 0===i?void 0:i.get("descendantSorting");if(e.sorterConfiguration){const e=this.sortableColumns.find(e=>{var t;return e.id===(null===(t=this.sorterConfiguration)||void 0===t?void 0:t.sortBy)});null==r||r.setValue(null==e?void 0:e.id,{emitEvent:!1}),null==s||s.setValue(null===(o=this.sorterConfiguration)||void 0===o?void 0:o.descendantSorting,{emitEvent:!1})}if(e.columns){this.sortableColumns=this.columns.filter(e=>{var t;return!!e.formatter&&(null===(t=e.sortable)||void 0===t||t)});const e=this.sortableColumns.find(e=>{var t;return e.id===(null===(t=this.sorterConfiguration)||void 0===t?void 0:t.sortBy)});null==r||r.setValue(null==e?void 0:e.id,{emitEvent:!1}),null==s||s.setValue(null===(n=this.sorterConfiguration)||void 0===n?void 0:n.descendantSorting,{emitEvent:!1}),0===this.sortableColumns.length?(null==r||r.disable(),null==s||s.disable()):(null==r||r.enable(),null==s||s.enable())}this.changeDetector.detectChanges()}setAccordionSubtitleValues(e){var t,i;if(e.sorterConfiguration){const o=null===(t=this.columns)||void 0===t?void 0:t.find(t=>t.id===e.sorterConfiguration.sortBy);if(!o)return this.selectedSortByValue=$localize`No sorting`,this.selectedSortOrderValue="",void(null===(i=this.form.get("sorterConfiguration"))||void 0===i||i.patchValue({sortBy:"",descendantSorting:""},{emitEvent:!1}));const n=e.sorterConfiguration.descendantSorting?$localize`Descending`:$localize`Ascending`;this.selectedSortByValue=o.label,this.selectedSortOrderValue=", "+n,this.changeDetector.detectChanges()}}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return e.lateLoadKey="TableFiltersEditorComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(l.qu),o.Y36(c.p),o.Y36(o.sBO))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-table-filters-editor-component"]],inputs:{sorterConfiguration:"sorterConfiguration",columns:"columns"},outputs:{formReady:"formReady"},features:[o.TTD],decls:20,vars:11,consts:function(){let e,t,i,o,n;return e=$localize`:2a63d63538326cdbebb382ee400f9c2ac4ba26eb2774613742044941352:Sorting`,t=$localize`:ec97f67072a83aaa972536b18d83179f6e4bbec97699622144571229146:Sort by`,i=$localize`:e9d403d84c2efea04f713258598abc6dc8fab8bc270381191166569688:Select column`,o=$localize`:00c361649822cfeeb5fad8e44bf6c9b9fbcc98527343210469772540594: Descending `,n=$localize`:73a7df661af2f227feac942adb7cec0474f2b2081677678378385679212:${"\ufffd#2\ufffd"}:START_BOLD_TEXT:No columns are sortable.${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["icon","widget_pie-chart",1,"align-self-start","pt-2"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"table-filters-configuration__accordion-content"],["formGroupName","sorterConfiguration",1,"d-flex","align-items-end"],["caption",t,1,"w-50",3,"control"],["placeholder",i,"formControlName","sortBy",1,"table-filters-configuration__accordion-content__sort-by-input",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],[1,"ml-2"],[3,"control"],["formControlName","descendantSorting"],o,[1,"p-5"],["type","info",3,"allowDismiss",4,"ngIf"],[3,"value"],["type","info",3,"allowDismiss"],n]},template:function(e,t){1&e&&(o.TgZ(0,"nui-widget-editor-accordion",0),o.TgZ(1,"div",1),o._UZ(2,"nui-icon",2),o.TgZ(3,"div",3),o.TgZ(4,"span",4),o.SDv(5,5),o.qZA(),o.TgZ(6,"div",6),o._uU(7),o.qZA(),o.qZA(),o.qZA(),o.TgZ(8,"div",7),o.TgZ(9,"div",8),o.TgZ(10,"nui-form-field",9),o.TgZ(11,"nui-select-v2",10),o.ALo(12,"async"),o.YNc(13,h,2,2,"nui-select-v2-option",11),o.qZA(),o.qZA(),o.TgZ(14,"div",12),o.TgZ(15,"nui-form-field",13),o.TgZ(16,"nui-checkbox",14),o.SDv(17,15),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(18,"div",16),o.YNc(19,g,3,1,"nui-message",17),o.qZA(),o.qZA()),2&e&&(o.Q6J("formGroup",t.form),o.xp6(6),o.Q6J("title",t.selectedSortByValue+t.selectedSortOrderValue),o.xp6(1),o.AsE(" ",t.selectedSortByValue,"",t.selectedSortOrderValue," "),o.xp6(3),o.Q6J("control",t.form.controls.sortBy),o.xp6(1),o.Q6J("popupViewportMargin",o.lcZ(12,9,t.configuratorHeading.height$)),o.xp6(2),o.Q6J("ngForOf",t.sortableColumns),o.xp6(2),o.Q6J("control",t.form.controls.descendantSorting),o.xp6(4),o.Q6J("ngIf",!t.sortableColumns.length))},directives:[d.J,l.JL,l.sg,u.oJW,l.x0,u.hgI,u.j_n,l.JJ,l.u,p.sg,u.bK4,p.O5,u.rLF,u.qqZ],pipes:[p.Ov],styles:[".table-filters-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})()},23309:function(e,t,i){"use strict";i.d(t,{u:function(){return c}});var o=i(33018),n=i(46806),r=i(38583),s=i(17030);function a(e,t){1&e&&o.GkF(0)}const l=function(e){return{"nui-dashwiz-step--active":e}};let c=(()=>{class e{constructor(){this.hidden=!1,this.spinnerSize=n.Eye.Large,this.enter=new o.vpe,this.valid=new o.vpe,this.exit=new o.vpe,this.next=new o.vpe,this.busyConfig={busy:!1},this.visited=!1,this.active=!1,this.complete=!1,this.icon="step",this.iconColor="",this.enterStep=e=>{this.enter.emit(e)},this.exitStep=e=>{this.exit.emit(e)},this.nextStep=e=>{this.next.emit(e)},this.applyEnteringStep=()=>{this.active=!0,this.icon="step-active",this.iconColor="black"},this.applyExitingStep=()=>{this.active=!1,this.visited=!0,this.icon="step-complete",this.iconColor=""}}ngOnInit(){this.nextText=this.nextText||$localize`Next`}ngOnChanges(e){e.stepControl&&this.valid.emit(this.stepControl)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-dashwiz-step"]],inputs:{stepTemplate:"stepTemplate",stepControl:"stepControl",title:"title",nextText:"nextText",hidden:"hidden",disabled:"disabled",spinnerSize:"spinnerSize"},outputs:{enter:"enter",valid:"valid",exit:"exit",next:"next"},features:[o.TTD],decls:4,vars:9,consts:[["nui-busy","",1,"nui-dashwiz-step","animated","h-100",3,"ngClass","busy"],["cdkScrollable","",1,"h-100","overflow-auto","nui-scroll-shadows","configurator-scrollable"],[4,"ngTemplateOutlet"],[3,"percent","allowCancel","message","size"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.YNc(2,a,1,0,"ng-container",2),o.qZA(),o._UZ(3,"nui-spinner",3),o.qZA()),2&e&&(o.Q6J("ngClass",o.VKq(7,l,t.active))("busy",t.busyConfig.busy),o.xp6(2),o.Q6J("ngTemplateOutlet",t.stepTemplate),o.xp6(1),o.Q6J("percent",t.busyConfig.percent)("allowCancel",t.busyConfig.allowCancel)("message",t.busyConfig.message)("size",t.spinnerSize))},directives:[n.ERI,r.mk,s.PQ,r.tP,n.ORR],styles:[".nui-dashwiz-step[_ngcontent-%COMP%]{display:none}.nui-dashwiz-step--active[_ngcontent-%COMP%]{display:block}"]}),e})()},69823:function(e,t,i){"use strict";i.d(t,{P:function(){return c}});var o=i(33018),n=i(46806),r=i(38583);function s(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){return o.CHM(e),o.oxw().onBack()}),o.TgZ(1,"span"),o.SDv(2,7),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("disabled",e.busy)}}function a(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"button",8),o.NdJ("click",function(){return o.CHM(e),o.oxw().onNext()}),o.TgZ(1,"span"),o._uU(2),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("displayStyle",e.canFinish?"default":"primary")("disabled",e.busy),o.xp6(2),o.Oqu(e.nextText)}}function l(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"button",9),o.NdJ("click",function(){return o.CHM(e),o.oxw().onFinish()}),o.TgZ(1,"span"),o._uU(2),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("isBusy",e.busy)("disabled",e.busy),o.xp6(2),o.Oqu(e.finishText)}}let c=(()=>{class e{constructor(e){this.changeDetector=e,this.busy=!1,this.canFinish=!1,this.canProceed=!1,this.isFirstStepActive=!1,this.isLastStepActive=!1,this.cancel=new o.vpe,this.next=new o.vpe,this.back=new o.vpe,this.finish=new o.vpe}onCancel(){this.cancel.emit()}onNext(){this.next.emit()}onBack(){this.back.emit()}onFinish(){this.finish.emit()}}return e.lateLoadKey="DashwizButtonsComponent",e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-dashwiz-buttons"]],inputs:{busy:"busy",canFinish:"canFinish",canProceed:"canProceed",isFirstStepActive:"isFirstStepActive",isLastStepActive:"isLastStepActive",nextText:"nextText",finishText:"finishText"},outputs:{cancel:"cancel",next:"next",back:"back",finish:"finish"},decls:7,vars:4,consts:function(){let e,t;return e=$localize`:d7b35c384aecd25a516200d6921836374613dfe72159130950882492111:Cancel`,t=$localize`:cda31dbd724cf5f4fa7a4274d9120651490c8a8c8890553633144307762:Back`,[[1,"d-flex","justify-content-end","p-4"],["nui-button","","type","button",1,"nui-dashwiz-buttons__cancel-button",3,"disabled","click"],e,["class","ml-3 nui-dashwiz-buttons__back-button","nui-button","","icon","caret-left","type","button",3,"disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__next-button","nui-button","","type","button",3,"displayStyle","disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__finish-button","nui-button","","type","button","displayStyle","primary",3,"isBusy","disabled","click",4,"ngIf"],["nui-button","","icon","caret-left","type","button",1,"ml-3","nui-dashwiz-buttons__back-button",3,"disabled","click"],t,["nui-button","","type","button",1,"ml-3","nui-dashwiz-buttons__next-button",3,"displayStyle","disabled","click"],["nui-button","","type","button","displayStyle","primary",1,"ml-3","nui-dashwiz-buttons__finish-button",3,"isBusy","disabled","click"]]},template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"button",1),o.NdJ("click",function(){return t.onCancel()}),o.TgZ(2,"span"),o.SDv(3,2),o.qZA(),o.qZA(),o.YNc(4,s,3,1,"button",3),o.YNc(5,a,3,3,"button",4),o.YNc(6,l,3,3,"button",5),o.qZA()),2&e&&(o.xp6(1),o.Q6J("disabled",t.busy),o.xp6(3),o.Q6J("ngIf",!t.isFirstStepActive),o.xp6(1),o.Q6J("ngIf",!t.isLastStepActive&&t.canProceed),o.xp6(1),o.Q6J("ngIf",t.canFinish||t.isLastStepActive))},directives:[n.r0F,r.O5],encapsulation:2}),e})()},77341:function(e,t,i){"use strict";i.d(t,{i:function(){return A}});var o=i(33018),n=i(98990),r=i.n(n),s=i(84857),a=i.n(s),l=i(29569),c=i.n(l),d=i(26215),u=i(23309),p=i(69823),h=i(46806),g=i(34317);const m=["container"],f=["stepTitle"],v=function(e){return{"min-width.px":e}};function y(e,t){if(1&e&&(o.TgZ(0,"div",14),o.TgZ(1,"div",15),o.TgZ(2,"div",16),o.TgZ(3,"div",17),o.TgZ(4,"span",18),o.TgZ(5,"span",19,20),o._uU(7),o.qZA(),o.TgZ(8,"div",21),o.TgZ(9,"div",22),o._UZ(10,"div",23),o.qZA(),o._UZ(11,"nui-icon",24),o.TgZ(12,"div",25),o._UZ(13,"div",23),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw().$implicit,t=o.oxw(3);o.xp6(7),o.hij(" ",e.title,""),o.xp6(3),o.Q6J("ngStyle",o.VKq(5,v,t.stepLineWidth)),o.xp6(1),o.Q6J("icon",e.icon)("iconColor",e.iconColor),o.xp6(2),o.Q6J("ngStyle",o.VKq(7,v,t.stepLineWidth))}}const b=function(e,t,i,o,n,r){return{"nui-dashwiz__header-step--first":e,"nui-dashwiz__header-step--last":t,"nui-dashwiz__header-step--visited":i,"nui-dashwiz__header-step--disabled":o,"nui-dashwiz__header-step--active":n,"nui-dashwiz__header-step--complete":r}};function C(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",12),o.NdJ("click",function(){const t=o.CHM(e).$implicit;return o.oxw(3).selectStep(t)}),o.YNc(1,y,14,9,"div",13),o.qZA()}if(2&e){const e=t.$implicit,i=t.first,n=t.last,r=o.oxw(3);o.Q6J("ngClass",o.HTZ(2,b,i,n,e.visited,e.disabled||!e.visited||r.currentStep.busyConfig.busy,e.active,e.complete)),o.xp6(1),o.Q6J("ngIf",!e.hidden)}}function x(e,t){if(1&e&&(o.TgZ(0,"ul",10),o.YNc(1,C,2,9,"li",11),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",e.steps)}}function w(e,t){if(1&e&&(o.TgZ(0,"div",8),o.YNc(1,x,2,1,"ul",9),o.qZA()),2&e){const e=o.oxw();o.ekj("nui-dashwiz__header--lines-stretched",e.stretchStepLines),o.xp6(1),o.Q6J("ngIf",e.steps)}}function T(e,t){}function S(e,t){}const I=function(){return["cancel","next","back","finish"]},_=["*"];let A=(()=>{class e{constructor(t,i,n,s){this.changeDetector=t,this.componentFactoryResolver=i,this.logger=n,this.dashwizService=s,this.hideHeader=!1,this.canProceed=!1,this.canFinish=!1,this.finishText=e.placeholderFinishText,this.stretchStepLines=!1,this.stepNavigated=new o.vpe,this.cancel=new o.vpe,this.finish=new o.vpe,this.next=new o.vpe,this.back=new o.vpe,this.navigationControl=new d.X({busyState:{busy:!1},allowStepChange:!0}),this.stepLineWidth=65,this.previousStepIndex=0,this.onBack=()=>{if(!c()(this.stepIndex)){let e=this.arraySteps[this.stepIndex-1];(e.hidden||e.disabled)&&(e=r()(this.arraySteps.slice(0).reverse(),e=>!e.hidden,a()(this.arraySteps.slice(0).reverse(),this.arraySteps[this.stepIndex])+1)),this.selectStep(e),this.back.emit()}},this.onNext=()=>{let e=this.arraySteps[this.stepIndex+1];this.handleStepControl(this.currentStep),this.currentStep.nextStep({currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.currentStep,previousStepIndex:this.stepIndex}),(e.hidden||e.disabled&&!c()(e.stepControl))&&(e=r()(this.arraySteps,e=>!e.hidden,this.stepIndex+1)),(c()(this.currentStep.stepControl)||this.currentStep.stepControl)&&(this.currentStep.complete=!0),e.disabled&&!e.visited&&(this.currentStep.complete=!1),this.selectStep(e),this.next.emit()},this.onFinish=()=>{this.finish.emit()},this.onCancel=()=>{this.cancel.emit(0!==this.steps.toArray().filter(e=>e.complete).length)},this.buttonPortalActionMap={cancel:this.onCancel,next:this.onNext,back:this.onBack,finish:this.onFinish},s&&(s.component=this)}ngOnInit(){this.buttonComponentTypes=this.buttonComponentTypes||[p.P.lateLoadKey],this.finishText===e.placeholderFinishText&&this.logger.warn(`DashwizComponent input "finishText" is using placeholder text\n"${e.placeholderFinishText}". A value should be specified.`)}ngDoCheck(){this.currentStep&&(this.buttonProperties={busy:this.currentStep.busyConfig.busy,canProceed:this.canProceed,canFinish:this.canFinish,isLastStepActive:this.steps.last.active,isFirstStepActive:this.steps.first.active,nextText:this.currentStep.nextText,finishText:this.finishText})}ngAfterContentInit(){const e=this.steps.filter(e=>e.active);this.arraySteps=this.steps.toArray(),0===e.length&&(this.currentStep=this.steps.first,this.selectStep(this.currentStep),this.changeDetector.detectChanges()),this.steps.toArray().forEach(e=>{e.valid.subscribe(t=>{c()(t)||this.handleStepControl(e)})}),this.navigationControl.subscribe(e=>{this.currentStep.busyConfig=e.busyState,e.allowStepChange&&!c()(this.futureStep)&&this.currentStep!==this.futureStep&&(this.enterAnotherStep(),this.futureStep=void 0)})}ngAfterViewChecked(){this.stretchStepLines&&(this.stepLineWidth=Math.round(this.getLargestLabelWidth()/2),this.changeDetector.detectChanges())}ngOnDestroy(){this.steps.toArray().forEach(e=>e.valid.unsubscribe()),this.navigationControl.unsubscribe(),this.dashwizService.component=void 0}addStepDynamic(e,t){const i=this.componentFactoryResolver.resolveComponentFactory(u.u),o=this.dynamicStep.createComponent(i);return o.instance.stepTemplate=e.stepTemplate,this.arraySteps.splice(t,0,o.instance),this.steps.reset(this.arraySteps),o.instance}disableStep(e){const t=this.arraySteps.indexOf(e);this.arraySteps[t].disabled=!0,this.changeDetector.detectChanges()}enableStep(e){const t=this.arraySteps.indexOf(e);this.arraySteps[t].disabled=!1,this.changeDetector.detectChanges()}hideStep(e){const t=this.arraySteps.indexOf(e);this.arraySteps[t].hidden=!0}showStep(e){const t=this.arraySteps.indexOf(e);this.arraySteps[t].hidden=!1}goToStep(e){this.selectStep(this.arraySteps[e])}selectStep(e){e.disabled||(this.futureStep=e,this.currentStep.exitStep({currentStepIndex:this.arraySteps.indexOf(this.futureStep),currentStep:this.futureStep,previousStep:this.arraySteps[this.stepIndex],previousStepIndex:this.stepIndex}),this.navigationControl.value.allowStepChange&&this.enterAnotherStep())}enterAnotherStep(){var e;this.currentStep.applyExitingStep(),null===(e=this.futureStep)||void 0===e||e.enterStep(),this.futureStep&&(this.currentStep=this.futureStep),this.currentStep.applyEnteringStep(),this.stepIndex=this.arraySteps.indexOf(this.currentStep),this.stepNavigatedEvent={currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.arraySteps[this.previousStepIndex],previousStepIndex:this.previousStepIndex},this.stepNavigated.emit(this.stepNavigatedEvent),this.previousStepIndex=this.stepIndex}onButtonPortalOutput(e){var t,i;null===(i=(t=this.buttonPortalActionMap)[e.id])||void 0===i||i.call(t)}disableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(e=>{e.disabled=!0})}enableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(e=>{e.disabled=!1})}handleStepControl(e){c()(e.stepControl)||(e.stepControl?this.enableFollowingSteps():this.disableFollowingSteps())}getLargestLabelWidth(){const e=this.stepTitles.map(e=>e.nativeElement.offsetWidth);return Math.round(Math.max(...e))}}return e.placeholderFinishText="Action",e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o._Vd),o.Y36(h.mQy),o.Y36(g.e))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-dashwiz"]],contentQueries:function(e,t,i){if(1&e&&o.Suo(i,u.u,4),2&e){let e;o.iGM(e=o.CRH())&&(t.steps=e)}},viewQuery:function(e,t){if(1&e&&(o.Gf(m,5,o.s_b),o.Gf(f,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.dynamicStep=e.first),o.iGM(e=o.CRH())&&(t.stepTitles=e)}},hostAttrs:[1,"flex-grow-1","overflow-auto"],inputs:{hideHeader:"hideHeader",canProceed:"canProceed",canFinish:"canFinish",finishText:"finishText",stretchStepLines:"stretchStepLines",buttonComponentTypes:"buttonComponentTypes",navigationControl:"navigationControl"},outputs:{stepNavigated:"stepNavigated",cancel:"cancel",finish:"finish",next:"next",back:"back"},ngContentSelectors:_,decls:10,vars:6,consts:[[1,"nui-dashwiz","d-flex","flex-column","h-100"],["class","nui-dashwiz__header",3,"nui-dashwiz__header--lines-stretched",4,"ngIf"],[1,"nui-scroll-shadows","flex-grow-1","overflow-auto"],["container",""],[1,"nui-dashwiz__footer"],["nuiComponentPortal","","componentId","dashwizButtons",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-dashwiz__header"],["class","nui-dashwiz__header-steps",4,"ngIf"],[1,"nui-dashwiz__header-steps"],["class","nui-dashwiz__header-step",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nui-dashwiz__header-step",3,"ngClass","click"],["class","nui-dashwiz__header-step-container",4,"ngIf"],[1,"nui-dashwiz__header-step-container"],[1,"nui-dashwiz__header-step-row"],[1,"nui-dashwiz__header-step-col"],[1,"nui-dashwiz__header-step-content"],[1,"nui-dashwiz__header-step-link"],[1,"nui-dashwiz__header-step-title"],["stepTitle",""],[1,"nui-dashwiz__header-step-link-container"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-right"],[1,"nui-dashwiz__header-step-line",3,"ngStyle"],[3,"icon","iconColor"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-left"]],template:function(e,t){if(1&e){const e=o.EpF();o.F$t(),o.TgZ(0,"div",0),o.YNc(1,w,2,3,"div",1),o.TgZ(2,"div",2),o.Hsn(3),o.YNc(4,T,0,0,"ng-template",null,3,o.W1O),o.qZA(),o.TgZ(6,"div",4),o.ynx(7,5,6),o.NdJ("output",function(e){return t.onButtonPortalOutput(e)}),o.YNc(9,S,0,0,"ng-template",7),o.NdJ("attached",function(t){return o.CHM(e),o.MAs(8).attached(t)}),o.BQk(),o.qZA(),o.qZA()}if(2&e){const e=o.MAs(8);o.xp6(1),o.Q6J("ngIf",!t.hideHeader),o.xp6(6),o.Q6J("componentType",1===t.buttonComponentTypes.length?t.buttonComponentTypes[0]:t.buttonComponentTypes[t.stepIndex])("properties",t.buttonProperties)("outputs",o.DdM(5,I)),o.xp6(2),o.Q6J("cdkPortalOutlet",e.portal)}},styles:[".nui-dashwiz__header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#fafafa;background-color:var(--nui-color-bg-secondary,#fafafa);border-bottom:1px solid #d9d9d9;border-bottom:1px solid var(--nui-color-line-default, #d9d9d9);overflow:hidden;text-align:center;display:flex;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.nui-dashwiz__header-steps[_ngcontent-%COMP%]{margin-bottom:0;white-space:nowrap;display:inline-flex}.nui-dashwiz__header-step[_ngcontent-%COMP%]{line-height:normal;display:inline-flex;cursor:pointer}.nui-dashwiz__header-step--disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:default}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:#0079aa;border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--first[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%]{border-color:transparent;opacity:0}.nui-dashwiz__header-step--last[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%]{border-color:transparent;opacity:0}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]{cursor:default}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:#111;color:var(--nui-color-bg-dark,#111)}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{text-decoration:none}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:#0079aa;border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:#0079aa;border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:#0079aa;border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step-container[_ngcontent-%COMP%]{display:inline-table;width:100%}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]{display:none}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0}.nui-dashwiz__header-step-row[_ngcontent-%COMP%]{display:table-row}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:#d9d9d9;border-color:var(--nui-color-line-default,#d9d9d9)}.nui-dashwiz__header-step-col-right[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{margin-right:-1px}.nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-bottom:solid 2px;height:2px}.nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:rgba(17,17,17,.6);color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6));transition:color .3s}.nui-dashwiz__header-step-link-container[_ngcontent-%COMP%]{display:flex;align-content:baseline;justify-content:center;align-items:center}.nui-dashwiz__header-step-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis;vertical-align:middle;display:inline-block;max-width:140px;margin:0 0 5px;text-decoration:inherit}.nui-dashwiz__header.nui-dashwiz__header--lines-stretched[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{max-width:unset}.nui-dashwiz__footer[_ngcontent-%COMP%]{z-index:1080;background-color:#fff;background-color:var(--nui-color-bg-content,#fff);border-top:solid 1px #d9d9d9;border-top:solid 1px var(--nui-color-line-default, #d9d9d9)}"]}),e})()},34317:function(e,t,i){"use strict";i.d(t,{e:function(){return n}});var o=i(33018);let n=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},12204:function(e,t,i){"use strict";i.d(t,{F:function(){return n}});var o=i(90665);function n(e){if(e.valid||e.untouched)return!1;if(e instanceof o.cw)for(const t of Object.keys(e.controls))if(n(e.controls[t]))return!0;if(e instanceof o.Oe)for(let t=0;t<e.length;t++)if(n(e.at(t)))return!0;return(e.touched||e.dirty)&&!!e.errors}},30510:function(e,t,i){"use strict";i.d(t,{l:function(){return r}});var o=i(40494),n=i(33018);let r=(()=>{class e{constructor(e){this.widgetTypesService=e}transform(e,t="widget"){var i,o;return(null==e?void 0:e.type)?null===(o=null===(i=this.widgetTypesService.getWidgetType(e.type,e.version).paths)||void 0===i?void 0:i[t])||void 0===o?void 0:o.root:null}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(o.x,16))},e.\u0275pipe=n.Yjl({name:"nuiPizzagnaRoot",type:e,pure:!0}),e})()},48248:function(e,t,i){"use strict";i.d(t,{l:function(){return n}});var o=i(33018);let n=(()=>{class e{constructor(){this.defaultHeaderPrefix=$localize`Value`}transform(e,t,i=this.defaultHeaderPrefix){return`${i} ${t+1}${e?" - ":""}${e||""}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Yjl({name:"nuiWidgetConfiguratorSectionHeader",type:e,pure:!0}),e})()},52238:function(e,t,i){"use strict";i.d(t,{F:function(){return p}});var o=i(90739),n=i(85345);class r{constructor(e,t){this.keySelector=e,this.flushes=t}call(e,t){return t.subscribe(new s(e,this.keySelector,this.flushes))}}class s extends n.Ds{constructor(e,t,i){super(e),this.keySelector=t,this.values=new Set,i&&this.add((0,n.ft)(i,new n.IY(this)))}notifyNext(){this.values.clear()}notifyError(e){this._error(e)}_next(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)}_useKeySelector(e){let t;const{destination:i}=this;try{t=this.keySelector(e)}catch(o){return void i.error(o)}this._finalizeNext(t,e)}_finalizeNext(e,t){const{values:i}=this;i.has(e)||(i.add(e),this.destination.next(t))}}var a=i(39761),l=i(88002),c=i(65470),d=i(12204),u=i(33018);let p=(()=>{class e{transform(e){if(!e)throw new Error("Provided form is undefined");return(0,o.aj)([e.statusChanges,e.valueChanges]).pipe((0,a.O)(null),(0,l.U)(()=>(0,d.F)(e)?c.Nc.CRITICAL:c.Nc.DEFAULT),e=>e.lift(new r(void 0,void 0)))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u.Yjl({name:"nuiWidgetEditorAccordionFormState",type:e,pure:!1}),e})()},76e3:function(e,t,i){"use strict";i.d(t,{d:function(){return l}});var o=i(90739),n=i(39761),r=i(88002),s=i(12204),a=i(33018);let l=(()=>{class e{transform(t,i,a=e.ERROR_ICON_DEFAULT){if(!t)throw new Error("Provided form is undefined");return(0,o.aj)([t.statusChanges,t.valueChanges]).pipe((0,n.O)(null),(0,r.U)(()=>(0,s.F)(t)?a:i))}}return e.ERROR_ICON_DEFAULT="status_critical",e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Yjl({name:"nuiFormHeaderIconPipe",type:e,pure:!1}),e})()},72459:function(e,t,i){"use strict";i.d(t,{q:function(){return p}});var o=i(79765),n=i(26215),r=i(46782),s=i(65470),a=i(7350),l=i(29569),c=i.n(l),d=i(33018),u=i(34317);let p=(()=>{class e{constructor(e,t){this.eventBus=e,this.dashwizService=t,this.onDestroy$=new o.xQ,this.dataSourceCreated$=new o.xQ,this.error$=new o.xQ,this.busy$=new n.X(!1),this.dataSourceFields$=new n.X([]),this.eventBus.subscribeUntil(a.gg,this.onDestroy$,e=>{!e.payload||this.onDataSourceCreated(e.payload)}),this.eventBus.subscribeUntil(a.PF,this.onDestroy$,e=>{var t;if(null===(t=e.payload)||void 0===t?void 0:t.error)this.error$.next(e.payload.error);else{this.error$.next(void 0);const t=c()(e.payload.result)?e.payload:e.payload.result||{};(null==t?void 0:t.dataFields)&&this.dataSourceFields$.next(t.dataFields)}})}onDataSourceCreated(e){var t;this.dataSource=e,this.dataSourceCreated$.next(),null===(t=this.dataSource.busy)||void 0===t||t.pipe((0,r.R)(this.dataSourceCreated$)).subscribe(e=>{var t,i;null===(i=null===(t=this.dashwizService)||void 0===t?void 0:t.component)||void 0===i||i.navigationControl.next({busyState:{busy:e},allowStepChange:!e}),this.busy$.next(e)})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(s.nY),d.LFG(u.e))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},35720:function(e,t,i){"use strict";i.d(t,{p:function(){return r}});var o=i(26215),n=i(33018);let r=(()=>{class e{constructor(){this.height$=new o.X(0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})()},15130:function(e,t,i){"use strict";i.d(t,{J:function(){return C}});var o=i(99763),n=i(46806),r=i(37524),s=i.n(r),a=i(55836),l=i.n(a),c=i(79765),d=i(59193),u=i(25917),p=i(67574),h=i(43190),g=i(5304),m=i(46782),f=i(45435),v=i(40494),y=i(61817),b=i(33018);let C=(()=>{class e{constructor(e,t,i,o,r,s,a){this.componentFactoryResolver=e,this.widgetTypesService=t,this.injector=i,this.appRef=o,this.logger=r,this.router=a,this.close$=new c.xQ,this.handleSubmit=(e,t)=>i=>i.pipe(this.trySubmit(t,e),this.updateDashboard(e.dashboardComponent)),this.trySubmit=(e,t)=>i=>i.pipe((0,h.w)(i=>i&&l()(e)?e(i,t).pipe((0,g.K)(e=>(this.logger.error(e),this.componentRef.instance.handleSubmitError(),d.E))):(0,u.of)(i))),this.updateDashboard=e=>t=>new p.y(i=>t.subscribe(t=>{if(t){let i;t.id=t.id||(0,n.VjN)(),i=e.dashboard.widgets[t.id]?Object.assign(Object.assign({},t),{pizzagna:Object.assign(Object.assign({},this.widgetTypesService.getWidgetType(t.type,t.version).widget),{configuration:t.pizzagna.configuration})}):t,e.removeWidget(i.id,!1),setTimeout(()=>{e.updateWidget(i)})}this.close(),i.next()})),this.renderer=s.createRenderer(null,null)}open(e){var t;const i={dashboardComponent:e.dashboardComponent,widget:s()(e.widget)};this.componentRef=this.appendComponentToBody();const o=this.componentRef.instance;return o.formPortal=e.portalBundle.portal,o.previewWidget=s()(e.widget),(null===(t=e.portalBundle)||void 0===t?void 0:t.attached)&&o.formPortalAttached.pipe((0,m.R)(this.close$)).subscribe(e.portalBundle.attached),o.changeDetector.detectChanges(),o.result.asObservable().pipe(this.handleSubmit(i,e.trySubmit))}close(){!this.renderer||(this.close$.next(),this.renderer.removeChild(document.body,this.componentRef.hostView.rootNodes[0]),this.appRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.renderer.removeStyle(document.body,"overflow"))}appendComponentToBody(){const e=this.componentFactoryResolver.resolveComponentFactory(y.n).create(this.injector);return this.appRef.attachView(e.hostView),this.renderer.appendChild(document.body,e.hostView.rootNodes[0]),this.renderer.setStyle(document.body,"overflow","hidden"),this.router&&this.router.events.pipe((0,f.h)(e=>e instanceof o.m2),(0,m.R)(this.close$)).subscribe(()=>this.close()),e}}return e.\u0275fac=function(t){return new(t||e)(b.LFG(b._Vd),b.LFG(v.x),b.LFG(b.zs3),b.LFG(b.z2F),b.LFG(n.mQy),b.LFG(b.FYo),b.LFG(o.F0,8))},e.\u0275prov=b.Yz7({token:e,factory:e.\u0275fac}),e})()},95819:function(e,t,i){"use strict";i.d(t,{a:function(){return c}});var o=i(79765),n=i(92954),r=i(39973),s=i(65470),a=i(33018),l=i(28726);let c=(()=>{class e{constructor(e,t,i){this.eventBus=e,this.previewService=t,this.pizzagnaService=i,this.destroy$=new o.xQ}ngAfterViewInit(){this.buildForm(),this.toPreview(this.component.form)}setComponent(e,t){this.component=e,this.componentId=t}getPreview(){return this.previewService.preview}updatePreview(e){this.previewService.preview=e}updateFormPizzagna(e){this.pizzagnaService.updatePizzagna(e),this.eventBus.getStream(r.M).next({payload:{path:"",value:e}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.nY),a.LFG(l.m),a.LFG(n.p))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})()},79705:function(e,t,i){"use strict";i.d(t,{l:function(){return f}});var o=i(46806),n=i(93300),r=i.n(n),s=i(59311),a=i.n(s),l=i(12482),c=i.n(l),d=i(46782),u=i(92954),p=i(65470),h=i(95819),g=i(33018),m=i(28726);let f=(()=>{class e extends h.a{constructor(e,t,i){super(e,t,i),this.shouldReadForm=!1}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var e,t,i;const n=this.getPreview(),r=(null===(i=null===(t=null===(e=null==n?void 0:n.tiles)||void 0===e?void 0:e.properties)||void 0===t?void 0:t.nodes)||void 0===i?void 0:i.map(e=>({id:e,componentType:n[e].componentType})))||[],s=null==r?void 0:r.map(e=>e.id);this.pizzagnaService.createComponentsFromTemplate("tiles",s);let a=this.pizzagnaService.pizzagna;a=(0,o.zdu)(a,`${p.xW.Data}.tiles.properties.tiles`,r),setTimeout(()=>this.shouldReadForm=!0),this.updateFormPizzagna(a)}toPreview(e){var t;null===(t=e.get("tiles"))||void 0===t||t.valueChanges.pipe((0,d.R)(this.destroy$)).subscribe(e=>{var t,i;if(!this.shouldReadForm)return;let n=this.getPreview();const s=(e||[]).map(e=>e.id),l=r()(null===(i=null===(t=null==n?void 0:n.tiles)||void 0===t?void 0:t.properties)||void 0===i?void 0:i.nodes,s);l.length&&(n=c()(n,l));const d=a()(e,e=>e.id);n=(0,o.zdu)(n,"tiles.properties.nodes",s);for(const r of s){const e=d[r];if(e&&!n[e.id]){const t=this.getTileConfiguration(e.id,e.componentType);n=(0,o.zdu)(n,e.id,t)}}this.updatePreview(n)})}getTileConfiguration(e,t){return{id:e,providers:{dataSource:{providerId:void 0}}}}}return e.\u0275fac=function(t){return new(t||e)(g.LFG(p.nY),g.LFG(m.m),g.LFG(u.p))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac}),e})()},82262:function(e,t,i){"use strict";i.d(t,{M:function(){return u}});var o=i(46806),n=i(46782),r=i(13385),s=i(92954),a=i(65470),l=i(95819),c=i(33018),d=i(28726);let u=(()=>{class e extends l.a{constructor(e,t,i){super(e,t,i),this.PROPERTIES_PATH=`${a.xW.Configuration}.chartOptionsEditor.properties`}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var e,t,i,n,s,a,l,c,d,u,p;const h=null===(i=null===(t=null===(e=this.getPreview().chart)||void 0===e?void 0:e.properties)||void 0===t?void 0:t.configuration)||void 0===i?void 0:i.chartOptions;let g=this.pizzagnaService.pizzagna;g=(0,o.zdu)(g,`${this.PROPERTIES_PATH}.chartType`,null!==(n=null==h?void 0:h.type)&&void 0!==n?n:void 0),g=(0,o.zdu)(g,`${this.PROPERTIES_PATH}.legendPlacement`,null!==(s=null==h?void 0:h.legendPlacement)&&void 0!==s?s:r.w.None),g=(0,o.zdu)(g,`${this.PROPERTIES_PATH}.legendFormatterComponentType`,null!==(l=null===(a=null==h?void 0:h.legendFormatter)||void 0===a?void 0:a.componentType)&&void 0!==l?l:""),g=(0,o.zdu)(g,`${this.PROPERTIES_PATH}.contentFormatterComponentType`,null!==(d=null===(c=null==h?void 0:h.contentFormatter)||void 0===c?void 0:c.componentType)&&void 0!==d?d:"DonutContentRawFormatterComponent"),g=(0,o.zdu)(g,`${this.PROPERTIES_PATH}.contentFormatterProperties`,null!==(p=null===(u=null==h?void 0:h.contentFormatter)||void 0===u?void 0:u.properties)&&void 0!==p?p:""),this.updateFormPizzagna(g)}toPreview(e){e.valueChanges.pipe((0,n.R)(this.destroy$)).subscribe(e=>{const t=(0,o.zdu)(this.getPreview(),"chart.properties.configuration.chartOptions",e);this.updatePreview(t)})}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(a.nY),c.LFG(d.m),c.LFG(s.p))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})()},45626:function(e,t,i){"use strict";i.d(t,{c:function(){return d}});var o=i(46806),n=i(46782),r=i(92954),s=i(65470),a=i(95819),l=i(33018),c=i(28726);class d extends a.a{constructor(e,t,i){super(e,t,i)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var e,t;let i=this.pizzagnaService.pizzagna;const n=null===(t=null===(e=this.getPreview())||void 0===e?void 0:e.header)||void 0===t?void 0:t.properties;i=(0,o.zdu)(i,`${d.PROPERTIES_PATH}.title`,null==n?void 0:n.title),i=(0,o.zdu)(i,`${d.PROPERTIES_PATH}.subtitle`,null==n?void 0:n.subtitle),i=(0,o.zdu)(i,`${d.PROPERTIES_PATH}.url`,null==n?void 0:n.url),i=(0,o.zdu)(i,`${d.PROPERTIES_PATH}.description`,null==n?void 0:n.description),i=(0,o.zdu)(i,`${d.PROPERTIES_PATH}.collapsible`,null==n?void 0:n.collapsible),this.updateFormPizzagna(i)}toPreview(e){e.valueChanges.pipe((0,n.R)(this.destroy$)).subscribe(e=>{const t=(0,o.zdu)(this.getPreview(),"header.properties",e);this.updatePreview(t)})}}d.PROPERTIES_PATH=`${s.xW.Configuration}.titleAndDescription.properties`,d.\u0275fac=function(e){return new(e||d)(l.LFG(s.nY),l.LFG(c.m),l.LFG(r.p))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac})},10841:function(e,t,i){"use strict";i.d(t,{w:function(){return T}});var o=i(46806),n=i(58102),r=i.n(n),s=i(12232),a=i.n(s),l=i(49977),c=i.n(l),d=i(29569),u=i.n(d),p=i(79765),h=i(90739),g=i(46782),m=i(88002),f=i(87519),v=i(92954),y=i(65470),b=i(7350),C=i(95819),x=i(33018),w=i(28726);let T=(()=>{class e extends C.a{constructor(e,t,i){super(e,t,i),this.indicatorDataKey="indicatorData",this.previewSeriesPath=`providers.${y.Mu.Adapter}.properties.series`,this.formSeriesComponentPath=`${y.xW.Data}.series.properties`,this.dataSourceSeries$=new p.xQ,this.selectedSeriesIds$=new p.xQ,this.shouldReadForm=!1,this.subscribeToAvailableDataFieldsChange(),this.eventBus.subscribeUntil(b.ay,this.destroy$,e=>{const t=`${y.xW.Structure}.series.properties.nodes`,i=r()(this.pizzagnaService.pizzagna,t);this.pizzagnaService.removeComponents(i);let n=this.pizzagnaService.pizzagna;n=(0,o.zdu)(n,t,[]),n=(0,o.zdu)(n,`${this.formSeriesComponentPath}.series`,[]),this.updateFormPizzagna(n)}),this.eventBus.subscribeUntil(b.PF,this.destroy$,e=>{var t;const{series:i}=u()(e.payload.result)?e.payload:e.payload.result||{};if(i){this.dataSourceSeries$.next(i);let e=this.pizzagnaService.pizzagna;e=(0,o.zdu)(e,`${this.formSeriesComponentPath}.allSeries`,i);const n=(null===(t=this.pizzagnaService.pizzagna[y.xW.Structure][this.component.componentId].properties)||void 0===t?void 0:t.template).findIndex(e=>e.id===this.indicatorDataKey);e=(0,o.zdu)(e,`${y.xW.Structure}.series.properties.template[${n}].properties.allSeries`,i),e=r()(this.getPreview(),`chart.${this.previewSeriesPath}`,[]).reduce((e,t)=>(0,o.zdu)(e,`${y.xW.Data}.${t.id}/${this.indicatorDataKey}.properties.allSeries`,i),e),this.updateFormPizzagna(e);const s=`${this.formSeriesComponentPath}.series`,l=r()(this.pizzagnaService.pizzagna,s);if(a()(l)){this.shouldReadForm=!1;const e=i.map(e=>({id:e.id,selectedSeriesId:e.id,label:e.name})),t=(0,o.zdu)(this.getPreview(),`chart.${this.previewSeriesPath}`,e);this.updatePreview(t),this.buildForm(),setTimeout(()=>{this.updateAvailableSeries([]),this.shouldReadForm=!0})}}})}buildForm(){const e=this.getPreview(),t=r()(e,`chart.${this.previewSeriesPath}`,[]),i=t.map(e=>({id:e.id,selectedSeriesId:e.selectedSeriesId})),n=t.map(e=>e.id);this.pizzagnaService.createComponentsFromTemplate("series",n);const s=(0,o.zdu)(this.pizzagnaService.pizzagna,`${this.formSeriesComponentPath}.series`,i);this.updateFormPizzagna(s),this.selectedSeriesIds$.next(i.map(e=>e.selectedSeriesId)),setTimeout(()=>this.shouldReadForm=!0)}toPreview(e){e.valueChanges.pipe((0,g.R)(this.destroy$)).subscribe(e=>{if(!this.shouldReadForm)return;const t=this.getPreview(),{chart:i}=t,n=r()(i,this.previewSeriesPath,[]),s=e.map(e=>Object.assign({id:e.id,selectedSeriesId:e.selectedSeriesId},n.find(t=>t.id===e.id))),l=(0,o.zdu)(t,`chart.${this.previewSeriesPath}`,s);this.updatePreview(l);const c=e.map(e=>r()(e,`properties[${e.id}/indicatorData].id`)).filter(e=>!a()(e));this.selectedSeriesIds$.next(c)})}ngOnDestroy(){this.dataSourceSeries$.complete(),this.selectedSeriesIds$.complete(),super.ngOnDestroy()}updateAvailableSeries(e){var t;if(!this.pizzagnaService.pizzagna)return;let i=this.pizzagnaService.pizzagna;i=(0,o.zdu)(i,`${this.formSeriesComponentPath}.availableSeries`,e);const n=(null===(t=this.pizzagnaService.pizzagna[y.xW.Structure][this.component.componentId].properties)||void 0===t?void 0:t.template).findIndex(e=>e.id===this.indicatorDataKey);i=(0,o.zdu)(i,`${y.xW.Structure}.series.properties.template[${n}].properties.availableSeries`,e),i=r()(this.pizzagnaService.pizzagna,`${y.xW.Structure}.series.properties.nodes`).reduce((t,i)=>(0,o.zdu)(t,`${y.xW.Data}.${i}/${this.indicatorDataKey}.properties.availableSeries`,e),i),this.updateFormPizzagna(i)}subscribeToAvailableDataFieldsChange(){(0,h.aj)([this.dataSourceSeries$,this.selectedSeriesIds$]).pipe((0,g.R)(this.destroy$),(0,m.U)(([e,t])=>e.filter(e=>!t.find(t=>t===e.id))),(0,f.x)(c())).subscribe(this.updateAvailableSeries.bind(this))}}return e.\u0275fac=function(t){return new(t||e)(x.LFG(y.nY),x.LFG(w.m),x.LFG(v.p))},e.\u0275prov=x.Yz7({token:e,factory:e.\u0275fac}),e})()},91363:function(e,t,i){"use strict";i.d(t,{l:function(){return o}});const o=new(i(33018).OlP)("CONFIGURATOR_CONVERTER")},28726:function(e,t,i){"use strict";i.d(t,{m:function(){return r}});var o=i(79765),n=i(33018);let r=(()=>{class e{constructor(){this.previewChanged=new o.xQ}get preview(){return this._preview}set preview(e){this._preview=e,this.previewChanged.next(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})()},58746:function(e,t,i){"use strict";i.d(t,{s:function(){return d}});var o=i(37524),n=i.n(o),r=i(65470),s=i(19797),a=i(15130),l=i(33018),c=i(62053);let d=(()=>{class e{constructor(e,t){this.configuratorService=e,this.componentPortalService=t}open(e){if(!e.portalBundle){const t={portal:this.componentPortalService.createComponentPortal(s.b,null),attached:t=>{var i;const o=t.instance;o.formPizzagna=e.formPizzagna,o.formRoot=null===(i=e.paths)||void 0===i?void 0:i.root,o.changeDetector.markForCheck()}};e.portalBundle=t}const t=n()(e.widget);return delete t.pizzagna[r.xW.Data],e.widget=t,this.configuratorService.open(e)}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(a.J),l.LFG(c.$))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac}),e})()},7350:function(e,t,i){"use strict";i.d(t,{PF:function(){return s},yX:function(){return a},ay:function(){return l},gg:function(){return c}});var o=i(46806),n=i(88229),r=i(26215);const s=new o.JRy("DATA_SOURCE_OUTPUT",()=>new n.t(1)),a=new o.JRy("DATA_SOURCE_DESTROYED"),l=new o.JRy("DATA_SOURCE_CHANGE"),c=new o.JRy("DATA_SOURCE_CREATED",()=>new r.X({payload:void 0}))},54607:function(e,t,i){"use strict";i.d(t,{t:function(){return x}});var o=i(37524),n=i.n(o),r=i(79765),s=i(43190),a=i(46782),l=i(46276),c=i(58746),d=i(39973),u=i(55836),p=i.n(u),h=i(67574),g=i(59193),m=i(25917),f=i(5304),v=i(33018),y=i(46806);let b=(()=>{class e{constructor(e){this.logger=e,this.updateDashboard=e=>t=>new h.y(i=>t.subscribe(t=>{t&&e.removeWidget(t),i.next()}))}handleRemove(e,t,i,o){return this.tryRemove(o,t,i).pipe(this.updateDashboard(e))}tryRemove(e,t,i){return p()(e)?e(t,i).pipe((0,f.K)(e=>(this.logger.error(e),g.E))):(0,m.of)(t)}}return e.\u0275fac=function(t){return new(t||e)(v.LFG(y.mQy))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=i(40494);let x=(()=>{class e{constructor(e,t,i,o){this.dashboardComponent=e,this.widgetEditorService=t,this.widgetRemovalService=i,this.widgetTypesService=o,this.destroy$=new r.xQ}ngOnInit(){this.dashboardComponent.eventBus.getStream(d.Ef).pipe((0,s.w)(e=>{const t=this.dashboardComponent.dashboard.widgets[e.widgetId],i=this.widgetTypesService.getWidgetType(t.type,t.version);return this.widgetEditorService.open({dashboardComponent:this.dashboardComponent,formPizzagna:i.configurator,paths:i.paths.configurator,widget:t,trySubmit:this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.trySubmit})}),(0,a.R)(this.destroy$)).subscribe(),this.dashboardComponent.eventBus.getStream(d.y4).pipe((0,s.w)(e=>{const t=e.widgetId,i=this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.tryRemove,o={dashboardComponent:this.dashboardComponent,widget:n()(this.dashboardComponent.dashboard.widgets[t])};return this.widgetRemovalService.handleRemove(this.dashboardComponent,t,o,i)}),(0,a.R)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(v.Y36(l.M,3),v.Y36(c.s),v.Y36(b),v.Y36(C.x))},e.\u0275dir=v.lG2({type:e,selectors:[["","nuiWidgetEditor",""]],inputs:{dashboardPersistenceHandler:["nuiWidgetEditor","dashboardPersistenceHandler"]}}),e})()},18989:function(e,t,i){"use strict";i.d(t,{n:function(){return c}});var o=i(81690),n=i.n(o),r=i(52190),s=i.n(r),a=i(9728),l=i.n(a);function c(e,...t){const i=t.filter(e=>void 0!==e.previousValue||void 0!==e.currentValue);if(!s()(i,e=>e.currentValue!==e.previousValue))return e;if(1===i.length)return i[0].currentValue;const o=function(e){for(const t of e){const e=typeof t.currentValue;if("undefined"!==e&&null!=t.currentValue)return n()(t.currentValue)?"object"==typeof t.currentValue[0]?"object[]":"array":t.currentValue.constructor!==Object?"advanced":e}return"undefined"}(i);return["object","object[]"].includes(o)?l()(...i.map(e=>"object"==typeof e.currentValue?Object.keys(e.currentValue||{}):[])).reduce((t,o)=>{const n=null==e||void 0===e[o]?void 0:e[o],r=i.map(e=>({previousValue:void 0===e.previousValue||null==e.previousValue?void 0:e.previousValue[o],currentValue:void 0===e.currentValue||null==e.currentValue?void 0:e.currentValue[o]}));return t[o]=c(n,...r),t},"object[]"===o?[]:{}):function(e){for(let t=e.length-1;t>=0;t--){const i=e[t].currentValue;if(void 0!==i)return i}}(i)}},24141:function(e,t,i){"use strict";function o(e,t){const i=e.markAsTouched;e.markAsTouched=()=>{i.apply(e,arguments),t()}}i.d(t,{t:function(){return o}})},25624:function(e,t,i){"use strict";i.d(t,{R:function(){return m}});var o=i(33018),n=i(46806),r=i(18989),s=i(39973),a=i(65470),l=i(17654),c=i(92954),d=i(38583),u=i(46747),p=i(87636);function h(e,t){}function g(e,t){if(1&e){const e=o.EpF();o.ynx(0),o.ynx(1,1,2),o.NdJ("output",function(t){return o.CHM(e),o.oxw().onOutput(t)}),o.YNc(3,h,0,0,"ng-template",3),o.NdJ("attached",function(t){return o.CHM(e),o.MAs(2).attached(t)}),o.BQk(),o.BQk()}if(2&e){const e=o.MAs(2),t=o.oxw();o.xp6(1),o.Q6J("componentId",t.rootNode)("componentType",null==t.pizza[t.rootNode]?null:t.pizza[t.rootNode].componentType)("properties",null==t.pizza[t.rootNode]?null:t.pizza[t.rootNode].properties)("providers",null==t.pizza[t.rootNode]?null:t.pizza[t.rootNode].providers)("outputs",t.outputs),o.xp6(2),o.Q6J("cdkPortalOutlet",e.portal)}}let m=(()=>{class e{constructor(e,t,i){this.pizzagnaService=e,this.logger=t,this.eventBus=i,this.rootNode=s.XM,this.pizzagnaChange=new o.vpe,this.output=new o.vpe,i.getStream(s.M).subscribe(e=>{const t=(0,n.zdu)(this.pizzagna,e.payload.path,e.payload.value);this._pizzagnaBuffer=t,this.pizzagnaChange.emit(t)})}get pizzagna(){return this._pizzagnaBuffer||this._pizzagna}set pizzagna(e){this._pizzagna=e,this._pizzagnaBuffer=null}ngOnChanges(e){if(e.pizzagna){const t=e.pizzagna.previousValue;this.pizzagnaService.updatePizzagna(this.pizzagna),this.pizza=this.mergePizzagnaIntoPizza(this.pizza,t,this.pizzagna),this.pizza&&!this.pizza[this.rootNode]&&this.logger.warn("Pizzagna doesn't contain root node '"+this.rootNode+"'. Pizzagna = ",this.pizzagna),this.pizzagnaService.updateComponents(this.pizza)}}onOutput(e){this.output.emit(e)}mergePizzagnaIntoPizza(e,t,i){return(0,r.n)(e,this.getLayerChanges(t,i,a.xW.Structure),this.getLayerChanges(t,i,a.xW.Configuration),this.getLayerChanges(t,i,a.xW.Data))}getLayerChanges(e,t,i){return{previousValue:this.getLayerSafe(e,i),currentValue:this.getLayerSafe(t,i)}}getLayerSafe(e,t){return e&&e[t]}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(c.p),o.Y36(n.mQy),o.Y36(a.nY))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nui-pizzagna"]],inputs:{rootNode:"rootNode",pizzagna:"pizzagna",outputs:"outputs"},outputs:{pizzagnaChange:"pizzagnaChange",output:"output"},features:[o._Bn([c.p,l.v,{provide:a.nY,useClass:n.Ndp}]),o.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&o.YNc(0,g,4,6,"ng-container",0),2&e&&o.Q6J("ngIf",t.pizza&&t.pizza[t.rootNode])},directives:[d.O5,u.$,p.Pl],encapsulation:2}),e})()},46747:function(e,t,i){"use strict";i.d(t,{$:function(){return f}});var o=i(33018),n=i(81690),r=i.n(n),s=i(23348),a=i.n(s),l=i(18622),c=i.n(l),d=i(88229),u=i(79765),p=i(46782),h=i(5358),g=i(46806),m=i(62053);let f=(()=>{class e{constructor(e,t,i,n,r){this.injector=e,this.logger=t,this.portalService=i,this.renderer=n,this.providerRegistry=r,this.output=new o.vpe,this.propertiesChanges=new d.t,this.providerInstances={},this.destroy$=new u.xQ}ngOnInit(){this.logger.debug("Portal created:",this.componentId),this.recreatePortal()}ngAfterViewInit(){Object.keys(this.providerInstances).forEach(e=>{const t=this.providerInstances[e];t.ngAfterViewInit&&t.ngAfterViewInit()})}ngOnChanges(e){let t=!1;const i=e.providers;i&&!i.isFirstChange()&&(this.checkForProviderChanges(i)?(this.logger.debug("Portal recreated (provider change):",this.componentId),this.recreatePortal(),t=!0):this.updateProviderConfigurations(i)),e.componentType&&!e.componentType.isFirstChange()&&!t&&(this.logger.debug("Portal recreated (component change):",this.componentId),this.recreatePortal()),e.properties&&this.propertiesChanges.next(e.properties)}ngOnDestroy(){this.logger.debug("Portal destroyed:",this.componentId),this.destroyProviders(),this.destroy$.next(),this.destroy$.complete()}attached(e){this.component=e.instance,this.renderer.listen(e.location.nativeElement,"click",e=>{(e.ctrlKey||e.metaKey)&&e.shiftKey&&0===e.button&&(console.log("==================== PIZZAGNA DUMP ========================="),console.log("componentId:",this.componentId),console.log("component:",this.component),console.log("componentType:",this.componentType),console.log("properties:",this.properties),console.log("providers:",this.providers),console.log("providerInstances:",this.providerInstances),console.log("============================================================"))});for(const t of Object.keys(this.providerInstances)){const e=this.providerInstances[t];e.setComponent&&e.setComponent(this.component,this.componentId),e.setProviders&&e.setProviders(this.providerInstances,this.componentId)}this.subscribeToOutputs(),this.changesSubscription=this.propertiesChanges.pipe((0,p.R)(this.destroy$)).subscribe(e=>this.applyPropertiesChange(e))}recreatePortal(){this.changesSubscription&&(this.changesSubscription.unsubscribe(),this.changesSubscription=void 0,this.propertiesChanges=new d.t);let e=this.injector;if(this.destroyProviders(),this.providers&&(e=this.updateProviders(e)),this.portal=this.portalService.createComponentPortal(this.componentType,e),this.properties)for(const t of Object.keys(this.properties))this.propertiesChanges.next(new o.WD2(void 0,this.properties,!0))}updateProviders(e){const t=Object.keys(this.providers),i=t.reduce((e,t)=>(this.providers[t].providerId&&(e[t]=this.providerRegistry.getProvider(this.providers[t].providerId)),e),{}),o=this.portalService.createInjector({injector:e,providers:a()(i)});this.providerInstances=t.reduce((e,t)=>{const n=i[t],s=this.providers[t];if(n){const i=o.get(n.provide,null,null),a=r()(i)?i.find(e=>e instanceof n.useClass):i;if(!a)throw new Error("Provider '"+t+"' does not exist.");a.updateConfiguration&&s.properties&&a.updateConfiguration(Object.assign({providerKey:t},s.properties||{})),a.providerKey=t,e[t]=a}else s.providerId&&this.logger.error("There's no registered provider for id",t);return e},this.providerInstances);for(const n of Object.keys(this.providerInstances)){const e=this.providerInstances[n];e.ngOnInit&&e.ngOnInit()}return o}updateProviderConfigurations(e){for(const t of Object.keys(this.providers)){if(!this.providers[t].providerId)return;const i=this.providerInstances[t];if(!i)throw new Error("Provider '"+t+"' does not exist.");const o=e.previousValue[t],n=e.currentValue[t],r=n&&n.properties;(o&&o.properties)!==r&&i.updateConfiguration&&i.updateConfiguration(Object.assign({providerKey:t},r))}}subscribeToOutputs(){if(this.outputs)for(const e of this.outputs.filter(e=>this.component[e]instanceof o.vpe))this.component[e].pipe((0,p.R)(this.destroy$)).subscribe(t=>{this.output.emit({id:e,payload:t})})}checkForProviderChanges(e){const t=e.previousValue?Object.keys(e.previousValue):[],i=e.currentValue?Object.keys(e.currentValue):[];if(t.length!==i.length||c()(t,i).length>0)return!0;const o=Object.keys(e.previousValue).map(t=>e.previousValue[t].providerId),n=Object.keys(e.currentValue).map(t=>e.currentValue[t].providerId);return c()(o,n).length>0}destroyProviders(){if(this.providerInstances)for(const e of Object.keys(this.providerInstances)){const t=this.providerInstances[e];t.ngOnDestroy&&t.ngOnDestroy(),delete this.providerInstances[e]}}applyPropertiesChange(e){let t=e.currentValue;if(!t)return;t=Object.assign(Object.assign({},t),{componentId:this.componentId});const i={};let n=!1;for(const r of Object.keys(t)){const s=this.component[r];t[r]!==s&&(n=!0,this.component[r]=t[r],this.component.ngOnChanges&&(i[r]=new o.WD2(s,t[r],e.isFirstChange())))}if(n){this.component.ngOnChanges&&this.component.ngOnChanges(i);const e=this.component.changeDetector;e?e.markForCheck():this.logger.warn(`Property 'changeDetector' is missing on component '${this.componentType}', so dynamic refresh of given component might not work.`)}}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.zs3),o.Y36(g.mQy),o.Y36(m.$),o.Y36(o.Qsj),o.Y36(h.C))},e.\u0275dir=o.lG2({type:e,selectors:[["","nuiComponentPortal",""]],inputs:{componentId:"componentId",componentType:"componentType",properties:"properties",providers:"providers",outputs:"outputs"},outputs:{output:"output"},exportAs:["nuiComponentPortal"],features:[o.TTD]}),e})()},48876:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});var o=i(65470);function n(e){return e.providerKey?[e.pizzagnaKey||o.xW.Data,e.componentId,"providers",e.providerKey,"properties",...e.propertyPath].join("."):[e.pizzagnaKey||o.xW.Data,e.componentId,"properties",...e.propertyPath].join(".")}},62053:function(e,t,i){"use strict";i.d(t,{$:function(){return l}});var o=i(87636),n=i(33018),r=i(52409),s=i(8214),a=i(46806);let l=(()=>{class e{constructor(e,t){this.componentRegistry=e,this.logger=t}createComponentPortal(e,t){let i;return i="string"==typeof e?this.componentRegistry.getComponentType(e):e,i||(this.logger.error(`Cannot Find Component Type ${e}`),i=r.q),new o.C5(i,null,t)}createInjector(e){return n.zs3.create({providers:e.providers||[],parent:e.injector,name:"Component Injector"})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(s.h),n.LFG(a.mQy))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8214:function(e,t,i){"use strict";i.d(t,{h:function(){return r}});var o=i(33018),n=i(46806);let r=(()=>{class e{constructor(e){this.logger=e,this.components={}}registerByLateLoadKey(e){this.registerComponentType(e.lateLoadKey,e)}registerComponentType(e,t){this.components[e]=t}getComponentType(e){const t=this.components[e];return t||this.logger.warn("Component '"+e+"' not defined. Available components: "+JSON.stringify(Object.keys(this.components))),t}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(n.mQy))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},17654:function(e,t,i){"use strict";i.d(t,{v:function(){return s}});var o=i(46806),n=i(65470),r=i(33018);let s=(()=>{class e{getPizzagnaUpdatedWithComponents(e,t,i){var o;const r=null===(o=e[n.xW.Structure][t].properties)||void 0===o?void 0:o.template;return this.getPizzagnaWithChildren(e,i,r,t)}getPizzagnaWithChildren(e,t,i,o){let n=t.map(e=>({id:e,componentType:"WidgetConfiguratorSectionComponent"})).reduce((e,t)=>this.updateChildPizzagna(e,i,t),e);return n=this.getPizzagnaWithNodesSet(n,o,t),n}updateChildPizzagna(e,t,i){let r=(0,o.zdu)(e,`${n.xW.Structure}.${i.id}`,i);const s=t.map(e=>Object.assign(Object.assign({},e),{id:`${i.id}/${e.id}`}));r=s.reduce((e,t)=>(0,o.zdu)(e,`${n.xW.Structure}.${t.id}`,t),r);const a=s.map(e=>e.id);return r=this.getPizzagnaWithNodesSet(r,i.id,a),r}getPizzagnaWithNodesSet(e,t,i){return(0,o.zdu)(e,`${n.xW.Structure}.${t}.properties.nodes`,i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})()},92954:function(e,t,i){"use strict";i.d(t,{p:function(){return g}});var o=i(46806),n=i(81690),r=i.n(n),s=i(12482),a=i.n(s),l=i(88229),c=i(39973),d=i(65470),u=i(48876),p=i(17654),h=i(33018);let g=(()=>{class e{constructor(e,t){this.eventBus=e,this.dynamicComponentCreator=t,this.pizzaChanged=new l.t(1)}updatePizzagna(e){this.pizzagna=e}updateComponents(e){this.components=e,this.pizzaChanged.next(e)}getComponent(e){const t=this.components[e];if(!t)throw new Error("Component '"+e+"' is not defined!");return t}setProperty(e,t){const i="string"==typeof e?e:(0,u.Z)(e);this.eventBus.getStream(c.M).next({payload:{path:i,value:t}})}createComponentsFromTemplateWithProperties(e,t){const i=t.map(e=>e.id);let n=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,e,i);for(const r of t)for(const e of Object.keys(r.children))n=(0,o.zdu)(n,`${d.xW.Data}.${e}.properties`,r.children[e]);this.updatePizzagna(n),this.eventBus.getStream(c.M).next({payload:{path:"",value:n}})}createComponentsFromTemplate(e,t){const i=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,e,t);this.updatePizzagna(i),this.eventBus.getStream(c.M).next({payload:{path:"",value:i}})}removeComponents(e){r()(e)?e.forEach(e=>this.removeComponent(e)):this.removeComponent(e)}removeComponent(e){var t;const i=Object.assign({},this.pizzagna),o=[e,...null===(t=this.pizzagna[d.xW.Structure][e].properties)||void 0===t?void 0:t.nodes],n=[d.xW.Structure,d.xW.Configuration,d.xW.Data];for(const r of n)if(i[r])for(const e of o)i[r]=a()(i[r],e);this.eventBus.getStream(c.M).next({payload:{path:"",value:i}}),this.updatePizzagna(i)}}return e.\u0275fac=function(t){return new(t||e)(h.LFG(d.nY),h.LFG(p.v))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e})()},96800:function(e,t,i){"use strict";i.d(t,{o:function(){return n}});var o=i(33018);let n=(()=>{class e{constructor(){this.events={}}registerEvent(e){this.events[e.id]=e}getEvent(e){const t=this.events[e];if(!t)throw new Error("Event with id '"+e+"' is not registered. Registered events are: "+JSON.stringify(Object.keys(this.events)));return t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},78990:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var o=i(33018);const n={">":{comparatorFn:(e,t)=>e>t,label:"Value is greater than"},"<":{comparatorFn:(e,t)=>e<t,label:"Value is less than"},">=":{comparatorFn:(e,t)=>e>=t,label:"Value is greater, or equal to"},"<=":{comparatorFn:(e,t)=>e<=t,label:"Value is less than, or equal to"},"==":{comparatorFn:(e,t)=>e==t,label:"Value is exactly"}};let r=(()=>{class e{constructor(){this.comparators=Object.assign({},n)}registerComparators(e){this.comparators=Object.assign(Object.assign({},this.comparators),e)}clearComparators(){this.comparators={}}getComparators(){return this.comparators}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},5358:function(e,t,i){"use strict";i.d(t,{C:function(){return Te}});var o=i(38583),n=i(33018),r=i(46806),s=i(54910),a=i(64762),l=i(46782),c=i(92954),d=i(39973),u=i(65470);let p=class extends s.i{constructor(e,t,i){super(e,t,i),this.dataSource=t,this.drillstate=[],this.eventBus.getStream(d.EC).pipe((0,l.R)(this.destroy$)).subscribe(e=>{var t;(null===(t=this.dataSource.busy)||void 0===t?void 0:t.value)||this.onDrilldown(e)}),this.registerFilters()}updateAdapterProperties(e){this.dataPath=e.dataPath,this.drillstate=e.drillstate||this.drillstate,this.groupBy=e.groupBy,this.componentsConfig=e.componentsConfig,this.navigationBarId=e.navigationBarId}updateOutput(e){const t=this.getWidgetInput(e,this.drillstate.length!==this.groupBy.length);if(this.pizzagnaService.setProperty(`${u.xW.Data}.${this.componentId}.properties`,t),this.navigationBarId){const e=`${u.xW.Data}.${this.navigationBarId}.properties.navBarConfig.isRoot`,t=`${u.xW.Data}.${this.navigationBarId}.properties.navBarConfig.buttons.back.disabled`;this.pizzagnaService.setProperty(`${u.xW.Data}.${this.navigationBarId}.properties.navBarConfig.label`,this.drillstate[this.drillstate.length-1]),this.pizzagnaService.setProperty(t,!!this.drillstate.length),this.pizzagnaService.setProperty(e,!this.drillstate.length)}}getWidgetInput(e,t){return{[this.dataPath]:e,configuration:this.componentsConfig[t?"group":"leaf"]}}onDrilldown(e){const{payload:t}=e;return t.reset?(this.drillstate=[],void this.eventBus.next(d.RG)):t.back?(this.drillstate.length=this.drillstate.length-1,void this.eventBus.next(d.RG)):(this.drillstate.push(t.id),void this.eventBus.next(d.RG))}registerFilters(){this.dataSource.registerComponent({group:{componentInstance:{getFilters:()=>({value:this.groupBy})}},drillstate:{componentInstance:{getFilters:()=>({value:this.drillstate})}}})}};p=(0,a.gn)([(0,a.fM)(0,(0,n.tBr)(u.nY)),(0,a.fM)(1,(0,n.tBr)(u.Fk)),(0,a.w6)("design:paramtypes",[r.Ndp,Object,c.p])],p);var h=i(79765);let g=(()=>{class e{constructor(e){this.eventBus=e,this.destroy$=new h.xQ,e.streamAdded.pipe((0,l.R)(this.destroy$)).subscribe(t=>{e.getStream({id:t}).pipe((0,l.R)(this.destroy$)).subscribe(e=>{console.log(`${e.id}: `,e.payload)})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var m=i(83645),f=i(78990);let v=(()=>{class e{constructor(e,t,i){this.dataSource=e,this.pizzagnaService=t,this.destroy$=new h.xQ,this.propertyPath="backgroundColor",this.comparators=i.getComparators()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateConfiguration(e){(null==e?void 0:e.rules)&&(this.rules=null==e?void 0:e.rules,this.subscribeToDataChanges(),this.checkColorConditions())}setComponent(e,t){this.subscribeToDataChanges(),this.componentId=t}subscribeToDataChanges(){var e;!this.dataSource||(null===(e=this.dsSubscription$)||void 0===e||e.unsubscribe(),this.dsSubscription$=this.dataSource.outputsSubject.pipe((0,l.R)(this.destroy$)).subscribe(e=>{var t;this.latestValueFromDS=(null===(t=e.result)||void 0===t?void 0:t.value)||this.latestValueFromDS,this.checkColorConditions()}))}checkColorConditions(){var e,t;if(!this.rules)return;if(0===this.rules.length)return this.setColor(void 0),void(null===(e=this.dsSubscription$)||void 0===e||e.unsubscribe());let i;const o=this.rules&&[...this.rules].reverse();for(const n of o)if(null===(t=this.comparators[n.comparisonType])||void 0===t?void 0:t.comparatorFn(this.latestValueFromDS,n.value)){i=n.color;break}this.setColor(i)}setColor(e){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:[this.propertyPath]},e)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.Fk,8),n.LFG(c.p),n.LFG(f.Z))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var y=i(28303),b=i.n(y),C=(()=>{return(e=C||(C={})).Warning="var(--nui-color-semantic-warning)",e.Critical="var(--nui-color-semantic-critical)",C;var e})();let x=class extends s.i{constructor(e,t,i,o){super(e,t,i),this.numberPipe=o}updateConfiguration(e){this.thresholds=e.thresholds,super.updateConfiguration(e)}processOutput(e){const t=this.processThresholds(e);return this.processNumberFormat(t)}setComponent(e,t){t&&(this.componentId=t)}getThresholdColor(e,t,i){const o=this.getThresholdChecks(e,t,e.reversedThresholds);return o.warningCheck?C.Warning:o.criticalCheck?C.Critical:i}getThresholdChecks(e,t,i){const o=e.warningThresholdValue,n=e.criticalThresholdValue,r=!b()(o)&&t.value<=o&&t.value>n,s=t.value<=n,a=!b()(o)&&t.value>=o&&t.value<n;return{warningCheck:i?r:a,criticalCheck:i?s:t.value>=n}}processThresholds(e){var t;if(!e||!(null===(t=this.thresholds)||void 0===t?void 0:t.showThresholds)||"number"!=typeof e.value)return e;const i=this.getThresholdColor(this.thresholds,e,e.backgroundColor);return Object.assign(Object.assign({},e),{backgroundColor:i})}processNumberFormat(e){if("number"!=typeof(null==e?void 0:e.value)||!(null==e?void 0:e.numberFormat))return e;const t=this.numberPipe.transform(e.value,e.numberFormat);return Object.assign(Object.assign({},e),{value:t})}};x=(0,a.gn)([(0,a.fM)(0,(0,n.tBr)(u.nY)),(0,a.fM)(1,(0,n.FiY)()),(0,a.fM)(1,(0,n.tBr)(u.Fk)),(0,a.w6)("design:paramtypes",[r.Ndp,Object,c.p,o.JJ])],x);var w=i(81690),T=i.n(w),S=i(26215),I=i(45435),_=i(87519),A=i(68307);let z=(()=>{class e{constructor(e,t){this.eventBus=e,this.pizzagnaService=t,this.brokers=[],this.builder=new k(this.brokers),this.destroySubscriptions$=new h.xQ,this.getMin=e=>Math.min(...e),this.getMax=e=>Math.max(...e),this.valuesObject=this.builder.valuesObject}updateConfiguration(e){this.properties=e,this.componentId&&this.createPropertiesAndSubscribeToBrokers()}configure(){return this.builder}getBrokers(){return this.brokers}subscribeToBrokers(){this.destroy(),this.brokers.forEach(e=>{e.in$.pipe((0,I.h)(t=>!!e.in$.observers.length),(0,_.x)(),(0,A.b)(e=>this.configureValueModel(e)),(0,A.b)(t=>this.processAndEmitSyncedValue(t,e)),(0,l.R)(this.destroySubscriptions$)).subscribe()})}setComponent(e,t){this.componentId=t,this.updateConfiguration(this.properties)}destroy(){this.destroySubscriptions$.next(),this.destroySubscriptions$.complete()}processAndEmitSyncedValue(e,t){let i=this.getMin;(null==t?void 0:t.type)&&(i="min"===t.type?this.getMin:this.getMax);const o=this.valuesObject[t.id].filter(e=>e.targetID&&e.targetValue).map(e=>e.targetValue);t.out$.next(Object.assign(Object.assign({},e),{targetValue:i([...o])}))}configureValueModel(e){const t=this.valuesObject[e.id].filter(t=>t.targetID===e.targetID);t.length?t[0].targetValue=e.targetValue:this.valuesObject[e.id].push({targetID:e.targetID,targetValue:e.targetValue})}createPropertiesAndSubscribeToBrokers(){var e,t;this.tileNodes=null===(e=this.pizzagnaService.getComponent(this.componentId).properties)||void 0===e?void 0:e.nodes;const{scaleSyncConfig:i}=this.properties;(null===(t=this.tileNodes)||void 0===t?void 0:t.length)&&(this.tileNodes.forEach((e,t)=>{this.pizzagnaService.setProperty({componentId:e,pizzagnaKey:u.xW.Data,propertyPath:["syncValuesBroker"]},this.getBrokers())}),i&&T()(i)&&(i.forEach(e=>this.configure().addBroker({id:e.id,type:null==e?void 0:e.type})),this.subscribeToBrokers()))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY),n.LFG(c.p))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();class k{constructor(e){this.brokers=e,this.valuesObject={}}addBroker(e){const t={id:e.id,targetID:"",targetValue:1};return this.valuesObject[e.id]=new Array,this.brokers.push(Object.assign(Object.assign({},e),this.getDefaultBrokerObject(t,t))),this}getDefaultBrokerObject(e,t){return{in$:new S.X(e),out$:new S.X(t)}}}var Z=i(12232),O=i.n(Z),P=i(72699),$=i.n(P),F=i(7350);let D=(()=>{class e{constructor(e,t){this.eventBus=e,this.pizzagnaService=t,this.destroy$=new h.xQ,this.eventBus.getStream(F.PF).pipe((0,l.R)(this.destroy$)).subscribe(e=>{this.handleDataSourceOutput(e)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(e,t){this.componentId=t}handleDataSourceOutput(e){var t,i,o,n;this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:u.xW.Data},void 0!==(null===(i=null===(t=e.payload)||void 0===t?void 0:t.error)||void 0===i?void 0:i.type)?null===(n=null===(o=e.payload)||void 0===o?void 0:o.error)||void 0===n?void 0:n.type.toString():void 0)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY),n.LFG(c.p))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})(),M=(()=>{class e extends D{constructor(e,t){super(e,t),this.multipleErrorFallbackKey=u.WE.Unknown,this.errorMap={},this.eventBus.getStream(F.yX).pipe((0,l.R)(this.destroy$)).subscribe(e=>{this.handleDataSourceDestroyed(e)})}updateConfiguration(e){e.multipleErrorFallbackKey&&(this.multipleErrorFallbackKey=e.multipleErrorFallbackKey)}handleDataSourceOutput(e){this.errorMap=this.updateErrorMap(e),this.setFallbackKeyProperty()}handleDataSourceDestroyed(e){var t;(null===(t=e.payload)||void 0===t?void 0:t.componentId)&&delete this.errorMap[e.payload.componentId],this.setFallbackKeyProperty()}setFallbackKeyProperty(){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:u.xW.Data},this.getFallbackKey())}getFallbackKey(){if(O()(this.errorMap))return;const e=$()(Object.values(this.errorMap));return 1===e.length?e[0]:this.multipleErrorFallbackKey}updateErrorMap(e){var t,i,o,n;const r=this.errorMap,s=void 0!==(null===(i=null===(t=e.payload)||void 0===t?void 0:t.error)||void 0===i?void 0:i.type)?null===(n=null===(o=e.payload)||void 0===o?void 0:o.error)||void 0===n?void 0:n.type.toString():void 0;return s?s&&(r[e.payload.componentId]=s):delete r[e.payload.componentId],r}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY),n.LFG(c.p))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})(),R=(()=>{class e{constructor(e,t){this.eventBus=e,this.pizzagnaService=t,this.loadingMap={},this.destroy$=new h.xQ,this.eventBus.getStream(d.QD).pipe((0,l.R)(this.destroy$)).subscribe(({payload:e})=>{(null==e?void 0:e.componentId)&&((null==e?void 0:e.busy)?this.loadingMap[e.componentId]=!0:delete this.loadingMap[e.componentId]),this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["active"],pizzagnaKey:u.xW.Data},!O()(this.loadingMap))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(e,t){this.componentId=t}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY),n.LFG(c.p))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var J=i(58102),L=i.n(J),E=i(88002);const q=/\{.*?\}/g,B=/\{|\}/g;function N(e,t){const i=e.match(q);if(!i)return e;let o=e;for(const n of i){const e=Q(n);t[e]?o=o.replace(n,t[e]):console.warn(`There's no ${n} key found in the data: ${t}`)}return o}const Q=e=>e.replace(B,"");let Y=(()=>{class e{constructor(e){this.pizzagnaService=e,this.defaultTrackOn="pizzagna",this.subscriptions=[]}setComponent(e,t){this.component=e,this.componentId=t,this.parentComponentId=function(e){const t=e.split("/");return(null==t?void 0:t.length)>1?t[t.length-2]:e}(t),this.initChangeSubscriptions()}updateConfiguration(e){this.configs=null==e?void 0:e.configs}initChangeSubscriptions(){for(const e of this.configs){const t=this.getObservableFor(e);if(!t)return void console.warn("no observable found on 'PizzagnaBroadcasterService', for part: ",e);const i=t.subscribe(t=>{for(const i of e.paths){const e=N(i,this);this.pizzagnaService.setProperty(e,t)}});this.subscriptions.push(i)}}getObservableFor(e){return"component"===(e.trackOn||this.defaultTrackOn)?this.getComponentObservableFor(e):this.getPizzagnaObservableFor(e)}getPizzagnaObservableFor(e){return this.pizzagnaService.pizzaChanged.pipe((0,E.U)(t=>L()(t,e.key)),(0,_.x)())}getComponentObservableFor(e){const t=L()(this.component,e.key);return null==t?void 0:t.pipe((0,_.x)())}ngOnDestroy(){for(const e of this.subscriptions)e.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(c.p))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var V=i(388),W=i(43397),j=i(37367),H=i(81354),U=i(34317),G=i(72459),K=i(31133),X=i.n(K),ee=i(95819),te=i(28726);let ie=(()=>{class e extends ee.a{constructor(e,t,i){super(e,t,i)}get previewComponentId(){return this.componentId.split("/")[0]}updateConfiguration(e){e&&e.formParts&&(this.formParts=e.formParts)}buildForm(){const e=this.getPreview(),t=this.formParts.reduce((t,i)=>{const o=`${this.previewComponentId}.${i.previewPath}`,n=L()(e,o);if(n)for(const e of i.keys)void 0!==n[e]&&(t=(0,r.zdu)(t,`${u.xW.Data}.${this.componentId}.properties.${e}`,n[e]));return t},this.pizzagnaService.pizzagna);this.updateFormPizzagna(t)}toPreview(e){e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(e=>{const t=this.formParts.reduce((t,i)=>{let o=i.previewOutputPath||i.previewPath;o=`${this.previewComponentId}.${o}`;const n=L()(t,o),s=X()(e,i.keys),a=Object.assign(Object.assign({},n),s);return(0,r.zdu)(t,`${o}`,a)},this.getPreview());this.updatePreview(t)})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY),n.LFG(te.m),n.LFG(c.p))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var oe=i(79705),ne=i(82262);let re=(()=>{class e extends ee.a{constructor(e,t,i){super(e,t,i)}get previewComponentId(){return this.componentId.split("/")[0]}updateConfiguration(e){e&&e.formParts&&(this.formParts=e.formParts)}buildForm(){const e=this.getPreview(),t=this.formParts.reduce((t,i)=>{const o=L()(e,i.previewPath),n=null==o?void 0:o.find(e=>e.id===this.previewComponentId),s=X()(n,i.keys);return(0,r.zdu)(t,`${u.xW.Data}.${this.componentId}.properties`,s)},this.pizzagnaService.pizzagna);this.updateFormPizzagna(t)}toPreview(e){e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(e=>{const t=this.formParts.reduce((t,i)=>{const o=i.previewOutputPath||i.previewPath,n=L()(t,o),s=n.findIndex(e=>e.id===this.previewComponentId),a=n[s],l=X()(e,i.keys),c=Object.assign(Object.assign({},a),l);return(0,r.zdu)(t,`${o}[${s}]`,c)},this.getPreview());this.updatePreview(t)})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY),n.LFG(te.m),n.LFG(c.p))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})(),se=(()=>{class e extends ee.a{constructor(e,t,i){super(e,t,i)}updateConfiguration(e){e&&e.formParts&&(this.formParts=e.formParts)}buildForm(){const e=this.getPreview(),t=this.formParts.reduce((t,i)=>{const o=L()(e,i.previewPath);if(o)for(const e of i.keys)void 0!==o[e]&&(t=(0,r.zdu)(t,`${u.xW.Data}.${this.componentId}.properties.${e}`,o[e]));return t},this.pizzagnaService.pizzagna);this.updateFormPizzagna(t)}toPreview(e){e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(e=>{const t=this.formParts.reduce((t,i)=>{const o=i.previewOutputPath||i.previewPath,n=L()(t,o),s=X()(e,i.keys),a=Object.assign(Object.assign({},n),s);return(0,r.zdu)(t,o,a)},this.getPreview());this.updatePreview(t)})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY),n.LFG(te.m),n.LFG(c.p))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var ae=i(45626),le=i(90665),ce=i(49977),de=i.n(ce),ue=i(39761),pe=i(92996);let he=(()=>{class e extends ee.a{constructor(e,t,i){super(e,t,i)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var e,t,i,o;const n=null===(e=this.getPreview())||void 0===e?void 0:e.table,s=null===(t=null==n?void 0:n.properties)||void 0===t?void 0:t.dataFields,a=null===(o=null===(i=null==n?void 0:n.properties)||void 0===i?void 0:i.configuration)||void 0===o?void 0:o.columns;let l=this.pizzagnaService.pizzagna;l=(0,r.zdu)(l,`${u.xW.Data}.columns.properties.columns`,null!=a?a:[]),l=(0,r.zdu)(l,`${u.xW.Data}.columns.properties.dataFields`,s),this.updateFormPizzagna(l)}toPreview(e){const t=e.contains("columnsOutput")?e.get("columnsOutput"):e.get("columns");if(!t)throw new Error("FormControl is not defined!");t.valueChanges.pipe((0,l.R)(this.destroy$),(0,_.x)(de())).subscribe(e=>{setTimeout(()=>{const t=this.getPreview();this.updatePreview((0,r.zdu)(t,"table.properties.configuration.columns",e))});let t=this.pizzagnaService.pizzagna;setTimeout(()=>{var i,o,n,s;t=(0,r.zdu)(t,`${u.xW.Structure}.columns.properties.template`,null===(i=this.pizzagnaService.pizzagna[u.xW.Structure].columns.properties)||void 0===i?void 0:i.template),t=(0,r.zdu)(t,`${u.xW.Data}.filters.properties.columns`,e),t=(0,r.zdu)(t,`${u.xW.Structure}.presentation.properties.nodes`,[...null===(s=null===(n=null===(o=null==t?void 0:t.structure)||void 0===o?void 0:o.presentation)||void 0===n?void 0:n.properties)||void 0===s?void 0:s.nodes]),this.updateFormPizzagna(t)})}),this.subscribeToColumnsValueChange()}subscribeToColumnsValueChange(){var e;null===(e=this.component.form.get("columnsOutput"))||void 0===e||e.valueChanges.pipe((0,ue.O)(this.component.form.get("columnsOutput").value),(0,I.h)(e=>e.length>0),(0,A.b)(()=>this.handleWidthValidation()),(0,E.U)(e=>this.filterColumnsWithoutSpecifiedWidth(e)),(0,E.U)(e=>this.handleColumnsWithoutSpecifiedWidth(e)),(0,_.x)((e,t)=>e.id===t.id),(0,pe.j)("id"),(0,l.R)(this.destroy$)).subscribe(e=>this.setWidthMessages(e))}filterColumnsWithoutSpecifiedWidth(e){return e.filter(e=>e.isActive&&!e.width)}handleColumnsWithoutSpecifiedWidth(e){switch(e.length){case 0:{const e=this.component.form.get("columns").controls.filter(e=>L()(e,`value.properties[${e.value.id}/description].isActive`));if(O()(e))return{id:void 0,label:void 0};const t=e[e.length-1];return console.warn(`Cannot set width for all columns. Resetting "${t.value.label}" width.`),t.patchValue({width:null},{emitEvent:!1}),t.value}case 1:return e[0];default:return{id:void 0,label:void 0}}}handleWidthValidation(){this.component.form.get("columns").controls.forEach(e=>{var t;const i=e.get(`properties.${e.value.id}/description`);if(!i)return;const o=null===(t=i.get("isActive"))||void 0===t?void 0:t.value,n=i.get("width");o?(null==n||n.setValidators([le.kI.min(62)]),null==n||n.markAllAsTouched(),null==n||n.updateValueAndValidity({emitEvent:!1})):(null==n||n.clearValidators(),null==n||n.updateValueAndValidity({emitEvent:!1}))})}setWidthMessages(e){var t;if(!this.pizzagnaService.pizzagna)return;const i="isWidthMessageDisplayed",{pizzagna:o}=this.pizzagnaService;(null===(t=o.data.columns.properties)||void 0===t?void 0:t.columns).forEach(e=>this.pizzagnaService.setProperty(`${u.xW.Data}.${e.id}/description.properties.${i}`,!1)),e&&this.pizzagnaService.setProperty(`${u.xW.Data}.${e}/description.properties.${i}`,!0)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY),n.LFG(te.m),n.LFG(c.p))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})(),ge=(()=>{class e extends ee.a{constructor(e,t,i){super(e,t,i)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var e,t,i,o,n;let s=this.pizzagnaService.pizzagna;const a=null===(e=this.getPreview())||void 0===e?void 0:e.table,l=null===(i=null===(t=null==a?void 0:a.properties)||void 0===t?void 0:t.configuration)||void 0===i?void 0:i.columns,c=null===(n=null===(o=null==a?void 0:a.properties)||void 0===o?void 0:o.configuration)||void 0===n?void 0:n.sorterConfiguration;s=(0,r.zdu)(s,`${u.xW.Data}.filters.properties.columns`,l),s=(0,r.zdu)(s,`${u.xW.Data}.filters.properties.sorterConfiguration`,c),this.updateFormPizzagna(s)}toPreview(e){e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(e=>{let t=this.getPreview();t=(0,r.zdu)(t,"table.properties.configuration.sorterConfiguration",e.sorterConfiguration),this.updatePreview(t),this.buildForm()})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY),n.LFG(te.m),n.LFG(c.p))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})(),me=(()=>{class e extends ee.a{constructor(e,t,i,o){super(e,t,i),this.timeframeService=o}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){let e=this.pizzagnaService.pizzagna;const t=this.getPreview(),i=Object.keys(this.timeframeService.currentPresets).map(e=>({id:e,name:this.timeframeService.currentPresets[e].name})),o=`${u.xW.Data}.timeseriesMetadata.properties`;e=(0,r.zdu)(e,`${o}.timeSpans`,i);const n=L()(t,"timeframeSelection.properties.timeframe.selectedPresetId","last7Days"),s=i.find(e=>e.id===n);s&&(e=(0,r.zdu)(e,`${o}.startingTimespan`,s));const a=L()(t,"chart.properties.configuration");a&&(e=(0,r.zdu)(e,`${o}.legendPlacement`,a.legendPlacement),e=(0,r.zdu)(e,`${o}.leftAxisLabel`,a.leftAxisLabel),e=(0,r.zdu)(e,`${o}.preset`,a.preset)),this.updateFormPizzagna(e)}toPreview(e){e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(e=>{let t=this.getPreview();const i=L()(e,"startingTimespan.id");i&&(t=(0,r.zdu)(t,"timeframeSelection.properties.timeframe.selectedPresetId",i));const o="chart.properties.configuration";t=(0,r.zdu)(t,`${o}.legendPlacement`,L()(e,"legendPlacement","")),t=(0,r.zdu)(t,`${o}.leftAxisLabel`,L()(e,"leftAxisLabel","")),t=(0,r.zdu)(t,`${o}.preset`,L()(e,"preset","")),this.updatePreview(t)})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY),n.LFG(te.m),n.LFG(c.p),n.LFG(r.hYR))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var fe=i(10841);let ve=(()=>{class e extends ee.a{constructor(e,t,i){super(e,t,i),this.previewSeriesPath=`chart.providers.${u.Mu.Adapter}.properties.series`}get previewComponentId(){return this.componentId.split("/")[0]}buildForm(){const e=L()(this.getPreview(),this.previewSeriesPath,[]).find(e=>e.id===this.previewComponentId),t=(0,r.zdu)(this.pizzagnaService.pizzagna,`${u.xW.Data}.${this.componentId}.properties`,{selectedSeriesId:e&&e.selectedSeriesId});this.updateFormPizzagna(t)}toPreview(e){e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(e=>{const t=e.id,i=this.getPreview(),o=L()(i,this.previewSeriesPath,[]),n=o.findIndex(e=>e.id===this.previewComponentId);if(n>-1){const e=[...o];e[n]=Object.assign(Object.assign({},e[n]),{selectedSeriesId:t});const s=(0,r.zdu)(i,`${this.previewSeriesPath}`,e);this.updatePreview(s)}})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(u.nY),n.LFG(te.m),n.LFG(c.p))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var ye=i(91363),be=i(96800),Ce=i(34357),xe=i(84356),we=i(96465);let Te=(()=>{class e{constructor(e){this.logger=e,this.staticProviders={},this.setProviders({[d.tc]:{provide:V.q,deps:[u.nY,n.R0b,W.g]},[d.GN]:{provide:we.q,deps:[u.nY,[new n.FiY,u.Bc],[new n.FiY,xe.I],be.o,c.p]},[d.bZ]:{provide:s.i,deps:[u.nY,[new n.FiY,u.Fk],c.p]},[d.l5]:{provide:j.Y,deps:[u.nY,[new n.FiY,u.Fk],c.p,r.zCP]},[d.R9]:{provide:H.f,deps:[u.nY,[new n.FiY,u.Fk],c.p]},[d.u1]:{provide:x,deps:[u.nY,[new n.FiY,u.Fk],c.p,o.JJ]},[d.mf]:{provide:p,deps:[u.nY,[new n.FiY,u.Fk],c.p]},[d.tS]:{provide:v,deps:[[new n.FiY,u.Fk],c.p,f.Z]},[d.j4]:{provide:ye.l,useClass:ae.c,deps:[u.nY,te.m,c.p]},[d.dz]:{provide:ye.l,useClass:ne.M,deps:[u.nY,te.m,c.p]},[d.ns]:{provide:ye.l,useClass:oe.l,deps:[u.nY,te.m,c.p]},[d.YN]:{provide:ye.l,useClass:ie,deps:[u.nY,te.m,c.p]},[d.VX]:{provide:ye.l,useClass:se,deps:[u.nY,te.m,c.p]},[d.Es]:{provide:ye.l,useClass:re,deps:[u.nY,te.m,c.p]},[d.Gq]:{provide:ye.l,useClass:ve,deps:[u.nY,te.m,c.p,r.hYR]},[d.dZ]:{provide:ye.l,useClass:me,deps:[u.nY,te.m,c.p,r.hYR]},[d.Ip]:{provide:ye.l,useClass:fe.w,deps:[u.nY,te.m,c.p]},[d.n5]:{provide:ye.l,useClass:he,deps:[u.nY,te.m,c.p]},[d.LU]:{provide:ye.l,useClass:ge,deps:[u.nY,te.m,c.p]},[d.IG]:{provide:R,deps:[u.nY,c.p]},[d.Cz]:{provide:D,deps:[u.nY,c.p]},[d.C]:{provide:M,deps:[u.nY,c.p]},[d.$u]:{provide:z,deps:[u.nY,c.p]},[d.DJ]:{provide:m.O,deps:[u.nY,"windowObject",r.mQy]},[d.F]:{provide:g,deps:[u.nY]},[d.Vx]:{provide:r.zCP,deps:[]},[d.m_]:{provide:Y,deps:[c.p]},[d.Hp]:{provide:u.m4,useExisting:Ce.C,deps:[c.p]},[d.s6]:{provide:u.m4,useExisting:Ce.YX,deps:[c.p]},[d.rf]:{provide:u.m4,useExisting:Ce.UA,deps:[c.p]},[d.Xh]:{provide:G.q,deps:[u.nY,[new n.FiY,U.e]]}})}setProviders(e){this.staticProviders=Object.assign({},this.staticProviders,e)}getProvider(e){const t=this.staticProviders[e];return t||(this.logger.warn("No provider registered for id",e),this.logger.warn("Known providers:",Object.keys(this.staticProviders).join(", "))),t}getProviderInstance(e,t){return n.zs3.create({providers:[e],parent:t}).get(u.Fk)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(r.mQy))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},52198:function(e,t,i){"use strict";i.d(t,{k:function(){return a}});var o=i(46806),n=i(26215),r=i(88002),s=i(33018);let a=(()=>{class e{constructor(e,t){this.logger=e,this.className=t,this.state$=new n.X({}),this.stateChanged$=this.state$.asObservable().pipe((0,r.U)(()=>this.getItems())),this._isEmpty=!0}get stateVersion(){return this._stateVersion}get isEmpty(){return this._isEmpty}addItems(e,t={overrideExisting:!0}){const i=this.state$.value;e.forEach(e=>{!i[this.getItemKey(e)]||t.overrideExisting?i[this.getItemKey(e)]=Object.assign({},e):this.logger.warn(`Logger - ${this.className}: item with ${this.getItemKey(e)}\n                    is already registered. Skipping.`)}),this.state$.next(i),e.length>0&&this.updateStateFlags(!1)}getItem(e){return this.state$.value[e]}getItems(){return Object.values(this.state$.value)}reset(){this.state$.next({}),this.updateStateFlags(!0)}ngOnDestroy(){this.state$.complete()}updateStateFlags(e){this._isEmpty=e,this._stateVersion=(0,o.VjN)()}}return e.\u0275fac=function(e){s.$Z()},e.\u0275dir=s.lG2({type:e}),e})()},34357:function(e,t,i){"use strict";i.d(t,{C:function(){return a},YX:function(){return l},UA:function(){return c},qy:function(){return d}});var o=i(52198),n=i(33018),r=i(46806);class s extends o.k{constructor(){super(...arguments),this.formattersStateChanged$=this.stateChanged$}addFormatters(e,t={overrideExisting:!0}){super.addItems(e,t)}getFormatters(){return super.getItems()}getItemKey(e){return e.componentType}}let a=(()=>{class e extends s{constructor(e){super(e,"TableFormatterRegistryService")}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(r.mQy))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),l=(()=>{class e extends s{constructor(e){super(e,"KpiFormattersRegistryService")}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(r.mQy))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),c=(()=>{class e extends s{constructor(e){super(e,"ProportionalDonutContentFormattersRegistryService")}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(r.mQy))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),d=(()=>{class e extends s{constructor(e){super(e,"ProportionalLegendFormattersRegistryService")}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(r.mQy))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},39973:function(e,t,i){"use strict";i.d(t,{XM:function(){return s},RG:function(){return a},df:function(){return l},y4:function(){return c},Ef:function(){return d},MO:function(){return u},j7:function(){return p},pV:function(){return h},Xi:function(){return g},kV:function(){return m},M:function(){return f},re:function(){return v},xZ:function(){return y},QD:function(){return b},N9:function(){return C},b1:function(){return x},R1:function(){return w},EC:function(){return T},tc:function(){return S},bZ:function(){return I},R9:function(){return _},u1:function(){return A},mf:function(){return z},tS:function(){return k},j4:function(){return Z},dz:function(){return O},ns:function(){return P},dZ:function(){return $},Ip:function(){return F},GN:function(){return D},n5:function(){return M},LU:function(){return R},l5:function(){return J},VX:function(){return L},Es:function(){return E},YN:function(){return q},Gq:function(){return B},IG:function(){return N},Cz:function(){return Q},C:function(){return Y},$u:function(){return V},DJ:function(){return W},F:function(){return j},m_:function(){return H},Vx:function(){return U},Hp:function(){return G},s6:function(){return K},rf:function(){return X},Xh:function(){return ee}});var o=i(46806),n=i(26215),r=i(88229);const s="/",a=new o.JRy("REFRESH"),l=new o.JRy("SCROLL_NEXT_PAGE"),c=new o.JRy("WIDGET_REMOVE"),d=new o.JRy("WIDGET_EDIT"),u=new o.JRy("WIDGET_CREATE"),p=new o.JRy("WIDGET_READY"),h=new o.JRy("WIDGET_RESIZE"),g=new o.JRy("WIDGET_POSITION_CHANGE"),m=new o.JRy("WIDGET_SEARCH",()=>new n.X({payload:""})),f=new o.JRy("SET_PROPERTY_VALUE"),v=new o.JRy("SET_TIMEFRAME"),y=new o.JRy("PREVIEW_EVENT"),b=new o.JRy("DATA_SOURCE_BUSY"),C=new o.JRy("DASHBOARD_EDIT_MODE",()=>new r.t(1)),x=new o.JRy("INTERACTION"),w=new o.JRy("DATA_SOURCE_INVOKED"),T=new o.JRy("DRILLDOWN"),S="NOVA_DATASOURCE_INTERVAL_REFRESHER",I="NOVA_DATASOURCE_ADAPTER",_="NOVA_TIMESERIES_DATASOURCE_ADAPTER",A="NOVA_KPI_DATASOURCE_ADAPTER",z="NOVA_DRILLDOWN_DATASOURCE_ADAPTER",k="NOVA_KPI_COLOR_PRIORITIZER",Z="NOVA_TITLE_AND_DESCRIPTION_CONVERTER",O="NOVA_PROPORTIONAL_WIDGET_CHART_OPTIONS_CONVERTER",P="NOVA_KPI_TILES_CONVERTER",$="NOVA_TIMESERIES_METADATA_CONVERTER",F="NOVA_TIMESERIES_SERIES_CONVERTER",D="NOVA_DASHBOARD_EVENT_PROXY",M="NOVA_TABLE_COLUMNS_CONVERTER",R="NOVA_TABLE_FILTERS_CONVERTER",J="NOVA_TABLE_DATASOURCE_ADAPTER",L="NOVA_GENERIC_CONVERTER",E="NOVA_GENERIC_ARRAY_CONVERTER",q="NOVA_KPI_SECTION_CONVERTER",B="NOVA_TIMESERIES_TILE_INDICATOR_DATA_CONVERTER",N="NOVA_LOADING_ADAPTER",Q="NOVA_STATUS_CONTENT_FALLBACK_ADAPTER",Y="NOVA_KPI_STATUS_CONTENT_FALLBACK_ADAPTER",V="NOVA_KPI_SCALE_SYNC_BROKER",W="NOVA_URL_INTERACTION_HANDLER",j="NOVA_EVENT_BUS_DEBUGGER",H="NOVA_PIZZAGNA_BROADCASTER",U="NOVA_VIRTUAL_VIEWPORT_MANAGER",G="NOVA_TABLE_FORMATTERS_REGISTRY",K="NOVA_KPI_FORMATTERS_REGISTRY",X="NOVA_PROPORTIONAL_CONTENT_FORMATTERS_REGISTRY",ee="NOVA_CONFIGURATOR_DATA_SOURCE_MANAGER"},84356:function(e,t,i){"use strict";i.d(t,{I:function(){return n}});var o=i(33018);let n=(()=>{class e{updateWidget(e){this.widget=e}getWidget(){return this.widget}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})()},96465:function(e,t,i){"use strict";i.d(t,{q:function(){return g}});var o=i(59311),n=i.n(o),r=i(72699),s=i.n(r),a=i(79765),l=i(46782),c=i(92954),d=i(65470),u=i(33018),p=i(84356),h=i(96800);let g=(()=>{class e{constructor(e,t,i,o,n){this.pizzagnaBus=e,this.dashboardBus=t,this.widgetConfigurationService=i,this.eventRegistry=o,this.pizzagnaService=n,this.upstreamSubscriptions={},this.downstreamSubscriptions={},this.destroy$=new a.xQ}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(e){this.component=e}updateConfiguration(e){this.providerKey=e.providerKey,this.upstreams=e.upstreams,this.downstreams=e.downstreams,this.upstreams&&this.registerUpstreamSubscriptions(...this.upstreams),this.downstreams&&this.registerDownstreamSubscriptions(...this.downstreams)}addUpstream(e){this.addStream(e,"upstreams")}addDownstream(e){this.addStream(e,"downstreams")}addStream(e,t){const i=s()((this[t]||[]).concat(e.id));this[t]=i,this.component&&this.pizzagnaService.setProperty({componentId:this.component.componentId,pizzagnaKey:d.xW.Data,providerKey:this.providerKey,propertyPath:[t]},i)}registerUpstreamSubscriptions(...e){!this.dashboardBus||this.registerSubscriptions(e,this.upstreamSubscriptions,this.pizzagnaBus,(e,t)=>{const i=this.widgetConfigurationService.getWidget().id;this.dashboardBus.getStream(e).next(Object.assign({},t,{widgetId:i}))})}registerDownstreamSubscriptions(...e){!this.dashboardBus||this.registerSubscriptions(e,this.downstreamSubscriptions,this.dashboardBus,(e,t)=>{const i=this.widgetConfigurationService.getWidget().id;(void 0===t.widgetId||i===t.widgetId)&&this.pizzagnaBus.getStream(e).next(t)})}registerSubscriptions(e=[],t,i,o){const r=e?n()(e,e=>e):null;for(const n of Object.keys(t))(!r||!r[n])&&(t[n].unsubscribe(),delete t[n]);for(const n of Object.keys(null!=r?r:{}).filter(e=>!t[e])){const e=this.eventRegistry.getEvent(n);t[n]=i.getStream(e).pipe((0,l.R)(this.destroy$)).subscribe(t=>{o(e,t)})}}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(d.nY),u.LFG(d.Bc,8),u.LFG(p.I,8),u.LFG(h.o),u.LFG(c.p))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e})()},40494:function(e,t,i){"use strict";i.d(t,{x:function(){return c}});var o=i(83118),n=i.n(o),r=i(12666),s=i.n(r),a=i(65470),l=i(33018);let c=(()=>{class e{constructor(){this.widgetTypes={}}registerWidgetType(e,t,i){let o=this.widgetTypes[e];o||(o=[],this.widgetTypes[e]=o),o.length<t&&(o.length=t),o[t-1]=i}getWidgetType(e,t){const i=this.widgetTypes[e];if(!i||0===i.length)throw new Error("Type '"+e+"' not found in the registry. Available types: "+Object.keys(this.widgetTypes).join(", "));if(void 0!==t&&(t<=0||i.length<t))throw new Error("Version "+t+" for widget type '"+e+"' not registered. Max available version is "+i.length);return i[(void 0===t?i.length:t)-1]}mergeWithWidgetType(e){const t=this.getWidgetType(e.type,e.version);return Object.assign(Object.assign({},e),{pizzagna:n()(e.pizzagna,t.widget)})}setNode(e,t,i,o){var n,r;const l=`${t}.${a.xW.Structure}.${(null===(r=null===(n=e.paths)||void 0===n?void 0:n[t])||void 0===r?void 0:r[i])||i}`;s()(e,l,o)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac}),e})()},65470:function(e,t,i){"use strict";i.d(t,{nY:function(){return n},Bc:function(){return r},Fk:function(){return s},m4:function(){return a},B5:function(){return l},Mu:function(){return c},AC:function(){return d},ni:function(){return u},xW:function(){return p},Nc:function(){return h},WE:function(){return g}});var o=i(33018);const n=new o.OlP("PIZZAGNA_EVENT_BUS"),r=new o.OlP("DASHBOARD_EVENT_BUS"),s=new o.OlP("DATA_SOURCE"),a=new o.OlP("FORMATTERS_REGISTRY"),l=(new o.OlP("TEST_REGISTRY"),new o.OlP("HEADER_LINK_PROVIDER"));var c=(()=>{return(e=c||(c={})).DataSource="dataSource",e.Adapter="adapter",e.Converter="converter",e.Broadcaster="broadcaster",e.Refresher="refresher",e.EventProxy="eventProxy",e.LoadingAdapter="loadingAdapter",e.ContentFallbackAdapter="contentFallbackAdapter",e.InteractionHandler="interactionHandler",e.EventBusDebugger="eventBusDebugger",e.KpiColorPrioritizer="kpiColorPrioritizer",e.FormattersRegistry="formattersRegistry",e.DataSourceManager="dataSourceManager",c;var e})(),d=(()=>{return(e=d||(d={})).Root="root",e.DataSourceConfigComponentType="dataSourceConfigComponentType",e.TileDescriptionConfigComponentType="tileDescriptionConfigComponentType",e.DataSourceProviders="dataSourceProviders",e.Formatters="formatters",e.TileDescriptionBackgroundColors="tileDescriptionBackgroundColors",e.TileBackgroundColorRulesBackgroundColors="tileBackgroundColorRulesBackgroundColors",d;var e})(),u=(()=>{return(e=u||(u={})).Interactivity="interactivity",e.DisableTableColumnGeneration="disableTableColumnGeneration",u;var e})(),p=(()=>{return(e=p||(p={})).Structure="structure",e.Configuration="configuration",e.Data="data",p;var e})(),h=(()=>{return(e=h||(h={})).CRITICAL="critical",e.WARNING="warning",e.DEFAULT="default",h;var e})(),g=(()=>{return(e=g||(g={})).Unknown="0",e.Ok="200",e.Forbidden="403",e.NotFound="404",g;var e})()},30412:function(e,t,i){"use strict";i.d(t,{l:function(){return s}});var o=i(98348),n=i(39973),r=i(65470);const s={id:"refresher",componentType:o.O.lateLoadKey,providers:{[r.Mu.Converter]:{providerId:n.VX,properties:{formParts:[{previewPath:`${n.XM}.providers.refresher.properties`,keys:["enabled","interval","overrideDefaultSettings"]}]}}},properties:{overrideDefaultSettings:!1}}},17857:function(e,t,i){"use strict";i.d(t,{X:function(){return f},P:function(){return v}});var o=i(89563),n=i(96899),r=i(62878),s=i(24803),a=i(6432),l=i(36233),c=i(41450),d=i(29014),u=i(53294),p=i(39973),h=i(65470),g=i(30412),m=i(35484);const f=[{componentType:s.a.lateLoadKey,label:$localize`No Formatter`,dataTypes:{value:null}},{componentType:r.s.lateLoadKey,label:$localize`Link`,configurationComponent:"LinkConfiguratorComponent",dataTypes:{value:"label",link:"link"}},{componentType:n.C.lateLoadKey,label:$localize`Icon`,dataTypes:{value:"string"}}],v={[h.xW.Structure]:{[p.XM]:{id:p.XM,componentType:o.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","columns"]},providers:{[h.Mu.FormattersRegistry]:{providerId:p.Hp},[h.Mu.DataSourceManager]:{providerId:p.Xh}}},presentation:{id:"presentation",componentType:a.j.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","filters"]}},titleAndDescription:{id:"titleAndDescription",componentType:c.U.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:p.j4}}},filters:{id:"filters",componentType:u.U.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:p.LU}}},refresher:g.l,dataAndCalculations:{id:"dataAndCalculations",componentType:a.j.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:l.s.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:m.Z.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:p.VX,properties:{formParts:[{previewPath:"table.providers.dataSource",keys:["providerId","properties"]},{previewPath:"table.providers.adapter.properties.dataSource",keys:["properties"]}]}}}},columns:{id:"columns",componentType:d.O.lateLoadKey,properties:{template:[{},{properties:{formatters:f}}]},providers:{[h.Mu.Converter]:{providerId:p.n5}}}}}},69063:function(e,t,i){"use strict";i.d(t,{hiK:function(){return ho.h},p3D:function(){return $n.p},Fk3:function(){return C.Fk},ay7:function(){return On.ay},PFv:function(){return On.PF},vXf:function(){return Tn},tFi:function(){return _a},XMI:function(){return b.XM},wz0:function(){return za},NlZ:function(){return Aa},pPd:function(){return Ba},MXM:function(){return h.M},cY_:function(){return Jn},dsi:function(){return go},vHB:function(){return fo},O5k:function(){return bo},TAb:function(){return Io},gIB:function(){return sa},B:function(){return v},lc0:function(){return qn},Ksf:function(){return g.K},PIV:function(){return po.P},AOA:function(){return ys},B5u:function(){return C.B5},WEY:function(){return C.WE},Cg1:function(){return _o.C},ZhR:function(){return he.Z},ufE:function(){return $},Klf:function(){return Ea},woB:function(){return g.w},s9y:function(){return Ao.s},vB5:function(){return j},fp5:function(){return ee},mf:function(){return b.mf},VXI:function(){return b.VX},tSO:function(){return b.tS},u1$:function(){return b.u1},$uq:function(){return b.$u},j4g:function(){return b.j4},DJm:function(){return b.DJ},Qpk:function(){return Gs},Pi:function(){return La},nYw:function(){return C.nY},ntI:function(){return ko},xW5:function(){return C.xW},khc:function(){return me},UAh:function(){return pe.UA},qy4:function(){return pe.qy},EMX:function(){return Ie},CNH:function(){return ce.C},aDR:function(){return zo.a},g4s:function(){return We.g},PEA:function(){return Mo},aAT:function(){return J},Car:function(){return pe.C},CKZ:function(){return kt},D9N:function(){return zt},Usc:function(){return nr.U},Q$d:function(){return ia},MOJ:function(){return b.MO},zer:function(){return ea},CyH:function(){return ta},niB:function(){return C.ni},ACc:function(){return C.AC},Muk:function(){return C.Mu},$Ie:function(){return Ws},jFY:function(){return mn.j},xTe:function(){return ue.x},GE5:function(){return qa},Amp:function(){return Sa},j5E:function(){return aa},LtV:function(){return Ia},O9d:function(){return ra}});var o=i(38583),n=i(46806),r=i(54195),s=i(33018);let a=(()=>{class e{constructor(e){this.changeDetector=e,this.defaultClasses="d-flex flex-column justify-content-center w-100 p-3",this.elementClass=""}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`}}return e.lateLoadKey="WidgetErrorComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-widget-error"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.classNames)},inputs:{image:"image",title:"title",description:"description",elementClass:"elementClass"},decls:6,vars:3,consts:[[3,"image"],[1,"widget-error__title"],[1,"d-flex","justify-content-center","text-center"]],template:function(e,t){1&e&&(s._UZ(0,"nui-image",0),s.TgZ(1,"div",1),s.TgZ(2,"strong"),s._uU(3),s.qZA(),s.qZA(),s.TgZ(4,"div",2),s._uU(5),s.qZA()),2&e&&(s.Q6J("image",t.image),s.xp6(3),s.Oqu(t.title),s.xp6(2),s.Oqu(t.description))},directives:[n.cuP],styles:[".widget-error__title[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center;margin-top:20px;margin-bottom:10px}"]}),e})(),l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.ez,n.sF0],o.ez]}),e})();var c=i(17030),d=i(90665),u=i(92322),p=i(69901),h=i(46276),g=i(13385),m=i(39075);const f=["anchor"];let v=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.document=t,this.domSanitizer=i,this.sanitized=!0,this.elementClass=""}ngOnInit(){this.validateAndApplyEmbeddedContent()}ngOnChanges(e){e.customEmbeddedContent&&!e.customEmbeddedContent.firstChange&&this.validateAndApplyEmbeddedContent()}validateAndApplyEmbeddedContent(){const e=this.sanitized&&this.sanitizeContext(this.mode===g.K.URL?s.q3G.URL:s.q3G.HTML);if(this.anchor.nativeElement.innerHTML="",this.mode===g.K.URL){const t=this.document.createElement("iframe");t.src=this.sanitized?e:this.customEmbeddedContent,t.width="100%",t.height="100%",this.anchor.nativeElement.appendChild(t)}else this.anchor.nativeElement.innerHTML=this.sanitized?e:this.customEmbeddedContent}sanitizeContext(e){var t;return this.domSanitizer.sanitize(e,null===(t=this.customEmbeddedContent)||void 0===t?void 0:t.trim())}}return e.lateLoadKey="EmbeddedContentComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(o.K0),s.Y36(m.H7))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-embedded-content"]],viewQuery:function(e,t){if(1&e&&s.Gf(f,7),2&e){let e;s.iGM(e=s.CRH())&&(t.anchor=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.elementClass)},inputs:{mode:"mode",customEmbeddedContent:"customEmbeddedContent",sanitized:"sanitized",elementClass:"elementClass"},features:[s.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["anchor",""]],template:function(e,t){1&e&&s._UZ(0,"div",0,1)},encapsulation:2,changeDetection:0}),e})();function y(e,t){const{dataFieldIds:i}=e.properties||{};let o;return o=i?Object.keys(i).reduce((e,o)=>(e[o]=t[i[o]],e),{}):{value:t.value},o}var b=i(39973),C=i(65470),x=i(28303),w=i.n(x),T=i(46747),S=i(87636);function I(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"a",4),s.GkF(2,5),s.qZA(),s.BQk()),2&e){const e=s.oxw(),t=s.MAs(4);s.xp6(1),s.Q6J("href",e.widgetData.link,s.LSH),s.xp6(1),s.Q6J("ngTemplateOutlet",t)}}function _(e,t){if(1&e){const e=s.EpF();s.ynx(0),s.TgZ(1,"div",6),s.NdJ("click",function(){return s.CHM(e),s.oxw().onInteraction()}),s.GkF(2,5),s.qZA(),s.BQk()}if(2&e){s.oxw();const e=s.MAs(4);s.xp6(2),s.Q6J("ngTemplateOutlet",e)}}function A(e,t){}function z(e,t){if(1&e){const e=s.EpF();s.ynx(0,15,16),s.TgZ(2,"div",17),s.TgZ(3,"span",18),s.YNc(4,A,0,0,"ng-template",19),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(1).attached(t)}),s.qZA(),s.qZA(),s.BQk()}if(2&e){const e=s.MAs(1),t=s.oxw(2);let i,o;s.Q6J("componentType",null==t.configuration||null==t.configuration.formatters||null==t.configuration.formatters.Value||null==t.configuration.formatters.Value.formatter?null:t.configuration.formatters.Value.formatter.componentType)("properties",t.formattersProperties.Value),s.xp6(3),s.Q6J("ngClass","IconFormatterComponent"===(null==t.configuration||null==t.configuration.formatters||null==t.configuration.formatters.Value||null==t.configuration.formatters.Value.formatter?null:t.configuration.formatters.Value.formatter.componentType)?"without-filter":"")("useZoom",!1)("scaleIN$",null==(i=t.getScaleBroker("value"))?null:i.out$)("scaleOUT$",null==(o=t.getScaleBroker("value"))?null:o.in$),s.xp6(1),s.Q6J("cdkPortalOutlet",e.portal)}}const k=function(e){return{"background-color":e}},Z=function(e){return{color:e}};function O(e,t){if(1&e&&(s._UZ(0,"div",7),s.TgZ(1,"div",8),s.TgZ(2,"div",9),s.TgZ(3,"div",10),s.TgZ(4,"span",11),s._uU(5),s.qZA(),s.qZA(),s.YNc(6,z,5,7,"ng-container",12),s.TgZ(7,"div",13),s.TgZ(8,"span",14),s._uU(9),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw(),t=s.MAs(6);let i,o,n,r;s.ekj("nui-kpi-indicator--interactive",e.interactive),s.Q6J("ngStyle",s.VKq(18,k,e.backgroundColor||(null==e.widgetData?null:e.widgetData.backgroundColor))),s.xp6(1),s.Q6J("ngStyle",s.VKq(20,Z,(null==e.widgetData?null:e.widgetData.textColor)||e.backgroundColor||(null==e.widgetData?null:e.widgetData.backgroundColor)||e.defaultColor)),s.xp6(2),s.Q6J("title",null==e.widgetData?null:e.widgetData.label),s.xp6(1),s.Q6J("useZoom",!1)("minScale",.5)("scaleIN$",null==(i=e.getScaleBroker("label"))?null:i.out$)("scaleOUT$",null==(o=e.getScaleBroker("label"))?null:o.in$),s.xp6(1),s.Oqu(null==e.widgetData?null:e.widgetData.label),s.xp6(1),s.Q6J("ngIf",null==e.configuration||null==e.configuration.formatters?null:e.configuration.formatters.Value)("ngIfElse",t),s.xp6(1),s.Q6J("title",null==e.widgetData?null:e.widgetData.units),s.xp6(1),s.Q6J("useZoom",!1)("scaleIN$",null==(n=e.getScaleBroker("units"))?null:n.out$)("scaleOUT$",null==(r=e.getScaleBroker("units"))?null:r.in$)("minScale",.5),s.xp6(1),s.Oqu(null==e.widgetData?null:e.widgetData.units)}}function P(e,t){if(1&e&&(s.TgZ(0,"div",20),s.TgZ(1,"span",21),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();let t,i;s.Udp("font-size",null==e.widgetData?null:e.widgetData.fontSize),s.Q6J("title",null==e.widgetData?null:e.widgetData.value),s.xp6(1),s.Q6J("useZoom",!1)("scaleIN$",null==(t=e.getScaleBroker("value"))?null:t.out$)("scaleOUT$",null==(i=e.getScaleBroker("value"))?null:i.in$),s.xp6(1),s.hij(" ",null==e.widgetData?null:e.widgetData.value,"")}}let $=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.dataSource=t,this.eventBus=i,this.busy=!1,this.elementClass="",this.defaultColor="var(--nui-color-bg-secondary)"}get interactive(){var e,t,i,o,n;return((null===(e=this.configuration)||void 0===e?void 0:e.interactive)||(null===(o=null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.getFeatureConfig(C.ni.Interactivity))||void 0===o?void 0:o.enabled))&&!w()(null===(n=this.widgetData)||void 0===n?void 0:n.value)||!1}onInteraction(){!this.interactive||this.eventBus.getStream(b.b1).next({payload:{data:this.widgetData}})}getScaleBroker(e){if(this.syncValuesBroker)return this.syncValuesBroker.find(t=>t.id===e)}ngOnChanges(e){var t;if(e.configuration){const t=e.configuration.currentValue.formatters;t&&(this.formattersProperties=this.getFormatterProperties(t))}e.widgetData&&(null===(t=this.configuration)||void 0===t?void 0:t.formatters)&&(this.formattersProperties=this.getFormatterProperties(this.configuration.formatters))}getFormatterProperties(e){return Object.keys(e).reduce((t,i)=>{var o;const n=null===(o=e[i])||void 0===o?void 0:o.formatter;return n&&(t[i]={data:y(n,this.widgetData)}),t},{})}}return e.lateLoadKey="KpiComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(C.Fk,8),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-kpi"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.elementClass)},inputs:{widgetData:"widgetData",backgroundColor:"backgroundColor",syncValuesBroker:"syncValuesBroker",configuration:"configuration",busy:"busy"},features:[s.TTD],decls:7,vars:3,consts:[["nui-busy","",1,"w-100","h-100",3,"busy"],[4,"ngIf"],["kpiContent",""],["kpiValueRaw",""],[1,"nui-kpi-indicator",3,"href"],[3,"ngTemplateOutlet"],[1,"nui-kpi-indicator",3,"click"],[1,"nui-kpi-indicator__background",3,"ngStyle"],[1,"nui-kpi-indicator__text",3,"ngStyle"],[1,"nui-kpi-indicator__zoom-container"],[1,"nui-kpi-indicator__description",3,"title"],["nuiZoomContent","",3,"useZoom","minScale","scaleIN$","scaleOUT$"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties",4,"ngIf","ngIfElse"],[1,"nui-kpi-indicator__units",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$","minScale"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[1,"nui-kpi-indicator__value"],["nuiZoomContent","",3,"ngClass","useZoom","scaleIN$","scaleOUT$"],[3,"cdkPortalOutlet","attached"],[1,"nui-kpi-indicator__value",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,I,3,2,"ng-container",1),s.YNc(2,_,3,1,"ng-container",1),s.qZA(),s.YNc(3,O,10,22,"ng-template",null,2,s.W1O),s.YNc(5,P,3,7,"ng-template",null,3,s.W1O)),2&e&&(s.Q6J("busy",t.busy),s.xp6(1),s.Q6J("ngIf",null==t.widgetData?null:t.widgetData.link),s.xp6(1),s.Q6J("ngIf",!(null!=t.widgetData&&t.widgetData.link)))},directives:[n.ERI,o.O5,o.tP,o.PC,n.mEK,T.$,o.mk,S.Pl],styles:[".nui-kpi-indicator[_ngcontent-%COMP%]{position:relative;display:block;height:100%;width:100%}.nui-kpi-indicator__background[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#fafafa;background-color:var(--nui-color-bg-secondary,#fafafa);color:#111;color:var(--nui-color-text-default,#111)}.nui-kpi-indicator__text[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;pointer-events:none}.nui-kpi-indicator__text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}.nui-kpi-indicator__value[_ngcontent-%COMP%]{font-size:54px;font-weight:600;margin:auto 0;min-width:100%;white-space:nowrap;display:flex;align-items:center;justify-content:center;height:100%;min-height:5px;max-height:200px}.nui-kpi-indicator__value[_ngcontent-%COMP%] > span.without-filter[_ngcontent-%COMP%]{filter:unset}.nui-kpi-indicator__units[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-bottom:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__units[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__description[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-top:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__description[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__zoom-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:30% 40% 30%;width:100%;height:100%}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]{cursor:pointer}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]:hover{filter:brightness(90%)}"],changeDetection:0}),e})();var F=i(92954),D=i(92677);function M(e,t){}function R(e,t){if(1&e){const e=s.EpF();s.ynx(0),s.ynx(1,1,2),s.YNc(3,M,0,0,"ng-template",3),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(2).attached(t)}),s.BQk(),s.BQk()}if(2&e){const e=t.$implicit,i=s.MAs(2);s.xp6(1),s.Q6J("componentId",e.id)("componentType",e.componentType)("providers",e.providers)("properties",e.properties),s.xp6(2),s.Q6J("cdkPortalOutlet",i.portal)}}let J=(()=>{class e extends D.I{constructor(e,t,i){super(e,t,i),this.nodes=[],this.direction="column",this.elementClass="",this.defaultClassNames="h-100 w-100 d-flex"}ngOnInit(){this.classNames=`${this.defaultClassNames} flex-${this.direction} ${this.elementClass}`}ngOnDestroy(){super.ngOnDestroy()}getNodes(){return this.nodes}}return e.lateLoadKey="StackComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(F.p),s.Y36(n.mQy))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-stack"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.classNames)},inputs:{nodes:"nodes",direction:"direction",elementClass:"elementClass"},features:[s.qOj],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&s.YNc(0,R,4,5,"ng-container",0),2&e&&s.Q6J("ngForOf",t.nodeConfigs)("ngForTrackBy",t.trackByFn)},directives:[o.sg,T.$,S.Pl],encapsulation:2}),e})();const L=["gridItemsContainer"];function E(e,t){}function q(e,t){if(1&e){const e=s.EpF();s.ynx(0),s.ynx(1,3,4),s.YNc(3,E,0,0,"ng-template",5),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(2).attached(t)}),s.BQk(),s.BQk()}if(2&e){const e=t.$implicit,i=s.MAs(2);s.xp6(1),s.Q6J("componentId",e.id)("componentType",e.componentType)("properties",e.properties)("providers",e.providers),s.xp6(2),s.Q6J("cdkPortalOutlet",i.portal)}}const B=function(e){return{"prioritize-rows":e}};let N=(()=>{class e extends D.I{constructor(e,t,i,o){super(e,t,i),this.ngZone=o,this.nodes=[],this.direction="column",this.prioritizeGridRows=!1}ngAfterViewInit(){this.handleGridFlowOnResize()}ngOnDestroy(){var e;null===(e=this.tilesResizeObserver)||void 0===e||e.disconnect(),super.ngOnDestroy()}getNodes(){return this.nodes}handleGridFlowOnResize(){this.tilesResizeObserver=new ResizeObserver(()=>this.onResize()),this.ngZone.runOutsideAngular(()=>{this.tilesResizeObserver.observe(this.gridItemsContainer.nativeElement)})}onResize(){var e;if((null===(e=this.nodes)||void 0===e?void 0:e.length)<2)return;const t=this.gridItemsContainer.nativeElement.getBoundingClientRect(),{height:i,width:o}=t,n=i/o,r=Q(this.nodes.length);return n-.05>r&&!this.prioritizeGridRows?(this.prioritizeGridRows=!0,void this.changeDetector.detectChanges()):n+.05<r&&this.prioritizeGridRows?(this.prioritizeGridRows=!1,void this.changeDetector.detectChanges()):void 0}}return e.lateLoadKey="TilesComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(F.p),s.Y36(n.mQy),s.Y36(s.R0b))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-tiles"]],viewQuery:function(e,t){if(1&e&&s.Gf(L,7),2&e){let e;s.iGM(e=s.CRH())&&(t.gridItemsContainer=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.elementClass)},inputs:{nodes:"nodes",direction:"direction"},features:[s.qOj],decls:3,vars:5,consts:[[1,"nui-grid-layout",3,"ngClass"],["gridItemsContainer",""],[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0,1),s.YNc(2,q,4,5,"ng-container",2),s.qZA()),2&e&&(s.Q6J("ngClass",s.VKq(3,B,t.prioritizeGridRows)),s.xp6(2),s.Q6J("ngForOf",t.nodeConfigs)("ngForTrackBy",t.trackByFn))},directives:[o.mk,o.sg,T.$,S.Pl],styles:[".nui-grid-layout[_ngcontent-%COMP%]{display:grid;height:100%;grid-gap:10px;gap:10px;grid-template-columns:repeat(auto-fit,minmax(calc(54px * 1.2 + 2 * 15px),1fr));grid-template-rows:repeat(auto-fit,minmax(15px,1fr));line-height:1.2}.nui-grid-layout.prioritize-rows[_ngcontent-%COMP%]{grid-auto-flow:column;grid-template-columns:minmax(1px,1fr)}.mobile[_nghost-%COMP%], .mobile   [_nghost-%COMP%]{min-height:160px}"]}),e})();const Q=e=>.25*e+.7;function Y(e,t){if(1&e&&(s.TgZ(0,"div",6),s._UZ(1,"nui-icon",7),s.TgZ(2,"span",8),s._uU(3),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(1),s.Q6J("icon",e.key),s.xp6(1),s.Q6J("title",e.value),s.xp6(1),s.Oqu(e.value)}}function V(e,t){1&e&&s._UZ(0,"nui-icon",9)}const W=function(e,t){return{"widget-medium":e,"widget-small":t}};let j=(()=>{class e{constructor(e){this.changeDetector=e,this.navigated=new s.vpe}set widgetWidth(e){this.isMedium=e<=600&&e>480,this.isSmall=e<=480}onButtonClick(){this.canNavigate&&this.navigated.emit(this)}}return e.lateLoadKey="ListGroupItemComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-list-group-item"]],hostAttrs:[1,"w-100"],inputs:{id:"id",label:"label",statuses:"statuses",canNavigate:"canNavigate",widgetWidth:"widgetWidth"},outputs:{navigated:"navigated"},decls:7,vars:8,consts:[[1,"list-group-item",3,"ngClass","click"],[1,"list-group-item__label",3,"title"],[1,"list-group-item__statuses"],[1,"statuses"],["class","status-column",4,"ngFor","ngForOf"],["icon","caret-right",4,"ngIf"],[1,"status-column"],[1,"mr-2",3,"icon"],[1,"status-column__label",3,"title"],["icon","caret-right"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.NdJ("click",function(){return t.onButtonClick()}),s.TgZ(1,"div",1),s._uU(2),s.qZA(),s.TgZ(3,"div",2),s.TgZ(4,"div",3),s.YNc(5,Y,4,3,"div",4),s.qZA(),s.YNc(6,V,1,0,"nui-icon",5),s.qZA(),s.qZA()),2&e&&(s.Q6J("ngClass",s.WLB(5,W,t.isMedium,t.isSmall)),s.xp6(1),s.Q6J("title",t.label),s.xp6(1),s.Oqu(t.label),s.xp6(3),s.Q6J("ngForOf",t.statuses),s.xp6(1),s.Q6J("ngIf",t.canNavigate))},directives:[o.mk,o.sg,o.O5,n.oJW],styles:[".list-group-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.list-group-item__label[_ngcontent-%COMP%]{width:25%;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item__statuses[_ngcontent-%COMP%]{width:75%;display:flex;align-items:center}.list-group-item[_ngcontent-%COMP%]   .status-column[_ngcontent-%COMP%]{display:flex;width:75px;min-width:75px;max-width:100%;justify-content:flex-start;align-items:center;padding-right:10px}.list-group-item[_ngcontent-%COMP%]   .status-column__label[_ngcontent-%COMP%]{margin-left:5px;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]{justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%]{width:100%!important}.widget-medium[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]{justify-content:flex-end}.widget-small[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{justify-content:space-between}"],changeDetection:0}),e})();var H=i(79765),U=i(46782);function G(e,t){if(1&e&&s._UZ(0,"nui-icon",9),2&e){const e=s.oxw();s.Q6J("icon",e.icon)("status",e.status)}}function K(e,t){if(1&e&&s._uU(0),2&e){const e=s.oxw();s.Oqu(e.status)}}function X(e,t){1&e&&s._UZ(0,"nui-icon",10)}let ee=(()=>{class e{constructor(e,t){this.changeDetector=e,this.eventBus=t,this.navigated=new s.vpe,this.searchTerm="",this.destroy$=new H.xQ}onButtonClick(){this.canNavigate&&this.navigated.emit(this)}ngOnInit(){this.eventBus.getStream(b.kV).pipe((0,U.R)(this.destroy$)).subscribe(e=>{this.searchTerm=e.payload,this.changeDetector.markForCheck()})}}return e.lateLoadKey="ListLeafItemComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-list-leaf-item"]],hostAttrs:[1,"w-100"],inputs:{icon:"icon",status:"status",detailedUrl:"detailedUrl",label:"label",canNavigate:"canNavigate",url:"url"},outputs:{navigated:"navigated"},decls:12,vars:14,consts:[[1,"nui-list-leaf-item",3,"click"],[1,"nui-list-leaf-item__info-container"],[1,"nui-list-leaf-item__icon-container"],["class","mr-1",3,"icon","status",4,"ngIf","ngIfElse"],[1,"nui-list-leaf-item__description"],[1,"nui-text-ellipsis",3,"ngClass","innerHTML"],[1,"nui-text-secondary","nui-text-ellipsis",3,"innerHTML"],["statusTpl",""],["icon","caret-right",4,"ngIf"],[1,"mr-1",3,"icon","status"],["icon","caret-right"]],template:function(e,t){if(1&e&&(s.TgZ(0,"div",0),s.NdJ("click",function(){return t.onButtonClick()}),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.YNc(3,G,1,2,"nui-icon",3),s.qZA(),s.TgZ(4,"div",4),s._UZ(5,"a",5),s.ALo(6,"nuiHighlight"),s._UZ(7,"div",6),s.ALo(8,"nuiHighlight"),s.qZA(),s.YNc(9,K,1,1,"ng-template",null,7,s.W1O),s.qZA(),s.YNc(11,X,1,0,"nui-icon",8),s.qZA()),2&e){const e=s.MAs(10);s.xp6(3),s.Q6J("ngIf",t.icon)("ngIfElse",e),s.xp6(2),s.Q6J("ngClass",t.url?"":"not-active")("innerHTML",s.xi3(6,8,t.label,t.searchTerm),s.oJD),s.uIk("target",t.url?"_blank":null)("href",t.url||null,s.LSH),s.xp6(2),s.Q6J("innerHTML",s.xi3(8,11,t.detailedUrl,t.searchTerm),s.oJD),s.xp6(4),s.Q6J("ngIf",t.canNavigate)}},directives:[o.O5,o.mk,n.oJW],pipes:[n.SgB],styles:[".nui-list-leaf-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nui-list-leaf-item__info-container[_ngcontent-%COMP%]{display:flex;height:40px}.nui-list-leaf-item__icon-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:30px}.nui-list-leaf-item__description[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr 1fr;grid-template-columns:1fr;max-width:100%}a.not-active[_ngcontent-%COMP%]{text-decoration:none;color:#111}"],changeDetection:0}),e})();function te(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",1),s.TgZ(1,"button",2),s.NdJ("click",function(){return s.CHM(e),s.oxw().onBack()}),s.qZA(),s.TgZ(2,"button",3),s.NdJ("click",function(){return s.CHM(e),s.oxw().onHome()}),s.qZA(),s.TgZ(3,"div",4),s._uU(4),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(1),s.Q6J("isRepeat",!0)("disabled",!(null!=e.navBarConfig&&null!=e.navBarConfig.buttons&&null!=e.navBarConfig.buttons.back&&e.navBarConfig.buttons.back.disabled)),s.xp6(1),s.Q6J("isRepeat",!0),s.xp6(2),s.Oqu(null==e.navBarConfig?null:e.navBarConfig.label)}}let ie=(()=>{class e{constructor(e,t){this.changeDetector=e,this.eventBus=t,this.navigated=new s.vpe}onBack(){var e,t,i;this.navBarConfig&&this.eventBus.getStream(b.EC).next({payload:{back:null===(i=null===(t=null===(e=this.navBarConfig)||void 0===e?void 0:e.buttons)||void 0===t?void 0:t.back)||void 0===i?void 0:i.disabled}})}onHome(){this.eventBus.getStream(b.EC).next({payload:{reset:!0}})}}return e.lateLoadKey="ListNavigationBarComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-navigation-bar"]],inputs:{navBarConfig:"navBarConfig"},outputs:{navigated:"navigated"},decls:1,vars:1,consts:[["class","list-nav-bar",4,"ngIf"],[1,"list-nav-bar"],["nui-button","","type","button","displayStyle","action","icon","arrow-left",3,"isRepeat","disabled","click"],["nui-button","","type","button","displayStyle","action","icon","overview",3,"isRepeat","click"],[1,"list-nav-bar__label"]],template:function(e,t){1&e&&s.YNc(0,te,5,4,"div",0),2&e&&s.Q6J("ngIf",t.navBarConfig&&!(null!=t.navBarConfig&&t.navBarConfig.isRoot))},directives:[o.O5,n.r0F],styles:[".list-nav-bar[_ngcontent-%COMP%]{width:100%;margin:2px 0;padding:0 15px;display:flex;align-items:center}.list-nav-bar__label[_ngcontent-%COMP%]{padding-left:5px;color:rgba(17,17,17,.6)}"],changeDetection:0}),e})();function oe(e,t){}const ne=function(){return["navigated"]};function re(e,t){if(1&e){const e=s.EpF();s.ynx(0,2,3),s.NdJ("output",function(){const t=s.CHM(e).item;return s.oxw().onListItemEvent(t)}),s.YNc(2,oe,0,0,"ng-template",4),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(1).attached(t)}),s.BQk()}if(2&e){const e=t.item,i=s.MAs(1),o=s.oxw();s.Q6J("componentId",o.configuration.componentType)("componentType",o.configuration.componentType)("properties",o.getPropsFor(e))("outputs",s.DdM(5,ne)),s.xp6(2),s.Q6J("cdkPortalOutlet",i.portal)}}let se=(()=>{class e{constructor(e,t,i,o){this.changeDetector=e,this.zone=t,this.host=i,this.eventBus=o,this.itemFormatterProps=new Map,this.destroy$=new H.xQ}ngOnInit(){this.initResizeObserver()}ngOnChanges(e){var t;(null===(t=e.data)||void 0===t?void 0:t.currentValue)&&e.data.currentValue.forEach(e=>this.itemFormatterProps.set(e,this.calcItemProps(e)))}onListItemEvent(e){this.eventBus.getStream(b.EC).next({payload:e})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.itemFormatterProps.clear()}getPropsFor(e){return Object.assign(Object.assign({},this.itemFormatterProps.get(e)),{widgetWidth:this.widgetWidth})}calcItemProps(e){return this.configuration?Object.assign(Object.assign({},y(this.configuration,e)),this.configuration.itemProperties):e}initResizeObserver(){const e=new n.Pa2(this.host,this.zone);e.debounceTime=10,e.ngAfterViewInit(),e.containerResize.pipe((0,U.R)(this.destroy$)).subscribe(()=>{this.widgetWidth=this.host.nativeElement.offsetWidth})}}return e.lateLoadKey="ListWidgetComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-list-widget"]],hostAttrs:[2,"overflow","scroll"],hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.elementClass)},inputs:{data:"data",configuration:"configuration",elementClass:"elementClass"},features:[s.TTD],decls:3,vars:2,consts:[[3,"itemsSource","repeatItemTemplateRef"],["repeatItemTemplate",""],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){if(1&e&&(s._UZ(0,"nui-repeat",0),s.YNc(1,re,3,6,"ng-template",null,1,s.W1O)),2&e){const e=s.MAs(2);s.Q6J("itemsSource",t.data)("repeatItemTemplateRef",e)}},directives:[n.$N6,T.$,S.Pl],styles:[""]}),e})();var ae=i(17238);let le=(()=>{class e{constructor(e){this.changeDetector=e,this.active=!1}}return e.lateLoadKey="LoadingComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-loading"]],inputs:{active:"active"},decls:1,vars:2,consts:[["compactMode","true",3,"show"]],template:function(e,t){1&e&&(s.TgZ(0,"nui-progress",0),s.NdJ("@animate.start",function(e){return e.element.style.display="block"})("@animate.done",function(e){return e.element.style.display=e.toState?"block":"none"}),s.qZA()),2&e&&s.Q6J("@animate",t.active)("show",!0)},directives:[n.t15],styles:["[_nghost-%COMP%]{height:5px;flex-shrink:0}"],data:{animation:[(0,ae.X$)("animate",[(0,ae.SB)("true",(0,ae.oB)({opacity:1})),(0,ae.SB)("false",(0,ae.oB)({opacity:0})),(0,ae.eR)("false <=> true",(0,ae.jt)(500))])]}}),e})();var ce=i(5358),de=i(96465),ue=i(40494),pe=i(34357),he=i(78990),ge=i(52198);let me=(()=>{class e extends ge.k{constructor(e){super(e,"ProportionalContentAggregatorsRegistryService")}getItemKey(e){return e.aggregatorType}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(n.mQy))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function fe(e,t){}function ve(e,t){if(1&e){const e=s.EpF();s.ynx(0,1,2),s.YNc(2,fe,0,0,"ng-template",3),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(1).attached(t)}),s.BQk()}if(2&e){const e=s.MAs(1),t=s.oxw();s.Q6J("componentType",null==t.contentFormatter?null:t.contentFormatter.componentType)("properties",t.contentFormatterProperties),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}let ye=(()=>{class e{constructor(e,t,i,o){this.aggregatorRegistry=e,this.formatterRegistry=t,this.changeDetector=i,this.logger=o,this.destroy$=new H.xQ}ngOnChanges(e){if(e.donutConfig){const t=e.donutConfig.currentValue,{formatter:i,aggregator:o}=t;(null==o?void 0:o.aggregatorType)&&(this.updateAggregatorDefinition(o),this.updateAggregatedValue()),(null==i?void 0:i.componentType)&&(this.contentFormatter=i,this.updateFormatterDefinition(i),this.updateFormatterProperties())}e.widgetData&&(this.updateAggregatedValue(),this.updateFormatterProperties()),e.chartAssist&&this.subscribeToChartAssist()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getFormatterProperties(e){var t;if(e)return Object.assign(Object.assign({},null===(t=this.contentFormatterDefinition)||void 0===t?void 0:t.properties),{data:y(e,{value:this.aggregatedValue})})}updateAggregatorDefinition(e){const t=this.aggregatorRegistry.getItem(e.aggregatorType);t?this.contentAggregatorDefinition=t:this.logger.warn(`No aggregator with key ${e.aggregatorType} found in registry.`)}updateFormatterDefinition(e){const t=this.formatterRegistry.getItem(e.componentType);t?this.contentFormatterDefinition=t:this.logger.warn(`No aggregator with key ${e.componentType} found in registry.`)}updateAggregatedValue(){var e;if(!this.widgetData||!this.contentAggregatorDefinition)return void this.logger.warn(`Can't aggregate value. Aggregator key: ${null===(e=this.contentAggregatorDefinition)||void 0===e?void 0:e.aggregatorType}. Data: ${this.widgetData}`);const t=this.getAggregatorProperties();this.aggregatedValue=this.contentAggregatorDefinition.fn(this.widgetData,Object.assign(Object.assign({},t),{activeMetricId:this.emphasizedSeriesId||t.activeMetricId})).toString()}updateFormatterProperties(){this.contentFormatterProperties=this.getFormatterProperties(this.contentFormatter)}getAggregatorProperties(){var e,t,i;return Object.assign(Object.assign({},null===(e=this.contentAggregatorDefinition)||void 0===e?void 0:e.properties),null===(i=null===(t=this.donutConfig)||void 0===t?void 0:t.aggregator)||void 0===i?void 0:i.properties)}subscribeToChartAssist(){var e,t,i;null===(e=this.chartAssistSubscription)||void 0===e||e.unsubscribe(),this.chartAssistSubscription=null===(i=null===(t=this.chartAssist)||void 0===t?void 0:t.chartAssistSubject)||void 0===i?void 0:i.pipe((0,U.R)(this.destroy$)).subscribe(e=>{var t;this.emphasizedSeriesId=null===(t=e.payload)||void 0===t?void 0:t.seriesId,this.updateAggregatedValue(),this.updateFormatterProperties(),this.changeDetector.detectChanges()})}}return e.lateLoadKey="ProportionalDonutContentComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(me),s.Y36(pe.UA),s.Y36(s.sBO),s.Y36(n.mQy))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-proportional-donut-content"]],inputs:{widgetData:"widgetData",donutConfig:"donutConfig",chartAssist:"chartAssist"},features:[s.TTD],decls:1,vars:1,consts:[["nuiComponentPortal","",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&s.YNc(0,ve,3,3,"ng-container",0),2&e&&s.Q6J("ngIf",null==t.contentFormatter?null:t.contentFormatter.componentType)},directives:[o.O5,T.$,S.Pl],styles:[""],changeDetection:0}),e})();var be=i(49977),Ce=i.n(be),xe=i(52190),we=i.n(xe);const Te=1e6;let Se=(()=>{class e{constructor(e){this.unitConversionService=e,this.transform=e=>{const t="string"==typeof e?parseFloat(e):e;if(void 0===t||isNaN(t)||t<Te)return(null==e?void 0:e.toString())||"";const i=this.unitConversionService.convert(t,n.Qln.Standard,1);return this.unitConversionService.getFullDisplay(i,"generic")}}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.CrH,16))},e.\u0275pipe=s.Yjl({name:"nuiDashboardUnitConversion",type:e,pure:!0}),e})();var Ie=(()=>{return(e=Ie||(Ie={})).DonutChart="DonutChart",e.PieChart="PieChart",e.VerticalBarChart="VerticalBarChart",e.HorizontalBarChart="HorizontalBarChart",Ie;var e})();let _e=(()=>{class e{static buildChartSeries(e,t,i,o){return(e||[]).map(e=>Object.assign(Object.assign({},e),{accessors:t,renderer:i,scales:o}))}static getChartAttributes(t,i,o){const n=e.getChartTools(t),r={grid:n.gridFunction(),accessors:n.accessorFunction(i,o),renderer:n.rendererFunction(),scales:n.scaleFunction()};return n.preprocessor&&(r.preprocessor=n.preprocessor),r}static getChartTools(e){const t=e=>{const t=new u.UDz(e);return t.series.color=(t,i)=>{var o;return null!==(o=i.color)&&void 0!==o?o:e.get(t)},t};function i(e,t){const i=(0,u.Q6e)(this.config,e,t);return i.series.color=(t,i)=>{var o;return null!==(o=i.color)&&void 0!==o?o:null==e?void 0:e.get(t)},i.data.value=e=>Number.isFinite(e)?e:e.value,i}return{[Ie.DonutChart]:{preprocessor:u.fy$,gridFunction:u.Y6Q,rendererFunction:()=>new u.E8N,accessorFunction:t,scaleFunction:u._N$},[Ie.PieChart]:{preprocessor:u.fy$,gridFunction:u.Y6Q,rendererFunction:()=>new u.bOg,accessorFunction:t,scaleFunction:u._N$},[Ie.HorizontalBarChart]:{config:{horizontal:!0},gridFunction(){return(0,u.skL)(this.config)},rendererFunction:()=>new u.Z7w({highlightStrategy:new u.TrQ("y")}),accessorFunction:i,scaleFunction(){return(0,u.CQI)(this.config)}},[Ie.VerticalBarChart]:{config:{horizontal:!1},gridFunction(){return(0,u.skL)(this.config)},rendererFunction:()=>new u.Z7w({highlightStrategy:new u.TrQ("x")}),accessorFunction:i,scaleFunction(){return(0,u.CQI)(this.config)}}}[e]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();const Ae=["gridContainer"];function ze(e,t){}function ke(e,t){if(1&e){const e=s.EpF();s.ynx(0),s.ynx(1,12,13),s.YNc(3,ze,0,0,"ng-template",14),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(2).attached(t)}),s.BQk(),s.BQk()}if(2&e){const e=s.MAs(2),t=s.oxw(3);s.xp6(1),s.Q6J("componentType",(null==t.contentFormatter?null:t.contentFormatter.componentType)||"DonutContentRawFormatterComponent")("properties",t.contentFormatterProperties),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}function Ze(e,t){if(1&e&&(s.ynx(0),s._UZ(1,"nui-proportional-donut-content",15),s.BQk()),2&e){const e=s.oxw(3);s.xp6(1),s.Q6J("widgetData",e.widgetData)("donutConfig",null==e.configuration||null==e.configuration.chartOptions?null:e.configuration.chartOptions.donutContentConfig)("chartAssist",e.chartAssist)}}function Oe(e,t){if(1&e&&(s.TgZ(0,"nui-chart-donut-content",8),s.TgZ(1,"div",9),s.TgZ(2,"div",10),s.YNc(3,ke,4,3,"ng-container",11),s.YNc(4,Ze,2,3,"ng-container",11),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.Q6J("plugin",e.donutContentPlugin),s.xp6(2),s.Q6J("useZoom",!1),s.xp6(1),s.Q6J("ngIf",!(null!=e.configuration&&null!=e.configuration.chartOptions&&e.configuration.chartOptions.donutContentConfig)),s.xp6(1),s.Q6J("ngIf",null==e.configuration||null==e.configuration.chartOptions?null:e.configuration.chartOptions.donutContentConfig)}}function Pe(e,t){if(1&e&&(s.TgZ(0,"div",5),s._UZ(1,"nui-chart",6),s.YNc(2,Oe,5,4,"nui-chart-donut-content",7),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("chart",e.chartAssist.chart),s.xp6(1),s.Q6J("ngIf",e.donutContentPlugin)}}function $e(e,t){}const Fe=function(e){return{data:e}};function De(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"div",22),s.ynx(2,12,23),s.YNc(4,$e,0,0,"ng-template",14),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(3).attached(t)}),s.BQk(),s.qZA(),s.qZA()}if(2&e){const e=s.MAs(3),t=s.oxw().index,i=s.oxw(2);s.xp6(2),s.Q6J("componentType",i.legendFormatter.componentType)("properties",s.VKq(3,Fe,i.widgetData[t])),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}function Me(e,t){if(1&e&&s._UZ(0,"nui-icon",29),2&e){const e=s.oxw(2).$implicit,t=s.oxw(2);s.Q6J("icon",t.seriesToIconMap[e.id])}}const Re=function(e){return{"nui-text-link-small link":e}};function Je(e,t){if(1&e&&(s.TgZ(0,"div",30),s._uU(1),s.qZA()),2&e){const e=s.oxw(2).$implicit,t=s.oxw(2);s.Q6J("ngClass",s.VKq(2,Re,t.interactive)),s.xp6(1),s.hij(" ",e.name," ")}}function Le(e,t){if(1&e&&(s.TgZ(0,"a",31),s.NdJ("click",function(e){return e.stopPropagation()}),s._uU(1),s.qZA()),2&e){const e=s.oxw(2).$implicit;s.Q6J("href",e.link,s.LSH)("title",e.name),s.xp6(1),s.hij(" ",e.name," ")}}function Ee(e,t){if(1&e&&(s._UZ(0,"nui-rich-legend-tile",24),s.ALo(1,"nuiDashboardUnitConversion"),s.YNc(2,Me,1,1,"nui-icon",25),s.TgZ(3,"div",26),s.YNc(4,Je,2,4,"div",27),s.YNc(5,Le,2,3,"a",28),s.qZA()),2&e){const e=s.oxw().$implicit,t=s.oxw(2);s.Q6J("value",s.lcZ(1,7,t.computeLegendTileValue(e.data[0])))("unitLabel",t.legendUnitLabel)("color",t.chartAssist.palette.textColors.get(e.id))("backgroundColor",t.chartAssist.palette.standardColors.get(e.id)),s.xp6(2),s.Q6J("ngIf",t.seriesToIconMap&&t.seriesToIconMap[e.id]),s.xp6(2),s.Q6J("ngIf",!e.link),s.xp6(1),s.Q6J("ngIf",e.link)}}function qe(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"nui-legend-series",19),s.NdJ("isSelectedChange",function(t){const i=s.CHM(e).$implicit;return s.oxw(2).chartAssist.toggleSeries(i.id,t)})("mouseenter",function(){const t=s.CHM(e).$implicit;return s.oxw(2).chartAssist.emphasizeSeries(t.id)})("click",function(){const t=s.CHM(e).$implicit;return s.oxw(2).onInteraction(t)}),s.YNc(1,De,5,5,"div",20),s.YNc(2,Ee,6,9,"ng-template",null,21,s.W1O),s.qZA()}if(2&e){const e=t.$implicit,i=s.MAs(3),o=s.oxw(2);s.ekj("nui-proportional-widget__legend--interactive",o.interactive),s.Q6J("ngClass",(o.prioritizedGridRows.right||o.prioritizedGridRows.bottom)&&"description-min-width--unset")("isSelected",!o.chartAssist.isSeriesHidden(e.id))("seriesRenderState",null==o.chartAssist.renderStatesIndex[e.id]?null:o.chartAssist.renderStatesIndex[e.id].state),s.xp6(1),s.Q6J("ngIf",o.legendFormatter&&o.legendFormatter.componentType)("ngIfElse",i)}}const Be=function(e){return[e]};function Ne(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",16),s.TgZ(1,"nui-legend",17),s.NdJ("mouseleave",function(){return s.CHM(e),s.oxw().chartAssist.resetVisibleSeries()}),s.YNc(2,qe,4,7,"nui-legend-series",18),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("ngClass",s.VKq(5,Be,e.legendShouldBeAlignedRight()?"scrollable":"legend-bottom")),s.xp6(1),s.Q6J("interactive",!1)("orientation",e.legendShouldBeAlignedRight()?"vertical":"horizontal"),s.xp6(1),s.Q6J("ngForOf",e.chartAssist.legendSeriesSet)("ngForTrackBy",e.chartAssist.seriesTrackByFn)}}function Qe(e,t){1&e&&(s.TgZ(0,"div",32),s._UZ(1,"nui-image",33),s.qZA())}const Ye=function(e,t,i){return{"prioritize-rows__right":e,"prioritize-rows__bottom":t,"empty-grid":i}};let Ve=(()=>{class e{constructor(e,t,i,o,n,r,s){this.changeDetector=e,this.ngZone=t,this.kvDiffers=i,this.eventBus=o,this.dataSource=n,this.logger=r,this.prioritizedGridRows={right:!1,bottom:!1},this.chartPalette=new u.syg((0,u.GUR)()),this.differ=this.kvDiffers.find(this.prioritizedGridRows).create(),this.unitConversionPipe=new Se(s)}get interactive(){var e,t,i,o;return(null===(e=this.configuration)||void 0===e?void 0:e.interactive)||(null===(o=null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.getFeatureConfig(C.ni.Interactivity))||void 0===o?void 0:o.enabled)||!1}computeLegendTileValue(e){var t,i;return null===(i=null===(t=this.accessors.data)||void 0===t?void 0:t.value)||void 0===i?void 0:i.call(t,e,0,null,null)}ngOnChanges(e){var t,i,o,n;const r=null===(i=null===(t=e.configuration)||void 0===t?void 0:t.currentValue)||void 0===i?void 0:i.chartColors,s=null===(n=null===(o=e.configuration)||void 0===o?void 0:o.previousValue)||void 0===n?void 0:n.chartColors;if((e.widgetData||!Ce()(r,s))&&this.updateChartColors(),e.configuration){const t=e.configuration.currentValue.chartOptions.type,i=e.configuration.previousValue&&e.configuration.previousValue.chartOptions.type;t&&t!==i&&(this.buildChart(t),this.widgetData&&this.updateChart()),this.legendFormatter=this.configuration.chartOptions.legendFormatter,this.contentFormatter=this.configuration.chartOptions.contentFormatter,this.chartFormatterComponentType=this.configuration.chartOptions.chartFormatterComponentType,this.getContentFormatterProperties(),this.changeDetector.markForCheck()}e.widgetData&&this.chartAssist&&(this.updateChart(),this.getContentFormatterProperties(),this.changeDetector.markForCheck())}ngAfterViewInit(){this.handleGridFlowOnResize()}ngOnDestroy(){var e,t;null===(e=this.proportionalWidgetResizeObserver)||void 0===e||e.disconnect(),null===(t=this.chartTypeSubscription$)||void 0===t||t.unsubscribe()}getContentFormatterProperties(){var e;this.contentFormatterProperties={data:this.widgetData,config:this.configuration,chartAssist:this.chartAssist,properties:null===(e=this.contentFormatter)||void 0===e?void 0:e.properties}}isDonutChart(){return this.configuration.chartOptions.type===Ie.DonutChart}isRadialChart(){return-1!==[Ie.DonutChart,Ie.PieChart].indexOf(this.configuration.chartOptions.type)}hasLegend(){return this.configuration.chartOptions.legendPlacement!==g.w.None}legendShouldBeAlignedRight(){return this.configuration.chartOptions.legendPlacement===g.w.Right}onInteraction(e){!this.interactive||this.eventBus.getStream(b.b1).next({payload:{data:e}})}buildChart(e){var t,i;this.donutContentPlugin=null;const{grid:o,accessors:n,renderer:r,scales:s,preprocessor:a}=_e.getChartAttributes(e,null===(t=this.chartPalette)||void 0===t?void 0:t.standardColors);this.chartAssist=new u.doR(new u.kL2(o),a,this.chartPalette),this.renderer=r,this.accessors=n,this.scales=s,this.isDonutChart()&&(this.donutContentPlugin=new u.iM,this.chartAssist.chart.addPlugin(this.donutContentPlugin)),this.configuration.chartOptions.type===Ie.HorizontalBarChart?(this.scales.x.formatters.tick=this.unitConversionPipe.transform,this.applyTickLabelMaxWidths()):this.configuration.chartOptions.type===Ie.VerticalBarChart&&(this.scales.y.formatters.tick=this.unitConversionPipe.transform),null===(i=this.chartTypeSubscription$)||void 0===i||i.unsubscribe(),this.chartTypeSubscription$=this.chartAssist.chart.getEventBus().getStream(u.q7O).subscribe(e=>{const t=this.widgetData.find(t=>t.id===e.data.seriesId);this.onInteraction(t)})}handleGridFlowOnResize(){this.proportionalWidgetResizeObserver=new ResizeObserver(()=>this.onResize()),this.ngZone.runOutsideAngular(()=>{this.proportionalWidgetResizeObserver.observe(this.gridContainer.nativeElement)})}applyTickLabelMaxWidths(){var t,i,o,n,r,s;const a=this.chartAssist.chart.getGrid().config().axis;a.left.tickLabel.maxWidth=null!==(o=null===(i=null===(t=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===t?void 0:t.maxWidth)||void 0===i?void 0:i.left)&&void 0!==o?o:e.TICK_LABEL_MAX_WIDTH,a.right.tickLabel.maxWidth=null!==(s=null===(r=null===(n=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===n?void 0:n.maxWidth)||void 0===r?void 0:r.right)&&void 0!==s?s:e.TICK_LABEL_MAX_WIDTH}onResize(){if(!this.isContainerInNoSwitchLayoutInterval()){switch(this.configuration.chartOptions.legendPlacement){case g.w.Bottom:this.prioritizedGridRows.bottom=this.containerHasRowLayoutWidth();break;case g.w.Right:this.prioritizedGridRows.right=this.containerHasRowLayoutWidth()}this.differ.diff(this.prioritizedGridRows)&&this.changeDetector.detectChanges()}}isContainerInNoSwitchLayoutInterval(){const t=this.gridContainer.nativeElement.getBoundingClientRect().width;return t>e.MAX_ROW_LAYOUT_SIZE-e.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2&&t<e.MAX_ROW_LAYOUT_SIZE+e.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2}containerHasRowLayoutWidth(){return this.gridContainer.nativeElement.getBoundingClientRect().width<e.MAX_ROW_LAYOUT_SIZE}updateChart(){this.chartAssist.update(_e.buildChartSeries(this.widgetData,this.accessors,this.renderer,this.scales))}updateChartColors(){var e,t;let i;const o=null===(e=this.widgetData)||void 0===e?void 0:e.map(e=>e.color),n=this.configuration.chartColors;i=!this.configuration.prioritizeWidgetColors&&we()(o)?this.getDataDriverColorProvider(this.widgetData):n?this.getConfigurationColorProvider(n):(0,u.GUR)(),this.chartPalette=new u.syg(i),this.buildChart(null===(t=this.configuration)||void 0===t?void 0:t.chartOptions.type),this.chartAssist&&(this.chartAssist.palette=this.chartPalette,this.updateChart())}getDataDriverColorProvider(e){let t;if((null==e?void 0:e.map(e=>e.color).filter(e=>!!e)).length===e.length){const i=e.reduce((e,t)=>(e[t.id]=t.color,e),{});t=new u.oki(i)}else{const i=e.filter(e=>e.color);this.logger.warn(`Not all series have colors set, setting default pallette. Current series color config: ${JSON.stringify(i)}`),t=(0,u.GUR)()}return t}getConfigurationColorProvider(e){var t;let i;return this.configuration.prioritizeWidgetColors&&this.widgetData&&(this.widgetData=this.widgetData.map(e=>{const t=Object.assign({},e);return t.color&&delete t.color,t})),Array.isArray(e)?i=new u.jpW(e):Object.keys(e).length===(null===(t=this.widgetData)||void 0===t?void 0:t.length)?i=new u.oki(e):(this.logger.warn(`Not all series have colors set, setting default pallette. Current series color config: ${JSON.stringify(e)}`),i=(0,u.GUR)()),i}}return e.lateLoadKey="ProportionalWidgetComponent",e.NO_SWITCH_LAYOUT_INTERVAL_SIZE=20,e.MAX_ROW_LAYOUT_SIZE=360,e.TICK_LABEL_MAX_WIDTH=75,e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(s.aQg),s.Y36(C.nY),s.Y36(C.Fk),s.Y36(n.mQy),s.Y36(n.CrH))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-proportional-widget"]],viewQuery:function(e,t){if(1&e&&s.Gf(Ae,7),2&e){let e;s.iGM(e=s.CRH())&&(t.gridContainer=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",elementClass:"elementClass",seriesToIconMap:"seriesToIconMap"},features:[s.TTD],decls:5,vars:8,consts:[[1,"w-100","nui-chart-layout","flex-grow-1","p-3",3,"ngClass"],["gridContainer",""],["class","d-flex chart has-overlay",4,"ngIf"],["class","w-100 d-flex legend",3,"ngClass",4,"ngIf"],["class","mb-3 mt-3 d-flex align-items-center justify-content-center",4,"ngIf"],[1,"d-flex","chart","has-overlay"],[1,"w-100",3,"chart"],["class","nui-proportional-widget__chart-donut-content",3,"plugin",4,"ngIf"],[1,"nui-proportional-widget__chart-donut-content",3,"plugin"],[1,"h-100","w-100","d-flex","justify-content-center","align-items-center","text-center"],["nuiZoomContent","",1,"d-inline-block",3,"useZoom"],[4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal2","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"widgetData","donutConfig","chartAssist"],[1,"w-100","d-flex","legend",3,"ngClass"],[1,"w-100","m-auto",3,"interactive","orientation","mouseleave"],["class","proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","nui-proportional-widget__legend--interactive","isSelectedChange","mouseenter","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","click"],[4,"ngIf","ngIfElse"],["legendDefaultTile",""],["description",""],["componentPortal","nuiComponentPortal"],[3,"value","unitLabel","color","backgroundColor"],["legendTransclusion","","class","align-items-center",3,"icon",4,"ngIf"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["legendTransclusion","",1,"align-items-center",3,"icon"],[1,"description","description-primary",3,"ngClass"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"mb-3","mt-3","d-flex","align-items-center","justify-content-center"],["image","no-data-to-show"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0,1),s.YNc(2,Pe,3,2,"div",2),s.YNc(3,Ne,3,7,"div",3),s.YNc(4,Qe,2,0,"div",4),s.qZA()),2&e&&(s.Q6J("ngClass",s.kEZ(4,Ye,t.prioritizedGridRows.right,t.prioritizedGridRows.bottom,!(t.widgetData&&t.widgetData.length>0&&t.chartAssist))),s.xp6(2),s.Q6J("ngIf",t.widgetData&&t.widgetData.length>0&&t.chartAssist),s.xp6(1),s.Q6J("ngIf",t.hasLegend()&&t.chartAssist),s.xp6(1),s.Q6J("ngIf",!t.widgetData||0===t.widgetData.length||!t.chartAssist))},directives:[o.mk,o.O5,u.xH4,u.kwD,n.mEK,T.$,S.Pl,ye,u.FVX,o.sg,u.kJo,u.wHi,n.oJW,n.cuP],pipes:[Se],styles:['.nui-proportional-widget__chart-donut-content[_ngcontent-%COMP%]{position:absolute}.nui-proportional-widget__legend--interactive[_ngcontent-%COMP%]{cursor:pointer!important}.has-overlay[_ngcontent-%COMP%]{overflow:auto}.nui-chart-layout[_ngcontent-%COMP%]{grid-template:"axis-label-left    axis-label-right    ." 0fr "chart              chart               legend" minmax(60%,auto) "axis-label-bottom  axis-label-bottom   ." 0fr "legend-bottom      legend-bottom       ." minmax(auto,-webkit-min-content) / 1fr 1fr auto;grid-template:"axis-label-left    axis-label-right    ." 0fr "chart              chart               legend" minmax(60%,auto) "axis-label-bottom  axis-label-bottom   ." 0fr "legend-bottom      legend-bottom       ." minmax(auto,min-content) / 1fr 1fr auto}.nui-chart-layout[_ngcontent-%COMP%]   .legend-bottom[_ngcontent-%COMP%]{overflow:auto;align-self:auto;padding-left:0}.prioritize-rows__right[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%], .prioritize-rows__bottom[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%]{max-width:unset;width:100%}.prioritize-rows[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{justify-self:start}.prioritize-rows__right[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend      legend       ." 40%}.prioritize-rows__bottom[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend-bottom      legend-bottom      ." 40%}.empty-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:1fr}.proportional-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}']}),e})();var We=i(43397);let je=(()=>{class e{constructor(){this.enabled=!0,this.delay=500}onHostMouseenter(){!this.enabled||(this.timeout=setTimeout(()=>{this.mousePresentSubject.next(!0)},this.delay))}onHostClick(){!this.enabled||this.mousePresentSubject.next(!0)}onHostMouseleave(){!this.enabled||(clearTimeout(this.timeout),this.mousePresentSubject.next(!1))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=s.lG2({type:e,selectors:[["","nuiDelayedMousePresenceDetection",""]],hostBindings:function(e,t){1&e&&s.NdJ("mouseenter",function(){return t.onHostMouseenter()})("click",function(){return t.onHostClick()})("mouseleave",function(){return t.onHostMouseleave()})},inputs:{enabled:["nuiDelayedMousePresenceDetection","enabled"],mousePresentSubject:"mousePresentSubject",delay:"delay"}}),e})();var He=i(58102),Ue=i.n(He),Ge=i(12482),Ke=i.n(Ge),Xe=i(26215),et=i(66682),tt=i(25917),it=i(68307),ot=i(45435),nt=i(88002),rt=i(15257),st=i(54395);let at=(()=>{class e{constructor(){this.searchDebounceTime=500}initWidget(e){this.widget=e,this.initSearch()}initSearch(){var e,t;this.defineSearch();const i=null===(t=null===(e=this.widget.dataSource)||void 0===e?void 0:e.features)||void 0===t?void 0:t.featuresChanged;i&&i.pipe((0,U.R)(this.widget.onDestroy$)).subscribe(()=>{this.defineSearch()})}registerSearch(){this.widget.dataSource&&this.widget.dataSource.registerComponent({search:{componentInstance:{getFilters:()=>({type:"search",value:this.widget.searchValue})}}})}deregisterSearch(){var e,t;this.widget.dataSource&&(null===(t=(e=this.widget.dataSource).deregisterComponent)||void 0===t||t.call(e,"search"))}defineSearch(){var e,t;const i=null===(e=this.widget.configuration)||void 0===e?void 0:e.searchConfiguration,o=null===(t=this.widget.dataSource.features)||void 0===t?void 0:t.getFeatureConfig("search");this.widget.isSearchEnabled=!(!(null==i?void 0:i.enabled)||!(null==o?void 0:o.enabled)),this.widget.isSearchEnabled?(this.widget.searchValue=(null==i?void 0:i.searchTerm)||"",this.registerSearch(),this.searchDebounceTime=w()(null==i?void 0:i.searchDebounce)?this.searchDebounceTime:null==i?void 0:i.searchDebounce,this.watchSearchTerm()):this.deregisterSearch()}watchSearchTerm(){this.widget.searchTerm$.pipe((0,st.b)(this.searchDebounceTime),(0,U.R)(this.widget.onDestroy$)).subscribe(()=>{this.widget.pizzagnaService.setProperty({pizzagnaKey:C.xW.Configuration,componentId:this.widget.componentId,propertyPath:["configuration.searchConfiguration.searchTerm"]},this.widget.searchValue),this.widget.eventBus.getStream(b.RG).next()})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),lt=(()=>{class e{constructor(){this.visibleItems=[]}initWidget(e){this.widget=e}initVirtualScroll(){this.widget.hasVirtualScroll?this.registerVirtualScroll():this.deregisterVirtualScroll()}registerVirtualScroll(){this.widget.dataSource&&this.widget.dataSource.registerComponent({[(0,n.$0I)("virtualScroll")]:{componentInstance:this.widget.viewportManager}})}deregisterVirtualScroll(){var e,t;this.widget.dataSource&&(null===(t=(e=this.widget.dataSource).deregisterComponent)||void 0===t||t.call(e,(0,n.$0I)("virtualScroll")))}subscribeToVirtualScroll(){!this.widget.vscrollViewport||((0,et.T)(this.widget.vscrollViewport.renderedRangeStream,this.widget.tableUpdate$.pipe((0,nt.U)(()=>{var e;return null===(e=this.widget.vscrollViewport)||void 0===e?void 0:e.getRenderedRange()}))).pipe((0,it.b)(e=>{this.visibleItems=this.widget.tableData.slice(null==e?void 0:e.start,null==e?void 0:e.end),this.widget.changeDetector.detectChanges()}),(0,U.R)(this.widget.onDestroy$)).subscribe(),this.widget.viewportManager.setViewport(this.widget.vscrollViewport).observeNextPage$({pageSize:this.widget.range,emitFirstPage:!0}).pipe((0,ot.h)(e=>{var t,i;return e.end>=(null!==(i=null===(t=this.widget.vscrollViewport)||void 0===t?void 0:t.getDataLength())&&void 0!==i?i:0)}),(0,it.b)(e=>this.widget.zone.run(()=>{this.widget.dataSource.page=e.end/(e.end-e.start),this.widget.eventBus.getStream(b.df).next(),this.widget.changeDetector.detectChanges()})),(0,U.R)(this.widget.onDestroy$)).subscribe())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var ct=i(84356);const dt=["widgetTable"];function ut(e,t){1&e&&(s.TgZ(0,"div",10),s._UZ(1,"nui-image",11),s.qZA())}function pt(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",12),s.TgZ(1,"nui-search",13),s.NdJ("inputChange",function(t){return s.CHM(e),s.oxw().onSearchInputChanged(t)})("cancel",function(t){return s.CHM(e),s.oxw().onSearchInputChanged(t)}),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(1),s.Q6J("value",e.searchValue)}}function ht(e,t){if(1&e&&(s.TgZ(0,"th",17),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit,t=s.oxw();s.Udp("width",t.columnsWidthMap.get(e.id),"px")("max-width",t.columnsWidthMap.get(e.id),"px")("min-width",t.columnsWidthMap.get(e.id),"px"),s.Q6J("isColumnSortingDisabled",!e.sortable)("title",e.label)("tooltipText",t.headerTooltipsEnabled?e.label:void 0)("alignment",t.getColumnAlignment(e)),s.xp6(1),s.hij(" ",e.label,"")}}function gt(e,t){}function mt(e,t){if(1&e){const e=s.EpF();s.ynx(0,20,21),s.YNc(2,gt,0,0,"ng-template",22),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(1).attached(t)}),s.BQk()}if(2&e){const e=s.MAs(1),t=s.oxw().$implicit,i=s.oxw().$implicit;s.Q6J("componentType",null==i.formatter?null:i.formatter.componentType)("properties",t[i.id]),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}function ft(e,t){if(1&e&&(s.TgZ(0,"td",18),s.YNc(1,mt,3,3,"ng-container",19),s.qZA()),2&e){const e=t.$implicit,i=s.oxw().$implicit,o=s.oxw();s.Udp("width",o.columnsWidthMap.get(i.id),"px")("max-width",o.columnsWidthMap.get(i.id),"px")("min-width",o.columnsWidthMap.get(i.id),"px"),s.Q6J("alignment",o.getColumnAlignment(i)),s.xp6(1),s.Q6J("ngIf",e[i.id]&&i.formatter)}}function vt(e,t){1&e&&(s.ynx(0,14),s.YNc(1,ht,2,11,"th",15),s.ynx(2),s.YNc(3,ft,2,8,"td",16),s.BQk(),s.BQk()),2&e&&s.s9C("nuiColumnDef",t.$implicit.id)}function yt(e,t){1&e&&s._UZ(0,"tr",23)}function bt(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"tr",24),s.NdJ("click",function(t){const i=s.CHM(e).$implicit;return s.oxw().onInteraction(i,t)}),s.qZA()}if(2&e){const e=s.oxw();s.uIk("role",e.interactive?"button":"")}}const Ct=function(e){return{"virtual-scroll-disabled":e}};let xt=(()=>{class e{constructor(e,t,i,o,n,r,s,a,l,c,d,u){this.eventBus=e,this.dataSource=t,this.widgetConfigurationService=i,this.changeDetector=o,this.pizzagnaService=n,this.viewportManager=r,this.zone=s,this.el=a,this.logger=l,this.searchAddon=c,this.virtualScrollAddon=d,this.formattersRegistryService=u,this.indentFromTop=70,this.sortable=!0,this.delayedMousePresenceDetectionEnabled=!0,this.tableData=[],this.columns=[],this.columnsWidthMap=new Map,this.hasVirtualScroll=!0,this.isSearchEnabled=!1,this.searchTerm$=new H.xQ,this.onDestroy$=new H.xQ,this.tableUpdate$=new H.xQ,this.mousePresent$=new Xe.X(!1),this.rowHeight=24,this._scrollBuffer=0,this.totalPages=0,this.lastPageFetched=0,this.sortableSet={},this.defaultColumnAlignment="left",this.idle=!1,this.isBusy=this.lastPageFetched!==this.totalPages}set range(e){this._range=e}get range(){return this.getTableScrollRange()}get headerTooltipsEnabled(){var e;return null===(e=this.configuration.headerTooltipsEnabled)||void 0===e||e}set scrollBuffer(e){if(e>100||e<0)throw new Error("Invalid scroll buffer provided. Required range 1..100");this._scrollBuffer=e}get interactive(){var e,t,i,o;return(null===(e=this.configuration)||void 0===e?void 0:e.interactive)||(null===(o=null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.getFeatureConfig(C.ni.Interactivity))||void 0===o?void 0:o.enabled)}ngOnChanges(e){var t,i,o,r;if(e.dataFields&&(null===(t=this.dataFields)||void 0===t?void 0:t.length)&&this.setSortableSet(),(e.widgetData||e.configuration||e.dataFields)&&(this.updateTable(),null===(i=this.vscrollViewport)||void 0===i||i.checkViewportSize()),e.configuration){this.isSortByUpdated(e.configuration)&&(null===(o=e.configuration.currentValue.sortable)||void 0===o||o)&&this.onSortOrderChanged({direction:e.configuration.currentValue.sorterConfiguration.descendantSorting?n.aQE.descending:n.aQE.ascending,sortBy:e.configuration.currentValue.sorterConfiguration.sortBy});const t=Ue()(e,"configuration.currentValue.hasVirtualScroll",!0);this.hasVirtualScroll!==t&&(this.hasVirtualScroll=t,this.virtualScrollAddon.initVirtualScroll())}e.totalItems&&(this.totalPages=Math.floor((null!==(r=this.totalItems)&&void 0!==r?r:0)/this.range))}ngOnInit(){this.dataSource&&(this.setSortFilter(),this.registerSorter(),this.virtualScrollAddon.initWidget(this))}ngAfterViewInit(){var e;if(!this.dataSource)return;null===(e=this.dataSource.busy)||void 0===e||e.pipe((0,it.b)(e=>this.isBusy=e),(0,U.R)(this.onDestroy$)).subscribe(),this.virtualScrollAddon.initVirtualScroll(),this.searchAddon.initWidget(this);const t=this.eventBus.getStream(b.pV).pipe((0,ot.h)(e=>e.payload.widgetId===this.widgetConfigurationService.getWidget().id),(0,nt.U)(e=>e.payload.height));t.pipe((0,U.R)(this.onDestroy$)).subscribe(e=>{var t;this.tableContainerHeight=e-this.indentFromTop,null===(t=this.vscrollViewport)||void 0===t||t.checkViewportSize(),this.changeDetector.detectChanges()}),setTimeout(()=>{(0,et.T)((0,tt.of)(this.range*this.rowHeight),t,(0,tt.of)(this.el.nativeElement.getBoundingClientRect().height)).pipe((0,ot.h)(e=>!!e),(0,rt.q)(1),(0,it.b)(e=>{this.tableWidgetHeight=e,this.virtualScrollAddon.subscribeToVirtualScroll(),this.eventBus.getStream(b.j7).next()})).subscribe()})}ngOnDestroy(){var e;this.onDestroy$.next(),this.onDestroy$.complete(),this.tableUpdate$.complete(),null===(e=this.searchTerm$)||void 0===e||e.complete(),this.pizzagnaService.setProperty({componentId:"bodyContent",propertyPath:["fallbackKey"],pizzagnaKey:C.xW.Data},void 0)}shouldDisplayTable(){var e;const t=this.columns.length>0,i=(null===(e=this.tableData)||void 0===e?void 0:e.length)>0;return this.isSearchEnabled||this.hasVirtualScroll&&(this.isBusy||this.idle)?t:t&&i}dataTrackBy(e,t){return t?t.id:e}columnTrackBy(e,t){return t.id}updateColumns(e){this.headers=e.columns.filter(e=>e.isActive).map(e=>e.id);const t=e.columns.every(e=>Boolean(e.width)),i=e.columns.map((e,i,o)=>{var n,r,s,a;return this.columnsWidthMap.set(e.id,e.width),t&&this.columnsWidthMap.set(o[o.length-1].id,void 0),Object.assign(Object.assign({},e),{sortable:null===(a=this.sortableSet[null===(s=null===(r=null===(n=null==e?void 0:e.formatter)||void 0===n?void 0:n.properties)||void 0===r?void 0:r.dataFieldIds)||void 0===s?void 0:s.value])||void 0===a||a})});i.length>0&&t&&this.logger.warn("Cannot set width for all columns. Resetting last column width."),this.columns.length!==i.length?this.columns=[...i]:this.columns.forEach((e,t)=>{Object.assign(e,i[t],{})})}mapTableData(e,t,i){return i&&0!==i.length?e.map(e=>{const i=t.reduce((t,i)=>{var o,n,r;const s=null===(n=null===(o=i.formatter)||void 0===o?void 0:o.properties)||void 0===n?void 0:n.dataFieldIds;if(!s)return t;const a=Object.keys(s).reduce((t,i)=>(t[i]=e[s[i]],t),{});return t[i.id]=Object.assign({data:a},Ke()(null===(r=i.formatter)||void 0===r?void 0:r.properties,"dataFieldIds")),t},{});return i.__record=e,i}):(this.logger.warn("There are no data fields defined, so table data cannot be displayed."),[])}onSortOrderChanged(e){var t,i;this.sortedColumn=e;const o=this.columns.find(t=>t.id===e.sortBy);if(!o)return;const n=null===(i=null===(t=o.formatter)||void 0===t?void 0:t.properties)||void 0===i?void 0:i.dataFieldIds,r=null==n?void 0:n.value;if(!r)return;const s={sortBy:r,direction:e.direction};Ce()(s,this.sortFilter)||(this.sortFilter=s,this.flushTableData(),this.eventBus.getStream(b.RG).next())}onInteraction(e,t){this.interactive&&(t.target.closest((this.configuration.interactionIgnoredSelectors||n.hrM).join(","))||this.eventBus.getStream(b.b1).next({payload:{data:e.__record}}))}onSearchInputChanged(e){this.searchValue=e,this.searchTerm$.next()}getColumnAlignment(e){var t,i,o;return!(null===(t=null==e?void 0:e.formatter)||void 0===t?void 0:t.componentType)||this.formattersRegistryService.isEmpty?this.defaultColumnAlignment:((null===(i=this.formatters)||void 0===i?void 0:i.version)!==this.formattersRegistryService.stateVersion&&(this.formatters={items:this.formattersRegistryService.getItems().reduce((e,t)=>Object.assign(Object.assign({},e),{[t.componentType]:t}),{}),version:this.formattersRegistryService.stateVersion}),(null===(o=this.formatters.items[e.formatter.componentType])||void 0===o?void 0:o.alignment)||this.defaultColumnAlignment)}setSortFilter(){var e,t,i,o,r,s,a;if(this.configuration){const l=null===(e=this.configuration.sorterConfiguration)||void 0===e?void 0:e.sortBy,c=null===(s=null===(r=null===(o=null===(i=null===(t=this.configuration.columns)||void 0===t?void 0:t.find(e=>e.id===l))||void 0===i?void 0:i.formatter)||void 0===o?void 0:o.properties)||void 0===r?void 0:r.dataFieldIds)||void 0===s?void 0:s.value;this.sortFilter={direction:(null===(a=this.configuration.sorterConfiguration)||void 0===a?void 0:a.descendantSorting)?n.aQE.descending:n.aQE.ascending,sortBy:c}}}isSortByUpdated(e){var t;const i=null===(t=e.previousValue)||void 0===t?void 0:t.sorterConfiguration,o=e.currentValue.sorterConfiguration,n=null==i?void 0:i.sortBy,r=null==o?void 0:o.sortBy;return r?!(n===r&&o.descendantSorting===i.descendantSorting):Boolean(n)}updateTable(){this.widgetData&&this.dataFields&&this.configuration.columns&&(this.updateColumns(this.configuration),this.idle=!1,this.tableData=this.mapTableData(this.widgetData,this.configuration.columns,this.dataFields),this.tableUpdate$.next(),this.changeDetector.detectChanges())}registerSorter(){this.dataSource.registerComponent({sorter:{componentInstance:{getFilters:()=>({type:"sorter",value:this.sortFilter})}}})}setSortableSet(){this.sortableSet={},this.dataFields.forEach(e=>{var t;this.sortableSet[e.id]=null===(t=e.sortable)||void 0===t||t})}flushTableData(){this.idle=!0,this.tableData=[]}getTableScrollRange(){var e;const t=(null!==(e=this._scrollBuffer)&&void 0!==e?e:0)/100+1;return this._range?Math.floor(this._range*t):Math.floor(this.tableWidgetHeight/this.rowHeight*2*t)}}return e.lateLoadKey="TableWidgetComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(C.nY),s.Y36(C.Fk,8),s.Y36(ct.I,8),s.Y36(s.sBO),s.Y36(F.p),s.Y36(n.zCP),s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(n.mQy),s.Y36(at),s.Y36(lt),s.Y36(pe.C))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-table-widget"]],viewQuery:function(e,t){if(1&e&&(s.Gf(dt,5),s.Gf(c.N7,5),s.Gf(n.xhB,5,s.SBq)),2&e){let e;s.iGM(e=s.CRH())&&(t.table=e.first),s.iGM(e=s.CRH())&&(t.vscrollViewport=e.first),s.iGM(e=s.CRH())&&(t.tableRows=e)}},hostVars:4,hostBindings:function(e,t){2&e&&(s.Tol(t.elementClass),s.ekj("table-widget-fullwidth",!0))},inputs:{widgetData:"widgetData",componentId:"componentId",configuration:"configuration",dataFields:"dataFields",totalItems:"totalItems",indentFromTop:"indentFromTop",sortable:"sortable",delayedMousePresenceDetectionEnabled:"delayedMousePresenceDetectionEnabled",range:"range",elementClass:"elementClass"},features:[s._Bn([at,lt]),s.TTD],decls:11,vars:24,consts:[["class","h-100 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"nui-table-widget","d-flex","flex-column",3,"ngClass"],["class","mr-2 mb-2 flex-row",4,"ngIf"],[1,"flex-row","h-100","nui-table-widget-container",3,"nuiDelayedMousePresenceDetection","delay","mousePresentSubject"],["tableStickyHeader","",1,"calc-height",2,"height","calc(100% - 2px)",3,"itemSize","ngClass"],["nui-table","",1,"nui-table-widget__main",3,"reorderable","sortable","totalItems","dataSource","sortedColumn","trackBy","sortOrderChanged"],["widgetTable",""],[3,"nuiColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["nui-header-row","",4,"nuiHeaderRowDef"],["nuiRowDef","","cdkVirtualFor","",3,"nuiRowDefColumns","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"h-100","d-flex","justify-content-center","align-items-center"],["image","no-data-to-show"],[1,"mr-2","mb-2","flex-row"],[1,"unlimited-width","d-flex","justify-content-end","flex-grow-1",3,"value","inputChange","cancel"],[3,"nuiColumnDef"],["nui-header-cell","",3,"isColumnSortingDisabled","width","max-width","min-width","title","tooltipText","alignment",4,"nuiHeaderCellDef"],["nui-cell","",3,"width","max-width","min-width","alignment",4,"nuiCellDef"],["nui-header-cell","",3,"isColumnSortingDisabled","title","tooltipText","alignment"],["nui-cell","",3,"alignment"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["nui-header-row",""],["nui-row","","density","tiny",3,"click"]],template:function(e,t){1&e&&(s.YNc(0,ut,2,0,"div",0),s.TgZ(1,"div",1),s.YNc(2,pt,2,1,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"cdk-virtual-scroll-viewport",4),s.ALo(5,"async"),s.TgZ(6,"table",5,6),s.NdJ("sortOrderChanged",function(e){return t.onSortOrderChanged(e)}),s.YNc(8,vt,4,1,"ng-container",7),s.YNc(9,yt,1,0,"tr",8),s.YNc(10,bt,1,1,"ng-template",9),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.Q6J("ngIf",!t.shouldDisplayTable()),s.xp6(1),s.Q6J("ngClass",t.shouldDisplayTable()?"h-100":"invisible"),s.xp6(1),s.Q6J("ngIf",t.isSearchEnabled),s.xp6(1),s.Q6J("nuiDelayedMousePresenceDetection",t.delayedMousePresenceDetectionEnabled)("delay",t.configuration.scrollActivationDelayMs)("mousePresentSubject",t.mousePresent$),s.xp6(1),s.Q6J("itemSize",t.rowHeight)("ngClass",s.VKq(22,Ct,!1===s.lcZ(5,20,t.mousePresent$)&&t.delayedMousePresenceDetectionEnabled)),s.xp6(2),s.Q6J("reorderable",null==t.configuration?null:t.configuration.reorderable)("sortable",t.sortable)("totalItems",t.totalItems)("dataSource",t.virtualScrollAddon.visibleItems)("sortedColumn",t.sortedColumn)("trackBy",t.dataTrackBy),s.xp6(2),s.Q6J("ngForOf",t.columns)("ngForTrackBy",t.columnTrackBy),s.xp6(1),s.Q6J("nuiHeaderRowDef",t.headers),s.xp6(1),s.Q6J("nuiRowDefColumns",t.headers)("cdkVirtualForOf",t.tableData)("cdkVirtualForTrackBy",t.dataTrackBy))},directives:[o.O5,o.mk,je,c.N7,n.Fpu,c.xd,n.ac$,o.sg,n.Pu4,n.l6o,c.x0,n.cuP,n.gSk,n.yNF,n.Go6,n.wCL,n.Asp,n.tNH,T.$,S.Pl,n.ue9,n.xhB],pipes:[o.Ov],styles:[".nui-table-widget[_ngcontent-%COMP%]{overflow:auto;width:100%}.nui-table-widget[_ngcontent-%COMP%]   .display-contents[_ngcontent-%COMP%]{display:contents}.nui-table-widget__main[_ngcontent-%COMP%]{flex:1 1 auto}.nui-table-widget__paginator[_ngcontent-%COMP%]{margin-top:10px}.nui-table-widget__overflow[_ngcontent-%COMP%]{overflow-y:auto}.nui-table-widget[_ngcontent-%COMP%]   .nui-table-widget-container[_ngcontent-%COMP%]   .virtual-scroll-disabled.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{overflow:hidden!important}.mobile[_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%], .mobile   [_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%]{min-height:200px}.table-widget-fullwidth[_nghost-%COMP%]{width:calc(100% - 10px)}.invisible[_ngcontent-%COMP%]{height:0}@-moz-document url-prefix(){.nui-table-widget-container{margin-right:10px}}"],changeDetection:0}),e})();var wt=i(52409),Tt=i(16738),St=i.n(Tt);let It=(()=>{class e{convertToSerializable(e){return{startDatetime:e.startDatetime.format(),endDatetime:e.endDatetime.format(),selectedPresetId:e.selectedPresetId,title:e.title}}convertFromSerializable(e){return{startDatetime:St()(e.startDatetime,St().defaultFormat),endDatetime:St()(e.endDatetime,St().defaultFormat),selectedPresetId:e.selectedPresetId,title:e.title}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_t=(()=>{class e{constructor(e,t,i,o,n,r,s){this.pizzagnaService=e,this.timeframeService=t,this.tfSerialization=i,this.history=o,this.dataSource=n,this.eventBus=r,this.changeDetector=s,this.currentTimeframe=this.timeframeService.getTimeframeByPresetId("last7Days")}ngOnChanges(e){if(e.timeframe){let t=this.tfSerialization.convertFromSerializable(this.timeframe);t=this.timeframeService.reconcileTimeframe(t),t.selectedPresetId&&(t=this.timeframeService.getTimeframeByPresetId(t.selectedPresetId)),this.currentTimeframe=t,e.timeframe.isFirstChange()||this.eventBus.getStream(b.RG).next()}e.minDate&&(this.minDateAsMoment=St()(this.minDate,St().defaultFormat)),e.maxDate&&(this.maxDateAsMoment=St()(this.maxDate,St().defaultFormat))}ngOnInit(){this.history.restart(this.currentTimeframe),this.eventBus.getStream(b.re).subscribe(e=>{if(!e.payload)throw new Error("Unable to set timeframe. Event payload is undefined");this.onTimeframeChange(this.history.save(this.tfSerialization.convertFromSerializable(e.payload)))}),this.dataSource&&this.dataSource.registerComponent({timeframe:{componentInstance:{getFilters:()=>({type:"timeframe",value:this.timeframeService.reconcileTimeframe(this.currentTimeframe)})}}})}onTimeframeChange(e){const t=this.timeframeService.reconcileTimeframe(e);t.selectedPresetId=t.selectedPresetId||"",this.timeframeService.isEqual(t,this.currentTimeframe)||this.pizzagnaService.setProperty({pizzagnaKey:C.xW.Data,componentId:this.componentId,propertyPath:["timeframe"]},this.tfSerialization.convertToSerializable(t))}}return e.lateLoadKey="TimeframeSelectionComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(F.p),s.Y36(n.hYR),s.Y36(It),s.Y36(n.vpR),s.Y36(C.Fk,8),s.Y36(C.nY),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-timeframe-selection"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.elementClass)},inputs:{componentId:"componentId",minDate:"minDate",maxDate:"maxDate",timeframe:"timeframe"},features:[s._Bn([n.vpR]),s.TTD],decls:6,vars:8,consts:[[3,"minDate","maxDate","timeFrame","historyIndex","timeFrameChange","undo","clear"],["icon","calendar",1,"pr-3"],["timeFrameSelection","",3,"presets"]],template:function(e,t){1&e&&(s.TgZ(0,"nui-time-frame-bar",0),s.NdJ("timeFrameChange",function(e){return t.onTimeframeChange(t.history.restart(e))})("undo",function(){return t.onTimeframeChange(t.history.undo())})("clear",function(){return t.onTimeframeChange(t.history.restart())}),s._UZ(1,"nui-icon",1),s._uU(2),s.ALo(3,"timeFrame"),s.TgZ(4,"nui-quick-picker",2),s._UZ(5,"nui-time-frame-picker"),s.qZA(),s.qZA()),2&e&&(s.Q6J("minDate",t.minDateAsMoment)("maxDate",t.maxDateAsMoment)("timeFrame",t.currentTimeframe)("historyIndex",t.history.index),s.xp6(2),s.hij(" ",s.lcZ(3,6,t.currentTimeframe)," "),s.xp6(2),s.Q6J("presets",t.timeframeService.currentPresets))},directives:[n.y0H,n.oJW,n.mtp,n.xlZ],pipes:[n.aEp],styles:["[_nghost-%COMP%]{border-top:1px solid;border-top-color:#d9d9d9;border-top-color:var(--nui-color-line-default,#d9d9d9);border-bottom:1px solid;border-bottom-color:#d9d9d9;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),e})();var At=(()=>{return(e=At||(At={})).DataPoints="dataPoints",e.Series="series",e.Values="values",At;var e})(),zt=(()=>{return(e=zt||(zt={})).Time="time",e.TimeInterval="timeInterval",e.Linear="linear",zt;var e})(),kt=(()=>{return(e=kt||(kt={})).Line="line",e.StackedArea="stackedArea",e.StackedPercentageArea="stackedPercentageArea",e.StackedBar="stackedBar",e.StatusBar="statusBar",kt;var e})();let Zt=(()=>{class e{constructor(e){this.unitConversionService=e,this.unitConversionPipe=new Se(this.unitConversionService)}getScale(e){let t;switch(e.type){case zt.Time:t=new u.FBd;break;case zt.Linear:t=new u.f$s,t.formatters.tick=this.unitConversionPipe.transform;break;case zt.TimeInterval:t=new u.lTH((0,Tt.duration)(1,"hour"))}return this.updateConfiguration(t,e),t}updateConfiguration(e,t){var i;if(t.type===zt.TimeInterval&&e instanceof u.lTH){const o=null===(i=t.properties)||void 0===i?void 0:i.interval;if("number"==typeof o){if(o<=0)throw new Error("Interval value must be greater than zero.");e.interval((0,Tt.duration)(o,"seconds"))}}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(n.CrH))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),Ot=(()=>{class e{constructor(e,t){this.timeseriesScalesService=e,this.dataSource=t,this.widgetData={},this.configuration={},this.scales={},this.destroy$=new H.xQ,this.buildChart$=new H.xQ,this.resetChart=!1,this.chartBuilt=!1,this.buildChart$.pipe((0,U.R)(this.destroy$)).subscribe(()=>{this.chartBuilt=!0})}get seriesInteractive(){var e,t,i,o;return"series"===(null===(e=this.configuration)||void 0===e?void 0:e.interaction)||(null===(o=null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.getFeatureConfig(C.ni.Interactivity))||void 0===o?void 0:o.enabled)||!1}ngOnChanges(e){var t,i,o,n,r,s;let a=!1,l=!1;if(e.configuration){const o=e.configuration.currentValue,n=e.configuration.previousValue;if((null==o?void 0:o.preset)!==(null==n?void 0:n.preset)&&(l=!0),(null==o?void 0:o.scales)!==(null==n?void 0:n.scales))for(const e of Object.keys(null==o?void 0:o.scales)){const r=null===(t=null==o?void 0:o.scales)||void 0===t?void 0:t[e],s=null===(i=null==n?void 0:n.scales)||void 0===i?void 0:i[e];(null==r?void 0:r.type)===(null==s?void 0:s.type)&&this.scales[e]?(null==r?void 0:r.properties)!==(null==s?void 0:s.properties)&&(this.timeseriesScalesService.updateConfiguration(this.scales[e],r),a=!0):(this.scales[e]=this.timeseriesScalesService.getScale(r),a=!0)}}(l||!this.chartBuilt)&&this.buildChart(),e.widgetData&&!e.widgetData.isFirstChange()&&(0===(null===(n=null===(o=this.widgetData)||void 0===o?void 0:o.series)||void 0===n?void 0:n.length)&&(this.resetChart=!0),this.widgetData&&this.widgetData.series&&(this.resetChart&&(null===(s=null===(r=this.widgetData)||void 0===r?void 0:r.series)||void 0===s?void 0:s.length)>0&&(this.resetChart=!1,this.buildChart()),a=!0)),a&&this.updateChartData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.buildChart$.complete()}}return e.\u0275fac=function(e){s.$Z()},e.\u0275dir=s.lG2({type:e,inputs:{widgetData:"widgetData",configuration:"configuration"},features:[s.TTD]}),e})();function Pt(e,t){1&e&&s._UZ(0,"nui-icon",12),2&e&&s.Q6J("icon",t.$implicit)}function $t(e,t){if(1&e&&(s.TgZ(0,"div",6),s.TgZ(1,"nui-legend",7),s.TgZ(2,"nui-legend-series",8),s.TgZ(3,"div",9),s._UZ(4,"div",10),s.YNc(5,Pt,1,1,"nui-icon",11),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=t.$implicit,i=s.oxw(3);s.xp6(1),s.Q6J("active",i.chartAssist.isLegendActive),s.xp6(1),s.Q6J("descriptionPrimary",e.legendDescriptionPrimary)("descriptionSecondary",e.legendDescriptionSecondary),s.xp6(2),s.Udp("background-color",i.getDataPointData(e,"color")),s.xp6(1),s.Q6J("ngIf",i.getDataPointData(e,"icon"))}}function Ft(e,t){if(1&e&&(s.TgZ(0,"div",3),s._UZ(1,"nui-chart",4),s.YNc(2,$t,6,6,"div",5),s.qZA()),2&e){const e=t.$implicit,i=s.oxw(2);s.xp6(1),s.Q6J("chart",e.chart)("nuiChartCollectionId",i.collectionId),s.xp6(1),s.Q6J("ngIf",(null==e.chartSeriesSet?null:e.chartSeriesSet.length)>0&&e.chartSeriesSet[0])}}function Dt(e,t){if(1&e&&(s.TgZ(0,"div",1),s.YNc(1,Ft,3,3,"div",2),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.chartAssist.sparks)("ngForTrackBy",e.chartAssist.trackByFn)}}let Mt=(()=>{class e extends Ot{constructor(e,t,i,o,r){super(i,t),this.iconService=e,this.timeseriesScalesService=i,this.changeDetector=o,this.eventBus=r,this.collectionId=(0,n.VjN)("timeseries-status-charts"),this.chartUpdate$=new H.xQ}ngOnInit(){}getDataPointData(e,t){var i;const o=null===(i=this.chartAssist.highlightedDataPoints[e.id])||void 0===i?void 0:i.data;return o?o[t]:e.data.length>0?e.data[e.data.length-1][t]:void 0}buildChart(){this.buildChart$.next(),this.chartAssist=new u.ruA,this.accessors=(0,u.s_I)(this.chartAssist.palette.standardColors),this.accessors.data.color=(e,t,i,o)=>void 0===e.color?"var(--nui-color-semantic-unknown)":e.color,this.accessors.data.thickness=e=>void 0===e.thick||e.thick?u.Z7w.THICK:u.Z7w.THIN,this.accessors.data.marker=e=>e.icon?this.iconService.getIconResized(this.iconService.getIconData(e.icon).code,8):void 0,this.renderer=new u.Z7w({highlightStrategy:new u.Pkp("x"),pointerEvents:!1}),this.scales.y=new u.jS7,this.scales.y.fixDomain(u.s1E.STATUS_DOMAIN)}updateChartData(){var e,t;this.chartUpdate$.next();const i=this.widgetData.series.map(e=>Object.assign(Object.assign({},e),{data:this.transformData(e.data,this.scales.x instanceof u.lTH),accessors:this.accessors,renderer:this.renderer,scales:this.scales}));this.chartAssist.update(i),this.configuration.enableZoom&&(this.chartAssist.sparks.forEach(e=>{var t,i;(null===(t=null==e?void 0:e.chart)||void 0===t?void 0:t.hasPlugin(u.Rbc))||null===(i=null==e?void 0:e.chart)||void 0===i||i.addPlugin(new u.Rbc({enableExternalEvents:!0}))}),null===(e=this.chartAssist.sparks[0].chart)||void 0===e||e.getEventBus().getStream(u.bdF).pipe((0,U.R)((0,et.T)(this.chartUpdate$,null===(t=this.chartAssist.sparks[0].chart)||void 0===t?void 0:t.eventBus.getStream(u.wu_),this.buildChart$))).subscribe(e=>{const t=e.data,i=t[Object.keys(t)[0]];this.eventBus.getStream(b.re).next({payload:{startDatetime:i[0],endDatetime:i[1],selectedPresetId:null}})}))}transformData(e,t){const i=[];return e.forEach((o,n)=>{(t||e.length-1!==n)&&i.push({start:o.x,end:t?o.x:e[n+1].x,status:o.y,color:o.color,thick:o.thick,icon:o.icon})}),i}}return e.lateLoadKey="StatusChartComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(n.C6t),s.Y36(C.Fk,8),s.Y36(Zt),s.Y36(s.sBO),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-status-bar-chart"]],features:[s.qOj],decls:1,vars:1,consts:[["class","p-3 status-bar-chart",4,"ngIf"],[1,"p-3","status-bar-chart"],["class","d-flex",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex"],[1,"d-flex","flex-grow-1",3,"chart","nuiChartCollectionId"],["class","d-flex flex-column pl-2",4,"ngIf"],[1,"d-flex","flex-column","pl-2"],[1,"status-bar-chart__legend",3,"active"],[3,"descriptionPrimary","descriptionSecondary"],[1,"status-bar-chart__legend__tile","d-flex","justify-content-center","align-items-center"],[1,"w-100","h-100","status-bar-chart__legend__tile__background"],["class","status-bar-chart__legend__tile__icon",3,"icon",4,"ngIf"],[1,"status-bar-chart__legend__tile__icon",3,"icon"]],template:function(e,t){1&e&&s.YNc(0,Dt,2,2,"div",0),2&e&&s.Q6J("ngIf",t.chartAssist)},directives:[o.O5,o.sg,u.xH4,u.VMb,u.FVX,u.kJo,n.oJW],styles:[".status-bar-chart__legend__tile[_ngcontent-%COMP%]{width:60px;position:relative}.status-bar-chart__legend__tile__background[_ngcontent-%COMP%]{position:absolute;opacity:.4}.status-bar-chart__legend__tile__icon[_ngcontent-%COMP%]{position:absolute}"]}),e})(),Rt=(()=>{class e extends Ot{constructor(e,t,i,o){super(i,t),this.eventBus=e,this.timeseriesScalesService=i,this.changeDetector=o,this.valueAccessorKey="y"}mapSeriesSet(e,t){return e.map(e=>Object.assign(Object.assign({},e),{scales:t,renderer:this.renderer,accessors:this.accessors}))}hasLegend(){return this.configuration.legendPlacement&&this.configuration.legendPlacement!==g.w.None}legendShouldBeAlignedRight(){return this.configuration.legendPlacement===g.w.Right}onPrimaryDescClick(e,t){!this.seriesInteractive||(e.stopPropagation(),this.eventBus.getStream(b.b1).next({payload:{data:t,interactionType:At.Series}}))}updateChartData(){this.chartAssist.update(this.mapSeriesSet(this.widgetData.series,this.scales))}buildChart(){var e;this.buildChart$.next();const t=this.configuration.chartColors&&(null===(e=this.configuration.chartColors)||void 0===e?void 0:e.length)>0?new u.jpW(this.configuration.chartColors):(0,u.GUR)(),i=new u.syg(t);this.accessors=this.createAccessors(i.standardColors),this.chartAssist=this.createChartAssist(i);const o=this.chartAssist.chart;this.configuration.enableZoom&&o.addPlugin(new u.Rbc),o.getEventBus().getStream(u.bdF).pipe((0,U.R)((0,et.T)(this.destroy$,this.buildChart$))).subscribe(e=>{const t=e.data,i=t[Object.keys(t)[0]];this.eventBus.getStream(b.re).next({payload:{startDatetime:i[0],endDatetime:i[1],selectedPresetId:null}})}),this.setupInteraction()}setupInteraction(){this.chartAssist.chart.getEventBus().getStream(u.C1c).pipe((0,U.R)((0,et.T)(this.destroy$,this.buildChart$))).subscribe(e=>{const t=e.data;t.interactionType===u.s_5.Click&&this.eventBus.getStream(b.b1).next({payload:{data:t.dataPoints,interactionType:At.DataPoints}})}),this.chartAssist.chart.getEventBus().getStream(u.hkV).pipe((0,U.R)((0,et.T)(this.destroy$,this.buildChart$))).subscribe(e=>{const t=e.data;t.interactionType===u.s_5.Click&&this.eventBus.getStream(b.b1).next({payload:{data:t.values,interactionType:At.Values}})})}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(C.nY),s.LFG(C.Fk,8),s.LFG(Zt),s.LFG(s.sBO))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();const Jt=function(e){return{"nui-text-link-small link":e}};function Lt(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",16),s.NdJ("click",function(t){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).onPrimaryDescClick(t,i)}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw().$implicit,t=s.oxw(2);s.Q6J("ngClass",s.VKq(2,Jt,t.seriesInteractive)),s.xp6(1),s.hij(" ",e.legendDescriptionPrimary," ")}}function Et(e,t){if(1&e&&(s.TgZ(0,"a",17),s.NdJ("click",function(e){return e.stopPropagation()}),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("href",e.link,s.LSH)("title",e.legendDescriptionPrimary),s.xp6(1),s.hij(" ",e.legendDescriptionPrimary," ")}}function qt(e,t){if(1&e&&(s.TgZ(0,"div",18),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("title",e.legendDescriptionSecondary),s.xp6(1),s.hij(" ",e.legendDescriptionSecondary," ")}}function Bt(e,t){if(1&e&&(s.TgZ(0,"a",19),s.NdJ("click",function(e){return e.stopPropagation()}),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("href",e.secondaryLink,s.LSH)("title",e.legendDescriptionSecondary),s.xp6(1),s.hij(" ",e.legendDescriptionSecondary," ")}}function Nt(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"nui-legend-series",8),s.NdJ("isSelectedChange",function(t){const i=s.CHM(e).$implicit;return s.oxw(2).chartAssist.toggleSeries(i.id,t)})("mouseenter",function(){const t=s.CHM(e).$implicit;return s.oxw(2).chartAssist.emphasizeSeries(t.id)})("mouseleave",function(){return s.CHM(e),s.oxw(2).chartAssist.resetVisibleSeries()}),s.TgZ(1,"nui-rich-legend-tile",9),s._UZ(2,"nui-chart-marker",10),s.qZA(),s.TgZ(3,"div",11),s.YNc(4,Lt,2,4,"div",12),s.YNc(5,Et,2,3,"a",13),s.YNc(6,qt,2,2,"div",14),s.YNc(7,Bt,2,3,"a",15),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,i=s.oxw(2);s.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[e.id]?null:i.chartAssist.renderStatesIndex[e.id].state))("isSelected",!i.chartAssist.isSeriesHidden(e.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[e.id]?null:i.chartAssist.renderStatesIndex[e.id].state),s.xp6(1),s.Q6J("value",i.chartAssist.getHighlightedValue(e,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(e.id))("color",i.chartAssist.palette.textColors.get(e.id)),s.xp6(1),s.Q6J("marker",i.chartAssist.markers.get(e.id))("color",i.chartAssist.palette.standardColors.get(e.id)),s.xp6(2),s.Q6J("ngIf",!e.link),s.xp6(1),s.Q6J("ngIf",e.link),s.xp6(1),s.Q6J("ngIf",!e.secondaryLink),s.xp6(1),s.Q6J("ngIf",e.secondaryLink)}}const Qt=function(e){return[e]};function Yt(e,t){if(1&e&&(s.TgZ(0,"div",5),s.TgZ(1,"nui-legend",6),s.YNc(2,Nt,8,12,"nui-legend-series",7),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.Q6J("ngClass",s.VKq(6,Qt,e.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),s.xp6(1),s.Q6J("active",e.chartAssist.isLegendActive)("interactive",!0)("orientation",e.legendShouldBeAlignedRight()?"vertical":"horizontal"),s.xp6(1),s.Q6J("ngForOf",e.chartAssist.legendSeriesSet)("ngForTrackBy",e.chartAssist.seriesTrackByFn)}}let Vt=(()=>{class e extends Rt{constructor(e,t,i,o){super(e,t,i,o),this.renderer=new u.Med}createAccessors(e){return new u.qxh(e)}createChartAssist(e){const t=new u.c_e;t.axis.left.fit=!0;const i=new u.kL2(new u.Be5(t));return new u.doR(i,null,e)}}return e.lateLoadKey="LineChartComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(C.nY),s.Y36(C.Fk,8),s.Y36(Zt),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-line-chart"]],features:[s.qOj],decls:7,vars:3,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"strong"),s._uU(3),s.qZA(),s.qZA(),s.TgZ(4,"div",2),s._UZ(5,"nui-chart",3),s.qZA(),s.YNc(6,Yt,3,8,"div",4),s.qZA()),2&e&&(s.xp6(3),s.Oqu(t.configuration.leftAxisLabel),s.xp6(2),s.Q6J("chart",t.chartAssist.chart),s.xp6(1),s.Q6J("ngIf",t.hasLegend()))},directives:[u.xH4,o.O5,o.mk,u.FVX,o.sg,u.kJo,u.wHi,u.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:#111;color:var(--nui-color-text-default,#111)}"]}),e})();const Wt=function(e){return{"nui-text-link-small link":e}};function jt(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",16),s.NdJ("click",function(t){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).onPrimaryDescClick(t,i)}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw().$implicit,t=s.oxw(2);s.Q6J("ngClass",s.VKq(2,Wt,t.seriesInteractive)),s.xp6(1),s.hij(" ",e.legendDescriptionPrimary," ")}}function Ht(e,t){if(1&e&&(s.TgZ(0,"a",17),s.NdJ("click",function(e){return e.stopPropagation()}),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("href",e.link,s.LSH)("title",e.legendDescriptionPrimary),s.xp6(1),s.hij(" ",e.legendDescriptionPrimary," ")}}function Ut(e,t){if(1&e&&(s.TgZ(0,"div",18),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("title",e.legendDescriptionSecondary),s.xp6(1),s.hij(" ",e.legendDescriptionSecondary," ")}}function Gt(e,t){if(1&e&&(s.TgZ(0,"a",19),s.NdJ("click",function(e){return e.stopPropagation()}),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("href",e.secondaryLink,s.LSH)("title",e.legendDescriptionSecondary),s.xp6(1),s.hij(" ",e.legendDescriptionSecondary," ")}}function Kt(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"nui-legend-series",8),s.NdJ("isSelectedChange",function(t){const i=s.CHM(e).$implicit;return s.oxw(2).chartAssist.toggleSeries(i.id,t)})("mouseenter",function(){const t=s.CHM(e).$implicit;return s.oxw(2).chartAssist.emphasizeSeries(t.id)})("mouseleave",function(){return s.CHM(e),s.oxw(2).chartAssist.resetVisibleSeries()}),s.TgZ(1,"nui-rich-legend-tile",9),s._UZ(2,"nui-chart-marker",10),s.qZA(),s.TgZ(3,"div",11),s.YNc(4,jt,2,4,"div",12),s.YNc(5,Ht,2,3,"a",13),s.YNc(6,Ut,2,2,"div",14),s.YNc(7,Gt,2,3,"a",15),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,i=s.oxw(2);s.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[e.id]?null:i.chartAssist.renderStatesIndex[e.id].state))("isSelected",!i.chartAssist.isSeriesHidden(e.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[e.id]?null:i.chartAssist.renderStatesIndex[e.id].state),s.xp6(1),s.Q6J("value",i.chartAssist.getHighlightedValue(e,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(e.id))("color",i.chartAssist.palette.textColors.get(e.id)),s.xp6(1),s.Q6J("marker",i.chartAssist.markers.get(e.id))("color",i.chartAssist.palette.standardColors.get(e.id)),s.xp6(2),s.Q6J("ngIf",!e.link),s.xp6(1),s.Q6J("ngIf",e.link),s.xp6(1),s.Q6J("ngIf",!e.secondaryLink),s.xp6(1),s.Q6J("ngIf",e.secondaryLink)}}const Xt=function(e){return[e]};function ei(e,t){if(1&e&&(s.TgZ(0,"div",5),s.TgZ(1,"nui-legend",6),s.YNc(2,Kt,8,12,"nui-legend-series",7),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.Q6J("ngClass",s.VKq(6,Xt,e.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),s.xp6(1),s.Q6J("active",e.chartAssist.isLegendActive)("interactive",!0)("orientation",e.legendShouldBeAlignedRight()?"vertical":"horizontal"),s.xp6(1),s.Q6J("ngForOf",e.chartAssist.legendSeriesSet)("ngForTrackBy",e.chartAssist.seriesTrackByFn)}}let ti=(()=>{class e extends Rt{constructor(e,t,i,o){super(e,t,i,o),this.renderer=new u.QtU,this.valueAccessorKey="y1"}createAccessors(e){return(0,u.mIe)(e)}createChartAssist(e){const t=(0,u.nuZ)();t.config().axis.left.fit=!0;const i=new u.kL2(t);return new u.doR(i,u.aCj,e)}}return e.lateLoadKey="StackedAreaChartComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(C.nY),s.Y36(C.Fk,8),s.Y36(Zt),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-stacked-area-chart"]],features:[s.qOj],decls:7,vars:3,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"strong"),s._uU(3),s.qZA(),s.qZA(),s.TgZ(4,"div",2),s._UZ(5,"nui-chart",3),s.qZA(),s.YNc(6,ei,3,8,"div",4),s.qZA()),2&e&&(s.xp6(3),s.Oqu(t.configuration.leftAxisLabel),s.xp6(2),s.Q6J("chart",t.chartAssist.chart),s.xp6(1),s.Q6J("ngIf",t.hasLegend()))},directives:[u.xH4,o.O5,o.mk,u.FVX,o.sg,u.kJo,u.wHi,u.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:#111;color:var(--nui-color-text-default,#111)}"]}),e})();const ii=function(e){return{"nui-text-link-small link":e}};function oi(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",16),s.NdJ("click",function(t){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).onPrimaryDescClick(t,i)}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw().$implicit,t=s.oxw(2);s.Q6J("ngClass",s.VKq(2,ii,t.seriesInteractive)),s.xp6(1),s.hij(" ",e.legendDescriptionPrimary," ")}}function ni(e,t){if(1&e&&(s.TgZ(0,"a",17),s.NdJ("click",function(e){return e.stopPropagation()}),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("href",e.link,s.LSH)("title",e.legendDescriptionPrimary),s.xp6(1),s.hij(" ",e.legendDescriptionPrimary," ")}}function ri(e,t){if(1&e&&(s.TgZ(0,"div",18),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("title",e.legendDescriptionSecondary),s.xp6(1),s.hij(" ",e.legendDescriptionSecondary," ")}}function si(e,t){if(1&e&&(s.TgZ(0,"a",19),s.NdJ("click",function(e){return e.stopPropagation()}),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("href",e.secondaryLink,s.LSH)("title",e.legendDescriptionSecondary),s.xp6(1),s.hij(" ",e.legendDescriptionSecondary," ")}}function ai(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"nui-legend-series",8),s.NdJ("isSelectedChange",function(t){const i=s.CHM(e).$implicit;return s.oxw(2).chartAssist.toggleSeries(i.id,t)})("mouseenter",function(){const t=s.CHM(e).$implicit;return s.oxw(2).chartAssist.emphasizeSeries(t.id)})("mouseleave",function(){return s.CHM(e),s.oxw(2).chartAssist.resetVisibleSeries()}),s.TgZ(1,"nui-rich-legend-tile",9),s._UZ(2,"nui-chart-marker",10),s.qZA(),s.TgZ(3,"div",11),s.YNc(4,oi,2,4,"div",12),s.YNc(5,ni,2,3,"a",13),s.YNc(6,ri,2,2,"div",14),s.YNc(7,si,2,3,"a",15),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,i=s.oxw(2);s.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[e.id]?null:i.chartAssist.renderStatesIndex[e.id].state))("isSelected",!i.chartAssist.isSeriesHidden(e.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[e.id]?null:i.chartAssist.renderStatesIndex[e.id].state),s.xp6(1),s.Q6J("value",i.chartAssist.getHighlightedValue(e,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(e.id))("color",i.chartAssist.palette.textColors.get(e.id)),s.xp6(1),s.Q6J("marker",i.chartAssist.markers.get(e.id))("color",i.chartAssist.palette.standardColors.get(e.id)),s.xp6(2),s.Q6J("ngIf",!e.link),s.xp6(1),s.Q6J("ngIf",e.link),s.xp6(1),s.Q6J("ngIf",!e.secondaryLink),s.xp6(1),s.Q6J("ngIf",e.secondaryLink)}}const li=function(e){return[e]};function ci(e,t){if(1&e&&(s.TgZ(0,"div",5),s.TgZ(1,"nui-legend",6),s.YNc(2,ai,8,12,"nui-legend-series",7),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.Q6J("ngClass",s.VKq(6,li,e.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),s.xp6(1),s.Q6J("active",e.chartAssist.isLegendActive)("interactive",!0)("orientation",e.legendShouldBeAlignedRight()?"vertical":"horizontal"),s.xp6(1),s.Q6J("ngForOf",e.chartAssist.legendSeriesSet)("ngForTrackBy",e.chartAssist.seriesTrackByFn)}}let di=(()=>{class e extends Rt{constructor(e,t,i,o){super(e,t,i,o),this.valueAccessorKey="value",this.renderer=new u.Z7w({highlightStrategy:new u.Pkp("x"),pointerEvents:!1})}mapSeriesSet(e,t){return this.accessors.data.thickness=t.x instanceof u.lTH?void 0:()=>5,super.mapSeriesSet(e,t)}createAccessors(e){const t=(0,u.Q6e)({horizontal:!1},e);return t.data.category=e=>e.x,t.data.value=e=>e.y,t}createChartAssist(e){const t=new u.kL2((0,u.skL)());return t.addPlugin(new u.$fK),new u.doR(t,u.knu,e)}}return e.lateLoadKey="StackedBarChartComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(C.nY),s.Y36(C.Fk,8),s.Y36(Zt),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-stacked-bar-chart"]],features:[s.qOj],decls:7,vars:3,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"strong"),s._uU(3),s.qZA(),s.qZA(),s.TgZ(4,"div",2),s._UZ(5,"nui-chart",3),s.qZA(),s.YNc(6,ci,3,8,"div",4),s.qZA()),2&e&&(s.xp6(3),s.Oqu(t.configuration.leftAxisLabel),s.xp6(2),s.Q6J("chart",t.chartAssist.chart),s.xp6(1),s.Q6J("ngIf",t.hasLegend()))},directives:[u.xH4,o.O5,o.mk,u.FVX,o.sg,u.kJo,u.wHi,u.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:#111;color:var(--nui-color-text-default,#111)}"]}),e})();const ui=function(e){return{"nui-text-link-small link":e}};function pi(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",16),s.NdJ("click",function(t){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).onPrimaryDescClick(t,i)}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw().$implicit,t=s.oxw(2);s.Q6J("ngClass",s.VKq(2,ui,t.seriesInteractive)),s.xp6(1),s.hij(" ",e.legendDescriptionPrimary," ")}}function hi(e,t){if(1&e&&(s.TgZ(0,"a",17),s.NdJ("click",function(e){return e.stopPropagation()}),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("href",e.link,s.LSH)("title",e.legendDescriptionPrimary),s.xp6(1),s.hij(" ",e.legendDescriptionPrimary," ")}}function gi(e,t){if(1&e&&(s.TgZ(0,"div",18),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("title",e.legendDescriptionSecondary),s.xp6(1),s.hij(" ",e.legendDescriptionSecondary," ")}}function mi(e,t){if(1&e&&(s.TgZ(0,"a",19),s.NdJ("click",function(e){return e.stopPropagation()}),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit;s.Q6J("href",e.secondaryLink,s.LSH)("title",e.legendDescriptionSecondary),s.xp6(1),s.hij(" ",e.legendDescriptionSecondary," ")}}function fi(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"nui-legend-series",8),s.NdJ("isSelectedChange",function(t){const i=s.CHM(e).$implicit;return s.oxw(2).chartAssist.toggleSeries(i.id,t)})("mouseenter",function(){const t=s.CHM(e).$implicit;return s.oxw(2).chartAssist.emphasizeSeries(t.id)})("mouseleave",function(){return s.CHM(e),s.oxw(2).chartAssist.resetVisibleSeries()}),s.TgZ(1,"nui-rich-legend-tile",9),s._UZ(2,"nui-chart-marker",10),s.qZA(),s.TgZ(3,"div",11),s.YNc(4,pi,2,4,"div",12),s.YNc(5,hi,2,3,"a",13),s.YNc(6,gi,2,2,"div",14),s.YNc(7,mi,2,3,"a",15),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,i=s.oxw(2);s.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[e.id]?null:i.chartAssist.renderStatesIndex[e.id].state))("isSelected",!i.chartAssist.isSeriesHidden(e.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[e.id]?null:i.chartAssist.renderStatesIndex[e.id].state),s.xp6(1),s.Q6J("value",i.chartAssist.getHighlightedValue(e,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(e.id))("color",i.chartAssist.palette.textColors.get(e.id)),s.xp6(1),s.Q6J("marker",i.chartAssist.markers.get(e.id))("color",i.chartAssist.palette.standardColors.get(e.id)),s.xp6(2),s.Q6J("ngIf",!e.link),s.xp6(1),s.Q6J("ngIf",e.link),s.xp6(1),s.Q6J("ngIf",!e.secondaryLink),s.xp6(1),s.Q6J("ngIf",e.secondaryLink)}}const vi=function(e){return[e]};function yi(e,t){if(1&e&&(s.TgZ(0,"div",5),s.TgZ(1,"nui-legend",6),s.YNc(2,fi,8,12,"nui-legend-series",7),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.Q6J("ngClass",s.VKq(6,vi,e.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),s.xp6(1),s.Q6J("active",e.chartAssist.isLegendActive)("interactive",!0)("orientation",e.legendShouldBeAlignedRight()?"vertical":"horizontal"),s.xp6(1),s.Q6J("ngForOf",e.chartAssist.legendSeriesSet)("ngForTrackBy",e.chartAssist.seriesTrackByFn)}}let bi=(()=>{class e extends Rt{constructor(e,t,i,o){super(e,t,i,o),this.renderer=new u.QtU,this.valueAccessorKey="y1"}createAccessors(e){return(0,u.mIe)(e)}createChartAssist(e){const t=(0,u.nuZ)();t.config().axis.left.fit=!0;const i=new u.kL2(t);return new u.doR(i,u.HAP,e)}}return e.lateLoadKey="StackedPercentageAreaChartComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(C.nY),s.Y36(C.Fk,8),s.Y36(Zt),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-stacked-percentage-area-chart"]],features:[s.qOj],decls:7,vars:3,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"strong"),s._uU(3),s.qZA(),s.qZA(),s.TgZ(4,"div",2),s._UZ(5,"nui-chart",3),s.qZA(),s.YNc(6,yi,3,8,"div",4),s.qZA()),2&e&&(s.xp6(3),s.Oqu(t.configuration.leftAxisLabel),s.xp6(2),s.Q6J("chart",t.chartAssist.chart),s.xp6(1),s.Q6J("ngIf",t.hasLegend()))},directives:[u.xH4,o.O5,o.mk,u.FVX,o.sg,u.kJo,u.wHi,u.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:#111;color:var(--nui-color-text-default,#111)}"]}),e})(),Ci=(()=>{class e{constructor(){this.presets={[kt.Line]:{componentType:Vt.lateLoadKey},[kt.StackedArea]:{componentType:ti.lateLoadKey},[kt.StackedPercentageArea]:{componentType:bi.lateLoadKey},[kt.StackedBar]:{componentType:di.lateLoadKey},[kt.StatusBar]:{componentType:Mt.lateLoadKey}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function xi(e,t){}const wi=function(e,t){return{widgetData:e,configuration:t}};function Ti(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",2),s.ynx(1,3,4),s.YNc(3,xi,0,0,"ng-template",5),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(2).attached(t)}),s.BQk(),s.qZA()}if(2&e){const e=s.MAs(2),t=s.oxw();s.xp6(1),s.Q6J("componentType",t.chartPreset.componentType)("properties",s.WLB(3,wi,t.widgetData,t.configuration)),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}function Si(e,t){1&e&&(s.TgZ(0,"div"),s._UZ(1,"nui-image",6),s.qZA())}let Ii=(()=>{class e{constructor(e,t){this.timeseriesChartPresetService=e,this.changeDetector=t,this.widgetData={},this.configuration={},this.elementClass=""}ngOnChanges(e){var t,i;if(e.configuration){const o=e.configuration.currentValue,n=e.configuration.previousValue;(null==o?void 0:o.preset)!==(null==n?void 0:n.preset)&&(this.chartPreset=this.timeseriesChartPresetService.presets[null!==(i=null===(t=this.configuration)||void 0===t?void 0:t.preset)&&void 0!==i?i:kt.Line])}}shouldShowChart(){var e,t;return(null===(t=null===(e=this.widgetData)||void 0===e?void 0:e.series)||void 0===t?void 0:t.length)>0}}return e.lateLoadKey="TimeseriesWidgetComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(Ci),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-timeseries-widget"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",elementClass:"elementClass"},features:[s.TTD],decls:2,vars:2,consts:[["class","h-100",4,"ngIf"],[4,"ngIf"],[1,"h-100"],["nuiComponentPortal","","componentId","timeseriesWidgetChart",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["image","no-data-to-show"]],template:function(e,t){1&e&&(s.YNc(0,Ti,4,6,"div",0),s.YNc(1,Si,2,0,"div",1)),2&e&&(s.Q6J("ngIf",t.shouldShowChart()),s.xp6(1),s.Q6J("ngIf",!t.shouldShowChart()))},directives:[o.O5,T.$,S.Pl,n.cuP],encapsulation:2}),e})();function _i(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"nui-search",1),s.NdJ("inputChange",function(t){return s.CHM(e),s.oxw().onSearchInputChanged(t)})("cancel",function(t){return s.CHM(e),s.oxw().onSearch(t)})("search",function(t){return s.CHM(e),s.oxw().onSearch(t)}),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("value",e.searchValue)}}let Ai=(()=>{class e{constructor(e,t){this.dataSource=e,this.eventBus=t,this.enabled=!1,this.searchTerm$=new H.xQ,this.onDestroy$=new H.xQ}ngOnInit(){var e,t,i,o;(null===(i=null===(t=null===(e=this.dataSource.features)||void 0===e?void 0:e.getSupportedFeatures())||void 0===t?void 0:t.search)||void 0===i?void 0:i.enabled)&&(this.enabled=!0),this.registerFilters(),this.handleSearchTermSubscription(null===(o=this.configuration)||void 0===o?void 0:o.searchOnKeyUp)}ngOnChanges(e){e.configuration&&this.handleSearchTermSubscription(e.configuration.currentValue.searchOnKeyUp)}onSearchInputChanged(e){var t,i;(null===(i=null===(t=this.configuration)||void 0===t?void 0:t.searchOnKeyUp)||void 0===i?void 0:i.enabled)&&(this.searchValue=e,this.searchTerm$.next(e))}onSearch(e){this.searchValue=e,this.searchTerm$.next(e)}ngOnDestroy(){this.eventBus.getStream(b.kV).next({payload:""}),this.onDestroy$.next(),this.onDestroy$.complete()}registerFilters(){var e;null===(e=this.dataSource)||void 0===e||e.registerComponent({search:{componentInstance:{getFilters:()=>({value:this.searchValue})}}})}handleSearchTermSubscription(t){var i;null===(i=this.searchTermSubscription)||void 0===i||i.unsubscribe(),this.searchTermSubscription=this.searchTerm$.pipe((0,U.R)(this.onDestroy$),(0,st.b)((null==t?void 0:t.debounceTime)||e.defaultSearchDebounce)).subscribe(e=>{this.eventBus.getStream(b.RG).next(),this.eventBus.getStream(b.kV).next({payload:e})})}}return e.lateLoadKey="WidgetSearchComponent",e.defaultSearchDebounce=500,e.\u0275fac=function(t){return new(t||e)(s.Y36(C.Fk,8),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-widget-search"]],hostVars:4,hostBindings:function(e,t){2&e&&s.ekj("default",t.enabled)("invisible",!t.enabled)},inputs:{configuration:"configuration",searchValue:"searchValue"},features:[s.TTD],decls:1,vars:1,consts:[["class","unlimited-width",3,"value","inputChange","cancel","search",4,"ngIf"],[1,"unlimited-width",3,"value","inputChange","cancel","search"]],template:function(e,t){1&e&&s.YNc(0,_i,1,1,"nui-search",0),2&e&&s.Q6J("ngIf",t.enabled)},directives:[o.O5,n.gSk],styles:[".default[_nghost-%COMP%]{padding:5px 10px}.invisible[_nghost-%COMP%]{height:0}"],changeDetection:0}),e})();var zi=(()=>{return(e=zi||(zi={})).ErrorUnknown="errorUnknown",e.ErrorForbidden="errorForbidden",e.ErrorNotFound="errorNotFound",zi;var e})();function ki(e,t){}function Zi(e,t){}function Oi(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",5),s.ynx(1,1,2),s.YNc(3,Zi,0,0,"ng-template",3),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(2).attached(t)}),s.BQk(),s.qZA()}if(2&e){const e=s.MAs(2),t=s.oxw();s.xp6(1),s.Q6J("componentId",t.nodeConfigs[1].id)("componentType",t.nodeConfigs[1].componentType)("providers",t.nodeConfigs[1].providers)("properties",t.nodeConfigs[1].properties),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}const Pi=function(e,t){return{"d-none":e,"d-flex":t}};let $i=(()=>{class e extends D.I{constructor(e,t,i){super(e,t,i),this.elementClass="",this.defaultClasses="w-100"}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`}ngOnDestroy(){super.ngOnDestroy()}getNodes(){return this.fallbackKey?[this.primaryContent,this.fallbackMap&&this.fallbackMap[this.fallbackKey]||zi.ErrorUnknown]:[this.primaryContent]}}return e.lateLoadKey="WidgetBodyContentComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(F.p),s.Y36(n.mQy))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-widget-body-content"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.classNames)},inputs:{componentId:"componentId",primaryContent:"primaryContent",fallbackKey:"fallbackKey",fallbackMap:"fallbackMap",elementClass:"elementClass"},features:[s.qOj],decls:5,vars:10,consts:[[1,"h-100",3,"ngClass"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["class","d-flex h-100",4,"ngIf"],[1,"d-flex","h-100"]],template:function(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",0),s.ynx(1,1,2),s.YNc(3,ki,0,0,"ng-template",3),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(2).attached(t)}),s.BQk(),s.qZA(),s.YNc(4,Oi,4,5,"div",4)}if(2&e){const e=s.MAs(2);s.Q6J("ngClass",s.WLB(7,Pi,t.fallbackKey,!t.fallbackKey)),s.xp6(1),s.Q6J("componentId",t.nodeConfigs[0].id)("componentType",t.nodeConfigs[0].componentType)("providers",t.nodeConfigs[0].providers)("properties",t.nodeConfigs[0].properties),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal),s.xp6(1),s.Q6J("ngIf",t.fallbackKey)}},directives:[o.mk,T.$,S.Pl,o.O5],encapsulation:2}),e})();function Fi(e,t){1&e&&s._UZ(0,"nui-preview-overlay")}function Di(e,t){}let Mi=(()=>{class e extends D.I{constructor(e,t,i,o){super(t,i,o),this.eventBus=e,this.editMode=!1,this.elementClass="",this.defaultClasses="d-flex h-100 w-100",this.getNodes=()=>[this.content]}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`,this.eventBus.getStream(b.N9).pipe((0,U.R)(this.destroyed$)).subscribe(e=>{this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:C.xW.Data,propertyPath:["editMode"]},!!e.payload)})}ngOnDestroy(){super.ngOnDestroy()}}return e.lateLoadKey="WidgetBodyComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(C.nY),s.Y36(s.sBO),s.Y36(F.p),s.Y36(n.mQy))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-widget-body"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.classNames)},inputs:{componentId:"componentId",editMode:"editMode",content:"content",elementClass:"elementClass"},features:[s.qOj],decls:4,vars:6,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){if(1&e){const e=s.EpF();s.YNc(0,Fi,1,0,"nui-preview-overlay",0),s.ynx(1,1,2),s.YNc(3,Di,0,0,"ng-template",3),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(2).attached(t)}),s.BQk()}if(2&e){const e=s.MAs(2);s.Q6J("ngIf",t.editMode),s.xp6(1),s.Q6J("componentId",t.nodeConfigs[0].id)("componentType",t.nodeConfigs[0].componentType)("providers",t.nodeConfigs[0].providers)("properties",t.nodeConfigs[0].properties),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}},directives:[o.O5,T.$,S.Pl,r.b],styles:["[_nghost-%COMP%]{position:relative}"]}),e})();const Ri=["widgetHeaderCustomElement"];function Ji(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",18),s.NdJ("click",function(){return s.CHM(e),s.oxw().toggleCollapsed()}),s._UZ(1,"span",19),s.qZA()}}function Li(e,t){1&e&&(s.TgZ(0,"div",20),s._UZ(1,"nui-icon",21),s.qZA())}function Ei(e,t){if(1&e&&(s.TgZ(0,"div",22),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.Q6J("title",e.title),s.xp6(1),s.hij(" ",e.title," ")}}function qi(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"a",23),s.NdJ("click",function(t){return s.CHM(e),s.oxw().prepareLink(t)})("mouseenter",function(t){return s.CHM(e),s.oxw().prepareLink(t)})("mousedown",function(e){return e.stopPropagation(),e.preventDefault()}),s._uU(2),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(1),s.Q6J("href",e.url,s.LSH)("nuiTooltip",e.linkTooltip),s.xp6(1),s.Oqu(e.title)}}function Bi(e,t){if(1&e&&(s.TgZ(0,"div",24),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.Q6J("title",e.subtitle),s.xp6(1),s.hij(" ",e.subtitle," ")}}function Ni(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"a",25),s.NdJ("click",function(t){return s.CHM(e),s.oxw().prepareLink(t)})("mouseenter",function(t){return s.CHM(e),s.oxw().prepareLink(t)})("mousedown",function(e){return e.stopPropagation(),e.preventDefault()}),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("href",e.url,s.LSH)("nuiTooltip",e.linkTooltip)}}function Qi(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",26),s.NdJ("click",function(){return s.CHM(e),s.oxw().onEditWidget()}),s.qZA()}}function Yi(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",27),s.NdJ("click",function(){return s.CHM(e),s.oxw().toggleCollapsed()}),s.qZA()}}function Vi(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"nui-menu-action",30),s.NdJ("actionDone",function(){return s.CHM(e),s.oxw(2).onReloadData()}),s._UZ(1,"nui-icon",31),s.TgZ(2,"span"),s.SDv(3,32),s.qZA(),s.qZA()}}function Wi(e,t){if(1&e&&(s.TgZ(0,"nui-menu",28),s.YNc(1,Vi,4,0,"nui-menu-action",29),s.qZA()),2&e){const e=s.oxw();s.Q6J("appendToBody",!0),s.xp6(1),s.Q6J("ngIf",e.reloadable)}}function ji(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"nui-popup",33),s.TgZ(1,"span",34),s._UZ(2,"button",35),s.qZA(),s.TgZ(3,"div",36),s.TgZ(4,"nui-menu-action",37),s.NdJ("actionDone",function(){return s.CHM(e),s.oxw().removeWidget()}),s.SDv(5,38),s.qZA(),s.qZA(),s.qZA()}2&e&&s.Q6J("appendToBody",!0)}function Hi(e,t){1&e&&s._UZ(0,"div",39)}const Ui=["*"];let Gi=(()=>{class e{constructor(e,t,i,o,n){this.eventBus=e,this.pizzagnaService=t,this.changeDetector=i,this.eventProxy=o,this.linkProvider=n,this.editMode=!0,this.editable=!0,this.removable=!0,this.collapsible=!1,this.reloadable=!0,this.hideMenu=!1,this.collapsed=!1,this.onDestroy$=new H.xQ,this.linkTooltip=$localize`Explore this data`}get hostClass(){return!0}get state(){return this.collapsed&&this.collapsible?"collapsed":"expanded"}ngOnInit(){this.collapsible&&this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:C.xW.Data,propertyPath:["isCollapsed"]},!0),this.eventProxy&&(this.eventProxy.addUpstream(b.Ef),this.eventProxy.addUpstream(b.y4),this.eventProxy.addDownstream(b.N9)),this.eventBus.getStream(b.N9).pipe((0,U.R)(this.onDestroy$)).subscribe(e=>{this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:C.xW.Data,propertyPath:["collapsed"]},!e.payload),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:C.xW.Data,propertyPath:["editMode"]},!!e.payload)})}ngAfterViewInit(){setTimeout(()=>{this.withCustomElement=0!==this.widgetHeaderCustomElement.nativeElement.childNodes.length})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}removeWidget(){this.eventBus.getStream(b.y4).next()}toggleCollapsed(){this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:C.xW.Data,propertyPath:["collapsed"]},!this.collapsed)}onEditWidget(){this.eventBus.getStream(b.Ef).next()}onReloadData(){if(!this.reloadable)throw new Error("The widget is not reloadable, so it can't be reloaded manually.");this.eventBus.getStream(b.RG).next()}prepareLink(e){const t=e.target;if(t&&this.linkProvider){const e=this.linkProvider.getLink(this.url);return e&&t.setAttribute("href",e),!0}return!1}}return e.lateLoadKey="WidgetHeaderComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(C.nY),s.Y36(F.p),s.Y36(s.sBO),s.Y36(de.q,8),s.Y36(C.B5,8))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-widget-header"]],viewQuery:function(e,t){if(1&e&&s.Gf(Ri,5),2&e){let e;s.iGM(e=s.CRH())&&(t.widgetHeaderCustomElement=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&s.ekj("nui-widget-header",t.hostClass)},inputs:{componentId:"componentId",editMode:"editMode",editable:"editable",removable:"removable",collapsible:"collapsible",reloadable:"reloadable",title:"title",subtitle:"subtitle",hideMenu:"hideMenu",url:"url",collapsed:"collapsed"},ngContentSelectors:Ui,decls:19,vars:20,consts:function(){let e,t,i,o;return e=$localize`:8028b4b4a38e861642d3d465f1fd0e08ea5bdcd08529558445404824560:Edit widget`,t=$localize`:aefc550c9735e4112bc884389f77c619007acb8e9121781503543370614:Reload data`,i=$localize`:6d4f27e8085712e506aaaee1704b3e0455d156528500807759101015900:Remove widget`,o=$localize`:0f0e6eea7e5a63ccfd2d07117d5560cb89936c2c495801405190883151:Remove Widget`,[[1,"nui-widget__header"],[1,"nui-widget__header__container"],["class","collapse-container",3,"click",4,"ngIf"],[1,"nui-widget__header__content"],["class","nui-widget__header__content-drag-icon nui-dashboard__widget--drag-handle",4,"ngIf"],[1,"nui-widget__header__content-custom-element"],["widgetHeaderCustomElement",""],[1,"nui-widget__header__content-title-container","nui-dashboard__widget--drag-handle"],["class","nui-text-widget nui-widget__header__content-title",3,"title",4,"ngIf"],[4,"ngIf"],["class","nui-text-hint nui-widget__header__content-help-hint",3,"title",4,"ngIf"],[1,"nui-widget__header__content-actions"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown",4,"ngIf"],["class","nui-widget-header__action-edit","nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",e,3,"click",4,"ngIf"],["class","nui-widget-header__action-toggle-collapsed","nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",3,"click",4,"ngIf"],["class","nui-widget__header__content-actions__menu","icon","menu","displayStyle","action",3,"appendToBody",4,"ngIf"],["class","nui-widget-header__action-remove",3,"appendToBody",4,"ngIf"],["class","collapse-spacer",4,"ngIf"],[1,"collapse-container",3,"click"],[1,"collapse-container__line"],[1,"nui-widget__header__content-drag-icon","nui-dashboard__widget--drag-handle"],["icon","drag","iconColor","gray"],[1,"nui-text-widget","nui-widget__header__content-title",3,"title"],[1,"nui-text-widget","nui-widget__header__content-title",3,"href","nuiTooltip","click","mouseenter","mousedown"],[1,"nui-text-hint","nui-widget__header__content-help-hint",3,"title"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown"],["nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",e,1,"nui-widget-header__action-edit",3,"click"],["nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",1,"nui-widget-header__action-toggle-collapsed",3,"click"],["icon","menu","displayStyle","action",1,"nui-widget__header__content-actions__menu",3,"appendToBody"],[3,"actionDone",4,"ngIf"],[3,"actionDone"],["icon","reload"],t,[1,"nui-widget-header__action-remove",3,"appendToBody"],["nuiTooltip",i],["nui-button","","nuiPopupToggle","","type","button","icon","remove","iconColor","red","displayStyle","action"],["popupAreaContent","",1,"nui-menu"],["type","destructive",3,"actionDone"],o,[1,"collapse-spacer"]]},template:function(e,t){1&e&&(s.F$t(),s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.YNc(2,Ji,2,0,"div",2),s.TgZ(3,"div",3),s.YNc(4,Li,2,0,"div",4),s.TgZ(5,"div",5,6),s.Hsn(7),s.qZA(),s.TgZ(8,"div",7),s.YNc(9,Ei,2,2,"div",8),s.YNc(10,qi,3,3,"div",9),s.YNc(11,Bi,2,2,"div",10),s.qZA(),s.TgZ(12,"div",11),s.YNc(13,Ni,1,2,"a",12),s.YNc(14,Qi,1,0,"button",13),s.YNc(15,Yi,1,0,"button",14),s.YNc(16,Wi,2,2,"nui-menu",15),s.YNc(17,ji,6,1,"nui-popup",16),s.qZA(),s.qZA(),s.qZA(),s.YNc(18,Hi,1,0,"div",17),s.qZA()),2&e&&(s.xp6(1),s.ekj("nui-widget__header__container--collapsible",t.collapsible)("nui-widget__header__container--collapsed",t.collapsible&&t.collapsed)("nui-widget__header__container--expanded",t.collapsible&&!t.collapsed),s.Q6J("@expandedState",t.state),s.xp6(1),s.Q6J("ngIf",t.collapsed&&t.collapsible),s.xp6(2),s.Q6J("ngIf",t.editMode),s.xp6(4),s.ekj("nui-widget__header__content-title-with-additional-content",t.withCustomElement||t.editMode),s.xp6(1),s.Q6J("ngIf",!t.url||t.editMode),s.xp6(1),s.Q6J("ngIf",t.url&&!t.editMode),s.xp6(1),s.Q6J("ngIf",t.subtitle),s.xp6(2),s.Q6J("ngIf",t.url&&!t.editMode),s.xp6(1),s.Q6J("ngIf",t.editable&&t.editMode),s.xp6(1),s.Q6J("ngIf",t.collapsible&&!t.editMode),s.xp6(1),s.Q6J("ngIf",!t.hideMenu&&!t.editMode),s.xp6(1),s.Q6J("ngIf",t.removable&&t.editMode),s.xp6(1),s.Q6J("ngIf",t.collapsible))},directives:[o.O5,n.oJW,n.i9q,n.r0F,n.Mnp,n.VDk,n.RXH,n.btB],styles:[".nui-widget__header[_ngcontent-%COMP%]{display:flex;position:relative}.nui-widget__header[_ngcontent-%COMP%]   .collapse-spacer[_ngcontent-%COMP%]{margin-bottom:15px}.nui-widget__header__container[_ngcontent-%COMP%]{z-index:500;width:100%}.nui-widget__header__container--collapsible[_ngcontent-%COMP%]{width:100%}.nui-widget__header__container--collapsed[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container__line[_ngcontent-%COMP%]{width:16px;height:1px;background:#0079aa;background:var(--nui-color-line-active,#0079aa);margin:5px 0;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{align-items:flex-start;display:flex;opacity:1}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-drag-icon[_ngcontent-%COMP%]{align-items:center;cursor:move;display:flex;height:30px;justify-content:center;margin:5px;width:30px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title[_ngcontent-%COMP%]{display:block;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-container[_ngcontent-%COMP%]{flex:1;min-width:0;padding:10px 0 5px 10px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-with-additional-content[_ngcontent-%COMP%]{padding-left:0}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-help-hint[_ngcontent-%COMP%]{max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-actions[_ngcontent-%COMP%]{display:flex;padding:5px 10px 0 5px}"],data:{animation:[(0,ae.X$)("expandedState",[(0,ae.SB)("expanded",(0,ae.oB)({height:"*"})),(0,ae.SB)("collapsed",(0,ae.oB)({height:"11px"})),(0,ae.eR)("expanded <=> collapsed",[(0,ae.jt)("350ms ease-in-out")])])]}}),e})();var Ki=i(25624);let Xi=(()=>{class e{constructor(e,t){this.widgetConfigurationService=e,this.widgetTypesService=t,this.widgetChange=new s.vpe,this.rootNode=b.XM}ngOnChanges(e){var t,i;if(e.widget){const o=this.widget.type;if((e.widget.previousValue&&e.widget.previousValue.type)!==o){const e=this.widgetTypesService.getWidgetType(o,this.widget.version);this.rootNode=(null===(i=null===(t=null==e?void 0:e.paths)||void 0===t?void 0:t.widget)||void 0===i?void 0:i.root)||b.XM}this.widgetConfigurationService.updateWidget(this.widget)}}onPizzagnaChange(e){this.widgetChange.emit(Object.assign(Object.assign({},this.widget),{pizzagna:e}))}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(ct.I),s.Y36(ue.x))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-widget"]],hostAttrs:[1,"nui-widget"],inputs:{widget:"widget"},outputs:{widgetChange:"widgetChange"},features:[s._Bn([ct.I]),s.TTD],decls:1,vars:2,consts:[[3,"rootNode","pizzagna","pizzagnaChange"]],template:function(e,t){1&e&&(s.TgZ(0,"nui-pizzagna",0),s.NdJ("pizzagnaChange",function(e){return t.onPizzagnaChange(e)}),s.qZA()),2&e&&s.Q6J("rootNode",t.rootNode)("pizzagna",t.widget.pizzagna)},directives:[Ki.R],styles:[""]}),e})();var eo=i(83461);let to=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[S.eL,l],S.eL]}),e})();const io=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred ","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgrey","#d3d3d3"],["lightgreen","#90ee90"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370d8"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#d87093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]);let oo=(()=>{class e{RGBToHexRGBToHex(e){const t=e.indexOf(",")>-1?",":" ",i=e.substr(4).split(")")[0].split(t);let o=(+i[0]).toString(16),n=(+i[1]).toString(16),r=(+i[2]).toString(16);return 1===o.length&&(o="0"+o),1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),"#"+o+n+r}isHEX(e){return/^#[0-9A-F]{6}$/i.test(e)||/^#([0-9A-F]{3}){1,2}$/i.test(e)}colorKeywordsToHex(e){const t=io.get(e);return w()(t)?"":t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var no=i(58203);function ro(e,t){if(1&e&&s._UZ(0,"div",10),2&e){const e=s.oxw().$implicit,t=s.oxw();s.ekj("black-tick",t.isBlackTick||(null==e?null:e.color)===t.defaultColor)}}function so(e,t){if(1&e&&(s.TgZ(0,"div",4),s.TgZ(1,"nui-select-v2-option",5,6),s.TgZ(3,"div",7),s.TgZ(4,"div",8),s.YNc(5,ro,1,2,"div",9),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=t.$implicit,i=s.MAs(2),o=s.oxw();s.xp6(1),s.Q6J("value",null==e?null:e.color)("displayValueContext",e),s.xp6(2),s.ekj("color-picker-option--selected",null==i?null:i.selected),s.uIk("title",null==e?null:e.label),s.xp6(1),s.Q6J("ngStyle",o.setStyles(null==e?null:e.color)),s.xp6(1),s.Q6J("ngIf",null==i?null:i.selected)}}function ao(e,t){if(1&e&&(s.TgZ(0,"div",11),s.TgZ(1,"div",12),s._UZ(2,"div",13),s.qZA(),s.TgZ(3,"div",14),s._UZ(4,"nui-icon",15),s.qZA(),s.qZA()),2&e){const e=t.$implicit,i=t.open,o=s.oxw();s.xp6(1),s.uIk("title",null==e?null:e.label),s.xp6(1),s.Q6J("ngStyle",o.setStyles(null==e?null:e.color)),s.xp6(2),s.Udp("transform",i?"rotate(180deg)":"")}}let lo=(()=>{class e{constructor(e,t,i){this.changeDetection=e,this.colorService=t,this.cdkOverlay=i,this.defaultColor="var(--nui-color-bg-secondary)",this.overlayUtilities=new n.KcF,this.destroy$=new H.xQ,this.setStyles=e=>({"background-color":e||this.defaultColor})}ngOnChanges(e){e.colors&&(this.colors=e.colors.currentValue),e.colorPalette&&(this.colorPalette=e.colorPalette.currentValue)}ngAfterViewInit(){var e;this.value&&(null===(e=this.select)||void 0===e||e.writeValue(this.value),this.isBlackTick=this.determineBlackTick(this.value.toString())),this.palette=this.colorPalette||this.colors.map(e=>({color:e})),this.initOverlayUtilities(),this.select.valueSelected.pipe((0,it.b)(e=>this.writeValue(e)),(0,it.b)(e=>this.onChange(e)),(0,U.R)(this.destroy$)).subscribe(e=>{e&&(this.isBlackTick=this.determineBlackTick(e.toString()))});const t=(0,n.gpG)(),i=this.cdkOverlay.position().flexibleConnectedTo(this.select.elRef.nativeElement).withPush(!1).withViewportMargin(0).withPositions([t["bottom-right"],t["bottom-left"],t["top-right"],t["top-left"]]);this.overlayConfig={maxWidth:this.cols?30*this.cols+20+"px":"260px",positionStrategy:i}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onChange(e){}_onTouched(){}writeValue(e){var t;this.value=e,null===(t=this.select)||void 0===t||t.writeValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this._onTouched=e}determineBlackTick(e){let t="#fff";return t=this.colorService.isHEX(e)?e:(0,u.ruO)(e)||this.colorService.RGBToHexRGBToHex(e)||this.colorService.colorKeywordsToHex(e),"#fff"===this.getContrastOnBgColor(t)}initOverlayUtilities(){const e=this.select.dropdown;this.selectResizeObserver=this.overlayUtilities.setPopupComponent(this.select.dropdown).getResizeObserver({updateSize:!1}),e.show$.pipe((0,U.R)(this.destroy$)).subscribe(()=>{this.overlayUtilities.syncWidth(),this.selectResizeObserver.observe(this.select.elRef.nativeElement)}),e.hide$.pipe((0,U.R)(this.destroy$)).subscribe(()=>{this.selectResizeObserver.unobserve(this.select.elRef.nativeElement)})}getContrastOnBgColor(e){return e?parseInt(e.replace("#",""),16)>8388607.5?"#fff":"#000":""}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(oo),s.Y36(no.aV))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-color-picker"]],viewQuery:function(e,t){if(1&e&&s.Gf(n.j_n,5),2&e){let e;s.iGM(e=s.CRH())&&(t.select=e.first)}},inputs:{colors:"colors",colorPalette:"colorPalette",cols:"cols"},features:[s._Bn([{provide:n.MDN,useExisting:(0,s.Gpc)(()=>e),multi:!0},{provide:d.JU,useExisting:(0,s.Gpc)(()=>e),multi:!0},oo]),s.TTD],decls:5,vars:4,consts:[[1,"color-picker-select",3,"overlayConfig","syncWidth","displayValueTemplate"],[1,"color-picker-container"],["class","d-inline-flex flex-wrap box",4,"ngFor","ngForOf"],["colorSelectTemplate",""],[1,"d-inline-flex","flex-wrap","box"],[1,"w-100","h-100","reset-box-sizes",3,"value","displayValueContext"],["option",""],[1,"color-picker-option"],[1,"color-picker-option__color-box",3,"ngStyle"],["class","color-picker-option__glyph",3,"black-tick",4,"ngIf"],[1,"color-picker-option__glyph"],[1,"color-picker-input"],[1,"color-picker-input__box"],[1,"color-picker-input__color-box",3,"ngStyle"],[1,"color-picker-input__toggle"],["icon","caret-down"]],template:function(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2",0),s.TgZ(1,"div",1),s.YNc(2,so,6,7,"div",2),s.qZA(),s.qZA(),s.YNc(3,ao,5,4,"ng-template",null,3,s.W1O)),2&e){const e=s.MAs(4);s.Q6J("overlayConfig",t.overlayConfig)("syncWidth",!1)("displayValueTemplate",e),s.xp6(2),s.Q6J("ngForOf",t.palette)}},directives:[n.j_n,o.sg,n.rLF,o.PC,o.O5,n.oJW],styles:[".box[_ngcontent-%COMP%]{width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]{padding:5px 10px}.color-picker-select[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;min-width:unset;cursor:pointer}.color-picker-input[_ngcontent-%COMP%]{display:flex}.color-picker-input__box[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.color-picker-input__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:#d9d9d9;border-color:var(--nui-color-line-default,#d9d9d9);width:17px;height:17px;flex-grow:1;margin:0 10px}.color-picker-input__toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-left:1px solid;border-left-color:#d9d9d9;border-left-color:var(--nui-color-line-default,#d9d9d9);width:30px;height:30px}.color-picker-option[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.color-picker-option__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:#d9d9d9;border-color:var(--nui-color-line-default,#d9d9d9);padding:1px 0 0 1px}.color-picker-option--selected[_ngcontent-%COMP%]{background-color:rgba(0,196,210,.1);background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.color-picker-option--selected[_ngcontent-%COMP%]:focus{outline:none}.color-picker-option__glyph[_ngcontent-%COMP%]{width:100%;height:100%;background-size:12px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMjAgMjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAgMjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS54dWktY2hlY2tib3gtZ2x5cGh7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDozO3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1saW5lY2FwOnJvdW5kO30KPC9zdHlsZT4KPHBvbHlsaW5lIGNsYXNzPSJ4dWktY2hlY2tib3gtZ2x5cGgiIHBvaW50cz0iMTcsNCA4LDE1IDMsOSAiLz4KPC9zdmc+);background-repeat:no-repeat}.color-picker-option__glyph.black-tick[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}"],changeDetection:0}),e})();var co=i(61817),uo=i(64874),po=i(89563),ho=i(8214);i(17654),i(48876);let go=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.formBuilder=t,this.logger=i,this.formReady=new s.vpe}ngOnChanges(e){var t,i;this.form||this.initForm(),this.contentFormatterProperties?Object.keys(this.contentFormatterProperties).forEach(e=>{var t,i;null===(i=null===(t=this.form)||void 0===t?void 0:t.get(e))||void 0===i||i.setValue(this.contentFormatterProperties[e])}):null===(i=null===(t=this.form)||void 0===t?void 0:t.get("currentMetric"))||void 0===i||i.patchValue(this.properMetric)}ngOnInit(){this.initForm()}initForm(){this.form=this.formBuilder.group({currentMetric:[this.properMetric,d.kI.required]}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}get currentMetric(){return this.form.get("currentMetric")}get properMetric(){var e,t,i,o;const n=null===(e=this.contentFormatterProperties)||void 0===e?void 0:e.currentMetric;return(null===(t=this.dsOutput)||void 0===t?void 0:t.result.find(e=>e.id===n))?n:null===(o=null===(i=this.dsOutput)||void 0===i?void 0:i.result[0])||void 0===o?void 0:o.id}addCustomFormControls(e){}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.sBO),s.LFG(d.qu),s.LFG(n.mQy))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();function mo(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",7),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",null==e?null:e.id),s.xp6(1),s.hij(" ",null==e?null:e.name," ")}}let fo=(()=>{class e extends go{constructor(e,t,i,o){super(e,t,i),this.pizzagnaService=o}}return e.lateLoadKey="DonutContentPercentageConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(d.qu),s.Y36(n.mQy),s.Y36(F.p))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-donut-content-configurator"]],features:[s.qOj],decls:7,vars:3,consts:function(){let e,t;return e=$localize`:447ffd4cbfd3d8c3ca8dd216c0a82ecadc24a7de4196232656388343089:Metrics`,t=$localize`:b17406f843dc33feb81478ae8273dc1aae06bbf62244196281006156184: This field is required `,[[3,"formGroup"],[1,"mt-4"],["caption",e,1,"mb-3",3,"control"],["formControlName","currentMetric"],[3,"value",4,"ngFor","ngForOf"],["for","required"],t,[3,"value"]]},template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"nui-form-field",2),s.TgZ(3,"nui-select-v2",3),s.YNc(4,mo,2,2,"nui-select-v2-option",4),s.qZA(),s.TgZ(5,"nui-validation-message",5),s.SDv(6,6),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.Q6J("formGroup",t.form),s.xp6(2),s.Q6J("control",t.currentMetric),s.xp6(2),s.Q6J("ngForOf",null==t.dsOutput?null:t.dsOutput.result))},directives:[d.JL,d.sg,n.hgI,n.j_n,d.JJ,d.u,o.sg,n.CfE,n.rLF],encapsulation:2}),e})();var vo=i(82455),yo=i.n(vo);let bo=(()=>{class e{constructor(e){this.changeDetector=e,this.destroy$=new H.xQ}ngOnChanges(e){var t;e.data&&(this.sum=yo()(this.data,e=>e.data[0])),e.properties&&(this.currentMetricData=(null===(t=this.data.find(e=>{var t;return e.id===(null===(t=this.properties)||void 0===t?void 0:t.currentMetric)}))||void 0===t?void 0:t.data[0])||this.data[0].data[0]),this.getProperContentValue()}ngOnInit(){this.chartAssist.chartAssistSubject.pipe((0,it.b)(e=>this.emphasizedSeriesData=this.data.find(t=>t.id===e.payload.seriesId)),(0,it.b)(()=>this.getProperContentValue()),(0,U.R)(this.destroy$)).subscribe()}getProperSeriesData(){var e;return this.emphasizedSeriesData?null===(e=this.emphasizedSeriesData)||void 0===e?void 0:e.data[0]:this.currentMetricData}getProperContentValue(){this.chartContent=(this.getProperSeriesData()/this.sum*100).toFixed(2)+"%"}}return e.lateLoadKey="DonutContentPercentageFormatterComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["ng-component"]],inputs:{data:"data",chartAssist:"chartAssist",properties:"properties"},features:[s.TTD],decls:4,vars:1,consts:[[1,"nui-text-page"]],template:function(e,t){1&e&&(s.ynx(0),s.TgZ(1,"div",0),s.TgZ(2,"div",0),s._uU(3),s.qZA(),s.qZA(),s.BQk()),2&e&&(s.xp6(3),s.hij(" ",t.chartContent," "))},encapsulation:2}),e})();function Co(e,t){if(1&e&&s._UZ(0,"nui-icon",5),2&e){const e=s.oxw();s.Q6J("icon",null==e.config?null:e.config.chartDonutContentIcon)}}function xo(e,t){if(1&e&&(s.TgZ(0,"span"),s._uU(1),s.ALo(2,"number"),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(s.xi3(2,1,e.sum,"1.0-3"))}}function wo(e,t){if(1&e&&s._uU(0),2&e){const e=s.oxw();s.Oqu(e.convertedValue)}}function To(e,t){if(1&e&&(s.TgZ(0,"div",6),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.hij(" ",null==e.config?null:e.config.chartDonutContentLabel," ")}}let So=(()=>{class e{constructor(e,t){this.changeDetector=e,this.conversionThreshold=Te,this.unitConversionPipe=new Se(t)}ngOnChanges(){this.sum=yo()(this.data,e=>e.data[0]),this.convertedValue=this.unitConversionPipe.transform(this.sum)}}return e.lateLoadKey="DonutContentRawFormatterComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(n.CrH))},e.\u0275cmp=s.Xpm({type:e,selectors:[["ng-component"]],inputs:{data:"data",config:"config"},features:[s.TTD],decls:7,vars:4,consts:[["iconSize","medium",3,"icon",4,"ngIf"],[1,"nui-text-page"],[4,"ngIf","ngIfElse"],["convertedValueDisplay",""],["class","nui-text-secondary",4,"ngIf"],["iconSize","medium",3,"icon"],[1,"nui-text-secondary"]],template:function(e,t){if(1&e&&(s.ynx(0),s.YNc(1,Co,1,1,"nui-icon",0),s.TgZ(2,"div",1),s.YNc(3,xo,3,4,"span",2),s.YNc(4,wo,1,1,"ng-template",null,3,s.W1O),s.qZA(),s.YNc(6,To,2,1,"div",4),s.BQk()),2&e){const e=s.MAs(5);s.xp6(1),s.Q6J("ngIf",null==t.config?null:t.config.chartDonutContentIcon),s.xp6(2),s.Q6J("ngIf",t.sum<t.conversionThreshold)("ngIfElse",e),s.xp6(3),s.Q6J("ngIf",null==t.config?null:t.config.chartDonutContentLabel)}},directives:[o.O5,n.oJW],pipes:[o.JJ],encapsulation:2}),e})(),Io=(()=>{class e{constructor(e){this.changeDetector=e}ngOnChanges(){this.sum=yo()(this.data,e=>e.data[0])}}return e.lateLoadKey="DonutContentSumFormatterComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["ng-component"]],inputs:{data:"data"},features:[s.TTD],decls:3,vars:1,consts:[[1,"nui-text-page"]],template:function(e,t){1&e&&(s.ynx(0),s.TgZ(1,"div",0),s._uU(2),s.qZA(),s.BQk()),2&e&&(s.xp6(2),s.Oqu(t.sum))},encapsulation:2}),e})();var _o=i(96899),Ao=i(62878),zo=i(24803);let ko=(()=>{class e extends zo.a{}return e.lateLoadKey="PercentageFormatterComponent",e.\u0275fac=function(){let t;return function(i){return(t||(t=s.n5z(e)))(i||e)}}(),e.\u0275cmp=s.Xpm({type:e,selectors:[["ng-component"]],features:[s.qOj],decls:2,vars:1,template:function(e,t){1&e&&(s.ynx(0),s._uU(1),s.BQk()),2&e&&(s.xp6(1),s.hij(" ",null==t.data?null:t.data.value,"% "))},encapsulation:2}),e})();var Zo=i(45038),Oo=i.n(Zo),Po=i(41233),$o=i.n(Po);const Fo=[{power:1,prefix:"",label:""},{power:3,prefix:"k",label:"kilo"},{power:6,prefix:"M",label:"mega"},{power:9,prefix:"G",label:"giga"},{power:12,prefix:"T",label:"tera"},{power:15,prefix:"P",label:"peta"},{power:18,prefix:"E",label:"exa"},{power:21,prefix:"Z",label:"zetta"},{power:24,prefix:"Y",label:"yotta"}],Do=[{power:-24,prefix:"y",label:"yocto"},{power:-21,prefix:"z",label:"zepto"},{power:-18,prefix:"a",label:"atto"},{power:-15,prefix:"f",label:"femto"},{power:-12,prefix:"p",label:"pico"},{power:-9,prefix:"n",label:"nano"},{power:-6,prefix:"\xb5",label:"micro"},{power:-3,prefix:"m",label:"milli"},{power:1,prefix:"",label:""}];let Mo=(()=>{class e{constructor(e){this.changeDetector=e,this.value="0"}ngOnChanges(e){if(e.data){const{value:t}=e.data.currentValue;t&&this.processSiUnitsValue($o()(t))}}processSiUnitsValue(e){const t=this.getTransformPrefix(Oo()(e));this.value=this.getTransformedValue(e,t),this.modifier=null==t?void 0:t.prefix}getTransformedValue(e,t){if(!t)return e;const i=1!==t.power?+e*Math.pow(10,-t.power):+e;return(Math.round(10*i)/10).toString()}getTransformPrefix(t){var i;const o=Math.abs(t);if(Number.isNaN(o))return;const n=(null===(i=this.data)||void 0===i?void 0:i.shiftPoint)||e.SHIFT_POINT_DEFAULT;if(o>=1){const e=Math.round(o).toString().length;return[...Fo].reverse().find(t=>e>=t.power+1+n)}{const e=Ro(o);return[...Do].reverse().find(t=>e<=Math.abs(t.power)+1+n)}}}return e.lateLoadKey="SiUnitsFormatterComponent",e.SHIFT_POINT_DEFAULT=0,e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["ng-component"]],hostVars:2,hostBindings:function(e,t){2&e&&s.Tol(t.elementClass)},inputs:{data:"data",elementClass:"elementClass"},features:[s.TTD],decls:6,vars:2,consts:[[1,"d-flex","flex-nowrap"]],template:function(e,t){1&e&&(s.ynx(0),s.TgZ(1,"div",0),s.TgZ(2,"span"),s._uU(3),s.qZA(),s.TgZ(4,"span"),s._uU(5),s.qZA(),s.qZA(),s.BQk()),2&e&&(s.xp6(3),s.Oqu(t.value),s.xp6(2),s.hij(" ",t.modifier,""))},encapsulation:2}),e})();function Ro(e,t=1){const i=Math.abs(e);if(i>=1)return 1;const o=t+1;return i*Math.pow(10,o)>1?o:Ro(i,o)}function Jo(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"a",6),s.NdJ("click",function(e){return e.stopPropagation()}),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(1),s.Q6J("href",null==e.data?null:e.data.link,s.LSH)("title",e.data.name),s.xp6(1),s.hij(" ",e.data.name," ")}}function Lo(e,t){if(1&e&&(s.TgZ(0,"span",7),s._uU(1),s.qZA()),2&e){const e=s.oxw(2);s.Udp("font-size",11,"px"),s.xp6(1),s.Oqu(e.data.name)}}function Eo(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"div",1),s.TgZ(2,"span",2),s._uU(3),s.qZA(),s._UZ(4,"nui-icon",3),s.YNc(5,Jo,3,3,"div",4),s.YNc(6,Lo,2,3,"ng-template",null,5,s.W1O),s.qZA(),s.BQk()),2&e){const e=s.MAs(7),t=s.oxw();s.xp6(3),s.Oqu(t.data.data),s.xp6(1),s.Q6J("icon",t.data.icon),s.xp6(1),s.Q6J("ngIf",null==t.data?null:t.data.link)("ngIfElse",e)}}let qo=(()=>{class e{constructor(e){this.changeDetector=e,this.isValid=!1}ngOnChanges(){this.isValid=!!(this.data&&this.data.icon&&this.data.name&&this.data.data)}}return e.lateLoadKey="StatusWithIconFormatterComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["ng-component"]],inputs:{data:"data"},features:[s.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nui-text-label","align-items-center","status-icon-formatter"],[1,"nui-text-ellipsis","text-right","pl-3"],[1,"nui-icon","nui-icon-line-height","mx-2",3,"icon"],[4,"ngIf","ngIfElse"],["noLink",""],["rel","noopener noreferrer",1,"nui-text-link-small","nui-text-ellipsis","link",3,"href","title","click"],[1,"nui-text-ellipsis"]],template:function(e,t){1&e&&s.YNc(0,Eo,8,4,"ng-container",0),2&e&&s.Q6J("ngIf",t.isValid)},directives:[o.O5,n.oJW],styles:[".status-icon-formatter[_ngcontent-%COMP%]{display:grid;grid-template-columns:50px auto minmax(114px,1fr)}"]}),e})();var Bo=i(66213),No=i(39761),Qo=i(81690),Yo=i.n(Qo);let Vo=(()=>{class e{transform(e,t,i){if(!w()(e)){if(Yo()(e)){if(!t)return e;const i=[...e];return i.push(t),i}return Object.assign({},e,{[void 0===i?"undefined":i]:t})}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Yjl({name:"nuiAddData",type:e,pure:!0}),e})();var Wo=i(48248);function jo(e,t){if(1&e&&s._UZ(0,"nui-drop-area",9),2&e){const e=s.oxw(2);s.Udp("height",e.height,"px")}}function Ho(e,t){1&e&&(s.ynx(0),s.TgZ(1,"div",12),s._UZ(2,"nui-icon",13),s.qZA(),s.BQk())}function Uo(e,t){if(1&e&&(s.YNc(0,Ho,3,0,"ng-container",10),s.TgZ(1,"span",11),s.ALo(2,"nuiWidgetConfiguratorSectionHeader"),s._uU(3),s.ALo(4,"nuiWidgetConfiguratorSectionHeader"),s.qZA()),2&e){const e=s.oxw(),t=e.$implicit,i=e.index,o=s.oxw();s.Q6J("ngIf",o.moveButtons),s.xp6(1),s.Q6J("title",s.Dn7(2,3,o.headerMap.get(t.id),i,o.headerPrefix)),s.xp6(2),s.hij(" ",s.Dn7(4,7,o.headerMap.get(t.id),i,o.headerPrefix)," ")}}function Go(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",14),s.TgZ(1,"button",15),s.NdJ("click",function(){s.CHM(e);const t=s.oxw(),i=t.$implicit,o=t.index,n=s.oxw();return n.removeItem(n.getItemForNode(i),o)}),s.qZA(),s.qZA()}if(2&e){const e=s.oxw().index;s.xp6(1),s.MGl("id","kpi-widget-remove-btn-",e,"")}}function Ko(e,t){}const Xo=function(){return["formReady","formDestroy"]};function en(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",2),s.NdJ("cdkDragStarted",function(t){return s.CHM(e),s.oxw().cdkDragStarted(t)}),s.YNc(1,jo,1,2,"nui-drop-area",3),s.YNc(2,Uo,5,11,"ng-template",null,4,s.W1O),s.YNc(4,Go,2,1,"ng-template",null,5,s.W1O),s.ynx(6,6,7),s.NdJ("output",function(t){const i=s.CHM(e).$implicit;return s.oxw().onEvent(i.id,t)}),s.ALo(8,"nuiAddData"),s.ALo(9,"nuiAddData"),s.YNc(10,Ko,0,0,"ng-template",8),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(7).attached(t)}),s.BQk(),s.qZA()}if(2&e){const e=t.$implicit,i=s.MAs(3),o=s.MAs(5),n=s.MAs(7);s.xp6(6),s.Q6J("componentId",e.id)("componentType",e.componentType)("providers",e.providers)("properties",s.Dn7(8,6,s.Dn7(9,10,e.properties,i,"headerTextTemplate"),o,"headerButtonsTemplate"))("outputs",s.DdM(14,Xo)),s.xp6(4),s.Q6J("cdkPortalOutlet",n.portal)}}let tn=(()=>{class e extends D.I{constructor(e,t,i,o){super(e,t,i),this.formBuilder=o,this.items=[],this.moveButtons=!0,this.formReady=new s.vpe,this.itemsChange=new s.vpe,this.headerMap=new Map}getItemForNode(e){return this.items.find(t=>t.id===e.id)}getNodes(){return this.nodes}ngOnInit(){this.form=this.formBuilder.array([],d.kI.required),this.formReady.emit(this.form)}onEvent(e,t){const i=this.items.find(t=>t.id===e),o=this.items.findIndex(t=>t.id===e);"formReady"===t.id&&i&&this.onFormReady(i,t.payload,o),"formDestroy"===t.id&&this.onFormDestroy(t.payload)}onFormReady(e,t,i){const o=this.formBuilder.group({id:[e.id],componentType:[e.componentType],properties:t});this.form.setControl(i,o),setTimeout(()=>{var i;const o=null===(i=t.get(`${e.id}/description`))||void 0===i?void 0:i.get("label");null==o||o.valueChanges.pipe((0,No.O)(o.value),(0,U.R)(this.destroyed$)).subscribe(t=>{this.headerMap.set(e.id,t||""),this.changeDetector.markForCheck()})})}onFormDestroy(e){setTimeout(()=>{let t=0;for(;t<this.form.length&&this.form.at(t).get("properties")!==e;t++);this.form.removeAt(t),this.form.patchValue(this.form.value,{emitEvent:!0})})}trackBy(e,t){return t.id}removeItem(e,t){if(!e)throw new Error("Unable to remove undefined item from pizzagna");this.itemsChange.emit(this.items.filter(t=>t!==e)),this.items.splice(t,1),this.nodes.splice(t,1),this.pizzagnaService.removeComponents(e.id)}moveItem(e,t){const i=[...this.items],o=i.splice(e,1);i.splice(t,0,...o);const n=[...this.nodes],r=n.splice(e,1);n.splice(t,0,...r),this.nodes=[...n],this.moveFormValues(e,t),this.itemsChange.emit(i),setTimeout(()=>{this.form.setValue(this.form.value,{emitEvent:!0})})}drop(e){this.moveItem(e.previousIndex,e.currentIndex)}cdkDragStarted(e){this.height=e.source.element.nativeElement.offsetHeight}moveFormValues(e,t){const i=this.form.at(e);this.form.removeAt(e),this.form.insert(t,i)}ngOnDestroy(){super.ngOnDestroy()}}return e.lateLoadKey="ItemsDynamicComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(F.p),s.Y36(n.mQy),s.Y36(d.qu))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-items-dynamic"]],inputs:{items:"items",moveButtons:"moveButtons",nodes:"nodes",headerPrefix:"headerPrefix"},outputs:{formReady:"formReady",itemsChange:"itemsChange"},features:[s.qOj],decls:2,vars:3,consts:[["cdkDropList","",1,"nui-items-dynamic",3,"formGroup","cdkDropListDropped"],["cdkDrag","","class","nui-items-dynamic__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"nui-items-dynamic__node-item",3,"cdkDragStarted"],["class","nui-items-dynamic__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-items-dynamic__drop-area"],[4,"ngIf"],[1,"nui-items-dynamic__header-text",3,"title"],["cdkDragHandle","",1,"nui-items-dynamic__drag-handler"],["icon","drag"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.NdJ("cdkDropListDropped",function(e){return t.drop(e)}),s.YNc(1,en,11,15,"div",1),s.qZA()),2&e&&(s.Q6J("formGroup",t.form),s.xp6(1),s.Q6J("ngForOf",t.nodeConfigs)("ngForTrackBy",t.trackBy))},directives:[eo.Wj,d.JL,d.sg,o.sg,eo.Zt,eo.Hk,T.$,S.Pl,uo.O,o.O5,eo.Bh,n.oJW,n.r0F],pipes:[Vo,Wo.l],styles:[".nui-items-dynamic__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-items-dynamic__drag-handler{cursor:move;display:flex}.nui-items-dynamic__node-item{background-color:#fff;background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-items-dynamic__node-item .widget-configurator-section{margin:0}.nui-items-dynamic__drop-area{margin:15px}.kpi-indicators-configuration__color-preview{width:16px;height:16px;margin-right:15px;border-radius:3px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px rgba(17,17,17,.3);box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),e})(),on=(()=>{class e{}return e.lateLoadKey="PreviewPlaceholderComponent",e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-preview-placeholder"]],decls:6,vars:0,consts:function(){let e,t;return e=$localize`:2dddb51ea396d77c6eae240cec72bcac05cbd28b7484658843094717966:This is a preview of your widget`,t=$localize`:1abddb62ce92f6f986deb4b00de6798b3ae96dd32497832056925742895: As you make configuration changes, this area will update to match. To get started, select a widget type on the configuration panel.
`,[e,t]},template:function(e,t){1&e&&(s.TgZ(0,"div"),s.TgZ(1,"b"),s.SDv(2,0),s.qZA(),s._uU(3,"."),s.qZA(),s.TgZ(4,"div"),s.SDv(5,1),s.qZA())},styles:["[_nghost-%COMP%]{max-width:300px;padding:0 10px;margin:auto}"]}),e})();var nn=i(37524),rn=i.n(nn),sn=i(28726),an=i(77341),ln=i(23309);function cn(e,t){}const dn=function(){return["widgetSelected"]};function un(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",6),s.ynx(1,7,8),s.NdJ("output",function(t){return s.CHM(e),s.oxw().onSelect(t.payload)}),s.YNc(3,cn,0,0,"ng-template",9),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(2).attached(t)}),s.BQk(),s.qZA()}if(2&e){const e=s.MAs(2),t=s.oxw();s.xp6(1),s.Q6J("componentType",t.cloneSelectionComponentType)("outputs",s.DdM(3,dn)),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}function pn(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",10),s.TgZ(1,"nui-pizzagna",11,12),s.NdJ("pizzagnaChange",function(t){return s.CHM(e),s.oxw().formPizzagna=t}),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("formGroup",e.form),s.xp6(1),s.Q6J("pizzagna",e.formPizzagna)}}let hn=(()=>{class e{constructor(e,t,i,o,n){this.changeDetector=e,this.configurator=t,this.previewService=i,this.formBuilder=o,this.widgetTypesService=n,this.navigationControl=new Xe.X({busyState:{busy:!1},allowStepChange:!0}),this.destroy$=new H.xQ,this.resetForm$=new H.xQ,this.busy=!1,this.isFormDisplayed=!1,this.resetForm()}ngOnInit(){this.previewService.previewChanged.pipe((0,U.R)(this.destroy$)).subscribe(e=>{this.onPreviewPizzagnaUpdate(e)}),this.configurator.submitError.pipe((0,U.R)(this.destroy$)).subscribe(()=>{this.toggleBusy()})}ngAfterViewInit(){this.changeDetector.markForCheck()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.resetForm$.complete()}onPreviewPizzagnaUpdate(e){var t;if(!this.isFormDisplayed)return;const i=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(t=this.configurator.previewWidget)||void 0===t?void 0:t.pizzagna),{[C.xW.Configuration]:e})});this.configurator.updateWidget(i)}canFinish(){var e,t,i,o;return!!(null===(t=null===(e=this.widgetTemplate)||void 0===e?void 0:e.pizzagna)||void 0===t?void 0:t.configuration)&&!(null===(o=null===(i=this.widgetTemplate)||void 0===i?void 0:i.metadata)||void 0===o?void 0:o.needsConfiguration)}onFinish(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1});this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}onStepNavigated(e){this.isFormDisplayed=1===e.currentStepIndex,0===e.currentStepIndex&&1===e.previousStepIndex?(this.formPizzagna=void 0,this.resetForm(),this.onSelect(this.widgetTemplate)):1===e.currentStepIndex&&(this.formPizzagna=this.widgetTypesService.getWidgetType(this.widgetTemplate.type,this.widgetTemplate.version).configurator,this.previewService.preview=this.widgetTemplate.pizzagna[C.xW.Configuration])}onSelect(e){var t;this.widgetTemplate=e;const i=Object.assign(Object.assign({},e),{id:(null===(t=this.configurator.previewWidget)||void 0===t?void 0:t.id)||null});this.configurator.updateWidget(null),setTimeout(()=>{this.configurator.updateWidget(rn()(i))})}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}resetForm(){this.resetForm$.next(),this.form=this.formBuilder.group({}),this.form.statusChanges.pipe((0,U.R)(this.resetForm$),(0,U.R)(this.destroy$)).subscribe(()=>{this.changeDetector.markForCheck()})}}return e.lateLoadKey="WidgetClonerComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(co.n),s.Y36(sn.m),s.Y36(d.qu),s.Y36(ue.x))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-widget-cloner"]],hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",cloneSelectionComponentType:"cloneSelectionComponentType"},decls:8,vars:7,consts:function(){let e,t,i;return e=$localize`:a638e97aa8422948b3e628089bbc9e0cd89e0087696117927395958397:Creating Widget`,t=$localize`:1af9862ac515933a9a72e92970c3e92bda63f6e88076137290276236439:Create Widget`,i=$localize`:072d4d4ec83a5a97345a1c13b90c213b47326d096673660887182833564:Customize`,[["configuratorTitle",e,3,"disableCloseButton","close"],["finishText",t,3,"hideHeader","canProceed","canFinish","navigationControl","finish","cancel","stepNavigated"],["nextText",i,3,"stepTemplate"],[3,"stepTemplate"],["step1",""],["step2",""],[1,"p-4","h-100"],["nuiComponentPortal","",3,"componentType","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"formGroup"],[3,"pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(e,t){if(1&e&&(s.TgZ(0,"nui-configurator-heading",0),s.NdJ("close",function(){return t.onCancel()}),s.qZA(),s.TgZ(1,"nui-dashwiz",1),s.NdJ("finish",function(){return t.onFinish()})("cancel",function(){return t.onCancel()})("stepNavigated",function(e){return t.onStepNavigated(e)}),s._UZ(2,"nui-dashwiz-step",2),s._UZ(3,"nui-dashwiz-step",3),s.qZA(),s.YNc(4,un,4,4,"ng-template",null,4,s.W1O),s.YNc(6,pn,3,2,"ng-template",null,5,s.W1O)),2&e){const e=s.MAs(5),i=s.MAs(7);s.Q6J("disableCloseButton",t.busy),s.xp6(1),s.Q6J("hideHeader",!0)("canProceed",!!t.widgetTemplate)("canFinish",t.canFinish())("navigationControl",t.navigationControl),s.xp6(1),s.Q6J("stepTemplate",e),s.xp6(1),s.Q6J("stepTemplate",i)}},directives:[Bo.Q,an.i,ln.u,T.$,S.Pl,d.JL,d.sg,Ki.R],encapsulation:2,changeDetection:0}),e})();var gn=i(83385),mn=i(6432),fn=i(4433),vn=i(19797),yn=i(31507);const bn=[$localize`Blue`,$localize`Blue Light`,$localize`Blue Dark`,$localize`Pink`,$localize`Pink Light`,$localize`Pink Dark`,$localize`Sea Green`,$localize`Sea Green Light`,$localize`Sea Green Dark`,$localize`Violet`,$localize`Violet Light`,$localize`Violet Dark`,$localize`Lime Green`,$localize`Lime Green Light`,$localize`Lime Green Dark`,$localize`Orange`,$localize`Orange Light`,$localize`Orange Dark`,$localize`Ultramarine`,$localize`Ultramarine Light`,$localize`Ultramarine Dark`,$localize`Bordeaux`,$localize`Bordeaux Light`,$localize`Bordeaux Dark`,$localize`Ochroid`,$localize`Ochroid Light`,$localize`Ochroid Dark`,$localize`Anthracite`,$localize`Anthracite Light`,$localize`Anthracite Dark`],Cn=[$localize`Down`,$localize`Down Light`,$localize`Critical`,$localize`Critical Light`,$localize`Warning`,$localize`Warning Light`,$localize`Unknown`,$localize`Unknown Light`,$localize`Ok`,$localize`Ok Light`,$localize`Info`,$localize`Info Light`],xn=i.n(yn)()([...u.wlb,...u.Sj$],[...bn,...Cn]),wn="var(--nui-color-bg-secondary)",Tn=[...u.wlb,...u.Sj$].map(e=>({color:e,label:xn[e]}));var Sn=i(52238),In=i(76e3);function _n(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",27),s._uU(1),s.qZA()),2&e){const e=t.$implicit,i=s.oxw(2);s.Q6J("value",e.key),s.xp6(1),s.hij(" ",i.getLabel(e.key)," ")}}function An(e,t){if(1&e&&s._UZ(0,"nui-drop-area"),2&e){const e=s.oxw(2);s.Udp("height",e.height,"px")}}function zn(e,t){if(1&e){const e=s.EpF();s.ynx(0),s.TgZ(1,"div",14),s.NdJ("cdkDragStarted",function(t){return s.CHM(e),s.oxw().cdkDragStarted(t)}),s.TgZ(2,"div",15),s._UZ(3,"nui-icon",16),s.qZA(),s.TgZ(4,"div",17),s.TgZ(5,"nui-form-field",18),s.TgZ(6,"nui-select-v2",19),s.YNc(7,_n,2,2,"nui-select-v2-option",20),s.ALo(8,"keyvalue"),s.qZA(),s.qZA(),s.TgZ(9,"nui-form-field",21),s._UZ(10,"nui-textbox",22),s.qZA(),s.TgZ(11,"nui-form-field",23),s._UZ(12,"nui-color-picker",24),s.qZA(),s.qZA(),s.TgZ(13,"button",25),s.NdJ("click",function(){const t=s.CHM(e).index;return s.oxw().removeRule(t)}),s.qZA(),s.YNc(14,An,1,2,"nui-drop-area",26),s.qZA(),s.BQk()}if(2&e){const e=t.$implicit,i=s.oxw();s.xp6(1),s.Q6J("formGroup",e),s.xp6(4),s.Q6J("control",e.get("comparisonType")),s.xp6(1),s.Q6J("formControl",e.get("comparisonType")),s.xp6(1),s.Q6J("ngForOf",s.lcZ(8,7,i.availableComparators)),s.xp6(2),s.Q6J("control",e.get("value")),s.xp6(2),s.Q6J("control",e.get("color")),s.xp6(1),s.Q6J("colorPalette",i.palette)}}let kn=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.formBuilder=t,this.formReady=new s.vpe,this.destroy$=new H.xQ,this.availableComparators=i.getComparators()}ngOnInit(){var e;this.palette=[{color:wn,label:$localize`Default color`}].concat(this.backgroundColors),this.formLocal=this.initDefaultRulesGroup(),this.form=this.formBuilder.group({rules:[[]]}),null===(e=this.formLocal.get("rules"))||void 0===e||e.value.valueChanges.pipe((0,it.b)(e=>{var t;return null===(t=this.form.get("rules"))||void 0===t?void 0:t.patchValue([...e])}),(0,U.R)(this.destroy$)).subscribe(),this.formReady.emit(this.form)}ngOnChanges(e){var t,i;e.rules&&((null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).setValue([]),this.rules&&Yo()(this.rules)&&this.rules.forEach(e=>{var t;(null===(t=this.formLocal.get("rules"))||void 0===t?void 0:t.value).push(this.formBuilder.group({comparisonType:[e.comparisonType,[d.kI.required]],value:[e.value,[d.kI.required]],color:[e.color]}))}))}getColorRulesSubtitle(){var e,t,i,o;return 0===(null===(t=null===(e=this.formLocal)||void 0===e?void 0:e.get("rules"))||void 0===t?void 0:t.value).controls.length?$localize`No color rules`:$localize`${(null===(o=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===o?void 0:o.value).controls.length} color rules`}getLabel(e){var t;return(null===(t=this.availableComparators[e])||void 0===t?void 0:t.label)||"Custom Comparator"}removeRule(e){var t,i;(null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).removeAt(e)}addRule(){var e,t;(null===(t=null===(e=this.formLocal)||void 0===e?void 0:e.get("rules"))||void 0===t?void 0:t.value).push(this.formBuilder.group({comparisonType:[">",[d.kI.required]],value:[0,[d.kI.required]],color:[wn]}))}drop(e){this.move(e.currentIndex,e.previousIndex)}cdkDragStarted(e){this.height=e.source.element.nativeElement.offsetHeight}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initDefaultRulesGroup(){return this.formBuilder.group({rules:[this.formBuilder.array([],d.kI.required)]})}move(e,t){var i,o;const n=null===(o=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===o?void 0:o.value,r=e>t?1:-1;if(!n)return;const s=n.at(t);for(let a=t;a*r<e*r;a+=r){const e=n.at(a+r);n.setControl(a,e)}n.setControl(e,s)}}return e.lateLoadKey="BackgroundColorRulesConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(d.qu),s.Y36(he.Z))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-background-color-rules-configuration"]],inputs:{rules:"rules",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[s.TTD],decls:20,vars:15,consts:function(){let e,t,i;return e=$localize`:3b53b67118a64c409177ae5a41f5978d0e5a95bd4898023314284497772:Background color rules`,t=$localize`:a5b94dd20b8bfe788b08278ddd886c220cfe117b6277749121321104138:Add new rule `,i=$localize`:42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c8325381706328570325:Select Item`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"kpi-color-rules-configuration__accordion-content"],[1,"mb-4"],[1,"mb-3"],["cdkDropList","",3,"cdkDropListDropped"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],t,["cdkDrag","",1,"kpi-color-rule","d-flex","pt-3",3,"formGroup","cdkDragStarted"],[1,"kpi-color-rule__control","justify-content-center","d-flex"],["icon","drag","cdkDragHandle","",1,"kpi-color-rule__drag","align-items-center"],[1,"d-flex","flex-grow-1","flex-wrap"],[1,"mr-3","mb-3","flex-grow-1",3,"control"],["placeholder",i,2,"min-width","220px",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"mr-3","mb-3",2,"max-width","100px",3,"control"],["formControlName","value"],[1,"mr-3","mb-3",3,"control"],["formControlName","color",3,"colorPalette"],["nui-button","","icon","delete","displayStyle","action","type","button",1,"kpi-color-rule__control",3,"click"],[3,"height",4,"cdkDragPlaceholder"],[3,"value"]]},template:function(e,t){if(1&e&&(s.TgZ(0,"nui-widget-editor-accordion",0),s.ALo(1,"async"),s.ALo(2,"nuiWidgetEditorAccordionFormState"),s.TgZ(3,"div",1),s._UZ(4,"nui-icon",2),s.ALo(5,"async"),s.ALo(6,"nuiFormHeaderIconPipe"),s.TgZ(7,"div",3),s.TgZ(8,"span",4),s.SDv(9,5),s.qZA(),s.TgZ(10,"div",6),s._uU(11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"div",7),s.TgZ(13,"div",8),s.TgZ(14,"p",9),s._uU(15,"We can automatically change the background color when the value meets certain conditions."),s.qZA(),s.TgZ(16,"div",10),s.NdJ("cdkDropListDropped",function(e){return t.drop(e)}),s.YNc(17,zn,15,9,"ng-container",11),s.qZA(),s.TgZ(18,"button",12),s.NdJ("click",function(){return t.addRule()}),s.SDv(19,13),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){let e;s.Q6J("formGroup",t.formLocal)("state",s.lcZ(1,6,s.lcZ(2,8,t.formLocal))),s.xp6(4),s.Q6J("icon",s.lcZ(5,10,s.xi3(6,12,t.formLocal,"color"))),s.xp6(6),s.Q6J("title",t.getColorRulesSubtitle()),s.xp6(1),s.hij(" ",t.getColorRulesSubtitle()," "),s.xp6(6),s.Q6J("ngForOf",null==(e=t.formLocal.get("rules"))?null:e.value.controls)}},directives:[fn.J,d.JL,d.sg,n.oJW,eo.Wj,o.sg,n.r0F,eo.Zt,eo.Bh,n.hgI,n.j_n,d.JJ,d.oH,n.XHW,d.u,lo,eo.Hk,n.rLF,uo.O],pipes:[o.Ov,Sn.F,In.d,o.Nd],styles:[".kpi-color-rules-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-color-rules-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-color-rules-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-color-rules-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 30px - 10px);margin-left:10px}.kpi-color-rules-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:#d9d9d9;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}.kpi-color-rule[_ngcontent-%COMP%]{background-color:#fff;background-color:var(--nui-color-bg-content,#fff)}.kpi-color-rule__drag[_ngcontent-%COMP%]{cursor:move}.kpi-color-rule__control[_ngcontent-%COMP%]{min-width:30px;height:30px}"],changeDetection:0}),e})();var Zn=i(13409),On=i(7350),Pn=i(66297),$n=i(35720);function Fn(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",14),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("title",null==e?null:e.label)("value",e),s.xp6(1),s.hij(" ",e.label," ")}}function Dn(e,t){}const Mn=function(){return["errorState"]},Rn=function(e){return{dataSource:e}};let Jn=(()=>{class e{constructor(e,t,i,o,n,r,a){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.providerRegistryService=o,this.eventBus=n,this.injector=r,this.logger=a,this.dataSourceProviders=[],this.errorComponent=Pn.K.lateLoadKey,this.formReady=new s.vpe,this.hasDataSourceError=!1,this.dataFieldIds=new Zn.Subject}ngOnInit(){var e;this.form=this.formBuilder.group({providerId:[this.providerId||"",[d.kI.required]],properties:[this.properties||{}],dataSource:[null,[d.kI.required]]}),this.form.setValidators([()=>this.hasDataSourceError?{dataSourceError:!0}:null]),null===(e=this.form.get("dataSource"))||void 0===e||e.valueChanges.subscribe(e=>{var t,i;null===(t=this.form.get("providerId"))||void 0===t||t.setValue(null==e?void 0:e.providerId),(null==e?void 0:e.properties)&&(null===(i=this.form.get("properties"))||void 0===i||i.setValue(null==e?void 0:e.properties))}),this.formReady.emit(this.form)}ngOnChanges(e){var t,i,o,n,r,s,a,l,c;if(e.providerId&&!e.providerId.isFirstChange()||e.properties&&!e.properties.isFirstChange()){const c=null===(t=e.providerId)||void 0===t?void 0:t.previousValue,d=null===(i=e.properties)||void 0===i?void 0:i.previousValue;if(c!==this.providerId||d!==this.properties){const e=this.dataSourceProviders.find(e=>{var t,i;return e.providerId===this.providerId&&Ce()(null!==(t=e.properties)&&void 0!==t?t:{},null!==(i=this.properties)&&void 0!==i?i:{})});e?(null===(l=null===(a=this.form)||void 0===a?void 0:a.get("dataSource"))||void 0===l||l.setValue(e),this.invokeDataSource(e)):(null===(n=null===(o=this.form)||void 0===o?void 0:o.get("providerId"))||void 0===n||n.setValue(this.providerId),null===(s=null===(r=this.form)||void 0===r?void 0:r.get("properties"))||void 0===s||s.setValue(this.properties),this.invokeDataSource({properties:this.properties,providerId:this.providerId}))}}if(e.dataSourceProviders&&!e.dataSourceProviders.isFirstChange()&&1===this.dataSourceProviders.length){const e=this.dataSourceProviders[0];null===(c=this.form.get("dataSource"))||void 0===c||c.setValue(e),this.invokeDataSource(e)}}ngAfterViewInit(){var e;if(this.dataSourceProviders&&1===this.dataSourceProviders.length){const t=this.dataSourceProviders[0];null===(e=this.form.get("dataSource"))||void 0===e||e.setValue(t),this.invokeDataSource(t)}}onDataSourceSelected(e){this.eventBus.next(On.ay,{}),this.invokeDataSource(e)}invokeDataSource(e){var t;if(!e.providerId)return;const i=this.providerRegistryService.getProvider(e.providerId);if(i){this.dataSource=this.providerRegistryService.getProviderInstance(i,this.injector),this.eventBus.next(On.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,rt.q)(1)).subscribe(e=>{this.eventBus.next(On.PF,{payload:e}),this.dataFieldIds.next(Object.keys(e.result||e))});const o=this.dataSource;(null==o?void 0:o.updateConfiguration)&&o.updateConfiguration(null!==(t=e.properties)&&void 0!==t?t:{}),setTimeout(()=>{this.dataSource.applyFilters()})}else this.logger.warn("No provider found for id:",e.providerId)}onErrorState(e){this.hasDataSourceError=e,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}return e.lateLoadKey="DataSourceConfigurationV2Component",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36($n.p),s.Y36(d.qu),s.Y36(ce.C),s.Y36(C.nY),s.Y36(s.zs3),s.Y36(n.mQy))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",properties:"properties",providerId:"providerId",errorComponent:"errorComponent"},outputs:{formReady:"formReady"},features:[s.TTD],decls:20,vars:28,consts:function(){let e,t;return e=$localize`:1b6bc6d5daaa6ec75d201690bb6f782f30bf98a01107354728956440783:Data Source`,t=$localize`:87aabb92d16c162e46a9ef3703445351a3e417396527825109146827187:Select data source`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],[3,"control"],["placeholder",t,"formControlName","dataSource",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"nui-widget-editor-accordion",0),s.ALo(1,"async"),s.ALo(2,"nuiWidgetEditorAccordionFormState"),s.TgZ(3,"div",1),s._UZ(4,"nui-icon",2),s.ALo(5,"async"),s.ALo(6,"nuiFormHeaderIconPipe"),s.TgZ(7,"div",3),s.TgZ(8,"span",4),s.SDv(9,5),s.qZA(),s.TgZ(10,"div",6),s._uU(11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"div",7),s.TgZ(13,"nui-form-field",8),s.TgZ(14,"nui-select-v2",9),s.NdJ("valueSelected",function(e){return t.onDataSourceSelected(e)}),s.ALo(15,"async"),s.YNc(16,Fn,2,3,"nui-select-v2-option",10),s.qZA(),s.qZA(),s.ynx(17,11,12),s.NdJ("output",function(e){return t.onErrorState(e.payload)}),s.YNc(19,Dn,0,0,"ng-template",13),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(18).attached(t)}),s.BQk(),s.qZA(),s.qZA()}if(2&e){const e=s.MAs(18);let i,o,n;s.Q6J("formGroup",t.form)("state",s.lcZ(1,14,s.lcZ(2,16,t.form))),s.xp6(4),s.Q6J("icon",s.lcZ(5,18,s.xi3(6,20,t.form,"database"))),s.xp6(6),s.Q6J("title",null==(i=t.form.get("dataSource"))||null==i.value?null:i.value.label),s.xp6(1),s.hij(" ",null==(o=t.form.get("dataSource"))||null==o.value?null:o.value.label," "),s.xp6(2),s.Q6J("control",t.form.get("dataSource")),s.xp6(1),s.Q6J("title",null==(n=t.form.get("dataSource"))||null==n.value?null:n.value.label)("popupViewportMargin",s.lcZ(15,23,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.dataSourceProviders),s.xp6(1),s.Q6J("componentId",t.errorComponent)("componentType",t.errorComponent)("outputs",s.DdM(25,Mn))("properties",s.VKq(26,Rn,t.dataSource)),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}},directives:[fn.J,d.JL,d.sg,n.oJW,n.hgI,n.j_n,d.JJ,d.u,o.sg,T.$,S.Pl,n.rLF],pipes:[o.Ov,Sn.F,In.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();var Ln=i(36233);function En(e,t){}let qn=(()=>{class e{constructor(e,t){this.changeDetector=e,this.formBuilder=t,this.mode=g.K.URL,this.formReady=new s.vpe,this.destroyed$=new H.xQ,this.form=this.formBuilder.group({mode:[this.mode],urlCustomContent:[""],htmlCustomContent:[""],customEmbeddedContent:[""]}),this.modes=[{value:g.K.URL,displayValue:$localize`Show the contents of a specific URL`},{value:g.K.HTML,displayValue:$localize`Show the exact HTML I supply below`}]}get urlCustomContent(){return this.form.get("urlCustomContent")}get htmlCustomContent(){return this.form.get("htmlCustomContent")}get modeValue(){return this.form.get("mode")}get customEmbeddedContentValue(){return this.form.get("customEmbeddedContent")}ngOnInit(){this.initializeForm(),this.formReady.emit(this.form)}ngOnChanges(e){var t,i,o;e.customEmbeddedContent&&(this.mode===g.K.URL?null===(t=this.urlCustomContent)||void 0===t||t.setValue(this.customEmbeddedContent):this.mode===g.K.HTML&&(null===(i=this.htmlCustomContent)||void 0===i||i.setValue(this.customEmbeddedContent))),e.mode&&(null===(o=this.modeValue)||void 0===o||o.setValue(e.mode.currentValue))}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}initializeForm(){var e,t,i;null===(e=this.modeValue)||void 0===e||e.valueChanges.pipe((0,U.R)(this.destroyed$)).subscribe(e=>{var t,i,o,n,r,s,a,l;e===g.K.URL?(null===(t=this.customEmbeddedContentValue)||void 0===t||t.setValue(null===(i=this.form.get("urlCustomContent"))||void 0===i?void 0:i.value),null===(o=this.htmlCustomContent)||void 0===o||o.disable(),null===(n=this.urlCustomContent)||void 0===n||n.enable()):e===g.K.HTML&&(null===(r=this.customEmbeddedContentValue)||void 0===r||r.setValue(null===(s=this.form.get("htmlCustomContent"))||void 0===s?void 0:s.value),null===(a=this.urlCustomContent)||void 0===a||a.disable(),null===(l=this.htmlCustomContent)||void 0===l||l.enable())}),null===(t=this.urlCustomContent)||void 0===t||t.valueChanges.pipe((0,U.R)(this.destroyed$)).subscribe(e=>{var t;null===(t=this.customEmbeddedContentValue)||void 0===t||t.setValue(e)}),null===(i=this.htmlCustomContent)||void 0===i||i.valueChanges.pipe((0,U.R)(this.destroyed$)).subscribe(e=>{var t;null===(t=this.customEmbeddedContentValue)||void 0===t||t.setValue(e)})}}return e.lateLoadKey="EmbeddedContentConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(d.qu))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-embedded-content-configuration"]],inputs:{mode:"mode",messageComponent:"messageComponent",customEmbeddedContent:"customEmbeddedContent"},outputs:{formReady:"formReady"},features:[s.TTD],decls:26,vars:23,consts:function(){let e,t;return e=$localize`:d18bb86a09ed7c63d7d00a1dad418e5328f594065492801901920760741:Embedded Content`,t=$localize`:6a175ac244e51f9c713f8829e3ba9192f6728ba29012225804233265629:What do you want to show in the widget?`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],e,[1,"nui-text-secondary"],[1,"embedded-configurator-section__accordion-content"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["caption",t,3,"control"],["formControlName","mode","name","mode","required","",3,"value","valueChange"],[3,"value"],[3,"control"],["formControlName","urlCustomContent"],["formControlName","htmlCustomContent","rows","7",1,"textarea-scrollable"]]},template:function(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"nui-widget-editor-accordion",0),s.ALo(1,"async"),s.ALo(2,"nuiWidgetEditorAccordionFormState"),s.TgZ(3,"div",1),s._UZ(4,"nui-icon",2),s.ALo(5,"async"),s.ALo(6,"nuiFormHeaderIconPipe"),s.TgZ(7,"div",3),s.TgZ(8,"span",4),s.SDv(9,5),s.qZA(),s.TgZ(10,"div",6),s._uU(11," Show the specific HTML I supply "),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"div",7),s.ynx(13,8,9),s.YNc(15,En,0,0,"ng-template",10),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(14).attached(t)}),s.BQk(),s.TgZ(16,"nui-form-field",11),s.TgZ(17,"nui-radio-group",12),s.NdJ("valueChange",function(e){return t.mode=e}),s.TgZ(18,"nui-radio",13),s._uU(19),s.qZA(),s.TgZ(20,"nui-form-field",14),s._UZ(21,"nui-textbox",15),s.qZA(),s.TgZ(22,"nui-radio",13),s._uU(23),s.qZA(),s.TgZ(24,"nui-form-field",14),s._UZ(25,"nui-textbox",16),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.MAs(14);s.Q6J("formGroup",t.form)("state",s.lcZ(1,14,s.lcZ(2,16,t.form))),s.xp6(4),s.Q6J("icon",s.lcZ(5,18,s.xi3(6,20,t.form,"tag"))),s.xp6(9),s.Q6J("componentType",t.messageComponent.componentType)("properties",t.messageComponent.properties),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal),s.xp6(1),s.Q6J("control",t.form.get("mode")),s.xp6(1),s.Q6J("value",t.mode),s.xp6(1),s.Q6J("value",t.modes[0].value),s.xp6(1),s.hij(" ",t.modes[0].displayValue," "),s.xp6(1),s.Q6J("control",t.form.get("urlCustomContent")),s.xp6(2),s.Q6J("value",t.modes[1].value),s.xp6(1),s.hij(" ",t.modes[1].displayValue," "),s.xp6(1),s.Q6J("control",t.form.get("htmlCustomContent"))}},directives:[fn.J,d.JL,d.sg,n.oJW,T.$,S.Pl,n.hgI,n.wTj,d.JJ,d.u,d.Q7,n.UKb,n.XHW],pipes:[o.Ov,Sn.F,In.d],styles:[".embedded-configurator-section__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();function Bn(e,t){if(1&e&&(s.tHW(0,1,1),s._UZ(1,"a",3),s.N_p()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("href",e.link.href,s.LSH)("target",e.link.target),s.pQV(e.link.text),s.QtT(0)}}let Nn=(()=>{class e{constructor(e){this.changeDetector=e}}return e.lateLoadKey="InfoMessageConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-info-message-configuration"]],inputs:{emphasizeText:"emphasizeText",generalText:"generalText",link:"link",allowDismiss:"allowDismiss"},decls:4,vars:4,consts:function(){let e;return e=$localize`:24c82b79e21e3e64d6bc95222dab453df0f762384445666320773928104:${"\ufffd#2\ufffd"}:START_BOLD_TEXT: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_LINK:${"\ufffd0:1\ufffd"}:INTERPOLATION_2:${"\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd"}:CLOSE_LINK:`,[["type","info",3,"allowDismiss"],e,[3,"href","target",4,"ngIf"],[3,"href","target"]]},template:function(e,t){1&e&&(s.TgZ(0,"nui-message",0),s.tHW(1,1),s._UZ(2,"b"),s.YNc(3,Bn,2,3,"a",2),s.N_p(),s.qZA()),2&e&&(s.Q6J("allowDismiss",t.allowDismiss),s.xp6(3),s.Q6J("ngIf",t.link),s.pQV(t.emphasizeText)(t.generalText),s.QtT(1))},directives:[n.qqZ,o.O5],encapsulation:2,changeDetection:0}),e})();var Qn=i(90739);function Yn(e,t){if(1&e&&(s.TgZ(0,"div",14),s.TgZ(1,"nui-form-field",15),s._UZ(2,"nui-textbox",16),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("control",e.form.get("units"))}}let Vn=(()=>{class e{constructor(e,t){this.changeDetector=e,this.formBuilder=t,this.defaultColor={label:$localize`Default color`,color:wn},this.label="",this.backgroundColor=this.defaultColor.color,this.units="",this.formReady=new s.vpe}ngOnInit(){this.backgroundColors=[...this.backgroundColors],this.backgroundColors.unshift(this.defaultColor),this.form=this.formBuilder.group({label:[this.label,[d.kI.required]],backgroundColor:[this.backgroundColor,[d.kI.required]]}),this.configurableUnits&&this.form.addControl("units",this.formBuilder.control(this.units));const e=this.form.get("label"),t=null==e?void 0:e.valueChanges.pipe((0,No.O)(e.value)),i=this.form.get("backgroundColor"),o=null==i?void 0:i.valueChanges.pipe((0,No.O)(null==i?void 0:i.value));this.subtitle$=(0,Qn.aj)([null==t?void 0:t.pipe((0,nt.U)(e=>e||$localize`no label`)),null==o?void 0:o.pipe((0,nt.U)(e=>xn[e]||$localize`Default Color`))]).pipe((0,nt.U)(e=>e.join(", "))),this.formReady.emit(this.form)}ngOnChanges(e){var t,i,o;e.label&&(null===(t=this.form)||void 0===t||t.patchValue({label:e.label.currentValue})),e.backgroundColor&&(null===(i=this.form)||void 0===i||i.patchValue({backgroundColor:e.backgroundColor.currentValue})),e.units&&(null===(o=this.form)||void 0===o||o.patchValue({units:e.units.currentValue}))}}return e.lateLoadKey="KpiDescriptionConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(d.qu))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-kpi-description-configuration"]],inputs:{componentId:"componentId",configurableUnits:"configurableUnits",label:"label",backgroundColor:"backgroundColor",units:"units",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[s.TTD],decls:21,vars:22,consts:function(){let e,t,i,o,n,r;return e=$localize`:eec715de352a6b114713b30b640d319fa78207a04902817035128594900:Description`,t=$localize`:863226cffd5b66a6fee9810a9282a5006d6ef5764077520913910941990:Label`,i=$localize`:8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5725093659603391179:Set label`,o=$localize`:e088252c0e2ede83d27a24702b1f77c90cee60b73468485835384597147:Background Color`,n=$localize`:be537f4ddb09e1a2856314f2cbe84063ab6b41709074327260054432941:Units`,r=$localize`:be537f4ddb09e1a2856314f2cbe84063ab6b41709074327260054432941:Units`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"kpi-description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"form-group",3,"control"],["formControlName","label","placeholder",i],["caption",o,1,"form-group",3,"control"],["formControlName","backgroundColor",1,"kpi-description-configuration__accordion-content__color-picker",3,"colorPalette"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",n,1,"form-group",3,"control"],["formControlName","units","placeholder",r]]},template:function(e,t){1&e&&(s.TgZ(0,"nui-widget-editor-accordion",0),s.ALo(1,"async"),s.ALo(2,"nuiWidgetEditorAccordionFormState"),s.TgZ(3,"div",1),s._UZ(4,"nui-icon",2),s.ALo(5,"async"),s.ALo(6,"nuiFormHeaderIconPipe"),s.TgZ(7,"div",3),s.TgZ(8,"span",4),s.SDv(9,5),s.qZA(),s.TgZ(10,"div",6),s.ALo(11,"async"),s._uU(12),s.ALo(13,"async"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"div",7),s.TgZ(15,"div",8),s.TgZ(16,"nui-form-field",9),s._UZ(17,"nui-textbox",10),s.qZA(),s.qZA(),s.TgZ(18,"nui-form-field",11),s._UZ(19,"nui-color-picker",12),s.qZA(),s.YNc(20,Yn,3,1,"div",13),s.qZA(),s.qZA()),2&e&&(s.Q6J("formGroup",t.form)("state",s.lcZ(1,9,s.lcZ(2,11,t.form))),s.xp6(4),s.Q6J("icon",s.lcZ(5,13,s.xi3(6,15,t.form,"widget_list"))),s.xp6(6),s.Q6J("title",s.lcZ(11,18,t.subtitle$)),s.xp6(2),s.hij(" ",s.lcZ(13,20,t.subtitle$)," "),s.xp6(4),s.Q6J("control",t.form.get("label")),s.xp6(2),s.Q6J("control",t.form.get("backgroundColor")),s.xp6(1),s.Q6J("colorPalette",t.backgroundColors),s.xp6(1),s.Q6J("ngIf",t.configurableUnits))},directives:[fn.J,d.JL,d.sg,n.oJW,n.hgI,n.XHW,d.JJ,d.u,lo,o.O5],pipes:[o.Ov,Sn.F,In.d],styles:[".kpi-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-description-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-description-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-description-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 30px - 10px);margin-left:10px}.kpi-description-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:#d9d9d9;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}"],changeDetection:0}),e})();i(95228);var Wn=i(98348),jn=i(58503),Hn=i.n(jn);const Un=e=>{const t=e.get("criticalThresholdValue"),i=e.get("warningThresholdValue"),o=e.get("reversedThresholds"),r=e.get("showThresholds");if(!t)throw new Error("criticalThresholdValue formControl is not defined");if((0,n.fS1)(t,"min","max"),!i)throw new Error("warningThresholdValue formControl is not defined");if((0,n.fS1)(i,"min","max"),null==r?void 0:r.value){if(w()(i.value))return null;if(null==o?void 0:o.value){if(t.value>=i.value)return i.setErrors({min:!0}),t.setErrors({max:!0}),{thresholds:!0}}else if(t.value<=i.value)return i.setErrors({max:!0}),t.setErrors({min:!0}),{thresholds:!0}}return null};function Gn(e,t){if(1&e&&(s.TgZ(0,"nui-radio",14),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.value),s.xp6(1),s.hij(" ",e.displayValue," ")}}function Kn(e,t){if(1&e&&(s.TgZ(0,"div",15),s.TgZ(1,"div",16),s.TgZ(2,"nui-form-field",17),s._UZ(3,"nui-textbox-number",18),s.TgZ(4,"nui-validation-message",11),s.SDv(5,19),s.qZA(),s.TgZ(6,"nui-validation-message",20),s.SDv(7,21),s.qZA(),s.TgZ(8,"nui-validation-message",22),s.SDv(9,23),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",16),s.TgZ(11,"nui-form-field",24),s._UZ(12,"nui-textbox-number",25),s.TgZ(13,"nui-validation-message",11),s.SDv(14,26),s.qZA(),s.TgZ(15,"nui-validation-message",20),s.SDv(16,27),s.qZA(),s.TgZ(17,"nui-validation-message",22),s.SDv(18,28),s.qZA(),s.qZA(),s.qZA(),s.TgZ(19,"nui-form-field",29),s._UZ(20,"nui-checkbox",30),s.TgZ(21,"nui-validation-message",11),s.SDv(22,31),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.Q6J("control",e.form.get("warningThresholdValue")),s.xp6(9),s.Q6J("control",e.form.get("criticalThresholdValue")),s.xp6(8),s.Q6J("control",e.form.get("reversedThresholds"))("showOptionalText",!1)}}let Xn=(()=>{class e{constructor(e,t,i,o){this.changeDetector=e,this.formBuilder=t,this.logger=i,this.cd=o,this.formReady=new s.vpe,this.thresholdOptions=[{value:!1,displayValue:$localize`Never show critical or warning states for this KPI`},{value:!0,displayValue:$localize`Set custom thresholds for this widget`}],this.destroyed$=new H.xQ}ngOnInit(){this.validateRadioButtonsGroupValue(),this.form=this.formBuilder.group({criticalThresholdValue:[this.criticalThresholdValue||0,[d.kI.required]],warningThresholdValue:[this.warningThresholdValue||0],showThresholds:[this.showThresholds||!1,[d.kI.required]],reversedThresholds:[this.reversedThresholds||!1]},{validators:Un}),this.handleWarningThreshold(this.warningThresholdValue),this.form.statusChanges.pipe((0,U.R)(this.destroyed$)).subscribe(e=>{this.form.markAllAsTouched(),this.cd.detectChanges()}),this.formReady.emit(this.form)}ngOnChanges(e){var t;const i=["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"];if(e){for(const o of Object.keys(e))if(Hn()(i,o)){const i=e[o].currentValue;i&&(null===(t=this.form)||void 0===t||t.patchValue({[o]:i}))}e.showThresholds&&setTimeout(()=>this.validateRadioButtonsGroupValue())}e.warningThresholdValue&&this.handleWarningThreshold(e.warningThresholdValue.currentValue)}getThresholdsSubtitle(e){return e?$localize`Custom thresholds`:$localize`No thresholds`}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}validateRadioButtonsGroupValue(){this.radioButtonGroupValue=this.showThresholds}handleWarningThreshold(e){var t;const i=null===(t=this.form)||void 0===t?void 0:t.get("warningThresholdValue");w()(e)&&(null==i||i.setValue(null))}}return e.lateLoadKey="ThresholdsConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(d.qu),s.Y36(n.mQy),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-thresholds-configuration"]],inputs:{criticalThresholdValue:"criticalThresholdValue",warningThresholdValue:"warningThresholdValue",showThresholds:"showThresholds",reversedThresholds:"reversedThresholds"},outputs:{formReady:"formReady"},features:[s.TTD],decls:19,vars:18,consts:function(){let e,t,i,o,n,r,s,a,l,c,d,u,p,h,g;return e=$localize`:784fdd6b2dc26499eca6e15094b55f0b1c1e1b7a8815471757829352344:Thresholds`,t=$localize`:6875687abe0982b513f60d230d71b9cc2d9eef3e9007062817247777645:How do you want to set warning/critical thresholds?`,i=$localize`:b17406f843dc33feb81478ae8273dc1aae06bbf62244196281006156184: This field is required `,o=$localize`:5dda34ec4b693f2b13afdf28a4e5f00062f4c8964003830139037367407:Warning value`,n=$localize`:cae671d9eb277eadfd7752518814d3f852369cc96643132921042050963:Never show the warning state`,r=$localize`:c9a9da14b0f8c677efa737185f1232f8537bd2a63224868488156254475: This field is required `,s=$localize`:6ad764c776f7fc93e363d7ffbc1c230eae3940b54559261673566846483: Warning threshold should be greater than critical threshold `,a=$localize`:10ac1637483672c386935e223e44afe35191d9821891939597266260302: Warning threshold should be lower than critical threshold `,l=$localize`:f8baa78544aa27624d43d59e5a225216aff1042f6033897450960508846:Critical value`,c=$localize`:9b66a7e6fdeb05f4c1ffdc78ea8f4a7a2fb64d797643729389671069649:Set critical value`,d=$localize`:c9a9da14b0f8c677efa737185f1232f8537bd2a63224868488156254475: This field is required `,u=$localize`:2afdb8ffd27a0c693ebdf779394160feda88b1bb4547796134450342031: Critical threshold should be greater than warning threshold `,p=$localize`:d4a40b458ad21fde1e702a45a864aa7854d9c2c41599177532285503774: Critical threshold should be lower than warning threshold `,h=$localize`:18bcbeb2b14e6064ec6fe9276db140a4e800da3c5716867848923884165:Warning and critical when below threshold values`,g=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"kpi-thresholds-configuration__accordion-content"],["caption",t,3,"control"],["formControlName","showThresholds","name","showThresholds","required","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],i,["class","mt-4",4,"ngIf"],[3,"value"],[1,"mt-4"],[1,"mb-4"],["caption",o,3,"control"],["formControlName","warningThresholdValue","placeholder",n],r,["for","min"],s,["for","max"],a,["caption",l,3,"control"],["formControlName","criticalThresholdValue","placeholder",c],d,u,p,["caption",h,3,"control","showOptionalText"],["formControlName","reversedThresholds","required",""],g]},template:function(e,t){if(1&e&&(s.TgZ(0,"nui-widget-editor-accordion",0),s.ALo(1,"async"),s.ALo(2,"nuiWidgetEditorAccordionFormState"),s.TgZ(3,"div",1),s._UZ(4,"nui-icon",2),s.ALo(5,"async"),s.ALo(6,"nuiFormHeaderIconPipe"),s.TgZ(7,"div",3),s.TgZ(8,"span",4),s.SDv(9,5),s.qZA(),s.TgZ(10,"div",6),s._uU(11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"div",7),s.TgZ(13,"nui-form-field",8),s.TgZ(14,"nui-radio-group",9),s.YNc(15,Gn,2,2,"nui-radio",10),s.qZA(),s.TgZ(16,"nui-validation-message",11),s.SDv(17,12),s.qZA(),s.qZA(),s.YNc(18,Kn,23,4,"div",13),s.qZA(),s.qZA()),2&e){let e,i,o;s.Q6J("formGroup",t.form)("state",s.lcZ(1,9,s.lcZ(2,11,t.form))),s.xp6(4),s.Q6J("icon",s.lcZ(5,13,s.xi3(6,15,t.form,"thresholds"))),s.xp6(6),s.Q6J("title",t.getThresholdsSubtitle(null==(e=t.form.get("showThresholds"))?null:e.value)),s.xp6(1),s.Oqu(t.getThresholdsSubtitle(null==(i=t.form.get("showThresholds"))?null:i.value)),s.xp6(2),s.Q6J("control",t.form.get("showThresholds")),s.xp6(1),s.Q6J("value",t.radioButtonGroupValue),s.xp6(1),s.Q6J("ngForOf",t.thresholdOptions),s.xp6(3),s.Q6J("ngIf",null==(o=t.form.get("showThresholds"))?null:o.value)}},directives:[fn.J,d.JL,d.sg,n.oJW,n.hgI,n.wTj,d.JJ,d.u,d.Q7,o.sg,n.CfE,o.O5,n.UKb,n.I5I,n.bK4],pipes:[o.Ov,Sn.F,In.d],styles:[".kpi-thresholds-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();function er(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",23),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e),s.xp6(1),s.hij(" ",e.name," ")}}function tr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",23),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.id),s.xp6(1),s.hij(" ",e.label," ")}}function ir(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",23),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.value),s.xp6(1),s.Oqu(e.label)}}let or=(()=>{class e{constructor(e,t,i,o){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.eventBus=o,this.legendPlacements=[],this.timeSpans=[],this.availableChartTypes=[{label:$localize`Line`,value:kt.Line},{label:$localize`Stacked area`,value:kt.StackedArea},{label:$localize`Stacked % area`,value:kt.StackedPercentageArea},{label:$localize`Bar`,value:kt.StackedBar},{label:$localize`Status`,value:kt.StatusBar}],this.formReady=new s.vpe,this.destroy$=new H.xQ,this.form=this.formBuilder.group({leftAxisLabel:[""],startingTimespan:[null,d.kI.required],legendPlacement:[g.w.None,[d.kI.required]],preset:[kt.Line,[d.kI.required]]})}ngOnInit(){var e;null===(e=this.form.get("startingTimespan"))||void 0===e||e.valueChanges.pipe((0,U.R)(this.destroy$)).subscribe(e=>{setTimeout(()=>{this.eventBus.next(b.xZ,{payload:{id:b.RG}})})}),this.formReady.emit(this.form)}ngOnChanges(e){var t,i,o,n;const r=this.form.get("startingTimespan");e.leftAxisLabel&&(null===(t=this.form.get("leftAxisLabel"))||void 0===t||t.setValue(this.leftAxisLabel,{emitEvent:!1})),e.startingTimespan&&(null==r||r.setValue(this.startingTimespan,{emitEvent:!1})),e.legendPlacement&&(null===(i=this.form.get("legendPlacement"))||void 0===i||i.setValue(this.legendPlacement,{emitEvent:!1})),e.preset&&(null===(o=this.form.get("preset"))||void 0===o||o.setValue(this.preset,{emitEvent:!1})),e.timeSpans&&!(null==r?void 0:r.value)&&(null===(n=this.timeSpans)||void 0===n?void 0:n.length)>0&&(null==r||r.setValue(this.timeSpans[0]))}getSecondaryText(){const e=this.form.controls.startingTimespan.value;return`${e&&e.name||$localize`No timespan`}, ${this.form.controls.legendPlacement.value||$localize`No legend`}, ${this.form.controls.leftAxisLabel.value||$localize`No y-axis label`}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.lateLoadKey="TimeseriesMetadataConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36($n.p),s.Y36(d.qu),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-timeseries-metadata-configuration"]],inputs:{legendPlacements:"legendPlacements",timeSpans:"timeSpans",startingTimespan:"startingTimespan",legendPlacement:"legendPlacement",leftAxisLabel:"leftAxisLabel",preset:"preset",availableChartTypes:"availableChartTypes"},outputs:{formReady:"formReady"},features:[s.TTD],decls:40,vars:37,consts:function(){let e,t,i,o,n,r,s,a,l,c,d,u,p;return e=$localize`:82fac4002b38b13e6e76cab565857c651740e8d47635587638460371959:Timeseries metadata`,t=$localize`:7c1e198b83571c6f6d6774bbf5e8ef469b8ed3f883369046626581484:Starting timespan`,i=$localize`:cea52b8401042ba9c3aac1cd5a7507d754f0d8094391839922437157830:Starting Timespan`,o=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,n=$localize`:a9e3fc4b717bf285f084fc443a97f4c08b3452032498436426359230001:Chart legend`,r=$localize`:8137d4a0a1b9974f796c96ea5b70f4ec4304af979008417256629743113:Select Legend Orientation`,s=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,a=$localize`:20f8b383236e858a2369abf573aa3a662a61dc2c7603862017185374134:Chart y-axis label`,l=$localize`:da1b3b8ad86495e008972fe0f8dfca60c9c60ac55670370419656051485:Set chart y-axis label`,c=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,d=$localize`:d4821e6eaad5b45a36e2873de2a6e0075c4b76218983610989099122824:Chart type`,u=$localize`:d4821e6eaad5b45a36e2873de2a6e0075c4b76218983610989099122824:Chart type`,p=$localize`:b17406f843dc33feb81478ae8273dc1aae06bbf62244196281006156184: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"timeseries-metadata-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","startingTimespan",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],o,["caption",n,3,"control"],["placeholder",r,"formControlName","legendPlacement",3,"popupViewportMargin"],s,["caption",a,3,"control"],["formControlName","leftAxisLabel","placeholder",l],c,["caption",d,3,"control"],["placeholder",u,"formControlName","preset",3,"popupViewportMargin"],p,[3,"value"]]},template:function(e,t){1&e&&(s.TgZ(0,"nui-widget-editor-accordion",0),s.ALo(1,"async"),s.ALo(2,"nuiWidgetEditorAccordionFormState"),s.TgZ(3,"div",1),s._UZ(4,"nui-icon",2),s.ALo(5,"async"),s.ALo(6,"nuiFormHeaderIconPipe"),s.ALo(7,"async"),s.ALo(8,"nuiFormHeaderIconPipe"),s.TgZ(9,"div",3),s.TgZ(10,"span",4),s.SDv(11,5),s.qZA(),s.TgZ(12,"div",6),s._uU(13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"div",7),s.TgZ(15,"div",8),s.TgZ(16,"nui-form-field",9),s.TgZ(17,"nui-select-v2",10),s.ALo(18,"async"),s.YNc(19,er,2,2,"nui-select-v2-option",11),s.qZA(),s.TgZ(20,"nui-validation-message",12),s.SDv(21,13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(22,"div",8),s.TgZ(23,"nui-form-field",14),s.TgZ(24,"nui-select-v2",15),s.ALo(25,"async"),s.YNc(26,tr,2,2,"nui-select-v2-option",11),s.qZA(),s.TgZ(27,"nui-validation-message",12),s.SDv(28,16),s.qZA(),s.qZA(),s.qZA(),s.TgZ(29,"div",8),s.TgZ(30,"nui-form-field",17),s._UZ(31,"nui-textbox",18),s.TgZ(32,"nui-validation-message",12),s.SDv(33,19),s.qZA(),s.qZA(),s.qZA(),s.TgZ(34,"nui-form-field",20),s.TgZ(35,"nui-select-v2",21),s.ALo(36,"async"),s.YNc(37,ir,2,2,"nui-select-v2-option",11),s.qZA(),s.TgZ(38,"nui-validation-message",12),s.SDv(39,22),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.Q6J("formGroup",t.form)("state",s.lcZ(1,16,s.lcZ(2,18,t.form))),s.xp6(4),s.Q6J("icon",s.lcZ(5,20,s.xi3(6,22,t.form,"edit")))("iconColor",s.lcZ(7,25,s.Dn7(8,27,t.form,"gray",""))),s.xp6(8),s.Q6J("title",t.getSecondaryText()),s.xp6(1),s.Oqu(t.getSecondaryText()),s.xp6(3),s.Q6J("control",t.form.controls.startingTimespan),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(18,31,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.timeSpans),s.xp6(4),s.Q6J("control",t.form.controls.legendPlacement),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(25,33,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.legendPlacements),s.xp6(4),s.Q6J("control",t.form.controls.leftAxisLabel),s.xp6(4),s.Q6J("control",t.form.controls.preset),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(36,35,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.availableChartTypes))},directives:[fn.J,d.JL,d.sg,n.oJW,n.hgI,n.j_n,d.JJ,d.u,o.sg,n.CfE,n.XHW,n.rLF],pipes:[o.Ov,Sn.F,In.d],styles:[".timeseries-metadata-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),e})();var nr=i(41450);function rr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",22),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e),s.xp6(1),s.hij(" ",e," ")}}function sr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",22),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e),s.xp6(1),s.hij(" ",e," ")}}function ar(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",22),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e),s.xp6(1),s.hij(" ",e," ")}}function lr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",22),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e),s.xp6(1),s.hij(" ",e," ")}}function cr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",22),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e),s.xp6(1),s.hij(" ",e," ")}}let dr=(()=>{class e{constructor(e,t){this.changeDetector=e,this.formBuilder=t,this.formReady=new s.vpe,this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group({icon:"",status:"",detailedUrl:"",label:"",url:""})})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(e){e.dataFieldIds&&this.getFieldMappingsControl.setValue(e.dataFieldIds.currentValue)}get getFieldMappingsControl(){return this.form.get("dataFieldIds")}}return e.lateLoadKey="EntityFormattingComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(d.qu))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-entity-formatting-configuration"]],inputs:{mappingKeys:"mappingKeys",dataFieldIds:"dataFieldIds"},outputs:{formReady:"formReady"},features:[s.TTD],decls:46,vars:17,consts:function(){let e,t,i,o,n,r,s,a,l,c,d;return e=$localize`:38ddd26fc749a9c493e70c642d321c868c47f1785252376970414591923:Entity formatting`,t=$localize`:14688213d67b2f0e553d66f8255281db245502fb3074987902485823708:Icon`,i=$localize`:42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c8325381706328570325:Select Item`,o=$localize`:81b97b8ea996ad1e4f9fca8415021850214884b15611592591303869712:Status`,n=$localize`:42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c8325381706328570325:Select Item`,r=$localize`:06ae2001bf7ffd3cbe977e0c4ce0951f660ca1974936125302941310356:Details URL`,s=$localize`:42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c8325381706328570325:Select Item`,a=$localize`:863226cffd5b66a6fee9810a9282a5006d6ef5764077520913910941990:Label`,l=$localize`:42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c8325381706328570325:Select Item`,c=$localize`:ec044db4c57a4750f8bec4371dc39e94f2e26d46994779223497739731:Label URL`,d=$localize`:42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c8325381706328570325:Select Item`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,["title","Show status icon",1,"nui-text-secondary"],["formGroupName","dataFieldIds",1,"entity-formatting__accordion-content"],[1,"mb-3"],t,[1,"d-flex","flex-grow-1"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",i,"formControlName","icon"],[3,"value",4,"ngFor","ngForOf"],o,["placeholder",n,"formControlName","status"],r,["placeholder",s,"formControlName","detailedUrl"],a,["placeholder",l,"formControlName","label"],c,["placeholder",d,"formControlName","url"],[3,"value"]]},template:function(e,t){1&e&&(s.TgZ(0,"nui-widget-editor-accordion",0),s.ALo(1,"async"),s.ALo(2,"nuiWidgetEditorAccordionFormState"),s.TgZ(3,"div",1),s._UZ(4,"nui-icon",2),s.TgZ(5,"div",3),s.TgZ(6,"span",4),s.SDv(7,5),s.qZA(),s.TgZ(8,"div",6),s._uU(9," Show status icon "),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",7),s.TgZ(11,"div",8),s.TgZ(12,"label",4),s.SDv(13,9),s.qZA(),s.TgZ(14,"div",10),s.TgZ(15,"nui-form-field",11),s.TgZ(16,"nui-select-v2",12),s.YNc(17,rr,2,2,"nui-select-v2-option",13),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(18,"div",8),s.TgZ(19,"label",4),s.SDv(20,14),s.qZA(),s.TgZ(21,"div",10),s.TgZ(22,"nui-form-field",11),s.TgZ(23,"nui-select-v2",15),s.YNc(24,sr,2,2,"nui-select-v2-option",13),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(25,"div",8),s.TgZ(26,"label",4),s.SDv(27,16),s.qZA(),s.TgZ(28,"div",10),s.TgZ(29,"nui-form-field",11),s.TgZ(30,"nui-select-v2",17),s.YNc(31,ar,2,2,"nui-select-v2-option",13),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(32,"div",8),s.TgZ(33,"label",4),s.SDv(34,18),s.qZA(),s.TgZ(35,"div",10),s.TgZ(36,"nui-form-field",11),s.TgZ(37,"nui-select-v2",19),s.YNc(38,lr,2,2,"nui-select-v2-option",13),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(39,"div",8),s.TgZ(40,"label",4),s.SDv(41,20),s.qZA(),s.TgZ(42,"div",10),s.TgZ(43,"nui-form-field",11),s.TgZ(44,"nui-select-v2",21),s.YNc(45,cr,2,2,"nui-select-v2-option",13),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.Q6J("formGroup",t.form)("state",s.lcZ(1,13,s.lcZ(2,15,t.form))),s.xp6(4),s.Q6J("icon","tag"),s.xp6(11),s.Q6J("control",t.getFieldMappingsControl.get("icon")),s.xp6(2),s.Q6J("ngForOf",t.mappingKeys),s.xp6(5),s.Q6J("control",t.getFieldMappingsControl.get("status")),s.xp6(2),s.Q6J("ngForOf",t.mappingKeys),s.xp6(5),s.Q6J("control",t.getFieldMappingsControl.get("detailedUrl")),s.xp6(2),s.Q6J("ngForOf",t.mappingKeys),s.xp6(5),s.Q6J("control",t.getFieldMappingsControl.get("label")),s.xp6(2),s.Q6J("ngForOf",t.mappingKeys),s.xp6(5),s.Q6J("control",t.getFieldMappingsControl.get("url")),s.xp6(2),s.Q6J("ngForOf",t.mappingKeys))},directives:[fn.J,d.JL,d.sg,n.oJW,d.x0,n.hgI,n.j_n,d.JJ,d.u,o.sg,n.rLF],pipes:[o.Ov,Sn.F],styles:[".entity-formatting__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),e})();var ur=i(93300),pr=i.n(ur);function hr(e,t){1&e&&(s.TgZ(0,"label",18),s.SDv(1,19),s.qZA())}function gr(e,t){1&e&&(s.TgZ(0,"label",20),s.SDv(1,21),s.qZA())}function mr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",22),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e),s.xp6(1),s.hij(" ",e," ")}}function fr(e,t){if(1&e){const e=s.EpF();s.ynx(0),s.YNc(1,hr,2,0,"label",10),s.YNc(2,gr,2,0,"label",11),s.TgZ(3,"div",12),s.TgZ(4,"nui-form-field",13),s.TgZ(5,"nui-select-v2",14),s.YNc(6,mr,2,2,"nui-select-v2-option",15),s.qZA(),s.qZA(),s.TgZ(7,"div",16),s.TgZ(8,"button",17),s.NdJ("click",function(){const t=s.CHM(e).index;return s.oxw().removeRule(t)}),s.qZA(),s.qZA(),s.qZA(),s.BQk()}if(2&e){const e=t.$implicit,i=t.index,o=s.oxw();s.xp6(1),s.Q6J("ngIf",0!==i),s.xp6(1),s.Q6J("ngIf",0===i),s.xp6(2),s.Q6J("control",e),s.xp6(1),s.Q6J("formControlName",i),s.xp6(1),s.Q6J("ngForOf",o.selectData[i])}}function vr(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",23),s.NdJ("click",function(){return s.CHM(e),s.oxw().addGrouping()}),s.SDv(1,24),s.qZA()}}let yr=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.formBuilder=t,this.eventBus=i,this.formReady=new s.vpe,this.form=this.formBuilder.group({groups:[],groupBy:this.formBuilder.array([]),drillstate:[void 0]}),this.destroy$=new H.xQ}get getGroupByControl(){return this.form.get("groupBy")}get getDrillStateControl(){return this.form.get("drillstate")}get getGroupsControl(){return this.form.get("groups")}ngOnInit(){this.eventBus.getStream(On.gg).pipe((0,U.R)(this.destroy$)).subscribe(e=>this.onDataSourceCreated(e)),this.getGroupByControl.valueChanges.pipe((0,U.R)(this.destroy$)).subscribe(()=>this.fillGroupsOptions()),this.fillGroupsOptions(),this.formReady.emit(this.form)}ngOnChanges(e){e.groups&&this.getGroupsControl.setValue(e.groups.currentValue),e.groupBy&&!e.groupBy.firstChange&&(this.getGroupByControl.clear(),this.groupBy.forEach(e=>this.getGroupByControl.push(this.createControl(e))),this.fillGroupsOptions())}createControl(e){return this.formBuilder.control(e||"",d.kI.required)}addGrouping(){const e=this.createControl();this.getGroupByControl.push(e),this.fillGroupsOptions(),e.setValue(this.selectData[this.getGroupByControl.controls.length-1][0])}removeRule(e){this.getGroupByControl.removeAt(e),this.fillGroupsOptions()}isAddRestricted(){return this.selectData.some(e=>1===e.length)}getSubtitle(){var e;const t=this.getGroupByControl.controls.map((e,t)=>`${0===t?"By":"then"} ${e.value}`).join(", ");return 0===(null===(e=this.getGroupByControl)||void 0===e?void 0:e.value.length)?$localize`No groups`:$localize`${t}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onDataSourceCreated(e){var t,i,o;null===(o=null===(i=null===(t=null==e?void 0:e.payload)||void 0===t?void 0:t.dataFieldsConfig)||void 0===i?void 0:i.dataFields$)||void 0===o||o.pipe((0,U.R)(this.destroy$)).subscribe(e=>{var t;if(e){const i=e.map(e=>e.id);(pr()(this.groups,i).length||!(null===(t=this.groups)||void 0===t?void 0:t.length))&&(this.groups=i,this.getGroupsControl.setValue(i),this.getGroupByControl.clear(),this.getDrillStateControl.setValue([]),this.fillGroupsOptions())}})}fillGroupsOptions(){this.selectData=[];const e=this.getGroupByControl.value;this.getGroupByControl.controls.forEach((t,i)=>{this.selectData[i]=[];const o=pr()(this.groups,e);e[i]&&this.selectData[i].push(e[i]),this.selectData[i]=[...this.selectData[i],...o]})}}return e.lateLoadKey="DrilldownConfiguratorComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(d.qu),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-grouping-configuration"]],inputs:{groups:"groups",groupBy:"groupBy"},outputs:{formReady:"formReady"},features:[s.TTD],decls:13,vars:11,consts:function(){let e,t,i,o,n;return e=$localize`:8658ad3b268c50fe2c1106dfb7bccdaa2e4290b2877780134171662191:Grouping`,t=$localize`:42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c8325381706328570325:Select Item`,i=$localize`:e2feaa48e92bd996631d6a90911db46fe38cd1a34620310062886462675:Then`,o=$localize`:788a575e9f2466abeee0e51ab8f77e9cf19243de3653048554215358825:Group by`,n=$localize`:b8c2733945af01b52afbf8d2c9993bd9abda4c943960498895552401303: Add another level `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],["formArrayName","groupBy",1,"grouping-configuration__accordion-content"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click",4,"ngIf"],["class","d-flex nui-text-secondary mb-1",4,"ngIf"],["class","d-flex nui-text-panel mb-2",4,"ngIf"],[1,"d-flex","flex-row","flex-grow-1","mb-4"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",t,3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"justify-content-center"],["nui-button","","icon","delete","displayStyle","action","type","button",3,"click"],[1,"d-flex","nui-text-secondary","mb-1"],i,[1,"d-flex","nui-text-panel","mb-2"],o,[3,"value"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],n]},template:function(e,t){1&e&&(s.TgZ(0,"nui-widget-editor-accordion",0),s.ALo(1,"async"),s.ALo(2,"nuiWidgetEditorAccordionFormState"),s.TgZ(3,"div",1),s._UZ(4,"nui-icon",2),s.TgZ(5,"div",3),s.TgZ(6,"span",4),s.SDv(7,5),s.qZA(),s.TgZ(8,"div",6),s._uU(9),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",7),s.YNc(11,fr,9,5,"ng-container",8),s.YNc(12,vr,2,0,"button",9),s.qZA(),s.qZA()),2&e&&(s.Q6J("formGroup",t.form)("state",s.lcZ(1,7,s.lcZ(2,9,t.form))),s.xp6(4),s.Q6J("icon","tag"),s.xp6(4),s.Q6J("title",t.getSubtitle()),s.xp6(1),s.hij(" ",t.getSubtitle()," "),s.xp6(2),s.Q6J("ngForOf",t.getGroupByControl.controls),s.xp6(1),s.Q6J("ngIf",!t.isAddRestricted()))},directives:[fn.J,d.JL,d.sg,n.oJW,d.CE,o.sg,o.O5,n.hgI,n.j_n,d.JJ,d.u,n.r0F,n.rLF],pipes:[o.Ov,Sn.F],styles:[".grouping-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();function br(e,t){1&e&&(s.TgZ(0,"div",4),s.TgZ(1,"nui-message",5),s.tHW(2,6),s._UZ(3,"b"),s.N_p(),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("allowDismiss",!1))}let Cr=(()=>{class e{constructor(e,t,i,o){this.pizzagnaService=e,this.changeDetector=t,this.formBuilder=i,this.eventBus=o,this.tiles=[],this.formReady=new s.vpe}ngOnChanges(e){}onFormReady(e){this.form=this.formBuilder.group({tiles:e}),this.emptyItems$=this.form.valueChanges.pipe((0,nt.U)(e=>0===e.tiles.length)),this.formReady.emit(this.form)}onItemsChange(e){const t=e.map(e=>e.id);this.pizzagnaService.createComponentsFromTemplate("tiles",t),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:C.xW.Data,propertyPath:["tiles"]},e)}addTile(){this.onItemsChange([...this.tiles,{id:(0,n.VjN)("kpi"),componentType:$.lateLoadKey}])}}return e.lateLoadKey="KpiTilesConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(F.p),s.Y36(s.sBO),s.Y36(d.qu),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-kpi-tiles-configuration-component"]],inputs:{componentId:"componentId",tiles:"tiles",nodes:"nodes"},outputs:{formReady:"formReady"},features:[s.TTD],decls:5,vars:5,consts:function(){let e,t;return e=$localize`:3542ebba198b6d36d77f3e3d3d773057783457e64207454798725809498:Add new value
`,t=$localize`:7ca16fec6555e99e64e1cbd41a9ce7a4f4cae2fd4636957726236815999:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one value must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","kpi-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],e,[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],t]},template:function(e,t){1&e&&(s.TgZ(0,"nui-items-dynamic",0),s.NdJ("itemsChange",function(e){return t.onItemsChange(e)})("formReady",function(e){return t.onFormReady(e)}),s.qZA(),s.YNc(1,br,4,1,"div",1),s.ALo(2,"async"),s.TgZ(3,"button",2),s.NdJ("click",function(){return t.addTile()}),s.SDv(4,3),s.qZA()),2&e&&(s.Q6J("items",t.tiles)("nodes",t.nodes),s.xp6(1),s.Q6J("ngIf",s.lcZ(2,3,t.emptyItems$)&&t.form.touched))},directives:[tn,o.O5,n.r0F,n.qqZ],pipes:[o.Ov],encapsulation:2,changeDetection:0}),e})();const xr=["metricsSelect"];function wr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",9),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("displayValueContext",e.label)("value",e.id),s.xp6(1),s.hij(" ",e.label," ")}}function Tr(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",1),s.TgZ(1,"div"),s.TgZ(2,"nui-form-field",2),s.TgZ(3,"nui-select-v2",3,4),s.TgZ(5,"nui-overlay-item",5),s.NdJ("click",function(){return s.CHM(e),s.oxw().unsetMetric()}),s._uU(6,"Unset"),s.qZA(),s.YNc(7,wr,2,3,"nui-select-v2-option",6),s.qZA(),s.TgZ(8,"nui-validation-message",7),s.SDv(9,8),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("formGroup",e.form),s.xp6(2),s.Q6J("control",e.form.controls.activeMetricId),s.xp6(5),s.Q6J("ngForOf",e.metrics)}}let Sr=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.formBuilder=t,this.logger=i,this.formReady=new s.vpe,this.form=this.formBuilder.group({activeMetricId:[]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(e){var t;e.activeMetricId&&(null===(t=this.form.get("activeMetricId"))||void 0===t||t.setValue(e.activeMetricId.currentValue),this.metrics.find(t=>t.id===e.activeMetricId.currentValue)||this.logger.warn(`AggregatorMetricSelectorConfigurationComponent: No metric found for id: ${e.activeMetricId.currentValue}`))}unsetMetric(){this.form.controls.activeMetricId.reset(),this.meticsSelect.hideDropdown()}}return e.lateLoadKey="AggregatorMetricSelectorConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(d.qu),s.Y36(n.mQy))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-aggregator-configurator"]],viewQuery:function(e,t){if(1&e&&s.Gf(xr,5),2&e){let e;s.iGM(e=s.CRH())&&(t.meticsSelect=e.first)}},inputs:{metrics:"metrics",activeMetricId:"activeMetricId"},outputs:{formReady:"formReady"},features:[s.TTD],decls:1,vars:1,consts:function(){let e,t,i;return e=$localize`:f43d8212e6ffbc04ea0190118e7f893824ec26868120854355855055890:Default Metric`,t=$localize`:25b479494f612322c149610b9b2e3cd4c782c3134594093405818643397:Select Value`,i=$localize`:b17406f843dc33feb81478ae8273dc1aae06bbf62244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["caption",e,1,"mb-3",3,"control"],["formControlName","activeMetricId","placeholder",t],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,[3,"displayValueContext","value"]]},template:function(e,t){1&e&&s.YNc(0,Tr,10,3,"div",0),2&e&&s.Q6J("ngIf",t.form)},directives:[o.O5,d.JL,d.sg,n.hgI,n.j_n,d.JJ,d.u,n.A4p,o.sg,n.CfE,n.rLF],encapsulation:2,changeDetection:0}),e})();function Ir(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",13),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("displayValueContext",e.label)("value",e.id),s.xp6(1),s.hij(" ",e.label," ")}}function _r(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",13),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("displayValueContext",e.label)("value",e.id),s.xp6(1),s.hij(" ",e.label," ")}}function Ar(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",1),s.TgZ(1,"div",2),s.TgZ(2,"nui-form-field",3),s.TgZ(3,"nui-select-v2",4,5),s.TgZ(5,"nui-overlay-item",6),s.NdJ("click",function(){return s.CHM(e),s.oxw().unsetMetric()}),s._uU(6,"Unset"),s.qZA(),s.YNc(7,Ir,2,3,"nui-select-v2-option",7),s.qZA(),s.TgZ(8,"nui-validation-message",8),s.SDv(9,9),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",2),s.TgZ(11,"nui-form-field",10),s.TgZ(12,"nui-select-v2",11),s.YNc(13,_r,2,3,"nui-select-v2-option",7),s.qZA(),s.TgZ(14,"nui-validation-message",8),s.SDv(15,12),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("formGroup",e.form),s.xp6(2),s.Q6J("control",e.form.controls.activeMetricId),s.xp6(5),s.Q6J("ngForOf",e.metrics),s.xp6(4),s.Q6J("control",e.form.controls.chartSeriesDataFieldId),s.xp6(2),s.Q6J("ngForOf",e.chartSeriesDataFields)}}const zr={id:"data[0]",label:"data",dataType:null};let kr=(()=>{class e extends Sr{constructor(e,t,i,o){super(e,t,i),this.eventBus=o,this.chartSeriesDataFields=[zr],this.form=this.formBuilder.group({activeMetricId:[],chartSeriesDataFieldId:[]}),this.destroy$=new H.xQ,this.eventBus.getStream(On.gg).pipe((0,U.R)(this.destroy$)).subscribe(e=>{var t,i;const o=e.payload;o&&(null===(i=null===(t=o.dataFieldsConfig)||void 0===t?void 0:t.chartSeriesDataFields$)||void 0===i||i.pipe((0,U.R)(this.destroy$)).subscribe(e=>this.chartSeriesDataFields=e))})}ngOnChanges(e){var t;super.ngOnChanges(e),e.chartSeriesDataFieldId&&(null===(t=this.form.get("chartSeriesDataFieldId"))||void 0===t||t.setValue(e.chartSeriesDataFieldId.currentValue))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.lateLoadKey="FieldMapperAggregatorConfiguratorComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(d.qu),s.Y36(n.mQy),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-field-mapper-aggregator-configurator"]],inputs:{chartSeriesDataFieldId:"chartSeriesDataFieldId"},features:[s.qOj,s.TTD],decls:1,vars:1,consts:function(){let e,t,i,o,n,r;return e=$localize`:f43d8212e6ffbc04ea0190118e7f893824ec26868120854355855055890:Default Metric`,t=$localize`:25b479494f612322c149610b9b2e3cd4c782c3134594093405818643397:Select Value`,i=$localize`:b17406f843dc33feb81478ae8273dc1aae06bbf62244196281006156184: This field is required `,o=$localize`:8e67f0d2aff5ba1a2d509b591efa53a4d20763695258061076548910132:Chart Series Data Field`,n=$localize`:25b479494f612322c149610b9b2e3cd4c782c3134594093405818643397:Select Value`,r=$localize`:b17406f843dc33feb81478ae8273dc1aae06bbf62244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"mb-4"],["caption",e,1,"mb-4",3,"control"],["formControlName","activeMetricId","placeholder",t],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,["caption",o,1,"mb-4",3,"control"],["formControlName","chartSeriesDataFieldId","placeholder",n],r,[3,"displayValueContext","value"]]},template:function(e,t){1&e&&s.YNc(0,Ar,16,5,"div",0),2&e&&s.Q6J("ngIf",t.form)},directives:[o.O5,d.JL,d.sg,n.hgI,n.j_n,d.JJ,d.u,n.A4p,o.sg,n.CfE,n.rLF],encapsulation:2,changeDetection:0}),e})();function Zr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",22),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("displayValueContext",e.label)("value",e.id),s.xp6(1),s.hij(" ",e.label," ")}}function Or(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",23),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.id),s.xp6(1),s.hij(" ",e.label," ")}}function Pr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",23),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.componentType),s.xp6(1),s.hij(" ",e.label," ")}}let $r=(()=>{class e{constructor(e,t,i,o){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.formReady=new s.vpe,this.form=this.formBuilder.group({type:[void 0,d.kI.required],legendPlacement:[void 0],legendFormatter:this.formBuilder.group({componentType:[void 0]})}),this.chartTypeChanged$=new H.xQ,this.destroy$=new H.xQ,this.legendFormatters=o.getItems(),this.form.controls.type.valueChanges.pipe((0,U.R)(this.destroy$)).subscribe(e=>this.chartTypeChanged$.next(e))}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(e){var t;e.type&&this.form.controls.type.setValue(e.type.currentValue),e.legendPlacement&&this.form.controls.legendPlacement.setValue(e.legendPlacement.currentValue),e.legendFormatter&&(null===(t=this.form.get("legendFormatter.componentType"))||void 0===t||t.setValue(e.legendFormatter.currentValue.componentType))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.chartTypeChanged$.complete()}get chartTitle(){var e;const t=null===(e=this.form.get("type"))||void 0===e?void 0:e.value,i=this.chartTypes.find(e=>e.id===t);return null==i?void 0:i.label}get legendFormatterControl(){return this.form.get("legendFormatter.componentType")}}return e.lateLoadKey="ProportionalChartOptionsEditorV2Component",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36($n.p),s.Y36(d.qu),s.Y36(pe.qy))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-proportional-chart-options-editor-v2-component"]],inputs:{type:"type",legendPlacement:"legendPlacement",legendFormatter:"legendFormatter",chartTypes:"chartTypes",legendPlacementOptions:"legendPlacementOptions"},outputs:{formReady:"formReady"},features:[s.TTD],decls:35,vars:31,consts:function(){let e,t,i,o,n,r,s,a;return e=$localize`:f3ecd72a8d0f15303a8f7f61c278783962a6d00c4926288099895660391:Chart Options`,t=$localize`:f2102c0b996b067ab2a46c7743fe5931fa47f16d7337152278540773645:Chart Type`,i=$localize`:35a0bc25979ae578aea9594e8c587200628713e15551943712413491013:Select chart type`,o=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,n=$localize`:5c5419db944ed6a96f9515a2ac0ee390ec8cf3b57297822327994766046:Legend`,r=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,s=$localize`:7f0b920b08ab06e490eff4f718ef3fecc87a719b5989769742900149410:Legend format`,a=$localize`:c9a9da14b0f8c677efa737185f1232f8537bd2a63224868488156254475: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","type",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],o,["caption",n,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],r,["formGroupName","legendFormatter"],["caption",s,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],a,[3,"displayValueContext","value"],[3,"value"]]},template:function(e,t){1&e&&(s.TgZ(0,"nui-widget-editor-accordion",0),s.ALo(1,"async"),s.ALo(2,"nuiWidgetEditorAccordionFormState"),s.TgZ(3,"div",1),s._UZ(4,"nui-icon",2),s.ALo(5,"async"),s.ALo(6,"nuiFormHeaderIconPipe"),s.TgZ(7,"div",3),s.TgZ(8,"span",4),s.SDv(9,5),s.qZA(),s.TgZ(10,"div",6),s._uU(11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"div",7),s.TgZ(13,"div",8),s.TgZ(14,"nui-form-field",9),s.TgZ(15,"nui-select-v2",10),s.ALo(16,"async"),s.YNc(17,Zr,2,3,"nui-select-v2-option",11),s.qZA(),s.TgZ(18,"nui-validation-message",12),s.SDv(19,13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(20,"div",8),s.TgZ(21,"nui-form-field",14),s.TgZ(22,"nui-select-v2",15),s.ALo(23,"async"),s.YNc(24,Or,2,2,"nui-select-v2-option",16),s.qZA(),s.TgZ(25,"nui-validation-message",12),s.SDv(26,17),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"div",8),s.ynx(28,18),s.TgZ(29,"nui-form-field",19),s.TgZ(30,"nui-select-v2",20),s.ALo(31,"async"),s.YNc(32,Pr,2,2,"nui-select-v2-option",16),s.qZA(),s.TgZ(33,"nui-validation-message",12),s.SDv(34,21),s.qZA(),s.qZA(),s.BQk(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.Q6J("formGroup",t.form)("state",s.lcZ(1,16,s.lcZ(2,18,t.form))),s.xp6(4),s.Q6J("icon",s.lcZ(5,20,s.xi3(6,22,t.form,"widget_pie-chart"))),s.xp6(6),s.Q6J("title",t.chartTitle),s.xp6(1),s.hij(" ",t.chartTitle," "),s.xp6(3),s.Q6J("control",t.form.controls.type),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(16,25,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.chartTypes),s.xp6(4),s.Q6J("showOptionalText",!1)("control",t.form.controls.legendPlacement),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(23,27,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.legendPlacementOptions),s.xp6(5),s.Q6J("showOptionalText",!1)("control",t.legendFormatterControl),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(31,29,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.legendFormatters))},directives:[fn.J,d.JL,d.sg,n.oJW,n.hgI,n.j_n,d.JJ,d.u,o.sg,n.CfE,d.x0,n.rLF],pipes:[o.Ov,Sn.F,In.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();function Fr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",22),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.value),s.xp6(1),s.hij(" ",e.label," ")}}function Dr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",22),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.componentType),s.xp6(1),s.hij(" ",e.label," ")}}function Mr(e,t){}const Rr=function(){return["formReady"]};function Jr(e,t){if(1&e){const e=s.EpF();s.ynx(0,27,28),s.NdJ("output",function(t){return s.CHM(e),s.oxw(2).onFormReady(t.payload)}),s.YNc(2,Mr,0,0,"ng-template",29),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(1).attached(t)}),s.BQk()}if(2&e){const e=s.MAs(1),t=s.oxw(2);s.Q6J("componentId",t.getConfigurationComponent())("componentType",t.getConfigurationComponent())("properties",t.configurationComponentProperties)("outputs",s.DdM(5,Rr)),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}function Lr(e,t){if(1&e&&(s.ynx(0,23),s.TgZ(1,"nui-form-field",24),s.TgZ(2,"nui-select-v2",20),s.ALo(3,"async"),s.YNc(4,Dr,2,2,"nui-select-v2-option",11),s.qZA(),s.TgZ(5,"nui-validation-message",12),s.SDv(6,25),s.qZA(),s.qZA(),s.YNc(7,Jr,3,6,"ng-container",26),s.BQk()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("showOptionalText",!1)("control",e.form.controls.componentType),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(3,5,e.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",e.contentFormatters),s.xp6(3),s.Q6J("ngIf",!!e.getConfigurationComponent())}}function Er(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",22),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.id),s.xp6(1),s.hij(" ",e.label," ")}}function qr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",22),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.componentType),s.xp6(1),s.hij(" ",e.label," ")}}const Br={[Ie.DonutChart]:$localize`Donut`,[Ie.PieChart]:$localize`Pie`,[Ie.VerticalBarChart]:$localize`Vertical Bar`,[Ie.HorizontalBarChart]:$localize`Horizontal Bar`};let Nr=(()=>{class e{constructor(e,t,i){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.legendPlacement=g.w.None,this.formReady=new s.vpe,this.chartTypeNamesMap=Br,this.legendFormatters=[],this.contentFormatters=[],this.formatterHasConfigurationComponent=!1,this.currentConfigurationComponent="",this.chartFormatters=[],this.cachedChartOptionsViewModels=[],this.rawFormatter={componentType:"",label:$localize`Raw`,dataTypes:{value:null}}}get chartTypeSelectViewModels(){var e,t,i;return(!this.cachedChartOptionsViewModels||this.cachedChartOptionsViewModels.length!==(null===(t=null===(e=this.chartOptions)||void 0===e?void 0:e.chartTypes)||void 0===t?void 0:t.length))&&(this.cachedChartOptionsViewModels=((null===(i=this.chartOptions)||void 0===i?void 0:i.chartTypes)||[]).map(e=>({label:this.chartTypeNamesMap[e],value:e}))),this.cachedChartOptionsViewModels}get chartTitle(){return this.chartTypeNamesMap[this.form.controls.type.value]}getConfigurationComponent(){var e;return(null===(e=this.getCurrentFormatterDefinition())||void 0===e?void 0:e.configurationComponent)||""}getConfigurationComponentProperties(){this.configurationComponentProperties={contentFormatterProperties:this.contentFormatterProperties,contentFormatterDefinition:this.getCurrentFormatterDefinition(),dsOutput:this.dsOutput}}getCurrentFormatterDefinition(){var e;const t=null===(e=this.form.get("contentFormatter.componentType"))||void 0===e?void 0:e.value;return this.contentFormatters.find(e=>e.componentType===t)}ngOnInit(){this.form=this.formBuilder.group({type:[this.chartType||"",d.kI.required],legendPlacement:this.legendPlacement,legendFormatter:this.formBuilder.group({componentType:this.legendFormatterComponentType||this.rawFormatter.componentType}),contentFormatter:this.formBuilder.group({componentType:this.contentFormatterComponentType})}),this.legendFormatters=[this.rawFormatter,...this.chartOptions.legendFormatters||[]],this.contentFormatters=[...this.chartOptions.contentFormatters||[]],this.formReady.emit(this.form)}ngOnChanges(e){var t,i,o,n;e.chartType&&!e.chartType.isFirstChange()&&(null===(t=this.form.get("type"))||void 0===t||t.setValue(e.chartType.currentValue)),e.legendPlacement&&!e.legendPlacement.isFirstChange()&&(null===(i=this.form.get("legendPlacement"))||void 0===i||i.setValue(e.legendPlacement.currentValue)),e.legendFormatterComponentType&&!e.legendFormatterComponentType.isFirstChange()&&(null===(o=this.form.get("legendFormatter").get("componentType"))||void 0===o||o.setValue(this.legendFormatterComponentType)),e.contentFormatterComponentType&&!e.contentFormatterComponentType.isFirstChange()&&(null===(n=this.form.get("contentFormatter").get("componentType"))||void 0===n||n.setValue(this.contentFormatterComponentType)),this.form&&this.getConfigurationComponentProperties()}onFormReady(e){this.form.get("contentFormatter").setControl("properties",e)}}return e.lateLoadKey="ProportionalChartOptionsEditorComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36($n.p),s.Y36(d.qu))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-proportional-chart-options-editor-component"]],inputs:{chartOptions:"chartOptions",chartType:"chartType",legendPlacement:"legendPlacement",legendFormatterComponentType:"legendFormatterComponentType",contentFormatterComponentType:"contentFormatterComponentType",contentFormatterProperties:"contentFormatterProperties",dsOutput:"dsOutput"},outputs:{formReady:"formReady"},features:[s.TTD],decls:36,vars:32,consts:function(){let e,t,i,o,n,r,s,a,l,c;return e=$localize`:f3ecd72a8d0f15303a8f7f61c278783962a6d00c4926288099895660391:Chart Options`,t=$localize`:f2102c0b996b067ab2a46c7743fe5931fa47f16d7337152278540773645:Chart Type`,i=$localize`:35a0bc25979ae578aea9594e8c587200628713e15551943712413491013:Select chart type`,o=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,n=$localize`:5c5419db944ed6a96f9515a2ac0ee390ec8cf3b57297822327994766046:Legend`,r=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,s=$localize`:7f0b920b08ab06e490eff4f718ef3fecc87a719b5989769742900149410:Legend format`,a=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,l=$localize`:7aad3a4ab45c0132aefc2da9c78cde45d35938504108378864701615700:Content format`,c=$localize`:c9a9da14b0f8c677efa737185f1232f8537bd2a63224868488156254475: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["formControlName","type","placeholder",i,3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],o,["formGroupName","contentFormatter",4,"ngIf"],["caption",n,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],r,["formGroupName","legendFormatter"],["caption",s,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],a,[3,"value"],["formGroupName","contentFormatter"],["caption",l,1,"mb-4",3,"showOptionalText","control"],c,["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output",4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(e,t){if(1&e&&(s.TgZ(0,"nui-widget-editor-accordion",0),s.ALo(1,"async"),s.ALo(2,"nuiWidgetEditorAccordionFormState"),s.TgZ(3,"div",1),s._UZ(4,"nui-icon",2),s.ALo(5,"async"),s.ALo(6,"nuiFormHeaderIconPipe"),s.TgZ(7,"div",3),s.TgZ(8,"span",4),s.SDv(9,5),s.qZA(),s.TgZ(10,"div",6),s._uU(11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"div",7),s.TgZ(13,"div",8),s.TgZ(14,"nui-form-field",9),s.TgZ(15,"nui-select-v2",10),s.ALo(16,"async"),s.YNc(17,Fr,2,2,"nui-select-v2-option",11),s.qZA(),s.TgZ(18,"nui-validation-message",12),s.SDv(19,13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(20,"div",8),s.YNc(21,Lr,8,7,"ng-container",14),s.qZA(),s.TgZ(22,"div",8),s.TgZ(23,"nui-form-field",15),s.TgZ(24,"nui-select-v2",16),s.ALo(25,"async"),s.YNc(26,Er,2,2,"nui-select-v2-option",11),s.qZA(),s.TgZ(27,"nui-validation-message",12),s.SDv(28,17),s.qZA(),s.qZA(),s.qZA(),s.ynx(29,18),s.TgZ(30,"nui-form-field",19),s.TgZ(31,"nui-select-v2",20),s.ALo(32,"async"),s.YNc(33,qr,2,2,"nui-select-v2-option",11),s.qZA(),s.TgZ(34,"nui-validation-message",12),s.SDv(35,21),s.qZA(),s.qZA(),s.BQk(),s.qZA(),s.qZA()),2&e){let e;s.Q6J("formGroup",t.form)("state",s.lcZ(1,17,s.lcZ(2,19,t.form))),s.xp6(4),s.Q6J("icon",s.lcZ(5,21,s.xi3(6,23,t.form,"widget_pie-chart"))),s.xp6(6),s.Q6J("title",t.chartTitle),s.xp6(1),s.hij(" ",t.chartTitle," "),s.xp6(3),s.Q6J("control",t.form.controls.type),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(16,26,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.chartTypeSelectViewModels),s.xp6(4),s.Q6J("ngIf","DonutChart"===(null==(e=t.form.get("type"))?null:e.value)),s.xp6(2),s.Q6J("showOptionalText",!1)("control",t.form.controls.legendPlacement),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(25,28,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.chartOptions.legendPlacementOptions),s.xp6(4),s.Q6J("showOptionalText",!1)("control",t.form.controls.componentType),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(32,30,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.legendFormatters)}},directives:[fn.J,d.JL,d.sg,n.oJW,n.hgI,n.j_n,d.JJ,d.u,o.sg,n.CfE,o.O5,d.x0,n.rLF,T.$,S.Pl],pipes:[o.Ov,Sn.F,In.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();function Qr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",18),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("displayValueContext",e.label)("value",e.aggregatorType),s.xp6(1),s.hij(" ",e.label," ")}}function Yr(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",18),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("displayValueContext",e.label)("value",e.componentType),s.xp6(1),s.hij(" ",e.label," ")}}function Vr(e,t){}const Wr=function(){return["formReady"]};function jr(e,t){if(1&e){const e=s.EpF();s.ynx(0,19,20),s.NdJ("output",function(t){return s.CHM(e),s.oxw(2).onFormReady("aggregator",t.payload)}),s.YNc(2,Vr,0,0,"ng-template",21),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(1).attached(t)}),s.BQk()}if(2&e){const e=s.MAs(1),t=s.oxw(2);s.Q6J("componentType",null==t.currentAggregatorDefinition?null:t.currentAggregatorDefinition.configurationComponent)("properties",t.aggregatorConfiguratorProps)("outputs",s.DdM(4,Wr)),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}function Hr(e,t){}function Ur(e,t){if(1&e){const e=s.EpF();s.ynx(0,19,20),s.NdJ("output",function(t){return s.CHM(e),s.oxw(2).onFormReady("formatter",t.payload)}),s.YNc(2,Hr,0,0,"ng-template",21),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(1).attached(t)}),s.BQk()}if(2&e){const e=s.MAs(1),t=s.oxw(2);s.Q6J("componentType",null==t.currentFormatterDefinition?null:t.currentFormatterDefinition.configurationComponent)("properties",t.formatterConfiguratorProps)("outputs",s.DdM(4,Wr)),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}function Gr(e,t){if(1&e&&(s.ynx(0,1),s.TgZ(1,"nui-widget-editor-accordion",2),s.ALo(2,"async"),s.ALo(3,"nuiWidgetEditorAccordionFormState"),s.TgZ(4,"div",3),s._UZ(5,"nui-icon",4),s.ALo(6,"async"),s.ALo(7,"nuiFormHeaderIconPipe"),s.TgZ(8,"div",5),s.TgZ(9,"span",6),s.SDv(10,7),s.qZA(),s.TgZ(11,"div",8),s._uU(12),s.qZA(),s.qZA(),s.qZA(),s.TgZ(13,"div",9),s.TgZ(14,"div",10),s.TgZ(15,"nui-form-field",11),s.TgZ(16,"nui-select-v2",12),s.YNc(17,Qr,2,3,"nui-select-v2-option",13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(18,"div",14),s.TgZ(19,"nui-form-field",15),s.TgZ(20,"nui-select-v2",16),s.YNc(21,Yr,2,3,"nui-select-v2-option",13),s.qZA(),s.qZA(),s.qZA(),s.YNc(22,jr,3,5,"ng-container",17),s.YNc(23,Ur,3,5,"ng-container",17),s.qZA(),s.qZA(),s.BQk()),2&e){const e=s.oxw();s.Q6J("formGroup",e.form),s.xp6(1),s.Q6J("state",s.lcZ(2,11,s.lcZ(3,13,e.form))),s.xp6(4),s.Q6J("icon",s.lcZ(6,15,s.xi3(7,17,e.form,"customize"))),s.xp6(6),s.Q6J("title",e.subtitleText),s.xp6(1),s.hij(" ",e.subtitleText," "),s.xp6(3),s.Q6J("control",e.form.get("aggregator.aggregatorType")),s.xp6(2),s.Q6J("ngForOf",e.aggregators),s.xp6(2),s.Q6J("control",e.form.get("formatter.componentType")),s.xp6(2),s.Q6J("ngForOf",e.formatters),s.xp6(1),s.Q6J("ngIf",null==e.currentAggregatorDefinition?null:e.currentAggregatorDefinition.configurationComponent),s.xp6(1),s.Q6J("ngIf",null==e.currentFormatterDefinition?null:e.currentFormatterDefinition.configurationComponent)}}let Kr=(()=>{class e{constructor(e,t,i,o,n){this.formBuilder=e,this.changeDetector=t,this.eventBus=i,this.contentFormattersRegistry=o,this.aggregatorRegistry=n,this.formReady=new s.vpe,this.shown=!0,this.form=this.formBuilder.group({formatter:this.formBuilder.group({componentType:[void 0],properties:[]}),aggregator:this.formBuilder.group({aggregatorType:[void 0],properties:[]})}),this.dataFields=[],this.destroy$=new H.xQ}ngOnInit(){this.watchFormChanges(),this.setFromRegistry(),this.eventBus.getStream(On.gg).pipe((0,U.R)(this.destroy$)).subscribe(e=>{var t;const i=e.payload;i&&(null===(t=i.dataFieldsConfig)||void 0===t||t.dataFields$.pipe((0,U.R)(this.destroy$)).subscribe(e=>{this.dataFields=e,this.updateAggregatorConfiguratorProps()}))}),this.formReady.emit(this.form)}ngOnChanges(e){var t,i;e.formatter&&(null===(t=this.form.get("formatter"))||void 0===t||t.patchValue(Object.assign({},e.formatter.currentValue))),e.aggregator&&(null===(i=this.form.get("aggregator"))||void 0===i||i.patchValue(Object.assign({},e.aggregator.currentValue))),e.chartType&&(this.shown=e.chartType.currentValue===Ie.DonutChart)}ngOnDestroy(){this.destroy$.complete()}onFormReady(e,t){this.form.get(e).setControl("properties",t)}get subtitleText(){var e,t;return`${null===(e=this.currentAggregatorDefinition)||void 0===e?void 0:e.label}, ${null===(t=this.currentFormatterDefinition)||void 0===t?void 0:t.label}`}setFromRegistry(){var e,t;this.formatters=this.contentFormattersRegistry.getItems(),this.aggregators=this.aggregatorRegistry.getItems();let i=this.formatters.find(e=>{var t;return e.componentType===(null===(t=this.formatter)||void 0===t?void 0:t.componentType)});i||(i=this.formatters[0]),null===(e=this.form.get("formatter.componentType"))||void 0===e||e.setValue(i.componentType);let o=this.aggregators.find(e=>{var t;return e.aggregatorType===(null===(t=this.aggregator)||void 0===t?void 0:t.aggregatorType)});o||(o=this.aggregators[0]),null===(t=this.form.get("aggregator.aggregatorType"))||void 0===t||t.setValue(o.aggregatorType)}watchFormChanges(){var e,t;null===(e=this.form.get("aggregator.aggregatorType"))||void 0===e||e.valueChanges.pipe((0,U.R)(this.destroy$)).subscribe(e=>{this.currentAggregatorDefinition=this.aggregators.find(t=>t.aggregatorType===e),this.updateAggregatorConfiguratorProps()}),null===(t=this.form.get("formatter.componentType"))||void 0===t||t.valueChanges.pipe((0,U.R)(this.destroy$)).subscribe(e=>{this.currentFormatterDefinition=this.formatters.find(t=>t.componentType===e),this.updateAggregatorConfiguratorProps()})}updateAggregatorConfiguratorProps(){var e,t;this.aggregatorConfiguratorProps=Object.assign(Object.assign(Object.assign({},null===(e=this.currentAggregatorDefinition)||void 0===e?void 0:e.properties),null===(t=this.aggregator)||void 0===t?void 0:t.properties),{metrics:this.dataFields})}}return e.lateLoadKey="DonutContentConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(d.qu),s.Y36(s.sBO),s.Y36(C.nY),s.Y36(pe.UA),s.Y36(me))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-donut-content-configuration"]],inputs:{chartType:"chartType",formatter:"formatter",aggregator:"aggregator"},outputs:{formReady:"formReady"},features:[s.TTD],decls:1,vars:1,consts:function(){let e,t,i,o,n;return e=$localize`:c488fe848f6a00cefad87ff595b384e4e0f7ff1d2010665105219070274:Donut Content Configuration`,t=$localize`:87181c5142c58c027d97ac0f37b9c6bb78b624cd6056551297792932760:Aggregate`,i=$localize`:408b4f352f2fec5727e6df77cb926194384bbba0736196504450716827:Select Format`,o=$localize`:7722a92a1fc887570b4f4d8a7bb916f067f320287513076467032912668:Format`,n=$localize`:408b4f352f2fec5727e6df77cb926194384bbba0736196504450716827:Select Format`,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"donut-content-configuration__accordion-content"],["formGroupName","aggregator",1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","aggregatorType"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["formGroupName","formatter",1,"mb-4"],["caption",o,3,"control"],["placeholder",n,"formControlName","componentType"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(e,t){1&e&&s.YNc(0,Gr,24,20,"ng-container",0),2&e&&s.Q6J("ngIf",t.shown)},directives:[o.O5,d.JL,d.sg,fn.J,n.oJW,d.x0,n.hgI,n.j_n,d.JJ,d.u,o.sg,n.rLF,T.$,S.Pl],pipes:[o.Ov,Sn.F,In.d],styles:[".donut-content-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();var Xr=i(24141);function es(e,t){if(1&e){const e=s.EpF();s.ynx(0),s.TgZ(1,"div",19),s.TgZ(2,"nui-form-field",20),s.TgZ(3,"nui-textbox-number",21),s.NdJ("valueChange",function(){return s.CHM(e),s.oxw(2).stub()}),s.qZA(),s.TgZ(4,"nui-validation-message",22),s.SDv(5,23),s.qZA(),s.qZA(),s.qZA(),s.BQk()}if(2&e){const e=s.oxw(2);s.xp6(2),s.Q6J("control",e.form.controls.width),s.xp6(2),s.Q6J("show",e.form.controls.width.invalid)}}function ts(e,t){1&e&&(s.TgZ(0,"div",19),s.TgZ(1,"nui-message",24),s.tHW(2,25),s._UZ(3,"b"),s.N_p(),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("allowDismiss",!1))}function is(e,t){if(1&e&&(s.ynx(0),s.YNc(1,es,6,2,"ng-container",17),s.YNc(2,ts,4,1,"div",18),s.BQk()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",!e.isWidthMessageDisplayedForThisColumn()),s.xp6(1),s.Q6J("ngIf",e.isWidthMessageDisplayedForThisColumn())}}let os=(()=>{class e{constructor(e,t){this.formBuilder=e,this.changeDetector=t,this.isWidthMessageDisplayed=!1,this.destroy$=new H.xQ,this.form=this.formBuilder.group({label:["",[d.kI.required]],isActive:!0,width:void 0}),this.form.valueChanges.pipe((0,U.R)(this.destroy$)).subscribe(e=>{var t;null===(t=this.changeFn)||void 0===t||t.call(this,e)})}registerOnChange(e){this.changeFn=e}registerOnTouched(e){}setDisabledState(e){e?this.form.disable():this.form.enable()}validate(e){return this.form.valid?null:{nestedForm:!0}}writeValue(e){this.form.patchValue({label:e.label,isActive:e.isActive,width:e.width},{emitEvent:!1}),this.changeDetector.markForCheck()}ngOnInit(){(0,Xr.t)(this.formControl,()=>{this.form.markAllAsTouched()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}stub(){}isWidthMessageDisplayedForThisColumn(){return this.isWidthMessageDisplayed&&"number"!=typeof this.form.controls.width.value}}return e.lateLoadKey="DescriptionConfigurationV2Component",e.\u0275fac=function(t){return new(t||e)(s.Y36(d.qu),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-description-configuration-v2"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[s._Bn([{provide:d.JU,useExisting:(0,s.Gpc)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,s.Gpc)(()=>e),multi:!0}])],decls:23,vars:17,consts:function(){let e,t,i,o,n,r,s,a;return e=$localize`:eec715de352a6b114713b30b640d319fa78207a04902817035128594900:Description`,t=$localize`:863226cffd5b66a6fee9810a9282a5006d6ef5764077520913910941990:Label`,i=$localize`:c9a9da14b0f8c677efa737185f1232f8537bd2a63224868488156254475: This field is required `,o=$localize`:49e97f1ac4309fd5992a9520d74fa732c4a774815413084173448405143:Show this column`,n=$localize`:6b3f02f1feab94e0f0a6823f49a009fa7be7dfa98419094197651631948:Column width (px)`,r=$localize`:455a91268699c6879146b5fe44595de6628e6d324319439665214681027:Auto width`,s=$localize`:356aa3e61db78cca0742edfab898c6bf0c8051a63835988025416576743: Minimum width of the column is 62px `,a=$localize`:8e3d3c0a38f0221dc5901334290180f5705a0fbf2546138047162560558:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:All columns cannot have fixed width.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"mb-3",3,"control"],["formControlName","label"],["for","required"],i,[3,"control"],["formControlName","isActive"],o,[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",n,1,"mb-3",3,"control"],["placeholder",r,"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],s,["type","info",3,"allowDismiss"],a]},template:function(e,t){if(1&e&&(s.ynx(0,0),s.TgZ(1,"nui-widget-editor-accordion",1),s.ALo(2,"async"),s.ALo(3,"nuiWidgetEditorAccordionFormState"),s.TgZ(4,"div",2),s._UZ(5,"nui-icon",3),s.ALo(6,"async"),s.ALo(7,"nuiFormHeaderIconPipe"),s.TgZ(8,"div",4),s.TgZ(9,"span",5),s.SDv(10,6),s.qZA(),s.TgZ(11,"div",7),s._uU(12),s.qZA(),s.qZA(),s.qZA(),s.TgZ(13,"div",8),s.TgZ(14,"div",9),s.TgZ(15,"nui-form-field",10),s._UZ(16,"nui-textbox",11),s.TgZ(17,"nui-validation-message",12),s.SDv(18,13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(19,"nui-form-field",14),s.TgZ(20,"nui-checkbox",15),s.SDv(21,16),s.qZA(),s.qZA(),s.YNc(22,is,3,2,"ng-container",17),s.qZA(),s.qZA(),s.BQk()),2&e){let e;s.Q6J("formGroup",t.form),s.xp6(1),s.Q6J("state",s.lcZ(2,8,s.lcZ(3,10,t.form))),s.xp6(4),s.Q6J("icon",s.lcZ(6,12,s.xi3(7,14,t.form,"widget_list"))),s.xp6(6),s.Q6J("title",t.form.controls.label.value),s.xp6(1),s.hij(" ",t.form.controls.label.value," "),s.xp6(3),s.Q6J("control",t.form.controls.label),s.xp6(4),s.Q6J("control",t.form.controls.isActive),s.xp6(3),s.Q6J("ngIf",null==(e=t.form.get("isActive"))?null:e.value)}},directives:[d.JL,d.sg,fn.J,n.oJW,n.hgI,n.XHW,d.JJ,d.u,n.CfE,n.bK4,o.O5,n.I5I,n.qqZ],pipes:[o.Ov,Sn.F,In.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();var ns=i(29569),rs=i.n(ns),ss=i(17857);function as(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",14),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("displayValueContext",e.label)("value",e.componentType),s.xp6(1),s.hij(" ",e.label," ")}}function ls(e,t){}const cs=function(){return["formReady"]};function ds(e,t){if(1&e){const e=s.EpF();s.ynx(0,15,16),s.NdJ("output",function(t){return s.CHM(e),s.oxw().onFormReady(t.payload)}),s.YNc(2,ls,0,0,"ng-template",17),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(1).attached(t)}),s.BQk()}if(2&e){const e=s.MAs(1),t=s.oxw();s.Q6J("componentType",t.formatterConfigurator)("properties",t.formatterConfiguratorProps)("outputs",s.DdM(4,cs)),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}let us=(()=>{class e{constructor(e,t,i,o,n,r){var s,a,l;this.formBuilder=e,this.changeDetector=t,this.configuratorHeading=i,this.eventBus=o,this.formattersRegistryCommon=n,this.tableFormattersRegistryService=r,this._dataFields=[],this.onDestroy$=new H.xQ,this.providedFormatters=[],this._formatters=[],this.propertiesFormReady=new H.xQ,this.subscribeToFormattersRegistry(),this.form=this.formBuilder.group({componentType:this.formBuilder.control(null===(a=null===(s=this.providedFormatters)||void 0===s?void 0:s[0])||void 0===a?void 0:a.componentType,d.kI.required),properties:this.formBuilder.control({},()=>{var e;return(null===(e=this.propertiesForm)||void 0===e?void 0:e.invalid)?{properties:!0}:null})}),null===(l=this.form.get("componentType"))||void 0===l||l.valueChanges.pipe((0,U.R)(this.onDestroy$)).subscribe(()=>this.createFormatterConfigurator()),this.form.valueChanges.pipe((0,U.R)(this.onDestroy$)).subscribe(()=>{this.updateSubtitle(),this.onValueChange(),this.changeDetector.detectChanges()}),this.eventBus.subscribeUntil(On.PF,this.onDestroy$,e=>{const{dataFields:t}=rs()(e.payload.result)?e.payload:e.payload.result||{};this.dataFields=t})}set formatters(e){!this.tableFormattersRegistryService.isEmpty||this.handleFormattersUpdate(e)}get formatters(){return this._formatters}set dataFields(e){this._dataFields=e,this.updateAvailableFormatters()}get dataFields(){return this._dataFields}get formatter(){var e;return null===(e=this.form)||void 0===e?void 0:e.value}ngOnInit(){(0,Xr.t)(this.formControl,()=>{this.form.markAllAsTouched(),this.propertiesForm.markAllAsTouched()})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}ngOnChanges(e){}registerOnChange(e){this.changeFn=e}registerOnTouched(e){this.touchFn=e}setDisabledState(e){}writeValue(e){this.input=e,this.form.patchValue(e,{emitEvent:!1}),this.createFormatterConfigurator(),this.changeDetector.markForCheck()}validate(e){return!this.form.valid||this.propertiesForm&&!this.propertiesForm.valid?{error:"error"}:null}getSelectedFormatterDefinition(){var e,t;if(this.providedFormatters.length>0){const i=null===(e=this.form.get("componentType"))||void 0===e?void 0:e.value;return null!==(t=this.providedFormatters.find(e=>e.componentType===i))&&void 0!==t?t:null}return null}getSelectedDataField(){var e,t;const i=this.form.controls.properties;if(i&&this.dataFields&&this.dataFields.length>0){const o=null===(e=i.value.dataFieldIds)||void 0===e?void 0:e.value;return null!==(t=this.dataFields.find(e=>e.id===o))&&void 0!==t?t:null}return null}ngDoCheck(){if(!this.form||!this.propertiesForm)return;const e=this.form.controls.properties;this.propertiesForm.touched&&e.untouched&&(e.markAsTouched(),this.changeDetector.markForCheck()),this.propertiesForm.untouched&&e.touched&&(e.markAsUntouched(),this.changeDetector.markForCheck())}onFormReady(e){this.propertiesFormReady.next(),this.propertiesForm=e;const t=this.form.controls.properties;t.markAsPristine(),this.propertiesForm.valueChanges.pipe((0,U.R)(this.propertiesFormReady)).subscribe(()=>{t.setValue(this.propertiesForm.value),this.onValueChange()}),this.propertiesForm.patchValue(this.formatter.properties)}onValueChange(){var e;null===(e=this.changeFn)||void 0===e||e.call(this,this.form.value)}updateSubtitle(){var e,t;this.subtitleText=`${null===(e=this.getSelectedFormatterDefinition())||void 0===e?void 0:e.label}`,this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(`, ${null===(t=this.getSelectedDataField())||void 0===t?void 0:t.label}`))}createFormatterConfigurator(){var e,t,i,o;const n=this.providedFormatters.find(e=>{var t;return e.componentType===(null===(t=this.form.get("componentType"))||void 0===t?void 0:t.value)});this.formatterConfigurator=n?null!==(e=n.configurationComponent)&&void 0!==e?e:"ValueSelectorComponent":null,(null==n?void 0:n.componentType)!==(null===(t=this.formatter)||void 0===t?void 0:t.componentType)&&(null===(o=null===(i=this.formatter)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.dataFieldIds)&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:n}}updateAvailableFormatters(){var e;if(!(null===(e=this._dataFields)||void 0===e?void 0:e.length)||!this.providedFormatters.length)return;const t={null:!0};this._dataFields.forEach(e=>t[e.dataType]=!0),this._formatters=this.providedFormatters.filter(e=>(e.dataTypes.value instanceof Array?e.dataTypes.value:[e.dataTypes.value]).some(e=>t[e])),this.form&&this.createFormatterConfigurator()}subscribeToFormattersRegistry(){this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,U.R)(this.onDestroy$)).subscribe(e=>{this.handleFormattersUpdate(e)})}handleFormattersUpdate(e){e!==this.providedFormatters&&(this.providedFormatters=(null==e?void 0:e.length)>0?e:ss.X,this.updateAvailableFormatters())}get formattersRegistry(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}}return e.lateLoadKey="PresentationConfigurationV2Component",e.\u0275fac=function(t){return new(t||e)(s.Y36(d.qu),s.Y36(s.sBO),s.Y36($n.p),s.Y36(C.nY),s.Y36(C.m4,8),s.Y36(pe.C))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-presentation-configuration-v2"]],inputs:{formatters:"formatters",dataFieldIds:"dataFieldIds",formControl:"formControl"},features:[s._Bn([{provide:d.JU,useExisting:(0,s.Gpc)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,s.Gpc)(()=>e),multi:!0}],[{provide:d.gN,useExisting:d.sg}]),s.TTD],decls:20,vars:20,consts:function(){let e,t,i;return e=$localize`:3c991a92a6b04b4f5a42f0b72befa96a8d2e809c5065098939944125110:Property and formatting`,t=$localize`:7722a92a1fc887570b4f4d8a7bb916f067f320287513076467032912668:Format`,i=$localize`:408b4f352f2fec5727e6df77cb926194384bbba0736196504450716827:Select Format`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(e,t){1&e&&(s.ynx(0,0),s.TgZ(1,"nui-widget-editor-accordion",1),s.ALo(2,"async"),s.ALo(3,"nuiWidgetEditorAccordionFormState"),s.TgZ(4,"div",2),s._UZ(5,"nui-icon",3),s.ALo(6,"async"),s.ALo(7,"nuiFormHeaderIconPipe"),s.TgZ(8,"div",4),s.TgZ(9,"span",5),s.SDv(10,6),s.qZA(),s.TgZ(11,"div",7),s._uU(12),s.qZA(),s.qZA(),s.qZA(),s.TgZ(13,"div",8),s.TgZ(14,"div",9),s.TgZ(15,"nui-form-field",10),s.TgZ(16,"nui-select-v2",11),s.ALo(17,"async"),s.YNc(18,as,2,3,"nui-select-v2-option",12),s.qZA(),s.qZA(),s.qZA(),s.YNc(19,ds,3,5,"ng-container",13),s.qZA(),s.qZA(),s.BQk()),2&e&&(s.Q6J("formGroup",t.form),s.xp6(1),s.Q6J("state",s.lcZ(2,9,s.lcZ(3,11,t.form))),s.xp6(4),s.Q6J("icon",s.lcZ(6,13,s.xi3(7,15,t.form,"customize"))),s.xp6(6),s.Q6J("title",t.subtitleText),s.xp6(1),s.hij(" ",t.subtitleText," "),s.xp6(3),s.Q6J("control",t.form.controls.componentType),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(17,18,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.formatters),s.xp6(1),s.Q6J("ngIf",t.formatterConfigurator))},directives:[d.JL,d.sg,fn.J,n.oJW,n.hgI,n.j_n,d.JJ,d.u,o.sg,o.O5,n.rLF,T.$,S.Pl],pipes:[o.Ov,Sn.F,In.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();var ps=i(50191),hs=i(29014);function gs(e,t){if(1&e){const e=s.EpF();s.ynx(0),s.TgZ(1,"div",19),s.TgZ(2,"nui-form-field",20),s.TgZ(3,"nui-textbox-number",21),s.NdJ("valueChange",function(){return s.CHM(e),s.oxw(2).stub()}),s.qZA(),s.TgZ(4,"nui-validation-message",22),s.SDv(5,23),s.qZA(),s.qZA(),s.qZA(),s.BQk()}if(2&e){const e=s.oxw(2);s.xp6(2),s.Q6J("control",e.form.controls.width),s.xp6(2),s.Q6J("show",e.form.controls.width.invalid)}}function ms(e,t){1&e&&(s.TgZ(0,"nui-message",24),s.tHW(1,25),s._UZ(2,"b"),s.N_p(),s.qZA()),2&e&&s.Q6J("allowDismiss",!1)}function fs(e,t){if(1&e&&(s.ynx(0),s.YNc(1,gs,6,2,"ng-container",17),s.YNc(2,ms,3,1,"nui-message",18),s.BQk()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",!e.isWidthMessageDisplayed),s.xp6(1),s.Q6J("ngIf",e.isWidthMessageDisplayed)}}let vs=(()=>{class e{constructor(e,t){this.formBuilder=e,this.changeDetector=t,this.formReady=new s.vpe,this.formDestroy=new s.vpe}ngOnInit(){var e;this.form=this.formBuilder.group({label:[this.label||null,[d.kI.required]],isActive:null===(e=this.isActive)||void 0===e||e,width:this.width||void 0}),this.formReady.emit(this.form)}ngOnChanges(e){var t,i,o;e.label&&(null===(t=this.form)||void 0===t||t.patchValue({label:e.label.currentValue})),e.isActive&&(null===(i=this.form)||void 0===i||i.patchValue({isActive:e.isActive.currentValue})),e.width&&(null===(o=this.form)||void 0===o||o.patchValue({width:e.width.currentValue}))}stub(){}ngOnDestroy(){this.formDestroy.emit(this.form)}}return e.lateLoadKey="DescriptionConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(d.qu),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label",isActive:"isActive",width:"width",isWidthMessageDisplayed:"isWidthMessageDisplayed"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[s.TTD],decls:23,vars:17,consts:function(){let e,t,i,o,n,r,s,a;return e=$localize`:eec715de352a6b114713b30b640d319fa78207a04902817035128594900:Description`,t=$localize`:863226cffd5b66a6fee9810a9282a5006d6ef5764077520913910941990:Label`,i=$localize`:c9a9da14b0f8c677efa737185f1232f8537bd2a63224868488156254475: This field is required `,o=$localize`:49e97f1ac4309fd5992a9520d74fa732c4a774815413084173448405143:Show this column`,n=$localize`:6b3f02f1feab94e0f0a6823f49a009fa7be7dfa98419094197651631948:Column width (px)`,r=$localize`:455a91268699c6879146b5fe44595de6628e6d324319439665214681027:Auto width`,s=$localize`:356aa3e61db78cca0742edfab898c6bf0c8051a63835988025416576743: Minimum width of the column is 62px `,a=$localize`:ed094d9c3b5f802e6adca32349fb4756bfad47865991148749044556035:${"\ufffd#2\ufffd"}:START_BOLD_TEXT:All columns can not have fixed width.${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"mb-3",3,"control"],["formControlName","label"],["for","required"],i,[3,"control"],["formControlName","isActive"],o,[4,"ngIf"],["type","info",3,"allowDismiss",4,"ngIf"],[1,"mt-4"],["caption",n,1,"mb-3",3,"control"],["placeholder",r,"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],s,["type","info",3,"allowDismiss"],a]},template:function(e,t){if(1&e&&(s.ynx(0,0),s.TgZ(1,"nui-widget-editor-accordion",1),s.ALo(2,"async"),s.ALo(3,"nuiWidgetEditorAccordionFormState"),s.TgZ(4,"div",2),s._UZ(5,"nui-icon",3),s.ALo(6,"async"),s.ALo(7,"nuiFormHeaderIconPipe"),s.TgZ(8,"div",4),s.TgZ(9,"span",5),s.SDv(10,6),s.qZA(),s.TgZ(11,"div",7),s._uU(12),s.qZA(),s.qZA(),s.qZA(),s.TgZ(13,"div",8),s.TgZ(14,"div",9),s.TgZ(15,"nui-form-field",10),s._UZ(16,"nui-textbox",11),s.TgZ(17,"nui-validation-message",12),s.SDv(18,13),s.qZA(),s.qZA(),s.qZA(),s.TgZ(19,"nui-form-field",14),s.TgZ(20,"nui-checkbox",15),s.SDv(21,16),s.qZA(),s.qZA(),s.YNc(22,fs,3,2,"ng-container",17),s.qZA(),s.qZA(),s.BQk()),2&e){let e;s.Q6J("formGroup",t.form),s.xp6(1),s.Q6J("state",s.lcZ(2,8,s.lcZ(3,10,t.form))),s.xp6(4),s.Q6J("icon",s.lcZ(6,12,s.xi3(7,14,t.form,"widget_list"))),s.xp6(6),s.Q6J("title",t.form.controls.label.value),s.xp6(1),s.hij(" ",t.form.controls.label.value," "),s.xp6(3),s.Q6J("control",t.form.controls.label),s.xp6(4),s.Q6J("control",t.form.controls.isActive),s.xp6(3),s.Q6J("ngIf",null==(e=t.form.get("isActive"))?null:e.value)}},directives:[d.JL,d.sg,fn.J,n.oJW,n.hgI,n.XHW,d.JJ,d.u,n.CfE,n.bK4,o.O5,n.I5I,n.qqZ],pipes:[o.Ov,Sn.F,In.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})(),ys=(()=>{class e{constructor(e,t,i,o){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.logger=o,this.formReady=new s.vpe,this.dropdownItems={}}ngOnChanges(e){e.formatterDefinition&&(this.mapDropdownItems(),this.initForm()),e.dataFields&&this.mapDropdownItems(),e.formatter&&this.updateForm()}mapDropdownItems(){this.dataFields?this.dropdownItems=Object.keys(this.formatterDefinition.dataTypes).reduce((e,t)=>{const i=this.formatterDefinition.dataTypes[t];return e[t]=i?this.dataFields.filter(e=>"string"==typeof i?e.dataType===i:i.includes(e.dataType)):this.dataFields,e},{}):this.logger.error("There are no dataFields defined for formatter:",this.formatterDefinition)}get dataFieldIds(){return this.form.get("dataFieldIds")}initForm(){const e=Object.keys(this.formatterDefinition.dataTypes||{}).reduce((e,t)=>{var i,o,n,r;return e[t]=[null!==(r=null===(n=null===(o=null===(i=this.formatter)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.dataFieldIds)||void 0===n?void 0:n[t])&&void 0!==r?r:null,d.kI.required],e},{});this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group(e)}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}updateForm(){var e;this.form.patchValue(null!==(e=this.formatter.properties)&&void 0!==e?e:{},{onlySelf:!1,emitEvent:!1})}addCustomFormControls(e){}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.sBO),s.LFG($n.p),s.LFG(d.qu),s.LFG(n.mQy))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();function bs(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",11),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.id),s.xp6(1),s.hij(" ",e.label," ")}}function Cs(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",11),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.id),s.xp6(1),s.hij(" ",e.label," ")}}let xs=(()=>{class e extends ys{constructor(e,t,i,o){super(e,t,i,o)}}return e.lateLoadKey="LinkConfiguratorComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36($n.p),s.Y36(d.qu),s.Y36(n.mQy))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-link-configurator"]],features:[s.qOj],decls:14,vars:5,consts:function(){let e,t,i,o;return e=$localize`:863226cffd5b66a6fee9810a9282a5006d6ef5764077520913910941990:Label`,t=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,i=$localize`:801b98c6f02fe3b32f6afa3ee854c99ed83474e62375260419993138758:URL`,o=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,[[3,"formGroup"],["formGroupName","dataFieldIds"],[1,"mb-4"],["caption",e,1,"mb-3",3,"control"],["formControlName","value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],t,["caption",i,1,"mb-3",3,"control"],["formControlName","link"],o,[3,"value"]]},template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"nui-form-field",3),s.TgZ(4,"nui-select-v2",4),s.YNc(5,bs,2,2,"nui-select-v2-option",5),s.qZA(),s.TgZ(6,"nui-validation-message",6),s.SDv(7,7),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"div"),s.TgZ(9,"nui-form-field",8),s.TgZ(10,"nui-select-v2",9),s.YNc(11,Cs,2,2,"nui-select-v2-option",5),s.qZA(),s.TgZ(12,"nui-validation-message",6),s.SDv(13,10),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.Q6J("formGroup",t.form),s.xp6(3),s.Q6J("control",t.dataFieldIds.controls.value),s.xp6(2),s.Q6J("ngForOf",t.dropdownItems.value),s.xp6(4),s.Q6J("control",t.dataFieldIds.controls.link),s.xp6(2),s.Q6J("ngForOf",t.dropdownItems.link))},directives:[d.JL,d.sg,d.x0,n.hgI,n.j_n,d.JJ,d.u,o.sg,n.CfE,n.rLF],encapsulation:2}),e})();function ws(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",8),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("displayValueContext",e.label)("value",e.id),s.xp6(1),s.hij(" ",e.label," ")}}function Ts(e,t){if(1&e&&(s.TgZ(0,"div",1),s.TgZ(1,"div",2),s.TgZ(2,"nui-form-field",3),s.TgZ(3,"nui-select-v2",4),s.ALo(4,"async"),s.YNc(5,ws,2,3,"nui-select-v2-option",5),s.qZA(),s.TgZ(6,"nui-validation-message",6),s.SDv(7,7),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.Q6J("formGroup",e.form),s.xp6(2),s.Q6J("control",e.dataFieldIds.controls.value),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(4,4,e.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",e.dropdownItems.value)}}let Ss=(()=>{class e extends ys{constructor(e,t,i,o){super(e,t,i,o)}}return e.lateLoadKey="ValueSelectorComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36($n.p),s.Y36(d.qu),s.Y36(n.mQy))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-value-selector"]],features:[s.qOj],decls:1,vars:1,consts:function(){let e,t,i;return e=$localize`:5049e204c14c648691ac775a64fb504467aeb5496555318547274416232:Value`,t=$localize`:25b479494f612322c149610b9b2e3cd4c782c3134594093405818643397:Select Value`,i=$localize`:b17406f843dc33feb81478ae8273dc1aae06bbf62244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["formGroupName","dataFieldIds"],["caption",e,1,"mb-3",3,"control"],["formControlName","value","placeholder",t,3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,[3,"displayValueContext","value"]]},template:function(e,t){1&e&&s.YNc(0,Ts,8,6,"div",0),2&e&&s.Q6J("ngIf",t.form)},directives:[o.O5,d.JL,d.sg,d.x0,n.hgI,n.j_n,d.JJ,d.u,o.sg,n.CfE,n.rLF],pipes:[o.Ov],encapsulation:2}),e})();var Is=i(76974),_s=i.n(Is);function As(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",14),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("displayValueContext",e.label)("value",e.componentType),s.xp6(1),s.hij(" ",e.label," ")}}function zs(e,t){}const ks=function(){return["formReady"]};function Zs(e,t){if(1&e){const e=s.EpF();s.ynx(0,15,16),s.NdJ("output",function(t){return s.CHM(e),s.oxw().onFormReady(t.payload)}),s.YNc(2,zs,0,0,"ng-template",17),s.NdJ("attached",function(t){return s.CHM(e),s.MAs(1).attached(t)}),s.BQk()}if(2&e){const e=s.MAs(1),t=s.oxw();s.Q6J("componentType",t.formatterConfigurator)("properties",t.formatterConfiguratorProps)("outputs",s.DdM(4,ks)),s.xp6(2),s.Q6J("cdkPortalOutlet",e.portal)}}let Os=(()=>{class e{constructor(e,t,i,o,n){this.formBuilder=e,this.changeDetector=t,this.configuratorHeading=i,this.formattersRegistryCommon=o,this.tableFormattersRegistryService=n,this._providedFormatters=[],this._formatters=[],this._dataFields=[],this.formReady=new s.vpe,this.formDestroy=new s.vpe,this.formatterForm=this.formBuilder.group({}),this.formatterFormGroupName="formatter",this.onDestroy$=new H.xQ,this.subscribeToFormattersRegistry()}set formatters(e){!this.tableFormattersRegistryService.isEmpty||this.handleFormattersUpdate(e)}get formatters(){return this._formatters}set dataFields(e){this._dataFields=e,this.updateAvailableFormatters()}get dataFields(){return this._dataFields}ngOnInit(){var e;this.formatterForm=this.formBuilder.group({componentType:[this.formatter&&this.formatter.componentType||this._providedFormatters&&this._providedFormatters.length>0&&this._providedFormatters[0].componentType,[d.kI.required]]}),this.form=this.formBuilder.group({[this.formatterFormGroupName]:this.formatterForm}),null===(e=this.formatterForm.get("componentType"))||void 0===e||e.valueChanges.pipe((0,U.R)(this.onDestroy$)).subscribe(()=>this.createFormatterConfigurator()),this.createFormatterConfigurator(),this.formReady.emit(this.form),this.formatterForm.valueChanges.pipe((0,U.R)(this.onDestroy$)).subscribe(()=>{this.updateSubtitle(),this.changeDetector.detectChanges()})}ngAfterViewInit(){}ngOnChanges(e){var t;if(e.dataFieldIds){const{currentValue:t,previousValue:i}=e.dataFieldIds;if(t&&t!==i){const e=t.map(e=>({id:e,label:_s()(e)}));this.dataFields=e,this.updateSubtitle()}}e.formatter&&(null===(t=this.form)||void 0===t||t.patchValue({[this.formatterFormGroupName]:e.formatter.currentValue},{emitEvent:!1}),this.updateSubtitle()),e.dataFields&&0===e.dataFields.previousValue.length&&this.formatterForm&&this.updateSubtitle()}getSelectedFormatterDefinition(){var e,t;if(this._providedFormatters.length>0){const i=null===(e=this.formatterForm.get("componentType"))||void 0===e?void 0:e.value;return null!==(t=this._providedFormatters.find(e=>e.componentType===i))&&void 0!==t?t:null}return null}getSelectedDataField(){var e,t;const i=this.formatterForm.controls.properties;if(i&&this.dataFields&&this.dataFields.length>0){const o=null===(e=i.get("dataFieldIds"))||void 0===e?void 0:e.value.value;return null!==(t=this.dataFields.find(e=>e.id===o))&&void 0!==t?t:null}return null}onFormReady(e){this.form.get(this.formatterFormGroupName).setControl("properties",e)}updateSubtitle(){var e,t;this.subtitleText=`${null===(e=this.getSelectedFormatterDefinition())||void 0===e?void 0:e.label}`,this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(`, ${null===(t=this.getSelectedDataField())||void 0===t?void 0:t.label}`))}createFormatterConfigurator(){var e,t,i,o;const n=this._providedFormatters.find(e=>{var t;return e.componentType===(null===(t=this.formatterForm.get("componentType"))||void 0===t?void 0:t.value)});this.formatterConfigurator=n?null!==(e=n.configurationComponent)&&void 0!==e?e:"ValueSelectorComponent":null,(null==n?void 0:n.componentType)!==(null===(t=this.formatter)||void 0===t?void 0:t.componentType)&&(null===(o=null===(i=this.formatter)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.dataFieldIds)&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:n}}updateAvailableFormatters(){if(!this._dataFields.length||!this._providedFormatters.length)return;const e={null:!0};this._dataFields.forEach(t=>e[t.dataType]=!0),this._formatters=this._providedFormatters.filter(t=>(t.dataTypes.value instanceof Array?t.dataTypes.value:[t.dataTypes.value]).some(t=>e[t])),this.formatterForm&&this.createFormatterConfigurator()}subscribeToFormattersRegistry(){this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,it.b)(this.handleFormattersUpdate.bind(this)),(0,U.R)(this.onDestroy$)).subscribe()}handleFormattersUpdate(e){e!==this._providedFormatters&&(this._providedFormatters=e,this.updateAvailableFormatters())}get formattersRegistry(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}ngOnDestroy(){this.formDestroy.emit(this.form),this.onDestroy$.next(),this.onDestroy$.complete()}}return e.lateLoadKey="PresentationConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(d.qu),s.Y36(s.sBO),s.Y36($n.p),s.Y36(C.m4,8),s.Y36(pe.C))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-table-column-presentation-configuration"]],inputs:{formatter:"formatter",formatters:"formatters",dataFieldIds:"dataFieldIds",dataFields:"dataFields"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[s._Bn([],[{provide:d.gN,useExisting:d.sg}]),s.TTD],decls:20,vars:20,consts:function(){let e,t,i;return e=$localize`:3c991a92a6b04b4f5a42f0b72befa96a8d2e809c5065098939944125110:Property and formatting`,t=$localize`:7722a92a1fc887570b4f4d8a7bb916f067f320287513076467032912668:Format`,i=$localize`:408b4f352f2fec5727e6df77cb926194384bbba0736196504450716827:Select Format`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(e,t){1&e&&(s.ynx(0,0),s.TgZ(1,"nui-widget-editor-accordion",1),s.ALo(2,"async"),s.ALo(3,"nuiWidgetEditorAccordionFormState"),s.TgZ(4,"div",2),s._UZ(5,"nui-icon",3),s.ALo(6,"async"),s.ALo(7,"nuiFormHeaderIconPipe"),s.TgZ(8,"div",4),s.TgZ(9,"span",5),s.SDv(10,6),s.qZA(),s.TgZ(11,"div",7),s._uU(12),s.qZA(),s.qZA(),s.qZA(),s.TgZ(13,"div",8),s.TgZ(14,"div",9),s.TgZ(15,"nui-form-field",10),s.TgZ(16,"nui-select-v2",11),s.ALo(17,"async"),s.YNc(18,As,2,3,"nui-select-v2-option",12),s.qZA(),s.qZA(),s.qZA(),s.YNc(19,Zs,3,5,"ng-container",13),s.qZA(),s.qZA(),s.BQk()),2&e&&(s.Q6J("formGroup",t.formatterForm),s.xp6(1),s.Q6J("state",s.lcZ(2,9,s.lcZ(3,11,t.form))),s.xp6(4),s.Q6J("icon",s.lcZ(6,13,s.xi3(7,15,t.form,"customize"))),s.xp6(6),s.Q6J("title",t.subtitleText),s.xp6(1),s.hij(" ",t.subtitleText," "),s.xp6(3),s.Q6J("control",t.formatterForm.controls.componentType),s.xp6(1),s.Q6J("popupViewportMargin",s.lcZ(17,18,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",t.formatters),s.xp6(1),s.Q6J("ngIf",t.formatterConfigurator))},directives:[d.JL,d.sg,fn.J,n.oJW,n.hgI,n.j_n,d.JJ,d.u,o.sg,o.O5,n.rLF,T.$,S.Pl],pipes:[o.Ov,Sn.F,In.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();var Ps=i(23348),$s=i.n(Ps);function Fs(e,t){1&e&&(s.TgZ(0,"div",6),s.TgZ(1,"nui-message",7),s.tHW(2,8),s._UZ(3,"b"),s.N_p(),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("allowDismiss",!1))}let Ds=(()=>{class e{constructor(e,t,i,o,r){this.formBuilder=e,this.changeDetector=t,this.dialogService=i,this.pizzagnaService=o,this.eventBus=r,this.columns=[],this.formatters=[],this.dataFields=[],this.formReady=new s.vpe,this.onDestroy$=new H.xQ,this.lastValidDataFields=[],this.eventBus.subscribeUntil(On.gg,this.onDestroy$,e=>{!e.payload||(this.dataSource=e.payload)}),this.eventBus.subscribeUntil(On.PF,this.onDestroy$,e=>{var t;const{dataFields:i}=rs()(e.payload.result)?e.payload:e.payload.result||{};if(i){let e=this.pizzagnaService.pizzagna;e=(0,n.zdu)(e,`${C.xW.Data}.columns.properties.dataFields`,i);const o=(null===(t=this.pizzagnaService.pizzagna[C.xW.Structure].columns.properties)||void 0===t?void 0:t.template).findIndex(e=>"presentation"===e.id);e=(0,n.zdu)(e,`${C.xW.Structure}.columns.properties.template[${o}].properties.dataFields`,i),e=Ue()(this.pizzagnaService.pizzagna,`${C.xW.Data}.columns.properties.columns`).map(e=>e.id).reduce((e,t)=>(0,n.zdu)(e,`${C.xW.Data}.${t}/presentation.properties.dataFields`,i),e),this.pizzagnaService.updatePizzagna(e),this.eventBus.getStream(b.M).next({payload:{path:"",value:e}})}})}ngOnInit(){}ngOnChanges(e){var t,i,o;if(e.dataFields&&e.dataFields.currentValue){this.lastValidDataFields=e.dataFields.currentValue;const n=null===(o=null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.getFeatureConfig(C.ni.DisableTableColumnGeneration))||void 0===o?void 0:o.enabled,r=this.mergeColumns(e.dataFields.currentValue,this.columns);(null==r?void 0:r.length)||n?this.onItemsChange(r):n||this.resetColumns(!1),setTimeout(()=>this.changeDetector.markForCheck())}if(e.columns){const e=this.columns.map(e=>({id:e.id,children:{[`${e.id}/description`]:Object.assign({},e),[`${e.id}/presentation`]:Object.assign({},e)}}));this.pizzagnaService.createComponentsFromTemplateWithProperties("columns",e),setTimeout(()=>{var e,t;null===(e=this.form.get("columns"))||void 0===e||e.setValue([...null===(t=this.form.get("columns"))||void 0===t?void 0:t.value])})}}onFormReady(e){var t;this.form=this.formBuilder.group({columns:e,columnsOutput:{}}),this.emptyColumns$=this.form.valueChanges.pipe((0,nt.U)(e=>0===e.columns.length)),this.formReady.emit(this.form),null===(t=this.form.get("columns"))||void 0===t||t.valueChanges.subscribe(e=>{var t;const i=e.map(e=>{var t,i;let o={id:e.id};for(const n of Object.keys(e.properties))o=Object.assign(Object.assign({},o),e.properties[n]);return o.sortable=null===(i=null===(t=this.lastValidDataFields)||void 0===t?void 0:t.find(e=>{var t,i,n;return e.id===(null===(n=null===(i=null===(t=o.formatter)||void 0===t?void 0:t.properties)||void 0===i?void 0:i.dataFieldIds)||void 0===n?void 0:n.value)}))||void 0===i?void 0:i.sortable,o});null===(t=this.form.get("columnsOutput"))||void 0===t||t.setValue(i)})}onItemsChange(e){const t=e.map(e=>e.id);this.pizzagnaService.createComponentsFromTemplate("columns",t),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:C.xW.Data,propertyPath:["columns"]},e)}addColumn(){this.onItemsChange([...this.columns,{id:(0,n.VjN)("column"),label:"",formatter:void 0}])}onResetColumns(){var e;this.resetColumns(!!(null===(e=this.columns)||void 0===e?void 0:e.length))}resetColumns(e){const t=()=>{const e=this.lastValidDataFields.map(e=>({id:(0,n.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:e.id}}},isActive:!0,label:e.label,width:void 0,sortable:e.sortable}));this.onItemsChange(e)};e?this.dialogService.confirm({title:$localize`Are you sure?`,message:$localize`Resetting the columns will revert them to their default configurations. Do you wish to proceed?`,confirmText:$localize`Reset Columns`}).result.then(e=>{e&&t()},()=>{}):t()}mergeColumns(e,t){const i=e.map(e=>e.id);return t.filter(e=>{var t,o,n,r;return!!(null===(o=null===(t=e.formatter)||void 0===t?void 0:t.properties)||void 0===o?void 0:o.dataFieldIds)&&$s()(null===(r=null===(n=e.formatter)||void 0===n?void 0:n.properties)||void 0===r?void 0:r.dataFieldIds).some(e=>i.includes(e))})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return e.lateLoadKey="TableColumnsConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(d.qu),s.Y36(s.sBO),s.Y36(n.xAy),s.Y36(F.p),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",formatters:"formatters",componentId:"componentId",dataFields:"dataFields",nodes:"nodes"},outputs:{formReady:"formReady"},features:[s.TTD],decls:7,vars:5,consts:function(){let e,t,i,o;return e=$localize`:e3c2715ed7f11ed4ac89f4153d8557f182a6918e763982378603811482:Column`,t=$localize`:736c64fea4ef76879faff01d9feb9b0ae0e1ce6c1971419615059875635:Add new column
`,i=$localize`:e381db96d57a8fce44c3c93407e43f7774ae0caf1216924115236014479:Reset columns
`,o=$localize`:67705586cab07e9ae4f2a9822320fa14e7fb60a78157770720263764419:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one column must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[["headerPrefix",e,3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],t,["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],i,[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],o]},template:function(e,t){1&e&&(s.TgZ(0,"nui-items-dynamic",0),s.NdJ("itemsChange",function(e){return t.onItemsChange(e)})("formReady",function(e){return t.onFormReady(e)}),s.qZA(),s.YNc(1,Fs,4,1,"div",1),s.ALo(2,"async"),s.TgZ(3,"button",2),s.NdJ("click",function(){return t.addColumn()}),s.SDv(4,3),s.qZA(),s.TgZ(5,"button",4),s.NdJ("click",function(){return t.onResetColumns()}),s.SDv(6,5),s.qZA()),2&e&&(s.Q6J("items",t.columns)("nodes",t.nodes),s.xp6(1),s.Q6J("ngIf",s.lcZ(2,3,t.emptyColumns$)&&t.form.touched))},directives:[tn,o.O5,n.r0F,n.qqZ],pipes:[o.Ov],encapsulation:2,changeDetection:0}),e})();var Ms=i(53294);function Rs(e,t){1&e&&(s.TgZ(0,"div",3),s.TgZ(1,"nui-message",4),s.tHW(2,5),s._UZ(3,"b"),s.N_p(),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("allowDismiss",!1))}function Js(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",6),s.NdJ("click",function(){return s.CHM(e),s.oxw().addSeries()}),s.SDv(1,7),s.qZA()}}let Ls=(()=>{class e{constructor(e,t,i){this.pizzagnaService=e,this.changeDetector=t,this.eventBus=i,this.series=[],this.formReady=new s.vpe,this.destroy$=new H.xQ}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnChanges(e){e.allSeries&&!e.allSeries.isFirstChange()&&(this.createSeriesConfigComponents(this.series),setTimeout(()=>this.changeDetector.markForCheck()))}onFormReady(e){this.form=e,this.formReady.emit(e),this.emptySeries$=this.form.valueChanges.pipe((0,nt.U)(e=>0===e.length))}onItemsChange(e){this.createSeriesConfigComponents(e),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:C.xW.Data,propertyPath:["series"]},e)}isPossibleToAddSeries(){return(this.allSeries&&this.allSeries.length)>(this.series&&this.series.length)}addSeries(){this.onItemsChange([...this.series,{id:(0,n.VjN)("series"),selectedSeriesId:null}])}createSeriesConfigComponents(e){const t=e.map(e=>e.id);this.pizzagnaService.createComponentsFromTemplate("series",t)}}return e.lateLoadKey="TimeseriesSeriesCollectionConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(F.p),s.Y36(s.sBO),s.Y36(C.nY))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-timeseries-series-collection-configuration"]],inputs:{nodes:"nodes",componentId:"componentId",series:"series",availableSeries:"availableSeries",allSeries:"allSeries"},outputs:{formReady:"formReady"},features:[s.TTD],decls:4,vars:7,consts:function(){let e,t;return e=$localize`:46a7534407b391db85f57b5fd207e4288d7901c14355007031052301783:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one series must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,t=$localize`:7dfc5b976469c500547252e1509e97083f0e497e8203243807445939336:Add new series
`,[[3,"items","nodes","moveButtons","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","type","button","class","ml-4 mb-4",3,"click",4,"ngIf"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],e,["nui-button","","icon","add","displayStyle","action","type","button",1,"ml-4","mb-4",3,"click"],t]},template:function(e,t){1&e&&(s.TgZ(0,"nui-items-dynamic",0),s.NdJ("itemsChange",function(e){return t.onItemsChange(e)})("formReady",function(e){return t.onFormReady(e)}),s.qZA(),s.YNc(1,Rs,4,1,"div",1),s.ALo(2,"async"),s.YNc(3,Js,2,0,"button",2)),2&e&&(s.Q6J("items",t.series)("nodes",t.nodes)("moveButtons",!1),s.xp6(1),s.Q6J("ngIf",s.lcZ(2,5,t.emptySeries$)&&t.form.touched),s.xp6(2),s.Q6J("ngIf",t.isPossibleToAddSeries()))},directives:[tn,o.O5,n.qqZ,n.r0F],pipes:[o.Ov],encapsulation:2,changeDetection:0}),e})(),Es=(()=>{class e{constructor(e,t){this.formBuilder=e,this.changeDetector=t,this.formReady=new s.vpe,this.formDestroy=new s.vpe}ngOnInit(){this.form=this.formBuilder.group({label:[this.label,d.kI.required]}),this.formReady.emit(this.form)}ngOnChanges(e){if(e.label){const t=e.label.currentValue;t&&this.form.patchValue({label:t})}}ngOnDestroy(){this.formDestroy.emit(this.form)}}return e.lateLoadKey="TimeseriesTileDescriptionConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(d.qu),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[s.TTD],decls:20,vars:22,consts:function(){let e,t,i,o;return e=$localize`:eec715de352a6b114713b30b640d319fa78207a04902817035128594900:Description`,t=$localize`:863226cffd5b66a6fee9810a9282a5006d6ef5764077520913910941990:Label`,i=$localize`:8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5725093659603391179:Set label`,o=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-description-configuration__accordion-content"],["caption",t,3,"control"],["formControlName","label","placeholder",i],["for","required"],o]},template:function(e,t){if(1&e&&(s.ynx(0,0),s.TgZ(1,"nui-widget-editor-accordion",1),s.ALo(2,"async"),s.ALo(3,"nuiWidgetEditorAccordionFormState"),s.TgZ(4,"div",2),s._UZ(5,"nui-icon",3),s.ALo(6,"async"),s.ALo(7,"nuiFormHeaderIconPipe"),s.ALo(8,"async"),s.ALo(9,"nuiFormHeaderIconPipe"),s.TgZ(10,"div",4),s.TgZ(11,"span",5),s.SDv(12,6),s.qZA(),s.TgZ(13,"div",7),s._uU(14),s.qZA(),s.qZA(),s.qZA(),s.TgZ(15,"div",8),s.TgZ(16,"nui-form-field",9),s._UZ(17,"nui-textbox",10),s.TgZ(18,"nui-validation-message",11),s.SDv(19,12),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.BQk()),2&e){let e,i;s.Q6J("formGroup",t.form),s.xp6(1),s.Q6J("state",s.lcZ(2,7,s.lcZ(3,9,t.form.get("label")))),s.xp6(4),s.Q6J("icon",s.lcZ(6,11,s.xi3(7,13,t.form.get("label"),"edit")))("iconColor",s.lcZ(8,16,s.Dn7(9,18,t.form.get("label"),"gray",""))),s.xp6(8),s.Q6J("title",null==(e=t.form.get("label"))?null:e.value),s.xp6(1),s.hij(" ",null==(i=t.form.get("label"))?null:i.value," "),s.xp6(2),s.Q6J("control",t.form.get("label"))}},directives:[d.JL,d.sg,fn.J,n.oJW,n.hgI,n.XHW,d.JJ,d.u,n.CfE],pipes:[o.Ov,Sn.F,In.d],styles:[".timeseries-tile-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();function qs(e,t){if(1&e&&(s.TgZ(0,"nui-select-v2-option",14),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e),s.xp6(1),s.hij(" ",e.description," ")}}let Bs=(()=>{class e{constructor(e,t,i,o){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.pizzagnaService=o,this.formReady=new s.vpe,this.formDestroy=new s.vpe,this.destroy$=new H.xQ}set selectedSeries(e){this._selectedSeries=e,e&&this.form.patchValue({id:e.id})}get selectedSeries(){return this._selectedSeries}ngOnInit(){this.form=this.formBuilder.group({id:[this.selectedSeriesId||null,[d.kI.required]]}),this.formReady.emit(this.form)}ngOnChanges(e){if(e.allSeries&&(this.selectedSeries=this.allSeries.find(e=>this.selectedSeriesId===e.id)),e.selectedSeriesId){if(!this.allSeries)return;this.selectedSeries=this.allSeries.find(e=>this.selectedSeriesId===e.id)}}onSelect(e){this.selectedSeriesId=e.id,this.selectedSeries=e,this.form.patchValue({id:e.id}),setTimeout(()=>{this.pizzagnaService.setProperty(`${C.xW.Data}.${this.componentId}.properties.selectedSeriesId`,e.id),this.changeDetector.markForCheck()})}ngOnDestroy(){this.formDestroy.emit(this.form),this.destroy$.next(),this.destroy$.complete()}}return e.lateLoadKey="TimeseriesTileIndicatorDataConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36($n.p),s.Y36(d.qu),s.Y36(F.p))},e.\u0275cmp=s.Xpm({type:e,selectors:[["nui-timeseries-tile-indicator-data-configuration"]],inputs:{componentId:"componentId",selectedSeriesId:"selectedSeriesId",allSeries:"allSeries",availableSeries:"availableSeries"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[s.TTD],decls:21,vars:23,consts:function(){let e,t,i,o;return e=$localize`:f39271d40a9c081425a980174610625a267d18f78676967573592446270:Indicator data`,t=$localize`:c5efb3039d96058120ee5d8148ceeb972d8d4e1f3385528249572340947:Series data`,i=$localize`:c5efb3039d96058120ee5d8148ceeb972d8d4e1f3385528249572340947:Series data`,o=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],e,[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-data-configuration__accordion-content"],["caption",t,3,"control"],["placeholder",i,3,"value","popupViewportMargin","valueSelected"],[3,"value",4,"ngFor","ngForOf"],["for","required"],o,[3,"value"]]},template:function(e,t){1&e&&(s.ynx(0,0),s.TgZ(1,"nui-widget-editor-accordion",1),s.ALo(2,"async"),s.ALo(3,"nuiWidgetEditorAccordionFormState"),s.TgZ(4,"div",2),s._UZ(5,"nui-icon",3),s.ALo(6,"async"),s.ALo(7,"nuiFormHeaderIconPipe"),s.TgZ(8,"div",4),s.TgZ(9,"span",5),s.SDv(10,6),s.qZA(),s.TgZ(11,"div",7),s._uU(12),s.qZA(),s.qZA(),s.qZA(),s.TgZ(13,"div",8),s.TgZ(14,"nui-form-field",9),s.TgZ(15,"nui-select-v2",10),s.NdJ("valueSelected",function(e){return t.onSelect(e)}),s.ALo(16,"async"),s.YNc(17,qs,2,2,"nui-select-v2-option",11),s.ALo(18,"nuiAddData"),s.qZA(),s.TgZ(19,"nui-validation-message",12),s.SDv(20,13),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.BQk()),2&e&&(s.Q6J("formGroup",t.form),s.xp6(1),s.Q6J("state",s.lcZ(2,9,s.lcZ(3,11,t.form.get("id")))),s.xp6(4),s.Q6J("icon",s.lcZ(6,13,s.xi3(7,15,t.form.get("id"),"database"))),s.xp6(6),s.Q6J("title",null==t.selectedSeries?null:t.selectedSeries.description),s.xp6(1),s.hij(" ",null==t.selectedSeries?null:t.selectedSeries.description," "),s.xp6(2),s.Q6J("control",t.form.get("id")),s.xp6(1),s.Q6J("value",t.selectedSeries)("popupViewportMargin",s.lcZ(16,18,t.configuratorHeading.height$)),s.xp6(2),s.Q6J("ngForOf",s.xi3(18,20,t.availableSeries,t.selectedSeries)))},directives:[d.JL,d.sg,fn.J,n.oJW,n.hgI,n.j_n,o.sg,n.CfE,n.rLF],pipes:[o.Ov,Sn.F,In.d,Vo],styles:[".timeseries-tile-data-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e})();var Ns=i(69823),Qs=(i(30510),i(15130));let Ys=(()=>{class e{static getTextColor(e){return new u.kJ9(new u.jpW([e]),{light:"white",dark:"black"}).get(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var Vs=i(62053);let Ws=(()=>{class e{constructor(e,t){this.configuratorService=e,this.componentPortalService=t}open(e){if(!e.portalBundle){const t={portal:this.componentPortalService.createComponentPortal(hn,null),attached:t=>{t.instance.cloneSelectionComponentType=e.widgetSelectionComponentType}};e.portalBundle=t}return this.configuratorService.open(e)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(Qs.J),s.LFG(Vs.$))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var js=i(58746),Hs=i(35484);i(79705),i(10841),i(45626),i(91363),i(82262);const Us=[co.n,po.P,Ns.P,Ln.s,Jn,Pn.K,Cr,qn,Nn,Nr,$r,Ms.U,or,Ls,Ds,hs.O,ps.P,Hs.Z,bo,fo,Io,So,_o.C,Mo,xs,Ss,Ao.s,on,qo,zo.a,ko,Vn,Xn,nr.U,mn.j,vn.b,hn,vs,os,Os,us,Es,Bs,Wn.O,kn,yr,dr,Kr,Sr,kr];let Gs=(()=>{class e{constructor(e){for(const t of Us.filter(e=>e.lateLoadKey))e.registerByLateLoadKey(t)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(ho.h))},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[Qs.J,$n.p,gn.e,js.s,Ws,Ys,Ci,Zt],imports:[[c.Cl,l,d.UX,p.IX,eo._t,S.eL,n.Gsl,to,n.Ts3,n.r$w,n.cnx,n.F__,n.ILf,n.YMY,n.C6o,n.Az_,n.s2z,n.qAs,n.CUE,n.LRI,n.uCA,n.Ld5,n.CND,n.a51,n.cJ5,n.gkT,n.grO,n.bGb,n.a$t,n.ZuS,n.sF0]]}),e})();s.B6R(ps.P,[d.JL,d.sg,os,d.JJ,d.oH,us],[]),s.B6R(an.i,[o.O5,o.sg,o.mk,o.PC,n.oJW,T.$,S.Pl],[]);let Ks=(()=>{class e{constructor(e){this.gridsterItem=e}ngOnChanges(e){e.nuiGridsterItemWidgetId&&(this.gridsterItem.widgetId=this.nuiGridsterItemWidgetId)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(p.IM,3))},e.\u0275dir=s.lG2({type:e,selectors:[["","nuiGridsterItemWidgetId",""]],inputs:{nuiGridsterItemWidgetId:"nuiGridsterItemWidgetId"},features:[s.TTD]}),e})();i(54607);const Xs={[C.xW.Structure]:{[b.XM]:{id:b.XM,componentType:po.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]}},presentation:{id:"presentation",componentType:mn.j.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:nr.U.lateLoadKey,providers:{converter:{providerId:b.j4}}},dataAndCalculations:{id:"dataAndCalculations",componentType:mn.j.lateLoadKey,properties:{headerText:$localize`Data and calculations`,nodes:["dataSource","grouping","entityFormatting"]}},dataSource:{id:"dataSource",componentType:Ln.s.lateLoadKey,properties:{dataSourceProviders:[]},providers:{[C.Mu.Converter]:{providerId:b.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId"]}]}}}},grouping:{id:"grouping",componentType:yr.lateLoadKey,properties:{groups:[],groupBy:[]},providers:{[C.Mu.Converter]:{providerId:b.VX,properties:{formParts:[{previewPath:`listWidget.providers.${C.Mu.Adapter}.properties`,keys:["groupBy","drillstate","groups"]}]}}}},entityFormatting:{id:"entityFormatting",componentType:dr.lateLoadKey,properties:{mappingKeys:["icon_status","capital","name","icon","url"],dataFieldIds:{icon:"icon",status:"icon_status",detailedUrl:"capital",label:"name",url:"url"}},providers:{[C.Mu.Converter]:{providerId:b.VX,properties:{formParts:[{previewPath:`listWidget.providers.${C.Mu.Adapter}.properties.componentsConfig.leaf.properties`,keys:["dataFieldIds"]}]}}}}}},ea={id:"header",componentType:Gi.lateLoadKey,properties:{editMode:!1}},ta={id:"loading",componentType:le.lateLoadKey,providers:{[C.Mu.LoadingAdapter]:{providerId:b.IG}}},ia={id:"body",componentType:Mi.lateLoadKey,properties:{content:"bodyContent"}},oa={[C.WE.Unknown]:zi.ErrorUnknown,[C.WE.Forbidden]:zi.ErrorForbidden,[C.WE.NotFound]:zi.ErrorNotFound},na={[zi.ErrorUnknown]:{id:zi.ErrorUnknown,componentType:a.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`Whoops, something went wrong`,description:$localize`There was an unexpected error.`}},[zi.ErrorForbidden]:{id:zi.ErrorForbidden,componentType:a.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`403 - Forbidden`,description:$localize`The requested action was forbidden.`}},[zi.ErrorNotFound]:{id:zi.ErrorNotFound,componentType:a.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`404 - Not Found`,description:$localize`The requested resource could not be found.`}}};function ra(e,t=b.Cz,i=oa,o=na){return Object.assign({bodyContent:{id:"bodyContent",componentType:$i.lateLoadKey,properties:{primaryContent:e,fallbackMap:i},providers:{[C.Mu.ContentFallbackAdapter]:{providerId:t}}}},o)}const sa={providerId:b.GN};function aa(e=!1,t=0){return{providerId:b.tc,properties:{enabled:e,interval:t}}}const la={[C.xW.Structure]:Object.assign(Object.assign(Object.assign(Object.assign({[b.XM]:{id:b.XM,componentType:J.lateLoadKey,properties:{nodes:["header","loading","search","body"]},providers:{[C.Mu.EventProxy]:sa}},header:ea,loading:ta,body:Object.assign(Object.assign({},ia),{properties:Object.assign(Object.assign({},ia.properties),{elementClass:"overflow-auto"})})},ra("listWidget")),{search:{id:"search",componentType:Ai.lateLoadKey}}),ra("mainContent")),{mainContent:{id:"mainContent",componentType:J.lateLoadKey,properties:{nodes:["navigationBar","listWidget"]}},navigationBar:{id:"navigationBar",componentType:ie.lateLoadKey},listWidget:{id:"listWidget",componentType:se.lateLoadKey,providers:{},properties:{elementClass:"w-100 p-3"}}}),[C.xW.Configuration]:{[b.XM]:{id:b.XM},header:{properties:{title:$localize`Empty Custom Widget`}}}},ca={paths:{widget:{[C.AC.Root]:b.XM},configurator:{[C.AC.Root]:b.XM,[C.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:la,configurator:Xs},da={[C.xW.Structure]:{[b.XM]:{id:b.XM,componentType:po.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","customConfig"]}},presentation:{id:"presentation",componentType:mn.j.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:nr.U.lateLoadKey,providers:{converter:{providerId:b.j4}}},customConfig:{id:"customConfig",componentType:mn.j.lateLoadKey,properties:{headerText:$localize`Custom Widget Configuration`,nodes:["embeddedContentSelection"]}},embeddedContentSelection:{id:"embeddedContentSelection",componentType:qn.lateLoadKey,properties:{messageComponent:{componentType:Nn.lateLoadKey,properties:{emphasizeText:"Some content may not work as expected.",generalText:"Web pages embedded in a widget may not be able to open popup windows or may experience formatting problems.\n                                    If you supply your own HTML, dangerous content like scripts will be removed.",link:{href:"https://www.solarwinds.com/",target:"_blank",text:"Learn more about best practices for the HTML widget"},allowDismiss:!0}}},providers:{[C.Mu.Converter]:{providerId:b.VX,properties:{formParts:[{previewPath:"mainContent.properties",keys:["customEmbeddedContent","mode","messageComponent","sanitized"]}]}}}}}},ua={[C.xW.Structure]:Object.assign(Object.assign({[b.XM]:{id:b.XM,componentType:J.lateLoadKey,providers:{[C.Mu.Refresher]:aa(),[C.Mu.EventProxy]:sa},properties:{nodes:["header","loading","body"]}},header:ea,loading:ta,body:ia},ra("mainContent")),{mainContent:{id:"mainContent",componentType:v.lateLoadKey,properties:{elementClass:"d-flex w-100 justify-content-center"}}}),[C.xW.Configuration]:{header:{properties:{title:$localize`Empty Embedded Content Widget`}}}},pa={paths:{widget:{[C.AC.Root]:b.XM},configurator:{[C.AC.Root]:b.XM}},widget:ua,configurator:da};var ha=i(30412);const ga=[{componentType:zo.a.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:Mo.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null}},{componentType:_o.C.lateLoadKey,label:$localize`Icon`,dataTypes:{value:null}}],ma={[C.xW.Structure]:{[b.XM]:{id:b.XM,componentType:po.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","tiles"]},providers:{[C.Mu.FormattersRegistry]:{providerId:b.s6}}},presentation:{id:"presentation",componentType:mn.j.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","refresher"]}},titleAndDescription:{id:"titleAndDescription",componentType:nr.U.lateLoadKey,providers:{converter:{providerId:b.j4}}},refresher:ha.l,tiles:{id:"tiles",componentType:Cr.lateLoadKey,properties:{template:[{id:"description",componentType:Vn.lateLoadKey,properties:{configurableUnits:!0,backgroundColors:[...Tn]},providers:{[C.Mu.Converter]:{providerId:b.YN,properties:{formParts:[{previewPath:"properties.widgetData",keys:["label","backgroundColor","units"]}]}}}},{id:"dataSource",componentType:Ln.s.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Pn.K.lateLoadKey},providers:{[C.Mu.Converter]:{providerId:b.YN,properties:{formParts:[{previewPath:"providers.dataSource",keys:["providerId","properties"]},{previewPath:"providers.adapter.properties.dataSource",keys:["properties"]}]}},[C.Mu.Broadcaster]:{providerId:b.m_,properties:{configs:[{trackOn:"component",key:"dataFieldIds",paths:["data.{parentComponentId}/formatting.properties.dataFieldIds"]}]}}}},{id:"thresholds",componentType:Xn.lateLoadKey,providers:{[C.Mu.Converter]:{providerId:b.YN,properties:{formParts:[{previewPath:"providers.adapter.properties.thresholds",keys:["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"]}]}}}},{id:"backgroundColorRules",componentType:kn.lateLoadKey,properties:{backgroundColors:[...Tn]},providers:{[C.Mu.Converter]:{providerId:b.YN,properties:{formParts:[{previewPath:"providers.kpiColorPrioritizer.properties",keys:["rules"]}]}}}},{id:"formatting",componentType:Os.lateLoadKey,providers:{[C.Mu.Converter]:{providerId:b.YN,properties:{formParts:[{previewPath:"properties.configuration.formatters.Value",keys:["formatter"]}]}}},properties:{formatter:{componentType:zo.a.lateLoadKey,properties:{dataFieldIds:{value:"value"}}}}}]},providers:{[C.Mu.Converter]:{providerId:b.ns}}}}},fa={[C.xW.Structure]:Object.assign(Object.assign({[b.XM]:{id:b.XM,componentType:J.lateLoadKey,providers:{[C.Mu.Refresher]:aa(),[C.Mu.EventProxy]:sa},properties:{nodes:["header","loading","body"]}},header:ea,loading:ta,body:Object.assign(Object.assign({},ia),{properties:Object.assign(Object.assign({},ia.properties),{elementClass:"overflow-hidden"})})},ra("tiles",b.C)),{tiles:{id:"tiles",componentType:N.lateLoadKey,properties:{elementClass:"flex-grow-1 pt-2 px-3 pb-3 w-100",template:{componentType:$.lateLoadKey,providers:{[C.Mu.KpiColorPrioritizer]:{providerId:b.tS,properties:{}},[C.Mu.Adapter]:{providerId:b.u1,properties:{propertyPath:"widgetData"}}},properties:{elementClass:"flex-grow-1"}}}}}),[C.xW.Configuration]:{[b.XM]:{id:b.XM,providers:{[C.Mu.Refresher]:aa(!1,60)}},header:{properties:{title:$localize`Empty KPI Widget`}}}},va="tiles.properties.template[0]",ya="tiles.properties.template[1]",ba={paths:{widget:{[C.AC.Root]:b.XM},configurator:{[C.AC.Root]:b.XM,[C.AC.DataSourceConfigComponentType]:`${ya}.componentType`,[C.AC.TileDescriptionConfigComponentType]:`${va}.componentType`,[C.AC.DataSourceProviders]:`${ya}.properties.dataSourceProviders`,[C.AC.TileDescriptionBackgroundColors]:`${va}.properties.backgroundColors`,[C.AC.TileBackgroundColorRulesBackgroundColors]:"tiles.properties.template[3].properties.backgroundColors"}},widget:fa,configurator:ma},Ca={paths:{widget:{[C.AC.Root]:b.XM},configurator:{[C.AC.Root]:b.XM}},widget:{[C.xW.Structure]:{[b.XM]:{id:b.XM,componentType:J.lateLoadKey,properties:{nodes:["header","body"]}},header:ea,body:ia,bodyContent:{id:"bodyContent",componentType:on.lateLoadKey}},[C.xW.Configuration]:{header:{properties:{title:$localize`New Widget`}}}}},xa=(e,t)=>{const i=(null==t?void 0:t.chartSeriesDataFieldId)||"data[0]";let o=e[0];return(null==t?void 0:t.activeMetricId)&&(o=e.find(e=>e.id===(null==t?void 0:t.activeMetricId)),o||console.warn(`No metric with id: ${null==t?void 0:t.activeMetricId} found. Taking first available.`)),Ue()(o,i)};xa.aggregatorType="fieldMapper";var wa=i(76275),Ta=i.n(wa);const Sa=(e,t)=>{var i;const o=e.map(e=>e.data[0]),{activeMetricId:n,base100:r}=t||{},s=Ta()(o);let a=o[0];n&&(a=null===(i=e.find(e=>e.id===n))||void 0===i?void 0:i.data[0],a||console.warn(`No metric with id: ${n} found. Taking first available.`));const l=a/s;let c=r?100*l:l;return c=Math.round(100*c)/100,c.toString()};Sa.aggregatorType="percentageAggregator";const Ia=(e,t)=>{const{activeMetricId:i}=t||{};if(i){const t=e.find(e=>e.id===i);if(t)return t.data[0]}return Ta()(e.map(e=>e.data[0])).toString()};Ia.aggregatorType="sumAggregator";const _a=[{componentType:"",label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:qo.lateLoadKey,label:$localize`Status With Icon`,dataTypes:{value:null}},{componentType:Ao.s.lateLoadKey,label:$localize`Link`,dataTypes:{value:null}}],Aa=[{componentType:zo.a.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:Mo.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:ko.lateLoadKey,label:$localize`Percentage Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}}],za=[{aggregatorType:Ia.aggregatorType,label:"Sum Aggregator",fn:Ia,configurationComponent:Sr.lateLoadKey},{aggregatorType:Sa.aggregatorType,label:"Percentage Aggregator",fn:Sa,properties:{base100:!0},configurationComponent:Sr.lateLoadKey},{aggregatorType:xa.aggregatorType,label:"Field Mapper Aggregator",fn:xa,configurationComponent:kr.lateLoadKey}],ka={[C.xW.Structure]:{[b.XM]:{id:b.XM,componentType:po.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]},providers:{[C.Mu.FormattersRegistry]:{providerId:b.rf}}},presentation:{id:"presentation",componentType:mn.j.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor"]}},titleAndDescription:{id:"titleAndDescription",componentType:nr.U.lateLoadKey,providers:{[C.Mu.Converter]:{providerId:b.j4}}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:Nr.lateLoadKey,properties:{chartOptions:{chartTypes:["PieChart","DonutChart","VerticalBarChart","HorizontalBarChart"],legendPlacementOptions:[{id:g.w.None,label:$localize`None`},{id:g.w.Right,label:$localize`Right`},{id:g.w.Bottom,label:$localize`Bottom`}],contentFormatters:[{componentType:So.lateLoadKey,label:$localize`Raw`},{componentType:Io.lateLoadKey,label:$localize`Sum`},{componentType:bo.lateLoadKey,label:$localize`Percentage`,configurationComponent:"DonutContentPercentageConfigurationComponent"}],legendFormatters:[{componentType:qo.lateLoadKey,label:$localize`Status With Icon`},{componentType:Ao.s.lateLoadKey,label:$localize`Link`}]}},providers:{[C.Mu.Converter]:{providerId:b.dz}}},refresher:ha.l,dataAndCalculations:{id:"dataAndCalculations",componentType:mn.j.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:Ln.s.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Pn.K.lateLoadKey},providers:{[C.Mu.Converter]:{providerId:b.VX,properties:{formParts:[{previewPath:"chart.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}},[C.Mu.Broadcaster]:{providerId:b.m_,properties:{configs:[{trackOn:"component",key:"dsOutput",paths:["data.chartOptionsEditor.properties.dsOutput"]}]}}}}}},Za={[C.xW.Structure]:Object.assign(Object.assign({[b.XM]:{id:b.XM,componentType:J.lateLoadKey,properties:{nodes:["header","loading","body"]},providers:{[C.Mu.Refresher]:aa(),[C.Mu.EventProxy]:sa}},header:ea,loading:ta,body:Object.assign(Object.assign({},ia),{properties:Object.assign(Object.assign({},ia.properties),{elementClass:"overflow-auto"})})},ra("chart")),{chart:{id:"chart",componentType:Ve.lateLoadKey,providers:{[C.Mu.Adapter]:{providerId:b.bZ,properties:{componentId:"chart",propertyPath:"widgetData"}}},properties:{elementClass:"d-flex flex-grow-1 justify-content-center overflow-auto"}}}),[C.xW.Configuration]:{[b.XM]:{id:b.XM,providers:{[C.Mu.Refresher]:aa(!1,60)}},header:{properties:{title:$localize`Empty Proportional Widget`}}}},Oa={paths:{widget:{[C.AC.Root]:b.XM},configurator:{[C.AC.Root]:b.XM,[C.AC.DataSourceConfigComponentType]:"dataSource.componentType",[C.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[C.AC.Formatters]:"chartOptionsEditor.properties.chartOptions.contentFormatters"}},widget:Za,configurator:ka},Pa={[C.xW.Structure]:Object.assign(Object.assign({[b.XM]:{id:b.XM,componentType:J.lateLoadKey,providers:{[C.Mu.Refresher]:aa(),[C.Mu.EventProxy]:{providerId:b.GN,properties:{downstreams:[b.pV.id]}}},properties:{nodes:["header","loading","body"]}},header:ea,loading:ta,body:Object.assign(Object.assign({},ia),{properties:Object.assign(Object.assign({},ia.properties),{elementClass:"overflow-auto"})})},ra("table")),{table:{id:"table",componentType:xt.lateLoadKey,providers:{[C.Mu.Adapter]:{providerId:b.l5,properties:{componentId:"table",dataPath:"widgetData",dataFieldsPath:"dataFields",totalItemsPath:"totalItems"}},virtualViewportManager:{providerId:b.Vx}},properties:{elementClass:"flex-grow-1 mx-3 mb-3 mt-2",delayedMousePresenceDetectionEnabled:!0,configuration:{columns:[],scrollActivationDelayMs:500,headerTooltipsEnabled:!0}}}}),[C.xW.Configuration]:{[b.XM]:{id:b.XM,providers:{[C.Mu.Refresher]:aa(!1,60)}},header:{properties:{title:$localize`Empty Table Widget`}}}},$a={paths:{widget:{[C.AC.Root]:b.XM},configurator:{[C.AC.Root]:b.XM,[C.AC.DataSourceConfigComponentType]:"dataSource.componentType",[C.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[C.AC.Formatters]:"columns.properties.template[1].properties.formatters"}},widget:Pa,configurator:ss.P},Fa={[C.xW.Structure]:{[b.XM]:{id:b.XM,componentType:po.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","series"]}},presentation:{id:"presentation",componentType:mn.j.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","timeseriesMetadata"]}},titleAndDescription:{id:"titleAndDescription",componentType:nr.U.lateLoadKey,providers:{[C.Mu.Converter]:{providerId:b.j4}}},timeseriesMetadata:{id:"timeseriesMetadata",componentType:or.lateLoadKey,properties:{legendPlacements:[{id:g.w.None,label:$localize`None`},{id:g.w.Right,label:$localize`Right`},{id:g.w.Bottom,label:$localize`Bottom`}]},providers:{[C.Mu.Converter]:{providerId:b.dZ}}},refresher:ha.l,dataAndCalculations:{id:"dataAndCalculations",componentType:mn.j.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:Ln.s.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Pn.K.lateLoadKey},providers:{[C.Mu.Converter]:{providerId:b.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}}}},series:{id:"series",componentType:Ls.lateLoadKey,providers:{[C.Mu.Converter]:{providerId:b.Ip}},properties:{template:[{id:"description",componentType:Es.lateLoadKey,providers:{[C.Mu.Converter]:{providerId:b.Es,properties:{formParts:[{previewPath:"chart.providers.adapter.properties.series",keys:["label"]}]}}}},{id:"indicatorData",componentType:Bs.lateLoadKey,providers:{[C.Mu.Converter]:{providerId:b.Gq}}}]}}}},Da={[C.xW.Structure]:Object.assign(Object.assign({[b.XM]:{id:b.XM,componentType:J.lateLoadKey,providers:{[C.Mu.Refresher]:aa(),[C.Mu.EventProxy]:sa},properties:{nodes:["header","loading","body"]}},header:ea,loading:ta,body:Object.assign(Object.assign({},ia),{properties:Object.assign(Object.assign({},ia.properties),{elementClass:"overflow-auto"})})},ra("mainContent")),{mainContent:{id:"mainContent",componentType:J.lateLoadKey,properties:{nodes:["timeframeSelection","chart"]}},timeframeSelection:{id:"timeframeSelection",componentType:_t.lateLoadKey},chart:{id:"chart",componentType:Ii.lateLoadKey,properties:{elementClass:"d-flex flex-column justify-content-center h-100 overflow-auto",configuration:{preset:kt.Line,scales:{y:{type:zt.Linear},x:{type:zt.Time}}}},providers:{[C.Mu.Adapter]:{providerId:b.R9,properties:{componentId:"chart",propertyPath:"widgetData",series:[]}}}}}),[C.xW.Configuration]:{[b.XM]:{id:b.XM,providers:{[C.Mu.Refresher]:aa(!1,60)}},header:{properties:{title:$localize`Empty Timeseries Widget`}}}},Ma={paths:{widget:{[C.AC.Root]:b.XM},configurator:{[C.AC.Root]:b.XM,[C.AC.DataSourceConfigComponentType]:"dataSource.componentType",[C.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:Da,configurator:Fa};var Ra=i(96800);const Ja=[v,$,Vt,le,Ve,J,ti,di,bi,Mt,xt,wt.q,N,_t,Ii,Mi,$i,Gi,a,se,ee,j,ie,Ai,ye];let La=(()=>{class e{constructor(e,t,i,o){e.registerWidgetType("kpi",1,ba),e.registerWidgetType("table",1,$a),e.registerWidgetType("proportional",1,Oa),e.registerWidgetType("timeseries",1,Ma),e.registerWidgetType("previewPlaceholder",1,Ca),e.registerWidgetType("embedded-content",1,pa),e.registerWidgetType("drilldown",1,ca);for(const n of Ja.filter(e=>e.lateLoadKey))t.registerByLateLoadKey(n);i.registerEvent(b.RG),i.registerEvent(b.y4),i.registerEvent(b.j7),i.registerEvent(b.Ef),i.registerEvent(b.MO),i.registerEvent(b.pV),i.registerEvent(b.Xi),i.registerEvent(b.M),i.registerEvent(b.re),i.registerEvent(b.xZ),i.registerEvent(b.N9),i.registerEvent(On.PF),i.registerEvent(b.QD),o.addItems(ga)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(ue.x),s.LFG(ho.h),s.LFG(Ra.o),s.LFG(pe.YX))},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[Vs.$,ue.x,o.JJ,We.g],imports:[[l,p.IX,n.Gsl,n.Az_,u.$y4,Gs,n.Ts3,n.sF0,n.r$w,to,n.cnx,n.BSv,n.hvO,n.l70,c.Cl,n.JhO,d.UX,n.ILf,n.VSN,n.a$t,n.lam,n.ZuS,n.w0o]]}),e})();s.B6R(h.M,[p.sm,o.sg,p.IM,Ks,o.O5,Xi,le],[o.Nd]);var Ea=(()=>((Ea||(Ea={})).Value="Value",Ea))();function qa(e,t,i){const o=t;return i.forEach((i,n)=>{if(0===i.data.length)return;let r=-1,s=-1;const a=t[n].data;a.length>0?(r=i.data.findIndex(e=>St()(e.x).isSame(a[0].x)),s=i.data.findIndex(e=>St()(e.x).isSame(a[a.length-1].x))):(r=i.data.findIndex(t=>St()(t.x).isAfter(e.startDatetime)),s=i.data.findIndex(t=>St()(t.x).isAfter(e.endDatetime))-1);const l=St()(e.startDatetime);(0===a.length||!l.isSame(a[0].x))&&l.isBetween(i.data[0].x,i.data[i.data.length-1].x)&&o[n].data.unshift(Object.assign(Object.assign({},i.data[r-1]),{x:e.startDatetime.toDate()}));const c=St()(e.endDatetime);(0===a.length||!c.isSame(a[a.length-1].x))&&c.isBetween(i.data[0].x,i.data[i.data.length-1].x)&&o[n].data.push(Object.assign(Object.assign({},i.data[s]),{x:e.endDatetime.toDate()}))}),o}i(388),i(54910),i(81354),i(37367),i(43925),i(83645),i(18989);const Ba={presentation:{id:"presentation",componentType:mn.j.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor","donutContentConfiguration"]}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:$r.lateLoadKey,properties:{chartTypes:[{id:"PieChart",label:$localize`Pie`},{id:"DonutChart",label:$localize`Donut`},{id:"VerticalBarChart",label:$localize`Vertical Bar`},{id:"HorizontalBarChart",label:$localize`Horizontal Bar`}],legendPlacementOptions:[{id:g.w.None,label:$localize`None`},{id:g.w.Right,label:$localize`Right`},{id:g.w.Bottom,label:$localize`Bottom`}]},providers:{[C.Mu.Converter]:{providerId:b.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions",keys:["type","legendPlacement","legendFormatter"]}]}},[C.Mu.Broadcaster]:{providerId:b.m_,properties:{configs:[{trackOn:"component",key:"chartTypeChanged$",paths:["data.donutContentConfiguration.properties.chartType"]}]}}}},donutContentConfiguration:{id:"donutContentConfiguration",componentType:Kr.lateLoadKey,providers:{[C.Mu.Converter]:{providerId:b.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions.donutContentConfig",keys:["formatter","aggregator"]}]}}}}}}}]);