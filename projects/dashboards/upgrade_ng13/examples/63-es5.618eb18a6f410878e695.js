!function(){var e,t,i,n,r,o,s,a,l,c,u,d,p,h,f,g,m,v,y,b,C,x,w,k,T,S,I,_,A,z,Z,O,P,F,D,$,M,R,J,L,E,q,B,N,Q,Y,V,j,W,H,U,G,K,X,ee,te,ie,ne,re,oe,se,ae,le,ce,ue,de,pe,he,fe,ge,me,ve,ye,be,Ce,xe,we,ke,Te,Se,Ie,_e,Ae,ze,Ze,Oe,Pe,Fe,De,$e,Me,Re,Je,Le,Ee,qe,Be,Ne,Qe,Ye,Ve,je,We,He,Ue,Ge,Ke,Xe,et,tt,it,nt,rt,ot,st,at,lt,ct,ut,dt,pt,ht,ft,gt,mt,vt,yt,bt,Ct,xt,wt,kt,Tt,St,It,_t,At,zt,Zt,Ot,Pt,Ft,Dt,$t,Mt,Rt,Jt,Lt,Et,qt,Bt,Nt,Qt,Yt,Vt,jt,Wt,Ht,Ut,Gt,Kt,Xt,ei,ti,ii,ni,ri,oi,si,ai,li,ci,ui,di,pi,hi,fi,gi,mi,vi,yi,bi,Ci,xi,wi,ki,Ti,Si,Ii,_i,Ai,zi,Zi,Oi,Pi,Fi,Di,$i,Mi,Ri,Ji,Li,Ei,qi,Bi,Ni,Qi,Yi,Vi,ji,Wi,Hi,Ui,Gi,Ki,Xi,en,tn,nn,rn,on,sn,an,ln,cn,un,dn,pn,hn,fn,gn,mn,vn,yn,bn,Cn,xn,wn,kn,Tn,Sn,In,_n,An,zn,Zn,On,Pn,Fn,Dn,$n,Mn,Rn,Jn,Ln,En,qn,Bn,Nn,Qn,Yn,Vn,jn,Wn,Hn,Un,Gn,Kn,Xn,er,tr,ir,nr,rr,or,sr,ar,lr,cr,ur,dr,pr,hr,fr,gr,mr,vr,yr,br,Cr,xr,wr,kr,Tr,Sr,Ir,_r,Ar,zr,Zr,Or,Pr,Fr,Dr,$r,Mr,Rr,Jr,Lr,Er,qr,Br,Nr,Qr,Yr,Vr,jr,Wr,Hr,Ur,Gr,Kr,Xr,eo,to,io,no,ro,oo,so,ao,lo,co,uo,po,ho,fo,go;function mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,o=[],s=!0,a=!1;try{for(i=i.call(e);!(s=(n=i.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(l){a=!0,r=l}finally{try{s||null==i.return||i.return()}finally{if(a)throw r}}return o}(e,t)||Ao(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vo(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Ao(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function yo(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function bo(){return(bo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=Co(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}}).apply(this,arguments)}function Co(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Io(e)););return e}function xo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wo(e,t)}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ko(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=Io(e);if(t){var r=Io(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return To(this,i)}}function To(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return So(e)}function So(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Io(e){return(Io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _o(e){return function(e){if(Array.isArray(e))return zo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ao(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ao(e,t){if(e){if("string"==typeof e)return zo(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?zo(e,t):void 0}}function zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Zo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Oo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Po(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fo(e,t,i){return t&&Po(e.prototype,t),i&&Po(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunk_nova_ui_dashboards=self.webpackChunk_nova_ui_dashboards||[]).push([[63],{69901:function(e,t,i){"use strict";i.d(t,{RU:function(){return A},KY:function(){return _},tQ:function(){return I},sm:function(){return M},IM:function(){return K},IX:function(){return X}});var n=i(33018),r=i(38583);function o(e,t){if(1&e&&n._UZ(0,"div",3),2&e){var i=t.index,r=n.oxw();n.Q6J("ngStyle",r.gridRenderer.getGridColumnStyle(i))}}function s(e,t){if(1&e&&n._UZ(0,"div",4),2&e){var i=t.index,r=n.oxw();n.Q6J("ngStyle",r.gridRenderer.getGridRowStyle(i))}}var a=["*"];function l(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",8),n.NdJ("mousedown",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)})("touchstart",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)}),n.qZA()}}function c(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",9),n.NdJ("mousedown",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)})("touchstart",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)}),n.qZA()}}function u(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",10),n.NdJ("mousedown",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)})("touchstart",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)}),n.qZA()}}function d(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",11),n.NdJ("mousedown",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)})("touchstart",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)}),n.qZA()}}function p(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",12),n.NdJ("mousedown",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)})("touchstart",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)}),n.qZA()}}function h(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",13),n.NdJ("mousedown",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)})("touchstart",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)}),n.qZA()}}function f(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",14),n.NdJ("mousedown",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)})("touchstart",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)}),n.qZA()}}function g(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",15),n.NdJ("mousedown",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)})("touchstart",function(e){return n.CHM(i),n.oxw().resize.dragStartDelay(e)}),n.qZA()}}var m,v,y,b,C,x,w,k,T,S,I=((m=I||(I={})).Fit="fit",m.ScrollVertical="scrollVertical",m.ScrollHorizontal="scrollHorizontal",m.Fixed="fixed",m.VerticalFixed="verticalFixed",m.HorizontalFixed="horizontalFixed",I),_=function(){return(e=_||(_={})).Always="always",e.OnDragAndResize="onDrag&Resize",e.None="none",_;var e}(),A=function(){return(e=A||(A={})).None="none",e.CompactUp="compactUp",e.CompactLeft="compactLeft",e.CompactUpAndLeft="compactUp&Left",e.CompactLeftAndUp="compactLeft&Up",e.CompactRight="compactRight",e.CompactUpAndRight="compactUp&Right",e.CompactRightAndUp="compactRight&Up",e.CompactDown="compactDown",e.CompactDownAndLeft="compactDown&Left",e.CompactLeftAndDown="compactLeft&Down",e.CompactDownAndRight="compactDown&Right",e.CompactRightAndDown="compactRight&Down",A;var e}(),z=function(){return(e=z||(z={})).LTR="ltr",e.RTL="rtl",z;var e}(),Z=function(){function e(t){Oo(this,e),this.gridster=t}return Fo(e,[{key:"destroy",value:function(){delete this.gridster}},{key:"checkCompact",value:function(){this.gridster.$options.compactType!==A.None&&(this.gridster.$options.compactType===A.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===A.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===A.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===A.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===A.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===A.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===A.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===A.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===A.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===A.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===A.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===A.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}},{key:"checkCompactItem",value:function(e){this.gridster.$options.compactType!==A.None&&(this.gridster.$options.compactType===A.CompactUp?this.moveTillCollision(e,"y",-1):this.gridster.$options.compactType===A.CompactLeft?this.moveTillCollision(e,"x",-1):this.gridster.$options.compactType===A.CompactUpAndLeft?(this.moveTillCollision(e,"y",-1),this.moveTillCollision(e,"x",-1)):this.gridster.$options.compactType===A.CompactLeftAndUp?(this.moveTillCollision(e,"x",-1),this.moveTillCollision(e,"y",-1)):this.gridster.$options.compactType===A.CompactUpAndRight?(this.moveTillCollision(e,"y",-1),this.moveTillCollision(e,"x",1)):this.gridster.$options.compactType===A.CompactDown?this.moveTillCollision(e,"y",1):this.gridster.$options.compactType===A.CompactDownAndLeft?(this.moveTillCollision(e,"y",1),this.moveTillCollision(e,"x",-1)):this.gridster.$options.compactType===A.CompactLeftAndDown?(this.moveTillCollision(e,"x",-1),this.moveTillCollision(e,"y",1)):this.gridster.$options.compactType===A.CompactDownAndRight?(this.moveTillCollision(e,"y",1),this.moveTillCollision(e,"x",1)):this.gridster.$options.compactType===A.CompactRightAndDown&&(this.moveTillCollision(e,"x",1),this.moveTillCollision(e,"y",1)))}},{key:"checkCompactMovement",value:function(e,t){var i=this,n=!1;this.gridster.grid.forEach(function(r){!1!==r.$item.compactEnabled&&i.moveTillCollision(r.$item,e,t)&&(n=!0,r.item[e]=r.$item[e],r.itemChanged())}),n&&this.checkCompact()}},{key:"moveTillCollision",value:function(e,t,i){return e[t]+=i,this.gridster.checkCollision(e)?(e[t]-=i,!1):(this.moveTillCollision(e,t,i),!0)}}]),e}(),O={gridType:I.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:A.None,mobileBreakpoint:640,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:_.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,disableAutoPositionOnConflict:!1,dirType:z.LTR},P=function(){function e(){Oo(this,e)}return Fo(e,null,[{key:"merge",value:function(t,i,n){for(var r in i)void 0!==i[r]&&n.hasOwnProperty(r)&&(t[r]="object"==typeof i[r]?e.merge(t[r],i[r],n[r]):i[r]);return t}},{key:"debounce",value:function(e,t){var i;return function(){var n=this,r=arguments,o=function(){i=void 0,e.apply(n,r)};clearTimeout(i),i=setTimeout(o,t)}}},{key:"checkTouchEvent",value:function(e){void 0===e.clientX&&e.touches&&(e.touches&&e.touches.length?(e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY):e.changedTouches&&e.changedTouches.length&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY))}},{key:"checkContentClassForEvent",value:function(t,i){if(t.$options.draggable.ignoreContent){if(!e.checkDragHandleClass(i.target,i.currentTarget,t.$options.draggable.dragHandleClass,t.$options.draggable.ignoreContentClass))return!0}else if(e.checkContentClass(i.target,i.currentTarget,t.$options.draggable.ignoreContentClass))return!0;return!1}},{key:"checkContentClassForEmptyCellClickEvent",value:function(t,i){return e.checkContentClass(i.target,i.currentTarget,t.$options.draggable.ignoreContentClass)||e.checkContentClass(i.target,i.currentTarget,t.$options.draggable.dragHandleClass)}},{key:"checkDragHandleClass",value:function(t,i,n,r){if(!t||t===i)return!1;if(t.hasAttribute("class")){var o=t.getAttribute("class").split(" ");if(o.indexOf(n)>-1)return!0;if(o.indexOf(r)>-1)return!1}return e.checkDragHandleClass(t.parentNode,i,n,r)}},{key:"checkContentClass",value:function(t,i,n){return!(!t||t===i)&&(!!(t.hasAttribute("class")&&t.getAttribute("class").split(" ").indexOf(n)>-1)||e.checkContentClass(t.parentNode,i,n))}},{key:"compareItems",value:function(e,t){return e.y>t.y?-1:e.y<t.y?1:e.x>t.x?-1:1}}]),e}(),F=function(){function e(t){Oo(this,e),this.gridster=t}return Fo(e,[{key:"destroy",value:function(){delete this.initialItem,delete this.gridster.movingItem,this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridster,this.emptyCellExit&&(this.emptyCellExit(),this.emptyCellExit=null)}},{key:"updateOptions",value:function(){var e=this;this.gridster.$options.enableEmptyCellClick&&!this.emptyCellClick&&this.gridster.options.emptyCellClickCallback?(this.emptyCellClick=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb.bind(this)),this.emptyCellClickTouch=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb.bind(this))):!this.gridster.$options.enableEmptyCellClick&&this.emptyCellClick&&this.emptyCellClickTouch&&(this.emptyCellClick(),this.emptyCellClickTouch(),this.emptyCellClick=null,this.emptyCellClickTouch=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.emptyCellContextMenu&&this.gridster.options.emptyCellContextMenuCallback?this.emptyCellContextMenu=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb.bind(this)):!this.gridster.$options.enableEmptyCellContextMenu&&this.emptyCellContextMenu&&(this.emptyCellContextMenu(),this.emptyCellContextMenu=null),this.gridster.$options.enableEmptyCellDrop&&!this.emptyCellDrop&&this.gridster.options.emptyCellDropCallback?(this.emptyCellDrop=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop.bind(this)),this.gridster.zone.runOutsideAngular(function(){e.emptyCellMove=e.gridster.renderer.listen(e.gridster.el,"dragover",e.emptyCellDragOver.bind(e))}),this.emptyCellExit=this.gridster.renderer.listen("document","dragend",function(){e.gridster.movingItem=null,e.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.emptyCellDrop&&this.emptyCellMove&&this.emptyCellExit&&(this.emptyCellDrop(),this.emptyCellMove(),this.emptyCellExit(),this.emptyCellMove=null,this.emptyCellDrop=null,this.emptyCellExit=null),this.gridster.$options.enableEmptyCellDrag&&!this.emptyCellDrag&&this.gridster.options.emptyCellDragCallback?(this.emptyCellDrag=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown.bind(this)),this.emptyCellDragTouch=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown.bind(this))):!this.gridster.$options.enableEmptyCellDrag&&this.emptyCellDrag&&this.emptyCellDragTouch&&(this.emptyCellDrag(),this.emptyCellDragTouch(),this.emptyCellDrag=null,this.emptyCellDragTouch=null)}},{key:"emptyCellClickCb",value:function(e){if(this.gridster&&!this.gridster.movingItem&&!P.checkContentClassForEmptyCellClickEvent(this.gridster,e)){var t=this.getValidItemFromEvent(e);!t||(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(e,t),this.gridster.cdRef.markForCheck())}}},{key:"emptyCellContextMenuCb",value:function(e){if(!this.gridster.movingItem&&!P.checkContentClassForEmptyCellClickEvent(this.gridster,e)){e.preventDefault(),e.stopPropagation();var t=this.getValidItemFromEvent(e);!t||(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(e,t),this.gridster.cdRef.markForCheck())}}},{key:"emptyCellDragDrop",value:function(e){var t=this.getValidItemFromEvent(e);!t||(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(e,t),this.gridster.cdRef.markForCheck())}},{key:"emptyCellDragOver",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.getValidItemFromEvent(e);t?(e.dataTransfer&&(e.dataTransfer.dropEffect="move"),this.gridster.movingItem=t):(e.dataTransfer&&(e.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()}},{key:"emptyCellMouseDown",value:function(e){var t=this;if(!P.checkContentClassForEmptyCellClickEvent(this.gridster,e)){e.preventDefault(),e.stopPropagation();var i=this.getValidItemFromEvent(e);!i||1!==e.buttons||(this.initialItem=i,this.gridster.movingItem=i,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(function(){t.emptyCellMMove=t.gridster.renderer.listen("window","mousemove",t.emptyCellMouseMove.bind(t)),t.emptyCellMMoveTouch=t.gridster.renderer.listen("window","touchmove",t.emptyCellMouseMove.bind(t))}),this.emptyCellUp=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp.bind(this)),this.emptyCellUpTouch=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp.bind(this)))}}},{key:"emptyCellMouseMove",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.getValidItemFromEvent(e,this.initialItem);!t||(this.gridster.movingItem=t,this.gridster.previewStyle())}},{key:"emptyCellMouseUp",value:function(e){var t=this;this.emptyCellMMove(),this.emptyCellMMoveTouch(),this.emptyCellUp(),this.emptyCellUpTouch();var i=this.getValidItemFromEvent(e,this.initialItem);i&&(this.gridster.movingItem=i),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(e,this.gridster.movingItem),setTimeout(function(){t.initialItem=null,t.gridster&&(t.gridster.movingItem=null,t.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()}},{key:"getPixelsX",value:function(e,t){var i=this.gridster.options.scale;return i?(e.clientX-t.left)/i+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():e.clientX+this.gridster.el.scrollLeft-t.left-this.gridster.gridRenderer.getLeftMargin()}},{key:"getPixelsY",value:function(e,t){var i=this.gridster.options.scale;return i?(e.clientY-t.top)/i+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():e.clientY+this.gridster.el.scrollTop-t.top-this.gridster.gridRenderer.getTopMargin()}},{key:"getValidItemFromEvent",value:function(e,t){e.preventDefault(),e.stopPropagation(),P.checkTouchEvent(e);var i=this.gridster.el.getBoundingClientRect(),n=this.getPixelsX(e,i),r=this.getPixelsY(e,i),o={x:this.gridster.pixelsToPositionX(n,Math.floor,!0),y:this.gridster.pixelsToPositionY(r,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(t&&(o.cols=Math.min(Math.abs(t.x-o.x)+1,this.gridster.$options.emptyCellDragMaxCols),o.rows=Math.min(Math.abs(t.y-o.y)+1,this.gridster.$options.emptyCellDragMaxRows),t.x<o.x?o.x=t.x:t.x-o.x>this.gridster.$options.emptyCellDragMaxCols-1&&(o.x=this.gridster.movingItem?this.gridster.movingItem.x:0),t.y<o.y?o.y=t.y:t.y-o.y>this.gridster.$options.emptyCellDragMaxRows-1&&(o.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(o))return o}}]),e}(),D=function(){function e(t){Oo(this,e),this.gridster=t}return Fo(e,[{key:"destroy",value:function(){delete this.gridster}},{key:"updateItem",value:function(e,t,i){if(this.gridster.mobile)this.clearCellPosition(i,e),i.setStyle(e,"height",this.gridster.$options.keepFixedHeightInMobile?(t.rows-1)*this.gridster.$options.margin+t.rows*this.gridster.$options.fixedRowHeight+"px":t.rows*this.gridster.curWidth/t.cols+"px"),i.setStyle(e,"width",this.gridster.$options.keepFixedWidthInMobile?this.gridster.$options.fixedColWidth+"px":""),i.setStyle(e,"margin-bottom",this.gridster.$options.margin+"px"),i.setStyle(e,z.LTR?"margin-right":"margin-left","");else{var n=Math.round(this.gridster.curColWidth*t.x),r=Math.round(this.gridster.curRowHeight*t.y),o=this.gridster.curColWidth*t.cols-this.gridster.$options.margin,s=this.gridster.curRowHeight*t.rows-this.gridster.$options.margin;this.setCellPosition(i,e,n,r),i.setStyle(e,"width",o+"px"),i.setStyle(e,"height",s+"px");var a=null,l=null;this.gridster.$options.outerMargin&&(this.gridster.rows===t.rows+t.y&&(a=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===t.cols+t.x&&(l=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),i.setStyle(e,"margin-bottom",a),i.setStyle(e,z.LTR?"margin-right":"margin-left",l)}}},{key:"updateGridster",value:function(){var e="",t="",i="",n="";if(this.gridster.$options.gridType===I.Fit)e=I.Fit,t=I.ScrollVertical,i=I.ScrollHorizontal,n=I.Fixed;else if(this.gridster.$options.gridType===I.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,e=I.ScrollVertical,t=I.Fit,i=I.ScrollHorizontal,n=I.Fixed;else if(this.gridster.$options.gridType===I.ScrollHorizontal){var r=this.gridster.$options.rowHeightRatio;this.gridster.curColWidth=this.gridster.curRowHeight*(r>=1?r:r+1),e=I.ScrollHorizontal,t=I.Fit,i=I.ScrollVertical,n=I.Fixed}else this.gridster.$options.gridType===I.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),e=I.Fixed,t=I.Fit,i=I.ScrollVertical,n=I.ScrollHorizontal):this.gridster.$options.gridType===I.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),e=I.ScrollVertical,t=I.Fit,i=I.ScrollHorizontal,n=I.Fixed):this.gridster.$options.gridType===I.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),e=I.ScrollHorizontal,t=I.Fit,i=I.ScrollVertical,n=I.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==I.Fit?this.gridster.renderer.removeClass(this.gridster.el,e):this.gridster.renderer.addClass(this.gridster.el,e),this.gridster.renderer.removeClass(this.gridster.el,t),this.gridster.renderer.removeClass(this.gridster.el,i),this.gridster.renderer.removeClass(this.gridster.el,n)}},{key:"getGridColumnStyle",value:function(e){return Object.assign(Object.assign({},this.getLeftPosition(this.gridster.curColWidth*e)),{width:this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}},{key:"getGridRowStyle",value:function(e){return Object.assign(Object.assign({},this.getTopPosition(this.gridster.curRowHeight*e)),{width:this.gridster.gridColumns.length*this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}},{key:"getLeftPosition",value:function(e){var t=this.gridster.$options.dirType===z.RTL?-e:e;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+t+"px)"}:{left:this.getLeftMargin()+t+"px"}}},{key:"getTopPosition",value:function(e){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+e+"px)"}:{top:this.getTopMargin()+e+"px"}}},{key:"clearCellPosition",value:function(e,t){this.gridster.$options.useTransformPositioning?e.setStyle(t,"transform",""):(e.setStyle(t,"top",""),e.setStyle(t,"left",""))}},{key:"setCellPosition",value:function(e,t,i,n){var r=this.gridster.$options.dirType===z.RTL?-i:i;this.gridster.$options.useTransformPositioning?e.setStyle(t,"transform","translate3d("+r+"px, "+n+"px, 0)"):(e.setStyle(t,"left",this.getLeftMargin()+r+"px"),e.setStyle(t,"top",this.getTopMargin()+n+"px"))}},{key:"getLeftMargin",value:function(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}},{key:"getTopMargin",value:function(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}]),e}(),$=function(){var e=function(){function e(t,i){Oo(this,e),this.renderer=i,this.el=t.nativeElement}return Fo(e,[{key:"ngOnInit",value:function(){var e=this;this.sub=this.previewStyle$.subscribe(function(t){return e.previewStyle(t)})}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe(),delete this.el}},{key:"previewStyle",value:function(e){e?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,e,this.renderer)):this.renderer.setStyle(this.el,"display","")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.Qsj))},e.\u0275cmp=n.Xpm({type:e,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},decls:0,vars:0,template:function(e,t){},styles:["gridster-preview{position:absolute;display:none;background:rgba(0,0,0,.15)}\n"],encapsulation:2}),e}(),M=function(){var e=function(){function e(t,i,r,o){Oo(this,e),this.renderer=i,this.cdRef=r,this.zone=o,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.previewStyle$=new n.vpe,this.el=t.nativeElement,this.$options=JSON.parse(JSON.stringify(O)),this.calculateLayoutDebounce=P.debounce(this.calculateLayout.bind(this),0),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new F(this),this.compact=new Z(this),this.gridRenderer=new D(this)}return Fo(e,[{key:"checkCollisionTwoItems",value:function(e,t){if(!(e.x<t.x+t.cols&&e.x+e.cols>t.x&&e.y<t.y+t.rows&&e.y+e.rows>t.y))return!1;if(!this.$options.allowMultiLayer)return!0;var i=this.$options.defaultLayerIndex;return(void 0===e.layerIndex?i:e.layerIndex)===(void 0===t.layerIndex?i:t.layerIndex)}},{key:"ngOnInit",value:function(){this.options.initCallback&&this.options.initCallback(this)}},{key:"ngOnChanges",value:function(e){var t=this;e.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged.bind(this),resize:this.onResize.bind(this),getNextPossiblePosition:this.getNextPossiblePosition.bind(this),getFirstPossiblePosition:this.getFirstPossiblePosition.bind(this),getLastPossiblePosition:this.getLastPossiblePosition.bind(this),getItemComponent:function(e){return t.getItemComponent(e)}},this.columns=this.$options.minCols,this.rows=this.$options.minRows,this.setGridSize(),this.calculateLayout())}},{key:"resize",value:function(){var e,t;"fit"!==this.$options.gridType||this.mobile?(t=this.el.clientWidth,e=this.el.clientHeight):(t=this.el.offsetWidth,e=this.el.offsetHeight),(t!==this.curWidth||e!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}},{key:"setOptions",value:function(){this.$options=P.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize.bind(this)),this.emptyCell.updateOptions()}},{key:"optionsChanged",value:function(){this.setOptions();for(var e=this.grid.length-1;e>=0;e--)this.grid[e].updateOptions();this.calculateLayout()}},{key:"ngOnDestroy",value:function(){this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),delete this.emptyCell,this.compact.destroy(),delete this.compact}},{key:"onResize",value:function(){this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())}},{key:"checkIfToResize",value:function(){var e=this.el.clientWidth,t=this.el.offsetWidth,i=this.el.scrollWidth,n=this.el.clientHeight,r=this.el.offsetHeight,o=this.el.scrollHeight;return!(e<t&&o>r&&o-r<t-e||n<r&&i>t&&i-t<r-n)}},{key:"setGridSize",value:function(){var e,t,i=this.el;this.$options.setGridSize||this.$options.gridType===I.Fit&&!this.mobile?(e=i.offsetWidth,t=i.offsetHeight):(e=i.clientWidth,t=i.clientHeight),this.curWidth=e,this.curHeight=t}},{key:"setGridDimensions",value:function(){this.setGridSize(),!this.mobile&&this.$options.mobileBreakpoint>this.curWidth?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&this.$options.mobileBreakpoint<this.curWidth&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));for(var e,t=this.$options.minRows,i=this.$options.minCols,n=this.grid.length-1;n>=0;n--)(e=this.grid[n]).notPlaced||(t=Math.max(t,e.$item.y+e.$item.rows),i=Math.max(i,e.$item.x+e.$item.cols));(this.columns!==i||this.rows!==t)&&(this.columns=i,this.rows=t,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}},{key:"calculateLayout",value:function(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){var e=-this.$options.margin;null!==this.$options.outerMarginLeft?(e+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(e+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(e+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(e+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-e)/this.columns;var t=-this.$options.margin;null!==this.$options.outerMarginTop?(t+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(t+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?(t+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(t+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-t)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();for(var i,n=this.grid.length-1;n>=0;n--)(i=this.grid[n]).setSize(),i.drag.toggle(),i.resize.toggle();setTimeout(this.resize.bind(this),100)}},{key:"updateGrid",value:function(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):("none"===this.$options.displayGrid||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=e.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=e.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}},{key:"addItem",value:function(e){void 0===e.$item.cols&&(e.$item.cols=this.$options.defaultItemCols,e.item.cols=e.$item.cols,e.itemChanged()),void 0===e.$item.rows&&(e.$item.rows=this.$options.defaultItemRows,e.item.rows=e.$item.rows,e.itemChanged()),-1===e.$item.x||-1===e.$item.y?this.autoPositionItem(e):this.checkCollision(e.$item)&&(this.$options.disableWarnings||(e.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(e.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?e.notPlaced=!0:this.autoPositionItem(e)),this.grid.push(e),this.calculateLayoutDebounce()}},{key:"removeItem",value:function(e){this.grid.splice(this.grid.indexOf(e),1),this.calculateLayoutDebounce(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(e.item,e)}},{key:"checkCollision",value:function(e){var t=!1;if(this.options.itemValidateCallback&&(t=!this.options.itemValidateCallback(e)),!t&&this.checkGridCollision(e)&&(t=!0),!t){var i=this.findItemWithItem(e);i&&(t=i)}return t}},{key:"checkGridCollision",value:function(e){var t=e.cols*e.rows;return!(e.y>-1&&e.x>-1&&e.cols+e.x<=this.$options.maxCols&&e.rows+e.y<=this.$options.maxRows&&e.cols<=(void 0===e.maxItemCols?this.$options.maxItemCols:e.maxItemCols)&&e.cols>=(void 0===e.minItemCols?this.$options.minItemCols:e.minItemCols)&&e.rows<=(void 0===e.maxItemRows?this.$options.maxItemRows:e.maxItemRows)&&e.rows>=(void 0===e.minItemRows?this.$options.minItemRows:e.minItemRows)&&(void 0===e.minItemArea?this.$options.minItemArea:e.minItemArea)<=t&&(void 0===e.maxItemArea?this.$options.maxItemArea:e.maxItemArea)>=t)}},{key:"findItemWithItem",value:function(e){for(var t,i=0;i<this.grid.length;i++)if((t=this.grid[i]).$item!==e&&this.checkCollisionTwoItems(t.$item,e))return t;return!1}},{key:"findItemsWithItem",value:function(e){for(var t,i=[],n=0;n<this.grid.length;n++)(t=this.grid[n]).$item!==e&&this.checkCollisionTwoItems(t.$item,e)&&i.push(t);return i}},{key:"autoPositionItem",value:function(e){this.getNextPossiblePosition(e.$item)?(e.notPlaced=!1,e.item.x=e.$item.x,e.item.y=e.$item.y,e.itemChanged()):(e.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(e.item,["cols","rows","x","y"])))}},{key:"getNextPossiblePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};-1===e.cols&&(e.cols=this.$options.defaultItemCols),-1===e.rows&&(e.rows=this.$options.defaultItemRows),this.setGridDimensions();for(var i,n=t.y||0;n<this.rows;n++)for(e.y=n,i=t.x||0;i<this.columns;i++)if(e.x=i,!this.checkCollision(e))return!0;var r=this.$options.maxRows>=this.rows+e.rows;return this.rows<=this.columns&&r||!(this.$options.maxCols>=this.columns+e.cols)?!!r&&(e.y=this.rows,e.x=0,!0):(e.x=this.columns,e.y=0,!0)}},{key:"getFirstPossiblePosition",value:function(e){var t=Object.assign({},e);return this.getNextPossiblePosition(t),t}},{key:"getLastPossiblePosition",value:function(e){var t={y:0,x:0};t=this.grid.reduce(function(e,t){var i={y:t.$item.y+t.$item.rows-1,x:t.$item.x+t.$item.cols-1};return 1===P.compareItems(e,i)?i:e},t);var i=Object.assign({},e);return this.getNextPossiblePosition(i,t),i}},{key:"pixelsToPositionX",value:function(e,t,i){var n=t(e/this.curColWidth);return i?n:Math.max(n,0)}},{key:"pixelsToPositionY",value:function(e,t,i){var n=t(e/this.curRowHeight);return i?n:Math.max(n,0)}},{key:"positionXToPixels",value:function(e){return e*this.curColWidth}},{key:"positionYToPixels",value:function(e){return e*this.curRowHeight}},{key:"getItemComponent",value:function(e){return this.grid.find(function(t){return t.item===e})}},{key:"checkCollisionForSwaping",value:function(e){var t=!1;if(this.options.itemValidateCallback&&(t=!this.options.itemValidateCallback(e)),!t&&this.checkGridCollision(e)&&(t=!0),!t){var i=this.findItemWithItemForSwapping(e);i&&(t=i)}return t}},{key:"findItemWithItemForSwapping",value:function(t){for(var i,n=this.grid.length-1;n>-1;n--)if((i=this.grid[n]).$item!==t&&e.checkCollisionTwoItemsForSwaping(i.$item,t))return i;return!1}},{key:"previewStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.movingItem?(this.compact&&e&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next()}}],[{key:"checkCollisionTwoItemsForSwaping",value:function(e,t){return e.x+(1===e.cols?0:1)<t.x+t.cols&&e.x+e.cols>t.x+(1===t.cols?0:1)&&e.y+(1===e.rows?0:1)<t.y+t.rows&&e.y+e.rows>t.y+(1===t.rows?0:1)}},{key:"getNewArrayLength",value:function(e,t,i){var n=Math.max(e,Math.floor(t/i));return n<0?0:Number.isFinite(n)?Math.floor(n):0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(n.sBO),n.Y36(n.R0b))},e.\u0275cmp=n.Xpm({type:e,selectors:[["gridster"]],inputs:{options:"options"},features:[n.TTD],ngContentSelectors:a,decls:4,vars:4,consts:[["class","gridster-column",3,"ngStyle",4,"ngFor","ngForOf"],["class","gridster-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"],[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"]],template:function(e,t){1&e&&(n.F$t(),n.YNc(0,o,1,1,"div",0),n.YNc(1,s,1,1,"div",1),n.Hsn(2),n._UZ(3,"gridster-preview",2)),2&e&&(n.Q6J("ngForOf",t.gridColumns),n.xp6(1),n.Q6J("ngForOf",t.gridRows),n.xp6(2),n.Q6J("gridRenderer",t.gridRenderer)("previewStyle$",t.previewStyle$))},directives:[r.sg,$,r.PC],styles:["gridster{position:relative;box-sizing:border-box;background:grey;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}\n"],encapsulation:2}),e}(),R=function(){function e(t){Oo(this,e),this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=t,this.gridster=t.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}return Fo(e,[{key:"destroy",value:function(){delete this.gridster,delete this.gridsterItem}},{key:"pushItems",value:function(e,t){if(this.gridster.$options.pushItems&&!t){this.pushedItemsOrder=[],this.iteration=0;var i=this.push(this.gridsterItem,e);return i||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],i}return!1}},{key:"restoreTempItems",value:function(){for(var e=this.pushedItemsTemp.length-1;e>-1;e--)this.removeFromTempPushed(this.pushedItemsTemp[e])}},{key:"restoreItems",value:function(){for(var e,t=0,i=this.pushedItems.length;t<i;t++)(e=this.pushedItems[t]).$item.x=e.item.x||0,e.$item.y=e.item.y||0,e.setSize();this.pushedItems=[],this.pushedItemsPath=[]}},{key:"setPushedItems",value:function(){for(var e,t=0,i=this.pushedItems.length;t<i;t++)(e=this.pushedItems[t]).checkItemChanges(e.$item,e.item);this.pushedItems=[],this.pushedItemsPath=[]}},{key:"checkPushBack",value:function(){for(var e=this.pushedItems.length-1,t=!1;e>-1;e--)this.checkPushedItem(this.pushedItems[e],e)&&(t=!0);t&&this.checkPushBack()}},{key:"push",value:function(e,t){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(e.$item)||""===t)return!1;var i=this.gridster.findItemsWithItem(e.$item),n=t===this.fromNorth||t===this.fromWest;i.sort(function(e,t){return n?t.$item.y-e.$item.y||t.$item.x-e.$item.x:e.$item.y-t.$item.y||e.$item.x-t.$item.x});for(var r,o=0,s=!0,a=[];o<i.length;o++)if((r=i[o])!==this.gridsterItem){if(!r.canBeDragged()){s=!1;break}var l=this.pushedItemsTemp.indexOf(r);if(l>-1&&this.pushedItemsTempPath[l].length>10){s=!1;break}if(this.tryPattern[t][0].call(this,r,e))this.pushedItemsOrder.push(r),a.push(r);else if(this.tryPattern[t][1].call(this,r,e))this.pushedItemsOrder.push(r),a.push(r);else if(this.tryPattern[t][2].call(this,r,e))this.pushedItemsOrder.push(r),a.push(r);else{if(!this.tryPattern[t][3].call(this,r,e)){s=!1;break}this.pushedItemsOrder.push(r),a.push(r)}}if(!s&&(o=this.pushedItemsOrder.lastIndexOf(a[0]))>-1)for(var c=this.pushedItemsOrder.length-1;c>=o;c--)r=this.pushedItemsOrder[c],this.pushedItemsOrder.pop(),this.removeFromTempPushed(r),this.removeFromPushedItem(r);return this.iteration++,s}},{key:"trySouth",value:function(e,t){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(e),e.$item.y=t.$item.y+t.$item.rows,this.push(e,this.fromNorth)?(e.setSize(),this.addToPushed(e),!0):(this.removeFromTempPushed(e),!1))}},{key:"tryNorth",value:function(e,t){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(e),e.$item.y=t.$item.y-e.$item.rows,this.push(e,this.fromSouth)?(e.setSize(),this.addToPushed(e),!0):(this.removeFromTempPushed(e),!1))}},{key:"tryEast",value:function(e,t){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(e),e.$item.x=t.$item.x+t.$item.cols,this.push(e,this.fromWest)?(e.setSize(),this.addToPushed(e),!0):(this.removeFromTempPushed(e),!1))}},{key:"tryWest",value:function(e,t){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(e),e.$item.x=t.$item.x-e.$item.cols,this.push(e,this.fromEast)?(e.setSize(),this.addToPushed(e),!0):(this.removeFromTempPushed(e),!1))}},{key:"addToTempPushed",value:function(e){var t=this.pushedItemsTemp.indexOf(e);-1===t&&(t=this.pushedItemsTemp.push(e)-1,this.pushedItemsTempPath[t]=[]),this.pushedItemsTempPath[t].push({x:e.$item.x,y:e.$item.y})}},{key:"removeFromTempPushed",value:function(e){var t=this.pushedItemsTemp.indexOf(e),i=this.pushedItemsTempPath[t].pop();!i||(e.$item.x=i.x,e.$item.y=i.y,e.setSize(),this.pushedItemsTempPath[t].length||(this.pushedItemsTemp.splice(t,1),this.pushedItemsTempPath.splice(t,1)))}},{key:"addToPushed",value:function(e){if(this.pushedItems.indexOf(e)<0)this.pushedItems.push(e),this.pushedItemsPath.push([{x:e.item.x||0,y:e.item.y||0},{x:e.$item.x,y:e.$item.y}]);else{var t=this.pushedItems.indexOf(e);this.pushedItemsPath[t].push({x:e.$item.x,y:e.$item.y})}}},{key:"removeFromPushed",value:function(e){e>-1&&(this.pushedItems.splice(e,1),this.pushedItemsPath.splice(e,1))}},{key:"removeFromPushedItem",value:function(e){var t=this.pushedItems.indexOf(e);t>-1&&(this.pushedItemsPath[t].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1)))}},{key:"checkPushedItem",value:function(e,t){for(var i,n,r,o=this.pushedItemsPath[t],s=o.length-2,a=!1;s>-1;s--)i=o[s],n=e.$item.x,r=e.$item.y,e.$item.x=i.x,e.$item.y=i.y,this.gridster.findItemWithItem(e.$item)?(e.$item.x=n,e.$item.y=r):(e.setSize(),o.splice(s+1,o.length-s-1),a=!0);return o.length<2&&this.removeFromPushed(t),a}}]),e}();function J(e,t,i,n,r,o,s,a,l,c){v=e.$options.scrollSensitivity,y=e.$options.scrollSpeed,b=e.el,C=l,x=c;var u=b.offsetWidth,d=b.scrollLeft,p=b.scrollTop,h=i-p;if(!e.$options.disableScrollVertical)if(s.clientY<o.clientY&&b.offsetHeight+p-i-r<v){if(j(),C&&x&&!x.s||S)return;S=L(1,a,s)}else if(s.clientY>o.clientY&&p>0&&h<v){if(V(),C&&x&&!x.n||T)return;T=L(-1,a,s)}else s.clientY!==o.clientY&&N();var f=t-d;if(!e.$options.disableScrollHorizontal)if(s.clientX<o.clientX&&d+u-t-n<=v){if(Y(),C&&x&&!x.e||w)return;w=E(1,a,s)}else if(s.clientX>o.clientX&&d>0&&f<v){if(Q(),C&&x&&!x.w||k)return;k=E(-1,a,s)}else s.clientX!==o.clientX&&B()}function L(e,t,i){var n=i.clientY;return setInterval(function(){(!b||-1===e&&b.scrollTop-y<0)&&N(),b.scrollTop+=e*y,n+=e*y,t({clientX:i.clientX,clientY:n})},50)}function E(e,t,i){var n=i.clientX;return setInterval(function(){(!b||-1===e&&b.scrollLeft-y<0)&&B(),b.scrollLeft+=e*y,t({clientX:n+=e*y,clientY:i.clientY})},50)}function q(){B(),N(),b=null}function B(){Q(),Y()}function N(){j(),V()}function Q(){w&&(clearInterval(w),w=0)}function Y(){k&&(clearInterval(k),k=0)}function V(){S&&(clearInterval(S),S=0)}function j(){T&&(clearInterval(T),T=0)}var W=function(){function e(t){Oo(this,e),this.gridsterItem=t,this.gridster=t.gridster}return Fo(e,[{key:"destroy",value:function(){delete this.gridster,delete this.gridsterItem,delete this.swapedItem}},{key:"swapItems",value:function(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}},{key:"checkSwapBack",value:function(){if(this.swapedItem){var e=this.swapedItem.$item.x,t=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=e,this.swapedItem.$item.y=t):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}},{key:"restoreSwapItem",value:function(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}},{key:"setSwapItem",value:function(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}},{key:"checkSwap",value:function(e){var t;if((t=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(e.$item):this.gridster.checkCollision(e.$item))&&!0!==t&&t.canBeDragged()){var i=t,n=i.$item.x,r=i.$item.y,o=e.$item.x,s=e.$item.y,a=o-n,l=s-r;i.$item.x=e.item.x-a,i.$item.y=e.item.y-l,e.$item.x=i.item.x+a,e.$item.y=i.item.y+l,this.gridster.checkCollision(i.$item)||this.gridster.checkCollision(e.$item)?(e.$item.x=o,e.$item.y=s,i.$item.x=n,i.$item.y=r):(i.setSize(),this.swapedItem=i,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}]),e}(),H=function(){function e(t,i,n){Oo(this,e),this.zone=n,this.collision=!1,this.gridsterItem=t,this.gridster=i,this.lastMouse={clientX:0,clientY:0},this.path=[]}return Fo(e,[{key:"destroy",value:function(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),delete this.gridsterItem,delete this.gridster,delete this.collision,this.mousedown&&(this.mousedown(),this.touchstart())}},{key:"dragStart",value:function(e){var t=this;e.which&&1!==e.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,e),e.stopPropagation(),e.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular(function(){t.mousemove=t.gridsterItem.renderer.listen("document","mousemove",t.dragFunction),t.touchmove=t.gridster.renderer.listen(t.gridster.el,"touchmove",t.dragFunction)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=e.clientX,this.originalClientY=e.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.diffLeft=this.gridster.$options.dirType===z.RTL?e.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:e.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=e.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new R(this.gridsterItem),this.swap=new W(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}},{key:"dragMove",value:function(e){e.stopPropagation(),e.preventDefault(),P.checkTouchEvent(e),this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,J(this.gridster,this.left,this.top,this.width,this.height,e,this.lastMouse,this.calculateItemPositionFromMousePosition.bind(this)),this.calculateItemPositionFromMousePosition(e)}},{key:"calculateItemPositionFromMousePosition",value:function(e){var t=this;this.gridster.options.scale?this.calculateItemPositionWithScale(e,this.gridster.options.scale):this.calculateItemPositionWithoutScale(e),this.calculateItemPosition(),this.lastMouse.clientX=e.clientX,this.lastMouse.clientY=e.clientY,this.zone.run(function(){t.gridster.updateGrid()})}},{key:"calculateItemPositionWithScale",value:function(e,t){this.left=this.gridster.$options.dirType===z.RTL?this.gridster.el.scrollWidth-this.originalClientX+(e.clientX-this.originalClientX)/t+this.diffLeft:this.originalClientX+(e.clientX-this.originalClientX)/t+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(e.clientY-this.originalClientY)/t+this.offsetTop-this.diffTop}},{key:"calculateItemPositionWithoutScale",value:function(e){this.left=this.gridster.$options.dirType===z.RTL?this.gridster.el.scrollWidth-e.clientX+this.diffLeft:e.clientX+this.offsetLeft-this.diffLeft,this.top=e.clientY+this.offsetTop-this.diffTop}},{key:"dragStop",value:function(e){var t=this;e.stopPropagation(),e.preventDefault(),q(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,e)).then(this.makeDrag.bind(this),this.cancelDrag.bind(this)):this.makeDrag(),setTimeout(function(){t.gridster&&(t.gridster.movingItem=null,t.gridster.previewStyle(!0))})}},{key:"cancelDrag",value:function(){this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}},{key:"makeDrag",value:function(){this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&!0!==this.collision&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}},{key:"calculateItemPosition",value:function(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){var e=this.path[this.path.length-1],t="";e.x<this.gridsterItem.$item.x?t=this.push.fromWest:e.x>this.gridsterItem.$item.x?t=this.push.fromEast:e.y<this.gridsterItem.$item.y?t=this.push.fromNorth:e.y>this.gridsterItem.$item.y&&(t=this.push.fromSouth),this.push.pushItems(t,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}this.gridster.previewStyle(!0)}},{key:"toggle",value:function(){var e=this.gridsterItem.canBeDragged();!this.enabled&&e?(this.enabled=!this.enabled,this.dragStartFunction=this.dragStartDelay.bind(this),this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartFunction),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartFunction)):this.enabled&&!e&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}},{key:"dragStartDelay",value:function(e){var t=this;if(!(e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("gridster-item-resizable-handler")>-1||P.checkContentClassForEvent(this.gridster,e)))if(P.checkTouchEvent(e),this.gridster.$options.draggable.delayStart)var i=setTimeout(function(){t.dragStart(e),c()},this.gridster.$options.draggable.delayStart),n=this.gridsterItem.renderer.listen("document","mouseup",c),r=this.gridsterItem.renderer.listen("document","mouseleave",c),o=this.gridsterItem.renderer.listen("window","blur",c),s=this.gridsterItem.renderer.listen("document","touchmove",function(t){P.checkTouchEvent(t),(Math.abs(t.clientX-e.clientX)>9||Math.abs(t.clientY-e.clientY)>9)&&c()}),a=this.gridsterItem.renderer.listen("document","touchend",c),l=this.gridsterItem.renderer.listen("document","touchcancel",c);else this.dragStart(e);function c(){clearTimeout(i),o(),n(),r(),s(),a(),l()}}}]),e}(),U=function(){function e(t){Oo(this,e),this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=t,this.gridster=t.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}return Fo(e,[{key:"destroy",value:function(){delete this.gridster,delete this.gridsterItem}},{key:"pushItems",value:function(e){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,e)}},{key:"restoreItems",value:function(){for(var e,t=0,i=this.pushedItems.length;t<i;t++)(e=this.pushedItems[t]).$item.x=e.item.x||0,e.$item.y=e.item.y||0,e.$item.cols=e.item.cols||1,e.$item.row=e.item.row||1,e.setSize();this.pushedItems=[],this.pushedItemsPath=[]}},{key:"setPushedItems",value:function(){for(var e,t=0,i=this.pushedItems.length;t<i;t++)(e=this.pushedItems[t]).checkItemChanges(e.$item,e.item);this.pushedItems=[],this.pushedItemsPath=[]}},{key:"checkPushBack",value:function(){for(var e=this.pushedItems.length-1,t=!1;e>-1;e--)this.checkPushedItem(this.pushedItems[e],e)&&(t=!0);t&&this.checkPushBack()}},{key:"push",value:function(e,t){var i=this.gridster.checkCollision(e.$item);if(i&&!0!==i&&i!==this.gridsterItem&&i.canBeResized()){if(this.tryPattern[t].call(this,i,e,t))return!0}else if(!1===i)return!0;return!1}},{key:"trySouth",value:function(e,t,i){var n=e.$item.y,r=e.$item.rows;return e.$item.y=t.$item.y+t.$item.rows,e.$item.rows=r+n-e.$item.y,this.gridster.checkCollisionTwoItems(e.$item,t.$item)||this.gridster.checkGridCollision(e.$item)?(e.$item.y=n,e.$item.rows=r,!1):(e.setSize(),this.addToPushed(e),this.push(t,i),!0)}},{key:"tryNorth",value:function(e,t,i){var n=e.$item.rows;return e.$item.rows=t.$item.y-e.$item.y,this.gridster.checkCollisionTwoItems(e.$item,t.$item)||this.gridster.checkGridCollision(e.$item)?(e.$item.rows=n,!1):(e.setSize(),this.addToPushed(e),this.push(t,i),!0)}},{key:"tryEast",value:function(e,t,i){var n=e.$item.x,r=e.$item.cols;return e.$item.x=t.$item.x+t.$item.cols,e.$item.cols=r+n-e.$item.x,this.gridster.checkCollisionTwoItems(e.$item,t.$item)||this.gridster.checkGridCollision(e.$item)?(e.$item.x=n,e.$item.cols=r,!1):(e.setSize(),this.addToPushed(e),this.push(t,i),!0)}},{key:"tryWest",value:function(e,t,i){var n=e.$item.cols;return e.$item.cols=t.$item.x-e.$item.x,this.gridster.checkCollisionTwoItems(e.$item,t.$item)||this.gridster.checkGridCollision(e.$item)?(e.$item.cols=n,!1):(e.setSize(),this.addToPushed(e),this.push(t,i),!0)}},{key:"addToPushed",value:function(e){if(this.pushedItems.indexOf(e)<0)this.pushedItems.push(e),this.pushedItemsPath.push([{x:e.item.x||0,y:e.item.y||0,cols:e.item.cols||0,rows:e.item.rows||0},{x:e.$item.x,y:e.$item.y,cols:e.$item.cols,rows:e.$item.rows}]);else{var t=this.pushedItems.indexOf(e);this.pushedItemsPath[t].push({x:e.$item.x,y:e.$item.y,cols:e.$item.cols,rows:e.$item.rows})}}},{key:"removeFromPushed",value:function(e){e>-1&&(this.pushedItems.splice(e,1),this.pushedItemsPath.splice(e,1))}},{key:"checkPushedItem",value:function(e,t){for(var i,n,r,o,s,a=this.pushedItemsPath[t],l=a.length-2;l>-1;l--)i=a[l],n=e.$item.x,r=e.$item.y,o=e.$item.cols,s=e.$item.rows,e.$item.x=i.x,e.$item.y=i.y,e.$item.cols=i.cols,e.$item.rows=i.rows,this.gridster.findItemWithItem(e.$item)?(e.$item.x=n,e.$item.y=r,e.$item.cols=o,e.$item.rows=s):(e.setSize(),a.splice(l+1,a.length-1-l));return a.length<2&&(this.removeFromPushed(t),!0)}}]),e}(),G=function(){function e(t,i,n){Oo(this,e),this.zone=n,this.gridsterItem=t,this.gridster=i,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={w:!1,e:!1,n:!1,s:!1}}return Fo(e,[{key:"destroy",value:function(){this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridsterItem,delete this.gridster}},{key:"dragStart",value:function(e){var t,i,n,r=this;e.which&&1!==e.which||(this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,e),e.stopPropagation(),e.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular(function(){r.mousemove=r.gridsterItem.renderer.listen("document","mousemove",r.dragFunction),r.touchmove=r.gridster.renderer.listen(r.gridster.el,"touchmove",r.dragFunction)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=e.clientX,this.lastMouse.clientY=e.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=e.clientX,this.originalClientY=e.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=e.clientX+this.offsetLeft-this.left,this.diffRight=e.clientX+this.offsetLeft-this.right,this.diffTop=e.clientY+this.offsetTop-this.top,this.diffBottom=e.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new R(this.gridsterItem),this.pushResize=new U(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),(null===(t=e.target)||void 0===t?void 0:t.hasAttribute("class"))&&e.target.getAttribute("class").split(" ").indexOf("handle-n")>-1?(this.resizeEventScrollType.n=!0,this.directionFunction=this.handleN):(null===(i=e.target)||void 0===i?void 0:i.hasAttribute("class"))&&e.target.getAttribute("class").split(" ").indexOf("handle-w")>-1?this.gridster.$options.dirType===z.RTL?(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):(null===(n=e.target)||void 0===n?void 0:n.hasAttribute("class"))&&e.target.getAttribute("class").split(" ").indexOf("handle-s")>-1?(this.resizeEventScrollType.s=!0,this.directionFunction=this.handleS):e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("handle-e")>-1?this.gridster.$options.dirType===z.RTL?(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("handle-nw")>-1?this.gridster.$options.dirType===z.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("handle-ne")>-1?this.gridster.$options.dirType===z.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("handle-sw")>-1?this.gridster.$options.dirType===z.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):e.target.hasAttribute("class")&&e.target.getAttribute("class").split(" ").indexOf("handle-se")>-1&&(this.gridster.$options.dirType===z.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE)))}},{key:"dragMove",value:function(e){var t=this;e.stopPropagation(),e.preventDefault(),P.checkTouchEvent(e),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,J(this.gridster,this.left,this.top,this.width,this.height,e,this.lastMouse,this.directionFunction.bind(this),!0,this.resizeEventScrollType);var i=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(e.clientX-this.originalClientX)/i,clientY:this.originalClientY+(e.clientY-this.originalClientY)/i}),this.lastMouse.clientX=e.clientX,this.lastMouse.clientY=e.clientY,this.zone.run(function(){t.gridster.updateGrid()})}},{key:"dragStop",value:function(e){var t=this;e.stopPropagation(),e.preventDefault(),q(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,e)).then(this.makeResize.bind(this),this.cancelResize.bind(this)):this.makeResize(),setTimeout(function(){t.gridsterItem.renderer.removeClass(t.gridsterItem.el,"gridster-item-resizing"),t.gridster&&(t.gridster.movingItem=null,t.gridster.previewStyle())})}},{key:"cancelResize",value:function(){this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}},{key:"makeResize",value:function(){this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}},{key:"handleN",value:function(e){if(this.top=e.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight,this.top=this.bottom-this.minHeight),this.newPosition=this.gridster.pixelsToPositionY(this.top+this.margin,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)}},{key:"handleW",value:function(e){if(this.left=(this.gridster.$options.dirType===z.RTL?this.originalClientX+(this.originalClientX-e.clientX):e.clientX)+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width&&(this.width=this.minWidth,this.left=this.right-this.minWidth),this.newPosition=this.gridster.pixelsToPositionX(this.left+this.margin,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)}},{key:"handleS",value:function(e){if(this.height=e.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.newPosition=this.gridster.pixelsToPositionY(this.bottom,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.rows=this.itemBackup[3],void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)}},{key:"handleE",value:function(e){if(this.width=(this.gridster.$options.dirType===z.RTL?this.originalClientX+(this.originalClientX-e.clientX):e.clientX)+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.newPosition=this.gridster.pixelsToPositionX(this.right,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.cols=this.itemBackup[2],void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)}},{key:"handleNW",value:function(e){this.handleN(e),this.handleW(e)}},{key:"handleNE",value:function(e){this.handleN(e),this.handleE(e)}},{key:"handleSW",value:function(e){this.handleS(e),this.handleW(e)}},{key:"handleSE",value:function(e){this.handleS(e),this.handleE(e)}},{key:"toggle",value:function(){this.resizeEnabled=this.gridsterItem.canBeResized()}},{key:"dragStartDelay",value:function(e){var t=this;if(P.checkTouchEvent(e),this.gridster.$options.resizable.delayStart)var i=setTimeout(function(){t.dragStart(e),c()},this.gridster.$options.resizable.delayStart),n=this.gridsterItem.renderer.listen("document","mouseup",c),r=this.gridsterItem.renderer.listen("document","mouseleave",c),o=this.gridsterItem.renderer.listen("window","blur",c),s=this.gridsterItem.renderer.listen("document","touchmove",function(t){P.checkTouchEvent(t),(Math.abs(t.clientX-e.clientX)>9||Math.abs(t.clientY-e.clientY)>9)&&c()}),a=this.gridsterItem.renderer.listen("document","touchend",c),l=this.gridsterItem.renderer.listen("document","touchcancel",c);else this.dragStart(e);function c(){clearTimeout(i),o(),n(),r(),s(),a(),l()}}},{key:"setItemTop",value:function(e){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,e)}},{key:"setItemLeft",value:function(e){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,e,this.top)}},{key:"setItemHeight",value:function(e){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",e+"px")}},{key:"setItemWidth",value:function(e){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",e+"px")}}]),e}(),K=function(){var e=function(){function e(t,i,r,o){Oo(this,e),this.renderer=r,this.zone=o,this.itemInit=new n.vpe,this.itemChange=new n.vpe,this.itemResize=new n.vpe,this.el=t.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=i,this.drag=new H(this,i,this.zone),this.resize=new G(this,i,this.zone)}return Fo(e,[{key:"zIndex",get:function(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}},{key:"ngOnInit",value:function(){this.gridster.addItem(this)}},{key:"ngOnChanges",value:function(e){e.item&&(this.updateOptions(),this.init||this.gridster.calculateLayoutDebounce()),e.item&&e.item.previousValue&&this.setSize()}},{key:"updateOptions",value:function(){this.$item=P.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0})}},{key:"ngOnDestroy",value:function(){this.gridster.removeItem(this),delete this.gridster,this.drag.destroy(),delete this.drag,this.resize.destroy(),delete this.resize}},{key:"setSize",value:function(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}},{key:"updateItemSize",value:function(){var e=this.$item.x*this.gridster.curColWidth,t=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,i=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=this.$item.y*this.gridster.curRowHeight,this.left=e,!this.init&&t>0&&i>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(t!==this.width||i!==this.height)&&(this.width=t,this.height=i,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}},{key:"itemChanged",value:function(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}},{key:"checkItemChanges",value:function(e,t){e.rows===t.rows&&e.cols===t.cols&&e.x===t.x&&e.y===t.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=t.x||0,this.$item.y=t.y||0,this.$item.cols=t.cols||1,this.$item.rows=t.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayoutDebounce(),this.itemChanged()))}},{key:"canBeDragged",value:function(){var e=this.gridster.$options.draggable.enabled;return!this.gridster.mobile&&e&&(void 0===this.$item.dragEnabled?e:this.$item.dragEnabled)}},{key:"canBeResized",value:function(){var e=this.gridster.$options.resizable.enabled;return!this.gridster.mobile&&e&&(void 0===this.$item.resizeEnabled?e:this.$item.resizeEnabled)}},{key:"bringToFront",value:function(e){if(!(e&&e<=0)){var t=this.getLayerIndex(),i=this.gridster.$options.maxLayerIndex;if(t<i){var n=e?t+e:i;this.item.layerIndex=this.$item.layerIndex=n>i?i:n}}}},{key:"sendToBack",value:function(e){if(!(e&&e<=0)){var t=this.getLayerIndex();if(t>0){var i=e?t-e:0;this.item.layerIndex=this.$item.layerIndex=i<0?0:i}}}},{key:"getLayerIndex",value:function(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(M),n.Y36(n.Qsj),n.Y36(n.R0b))},e.\u0275cmp=n.Xpm({type:e,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(e,t){2&e&&n.Udp("z-index",t.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},features:[n.TTD],ngContentSelectors:a,decls:9,vars:8,consts:[["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(e,t){1&e&&(n.F$t(),n.Hsn(0),n.YNc(1,l,1,0,"div",0),n.YNc(2,c,1,0,"div",1),n.YNc(3,u,1,0,"div",2),n.YNc(4,d,1,0,"div",3),n.YNc(5,p,1,0,"div",4),n.YNc(6,h,1,0,"div",5),n.YNc(7,f,1,0,"div",6),n.YNc(8,g,1,0,"div",7)),2&e&&(n.xp6(1),n.Q6J("ngIf",t.gridster.$options.resizable.handles.s&&t.resize.resizeEnabled),n.xp6(1),n.Q6J("ngIf",t.gridster.$options.resizable.handles.e&&t.resize.resizeEnabled),n.xp6(1),n.Q6J("ngIf",t.gridster.$options.resizable.handles.n&&t.resize.resizeEnabled),n.xp6(1),n.Q6J("ngIf",t.gridster.$options.resizable.handles.w&&t.resize.resizeEnabled),n.xp6(1),n.Q6J("ngIf",t.gridster.$options.resizable.handles.se&&t.resize.resizeEnabled),n.xp6(1),n.Q6J("ngIf",t.gridster.$options.resizable.handles.ne&&t.resize.resizeEnabled),n.xp6(1),n.Q6J("ngIf",t.gridster.$options.resizable.handles.sw&&t.resize.resizeEnabled),n.xp6(1),n.Q6J("ngIf",t.gridster.$options.resizable.handles.nw&&t.resize.resizeEnabled))},directives:[r.O5],styles:["gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:white;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}\n"],encapsulation:2}),e}(),X=function(){var e=Fo(function e(){Oo(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[r.ez]]}),e}()},98411:function(e){e.exports=function(e,t){for(var i,n=-1,r=e.length;++n<r;){var o=t(e[n]);void 0!==o&&(i=void 0===i?o:i+o)}return i}},74585:function(e,t,i){var n=i(94710),r=i(56369),o=i(83987);e.exports=function(e,t,i){var s=e.length;if(s<2)return s?o(e[0]):[];for(var a=-1,l=Array(s);++a<s;)for(var c=e[a],u=-1;++u<s;)u!=a&&(l[a]=n(l[a]||c,e[u],t,i));return o(r(l,1),t,i)}},25687:function(e){e.exports=function(e,t,i){for(var n=-1,r=e.length,o=t.length,s={};++n<r;)i(s,e[n],n<o?t[n]:void 0);return s}},89378:function(e,t,i){var n=i(71166),r=Object.prototype,o=r.hasOwnProperty;e.exports=function(e,t,i,s){return void 0===e||n(e,r[i])&&!o.call(s,i)?t:e}},37648:function(e){var t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};e.exports=function(e){return"\\"+t[e]}},8110:function(e){e.exports=/<%-([\s\S]+?)%>/g},47218:function(e){e.exports=/<%([\s\S]+?)%>/g},34311:function(e){e.exports=/<%=([\s\S]+?)%>/g},68322:function(e,t,i){var n=i(11694),r=i(30906),o=i(42970),s=r(function(e,t,i,r){n(t,o(t),e,r)});e.exports=s},72304:function(e,t,i){var n=i(81638),r=i(84441),o=i(88062),s=r(function(e,t){try{return n(e,void 0,t)}catch(i){return o(i)?i:new Error(i)}});e.exports=s},93300:function(e,t,i){var n=i(94710),r=i(56369),o=i(84441),s=i(82027),a=o(function(e,t){return s(e)?n(e,r(t,1,s,!0)):[]});e.exports=a},88062:function(e,t,i){var n=i(72802),r=i(27503),o=i(82358);e.exports=function(e){if(!r(e))return!1;var t=n(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!o(e)}},76275:function(e,t,i){var n=i(98411),r=i(80290);e.exports=function(e){return e&&e.length?n(e,r):0}},82455:function(e,t,i){var n=i(5245),r=i(98411);e.exports=function(e,t){return e&&e.length?r(e,n(t,2)):0}},62848:function(e,t,i){var n=i(68322),r=i(72304),o=i(60253),s=i(89378),a=i(37648),l=i(88062),c=i(71100),u=i(59108),d=i(34311),p=i(11171),h=i(41233),f=/\b__p \+= '';/g,g=/\b(__p \+=) '' \+/g,m=/(__e\(.*?\)|\b__t\)) \+\n'';/g,v=/[()=,{}\[\]\/\s]/,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,b=/($^)/,C=/['\n\r\u2028\u2029\\]/g,x=Object.prototype.hasOwnProperty;e.exports=function(e,t,i){var w=p.imports._.templateSettings||p;i&&c(e,t,i)&&(t=void 0),e=h(e),t=n({},t,w,s);var k,T,S=n({},t.imports,w.imports,s),I=u(S),_=o(S,I),A=0,z=t.interpolate||b,Z="__p += '",O=RegExp((t.escape||b).source+"|"+z.source+"|"+(z===d?y:b).source+"|"+(t.evaluate||b).source+"|$","g"),P=x.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(O,function(t,i,n,r,o,s){return n||(n=r),Z+=e.slice(A,s).replace(C,a),i&&(k=!0,Z+="' +\n__e("+i+") +\n'"),o&&(T=!0,Z+="';\n"+o+";\n__p += '"),n&&(Z+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),A=s+t.length,t}),Z+="';\n";var F=x.call(t,"variable")&&t.variable;if(F){if(v.test(F))throw new Error("Invalid `variable` option passed into `_.template`")}else Z="with (obj) {\n"+Z+"\n}\n";Z=(T?Z.replace(f,""):Z).replace(g,"$1").replace(m,"$1;"),Z="function("+(F||"obj")+") {\n"+(F?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(k?", __e = _.escape":"")+(T?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Z+"return __p\n}";var D=r(function(){return Function(I,P+"return "+Z).apply(void 0,_)});if(D.source=Z,l(D))throw D;return D}},11171:function(e,t,i){var n=i(56411),r=i(8110),o=i(47218),s=i(34311);e.exports={escape:r,evaluate:o,interpolate:s,variable:"",imports:{_:{escape:n}}}},9728:function(e,t,i){var n=i(56369),r=i(84441),o=i(83987),s=i(82027),a=r(function(e){return o(n(e,1,s,!0))});e.exports=a},18622:function(e,t,i){var n=i(11375),r=i(84441),o=i(74585),s=i(82027),a=r(function(e){return o(n(e,s))});e.exports=a},31507:function(e,t,i){var n=i(23898),r=i(25687);e.exports=function(e,t){return r(e||[],t||[],n)}},93576:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(15730),r=i(67104),o=i(96232),s=i(23915),a=i(68273),l=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var n=this.operator,o=r.toSubscriber(e,t,i);if(o.add(n?n.call(o,this.source):this.source||a.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),n.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var i=this;return new(t=c(t))(function(t,n){var r;r=i.subscribe(function(t){try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:s.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=c(e))(function(e,i){var n;t.subscribe(function(e){return n=e},function(e){return i(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function c(e){if(e||(e=a.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=l},16011:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(68273),r=i(32434);t.empty={closed:!0,next:function(e){},error:function(e){if(n.config.useDeprecatedSynchronousErrorHandling)throw e;r.hostReportError(e)},complete:function(){}}},13409:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=i(93576),s=i(67241),a=i(43984),l=i(25639),c=i(45298),u=i(81476),d=function(e){function t(t){var i=e.call(this,t)||this;return i.destination=t,i}return r(t,e),t}(s.Subscriber);t.SubjectSubscriber=d;var p=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r(t,e),t.prototype[u.rxSubscriber]=function(){return new d(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new l.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,i=t.length,n=t.slice(),r=0;r<i;r++)n[r].next(e)},t.prototype.error=function(e){if(this.closed)throw new l.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,i=t.length,n=t.slice(),r=0;r<i;r++)n[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new l.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,i=e.slice(),n=0;n<t;n++)i[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new l.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new l.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new c.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new o.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(o.Observable);t.Subject=p;var h=function(e){function t(t,i){var n=e.call(this)||this;return n.destination=t,n.source=i,n}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):a.Subscription.EMPTY},t}(p);t.AnonymousSubject=h},45298:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,i){var n=e.call(this)||this;return n.subject=t,n.subscriber=i,n.closed=!1,n}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}},t}(i(43984).Subscription);t.SubjectSubscription=o},67241:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=i(67382),s=i(16011),a=i(43984),l=i(81476),c=i(68273),u=i(32434),d=function(e){function t(i,n,r){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s.empty;break;case 1:if(!i){o.destination=s.empty;break}if("object"==typeof i){i instanceof t?(o.syncErrorThrowable=i.syncErrorThrowable,o.destination=i,i.add(o)):(o.syncErrorThrowable=!0,o.destination=new p(o,i));break}default:o.syncErrorThrowable=!0,o.destination=new p(o,i,n,r)}return o}return r(t,e),t.prototype[l.rxSubscriber]=function(){return this},t.create=function(e,i,n){var r=new t(e,i,n);return r.syncErrorThrowable=!1,r},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(a.Subscription);t.Subscriber=d;var p=function(e){function t(t,i,n,r){var a=e.call(this)||this;a._parentSubscriber=t;var l,c=a;return o.isFunction(i)?l=i:i&&(l=i.next,n=i.error,r=i.complete,i!==s.empty&&(c=Object.create(i),o.isFunction(c.unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=l,a._error=n,a._complete=r,a}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,i=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):u.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;u.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var i=function(){return e._complete.call(e._context)};c.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw i;u.hostReportError(i)}},t.prototype.__tryOrSetError=function(e,t,i){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(n){return c.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=n,e.syncErrorThrown=!0,!0):(u.hostReportError(n),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(d);t.SafeSubscriber=p},43984:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(40993),r=i(54720),o=i(67382),s=i(18574),a=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var i=this,a=i._parentOrParents,c=i._ctorUnsubscribe,u=i._unsubscribe,d=i._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof e)a.remove(this);else if(null!==a)for(var p=0;p<a.length;++p)a[p].remove(this);if(o.isFunction(u)){c&&(this._unsubscribe=void 0);try{u.call(this)}catch(g){t=g instanceof s.UnsubscriptionError?l(g.errors):[g]}}if(n.isArray(d)){p=-1;for(var h=d.length;++p<h;){var f=d[p];if(r.isObject(f))try{f.unsubscribe()}catch(m){t=t||[],m instanceof s.UnsubscriptionError?t=t.concat(l(m.errors)):t.push(m)}}}if(t)throw new s.UnsubscriptionError(t)}},e.prototype.add=function(t){var i=t;if(!t)return e.EMPTY;switch(typeof t){case"function":i=new e(t);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof e)){var n=i;(i=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=i._parentOrParents;if(null===r)i._parentOrParents=this;else if(r instanceof e){if(r===this)return i;i._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return i;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[i]:o.push(i),i},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}},e.EMPTY=((t=new e).closed=!0,t),e;var t}();function l(e){return e.reduce(function(e,t){return e.concat(t instanceof s.UnsubscriptionError?t.errors:t)},[])}t.Subscription=a},68273:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}}},96232:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},81476:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),t.$$rxSubscriber=t.rxSubscriber},25639:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}();t.ObjectUnsubscribedError=i},18574:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}();t.UnsubscriptionError=i},15730:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(67241);t.canReportError=function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof n.Subscriber?t:null}return!0}},32434:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hostReportError=function(e){setTimeout(function(){throw e},0)}},72516:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=function(e){return e}},40993:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},67382:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e}},54720:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return null!==e&&"object"==typeof e}},23915:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(72516);function r(e){return 0===e.length?n.identity:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(e)},t.pipeFromArray=r},67104:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(67241),r=i(81476),o=i(16011);t.toSubscriber=function(e,t,i){if(e){if(e instanceof n.Subscriber)return e;if(e[r.rxSubscriber])return e[r.rxSubscriber]()}return e||t||i?new n.Subscriber(e,t,i):new n.Subscriber(o.empty)}},54195:function(t,i,n){"use strict";n.d(i,{b:function(){return s}});var r,o=n(33018),s=((r=Fo(function e(){Oo(this,e)})).lateLoadKey="PreviewOverlayComponent",r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=o.Xpm({type:r,selectors:[["nui-preview-overlay"]],decls:2,vars:0,consts:function(){return[[1,"nui-text-label","content"],$localize(e||(e=Zo([":\u241f36f866e0b0a8bef9afb11118ed659ea964fc9210\u241f5742578784537038340:This is a non-interactive widget preview"])))]},template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.SDv(1,1),o.qZA())},styles:["[_nghost-%COMP%]{opacity:0;transition-property:opacity;transition-duration:.5s;position:absolute;z-index:1060;background-color:#fff;background-color:var(--nui-color-bg-content_popover,#fff);height:100%;width:100%}[_nghost-%COMP%]:hover{opacity:.96}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:center;align-items:center;position:absolute;top:0;right:2px;bottom:2px;left:2px;cursor:not-allowed}"]}),r)},46276:function(e,t,i){"use strict";i.d(t,{M:function(){return g}});var n=i(33018),r=i(46806),o=i(69901),s=i(83118),a=i.n(s),l=i(39973),c=i(65470),u={displayGrid:o.KY.None,gridType:o.tQ.VerticalFixed,compactType:o.RU.CompactUp,margin:15,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,mobileBreakpoint:640,minCols:12,maxCols:12,minRows:12,fixedRowHeight:44,minItemArea:1,defaultItemCols:6,defaultItemRows:6,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,scrollSensitivity:10,scrollSpeed:20,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{enabled:!1,ignoreContent:!0,dragHandleClass:"nui-dashboard__widget--drag-handle"},resizable:{enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0}},swap:!1,pushItems:!0,pushResizeItems:!0,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1};function d(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"nui-widget",5),n.NdJ("widgetChange",function(e){return n.CHM(i),n.oxw(2).onWidgetChange(e)}),n.qZA()}if(2&e){var r=n.oxw().$implicit;n.Q6J("widget",r.value),n.uIk("widget-id",r.key)("widget-type",r.value.type)}}function p(e,t){if(1&e&&(n.TgZ(0,"gridster-item",3),n.YNc(1,d,1,3,"nui-widget",4),n.qZA()),2&e){var i=t.$implicit,r=n.oxw(),o=n.MAs(4);n.Q6J("item",r.dashboard.positions[i.key])("nuiGridsterItemWidgetId",i.key),n.xp6(1),n.Q6J("ngIf",r.shouldWidgetRender(i.key))("ngIfElse",o)}}function h(e,t){1&e&&(n.TgZ(0,"div",6),n._UZ(1,"nui-loading",7),n.qZA()),2&e&&(n.xp6(1),n.Q6J("active",!0))}var f,g=((f=function(){function e(t){var i=this;Oo(this,e),this.eventBus=t,this.editMode=!1,this.gridsterConfigChange=new n.vpe,this.dashboardChange=new n.vpe,this.gridsterItemsVisibilityMap={},this.orderWidgets=function(e,t){var n=i.dashboard.positions[e.key],r=i.dashboard.positions[t.key];return n.y-r.y||n.x-r.x},this.trackByFn=function(e,t){return t.key},this.updateWidgetPosition=function(e,t){var n=t.widgetId,o=(0,r.zdu)(i.dashboard,"positions."+n,e);i.dashboardChange.emit(o),i.eventBus.getStream(l.Xi).next({widgetId:n,payload:e})},this.emitWidgetResize=function(e,t){var n=t.widgetId;i.eventBus.getStream(l.pV).next({widgetId:n,payload:{widgetId:n,height:t.height,width:t.width}})}}return Fo(e,[{key:"dashboard",get:function(){return this.dashboardBuffer||this._dashboard},set:function(e){this._dashboard=e,this.dashboardBuffer=null}},{key:"hostClass",get:function(){return!0}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){return e.calculateWidgetsVisibility()})}},{key:"onGridsterScroll",value:function(){this.calculateWidgetsVisibility()}},{key:"ngOnChanges",value:function(e){var t,i,n;if(e.gridsterConfig){if(e.gridsterConfig.isFirstChange()){var r=a()(this.gridsterConfig||{},u);this.hookEvent(r,"itemChangeCallback",this.updateWidgetPosition),this.hookEvent(r,"itemResizeCallback",this.emitWidgetResize),this.gridsterConfigChange.emit(r)}(null===(t=this.gridsterConfig)||void 0===t?void 0:t.api)&&(null===(n=(i=this.gridsterConfig.api).optionsChanged)||void 0===n||n.call(i))}if(e.editMode){if(!this.gridsterConfig.resizable)throw new Error("Gridster's resizable prop is undefined");if(this.gridsterConfig.resizable.enabled=this.editMode,!this.gridsterConfig.draggable)throw new Error("Gridster's draggable prop is undefined");this.gridsterConfig.draggable.enabled=this.editMode,this.gridsterConfigChange.emit(Object.assign({},this.gridsterConfig)),this.eventBus.getStream(l.N9).next({payload:this.editMode})}}},{key:"onWidgetChange",value:function(e){!this.dashboard.widgets[e.id]||this.updateWidget(e)}},{key:"updateWidget",value:function(e){var t,i,n,o,s,a=this.dashboard;if(!this.dashboard.positions[e.id]&&(null===(t=this.gridsterConfig)||void 0===t?void 0:t.api)){var l=null===(n=(i=this.gridsterConfig.api).getFirstPossiblePosition)||void 0===n?void 0:n.call(i,{x:0,y:0,rows:null===(o=this.gridsterConfig)||void 0===o?void 0:o.defaultItemRows,cols:null===(s=this.gridsterConfig)||void 0===s?void 0:s.defaultItemCols});a=(0,r.zdu)(a,"positions.".concat(e.id),l)}a=(0,r.zdu)(a,"widgets.".concat(e.id),e),this.dashboardBuffer=a,this.dashboardChange.emit(a)}},{key:"removeWidget",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.dashboard;if(i.widgets[e]){var n=Object.assign({},i.widgets);if(delete n[e],i=(0,r.zdu)(i,"widgets",n),t){var o=Object.assign({},i.positions);delete o[e],i=(0,r.zdu)(i,"positions",o)}this.dashboardChange.emit(i)}}},{key:"shouldWidgetRender",value:function(e){var t;return!(null===(t=this.belowFoldLazyLoadingConfig)||void 0===t?void 0:t.enabled)||this.gridsterItemsVisibilityMap[e]}},{key:"hookEvent",value:function(e,t,i){var n=e[t];e[t]=function(e,t){i(e,t),n&&n(e,t)}}},{key:"calculateWidgetsVisibility",value:function(){var e,t=this;if(null===(e=this.belowFoldLazyLoadingConfig)||void 0===e?void 0:e.enabled){var i=this.gridster.el.getBoundingClientRect();this.gridsterItemsVisibilityMap=this.gridsterItems.reduce(function(e,n){var r,o=n.el,s=n.widgetId;if(!(null===(r=t.belowFoldLazyLoadingConfig.configuration)||void 0===r?void 0:r.reloadWidgetsOnScroll)&&e[s])return e;var a=o.getBoundingClientRect();return e[s]=(a.top>i.top&&a.top<i.bottom||a.bottom>i.top&&a.bottom<i.bottom)&&(a.left>i.left&&a.left<i.right||a.right>i.left&&a.right<i.right),e},this.gridsterItemsVisibilityMap)}}}]),e}()).\u0275fac=function(e){return new(e||f)(n.Y36(c.Bc))},f.\u0275cmp=n.Xpm({type:f,selectors:[["nui-dashboard"]],viewQuery:function(e,t){var i;1&e&&(n.Gf(o.sm,5),n.Gf(o.IM,5)),2&e&&(n.iGM(i=n.CRH())&&(t.gridster=i.first),n.iGM(i=n.CRH())&&(t.gridsterItems=i))},hostVars:2,hostBindings:function(e,t){2&e&&n.ekj("nui-dashboard",t.hostClass)},inputs:{gridsterConfig:"gridsterConfig",dashboard:"dashboard",editMode:"editMode",belowFoldLazyLoadingConfig:"belowFoldLazyLoadingConfig"},outputs:{gridsterConfigChange:"gridsterConfigChange",dashboardChange:"dashboardChange"},features:[n._Bn([{provide:c.Bc,useClass:r.Ndp}]),n.TTD],decls:5,vars:6,consts:[[1,"nui-dashboard__gridster",3,"options","scroll"],["class","nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId",4,"ngFor","ngForOf","ngForTrackBy"],["emptyWidgetTpl",""],[1,"nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId"],["class","w-100 h-100 d-block",3,"widget","widgetChange",4,"ngIf","ngIfElse"],[1,"w-100","h-100","d-block",3,"widget","widgetChange"],[1,"w-100","h-100","d-block"],[3,"active"]],template:function(e,t){1&e&&(n.TgZ(0,"gridster",0),n.NdJ("scroll",function(){return t.onGridsterScroll()}),n.YNc(1,p,2,4,"gridster-item",1),n.ALo(2,"keyvalue"),n.qZA(),n.YNc(3,h,2,1,"ng-template",null,2,n.W1O)),2&e&&(n.Q6J("options",t.gridsterConfig),n.xp6(1),n.Q6J("ngForOf",n.xi3(2,3,t.dashboard.widgets,t.orderWidgets))("ngForTrackBy",t.trackByFn))},styles:['.nui-dashboard__gridster{background-color:#f0f0f0;background-color:var(--nui-color-bg-workspace,#f0f0f0)}.nui-dashboard__gridster .gridster-preview{border-width:4px;border-style:solid;border-color:#00c4d2;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:rgba(0,196,210,.1);background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.nui-dashboard__gridster .gridster-preview:before{background-color:#00c4d2;background-color:var(--nui-color-selected-contrast,#00c4d2);border-radius:50%;content:"";display:block;height:40px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:40px;z-index:1}.nui-dashboard__gridster .gridster-preview:after{color:#fff;color:var(--nui-color-icon-light,#fff);content:"+";display:block;font-size:19px;font-weight:bold;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);z-index:2}.nui-dashboard__gridster-item{box-shadow:0 0 5px #999;box-shadow:0 0 var(--nui-space-xs, 5px) var(--nui-color-line-dark, #999999);background-color:#fff;background-color:var(--nui-color-bg-light,#fff)}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler{border-bottom-color:#00c4d2;border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);margin:0;z-index:2000}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler.handle-se{border-bottom-color:#00c4d2;border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);right:2px;bottom:2px}.mobile .nui-dashboard__gridster-item.nui-dashboard__gridster-item{height:auto!important}\n'],encapsulation:2}),f)},92677:function(e,t,i){"use strict";i.d(t,{I:function(){return c}});var n,r=i(79765),o=i(18989),s=i(92954),a=(i(65470),i(33018)),l=i(46806),c=((n=function(){function e(t,i,n){Oo(this,e),this.changeDetector=t,this.pizzagnaService=i,this.logger=n,this.destroyed$=new r.xQ}return Fo(e,[{key:"ngOnChanges",value:function(e){(e.nodes||e.template)&&this.updateNodeConfigs({changesNodes:e.nodes,changesTemplate:e.template})}},{key:"ngDoCheck",value:function(){this.checkNodeConfigs()&&(this.updateNodeConfigs(),this.changeDetector.detectChanges())}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"trackByFn",value:function(e,t){return t.id}},{key:"checkNodeConfigs",value:function(){var e=this.getNodes();if(!this.nodeComponentsConfigs||e.length!==this.nodeComponentsConfigs.length)return!0;for(var t=0;t<e.length;t++)if(this.pizzagnaService.getComponent(e[t])!==this.nodeComponentsConfigs[t])return!0;return!1}},{key:"updateNodeComponentConfigs",value:function(){var e=this,t=this.getNodes();this.nodeComponentsConfigs=t&&t.map(function(t){var i=e.pizzagnaService.getComponent(t);if(void 0===i)throw new Error("No component with id '"+t+"' was defined in the configuration.");return i})}},{key:"updateNodeConfigs",value:function(e){this.nodeConfigs=(0,o.n)(this.nodeConfigs,this.getTemplateChangeForNodes(e),this.getNodeComponentsConfigs())}},{key:"getNodeComponentsConfigs",value:function(){var e={currentValue:void 0,previousValue:this.nodeComponentsConfigs?_o(this.nodeComponentsConfigs):void 0};return this.updateNodeComponentConfigs(),e.currentValue=this.nodeComponentsConfigs,e}},{key:"getTemplateChangeForNodes",value:function(e){var t=this,i=e||{},n=i.changesNodes,r=i.changesTemplate,o=function(e){var i;return e&&(null===(i=t.getNodes())||void 0===i?void 0:i.map(function(){return e}))};return{currentValue:o(r?r.currentValue:this.template),previousValue:n?this.template:o(r?r.previousValue:this.template)}}}]),e}()).\u0275fac=function(e){return new(e||n)(a.LFG(a.sBO),a.LFG(s.p),a.LFG(l.mQy))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n)},54910:function(e,t,i){"use strict";i.d(t,{i:function(){return h}});var n,r=i(29569),o=i.n(r),s=i(79765),a=i(46782),l=i(7350),c=i(92954),u=i(39973),d=i(65470),p=i(33018),h=((n=function(){function e(t,i,n){var r=this;Oo(this,e),this.eventBus=t,this.dataSource=i,this.pizzagnaService=n,this.destroy$=new s.xQ,this.dataSource&&(this.setupRefreshListener(),this.dataSource.outputsSubject.pipe((0,a.R)(this.destroy$)).subscribe(function(e){return r.handleDataSourceUpdate(e)}),this.dataSource.busy&&this.dataSource.busy.pipe((0,a.R)(this.destroy$)).subscribe(function(e){r.eventBus.getStream(u.QD).next({payload:{componentId:r.componentId,busy:e}})}))}return Fo(e,[{key:"setupRefreshListener",value:function(){var e=this;this.eventBus.getStream(u.RG).pipe((0,a.R)(this.destroy$)).subscribe(function(){return e.handleRefresh()})}},{key:"handleRefresh",value:function(){this.eventBus.getStream(u.R1).next(),this.dataSource.applyFilters()}},{key:"handleDataSourceUpdate",value:function(e){this.lastValue=o()(null==e?void 0:e.result)?e:null==e?void 0:e.result,this.updateOutput(this.lastValue),this.eventBus.getStream(l.PF).next({payload:Object.assign({componentId:this.componentId},e)})}},{key:"ngOnDestroy",value:function(){this.updateOutput(void 0);var e={payload:{componentId:this.componentId}};this.eventBus.getStream(l.yX).next(e);var t={payload:{componentId:this.componentId,busy:!1}};this.eventBus.getStream(u.QD).next(t),this.destroy$.next(),this.destroy$.complete()}},{key:"updateConfiguration",value:function(e){e.componentId&&(this.componentId=e.componentId),this.updateAdapterProperties(e),this.updateDataSourceProperties(e),void 0!==this.lastValue&&this.updateOutput(this.lastValue)}},{key:"updateAdapterProperties",value:function(e){this.propertyPath=e.propertyPath}},{key:"updateDataSourceProperties",value:function(e){var t,i,n=this,r=null===(t=null==e?void 0:e.dataSource)||void 0===t?void 0:t.properties;if(this.dataSourceConfiguration!==r){this.dataSourceConfiguration=r;var o=this.dataSource;(null==o?void 0:o.updateConfiguration)&&o.updateConfiguration(null===(i=e.dataSource)||void 0===i?void 0:i.properties),this.eventBus.getStream(u.RG).next()}void 0===this.dataSourceConfiguration&&void 0===r&&setTimeout(function(){return n.eventBus.getStream(u.RG).next()})}},{key:"updateOutput",value:function(e){this.pizzagnaService.setProperty({pizzagnaKey:d.xW.Data,componentId:this.componentId,propertyPath:[this.propertyPath]},this.processOutput(e))}},{key:"processOutput",value:function(e){return e}}]),e}()).\u0275fac=function(e){return new(e||n)(p.LFG(d.nY),p.LFG(d.Fk,8),p.LFG(c.p))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n)},43925:function(e,t,i){"use strict";i.d(t,{I:function(){return a}});var n,r=i(39973),o=i(65470),s=i(33018),a=((n=function(){function e(t){Oo(this,e),this.eventBus=t,this.initializeSubscriptions()}return Fo(e,[{key:"updateConfiguration",value:function(e){this.properties=e}},{key:"initializeSubscriptions",value:function(){var e=this;this.eventBus.getStream(r.b1).subscribe(function(t){var i,n,r;(!(null===(i=e.properties)||void 0===i?void 0:i.interactionType)||(null===(n=e.properties)||void 0===n?void 0:n.interactionType)===(null===(r=t.payload)||void 0===r?void 0:r.interactionType))&&e.handleInteraction(t.payload)})}}]),e}()).\u0275fac=function(e){return new(e||n)(s.LFG(o.nY))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n)},83645:function(e,t,i){"use strict";i.d(t,{O:function(){return u}});var n=i(62848),r=i.n(n),o=i(65470),s=i(43925),a=i(33018),l=i(46806);Window;var c,u=((c=function(e){xo(i,e);var t=ko(i);function i(e,n,r){var o;return Oo(this,i),(o=t.call(this,e)).window=n,o.logger=r,o.templateOptions={evaluate:null},o}return Fo(i,[{key:"handleInteraction",value:function(e){var t;if(null===(t=this.properties)||void 0===t?void 0:t.url){var i=r()(this.properties.url,this.templateOptions)({data:e.data});!i||(this.properties.newWindow?this.window.open(i):this.window.location.href=i)}else this.logger.warn("The target url has not been defined.")}}]),i}(s.I)).\u0275fac=function(e){return new(e||c)(a.LFG(o.nY),a.LFG("windowObject"),a.LFG(l.mQy))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac}),c)},43397:function(e,t,i){"use strict";i.d(t,{g:function(){return a}});var n,r=i(26215),o=i(27386),s=i(33018),a=((n=function(){function e(){Oo(this,e),this._refreshRateSeconds=o.Q,this.refreshRateSeconds$=new r.X(this.refreshRateSeconds)}return Fo(e,[{key:"refreshRateSeconds",get:function(){return this._refreshRateSeconds},set:function(e){this._refreshRateSeconds=e,this.refreshRateSeconds$.next(this._refreshRateSeconds)}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},388:function(e,t,i){"use strict";i.d(t,{q:function(){return d}});var n,r=i(79765),o=i(46782),s=i(39973),a=i(65470),l=i(27386),c=i(33018),u=i(43397),d=((n=function(){function e(t,i,n){var a=this;Oo(this,e),this.eventBus=t,this.ngZone=i,this.refresherSettings=n,this.enabled=!0,this.overrideDefaultSettings=!0,this.interval=l.Q,this.eventDef=s.RG,this.destroy$=new r.xQ,this.refresherSettings.refreshRateSeconds$.pipe((0,o.R)(this.destroy$)).subscribe(function(e){a.overrideDefaultSettings||a.initializeInterval()})}return Fo(e,[{key:"updateConfiguration",value:function(e){var t,i,n,r;this.interval=null!==(t=e.interval)&&void 0!==t?t:l.Q,this.enabled=null===(i=e.enabled)||void 0===i||i,this.overrideDefaultSettings=null===(n=e.overrideDefaultSettings)||void 0===n||n,this.eventDef=null!==(r=e.event)&&void 0!==r?r:s.RG,this.initializeInterval()}},{key:"ngOnDestroy",value:function(){this.clearInterval(),this.destroy$.next(),this.destroy$.complete()}},{key:"initializeInterval",value:function(){var e=this;this.clearInterval(),!(void 0===this.interval||this.getInterval()<=0||!1===this.enabled)&&this.ngZone.runOutsideAngular(function(){e.intervalRef=setInterval(function(){e.ngZone.run(function(){e.performAction()})},1e3*e.getInterval())})}},{key:"performAction",value:function(){this.eventBus.getStream(this.eventDef).next()}},{key:"getInterval",value:function(){return this.overrideDefaultSettings?this.interval:this.refresherSettings.refreshRateSeconds}},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){void 0!==this.intervalRef&&(clearInterval(this.intervalRef),this.intervalRef=void 0)})}]),e}()).\u0275fac=function(e){return new(e||n)(c.LFG(a.nY),c.LFG(c.R0b),c.LFG(u.g))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n)},37367:function(e,t,i){"use strict";i.d(t,{Y:function(){return S}});var n=i(64762),r=i(33018),o=i(46806),s=i(56693),a=i(59796),l=i(77393),c=i(20377),u=i(85345),d=function(){function e(t){Oo(this,e),this.resultSelector=t}return Fo(e,[{key:"call",value:function(e,t){return t.subscribe(new p(e,this.resultSelector))}}]),e}(),p=function(e){xo(i,e);var t=ko(i);function i(e,n){var r;arguments.length>2&&void 0!==arguments[2]||Object.create(null);return Oo(this,i),(r=t.call(this,e)).resultSelector=n,r.iterators=[],r.active=0,r.resultSelector="function"==typeof n?n:void 0,r}return Fo(i,[{key:"_next",value:function(e){var t=this.iterators;(0,a.k)(e)?t.push(new f(e)):t.push("function"==typeof e[c.hZ]?new h(e[c.hZ]()):new g(this.destination,this,e))}},{key:"_complete",value:function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var i=0;i<t;i++){var n=e[i];n.stillUnsubscribed?this.destination.add(n.subscribe()):this.active--}}else this.destination.complete()}},{key:"notifyInactive",value:function(){this.active--,0===this.active&&this.destination.complete()}},{key:"checkIterators",value:function(){for(var e=this.iterators,t=e.length,i=this.destination,n=0;n<t;n++){var r=e[n];if("function"==typeof r.hasValue&&!r.hasValue())return}for(var o=!1,s=[],a=0;a<t;a++){var l=e[a],c=l.next();if(l.hasCompleted()&&(o=!0),c.done)return void i.complete();s.push(c.value)}this.resultSelector?this._tryresultSelector(s):i.next(s),o&&i.complete()}},{key:"_tryresultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}]),i}(l.L),h=function(){function e(t){Oo(this,e),this.iterator=t,this.nextResult=t.next()}return Fo(e,[{key:"hasValue",value:function(){return!0}},{key:"next",value:function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e}},{key:"hasCompleted",value:function(){var e=this.nextResult;return Boolean(e&&e.done)}}]),e}(),f=function(e){function t(e){Oo(this,t),this.array=e,this.index=0,this.length=0,this.length=e.length}return Fo(t,[{key:e,value:function(){return this}},{key:"next",value:function(e){var t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}},{key:"hasValue",value:function(){return this.array.length>this.index}},{key:"hasCompleted",value:function(){return this.array.length===this.index}}]),t}(c.hZ),g=function(e,t){xo(n,e);var i=ko(n);function n(e,t,r){var o;return Oo(this,n),(o=i.call(this,e)).parent=t,o.observable=r,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return Fo(n,[{key:t,value:function(){return this}},{key:"next",value:function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}},{key:"hasValue",value:function(){return this.buffer.length>0}},{key:"hasCompleted",value:function(){return 0===this.buffer.length&&this.isComplete}},{key:"notifyComplete",value:function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}},{key:"notifyNext",value:function(e){this.buffer.push(e),this.parent.checkIterators()}},{key:"subscribe",value:function(){return(0,u.ft)(this.observable,new u.IY(this))}}]),n}(u.Ds,c.hZ),m=i(66682),v=i(43190),y=i(39761),b=i(68307),C=i(54395),x=i(46782),w=i(92954),k=i(39973),T=i(65470),S=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,e,n,r)).virtualViewport=o,s}return Fo(i,[{key:"setupRefreshListener",value:function(){var e=this,t=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[t.length-1];return"function"==typeof n&&t.pop(),(0,s.n)(t,void 0).lift(new d(n))}(this.eventBus.getStream(k.j7),this.eventBus.getStream(k.RG)).pipe((0,v.w)(function(){return e.eventBus.getStream(k.RG).pipe((0,y.O)(void 0))}),(0,b.b)(function(){return e.virtualViewport.reset({emitFirstPage:!1})}));(0,m.T)(t,this.eventBus.getStream(k.df)).pipe((0,C.b)(10),(0,b.b)(function(){return e.handleRefresh()}),(0,x.R)(this.destroy$)).subscribe()}},{key:"updateAdapterProperties",value:function(e){this.dataPath=e.dataPath,this.dataFieldsPath=e.dataFieldsPath,this.totalItemsPath=e.totalItemsPath}},{key:"updateOutput",value:function(e){var t,i,n=null===(t=null==e?void 0:e.paginator)||void 0===t?void 0:t.total,r=null===(i=null==e?void 0:e.repeat)||void 0===i?void 0:i.itemsSource,o=null==e?void 0:e.dataFields;this.pizzagnaService.setProperty({pizzagnaKey:T.xW.Data,componentId:this.componentId,propertyPath:[this.totalItemsPath]},n),this.pizzagnaService.setProperty({pizzagnaKey:T.xW.Data,componentId:this.componentId,propertyPath:[this.dataPath]},r),this.pizzagnaService.setProperty({pizzagnaKey:T.xW.Data,componentId:this.componentId,propertyPath:[this.dataFieldsPath]},o)}}]),i}(i(54910).i);S=(0,n.gn)([(0,n.fM)(0,(0,r.tBr)(T.nY)),(0,n.fM)(1,(0,r.tBr)(T.Fk)),(0,n.fM)(3,(0,r.FiY)()),(0,n.w6)("design:paramtypes",[o.Ndp,Object,w.p,o.zCP])],S)},81354:function(e,t,i){"use strict";i.d(t,{f:function(){return u}});var n=i(64762),r=i(33018),o=i(46806),s=i(13742),a=i.n(s),l=i(92954),c=i(65470),u=function(e){xo(i,e);var t=ko(i);function i(e,n,r){var o;return Oo(this,i),(o=t.call(this,e,n,r)).seriesIndex=[],o}return Fo(i,[{key:"updateConfiguration",value:function(e){this.seriesIndex=a()(e.series),bo(Io(i.prototype),"updateConfiguration",this).call(this,e)}},{key:"processOutput",value:function(e){return e&&Object.assign(Object.assign({},e),{series:this.buildSeriesSet(null==e?void 0:e.series)})}},{key:"buildSeriesSet",value:function(e){var t=this;return e?e.filter(function(e){return t.seriesIndex.find(function(t){return t.selectedSeriesId===e.id})}).map(function(e){var i;return{id:e.id,data:e.data,link:e.link,secondaryLink:e.secondaryLink,legendDescriptionPrimary:null===(i=t.seriesIndex.find(function(t){return t.selectedSeriesId===e.id}))||void 0===i?void 0:i.label,legendDescriptionSecondary:e.description}}):[]}}]),i}(i(54910).i);u=(0,n.gn)([(0,n.fM)(0,(0,r.tBr)(c.nY)),(0,n.fM)(1,(0,r.tBr)(c.Fk)),(0,n.w6)("design:paramtypes",[o.Ndp,Object,l.p])],u)},27386:function(e,t,i){"use strict";i.d(t,{Q:function(){return n}});var n=300},52409:function(e,t,i){"use strict";i.d(t,{q:function(){return o}});var n,r=i(33018),o=((n=Fo(function e(){Oo(this,e)})).lateLoadKey="TemplateLoadErrorComponent",n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["ng-component"]],decls:3,vars:0,template:function(e,t){1&e&&(r.TgZ(0,"code"),r.TgZ(1,"pre"),r._uU(2,"Template load error!"),r.qZA(),r.qZA())},encapsulation:2}),n)},13385:function(e,t,i){"use strict";i.d(t,{w:function(){return r},K:function(){return o}});var n,r=((n=r||(r={})).None="None",n.Right="Right",n.Bottom="Bottom",r),o=function(){return(e=o||(o={}))[e.URL=0]="URL",e[e.HTML=1]="HTML",o;var e}()},61817:function(e,t,i){"use strict";i.d(t,{n:function(){return m}});var n=i(33018),r=i(46806),o=i(79765),s=i(25624),a=i(40494),l=i(28726),c=i(54195),u=i(38583),d=i(87636),p=i(30510),h=["previewPizzagnaComponent"];function f(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"nui-pizzagna",8,9),n.NdJ("pizzagnaChange",function(e){return n.CHM(i),n.oxw().onPizzagnaChange(e)}),n.ALo(2,"nuiPizzagnaRoot"),n.qZA()}if(2&e){var r=n.oxw();n.Q6J("rootNode",n.xi3(2,2,r.previewWidget,"widget"))("pizzagna",null==r.previewWidget?null:r.previewWidget.pizzagna)}}var g,m=((g=function(){function e(t,i){Oo(this,e),this.widgetTypesService=t,this.changeDetector=i,this.result=new n.vpe,this.formPortalAttached=new n.vpe,this.submitError=new o.xQ,this.destroy$=new o.xQ}return Fo(e,[{key:"ngOnInit",value:function(){this.previewWidget||(this.previewWidget={id:null,type:"previewPlaceholder",pizzagna:this.widgetTypesService.getWidgetType("previewPlaceholder").widget})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"handleSubmitError",value:function(){this.submitError.next()}},{key:"onFormPortalAttached",value:function(e){this.formPortalAttached.emit(e)}},{key:"updateWidget",value:function(e){this.previewWidget=e,this.changeDetector.markForCheck()}},{key:"formCancel",value:function(){this.result.next(null)}},{key:"formSubmit",value:function(){this.result.next(this.previewWidget)}},{key:"onPizzagnaChange",value:function(e){this.previewWidget&&(this.previewWidget.pizzagna=e)}}]),e}()).lateLoadKey="ConfiguratorComponent",g.\u0275fac=function(e){return new(e||g)(n.Y36(a.x),n.Y36(n.sBO))},g.\u0275cmp=n.Xpm({type:g,selectors:[["nui-configurator"]],viewQuery:function(e,t){var i;1&e&&n.Gf(h,7),2&e&&n.iGM(i=n.CRH())&&(t.previewPizzagnaComponent=i.first)},hostAttrs:[1,"nui-configurator"],inputs:{formPortal:"formPortal",previewWidget:"previewWidget"},outputs:{result:"result",formPortalAttached:"formPortalAttached"},features:[n._Bn([l.m,{provide:r.nse,useValue:".nui-dashwiz-step--active .configurator-scrollable"}])],decls:9,vars:4,consts:[[1,"nui-configurator__backdrop"],[1,"nui-configurator__content"],["orientation","right","paneSize","30vw","paneMinSize","20vw","paneMaxSize","80vw","isResizable","true",1,"h-100",3,"headerPadding","sidePaneBodyPadding"],[1,"nui-configurator__preview","d-flex","align-items-center","justify-content-center"],[1,"nui-configurator__preview-area"],["class","flex-grow-1 w-100",3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],["nuiPanelEmbeddedBody","",1,"nui-configurator__body"],[3,"cdkPortalOutlet","attached"],[1,"flex-grow-1","w-100",3,"rootNode","pizzagna","pizzagnaChange"],["previewPizzagnaComponent",""]],template:function(e,t){1&e&&(n._UZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"nui-panel",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n._UZ(5,"nui-preview-overlay"),n.YNc(6,f,3,5,"nui-pizzagna",5),n.qZA(),n.qZA(),n.TgZ(7,"div",6),n.ynx(8,7),n.NdJ("attached",function(e){return t.onFormPortalAttached(e)}),n.BQk(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("headerPadding",!1)("sidePaneBodyPadding",!1),n.xp6(4),n.Q6J("ngIf",null==t.previewWidget?null:t.previewWidget.pizzagna),n.xp6(2),n.Q6J("cdkPortalOutlet",t.formPortal))},directives:[r.yXm,c.b,u.O5,d.Pl,s.R],pipes:[p.l],styles:[".nui-configurator__backdrop[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:rgba(17,17,17,.5);background-color:var(--nui-color-overlay-modal,rgba(17, 17, 17, .5));opacity:.5;filter:alpha(opacity=50)}.nui-configurator__content[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040}.nui-configurator__heading[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #d9d9d9}.nui-configurator__body[_ngcontent-%COMP%]{overflow-anchor:none;height:100vh}.nui-configurator__preview[_ngcontent-%COMP%]{height:100vh}.nui-configurator__preview-area[_ngcontent-%COMP%]{display:flex;width:80%;position:relative;background-color:#fff;background-color:var(--nui-color-bg-content_popover,#fff);border:1px solid;border-color:#d9d9d9;border-color:var(--nui-color-line-default,#d9d9d9);margin:auto;min-height:40vh;max-height:80vh;overflow:hidden}"]}),g)},64874:function(e,t,i){"use strict";i.d(t,{O:function(){return o}});var n,r=i(33018),o=((n=Fo(function e(){Oo(this,e)})).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["nui-drop-area"]],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;border:3px solid;border-color:#00c4d2;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:rgba(0,196,210,.2);background-color:var(--nui-color-busy-default,rgba(0, 196, 210, .2))}"]}),n)},89563:function(e,t,i){"use strict";i.d(t,{P:function(){return m}});var n=i(90665),r=i(92677),o=i(92954),s=i(65470),a=i(33018),l=i(46806),c=i(38583),u=i(46747),d=i(87636);function p(e,t){}var h=function(){return["formReady"]};function f(e,t){if(1&e){var i=a.EpF();a.ynx(0),a.ynx(1,1,2),a.NdJ("output",function(e){var t=a.CHM(i).$implicit;return a.oxw().onEvent(t.id,e)}),a.YNc(3,p,0,0,"ng-template",3),a.NdJ("attached",function(e){return a.CHM(i),a.MAs(2).attached(e)}),a.BQk(),a.BQk()}if(2&e){var n=t.$implicit,r=a.MAs(2);a.xp6(1),a.Q6J("componentId",n.id)("componentType",n.componentType)("providers",n.providers)("properties",n.properties)("outputs",a.DdM(6,h)),a.xp6(2),a.Q6J("cdkPortalOutlet",r.portal)}}var g,m=((g=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o,s){var a;return Oo(this,i),(a=t.call(this,e,n,r)).formDirective=o,a.eventBus=s,a.elementClass="",a}return Fo(i,[{key:"ngOnInit",value:function(){this.form=this.formDirective.form}},{key:"ngOnChanges",value:function(e){bo(Io(i.prototype),"ngOnChanges",this).call(this,e)}},{key:"onEvent",value:function(e,t){"formReady"===t.id&&this.addFormGroup(e,t.payload)}},{key:"addFormGroup",value:function(e,t){this.form.addControl(e,t)}},{key:"getNodes",value:function(){return this.nodes}}]),i}(r.I)).lateLoadKey="FormStackComponent",g.\u0275fac=function(e){return new(e||g)(a.Y36(a.sBO),a.Y36(o.p),a.Y36(l.mQy),a.Y36(n.sg),a.Y36(s.nY))},g.\u0275cmp=a.Xpm({type:g,selectors:[["nui-form-stack"]],hostVars:2,hostBindings:function(e,t){2&e&&a.Tol(t.elementClass)},inputs:{nodes:"nodes"},features:[a._Bn([],[{provide:n.gN,useExisting:n.sg}]),a.qOj,a.TTD],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&a.YNc(0,f,4,7,"ng-container",0),2&e&&a.Q6J("ngForOf",t.nodeConfigs)("ngForTrackBy",t.trackByFn)},directives:[c.sg,u.$,d.Pl],encapsulation:2}),g)},96899:function(e,i,n){"use strict";n.d(i,{C:function(){return d}});var r=n(33018),o=n(46806),s=n(38583);function a(e,t){if(1&e&&r._UZ(0,"nui-icon",4),2&e){var i=r.oxw(2);r.Q6J("icon",null==i.data?null:i.data.value)}}function l(e,t){if(1&e&&(r.TgZ(0,"div",2),r.YNc(1,a,1,1,"nui-icon",3),r.qZA()),2&e){var i=r.oxw(),n=r.MAs(2);r.xp6(1),r.Q6J("ngIf",i.iconFound)("ngIfElse",n)}}function c(e,t){1&e&&r._UZ(0,"nui-icon",5)}var u,d=((u=function(){function e(t,i){Oo(this,e),this.changeDetector=t,this.iconService=i,this.isValid=!1,this.iconFound=!0}return Fo(e,[{key:"ngOnChanges",value:function(){var e,t;this.isValid=!!(null===(e=this.data)||void 0===e?void 0:e.value),this.iconFound=!!this.iconService.getIconData(null===(t=this.data)||void 0===t?void 0:t.value)}}]),e}()).lateLoadKey="IconFormatterComponent",u.\u0275fac=function(e){return new(e||u)(r.Y36(r.sBO),r.Y36(o.C6t))},u.\u0275cmp=r.Xpm({type:u,selectors:[["ng-component"]],inputs:{data:"data"},features:[r.TTD],decls:3,vars:1,consts:function(){return[["class","d-flex align-items-center justify-content-center",4,"ngIf"],["iconNotFound",""],[1,"d-flex","align-items-center","justify-content-center"],[3,"icon",4,"ngIf","ngIfElse"],[3,"icon"],["title",$localize(t||(t=Zo([":\u241f8cf3dbb8fe1e2fa079d4c2167cd4c81cdcfe89c2\u241f7731831112083433420:Unknown icon"]))),"iconColor","disabled-gray","icon","help"]]},template:function(e,t){1&e&&(r.YNc(0,l,2,2,"div",0),r.YNc(1,c,1,0,"ng-template",null,1,r.W1O)),2&e&&r.Q6J("ngIf",t.isValid)},directives:[s.O5,o.oJW],encapsulation:2}),u)},62878:function(e,t,i){"use strict";i.d(t,{s:function(){return a}});var n=i(33018),r=i(38583);function o(e,t){if(1&e&&(n.TgZ(0,"a",2),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.Q6J("href",null==i.data?null:i.data.link,n.LSH),n.xp6(1),n.hij(" ",null==i.data?null:i.data.value," ")}}var s,a=((s=function(){function e(t){Oo(this,e),this.changeDetector=t,this.isValid=!1}return Fo(e,[{key:"ngOnChanges",value:function(e){this.isValid=Boolean(this.data&&this.data.value&&this.data.link)}}]),e}()).lateLoadKey="LinkFormatterComponent",s.\u0275fac=function(e){return new(e||s)(n.Y36(n.sBO))},s.\u0275cmp=n.Xpm({type:s,selectors:[["ng-component"]],inputs:{data:"data"},features:[n.TTD],decls:2,vars:1,consts:[[1,"link-formatter-container"],["class","nui-text-ellipsis","target","_blank",3,"href",4,"ngIf"],["target","_blank",1,"nui-text-ellipsis",3,"href"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,o,2,2,"a",1),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.isValid))},directives:[r.O5],styles:[".link-formatter-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}"]}),s)},24803:function(e,t,i){"use strict";i.d(t,{a:function(){return o}});var n,r=i(33018),o=((n=Fo(function e(t){Oo(this,e),this.changeDetector=t})).lateLoadKey="RawFormatterComponent",n.\u0275fac=function(e){return new(e||n)(r.Y36(r.sBO))},n.\u0275cmp=r.Xpm({type:n,selectors:[["ng-component"]],hostVars:2,hostBindings:function(e,t){2&e&&r.Tol(t.elementClass)},inputs:{data:"data",elementClass:"elementClass"},decls:2,vars:1,template:function(e,t){1&e&&(r.ynx(0),r._uU(1),r.BQk()),2&e&&(r.xp6(1),r.Oqu(null==t.data?null:t.data.value))},encapsulation:2}),n)},66213:function(e,t,i){"use strict";i.d(t,{Q:function(){return a}});var n,r=i(33018),o=i(35720),s=i(46806),a=((n=function(){function e(t,i){Oo(this,e),this.el=t,this.heading=i,this.disableCloseButton=!1,this.close=new r.vpe}return Fo(e,[{key:"ngOnChanges",value:function(){this.heading.height$.next(+getComputedStyle(this.el.nativeElement).height.slice(0,-2))}}]),e}()).\u0275fac=function(e){return new(e||n)(r.Y36(r.SBq),r.Y36(o.p))},n.\u0275cmp=r.Xpm({type:n,selectors:[["nui-configurator-heading"]],inputs:{configuratorTitle:"configuratorTitle",disableCloseButton:"disableCloseButton"},outputs:{close:"close"},features:[r.TTD],decls:4,vars:3,consts:[[1,"configurator-heading","d-flex","justify-content-between","align-items-center","p-4"],[1,"nui-text-panel","nui-text-ellipsis",3,"title"],["nui-button","","type","button","displayStyle","action","icon","close",3,"disabled","click"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"span",1),r._uU(2),r.qZA(),r.TgZ(3,"button",2),r.NdJ("click",function(){return t.close.emit()}),r.qZA(),r.qZA()),2&e&&(r.xp6(1),r.Q6J("title",t.configuratorTitle),r.xp6(1),r.hij(" ",t.configuratorTitle," "),r.xp6(1),r.Q6J("disabled",t.disableCloseButton))},directives:[s.r0F],styles:["[_nghost-%COMP%]{z-index:1080;background-color:#fff;background-color:var(--nui-color-bg-content,#fff)}[_nghost-%COMP%]   .configurator-heading[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#d9d9d9;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),n)},83385:function(e,t,i){"use strict";i.d(t,{e:function(){return s}});var n,r=i(15257),o=i(33018),s=((n=function(){function e(){Oo(this,e),this.accordions=[]}return Fo(e,[{key:"registerAccordion",value:function(e){var t=this;this.accordions.push({instance:e,openSubscription:e.openSubject.subscribe(function(){t.closeAllAccordions(),e.open=!0}),destroySubscription:e.destroySubject.pipe((0,r.q)(1)).subscribe(function(){t.removeAccordion(e)})})}},{key:"closeAllAccordions",value:function(){this.accordions.forEach(function(e){e.instance.closeAccordion()})}},{key:"removeAccordion",value:function(e){var t=this.accordions.findIndex(function(t){return t.instance===e});this.accordions[t].openSubscription.unsubscribe(),this.accordions.splice(t,1)}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n)},6432:function(e,t,i){"use strict";i.d(t,{j:function(){return C}});var n=i(33018),r=i(92677),o=i(92954),s=i(46806),a=i(90665),l=i(38583),c=i(46747),u=i(87636);function d(e,t){1&e&&n.GkF(0)}function p(e,t){1&e&&n.GkF(0)}function h(e,t){if(1&e&&(n.TgZ(0,"div",5),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.Q6J("title",i.headerText),n.xp6(1),n.hij(" ",i.headerText," ")}}function f(e,t){}var g=function(){return["formReady"]};function m(e,t){if(1&e){var i=n.EpF();n.ynx(0),n.ynx(1,6,7),n.NdJ("output",function(e){var t=n.CHM(i).$implicit;return n.oxw().onEvent(t.id,e)}),n.YNc(3,f,0,0,"ng-template",8),n.NdJ("attached",function(e){return n.CHM(i),n.MAs(2).attached(e)}),n.BQk(),n.BQk()}if(2&e){var r=t.$implicit,o=n.MAs(2);n.xp6(1),n.Q6J("componentId",r.id)("componentType",r.componentType)("providers",r.providers)("properties",r.properties)("outputs",n.DdM(6,g)),n.xp6(2),n.Q6J("cdkPortalOutlet",o.portal)}}var v,y=[[["","headerText",""]],[["","headerButtons",""]],"*"],b=["[headerText]","[headerButtons]","*"],C=((v=function(e){xo(i,e);var t=ko(i);function i(e,r,o,s){var a;return Oo(this,i),(a=t.call(this,e,r,o)).formBuilder=s,a.nodes=[],a.headerText="",a.formReady=new n.vpe,a.formDestroy=new n.vpe,a}return Fo(i,[{key:"getNodes",value:function(){return this.nodes}},{key:"ngOnInit",value:function(){this.form=this.formBuilder.group({})}},{key:"onEvent",value:function(e,t){"formReady"===t.id&&this.addFormGroup(e,t.payload),Object.keys(this.form.controls).length===this.getNodes().length&&this.formReady.emit(this.form)}},{key:"addFormGroup",value:function(e,t){this.form.addControl(e,t)}},{key:"ngOnDestroy",value:function(){this.formDestroy.emit(this.form),bo(Io(i.prototype),"ngOnDestroy",this).call(this)}}]),i}(r.I)).lateLoadKey="WidgetConfiguratorSectionComponent",v.\u0275fac=function(e){return new(e||v)(n.Y36(n.sBO),n.Y36(o.p),n.Y36(s.mQy),n.Y36(a.qu))},v.\u0275cmp=n.Xpm({type:v,selectors:[["nui-widget-configurator-section"]],hostAttrs:[1,"nui-widget-configurator-section"],inputs:{headerTextTemplate:"headerTextTemplate",headerButtonsTemplate:"headerButtonsTemplate",nodes:"nodes",headerText:"headerText"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[n.qOj],ngContentSelectors:b,decls:9,vars:5,consts:[[1,"widget-configurator-section"],[1,"widget-configurator-section__header","d-flex","justify-content-between","align-items-center"],[4,"ngTemplateOutlet"],["headerText","","class","widget-configurator-section__header-text",3,"title",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["headerText","",1,"widget-configurator-section__header-text",3,"title"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&(n.F$t(y),n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.YNc(2,d,1,0,"ng-container",2),n.YNc(3,p,1,0,"ng-container",2),n.YNc(4,h,2,2,"div",3),n.Hsn(5),n.Hsn(6,1),n.qZA(),n.YNc(7,m,4,7,"ng-container",4),n.Hsn(8,2),n.qZA()),2&e&&(n.xp6(2),n.Q6J("ngTemplateOutlet",t.headerTextTemplate),n.xp6(1),n.Q6J("ngTemplateOutlet",t.headerButtonsTemplate),n.xp6(1),n.Q6J("ngIf",t.headerText),n.xp6(3),n.Q6J("ngForOf",t.nodeConfigs)("ngForTrackBy",t.trackByFn))},directives:[l.tP,l.O5,l.sg,c.$,u.Pl],styles:[".widget-configurator-section{margin:15px;border-radius:3px;border:1px solid;border-color:#d9d9d9;border-color:var(--nui-color-line-default,#d9d9d9)}.widget-configurator-section__header{padding:15px 5px 15px 15px;height:40px;font-size:16px;font-weight:600;background-color:#f0f0f0;background-color:var(--nui-color-bg-table_header,#f0f0f0);color:rgba(17,17,17,.6);color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6))}.widget-configurator-section__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),v)},4433:function(e,t,i){"use strict";i.d(t,{J:function(){return h}});var n=i(79765),r=i(65470),o=i(33018),s=i(83385),a=i(46806),l=i(38583);function c(e,t){if(1&e&&o._UZ(0,"nui-icon",4),2&e){var i=o.oxw();o.Q6J("icon",i.open?"triangle-down":"triangle-left")}}var u,d=[[["","accordionHeader",""]],"*"],p=["[accordionHeader]","*"],h=((u=function(){function e(t,i){Oo(this,e),this.accordionCoordinator=t,this.cd=i,this.showOpenStateIcon=!0,this.state=r.Nc.DEFAULT,this.open=!1,this.openSubject=new n.xQ,this.destroySubject=new n.xQ}return Fo(e,[{key:"ngOnInit",value:function(){this.accordionCoordinator.registerAccordion(this)}},{key:"openChange",value:function(e){e?this.openSubject.next():this.closeAccordion()}},{key:"closeAccordion",value:function(){this.cd.markForCheck(),this.open=!1}},{key:"ngOnDestroy",value:function(){this.destroySubject.next(),this.destroySubject.complete()}}]),e}()).\u0275fac=function(e){return new(e||u)(o.Y36(s.e),o.Y36(o.sBO))},u.\u0275cmp=o.Xpm({type:u,selectors:[["nui-widget-editor-accordion"]],inputs:{showOpenStateIcon:"showOpenStateIcon",state:"state"},ngContentSelectors:p,decls:6,vars:6,consts:[[1,"nui-widget-editor-accordion"],[3,"open","openChange"],["nuiExpanderHeader","",1,"d-flex","align-items-start"],["class","nui-widget-editor-accordion__edit-icon",3,"icon",4,"ngIf"],[1,"nui-widget-editor-accordion__edit-icon",3,"icon"]],template:function(e,t){1&e&&(o.F$t(d),o.TgZ(0,"div",0),o.TgZ(1,"nui-expander",1),o.NdJ("openChange",function(e){return t.openChange(e)}),o.TgZ(2,"div",2),o.Hsn(3),o.YNc(4,c,1,1,"nui-icon",3),o.qZA(),o.Hsn(5,1),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.Q6J("open",t.open),o.xp6(1),o.ekj("error-state","critical"===t.state)("warning-state","warning"===t.state),o.xp6(2),o.Q6J("ngIf",t.showOpenStateIcon))},directives:[a.Fxv,l.O5,a.oJW],styles:[".nui-widget-editor-accordion nui-form-field:last-child .nui-form-field{margin-bottom:0}.nui-widget-editor-accordion__edit-icon{padding:10px;margin-left:auto;margin-right:5px}.nui-widget-editor-accordion .nui-expander--expanded{padding-bottom:0}.nui-widget-editor-accordion .nui-expander__header-icon{display:none}.nui-widget-editor-accordion .nui-expander__header .error-state{background-color:#fceae6;background-color:var(--nui-color-semantic-critical-bg,#fceae6)}.nui-widget-editor-accordion .nui-expander__header .warning-state{background-color:#fff9e6;background-color:var(--nui-color-semantic-warning-bg,#fff9e6)}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader]{border-top:1px solid;border-top-color:#d9d9d9;border-top-color:var(--nui-color-line-default,#d9d9d9);min-height:50px}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]{overflow:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div{overflow-x:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div .nui-text-secondary{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget-editor-accordion .nui-expander__body{margin:0;padding:0;border-left:none}\n"],encapsulation:2,changeDetection:0}),u)},19797:function(e,t,r){"use strict";r.d(t,{b:function(){return S}});var o=r(58102),s=r.n(o),a=r(26215),l=r(79765),c=r(46782),u=r(25624),d=r(39973),p=r(65470),h=r(61817),f=r(33018),g=r(90665),m=r(28726),v=r(66213),y=r(77341),b=r(23309),C=r(38583),x=["formPizzagnaComponent"];function w(e,t){if(1&e){var i=f.EpF();f.TgZ(0,"nui-pizzagna",6,7),f.NdJ("pizzagnaChange",function(e){return f.CHM(i),f.oxw(2).formPizzagna=e}),f.qZA()}if(2&e){var n=f.oxw(2);f.Q6J("rootNode",n.formRoot)("pizzagna",n.formPizzagna)}}function k(e,t){if(1&e&&(f.TgZ(0,"div",4),f.YNc(1,w,2,2,"nui-pizzagna",5),f.qZA()),2&e){var i=f.oxw();f.Q6J("formGroup",i.form),f.xp6(1),f.Q6J("ngIf",i.formPizzagna)}}var T,S=((T=function(){function e(t,i,n,r){Oo(this,e),this.changeDetector=t,this.formBuilder=i,this.previewService=n,this.configurator=r,this.navigationControl=new a.X({busyState:{busy:!1},allowStepChange:!0}),this.busy=!1,this.destroy$=new l.xQ,this.form=this.formBuilder.group({})}return Fo(e,[{key:"formPizzagnaComponent",set:function(e){var t,i=this;null===(t=null==e?void 0:e.eventBus)||void 0===t||t.getStream(d.xZ).pipe((0,c.R)(this.destroy$)).subscribe(function(e){var t,n,r,o=e.payload;null===(r=null===(n=null===(t=i.configurator)||void 0===t?void 0:t.previewPizzagnaComponent)||void 0===n?void 0:n.eventBus)||void 0===r||r.getStream(o.id).next(o.payload)}),this._formPizzagnaComponent=e}},{key:"ngOnInit",value:function(){var e,t=this;this.previewService.preview=null===(e=this.configurator.previewWidget)||void 0===e?void 0:e.pizzagna[p.xW.Configuration],this.previewService.previewChanged.pipe((0,c.R)(this.destroy$)).subscribe(function(e){t.onPreviewPizzagnaUpdate(e),t.changeDetector.detectChanges()}),this.configurator.submitError.pipe((0,c.R)(this.destroy$)).subscribe(function(){t.toggleBusy()}),this.changeDetector.detectChanges()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"onPreviewPizzagnaUpdate",value:function(t){var n,r=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(n=this.configurator.previewWidget)||void 0===n?void 0:n.pizzagna),yo({},p.xW.Configuration,t))});this.configurator.updateWidget(r);var o=s()(t,e.TITLE_PATH,"");this.configuratorTitle=$localize(i||(i=Zo(["Editing ",""])),o)}},{key:"onFinish",value:function(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0});this.toggleBusy(),this.configurator.formSubmit()}},{key:"onCancel",value:function(){this.configurator.formCancel()}},{key:"toggleBusy",value:function(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}}]),e}()).lateLoadKey="WidgetEditorComponent",T.TITLE_PATH="header.properties.title",T.\u0275fac=function(e){return new(e||T)(f.Y36(f.sBO),f.Y36(g.qu),f.Y36(m.m),f.Y36(h.n))},T.\u0275cmp=f.Xpm({type:T,selectors:[["nui-widget-editor"]],viewQuery:function(e,t){var i;1&e&&f.Gf(x,5),2&e&&f.iGM(i=f.CRH())&&(t.formPizzagnaComponent=i.first)},hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",formRoot:"formRoot"},decls:5,vars:5,consts:function(){return[[3,"configuratorTitle","disableCloseButton","close"],["finishText",$localize(n||(n=Zo([":\u241fafa960379d26eb20fd22e6e10537c1c5ec74c5d1\u241f4319441956121197474:Save Changes"]))),3,"hideHeader","navigationControl","finish","cancel"],[3,"stepTemplate"],["step1",""],[3,"formGroup"],[3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],[3,"rootNode","pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(e,t){if(1&e&&(f.TgZ(0,"nui-configurator-heading",0),f.NdJ("close",function(){return t.onCancel()}),f.qZA(),f.TgZ(1,"nui-dashwiz",1),f.NdJ("finish",function(){return t.onFinish()})("cancel",function(){return t.onCancel()}),f._UZ(2,"nui-dashwiz-step",2),f.qZA(),f.YNc(3,k,2,2,"ng-template",null,3,f.W1O)),2&e){var i=f.MAs(4);f.Q6J("configuratorTitle",t.configuratorTitle)("disableCloseButton",t.busy),f.xp6(1),f.Q6J("hideHeader",!0)("navigationControl",t.navigationControl),f.xp6(1),f.Q6J("stepTemplate",i)}},directives:[v.Q,y.i,b.u,g.JL,g.sg,C.O5,u.R],encapsulation:2,changeDetection:0}),T)},36233:function(e,t,i){"use strict";i.d(t,{s:function(){return _}});var n=i(33018),a=i(90665),l=i(79765),c=i(15257),u=i(5358),d=i(65470),p=i(7350),h=i(66297),f=i(35720),g=i(46806),m=i(4433),v=i(38583),y=i(46747),b=i(87636),C=i(52238),x=i(76e3);function w(e,t){if(1&e&&(n.TgZ(0,"nui-select-v2-option",14),n._uU(1),n.qZA()),2&e){var i=t.$implicit;n.Q6J("title",i)("value",i),n.xp6(1),n.hij(" ",i," ")}}function k(e,t){}var T,S=function(){return["errorState"]},I=function(e){return{dataSource:e}},_=((T=function(){function e(t,i,r,o,s,a,c){Oo(this,e),this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=r,this.providerRegistryService=o,this.eventBus=s,this.injector=a,this.logger=c,this.dataSourceProviders=[],this.errorComponent=h.K.lateLoadKey,this.formReady=new n.vpe,this.hasDataSourceError=!1,this.dsOutput=new l.xQ,this.dataFieldIds=new l.xQ}return Fo(e,[{key:"ngOnInit",value:function(){var e=this;this.form=this.formBuilder.group({providerId:[this.providerId||"",[a.kI.required]],properties:this.formBuilder.group(this.properties||{})}),this.form.setValidators([function(){return e.hasDataSourceError?{dataSourceError:!0}:null}]),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t;e.providerId&&!e.providerId.isFirstChange()&&e.providerId.previousValue!==this.providerId&&(null===(t=this.form.get("providerId"))||void 0===t||t.setValue(this.providerId),this.invokeDataSource(this.providerId))}},{key:"onDataSourceChange",value:function(e){this.eventBus.next(p.ay,{}),this.invokeDataSource(e)}},{key:"invokeDataSource",value:function(e){var t=this;if(e){var i=this.providerRegistryService.getProvider(e);i?(this.dataSource=this.providerRegistryService.getProviderInstance(i,this.injector),this.eventBus.next(p.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,c.q)(1)).subscribe(function(e){t.eventBus.next(p.PF,{payload:e}),t.dsOutput.next(e);var i=(null==e?void 0:e.result)||e;i&&t.dataFieldIds.next(Object.keys(i))}),setTimeout(function(){t.dataSource.applyFilters()})):this.logger.warn("No provider found for id:",e)}}},{key:"onErrorState",value:function(e){this.hasDataSourceError=e,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}]),e}()).lateLoadKey="DataSourceConfigurationComponent",T.\u0275fac=function(e){return new(e||T)(n.Y36(n.sBO),n.Y36(f.p),n.Y36(a.qu),n.Y36(u.C),n.Y36(d.nY),n.Y36(n.zs3),n.Y36(g.mQy))},T.\u0275cmp=n.Xpm({type:T,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",errorComponent:"errorComponent",properties:"properties",providerId:"providerId"},outputs:{formReady:"formReady"},features:[n.TTD],decls:20,vars:28,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],$localize(r||(r=Zo([":\u241f1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0\u241f1107354728956440783:Data Source"]))),[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],["caption",$localize(o||(o=Zo([":\u241f7f3bce5049b2c517378a6624460b84d2da9ce332\u241f7245698475792706694:Select Data Source"]))),3,"control"],["placeholder",$localize(s||(s=Zo([":\u241f18c18c5d61f92ef5c3caa37df00fc514fef3d90c\u241f4806513497858020797:Data Sources"]))),"formControlName","providerId",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"nui-widget-editor-accordion",0),n.ALo(1,"async"),n.ALo(2,"nuiWidgetEditorAccordionFormState"),n.TgZ(3,"div",1),n._UZ(4,"nui-icon",2),n.ALo(5,"async"),n.ALo(6,"nuiFormHeaderIconPipe"),n.TgZ(7,"div",3),n.TgZ(8,"span",4),n.SDv(9,5),n.qZA(),n.TgZ(10,"div",6),n._uU(11),n.qZA(),n.qZA(),n.qZA(),n.TgZ(12,"div",7),n.TgZ(13,"nui-form-field",8),n.TgZ(14,"nui-select-v2",9),n.NdJ("valueSelected",function(e){return t.onDataSourceChange(e)}),n.ALo(15,"async"),n.YNc(16,w,2,3,"nui-select-v2-option",10),n.qZA(),n.qZA(),n.ynx(17,11,12),n.NdJ("output",function(e){return t.onErrorState(e.payload)}),n.YNc(19,k,0,0,"ng-template",13),n.NdJ("attached",function(e){return n.CHM(i),n.MAs(18).attached(e)}),n.BQk(),n.qZA(),n.qZA()}if(2&e){var r,o,s,a=n.MAs(18);n.Q6J("formGroup",t.form)("state",n.lcZ(1,14,n.lcZ(2,16,t.form))),n.xp6(4),n.Q6J("icon",n.lcZ(5,18,n.xi3(6,20,t.form,"database"))),n.xp6(6),n.Q6J("title",null==(r=t.form.get("providerId"))?null:r.value),n.xp6(1),n.hij(" ",null==(o=t.form.get("providerId"))?null:o.value," "),n.xp6(2),n.Q6J("control",t.form.get("providerId")),n.xp6(1),n.Q6J("title",null==(s=t.form.get("providerId"))?null:s.value)("popupViewportMargin",n.lcZ(15,23,t.configuratorHeading.height$)),n.xp6(2),n.Q6J("ngForOf",t.dataSourceProviders),n.xp6(1),n.Q6J("componentId",t.errorComponent)("componentType",t.errorComponent)("outputs",n.DdM(25,S))("properties",n.VKq(26,I,t.dataSource)),n.xp6(2),n.Q6J("cdkPortalOutlet",a.portal)}},directives:[m.J,a.JL,a.sg,g.oJW,g.hgI,g.j_n,a.JJ,a.u,v.sg,y.$,b.Pl,g.rLF],pipes:[v.Ov,C.F,x.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),T)},66297:function(e,t,i){"use strict";i.d(t,{K:function(){return g}});var n=i(33018),r=i(46782),o=i(79765),s=i(29569),c=i.n(s),u=i(38583),d=i(46806);function p(e,t){1&e&&(n.TgZ(0,"nui-message",2),n.TgZ(1,"b"),n.SDv(2,3),n.qZA(),n.qZA()),2&e&&n.Q6J("allowDismiss",!1)}function h(e,t){if(1&e&&(n.TgZ(0,"nui-message",4),n.TgZ(1,"b"),n.SDv(2,5),n.qZA(),n._uU(3),n.qZA()),2&e){var i=n.oxw();n.Q6J("allowDismiss",!1),n.xp6(3),n.hij(" ",i.dataSourceError.message||i.dataSourceError.type," ")}}var f,g=((f=function(){function e(t){Oo(this,e),this.changeDetector=t,this.errorState=new n.vpe,this.onDestroy$=new o.xQ,this.dataSourceClear$=new o.xQ}return Fo(e,[{key:"ngOnChanges",value:function(e){e.dataSource&&this.onDataSourceChanged()}},{key:"onDataSourceChanged",value:function(){var e,t,i,n=this;this.dataSourceClear$.next(),null===(t=null===(e=this.dataSource)||void 0===e?void 0:e.busy)||void 0===t||t.pipe((0,r.R)(this.dataSourceClear$)).subscribe(function(e){n.busy=e,n.changeDetector.markForCheck()}),null===(i=this.dataSource)||void 0===i||i.outputsSubject.pipe((0,r.R)(this.dataSourceClear$)).subscribe(function(e){n.data=c()(null==e?void 0:e.result)?e:null==e?void 0:e.result,n.dataSourceError=null==e?void 0:e.error,n.errorState.emit(!!n.dataSourceError),n.changeDetector.markForCheck()})}},{key:"ngOnDestroy",value:function(){this.onDestroy$.next(),this.onDestroy$.complete(),this.dataSourceClear$.next(),this.dataSourceClear$.complete()}}]),e}()).lateLoadKey="DataSourceErrorComponent",f.\u0275fac=function(e){return new(e||f)(n.Y36(n.sBO))},f.\u0275cmp=n.Xpm({type:f,selectors:[["nui-data-source-error"]],inputs:{dataSource:"dataSource"},outputs:{errorState:"errorState"},features:[n.TTD],decls:3,vars:2,consts:function(){return[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],$localize(a||(a=Zo([":\u241f7471accb59033b8bee2f7d6907d8deefcfe7d5de\u241f8643306703234832815:Select a data source"]))),["type","critical",1,"mt-4","d-block",3,"allowDismiss"],$localize(l||(l=Zo([":\u241fc399afe21627dcfed1a9865c0e084fac997896c2\u241f4016661485141937765:Something went wrong with the data source: "])))]},template:function(e,t){1&e&&(n.TgZ(0,"div"),n.YNc(1,p,3,1,"nui-message",0),n.YNc(2,h,4,2,"nui-message",1),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",!t.dataSource),n.xp6(1),n.Q6J("ngIf",t.dataSourceError))},directives:[u.O5,d.qqZ],encapsulation:2,changeDetection:0}),f)},35484:function(e,t,i){"use strict";i.d(t,{Z:function(){return f}});var n=i(66297),r=i(33018),o=i(38583),s=i(46806);function a(e,t){1&e&&(r.TgZ(0,"nui-message",2),r.TgZ(1,"b"),r.SDv(2,3),r.qZA(),r.qZA()),2&e&&r.Q6J("allowDismiss",!1)}function l(e,t){1&e&&(r.TgZ(0,"nui-message",2),r.TgZ(1,"b"),r.SDv(2,4),r.qZA(),r.qZA()),2&e&&r.Q6J("allowDismiss",!1)}function p(e,t){if(1&e&&(r.TgZ(0,"nui-message",5),r.TgZ(1,"b"),r.SDv(2,6),r.qZA(),r._uU(3),r.qZA()),2&e){var i=r.oxw();r.Q6J("allowDismiss",!1),r.xp6(3),r.hij(" ",i.dataSourceError.message||i.dataSourceError.type," ")}}var h,f=((h=function(e){xo(i,e);var t=ko(i);function i(e){var n;return Oo(this,i),(n=t.call(this,e)).changeDetector=e,n}return Fo(i,[{key:"ngOnDestroy",value:function(){bo(Io(i.prototype),"ngOnDestroy",this).call(this)}}]),i}(n.K)).lateLoadKey="TableDataSourceErrorComponent",h.\u0275fac=function(e){return new(e||h)(r.Y36(r.sBO))},h.\u0275cmp=r.Xpm({type:h,selectors:[["nui-table-data-source-error"]],features:[r.qOj],decls:4,vars:3,consts:function(){return[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],$localize(c||(c=Zo([":\u241ff4720e7c5bf93bfef522f919823f31793a4a09fb\u241f3836782658203534481:Data source needs to be configured"]))),$localize(u||(u=Zo([":\u241f7471accb59033b8bee2f7d6907d8deefcfe7d5de\u241f8643306703234832815:Select a data source"]))),["type","critical",1,"mt-4","d-block",3,"allowDismiss"],$localize(d||(d=Zo([":\u241fc399afe21627dcfed1a9865c0e084fac997896c2\u241f4016661485141937765:Something went wrong with the data source: "])))]},template:function(e,t){1&e&&(r.TgZ(0,"div"),r.YNc(1,a,3,1,"nui-message",0),r.YNc(2,l,3,1,"nui-message",0),r.YNc(3,p,4,2,"nui-message",1),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngIf",t.dataSource&&!(null!=t.data&&t.data.dataFields.length)&&!t.dataSourceError&&!t.busy),r.xp6(1),r.Q6J("ngIf",!t.dataSource),r.xp6(1),r.Q6J("ngIf",t.dataSourceError))},directives:[o.O5,s.qqZ],encapsulation:2,changeDetection:0}),h)},95228:function(e,t,i){"use strict";i.d(t,{F:function(){return C}});var n=i(33018),r=i(90665),o=i(98640),s=i(79765),a=i(46782),l=i(31500),c=i(46806),u=i(38583);function d(e,t){if(1&e&&(n.TgZ(0,"nui-select-v2-option",7),n._uU(1),n.qZA()),2&e){var i=t.$implicit;n.Q6J("value",i),n.xp6(1),n.hij(" ",i.label," ")}}var b,C=((b=function(){function e(t,i){Oo(this,e),this.fb=t,this.cd=i,this.possibleUnits=[l.j1.Second,l.j1.Minute,l.j1.Hour],this.unitItems=[],this.displayedUnitItems=[],this.currentUnit=null,this.valueChangeFix=o.Z,this.destroy$$=new s.xQ}return Fo(e,[{key:"ngOnInit",value:function(){this.generateUnitItems(),this.filterUnitItems(),this.createForm()}},{key:"ngOnDestroy",value:function(){this.destroy$$.next(),this.destroy$$.complete()}},{key:"getNumberMin",value:function(){if(this.unitControl.value&&null!=this.minSeconds){var e=(0,l.if)(l.j1.Second,this.unitControl.value.id);return Math.ceil(this.minSeconds*e)}}},{key:"getNumberMax",value:function(){if(this.unitControl.value&&null!=this.maxSeconds){var e=(0,l.if)(l.j1.Second,this.unitControl.value.id);return Math.floor(this.maxSeconds*e)}}},{key:"writeValue",value:function(e){if(isFinite(e)&&this.isRangeValid()&&this.unitControl.value){var t=(0,l.if)(l.j1.Second,this.unitControl.value.id);this.numberControl.setValue(e*t)}else this.numberControl.setValue(null);this.cd.markForCheck()}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){}},{key:"setDisabledState",value:function(e){e?(this.numberControl.disable({emitEvent:!1}),this.unitControl.disable({emitEvent:!1})):(this.numberControl.enable({emitEvent:!1}),this.unitControl.enable({emitEvent:!1})),this.cd.markForCheck()}},{key:"resetUnits",value:function(){this.unitControl.setValue(this.displayedUnitItems[0])}},{key:"generateUnitItems",value:function(){var e=this;this.possibleUnits.forEach(function(t,i){e.unitItems[i]={id:t,label:l.jq[t]}})}},{key:"filterUnitItems",value:function(){var e=this;this.displayedUnitItems=this.unitItems.filter(function(t){var i=!1;if(null!=e.maxSeconds){var n=(0,l.if)(l.j1.Second,t.id);i=Math.floor(e.maxSeconds*n)<=0}return!i})}},{key:"createForm",value:function(){var e=this;this.form=this.fb.group({number:[1,[r.kI.required]],unit:this.displayedUnitItems[0]}),this.numberControl=this.form.get("number"),this.unitControl=this.form.get("unit"),this.unitControl.value&&(this.currentUnit=this.unitControl.value.id),this.form.valueChanges.pipe((0,a.R)(this.destroy$$)).subscribe(function(){e.updateError(),e.emitValueChange()})}},{key:"updateError",value:function(){this.isNumberValid()?this.numberControl.setErrors(null):this.numberControl.setErrors({invalidNumber:!0})}},{key:"emitValueChange",value:function(){var e=this.numberControl.value,t=this.unitControl.value;if(null!=e&&null!=t){var i=(0,l.if)(t.id,l.j1.Second);this.onChange&&this.onChange(e*i)}else this.onChange&&this.onChange(null)}},{key:"isRangeValid",value:function(){return this.minSeconds<=this.maxSeconds||null==this.maxSeconds}},{key:"isNumberValid",value:function(){var e=this.numberControl.value;return!(e<this.minSeconds||e%1!=0)&&!(e*(0,l.if)(this.unitControl.value.id,l.j1.Second)>this.maxSeconds)&&this.isRangeValid()}},{key:"getNumberValidationMessage",value:function(){var e={min:this.getNumberMin(),max:this.getNumberMax(),whole:!0};return this.getLocalizedNumberValidationMessage(e)}},{key:"getLocalizedNumberValidationMessage",value:function(e){var t,i=e.min,n=e.max;return t=e.whole?$localize(p||(p=Zo(["a whole number"]))):$localize(h||(h=Zo(["a number"]))),null!=i&&null!=n?i===n?$localize(f||(f=Zo(["Must be "," equal to ",""])),t,i):$localize(g||(g=Zo(["Must be "," between "," and ",""])),t,i,n):null==i&&null!=n?$localize(m||(m=Zo(["Must be "," not larger than ",""])),t,n):null!=i&&null==n?$localize(v||(v=Zo(["Must be "," not smaller than ",""])),t,i):$localize(y||(y=Zo(["Must be ",""])),t)}},{key:"validate",value:function(){var e;return(null===(e=this.form.get("number"))||void 0===e?void 0:e.errors)||null}}]),e}()).\u0275fac=function(e){return new(e||b)(n.Y36(r.qu),n.Y36(n.sBO))},b.\u0275cmp=n.Xpm({type:b,selectors:[["nui-refresh-rate-configurator"]],inputs:{minSeconds:"minSeconds",maxSeconds:"maxSeconds"},features:[n._Bn([{provide:r.JU,useExisting:(0,n.Gpc)(function(){return b}),multi:!0},{provide:r.Cf,useExisting:(0,n.Gpc)(function(){return b}),multi:!0}])],decls:8,vars:6,consts:[[1,"d-flex","flex-column",3,"formGroup"],[1,"d-flex","flex-row"],["formControlName","number","customBoxWidth","90px",3,"minValue","maxValue","valueChange"],["formControlName","unit",1,"ml-3"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["for","invalidNumber"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"form",0),n.TgZ(1,"div",1),n.TgZ(2,"nui-textbox-number",2),n.NdJ("valueChange",function(){return t.valueChangeFix()}),n.qZA(),n.TgZ(3,"nui-select-v2",3),n.YNc(4,d,2,2,"nui-select-v2-option",4),n.qZA(),n.qZA(),n.TgZ(5,"nui-form-field",5),n.TgZ(6,"nui-validation-message",6),n._uU(7),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Q6J("formGroup",t.form),n.xp6(2),n.Q6J("minValue",t.minSeconds)("maxValue",t.maxSeconds),n.xp6(2),n.Q6J("ngForOf",t.displayedUnitItems),n.xp6(1),n.Q6J("control",t.form.get("number")),n.xp6(2),n.hij(" ",t.getNumberValidationMessage()," "))},directives:[r._Y,r.JL,r.sg,c.I5I,r.JJ,r.u,c.j_n,u.sg,c.hgI,c.CfE,c.rLF],encapsulation:2,changeDetection:0}),b)},31500:function(e,t,i){"use strict";var n,r,o;i.d(t,{j1:function(){return a},jq:function(){return c},FF:function(){return u},if:function(){return d}});var s,a=((s=a||(a={})).Second="second",s.Minute="minute",s.Hour="hour",a),l=(yo(n={},a.Second,1e3),yo(n,a.Minute,6e4),yo(n,a.Hour,36e5),n),c=(yo(r={},a.Hour,$localize(b||(b=Zo([":hours unit (long):hours"])))),yo(r,a.Minute,$localize(C||(C=Zo([":minutes unit (long):minutes"])))),yo(r,a.Second,$localize(x||(x=Zo([":seconds unit (long):seconds"])))),r),u=(yo(o={},a.Hour,$localize(w||(w=Zo([":hours unit (short):h"])))),yo(o,a.Minute,$localize(k||(k=Zo([":minutes unit (short):min"])))),yo(o,a.Second,$localize(T||(T=Zo([":seconds unit (short):sec"])))),o);function d(e,t){return l[e]/l[t]}},98348:function(e,t,i){"use strict";i.d(t,{O:function(){return C}});var n=i(33018),r=i(90665),o=i(79765),s=i(90739),a=i(46782),l=i(45435),c=i(68307),u=i(95228),d=i(31500),p=i(46806),h=i(43397),f=i(4433),g=i(38583),m=i(52238),v=i(76e3);function y(e,t){if(1&e&&(n.TgZ(0,"div",15),n.SDv(1,16),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.pQV(i.getDurationLabel(i.refresherSettings.refreshRateSeconds)),n.QtT(1)}}var b,C=((b=function(){function e(t,i,r,s,a){var l=this;Oo(this,e),this.changeDetector=t,this.formBuilder=i,this.logger=r,this.refresherSettings=s,this.cd=a,this.minSeconds=1,this.maxSeconds=86400,this.overrideDefaultSettingsCaption=$localize(S||(S=Zo(["Custom refresh rate"]))),this.overrideDefaultSettings=!0,this.formReady=new n.vpe,this.destroyed$=new o.xQ,this.resetInterval=function(){var e;l.refreshRateComp.resetUnits(),null===(e=l.form.get("interval"))||void 0===e||e.setValue(l.interval||l.minSeconds)}}return Fo(e,[{key:"ngOnInit",value:function(){var e,t=this;this.form=this.formBuilder.group({enabled:[!0,[r.kI.required]],overrideDefaultSettings:[this.overrideDefaultSettings,[r.kI.required]],interval:[null!==(e=this.interval)&&void 0!==e?e:0,[r.kI.required]]}),this.form.statusChanges.pipe((0,a.R)(this.destroyed$)).subscribe(function(){t.form.markAllAsTouched(),t.cd.detectChanges()}),(0,s.aj)([this.form.controls.enabled.valueChanges,this.form.controls.overrideDefaultSettings.valueChanges]).pipe((0,l.h)(function(e){return e.some(function(e){return!e})}),(0,c.b)(this.resetInterval),(0,a.R)(this.destroyed$)).subscribe(),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i,n,r,o,s;e.enabled&&(null===(i=null===(t=this.form)||void 0===t?void 0:t.get("enabled"))||void 0===i||i.patchValue(this.enabled)),e.interval&&(null===(r=null===(n=this.form)||void 0===n?void 0:n.get("interval"))||void 0===r||r.patchValue(this.interval)),e.overrideDefaultSettings&&(null===(s=null===(o=this.form)||void 0===o?void 0:o.get("overrideDefaultSettings"))||void 0===s||s.patchValue(this.overrideDefaultSettings))}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"getHeaderSubtitle",value:function(){var e,t,i,n="";return(null===(e=this.form.get("enabled"))||void 0===e?void 0:e.value)?(n+=$localize(I||(I=Zo(["Enabled"]))),n+=", ",(null===(t=this.form.get("overrideDefaultSettings"))||void 0===t?void 0:t.value)?n+=this.getDurationLabel(null===(i=this.form.get("interval"))||void 0===i?void 0:i.value):n+=$localize(_||(_=Zo(["Use default value"])))+" ("+this.getDurationLabel(this.refresherSettings.refreshRateSeconds)+")"):n+=$localize(A||(A=Zo(["Disabled"]))),n}},{key:"getDurationLabel",value:function(e){var t=e,i="",n=Math.floor(t/3600);t%=3600;var r=Math.floor(t/60),o=t%60;return n>0&&(i+=n+" "+d.FF[d.j1.Hour]+" "),r>0&&(i+=r+" "+d.FF[d.j1.Minute]+" "),o>0&&(i+=o+" "+d.FF[d.j1.Second]+" "),""===(i=i.trim())?"0 "+d.FF[d.j1.Second]:i}}]),e}()).lateLoadKey="RefresherConfigurationComponent",b.\u0275fac=function(e){return new(e||b)(n.Y36(n.sBO),n.Y36(r.qu),n.Y36(p.mQy),n.Y36(h.g),n.Y36(n.sBO))},b.\u0275cmp=n.Xpm({type:b,selectors:[["nui-refresher-configuration"]],viewQuery:function(e,t){var i;1&e&&n.Gf(u.F,5),2&e&&n.iGM(i=n.CRH())&&(t.refreshRateComp=i.first)},inputs:{enabled:"enabled",interval:"interval",minSeconds:"minSeconds",maxSeconds:"maxSeconds",overrideDefaultSettingsCaption:"overrideDefaultSettingsCaption",overrideDefaultSettings:"overrideDefaultSettings"},outputs:{formReady:"formReady"},features:[n.TTD],decls:26,vars:25,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(z||(z=Zo([":\u241fc8d1785038d461ec66b5799db21864182b35900a\u241f1102717806459547726:Refresh"]))),[1,"nui-text-secondary",3,"title"],[1,"d-flex","flex-column","nui-refresher-configuration__accordion-content"],[3,"control"],["formControlName","enabled"],$localize(Z||(Z=Zo([":\u241f913ac9d5354818a43028659e12bb79cc3a8d19e3\u241f2148212086281974142:Refresh widget periodically"]))),[1,"mt-4"],["formControlName","overrideDefaultSettings"],["class","nui-help-hint",4,"ngIf"],["formControlName","interval",3,"minSeconds","maxSeconds"],[1,"nui-help-hint"],$localize(O||(O=Zo([":\u241fd4a0303469acbc423b1d78a0b58542656f39cdfe\u241f2636978669188691313: By default, the widget will refresh every ",":INTERPOLATION:. "])),"\ufffd0\ufffd")]},template:function(e,t){var i,r,o;1&e&&(n.TgZ(0,"nui-widget-editor-accordion",0),n.ALo(1,"async"),n.ALo(2,"nuiWidgetEditorAccordionFormState"),n.TgZ(3,"div",1),n._UZ(4,"nui-icon",2),n.ALo(5,"async"),n.ALo(6,"nuiFormHeaderIconPipe"),n.TgZ(7,"div",3),n.TgZ(8,"span",4),n.SDv(9,5),n.qZA(),n.TgZ(10,"div",6),n._uU(11),n.qZA(),n.qZA(),n.qZA(),n.TgZ(12,"div",7),n.TgZ(13,"div"),n.TgZ(14,"nui-form-field",8),n.TgZ(15,"nui-switch",9),n.SDv(16,10),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div"),n.TgZ(18,"div",11),n.TgZ(19,"nui-form-field",8),n.TgZ(20,"nui-switch",12),n._uU(21),n.YNc(22,y,2,1,"div",13),n.qZA(),n.qZA(),n.qZA(),n.TgZ(23,"div",11),n.TgZ(24,"nui-form-field",8),n._UZ(25,"nui-refresh-rate-configurator",14),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Q6J("formGroup",t.form)("state",n.lcZ(1,16,n.lcZ(2,18,t.form))),n.xp6(4),n.Q6J("icon",n.lcZ(5,20,n.xi3(6,22,t.form,"reset"))),n.xp6(6),n.Q6J("title",t.getHeaderSubtitle()),n.xp6(1),n.Oqu(t.getHeaderSubtitle()),n.xp6(3),n.Q6J("control",t.form.get("enabled")),n.xp6(3),n.ekj("hidden",!(null!=(i=t.form.get("enabled"))&&i.value)),n.xp6(2),n.Q6J("control",t.form.get("overrideDefaultSettings")),n.xp6(2),n.hij("",t.overrideDefaultSettingsCaption," "),n.xp6(1),n.Q6J("ngIf",!(null!=(r=t.form.get("overrideDefaultSettings"))&&r.value)),n.xp6(1),n.ekj("hidden",!(null!=(o=t.form.get("overrideDefaultSettings"))&&o.value)),n.xp6(1),n.Q6J("control",t.form.get("interval")),n.xp6(1),n.Q6J("minSeconds",t.minSeconds)("maxSeconds",t.maxSeconds))},directives:[f.J,r.JL,r.sg,p.oJW,p.hgI,p.qUD,r.JJ,r.u,g.O5,u.F],pipes:[g.Ov,m.F,v.d],styles:[".nui-refresher-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),b)},41450:function(e,t,i){"use strict";i.d(t,{U:function(){return d}});var n,r=i(33018),o=i(90665),s=i(46806),a=i(4433),l=i(38583),c=i(52238),u=i(76e3),d=((n=function(){function e(t,i,n){Oo(this,e),this.changeDetector=t,this.formBuilder=i,this.logger=n,this.formReady=new r.vpe,this.form=this.formBuilder.group({title:["",o.kI.required],subtitle:[""],url:[""],description:[""],collapsible:[!1],collapsed:[!0]})}return Fo(e,[{key:"ngOnInit",value:function(){this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i,n,r,o;e.title&&(null===(t=this.form.get("title"))||void 0===t||t.setValue(this.title)),e.url&&(null===(i=this.form.get("url"))||void 0===i||i.setValue(this.url)),e.subtitle&&(null===(n=this.form.get("subtitle"))||void 0===n||n.setValue(this.subtitle)),e.description&&(null===(r=this.form.get("description"))||void 0===r||r.setValue(this.description)),e.collapsible&&(null===(o=this.form.get("collapsible"))||void 0===o||o.setValue(this.collapsible))}},{key:"getSecondaryText",value:function(){return"".concat(this.form.controls.title.value||$localize(P||(P=Zo(["No title"]))),", ").concat(this.form.controls.subtitle.value||$localize(F||(F=Zo(["no subtitle"]))))}}]),e}()).lateLoadKey="TitleAndDescriptionConfigurationComponent",n.\u0275fac=function(e){return new(e||n)(r.Y36(r.sBO),r.Y36(o.qu),r.Y36(s.mQy))},n.\u0275cmp=r.Xpm({type:n,selectors:[["nui-title-and-description-configuration"]],inputs:{title:"title",url:"url",subtitle:"subtitle",description:"description",collapsible:"collapsible"},outputs:{formReady:"formReady"},features:[r.TTD],decls:31,vars:20,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(D||(D=Zo([":\u241fc1f3e3c0c4876967ade530f67b0696f7c1f5aa76\u241f6274813085792990828:Title and Description"]))),[1,"nui-text-secondary",3,"title"],[1,"title-and-description-configuration__accordion-content"],[1,"mb-4"],["caption",$localize($||($=Zo([":\u241ff75e29ac7734f16cad4d02017646720be3030367\u241f1720994052291036243:Widget title"]))),3,"control"],["id","kpi-widget-title","formControlName","title","placeholder",$localize(M||(M=Zo([":\u241feb94f6289d261b9d7b1288cf92c4099023695dd9\u241f2301126677959299103:Set widget title"])))],["for","required"],$localize(R||(R=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),["caption",$localize(J||(J=Zo([":\u241fd2b3deab155463fe2b5ac59000b6e3aa7771afc8\u241f2073684406211180788:Widget subtitle"]))),3,"control"],["id","kpi-widget-subtitle","formControlName","subtitle","placeholder",$localize(L||(L=Zo([":\u241fb6d324cd44176b6e2bfe2ff16bbc7e7ee1c412fc\u241f8934433387734849172:Do not show a subtitle"])))],["caption",$localize(E||(E=Zo([":\u241fcb04bfea86b30d40d2d30630c957bf3fd2e50b83\u241f9207103926988831681:Widget link URL"]))),3,"control"],["id","kpi-widget-url","formControlName","url","placeholder",$localize(q||(q=Zo([":\u241f02773997819c014e0f299deb7cb8e054003850e1\u241f3668070782949850100:Do not link to another page"])))],["caption",$localize(B||(B=Zo([":\u241fab83c23bd6135460422e95fca32b4ec38ddff9e6\u241f3861388441030158101:Widget description"]))),"hint",$localize(N||(N=Zo([":\u241f2f50115d11fc3e29acafe6f99228c2304cffb722\u241f3301579533722588311:This won't be shown on the widget, but can be helpful for\n                          other users who want to re-use this widget on their own dashboards"]))),3,"control"],["formControlName","description","placeholder",$localize(Q||(Q=Zo([":\u241f37b56526e384f843a15323dc730b484a97b4c968\u241f3830487495946043372:No description"])))],["caption",$localize(Y||(Y=Zo([":\u241f9de5a44cd2d54fe77e5c12131ab7a21792ce91df\u241f5450302501374652801:Hide widget header"]))),3,"showOptionalText","control"],["formControlName","collapsible"],$localize(V||(V=Zo([":\u241f6570353e3fb49053e2327cb92f257eab8ccdd274\u241f5369485165489692848:Collapsible"])))]},template:function(e,t){1&e&&(r.TgZ(0,"nui-widget-editor-accordion",0),r.ALo(1,"async"),r.ALo(2,"nuiWidgetEditorAccordionFormState"),r.TgZ(3,"div",1),r._UZ(4,"nui-icon",2),r.ALo(5,"async"),r.ALo(6,"nuiFormHeaderIconPipe"),r.TgZ(7,"div",3),r.TgZ(8,"span",4),r.SDv(9,5),r.qZA(),r.TgZ(10,"div",6),r._uU(11),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"div",7),r.TgZ(13,"div",8),r.TgZ(14,"nui-form-field",9),r._UZ(15,"nui-textbox",10),r.TgZ(16,"nui-validation-message",11),r.SDv(17,12),r.qZA(),r.qZA(),r.qZA(),r.TgZ(18,"div",8),r.TgZ(19,"nui-form-field",13),r._UZ(20,"nui-textbox",14),r.qZA(),r.qZA(),r.TgZ(21,"div",8),r.TgZ(22,"nui-form-field",15),r._UZ(23,"nui-textbox",16),r.qZA(),r.qZA(),r.TgZ(24,"div",8),r.TgZ(25,"nui-form-field",17),r._UZ(26,"nui-textbox",18),r.qZA(),r.qZA(),r.TgZ(27,"div"),r.TgZ(28,"nui-form-field",19),r.TgZ(29,"nui-checkbox",20),r.SDv(30,21),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.Q6J("formGroup",t.form)("state",r.lcZ(1,11,r.lcZ(2,13,t.form))),r.xp6(4),r.Q6J("icon",r.lcZ(5,15,r.xi3(6,17,t.form,"widget_list"))),r.xp6(6),r.Q6J("title",t.getSecondaryText()),r.xp6(1),r.Oqu(t.getSecondaryText()),r.xp6(3),r.Q6J("control",t.form.get("title")),r.xp6(5),r.Q6J("control",t.form.get("subtitle")),r.xp6(3),r.Q6J("control",t.form.get("url")),r.xp6(3),r.Q6J("control",t.form.get("description")),r.xp6(3),r.Q6J("showOptionalText",!1)("control",t.form.get("collapsible")))},directives:[a.J,o.JL,o.sg,s.oJW,s.hgI,s.XHW,o.JJ,o.u,s.CfE,s.bK4],pipes:[l.Ov,c.F,u.d],styles:[".title-and-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n)},50191:function(e,t,i){"use strict";i.d(t,{P:function(){return c}});var n,r=i(33018),o=i(90665),s=i(79765),a=i(46782),l=i(24141),c=((n=function(){function e(t,i){var n=this;Oo(this,e),this.formBuilder=t,this.changeDetector=i,this.onDestroy$=new s.xQ,this.isWidthMessageDisplayed=!1,this.form=this.formBuilder.group({description:this.formBuilder.control({}),presentation:this.formBuilder.control({})}),this.form.valueChanges.pipe((0,a.R)(this.onDestroy$)).subscribe(function(e){var t,i=Object.assign(Object.assign({id:null===(t=n.input)||void 0===t?void 0:t.id},e.description),{formatter:e.presentation});n.changeFn(i)})}return Fo(e,[{key:"ngOnInit",value:function(){var e=this;(0,l.t)(this.formControl,function(){e.form.markAllAsTouched()})}},{key:"registerOnChange",value:function(e){this.changeFn=e}},{key:"registerOnTouched",value:function(e){}},{key:"setDisabledState",value:function(e){}},{key:"validate",value:function(e){return this.form.valid?null:{error:"error"}}},{key:"writeValue",value:function(e){this.input=e,this.form.setValue({presentation:(null==e?void 0:e.formatter)||{},description:e},{emitEvent:!1}),this.changeDetector.markForCheck()}},{key:"ngOnDestroy",value:function(){this.onDestroy$.next(),this.onDestroy$.complete()}}]),e}()).lateLoadKey="TableColumnConfigurationComponent",n.\u0275fac=function(e){return new(e||n)(r.Y36(o.qu),r.Y36(r.sBO))},n.\u0275cmp=r.Xpm({type:n,selectors:[["nui-table-column-configuration"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[r._Bn([{provide:o.JU,useExisting:(0,r.Gpc)(function(){return n}),multi:!0},{provide:o.Cf,useExisting:(0,r.Gpc)(function(){return n}),multi:!0}])],decls:3,vars:4,consts:[[3,"formGroup"],[3,"formControl","isWidthMessageDisplayed"],[3,"formControl"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"nui-description-configuration-v2",1),r._UZ(2,"nui-presentation-configuration-v2",2),r.qZA()),2&e&&(r.Q6J("formGroup",t.form),r.xp6(1),r.Q6J("formControl",t.form.controls.description)("isWidthMessageDisplayed",t.isWidthMessageDisplayed),r.xp6(1),r.Q6J("formControl",t.form.controls.presentation))},encapsulation:2}),n)},29014:function(e,t,i){"use strict";i.d(t,{O:function(){return Z}});var n=i(33018),r=i(90665),o=i(46806),s=i(29569),a=i.n(s),l=i(23348),c=i.n(l),u=i(79765),d=i(46782),p=i(92954),h=i(65470),f=i(72459),g=i(7350),m=i(34357),v=i(38583),y=i(83461),b=i(6432),C=i(50191),x=i(64874),w=i(48248);function k(e,t){if(1&e&&n._UZ(0,"nui-drop-area",16),2&e){var i=n.oxw(3);n.Udp("height",i.draggedItemHeight,"px")}}function T(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"div",17),n._UZ(2,"nui-icon",18),n.qZA(),n.BQk(),n.TgZ(3,"span",19),n.ALo(4,"nuiWidgetConfiguratorSectionHeader"),n._uU(5),n.ALo(6,"nuiWidgetConfiguratorSectionHeader"),n.qZA()),2&e){var i=n.oxw(),r=i.$implicit,o=i.index,s=n.oxw(2);n.xp6(3),n.Q6J("title",n.Dn7(4,2,null==r?null:r.value.label,o,s.columnLabel)),n.xp6(2),n.hij(" ",n.Dn7(6,6,null==r?null:r.value.label,o,s.columnLabel)," ")}}function S(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",20),n.TgZ(1,"button",21),n.NdJ("click",function(){n.CHM(i);var e=n.oxw().index;return n.oxw(2).removeItem(e)}),n.qZA(),n.qZA()}if(2&e){var r=n.oxw().index;n.xp6(1),n.MGl("id","table-widget-remove-column-btn-",r,"")}}function I(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",10),n.NdJ("cdkDragStarted",function(e){return n.CHM(i),n.oxw(2).cdkDragStarted(e)}),n.YNc(1,k,1,2,"nui-drop-area",11),n.YNc(2,T,7,10,"ng-template",null,12,n.W1O),n.YNc(4,S,2,1,"ng-template",null,13,n.W1O),n.TgZ(6,"nui-widget-configurator-section",14),n._UZ(7,"nui-table-column-configuration",15),n.qZA(),n.qZA()}if(2&e){var r=t.$implicit,o=n.MAs(3),s=n.MAs(5),a=n.oxw(2);n.xp6(6),n.Q6J("headerTextTemplate",o)("headerButtonsTemplate",s),n.xp6(1),n.Q6J("formControl",r)("isWidthMessageDisplayed",a.isWidthMessageDisplayed)}}function _(e,t){1&e&&(n.TgZ(0,"div",22),n.TgZ(1,"nui-message",23),n.TgZ(2,"b"),n.SDv(3,24),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("allowDismiss",!1))}function A(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",2),n.NdJ("cdkDropListDropped",function(e){return n.CHM(i),n.oxw().drop(e)}),n.TgZ(1,"div",3),n.YNc(2,I,8,4,"div",4),n.YNc(3,_,4,1,"div",5),n.ALo(4,"async"),n.TgZ(5,"button",6),n.NdJ("click",function(){return n.CHM(i),n.oxw().addColumn()}),n.SDv(6,7),n.qZA(),n.TgZ(7,"button",8),n.NdJ("click",function(){return n.CHM(i),n.oxw().onResetColumns()}),n.SDv(8,9),n.qZA(),n.qZA(),n.qZA()}if(2&e){var r=n.oxw();n.Q6J("formGroup",r.form),n.xp6(2),n.Q6J("ngForOf",r.columnForms)("ngForTrackBy",r.trackBy),n.xp6(1),n.Q6J("ngIf",n.lcZ(4,4,r.emptyColumns$)&&r.form.touched)}}var z,Z=((z=function(){function e(t,i,r,o,s,l,c){var p=this;Oo(this,e),this.formBuilder=t,this.changeDetector=i,this.dialogService=r,this.pizzagnaService=o,this.dataSourceManager=s,this.tableFormatterRegistry=l,this.eventBus=c,this.columns=[],this.formReady=new n.vpe,this.dataSourceFields=[],this.isWidthMessageDisplayed=!1,this.columnLabel=$localize(j||(j=Zo(["Column"]))),this.onDestroy$=new u.xQ,this.form=this.formBuilder.group({columns:this.formBuilder.array([])}),this.form.controls.columns.valueChanges.pipe((0,d.R)(this.onDestroy$)).subscribe(function(e){p.isWidthMessageDisplayed=p.getWidthMessageDisplayed(e),p.changeDetector.markForCheck()}),this.eventBus.subscribeUntil(g.gg,this.onDestroy$,function(e){!e.payload||(p.dataSource=e.payload,p.changeDetector.markForCheck())}),this.eventBus.subscribeUntil(g.PF,this.onDestroy$,function(e){var t,i,n,r;if(!(null===(t=e.payload)||void 0===t?void 0:t.error)){var o=(a()(e.payload.result)?e.payload:e.payload.result||{}).dataFields;p.dataSourceFields=null!=o?o:[];var s=null===(r=null===(n=null===(i=p.dataSource)||void 0===i?void 0:i.features)||void 0===n?void 0:n.getFeatureConfig(h.ni.DisableTableColumnGeneration))||void 0===r?void 0:r.enabled,l=p.mergeColumns(p.dataSourceFields,p.getColumns());(null==l?void 0:l.length)||s?p.updateColumns(l):s||p.resetColumns(!1),p.changeDetector.markForCheck()}}),s.error$.pipe((0,d.R)(this.onDestroy$)).subscribe(function(e){p.dataSourceError=e,p.changeDetector.markForCheck()})}return Fo(e,[{key:"columnForms",get:function(){return this.form.controls.columns.controls}},{key:"ngOnInit",value:function(){var e,t,i;if(this.formReady.emit(this.form),this.template&&!(null===(e=this.tableFormatterRegistry.getItems())||void 0===e?void 0:e.length)){var n=null===(i=null===(t=this.template)||void 0===t?void 0:t[1].properties)||void 0===i?void 0:i.formatters;this.tableFormatterRegistry.addItems(n)}}},{key:"ngOnChanges",value:function(e){e.columns&&this.updateColumns(this.columns,!1)}},{key:"ngOnDestroy",value:function(){this.onDestroy$.next(),this.onDestroy$.complete()}},{key:"getColumns",value:function(){return this.form.controls.columns.value}},{key:"updateColumns",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.form.controls.columns;i.controls=e.map(function(e){var t=new r.NI(e);t.setParent(i);var n=i.controls.find(function(t){return t.value.id===e.id});return n&&(t.markAsTouched=n.markAsTouched),t}),i.updateValueAndValidity({emitEvent:t}),this.changeDetector.markForCheck()}},{key:"trackBy",value:function(e,t){var i;return null===(i=null==t?void 0:t.value)||void 0===i?void 0:i.id}},{key:"addColumn",value:function(){this.form.controls.columns.push(new r.NI({id:(0,o.VjN)("column"),label:"",isActive:!0,formatter:{}}))}},{key:"onResetColumns",value:function(){var e;this.resetColumns(!!(null===(e=this.getColumns())||void 0===e?void 0:e.length))}},{key:"resetColumns",value:function(e){var t=this,i=function(){var e,i=null===(e=t.dataSourceFields)||void 0===e?void 0:e.map(function(e){return{id:(0,o.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:e.id}}},isActive:!0,label:e.label,width:void 0,sortable:e.sortable}});t.updateColumns(i)};e?this.dialogService.confirm({title:$localize(W||(W=Zo(["Are you sure?"]))),message:$localize(H||(H=Zo(["Resetting the columns will revert them to their default configurations. Do you wish to proceed?"]))),confirmText:$localize(U||(U=Zo(["Reset Columns"])))}).result.then(function(e){e&&i()},function(){}):i()}},{key:"mergeColumns",value:function(e,t){var i=e.map(function(e){return e.id});return t.filter(function(e){var t,n,r,o;return!!(null===(n=null===(t=e.formatter)||void 0===t?void 0:t.properties)||void 0===n?void 0:n.dataFieldIds)&&c()(null===(o=null===(r=e.formatter)||void 0===r?void 0:r.properties)||void 0===o?void 0:o.dataFieldIds).some(function(e){return i.includes(e)})})}},{key:"getWidthMessageDisplayed",value:function(e){var t,i=0,n=vo(e);try{for(n.s();!(t=n.n()).done;)if("number"!=typeof t.value.width&&i++,i>1)return!1}catch(r){n.e(r)}finally{n.f()}return!0}},{key:"moveItem",value:function(e,t){var i=this.form.controls.columns,n=i.at(e);i.removeAt(e),i.insert(t,n),this.changeDetector.detectChanges()}},{key:"removeItem",value:function(e){this.form.controls.columns.removeAt(e),this.changeDetector.detectChanges()}},{key:"drop",value:function(e){this.moveItem(e.previousIndex,e.currentIndex)}},{key:"cdkDragStarted",value:function(e){this.draggedItemHeight=e.source.element.nativeElement.offsetHeight}}]),e}()).lateLoadKey="TableColumnsConfigurationV2Component",z.\u0275fac=function(e){return new(e||z)(n.Y36(r.qu),n.Y36(n.sBO),n.Y36(o.xAy),n.Y36(p.p),n.Y36(f.q),n.Y36(m.C),n.Y36(h.nY))},z.\u0275cmp=n.Xpm({type:z,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",componentId:"componentId",template:"template"},outputs:{formReady:"formReady"},features:[n.TTD],decls:2,vars:1,consts:function(){return[[1,"nui-table-columns-configuration"],["cdkDropList","",3,"formGroup","cdkDropListDropped",4,"ngIf"],["cdkDropList","",3,"formGroup","cdkDropListDropped"],["formArrayName","columns"],["cdkDrag","","class","nui-table-columns-configuration__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],$localize(G||(G=Zo([":\u241fcbd02e5e4d0d50f0117496aaa79dc6304fbfd396\u241f1222079118033004998:Add new column "]))),["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],$localize(K||(K=Zo([":\u241f455f2c8ce869f6093d63c54a5f01683788a84f9d\u241f2733625511847836093:Reset columns "]))),["cdkDrag","",1,"nui-table-columns-configuration__node-item",3,"cdkDragStarted"],["class","nui-table-columns-configuration__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],[1,"no-margin",3,"headerTextTemplate","headerButtonsTemplate"],[3,"formControl","isWidthMessageDisplayed"],[1,"nui-table-columns-configuration__drop-area"],["cdkDragHandle","",1,"nui-table-columns-configuration__drag-handler"],["icon","drag"],[1,"nui-table-columns-configuration__header-text",3,"title"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],$localize(X||(X=Zo([":\u241fde46acf5ee4d137a30dbc57e48aef06379e6e500\u241f8256146955477966251:At least one column must be added."])))]},template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,A,9,6,"div",1),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",!t.dataSourceError&&t.dataSourceFields.length))},directives:[v.O5,y.Wj,r.JL,r.sg,r.CE,v.sg,o.r0F,y.Zt,y.Hk,b.j,C.P,r.JJ,r.oH,x.O,y.Bh,o.oJW,o.qqZ],pipes:[v.Ov,w.l],styles:[".nui-table-columns-configuration__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-table-columns-configuration__drag-handler{cursor:move;display:flex}.nui-table-columns-configuration__node-item{background-color:#fff;background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-table-columns-configuration__node-item .widget-configurator-section{margin:0}.nui-table-columns-configuration__drop-area{margin:15px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px rgba(17,17,17,.3);box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),z)},53294:function(e,t,i){"use strict";i.d(t,{U:function(){return m}});var n=i(33018),r=i(58102),o=i.n(r),s=i(79765),a=i(46782),l=i(90665),c=i(35720),u=i(4433),d=i(46806),p=i(38583);function h(e,t){if(1&e&&(n.TgZ(0,"nui-select-v2-option",18),n._uU(1),n.qZA()),2&e){var i=t.$implicit;n.Q6J("value",i.id),n.xp6(1),n.hij(" ",i.label," ")}}function f(e,t){1&e&&(n.TgZ(0,"nui-message",19),n.tHW(1,20),n._UZ(2,"b"),n.N_p(),n.qZA()),2&e&&n.Q6J("allowDismiss",!1)}var g,m=((g=function(){function e(t,i,r){Oo(this,e),this.formBuilder=t,this.configuratorHeading=i,this.changeDetector=r,this.columns=[],this.formReady=new n.vpe,this.sortableColumns=[],this.onDestroy$=new s.xQ}return Fo(e,[{key:"ngOnInit",value:function(){var e=this;this.form=this.formBuilder.group({sorterConfiguration:this.formBuilder.group({sortBy:o()(this.sorterConfiguration,"sortBy",""),descendantSorting:o()(this.sorterConfiguration,"descendantSorting",!1)})}),this.form.valueChanges.pipe((0,a.R)(this.onDestroy$)).subscribe(function(t){e.setAccordionSubtitleValues(t)}),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i,n,r,o=this,s=null===(t=this.form.get("sorterConfiguration"))||void 0===t?void 0:t.get("sortBy"),a=null===(i=this.form.get("sorterConfiguration"))||void 0===i?void 0:i.get("descendantSorting");if(e.sorterConfiguration){var l=this.sortableColumns.find(function(e){var t;return e.id===(null===(t=o.sorterConfiguration)||void 0===t?void 0:t.sortBy)});null==s||s.setValue(null==l?void 0:l.id,{emitEvent:!1}),null==a||a.setValue(null===(n=this.sorterConfiguration)||void 0===n?void 0:n.descendantSorting,{emitEvent:!1})}if(e.columns){this.sortableColumns=this.columns.filter(function(e){var t;return!!e.formatter&&(null===(t=e.sortable)||void 0===t||t)});var c=this.sortableColumns.find(function(e){var t;return e.id===(null===(t=o.sorterConfiguration)||void 0===t?void 0:t.sortBy)});null==s||s.setValue(null==c?void 0:c.id,{emitEvent:!1}),null==a||a.setValue(null===(r=this.sorterConfiguration)||void 0===r?void 0:r.descendantSorting,{emitEvent:!1}),0===this.sortableColumns.length?(null==s||s.disable(),null==a||a.disable()):(null==s||s.enable(),null==a||a.enable())}this.changeDetector.detectChanges()}},{key:"setAccordionSubtitleValues",value:function(e){var t,i;if(e.sorterConfiguration){var n=null===(t=this.columns)||void 0===t?void 0:t.find(function(t){return t.id===e.sorterConfiguration.sortBy});if(!n)return this.selectedSortByValue=$localize(ee||(ee=Zo(["No sorting"]))),this.selectedSortOrderValue="",void(null===(i=this.form.get("sorterConfiguration"))||void 0===i||i.patchValue({sortBy:"",descendantSorting:""},{emitEvent:!1}));var r=e.sorterConfiguration.descendantSorting?$localize(te||(te=Zo(["Descending"]))):$localize(ie||(ie=Zo(["Ascending"])));this.selectedSortByValue=n.label,this.selectedSortOrderValue=", "+r,this.changeDetector.detectChanges()}}},{key:"ngOnDestroy",value:function(){this.onDestroy$.next(),this.onDestroy$.complete()}}]),e}()).lateLoadKey="TableFiltersEditorComponent",g.\u0275fac=function(e){return new(e||g)(n.Y36(l.qu),n.Y36(c.p),n.Y36(n.sBO))},g.\u0275cmp=n.Xpm({type:g,selectors:[["nui-table-filters-editor-component"]],inputs:{sorterConfiguration:"sorterConfiguration",columns:"columns"},outputs:{formReady:"formReady"},features:[n.TTD],decls:20,vars:11,consts:function(){return[[3,"formGroup"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["icon","widget_pie-chart",1,"align-self-start","pt-2"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(ne||(ne=Zo([":\u241f2a63d63538326cdbebb382ee400f9c2ac4ba26eb\u241f2774613742044941352:Sorting"]))),[1,"nui-text-secondary",3,"title"],[1,"table-filters-configuration__accordion-content"],["formGroupName","sorterConfiguration",1,"d-flex","align-items-end"],["caption",$localize(re||(re=Zo([":\u241fec97f67072a83aaa972536b18d83179f6e4bbec9\u241f7699622144571229146:Sort by"]))),1,"w-50",3,"control"],["placeholder",$localize(oe||(oe=Zo([":\u241fe9d403d84c2efea04f713258598abc6dc8fab8bc\u241f270381191166569688:Select column"]))),"formControlName","sortBy",1,"table-filters-configuration__accordion-content__sort-by-input",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],[1,"ml-2"],[3,"control"],["formControlName","descendantSorting"],$localize(se||(se=Zo([":\u241f00c361649822cfeeb5fad8e44bf6c9b9fbcc9852\u241f7343210469772540594: Descending "]))),[1,"p-5"],["type","info",3,"allowDismiss",4,"ngIf"],[3,"value"],["type","info",3,"allowDismiss"],$localize(ae||(ae=Zo([":\u241f73a7df661af2f227feac942adb7cec0474f2b208\u241f1677678378385679212:",":START_BOLD_TEXT:No columns are sortable.",":CLOSE_BOLD_TEXT:"])),"\ufffd#2\ufffd","\ufffd/#2\ufffd")]},template:function(e,t){1&e&&(n.TgZ(0,"nui-widget-editor-accordion",0),n.TgZ(1,"div",1),n._UZ(2,"nui-icon",2),n.TgZ(3,"div",3),n.TgZ(4,"span",4),n.SDv(5,5),n.qZA(),n.TgZ(6,"div",6),n._uU(7),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"div",7),n.TgZ(9,"div",8),n.TgZ(10,"nui-form-field",9),n.TgZ(11,"nui-select-v2",10),n.ALo(12,"async"),n.YNc(13,h,2,2,"nui-select-v2-option",11),n.qZA(),n.qZA(),n.TgZ(14,"div",12),n.TgZ(15,"nui-form-field",13),n.TgZ(16,"nui-checkbox",14),n.SDv(17,15),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(18,"div",16),n.YNc(19,f,3,1,"nui-message",17),n.qZA(),n.qZA()),2&e&&(n.Q6J("formGroup",t.form),n.xp6(6),n.Q6J("title",t.selectedSortByValue+t.selectedSortOrderValue),n.xp6(1),n.AsE(" ",t.selectedSortByValue,"",t.selectedSortOrderValue," "),n.xp6(3),n.Q6J("control",t.form.controls.sortBy),n.xp6(1),n.Q6J("popupViewportMargin",n.lcZ(12,9,t.configuratorHeading.height$)),n.xp6(2),n.Q6J("ngForOf",t.sortableColumns),n.xp6(2),n.Q6J("control",t.form.controls.descendantSorting),n.xp6(4),n.Q6J("ngIf",!t.sortableColumns.length))},directives:[u.J,l.JL,l.sg,d.oJW,l.x0,d.hgI,d.j_n,l.JJ,l.u,p.sg,d.bK4,p.O5,d.rLF,d.qqZ],pipes:[p.Ov],styles:[".table-filters-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),g)},23309:function(e,t,i){"use strict";i.d(t,{u:function(){return u}});var n=i(33018),r=i(46806),o=i(38583),s=i(17030);function a(e,t){1&e&&n.GkF(0)}var l,c=function(e){return{"nui-dashwiz-step--active":e}},u=((l=function(){function e(){var t=this;Oo(this,e),this.hidden=!1,this.spinnerSize=r.Eye.Large,this.enter=new n.vpe,this.valid=new n.vpe,this.exit=new n.vpe,this.next=new n.vpe,this.busyConfig={busy:!1},this.visited=!1,this.active=!1,this.complete=!1,this.icon="step",this.iconColor="",this.enterStep=function(e){t.enter.emit(e)},this.exitStep=function(e){t.exit.emit(e)},this.nextStep=function(e){t.next.emit(e)},this.applyEnteringStep=function(){t.active=!0,t.icon="step-active",t.iconColor="black"},this.applyExitingStep=function(){t.active=!1,t.visited=!0,t.icon="step-complete",t.iconColor=""}}return Fo(e,[{key:"ngOnInit",value:function(){this.nextText=this.nextText||$localize(le||(le=Zo(["Next"])))}},{key:"ngOnChanges",value:function(e){e.stepControl&&this.valid.emit(this.stepControl)}}]),e}()).\u0275fac=function(e){return new(e||l)},l.\u0275cmp=n.Xpm({type:l,selectors:[["nui-dashwiz-step"]],inputs:{stepTemplate:"stepTemplate",stepControl:"stepControl",title:"title",nextText:"nextText",hidden:"hidden",disabled:"disabled",spinnerSize:"spinnerSize"},outputs:{enter:"enter",valid:"valid",exit:"exit",next:"next"},features:[n.TTD],decls:4,vars:9,consts:[["nui-busy","",1,"nui-dashwiz-step","animated","h-100",3,"ngClass","busy"],["cdkScrollable","",1,"h-100","overflow-auto","nui-scroll-shadows","configurator-scrollable"],[4,"ngTemplateOutlet"],[3,"percent","allowCancel","message","size"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.YNc(2,a,1,0,"ng-container",2),n.qZA(),n._UZ(3,"nui-spinner",3),n.qZA()),2&e&&(n.Q6J("ngClass",n.VKq(7,c,t.active))("busy",t.busyConfig.busy),n.xp6(2),n.Q6J("ngTemplateOutlet",t.stepTemplate),n.xp6(1),n.Q6J("percent",t.busyConfig.percent)("allowCancel",t.busyConfig.allowCancel)("message",t.busyConfig.message)("size",t.spinnerSize))},directives:[r.ERI,o.mk,s.PQ,o.tP,r.ORR],styles:[".nui-dashwiz-step[_ngcontent-%COMP%]{display:none}.nui-dashwiz-step--active[_ngcontent-%COMP%]{display:block}"]}),l)},69823:function(e,t,i){"use strict";i.d(t,{P:function(){return u}});var n=i(33018),r=i(46806),o=i(38583);function s(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",6),n.NdJ("click",function(){return n.CHM(i),n.oxw().onBack()}),n.TgZ(1,"span"),n.SDv(2,7),n.qZA(),n.qZA()}if(2&e){var r=n.oxw();n.Q6J("disabled",r.busy)}}function a(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",8),n.NdJ("click",function(){return n.CHM(i),n.oxw().onNext()}),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()}if(2&e){var r=n.oxw();n.Q6J("displayStyle",r.canFinish?"default":"primary")("disabled",r.busy),n.xp6(2),n.Oqu(r.nextText)}}function l(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",9),n.NdJ("click",function(){return n.CHM(i),n.oxw().onFinish()}),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()}if(2&e){var r=n.oxw();n.Q6J("isBusy",r.busy)("disabled",r.busy),n.xp6(2),n.Oqu(r.finishText)}}var c,u=((c=function(){function e(t){Oo(this,e),this.changeDetector=t,this.busy=!1,this.canFinish=!1,this.canProceed=!1,this.isFirstStepActive=!1,this.isLastStepActive=!1,this.cancel=new n.vpe,this.next=new n.vpe,this.back=new n.vpe,this.finish=new n.vpe}return Fo(e,[{key:"onCancel",value:function(){this.cancel.emit()}},{key:"onNext",value:function(){this.next.emit()}},{key:"onBack",value:function(){this.back.emit()}},{key:"onFinish",value:function(){this.finish.emit()}}]),e}()).lateLoadKey="DashwizButtonsComponent",c.\u0275fac=function(e){return new(e||c)(n.Y36(n.sBO))},c.\u0275cmp=n.Xpm({type:c,selectors:[["nui-dashwiz-buttons"]],inputs:{busy:"busy",canFinish:"canFinish",canProceed:"canProceed",isFirstStepActive:"isFirstStepActive",isLastStepActive:"isLastStepActive",nextText:"nextText",finishText:"finishText"},outputs:{cancel:"cancel",next:"next",back:"back",finish:"finish"},decls:7,vars:4,consts:function(){return[[1,"d-flex","justify-content-end","p-4"],["nui-button","","type","button",1,"nui-dashwiz-buttons__cancel-button",3,"disabled","click"],$localize(ce||(ce=Zo([":\u241fd7b35c384aecd25a516200d6921836374613dfe7\u241f2159130950882492111:Cancel"]))),["class","ml-3 nui-dashwiz-buttons__back-button","nui-button","","icon","caret-left","type","button",3,"disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__next-button","nui-button","","type","button",3,"displayStyle","disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__finish-button","nui-button","","type","button","displayStyle","primary",3,"isBusy","disabled","click",4,"ngIf"],["nui-button","","icon","caret-left","type","button",1,"ml-3","nui-dashwiz-buttons__back-button",3,"disabled","click"],$localize(ue||(ue=Zo([":\u241fcda31dbd724cf5f4fa7a4274d9120651490c8a8c\u241f8890553633144307762:Back"]))),["nui-button","","type","button",1,"ml-3","nui-dashwiz-buttons__next-button",3,"displayStyle","disabled","click"],["nui-button","","type","button","displayStyle","primary",1,"ml-3","nui-dashwiz-buttons__finish-button",3,"isBusy","disabled","click"]]},template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"button",1),n.NdJ("click",function(){return t.onCancel()}),n.TgZ(2,"span"),n.SDv(3,2),n.qZA(),n.qZA(),n.YNc(4,s,3,1,"button",3),n.YNc(5,a,3,3,"button",4),n.YNc(6,l,3,3,"button",5),n.qZA()),2&e&&(n.xp6(1),n.Q6J("disabled",t.busy),n.xp6(3),n.Q6J("ngIf",!t.isFirstStepActive),n.xp6(1),n.Q6J("ngIf",!t.isLastStepActive&&t.canProceed),n.xp6(1),n.Q6J("ngIf",t.canFinish||t.isLastStepActive))},directives:[r.r0F,o.O5],encapsulation:2}),c)},77341:function(e,t,i){"use strict";i.d(t,{i:function(){return A}});var n=i(33018),r=i(98990),o=i.n(r),s=i(84857),a=i.n(s),l=i(29569),c=i.n(l),u=i(26215),d=i(23309),p=i(69823),h=i(46806),f=i(34317),g=["container"],m=["stepTitle"],v=function(e){return{"min-width.px":e}};function y(e,t){if(1&e&&(n.TgZ(0,"div",14),n.TgZ(1,"div",15),n.TgZ(2,"div",16),n.TgZ(3,"div",17),n.TgZ(4,"span",18),n.TgZ(5,"span",19,20),n._uU(7),n.qZA(),n.TgZ(8,"div",21),n.TgZ(9,"div",22),n._UZ(10,"div",23),n.qZA(),n._UZ(11,"nui-icon",24),n.TgZ(12,"div",25),n._UZ(13,"div",23),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){var i=n.oxw().$implicit,r=n.oxw(3);n.xp6(7),n.hij(" ",i.title,""),n.xp6(3),n.Q6J("ngStyle",n.VKq(5,v,r.stepLineWidth)),n.xp6(1),n.Q6J("icon",i.icon)("iconColor",i.iconColor),n.xp6(2),n.Q6J("ngStyle",n.VKq(7,v,r.stepLineWidth))}}var b=function(e,t,i,n,r,o){return{"nui-dashwiz__header-step--first":e,"nui-dashwiz__header-step--last":t,"nui-dashwiz__header-step--visited":i,"nui-dashwiz__header-step--disabled":n,"nui-dashwiz__header-step--active":r,"nui-dashwiz__header-step--complete":o}};function C(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"li",12),n.NdJ("click",function(){var e=n.CHM(i).$implicit;return n.oxw(3).selectStep(e)}),n.YNc(1,y,14,9,"div",13),n.qZA()}if(2&e){var r=t.$implicit,o=t.first,s=t.last,a=n.oxw(3);n.Q6J("ngClass",n.HTZ(2,b,o,s,r.visited,r.disabled||!r.visited||a.currentStep.busyConfig.busy,r.active,r.complete)),n.xp6(1),n.Q6J("ngIf",!r.hidden)}}function x(e,t){if(1&e&&(n.TgZ(0,"ul",10),n.YNc(1,C,2,9,"li",11),n.qZA()),2&e){var i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.steps)}}function w(e,t){if(1&e&&(n.TgZ(0,"div",8),n.YNc(1,x,2,1,"ul",9),n.qZA()),2&e){var i=n.oxw();n.ekj("nui-dashwiz__header--lines-stretched",i.stretchStepLines),n.xp6(1),n.Q6J("ngIf",i.steps)}}function k(e,t){}function T(e,t){}var S,I=function(){return["cancel","next","back","finish"]},_=["*"],A=((S=function(){function e(t,i,r,s){var l=this;Oo(this,e),this.changeDetector=t,this.componentFactoryResolver=i,this.logger=r,this.dashwizService=s,this.hideHeader=!1,this.canProceed=!1,this.canFinish=!1,this.finishText=e.placeholderFinishText,this.stretchStepLines=!1,this.stepNavigated=new n.vpe,this.cancel=new n.vpe,this.finish=new n.vpe,this.next=new n.vpe,this.back=new n.vpe,this.navigationControl=new u.X({busyState:{busy:!1},allowStepChange:!0}),this.stepLineWidth=65,this.previousStepIndex=0,this.onBack=function(){if(!c()(l.stepIndex)){var e=l.arraySteps[l.stepIndex-1];(e.hidden||e.disabled)&&(e=o()(l.arraySteps.slice(0).reverse(),function(e){return!e.hidden},a()(l.arraySteps.slice(0).reverse(),l.arraySteps[l.stepIndex])+1)),l.selectStep(e),l.back.emit()}},this.onNext=function(){var e=l.arraySteps[l.stepIndex+1];l.handleStepControl(l.currentStep),l.currentStep.nextStep({currentStepIndex:l.stepIndex,currentStep:l.currentStep,previousStep:l.currentStep,previousStepIndex:l.stepIndex}),(e.hidden||e.disabled&&!c()(e.stepControl))&&(e=o()(l.arraySteps,function(e){return!e.hidden},l.stepIndex+1)),(c()(l.currentStep.stepControl)||l.currentStep.stepControl)&&(l.currentStep.complete=!0),e.disabled&&!e.visited&&(l.currentStep.complete=!1),l.selectStep(e),l.next.emit()},this.onFinish=function(){l.finish.emit()},this.onCancel=function(){l.cancel.emit(0!==l.steps.toArray().filter(function(e){return e.complete}).length)},this.buttonPortalActionMap={cancel:this.onCancel,next:this.onNext,back:this.onBack,finish:this.onFinish},s&&(s.component=this)}return Fo(e,[{key:"ngOnInit",value:function(){this.buttonComponentTypes=this.buttonComponentTypes||[p.P.lateLoadKey],this.finishText===e.placeholderFinishText&&this.logger.warn('DashwizComponent input "finishText" is using placeholder text\n"'.concat(e.placeholderFinishText,'". A value should be specified.'))}},{key:"ngDoCheck",value:function(){this.currentStep&&(this.buttonProperties={busy:this.currentStep.busyConfig.busy,canProceed:this.canProceed,canFinish:this.canFinish,isLastStepActive:this.steps.last.active,isFirstStepActive:this.steps.first.active,nextText:this.currentStep.nextText,finishText:this.finishText})}},{key:"ngAfterContentInit",value:function(){var e=this,t=this.steps.filter(function(e){return e.active});this.arraySteps=this.steps.toArray(),0===t.length&&(this.currentStep=this.steps.first,this.selectStep(this.currentStep),this.changeDetector.detectChanges()),this.steps.toArray().forEach(function(t){t.valid.subscribe(function(i){c()(i)||e.handleStepControl(t)})}),this.navigationControl.subscribe(function(t){e.currentStep.busyConfig=t.busyState,t.allowStepChange&&!c()(e.futureStep)&&e.currentStep!==e.futureStep&&(e.enterAnotherStep(),e.futureStep=void 0)})}},{key:"ngAfterViewChecked",value:function(){this.stretchStepLines&&(this.stepLineWidth=Math.round(this.getLargestLabelWidth()/2),this.changeDetector.detectChanges())}},{key:"ngOnDestroy",value:function(){this.steps.toArray().forEach(function(e){return e.valid.unsubscribe()}),this.navigationControl.unsubscribe(),this.dashwizService.component=void 0}},{key:"addStepDynamic",value:function(e,t){var i=this.componentFactoryResolver.resolveComponentFactory(d.u),n=this.dynamicStep.createComponent(i);return n.instance.stepTemplate=e.stepTemplate,this.arraySteps.splice(t,0,n.instance),this.steps.reset(this.arraySteps),n.instance}},{key:"disableStep",value:function(e){var t=this.arraySteps.indexOf(e);this.arraySteps[t].disabled=!0,this.changeDetector.detectChanges()}},{key:"enableStep",value:function(e){var t=this.arraySteps.indexOf(e);this.arraySteps[t].disabled=!1,this.changeDetector.detectChanges()}},{key:"hideStep",value:function(e){var t=this.arraySteps.indexOf(e);this.arraySteps[t].hidden=!0}},{key:"showStep",value:function(e){var t=this.arraySteps.indexOf(e);this.arraySteps[t].hidden=!1}},{key:"goToStep",value:function(e){this.selectStep(this.arraySteps[e])}},{key:"selectStep",value:function(e){e.disabled||(this.futureStep=e,this.currentStep.exitStep({currentStepIndex:this.arraySteps.indexOf(this.futureStep),currentStep:this.futureStep,previousStep:this.arraySteps[this.stepIndex],previousStepIndex:this.stepIndex}),this.navigationControl.value.allowStepChange&&this.enterAnotherStep())}},{key:"enterAnotherStep",value:function(){var e;this.currentStep.applyExitingStep(),null===(e=this.futureStep)||void 0===e||e.enterStep(),this.futureStep&&(this.currentStep=this.futureStep),this.currentStep.applyEnteringStep(),this.stepIndex=this.arraySteps.indexOf(this.currentStep),this.stepNavigatedEvent={currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.arraySteps[this.previousStepIndex],previousStepIndex:this.previousStepIndex},this.stepNavigated.emit(this.stepNavigatedEvent),this.previousStepIndex=this.stepIndex}},{key:"onButtonPortalOutput",value:function(e){var t,i;null===(i=(t=this.buttonPortalActionMap)[e.id])||void 0===i||i.call(t)}},{key:"disableFollowingSteps",value:function(){this.arraySteps.slice(this.stepIndex+1).map(function(e){e.disabled=!0})}},{key:"enableFollowingSteps",value:function(){this.arraySteps.slice(this.stepIndex+1).map(function(e){e.disabled=!1})}},{key:"handleStepControl",value:function(e){c()(e.stepControl)||(e.stepControl?this.enableFollowingSteps():this.disableFollowingSteps())}},{key:"getLargestLabelWidth",value:function(){var e=this.stepTitles.map(function(e){return e.nativeElement.offsetWidth});return Math.round(Math.max.apply(Math,_o(e)))}}]),e}()).placeholderFinishText="Action",S.\u0275fac=function(e){return new(e||S)(n.Y36(n.sBO),n.Y36(n._Vd),n.Y36(h.mQy),n.Y36(f.e))},S.\u0275cmp=n.Xpm({type:S,selectors:[["nui-dashwiz"]],contentQueries:function(e,t,i){var r;1&e&&n.Suo(i,d.u,4),2&e&&n.iGM(r=n.CRH())&&(t.steps=r)},viewQuery:function(e,t){var i;1&e&&(n.Gf(g,5,n.s_b),n.Gf(m,5)),2&e&&(n.iGM(i=n.CRH())&&(t.dynamicStep=i.first),n.iGM(i=n.CRH())&&(t.stepTitles=i))},hostAttrs:[1,"flex-grow-1","overflow-auto"],inputs:{hideHeader:"hideHeader",canProceed:"canProceed",canFinish:"canFinish",finishText:"finishText",stretchStepLines:"stretchStepLines",buttonComponentTypes:"buttonComponentTypes",navigationControl:"navigationControl"},outputs:{stepNavigated:"stepNavigated",cancel:"cancel",finish:"finish",next:"next",back:"back"},ngContentSelectors:_,decls:10,vars:6,consts:[[1,"nui-dashwiz","d-flex","flex-column","h-100"],["class","nui-dashwiz__header",3,"nui-dashwiz__header--lines-stretched",4,"ngIf"],[1,"nui-scroll-shadows","flex-grow-1","overflow-auto"],["container",""],[1,"nui-dashwiz__footer"],["nuiComponentPortal","","componentId","dashwizButtons",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-dashwiz__header"],["class","nui-dashwiz__header-steps",4,"ngIf"],[1,"nui-dashwiz__header-steps"],["class","nui-dashwiz__header-step",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nui-dashwiz__header-step",3,"ngClass","click"],["class","nui-dashwiz__header-step-container",4,"ngIf"],[1,"nui-dashwiz__header-step-container"],[1,"nui-dashwiz__header-step-row"],[1,"nui-dashwiz__header-step-col"],[1,"nui-dashwiz__header-step-content"],[1,"nui-dashwiz__header-step-link"],[1,"nui-dashwiz__header-step-title"],["stepTitle",""],[1,"nui-dashwiz__header-step-link-container"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-right"],[1,"nui-dashwiz__header-step-line",3,"ngStyle"],[3,"icon","iconColor"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-left"]],template:function(e,t){if(1&e){var i=n.EpF();n.F$t(),n.TgZ(0,"div",0),n.YNc(1,w,2,3,"div",1),n.TgZ(2,"div",2),n.Hsn(3),n.YNc(4,k,0,0,"ng-template",null,3,n.W1O),n.qZA(),n.TgZ(6,"div",4),n.ynx(7,5,6),n.NdJ("output",function(e){return t.onButtonPortalOutput(e)}),n.YNc(9,T,0,0,"ng-template",7),n.NdJ("attached",function(e){return n.CHM(i),n.MAs(8).attached(e)}),n.BQk(),n.qZA(),n.qZA()}if(2&e){var r=n.MAs(8);n.xp6(1),n.Q6J("ngIf",!t.hideHeader),n.xp6(6),n.Q6J("componentType",1===t.buttonComponentTypes.length?t.buttonComponentTypes[0]:t.buttonComponentTypes[t.stepIndex])("properties",t.buttonProperties)("outputs",n.DdM(5,I)),n.xp6(2),n.Q6J("cdkPortalOutlet",r.portal)}},styles:[".nui-dashwiz__header[_ngcontent-%COMP%]{padding:10px 15px;background-color:#fafafa;background-color:var(--nui-color-bg-secondary,#fafafa);border-bottom:1px solid #d9d9d9;border-bottom:1px solid var(--nui-color-line-default, #d9d9d9);overflow:hidden;text-align:center;display:flex;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.nui-dashwiz__header-steps[_ngcontent-%COMP%]{margin-bottom:0;white-space:nowrap;display:inline-flex}.nui-dashwiz__header-step[_ngcontent-%COMP%]{line-height:normal;display:inline-flex;cursor:pointer}.nui-dashwiz__header-step--disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:default}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:#0079aa;border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--first[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%]{border-color:transparent;opacity:0}.nui-dashwiz__header-step--last[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%]{border-color:transparent;opacity:0}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]{cursor:default}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:#111;color:var(--nui-color-bg-dark,#111)}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{text-decoration:none}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:#0079aa;border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:#0079aa;border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:#0079aa;border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step-container[_ngcontent-%COMP%]{display:inline-table;width:100%}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]{display:none}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0}.nui-dashwiz__header-step-row[_ngcontent-%COMP%]{display:table-row}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:#d9d9d9;border-color:var(--nui-color-line-default,#d9d9d9)}.nui-dashwiz__header-step-col-right[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{margin-right:-1px}.nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-bottom:solid 2px;height:2px}.nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:rgba(17,17,17,.6);color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6));transition:color .3s}.nui-dashwiz__header-step-link-container[_ngcontent-%COMP%]{display:flex;align-content:baseline;justify-content:center;align-items:center}.nui-dashwiz__header-step-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis;vertical-align:middle;display:inline-block;max-width:140px;margin:0 0 5px;text-decoration:inherit}.nui-dashwiz__header.nui-dashwiz__header--lines-stretched[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{max-width:unset}.nui-dashwiz__footer[_ngcontent-%COMP%]{z-index:1080;background-color:#fff;background-color:var(--nui-color-bg-content,#fff);border-top:solid 1px #d9d9d9;border-top:solid 1px var(--nui-color-line-default, #d9d9d9)}"]}),S)},34317:function(e,t,i){"use strict";i.d(t,{e:function(){return o}});var n,r=i(33018),o=((n=Fo(function e(){Oo(this,e)})).\u0275fac=function(e){return new(e||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},12204:function(e,t,i){"use strict";i.d(t,{F:function(){return r}});var n=i(90665);function r(e){if(e.valid||e.untouched)return!1;if(e instanceof n.cw)for(var t=0,i=Object.keys(e.controls);t<i.length;t++){var o=i[t];if(r(e.controls[o]))return!0}if(e instanceof n.Oe)for(var s=0;s<e.length;s++)if(r(e.at(s)))return!0;return(e.touched||e.dirty)&&!!e.errors}},30510:function(e,t,i){"use strict";i.d(t,{l:function(){return s}});var n,r=i(40494),o=i(33018),s=((n=function(){function e(t){Oo(this,e),this.widgetTypesService=t}return Fo(e,[{key:"transform",value:function(e){var t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"widget";return(null==e?void 0:e.type)?null===(i=null===(t=this.widgetTypesService.getWidgetType(e.type,e.version).paths)||void 0===t?void 0:t[n])||void 0===i?void 0:i.root:null}}]),e}()).\u0275fac=function(e){return new(e||n)(o.Y36(r.x,16))},n.\u0275pipe=o.Yjl({name:"nuiPizzagnaRoot",type:n,pure:!0}),n)},48248:function(e,t,i){"use strict";i.d(t,{l:function(){return o}});var n,r=i(33018),o=((n=function(){function e(){Oo(this,e),this.defaultHeaderPrefix=$localize(de||(de=Zo(["Value"])))}return Fo(e,[{key:"transform",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaultHeaderPrefix;return"".concat(i," ").concat(t+1).concat(e?" - ":"").concat(e||"")}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275pipe=r.Yjl({name:"nuiWidgetConfiguratorSectionHeader",type:n,pure:!0}),n)},52238:function(e,t,i){"use strict";i.d(t,{F:function(){return h}});var n,r=i(90739),o=i(85345),s=function(){function e(t,i){Oo(this,e),this.keySelector=t,this.flushes=i}return Fo(e,[{key:"call",value:function(e,t){return t.subscribe(new a(e,this.keySelector,this.flushes))}}]),e}(),a=function(e){xo(i,e);var t=ko(i);function i(e,n,r){var s;return Oo(this,i),(s=t.call(this,e)).keySelector=n,s.values=new Set,r&&s.add((0,o.ft)(r,new o.IY(So(s)))),s}return Fo(i,[{key:"notifyNext",value:function(){this.values.clear()}},{key:"notifyError",value:function(e){this._error(e)}},{key:"_next",value:function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)}},{key:"_useKeySelector",value:function(e){var t,i=this.destination;try{t=this.keySelector(e)}catch(n){return void i.error(n)}this._finalizeNext(t,e)}},{key:"_finalizeNext",value:function(e,t){var i=this.values;i.has(e)||(i.add(e),this.destination.next(t))}}]),i}(o.Ds),l=i(39761),c=i(88002),u=i(65470),d=i(12204),p=i(33018),h=((n=function(){function e(){Oo(this,e)}return Fo(e,[{key:"transform",value:function(e){if(!e)throw new Error("Provided form is undefined");return(0,r.aj)([e.statusChanges,e.valueChanges]).pipe((0,l.O)(null),(0,c.U)(function(){return(0,d.F)(e)?u.Nc.CRITICAL:u.Nc.DEFAULT}),function(e){return e.lift(new s(void 0,void 0))})}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275pipe=p.Yjl({name:"nuiWidgetEditorAccordionFormState",type:n,pure:!1}),n)},76e3:function(e,t,i){"use strict";i.d(t,{d:function(){return c}});var n,r=i(90739),o=i(39761),s=i(88002),a=i(12204),l=i(33018),c=((n=function(){function e(){Oo(this,e)}return Fo(e,[{key:"transform",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.ERROR_ICON_DEFAULT;if(!t)throw new Error("Provided form is undefined");return(0,r.aj)([t.statusChanges,t.valueChanges]).pipe((0,o.O)(null),(0,s.U)(function(){return(0,a.F)(t)?n:i}))}}]),e}()).ERROR_ICON_DEFAULT="status_critical",n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=l.Yjl({name:"nuiFormHeaderIconPipe",type:n,pure:!1}),n)},72459:function(e,t,i){"use strict";i.d(t,{q:function(){return h}});var n,r=i(79765),o=i(26215),s=i(46782),a=i(65470),l=i(7350),c=i(29569),u=i.n(c),d=i(33018),p=i(34317),h=((n=function(){function e(t,i){var n=this;Oo(this,e),this.eventBus=t,this.dashwizService=i,this.onDestroy$=new r.xQ,this.dataSourceCreated$=new r.xQ,this.error$=new r.xQ,this.busy$=new o.X(!1),this.dataSourceFields$=new o.X([]),this.eventBus.subscribeUntil(l.gg,this.onDestroy$,function(e){!e.payload||n.onDataSourceCreated(e.payload)}),this.eventBus.subscribeUntil(l.PF,this.onDestroy$,function(e){var t;if(null===(t=e.payload)||void 0===t?void 0:t.error)n.error$.next(e.payload.error);else{n.error$.next(void 0);var i=u()(e.payload.result)?e.payload:e.payload.result||{};(null==i?void 0:i.dataFields)&&n.dataSourceFields$.next(i.dataFields)}})}return Fo(e,[{key:"onDataSourceCreated",value:function(e){var t,i=this;this.dataSource=e,this.dataSourceCreated$.next(),null===(t=this.dataSource.busy)||void 0===t||t.pipe((0,s.R)(this.dataSourceCreated$)).subscribe(function(e){var t,n;null===(n=null===(t=i.dashwizService)||void 0===t?void 0:t.component)||void 0===n||n.navigationControl.next({busyState:{busy:e},allowStepChange:!e}),i.busy$.next(e)})}},{key:"ngOnDestroy",value:function(){this.onDestroy$.next(),this.onDestroy$.complete()}}]),e}()).\u0275fac=function(e){return new(e||n)(d.LFG(a.nY),d.LFG(p.e))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n)},35720:function(e,t,i){"use strict";i.d(t,{p:function(){return s}});var n,r=i(26215),o=i(33018),s=((n=Fo(function e(){Oo(this,e),this.height$=new r.X(0)})).\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n)},15130:function(e,t,i){"use strict";i.d(t,{J:function(){return x}});var n,r=i(99763),o=i(46806),s=i(37524),a=i.n(s),l=i(55836),c=i.n(l),u=i(79765),d=i(59193),p=i(25917),h=i(67574),f=i(43190),g=i(5304),m=i(46782),v=i(45435),y=i(40494),b=i(61817),C=i(33018),x=((n=function(){function e(t,i,n,r,s,a,l){var m=this;Oo(this,e),this.componentFactoryResolver=t,this.widgetTypesService=i,this.injector=n,this.appRef=r,this.logger=s,this.router=l,this.close$=new u.xQ,this.handleSubmit=function(e,t){return function(i){return i.pipe(m.trySubmit(t,e),m.updateDashboard(e.dashboardComponent))}},this.trySubmit=function(e,t){return function(i){return i.pipe((0,f.w)(function(i){return i&&c()(e)?e(i,t).pipe((0,g.K)(function(e){return m.logger.error(e),m.componentRef.instance.handleSubmitError(),d.E})):(0,p.of)(i)}))}},this.updateDashboard=function(e){return function(t){return new h.y(function(i){return t.subscribe(function(t){var n;t&&(t.id=t.id||(0,o.VjN)(),n=e.dashboard.widgets[t.id]?Object.assign(Object.assign({},t),{pizzagna:Object.assign(Object.assign({},m.widgetTypesService.getWidgetType(t.type,t.version).widget),{configuration:t.pizzagna.configuration})}):t,e.removeWidget(n.id,!1),setTimeout(function(){e.updateWidget(n)})),m.close(),i.next()})})}},this.renderer=a.createRenderer(null,null)}return Fo(e,[{key:"open",value:function(e){var t,i={dashboardComponent:e.dashboardComponent,widget:a()(e.widget)};this.componentRef=this.appendComponentToBody();var n=this.componentRef.instance;return n.formPortal=e.portalBundle.portal,n.previewWidget=a()(e.widget),(null===(t=e.portalBundle)||void 0===t?void 0:t.attached)&&n.formPortalAttached.pipe((0,m.R)(this.close$)).subscribe(e.portalBundle.attached),n.changeDetector.detectChanges(),n.result.asObservable().pipe(this.handleSubmit(i,e.trySubmit))}},{key:"close",value:function(){!this.renderer||(this.close$.next(),this.renderer.removeChild(document.body,this.componentRef.hostView.rootNodes[0]),this.appRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.renderer.removeStyle(document.body,"overflow"))}},{key:"appendComponentToBody",value:function(){var e=this,t=this.componentFactoryResolver.resolveComponentFactory(b.n).create(this.injector);return this.appRef.attachView(t.hostView),this.renderer.appendChild(document.body,t.hostView.rootNodes[0]),this.renderer.setStyle(document.body,"overflow","hidden"),this.router&&this.router.events.pipe((0,v.h)(function(e){return e instanceof r.m2}),(0,m.R)(this.close$)).subscribe(function(){return e.close()}),t}}]),e}()).\u0275fac=function(e){return new(e||n)(C.LFG(C._Vd),C.LFG(y.x),C.LFG(C.zs3),C.LFG(C.z2F),C.LFG(o.mQy),C.LFG(C.FYo),C.LFG(r.F0,8))},n.\u0275prov=C.Yz7({token:n,factory:n.\u0275fac}),n)},95819:function(e,t,i){"use strict";i.d(t,{a:function(){return u}});var n,r=i(79765),o=i(92954),s=i(39973),a=i(65470),l=i(33018),c=i(28726),u=((n=function(){function e(t,i,n){Oo(this,e),this.eventBus=t,this.previewService=i,this.pizzagnaService=n,this.destroy$=new r.xQ}return Fo(e,[{key:"ngAfterViewInit",value:function(){this.buildForm(),this.toPreview(this.component.form)}},{key:"setComponent",value:function(e,t){this.component=e,this.componentId=t}},{key:"getPreview",value:function(){return this.previewService.preview}},{key:"updatePreview",value:function(e){this.previewService.preview=e}},{key:"updateFormPizzagna",value:function(e){this.pizzagnaService.updatePizzagna(e),this.eventBus.getStream(s.M).next({payload:{path:"",value:e}})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}()).\u0275fac=function(e){return new(e||n)(l.LFG(a.nY),l.LFG(c.m),l.LFG(o.p))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n)},79705:function(e,t,i){"use strict";i.d(t,{l:function(){return v}});var n,r=i(46806),o=i(93300),s=i.n(o),a=i(59311),l=i.n(a),c=i(12482),u=i.n(c),d=i(46782),p=i(92954),h=i(65470),f=i(95819),g=i(33018),m=i(28726),v=((n=function(e){xo(i,e);var t=ko(i);function i(e,n,r){var o;return Oo(this,i),(o=t.call(this,e,n,r)).shouldReadForm=!1,o}return Fo(i,[{key:"ngAfterViewInit",value:function(){bo(Io(i.prototype),"ngAfterViewInit",this).call(this)}},{key:"buildForm",value:function(){var e,t,i,n=this,o=this.getPreview(),s=(null===(i=null===(t=null===(e=null==o?void 0:o.tiles)||void 0===e?void 0:e.properties)||void 0===t?void 0:t.nodes)||void 0===i?void 0:i.map(function(e){return{id:e,componentType:o[e].componentType}}))||[],a=null==s?void 0:s.map(function(e){return e.id});this.pizzagnaService.createComponentsFromTemplate("tiles",a);var l=this.pizzagnaService.pizzagna;l=(0,r.zdu)(l,"".concat(h.xW.Data,".tiles.properties.tiles"),s),setTimeout(function(){return n.shouldReadForm=!0}),this.updateFormPizzagna(l)}},{key:"toPreview",value:function(e){var t,i=this;null===(t=e.get("tiles"))||void 0===t||t.valueChanges.pipe((0,d.R)(this.destroy$)).subscribe(function(e){var t,n;if(i.shouldReadForm){var o=i.getPreview(),a=(e||[]).map(function(e){return e.id}),c=s()(null===(n=null===(t=null==o?void 0:o.tiles)||void 0===t?void 0:t.properties)||void 0===n?void 0:n.nodes,a);c.length&&(o=u()(o,c));var d=l()(e,function(e){return e.id});o=(0,r.zdu)(o,"tiles.properties.nodes",a);var p,h=vo(a);try{for(h.s();!(p=h.n()).done;){var f=d[p.value];if(f&&!o[f.id]){var g=i.getTileConfiguration(f.id,f.componentType);o=(0,r.zdu)(o,f.id,g)}}}catch(m){h.e(m)}finally{h.f()}i.updatePreview(o)}})}},{key:"getTileConfiguration",value:function(e,t){return{id:e,providers:{dataSource:{providerId:void 0}}}}}]),i}(f.a)).\u0275fac=function(e){return new(e||n)(g.LFG(h.nY),g.LFG(m.m),g.LFG(p.p))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n)},82262:function(e,t,i){"use strict";i.d(t,{M:function(){return d}});var n=i(46806),r=i(46782),o=i(13385),s=i(92954),a=i(65470),l=i(95819),c=i(33018),u=i(28726),d=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r){var o;return Oo(this,i),(o=t.call(this,e,n,r)).PROPERTIES_PATH="".concat(a.xW.Configuration,".chartOptionsEditor.properties"),o}return Fo(i,[{key:"ngAfterViewInit",value:function(){bo(Io(i.prototype),"ngAfterViewInit",this).call(this)}},{key:"buildForm",value:function(){var e,t,i,r,s,a,l,c,u,d,p,h=null===(i=null===(t=null===(e=this.getPreview().chart)||void 0===e?void 0:e.properties)||void 0===t?void 0:t.configuration)||void 0===i?void 0:i.chartOptions,f=this.pizzagnaService.pizzagna;f=(0,n.zdu)(f,"".concat(this.PROPERTIES_PATH,".chartType"),null!==(r=null==h?void 0:h.type)&&void 0!==r?r:void 0),f=(0,n.zdu)(f,"".concat(this.PROPERTIES_PATH,".legendPlacement"),null!==(s=null==h?void 0:h.legendPlacement)&&void 0!==s?s:o.w.None),f=(0,n.zdu)(f,"".concat(this.PROPERTIES_PATH,".legendFormatterComponentType"),null!==(l=null===(a=null==h?void 0:h.legendFormatter)||void 0===a?void 0:a.componentType)&&void 0!==l?l:""),f=(0,n.zdu)(f,"".concat(this.PROPERTIES_PATH,".contentFormatterComponentType"),null!==(u=null===(c=null==h?void 0:h.contentFormatter)||void 0===c?void 0:c.componentType)&&void 0!==u?u:"DonutContentRawFormatterComponent"),f=(0,n.zdu)(f,"".concat(this.PROPERTIES_PATH,".contentFormatterProperties"),null!==(p=null===(d=null==h?void 0:h.contentFormatter)||void 0===d?void 0:d.properties)&&void 0!==p?p:""),this.updateFormPizzagna(f)}},{key:"toPreview",value:function(e){var t=this;e.valueChanges.pipe((0,r.R)(this.destroy$)).subscribe(function(e){var i=(0,n.zdu)(t.getPreview(),"chart.properties.configuration.chartOptions",e);t.updatePreview(i)})}}]),i}(l.a);return e.\u0275fac=function(t){return new(t||e)(c.LFG(a.nY),c.LFG(u.m),c.LFG(s.p))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e}()},45626:function(e,t,i){"use strict";i.d(t,{c:function(){return u}});var n=i(46806),r=i(46782),o=i(92954),s=i(65470),a=i(95819),l=i(33018),c=i(28726),u=function(e){xo(i,e);var t=ko(i);function i(e,n,r){return Oo(this,i),t.call(this,e,n,r)}return Fo(i,[{key:"ngAfterViewInit",value:function(){bo(Io(i.prototype),"ngAfterViewInit",this).call(this)}},{key:"buildForm",value:function(){var e,t,r=this.pizzagnaService.pizzagna,o=null===(t=null===(e=this.getPreview())||void 0===e?void 0:e.header)||void 0===t?void 0:t.properties;r=(0,n.zdu)(r,"".concat(i.PROPERTIES_PATH,".title"),null==o?void 0:o.title),r=(0,n.zdu)(r,"".concat(i.PROPERTIES_PATH,".subtitle"),null==o?void 0:o.subtitle),r=(0,n.zdu)(r,"".concat(i.PROPERTIES_PATH,".url"),null==o?void 0:o.url),r=(0,n.zdu)(r,"".concat(i.PROPERTIES_PATH,".description"),null==o?void 0:o.description),r=(0,n.zdu)(r,"".concat(i.PROPERTIES_PATH,".collapsible"),null==o?void 0:o.collapsible),this.updateFormPizzagna(r)}},{key:"toPreview",value:function(e){var t=this;e.valueChanges.pipe((0,r.R)(this.destroy$)).subscribe(function(e){var i=(0,n.zdu)(t.getPreview(),"header.properties",e);t.updatePreview(i)})}}]),i}(a.a);u.PROPERTIES_PATH="".concat(s.xW.Configuration,".titleAndDescription.properties"),u.\u0275fac=function(e){return new(e||u)(l.LFG(s.nY),l.LFG(c.m),l.LFG(o.p))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac})},10841:function(e,t,i){"use strict";i.d(t,{w:function(){return T}});var n,r=i(46806),o=i(58102),s=i.n(o),a=i(12232),l=i.n(a),c=i(49977),u=i.n(c),d=i(29569),p=i.n(d),h=i(79765),f=i(90739),g=i(46782),m=i(88002),v=i(87519),y=i(92954),b=i(65470),C=i(7350),x=i(95819),w=i(33018),k=i(28726),T=((n=function(e){xo(i,e);var t=ko(i);function i(e,n,o){var a;return Oo(this,i),(a=t.call(this,e,n,o)).indicatorDataKey="indicatorData",a.previewSeriesPath="providers.".concat(b.Mu.Adapter,".properties.series"),a.formSeriesComponentPath="".concat(b.xW.Data,".series.properties"),a.dataSourceSeries$=new h.xQ,a.selectedSeriesIds$=new h.xQ,a.shouldReadForm=!1,a.subscribeToAvailableDataFieldsChange(),a.eventBus.subscribeUntil(C.ay,a.destroy$,function(e){var t="".concat(b.xW.Structure,".series.properties.nodes"),i=s()(a.pizzagnaService.pizzagna,t);a.pizzagnaService.removeComponents(i);var n=a.pizzagnaService.pizzagna;n=(0,r.zdu)(n,t,[]),n=(0,r.zdu)(n,"".concat(a.formSeriesComponentPath,".series"),[]),a.updateFormPizzagna(n)}),a.eventBus.subscribeUntil(C.PF,a.destroy$,function(e){var t,i=(p()(e.payload.result)?e.payload:e.payload.result||{}).series;if(i){a.dataSourceSeries$.next(i);var n=a.pizzagnaService.pizzagna;n=(0,r.zdu)(n,"".concat(a.formSeriesComponentPath,".allSeries"),i);var o=(null===(t=a.pizzagnaService.pizzagna[b.xW.Structure][a.component.componentId].properties)||void 0===t?void 0:t.template).findIndex(function(e){return e.id===a.indicatorDataKey});n=(0,r.zdu)(n,"".concat(b.xW.Structure,".series.properties.template[").concat(o,"].properties.allSeries"),i),n=s()(a.getPreview(),"chart.".concat(a.previewSeriesPath),[]).reduce(function(e,t){return(0,r.zdu)(e,"".concat(b.xW.Data,".").concat(t.id,"/").concat(a.indicatorDataKey,".properties.allSeries"),i)},n),a.updateFormPizzagna(n);var c="".concat(a.formSeriesComponentPath,".series"),u=s()(a.pizzagnaService.pizzagna,c);if(l()(u)){a.shouldReadForm=!1;var d=i.map(function(e){return{id:e.id,selectedSeriesId:e.id,label:e.name}}),h=(0,r.zdu)(a.getPreview(),"chart.".concat(a.previewSeriesPath),d);a.updatePreview(h),a.buildForm(),setTimeout(function(){a.updateAvailableSeries([]),a.shouldReadForm=!0})}}}),a}return Fo(i,[{key:"buildForm",value:function(){var e=this,t=this.getPreview(),i=s()(t,"chart.".concat(this.previewSeriesPath),[]),n=i.map(function(e){return{id:e.id,selectedSeriesId:e.selectedSeriesId}}),o=i.map(function(e){return e.id});this.pizzagnaService.createComponentsFromTemplate("series",o);var a=(0,r.zdu)(this.pizzagnaService.pizzagna,"".concat(this.formSeriesComponentPath,".series"),n);this.updateFormPizzagna(a),this.selectedSeriesIds$.next(n.map(function(e){return e.selectedSeriesId})),setTimeout(function(){return e.shouldReadForm=!0})}},{key:"toPreview",value:function(e){var t=this;e.valueChanges.pipe((0,g.R)(this.destroy$)).subscribe(function(e){if(t.shouldReadForm){var i=t.getPreview(),n=i.chart,o=s()(n,t.previewSeriesPath,[]),a=e.map(function(e){return Object.assign({id:e.id,selectedSeriesId:e.selectedSeriesId},o.find(function(t){return t.id===e.id}))}),c=(0,r.zdu)(i,"chart.".concat(t.previewSeriesPath),a);t.updatePreview(c);var u=e.map(function(e){return s()(e,"properties[".concat(e.id,"/indicatorData].id"))}).filter(function(e){return!l()(e)});t.selectedSeriesIds$.next(u)}})}},{key:"ngOnDestroy",value:function(){this.dataSourceSeries$.complete(),this.selectedSeriesIds$.complete(),bo(Io(i.prototype),"ngOnDestroy",this).call(this)}},{key:"updateAvailableSeries",value:function(e){var t,i=this;if(this.pizzagnaService.pizzagna){var n=this.pizzagnaService.pizzagna;n=(0,r.zdu)(n,"".concat(this.formSeriesComponentPath,".availableSeries"),e);var o=(null===(t=this.pizzagnaService.pizzagna[b.xW.Structure][this.component.componentId].properties)||void 0===t?void 0:t.template).findIndex(function(e){return e.id===i.indicatorDataKey});n=(0,r.zdu)(n,"".concat(b.xW.Structure,".series.properties.template[").concat(o,"].properties.availableSeries"),e),n=s()(this.pizzagnaService.pizzagna,"".concat(b.xW.Structure,".series.properties.nodes")).reduce(function(t,n){return(0,r.zdu)(t,"".concat(b.xW.Data,".").concat(n,"/").concat(i.indicatorDataKey,".properties.availableSeries"),e)},n),this.updateFormPizzagna(n)}}},{key:"subscribeToAvailableDataFieldsChange",value:function(){(0,f.aj)([this.dataSourceSeries$,this.selectedSeriesIds$]).pipe((0,g.R)(this.destroy$),(0,m.U)(function(e){var t=mo(e,2),i=t[0],n=t[1];return i.filter(function(e){return!n.find(function(t){return t===e.id})})}),(0,v.x)(u())).subscribe(this.updateAvailableSeries.bind(this))}}]),i}(x.a)).\u0275fac=function(e){return new(e||n)(w.LFG(b.nY),w.LFG(k.m),w.LFG(y.p))},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac}),n)},91363:function(e,t,i){"use strict";i.d(t,{l:function(){return n}});var n=new(i(33018).OlP)("CONFIGURATOR_CONVERTER")},28726:function(e,t,i){"use strict";i.d(t,{m:function(){return s}});var n,r=i(79765),o=i(33018),s=((n=function(){function e(){Oo(this,e),this.previewChanged=new r.xQ}return Fo(e,[{key:"preview",get:function(){return this._preview},set:function(e){this._preview=e,this.previewChanged.next(e)}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n)},58746:function(e,t,i){"use strict";i.d(t,{s:function(){return d}});var n,r=i(37524),o=i.n(r),s=i(65470),a=i(19797),l=i(15130),c=i(33018),u=i(62053),d=((n=function(){function e(t,i){Oo(this,e),this.configuratorService=t,this.componentPortalService=i}return Fo(e,[{key:"open",value:function(e){if(!e.portalBundle){var t={portal:this.componentPortalService.createComponentPortal(a.b,null),attached:function(t){var i,n=t.instance;n.formPizzagna=e.formPizzagna,n.formRoot=null===(i=e.paths)||void 0===i?void 0:i.root,n.changeDetector.markForCheck()}};e.portalBundle=t}var i=o()(e.widget);return delete i.pizzagna[s.xW.Data],e.widget=i,this.configuratorService.open(e)}}]),e}()).\u0275fac=function(e){return new(e||n)(c.LFG(l.J),c.LFG(u.$))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n)},7350:function(e,t,i){"use strict";i.d(t,{PF:function(){return s},yX:function(){return a},ay:function(){return l},gg:function(){return c}});var n=i(46806),r=i(88229),o=i(26215),s=new n.JRy("DATA_SOURCE_OUTPUT",function(){return new r.t(1)}),a=new n.JRy("DATA_SOURCE_DESTROYED"),l=new n.JRy("DATA_SOURCE_CHANGE"),c=new n.JRy("DATA_SOURCE_CREATED",function(){return new o.X({payload:void 0})})},54607:function(e,t,i){"use strict";i.d(t,{t:function(){return w}});var n,r=i(37524),o=i.n(r),s=i(79765),a=i(43190),l=i(46782),c=i(46276),u=i(58746),d=i(39973),p=i(55836),h=i.n(p),f=i(67574),g=i(59193),m=i(25917),v=i(5304),y=i(33018),b=i(46806),C=((n=function(){function e(t){Oo(this,e),this.logger=t,this.updateDashboard=function(e){return function(t){return new f.y(function(i){return t.subscribe(function(t){t&&e.removeWidget(t),i.next()})})}}}return Fo(e,[{key:"handleRemove",value:function(e,t,i,n){return this.tryRemove(n,t,i).pipe(this.updateDashboard(e))}},{key:"tryRemove",value:function(e,t,i){var n=this;return h()(e)?e(t,i).pipe((0,v.K)(function(e){return n.logger.error(e),g.E})):(0,m.of)(t)}}]),e}()).\u0275fac=function(e){return new(e||n)(y.LFG(b.mQy))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n),x=i(40494),w=function(){var e=function(){function e(t,i,n,r){Oo(this,e),this.dashboardComponent=t,this.widgetEditorService=i,this.widgetRemovalService=n,this.widgetTypesService=r,this.destroy$=new s.xQ}return Fo(e,[{key:"ngOnInit",value:function(){var e=this;this.dashboardComponent.eventBus.getStream(d.Ef).pipe((0,a.w)(function(t){var i=e.dashboardComponent.dashboard.widgets[t.widgetId],n=e.widgetTypesService.getWidgetType(i.type,i.version);return e.widgetEditorService.open({dashboardComponent:e.dashboardComponent,formPizzagna:n.configurator,paths:n.paths.configurator,widget:i,trySubmit:e.dashboardPersistenceHandler&&e.dashboardPersistenceHandler.trySubmit})}),(0,l.R)(this.destroy$)).subscribe(),this.dashboardComponent.eventBus.getStream(d.y4).pipe((0,a.w)(function(t){var i=t.widgetId,n=e.dashboardPersistenceHandler&&e.dashboardPersistenceHandler.tryRemove,r={dashboardComponent:e.dashboardComponent,widget:o()(e.dashboardComponent.dashboard.widgets[i])};return e.widgetRemovalService.handleRemove(e.dashboardComponent,i,r,n)}),(0,l.R)(this.destroy$)).subscribe()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(y.Y36(c.M,3),y.Y36(u.s),y.Y36(C),y.Y36(x.x))},e.\u0275dir=y.lG2({type:e,selectors:[["","nuiWidgetEditor",""]],inputs:{dashboardPersistenceHandler:["nuiWidgetEditor","dashboardPersistenceHandler"]}}),e}()},18989:function(e,t,i){"use strict";i.d(t,{n:function(){return c}});var n=i(81690),r=i.n(n),o=i(52190),s=i.n(o),a=i(9728),l=i.n(a);function c(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var o=i.filter(function(e){return void 0!==e.previousValue||void 0!==e.currentValue});if(!s()(o,function(e){return e.currentValue!==e.previousValue}))return e;if(1===o.length)return o[0].currentValue;var a=function(e){var t,i=vo(e);try{for(i.s();!(t=i.n()).done;){var n=t.value,o=typeof n.currentValue;if("undefined"!==o&&null!=n.currentValue)return r()(n.currentValue)?"object"==typeof n.currentValue[0]?"object[]":"array":n.currentValue.constructor!==Object?"advanced":o}}catch(s){i.e(s)}finally{i.f()}return"undefined"}(o);return["object","object[]"].includes(a)?l().apply(void 0,_o(o.map(function(e){return"object"==typeof e.currentValue?Object.keys(e.currentValue||{}):[]}))).reduce(function(t,i){var n=null==e||void 0===e[i]?void 0:e[i],r=o.map(function(e){return{previousValue:void 0===e.previousValue||null==e.previousValue?void 0:e.previousValue[i],currentValue:void 0===e.currentValue||null==e.currentValue?void 0:e.currentValue[i]}});return t[i]=c.apply(void 0,[n].concat(_o(r))),t},"object[]"===a?[]:{}):function(e){for(var t=e.length-1;t>=0;t--){var i=e[t].currentValue;if(void 0!==i)return i}}(o)}},24141:function(e,t,i){"use strict";function n(e,t){var i=arguments,n=e.markAsTouched;e.markAsTouched=function(){n.apply(e,i),t()}}i.d(t,{t:function(){return n}})},25624:function(e,t,i){"use strict";i.d(t,{R:function(){return m}});var n=i(33018),r=i(46806),o=i(18989),s=i(39973),a=i(65470),l=i(17654),c=i(92954),u=i(38583),d=i(46747),p=i(87636);function h(e,t){}function f(e,t){if(1&e){var i=n.EpF();n.ynx(0),n.ynx(1,1,2),n.NdJ("output",function(e){return n.CHM(i),n.oxw().onOutput(e)}),n.YNc(3,h,0,0,"ng-template",3),n.NdJ("attached",function(e){return n.CHM(i),n.MAs(2).attached(e)}),n.BQk(),n.BQk()}if(2&e){var r=n.MAs(2),o=n.oxw();n.xp6(1),n.Q6J("componentId",o.rootNode)("componentType",null==o.pizza[o.rootNode]?null:o.pizza[o.rootNode].componentType)("properties",null==o.pizza[o.rootNode]?null:o.pizza[o.rootNode].properties)("providers",null==o.pizza[o.rootNode]?null:o.pizza[o.rootNode].providers)("outputs",o.outputs),n.xp6(2),n.Q6J("cdkPortalOutlet",r.portal)}}var g,m=((g=function(){function e(t,i,o){var a=this;Oo(this,e),this.pizzagnaService=t,this.logger=i,this.eventBus=o,this.rootNode=s.XM,this.pizzagnaChange=new n.vpe,this.output=new n.vpe,o.getStream(s.M).subscribe(function(e){var t=(0,r.zdu)(a.pizzagna,e.payload.path,e.payload.value);a._pizzagnaBuffer=t,a.pizzagnaChange.emit(t)})}return Fo(e,[{key:"pizzagna",get:function(){return this._pizzagnaBuffer||this._pizzagna},set:function(e){this._pizzagna=e,this._pizzagnaBuffer=null}},{key:"ngOnChanges",value:function(e){if(e.pizzagna){var t=e.pizzagna.previousValue;this.pizzagnaService.updatePizzagna(this.pizzagna),this.pizza=this.mergePizzagnaIntoPizza(this.pizza,t,this.pizzagna),this.pizza&&!this.pizza[this.rootNode]&&this.logger.warn("Pizzagna doesn't contain root node '"+this.rootNode+"'. Pizzagna = ",this.pizzagna),this.pizzagnaService.updateComponents(this.pizza)}}},{key:"onOutput",value:function(e){this.output.emit(e)}},{key:"mergePizzagnaIntoPizza",value:function(e,t,i){return(0,o.n)(e,this.getLayerChanges(t,i,a.xW.Structure),this.getLayerChanges(t,i,a.xW.Configuration),this.getLayerChanges(t,i,a.xW.Data))}},{key:"getLayerChanges",value:function(e,t,i){return{previousValue:this.getLayerSafe(e,i),currentValue:this.getLayerSafe(t,i)}}},{key:"getLayerSafe",value:function(e,t){return e&&e[t]}}]),e}()).\u0275fac=function(e){return new(e||g)(n.Y36(c.p),n.Y36(r.mQy),n.Y36(a.nY))},g.\u0275cmp=n.Xpm({type:g,selectors:[["nui-pizzagna"]],inputs:{rootNode:"rootNode",pizzagna:"pizzagna",outputs:"outputs"},outputs:{pizzagnaChange:"pizzagnaChange",output:"output"},features:[n._Bn([c.p,l.v,{provide:a.nY,useClass:r.Ndp}]),n.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&n.YNc(0,f,4,6,"ng-container",0),2&e&&n.Q6J("ngIf",t.pizza&&t.pizza[t.rootNode])},directives:[u.O5,d.$,p.Pl],encapsulation:2}),g)},46747:function(e,t,i){"use strict";i.d(t,{$:function(){return v}});var n,r=i(33018),o=i(81690),s=i.n(o),a=i(23348),l=i.n(a),c=i(18622),u=i.n(c),d=i(88229),p=i(79765),h=i(46782),f=i(5358),g=i(46806),m=i(62053),v=((n=function(){function e(t,i,n,o,s){Oo(this,e),this.injector=t,this.logger=i,this.portalService=n,this.renderer=o,this.providerRegistry=s,this.output=new r.vpe,this.propertiesChanges=new d.t,this.providerInstances={},this.destroy$=new p.xQ}return Fo(e,[{key:"ngOnInit",value:function(){this.logger.debug("Portal created:",this.componentId),this.recreatePortal()}},{key:"ngAfterViewInit",value:function(){var e=this;Object.keys(this.providerInstances).forEach(function(t){var i=e.providerInstances[t];i.ngAfterViewInit&&i.ngAfterViewInit()})}},{key:"ngOnChanges",value:function(e){var t=!1,i=e.providers;i&&!i.isFirstChange()&&(this.checkForProviderChanges(i)?(this.logger.debug("Portal recreated (provider change):",this.componentId),this.recreatePortal(),t=!0):this.updateProviderConfigurations(i)),e.componentType&&!e.componentType.isFirstChange()&&!t&&(this.logger.debug("Portal recreated (component change):",this.componentId),this.recreatePortal()),e.properties&&this.propertiesChanges.next(e.properties)}},{key:"ngOnDestroy",value:function(){this.logger.debug("Portal destroyed:",this.componentId),this.destroyProviders(),this.destroy$.next(),this.destroy$.complete()}},{key:"attached",value:function(e){var t=this;this.component=e.instance,this.renderer.listen(e.location.nativeElement,"click",function(e){(e.ctrlKey||e.metaKey)&&e.shiftKey&&0===e.button&&(console.log("==================== PIZZAGNA DUMP ========================="),console.log("componentId:",t.componentId),console.log("component:",t.component),console.log("componentType:",t.componentType),console.log("properties:",t.properties),console.log("providers:",t.providers),console.log("providerInstances:",t.providerInstances),console.log("============================================================"))});for(var i=0,n=Object.keys(this.providerInstances);i<n.length;i++){var r=n[i],o=this.providerInstances[r];o.setComponent&&o.setComponent(this.component,this.componentId),o.setProviders&&o.setProviders(this.providerInstances,this.componentId)}this.subscribeToOutputs(),this.changesSubscription=this.propertiesChanges.pipe((0,h.R)(this.destroy$)).subscribe(function(e){return t.applyPropertiesChange(e)})}},{key:"recreatePortal",value:function(){this.changesSubscription&&(this.changesSubscription.unsubscribe(),this.changesSubscription=void 0,this.propertiesChanges=new d.t);var e=this.injector;if(this.destroyProviders(),this.providers&&(e=this.updateProviders(e)),this.portal=this.portalService.createComponentPortal(this.componentType,e),this.properties)for(var t=0,i=Object.keys(this.properties);t<i.length;t++)i[t],this.propertiesChanges.next(new r.WD2(void 0,this.properties,!0))}},{key:"updateProviders",value:function(e){var t=this,i=Object.keys(this.providers),n=i.reduce(function(e,i){return t.providers[i].providerId&&(e[i]=t.providerRegistry.getProvider(t.providers[i].providerId)),e},{}),r=this.portalService.createInjector({injector:e,providers:l()(n)});this.providerInstances=i.reduce(function(e,i){var o=n[i],a=t.providers[i];if(o){var l=r.get(o.provide,null,null),c=s()(l)?l.find(function(e){return e instanceof o.useClass}):l;if(!c)throw new Error("Provider '"+i+"' does not exist.");c.updateConfiguration&&a.properties&&c.updateConfiguration(Object.assign({providerKey:i},a.properties||{})),c.providerKey=i,e[i]=c}else a.providerId&&t.logger.error("There's no registered provider for id",i);return e},this.providerInstances);for(var o=0,a=Object.keys(this.providerInstances);o<a.length;o++){var c=a[o],u=this.providerInstances[c];u.ngOnInit&&u.ngOnInit()}return r}},{key:"updateProviderConfigurations",value:function(e){for(var t=0,i=Object.keys(this.providers);t<i.length;t++){var n=i[t];if(!this.providers[n].providerId)return;var r=this.providerInstances[n];if(!r)throw new Error("Provider '"+n+"' does not exist.");var o=e.previousValue[n],s=e.currentValue[n],a=s&&s.properties;(o&&o.properties)!==a&&r.updateConfiguration&&r.updateConfiguration(Object.assign({providerKey:n},a))}}},{key:"subscribeToOutputs",value:function(){var e=this;if(this.outputs){var t,i=vo(this.outputs.filter(function(t){return e.component[t]instanceof r.vpe}));try{var n=function(){var i=t.value;e.component[i].pipe((0,h.R)(e.destroy$)).subscribe(function(t){e.output.emit({id:i,payload:t})})};for(i.s();!(t=i.n()).done;)n()}catch(o){i.e(o)}finally{i.f()}}}},{key:"checkForProviderChanges",value:function(e){var t=e.previousValue?Object.keys(e.previousValue):[],i=e.currentValue?Object.keys(e.currentValue):[];if(t.length!==i.length||u()(t,i).length>0)return!0;var n=Object.keys(e.previousValue).map(function(t){return e.previousValue[t].providerId}),r=Object.keys(e.currentValue).map(function(t){return e.currentValue[t].providerId});return u()(n,r).length>0}},{key:"destroyProviders",value:function(){if(this.providerInstances)for(var e=0,t=Object.keys(this.providerInstances);e<t.length;e++){var i=t[e],n=this.providerInstances[i];n.ngOnDestroy&&n.ngOnDestroy(),delete this.providerInstances[i]}}},{key:"applyPropertiesChange",value:function(e){var t=e.currentValue;if(t){t=Object.assign(Object.assign({},t),{componentId:this.componentId});for(var i={},n=!1,o=0,s=Object.keys(t);o<s.length;o++){var a=s[o],l=this.component[a];t[a]!==l&&(n=!0,this.component[a]=t[a],this.component.ngOnChanges&&(i[a]=new r.WD2(l,t[a],e.isFirstChange())))}if(n){this.component.ngOnChanges&&this.component.ngOnChanges(i);var c=this.component.changeDetector;c?c.markForCheck():this.logger.warn("Property 'changeDetector' is missing on component '".concat(this.componentType,"', so dynamic refresh of given component might not work."))}}}}]),e}()).\u0275fac=function(e){return new(e||n)(r.Y36(r.zs3),r.Y36(g.mQy),r.Y36(m.$),r.Y36(r.Qsj),r.Y36(f.C))},n.\u0275dir=r.lG2({type:n,selectors:[["","nuiComponentPortal",""]],inputs:{componentId:"componentId",componentType:"componentType",properties:"properties",providers:"providers",outputs:"outputs"},outputs:{output:"output"},exportAs:["nuiComponentPortal"],features:[r.TTD]}),n)},48876:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var n=i(65470);function r(e){return e.providerKey?[e.pizzagnaKey||n.xW.Data,e.componentId,"providers",e.providerKey,"properties"].concat(_o(e.propertyPath)).join("."):[e.pizzagnaKey||n.xW.Data,e.componentId,"properties"].concat(_o(e.propertyPath)).join(".")}},62053:function(e,t,i){"use strict";i.d(t,{$:function(){return c}});var n,r=i(87636),o=i(33018),s=i(52409),a=i(8214),l=i(46806),c=((n=function(){function e(t,i){Oo(this,e),this.componentRegistry=t,this.logger=i}return Fo(e,[{key:"createComponentPortal",value:function(e,t){var i;return(i="string"==typeof e?this.componentRegistry.getComponentType(e):e)||(this.logger.error("Cannot Find Component Type ".concat(e)),i=s.q),new r.C5(i,null,t)}},{key:"createInjector",value:function(e){return o.zs3.create({providers:e.providers||[],parent:e.injector,name:"Component Injector"})}}]),e}()).\u0275fac=function(e){return new(e||n)(o.LFG(a.h),o.LFG(l.mQy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},8214:function(e,t,i){"use strict";i.d(t,{h:function(){return s}});var n,r=i(33018),o=i(46806),s=((n=function(){function e(t){Oo(this,e),this.logger=t,this.components={}}return Fo(e,[{key:"registerByLateLoadKey",value:function(e){this.registerComponentType(e.lateLoadKey,e)}},{key:"registerComponentType",value:function(e,t){this.components[e]=t}},{key:"getComponentType",value:function(e){var t=this.components[e];return t||this.logger.warn("Component '"+e+"' not defined. Available components: "+JSON.stringify(Object.keys(this.components))),t}}]),e}()).\u0275fac=function(e){return new(e||n)(r.LFG(o.mQy))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},17654:function(e,t,i){"use strict";i.d(t,{v:function(){return a}});var n,r=i(46806),o=i(65470),s=i(33018),a=((n=function(){function e(){Oo(this,e)}return Fo(e,[{key:"getPizzagnaUpdatedWithComponents",value:function(e,t,i){var n,r=null===(n=e[o.xW.Structure][t].properties)||void 0===n?void 0:n.template;return this.getPizzagnaWithChildren(e,i,r,t)}},{key:"getPizzagnaWithChildren",value:function(e,t,i,n){var r=this,o=t.map(function(e){return{id:e,componentType:"WidgetConfiguratorSectionComponent"}}).reduce(function(e,t){return r.updateChildPizzagna(e,i,t)},e);return o=this.getPizzagnaWithNodesSet(o,n,t)}},{key:"updateChildPizzagna",value:function(e,t,i){var n=(0,r.zdu)(e,"".concat(o.xW.Structure,".").concat(i.id),i),s=t.map(function(e){return Object.assign(Object.assign({},e),{id:"".concat(i.id,"/").concat(e.id)})});n=s.reduce(function(e,t){return(0,r.zdu)(e,"".concat(o.xW.Structure,".").concat(t.id),t)},n);var a=s.map(function(e){return e.id});return n=this.getPizzagnaWithNodesSet(n,i.id,a)}},{key:"getPizzagnaWithNodesSet",value:function(e,t,i){return(0,r.zdu)(e,"".concat(o.xW.Structure,".").concat(t,".properties.nodes"),i)}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n)},92954:function(e,t,i){"use strict";i.d(t,{p:function(){return g}});var n,r=i(46806),o=i(81690),s=i.n(o),a=i(12482),l=i.n(a),c=i(88229),u=i(39973),d=i(65470),p=i(48876),h=i(17654),f=i(33018),g=((n=function(){function e(t,i){Oo(this,e),this.eventBus=t,this.dynamicComponentCreator=i,this.pizzaChanged=new c.t(1)}return Fo(e,[{key:"updatePizzagna",value:function(e){this.pizzagna=e}},{key:"updateComponents",value:function(e){this.components=e,this.pizzaChanged.next(e)}},{key:"getComponent",value:function(e){var t=this.components[e];if(!t)throw new Error("Component '"+e+"' is not defined!");return t}},{key:"setProperty",value:function(e,t){var i="string"==typeof e?e:(0,p.Z)(e);this.eventBus.getStream(u.M).next({payload:{path:i,value:t}})}},{key:"createComponentsFromTemplateWithProperties",value:function(e,t){var i,n=t.map(function(e){return e.id}),o=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,e,n),s=vo(t);try{for(s.s();!(i=s.n()).done;)for(var a=i.value,l=0,c=Object.keys(a.children);l<c.length;l++){var p=c[l];o=(0,r.zdu)(o,"".concat(d.xW.Data,".").concat(p,".properties"),a.children[p])}}catch(h){s.e(h)}finally{s.f()}this.updatePizzagna(o),this.eventBus.getStream(u.M).next({payload:{path:"",value:o}})}},{key:"createComponentsFromTemplate",value:function(e,t){var i=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,e,t);this.updatePizzagna(i),this.eventBus.getStream(u.M).next({payload:{path:"",value:i}})}},{key:"removeComponents",value:function(e){var t=this;s()(e)?e.forEach(function(e){return t.removeComponent(e)}):this.removeComponent(e)}},{key:"removeComponent",value:function(e){for(var t,i=Object.assign({},this.pizzagna),n=[e].concat(_o(null===(t=this.pizzagna[d.xW.Structure][e].properties)||void 0===t?void 0:t.nodes)),r=0,o=[d.xW.Structure,d.xW.Configuration,d.xW.Data];r<o.length;r++){var s=o[r];if(i[s]){var a,c=vo(n);try{for(c.s();!(a=c.n()).done;){var p=a.value;i[s]=l()(i[s],p)}}catch(h){c.e(h)}finally{c.f()}}}this.eventBus.getStream(u.M).next({payload:{path:"",value:i}}),this.updatePizzagna(i)}}]),e}()).\u0275fac=function(e){return new(e||n)(f.LFG(d.nY),f.LFG(h.v))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n)},96800:function(e,t,i){"use strict";i.d(t,{o:function(){return o}});var n,r=i(33018),o=((n=function(){function e(){Oo(this,e),this.events={}}return Fo(e,[{key:"registerEvent",value:function(e){this.events[e.id]=e}},{key:"getEvent",value:function(e){var t=this.events[e];if(!t)throw new Error("Event with id '"+e+"' is not registered. Registered events are: "+JSON.stringify(Object.keys(this.events)));return t}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},78990:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});var n,r=i(33018),o={">":{comparatorFn:function(e,t){return e>t},label:"Value is greater than"},"<":{comparatorFn:function(e,t){return e<t},label:"Value is less than"},">=":{comparatorFn:function(e,t){return e>=t},label:"Value is greater, or equal to"},"<=":{comparatorFn:function(e,t){return e<=t},label:"Value is less than, or equal to"},"==":{comparatorFn:function(e,t){return e==t},label:"Value is exactly"}},s=((n=function(){function e(){Oo(this,e),this.comparators=Object.assign({},o)}return Fo(e,[{key:"registerComparators",value:function(e){this.comparators=Object.assign(Object.assign({},this.comparators),e)}},{key:"clearComparators",value:function(){this.comparators={}}},{key:"getComparators",value:function(){return this.comparators}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},5358:function(e,t,i){"use strict";i.d(t,{C:function(){return Te}});var n=i(38583),r=i(33018),o=i(46806),s=i(54910),a=i(64762),l=i(46782),c=i(92954),u=i(39973),d=i(65470),p=function(e){xo(i,e);var t=ko(i);function i(e,n,r){var o;return Oo(this,i),(o=t.call(this,e,n,r)).dataSource=n,o.drillstate=[],o.eventBus.getStream(u.EC).pipe((0,l.R)(o.destroy$)).subscribe(function(e){var t;(null===(t=o.dataSource.busy)||void 0===t?void 0:t.value)||o.onDrilldown(e)}),o.registerFilters(),o}return Fo(i,[{key:"updateAdapterProperties",value:function(e){this.dataPath=e.dataPath,this.drillstate=e.drillstate||this.drillstate,this.groupBy=e.groupBy,this.componentsConfig=e.componentsConfig,this.navigationBarId=e.navigationBarId}},{key:"updateOutput",value:function(e){var t=this.getWidgetInput(e,this.drillstate.length!==this.groupBy.length);if(this.pizzagnaService.setProperty("".concat(d.xW.Data,".").concat(this.componentId,".properties"),t),this.navigationBarId){var i="".concat(d.xW.Data,".").concat(this.navigationBarId,".properties.navBarConfig.isRoot"),n="".concat(d.xW.Data,".").concat(this.navigationBarId,".properties.navBarConfig.buttons.back.disabled");this.pizzagnaService.setProperty("".concat(d.xW.Data,".").concat(this.navigationBarId,".properties.navBarConfig.label"),this.drillstate[this.drillstate.length-1]),this.pizzagnaService.setProperty(n,!!this.drillstate.length),this.pizzagnaService.setProperty(i,!this.drillstate.length)}}},{key:"getWidgetInput",value:function(e,t){var i;return yo(i={},this.dataPath,e),yo(i,"configuration",this.componentsConfig[t?"group":"leaf"]),i}},{key:"onDrilldown",value:function(e){var t=e.payload;return t.reset?(this.drillstate=[],void this.eventBus.next(u.RG)):t.back?(this.drillstate.length=this.drillstate.length-1,void this.eventBus.next(u.RG)):(this.drillstate.push(t.id),void this.eventBus.next(u.RG))}},{key:"registerFilters",value:function(){var e=this;this.dataSource.registerComponent({group:{componentInstance:{getFilters:function(){return{value:e.groupBy}}}},drillstate:{componentInstance:{getFilters:function(){return{value:e.drillstate}}}}})}}]),i}(s.i);p=(0,a.gn)([(0,a.fM)(0,(0,r.tBr)(d.nY)),(0,a.fM)(1,(0,r.tBr)(d.Fk)),(0,a.w6)("design:paramtypes",[o.Ndp,Object,c.p])],p);var h,f=i(79765),g=((h=function(){function e(t){var i=this;Oo(this,e),this.eventBus=t,this.destroy$=new f.xQ,t.streamAdded.pipe((0,l.R)(this.destroy$)).subscribe(function(e){t.getStream({id:e}).pipe((0,l.R)(i.destroy$)).subscribe(function(e){console.log("".concat(e.id,": "),e.payload)})})}return Fo(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}()).\u0275fac=function(e){return new(e||h)(r.LFG(d.nY))},h.\u0275prov=r.Yz7({token:h,factory:h.\u0275fac}),h),m=i(83645),v=i(78990),y=function(){var e=function(){function e(t,i,n){Oo(this,e),this.dataSource=t,this.pizzagnaService=i,this.destroy$=new f.xQ,this.propertyPath="backgroundColor",this.comparators=n.getComparators()}return Fo(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"updateConfiguration",value:function(e){(null==e?void 0:e.rules)&&(this.rules=null==e?void 0:e.rules,this.subscribeToDataChanges(),this.checkColorConditions())}},{key:"setComponent",value:function(e,t){this.subscribeToDataChanges(),this.componentId=t}},{key:"subscribeToDataChanges",value:function(){var e,t=this;!this.dataSource||(null===(e=this.dsSubscription$)||void 0===e||e.unsubscribe(),this.dsSubscription$=this.dataSource.outputsSubject.pipe((0,l.R)(this.destroy$)).subscribe(function(e){var i;t.latestValueFromDS=(null===(i=e.result)||void 0===i?void 0:i.value)||t.latestValueFromDS,t.checkColorConditions()}))}},{key:"checkColorConditions",value:function(){var e,t;if(this.rules){if(0===this.rules.length)return this.setColor(void 0),void(null===(e=this.dsSubscription$)||void 0===e||e.unsubscribe());var i,n,r=vo(this.rules&&_o(this.rules).reverse());try{for(r.s();!(n=r.n()).done;){var o=n.value;if(null===(t=this.comparators[o.comparisonType])||void 0===t?void 0:t.comparatorFn(this.latestValueFromDS,o.value)){i=o.color;break}}}catch(s){r.e(s)}finally{r.f()}this.setColor(i)}}},{key:"setColor",value:function(e){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:[this.propertyPath]},e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.Fk,8),r.LFG(c.p),r.LFG(v.Z))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),b=i(28303),C=i.n(b),x=function(){return(e=x||(x={})).Warning="var(--nui-color-semantic-warning)",e.Critical="var(--nui-color-semantic-critical)",x;var e}(),w=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,e,n,r)).numberPipe=o,s}return Fo(i,[{key:"updateConfiguration",value:function(e){this.thresholds=e.thresholds,bo(Io(i.prototype),"updateConfiguration",this).call(this,e)}},{key:"processOutput",value:function(e){var t=this.processThresholds(e);return this.processNumberFormat(t)}},{key:"setComponent",value:function(e,t){t&&(this.componentId=t)}},{key:"getThresholdColor",value:function(e,t,i){var n=this.getThresholdChecks(e,t,e.reversedThresholds);return n.warningCheck?x.Warning:n.criticalCheck?x.Critical:i}},{key:"getThresholdChecks",value:function(e,t,i){var n=e.warningThresholdValue,r=e.criticalThresholdValue,o=!C()(n)&&t.value<=n&&t.value>r,s=t.value<=r,a=!C()(n)&&t.value>=n&&t.value<r;return{warningCheck:i?o:a,criticalCheck:i?s:t.value>=r}}},{key:"processThresholds",value:function(e){var t;if(!e||!(null===(t=this.thresholds)||void 0===t?void 0:t.showThresholds)||"number"!=typeof e.value)return e;var i=this.getThresholdColor(this.thresholds,e,e.backgroundColor);return Object.assign(Object.assign({},e),{backgroundColor:i})}},{key:"processNumberFormat",value:function(e){if("number"!=typeof(null==e?void 0:e.value)||!(null==e?void 0:e.numberFormat))return e;var t=this.numberPipe.transform(e.value,e.numberFormat);return Object.assign(Object.assign({},e),{value:t})}}]),i}(s.i);w=(0,a.gn)([(0,a.fM)(0,(0,r.tBr)(d.nY)),(0,a.fM)(1,(0,r.FiY)()),(0,a.fM)(1,(0,r.tBr)(d.Fk)),(0,a.w6)("design:paramtypes",[o.Ndp,Object,c.p,n.JJ])],w);var k=i(81690),T=i.n(k),S=i(26215),I=i(45435),_=i(87519),A=i(68307),z=function(){var e=function(){function e(t,i){Oo(this,e),this.eventBus=t,this.pizzagnaService=i,this.brokers=[],this.builder=new Z(this.brokers),this.destroySubscriptions$=new f.xQ,this.getMin=function(e){return Math.min.apply(Math,_o(e))},this.getMax=function(e){return Math.max.apply(Math,_o(e))},this.valuesObject=this.builder.valuesObject}return Fo(e,[{key:"updateConfiguration",value:function(e){this.properties=e,this.componentId&&this.createPropertiesAndSubscribeToBrokers()}},{key:"configure",value:function(){return this.builder}},{key:"getBrokers",value:function(){return this.brokers}},{key:"subscribeToBrokers",value:function(){var e=this;this.destroy(),this.brokers.forEach(function(t){t.in$.pipe((0,I.h)(function(e){return!!t.in$.observers.length}),(0,_.x)(),(0,A.b)(function(t){return e.configureValueModel(t)}),(0,A.b)(function(i){return e.processAndEmitSyncedValue(i,t)}),(0,l.R)(e.destroySubscriptions$)).subscribe()})}},{key:"setComponent",value:function(e,t){this.componentId=t,this.updateConfiguration(this.properties)}},{key:"destroy",value:function(){this.destroySubscriptions$.next(),this.destroySubscriptions$.complete()}},{key:"processAndEmitSyncedValue",value:function(e,t){var i=this.getMin;(null==t?void 0:t.type)&&(i="min"===t.type?this.getMin:this.getMax);var n=this.valuesObject[t.id].filter(function(e){return e.targetID&&e.targetValue}).map(function(e){return e.targetValue});t.out$.next(Object.assign(Object.assign({},e),{targetValue:i(_o(n))}))}},{key:"configureValueModel",value:function(e){var t=this.valuesObject[e.id].filter(function(t){return t.targetID===e.targetID});t.length?t[0].targetValue=e.targetValue:this.valuesObject[e.id].push({targetID:e.targetID,targetValue:e.targetValue})}},{key:"createPropertiesAndSubscribeToBrokers",value:function(){var e,t,i=this;this.tileNodes=null===(e=this.pizzagnaService.getComponent(this.componentId).properties)||void 0===e?void 0:e.nodes;var n=this.properties.scaleSyncConfig;(null===(t=this.tileNodes)||void 0===t?void 0:t.length)&&(this.tileNodes.forEach(function(e,t){i.pizzagnaService.setProperty({componentId:e,pizzagnaKey:d.xW.Data,propertyPath:["syncValuesBroker"]},i.getBrokers())}),n&&T()(n)&&(n.forEach(function(e){return i.configure().addBroker({id:e.id,type:null==e?void 0:e.type})}),this.subscribeToBrokers()))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.nY),r.LFG(c.p))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),Z=function(){function e(t){Oo(this,e),this.brokers=t,this.valuesObject={}}return Fo(e,[{key:"addBroker",value:function(e){var t={id:e.id,targetID:"",targetValue:1};return this.valuesObject[e.id]=new Array,this.brokers.push(Object.assign(Object.assign({},e),this.getDefaultBrokerObject(t,t))),this}},{key:"getDefaultBrokerObject",value:function(e,t){return{in$:new S.X(e),out$:new S.X(t)}}}]),e}(),O=i(12232),P=i.n(O),F=i(72699),D=i.n(F),$=i(7350),M=function(){var e=function(){function e(t,i){var n=this;Oo(this,e),this.eventBus=t,this.pizzagnaService=i,this.destroy$=new f.xQ,this.eventBus.getStream($.PF).pipe((0,l.R)(this.destroy$)).subscribe(function(e){n.handleDataSourceOutput(e)})}return Fo(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"setComponent",value:function(e,t){this.componentId=t}},{key:"handleDataSourceOutput",value:function(e){var t,i,n,r;this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:d.xW.Data},void 0!==(null===(i=null===(t=e.payload)||void 0===t?void 0:t.error)||void 0===i?void 0:i.type)?null===(r=null===(n=e.payload)||void 0===n?void 0:n.error)||void 0===r?void 0:r.type.toString():void 0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.nY),r.LFG(c.p))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),R=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n){var r;return Oo(this,i),(r=t.call(this,e,n)).multipleErrorFallbackKey=d.WE.Unknown,r.errorMap={},r.eventBus.getStream($.yX).pipe((0,l.R)(r.destroy$)).subscribe(function(e){r.handleDataSourceDestroyed(e)}),r}return Fo(i,[{key:"updateConfiguration",value:function(e){e.multipleErrorFallbackKey&&(this.multipleErrorFallbackKey=e.multipleErrorFallbackKey)}},{key:"handleDataSourceOutput",value:function(e){this.errorMap=this.updateErrorMap(e),this.setFallbackKeyProperty()}},{key:"handleDataSourceDestroyed",value:function(e){var t;(null===(t=e.payload)||void 0===t?void 0:t.componentId)&&delete this.errorMap[e.payload.componentId],this.setFallbackKeyProperty()}},{key:"setFallbackKeyProperty",value:function(){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:d.xW.Data},this.getFallbackKey())}},{key:"getFallbackKey",value:function(){if(!P()(this.errorMap)){var e=D()(Object.values(this.errorMap));return 1===e.length?e[0]:this.multipleErrorFallbackKey}}},{key:"updateErrorMap",value:function(e){var t,i,n,r,o=this.errorMap,s=void 0!==(null===(i=null===(t=e.payload)||void 0===t?void 0:t.error)||void 0===i?void 0:i.type)?null===(r=null===(n=e.payload)||void 0===n?void 0:n.error)||void 0===r?void 0:r.type.toString():void 0;return s?s&&(o[e.payload.componentId]=s):delete o[e.payload.componentId],o}}]),i}(M);return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.nY),r.LFG(c.p))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),J=function(){var e=function(){function e(t,i){var n=this;Oo(this,e),this.eventBus=t,this.pizzagnaService=i,this.loadingMap={},this.destroy$=new f.xQ,this.eventBus.getStream(u.QD).pipe((0,l.R)(this.destroy$)).subscribe(function(e){var t=e.payload;(null==t?void 0:t.componentId)&&((null==t?void 0:t.busy)?n.loadingMap[t.componentId]=!0:delete n.loadingMap[t.componentId]),n.pizzagnaService.setProperty({componentId:n.componentId,propertyPath:["active"],pizzagnaKey:d.xW.Data},!P()(n.loadingMap))})}return Fo(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"setComponent",value:function(e,t){this.componentId=t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.nY),r.LFG(c.p))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),L=i(58102),E=i.n(L),q=i(88002),B=/\{.*?\}/g,N=/\{|\}/g;function Q(e,t){var i=e.match(B);if(!i)return e;var n,r=e,o=vo(i);try{for(o.s();!(n=o.n()).done;){var s=n.value,a=Y(s);t[a]?r=r.replace(s,t[a]):console.warn("There's no ".concat(s," key found in the data: ").concat(t))}}catch(l){o.e(l)}finally{o.f()}return r}var Y=function(e){return e.replace(N,"")},V=function(){var e=function(){function e(t){Oo(this,e),this.pizzagnaService=t,this.defaultTrackOn="pizzagna",this.subscriptions=[]}return Fo(e,[{key:"setComponent",value:function(e,t){this.component=e,this.componentId=t,this.parentComponentId=function(e){var t=e.split("/");return(null==t?void 0:t.length)>1?t[t.length-2]:e}(t),this.initChangeSubscriptions()}},{key:"updateConfiguration",value:function(e){this.configs=null==e?void 0:e.configs}},{key:"initChangeSubscriptions",value:function(){var e,t=this,i=vo(this.configs);try{var n=function(){var i=e.value,n=t.getObservableFor(i);if(!n)return{v:void console.warn("no observable found on 'PizzagnaBroadcasterService', for part: ",i)};var r=n.subscribe(function(e){var n,r=vo(i.paths);try{for(r.s();!(n=r.n()).done;){var o=Q(n.value,t);t.pizzagnaService.setProperty(o,e)}}catch(s){r.e(s)}finally{r.f()}});t.subscriptions.push(r)};for(i.s();!(e=i.n()).done;){var r=n();if("object"==typeof r)return r.v}}catch(o){i.e(o)}finally{i.f()}}},{key:"getObservableFor",value:function(e){return"component"===(e.trackOn||this.defaultTrackOn)?this.getComponentObservableFor(e):this.getPizzagnaObservableFor(e)}},{key:"getPizzagnaObservableFor",value:function(e){return this.pizzagnaService.pizzaChanged.pipe((0,q.U)(function(t){return E()(t,e.key)}),(0,_.x)())}},{key:"getComponentObservableFor",value:function(e){var t=E()(this.component,e.key);return null==t?void 0:t.pipe((0,_.x)())}},{key:"ngOnDestroy",value:function(){var e,t=vo(this.subscriptions);try{for(t.s();!(e=t.n()).done;){e.value.unsubscribe()}}catch(i){t.e(i)}finally{t.f()}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.LFG(c.p))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),j=i(388),W=i(43397),H=i(37367),U=i(81354),G=i(34317),K=i(72459),X=i(31133),ee=i.n(X),te=i(95819),ie=i(28726),ne=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r){return Oo(this,i),t.call(this,e,n,r)}return Fo(i,[{key:"previewComponentId",get:function(){return this.componentId.split("/")[0]}},{key:"updateConfiguration",value:function(e){e&&e.formParts&&(this.formParts=e.formParts)}},{key:"buildForm",value:function(){var e=this,t=this.getPreview(),i=this.formParts.reduce(function(i,n){var r="".concat(e.previewComponentId,".").concat(n.previewPath),s=E()(t,r);if(s){var a,l=vo(n.keys);try{for(l.s();!(a=l.n()).done;){var c=a.value;void 0!==s[c]&&(i=(0,o.zdu)(i,"".concat(d.xW.Data,".").concat(e.componentId,".properties.").concat(c),s[c]))}}catch(u){l.e(u)}finally{l.f()}}return i},this.pizzagnaService.pizzagna);this.updateFormPizzagna(i)}},{key:"toPreview",value:function(e){var t=this;e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(function(e){var i=t.formParts.reduce(function(i,n){var r=n.previewOutputPath||n.previewPath;r="".concat(t.previewComponentId,".").concat(r);var s=E()(i,r),a=ee()(e,n.keys),l=Object.assign(Object.assign({},s),a);return(0,o.zdu)(i,"".concat(r),l)},t.getPreview());t.updatePreview(i)})}}]),i}(te.a);return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.nY),r.LFG(ie.m),r.LFG(c.p))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),re=i(79705),oe=i(82262),se=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r){return Oo(this,i),t.call(this,e,n,r)}return Fo(i,[{key:"previewComponentId",get:function(){return this.componentId.split("/")[0]}},{key:"updateConfiguration",value:function(e){e&&e.formParts&&(this.formParts=e.formParts)}},{key:"buildForm",value:function(){var e=this,t=this.getPreview(),i=this.formParts.reduce(function(i,n){var r=E()(t,n.previewPath),s=null==r?void 0:r.find(function(t){return t.id===e.previewComponentId}),a=ee()(s,n.keys);return(0,o.zdu)(i,"".concat(d.xW.Data,".").concat(e.componentId,".properties"),a)},this.pizzagnaService.pizzagna);this.updateFormPizzagna(i)}},{key:"toPreview",value:function(e){var t=this;e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(function(e){var i=t.formParts.reduce(function(i,n){var r=n.previewOutputPath||n.previewPath,s=E()(i,r),a=s.findIndex(function(e){return e.id===t.previewComponentId}),l=s[a],c=ee()(e,n.keys),u=Object.assign(Object.assign({},l),c);return(0,o.zdu)(i,"".concat(r,"[").concat(a,"]"),u)},t.getPreview());t.updatePreview(i)})}}]),i}(te.a);return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.nY),r.LFG(ie.m),r.LFG(c.p))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),ae=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r){return Oo(this,i),t.call(this,e,n,r)}return Fo(i,[{key:"updateConfiguration",value:function(e){e&&e.formParts&&(this.formParts=e.formParts)}},{key:"buildForm",value:function(){var e=this,t=this.getPreview(),i=this.formParts.reduce(function(i,n){var r=E()(t,n.previewPath);if(r){var s,a=vo(n.keys);try{for(a.s();!(s=a.n()).done;){var l=s.value;void 0!==r[l]&&(i=(0,o.zdu)(i,"".concat(d.xW.Data,".").concat(e.componentId,".properties.").concat(l),r[l]))}}catch(c){a.e(c)}finally{a.f()}}return i},this.pizzagnaService.pizzagna);this.updateFormPizzagna(i)}},{key:"toPreview",value:function(e){var t=this;e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(function(e){var i=t.formParts.reduce(function(t,i){var n=i.previewOutputPath||i.previewPath,r=E()(t,n),s=ee()(e,i.keys),a=Object.assign(Object.assign({},r),s);return(0,o.zdu)(t,n,a)},t.getPreview());t.updatePreview(i)})}}]),i}(te.a);return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.nY),r.LFG(ie.m),r.LFG(c.p))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),le=i(45626),ce=i(90665),ue=i(49977),de=i.n(ue),pe=i(39761),he=i(92996),fe=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r){return Oo(this,i),t.call(this,e,n,r)}return Fo(i,[{key:"ngAfterViewInit",value:function(){bo(Io(i.prototype),"ngAfterViewInit",this).call(this)}},{key:"buildForm",value:function(){var e,t,i,n,r=null===(e=this.getPreview())||void 0===e?void 0:e.table,s=null===(t=null==r?void 0:r.properties)||void 0===t?void 0:t.dataFields,a=null===(n=null===(i=null==r?void 0:r.properties)||void 0===i?void 0:i.configuration)||void 0===n?void 0:n.columns,l=this.pizzagnaService.pizzagna;l=(0,o.zdu)(l,"".concat(d.xW.Data,".columns.properties.columns"),null!=a?a:[]),l=(0,o.zdu)(l,"".concat(d.xW.Data,".columns.properties.dataFields"),s),this.updateFormPizzagna(l)}},{key:"toPreview",value:function(e){var t=this,i=e.contains("columnsOutput")?e.get("columnsOutput"):e.get("columns");if(!i)throw new Error("FormControl is not defined!");i.valueChanges.pipe((0,l.R)(this.destroy$),(0,_.x)(de())).subscribe(function(e){setTimeout(function(){var i=t.getPreview();t.updatePreview((0,o.zdu)(i,"table.properties.configuration.columns",e))});var i=t.pizzagnaService.pizzagna;setTimeout(function(){var n,r,s,a;i=(0,o.zdu)(i,"".concat(d.xW.Structure,".columns.properties.template"),null===(n=t.pizzagnaService.pizzagna[d.xW.Structure].columns.properties)||void 0===n?void 0:n.template),i=(0,o.zdu)(i,"".concat(d.xW.Data,".filters.properties.columns"),e),i=(0,o.zdu)(i,"".concat(d.xW.Structure,".presentation.properties.nodes"),_o(null===(a=null===(s=null===(r=null==i?void 0:i.structure)||void 0===r?void 0:r.presentation)||void 0===s?void 0:s.properties)||void 0===a?void 0:a.nodes)),t.updateFormPizzagna(i)})}),this.subscribeToColumnsValueChange()}},{key:"subscribeToColumnsValueChange",value:function(){var e,t=this;null===(e=this.component.form.get("columnsOutput"))||void 0===e||e.valueChanges.pipe((0,pe.O)(this.component.form.get("columnsOutput").value),(0,I.h)(function(e){return e.length>0}),(0,A.b)(function(){return t.handleWidthValidation()}),(0,q.U)(function(e){return t.filterColumnsWithoutSpecifiedWidth(e)}),(0,q.U)(function(e){return t.handleColumnsWithoutSpecifiedWidth(e)}),(0,_.x)(function(e,t){return e.id===t.id}),(0,he.j)("id"),(0,l.R)(this.destroy$)).subscribe(function(e){return t.setWidthMessages(e)})}},{key:"filterColumnsWithoutSpecifiedWidth",value:function(e){return e.filter(function(e){return e.isActive&&!e.width})}},{key:"handleColumnsWithoutSpecifiedWidth",value:function(e){switch(e.length){case 0:var t=this.component.form.get("columns").controls.filter(function(e){return E()(e,"value.properties[".concat(e.value.id,"/description].isActive"))});if(P()(t))return{id:void 0,label:void 0};var i=t[t.length-1];return console.warn('Cannot set width for all columns. Resetting "'.concat(i.value.label,'" width.')),i.patchValue({width:null},{emitEvent:!1}),i.value;case 1:return e[0];default:return{id:void 0,label:void 0}}}},{key:"handleWidthValidation",value:function(){this.component.form.get("columns").controls.forEach(function(e){var t,i=e.get("properties.".concat(e.value.id,"/description"));if(i){var n=null===(t=i.get("isActive"))||void 0===t?void 0:t.value,r=i.get("width");n?(null==r||r.setValidators([ce.kI.min(62)]),null==r||r.markAllAsTouched(),null==r||r.updateValueAndValidity({emitEvent:!1})):(null==r||r.clearValidators(),null==r||r.updateValueAndValidity({emitEvent:!1}))}})}},{key:"setWidthMessages",value:function(e){var t,i=this;if(this.pizzagnaService.pizzagna){var n="isWidthMessageDisplayed";(null===(t=this.pizzagnaService.pizzagna.data.columns.properties)||void 0===t?void 0:t.columns).forEach(function(e){return i.pizzagnaService.setProperty("".concat(d.xW.Data,".").concat(e.id,"/description.properties.").concat(n),!1)}),e&&this.pizzagnaService.setProperty("".concat(d.xW.Data,".").concat(e,"/description.properties.").concat(n),!0)}}}]),i}(te.a);return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.nY),r.LFG(ie.m),r.LFG(c.p))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),ge=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r){return Oo(this,i),t.call(this,e,n,r)}return Fo(i,[{key:"ngAfterViewInit",value:function(){bo(Io(i.prototype),"ngAfterViewInit",this).call(this)}},{key:"buildForm",value:function(){var e,t,i,n,r,s=this.pizzagnaService.pizzagna,a=null===(e=this.getPreview())||void 0===e?void 0:e.table,l=null===(i=null===(t=null==a?void 0:a.properties)||void 0===t?void 0:t.configuration)||void 0===i?void 0:i.columns,c=null===(r=null===(n=null==a?void 0:a.properties)||void 0===n?void 0:n.configuration)||void 0===r?void 0:r.sorterConfiguration;s=(0,o.zdu)(s,"".concat(d.xW.Data,".filters.properties.columns"),l),s=(0,o.zdu)(s,"".concat(d.xW.Data,".filters.properties.sorterConfiguration"),c),this.updateFormPizzagna(s)}},{key:"toPreview",value:function(e){var t=this;e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(function(e){var i=t.getPreview();i=(0,o.zdu)(i,"table.properties.configuration.sorterConfiguration",e.sorterConfiguration),t.updatePreview(i),t.buildForm()})}}]),i}(te.a);return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.nY),r.LFG(ie.m),r.LFG(c.p))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),me=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,e,n,r)).timeframeService=o,s}return Fo(i,[{key:"ngAfterViewInit",value:function(){bo(Io(i.prototype),"ngAfterViewInit",this).call(this)}},{key:"buildForm",value:function(){var e=this,t=this.pizzagnaService.pizzagna,i=this.getPreview(),n=Object.keys(this.timeframeService.currentPresets).map(function(t){return{id:t,name:e.timeframeService.currentPresets[t].name}}),r="".concat(d.xW.Data,".timeseriesMetadata.properties");t=(0,o.zdu)(t,"".concat(r,".timeSpans"),n);var s=E()(i,"timeframeSelection.properties.timeframe.selectedPresetId","last7Days"),a=n.find(function(e){return e.id===s});a&&(t=(0,o.zdu)(t,"".concat(r,".startingTimespan"),a));var l=E()(i,"chart.properties.configuration");l&&(t=(0,o.zdu)(t,"".concat(r,".legendPlacement"),l.legendPlacement),t=(0,o.zdu)(t,"".concat(r,".leftAxisLabel"),l.leftAxisLabel),t=(0,o.zdu)(t,"".concat(r,".preset"),l.preset)),this.updateFormPizzagna(t)}},{key:"toPreview",value:function(e){var t=this;e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(function(e){var i=t.getPreview(),n=E()(e,"startingTimespan.id");n&&(i=(0,o.zdu)(i,"timeframeSelection.properties.timeframe.selectedPresetId",n));var r="chart.properties.configuration";i=(0,o.zdu)(i,"".concat(r,".legendPlacement"),E()(e,"legendPlacement","")),i=(0,o.zdu)(i,"".concat(r,".leftAxisLabel"),E()(e,"leftAxisLabel","")),i=(0,o.zdu)(i,"".concat(r,".preset"),E()(e,"preset","")),t.updatePreview(i)})}}]),i}(te.a);return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.nY),r.LFG(ie.m),r.LFG(c.p),r.LFG(o.hYR))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),ve=i(10841),ye=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r){var o;return Oo(this,i),(o=t.call(this,e,n,r)).previewSeriesPath="chart.providers.".concat(d.Mu.Adapter,".properties.series"),o}return Fo(i,[{key:"previewComponentId",get:function(){return this.componentId.split("/")[0]}},{key:"buildForm",value:function(){var e=this,t=E()(this.getPreview(),this.previewSeriesPath,[]).find(function(t){return t.id===e.previewComponentId}),i=(0,o.zdu)(this.pizzagnaService.pizzagna,"".concat(d.xW.Data,".").concat(this.componentId,".properties"),{selectedSeriesId:t&&t.selectedSeriesId});this.updateFormPizzagna(i)}},{key:"toPreview",value:function(e){var t=this;e.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe(function(e){var i=e.id,n=t.getPreview(),r=E()(n,t.previewSeriesPath,[]),s=r.findIndex(function(e){return e.id===t.previewComponentId});if(s>-1){var a=_o(r);a[s]=Object.assign(Object.assign({},a[s]),{selectedSeriesId:i});var l=(0,o.zdu)(n,"".concat(t.previewSeriesPath),a);t.updatePreview(l)}})}}]),i}(te.a);return e.\u0275fac=function(t){return new(t||e)(r.LFG(d.nY),r.LFG(ie.m),r.LFG(c.p))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e}(),be=i(91363),Ce=i(96800),xe=i(34357),we=i(84356),ke=i(96465),Te=function(){var e=function(){function e(t){var i;Oo(this,e),this.logger=t,this.staticProviders={},this.setProviders((yo(i={},u.tc,{provide:j.q,deps:[d.nY,r.R0b,W.g]}),yo(i,u.GN,{provide:ke.q,deps:[d.nY,[new r.FiY,d.Bc],[new r.FiY,we.I],Ce.o,c.p]}),yo(i,u.bZ,{provide:s.i,deps:[d.nY,[new r.FiY,d.Fk],c.p]}),yo(i,u.l5,{provide:H.Y,deps:[d.nY,[new r.FiY,d.Fk],c.p,o.zCP]}),yo(i,u.R9,{provide:U.f,deps:[d.nY,[new r.FiY,d.Fk],c.p]}),yo(i,u.u1,{provide:w,deps:[d.nY,[new r.FiY,d.Fk],c.p,n.JJ]}),yo(i,u.mf,{provide:p,deps:[d.nY,[new r.FiY,d.Fk],c.p]}),yo(i,u.tS,{provide:y,deps:[[new r.FiY,d.Fk],c.p,v.Z]}),yo(i,u.j4,{provide:be.l,useClass:le.c,deps:[d.nY,ie.m,c.p]}),yo(i,u.dz,{provide:be.l,useClass:oe.M,deps:[d.nY,ie.m,c.p]}),yo(i,u.ns,{provide:be.l,useClass:re.l,deps:[d.nY,ie.m,c.p]}),yo(i,u.YN,{provide:be.l,useClass:ne,deps:[d.nY,ie.m,c.p]}),yo(i,u.VX,{provide:be.l,useClass:ae,deps:[d.nY,ie.m,c.p]}),yo(i,u.Es,{provide:be.l,useClass:se,deps:[d.nY,ie.m,c.p]}),yo(i,u.Gq,{provide:be.l,useClass:ye,deps:[d.nY,ie.m,c.p,o.hYR]}),yo(i,u.dZ,{provide:be.l,useClass:me,deps:[d.nY,ie.m,c.p,o.hYR]}),yo(i,u.Ip,{provide:be.l,useClass:ve.w,deps:[d.nY,ie.m,c.p]}),yo(i,u.n5,{provide:be.l,useClass:fe,deps:[d.nY,ie.m,c.p]}),yo(i,u.LU,{provide:be.l,useClass:ge,deps:[d.nY,ie.m,c.p]}),yo(i,u.IG,{provide:J,deps:[d.nY,c.p]}),yo(i,u.Cz,{provide:M,deps:[d.nY,c.p]}),yo(i,u.C,{provide:R,deps:[d.nY,c.p]}),yo(i,u.$u,{provide:z,deps:[d.nY,c.p]}),yo(i,u.DJ,{provide:m.O,deps:[d.nY,"windowObject",o.mQy]}),yo(i,u.F,{provide:g,deps:[d.nY]}),yo(i,u.Vx,{provide:o.zCP,deps:[]}),yo(i,u.m_,{provide:V,deps:[c.p]}),yo(i,u.Hp,{provide:d.m4,useExisting:xe.C,deps:[c.p]}),yo(i,u.s6,{provide:d.m4,useExisting:xe.YX,deps:[c.p]}),yo(i,u.rf,{provide:d.m4,useExisting:xe.UA,deps:[c.p]}),yo(i,u.Xh,{provide:K.q,deps:[d.nY,[new r.FiY,G.e]]}),i))}return Fo(e,[{key:"setProviders",value:function(e){this.staticProviders=Object.assign({},this.staticProviders,e)}},{key:"getProvider",value:function(e){var t=this.staticProviders[e];return t||(this.logger.warn("No provider registered for id",e),this.logger.warn("Known providers:",Object.keys(this.staticProviders).join(", "))),t}},{key:"getProviderInstance",value:function(e,t){return r.zs3.create({providers:[e],parent:t}).get(d.Fk)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.LFG(o.mQy))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},52198:function(e,t,i){"use strict";i.d(t,{k:function(){return l}});var n,r=i(46806),o=i(26215),s=i(88002),a=i(33018),l=((n=function(){function e(t,i){var n=this;Oo(this,e),this.logger=t,this.className=i,this.state$=new o.X({}),this.stateChanged$=this.state$.asObservable().pipe((0,s.U)(function(){return n.getItems()})),this._isEmpty=!0}return Fo(e,[{key:"stateVersion",get:function(){return this._stateVersion}},{key:"isEmpty",get:function(){return this._isEmpty}},{key:"addItems",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{overrideExisting:!0},n=this.state$.value;e.forEach(function(e){!n[t.getItemKey(e)]||i.overrideExisting?n[t.getItemKey(e)]=Object.assign({},e):t.logger.warn("Logger - ".concat(t.className,": item with ").concat(t.getItemKey(e),"\n                    is already registered. Skipping."))}),this.state$.next(n),e.length>0&&this.updateStateFlags(!1)}},{key:"getItem",value:function(e){return this.state$.value[e]}},{key:"getItems",value:function(){return Object.values(this.state$.value)}},{key:"reset",value:function(){this.state$.next({}),this.updateStateFlags(!0)}},{key:"ngOnDestroy",value:function(){this.state$.complete()}},{key:"updateStateFlags",value:function(e){this._isEmpty=e,this._stateVersion=(0,r.VjN)()}}]),e}()).\u0275fac=function(e){a.$Z()},n.\u0275dir=a.lG2({type:n}),n)},34357:function(e,t,i){"use strict";i.d(t,{C:function(){return l},YX:function(){return c},UA:function(){return u},qy:function(){return d}});var n,r=i(52198),o=i(33018),s=i(46806),a=function(e){xo(i,e);var t=ko(i);function i(){var e;return Oo(this,i),(e=t.apply(this,arguments)).formattersStateChanged$=e.stateChanged$,e}return Fo(i,[{key:"addFormatters",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{overrideExisting:!0};bo(Io(i.prototype),"addItems",this).call(this,e,t)}},{key:"getFormatters",value:function(){return bo(Io(i.prototype),"getItems",this).call(this)}},{key:"getItemKey",value:function(e){return e.componentType}}]),i}(r.k),l=((n=function(e){xo(i,e);var t=ko(i);function i(e){return Oo(this,i),t.call(this,e,"TableFormatterRegistryService")}return Fo(i)}(a)).\u0275fac=function(e){return new(e||n)(o.LFG(s.mQy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n),c=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e){return Oo(this,i),t.call(this,e,"KpiFormattersRegistryService")}return Fo(i)}(a);return e.\u0275fac=function(t){return new(t||e)(o.LFG(s.mQy))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),u=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e){return Oo(this,i),t.call(this,e,"ProportionalDonutContentFormattersRegistryService")}return Fo(i)}(a);return e.\u0275fac=function(t){return new(t||e)(o.LFG(s.mQy))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),d=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e){return Oo(this,i),t.call(this,e,"ProportionalLegendFormattersRegistryService")}return Fo(i)}(a);return e.\u0275fac=function(t){return new(t||e)(o.LFG(s.mQy))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},39973:function(e,t,i){"use strict";i.d(t,{XM:function(){return s},RG:function(){return a},df:function(){return l},y4:function(){return c},Ef:function(){return u},MO:function(){return d},j7:function(){return p},pV:function(){return h},Xi:function(){return f},kV:function(){return g},M:function(){return m},re:function(){return v},xZ:function(){return y},QD:function(){return b},N9:function(){return C},b1:function(){return x},R1:function(){return w},EC:function(){return k},tc:function(){return T},bZ:function(){return S},R9:function(){return I},u1:function(){return _},mf:function(){return A},tS:function(){return z},j4:function(){return Z},dz:function(){return O},ns:function(){return P},dZ:function(){return F},Ip:function(){return D},GN:function(){return $},n5:function(){return M},LU:function(){return R},l5:function(){return J},VX:function(){return L},Es:function(){return E},YN:function(){return q},Gq:function(){return B},IG:function(){return N},Cz:function(){return Q},C:function(){return Y},$u:function(){return V},DJ:function(){return j},F:function(){return W},m_:function(){return H},Vx:function(){return U},Hp:function(){return G},s6:function(){return K},rf:function(){return X},Xh:function(){return ee}});var n=i(46806),r=i(26215),o=i(88229),s="/",a=new n.JRy("REFRESH"),l=new n.JRy("SCROLL_NEXT_PAGE"),c=new n.JRy("WIDGET_REMOVE"),u=new n.JRy("WIDGET_EDIT"),d=new n.JRy("WIDGET_CREATE"),p=new n.JRy("WIDGET_READY"),h=new n.JRy("WIDGET_RESIZE"),f=new n.JRy("WIDGET_POSITION_CHANGE"),g=new n.JRy("WIDGET_SEARCH",function(){return new r.X({payload:""})}),m=new n.JRy("SET_PROPERTY_VALUE"),v=new n.JRy("SET_TIMEFRAME"),y=new n.JRy("PREVIEW_EVENT"),b=new n.JRy("DATA_SOURCE_BUSY"),C=new n.JRy("DASHBOARD_EDIT_MODE",function(){return new o.t(1)}),x=new n.JRy("INTERACTION"),w=new n.JRy("DATA_SOURCE_INVOKED"),k=new n.JRy("DRILLDOWN"),T="NOVA_DATASOURCE_INTERVAL_REFRESHER",S="NOVA_DATASOURCE_ADAPTER",I="NOVA_TIMESERIES_DATASOURCE_ADAPTER",_="NOVA_KPI_DATASOURCE_ADAPTER",A="NOVA_DRILLDOWN_DATASOURCE_ADAPTER",z="NOVA_KPI_COLOR_PRIORITIZER",Z="NOVA_TITLE_AND_DESCRIPTION_CONVERTER",O="NOVA_PROPORTIONAL_WIDGET_CHART_OPTIONS_CONVERTER",P="NOVA_KPI_TILES_CONVERTER",F="NOVA_TIMESERIES_METADATA_CONVERTER",D="NOVA_TIMESERIES_SERIES_CONVERTER",$="NOVA_DASHBOARD_EVENT_PROXY",M="NOVA_TABLE_COLUMNS_CONVERTER",R="NOVA_TABLE_FILTERS_CONVERTER",J="NOVA_TABLE_DATASOURCE_ADAPTER",L="NOVA_GENERIC_CONVERTER",E="NOVA_GENERIC_ARRAY_CONVERTER",q="NOVA_KPI_SECTION_CONVERTER",B="NOVA_TIMESERIES_TILE_INDICATOR_DATA_CONVERTER",N="NOVA_LOADING_ADAPTER",Q="NOVA_STATUS_CONTENT_FALLBACK_ADAPTER",Y="NOVA_KPI_STATUS_CONTENT_FALLBACK_ADAPTER",V="NOVA_KPI_SCALE_SYNC_BROKER",j="NOVA_URL_INTERACTION_HANDLER",W="NOVA_EVENT_BUS_DEBUGGER",H="NOVA_PIZZAGNA_BROADCASTER",U="NOVA_VIRTUAL_VIEWPORT_MANAGER",G="NOVA_TABLE_FORMATTERS_REGISTRY",K="NOVA_KPI_FORMATTERS_REGISTRY",X="NOVA_PROPORTIONAL_CONTENT_FORMATTERS_REGISTRY",ee="NOVA_CONFIGURATOR_DATA_SOURCE_MANAGER"},84356:function(e,t,i){"use strict";i.d(t,{I:function(){return o}});var n,r=i(33018),o=((n=function(){function e(){Oo(this,e)}return Fo(e,[{key:"updateWidget",value:function(e){this.widget=e}},{key:"getWidget",value:function(){return this.widget}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac}),n)},96465:function(e,t,i){"use strict";i.d(t,{q:function(){return g}});var n,r=i(59311),o=i.n(r),s=i(72699),a=i.n(s),l=i(79765),c=i(46782),u=i(92954),d=i(65470),p=i(33018),h=i(84356),f=i(96800),g=((n=function(){function e(t,i,n,r,o){Oo(this,e),this.pizzagnaBus=t,this.dashboardBus=i,this.widgetConfigurationService=n,this.eventRegistry=r,this.pizzagnaService=o,this.upstreamSubscriptions={},this.downstreamSubscriptions={},this.destroy$=new l.xQ}return Fo(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"setComponent",value:function(e){this.component=e}},{key:"updateConfiguration",value:function(e){this.providerKey=e.providerKey,this.upstreams=e.upstreams,this.downstreams=e.downstreams,this.upstreams&&this.registerUpstreamSubscriptions.apply(this,_o(this.upstreams)),this.downstreams&&this.registerDownstreamSubscriptions.apply(this,_o(this.downstreams))}},{key:"addUpstream",value:function(e){this.addStream(e,"upstreams")}},{key:"addDownstream",value:function(e){this.addStream(e,"downstreams")}},{key:"addStream",value:function(e,t){var i=a()((this[t]||[]).concat(e.id));this[t]=i,this.component&&this.pizzagnaService.setProperty({componentId:this.component.componentId,pizzagnaKey:d.xW.Data,providerKey:this.providerKey,propertyPath:[t]},i)}},{key:"registerUpstreamSubscriptions",value:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];!this.dashboardBus||this.registerSubscriptions(i,this.upstreamSubscriptions,this.pizzagnaBus,function(t,i){var n=e.widgetConfigurationService.getWidget().id;e.dashboardBus.getStream(t).next(Object.assign({},i,{widgetId:n}))})}},{key:"registerDownstreamSubscriptions",value:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];!this.dashboardBus||this.registerSubscriptions(i,this.downstreamSubscriptions,this.dashboardBus,function(t,i){var n=e.widgetConfigurationService.getWidget().id;(void 0===i.widgetId||n===i.widgetId)&&e.pizzagnaBus.getStream(t).next(i)})}},{key:"registerSubscriptions",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,s=t?o()(t,function(e){return e}):null,a=0,l=Object.keys(i);a<l.length;a++){var u=l[a];(!s||!s[u])&&(i[u].unsubscribe(),delete i[u])}var d,p=vo(Object.keys(null!=s?s:{}).filter(function(e){return!i[e]}));try{var h=function(){var t=d.value,o=e.eventRegistry.getEvent(t);i[t]=n.getStream(o).pipe((0,c.R)(e.destroy$)).subscribe(function(e){r(o,e)})};for(p.s();!(d=p.n()).done;)h()}catch(f){p.e(f)}finally{p.f()}}}]),e}()).\u0275fac=function(e){return new(e||n)(p.LFG(d.nY),p.LFG(d.Bc,8),p.LFG(h.I,8),p.LFG(f.o),p.LFG(u.p))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n)},40494:function(e,t,i){"use strict";i.d(t,{x:function(){return u}});var n,r=i(83118),o=i.n(r),s=i(12666),a=i.n(s),l=i(65470),c=i(33018),u=((n=function(){function e(){Oo(this,e),this.widgetTypes={}}return Fo(e,[{key:"registerWidgetType",value:function(e,t,i){var n=this.widgetTypes[e];n||(n=[],this.widgetTypes[e]=n),n.length<t&&(n.length=t),n[t-1]=i}},{key:"getWidgetType",value:function(e,t){var i=this.widgetTypes[e];if(!i||0===i.length)throw new Error("Type '"+e+"' not found in the registry. Available types: "+Object.keys(this.widgetTypes).join(", "));if(void 0!==t&&(t<=0||i.length<t))throw new Error("Version "+t+" for widget type '"+e+"' not registered. Max available version is "+i.length);return i[(void 0===t?i.length:t)-1]}},{key:"mergeWithWidgetType",value:function(e){var t=this.getWidgetType(e.type,e.version);return Object.assign(Object.assign({},e),{pizzagna:o()(e.pizzagna,t.widget)})}},{key:"setNode",value:function(e,t,i,n){var r,o,s="".concat(t,".").concat(l.xW.Structure,".").concat((null===(o=null===(r=e.paths)||void 0===r?void 0:r[t])||void 0===o?void 0:o[i])||i);a()(e,s,n)}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n)},65470:function(e,t,i){"use strict";i.d(t,{nY:function(){return o},Bc:function(){return s},Fk:function(){return a},m4:function(){return l},B5:function(){return c},Mu:function(){return u},AC:function(){return d},ni:function(){return p},xW:function(){return h},Nc:function(){return f},WE:function(){return g}});var n,r=i(33018),o=new r.OlP("PIZZAGNA_EVENT_BUS"),s=new r.OlP("DASHBOARD_EVENT_BUS"),a=new r.OlP("DATA_SOURCE"),l=new r.OlP("FORMATTERS_REGISTRY"),c=(new r.OlP("TEST_REGISTRY"),new r.OlP("HEADER_LINK_PROVIDER")),u=((n=u||(u={})).DataSource="dataSource",n.Adapter="adapter",n.Converter="converter",n.Broadcaster="broadcaster",n.Refresher="refresher",n.EventProxy="eventProxy",n.LoadingAdapter="loadingAdapter",n.ContentFallbackAdapter="contentFallbackAdapter",n.InteractionHandler="interactionHandler",n.EventBusDebugger="eventBusDebugger",n.KpiColorPrioritizer="kpiColorPrioritizer",n.FormattersRegistry="formattersRegistry",n.DataSourceManager="dataSourceManager",u),d=function(){return(e=d||(d={})).Root="root",e.DataSourceConfigComponentType="dataSourceConfigComponentType",e.TileDescriptionConfigComponentType="tileDescriptionConfigComponentType",e.DataSourceProviders="dataSourceProviders",e.Formatters="formatters",e.TileDescriptionBackgroundColors="tileDescriptionBackgroundColors",e.TileBackgroundColorRulesBackgroundColors="tileBackgroundColorRulesBackgroundColors",d;var e}(),p=function(){return(e=p||(p={})).Interactivity="interactivity",e.DisableTableColumnGeneration="disableTableColumnGeneration",p;var e}(),h=function(){return(e=h||(h={})).Structure="structure",e.Configuration="configuration",e.Data="data",h;var e}(),f=function(){return(e=f||(f={})).CRITICAL="critical",e.WARNING="warning",e.DEFAULT="default",f;var e}(),g=function(){return(e=g||(g={})).Unknown="0",e.Ok="200",e.Forbidden="403",e.NotFound="404",g;var e}()},30412:function(e,t,i){"use strict";i.d(t,{l:function(){return s}});var n=i(98348),r=i(39973),o=i(65470),s={id:"refresher",componentType:n.O.lateLoadKey,providers:yo({},o.Mu.Converter,{providerId:r.VX,properties:{formParts:[{previewPath:"".concat(r.XM,".providers.refresher.properties"),keys:["enabled","interval","overrideDefaultSettings"]}]}}),properties:{overrideDefaultSettings:!1}}},17857:function(e,t,i){"use strict";var n,r;i.d(t,{X:function(){return y},P:function(){return b}});var o=i(89563),s=i(96899),a=i(62878),l=i(24803),c=i(6432),u=i(36233),d=i(41450),p=i(29014),h=i(53294),f=i(39973),g=i(65470),m=i(30412),v=i(35484),y=[{componentType:l.a.lateLoadKey,label:$localize(pe||(pe=Zo(["No Formatter"]))),dataTypes:{value:null}},{componentType:a.s.lateLoadKey,label:$localize(he||(he=Zo(["Link"]))),configurationComponent:"LinkConfiguratorComponent",dataTypes:{value:"label",link:"link"}},{componentType:s.C.lateLoadKey,label:$localize(fe||(fe=Zo(["Icon"]))),dataTypes:{value:"string"}}],b=yo({},g.xW.Structure,(yo(r={},f.XM,{id:f.XM,componentType:o.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","columns"]},providers:(n={},yo(n,g.Mu.FormattersRegistry,{providerId:f.Hp}),yo(n,g.Mu.DataSourceManager,{providerId:f.Xh}),n)}),yo(r,"presentation",{id:"presentation",componentType:c.j.lateLoadKey,properties:{headerText:$localize(ge||(ge=Zo(["Presentation"]))),nodes:["titleAndDescription","filters"]}}),yo(r,"titleAndDescription",{id:"titleAndDescription",componentType:d.U.lateLoadKey,providers:yo({},g.Mu.Converter,{providerId:f.j4})}),yo(r,"filters",{id:"filters",componentType:h.U.lateLoadKey,providers:yo({},g.Mu.Converter,{providerId:f.LU})}),yo(r,"refresher",m.l),yo(r,"dataAndCalculations",{id:"dataAndCalculations",componentType:c.j.lateLoadKey,properties:{headerText:$localize(me||(me=Zo(["Data and Calculations"]))),nodes:["dataSource"]}}),yo(r,"dataSource",{id:"dataSource",componentType:u.s.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:v.Z.lateLoadKey},providers:yo({},g.Mu.Converter,{providerId:f.VX,properties:{formParts:[{previewPath:"table.providers.dataSource",keys:["providerId","properties"]},{previewPath:"table.providers.adapter.properties.dataSource",keys:["properties"]}]}})}),yo(r,"columns",{id:"columns",componentType:p.O.lateLoadKey,properties:{template:[{},{properties:{formatters:y}}]},providers:yo({},g.Mu.Converter,{providerId:f.n5})}),r))},69063:function(e,t,i){"use strict";var n,r,o,s,a,l,c,u,d,p,h,f,g,m,v,y,b,C,x,w,k,T,S,I,_,A,z,Z,O,P,F,D,$,M,R,J,L,E,q,B,N,Q;i.d(t,{hiK:function(){return uc.h},p3D:function(){return zu.p},Fk3:function(){return ce.Fk},ay7:function(){return _u.ay},PFv:function(){return _u.PF},vXf:function(){return bu},tFi:function(){return wh},XMI:function(){return le.XM},wz0:function(){return Th},NlZ:function(){return kh},pPd:function(){return Jh},MXM:function(){return ie.M},cY_:function(){return Du},dsi:function(){return dc},vHB:function(){return hc},O5k:function(){return mc},TAb:function(){return wc},gIB:function(){return ih},B:function(){return se},lc0:function(){return Ru},Ksf:function(){return ne.K},PIV:function(){return cc.P},AOA:function(){return fp},B5u:function(){return ce.B5},WEY:function(){return ce.WE},Cg1:function(){return kc.C},ZhR:function(){return ds.Z},ufE:function(){return Ao},Klf:function(){return Mh},woB:function(){return ne.w},s9y:function(){return Tc.s},vB5:function(){return Vo},fp5:function(){return Ko},mf:function(){return le.mf},VXI:function(){return le.VX},tSO:function(){return le.tS},u1$:function(){return le.u1},$uq:function(){return le.$u},j4g:function(){return le.j4},DJm:function(){return le.DJ},Qpk:function(){return jp},Pi:function(){return $h},nYw:function(){return ce.nY},ntI:function(){return Ic},xW5:function(){return ce.xW},khc:function(){return hs},UAh:function(){return us.UA},qy4:function(){return us.qy},EMX:function(){return ks},CNH:function(){return as.C},aDR:function(){return Sc.a},g4s:function(){return Ys.g},PEA:function(){return Fc},aAT:function(){return Mo},Car:function(){return us.C},CKZ:function(){return _a},D9N:function(){return Ia},Usc:function(){return ed.U},Q$d:function(){return Kp},MOJ:function(){return le.MO},zer:function(){return Up},CyH:function(){return Gp},niB:function(){return ce.ni},ACc:function(){return ce.AC},Muk:function(){return ce.Mu},$Ie:function(){return Np},jFY:function(){return du.j},xTe:function(){return cs.x},GE5:function(){return Rh},Amp:function(){return Ch},j5E:function(){return nh},LtV:function(){return xh},O9d:function(){return th}});var Y,V=i(38583),j=i(46806),W=i(54195),H=i(33018),U=((Y=function(){function e(t){Oo(this,e),this.changeDetector=t,this.defaultClasses="d-flex flex-column justify-content-center w-100 p-3",this.elementClass=""}return Fo(e,[{key:"ngOnInit",value:function(){this.classNames="".concat(this.defaultClasses," ").concat(this.elementClass)}}]),e}()).lateLoadKey="WidgetErrorComponent",Y.\u0275fac=function(e){return new(e||Y)(H.Y36(H.sBO))},Y.\u0275cmp=H.Xpm({type:Y,selectors:[["nui-widget-error"]],hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.classNames)},inputs:{image:"image",title:"title",description:"description",elementClass:"elementClass"},decls:6,vars:3,consts:[[3,"image"],[1,"widget-error__title"],[1,"d-flex","justify-content-center","text-center"]],template:function(e,t){1&e&&(H._UZ(0,"nui-image",0),H.TgZ(1,"div",1),H.TgZ(2,"strong"),H._uU(3),H.qZA(),H.qZA(),H.TgZ(4,"div",2),H._uU(5),H.qZA()),2&e&&(H.Q6J("image",t.image),H.xp6(3),H.Oqu(t.title),H.xp6(2),H.Oqu(t.description))},directives:[j.cuP],styles:[".widget-error__title[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center;margin-top:20px;margin-bottom:10px}"]}),Y),G=function(){var e=Fo(function e(){Oo(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=H.oAB({type:e}),e.\u0275inj=H.cJS({imports:[[V.ez,j.sF0],V.ez]}),e}(),K=i(17030),X=i(90665),ee=i(92322),te=i(69901),ie=i(46276),ne=i(13385),re=i(39075),oe=["anchor"],se=function(){var e=function(){function e(t,i,n){Oo(this,e),this.changeDetector=t,this.document=i,this.domSanitizer=n,this.sanitized=!0,this.elementClass=""}return Fo(e,[{key:"ngOnInit",value:function(){this.validateAndApplyEmbeddedContent()}},{key:"ngOnChanges",value:function(e){e.customEmbeddedContent&&!e.customEmbeddedContent.firstChange&&this.validateAndApplyEmbeddedContent()}},{key:"validateAndApplyEmbeddedContent",value:function(){var e=this.sanitized&&this.sanitizeContext(this.mode===ne.K.URL?H.q3G.URL:H.q3G.HTML);if(this.anchor.nativeElement.innerHTML="",this.mode===ne.K.URL){var t=this.document.createElement("iframe");t.src=this.sanitized?e:this.customEmbeddedContent,t.width="100%",t.height="100%",this.anchor.nativeElement.appendChild(t)}else this.anchor.nativeElement.innerHTML=this.sanitized?e:this.customEmbeddedContent}},{key:"sanitizeContext",value:function(e){var t;return this.domSanitizer.sanitize(e,null===(t=this.customEmbeddedContent)||void 0===t?void 0:t.trim())}}]),e}();return e.lateLoadKey="EmbeddedContentComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(V.K0),H.Y36(re.H7))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-embedded-content"]],viewQuery:function(e,t){var i;(1&e&&H.Gf(oe,7),2&e)&&(H.iGM(i=H.CRH())&&(t.anchor=i.first))},hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.elementClass)},inputs:{mode:"mode",customEmbeddedContent:"customEmbeddedContent",sanitized:"sanitized",elementClass:"elementClass"},features:[H.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["anchor",""]],template:function(e,t){1&e&&H._UZ(0,"div",0,1)},encapsulation:2,changeDetection:0}),e}();function ae(e,t){var i=(e.properties||{}).dataFieldIds;return i?Object.keys(i).reduce(function(e,n){return e[n]=t[i[n]],e},{}):{value:t.value}}var le=i(39973),ce=i(65470),ue=i(28303),de=i.n(ue),pe=i(46747),he=i(87636);function fe(e,t){if(1&e&&(H.ynx(0),H.TgZ(1,"a",4),H.GkF(2,5),H.qZA(),H.BQk()),2&e){var i=H.oxw(),n=H.MAs(4);H.xp6(1),H.Q6J("href",i.widgetData.link,H.LSH),H.xp6(1),H.Q6J("ngTemplateOutlet",n)}}function ge(e,t){if(1&e){var i=H.EpF();H.ynx(0),H.TgZ(1,"div",6),H.NdJ("click",function(){return H.CHM(i),H.oxw().onInteraction()}),H.GkF(2,5),H.qZA(),H.BQk()}if(2&e){H.oxw();var n=H.MAs(4);H.xp6(2),H.Q6J("ngTemplateOutlet",n)}}function me(e,t){}function mo(e,t){if(1&e){var i=H.EpF();H.ynx(0,15,16),H.TgZ(2,"div",17),H.TgZ(3,"span",18),H.YNc(4,me,0,0,"ng-template",19),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(1).attached(e)}),H.qZA(),H.qZA(),H.BQk()}if(2&e){var n,r,o=H.MAs(1),s=H.oxw(2);H.Q6J("componentType",null==s.configuration||null==s.configuration.formatters||null==s.configuration.formatters.Value||null==s.configuration.formatters.Value.formatter?null:s.configuration.formatters.Value.formatter.componentType)("properties",s.formattersProperties.Value),H.xp6(3),H.Q6J("ngClass","IconFormatterComponent"===(null==s.configuration||null==s.configuration.formatters||null==s.configuration.formatters.Value||null==s.configuration.formatters.Value.formatter?null:s.configuration.formatters.Value.formatter.componentType)?"without-filter":"")("useZoom",!1)("scaleIN$",null==(n=s.getScaleBroker("value"))?null:n.out$)("scaleOUT$",null==(r=s.getScaleBroker("value"))?null:r.in$),H.xp6(1),H.Q6J("cdkPortalOutlet",o.portal)}}var Co=function(e){return{"background-color":e}},wo=function(e){return{color:e}};function To(e,t){if(1&e&&(H._UZ(0,"div",7),H.TgZ(1,"div",8),H.TgZ(2,"div",9),H.TgZ(3,"div",10),H.TgZ(4,"span",11),H._uU(5),H.qZA(),H.qZA(),H.YNc(6,mo,5,7,"ng-container",12),H.TgZ(7,"div",13),H.TgZ(8,"span",14),H._uU(9),H.qZA(),H.qZA(),H.qZA(),H.qZA()),2&e){var i,n,r,o,s=H.oxw(),a=H.MAs(6);H.ekj("nui-kpi-indicator--interactive",s.interactive),H.Q6J("ngStyle",H.VKq(18,Co,s.backgroundColor||(null==s.widgetData?null:s.widgetData.backgroundColor))),H.xp6(1),H.Q6J("ngStyle",H.VKq(20,wo,(null==s.widgetData?null:s.widgetData.textColor)||s.backgroundColor||(null==s.widgetData?null:s.widgetData.backgroundColor)||s.defaultColor)),H.xp6(2),H.Q6J("title",null==s.widgetData?null:s.widgetData.label),H.xp6(1),H.Q6J("useZoom",!1)("minScale",.5)("scaleIN$",null==(i=s.getScaleBroker("label"))?null:i.out$)("scaleOUT$",null==(n=s.getScaleBroker("label"))?null:n.in$),H.xp6(1),H.Oqu(null==s.widgetData?null:s.widgetData.label),H.xp6(1),H.Q6J("ngIf",null==s.configuration||null==s.configuration.formatters?null:s.configuration.formatters.Value)("ngIfElse",a),H.xp6(1),H.Q6J("title",null==s.widgetData?null:s.widgetData.units),H.xp6(1),H.Q6J("useZoom",!1)("scaleIN$",null==(r=s.getScaleBroker("units"))?null:r.out$)("scaleOUT$",null==(o=s.getScaleBroker("units"))?null:o.in$)("minScale",.5),H.xp6(1),H.Oqu(null==s.widgetData?null:s.widgetData.units)}}function So(e,t){if(1&e&&(H.TgZ(0,"div",20),H.TgZ(1,"span",21),H._uU(2),H.qZA(),H.qZA()),2&e){var i,n,r=H.oxw();H.Udp("font-size",null==r.widgetData?null:r.widgetData.fontSize),H.Q6J("title",null==r.widgetData?null:r.widgetData.value),H.xp6(1),H.Q6J("useZoom",!1)("scaleIN$",null==(i=r.getScaleBroker("value"))?null:i.out$)("scaleOUT$",null==(n=r.getScaleBroker("value"))?null:n.in$),H.xp6(1),H.hij(" ",null==r.widgetData?null:r.widgetData.value,"")}}var Ao=function(){var e=function(){function e(t,i,n){Oo(this,e),this.changeDetector=t,this.dataSource=i,this.eventBus=n,this.busy=!1,this.elementClass="",this.defaultColor="var(--nui-color-bg-secondary)"}return Fo(e,[{key:"interactive",get:function(){var e,t,i,n,r;return((null===(e=this.configuration)||void 0===e?void 0:e.interactive)||(null===(n=null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.getFeatureConfig(ce.ni.Interactivity))||void 0===n?void 0:n.enabled))&&!de()(null===(r=this.widgetData)||void 0===r?void 0:r.value)||!1}},{key:"onInteraction",value:function(){!this.interactive||this.eventBus.getStream(le.b1).next({payload:{data:this.widgetData}})}},{key:"getScaleBroker",value:function(e){if(this.syncValuesBroker)return this.syncValuesBroker.find(function(t){return t.id===e})}},{key:"ngOnChanges",value:function(e){var t;if(e.configuration){var i=e.configuration.currentValue.formatters;i&&(this.formattersProperties=this.getFormatterProperties(i))}e.widgetData&&(null===(t=this.configuration)||void 0===t?void 0:t.formatters)&&(this.formattersProperties=this.getFormatterProperties(this.configuration.formatters))}},{key:"getFormatterProperties",value:function(e){var t=this;return Object.keys(e).reduce(function(i,n){var r,o=null===(r=e[n])||void 0===r?void 0:r.formatter;return o&&(i[n]={data:ae(o,t.widgetData)}),i},{})}}]),e}();return e.lateLoadKey="KpiComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(ce.Fk,8),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-kpi"]],hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.elementClass)},inputs:{widgetData:"widgetData",backgroundColor:"backgroundColor",syncValuesBroker:"syncValuesBroker",configuration:"configuration",busy:"busy"},features:[H.TTD],decls:7,vars:3,consts:[["nui-busy","",1,"w-100","h-100",3,"busy"],[4,"ngIf"],["kpiContent",""],["kpiValueRaw",""],[1,"nui-kpi-indicator",3,"href"],[3,"ngTemplateOutlet"],[1,"nui-kpi-indicator",3,"click"],[1,"nui-kpi-indicator__background",3,"ngStyle"],[1,"nui-kpi-indicator__text",3,"ngStyle"],[1,"nui-kpi-indicator__zoom-container"],[1,"nui-kpi-indicator__description",3,"title"],["nuiZoomContent","",3,"useZoom","minScale","scaleIN$","scaleOUT$"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties",4,"ngIf","ngIfElse"],[1,"nui-kpi-indicator__units",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$","minScale"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[1,"nui-kpi-indicator__value"],["nuiZoomContent","",3,"ngClass","useZoom","scaleIN$","scaleOUT$"],[3,"cdkPortalOutlet","attached"],[1,"nui-kpi-indicator__value",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$"]],template:function(e,t){1&e&&(H.TgZ(0,"div",0),H.YNc(1,fe,3,2,"ng-container",1),H.YNc(2,ge,3,1,"ng-container",1),H.qZA(),H.YNc(3,To,10,22,"ng-template",null,2,H.W1O),H.YNc(5,So,3,7,"ng-template",null,3,H.W1O)),2&e&&(H.Q6J("busy",t.busy),H.xp6(1),H.Q6J("ngIf",null==t.widgetData?null:t.widgetData.link),H.xp6(1),H.Q6J("ngIf",!(null!=t.widgetData&&t.widgetData.link)))},directives:[j.ERI,V.O5,V.tP,V.PC,j.mEK,pe.$,V.mk,he.Pl],styles:[".nui-kpi-indicator[_ngcontent-%COMP%]{position:relative;display:block;height:100%;width:100%}.nui-kpi-indicator__background[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#fafafa;background-color:var(--nui-color-bg-secondary,#fafafa);color:#111;color:var(--nui-color-text-default,#111)}.nui-kpi-indicator__text[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;pointer-events:none}.nui-kpi-indicator__text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}.nui-kpi-indicator__value[_ngcontent-%COMP%]{font-size:54px;font-weight:600;margin:auto 0;min-width:100%;white-space:nowrap;display:flex;align-items:center;justify-content:center;height:100%;min-height:5px;max-height:200px}.nui-kpi-indicator__value[_ngcontent-%COMP%] > span.without-filter[_ngcontent-%COMP%]{filter:unset}.nui-kpi-indicator__units[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-bottom:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__units[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__description[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-top:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__description[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__zoom-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:30% 40% 30%;width:100%;height:100%}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]{cursor:pointer}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]:hover{filter:brightness(90%)}"],changeDetection:0}),e}(),zo=i(92954),Po=i(92677);function Do(e,t){}function $o(e,t){if(1&e){var i=H.EpF();H.ynx(0),H.ynx(1,1,2),H.YNc(3,Do,0,0,"ng-template",3),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(2).attached(e)}),H.BQk(),H.BQk()}if(2&e){var n=t.$implicit,r=H.MAs(2);H.xp6(1),H.Q6J("componentId",n.id)("componentType",n.componentType)("providers",n.providers)("properties",n.properties),H.xp6(2),H.Q6J("cdkPortalOutlet",r.portal)}}var Mo=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r){var o;return Oo(this,i),(o=t.call(this,e,n,r)).nodes=[],o.direction="column",o.elementClass="",o.defaultClassNames="h-100 w-100 d-flex",o}return Fo(i,[{key:"ngOnInit",value:function(){this.classNames="".concat(this.defaultClassNames," flex-").concat(this.direction," ").concat(this.elementClass)}},{key:"ngOnDestroy",value:function(){bo(Io(i.prototype),"ngOnDestroy",this).call(this)}},{key:"getNodes",value:function(){return this.nodes}}]),i}(Po.I);return e.lateLoadKey="StackComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(zo.p),H.Y36(j.mQy))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-stack"]],hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.classNames)},inputs:{nodes:"nodes",direction:"direction",elementClass:"elementClass"},features:[H.qOj],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&H.YNc(0,$o,4,5,"ng-container",0),2&e&&H.Q6J("ngForOf",t.nodeConfigs)("ngForTrackBy",t.trackByFn)},directives:[V.sg,pe.$,he.Pl],encapsulation:2}),e}(),Ro=["gridItemsContainer"];function Jo(e,t){}function Lo(e,t){if(1&e){var i=H.EpF();H.ynx(0),H.ynx(1,3,4),H.YNc(3,Jo,0,0,"ng-template",5),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(2).attached(e)}),H.BQk(),H.BQk()}if(2&e){var n=t.$implicit,r=H.MAs(2);H.xp6(1),H.Q6J("componentId",n.id)("componentType",n.componentType)("properties",n.properties)("providers",n.providers),H.xp6(2),H.Q6J("cdkPortalOutlet",r.portal)}}var Eo=function(e){return{"prioritize-rows":e}},qo=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,e,n,r)).ngZone=o,s.nodes=[],s.direction="column",s.prioritizeGridRows=!1,s}return Fo(i,[{key:"ngAfterViewInit",value:function(){this.handleGridFlowOnResize()}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.tilesResizeObserver)||void 0===e||e.disconnect(),bo(Io(i.prototype),"ngOnDestroy",this).call(this)}},{key:"getNodes",value:function(){return this.nodes}},{key:"handleGridFlowOnResize",value:function(){var e=this;this.tilesResizeObserver=new ResizeObserver(function(){return e.onResize()}),this.ngZone.runOutsideAngular(function(){e.tilesResizeObserver.observe(e.gridItemsContainer.nativeElement)})}},{key:"onResize",value:function(){var e;if(!((null===(e=this.nodes)||void 0===e?void 0:e.length)<2)){var t=this.gridItemsContainer.nativeElement.getBoundingClientRect(),i=t.height/t.width,n=Bo(this.nodes.length);return i-.05>n&&!this.prioritizeGridRows?(this.prioritizeGridRows=!0,void this.changeDetector.detectChanges()):i+.05<n&&this.prioritizeGridRows?(this.prioritizeGridRows=!1,void this.changeDetector.detectChanges()):void 0}}}]),i}(Po.I);return e.lateLoadKey="TilesComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(zo.p),H.Y36(j.mQy),H.Y36(H.R0b))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-tiles"]],viewQuery:function(e,t){var i;(1&e&&H.Gf(Ro,7),2&e)&&(H.iGM(i=H.CRH())&&(t.gridItemsContainer=i.first))},hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.elementClass)},inputs:{nodes:"nodes",direction:"direction"},features:[H.qOj],decls:3,vars:5,consts:[[1,"nui-grid-layout",3,"ngClass"],["gridItemsContainer",""],[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&(H.TgZ(0,"div",0,1),H.YNc(2,Lo,4,5,"ng-container",2),H.qZA()),2&e&&(H.Q6J("ngClass",H.VKq(3,Eo,t.prioritizeGridRows)),H.xp6(2),H.Q6J("ngForOf",t.nodeConfigs)("ngForTrackBy",t.trackByFn))},directives:[V.mk,V.sg,pe.$,he.Pl],styles:[".nui-grid-layout[_ngcontent-%COMP%]{display:grid;height:100%;grid-gap:10px;gap:10px;grid-template-columns:repeat(auto-fit,minmax(calc(54px * 1.2 + 2 * 15px),1fr));grid-template-rows:repeat(auto-fit,minmax(15px,1fr));line-height:1.2}.nui-grid-layout.prioritize-rows[_ngcontent-%COMP%]{grid-auto-flow:column;grid-template-columns:minmax(1px,1fr)}.mobile[_nghost-%COMP%], .mobile   [_nghost-%COMP%]{min-height:160px}"]}),e}(),Bo=function(e){return.25*e+.7};function No(e,t){if(1&e&&(H.TgZ(0,"div",6),H._UZ(1,"nui-icon",7),H.TgZ(2,"span",8),H._uU(3),H.qZA(),H.qZA()),2&e){var i=t.$implicit;H.xp6(1),H.Q6J("icon",i.key),H.xp6(1),H.Q6J("title",i.value),H.xp6(1),H.Oqu(i.value)}}function Qo(e,t){1&e&&H._UZ(0,"nui-icon",9)}var Yo=function(e,t){return{"widget-medium":e,"widget-small":t}},Vo=function(){var e=function(){function e(t){Oo(this,e),this.changeDetector=t,this.navigated=new H.vpe}return Fo(e,[{key:"widgetWidth",set:function(e){this.isMedium=e<=600&&e>480,this.isSmall=e<=480}},{key:"onButtonClick",value:function(){this.canNavigate&&this.navigated.emit(this)}}]),e}();return e.lateLoadKey="ListGroupItemComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-list-group-item"]],hostAttrs:[1,"w-100"],inputs:{id:"id",label:"label",statuses:"statuses",canNavigate:"canNavigate",widgetWidth:"widgetWidth"},outputs:{navigated:"navigated"},decls:7,vars:8,consts:[[1,"list-group-item",3,"ngClass","click"],[1,"list-group-item__label",3,"title"],[1,"list-group-item__statuses"],[1,"statuses"],["class","status-column",4,"ngFor","ngForOf"],["icon","caret-right",4,"ngIf"],[1,"status-column"],[1,"mr-2",3,"icon"],[1,"status-column__label",3,"title"],["icon","caret-right"]],template:function(e,t){1&e&&(H.TgZ(0,"div",0),H.NdJ("click",function(){return t.onButtonClick()}),H.TgZ(1,"div",1),H._uU(2),H.qZA(),H.TgZ(3,"div",2),H.TgZ(4,"div",3),H.YNc(5,No,4,3,"div",4),H.qZA(),H.YNc(6,Qo,1,0,"nui-icon",5),H.qZA(),H.qZA()),2&e&&(H.Q6J("ngClass",H.WLB(5,Yo,t.isMedium,t.isSmall)),H.xp6(1),H.Q6J("title",t.label),H.xp6(1),H.Oqu(t.label),H.xp6(3),H.Q6J("ngForOf",t.statuses),H.xp6(1),H.Q6J("ngIf",t.canNavigate))},directives:[V.mk,V.sg,V.O5,j.oJW],styles:[".list-group-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.list-group-item__label[_ngcontent-%COMP%]{width:25%;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item__statuses[_ngcontent-%COMP%]{width:75%;display:flex;align-items:center}.list-group-item[_ngcontent-%COMP%]   .status-column[_ngcontent-%COMP%]{display:flex;width:75px;min-width:75px;max-width:100%;justify-content:flex-start;align-items:center;padding-right:10px}.list-group-item[_ngcontent-%COMP%]   .status-column__label[_ngcontent-%COMP%]{margin-left:5px;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]{justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%]{width:100%!important}.widget-medium[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]{justify-content:flex-end}.widget-small[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{justify-content:space-between}"],changeDetection:0}),e}(),jo=i(79765),Wo=i(46782);function Ho(e,t){if(1&e&&H._UZ(0,"nui-icon",9),2&e){var i=H.oxw();H.Q6J("icon",i.icon)("status",i.status)}}function Uo(e,t){if(1&e&&H._uU(0),2&e){var i=H.oxw();H.Oqu(i.status)}}function Go(e,t){1&e&&H._UZ(0,"nui-icon",10)}var Ko=function(){var e=function(){function e(t,i){Oo(this,e),this.changeDetector=t,this.eventBus=i,this.navigated=new H.vpe,this.searchTerm="",this.destroy$=new jo.xQ}return Fo(e,[{key:"onButtonClick",value:function(){this.canNavigate&&this.navigated.emit(this)}},{key:"ngOnInit",value:function(){var e=this;this.eventBus.getStream(le.kV).pipe((0,Wo.R)(this.destroy$)).subscribe(function(t){e.searchTerm=t.payload,e.changeDetector.markForCheck()})}}]),e}();return e.lateLoadKey="ListLeafItemComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-list-leaf-item"]],hostAttrs:[1,"w-100"],inputs:{icon:"icon",status:"status",detailedUrl:"detailedUrl",label:"label",canNavigate:"canNavigate",url:"url"},outputs:{navigated:"navigated"},decls:12,vars:14,consts:[[1,"nui-list-leaf-item",3,"click"],[1,"nui-list-leaf-item__info-container"],[1,"nui-list-leaf-item__icon-container"],["class","mr-1",3,"icon","status",4,"ngIf","ngIfElse"],[1,"nui-list-leaf-item__description"],[1,"nui-text-ellipsis",3,"ngClass","innerHTML"],[1,"nui-text-secondary","nui-text-ellipsis",3,"innerHTML"],["statusTpl",""],["icon","caret-right",4,"ngIf"],[1,"mr-1",3,"icon","status"],["icon","caret-right"]],template:function(e,t){if(1&e&&(H.TgZ(0,"div",0),H.NdJ("click",function(){return t.onButtonClick()}),H.TgZ(1,"div",1),H.TgZ(2,"div",2),H.YNc(3,Ho,1,2,"nui-icon",3),H.qZA(),H.TgZ(4,"div",4),H._UZ(5,"a",5),H.ALo(6,"nuiHighlight"),H._UZ(7,"div",6),H.ALo(8,"nuiHighlight"),H.qZA(),H.YNc(9,Uo,1,1,"ng-template",null,7,H.W1O),H.qZA(),H.YNc(11,Go,1,0,"nui-icon",8),H.qZA()),2&e){var i=H.MAs(10);H.xp6(3),H.Q6J("ngIf",t.icon)("ngIfElse",i),H.xp6(2),H.Q6J("ngClass",t.url?"":"not-active")("innerHTML",H.xi3(6,8,t.label,t.searchTerm),H.oJD),H.uIk("target",t.url?"_blank":null)("href",t.url||null,H.LSH),H.xp6(2),H.Q6J("innerHTML",H.xi3(8,11,t.detailedUrl,t.searchTerm),H.oJD),H.xp6(4),H.Q6J("ngIf",t.canNavigate)}},directives:[V.O5,V.mk,j.oJW],pipes:[j.SgB],styles:[".nui-list-leaf-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nui-list-leaf-item__info-container[_ngcontent-%COMP%]{display:flex;height:40px}.nui-list-leaf-item__icon-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:30px}.nui-list-leaf-item__description[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr 1fr;grid-template-columns:1fr;max-width:100%}a.not-active[_ngcontent-%COMP%]{text-decoration:none;color:#111}"],changeDetection:0}),e}();function Xo(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",1),H.TgZ(1,"button",2),H.NdJ("click",function(){return H.CHM(i),H.oxw().onBack()}),H.qZA(),H.TgZ(2,"button",3),H.NdJ("click",function(){return H.CHM(i),H.oxw().onHome()}),H.qZA(),H.TgZ(3,"div",4),H._uU(4),H.qZA(),H.qZA()}if(2&e){var n=H.oxw();H.xp6(1),H.Q6J("isRepeat",!0)("disabled",!(null!=n.navBarConfig&&null!=n.navBarConfig.buttons&&null!=n.navBarConfig.buttons.back&&n.navBarConfig.buttons.back.disabled)),H.xp6(1),H.Q6J("isRepeat",!0),H.xp6(2),H.Oqu(null==n.navBarConfig?null:n.navBarConfig.label)}}var es=function(){var e=function(){function e(t,i){Oo(this,e),this.changeDetector=t,this.eventBus=i,this.navigated=new H.vpe}return Fo(e,[{key:"onBack",value:function(){var e,t,i;this.navBarConfig&&this.eventBus.getStream(le.EC).next({payload:{back:null===(i=null===(t=null===(e=this.navBarConfig)||void 0===e?void 0:e.buttons)||void 0===t?void 0:t.back)||void 0===i?void 0:i.disabled}})}},{key:"onHome",value:function(){this.eventBus.getStream(le.EC).next({payload:{reset:!0}})}}]),e}();return e.lateLoadKey="ListNavigationBarComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-navigation-bar"]],inputs:{navBarConfig:"navBarConfig"},outputs:{navigated:"navigated"},decls:1,vars:1,consts:[["class","list-nav-bar",4,"ngIf"],[1,"list-nav-bar"],["nui-button","","type","button","displayStyle","action","icon","arrow-left",3,"isRepeat","disabled","click"],["nui-button","","type","button","displayStyle","action","icon","overview",3,"isRepeat","click"],[1,"list-nav-bar__label"]],template:function(e,t){1&e&&H.YNc(0,Xo,5,4,"div",0),2&e&&H.Q6J("ngIf",t.navBarConfig&&!(null!=t.navBarConfig&&t.navBarConfig.isRoot))},directives:[V.O5,j.r0F],styles:[".list-nav-bar[_ngcontent-%COMP%]{width:100%;margin:2px 0;padding:0 15px;display:flex;align-items:center}.list-nav-bar__label[_ngcontent-%COMP%]{padding-left:5px;color:rgba(17,17,17,.6)}"],changeDetection:0}),e}();function ts(e,t){}var is=function(){return["navigated"]};function ns(e,t){if(1&e){var i=H.EpF();H.ynx(0,2,3),H.NdJ("output",function(){var e=H.CHM(i).item;return H.oxw().onListItemEvent(e)}),H.YNc(2,ts,0,0,"ng-template",4),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(1).attached(e)}),H.BQk()}if(2&e){var n=t.item,r=H.MAs(1),o=H.oxw();H.Q6J("componentId",o.configuration.componentType)("componentType",o.configuration.componentType)("properties",o.getPropsFor(n))("outputs",H.DdM(5,is)),H.xp6(2),H.Q6J("cdkPortalOutlet",r.portal)}}var rs=function(){var e=function(){function e(t,i,n,r){Oo(this,e),this.changeDetector=t,this.zone=i,this.host=n,this.eventBus=r,this.itemFormatterProps=new Map,this.destroy$=new jo.xQ}return Fo(e,[{key:"ngOnInit",value:function(){this.initResizeObserver()}},{key:"ngOnChanges",value:function(e){var t,i=this;(null===(t=e.data)||void 0===t?void 0:t.currentValue)&&e.data.currentValue.forEach(function(e){return i.itemFormatterProps.set(e,i.calcItemProps(e))})}},{key:"onListItemEvent",value:function(e){this.eventBus.getStream(le.EC).next({payload:e})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete(),this.itemFormatterProps.clear()}},{key:"getPropsFor",value:function(e){return Object.assign(Object.assign({},this.itemFormatterProps.get(e)),{widgetWidth:this.widgetWidth})}},{key:"calcItemProps",value:function(e){return this.configuration?Object.assign(Object.assign({},ae(this.configuration,e)),this.configuration.itemProperties):e}},{key:"initResizeObserver",value:function(){var e=this,t=new j.Pa2(this.host,this.zone);t.debounceTime=10,t.ngAfterViewInit(),t.containerResize.pipe((0,Wo.R)(this.destroy$)).subscribe(function(){e.widgetWidth=e.host.nativeElement.offsetWidth})}}]),e}();return e.lateLoadKey="ListWidgetComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(H.R0b),H.Y36(H.SBq),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-list-widget"]],hostAttrs:[2,"overflow","scroll"],hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.elementClass)},inputs:{data:"data",configuration:"configuration",elementClass:"elementClass"},features:[H.TTD],decls:3,vars:2,consts:[[3,"itemsSource","repeatItemTemplateRef"],["repeatItemTemplate",""],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){if(1&e&&(H._UZ(0,"nui-repeat",0),H.YNc(1,ns,3,6,"ng-template",null,1,H.W1O)),2&e){var i=H.MAs(2);H.Q6J("itemsSource",t.data)("repeatItemTemplateRef",i)}},directives:[j.$N6,pe.$,he.Pl],styles:[""]}),e}(),os=i(17238),ss=function(){var e=Fo(function e(t){Oo(this,e),this.changeDetector=t,this.active=!1});return e.lateLoadKey="LoadingComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-loading"]],inputs:{active:"active"},decls:1,vars:2,consts:[["compactMode","true",3,"show"]],template:function(e,t){1&e&&(H.TgZ(0,"nui-progress",0),H.NdJ("@animate.start",function(e){return e.element.style.display="block"})("@animate.done",function(e){return e.element.style.display=e.toState?"block":"none"}),H.qZA()),2&e&&H.Q6J("@animate",t.active)("show",!0)},directives:[j.t15],styles:["[_nghost-%COMP%]{height:5px;flex-shrink:0}"],data:{animation:[(0,os.X$)("animate",[(0,os.SB)("true",(0,os.oB)({opacity:1})),(0,os.SB)("false",(0,os.oB)({opacity:0})),(0,os.eR)("false <=> true",(0,os.jt)(500))])]}}),e}(),as=i(5358),ls=i(96465),cs=i(40494),us=i(34357),ds=i(78990),ps=i(52198),hs=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e){return Oo(this,i),t.call(this,e,"ProportionalContentAggregatorsRegistryService")}return Fo(i,[{key:"getItemKey",value:function(e){return e.aggregatorType}}]),i}(ps.k);return e.\u0275fac=function(t){return new(t||e)(H.LFG(j.mQy))},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function fs(e,t){}function gs(e,t){if(1&e){var i=H.EpF();H.ynx(0,1,2),H.YNc(2,fs,0,0,"ng-template",3),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(1).attached(e)}),H.BQk()}if(2&e){var n=H.MAs(1),r=H.oxw();H.Q6J("componentType",null==r.contentFormatter?null:r.contentFormatter.componentType)("properties",r.contentFormatterProperties),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}var ms=function(){var e=function(){function e(t,i,n,r){Oo(this,e),this.aggregatorRegistry=t,this.formatterRegistry=i,this.changeDetector=n,this.logger=r,this.destroy$=new jo.xQ}return Fo(e,[{key:"ngOnChanges",value:function(e){if(e.donutConfig){var t=e.donutConfig.currentValue,i=t.formatter,n=t.aggregator;(null==n?void 0:n.aggregatorType)&&(this.updateAggregatorDefinition(n),this.updateAggregatedValue()),(null==i?void 0:i.componentType)&&(this.contentFormatter=i,this.updateFormatterDefinition(i),this.updateFormatterProperties())}e.widgetData&&(this.updateAggregatedValue(),this.updateFormatterProperties()),e.chartAssist&&this.subscribeToChartAssist()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"getFormatterProperties",value:function(e){var t;if(e)return Object.assign(Object.assign({},null===(t=this.contentFormatterDefinition)||void 0===t?void 0:t.properties),{data:ae(e,{value:this.aggregatedValue})})}},{key:"updateAggregatorDefinition",value:function(e){var t=this.aggregatorRegistry.getItem(e.aggregatorType);t?this.contentAggregatorDefinition=t:this.logger.warn("No aggregator with key ".concat(e.aggregatorType," found in registry."))}},{key:"updateFormatterDefinition",value:function(e){var t=this.formatterRegistry.getItem(e.componentType);t?this.contentFormatterDefinition=t:this.logger.warn("No aggregator with key ".concat(e.componentType," found in registry."))}},{key:"updateAggregatedValue",value:function(){var e;if(this.widgetData&&this.contentAggregatorDefinition){var t=this.getAggregatorProperties();this.aggregatedValue=this.contentAggregatorDefinition.fn(this.widgetData,Object.assign(Object.assign({},t),{activeMetricId:this.emphasizedSeriesId||t.activeMetricId})).toString()}else this.logger.warn("Can't aggregate value. Aggregator key: ".concat(null===(e=this.contentAggregatorDefinition)||void 0===e?void 0:e.aggregatorType,". Data: ").concat(this.widgetData))}},{key:"updateFormatterProperties",value:function(){this.contentFormatterProperties=this.getFormatterProperties(this.contentFormatter)}},{key:"getAggregatorProperties",value:function(){var e,t,i;return Object.assign(Object.assign({},null===(e=this.contentAggregatorDefinition)||void 0===e?void 0:e.properties),null===(i=null===(t=this.donutConfig)||void 0===t?void 0:t.aggregator)||void 0===i?void 0:i.properties)}},{key:"subscribeToChartAssist",value:function(){var e,t,i,n=this;null===(e=this.chartAssistSubscription)||void 0===e||e.unsubscribe(),this.chartAssistSubscription=null===(i=null===(t=this.chartAssist)||void 0===t?void 0:t.chartAssistSubject)||void 0===i?void 0:i.pipe((0,Wo.R)(this.destroy$)).subscribe(function(e){var t;n.emphasizedSeriesId=null===(t=e.payload)||void 0===t?void 0:t.seriesId,n.updateAggregatedValue(),n.updateFormatterProperties(),n.changeDetector.detectChanges()})}}]),e}();return e.lateLoadKey="ProportionalDonutContentComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(hs),H.Y36(us.UA),H.Y36(H.sBO),H.Y36(j.mQy))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-proportional-donut-content"]],inputs:{widgetData:"widgetData",donutConfig:"donutConfig",chartAssist:"chartAssist"},features:[H.TTD],decls:1,vars:1,consts:[["nuiComponentPortal","",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&H.YNc(0,gs,3,3,"ng-container",0),2&e&&H.Q6J("ngIf",null==t.contentFormatter?null:t.contentFormatter.componentType)},directives:[V.O5,pe.$,he.Pl],styles:[""],changeDetection:0}),e}(),vs=i(49977),ys=i.n(vs),bs=i(52190),Cs=i.n(bs),xs=1e6,ws=function(){var e=Fo(function e(t){var i=this;Oo(this,e),this.unitConversionService=t,this.transform=function(e){var t="string"==typeof e?parseFloat(e):e;if(void 0===t||isNaN(t)||t<xs)return(null==e?void 0:e.toString())||"";var n=i.unitConversionService.convert(t,j.Qln.Standard,1);return i.unitConversionService.getFullDisplay(n,"generic")}});return e.\u0275fac=function(t){return new(t||e)(H.Y36(j.CrH,16))},e.\u0275pipe=H.Yjl({name:"nuiDashboardUnitConversion",type:e,pure:!0}),e}(),ks=function(){return(e=ks||(ks={})).DonutChart="DonutChart",e.PieChart="PieChart",e.VerticalBarChart="VerticalBarChart",e.HorizontalBarChart="HorizontalBarChart",ks;var e}(),Ts=function(){var e=function(){function e(){Oo(this,e)}return Fo(e,null,[{key:"buildChartSeries",value:function(e,t,i,n){return(e||[]).map(function(e){return Object.assign(Object.assign({},e),{accessors:t,renderer:i,scales:n})})}},{key:"getChartAttributes",value:function(t,i,n){var r=e.getChartTools(t),o={grid:r.gridFunction(),accessors:r.accessorFunction(i,n),renderer:r.rendererFunction(),scales:r.scaleFunction()};return r.preprocessor&&(o.preprocessor=r.preprocessor),o}},{key:"getChartTools",value:function(e){var t,i=function(e){var t=new ee.UDz(e);return t.series.color=function(t,i){var n;return null!==(n=i.color)&&void 0!==n?n:e.get(t)},t};function n(e,t){var i=(0,ee.Q6e)(this.config,e,t);return i.series.color=function(t,i){var n;return null!==(n=i.color)&&void 0!==n?n:null==e?void 0:e.get(t)},i.data.value=function(e){return Number.isFinite(e)?e:e.value},i}return(t={},yo(t,ks.DonutChart,{preprocessor:ee.fy$,gridFunction:ee.Y6Q,rendererFunction:function(){return new ee.E8N},accessorFunction:i,scaleFunction:ee._N$}),yo(t,ks.PieChart,{preprocessor:ee.fy$,gridFunction:ee.Y6Q,rendererFunction:function(){return new ee.bOg},accessorFunction:i,scaleFunction:ee._N$}),yo(t,ks.HorizontalBarChart,{config:{horizontal:!0},gridFunction:function(){return(0,ee.skL)(this.config)},rendererFunction:function(){return new ee.Z7w({highlightStrategy:new ee.TrQ("y")})},accessorFunction:n,scaleFunction:function(){return(0,ee.CQI)(this.config)}}),yo(t,ks.VerticalBarChart,{config:{horizontal:!1},gridFunction:function(){return(0,ee.skL)(this.config)},rendererFunction:function(){return new ee.Z7w({highlightStrategy:new ee.TrQ("x")})},accessorFunction:n,scaleFunction:function(){return(0,ee.CQI)(this.config)}}),t)[e]}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac}),e}(),Ss=["gridContainer"];function Is(e,t){}function _s(e,t){if(1&e){var i=H.EpF();H.ynx(0),H.ynx(1,12,13),H.YNc(3,Is,0,0,"ng-template",14),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(2).attached(e)}),H.BQk(),H.BQk()}if(2&e){var n=H.MAs(2),r=H.oxw(3);H.xp6(1),H.Q6J("componentType",(null==r.contentFormatter?null:r.contentFormatter.componentType)||"DonutContentRawFormatterComponent")("properties",r.contentFormatterProperties),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}function As(e,t){if(1&e&&(H.ynx(0),H._UZ(1,"nui-proportional-donut-content",15),H.BQk()),2&e){var i=H.oxw(3);H.xp6(1),H.Q6J("widgetData",i.widgetData)("donutConfig",null==i.configuration||null==i.configuration.chartOptions?null:i.configuration.chartOptions.donutContentConfig)("chartAssist",i.chartAssist)}}function zs(e,t){if(1&e&&(H.TgZ(0,"nui-chart-donut-content",8),H.TgZ(1,"div",9),H.TgZ(2,"div",10),H.YNc(3,_s,4,3,"ng-container",11),H.YNc(4,As,2,3,"ng-container",11),H.qZA(),H.qZA(),H.qZA()),2&e){var i=H.oxw(2);H.Q6J("plugin",i.donutContentPlugin),H.xp6(2),H.Q6J("useZoom",!1),H.xp6(1),H.Q6J("ngIf",!(null!=i.configuration&&null!=i.configuration.chartOptions&&i.configuration.chartOptions.donutContentConfig)),H.xp6(1),H.Q6J("ngIf",null==i.configuration||null==i.configuration.chartOptions?null:i.configuration.chartOptions.donutContentConfig)}}function Zs(e,t){if(1&e&&(H.TgZ(0,"div",5),H._UZ(1,"nui-chart",6),H.YNc(2,zs,5,4,"nui-chart-donut-content",7),H.qZA()),2&e){var i=H.oxw();H.xp6(1),H.Q6J("chart",i.chartAssist.chart),H.xp6(1),H.Q6J("ngIf",i.donutContentPlugin)}}function Os(e,t){}var Ps=function(e){return{data:e}};function Fs(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div"),H.TgZ(1,"div",22),H.ynx(2,12,23),H.YNc(4,Os,0,0,"ng-template",14),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(3).attached(e)}),H.BQk(),H.qZA(),H.qZA()}if(2&e){var n=H.MAs(3),r=H.oxw().index,o=H.oxw(2);H.xp6(2),H.Q6J("componentType",o.legendFormatter.componentType)("properties",H.VKq(3,Ps,o.widgetData[r])),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}function Ds(e,t){if(1&e&&H._UZ(0,"nui-icon",29),2&e){var i=H.oxw(2).$implicit,n=H.oxw(2);H.Q6J("icon",n.seriesToIconMap[i.id])}}var $s=function(e){return{"nui-text-link-small link":e}};function Ms(e,t){if(1&e&&(H.TgZ(0,"div",30),H._uU(1),H.qZA()),2&e){var i=H.oxw(2).$implicit,n=H.oxw(2);H.Q6J("ngClass",H.VKq(2,$s,n.interactive)),H.xp6(1),H.hij(" ",i.name," ")}}function Rs(e,t){if(1&e&&(H.TgZ(0,"a",31),H.NdJ("click",function(e){return e.stopPropagation()}),H._uU(1),H.qZA()),2&e){var i=H.oxw(2).$implicit;H.Q6J("href",i.link,H.LSH)("title",i.name),H.xp6(1),H.hij(" ",i.name," ")}}function Js(e,t){if(1&e&&(H._UZ(0,"nui-rich-legend-tile",24),H.ALo(1,"nuiDashboardUnitConversion"),H.YNc(2,Ds,1,1,"nui-icon",25),H.TgZ(3,"div",26),H.YNc(4,Ms,2,4,"div",27),H.YNc(5,Rs,2,3,"a",28),H.qZA()),2&e){var i=H.oxw().$implicit,n=H.oxw(2);H.Q6J("value",H.lcZ(1,7,n.computeLegendTileValue(i.data[0])))("unitLabel",n.legendUnitLabel)("color",n.chartAssist.palette.textColors.get(i.id))("backgroundColor",n.chartAssist.palette.standardColors.get(i.id)),H.xp6(2),H.Q6J("ngIf",n.seriesToIconMap&&n.seriesToIconMap[i.id]),H.xp6(2),H.Q6J("ngIf",!i.link),H.xp6(1),H.Q6J("ngIf",i.link)}}function Ls(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"nui-legend-series",19),H.NdJ("isSelectedChange",function(e){var t=H.CHM(i).$implicit;return H.oxw(2).chartAssist.toggleSeries(t.id,e)})("mouseenter",function(){var e=H.CHM(i).$implicit;return H.oxw(2).chartAssist.emphasizeSeries(e.id)})("click",function(){var e=H.CHM(i).$implicit;return H.oxw(2).onInteraction(e)}),H.YNc(1,Fs,5,5,"div",20),H.YNc(2,Js,6,9,"ng-template",null,21,H.W1O),H.qZA()}if(2&e){var n=t.$implicit,r=H.MAs(3),o=H.oxw(2);H.ekj("nui-proportional-widget__legend--interactive",o.interactive),H.Q6J("ngClass",(o.prioritizedGridRows.right||o.prioritizedGridRows.bottom)&&"description-min-width--unset")("isSelected",!o.chartAssist.isSeriesHidden(n.id))("seriesRenderState",null==o.chartAssist.renderStatesIndex[n.id]?null:o.chartAssist.renderStatesIndex[n.id].state),H.xp6(1),H.Q6J("ngIf",o.legendFormatter&&o.legendFormatter.componentType)("ngIfElse",r)}}var Es=function(e){return[e]};function qs(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",16),H.TgZ(1,"nui-legend",17),H.NdJ("mouseleave",function(){return H.CHM(i),H.oxw().chartAssist.resetVisibleSeries()}),H.YNc(2,Ls,4,7,"nui-legend-series",18),H.qZA(),H.qZA()}if(2&e){var n=H.oxw();H.Q6J("ngClass",H.VKq(5,Es,n.legendShouldBeAlignedRight()?"scrollable":"legend-bottom")),H.xp6(1),H.Q6J("interactive",!1)("orientation",n.legendShouldBeAlignedRight()?"vertical":"horizontal"),H.xp6(1),H.Q6J("ngForOf",n.chartAssist.legendSeriesSet)("ngForTrackBy",n.chartAssist.seriesTrackByFn)}}function Bs(e,t){1&e&&(H.TgZ(0,"div",32),H._UZ(1,"nui-image",33),H.qZA())}var Ns=function(e,t,i){return{"prioritize-rows__right":e,"prioritize-rows__bottom":t,"empty-grid":i}},Qs=function(){var e=function(){function e(t,i,n,r,o,s,a){Oo(this,e),this.changeDetector=t,this.ngZone=i,this.kvDiffers=n,this.eventBus=r,this.dataSource=o,this.logger=s,this.prioritizedGridRows={right:!1,bottom:!1},this.chartPalette=new ee.syg((0,ee.GUR)()),this.differ=this.kvDiffers.find(this.prioritizedGridRows).create(),this.unitConversionPipe=new ws(a)}return Fo(e,[{key:"interactive",get:function(){var e,t,i,n;return(null===(e=this.configuration)||void 0===e?void 0:e.interactive)||(null===(n=null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.getFeatureConfig(ce.ni.Interactivity))||void 0===n?void 0:n.enabled)||!1}},{key:"computeLegendTileValue",value:function(e){var t,i;return null===(i=null===(t=this.accessors.data)||void 0===t?void 0:t.value)||void 0===i?void 0:i.call(t,e,0,null,null)}},{key:"ngOnChanges",value:function(e){var t,i,n,r,o=null===(i=null===(t=e.configuration)||void 0===t?void 0:t.currentValue)||void 0===i?void 0:i.chartColors,s=null===(r=null===(n=e.configuration)||void 0===n?void 0:n.previousValue)||void 0===r?void 0:r.chartColors;if((e.widgetData||!ys()(o,s))&&this.updateChartColors(),e.configuration){var a=e.configuration.currentValue.chartOptions.type,l=e.configuration.previousValue&&e.configuration.previousValue.chartOptions.type;a&&a!==l&&(this.buildChart(a),this.widgetData&&this.updateChart()),this.legendFormatter=this.configuration.chartOptions.legendFormatter,this.contentFormatter=this.configuration.chartOptions.contentFormatter,this.chartFormatterComponentType=this.configuration.chartOptions.chartFormatterComponentType,this.getContentFormatterProperties(),this.changeDetector.markForCheck()}e.widgetData&&this.chartAssist&&(this.updateChart(),this.getContentFormatterProperties(),this.changeDetector.markForCheck())}},{key:"ngAfterViewInit",value:function(){this.handleGridFlowOnResize()}},{key:"ngOnDestroy",value:function(){var e,t;null===(e=this.proportionalWidgetResizeObserver)||void 0===e||e.disconnect(),null===(t=this.chartTypeSubscription$)||void 0===t||t.unsubscribe()}},{key:"getContentFormatterProperties",value:function(){var e;this.contentFormatterProperties={data:this.widgetData,config:this.configuration,chartAssist:this.chartAssist,properties:null===(e=this.contentFormatter)||void 0===e?void 0:e.properties}}},{key:"isDonutChart",value:function(){return this.configuration.chartOptions.type===ks.DonutChart}},{key:"isRadialChart",value:function(){return-1!==[ks.DonutChart,ks.PieChart].indexOf(this.configuration.chartOptions.type)}},{key:"hasLegend",value:function(){return this.configuration.chartOptions.legendPlacement!==ne.w.None}},{key:"legendShouldBeAlignedRight",value:function(){return this.configuration.chartOptions.legendPlacement===ne.w.Right}},{key:"onInteraction",value:function(e){!this.interactive||this.eventBus.getStream(le.b1).next({payload:{data:e}})}},{key:"buildChart",value:function(e){var t,i,n=this;this.donutContentPlugin=null;var r=Ts.getChartAttributes(e,null===(t=this.chartPalette)||void 0===t?void 0:t.standardColors),o=r.grid,s=r.accessors,a=r.renderer,l=r.scales,c=r.preprocessor;this.chartAssist=new ee.doR(new ee.kL2(o),c,this.chartPalette),this.renderer=a,this.accessors=s,this.scales=l,this.isDonutChart()&&(this.donutContentPlugin=new ee.iM,this.chartAssist.chart.addPlugin(this.donutContentPlugin)),this.configuration.chartOptions.type===ks.HorizontalBarChart?(this.scales.x.formatters.tick=this.unitConversionPipe.transform,this.applyTickLabelMaxWidths()):this.configuration.chartOptions.type===ks.VerticalBarChart&&(this.scales.y.formatters.tick=this.unitConversionPipe.transform),null===(i=this.chartTypeSubscription$)||void 0===i||i.unsubscribe(),this.chartTypeSubscription$=this.chartAssist.chart.getEventBus().getStream(ee.q7O).subscribe(function(e){var t=n.widgetData.find(function(t){return t.id===e.data.seriesId});n.onInteraction(t)})}},{key:"handleGridFlowOnResize",value:function(){var e=this;this.proportionalWidgetResizeObserver=new ResizeObserver(function(){return e.onResize()}),this.ngZone.runOutsideAngular(function(){e.proportionalWidgetResizeObserver.observe(e.gridContainer.nativeElement)})}},{key:"applyTickLabelMaxWidths",value:function(){var t,i,n,r,o,s,a=this.chartAssist.chart.getGrid().config().axis;a.left.tickLabel.maxWidth=null!==(n=null===(i=null===(t=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===t?void 0:t.maxWidth)||void 0===i?void 0:i.left)&&void 0!==n?n:e.TICK_LABEL_MAX_WIDTH,a.right.tickLabel.maxWidth=null!==(s=null===(o=null===(r=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===r?void 0:r.maxWidth)||void 0===o?void 0:o.right)&&void 0!==s?s:e.TICK_LABEL_MAX_WIDTH}},{key:"onResize",value:function(){if(!this.isContainerInNoSwitchLayoutInterval()){switch(this.configuration.chartOptions.legendPlacement){case ne.w.Bottom:this.prioritizedGridRows.bottom=this.containerHasRowLayoutWidth();break;case ne.w.Right:this.prioritizedGridRows.right=this.containerHasRowLayoutWidth()}this.differ.diff(this.prioritizedGridRows)&&this.changeDetector.detectChanges()}}},{key:"isContainerInNoSwitchLayoutInterval",value:function(){var t=this.gridContainer.nativeElement.getBoundingClientRect().width;return t>e.MAX_ROW_LAYOUT_SIZE-e.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2&&t<e.MAX_ROW_LAYOUT_SIZE+e.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2}},{key:"containerHasRowLayoutWidth",value:function(){return this.gridContainer.nativeElement.getBoundingClientRect().width<e.MAX_ROW_LAYOUT_SIZE}},{key:"updateChart",value:function(){this.chartAssist.update(Ts.buildChartSeries(this.widgetData,this.accessors,this.renderer,this.scales))}},{key:"updateChartColors",value:function(){var e,t,i,n=null===(e=this.widgetData)||void 0===e?void 0:e.map(function(e){return e.color}),r=this.configuration.chartColors;i=!this.configuration.prioritizeWidgetColors&&Cs()(n)?this.getDataDriverColorProvider(this.widgetData):r?this.getConfigurationColorProvider(r):(0,ee.GUR)(),this.chartPalette=new ee.syg(i),this.buildChart(null===(t=this.configuration)||void 0===t?void 0:t.chartOptions.type),this.chartAssist&&(this.chartAssist.palette=this.chartPalette,this.updateChart())}},{key:"getDataDriverColorProvider",value:function(e){var t;if((null==e?void 0:e.map(function(e){return e.color}).filter(function(e){return!!e})).length===e.length){var i=e.reduce(function(e,t){return e[t.id]=t.color,e},{});t=new ee.oki(i)}else{var n=e.filter(function(e){return e.color});this.logger.warn("Not all series have colors set, setting default pallette. Current series color config: ".concat(JSON.stringify(n))),t=(0,ee.GUR)()}return t}},{key:"getConfigurationColorProvider",value:function(e){var t,i;return this.configuration.prioritizeWidgetColors&&this.widgetData&&(this.widgetData=this.widgetData.map(function(e){var t=Object.assign({},e);return t.color&&delete t.color,t})),Array.isArray(e)?i=new ee.jpW(e):Object.keys(e).length===(null===(t=this.widgetData)||void 0===t?void 0:t.length)?i=new ee.oki(e):(this.logger.warn("Not all series have colors set, setting default pallette. Current series color config: ".concat(JSON.stringify(e))),i=(0,ee.GUR)()),i}}]),e}();return e.lateLoadKey="ProportionalWidgetComponent",e.NO_SWITCH_LAYOUT_INTERVAL_SIZE=20,e.MAX_ROW_LAYOUT_SIZE=360,e.TICK_LABEL_MAX_WIDTH=75,e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(H.R0b),H.Y36(H.aQg),H.Y36(ce.nY),H.Y36(ce.Fk),H.Y36(j.mQy),H.Y36(j.CrH))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-proportional-widget"]],viewQuery:function(e,t){var i;(1&e&&H.Gf(Ss,7),2&e)&&(H.iGM(i=H.CRH())&&(t.gridContainer=i.first))},hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",elementClass:"elementClass",seriesToIconMap:"seriesToIconMap"},features:[H.TTD],decls:5,vars:8,consts:[[1,"w-100","nui-chart-layout","flex-grow-1","p-3",3,"ngClass"],["gridContainer",""],["class","d-flex chart has-overlay",4,"ngIf"],["class","w-100 d-flex legend",3,"ngClass",4,"ngIf"],["class","mb-3 mt-3 d-flex align-items-center justify-content-center",4,"ngIf"],[1,"d-flex","chart","has-overlay"],[1,"w-100",3,"chart"],["class","nui-proportional-widget__chart-donut-content",3,"plugin",4,"ngIf"],[1,"nui-proportional-widget__chart-donut-content",3,"plugin"],[1,"h-100","w-100","d-flex","justify-content-center","align-items-center","text-center"],["nuiZoomContent","",1,"d-inline-block",3,"useZoom"],[4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal2","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"widgetData","donutConfig","chartAssist"],[1,"w-100","d-flex","legend",3,"ngClass"],[1,"w-100","m-auto",3,"interactive","orientation","mouseleave"],["class","proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","nui-proportional-widget__legend--interactive","isSelectedChange","mouseenter","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","click"],[4,"ngIf","ngIfElse"],["legendDefaultTile",""],["description",""],["componentPortal","nuiComponentPortal"],[3,"value","unitLabel","color","backgroundColor"],["legendTransclusion","","class","align-items-center",3,"icon",4,"ngIf"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["legendTransclusion","",1,"align-items-center",3,"icon"],[1,"description","description-primary",3,"ngClass"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"mb-3","mt-3","d-flex","align-items-center","justify-content-center"],["image","no-data-to-show"]],template:function(e,t){1&e&&(H.TgZ(0,"div",0,1),H.YNc(2,Zs,3,2,"div",2),H.YNc(3,qs,3,7,"div",3),H.YNc(4,Bs,2,0,"div",4),H.qZA()),2&e&&(H.Q6J("ngClass",H.kEZ(4,Ns,t.prioritizedGridRows.right,t.prioritizedGridRows.bottom,!(t.widgetData&&t.widgetData.length>0&&t.chartAssist))),H.xp6(2),H.Q6J("ngIf",t.widgetData&&t.widgetData.length>0&&t.chartAssist),H.xp6(1),H.Q6J("ngIf",t.hasLegend()&&t.chartAssist),H.xp6(1),H.Q6J("ngIf",!t.widgetData||0===t.widgetData.length||!t.chartAssist))},directives:[V.mk,V.O5,ee.xH4,ee.kwD,j.mEK,pe.$,he.Pl,ms,ee.FVX,V.sg,ee.kJo,ee.wHi,j.oJW,j.cuP],pipes:[ws],styles:['.nui-proportional-widget__chart-donut-content[_ngcontent-%COMP%]{position:absolute}.nui-proportional-widget__legend--interactive[_ngcontent-%COMP%]{cursor:pointer!important}.has-overlay[_ngcontent-%COMP%]{overflow:auto}.nui-chart-layout[_ngcontent-%COMP%]{grid-template:"axis-label-left    axis-label-right    ." 0fr "chart              chart               legend" minmax(60%,auto) "axis-label-bottom  axis-label-bottom   ." 0fr "legend-bottom      legend-bottom       ." minmax(auto,-webkit-min-content) / 1fr 1fr auto;grid-template:"axis-label-left    axis-label-right    ." 0fr "chart              chart               legend" minmax(60%,auto) "axis-label-bottom  axis-label-bottom   ." 0fr "legend-bottom      legend-bottom       ." minmax(auto,min-content) / 1fr 1fr auto}.nui-chart-layout[_ngcontent-%COMP%]   .legend-bottom[_ngcontent-%COMP%]{overflow:auto;align-self:auto;padding-left:0}.prioritize-rows__right[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%], .prioritize-rows__bottom[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%]{max-width:unset;width:100%}.prioritize-rows[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{justify-self:start}.prioritize-rows__right[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend      legend       ." 40%}.prioritize-rows__bottom[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend-bottom      legend-bottom      ." 40%}.empty-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:1fr}.proportional-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}']}),e}(),Ys=i(43397),Vs=function(){var e=function(){function e(){Oo(this,e),this.enabled=!0,this.delay=500}return Fo(e,[{key:"onHostMouseenter",value:function(){var e=this;!this.enabled||(this.timeout=setTimeout(function(){e.mousePresentSubject.next(!0)},this.delay))}},{key:"onHostClick",value:function(){!this.enabled||this.mousePresentSubject.next(!0)}},{key:"onHostMouseleave",value:function(){!this.enabled||(clearTimeout(this.timeout),this.mousePresentSubject.next(!1))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=H.lG2({type:e,selectors:[["","nuiDelayedMousePresenceDetection",""]],hostBindings:function(e,t){1&e&&H.NdJ("mouseenter",function(){return t.onHostMouseenter()})("click",function(){return t.onHostClick()})("mouseleave",function(){return t.onHostMouseleave()})},inputs:{enabled:["nuiDelayedMousePresenceDetection","enabled"],mousePresentSubject:"mousePresentSubject",delay:"delay"}}),e}(),js=i(58102),Ws=i.n(js),Hs=i(12482),Us=i.n(Hs),Gs=i(26215),Ks=i(66682),Xs=i(25917),ea=i(68307),ta=i(45435),ia=i(88002),na=i(15257),ra=i(54395),oa=function(){var e=function(){function e(){Oo(this,e),this.searchDebounceTime=500}return Fo(e,[{key:"initWidget",value:function(e){this.widget=e,this.initSearch()}},{key:"initSearch",value:function(){var e,t,i=this;this.defineSearch();var n=null===(t=null===(e=this.widget.dataSource)||void 0===e?void 0:e.features)||void 0===t?void 0:t.featuresChanged;n&&n.pipe((0,Wo.R)(this.widget.onDestroy$)).subscribe(function(){i.defineSearch()})}},{key:"registerSearch",value:function(){var e=this;this.widget.dataSource&&this.widget.dataSource.registerComponent({search:{componentInstance:{getFilters:function(){return{type:"search",value:e.widget.searchValue}}}}})}},{key:"deregisterSearch",value:function(){var e,t;this.widget.dataSource&&(null===(t=(e=this.widget.dataSource).deregisterComponent)||void 0===t||t.call(e,"search"))}},{key:"defineSearch",value:function(){var e,t,i=null===(e=this.widget.configuration)||void 0===e?void 0:e.searchConfiguration,n=null===(t=this.widget.dataSource.features)||void 0===t?void 0:t.getFeatureConfig("search");this.widget.isSearchEnabled=!(!(null==i?void 0:i.enabled)||!(null==n?void 0:n.enabled)),this.widget.isSearchEnabled?(this.widget.searchValue=(null==i?void 0:i.searchTerm)||"",this.registerSearch(),this.searchDebounceTime=de()(null==i?void 0:i.searchDebounce)?this.searchDebounceTime:null==i?void 0:i.searchDebounce,this.watchSearchTerm()):this.deregisterSearch()}},{key:"watchSearchTerm",value:function(){var e=this;this.widget.searchTerm$.pipe((0,ra.b)(this.searchDebounceTime),(0,Wo.R)(this.widget.onDestroy$)).subscribe(function(){e.widget.pizzagnaService.setProperty({pizzagnaKey:ce.xW.Configuration,componentId:e.widget.componentId,propertyPath:["configuration.searchConfiguration.searchTerm"]},e.widget.searchValue),e.widget.eventBus.getStream(le.RG).next()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac}),e}(),sa=function(){var e=function(){function e(){Oo(this,e),this.visibleItems=[]}return Fo(e,[{key:"initWidget",value:function(e){this.widget=e}},{key:"initVirtualScroll",value:function(){this.widget.hasVirtualScroll?this.registerVirtualScroll():this.deregisterVirtualScroll()}},{key:"registerVirtualScroll",value:function(){this.widget.dataSource&&this.widget.dataSource.registerComponent(yo({},(0,j.$0I)("virtualScroll"),{componentInstance:this.widget.viewportManager}))}},{key:"deregisterVirtualScroll",value:function(){var e,t;this.widget.dataSource&&(null===(t=(e=this.widget.dataSource).deregisterComponent)||void 0===t||t.call(e,(0,j.$0I)("virtualScroll")))}},{key:"subscribeToVirtualScroll",value:function(){var e=this;!this.widget.vscrollViewport||((0,Ks.T)(this.widget.vscrollViewport.renderedRangeStream,this.widget.tableUpdate$.pipe((0,ia.U)(function(){var t;return null===(t=e.widget.vscrollViewport)||void 0===t?void 0:t.getRenderedRange()}))).pipe((0,ea.b)(function(t){e.visibleItems=e.widget.tableData.slice(null==t?void 0:t.start,null==t?void 0:t.end),e.widget.changeDetector.detectChanges()}),(0,Wo.R)(this.widget.onDestroy$)).subscribe(),this.widget.viewportManager.setViewport(this.widget.vscrollViewport).observeNextPage$({pageSize:this.widget.range,emitFirstPage:!0}).pipe((0,ta.h)(function(t){var i,n;return t.end>=(null!==(n=null===(i=e.widget.vscrollViewport)||void 0===i?void 0:i.getDataLength())&&void 0!==n?n:0)}),(0,ea.b)(function(t){return e.widget.zone.run(function(){e.widget.dataSource.page=t.end/(t.end-t.start),e.widget.eventBus.getStream(le.df).next(),e.widget.changeDetector.detectChanges()})}),(0,Wo.R)(this.widget.onDestroy$)).subscribe())}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac}),e}(),aa=i(84356),la=["widgetTable"];function ca(e,t){1&e&&(H.TgZ(0,"div",10),H._UZ(1,"nui-image",11),H.qZA())}function ua(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",12),H.TgZ(1,"nui-search",13),H.NdJ("inputChange",function(e){return H.CHM(i),H.oxw().onSearchInputChanged(e)})("cancel",function(e){return H.CHM(i),H.oxw().onSearchInputChanged(e)}),H.qZA(),H.qZA()}if(2&e){var n=H.oxw();H.xp6(1),H.Q6J("value",n.searchValue)}}function da(e,t){if(1&e&&(H.TgZ(0,"th",17),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit,n=H.oxw();H.Udp("width",n.columnsWidthMap.get(i.id),"px")("max-width",n.columnsWidthMap.get(i.id),"px")("min-width",n.columnsWidthMap.get(i.id),"px"),H.Q6J("isColumnSortingDisabled",!i.sortable)("title",i.label)("tooltipText",n.headerTooltipsEnabled?i.label:void 0)("alignment",n.getColumnAlignment(i)),H.xp6(1),H.hij(" ",i.label,"")}}function pa(e,t){}function ha(e,t){if(1&e){var i=H.EpF();H.ynx(0,20,21),H.YNc(2,pa,0,0,"ng-template",22),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(1).attached(e)}),H.BQk()}if(2&e){var n=H.MAs(1),r=H.oxw().$implicit,o=H.oxw().$implicit;H.Q6J("componentType",null==o.formatter?null:o.formatter.componentType)("properties",r[o.id]),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}function fa(e,t){if(1&e&&(H.TgZ(0,"td",18),H.YNc(1,ha,3,3,"ng-container",19),H.qZA()),2&e){var i=t.$implicit,n=H.oxw().$implicit,r=H.oxw();H.Udp("width",r.columnsWidthMap.get(n.id),"px")("max-width",r.columnsWidthMap.get(n.id),"px")("min-width",r.columnsWidthMap.get(n.id),"px"),H.Q6J("alignment",r.getColumnAlignment(n)),H.xp6(1),H.Q6J("ngIf",i[n.id]&&n.formatter)}}function ga(e,t){1&e&&(H.ynx(0,14),H.YNc(1,da,2,11,"th",15),H.ynx(2),H.YNc(3,fa,2,8,"td",16),H.BQk(),H.BQk()),2&e&&H.s9C("nuiColumnDef",t.$implicit.id)}function ma(e,t){1&e&&H._UZ(0,"tr",23)}function va(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"tr",24),H.NdJ("click",function(e){var t=H.CHM(i).$implicit;return H.oxw().onInteraction(t,e)}),H.qZA()}if(2&e){var n=H.oxw();H.uIk("role",n.interactive?"button":"")}}var ya=function(e){return{"virtual-scroll-disabled":e}},ba=function(){var e=function(){function e(t,i,n,r,o,s,a,l,c,u,d,p){Oo(this,e),this.eventBus=t,this.dataSource=i,this.widgetConfigurationService=n,this.changeDetector=r,this.pizzagnaService=o,this.viewportManager=s,this.zone=a,this.el=l,this.logger=c,this.searchAddon=u,this.virtualScrollAddon=d,this.formattersRegistryService=p,this.indentFromTop=70,this.sortable=!0,this.delayedMousePresenceDetectionEnabled=!0,this.tableData=[],this.columns=[],this.columnsWidthMap=new Map,this.hasVirtualScroll=!0,this.isSearchEnabled=!1,this.searchTerm$=new jo.xQ,this.onDestroy$=new jo.xQ,this.tableUpdate$=new jo.xQ,this.mousePresent$=new Gs.X(!1),this.rowHeight=24,this._scrollBuffer=0,this.totalPages=0,this.lastPageFetched=0,this.sortableSet={},this.defaultColumnAlignment="left",this.idle=!1,this.isBusy=this.lastPageFetched!==this.totalPages}return Fo(e,[{key:"range",get:function(){return this.getTableScrollRange()},set:function(e){this._range=e}},{key:"headerTooltipsEnabled",get:function(){var e;return null===(e=this.configuration.headerTooltipsEnabled)||void 0===e||e}},{key:"scrollBuffer",set:function(e){if(e>100||e<0)throw new Error("Invalid scroll buffer provided. Required range 1..100");this._scrollBuffer=e}},{key:"interactive",get:function(){var e,t,i,n;return(null===(e=this.configuration)||void 0===e?void 0:e.interactive)||(null===(n=null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.getFeatureConfig(ce.ni.Interactivity))||void 0===n?void 0:n.enabled)}},{key:"ngOnChanges",value:function(e){var t,i,n,r;if(e.dataFields&&(null===(t=this.dataFields)||void 0===t?void 0:t.length)&&this.setSortableSet(),(e.widgetData||e.configuration||e.dataFields)&&(this.updateTable(),null===(i=this.vscrollViewport)||void 0===i||i.checkViewportSize()),e.configuration){this.isSortByUpdated(e.configuration)&&(null===(n=e.configuration.currentValue.sortable)||void 0===n||n)&&this.onSortOrderChanged({direction:e.configuration.currentValue.sorterConfiguration.descendantSorting?j.aQE.descending:j.aQE.ascending,sortBy:e.configuration.currentValue.sorterConfiguration.sortBy});var o=Ws()(e,"configuration.currentValue.hasVirtualScroll",!0);this.hasVirtualScroll!==o&&(this.hasVirtualScroll=o,this.virtualScrollAddon.initVirtualScroll())}e.totalItems&&(this.totalPages=Math.floor((null!==(r=this.totalItems)&&void 0!==r?r:0)/this.range))}},{key:"ngOnInit",value:function(){this.dataSource&&(this.setSortFilter(),this.registerSorter(),this.virtualScrollAddon.initWidget(this))}},{key:"ngAfterViewInit",value:function(){var e,t=this;if(this.dataSource){null===(e=this.dataSource.busy)||void 0===e||e.pipe((0,ea.b)(function(e){return t.isBusy=e}),(0,Wo.R)(this.onDestroy$)).subscribe(),this.virtualScrollAddon.initVirtualScroll(),this.searchAddon.initWidget(this);var i=this.eventBus.getStream(le.pV).pipe((0,ta.h)(function(e){return e.payload.widgetId===t.widgetConfigurationService.getWidget().id}),(0,ia.U)(function(e){return e.payload.height}));i.pipe((0,Wo.R)(this.onDestroy$)).subscribe(function(e){var i;t.tableContainerHeight=e-t.indentFromTop,null===(i=t.vscrollViewport)||void 0===i||i.checkViewportSize(),t.changeDetector.detectChanges()}),setTimeout(function(){(0,Ks.T)((0,Xs.of)(t.range*t.rowHeight),i,(0,Xs.of)(t.el.nativeElement.getBoundingClientRect().height)).pipe((0,ta.h)(function(e){return!!e}),(0,na.q)(1),(0,ea.b)(function(e){t.tableWidgetHeight=e,t.virtualScrollAddon.subscribeToVirtualScroll(),t.eventBus.getStream(le.j7).next()})).subscribe()})}}},{key:"ngOnDestroy",value:function(){var e;this.onDestroy$.next(),this.onDestroy$.complete(),this.tableUpdate$.complete(),null===(e=this.searchTerm$)||void 0===e||e.complete(),this.pizzagnaService.setProperty({componentId:"bodyContent",propertyPath:["fallbackKey"],pizzagnaKey:ce.xW.Data},void 0)}},{key:"shouldDisplayTable",value:function(){var e,t=this.columns.length>0,i=(null===(e=this.tableData)||void 0===e?void 0:e.length)>0;return this.isSearchEnabled||this.hasVirtualScroll&&(this.isBusy||this.idle)?t:t&&i}},{key:"dataTrackBy",value:function(e,t){return t?t.id:e}},{key:"columnTrackBy",value:function(e,t){return t.id}},{key:"updateColumns",value:function(e){var t=this;this.headers=e.columns.filter(function(e){return e.isActive}).map(function(e){return e.id});var i=e.columns.every(function(e){return Boolean(e.width)}),n=e.columns.map(function(e,n,r){var o,s,a,l;return t.columnsWidthMap.set(e.id,e.width),i&&t.columnsWidthMap.set(r[r.length-1].id,void 0),Object.assign(Object.assign({},e),{sortable:null===(l=t.sortableSet[null===(a=null===(s=null===(o=null==e?void 0:e.formatter)||void 0===o?void 0:o.properties)||void 0===s?void 0:s.dataFieldIds)||void 0===a?void 0:a.value])||void 0===l||l})});n.length>0&&i&&this.logger.warn("Cannot set width for all columns. Resetting last column width."),this.columns.length!==n.length?this.columns=_o(n):this.columns.forEach(function(e,t){Object.assign(e,n[t],{})})}},{key:"mapTableData",value:function(e,t,i){return i&&0!==i.length?e.map(function(e){var i=t.reduce(function(t,i){var n,r,o,s=null===(r=null===(n=i.formatter)||void 0===n?void 0:n.properties)||void 0===r?void 0:r.dataFieldIds;if(!s)return t;var a=Object.keys(s).reduce(function(t,i){return t[i]=e[s[i]],t},{});return t[i.id]=Object.assign({data:a},Us()(null===(o=i.formatter)||void 0===o?void 0:o.properties,"dataFieldIds")),t},{});return i.__record=e,i}):(this.logger.warn("There are no data fields defined, so table data cannot be displayed."),[])}},{key:"onSortOrderChanged",value:function(e){var t,i;this.sortedColumn=e;var n=this.columns.find(function(t){return t.id===e.sortBy});if(n){var r=null===(i=null===(t=n.formatter)||void 0===t?void 0:t.properties)||void 0===i?void 0:i.dataFieldIds,o=null==r?void 0:r.value;if(o){var s={sortBy:o,direction:e.direction};ys()(s,this.sortFilter)||(this.sortFilter=s,this.flushTableData(),this.eventBus.getStream(le.RG).next())}}}},{key:"onInteraction",value:function(e,t){this.interactive&&(t.target.closest((this.configuration.interactionIgnoredSelectors||j.hrM).join(","))||this.eventBus.getStream(le.b1).next({payload:{data:e.__record}}))}},{key:"onSearchInputChanged",value:function(e){this.searchValue=e,this.searchTerm$.next()}},{key:"getColumnAlignment",value:function(e){var t,i,n;return!(null===(t=null==e?void 0:e.formatter)||void 0===t?void 0:t.componentType)||this.formattersRegistryService.isEmpty?this.defaultColumnAlignment:((null===(i=this.formatters)||void 0===i?void 0:i.version)!==this.formattersRegistryService.stateVersion&&(this.formatters={items:this.formattersRegistryService.getItems().reduce(function(e,t){return Object.assign(Object.assign({},e),yo({},t.componentType,t))},{}),version:this.formattersRegistryService.stateVersion}),(null===(n=this.formatters.items[e.formatter.componentType])||void 0===n?void 0:n.alignment)||this.defaultColumnAlignment)}},{key:"setSortFilter",value:function(){var e,t,i,n,r,o,s;if(this.configuration){var a=null===(e=this.configuration.sorterConfiguration)||void 0===e?void 0:e.sortBy,l=null===(o=null===(r=null===(n=null===(i=null===(t=this.configuration.columns)||void 0===t?void 0:t.find(function(e){return e.id===a}))||void 0===i?void 0:i.formatter)||void 0===n?void 0:n.properties)||void 0===r?void 0:r.dataFieldIds)||void 0===o?void 0:o.value;this.sortFilter={direction:(null===(s=this.configuration.sorterConfiguration)||void 0===s?void 0:s.descendantSorting)?j.aQE.descending:j.aQE.ascending,sortBy:l}}}},{key:"isSortByUpdated",value:function(e){var t,i=null===(t=e.previousValue)||void 0===t?void 0:t.sorterConfiguration,n=e.currentValue.sorterConfiguration,r=null==i?void 0:i.sortBy,o=null==n?void 0:n.sortBy;return o?!(r===o&&n.descendantSorting===i.descendantSorting):Boolean(r)}},{key:"updateTable",value:function(){this.widgetData&&this.dataFields&&this.configuration.columns&&(this.updateColumns(this.configuration),this.idle=!1,this.tableData=this.mapTableData(this.widgetData,this.configuration.columns,this.dataFields),this.tableUpdate$.next(),this.changeDetector.detectChanges())}},{key:"registerSorter",value:function(){var e=this;this.dataSource.registerComponent({sorter:{componentInstance:{getFilters:function(){return{type:"sorter",value:e.sortFilter}}}}})}},{key:"setSortableSet",value:function(){var e=this;this.sortableSet={},this.dataFields.forEach(function(t){var i;e.sortableSet[t.id]=null===(i=t.sortable)||void 0===i||i})}},{key:"flushTableData",value:function(){this.idle=!0,this.tableData=[]}},{key:"getTableScrollRange",value:function(){var e,t=(null!==(e=this._scrollBuffer)&&void 0!==e?e:0)/100+1;return this._range?Math.floor(this._range*t):Math.floor(this.tableWidgetHeight/this.rowHeight*2*t)}}]),e}();return e.lateLoadKey="TableWidgetComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(ce.nY),H.Y36(ce.Fk,8),H.Y36(aa.I,8),H.Y36(H.sBO),H.Y36(zo.p),H.Y36(j.zCP),H.Y36(H.R0b),H.Y36(H.SBq),H.Y36(j.mQy),H.Y36(oa),H.Y36(sa),H.Y36(us.C))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-table-widget"]],viewQuery:function(e,t){var i;(1&e&&(H.Gf(la,5),H.Gf(K.N7,5),H.Gf(j.xhB,5,H.SBq)),2&e)&&(H.iGM(i=H.CRH())&&(t.table=i.first),H.iGM(i=H.CRH())&&(t.vscrollViewport=i.first),H.iGM(i=H.CRH())&&(t.tableRows=i))},hostVars:4,hostBindings:function(e,t){2&e&&(H.Tol(t.elementClass),H.ekj("table-widget-fullwidth",!0))},inputs:{widgetData:"widgetData",componentId:"componentId",configuration:"configuration",dataFields:"dataFields",totalItems:"totalItems",indentFromTop:"indentFromTop",sortable:"sortable",delayedMousePresenceDetectionEnabled:"delayedMousePresenceDetectionEnabled",range:"range",elementClass:"elementClass"},features:[H._Bn([oa,sa]),H.TTD],decls:11,vars:24,consts:[["class","h-100 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"nui-table-widget","d-flex","flex-column",3,"ngClass"],["class","mr-2 mb-2 flex-row",4,"ngIf"],[1,"flex-row","h-100","nui-table-widget-container",3,"nuiDelayedMousePresenceDetection","delay","mousePresentSubject"],["tableStickyHeader","",1,"calc-height",2,"height","calc(100% - 2px)",3,"itemSize","ngClass"],["nui-table","",1,"nui-table-widget__main",3,"reorderable","sortable","totalItems","dataSource","sortedColumn","trackBy","sortOrderChanged"],["widgetTable",""],[3,"nuiColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["nui-header-row","",4,"nuiHeaderRowDef"],["nuiRowDef","","cdkVirtualFor","",3,"nuiRowDefColumns","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"h-100","d-flex","justify-content-center","align-items-center"],["image","no-data-to-show"],[1,"mr-2","mb-2","flex-row"],[1,"unlimited-width","d-flex","justify-content-end","flex-grow-1",3,"value","inputChange","cancel"],[3,"nuiColumnDef"],["nui-header-cell","",3,"isColumnSortingDisabled","width","max-width","min-width","title","tooltipText","alignment",4,"nuiHeaderCellDef"],["nui-cell","",3,"width","max-width","min-width","alignment",4,"nuiCellDef"],["nui-header-cell","",3,"isColumnSortingDisabled","title","tooltipText","alignment"],["nui-cell","",3,"alignment"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["nui-header-row",""],["nui-row","","density","tiny",3,"click"]],template:function(e,t){1&e&&(H.YNc(0,ca,2,0,"div",0),H.TgZ(1,"div",1),H.YNc(2,ua,2,1,"div",2),H.TgZ(3,"div",3),H.TgZ(4,"cdk-virtual-scroll-viewport",4),H.ALo(5,"async"),H.TgZ(6,"table",5,6),H.NdJ("sortOrderChanged",function(e){return t.onSortOrderChanged(e)}),H.YNc(8,ga,4,1,"ng-container",7),H.YNc(9,ma,1,0,"tr",8),H.YNc(10,va,1,1,"ng-template",9),H.qZA(),H.qZA(),H.qZA(),H.qZA()),2&e&&(H.Q6J("ngIf",!t.shouldDisplayTable()),H.xp6(1),H.Q6J("ngClass",t.shouldDisplayTable()?"h-100":"invisible"),H.xp6(1),H.Q6J("ngIf",t.isSearchEnabled),H.xp6(1),H.Q6J("nuiDelayedMousePresenceDetection",t.delayedMousePresenceDetectionEnabled)("delay",t.configuration.scrollActivationDelayMs)("mousePresentSubject",t.mousePresent$),H.xp6(1),H.Q6J("itemSize",t.rowHeight)("ngClass",H.VKq(22,ya,!1===H.lcZ(5,20,t.mousePresent$)&&t.delayedMousePresenceDetectionEnabled)),H.xp6(2),H.Q6J("reorderable",null==t.configuration?null:t.configuration.reorderable)("sortable",t.sortable)("totalItems",t.totalItems)("dataSource",t.virtualScrollAddon.visibleItems)("sortedColumn",t.sortedColumn)("trackBy",t.dataTrackBy),H.xp6(2),H.Q6J("ngForOf",t.columns)("ngForTrackBy",t.columnTrackBy),H.xp6(1),H.Q6J("nuiHeaderRowDef",t.headers),H.xp6(1),H.Q6J("nuiRowDefColumns",t.headers)("cdkVirtualForOf",t.tableData)("cdkVirtualForTrackBy",t.dataTrackBy))},directives:[V.O5,V.mk,Vs,K.N7,j.Fpu,K.xd,j.ac$,V.sg,j.Pu4,j.l6o,K.x0,j.cuP,j.gSk,j.yNF,j.Go6,j.wCL,j.Asp,j.tNH,pe.$,he.Pl,j.ue9,j.xhB],pipes:[V.Ov],styles:[".nui-table-widget[_ngcontent-%COMP%]{overflow:auto;width:100%}.nui-table-widget[_ngcontent-%COMP%]   .display-contents[_ngcontent-%COMP%]{display:contents}.nui-table-widget__main[_ngcontent-%COMP%]{flex:1 1 auto}.nui-table-widget__paginator[_ngcontent-%COMP%]{margin-top:10px}.nui-table-widget__overflow[_ngcontent-%COMP%]{overflow-y:auto}.nui-table-widget[_ngcontent-%COMP%]   .nui-table-widget-container[_ngcontent-%COMP%]   .virtual-scroll-disabled.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{overflow:hidden!important}.mobile[_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%], .mobile   [_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%]{min-height:200px}.table-widget-fullwidth[_nghost-%COMP%]{width:calc(100% - 10px)}.invisible[_ngcontent-%COMP%]{height:0}@-moz-document url-prefix(){.nui-table-widget-container{margin-right:10px}}"],changeDetection:0}),e}(),Ca=i(52409),xa=i(16738),wa=i.n(xa),ka=function(){var e=function(){function e(){Oo(this,e)}return Fo(e,[{key:"convertToSerializable",value:function(e){return{startDatetime:e.startDatetime.format(),endDatetime:e.endDatetime.format(),selectedPresetId:e.selectedPresetId,title:e.title}}},{key:"convertFromSerializable",value:function(e){return{startDatetime:wa()(e.startDatetime,wa().defaultFormat),endDatetime:wa()(e.endDatetime,wa().defaultFormat),selectedPresetId:e.selectedPresetId,title:e.title}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ta=function(){var e=function(){function e(t,i,n,r,o,s,a){Oo(this,e),this.pizzagnaService=t,this.timeframeService=i,this.tfSerialization=n,this.history=r,this.dataSource=o,this.eventBus=s,this.changeDetector=a,this.currentTimeframe=this.timeframeService.getTimeframeByPresetId("last7Days")}return Fo(e,[{key:"ngOnChanges",value:function(e){if(e.timeframe){var t=this.tfSerialization.convertFromSerializable(this.timeframe);(t=this.timeframeService.reconcileTimeframe(t)).selectedPresetId&&(t=this.timeframeService.getTimeframeByPresetId(t.selectedPresetId)),this.currentTimeframe=t,e.timeframe.isFirstChange()||this.eventBus.getStream(le.RG).next()}e.minDate&&(this.minDateAsMoment=wa()(this.minDate,wa().defaultFormat)),e.maxDate&&(this.maxDateAsMoment=wa()(this.maxDate,wa().defaultFormat))}},{key:"ngOnInit",value:function(){var e=this;this.history.restart(this.currentTimeframe),this.eventBus.getStream(le.re).subscribe(function(t){if(!t.payload)throw new Error("Unable to set timeframe. Event payload is undefined");e.onTimeframeChange(e.history.save(e.tfSerialization.convertFromSerializable(t.payload)))}),this.dataSource&&this.dataSource.registerComponent({timeframe:{componentInstance:{getFilters:function(){return{type:"timeframe",value:e.timeframeService.reconcileTimeframe(e.currentTimeframe)}}}}})}},{key:"onTimeframeChange",value:function(e){var t=this.timeframeService.reconcileTimeframe(e);t.selectedPresetId=t.selectedPresetId||"",this.timeframeService.isEqual(t,this.currentTimeframe)||this.pizzagnaService.setProperty({pizzagnaKey:ce.xW.Data,componentId:this.componentId,propertyPath:["timeframe"]},this.tfSerialization.convertToSerializable(t))}}]),e}();return e.lateLoadKey="TimeframeSelectionComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(zo.p),H.Y36(j.hYR),H.Y36(ka),H.Y36(j.vpR),H.Y36(ce.Fk,8),H.Y36(ce.nY),H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-timeframe-selection"]],hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.elementClass)},inputs:{componentId:"componentId",minDate:"minDate",maxDate:"maxDate",timeframe:"timeframe"},features:[H._Bn([j.vpR]),H.TTD],decls:6,vars:8,consts:[[3,"minDate","maxDate","timeFrame","historyIndex","timeFrameChange","undo","clear"],["icon","calendar",1,"pr-3"],["timeFrameSelection","",3,"presets"]],template:function(e,t){1&e&&(H.TgZ(0,"nui-time-frame-bar",0),H.NdJ("timeFrameChange",function(e){return t.onTimeframeChange(t.history.restart(e))})("undo",function(){return t.onTimeframeChange(t.history.undo())})("clear",function(){return t.onTimeframeChange(t.history.restart())}),H._UZ(1,"nui-icon",1),H._uU(2),H.ALo(3,"timeFrame"),H.TgZ(4,"nui-quick-picker",2),H._UZ(5,"nui-time-frame-picker"),H.qZA(),H.qZA()),2&e&&(H.Q6J("minDate",t.minDateAsMoment)("maxDate",t.maxDateAsMoment)("timeFrame",t.currentTimeframe)("historyIndex",t.history.index),H.xp6(2),H.hij(" ",H.lcZ(3,6,t.currentTimeframe)," "),H.xp6(2),H.Q6J("presets",t.timeframeService.currentPresets))},directives:[j.y0H,j.oJW,j.mtp,j.xlZ],pipes:[j.aEp],styles:["[_nghost-%COMP%]{border-top:1px solid;border-top-color:#d9d9d9;border-top-color:var(--nui-color-line-default,#d9d9d9);border-bottom:1px solid;border-bottom-color:#d9d9d9;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),e}(),Sa=function(){return(e=Sa||(Sa={})).DataPoints="dataPoints",e.Series="series",e.Values="values",Sa;var e}(),Ia=function(){return(e=Ia||(Ia={})).Time="time",e.TimeInterval="timeInterval",e.Linear="linear",Ia;var e}(),_a=function(){return(e=_a||(_a={})).Line="line",e.StackedArea="stackedArea",e.StackedPercentageArea="stackedPercentageArea",e.StackedBar="stackedBar",e.StatusBar="statusBar",_a;var e}(),Aa=function(){var e=function(){function e(t){Oo(this,e),this.unitConversionService=t,this.unitConversionPipe=new ws(this.unitConversionService)}return Fo(e,[{key:"getScale",value:function(e){var t;switch(e.type){case Ia.Time:t=new ee.FBd;break;case Ia.Linear:(t=new ee.f$s).formatters.tick=this.unitConversionPipe.transform;break;case Ia.TimeInterval:t=new ee.lTH((0,xa.duration)(1,"hour"))}return this.updateConfiguration(t,e),t}},{key:"updateConfiguration",value:function(e,t){var i;if(t.type===Ia.TimeInterval&&e instanceof ee.lTH){var n=null===(i=t.properties)||void 0===i?void 0:i.interval;if("number"==typeof n){if(n<=0)throw new Error("Interval value must be greater than zero.");e.interval((0,xa.duration)(n,"seconds"))}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(H.LFG(j.CrH))},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac}),e}(),za=function(){var e=function(){function e(t,i){var n=this;Oo(this,e),this.timeseriesScalesService=t,this.dataSource=i,this.widgetData={},this.configuration={},this.scales={},this.destroy$=new jo.xQ,this.buildChart$=new jo.xQ,this.resetChart=!1,this.chartBuilt=!1,this.buildChart$.pipe((0,Wo.R)(this.destroy$)).subscribe(function(){n.chartBuilt=!0})}return Fo(e,[{key:"seriesInteractive",get:function(){var e,t,i,n;return"series"===(null===(e=this.configuration)||void 0===e?void 0:e.interaction)||(null===(n=null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.getFeatureConfig(ce.ni.Interactivity))||void 0===n?void 0:n.enabled)||!1}},{key:"ngOnChanges",value:function(e){var t,i,n,r,o,s,a=!1,l=!1;if(e.configuration){var c=e.configuration.currentValue,u=e.configuration.previousValue;if((null==c?void 0:c.preset)!==(null==u?void 0:u.preset)&&(l=!0),(null==c?void 0:c.scales)!==(null==u?void 0:u.scales))for(var d=0,p=Object.keys(null==c?void 0:c.scales);d<p.length;d++){var h=p[d],f=null===(t=null==c?void 0:c.scales)||void 0===t?void 0:t[h],g=null===(i=null==u?void 0:u.scales)||void 0===i?void 0:i[h];(null==f?void 0:f.type)===(null==g?void 0:g.type)&&this.scales[h]?(null==f?void 0:f.properties)!==(null==g?void 0:g.properties)&&(this.timeseriesScalesService.updateConfiguration(this.scales[h],f),a=!0):(this.scales[h]=this.timeseriesScalesService.getScale(f),a=!0)}}(l||!this.chartBuilt)&&this.buildChart(),e.widgetData&&!e.widgetData.isFirstChange()&&(0===(null===(r=null===(n=this.widgetData)||void 0===n?void 0:n.series)||void 0===r?void 0:r.length)&&(this.resetChart=!0),this.widgetData&&this.widgetData.series&&(this.resetChart&&(null===(s=null===(o=this.widgetData)||void 0===o?void 0:o.series)||void 0===s?void 0:s.length)>0&&(this.resetChart=!1,this.buildChart()),a=!0)),a&&this.updateChartData()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete(),this.buildChart$.complete()}}]),e}();return e.\u0275fac=function(e){H.$Z()},e.\u0275dir=H.lG2({type:e,inputs:{widgetData:"widgetData",configuration:"configuration"},features:[H.TTD]}),e}();function Za(e,t){1&e&&H._UZ(0,"nui-icon",12),2&e&&H.Q6J("icon",t.$implicit)}function Oa(e,t){if(1&e&&(H.TgZ(0,"div",6),H.TgZ(1,"nui-legend",7),H.TgZ(2,"nui-legend-series",8),H.TgZ(3,"div",9),H._UZ(4,"div",10),H.YNc(5,Za,1,1,"nui-icon",11),H.qZA(),H.qZA(),H.qZA(),H.qZA()),2&e){var i=t.$implicit,n=H.oxw(3);H.xp6(1),H.Q6J("active",n.chartAssist.isLegendActive),H.xp6(1),H.Q6J("descriptionPrimary",i.legendDescriptionPrimary)("descriptionSecondary",i.legendDescriptionSecondary),H.xp6(2),H.Udp("background-color",n.getDataPointData(i,"color")),H.xp6(1),H.Q6J("ngIf",n.getDataPointData(i,"icon"))}}function Pa(e,t){if(1&e&&(H.TgZ(0,"div",3),H._UZ(1,"nui-chart",4),H.YNc(2,Oa,6,6,"div",5),H.qZA()),2&e){var i=t.$implicit,n=H.oxw(2);H.xp6(1),H.Q6J("chart",i.chart)("nuiChartCollectionId",n.collectionId),H.xp6(1),H.Q6J("ngIf",(null==i.chartSeriesSet?null:i.chartSeriesSet.length)>0&&i.chartSeriesSet[0])}}function Fa(e,t){if(1&e&&(H.TgZ(0,"div",1),H.YNc(1,Pa,3,3,"div",2),H.qZA()),2&e){var i=H.oxw();H.xp6(1),H.Q6J("ngForOf",i.chartAssist.sparks)("ngForTrackBy",i.chartAssist.trackByFn)}}var Da=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o,s){var a;return Oo(this,i),(a=t.call(this,r,n)).iconService=e,a.timeseriesScalesService=r,a.changeDetector=o,a.eventBus=s,a.collectionId=(0,j.VjN)("timeseries-status-charts"),a.chartUpdate$=new jo.xQ,a}return Fo(i,[{key:"ngOnInit",value:function(){}},{key:"getDataPointData",value:function(e,t){var i,n=null===(i=this.chartAssist.highlightedDataPoints[e.id])||void 0===i?void 0:i.data;return n?n[t]:e.data.length>0?e.data[e.data.length-1][t]:void 0}},{key:"buildChart",value:function(){var e=this;this.buildChart$.next(),this.chartAssist=new ee.ruA,this.accessors=(0,ee.s_I)(this.chartAssist.palette.standardColors),this.accessors.data.color=function(e,t,i,n){return void 0===e.color?"var(--nui-color-semantic-unknown)":e.color},this.accessors.data.thickness=function(e){return void 0===e.thick||e.thick?ee.Z7w.THICK:ee.Z7w.THIN},this.accessors.data.marker=function(t){return t.icon?e.iconService.getIconResized(e.iconService.getIconData(t.icon).code,8):void 0},this.renderer=new ee.Z7w({highlightStrategy:new ee.Pkp("x"),pointerEvents:!1}),this.scales.y=new ee.jS7,this.scales.y.fixDomain(ee.s1E.STATUS_DOMAIN)}},{key:"updateChartData",value:function(){var e,t,i=this;this.chartUpdate$.next();var n=this.widgetData.series.map(function(e){return Object.assign(Object.assign({},e),{data:i.transformData(e.data,i.scales.x instanceof ee.lTH),accessors:i.accessors,renderer:i.renderer,scales:i.scales})});this.chartAssist.update(n),this.configuration.enableZoom&&(this.chartAssist.sparks.forEach(function(e){var t,i;(null===(t=null==e?void 0:e.chart)||void 0===t?void 0:t.hasPlugin(ee.Rbc))||null===(i=null==e?void 0:e.chart)||void 0===i||i.addPlugin(new ee.Rbc({enableExternalEvents:!0}))}),null===(e=this.chartAssist.sparks[0].chart)||void 0===e||e.getEventBus().getStream(ee.bdF).pipe((0,Wo.R)((0,Ks.T)(this.chartUpdate$,null===(t=this.chartAssist.sparks[0].chart)||void 0===t?void 0:t.eventBus.getStream(ee.wu_),this.buildChart$))).subscribe(function(e){var t=e.data,n=t[Object.keys(t)[0]];i.eventBus.getStream(le.re).next({payload:{startDatetime:n[0],endDatetime:n[1],selectedPresetId:null}})}))}},{key:"transformData",value:function(e,t){var i=[];return e.forEach(function(n,r){(t||e.length-1!==r)&&i.push({start:n.x,end:t?n.x:e[r+1].x,status:n.y,color:n.color,thick:n.thick,icon:n.icon})}),i}}]),i}(za);return e.lateLoadKey="StatusChartComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(j.C6t),H.Y36(ce.Fk,8),H.Y36(Aa),H.Y36(H.sBO),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-status-bar-chart"]],features:[H.qOj],decls:1,vars:1,consts:[["class","p-3 status-bar-chart",4,"ngIf"],[1,"p-3","status-bar-chart"],["class","d-flex",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex"],[1,"d-flex","flex-grow-1",3,"chart","nuiChartCollectionId"],["class","d-flex flex-column pl-2",4,"ngIf"],[1,"d-flex","flex-column","pl-2"],[1,"status-bar-chart__legend",3,"active"],[3,"descriptionPrimary","descriptionSecondary"],[1,"status-bar-chart__legend__tile","d-flex","justify-content-center","align-items-center"],[1,"w-100","h-100","status-bar-chart__legend__tile__background"],["class","status-bar-chart__legend__tile__icon",3,"icon",4,"ngIf"],[1,"status-bar-chart__legend__tile__icon",3,"icon"]],template:function(e,t){1&e&&H.YNc(0,Fa,2,2,"div",0),2&e&&H.Q6J("ngIf",t.chartAssist)},directives:[V.O5,V.sg,ee.xH4,ee.VMb,ee.FVX,ee.kJo,j.oJW],styles:[".status-bar-chart__legend__tile[_ngcontent-%COMP%]{width:60px;position:relative}.status-bar-chart__legend__tile__background[_ngcontent-%COMP%]{position:absolute;opacity:.4}.status-bar-chart__legend__tile__icon[_ngcontent-%COMP%]{position:absolute}"]}),e}(),$a=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,r,n)).eventBus=e,s.timeseriesScalesService=r,s.changeDetector=o,s.valueAccessorKey="y",s}return Fo(i,[{key:"mapSeriesSet",value:function(e,t){var i=this;return e.map(function(e){return Object.assign(Object.assign({},e),{scales:t,renderer:i.renderer,accessors:i.accessors})})}},{key:"hasLegend",value:function(){return this.configuration.legendPlacement&&this.configuration.legendPlacement!==ne.w.None}},{key:"legendShouldBeAlignedRight",value:function(){return this.configuration.legendPlacement===ne.w.Right}},{key:"onPrimaryDescClick",value:function(e,t){!this.seriesInteractive||(e.stopPropagation(),this.eventBus.getStream(le.b1).next({payload:{data:t,interactionType:Sa.Series}}))}},{key:"updateChartData",value:function(){this.chartAssist.update(this.mapSeriesSet(this.widgetData.series,this.scales))}},{key:"buildChart",value:function(){var e,t=this;this.buildChart$.next();var i=this.configuration.chartColors&&(null===(e=this.configuration.chartColors)||void 0===e?void 0:e.length)>0?new ee.jpW(this.configuration.chartColors):(0,ee.GUR)(),n=new ee.syg(i);this.accessors=this.createAccessors(n.standardColors),this.chartAssist=this.createChartAssist(n);var r=this.chartAssist.chart;this.configuration.enableZoom&&r.addPlugin(new ee.Rbc),r.getEventBus().getStream(ee.bdF).pipe((0,Wo.R)((0,Ks.T)(this.destroy$,this.buildChart$))).subscribe(function(e){var i=e.data,n=i[Object.keys(i)[0]];t.eventBus.getStream(le.re).next({payload:{startDatetime:n[0],endDatetime:n[1],selectedPresetId:null}})}),this.setupInteraction()}},{key:"setupInteraction",value:function(){var e=this;this.chartAssist.chart.getEventBus().getStream(ee.C1c).pipe((0,Wo.R)((0,Ks.T)(this.destroy$,this.buildChart$))).subscribe(function(t){var i=t.data;i.interactionType===ee.s_5.Click&&e.eventBus.getStream(le.b1).next({payload:{data:i.dataPoints,interactionType:Sa.DataPoints}})}),this.chartAssist.chart.getEventBus().getStream(ee.hkV).pipe((0,Wo.R)((0,Ks.T)(this.destroy$,this.buildChart$))).subscribe(function(t){var i=t.data;i.interactionType===ee.s_5.Click&&e.eventBus.getStream(le.b1).next({payload:{data:i.values,interactionType:Sa.Values}})})}}]),i}(za);return e.\u0275fac=function(t){return new(t||e)(H.LFG(ce.nY),H.LFG(ce.Fk,8),H.LFG(Aa),H.LFG(H.sBO))},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac}),e}(),Ma=function(e){return{"nui-text-link-small link":e}};function Ra(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",16),H.NdJ("click",function(e){H.CHM(i);var t=H.oxw().$implicit;return H.oxw(2).onPrimaryDescClick(e,t)}),H._uU(1),H.qZA()}if(2&e){var n=H.oxw().$implicit,r=H.oxw(2);H.Q6J("ngClass",H.VKq(2,Ma,r.seriesInteractive)),H.xp6(1),H.hij(" ",n.legendDescriptionPrimary," ")}}function Ja(e,t){if(1&e&&(H.TgZ(0,"a",17),H.NdJ("click",function(e){return e.stopPropagation()}),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("href",i.link,H.LSH)("title",i.legendDescriptionPrimary),H.xp6(1),H.hij(" ",i.legendDescriptionPrimary," ")}}function La(e,t){if(1&e&&(H.TgZ(0,"div",18),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("title",i.legendDescriptionSecondary),H.xp6(1),H.hij(" ",i.legendDescriptionSecondary," ")}}function Ea(e,t){if(1&e&&(H.TgZ(0,"a",19),H.NdJ("click",function(e){return e.stopPropagation()}),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("href",i.secondaryLink,H.LSH)("title",i.legendDescriptionSecondary),H.xp6(1),H.hij(" ",i.legendDescriptionSecondary," ")}}function qa(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"nui-legend-series",8),H.NdJ("isSelectedChange",function(e){var t=H.CHM(i).$implicit;return H.oxw(2).chartAssist.toggleSeries(t.id,e)})("mouseenter",function(){var e=H.CHM(i).$implicit;return H.oxw(2).chartAssist.emphasizeSeries(e.id)})("mouseleave",function(){return H.CHM(i),H.oxw(2).chartAssist.resetVisibleSeries()}),H.TgZ(1,"nui-rich-legend-tile",9),H._UZ(2,"nui-chart-marker",10),H.qZA(),H.TgZ(3,"div",11),H.YNc(4,Ra,2,4,"div",12),H.YNc(5,Ja,2,3,"a",13),H.YNc(6,La,2,2,"div",14),H.YNc(7,Ea,2,3,"a",15),H.qZA(),H.qZA()}if(2&e){var n=t.$implicit,r=H.oxw(2);H.Q6J("ngClass","xy-chart__legend-series--state-"+(null==r.chartAssist.renderStatesIndex[n.id]?null:r.chartAssist.renderStatesIndex[n.id].state))("isSelected",!r.chartAssist.isSeriesHidden(n.id))("seriesRenderState",null==r.chartAssist.renderStatesIndex[n.id]?null:r.chartAssist.renderStatesIndex[n.id].state),H.xp6(1),H.Q6J("value",r.chartAssist.getHighlightedValue(n,"y","tick",r.valueAccessorKey))("backgroundColor",r.chartAssist.palette.standardColors.get(n.id))("color",r.chartAssist.palette.textColors.get(n.id)),H.xp6(1),H.Q6J("marker",r.chartAssist.markers.get(n.id))("color",r.chartAssist.palette.standardColors.get(n.id)),H.xp6(2),H.Q6J("ngIf",!n.link),H.xp6(1),H.Q6J("ngIf",n.link),H.xp6(1),H.Q6J("ngIf",!n.secondaryLink),H.xp6(1),H.Q6J("ngIf",n.secondaryLink)}}var Ba=function(e){return[e]};function Na(e,t){if(1&e&&(H.TgZ(0,"div",5),H.TgZ(1,"nui-legend",6),H.YNc(2,qa,8,12,"nui-legend-series",7),H.qZA(),H.qZA()),2&e){var i=H.oxw();H.Q6J("ngClass",H.VKq(6,Ba,i.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),H.xp6(1),H.Q6J("active",i.chartAssist.isLegendActive)("interactive",!0)("orientation",i.legendShouldBeAlignedRight()?"vertical":"horizontal"),H.xp6(1),H.Q6J("ngForOf",i.chartAssist.legendSeriesSet)("ngForTrackBy",i.chartAssist.seriesTrackByFn)}}var Qa=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,e,n,r,o)).renderer=new ee.Med,s}return Fo(i,[{key:"createAccessors",value:function(e){return new ee.qxh(e)}},{key:"createChartAssist",value:function(e){var t=new ee.c_e;t.axis.left.fit=!0;var i=new ee.kL2(new ee.Be5(t));return new ee.doR(i,null,e)}}]),i}($a);return e.lateLoadKey="LineChartComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(ce.nY),H.Y36(ce.Fk,8),H.Y36(Aa),H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-line-chart"]],features:[H.qOj],decls:7,vars:3,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(e,t){1&e&&(H.TgZ(0,"div",0),H.TgZ(1,"div",1),H.TgZ(2,"strong"),H._uU(3),H.qZA(),H.qZA(),H.TgZ(4,"div",2),H._UZ(5,"nui-chart",3),H.qZA(),H.YNc(6,Na,3,8,"div",4),H.qZA()),2&e&&(H.xp6(3),H.Oqu(t.configuration.leftAxisLabel),H.xp6(2),H.Q6J("chart",t.chartAssist.chart),H.xp6(1),H.Q6J("ngIf",t.hasLegend()))},directives:[ee.xH4,V.O5,V.mk,ee.FVX,V.sg,ee.kJo,ee.wHi,ee.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:#111;color:var(--nui-color-text-default,#111)}"]}),e}(),Ya=function(e){return{"nui-text-link-small link":e}};function Va(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",16),H.NdJ("click",function(e){H.CHM(i);var t=H.oxw().$implicit;return H.oxw(2).onPrimaryDescClick(e,t)}),H._uU(1),H.qZA()}if(2&e){var n=H.oxw().$implicit,r=H.oxw(2);H.Q6J("ngClass",H.VKq(2,Ya,r.seriesInteractive)),H.xp6(1),H.hij(" ",n.legendDescriptionPrimary," ")}}function ja(e,t){if(1&e&&(H.TgZ(0,"a",17),H.NdJ("click",function(e){return e.stopPropagation()}),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("href",i.link,H.LSH)("title",i.legendDescriptionPrimary),H.xp6(1),H.hij(" ",i.legendDescriptionPrimary," ")}}function Wa(e,t){if(1&e&&(H.TgZ(0,"div",18),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("title",i.legendDescriptionSecondary),H.xp6(1),H.hij(" ",i.legendDescriptionSecondary," ")}}function Ha(e,t){if(1&e&&(H.TgZ(0,"a",19),H.NdJ("click",function(e){return e.stopPropagation()}),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("href",i.secondaryLink,H.LSH)("title",i.legendDescriptionSecondary),H.xp6(1),H.hij(" ",i.legendDescriptionSecondary," ")}}function Ua(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"nui-legend-series",8),H.NdJ("isSelectedChange",function(e){var t=H.CHM(i).$implicit;return H.oxw(2).chartAssist.toggleSeries(t.id,e)})("mouseenter",function(){var e=H.CHM(i).$implicit;return H.oxw(2).chartAssist.emphasizeSeries(e.id)})("mouseleave",function(){return H.CHM(i),H.oxw(2).chartAssist.resetVisibleSeries()}),H.TgZ(1,"nui-rich-legend-tile",9),H._UZ(2,"nui-chart-marker",10),H.qZA(),H.TgZ(3,"div",11),H.YNc(4,Va,2,4,"div",12),H.YNc(5,ja,2,3,"a",13),H.YNc(6,Wa,2,2,"div",14),H.YNc(7,Ha,2,3,"a",15),H.qZA(),H.qZA()}if(2&e){var n=t.$implicit,r=H.oxw(2);H.Q6J("ngClass","xy-chart__legend-series--state-"+(null==r.chartAssist.renderStatesIndex[n.id]?null:r.chartAssist.renderStatesIndex[n.id].state))("isSelected",!r.chartAssist.isSeriesHidden(n.id))("seriesRenderState",null==r.chartAssist.renderStatesIndex[n.id]?null:r.chartAssist.renderStatesIndex[n.id].state),H.xp6(1),H.Q6J("value",r.chartAssist.getHighlightedValue(n,"y","tick",r.valueAccessorKey))("backgroundColor",r.chartAssist.palette.standardColors.get(n.id))("color",r.chartAssist.palette.textColors.get(n.id)),H.xp6(1),H.Q6J("marker",r.chartAssist.markers.get(n.id))("color",r.chartAssist.palette.standardColors.get(n.id)),H.xp6(2),H.Q6J("ngIf",!n.link),H.xp6(1),H.Q6J("ngIf",n.link),H.xp6(1),H.Q6J("ngIf",!n.secondaryLink),H.xp6(1),H.Q6J("ngIf",n.secondaryLink)}}var Ga=function(e){return[e]};function Ka(e,t){if(1&e&&(H.TgZ(0,"div",5),H.TgZ(1,"nui-legend",6),H.YNc(2,Ua,8,12,"nui-legend-series",7),H.qZA(),H.qZA()),2&e){var i=H.oxw();H.Q6J("ngClass",H.VKq(6,Ga,i.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),H.xp6(1),H.Q6J("active",i.chartAssist.isLegendActive)("interactive",!0)("orientation",i.legendShouldBeAlignedRight()?"vertical":"horizontal"),H.xp6(1),H.Q6J("ngForOf",i.chartAssist.legendSeriesSet)("ngForTrackBy",i.chartAssist.seriesTrackByFn)}}var Xa=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,e,n,r,o)).renderer=new ee.QtU,s.valueAccessorKey="y1",s}return Fo(i,[{key:"createAccessors",value:function(e){return(0,ee.mIe)(e)}},{key:"createChartAssist",value:function(e){var t=(0,ee.nuZ)();t.config().axis.left.fit=!0;var i=new ee.kL2(t);return new ee.doR(i,ee.aCj,e)}}]),i}($a);return e.lateLoadKey="StackedAreaChartComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(ce.nY),H.Y36(ce.Fk,8),H.Y36(Aa),H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-stacked-area-chart"]],features:[H.qOj],decls:7,vars:3,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(e,t){1&e&&(H.TgZ(0,"div",0),H.TgZ(1,"div",1),H.TgZ(2,"strong"),H._uU(3),H.qZA(),H.qZA(),H.TgZ(4,"div",2),H._UZ(5,"nui-chart",3),H.qZA(),H.YNc(6,Ka,3,8,"div",4),H.qZA()),2&e&&(H.xp6(3),H.Oqu(t.configuration.leftAxisLabel),H.xp6(2),H.Q6J("chart",t.chartAssist.chart),H.xp6(1),H.Q6J("ngIf",t.hasLegend()))},directives:[ee.xH4,V.O5,V.mk,ee.FVX,V.sg,ee.kJo,ee.wHi,ee.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:#111;color:var(--nui-color-text-default,#111)}"]}),e}(),el=function(e){return{"nui-text-link-small link":e}};function tl(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",16),H.NdJ("click",function(e){H.CHM(i);var t=H.oxw().$implicit;return H.oxw(2).onPrimaryDescClick(e,t)}),H._uU(1),H.qZA()}if(2&e){var n=H.oxw().$implicit,r=H.oxw(2);H.Q6J("ngClass",H.VKq(2,el,r.seriesInteractive)),H.xp6(1),H.hij(" ",n.legendDescriptionPrimary," ")}}function il(e,t){if(1&e&&(H.TgZ(0,"a",17),H.NdJ("click",function(e){return e.stopPropagation()}),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("href",i.link,H.LSH)("title",i.legendDescriptionPrimary),H.xp6(1),H.hij(" ",i.legendDescriptionPrimary," ")}}function nl(e,t){if(1&e&&(H.TgZ(0,"div",18),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("title",i.legendDescriptionSecondary),H.xp6(1),H.hij(" ",i.legendDescriptionSecondary," ")}}function rl(e,t){if(1&e&&(H.TgZ(0,"a",19),H.NdJ("click",function(e){return e.stopPropagation()}),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("href",i.secondaryLink,H.LSH)("title",i.legendDescriptionSecondary),H.xp6(1),H.hij(" ",i.legendDescriptionSecondary," ")}}function ol(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"nui-legend-series",8),H.NdJ("isSelectedChange",function(e){var t=H.CHM(i).$implicit;return H.oxw(2).chartAssist.toggleSeries(t.id,e)})("mouseenter",function(){var e=H.CHM(i).$implicit;return H.oxw(2).chartAssist.emphasizeSeries(e.id)})("mouseleave",function(){return H.CHM(i),H.oxw(2).chartAssist.resetVisibleSeries()}),H.TgZ(1,"nui-rich-legend-tile",9),H._UZ(2,"nui-chart-marker",10),H.qZA(),H.TgZ(3,"div",11),H.YNc(4,tl,2,4,"div",12),H.YNc(5,il,2,3,"a",13),H.YNc(6,nl,2,2,"div",14),H.YNc(7,rl,2,3,"a",15),H.qZA(),H.qZA()}if(2&e){var n=t.$implicit,r=H.oxw(2);H.Q6J("ngClass","xy-chart__legend-series--state-"+(null==r.chartAssist.renderStatesIndex[n.id]?null:r.chartAssist.renderStatesIndex[n.id].state))("isSelected",!r.chartAssist.isSeriesHidden(n.id))("seriesRenderState",null==r.chartAssist.renderStatesIndex[n.id]?null:r.chartAssist.renderStatesIndex[n.id].state),H.xp6(1),H.Q6J("value",r.chartAssist.getHighlightedValue(n,"y","tick",r.valueAccessorKey))("backgroundColor",r.chartAssist.palette.standardColors.get(n.id))("color",r.chartAssist.palette.textColors.get(n.id)),H.xp6(1),H.Q6J("marker",r.chartAssist.markers.get(n.id))("color",r.chartAssist.palette.standardColors.get(n.id)),H.xp6(2),H.Q6J("ngIf",!n.link),H.xp6(1),H.Q6J("ngIf",n.link),H.xp6(1),H.Q6J("ngIf",!n.secondaryLink),H.xp6(1),H.Q6J("ngIf",n.secondaryLink)}}var sl=function(e){return[e]};function al(e,t){if(1&e&&(H.TgZ(0,"div",5),H.TgZ(1,"nui-legend",6),H.YNc(2,ol,8,12,"nui-legend-series",7),H.qZA(),H.qZA()),2&e){var i=H.oxw();H.Q6J("ngClass",H.VKq(6,sl,i.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),H.xp6(1),H.Q6J("active",i.chartAssist.isLegendActive)("interactive",!0)("orientation",i.legendShouldBeAlignedRight()?"vertical":"horizontal"),H.xp6(1),H.Q6J("ngForOf",i.chartAssist.legendSeriesSet)("ngForTrackBy",i.chartAssist.seriesTrackByFn)}}var ll=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,e,n,r,o)).valueAccessorKey="value",s.renderer=new ee.Z7w({highlightStrategy:new ee.Pkp("x"),pointerEvents:!1}),s}return Fo(i,[{key:"mapSeriesSet",value:function(e,t){return this.accessors.data.thickness=t.x instanceof ee.lTH?void 0:function(){return 5},bo(Io(i.prototype),"mapSeriesSet",this).call(this,e,t)}},{key:"createAccessors",value:function(e){var t=(0,ee.Q6e)({horizontal:!1},e);return t.data.category=function(e){return e.x},t.data.value=function(e){return e.y},t}},{key:"createChartAssist",value:function(e){var t=new ee.kL2((0,ee.skL)());return t.addPlugin(new ee.$fK),new ee.doR(t,ee.knu,e)}}]),i}($a);return e.lateLoadKey="StackedBarChartComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(ce.nY),H.Y36(ce.Fk,8),H.Y36(Aa),H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-stacked-bar-chart"]],features:[H.qOj],decls:7,vars:3,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(e,t){1&e&&(H.TgZ(0,"div",0),H.TgZ(1,"div",1),H.TgZ(2,"strong"),H._uU(3),H.qZA(),H.qZA(),H.TgZ(4,"div",2),H._UZ(5,"nui-chart",3),H.qZA(),H.YNc(6,al,3,8,"div",4),H.qZA()),2&e&&(H.xp6(3),H.Oqu(t.configuration.leftAxisLabel),H.xp6(2),H.Q6J("chart",t.chartAssist.chart),H.xp6(1),H.Q6J("ngIf",t.hasLegend()))},directives:[ee.xH4,V.O5,V.mk,ee.FVX,V.sg,ee.kJo,ee.wHi,ee.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:#111;color:var(--nui-color-text-default,#111)}"]}),e}(),cl=function(e){return{"nui-text-link-small link":e}};function ul(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",16),H.NdJ("click",function(e){H.CHM(i);var t=H.oxw().$implicit;return H.oxw(2).onPrimaryDescClick(e,t)}),H._uU(1),H.qZA()}if(2&e){var n=H.oxw().$implicit,r=H.oxw(2);H.Q6J("ngClass",H.VKq(2,cl,r.seriesInteractive)),H.xp6(1),H.hij(" ",n.legendDescriptionPrimary," ")}}function dl(e,t){if(1&e&&(H.TgZ(0,"a",17),H.NdJ("click",function(e){return e.stopPropagation()}),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("href",i.link,H.LSH)("title",i.legendDescriptionPrimary),H.xp6(1),H.hij(" ",i.legendDescriptionPrimary," ")}}function pl(e,t){if(1&e&&(H.TgZ(0,"div",18),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("title",i.legendDescriptionSecondary),H.xp6(1),H.hij(" ",i.legendDescriptionSecondary," ")}}function hl(e,t){if(1&e&&(H.TgZ(0,"a",19),H.NdJ("click",function(e){return e.stopPropagation()}),H._uU(1),H.qZA()),2&e){var i=H.oxw().$implicit;H.Q6J("href",i.secondaryLink,H.LSH)("title",i.legendDescriptionSecondary),H.xp6(1),H.hij(" ",i.legendDescriptionSecondary," ")}}function fl(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"nui-legend-series",8),H.NdJ("isSelectedChange",function(e){var t=H.CHM(i).$implicit;return H.oxw(2).chartAssist.toggleSeries(t.id,e)})("mouseenter",function(){var e=H.CHM(i).$implicit;return H.oxw(2).chartAssist.emphasizeSeries(e.id)})("mouseleave",function(){return H.CHM(i),H.oxw(2).chartAssist.resetVisibleSeries()}),H.TgZ(1,"nui-rich-legend-tile",9),H._UZ(2,"nui-chart-marker",10),H.qZA(),H.TgZ(3,"div",11),H.YNc(4,ul,2,4,"div",12),H.YNc(5,dl,2,3,"a",13),H.YNc(6,pl,2,2,"div",14),H.YNc(7,hl,2,3,"a",15),H.qZA(),H.qZA()}if(2&e){var n=t.$implicit,r=H.oxw(2);H.Q6J("ngClass","xy-chart__legend-series--state-"+(null==r.chartAssist.renderStatesIndex[n.id]?null:r.chartAssist.renderStatesIndex[n.id].state))("isSelected",!r.chartAssist.isSeriesHidden(n.id))("seriesRenderState",null==r.chartAssist.renderStatesIndex[n.id]?null:r.chartAssist.renderStatesIndex[n.id].state),H.xp6(1),H.Q6J("value",r.chartAssist.getHighlightedValue(n,"y","tick",r.valueAccessorKey))("backgroundColor",r.chartAssist.palette.standardColors.get(n.id))("color",r.chartAssist.palette.textColors.get(n.id)),H.xp6(1),H.Q6J("marker",r.chartAssist.markers.get(n.id))("color",r.chartAssist.palette.standardColors.get(n.id)),H.xp6(2),H.Q6J("ngIf",!n.link),H.xp6(1),H.Q6J("ngIf",n.link),H.xp6(1),H.Q6J("ngIf",!n.secondaryLink),H.xp6(1),H.Q6J("ngIf",n.secondaryLink)}}var gl=function(e){return[e]};function ml(e,t){if(1&e&&(H.TgZ(0,"div",5),H.TgZ(1,"nui-legend",6),H.YNc(2,fl,8,12,"nui-legend-series",7),H.qZA(),H.qZA()),2&e){var i=H.oxw();H.Q6J("ngClass",H.VKq(6,gl,i.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),H.xp6(1),H.Q6J("active",i.chartAssist.isLegendActive)("interactive",!0)("orientation",i.legendShouldBeAlignedRight()?"vertical":"horizontal"),H.xp6(1),H.Q6J("ngForOf",i.chartAssist.legendSeriesSet)("ngForTrackBy",i.chartAssist.seriesTrackByFn)}}var vl=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,e,n,r,o)).renderer=new ee.QtU,s.valueAccessorKey="y1",s}return Fo(i,[{key:"createAccessors",value:function(e){return(0,ee.mIe)(e)}},{key:"createChartAssist",value:function(e){var t=(0,ee.nuZ)();t.config().axis.left.fit=!0;var i=new ee.kL2(t);return new ee.doR(i,ee.HAP,e)}}]),i}($a);return e.lateLoadKey="StackedPercentageAreaChartComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(ce.nY),H.Y36(ce.Fk,8),H.Y36(Aa),H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-stacked-percentage-area-chart"]],features:[H.qOj],decls:7,vars:3,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(e,t){1&e&&(H.TgZ(0,"div",0),H.TgZ(1,"div",1),H.TgZ(2,"strong"),H._uU(3),H.qZA(),H.qZA(),H.TgZ(4,"div",2),H._UZ(5,"nui-chart",3),H.qZA(),H.YNc(6,ml,3,8,"div",4),H.qZA()),2&e&&(H.xp6(3),H.Oqu(t.configuration.leftAxisLabel),H.xp6(2),H.Q6J("chart",t.chartAssist.chart),H.xp6(1),H.Q6J("ngIf",t.hasLegend()))},directives:[ee.xH4,V.O5,V.mk,ee.FVX,V.sg,ee.kJo,ee.wHi,ee.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:#0079aa;color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:#111;color:var(--nui-color-text-default,#111)}"]}),e}(),yl=function(){var e=Fo(function e(){var t;Oo(this,e),this.presets=(yo(t={},_a.Line,{componentType:Qa.lateLoadKey}),yo(t,_a.StackedArea,{componentType:Xa.lateLoadKey}),yo(t,_a.StackedPercentageArea,{componentType:vl.lateLoadKey}),yo(t,_a.StackedBar,{componentType:ll.lateLoadKey}),yo(t,_a.StatusBar,{componentType:Da.lateLoadKey}),t)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function bl(e,t){}var Cl=function(e,t){return{widgetData:e,configuration:t}};function xl(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",2),H.ynx(1,3,4),H.YNc(3,bl,0,0,"ng-template",5),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(2).attached(e)}),H.BQk(),H.qZA()}if(2&e){var n=H.MAs(2),r=H.oxw();H.xp6(1),H.Q6J("componentType",r.chartPreset.componentType)("properties",H.WLB(3,Cl,r.widgetData,r.configuration)),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}function wl(e,t){1&e&&(H.TgZ(0,"div"),H._UZ(1,"nui-image",6),H.qZA())}var kl=function(){var e=function(){function e(t,i){Oo(this,e),this.timeseriesChartPresetService=t,this.changeDetector=i,this.widgetData={},this.configuration={},this.elementClass=""}return Fo(e,[{key:"ngOnChanges",value:function(e){var t,i;if(e.configuration){var n=e.configuration.currentValue,r=e.configuration.previousValue;(null==n?void 0:n.preset)!==(null==r?void 0:r.preset)&&(this.chartPreset=this.timeseriesChartPresetService.presets[null!==(i=null===(t=this.configuration)||void 0===t?void 0:t.preset)&&void 0!==i?i:_a.Line])}}},{key:"shouldShowChart",value:function(){var e,t;return(null===(t=null===(e=this.widgetData)||void 0===e?void 0:e.series)||void 0===t?void 0:t.length)>0}}]),e}();return e.lateLoadKey="TimeseriesWidgetComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(yl),H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-timeseries-widget"]],hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",elementClass:"elementClass"},features:[H.TTD],decls:2,vars:2,consts:[["class","h-100",4,"ngIf"],[4,"ngIf"],[1,"h-100"],["nuiComponentPortal","","componentId","timeseriesWidgetChart",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["image","no-data-to-show"]],template:function(e,t){1&e&&(H.YNc(0,xl,4,6,"div",0),H.YNc(1,wl,2,0,"div",1)),2&e&&(H.Q6J("ngIf",t.shouldShowChart()),H.xp6(1),H.Q6J("ngIf",!t.shouldShowChart()))},directives:[V.O5,pe.$,he.Pl,j.cuP],encapsulation:2}),e}();function Tl(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"nui-search",1),H.NdJ("inputChange",function(e){return H.CHM(i),H.oxw().onSearchInputChanged(e)})("cancel",function(e){return H.CHM(i),H.oxw().onSearch(e)})("search",function(e){return H.CHM(i),H.oxw().onSearch(e)}),H.qZA()}if(2&e){var n=H.oxw();H.Q6J("value",n.searchValue)}}var Sl=function(){var e=function(){function e(t,i){Oo(this,e),this.dataSource=t,this.eventBus=i,this.enabled=!1,this.searchTerm$=new jo.xQ,this.onDestroy$=new jo.xQ}return Fo(e,[{key:"ngOnInit",value:function(){var e,t,i,n;(null===(i=null===(t=null===(e=this.dataSource.features)||void 0===e?void 0:e.getSupportedFeatures())||void 0===t?void 0:t.search)||void 0===i?void 0:i.enabled)&&(this.enabled=!0),this.registerFilters(),this.handleSearchTermSubscription(null===(n=this.configuration)||void 0===n?void 0:n.searchOnKeyUp)}},{key:"ngOnChanges",value:function(e){e.configuration&&this.handleSearchTermSubscription(e.configuration.currentValue.searchOnKeyUp)}},{key:"onSearchInputChanged",value:function(e){var t,i;(null===(i=null===(t=this.configuration)||void 0===t?void 0:t.searchOnKeyUp)||void 0===i?void 0:i.enabled)&&(this.searchValue=e,this.searchTerm$.next(e))}},{key:"onSearch",value:function(e){this.searchValue=e,this.searchTerm$.next(e)}},{key:"ngOnDestroy",value:function(){this.eventBus.getStream(le.kV).next({payload:""}),this.onDestroy$.next(),this.onDestroy$.complete()}},{key:"registerFilters",value:function(){var e,t=this;null===(e=this.dataSource)||void 0===e||e.registerComponent({search:{componentInstance:{getFilters:function(){return{value:t.searchValue}}}}})}},{key:"handleSearchTermSubscription",value:function(t){var i,n=this;null===(i=this.searchTermSubscription)||void 0===i||i.unsubscribe(),this.searchTermSubscription=this.searchTerm$.pipe((0,Wo.R)(this.onDestroy$),(0,ra.b)((null==t?void 0:t.debounceTime)||e.defaultSearchDebounce)).subscribe(function(e){n.eventBus.getStream(le.RG).next(),n.eventBus.getStream(le.kV).next({payload:e})})}}]),e}();return e.lateLoadKey="WidgetSearchComponent",e.defaultSearchDebounce=500,e.\u0275fac=function(t){return new(t||e)(H.Y36(ce.Fk,8),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-widget-search"]],hostVars:4,hostBindings:function(e,t){2&e&&H.ekj("default",t.enabled)("invisible",!t.enabled)},inputs:{configuration:"configuration",searchValue:"searchValue"},features:[H.TTD],decls:1,vars:1,consts:[["class","unlimited-width",3,"value","inputChange","cancel","search",4,"ngIf"],[1,"unlimited-width",3,"value","inputChange","cancel","search"]],template:function(e,t){1&e&&H.YNc(0,Tl,1,1,"nui-search",0),2&e&&H.Q6J("ngIf",t.enabled)},directives:[V.O5,j.gSk],styles:[".default[_nghost-%COMP%]{padding:5px 10px}.invisible[_nghost-%COMP%]{height:0}"],changeDetection:0}),e}(),Il=function(){return(e=Il||(Il={})).ErrorUnknown="errorUnknown",e.ErrorForbidden="errorForbidden",e.ErrorNotFound="errorNotFound",Il;var e}();function _l(e,t){}function Al(e,t){}function zl(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",5),H.ynx(1,1,2),H.YNc(3,Al,0,0,"ng-template",3),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(2).attached(e)}),H.BQk(),H.qZA()}if(2&e){var n=H.MAs(2),r=H.oxw();H.xp6(1),H.Q6J("componentId",r.nodeConfigs[1].id)("componentType",r.nodeConfigs[1].componentType)("providers",r.nodeConfigs[1].providers)("properties",r.nodeConfigs[1].properties),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}var Zl=function(e,t){return{"d-none":e,"d-flex":t}},Ol=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r){var o;return Oo(this,i),(o=t.call(this,e,n,r)).elementClass="",o.defaultClasses="w-100",o}return Fo(i,[{key:"ngOnInit",value:function(){this.classNames="".concat(this.defaultClasses," ").concat(this.elementClass)}},{key:"ngOnDestroy",value:function(){bo(Io(i.prototype),"ngOnDestroy",this).call(this)}},{key:"getNodes",value:function(){return this.fallbackKey?[this.primaryContent,this.fallbackMap&&this.fallbackMap[this.fallbackKey]||Il.ErrorUnknown]:[this.primaryContent]}}]),i}(Po.I);return e.lateLoadKey="WidgetBodyContentComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(zo.p),H.Y36(j.mQy))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-widget-body-content"]],hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.classNames)},inputs:{componentId:"componentId",primaryContent:"primaryContent",fallbackKey:"fallbackKey",fallbackMap:"fallbackMap",elementClass:"elementClass"},features:[H.qOj],decls:5,vars:10,consts:[[1,"h-100",3,"ngClass"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["class","d-flex h-100",4,"ngIf"],[1,"d-flex","h-100"]],template:function(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",0),H.ynx(1,1,2),H.YNc(3,_l,0,0,"ng-template",3),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(2).attached(e)}),H.BQk(),H.qZA(),H.YNc(4,zl,4,5,"div",4)}if(2&e){var n=H.MAs(2);H.Q6J("ngClass",H.WLB(7,Zl,t.fallbackKey,!t.fallbackKey)),H.xp6(1),H.Q6J("componentId",t.nodeConfigs[0].id)("componentType",t.nodeConfigs[0].componentType)("providers",t.nodeConfigs[0].providers)("properties",t.nodeConfigs[0].properties),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal),H.xp6(1),H.Q6J("ngIf",t.fallbackKey)}},directives:[V.mk,pe.$,he.Pl,V.O5],encapsulation:2}),e}();function Pl(e,t){1&e&&H._UZ(0,"nui-preview-overlay")}function Fl(e,t){}var Dl=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,n,r,o)).eventBus=e,s.editMode=!1,s.elementClass="",s.defaultClasses="d-flex h-100 w-100",s.getNodes=function(){return[s.content]},s}return Fo(i,[{key:"ngOnInit",value:function(){var e=this;this.classNames="".concat(this.defaultClasses," ").concat(this.elementClass),this.eventBus.getStream(le.N9).pipe((0,Wo.R)(this.destroyed$)).subscribe(function(t){e.pizzagnaService.setProperty({componentId:e.componentId,pizzagnaKey:ce.xW.Data,propertyPath:["editMode"]},!!t.payload)})}},{key:"ngOnDestroy",value:function(){bo(Io(i.prototype),"ngOnDestroy",this).call(this)}}]),i}(Po.I);return e.lateLoadKey="WidgetBodyComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(ce.nY),H.Y36(H.sBO),H.Y36(zo.p),H.Y36(j.mQy))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-widget-body"]],hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.classNames)},inputs:{componentId:"componentId",editMode:"editMode",content:"content",elementClass:"elementClass"},features:[H.qOj],decls:4,vars:6,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){if(1&e){var i=H.EpF();H.YNc(0,Pl,1,0,"nui-preview-overlay",0),H.ynx(1,1,2),H.YNc(3,Fl,0,0,"ng-template",3),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(2).attached(e)}),H.BQk()}if(2&e){var n=H.MAs(2);H.Q6J("ngIf",t.editMode),H.xp6(1),H.Q6J("componentId",t.nodeConfigs[0].id)("componentType",t.nodeConfigs[0].componentType)("providers",t.nodeConfigs[0].providers)("properties",t.nodeConfigs[0].properties),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}},directives:[V.O5,pe.$,he.Pl,W.b],styles:["[_nghost-%COMP%]{position:relative}"]}),e}(),$l=["widgetHeaderCustomElement"];function Ml(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",18),H.NdJ("click",function(){return H.CHM(i),H.oxw().toggleCollapsed()}),H._UZ(1,"span",19),H.qZA()}}function Rl(e,t){1&e&&(H.TgZ(0,"div",20),H._UZ(1,"nui-icon",21),H.qZA())}function Jl(e,t){if(1&e&&(H.TgZ(0,"div",22),H._uU(1),H.qZA()),2&e){var i=H.oxw();H.Q6J("title",i.title),H.xp6(1),H.hij(" ",i.title," ")}}function Ll(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div"),H.TgZ(1,"a",23),H.NdJ("click",function(e){return H.CHM(i),H.oxw().prepareLink(e)})("mouseenter",function(e){return H.CHM(i),H.oxw().prepareLink(e)})("mousedown",function(e){return e.stopPropagation(),e.preventDefault()}),H._uU(2),H.qZA(),H.qZA()}if(2&e){var n=H.oxw();H.xp6(1),H.Q6J("href",n.url,H.LSH)("nuiTooltip",n.linkTooltip),H.xp6(1),H.Oqu(n.title)}}function El(e,t){if(1&e&&(H.TgZ(0,"div",24),H._uU(1),H.qZA()),2&e){var i=H.oxw();H.Q6J("title",i.subtitle),H.xp6(1),H.hij(" ",i.subtitle," ")}}function ql(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"a",25),H.NdJ("click",function(e){return H.CHM(i),H.oxw().prepareLink(e)})("mouseenter",function(e){return H.CHM(i),H.oxw().prepareLink(e)})("mousedown",function(e){return e.stopPropagation(),e.preventDefault()}),H.qZA()}if(2&e){var n=H.oxw();H.Q6J("href",n.url,H.LSH)("nuiTooltip",n.linkTooltip)}}function Bl(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"button",26),H.NdJ("click",function(){return H.CHM(i),H.oxw().onEditWidget()}),H.qZA()}}function Nl(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"button",27),H.NdJ("click",function(){return H.CHM(i),H.oxw().toggleCollapsed()}),H.qZA()}}function Ql(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"nui-menu-action",30),H.NdJ("actionDone",function(){return H.CHM(i),H.oxw(2).onReloadData()}),H._UZ(1,"nui-icon",31),H.TgZ(2,"span"),H.SDv(3,32),H.qZA(),H.qZA()}}function Yl(e,t){if(1&e&&(H.TgZ(0,"nui-menu",28),H.YNc(1,Ql,4,0,"nui-menu-action",29),H.qZA()),2&e){var i=H.oxw();H.Q6J("appendToBody",!0),H.xp6(1),H.Q6J("ngIf",i.reloadable)}}function Vl(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"nui-popup",33),H.TgZ(1,"span",34),H._UZ(2,"button",35),H.qZA(),H.TgZ(3,"div",36),H.TgZ(4,"nui-menu-action",37),H.NdJ("actionDone",function(){return H.CHM(i),H.oxw().removeWidget()}),H.SDv(5,38),H.qZA(),H.qZA(),H.qZA()}2&e&&H.Q6J("appendToBody",!0)}function jl(e,t){1&e&&H._UZ(0,"div",39)}var Wl=["*"],Hl=function(){var e=function(){function e(t,i,n,r,o){Oo(this,e),this.eventBus=t,this.pizzagnaService=i,this.changeDetector=n,this.eventProxy=r,this.linkProvider=o,this.editMode=!0,this.editable=!0,this.removable=!0,this.collapsible=!1,this.reloadable=!0,this.hideMenu=!1,this.collapsed=!1,this.onDestroy$=new jo.xQ,this.linkTooltip=$localize(ve||(ve=Zo(["Explore this data"])))}return Fo(e,[{key:"hostClass",get:function(){return!0}},{key:"state",get:function(){return this.collapsed&&this.collapsible?"collapsed":"expanded"}},{key:"ngOnInit",value:function(){var e=this;this.collapsible&&this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:ce.xW.Data,propertyPath:["isCollapsed"]},!0),this.eventProxy&&(this.eventProxy.addUpstream(le.Ef),this.eventProxy.addUpstream(le.y4),this.eventProxy.addDownstream(le.N9)),this.eventBus.getStream(le.N9).pipe((0,Wo.R)(this.onDestroy$)).subscribe(function(t){e.pizzagnaService.setProperty({componentId:e.componentId,pizzagnaKey:ce.xW.Data,propertyPath:["collapsed"]},!t.payload),e.pizzagnaService.setProperty({componentId:e.componentId,pizzagnaKey:ce.xW.Data,propertyPath:["editMode"]},!!t.payload)})}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){e.withCustomElement=0!==e.widgetHeaderCustomElement.nativeElement.childNodes.length})}},{key:"ngOnDestroy",value:function(){this.onDestroy$.next(),this.onDestroy$.complete()}},{key:"removeWidget",value:function(){this.eventBus.getStream(le.y4).next()}},{key:"toggleCollapsed",value:function(){this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:ce.xW.Data,propertyPath:["collapsed"]},!this.collapsed)}},{key:"onEditWidget",value:function(){this.eventBus.getStream(le.Ef).next()}},{key:"onReloadData",value:function(){if(!this.reloadable)throw new Error("The widget is not reloadable, so it can't be reloaded manually.");this.eventBus.getStream(le.RG).next()}},{key:"prepareLink",value:function(e){var t=e.target;if(t&&this.linkProvider){var i=this.linkProvider.getLink(this.url);return i&&t.setAttribute("href",i),!0}return!1}}]),e}();return e.lateLoadKey="WidgetHeaderComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(ce.nY),H.Y36(zo.p),H.Y36(H.sBO),H.Y36(ls.q,8),H.Y36(ce.B5,8))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-widget-header"]],viewQuery:function(e,t){var i;(1&e&&H.Gf($l,5),2&e)&&(H.iGM(i=H.CRH())&&(t.widgetHeaderCustomElement=i.first))},hostVars:2,hostBindings:function(e,t){2&e&&H.ekj("nui-widget-header",t.hostClass)},inputs:{componentId:"componentId",editMode:"editMode",editable:"editable",removable:"removable",collapsible:"collapsible",reloadable:"reloadable",title:"title",subtitle:"subtitle",hideMenu:"hideMenu",url:"url",collapsed:"collapsed"},ngContentSelectors:Wl,decls:19,vars:20,consts:function(){var e;return[[1,"nui-widget__header"],[1,"nui-widget__header__container"],["class","collapse-container",3,"click",4,"ngIf"],[1,"nui-widget__header__content"],["class","nui-widget__header__content-drag-icon nui-dashboard__widget--drag-handle",4,"ngIf"],[1,"nui-widget__header__content-custom-element"],["widgetHeaderCustomElement",""],[1,"nui-widget__header__content-title-container","nui-dashboard__widget--drag-handle"],["class","nui-text-widget nui-widget__header__content-title",3,"title",4,"ngIf"],[4,"ngIf"],["class","nui-text-hint nui-widget__header__content-help-hint",3,"title",4,"ngIf"],[1,"nui-widget__header__content-actions"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown",4,"ngIf"],["class","nui-widget-header__action-edit","nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",e=$localize(ye||(ye=Zo([":\u241f8028b4b4a38e861642d3d465f1fd0e08ea5bdcd0\u241f8529558445404824560:Edit widget"]))),3,"click",4,"ngIf"],["class","nui-widget-header__action-toggle-collapsed","nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",3,"click",4,"ngIf"],["class","nui-widget__header__content-actions__menu","icon","menu","displayStyle","action",3,"appendToBody",4,"ngIf"],["class","nui-widget-header__action-remove",3,"appendToBody",4,"ngIf"],["class","collapse-spacer",4,"ngIf"],[1,"collapse-container",3,"click"],[1,"collapse-container__line"],[1,"nui-widget__header__content-drag-icon","nui-dashboard__widget--drag-handle"],["icon","drag","iconColor","gray"],[1,"nui-text-widget","nui-widget__header__content-title",3,"title"],[1,"nui-text-widget","nui-widget__header__content-title",3,"href","nuiTooltip","click","mouseenter","mousedown"],[1,"nui-text-hint","nui-widget__header__content-help-hint",3,"title"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown"],["nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",e,1,"nui-widget-header__action-edit",3,"click"],["nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",1,"nui-widget-header__action-toggle-collapsed",3,"click"],["icon","menu","displayStyle","action",1,"nui-widget__header__content-actions__menu",3,"appendToBody"],[3,"actionDone",4,"ngIf"],[3,"actionDone"],["icon","reload"],$localize(be||(be=Zo([":\u241faefc550c9735e4112bc884389f77c619007acb8e\u241f9121781503543370614:Reload data"]))),[1,"nui-widget-header__action-remove",3,"appendToBody"],["nuiTooltip",$localize(Ce||(Ce=Zo([":\u241f6d4f27e8085712e506aaaee1704b3e0455d15652\u241f8500807759101015900:Remove widget"])))],["nui-button","","nuiPopupToggle","","type","button","icon","remove","iconColor","red","displayStyle","action"],["popupAreaContent","",1,"nui-menu"],["type","destructive",3,"actionDone"],$localize(xe||(xe=Zo([":\u241f0f0e6eea7e5a63ccfd2d07117d5560cb89936c2c\u241f495801405190883151:Remove Widget"]))),[1,"collapse-spacer"]]},template:function(e,t){1&e&&(H.F$t(),H.TgZ(0,"div",0),H.TgZ(1,"div",1),H.YNc(2,Ml,2,0,"div",2),H.TgZ(3,"div",3),H.YNc(4,Rl,2,0,"div",4),H.TgZ(5,"div",5,6),H.Hsn(7),H.qZA(),H.TgZ(8,"div",7),H.YNc(9,Jl,2,2,"div",8),H.YNc(10,Ll,3,3,"div",9),H.YNc(11,El,2,2,"div",10),H.qZA(),H.TgZ(12,"div",11),H.YNc(13,ql,1,2,"a",12),H.YNc(14,Bl,1,0,"button",13),H.YNc(15,Nl,1,0,"button",14),H.YNc(16,Yl,2,2,"nui-menu",15),H.YNc(17,Vl,6,1,"nui-popup",16),H.qZA(),H.qZA(),H.qZA(),H.YNc(18,jl,1,0,"div",17),H.qZA()),2&e&&(H.xp6(1),H.ekj("nui-widget__header__container--collapsible",t.collapsible)("nui-widget__header__container--collapsed",t.collapsible&&t.collapsed)("nui-widget__header__container--expanded",t.collapsible&&!t.collapsed),H.Q6J("@expandedState",t.state),H.xp6(1),H.Q6J("ngIf",t.collapsed&&t.collapsible),H.xp6(2),H.Q6J("ngIf",t.editMode),H.xp6(4),H.ekj("nui-widget__header__content-title-with-additional-content",t.withCustomElement||t.editMode),H.xp6(1),H.Q6J("ngIf",!t.url||t.editMode),H.xp6(1),H.Q6J("ngIf",t.url&&!t.editMode),H.xp6(1),H.Q6J("ngIf",t.subtitle),H.xp6(2),H.Q6J("ngIf",t.url&&!t.editMode),H.xp6(1),H.Q6J("ngIf",t.editable&&t.editMode),H.xp6(1),H.Q6J("ngIf",t.collapsible&&!t.editMode),H.xp6(1),H.Q6J("ngIf",!t.hideMenu&&!t.editMode),H.xp6(1),H.Q6J("ngIf",t.removable&&t.editMode),H.xp6(1),H.Q6J("ngIf",t.collapsible))},directives:[V.O5,j.oJW,j.i9q,j.r0F,j.Mnp,j.VDk,j.RXH,j.btB],styles:[".nui-widget__header[_ngcontent-%COMP%]{display:flex;position:relative}.nui-widget__header[_ngcontent-%COMP%]   .collapse-spacer[_ngcontent-%COMP%]{margin-bottom:15px}.nui-widget__header__container[_ngcontent-%COMP%]{z-index:500;width:100%}.nui-widget__header__container--collapsible[_ngcontent-%COMP%]{width:100%}.nui-widget__header__container--collapsed[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container__line[_ngcontent-%COMP%]{width:16px;height:1px;background:#0079aa;background:var(--nui-color-line-active,#0079aa);margin:5px 0;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{align-items:flex-start;display:flex;opacity:1}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-drag-icon[_ngcontent-%COMP%]{align-items:center;cursor:move;display:flex;height:30px;justify-content:center;margin:5px;width:30px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title[_ngcontent-%COMP%]{display:block;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-container[_ngcontent-%COMP%]{flex:1;min-width:0;padding:10px 0 5px 10px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-with-additional-content[_ngcontent-%COMP%]{padding-left:0}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-help-hint[_ngcontent-%COMP%]{max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-actions[_ngcontent-%COMP%]{display:flex;padding:5px 10px 0 5px}"],data:{animation:[(0,os.X$)("expandedState",[(0,os.SB)("expanded",(0,os.oB)({height:"*"})),(0,os.SB)("collapsed",(0,os.oB)({height:"11px"})),(0,os.eR)("expanded <=> collapsed",[(0,os.jt)("350ms ease-in-out")])])]}}),e}(),Ul=i(25624),Gl=function(){var e=function(){function e(t,i){Oo(this,e),this.widgetConfigurationService=t,this.widgetTypesService=i,this.widgetChange=new H.vpe,this.rootNode=le.XM}return Fo(e,[{key:"ngOnChanges",value:function(e){var t,i;if(e.widget){var n=this.widget.type;if((e.widget.previousValue&&e.widget.previousValue.type)!==n){var r=this.widgetTypesService.getWidgetType(n,this.widget.version);this.rootNode=(null===(i=null===(t=null==r?void 0:r.paths)||void 0===t?void 0:t.widget)||void 0===i?void 0:i.root)||le.XM}this.widgetConfigurationService.updateWidget(this.widget)}}},{key:"onPizzagnaChange",value:function(e){this.widgetChange.emit(Object.assign(Object.assign({},this.widget),{pizzagna:e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(H.Y36(aa.I),H.Y36(cs.x))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-widget"]],hostAttrs:[1,"nui-widget"],inputs:{widget:"widget"},outputs:{widgetChange:"widgetChange"},features:[H._Bn([aa.I]),H.TTD],decls:1,vars:2,consts:[[3,"rootNode","pizzagna","pizzagnaChange"]],template:function(e,t){1&e&&(H.TgZ(0,"nui-pizzagna",0),H.NdJ("pizzagnaChange",function(e){return t.onPizzagnaChange(e)}),H.qZA()),2&e&&H.Q6J("rootNode",t.rootNode)("pizzagna",t.widget.pizzagna)},directives:[Ul.R],styles:[""]}),e}(),Kl=i(83461),Xl=function(){var e=Fo(function e(){Oo(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=H.oAB({type:e}),e.\u0275inj=H.cJS({imports:[[he.eL,G],he.eL]}),e}(),ec=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred ","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgrey","#d3d3d3"],["lightgreen","#90ee90"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370d8"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#d87093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]),tc=function(){var e=function(){function e(){Oo(this,e)}return Fo(e,[{key:"RGBToHexRGBToHex",value:function(e){var t=e.indexOf(",")>-1?",":" ",i=e.substr(4).split(")")[0].split(t),n=(+i[0]).toString(16),r=(+i[1]).toString(16),o=(+i[2]).toString(16);return 1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),1===o.length&&(o="0"+o),"#"+n+r+o}},{key:"isHEX",value:function(e){return/^#[0-9A-F]{6}$/i.test(e)||/^#([0-9A-F]{3}){1,2}$/i.test(e)}},{key:"colorKeywordsToHex",value:function(e){var t=ec.get(e);return de()(t)?"":t}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac}),e}(),ic=i(58203);function nc(e,t){if(1&e&&H._UZ(0,"div",10),2&e){var i=H.oxw().$implicit,n=H.oxw();H.ekj("black-tick",n.isBlackTick||(null==i?null:i.color)===n.defaultColor)}}function rc(e,t){if(1&e&&(H.TgZ(0,"div",4),H.TgZ(1,"nui-select-v2-option",5,6),H.TgZ(3,"div",7),H.TgZ(4,"div",8),H.YNc(5,nc,1,2,"div",9),H.qZA(),H.qZA(),H.qZA(),H.qZA()),2&e){var i=t.$implicit,n=H.MAs(2),r=H.oxw();H.xp6(1),H.Q6J("value",null==i?null:i.color)("displayValueContext",i),H.xp6(2),H.ekj("color-picker-option--selected",null==n?null:n.selected),H.uIk("title",null==i?null:i.label),H.xp6(1),H.Q6J("ngStyle",r.setStyles(null==i?null:i.color)),H.xp6(1),H.Q6J("ngIf",null==n?null:n.selected)}}function oc(e,t){if(1&e&&(H.TgZ(0,"div",11),H.TgZ(1,"div",12),H._UZ(2,"div",13),H.qZA(),H.TgZ(3,"div",14),H._UZ(4,"nui-icon",15),H.qZA(),H.qZA()),2&e){var i=t.$implicit,n=t.open,r=H.oxw();H.xp6(1),H.uIk("title",null==i?null:i.label),H.xp6(1),H.Q6J("ngStyle",r.setStyles(null==i?null:i.color)),H.xp6(2),H.Udp("transform",n?"rotate(180deg)":"")}}var sc=function(){var e=function(){function e(t,i,n){var r=this;Oo(this,e),this.changeDetection=t,this.colorService=i,this.cdkOverlay=n,this.defaultColor="var(--nui-color-bg-secondary)",this.overlayUtilities=new j.KcF,this.destroy$=new jo.xQ,this.setStyles=function(e){return{"background-color":e||r.defaultColor}}}return Fo(e,[{key:"ngOnChanges",value:function(e){e.colors&&(this.colors=e.colors.currentValue),e.colorPalette&&(this.colorPalette=e.colorPalette.currentValue)}},{key:"ngAfterViewInit",value:function(){var e,t=this;this.value&&(null===(e=this.select)||void 0===e||e.writeValue(this.value),this.isBlackTick=this.determineBlackTick(this.value.toString())),this.palette=this.colorPalette||this.colors.map(function(e){return{color:e}}),this.initOverlayUtilities(),this.select.valueSelected.pipe((0,ea.b)(function(e){return t.writeValue(e)}),(0,ea.b)(function(e){return t.onChange(e)}),(0,Wo.R)(this.destroy$)).subscribe(function(e){e&&(t.isBlackTick=t.determineBlackTick(e.toString()))});var i=(0,j.gpG)(),n=this.cdkOverlay.position().flexibleConnectedTo(this.select.elRef.nativeElement).withPush(!1).withViewportMargin(0).withPositions([i["bottom-right"],i["bottom-left"],i["top-right"],i["top-left"]]);this.overlayConfig={maxWidth:this.cols?30*this.cols+20+"px":"260px",positionStrategy:n}}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"onChange",value:function(e){}},{key:"_onTouched",value:function(){}},{key:"writeValue",value:function(e){var t;this.value=e,null===(t=this.select)||void 0===t||t.writeValue(e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"determineBlackTick",value:function(e){var t;return t=this.colorService.isHEX(e)?e:(0,ee.ruO)(e)||this.colorService.RGBToHexRGBToHex(e)||this.colorService.colorKeywordsToHex(e),"#fff"===this.getContrastOnBgColor(t)}},{key:"initOverlayUtilities",value:function(){var e=this,t=this.select.dropdown;this.selectResizeObserver=this.overlayUtilities.setPopupComponent(this.select.dropdown).getResizeObserver({updateSize:!1}),t.show$.pipe((0,Wo.R)(this.destroy$)).subscribe(function(){e.overlayUtilities.syncWidth(),e.selectResizeObserver.observe(e.select.elRef.nativeElement)}),t.hide$.pipe((0,Wo.R)(this.destroy$)).subscribe(function(){e.selectResizeObserver.unobserve(e.select.elRef.nativeElement)})}},{key:"getContrastOnBgColor",value:function(e){return e?parseInt(e.replace("#",""),16)>8388607.5?"#fff":"#000":""}}]),e}();return e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(tc),H.Y36(ic.aV))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-color-picker"]],viewQuery:function(e,t){var i;(1&e&&H.Gf(j.j_n,5),2&e)&&(H.iGM(i=H.CRH())&&(t.select=i.first))},inputs:{colors:"colors",colorPalette:"colorPalette",cols:"cols"},features:[H._Bn([{provide:j.MDN,useExisting:(0,H.Gpc)(function(){return e}),multi:!0},{provide:X.JU,useExisting:(0,H.Gpc)(function(){return e}),multi:!0},tc]),H.TTD],decls:5,vars:4,consts:[[1,"color-picker-select",3,"overlayConfig","syncWidth","displayValueTemplate"],[1,"color-picker-container"],["class","d-inline-flex flex-wrap box",4,"ngFor","ngForOf"],["colorSelectTemplate",""],[1,"d-inline-flex","flex-wrap","box"],[1,"w-100","h-100","reset-box-sizes",3,"value","displayValueContext"],["option",""],[1,"color-picker-option"],[1,"color-picker-option__color-box",3,"ngStyle"],["class","color-picker-option__glyph",3,"black-tick",4,"ngIf"],[1,"color-picker-option__glyph"],[1,"color-picker-input"],[1,"color-picker-input__box"],[1,"color-picker-input__color-box",3,"ngStyle"],[1,"color-picker-input__toggle"],["icon","caret-down"]],template:function(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2",0),H.TgZ(1,"div",1),H.YNc(2,rc,6,7,"div",2),H.qZA(),H.qZA(),H.YNc(3,oc,5,4,"ng-template",null,3,H.W1O)),2&e){var i=H.MAs(4);H.Q6J("overlayConfig",t.overlayConfig)("syncWidth",!1)("displayValueTemplate",i),H.xp6(2),H.Q6J("ngForOf",t.palette)}},directives:[j.j_n,V.sg,j.rLF,V.PC,V.O5,j.oJW],styles:[".box[_ngcontent-%COMP%]{width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]{padding:5px 10px}.color-picker-select[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;min-width:unset;cursor:pointer}.color-picker-input[_ngcontent-%COMP%]{display:flex}.color-picker-input__box[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.color-picker-input__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:#d9d9d9;border-color:var(--nui-color-line-default,#d9d9d9);width:17px;height:17px;flex-grow:1;margin:0 10px}.color-picker-input__toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-left:1px solid;border-left-color:#d9d9d9;border-left-color:var(--nui-color-line-default,#d9d9d9);width:30px;height:30px}.color-picker-option[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.color-picker-option__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:#d9d9d9;border-color:var(--nui-color-line-default,#d9d9d9);padding:1px 0 0 1px}.color-picker-option--selected[_ngcontent-%COMP%]{background-color:rgba(0,196,210,.1);background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.color-picker-option--selected[_ngcontent-%COMP%]:focus{outline:none}.color-picker-option__glyph[_ngcontent-%COMP%]{width:100%;height:100%;background-size:12px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMjAgMjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAgMjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS54dWktY2hlY2tib3gtZ2x5cGh7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDozO3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1saW5lY2FwOnJvdW5kO30KPC9zdHlsZT4KPHBvbHlsaW5lIGNsYXNzPSJ4dWktY2hlY2tib3gtZ2x5cGgiIHBvaW50cz0iMTcsNCA4LDE1IDMsOSAiLz4KPC9zdmc+);background-repeat:no-repeat}.color-picker-option__glyph.black-tick[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}"],changeDetection:0}),e}(),ac=i(61817),lc=i(64874),cc=i(89563),uc=i(8214);i(17654),i(48876);var dc=function(){var e=function(){function e(t,i,n){Oo(this,e),this.changeDetector=t,this.formBuilder=i,this.logger=n,this.formReady=new H.vpe}return Fo(e,[{key:"ngOnChanges",value:function(e){var t,i,n=this;this.form||this.initForm(),this.contentFormatterProperties?Object.keys(this.contentFormatterProperties).forEach(function(e){var t,i;null===(i=null===(t=n.form)||void 0===t?void 0:t.get(e))||void 0===i||i.setValue(n.contentFormatterProperties[e])}):null===(i=null===(t=this.form)||void 0===t?void 0:t.get("currentMetric"))||void 0===i||i.patchValue(this.properMetric)}},{key:"ngOnInit",value:function(){this.initForm()}},{key:"initForm",value:function(){this.form=this.formBuilder.group({currentMetric:[this.properMetric,X.kI.required]}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}},{key:"currentMetric",get:function(){return this.form.get("currentMetric")}},{key:"properMetric",get:function(){var e,t,i,n,r=null===(e=this.contentFormatterProperties)||void 0===e?void 0:e.currentMetric;return(null===(t=this.dsOutput)||void 0===t?void 0:t.result.find(function(e){return e.id===r}))?r:null===(n=null===(i=this.dsOutput)||void 0===i?void 0:i.result[0])||void 0===n?void 0:n.id}},{key:"addCustomFormControls",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(H.LFG(H.sBO),H.LFG(X.qu),H.LFG(j.mQy))},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac}),e}();function pc(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",7),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",null==i?null:i.id),H.xp6(1),H.hij(" ",null==i?null:i.name," ")}}var hc=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,e,n,r)).pizzagnaService=o,s}return Fo(i)}(dc);return e.lateLoadKey="DonutContentPercentageConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(X.qu),H.Y36(j.mQy),H.Y36(zo.p))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-donut-content-configurator"]],features:[H.qOj],decls:7,vars:3,consts:function(){return[[3,"formGroup"],[1,"mt-4"],["caption",$localize(we||(we=Zo([":\u241f447ffd4cbfd3d8c3ca8dd216c0a82ecadc24a7de\u241f4196232656388343089:Metrics"]))),1,"mb-3",3,"control"],["formControlName","currentMetric"],[3,"value",4,"ngFor","ngForOf"],["for","required"],$localize(ke||(ke=Zo([":\u241fb17406f843dc33feb81478ae8273dc1aae06bbf6\u241f2244196281006156184: This field is required "]))),[3,"value"]]},template:function(e,t){1&e&&(H.TgZ(0,"div",0),H.TgZ(1,"div",1),H.TgZ(2,"nui-form-field",2),H.TgZ(3,"nui-select-v2",3),H.YNc(4,pc,2,2,"nui-select-v2-option",4),H.qZA(),H.TgZ(5,"nui-validation-message",5),H.SDv(6,6),H.qZA(),H.qZA(),H.qZA(),H.qZA()),2&e&&(H.Q6J("formGroup",t.form),H.xp6(2),H.Q6J("control",t.currentMetric),H.xp6(2),H.Q6J("ngForOf",null==t.dsOutput?null:t.dsOutput.result))},directives:[X.JL,X.sg,j.hgI,j.j_n,X.JJ,X.u,V.sg,j.CfE,j.rLF],encapsulation:2}),e}(),fc=i(82455),gc=i.n(fc),mc=function(){var e=function(){function e(t){Oo(this,e),this.changeDetector=t,this.destroy$=new jo.xQ}return Fo(e,[{key:"ngOnChanges",value:function(e){var t,i=this;e.data&&(this.sum=gc()(this.data,function(e){return e.data[0]})),e.properties&&(this.currentMetricData=(null===(t=this.data.find(function(e){var t;return e.id===(null===(t=i.properties)||void 0===t?void 0:t.currentMetric)}))||void 0===t?void 0:t.data[0])||this.data[0].data[0]),this.getProperContentValue()}},{key:"ngOnInit",value:function(){var e=this;this.chartAssist.chartAssistSubject.pipe((0,ea.b)(function(t){return e.emphasizedSeriesData=e.data.find(function(e){return e.id===t.payload.seriesId})}),(0,ea.b)(function(){return e.getProperContentValue()}),(0,Wo.R)(this.destroy$)).subscribe()}},{key:"getProperSeriesData",value:function(){var e;return this.emphasizedSeriesData?null===(e=this.emphasizedSeriesData)||void 0===e?void 0:e.data[0]:this.currentMetricData}},{key:"getProperContentValue",value:function(){this.chartContent=(this.getProperSeriesData()/this.sum*100).toFixed(2)+"%"}}]),e}();return e.lateLoadKey="DonutContentPercentageFormatterComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["ng-component"]],inputs:{data:"data",chartAssist:"chartAssist",properties:"properties"},features:[H.TTD],decls:4,vars:1,consts:[[1,"nui-text-page"]],template:function(e,t){1&e&&(H.ynx(0),H.TgZ(1,"div",0),H.TgZ(2,"div",0),H._uU(3),H.qZA(),H.qZA(),H.BQk()),2&e&&(H.xp6(3),H.hij(" ",t.chartContent," "))},encapsulation:2}),e}();function vc(e,t){if(1&e&&H._UZ(0,"nui-icon",5),2&e){var i=H.oxw();H.Q6J("icon",null==i.config?null:i.config.chartDonutContentIcon)}}function yc(e,t){if(1&e&&(H.TgZ(0,"span"),H._uU(1),H.ALo(2,"number"),H.qZA()),2&e){var i=H.oxw();H.xp6(1),H.Oqu(H.xi3(2,1,i.sum,"1.0-3"))}}function bc(e,t){if(1&e&&H._uU(0),2&e){var i=H.oxw();H.Oqu(i.convertedValue)}}function Cc(e,t){if(1&e&&(H.TgZ(0,"div",6),H._uU(1),H.qZA()),2&e){var i=H.oxw();H.xp6(1),H.hij(" ",null==i.config?null:i.config.chartDonutContentLabel," ")}}var xc=function(){var e=function(){function e(t,i){Oo(this,e),this.changeDetector=t,this.conversionThreshold=xs,this.unitConversionPipe=new ws(i)}return Fo(e,[{key:"ngOnChanges",value:function(){this.sum=gc()(this.data,function(e){return e.data[0]}),this.convertedValue=this.unitConversionPipe.transform(this.sum)}}]),e}();return e.lateLoadKey="DonutContentRawFormatterComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(j.CrH))},e.\u0275cmp=H.Xpm({type:e,selectors:[["ng-component"]],inputs:{data:"data",config:"config"},features:[H.TTD],decls:7,vars:4,consts:[["iconSize","medium",3,"icon",4,"ngIf"],[1,"nui-text-page"],[4,"ngIf","ngIfElse"],["convertedValueDisplay",""],["class","nui-text-secondary",4,"ngIf"],["iconSize","medium",3,"icon"],[1,"nui-text-secondary"]],template:function(e,t){if(1&e&&(H.ynx(0),H.YNc(1,vc,1,1,"nui-icon",0),H.TgZ(2,"div",1),H.YNc(3,yc,3,4,"span",2),H.YNc(4,bc,1,1,"ng-template",null,3,H.W1O),H.qZA(),H.YNc(6,Cc,2,1,"div",4),H.BQk()),2&e){var i=H.MAs(5);H.xp6(1),H.Q6J("ngIf",null==t.config?null:t.config.chartDonutContentIcon),H.xp6(2),H.Q6J("ngIf",t.sum<t.conversionThreshold)("ngIfElse",i),H.xp6(3),H.Q6J("ngIf",null==t.config?null:t.config.chartDonutContentLabel)}},directives:[V.O5,j.oJW],pipes:[V.JJ],encapsulation:2}),e}(),wc=function(){var e=function(){function e(t){Oo(this,e),this.changeDetector=t}return Fo(e,[{key:"ngOnChanges",value:function(){this.sum=gc()(this.data,function(e){return e.data[0]})}}]),e}();return e.lateLoadKey="DonutContentSumFormatterComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["ng-component"]],inputs:{data:"data"},features:[H.TTD],decls:3,vars:1,consts:[[1,"nui-text-page"]],template:function(e,t){1&e&&(H.ynx(0),H.TgZ(1,"div",0),H._uU(2),H.qZA(),H.BQk()),2&e&&(H.xp6(2),H.Oqu(t.sum))},encapsulation:2}),e}(),kc=i(96899),Tc=i(62878),Sc=i(24803),Ic=function(){var e,t=function(e){xo(i,e);var t=ko(i);function i(){return Oo(this,i),t.apply(this,arguments)}return Fo(i)}(Sc.a);return t.lateLoadKey="PercentageFormatterComponent",t.\u0275fac=function(i){return(e||(e=H.n5z(t)))(i||t)},t.\u0275cmp=H.Xpm({type:t,selectors:[["ng-component"]],features:[H.qOj],decls:2,vars:1,template:function(e,t){1&e&&(H.ynx(0),H._uU(1),H.BQk()),2&e&&(H.xp6(1),H.hij(" ",null==t.data?null:t.data.value,"% "))},encapsulation:2}),t}(),_c=i(45038),Ac=i.n(_c),zc=i(41233),Zc=i.n(zc),Oc=[{power:1,prefix:"",label:""},{power:3,prefix:"k",label:"kilo"},{power:6,prefix:"M",label:"mega"},{power:9,prefix:"G",label:"giga"},{power:12,prefix:"T",label:"tera"},{power:15,prefix:"P",label:"peta"},{power:18,prefix:"E",label:"exa"},{power:21,prefix:"Z",label:"zetta"},{power:24,prefix:"Y",label:"yotta"}],Pc=[{power:-24,prefix:"y",label:"yocto"},{power:-21,prefix:"z",label:"zepto"},{power:-18,prefix:"a",label:"atto"},{power:-15,prefix:"f",label:"femto"},{power:-12,prefix:"p",label:"pico"},{power:-9,prefix:"n",label:"nano"},{power:-6,prefix:"\xb5",label:"micro"},{power:-3,prefix:"m",label:"milli"},{power:1,prefix:"",label:""}],Fc=function(){var e=function(){function e(t){Oo(this,e),this.changeDetector=t,this.value="0"}return Fo(e,[{key:"ngOnChanges",value:function(e){if(e.data){var t=e.data.currentValue.value;t&&this.processSiUnitsValue(Zc()(t))}}},{key:"processSiUnitsValue",value:function(e){var t=this.getTransformPrefix(Ac()(e));this.value=this.getTransformedValue(e,t),this.modifier=null==t?void 0:t.prefix}},{key:"getTransformedValue",value:function(e,t){if(!t)return e;var i=1!==t.power?+e*Math.pow(10,-t.power):+e;return(Math.round(10*i)/10).toString()}},{key:"getTransformPrefix",value:function(t){var i,n=Math.abs(t);if(!Number.isNaN(n)){var r=(null===(i=this.data)||void 0===i?void 0:i.shiftPoint)||e.SHIFT_POINT_DEFAULT;if(n>=1){var o=Math.round(n).toString().length;return[].concat(Oc).reverse().find(function(e){return o>=e.power+1+r})}var s=Dc(n);return[].concat(Pc).reverse().find(function(e){return s<=Math.abs(e.power)+1+r})}}}]),e}();return e.lateLoadKey="SiUnitsFormatterComponent",e.SHIFT_POINT_DEFAULT=0,e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["ng-component"]],hostVars:2,hostBindings:function(e,t){2&e&&H.Tol(t.elementClass)},inputs:{data:"data",elementClass:"elementClass"},features:[H.TTD],decls:6,vars:2,consts:[[1,"d-flex","flex-nowrap"]],template:function(e,t){1&e&&(H.ynx(0),H.TgZ(1,"div",0),H.TgZ(2,"span"),H._uU(3),H.qZA(),H.TgZ(4,"span"),H._uU(5),H.qZA(),H.qZA(),H.BQk()),2&e&&(H.xp6(3),H.Oqu(t.value),H.xp6(2),H.hij(" ",t.modifier,""))},encapsulation:2}),e}();function Dc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=Math.abs(e);if(i>=1)return 1;var n=t+1;return i*Math.pow(10,n)>1?n:Dc(i,n)}function $c(e,t){if(1&e&&(H.TgZ(0,"div"),H.TgZ(1,"a",6),H.NdJ("click",function(e){return e.stopPropagation()}),H._uU(2),H.qZA(),H.qZA()),2&e){var i=H.oxw(2);H.xp6(1),H.Q6J("href",null==i.data?null:i.data.link,H.LSH)("title",i.data.name),H.xp6(1),H.hij(" ",i.data.name," ")}}function Mc(e,t){if(1&e&&(H.TgZ(0,"span",7),H._uU(1),H.qZA()),2&e){var i=H.oxw(2);H.Udp("font-size",11,"px"),H.xp6(1),H.Oqu(i.data.name)}}function Rc(e,t){if(1&e&&(H.ynx(0),H.TgZ(1,"div",1),H.TgZ(2,"span",2),H._uU(3),H.qZA(),H._UZ(4,"nui-icon",3),H.YNc(5,$c,3,3,"div",4),H.YNc(6,Mc,2,3,"ng-template",null,5,H.W1O),H.qZA(),H.BQk()),2&e){var i=H.MAs(7),n=H.oxw();H.xp6(3),H.Oqu(n.data.data),H.xp6(1),H.Q6J("icon",n.data.icon),H.xp6(1),H.Q6J("ngIf",null==n.data?null:n.data.link)("ngIfElse",i)}}var Jc=function(){var e=function(){function e(t){Oo(this,e),this.changeDetector=t,this.isValid=!1}return Fo(e,[{key:"ngOnChanges",value:function(){this.isValid=!!(this.data&&this.data.icon&&this.data.name&&this.data.data)}}]),e}();return e.lateLoadKey="StatusWithIconFormatterComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["ng-component"]],inputs:{data:"data"},features:[H.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nui-text-label","align-items-center","status-icon-formatter"],[1,"nui-text-ellipsis","text-right","pl-3"],[1,"nui-icon","nui-icon-line-height","mx-2",3,"icon"],[4,"ngIf","ngIfElse"],["noLink",""],["rel","noopener noreferrer",1,"nui-text-link-small","nui-text-ellipsis","link",3,"href","title","click"],[1,"nui-text-ellipsis"]],template:function(e,t){1&e&&H.YNc(0,Rc,8,4,"ng-container",0),2&e&&H.Q6J("ngIf",t.isValid)},directives:[V.O5,j.oJW],styles:[".status-icon-formatter[_ngcontent-%COMP%]{display:grid;grid-template-columns:50px auto minmax(114px,1fr)}"]}),e}(),Lc=i(66213),Ec=i(39761),qc=i(81690),Bc=i.n(qc),Nc=function(){var e=function(){function e(){Oo(this,e)}return Fo(e,[{key:"transform",value:function(e,t,i){if(!de()(e)){if(Bc()(e)){if(!t)return e;var n=_o(e);return n.push(t),n}return Object.assign({},e,yo({},void 0===i?"undefined":i,t))}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=H.Yjl({name:"nuiAddData",type:e,pure:!0}),e}(),Qc=i(48248);function Yc(e,t){if(1&e&&H._UZ(0,"nui-drop-area",9),2&e){var i=H.oxw(2);H.Udp("height",i.height,"px")}}function Vc(e,t){1&e&&(H.ynx(0),H.TgZ(1,"div",12),H._UZ(2,"nui-icon",13),H.qZA(),H.BQk())}function jc(e,t){if(1&e&&(H.YNc(0,Vc,3,0,"ng-container",10),H.TgZ(1,"span",11),H.ALo(2,"nuiWidgetConfiguratorSectionHeader"),H._uU(3),H.ALo(4,"nuiWidgetConfiguratorSectionHeader"),H.qZA()),2&e){var i=H.oxw(),n=i.$implicit,r=i.index,o=H.oxw();H.Q6J("ngIf",o.moveButtons),H.xp6(1),H.Q6J("title",H.Dn7(2,3,o.headerMap.get(n.id),r,o.headerPrefix)),H.xp6(2),H.hij(" ",H.Dn7(4,7,o.headerMap.get(n.id),r,o.headerPrefix)," ")}}function Wc(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",14),H.TgZ(1,"button",15),H.NdJ("click",function(){H.CHM(i);var e=H.oxw(),t=e.$implicit,n=e.index,r=H.oxw();return r.removeItem(r.getItemForNode(t),n)}),H.qZA(),H.qZA()}if(2&e){var n=H.oxw().index;H.xp6(1),H.MGl("id","kpi-widget-remove-btn-",n,"")}}function Hc(e,t){}var Uc=function(){return["formReady","formDestroy"]};function Gc(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",2),H.NdJ("cdkDragStarted",function(e){return H.CHM(i),H.oxw().cdkDragStarted(e)}),H.YNc(1,Yc,1,2,"nui-drop-area",3),H.YNc(2,jc,5,11,"ng-template",null,4,H.W1O),H.YNc(4,Wc,2,1,"ng-template",null,5,H.W1O),H.ynx(6,6,7),H.NdJ("output",function(e){var t=H.CHM(i).$implicit;return H.oxw().onEvent(t.id,e)}),H.ALo(8,"nuiAddData"),H.ALo(9,"nuiAddData"),H.YNc(10,Hc,0,0,"ng-template",8),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(7).attached(e)}),H.BQk(),H.qZA()}if(2&e){var n=t.$implicit,r=H.MAs(3),o=H.MAs(5),s=H.MAs(7);H.xp6(6),H.Q6J("componentId",n.id)("componentType",n.componentType)("providers",n.providers)("properties",H.Dn7(8,6,H.Dn7(9,10,n.properties,r,"headerTextTemplate"),o,"headerButtonsTemplate"))("outputs",H.DdM(14,Uc)),H.xp6(4),H.Q6J("cdkPortalOutlet",s.portal)}}var Kc=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,e,n,r)).formBuilder=o,s.items=[],s.moveButtons=!0,s.formReady=new H.vpe,s.itemsChange=new H.vpe,s.headerMap=new Map,s}return Fo(i,[{key:"getItemForNode",value:function(e){return this.items.find(function(t){return t.id===e.id})}},{key:"getNodes",value:function(){return this.nodes}},{key:"ngOnInit",value:function(){this.form=this.formBuilder.array([],X.kI.required),this.formReady.emit(this.form)}},{key:"onEvent",value:function(e,t){var i=this.items.find(function(t){return t.id===e}),n=this.items.findIndex(function(t){return t.id===e});"formReady"===t.id&&i&&this.onFormReady(i,t.payload,n),"formDestroy"===t.id&&this.onFormDestroy(t.payload)}},{key:"onFormReady",value:function(e,t,i){var n=this,r=this.formBuilder.group({id:[e.id],componentType:[e.componentType],properties:t});this.form.setControl(i,r),setTimeout(function(){var i,r=null===(i=t.get("".concat(e.id,"/description")))||void 0===i?void 0:i.get("label");null==r||r.valueChanges.pipe((0,Ec.O)(r.value),(0,Wo.R)(n.destroyed$)).subscribe(function(t){n.headerMap.set(e.id,t||""),n.changeDetector.markForCheck()})})}},{key:"onFormDestroy",value:function(e){var t=this;setTimeout(function(){for(var i=0;i<t.form.length&&t.form.at(i).get("properties")!==e;i++);t.form.removeAt(i),t.form.patchValue(t.form.value,{emitEvent:!0})})}},{key:"trackBy",value:function(e,t){return t.id}},{key:"removeItem",value:function(e,t){if(!e)throw new Error("Unable to remove undefined item from pizzagna");this.itemsChange.emit(this.items.filter(function(t){return t!==e})),this.items.splice(t,1),this.nodes.splice(t,1),this.pizzagnaService.removeComponents(e.id)}},{key:"moveItem",value:function(e,t){var i=this,n=_o(this.items),r=n.splice(e,1);n.splice.apply(n,[t,0].concat(_o(r)));var o=_o(this.nodes),s=o.splice(e,1);o.splice.apply(o,[t,0].concat(_o(s))),this.nodes=_o(o),this.moveFormValues(e,t),this.itemsChange.emit(n),setTimeout(function(){i.form.setValue(i.form.value,{emitEvent:!0})})}},{key:"drop",value:function(e){this.moveItem(e.previousIndex,e.currentIndex)}},{key:"cdkDragStarted",value:function(e){this.height=e.source.element.nativeElement.offsetHeight}},{key:"moveFormValues",value:function(e,t){var i=this.form.at(e);this.form.removeAt(e),this.form.insert(t,i)}},{key:"ngOnDestroy",value:function(){bo(Io(i.prototype),"ngOnDestroy",this).call(this)}}]),i}(Po.I);return e.lateLoadKey="ItemsDynamicComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(zo.p),H.Y36(j.mQy),H.Y36(X.qu))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-items-dynamic"]],inputs:{items:"items",moveButtons:"moveButtons",nodes:"nodes",headerPrefix:"headerPrefix"},outputs:{formReady:"formReady",itemsChange:"itemsChange"},features:[H.qOj],decls:2,vars:3,consts:[["cdkDropList","",1,"nui-items-dynamic",3,"formGroup","cdkDropListDropped"],["cdkDrag","","class","nui-items-dynamic__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"nui-items-dynamic__node-item",3,"cdkDragStarted"],["class","nui-items-dynamic__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-items-dynamic__drop-area"],[4,"ngIf"],[1,"nui-items-dynamic__header-text",3,"title"],["cdkDragHandle","",1,"nui-items-dynamic__drag-handler"],["icon","drag"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"]],template:function(e,t){1&e&&(H.TgZ(0,"div",0),H.NdJ("cdkDropListDropped",function(e){return t.drop(e)}),H.YNc(1,Gc,11,15,"div",1),H.qZA()),2&e&&(H.Q6J("formGroup",t.form),H.xp6(1),H.Q6J("ngForOf",t.nodeConfigs)("ngForTrackBy",t.trackBy))},directives:[Kl.Wj,X.JL,X.sg,V.sg,Kl.Zt,Kl.Hk,pe.$,he.Pl,lc.O,V.O5,Kl.Bh,j.oJW,j.r0F],pipes:[Nc,Qc.l],styles:[".nui-items-dynamic__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-items-dynamic__drag-handler{cursor:move;display:flex}.nui-items-dynamic__node-item{background-color:#fff;background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-items-dynamic__node-item .widget-configurator-section{margin:0}.nui-items-dynamic__drop-area{margin:15px}.kpi-indicators-configuration__color-preview{width:16px;height:16px;margin-right:15px;border-radius:3px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px rgba(17,17,17,.3);box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),e}(),Xc=function(){var e=Fo(function e(){Oo(this,e)});return e.lateLoadKey="PreviewPlaceholderComponent",e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-preview-placeholder"]],decls:6,vars:0,consts:function(){return[$localize(Te||(Te=Zo([":\u241f2dddb51ea396d77c6eae240cec72bcac05cbd28b\u241f7484658843094717966:This is a preview of your widget"]))),$localize(Se||(Se=Zo([":\u241f1abddb62ce92f6f986deb4b00de6798b3ae96dd3\u241f2497832056925742895: As you make configuration changes, this area will update to match. To get started, select a widget type on the configuration panel.\n"])))]},template:function(e,t){1&e&&(H.TgZ(0,"div"),H.TgZ(1,"b"),H.SDv(2,0),H.qZA(),H._uU(3,"."),H.qZA(),H.TgZ(4,"div"),H.SDv(5,1),H.qZA())},styles:["[_nghost-%COMP%]{max-width:300px;padding:0 10px;margin:auto}"]}),e}(),eu=i(37524),tu=i.n(eu),iu=i(28726),nu=i(77341),ru=i(23309);function ou(e,t){}var su=function(){return["widgetSelected"]};function au(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",6),H.ynx(1,7,8),H.NdJ("output",function(e){return H.CHM(i),H.oxw().onSelect(e.payload)}),H.YNc(3,ou,0,0,"ng-template",9),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(2).attached(e)}),H.BQk(),H.qZA()}if(2&e){var n=H.MAs(2),r=H.oxw();H.xp6(1),H.Q6J("componentType",r.cloneSelectionComponentType)("outputs",H.DdM(3,su)),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}function lu(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",10),H.TgZ(1,"nui-pizzagna",11,12),H.NdJ("pizzagnaChange",function(e){return H.CHM(i),H.oxw().formPizzagna=e}),H.qZA(),H.qZA()}if(2&e){var n=H.oxw();H.Q6J("formGroup",n.form),H.xp6(1),H.Q6J("pizzagna",n.formPizzagna)}}var cu=function(){var e=function(){function e(t,i,n,r,o){Oo(this,e),this.changeDetector=t,this.configurator=i,this.previewService=n,this.formBuilder=r,this.widgetTypesService=o,this.navigationControl=new Gs.X({busyState:{busy:!1},allowStepChange:!0}),this.destroy$=new jo.xQ,this.resetForm$=new jo.xQ,this.busy=!1,this.isFormDisplayed=!1,this.resetForm()}return Fo(e,[{key:"ngOnInit",value:function(){var e=this;this.previewService.previewChanged.pipe((0,Wo.R)(this.destroy$)).subscribe(function(t){e.onPreviewPizzagnaUpdate(t)}),this.configurator.submitError.pipe((0,Wo.R)(this.destroy$)).subscribe(function(){e.toggleBusy()})}},{key:"ngAfterViewInit",value:function(){this.changeDetector.markForCheck()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete(),this.resetForm$.complete()}},{key:"onPreviewPizzagnaUpdate",value:function(e){var t;if(this.isFormDisplayed){var i=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(t=this.configurator.previewWidget)||void 0===t?void 0:t.pizzagna),yo({},ce.xW.Configuration,e))});this.configurator.updateWidget(i)}}},{key:"canFinish",value:function(){var e,t,i,n;return!!(null===(t=null===(e=this.widgetTemplate)||void 0===e?void 0:e.pizzagna)||void 0===t?void 0:t.configuration)&&!(null===(n=null===(i=this.widgetTemplate)||void 0===i?void 0:i.metadata)||void 0===n?void 0:n.needsConfiguration)}},{key:"onFinish",value:function(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1});this.toggleBusy(),this.configurator.formSubmit()}},{key:"onCancel",value:function(){this.configurator.formCancel()}},{key:"onStepNavigated",value:function(e){this.isFormDisplayed=1===e.currentStepIndex,0===e.currentStepIndex&&1===e.previousStepIndex?(this.formPizzagna=void 0,this.resetForm(),this.onSelect(this.widgetTemplate)):1===e.currentStepIndex&&(this.formPizzagna=this.widgetTypesService.getWidgetType(this.widgetTemplate.type,this.widgetTemplate.version).configurator,this.previewService.preview=this.widgetTemplate.pizzagna[ce.xW.Configuration])}},{key:"onSelect",value:function(e){var t,i=this;this.widgetTemplate=e;var n=Object.assign(Object.assign({},e),{id:(null===(t=this.configurator.previewWidget)||void 0===t?void 0:t.id)||null});this.configurator.updateWidget(null),setTimeout(function(){i.configurator.updateWidget(tu()(n))})}},{key:"toggleBusy",value:function(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}},{key:"resetForm",value:function(){var e=this;this.resetForm$.next(),this.form=this.formBuilder.group({}),this.form.statusChanges.pipe((0,Wo.R)(this.resetForm$),(0,Wo.R)(this.destroy$)).subscribe(function(){e.changeDetector.markForCheck()})}}]),e}();return e.lateLoadKey="WidgetClonerComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(ac.n),H.Y36(iu.m),H.Y36(X.qu),H.Y36(cs.x))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-widget-cloner"]],hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",cloneSelectionComponentType:"cloneSelectionComponentType"},decls:8,vars:7,consts:function(){return[["configuratorTitle",$localize(Ie||(Ie=Zo([":\u241fa638e97aa8422948b3e628089bbc9e0cd89e0087\u241f696117927395958397:Creating Widget"]))),3,"disableCloseButton","close"],["finishText",$localize(_e||(_e=Zo([":\u241f1af9862ac515933a9a72e92970c3e92bda63f6e8\u241f8076137290276236439:Create Widget"]))),3,"hideHeader","canProceed","canFinish","navigationControl","finish","cancel","stepNavigated"],["nextText",$localize(Ae||(Ae=Zo([":\u241f072d4d4ec83a5a97345a1c13b90c213b47326d09\u241f6673660887182833564:Customize"]))),3,"stepTemplate"],[3,"stepTemplate"],["step1",""],["step2",""],[1,"p-4","h-100"],["nuiComponentPortal","",3,"componentType","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"formGroup"],[3,"pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(e,t){if(1&e&&(H.TgZ(0,"nui-configurator-heading",0),H.NdJ("close",function(){return t.onCancel()}),H.qZA(),H.TgZ(1,"nui-dashwiz",1),H.NdJ("finish",function(){return t.onFinish()})("cancel",function(){return t.onCancel()})("stepNavigated",function(e){return t.onStepNavigated(e)}),H._UZ(2,"nui-dashwiz-step",2),H._UZ(3,"nui-dashwiz-step",3),H.qZA(),H.YNc(4,au,4,4,"ng-template",null,4,H.W1O),H.YNc(6,lu,3,2,"ng-template",null,5,H.W1O)),2&e){var i=H.MAs(5),n=H.MAs(7);H.Q6J("disableCloseButton",t.busy),H.xp6(1),H.Q6J("hideHeader",!0)("canProceed",!!t.widgetTemplate)("canFinish",t.canFinish())("navigationControl",t.navigationControl),H.xp6(1),H.Q6J("stepTemplate",i),H.xp6(1),H.Q6J("stepTemplate",n)}},directives:[Lc.Q,nu.i,ru.u,pe.$,he.Pl,X.JL,X.sg,Ul.R],encapsulation:2,changeDetection:0}),e}(),uu=i(83385),du=i(6432),pu=i(4433),hu=i(19797),fu=i(31507),gu=[$localize(ze||(ze=Zo(["Blue"]))),$localize(Ze||(Ze=Zo(["Blue Light"]))),$localize(Oe||(Oe=Zo(["Blue Dark"]))),$localize(Pe||(Pe=Zo(["Pink"]))),$localize(Fe||(Fe=Zo(["Pink Light"]))),$localize(De||(De=Zo(["Pink Dark"]))),$localize($e||($e=Zo(["Sea Green"]))),$localize(Me||(Me=Zo(["Sea Green Light"]))),$localize(Re||(Re=Zo(["Sea Green Dark"]))),$localize(Je||(Je=Zo(["Violet"]))),$localize(Le||(Le=Zo(["Violet Light"]))),$localize(Ee||(Ee=Zo(["Violet Dark"]))),$localize(qe||(qe=Zo(["Lime Green"]))),$localize(Be||(Be=Zo(["Lime Green Light"]))),$localize(Ne||(Ne=Zo(["Lime Green Dark"]))),$localize(Qe||(Qe=Zo(["Orange"]))),$localize(Ye||(Ye=Zo(["Orange Light"]))),$localize(Ve||(Ve=Zo(["Orange Dark"]))),$localize(je||(je=Zo(["Ultramarine"]))),$localize(We||(We=Zo(["Ultramarine Light"]))),$localize(He||(He=Zo(["Ultramarine Dark"]))),$localize(Ue||(Ue=Zo(["Bordeaux"]))),$localize(Ge||(Ge=Zo(["Bordeaux Light"]))),$localize(Ke||(Ke=Zo(["Bordeaux Dark"]))),$localize(Xe||(Xe=Zo(["Ochroid"]))),$localize(et||(et=Zo(["Ochroid Light"]))),$localize(tt||(tt=Zo(["Ochroid Dark"]))),$localize(it||(it=Zo(["Anthracite"]))),$localize(nt||(nt=Zo(["Anthracite Light"]))),$localize(rt||(rt=Zo(["Anthracite Dark"])))],mu=[$localize(ot||(ot=Zo(["Down"]))),$localize(st||(st=Zo(["Down Light"]))),$localize(at||(at=Zo(["Critical"]))),$localize(lt||(lt=Zo(["Critical Light"]))),$localize(ct||(ct=Zo(["Warning"]))),$localize(ut||(ut=Zo(["Warning Light"]))),$localize(dt||(dt=Zo(["Unknown"]))),$localize(pt||(pt=Zo(["Unknown Light"]))),$localize(ht||(ht=Zo(["Ok"]))),$localize(ft||(ft=Zo(["Ok Light"]))),$localize(gt||(gt=Zo(["Info"]))),$localize(mt||(mt=Zo(["Info Light"])))],vu=i.n(fu)()([].concat(_o(ee.wlb),_o(ee.Sj$)),[].concat(gu,mu)),yu="var(--nui-color-bg-secondary)",bu=[].concat(_o(ee.wlb),_o(ee.Sj$)).map(function(e){return{color:e,label:vu[e]}}),Cu=i(52238),xu=i(76e3);function wu(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",27),H._uU(1),H.qZA()),2&e){var i=t.$implicit,n=H.oxw(2);H.Q6J("value",i.key),H.xp6(1),H.hij(" ",n.getLabel(i.key)," ")}}function ku(e,t){if(1&e&&H._UZ(0,"nui-drop-area"),2&e){var i=H.oxw(2);H.Udp("height",i.height,"px")}}function Tu(e,t){if(1&e){var i=H.EpF();H.ynx(0),H.TgZ(1,"div",14),H.NdJ("cdkDragStarted",function(e){return H.CHM(i),H.oxw().cdkDragStarted(e)}),H.TgZ(2,"div",15),H._UZ(3,"nui-icon",16),H.qZA(),H.TgZ(4,"div",17),H.TgZ(5,"nui-form-field",18),H.TgZ(6,"nui-select-v2",19),H.YNc(7,wu,2,2,"nui-select-v2-option",20),H.ALo(8,"keyvalue"),H.qZA(),H.qZA(),H.TgZ(9,"nui-form-field",21),H._UZ(10,"nui-textbox",22),H.qZA(),H.TgZ(11,"nui-form-field",23),H._UZ(12,"nui-color-picker",24),H.qZA(),H.qZA(),H.TgZ(13,"button",25),H.NdJ("click",function(){var e=H.CHM(i).index;return H.oxw().removeRule(e)}),H.qZA(),H.YNc(14,ku,1,2,"nui-drop-area",26),H.qZA(),H.BQk()}if(2&e){var n=t.$implicit,r=H.oxw();H.xp6(1),H.Q6J("formGroup",n),H.xp6(4),H.Q6J("control",n.get("comparisonType")),H.xp6(1),H.Q6J("formControl",n.get("comparisonType")),H.xp6(1),H.Q6J("ngForOf",H.lcZ(8,7,r.availableComparators)),H.xp6(2),H.Q6J("control",n.get("value")),H.xp6(2),H.Q6J("control",n.get("color")),H.xp6(1),H.Q6J("colorPalette",r.palette)}}var Su=function(){var e=function(){function e(t,i,n){Oo(this,e),this.changeDetector=t,this.formBuilder=i,this.formReady=new H.vpe,this.destroy$=new jo.xQ,this.availableComparators=n.getComparators()}return Fo(e,[{key:"ngOnInit",value:function(){var e,t=this;this.palette=[{color:yu,label:$localize(vt||(vt=Zo(["Default color"])))}].concat(this.backgroundColors),this.formLocal=this.initDefaultRulesGroup(),this.form=this.formBuilder.group({rules:[[]]}),null===(e=this.formLocal.get("rules"))||void 0===e||e.value.valueChanges.pipe((0,ea.b)(function(e){var i;return null===(i=t.form.get("rules"))||void 0===i?void 0:i.patchValue(_o(e))}),(0,Wo.R)(this.destroy$)).subscribe(),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i,n=this;e.rules&&((null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).setValue([]),this.rules&&Bc()(this.rules)&&this.rules.forEach(function(e){var t;(null===(t=n.formLocal.get("rules"))||void 0===t?void 0:t.value).push(n.formBuilder.group({comparisonType:[e.comparisonType,[X.kI.required]],value:[e.value,[X.kI.required]],color:[e.color]}))}))}},{key:"getColorRulesSubtitle",value:function(){var e,t,i,n;return 0===(null===(t=null===(e=this.formLocal)||void 0===e?void 0:e.get("rules"))||void 0===t?void 0:t.value).controls.length?$localize(yt||(yt=Zo(["No color rules"]))):$localize(bt||(bt=Zo([""," color rules"])),(null===(n=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===n?void 0:n.value).controls.length)}},{key:"getLabel",value:function(e){var t;return(null===(t=this.availableComparators[e])||void 0===t?void 0:t.label)||"Custom Comparator"}},{key:"removeRule",value:function(e){var t,i;(null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).removeAt(e)}},{key:"addRule",value:function(){var e,t;(null===(t=null===(e=this.formLocal)||void 0===e?void 0:e.get("rules"))||void 0===t?void 0:t.value).push(this.formBuilder.group({comparisonType:[">",[X.kI.required]],value:[0,[X.kI.required]],color:[yu]}))}},{key:"drop",value:function(e){this.move(e.currentIndex,e.previousIndex)}},{key:"cdkDragStarted",value:function(e){this.height=e.source.element.nativeElement.offsetHeight}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"initDefaultRulesGroup",value:function(){return this.formBuilder.group({rules:[this.formBuilder.array([],X.kI.required)]})}},{key:"move",value:function(e,t){var i,n,r=null===(n=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===n?void 0:n.value,o=e>t?1:-1;if(r){for(var s=r.at(t),a=t;a*o<e*o;a+=o){var l=r.at(a+o);r.setControl(a,l)}r.setControl(e,s)}}}]),e}();return e.lateLoadKey="BackgroundColorRulesConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(X.qu),H.Y36(ds.Z))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-background-color-rules-configuration"]],inputs:{rules:"rules",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[H.TTD],decls:20,vars:15,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(Ct||(Ct=Zo([":\u241f3b53b67118a64c409177ae5a41f5978d0e5a95bd\u241f4898023314284497772:Background color rules"]))),[1,"nui-text-secondary",3,"title"],[1,"kpi-color-rules-configuration__accordion-content"],[1,"mb-4"],[1,"mb-3"],["cdkDropList","",3,"cdkDropListDropped"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],$localize(xt||(xt=Zo([":\u241fa5b94dd20b8bfe788b08278ddd886c220cfe117b\u241f6277749121321104138:Add new rule "]))),["cdkDrag","",1,"kpi-color-rule","d-flex","pt-3",3,"formGroup","cdkDragStarted"],[1,"kpi-color-rule__control","justify-content-center","d-flex"],["icon","drag","cdkDragHandle","",1,"kpi-color-rule__drag","align-items-center"],[1,"d-flex","flex-grow-1","flex-wrap"],[1,"mr-3","mb-3","flex-grow-1",3,"control"],["placeholder",$localize(wt||(wt=Zo([":\u241f42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c\u241f8325381706328570325:Select Item"]))),2,"min-width","220px",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"mr-3","mb-3",2,"max-width","100px",3,"control"],["formControlName","value"],[1,"mr-3","mb-3",3,"control"],["formControlName","color",3,"colorPalette"],["nui-button","","icon","delete","displayStyle","action","type","button",1,"kpi-color-rule__control",3,"click"],[3,"height",4,"cdkDragPlaceholder"],[3,"value"]]},template:function(e,t){var i;(1&e&&(H.TgZ(0,"nui-widget-editor-accordion",0),H.ALo(1,"async"),H.ALo(2,"nuiWidgetEditorAccordionFormState"),H.TgZ(3,"div",1),H._UZ(4,"nui-icon",2),H.ALo(5,"async"),H.ALo(6,"nuiFormHeaderIconPipe"),H.TgZ(7,"div",3),H.TgZ(8,"span",4),H.SDv(9,5),H.qZA(),H.TgZ(10,"div",6),H._uU(11),H.qZA(),H.qZA(),H.qZA(),H.TgZ(12,"div",7),H.TgZ(13,"div",8),H.TgZ(14,"p",9),H._uU(15,"We can automatically change the background color when the value meets certain conditions."),H.qZA(),H.TgZ(16,"div",10),H.NdJ("cdkDropListDropped",function(e){return t.drop(e)}),H.YNc(17,Tu,15,9,"ng-container",11),H.qZA(),H.TgZ(18,"button",12),H.NdJ("click",function(){return t.addRule()}),H.SDv(19,13),H.qZA(),H.qZA(),H.qZA(),H.qZA()),2&e)&&(H.Q6J("formGroup",t.formLocal)("state",H.lcZ(1,6,H.lcZ(2,8,t.formLocal))),H.xp6(4),H.Q6J("icon",H.lcZ(5,10,H.xi3(6,12,t.formLocal,"color"))),H.xp6(6),H.Q6J("title",t.getColorRulesSubtitle()),H.xp6(1),H.hij(" ",t.getColorRulesSubtitle()," "),H.xp6(6),H.Q6J("ngForOf",null==(i=t.formLocal.get("rules"))?null:i.value.controls))},directives:[pu.J,X.JL,X.sg,j.oJW,Kl.Wj,V.sg,j.r0F,Kl.Zt,Kl.Bh,j.hgI,j.j_n,X.JJ,X.oH,j.XHW,X.u,sc,Kl.Hk,j.rLF,lc.O],pipes:[V.Ov,Cu.F,xu.d,V.Nd],styles:[".kpi-color-rules-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-color-rules-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-color-rules-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-color-rules-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 30px - 10px);margin-left:10px}.kpi-color-rules-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:#d9d9d9;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}.kpi-color-rule[_ngcontent-%COMP%]{background-color:#fff;background-color:var(--nui-color-bg-content,#fff)}.kpi-color-rule__drag[_ngcontent-%COMP%]{cursor:move}.kpi-color-rule__control[_ngcontent-%COMP%]{min-width:30px;height:30px}"],changeDetection:0}),e}(),Iu=i(13409),_u=i(7350),Au=i(66297),zu=i(35720);function Zu(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",14),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("title",null==i?null:i.label)("value",i),H.xp6(1),H.hij(" ",i.label," ")}}function Ou(e,t){}var Pu=function(){return["errorState"]},Fu=function(e){return{dataSource:e}},Du=function(){var e=function(){function e(t,i,n,r,o,s,a){Oo(this,e),this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.providerRegistryService=r,this.eventBus=o,this.injector=s,this.logger=a,this.dataSourceProviders=[],this.errorComponent=Au.K.lateLoadKey,this.formReady=new H.vpe,this.hasDataSourceError=!1,this.dataFieldIds=new Iu.Subject}return Fo(e,[{key:"ngOnInit",value:function(){var e,t=this;this.form=this.formBuilder.group({providerId:[this.providerId||"",[X.kI.required]],properties:[this.properties||{}],dataSource:[null,[X.kI.required]]}),this.form.setValidators([function(){return t.hasDataSourceError?{dataSourceError:!0}:null}]),null===(e=this.form.get("dataSource"))||void 0===e||e.valueChanges.subscribe(function(e){var i,n;null===(i=t.form.get("providerId"))||void 0===i||i.setValue(null==e?void 0:e.providerId),(null==e?void 0:e.properties)&&(null===(n=t.form.get("properties"))||void 0===n||n.setValue(null==e?void 0:e.properties))}),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i,n,r,o,s,a,l,c,u=this;if(e.providerId&&!e.providerId.isFirstChange()||e.properties&&!e.properties.isFirstChange()){var d=null===(t=e.providerId)||void 0===t?void 0:t.previousValue,p=null===(i=e.properties)||void 0===i?void 0:i.previousValue;if(d!==this.providerId||p!==this.properties){var h=this.dataSourceProviders.find(function(e){var t,i;return e.providerId===u.providerId&&ys()(null!==(t=e.properties)&&void 0!==t?t:{},null!==(i=u.properties)&&void 0!==i?i:{})});h?(null===(l=null===(a=this.form)||void 0===a?void 0:a.get("dataSource"))||void 0===l||l.setValue(h),this.invokeDataSource(h)):(null===(r=null===(n=this.form)||void 0===n?void 0:n.get("providerId"))||void 0===r||r.setValue(this.providerId),null===(s=null===(o=this.form)||void 0===o?void 0:o.get("properties"))||void 0===s||s.setValue(this.properties),this.invokeDataSource({properties:this.properties,providerId:this.providerId}))}}if(e.dataSourceProviders&&!e.dataSourceProviders.isFirstChange()&&1===this.dataSourceProviders.length){var f=this.dataSourceProviders[0];null===(c=this.form.get("dataSource"))||void 0===c||c.setValue(f),this.invokeDataSource(f)}}},{key:"ngAfterViewInit",value:function(){var e;if(this.dataSourceProviders&&1===this.dataSourceProviders.length){var t=this.dataSourceProviders[0];null===(e=this.form.get("dataSource"))||void 0===e||e.setValue(t),this.invokeDataSource(t)}}},{key:"onDataSourceSelected",value:function(e){this.eventBus.next(_u.ay,{}),this.invokeDataSource(e)}},{key:"invokeDataSource",value:function(e){var t,i=this;if(e.providerId){var n=this.providerRegistryService.getProvider(e.providerId);if(n){this.dataSource=this.providerRegistryService.getProviderInstance(n,this.injector),this.eventBus.next(_u.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,na.q)(1)).subscribe(function(e){i.eventBus.next(_u.PF,{payload:e}),i.dataFieldIds.next(Object.keys(e.result||e))});var r=this.dataSource;(null==r?void 0:r.updateConfiguration)&&r.updateConfiguration(null!==(t=e.properties)&&void 0!==t?t:{}),setTimeout(function(){i.dataSource.applyFilters()})}else this.logger.warn("No provider found for id:",e.providerId)}}},{key:"onErrorState",value:function(e){this.hasDataSourceError=e,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}]),e}();return e.lateLoadKey="DataSourceConfigurationV2Component",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(zu.p),H.Y36(X.qu),H.Y36(as.C),H.Y36(ce.nY),H.Y36(H.zs3),H.Y36(j.mQy))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",properties:"properties",providerId:"providerId",errorComponent:"errorComponent"},outputs:{formReady:"formReady"},features:[H.TTD],decls:20,vars:28,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],$localize(kt||(kt=Zo([":\u241f1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0\u241f1107354728956440783:Data Source"]))),[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],[3,"control"],["placeholder",$localize(Tt||(Tt=Zo([":\u241f87aabb92d16c162e46a9ef3703445351a3e41739\u241f6527825109146827187:Select data source"]))),"formControlName","dataSource",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"nui-widget-editor-accordion",0),H.ALo(1,"async"),H.ALo(2,"nuiWidgetEditorAccordionFormState"),H.TgZ(3,"div",1),H._UZ(4,"nui-icon",2),H.ALo(5,"async"),H.ALo(6,"nuiFormHeaderIconPipe"),H.TgZ(7,"div",3),H.TgZ(8,"span",4),H.SDv(9,5),H.qZA(),H.TgZ(10,"div",6),H._uU(11),H.qZA(),H.qZA(),H.qZA(),H.TgZ(12,"div",7),H.TgZ(13,"nui-form-field",8),H.TgZ(14,"nui-select-v2",9),H.NdJ("valueSelected",function(e){return t.onDataSourceSelected(e)}),H.ALo(15,"async"),H.YNc(16,Zu,2,3,"nui-select-v2-option",10),H.qZA(),H.qZA(),H.ynx(17,11,12),H.NdJ("output",function(e){return t.onErrorState(e.payload)}),H.YNc(19,Ou,0,0,"ng-template",13),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(18).attached(e)}),H.BQk(),H.qZA(),H.qZA()}if(2&e){var n,r,o,s=H.MAs(18);H.Q6J("formGroup",t.form)("state",H.lcZ(1,14,H.lcZ(2,16,t.form))),H.xp6(4),H.Q6J("icon",H.lcZ(5,18,H.xi3(6,20,t.form,"database"))),H.xp6(6),H.Q6J("title",null==(n=t.form.get("dataSource"))||null==n.value?null:n.value.label),H.xp6(1),H.hij(" ",null==(r=t.form.get("dataSource"))||null==r.value?null:r.value.label," "),H.xp6(2),H.Q6J("control",t.form.get("dataSource")),H.xp6(1),H.Q6J("title",null==(o=t.form.get("dataSource"))||null==o.value?null:o.value.label)("popupViewportMargin",H.lcZ(15,23,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.dataSourceProviders),H.xp6(1),H.Q6J("componentId",t.errorComponent)("componentType",t.errorComponent)("outputs",H.DdM(25,Pu))("properties",H.VKq(26,Fu,t.dataSource)),H.xp6(2),H.Q6J("cdkPortalOutlet",s.portal)}},directives:[pu.J,X.JL,X.sg,j.oJW,j.hgI,j.j_n,X.JJ,X.u,V.sg,pe.$,he.Pl,j.rLF],pipes:[V.Ov,Cu.F,xu.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}(),$u=i(36233);function Mu(e,t){}var Ru=function(){var e=function(){function e(t,i){Oo(this,e),this.changeDetector=t,this.formBuilder=i,this.mode=ne.K.URL,this.formReady=new H.vpe,this.destroyed$=new jo.xQ,this.form=this.formBuilder.group({mode:[this.mode],urlCustomContent:[""],htmlCustomContent:[""],customEmbeddedContent:[""]}),this.modes=[{value:ne.K.URL,displayValue:$localize(St||(St=Zo(["Show the contents of a specific URL"])))},{value:ne.K.HTML,displayValue:$localize(It||(It=Zo(["Show the exact HTML I supply below"])))}]}return Fo(e,[{key:"urlCustomContent",get:function(){return this.form.get("urlCustomContent")}},{key:"htmlCustomContent",get:function(){return this.form.get("htmlCustomContent")}},{key:"modeValue",get:function(){return this.form.get("mode")}},{key:"customEmbeddedContentValue",get:function(){return this.form.get("customEmbeddedContent")}},{key:"ngOnInit",value:function(){this.initializeForm(),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i,n;e.customEmbeddedContent&&(this.mode===ne.K.URL?null===(t=this.urlCustomContent)||void 0===t||t.setValue(this.customEmbeddedContent):this.mode===ne.K.HTML&&(null===(i=this.htmlCustomContent)||void 0===i||i.setValue(this.customEmbeddedContent))),e.mode&&(null===(n=this.modeValue)||void 0===n||n.setValue(e.mode.currentValue))}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"initializeForm",value:function(){var e,t,i,n=this;null===(e=this.modeValue)||void 0===e||e.valueChanges.pipe((0,Wo.R)(this.destroyed$)).subscribe(function(e){var t,i,r,o,s,a,l,c;e===ne.K.URL?(null===(t=n.customEmbeddedContentValue)||void 0===t||t.setValue(null===(i=n.form.get("urlCustomContent"))||void 0===i?void 0:i.value),null===(r=n.htmlCustomContent)||void 0===r||r.disable(),null===(o=n.urlCustomContent)||void 0===o||o.enable()):e===ne.K.HTML&&(null===(s=n.customEmbeddedContentValue)||void 0===s||s.setValue(null===(a=n.form.get("htmlCustomContent"))||void 0===a?void 0:a.value),null===(l=n.urlCustomContent)||void 0===l||l.disable(),null===(c=n.htmlCustomContent)||void 0===c||c.enable())}),null===(t=this.urlCustomContent)||void 0===t||t.valueChanges.pipe((0,Wo.R)(this.destroyed$)).subscribe(function(e){var t;null===(t=n.customEmbeddedContentValue)||void 0===t||t.setValue(e)}),null===(i=this.htmlCustomContent)||void 0===i||i.valueChanges.pipe((0,Wo.R)(this.destroyed$)).subscribe(function(e){var t;null===(t=n.customEmbeddedContentValue)||void 0===t||t.setValue(e)})}}]),e}();return e.lateLoadKey="EmbeddedContentConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(X.qu))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-embedded-content-configuration"]],inputs:{mode:"mode",messageComponent:"messageComponent",customEmbeddedContent:"customEmbeddedContent"},outputs:{formReady:"formReady"},features:[H.TTD],decls:26,vars:23,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],$localize(_t||(_t=Zo([":\u241fd18bb86a09ed7c63d7d00a1dad418e5328f59406\u241f5492801901920760741:Embedded Content"]))),[1,"nui-text-secondary"],[1,"embedded-configurator-section__accordion-content"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["caption",$localize(At||(At=Zo([":\u241f6a175ac244e51f9c713f8829e3ba9192f6728ba2\u241f9012225804233265629:What do you want to show in the widget?"]))),3,"control"],["formControlName","mode","name","mode","required","",3,"value","valueChange"],[3,"value"],[3,"control"],["formControlName","urlCustomContent"],["formControlName","htmlCustomContent","rows","7",1,"textarea-scrollable"]]},template:function(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"nui-widget-editor-accordion",0),H.ALo(1,"async"),H.ALo(2,"nuiWidgetEditorAccordionFormState"),H.TgZ(3,"div",1),H._UZ(4,"nui-icon",2),H.ALo(5,"async"),H.ALo(6,"nuiFormHeaderIconPipe"),H.TgZ(7,"div",3),H.TgZ(8,"span",4),H.SDv(9,5),H.qZA(),H.TgZ(10,"div",6),H._uU(11," Show the specific HTML I supply "),H.qZA(),H.qZA(),H.qZA(),H.TgZ(12,"div",7),H.ynx(13,8,9),H.YNc(15,Mu,0,0,"ng-template",10),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(14).attached(e)}),H.BQk(),H.TgZ(16,"nui-form-field",11),H.TgZ(17,"nui-radio-group",12),H.NdJ("valueChange",function(e){return t.mode=e}),H.TgZ(18,"nui-radio",13),H._uU(19),H.qZA(),H.TgZ(20,"nui-form-field",14),H._UZ(21,"nui-textbox",15),H.qZA(),H.TgZ(22,"nui-radio",13),H._uU(23),H.qZA(),H.TgZ(24,"nui-form-field",14),H._UZ(25,"nui-textbox",16),H.qZA(),H.qZA(),H.qZA(),H.qZA(),H.qZA()}if(2&e){var n=H.MAs(14);H.Q6J("formGroup",t.form)("state",H.lcZ(1,14,H.lcZ(2,16,t.form))),H.xp6(4),H.Q6J("icon",H.lcZ(5,18,H.xi3(6,20,t.form,"tag"))),H.xp6(9),H.Q6J("componentType",t.messageComponent.componentType)("properties",t.messageComponent.properties),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal),H.xp6(1),H.Q6J("control",t.form.get("mode")),H.xp6(1),H.Q6J("value",t.mode),H.xp6(1),H.Q6J("value",t.modes[0].value),H.xp6(1),H.hij(" ",t.modes[0].displayValue," "),H.xp6(1),H.Q6J("control",t.form.get("urlCustomContent")),H.xp6(2),H.Q6J("value",t.modes[1].value),H.xp6(1),H.hij(" ",t.modes[1].displayValue," "),H.xp6(1),H.Q6J("control",t.form.get("htmlCustomContent"))}},directives:[pu.J,X.JL,X.sg,j.oJW,pe.$,he.Pl,j.hgI,j.wTj,X.JJ,X.u,X.Q7,j.UKb,j.XHW],pipes:[V.Ov,Cu.F,xu.d],styles:[".embedded-configurator-section__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}();function Ju(e,t){if(1&e&&(H.tHW(0,1,1),H._UZ(1,"a",3),H.N_p()),2&e){var i=H.oxw();H.xp6(1),H.Q6J("href",i.link.href,H.LSH)("target",i.link.target),H.pQV(i.link.text),H.QtT(0)}}var Lu=function(){var e=Fo(function e(t){Oo(this,e),this.changeDetector=t});return e.lateLoadKey="InfoMessageConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-info-message-configuration"]],inputs:{emphasizeText:"emphasizeText",generalText:"generalText",link:"link",allowDismiss:"allowDismiss"},decls:4,vars:4,consts:function(){return[["type","info",3,"allowDismiss"],$localize(zt||(zt=Zo([":\u241f24c82b79e21e3e64d6bc95222dab453df0f76238\u241f4445666320773928104:",":START_BOLD_TEXT: ",":INTERPOLATION: ",":CLOSE_BOLD_TEXT: ",":INTERPOLATION_1: ",":START_LINK:",":INTERPOLATION_2:",":CLOSE_LINK:"])),"\ufffd#2\ufffd","\ufffd0\ufffd","\ufffd/#2\ufffd","\ufffd1\ufffd","\ufffd*3:1\ufffd\ufffd#1:1\ufffd","\ufffd0:1\ufffd","\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd"),[3,"href","target",4,"ngIf"],[3,"href","target"]]},template:function(e,t){1&e&&(H.TgZ(0,"nui-message",0),H.tHW(1,1),H._UZ(2,"b"),H.YNc(3,Ju,2,3,"a",2),H.N_p(),H.qZA()),2&e&&(H.Q6J("allowDismiss",t.allowDismiss),H.xp6(3),H.Q6J("ngIf",t.link),H.pQV(t.emphasizeText)(t.generalText),H.QtT(1))},directives:[j.qqZ,V.O5],encapsulation:2,changeDetection:0}),e}(),Eu=i(90739);function qu(e,t){if(1&e&&(H.TgZ(0,"div",14),H.TgZ(1,"nui-form-field",15),H._UZ(2,"nui-textbox",16),H.qZA(),H.qZA()),2&e){var i=H.oxw();H.xp6(1),H.Q6J("control",i.form.get("units"))}}var Bu=function(){var e=function(){function e(t,i){Oo(this,e),this.changeDetector=t,this.formBuilder=i,this.defaultColor={label:$localize(Zt||(Zt=Zo(["Default color"]))),color:yu},this.label="",this.backgroundColor=this.defaultColor.color,this.units="",this.formReady=new H.vpe}return Fo(e,[{key:"ngOnInit",value:function(){this.backgroundColors=_o(this.backgroundColors),this.backgroundColors.unshift(this.defaultColor),this.form=this.formBuilder.group({label:[this.label,[X.kI.required]],backgroundColor:[this.backgroundColor,[X.kI.required]]}),this.configurableUnits&&this.form.addControl("units",this.formBuilder.control(this.units));var e=this.form.get("label"),t=null==e?void 0:e.valueChanges.pipe((0,Ec.O)(e.value)),i=this.form.get("backgroundColor"),n=null==i?void 0:i.valueChanges.pipe((0,Ec.O)(null==i?void 0:i.value));this.subtitle$=(0,Eu.aj)([null==t?void 0:t.pipe((0,ia.U)(function(e){return e||$localize(Ot||(Ot=Zo(["no label"])))})),null==n?void 0:n.pipe((0,ia.U)(function(e){return vu[e]||$localize(Pt||(Pt=Zo(["Default Color"])))}))]).pipe((0,ia.U)(function(e){return e.join(", ")})),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i,n;e.label&&(null===(t=this.form)||void 0===t||t.patchValue({label:e.label.currentValue})),e.backgroundColor&&(null===(i=this.form)||void 0===i||i.patchValue({backgroundColor:e.backgroundColor.currentValue})),e.units&&(null===(n=this.form)||void 0===n||n.patchValue({units:e.units.currentValue}))}}]),e}();return e.lateLoadKey="KpiDescriptionConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(X.qu))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-kpi-description-configuration"]],inputs:{componentId:"componentId",configurableUnits:"configurableUnits",label:"label",backgroundColor:"backgroundColor",units:"units",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[H.TTD],decls:21,vars:22,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(Ft||(Ft=Zo([":\u241feec715de352a6b114713b30b640d319fa78207a0\u241f4902817035128594900:Description"]))),[1,"nui-text-secondary",3,"title"],[1,"kpi-description-configuration__accordion-content"],[1,"mb-4"],["caption",$localize(Dt||(Dt=Zo([":\u241f863226cffd5b66a6fee9810a9282a5006d6ef576\u241f4077520913910941990:Label"]))),1,"form-group",3,"control"],["formControlName","label","placeholder",$localize($t||($t=Zo([":\u241f8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5\u241f725093659603391179:Set label"])))],["caption",$localize(Mt||(Mt=Zo([":\u241fe088252c0e2ede83d27a24702b1f77c90cee60b7\u241f3468485835384597147:Background Color"]))),1,"form-group",3,"control"],["formControlName","backgroundColor",1,"kpi-description-configuration__accordion-content__color-picker",3,"colorPalette"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",$localize(Rt||(Rt=Zo([":\u241fbe537f4ddb09e1a2856314f2cbe84063ab6b4170\u241f9074327260054432941:Units"]))),1,"form-group",3,"control"],["formControlName","units","placeholder",$localize(Jt||(Jt=Zo([":\u241fbe537f4ddb09e1a2856314f2cbe84063ab6b4170\u241f9074327260054432941:Units"])))]]},template:function(e,t){1&e&&(H.TgZ(0,"nui-widget-editor-accordion",0),H.ALo(1,"async"),H.ALo(2,"nuiWidgetEditorAccordionFormState"),H.TgZ(3,"div",1),H._UZ(4,"nui-icon",2),H.ALo(5,"async"),H.ALo(6,"nuiFormHeaderIconPipe"),H.TgZ(7,"div",3),H.TgZ(8,"span",4),H.SDv(9,5),H.qZA(),H.TgZ(10,"div",6),H.ALo(11,"async"),H._uU(12),H.ALo(13,"async"),H.qZA(),H.qZA(),H.qZA(),H.TgZ(14,"div",7),H.TgZ(15,"div",8),H.TgZ(16,"nui-form-field",9),H._UZ(17,"nui-textbox",10),H.qZA(),H.qZA(),H.TgZ(18,"nui-form-field",11),H._UZ(19,"nui-color-picker",12),H.qZA(),H.YNc(20,qu,3,1,"div",13),H.qZA(),H.qZA()),2&e&&(H.Q6J("formGroup",t.form)("state",H.lcZ(1,9,H.lcZ(2,11,t.form))),H.xp6(4),H.Q6J("icon",H.lcZ(5,13,H.xi3(6,15,t.form,"widget_list"))),H.xp6(6),H.Q6J("title",H.lcZ(11,18,t.subtitle$)),H.xp6(2),H.hij(" ",H.lcZ(13,20,t.subtitle$)," "),H.xp6(4),H.Q6J("control",t.form.get("label")),H.xp6(2),H.Q6J("control",t.form.get("backgroundColor")),H.xp6(1),H.Q6J("colorPalette",t.backgroundColors),H.xp6(1),H.Q6J("ngIf",t.configurableUnits))},directives:[pu.J,X.JL,X.sg,j.oJW,j.hgI,j.XHW,X.JJ,X.u,sc,V.O5],pipes:[V.Ov,Cu.F,xu.d],styles:[".kpi-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-description-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-description-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-description-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 30px - 10px);margin-left:10px}.kpi-description-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:#d9d9d9;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}"],changeDetection:0}),e}();i(95228);var Nu=i(98348),Qu=i(58503),Yu=i.n(Qu),Vu=function(e){var t=e.get("criticalThresholdValue"),i=e.get("warningThresholdValue"),n=e.get("reversedThresholds"),r=e.get("showThresholds");if(!t)throw new Error("criticalThresholdValue formControl is not defined");if((0,j.fS1)(t,"min","max"),!i)throw new Error("warningThresholdValue formControl is not defined");if((0,j.fS1)(i,"min","max"),null==r?void 0:r.value){if(de()(i.value))return null;if(null==n?void 0:n.value){if(t.value>=i.value)return i.setErrors({min:!0}),t.setErrors({max:!0}),{thresholds:!0}}else if(t.value<=i.value)return i.setErrors({max:!0}),t.setErrors({min:!0}),{thresholds:!0}}return null};function ju(e,t){if(1&e&&(H.TgZ(0,"nui-radio",14),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i.value),H.xp6(1),H.hij(" ",i.displayValue," ")}}function Wu(e,t){if(1&e&&(H.TgZ(0,"div",15),H.TgZ(1,"div",16),H.TgZ(2,"nui-form-field",17),H._UZ(3,"nui-textbox-number",18),H.TgZ(4,"nui-validation-message",11),H.SDv(5,19),H.qZA(),H.TgZ(6,"nui-validation-message",20),H.SDv(7,21),H.qZA(),H.TgZ(8,"nui-validation-message",22),H.SDv(9,23),H.qZA(),H.qZA(),H.qZA(),H.TgZ(10,"div",16),H.TgZ(11,"nui-form-field",24),H._UZ(12,"nui-textbox-number",25),H.TgZ(13,"nui-validation-message",11),H.SDv(14,26),H.qZA(),H.TgZ(15,"nui-validation-message",20),H.SDv(16,27),H.qZA(),H.TgZ(17,"nui-validation-message",22),H.SDv(18,28),H.qZA(),H.qZA(),H.qZA(),H.TgZ(19,"nui-form-field",29),H._UZ(20,"nui-checkbox",30),H.TgZ(21,"nui-validation-message",11),H.SDv(22,31),H.qZA(),H.qZA(),H.qZA()),2&e){var i=H.oxw();H.xp6(2),H.Q6J("control",i.form.get("warningThresholdValue")),H.xp6(9),H.Q6J("control",i.form.get("criticalThresholdValue")),H.xp6(8),H.Q6J("control",i.form.get("reversedThresholds"))("showOptionalText",!1)}}var Hu=function(){var e=function(){function e(t,i,n,r){Oo(this,e),this.changeDetector=t,this.formBuilder=i,this.logger=n,this.cd=r,this.formReady=new H.vpe,this.thresholdOptions=[{value:!1,displayValue:$localize(Lt||(Lt=Zo(["Never show critical or warning states for this KPI"])))},{value:!0,displayValue:$localize(Et||(Et=Zo(["Set custom thresholds for this widget"])))}],this.destroyed$=new jo.xQ}return Fo(e,[{key:"ngOnInit",value:function(){var e=this;this.validateRadioButtonsGroupValue(),this.form=this.formBuilder.group({criticalThresholdValue:[this.criticalThresholdValue||0,[X.kI.required]],warningThresholdValue:[this.warningThresholdValue||0],showThresholds:[this.showThresholds||!1,[X.kI.required]],reversedThresholds:[this.reversedThresholds||!1]},{validators:Vu}),this.handleWarningThreshold(this.warningThresholdValue),this.form.statusChanges.pipe((0,Wo.R)(this.destroyed$)).subscribe(function(t){e.form.markAllAsTouched(),e.cd.detectChanges()}),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i=this,n=["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"];if(e){for(var r=0,o=Object.keys(e);r<o.length;r++){var s=o[r];if(Yu()(n,s)){var a=e[s].currentValue;a&&(null===(t=this.form)||void 0===t||t.patchValue(yo({},s,a)))}}e.showThresholds&&setTimeout(function(){return i.validateRadioButtonsGroupValue()})}e.warningThresholdValue&&this.handleWarningThreshold(e.warningThresholdValue.currentValue)}},{key:"getThresholdsSubtitle",value:function(e){return e?$localize(qt||(qt=Zo(["Custom thresholds"]))):$localize(Bt||(Bt=Zo(["No thresholds"])))}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"validateRadioButtonsGroupValue",value:function(){this.radioButtonGroupValue=this.showThresholds}},{key:"handleWarningThreshold",value:function(e){var t,i=null===(t=this.form)||void 0===t?void 0:t.get("warningThresholdValue");de()(e)&&(null==i||i.setValue(null))}}]),e}();return e.lateLoadKey="ThresholdsConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(X.qu),H.Y36(j.mQy),H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-thresholds-configuration"]],inputs:{criticalThresholdValue:"criticalThresholdValue",warningThresholdValue:"warningThresholdValue",showThresholds:"showThresholds",reversedThresholds:"reversedThresholds"},outputs:{formReady:"formReady"},features:[H.TTD],decls:19,vars:18,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(Nt||(Nt=Zo([":\u241f784fdd6b2dc26499eca6e15094b55f0b1c1e1b7a\u241f8815471757829352344:Thresholds"]))),[1,"nui-text-secondary",3,"title"],[1,"kpi-thresholds-configuration__accordion-content"],["caption",$localize(Qt||(Qt=Zo([":\u241f6875687abe0982b513f60d230d71b9cc2d9eef3e\u241f9007062817247777645:How do you want to set warning/critical thresholds?"]))),3,"control"],["formControlName","showThresholds","name","showThresholds","required","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],$localize(Yt||(Yt=Zo([":\u241fb17406f843dc33feb81478ae8273dc1aae06bbf6\u241f2244196281006156184: This field is required "]))),["class","mt-4",4,"ngIf"],[3,"value"],[1,"mt-4"],[1,"mb-4"],["caption",$localize(Vt||(Vt=Zo([":\u241f5dda34ec4b693f2b13afdf28a4e5f00062f4c896\u241f4003830139037367407:Warning value"]))),3,"control"],["formControlName","warningThresholdValue","placeholder",$localize(jt||(jt=Zo([":\u241fcae671d9eb277eadfd7752518814d3f852369cc9\u241f6643132921042050963:Never show the warning state"])))],$localize(Wt||(Wt=Zo([":\u241fc9a9da14b0f8c677efa737185f1232f8537bd2a6\u241f3224868488156254475: This field is required "]))),["for","min"],$localize(Ht||(Ht=Zo([":\u241f6ad764c776f7fc93e363d7ffbc1c230eae3940b5\u241f4559261673566846483: Warning threshold should be greater than critical threshold "]))),["for","max"],$localize(Ut||(Ut=Zo([":\u241f10ac1637483672c386935e223e44afe35191d982\u241f1891939597266260302: Warning threshold should be lower than critical threshold "]))),["caption",$localize(Gt||(Gt=Zo([":\u241ff8baa78544aa27624d43d59e5a225216aff1042f\u241f6033897450960508846:Critical value"]))),3,"control"],["formControlName","criticalThresholdValue","placeholder",$localize(Kt||(Kt=Zo([":\u241f9b66a7e6fdeb05f4c1ffdc78ea8f4a7a2fb64d79\u241f7643729389671069649:Set critical value"])))],$localize(Xt||(Xt=Zo([":\u241fc9a9da14b0f8c677efa737185f1232f8537bd2a6\u241f3224868488156254475: This field is required "]))),$localize(ei||(ei=Zo([":\u241f2afdb8ffd27a0c693ebdf779394160feda88b1bb\u241f4547796134450342031: Critical threshold should be greater than warning threshold "]))),$localize(ti||(ti=Zo([":\u241fd4a40b458ad21fde1e702a45a864aa7854d9c2c4\u241f1599177532285503774: Critical threshold should be lower than warning threshold "]))),["caption",$localize(ii||(ii=Zo([":\u241f18bcbeb2b14e6064ec6fe9276db140a4e800da3c\u241f5716867848923884165:Warning and critical when below threshold values"]))),3,"control","showOptionalText"],["formControlName","reversedThresholds","required",""],$localize(ni||(ni=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "])))]},template:function(e,t){var i,n,r;(1&e&&(H.TgZ(0,"nui-widget-editor-accordion",0),H.ALo(1,"async"),H.ALo(2,"nuiWidgetEditorAccordionFormState"),H.TgZ(3,"div",1),H._UZ(4,"nui-icon",2),H.ALo(5,"async"),H.ALo(6,"nuiFormHeaderIconPipe"),H.TgZ(7,"div",3),H.TgZ(8,"span",4),H.SDv(9,5),H.qZA(),H.TgZ(10,"div",6),H._uU(11),H.qZA(),H.qZA(),H.qZA(),H.TgZ(12,"div",7),H.TgZ(13,"nui-form-field",8),H.TgZ(14,"nui-radio-group",9),H.YNc(15,ju,2,2,"nui-radio",10),H.qZA(),H.TgZ(16,"nui-validation-message",11),H.SDv(17,12),H.qZA(),H.qZA(),H.YNc(18,Wu,23,4,"div",13),H.qZA(),H.qZA()),2&e)&&(H.Q6J("formGroup",t.form)("state",H.lcZ(1,9,H.lcZ(2,11,t.form))),H.xp6(4),H.Q6J("icon",H.lcZ(5,13,H.xi3(6,15,t.form,"thresholds"))),H.xp6(6),H.Q6J("title",t.getThresholdsSubtitle(null==(i=t.form.get("showThresholds"))?null:i.value)),H.xp6(1),H.Oqu(t.getThresholdsSubtitle(null==(n=t.form.get("showThresholds"))?null:n.value)),H.xp6(2),H.Q6J("control",t.form.get("showThresholds")),H.xp6(1),H.Q6J("value",t.radioButtonGroupValue),H.xp6(1),H.Q6J("ngForOf",t.thresholdOptions),H.xp6(3),H.Q6J("ngIf",null==(r=t.form.get("showThresholds"))?null:r.value))},directives:[pu.J,X.JL,X.sg,j.oJW,j.hgI,j.wTj,X.JJ,X.u,X.Q7,V.sg,j.CfE,V.O5,j.UKb,j.I5I,j.bK4],pipes:[V.Ov,Cu.F,xu.d],styles:[".kpi-thresholds-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}();function Uu(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",23),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i),H.xp6(1),H.hij(" ",i.name," ")}}function Gu(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",23),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i.id),H.xp6(1),H.hij(" ",i.label," ")}}function Ku(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",23),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i.value),H.xp6(1),H.Oqu(i.label)}}var Xu=function(){var e=function(){function e(t,i,n,r){Oo(this,e),this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.eventBus=r,this.legendPlacements=[],this.timeSpans=[],this.availableChartTypes=[{label:$localize(ri||(ri=Zo(["Line"]))),value:_a.Line},{label:$localize(oi||(oi=Zo(["Stacked area"]))),value:_a.StackedArea},{label:$localize(si||(si=Zo(["Stacked % area"]))),value:_a.StackedPercentageArea},{label:$localize(ai||(ai=Zo(["Bar"]))),value:_a.StackedBar},{label:$localize(li||(li=Zo(["Status"]))),value:_a.StatusBar}],this.formReady=new H.vpe,this.destroy$=new jo.xQ,this.form=this.formBuilder.group({leftAxisLabel:[""],startingTimespan:[null,X.kI.required],legendPlacement:[ne.w.None,[X.kI.required]],preset:[_a.Line,[X.kI.required]]})}return Fo(e,[{key:"ngOnInit",value:function(){var e,t=this;null===(e=this.form.get("startingTimespan"))||void 0===e||e.valueChanges.pipe((0,Wo.R)(this.destroy$)).subscribe(function(e){setTimeout(function(){t.eventBus.next(le.xZ,{payload:{id:le.RG}})})}),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i,n,r,o=this.form.get("startingTimespan");e.leftAxisLabel&&(null===(t=this.form.get("leftAxisLabel"))||void 0===t||t.setValue(this.leftAxisLabel,{emitEvent:!1})),e.startingTimespan&&(null==o||o.setValue(this.startingTimespan,{emitEvent:!1})),e.legendPlacement&&(null===(i=this.form.get("legendPlacement"))||void 0===i||i.setValue(this.legendPlacement,{emitEvent:!1})),e.preset&&(null===(n=this.form.get("preset"))||void 0===n||n.setValue(this.preset,{emitEvent:!1})),e.timeSpans&&!(null==o?void 0:o.value)&&(null===(r=this.timeSpans)||void 0===r?void 0:r.length)>0&&(null==o||o.setValue(this.timeSpans[0]))}},{key:"getSecondaryText",value:function(){var e=this.form.controls.startingTimespan.value;return"".concat(e&&e.name||$localize(ci||(ci=Zo(["No timespan"]))),", ").concat(this.form.controls.legendPlacement.value||$localize(ui||(ui=Zo(["No legend"]))),", ").concat(this.form.controls.leftAxisLabel.value||$localize(di||(di=Zo(["No y-axis label"]))))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.lateLoadKey="TimeseriesMetadataConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(zu.p),H.Y36(X.qu),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-timeseries-metadata-configuration"]],inputs:{legendPlacements:"legendPlacements",timeSpans:"timeSpans",startingTimespan:"startingTimespan",legendPlacement:"legendPlacement",leftAxisLabel:"leftAxisLabel",preset:"preset",availableChartTypes:"availableChartTypes"},outputs:{formReady:"formReady"},features:[H.TTD],decls:40,vars:37,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4"],[1,"nui-text-label"],$localize(pi||(pi=Zo([":\u241f82fac4002b38b13e6e76cab565857c651740e8d4\u241f7635587638460371959:Timeseries metadata"]))),[1,"nui-text-secondary",3,"title"],[1,"timeseries-metadata-configuration__accordion-content"],[1,"mb-4"],["caption",$localize(hi||(hi=Zo([":\u241f7c1e198b83571c6f6d6774bbf5e8ef469b8ed3f8\u241f83369046626581484:Starting timespan"]))),3,"control"],["placeholder",$localize(fi||(fi=Zo([":\u241fcea52b8401042ba9c3aac1cd5a7507d754f0d809\u241f4391839922437157830:Starting Timespan"]))),"formControlName","startingTimespan",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],$localize(gi||(gi=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),["caption",$localize(mi||(mi=Zo([":\u241fa9e3fc4b717bf285f084fc443a97f4c08b345203\u241f2498436426359230001:Chart legend"]))),3,"control"],["placeholder",$localize(vi||(vi=Zo([":\u241f8137d4a0a1b9974f796c96ea5b70f4ec4304af97\u241f9008417256629743113:Select Legend Orientation"]))),"formControlName","legendPlacement",3,"popupViewportMargin"],$localize(yi||(yi=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),["caption",$localize(bi||(bi=Zo([":\u241f20f8b383236e858a2369abf573aa3a662a61dc2c\u241f7603862017185374134:Chart y-axis label"]))),3,"control"],["formControlName","leftAxisLabel","placeholder",$localize(Ci||(Ci=Zo([":\u241fda1b3b8ad86495e008972fe0f8dfca60c9c60ac5\u241f5670370419656051485:Set chart y-axis label"])))],$localize(xi||(xi=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),["caption",$localize(wi||(wi=Zo([":\u241fd4821e6eaad5b45a36e2873de2a6e0075c4b7621\u241f8983610989099122824:Chart type"]))),3,"control"],["placeholder",$localize(ki||(ki=Zo([":\u241fd4821e6eaad5b45a36e2873de2a6e0075c4b7621\u241f8983610989099122824:Chart type"]))),"formControlName","preset",3,"popupViewportMargin"],$localize(Ti||(Ti=Zo([":\u241fb17406f843dc33feb81478ae8273dc1aae06bbf6\u241f2244196281006156184: This field is required "]))),[3,"value"]]},template:function(e,t){1&e&&(H.TgZ(0,"nui-widget-editor-accordion",0),H.ALo(1,"async"),H.ALo(2,"nuiWidgetEditorAccordionFormState"),H.TgZ(3,"div",1),H._UZ(4,"nui-icon",2),H.ALo(5,"async"),H.ALo(6,"nuiFormHeaderIconPipe"),H.ALo(7,"async"),H.ALo(8,"nuiFormHeaderIconPipe"),H.TgZ(9,"div",3),H.TgZ(10,"span",4),H.SDv(11,5),H.qZA(),H.TgZ(12,"div",6),H._uU(13),H.qZA(),H.qZA(),H.qZA(),H.TgZ(14,"div",7),H.TgZ(15,"div",8),H.TgZ(16,"nui-form-field",9),H.TgZ(17,"nui-select-v2",10),H.ALo(18,"async"),H.YNc(19,Uu,2,2,"nui-select-v2-option",11),H.qZA(),H.TgZ(20,"nui-validation-message",12),H.SDv(21,13),H.qZA(),H.qZA(),H.qZA(),H.TgZ(22,"div",8),H.TgZ(23,"nui-form-field",14),H.TgZ(24,"nui-select-v2",15),H.ALo(25,"async"),H.YNc(26,Gu,2,2,"nui-select-v2-option",11),H.qZA(),H.TgZ(27,"nui-validation-message",12),H.SDv(28,16),H.qZA(),H.qZA(),H.qZA(),H.TgZ(29,"div",8),H.TgZ(30,"nui-form-field",17),H._UZ(31,"nui-textbox",18),H.TgZ(32,"nui-validation-message",12),H.SDv(33,19),H.qZA(),H.qZA(),H.qZA(),H.TgZ(34,"nui-form-field",20),H.TgZ(35,"nui-select-v2",21),H.ALo(36,"async"),H.YNc(37,Ku,2,2,"nui-select-v2-option",11),H.qZA(),H.TgZ(38,"nui-validation-message",12),H.SDv(39,22),H.qZA(),H.qZA(),H.qZA(),H.qZA()),2&e&&(H.Q6J("formGroup",t.form)("state",H.lcZ(1,16,H.lcZ(2,18,t.form))),H.xp6(4),H.Q6J("icon",H.lcZ(5,20,H.xi3(6,22,t.form,"edit")))("iconColor",H.lcZ(7,25,H.Dn7(8,27,t.form,"gray",""))),H.xp6(8),H.Q6J("title",t.getSecondaryText()),H.xp6(1),H.Oqu(t.getSecondaryText()),H.xp6(3),H.Q6J("control",t.form.controls.startingTimespan),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(18,31,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.timeSpans),H.xp6(4),H.Q6J("control",t.form.controls.legendPlacement),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(25,33,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.legendPlacements),H.xp6(4),H.Q6J("control",t.form.controls.leftAxisLabel),H.xp6(4),H.Q6J("control",t.form.controls.preset),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(36,35,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.availableChartTypes))},directives:[pu.J,X.JL,X.sg,j.oJW,j.hgI,j.j_n,X.JJ,X.u,V.sg,j.CfE,j.XHW,j.rLF],pipes:[V.Ov,Cu.F,xu.d],styles:[".timeseries-metadata-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),e}(),ed=i(41450);function td(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",22),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i),H.xp6(1),H.hij(" ",i," ")}}function id(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",22),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i),H.xp6(1),H.hij(" ",i," ")}}function nd(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",22),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i),H.xp6(1),H.hij(" ",i," ")}}function rd(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",22),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i),H.xp6(1),H.hij(" ",i," ")}}function od(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",22),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i),H.xp6(1),H.hij(" ",i," ")}}var sd=function(){var e=function(){function e(t,i){Oo(this,e),this.changeDetector=t,this.formBuilder=i,this.formReady=new H.vpe,this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group({icon:"",status:"",detailedUrl:"",label:"",url:""})})}return Fo(e,[{key:"ngOnInit",value:function(){this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){e.dataFieldIds&&this.getFieldMappingsControl.setValue(e.dataFieldIds.currentValue)}},{key:"getFieldMappingsControl",get:function(){return this.form.get("dataFieldIds")}}]),e}();return e.lateLoadKey="EntityFormattingComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(X.qu))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-entity-formatting-configuration"]],inputs:{mappingKeys:"mappingKeys",dataFieldIds:"dataFieldIds"},outputs:{formReady:"formReady"},features:[H.TTD],decls:46,vars:17,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(Si||(Si=Zo([":\u241f38ddd26fc749a9c493e70c642d321c868c47f178\u241f5252376970414591923:Entity formatting"]))),["title","Show status icon",1,"nui-text-secondary"],["formGroupName","dataFieldIds",1,"entity-formatting__accordion-content"],[1,"mb-3"],$localize(Ii||(Ii=Zo([":\u241f14688213d67b2f0e553d66f8255281db245502fb\u241f3074987902485823708:Icon"]))),[1,"d-flex","flex-grow-1"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",$localize(_i||(_i=Zo([":\u241f42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c\u241f8325381706328570325:Select Item"]))),"formControlName","icon"],[3,"value",4,"ngFor","ngForOf"],$localize(Ai||(Ai=Zo([":\u241f81b97b8ea996ad1e4f9fca8415021850214884b1\u241f5611592591303869712:Status"]))),["placeholder",$localize(zi||(zi=Zo([":\u241f42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c\u241f8325381706328570325:Select Item"]))),"formControlName","status"],$localize(Zi||(Zi=Zo([":\u241f06ae2001bf7ffd3cbe977e0c4ce0951f660ca197\u241f4936125302941310356:Details URL"]))),["placeholder",$localize(Oi||(Oi=Zo([":\u241f42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c\u241f8325381706328570325:Select Item"]))),"formControlName","detailedUrl"],$localize(Pi||(Pi=Zo([":\u241f863226cffd5b66a6fee9810a9282a5006d6ef576\u241f4077520913910941990:Label"]))),["placeholder",$localize(Fi||(Fi=Zo([":\u241f42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c\u241f8325381706328570325:Select Item"]))),"formControlName","label"],$localize(Di||(Di=Zo([":\u241fec044db4c57a4750f8bec4371dc39e94f2e26d46\u241f994779223497739731:Label URL"]))),["placeholder",$localize($i||($i=Zo([":\u241f42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c\u241f8325381706328570325:Select Item"]))),"formControlName","url"],[3,"value"]]},template:function(e,t){1&e&&(H.TgZ(0,"nui-widget-editor-accordion",0),H.ALo(1,"async"),H.ALo(2,"nuiWidgetEditorAccordionFormState"),H.TgZ(3,"div",1),H._UZ(4,"nui-icon",2),H.TgZ(5,"div",3),H.TgZ(6,"span",4),H.SDv(7,5),H.qZA(),H.TgZ(8,"div",6),H._uU(9," Show status icon "),H.qZA(),H.qZA(),H.qZA(),H.TgZ(10,"div",7),H.TgZ(11,"div",8),H.TgZ(12,"label",4),H.SDv(13,9),H.qZA(),H.TgZ(14,"div",10),H.TgZ(15,"nui-form-field",11),H.TgZ(16,"nui-select-v2",12),H.YNc(17,td,2,2,"nui-select-v2-option",13),H.qZA(),H.qZA(),H.qZA(),H.qZA(),H.TgZ(18,"div",8),H.TgZ(19,"label",4),H.SDv(20,14),H.qZA(),H.TgZ(21,"div",10),H.TgZ(22,"nui-form-field",11),H.TgZ(23,"nui-select-v2",15),H.YNc(24,id,2,2,"nui-select-v2-option",13),H.qZA(),H.qZA(),H.qZA(),H.qZA(),H.TgZ(25,"div",8),H.TgZ(26,"label",4),H.SDv(27,16),H.qZA(),H.TgZ(28,"div",10),H.TgZ(29,"nui-form-field",11),H.TgZ(30,"nui-select-v2",17),H.YNc(31,nd,2,2,"nui-select-v2-option",13),H.qZA(),H.qZA(),H.qZA(),H.qZA(),H.TgZ(32,"div",8),H.TgZ(33,"label",4),H.SDv(34,18),H.qZA(),H.TgZ(35,"div",10),H.TgZ(36,"nui-form-field",11),H.TgZ(37,"nui-select-v2",19),H.YNc(38,rd,2,2,"nui-select-v2-option",13),H.qZA(),H.qZA(),H.qZA(),H.qZA(),H.TgZ(39,"div",8),H.TgZ(40,"label",4),H.SDv(41,20),H.qZA(),H.TgZ(42,"div",10),H.TgZ(43,"nui-form-field",11),H.TgZ(44,"nui-select-v2",21),H.YNc(45,od,2,2,"nui-select-v2-option",13),H.qZA(),H.qZA(),H.qZA(),H.qZA(),H.qZA(),H.qZA()),2&e&&(H.Q6J("formGroup",t.form)("state",H.lcZ(1,13,H.lcZ(2,15,t.form))),H.xp6(4),H.Q6J("icon","tag"),H.xp6(11),H.Q6J("control",t.getFieldMappingsControl.get("icon")),H.xp6(2),H.Q6J("ngForOf",t.mappingKeys),H.xp6(5),H.Q6J("control",t.getFieldMappingsControl.get("status")),H.xp6(2),H.Q6J("ngForOf",t.mappingKeys),H.xp6(5),H.Q6J("control",t.getFieldMappingsControl.get("detailedUrl")),H.xp6(2),H.Q6J("ngForOf",t.mappingKeys),H.xp6(5),H.Q6J("control",t.getFieldMappingsControl.get("label")),H.xp6(2),H.Q6J("ngForOf",t.mappingKeys),H.xp6(5),H.Q6J("control",t.getFieldMappingsControl.get("url")),H.xp6(2),H.Q6J("ngForOf",t.mappingKeys))},directives:[pu.J,X.JL,X.sg,j.oJW,X.x0,j.hgI,j.j_n,X.JJ,X.u,V.sg,j.rLF],pipes:[V.Ov,Cu.F],styles:[".entity-formatting__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),e}(),ad=i(93300),ld=i.n(ad);function cd(e,t){1&e&&(H.TgZ(0,"label",18),H.SDv(1,19),H.qZA())}function ud(e,t){1&e&&(H.TgZ(0,"label",20),H.SDv(1,21),H.qZA())}function dd(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",22),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i),H.xp6(1),H.hij(" ",i," ")}}function pd(e,t){if(1&e){var i=H.EpF();H.ynx(0),H.YNc(1,cd,2,0,"label",10),H.YNc(2,ud,2,0,"label",11),H.TgZ(3,"div",12),H.TgZ(4,"nui-form-field",13),H.TgZ(5,"nui-select-v2",14),H.YNc(6,dd,2,2,"nui-select-v2-option",15),H.qZA(),H.qZA(),H.TgZ(7,"div",16),H.TgZ(8,"button",17),H.NdJ("click",function(){var e=H.CHM(i).index;return H.oxw().removeRule(e)}),H.qZA(),H.qZA(),H.qZA(),H.BQk()}if(2&e){var n=t.$implicit,r=t.index,o=H.oxw();H.xp6(1),H.Q6J("ngIf",0!==r),H.xp6(1),H.Q6J("ngIf",0===r),H.xp6(2),H.Q6J("control",n),H.xp6(1),H.Q6J("formControlName",r),H.xp6(1),H.Q6J("ngForOf",o.selectData[r])}}function hd(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"button",23),H.NdJ("click",function(){return H.CHM(i),H.oxw().addGrouping()}),H.SDv(1,24),H.qZA()}}var fd=function(){var e=function(){function e(t,i,n){Oo(this,e),this.changeDetector=t,this.formBuilder=i,this.eventBus=n,this.formReady=new H.vpe,this.form=this.formBuilder.group({groups:[],groupBy:this.formBuilder.array([]),drillstate:[void 0]}),this.destroy$=new jo.xQ}return Fo(e,[{key:"getGroupByControl",get:function(){return this.form.get("groupBy")}},{key:"getDrillStateControl",get:function(){return this.form.get("drillstate")}},{key:"getGroupsControl",get:function(){return this.form.get("groups")}},{key:"ngOnInit",value:function(){var e=this;this.eventBus.getStream(_u.gg).pipe((0,Wo.R)(this.destroy$)).subscribe(function(t){return e.onDataSourceCreated(t)}),this.getGroupByControl.valueChanges.pipe((0,Wo.R)(this.destroy$)).subscribe(function(){return e.fillGroupsOptions()}),this.fillGroupsOptions(),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t=this;e.groups&&this.getGroupsControl.setValue(e.groups.currentValue),e.groupBy&&!e.groupBy.firstChange&&(this.getGroupByControl.clear(),this.groupBy.forEach(function(e){return t.getGroupByControl.push(t.createControl(e))}),this.fillGroupsOptions())}},{key:"createControl",value:function(e){return this.formBuilder.control(e||"",X.kI.required)}},{key:"addGrouping",value:function(){var e=this.createControl();this.getGroupByControl.push(e),this.fillGroupsOptions(),e.setValue(this.selectData[this.getGroupByControl.controls.length-1][0])}},{key:"removeRule",value:function(e){this.getGroupByControl.removeAt(e),this.fillGroupsOptions()}},{key:"isAddRestricted",value:function(){return this.selectData.some(function(e){return 1===e.length})}},{key:"getSubtitle",value:function(){var e,t=this.getGroupByControl.controls.map(function(e,t){return"".concat(0===t?"By":"then"," ").concat(e.value)}).join(", ");return 0===(null===(e=this.getGroupByControl)||void 0===e?void 0:e.value.length)?$localize(Mi||(Mi=Zo(["No groups"]))):$localize(Ri||(Ri=Zo(["",""])),t)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"onDataSourceCreated",value:function(e){var t,i,n,r=this;null===(n=null===(i=null===(t=null==e?void 0:e.payload)||void 0===t?void 0:t.dataFieldsConfig)||void 0===i?void 0:i.dataFields$)||void 0===n||n.pipe((0,Wo.R)(this.destroy$)).subscribe(function(e){var t;if(e){var i=e.map(function(e){return e.id});(ld()(r.groups,i).length||!(null===(t=r.groups)||void 0===t?void 0:t.length))&&(r.groups=i,r.getGroupsControl.setValue(i),r.getGroupByControl.clear(),r.getDrillStateControl.setValue([]),r.fillGroupsOptions())}})}},{key:"fillGroupsOptions",value:function(){var e=this;this.selectData=[];var t=this.getGroupByControl.value;this.getGroupByControl.controls.forEach(function(i,n){e.selectData[n]=[];var r=ld()(e.groups,t);t[n]&&e.selectData[n].push(t[n]),e.selectData[n]=[].concat(_o(e.selectData[n]),_o(r))})}}]),e}();return e.lateLoadKey="DrilldownConfiguratorComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(X.qu),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-grouping-configuration"]],inputs:{groups:"groups",groupBy:"groupBy"},outputs:{formReady:"formReady"},features:[H.TTD],decls:13,vars:11,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(Ji||(Ji=Zo([":\u241f8658ad3b268c50fe2c1106dfb7bccdaa2e4290b2\u241f877780134171662191:Grouping"]))),[1,"nui-text-secondary",3,"title"],["formArrayName","groupBy",1,"grouping-configuration__accordion-content"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click",4,"ngIf"],["class","d-flex nui-text-secondary mb-1",4,"ngIf"],["class","d-flex nui-text-panel mb-2",4,"ngIf"],[1,"d-flex","flex-row","flex-grow-1","mb-4"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",$localize(Li||(Li=Zo([":\u241f42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c\u241f8325381706328570325:Select Item"]))),3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"justify-content-center"],["nui-button","","icon","delete","displayStyle","action","type","button",3,"click"],[1,"d-flex","nui-text-secondary","mb-1"],$localize(Ei||(Ei=Zo([":\u241fe2feaa48e92bd996631d6a90911db46fe38cd1a3\u241f4620310062886462675:Then"]))),[1,"d-flex","nui-text-panel","mb-2"],$localize(qi||(qi=Zo([":\u241f788a575e9f2466abeee0e51ab8f77e9cf19243de\u241f3653048554215358825:Group by"]))),[3,"value"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],$localize(Bi||(Bi=Zo([":\u241fb8c2733945af01b52afbf8d2c9993bd9abda4c94\u241f3960498895552401303: Add another level "])))]},template:function(e,t){1&e&&(H.TgZ(0,"nui-widget-editor-accordion",0),H.ALo(1,"async"),H.ALo(2,"nuiWidgetEditorAccordionFormState"),H.TgZ(3,"div",1),H._UZ(4,"nui-icon",2),H.TgZ(5,"div",3),H.TgZ(6,"span",4),H.SDv(7,5),H.qZA(),H.TgZ(8,"div",6),H._uU(9),H.qZA(),H.qZA(),H.qZA(),H.TgZ(10,"div",7),H.YNc(11,pd,9,5,"ng-container",8),H.YNc(12,hd,2,0,"button",9),H.qZA(),H.qZA()),2&e&&(H.Q6J("formGroup",t.form)("state",H.lcZ(1,7,H.lcZ(2,9,t.form))),H.xp6(4),H.Q6J("icon","tag"),H.xp6(4),H.Q6J("title",t.getSubtitle()),H.xp6(1),H.hij(" ",t.getSubtitle()," "),H.xp6(2),H.Q6J("ngForOf",t.getGroupByControl.controls),H.xp6(1),H.Q6J("ngIf",!t.isAddRestricted()))},directives:[pu.J,X.JL,X.sg,j.oJW,X.CE,V.sg,V.O5,j.hgI,j.j_n,X.JJ,X.u,j.r0F,j.rLF],pipes:[V.Ov,Cu.F],styles:[".grouping-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}();function gd(e,t){1&e&&(H.TgZ(0,"div",4),H.TgZ(1,"nui-message",5),H.tHW(2,6),H._UZ(3,"b"),H.N_p(),H.qZA(),H.qZA()),2&e&&(H.xp6(1),H.Q6J("allowDismiss",!1))}var md=function(){var e=function(){function e(t,i,n,r){Oo(this,e),this.pizzagnaService=t,this.changeDetector=i,this.formBuilder=n,this.eventBus=r,this.tiles=[],this.formReady=new H.vpe}return Fo(e,[{key:"ngOnChanges",value:function(e){}},{key:"onFormReady",value:function(e){this.form=this.formBuilder.group({tiles:e}),this.emptyItems$=this.form.valueChanges.pipe((0,ia.U)(function(e){return 0===e.tiles.length})),this.formReady.emit(this.form)}},{key:"onItemsChange",value:function(e){var t=e.map(function(e){return e.id});this.pizzagnaService.createComponentsFromTemplate("tiles",t),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:ce.xW.Data,propertyPath:["tiles"]},e)}},{key:"addTile",value:function(){this.onItemsChange([].concat(_o(this.tiles),[{id:(0,j.VjN)("kpi"),componentType:Ao.lateLoadKey}]))}}]),e}();return e.lateLoadKey="KpiTilesConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(zo.p),H.Y36(H.sBO),H.Y36(X.qu),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-kpi-tiles-configuration-component"]],inputs:{componentId:"componentId",tiles:"tiles",nodes:"nodes"},outputs:{formReady:"formReady"},features:[H.TTD],decls:5,vars:5,consts:function(){return[[3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","kpi-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],$localize(Ni||(Ni=Zo([":\u241f3542ebba198b6d36d77f3e3d3d773057783457e6\u241f4207454798725809498:Add new value\n"]))),[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],$localize(Qi||(Qi=Zo([":\u241f7ca16fec6555e99e64e1cbd41a9ce7a4f4cae2fd\u241f4636957726236815999:",":START_BOLD_TEXT:At least one value must be added.",":CLOSE_BOLD_TEXT:"])),"\ufffd#3\ufffd","\ufffd/#3\ufffd")]},template:function(e,t){1&e&&(H.TgZ(0,"nui-items-dynamic",0),H.NdJ("itemsChange",function(e){return t.onItemsChange(e)})("formReady",function(e){return t.onFormReady(e)}),H.qZA(),H.YNc(1,gd,4,1,"div",1),H.ALo(2,"async"),H.TgZ(3,"button",2),H.NdJ("click",function(){return t.addTile()}),H.SDv(4,3),H.qZA()),2&e&&(H.Q6J("items",t.tiles)("nodes",t.nodes),H.xp6(1),H.Q6J("ngIf",H.lcZ(2,3,t.emptyItems$)&&t.form.touched))},directives:[Kc,V.O5,j.r0F,j.qqZ],pipes:[V.Ov],encapsulation:2,changeDetection:0}),e}(),vd=["metricsSelect"];function yd(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",9),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("displayValueContext",i.label)("value",i.id),H.xp6(1),H.hij(" ",i.label," ")}}function bd(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",1),H.TgZ(1,"div"),H.TgZ(2,"nui-form-field",2),H.TgZ(3,"nui-select-v2",3,4),H.TgZ(5,"nui-overlay-item",5),H.NdJ("click",function(){return H.CHM(i),H.oxw().unsetMetric()}),H._uU(6,"Unset"),H.qZA(),H.YNc(7,yd,2,3,"nui-select-v2-option",6),H.qZA(),H.TgZ(8,"nui-validation-message",7),H.SDv(9,8),H.qZA(),H.qZA(),H.qZA(),H.qZA()}if(2&e){var n=H.oxw();H.Q6J("formGroup",n.form),H.xp6(2),H.Q6J("control",n.form.controls.activeMetricId),H.xp6(5),H.Q6J("ngForOf",n.metrics)}}var Cd=function(){var e=function(){function e(t,i,n){Oo(this,e),this.changeDetector=t,this.formBuilder=i,this.logger=n,this.formReady=new H.vpe,this.form=this.formBuilder.group({activeMetricId:[]})}return Fo(e,[{key:"ngOnInit",value:function(){this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t;e.activeMetricId&&(null===(t=this.form.get("activeMetricId"))||void 0===t||t.setValue(e.activeMetricId.currentValue),this.metrics.find(function(t){return t.id===e.activeMetricId.currentValue})||this.logger.warn("AggregatorMetricSelectorConfigurationComponent: No metric found for id: ".concat(e.activeMetricId.currentValue)))}},{key:"unsetMetric",value:function(){this.form.controls.activeMetricId.reset(),this.meticsSelect.hideDropdown()}}]),e}();return e.lateLoadKey="AggregatorMetricSelectorConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(X.qu),H.Y36(j.mQy))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-aggregator-configurator"]],viewQuery:function(e,t){var i;(1&e&&H.Gf(vd,5),2&e)&&(H.iGM(i=H.CRH())&&(t.meticsSelect=i.first))},inputs:{metrics:"metrics",activeMetricId:"activeMetricId"},outputs:{formReady:"formReady"},features:[H.TTD],decls:1,vars:1,consts:function(){return[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["caption",$localize(Yi||(Yi=Zo([":\u241ff43d8212e6ffbc04ea0190118e7f893824ec2686\u241f8120854355855055890:Default Metric"]))),1,"mb-3",3,"control"],["formControlName","activeMetricId","placeholder",$localize(Vi||(Vi=Zo([":\u241f25b479494f612322c149610b9b2e3cd4c782c313\u241f4594093405818643397:Select Value"])))],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],$localize(ji||(ji=Zo([":\u241fb17406f843dc33feb81478ae8273dc1aae06bbf6\u241f2244196281006156184: This field is required "]))),[3,"displayValueContext","value"]]},template:function(e,t){1&e&&H.YNc(0,bd,10,3,"div",0),2&e&&H.Q6J("ngIf",t.form)},directives:[V.O5,X.JL,X.sg,j.hgI,j.j_n,X.JJ,X.u,j.A4p,V.sg,j.CfE,j.rLF],encapsulation:2,changeDetection:0}),e}();function xd(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",13),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("displayValueContext",i.label)("value",i.id),H.xp6(1),H.hij(" ",i.label," ")}}function wd(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",13),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("displayValueContext",i.label)("value",i.id),H.xp6(1),H.hij(" ",i.label," ")}}function kd(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"div",1),H.TgZ(1,"div",2),H.TgZ(2,"nui-form-field",3),H.TgZ(3,"nui-select-v2",4,5),H.TgZ(5,"nui-overlay-item",6),H.NdJ("click",function(){return H.CHM(i),H.oxw().unsetMetric()}),H._uU(6,"Unset"),H.qZA(),H.YNc(7,xd,2,3,"nui-select-v2-option",7),H.qZA(),H.TgZ(8,"nui-validation-message",8),H.SDv(9,9),H.qZA(),H.qZA(),H.qZA(),H.TgZ(10,"div",2),H.TgZ(11,"nui-form-field",10),H.TgZ(12,"nui-select-v2",11),H.YNc(13,wd,2,3,"nui-select-v2-option",7),H.qZA(),H.TgZ(14,"nui-validation-message",8),H.SDv(15,12),H.qZA(),H.qZA(),H.qZA(),H.qZA()}if(2&e){var n=H.oxw();H.Q6J("formGroup",n.form),H.xp6(2),H.Q6J("control",n.form.controls.activeMetricId),H.xp6(5),H.Q6J("ngForOf",n.metrics),H.xp6(4),H.Q6J("control",n.form.controls.chartSeriesDataFieldId),H.xp6(2),H.Q6J("ngForOf",n.chartSeriesDataFields)}}var Td={id:"data[0]",label:"data",dataType:null},Sd=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){var s;return Oo(this,i),(s=t.call(this,e,n,r)).eventBus=o,s.chartSeriesDataFields=[Td],s.form=s.formBuilder.group({activeMetricId:[],chartSeriesDataFieldId:[]}),s.destroy$=new jo.xQ,s.eventBus.getStream(_u.gg).pipe((0,Wo.R)(s.destroy$)).subscribe(function(e){var t,i,n=e.payload;n&&(null===(i=null===(t=n.dataFieldsConfig)||void 0===t?void 0:t.chartSeriesDataFields$)||void 0===i||i.pipe((0,Wo.R)(s.destroy$)).subscribe(function(e){return s.chartSeriesDataFields=e}))}),s}return Fo(i,[{key:"ngOnChanges",value:function(e){var t;bo(Io(i.prototype),"ngOnChanges",this).call(this,e),e.chartSeriesDataFieldId&&(null===(t=this.form.get("chartSeriesDataFieldId"))||void 0===t||t.setValue(e.chartSeriesDataFieldId.currentValue))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),i}(Cd);return e.lateLoadKey="FieldMapperAggregatorConfiguratorComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(X.qu),H.Y36(j.mQy),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-field-mapper-aggregator-configurator"]],inputs:{chartSeriesDataFieldId:"chartSeriesDataFieldId"},features:[H.qOj,H.TTD],decls:1,vars:1,consts:function(){return[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"mb-4"],["caption",$localize(Wi||(Wi=Zo([":\u241ff43d8212e6ffbc04ea0190118e7f893824ec2686\u241f8120854355855055890:Default Metric"]))),1,"mb-4",3,"control"],["formControlName","activeMetricId","placeholder",$localize(Hi||(Hi=Zo([":\u241f25b479494f612322c149610b9b2e3cd4c782c313\u241f4594093405818643397:Select Value"])))],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],$localize(Ui||(Ui=Zo([":\u241fb17406f843dc33feb81478ae8273dc1aae06bbf6\u241f2244196281006156184: This field is required "]))),["caption",$localize(Gi||(Gi=Zo([":\u241f8e67f0d2aff5ba1a2d509b591efa53a4d2076369\u241f5258061076548910132:Chart Series Data Field"]))),1,"mb-4",3,"control"],["formControlName","chartSeriesDataFieldId","placeholder",$localize(Ki||(Ki=Zo([":\u241f25b479494f612322c149610b9b2e3cd4c782c313\u241f4594093405818643397:Select Value"])))],$localize(Xi||(Xi=Zo([":\u241fb17406f843dc33feb81478ae8273dc1aae06bbf6\u241f2244196281006156184: This field is required "]))),[3,"displayValueContext","value"]]},template:function(e,t){1&e&&H.YNc(0,kd,16,5,"div",0),2&e&&H.Q6J("ngIf",t.form)},directives:[V.O5,X.JL,X.sg,j.hgI,j.j_n,X.JJ,X.u,j.A4p,V.sg,j.CfE,j.rLF],encapsulation:2,changeDetection:0}),e}();function Id(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",22),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("displayValueContext",i.label)("value",i.id),H.xp6(1),H.hij(" ",i.label," ")}}function _d(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",23),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i.id),H.xp6(1),H.hij(" ",i.label," ")}}function Ad(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",23),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i.componentType),H.xp6(1),H.hij(" ",i.label," ")}}var zd=function(){var e=function(){function e(t,i,n,r){var o=this;Oo(this,e),this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.formReady=new H.vpe,this.form=this.formBuilder.group({type:[void 0,X.kI.required],legendPlacement:[void 0],legendFormatter:this.formBuilder.group({componentType:[void 0]})}),this.chartTypeChanged$=new jo.xQ,this.destroy$=new jo.xQ,this.legendFormatters=r.getItems(),this.form.controls.type.valueChanges.pipe((0,Wo.R)(this.destroy$)).subscribe(function(e){return o.chartTypeChanged$.next(e)})}return Fo(e,[{key:"ngOnInit",value:function(){this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t;e.type&&this.form.controls.type.setValue(e.type.currentValue),e.legendPlacement&&this.form.controls.legendPlacement.setValue(e.legendPlacement.currentValue),e.legendFormatter&&(null===(t=this.form.get("legendFormatter.componentType"))||void 0===t||t.setValue(e.legendFormatter.currentValue.componentType))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete(),this.chartTypeChanged$.complete()}},{key:"chartTitle",get:function(){var e,t=null===(e=this.form.get("type"))||void 0===e?void 0:e.value,i=this.chartTypes.find(function(e){return e.id===t});return null==i?void 0:i.label}},{key:"legendFormatterControl",get:function(){return this.form.get("legendFormatter.componentType")}}]),e}();return e.lateLoadKey="ProportionalChartOptionsEditorV2Component",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(zu.p),H.Y36(X.qu),H.Y36(us.qy))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-proportional-chart-options-editor-v2-component"]],inputs:{type:"type",legendPlacement:"legendPlacement",legendFormatter:"legendFormatter",chartTypes:"chartTypes",legendPlacementOptions:"legendPlacementOptions"},outputs:{formReady:"formReady"},features:[H.TTD],decls:35,vars:31,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(en||(en=Zo([":\u241ff3ecd72a8d0f15303a8f7f61c278783962a6d00c\u241f4926288099895660391:Chart Options"]))),[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",$localize(tn||(tn=Zo([":\u241ff2102c0b996b067ab2a46c7743fe5931fa47f16d\u241f7337152278540773645:Chart Type"]))),3,"control"],["placeholder",$localize(nn||(nn=Zo([":\u241f35a0bc25979ae578aea9594e8c587200628713e1\u241f5551943712413491013:Select chart type"]))),"formControlName","type",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],$localize(rn||(rn=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),["caption",$localize(on||(on=Zo([":\u241f5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5\u241f7297822327994766046:Legend"]))),3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],$localize(sn||(sn=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),["formGroupName","legendFormatter"],["caption",$localize(an||(an=Zo([":\u241f7f0b920b08ab06e490eff4f718ef3fecc87a719b\u241f5989769742900149410:Legend format"]))),3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],$localize(ln||(ln=Zo([":\u241fc9a9da14b0f8c677efa737185f1232f8537bd2a6\u241f3224868488156254475: This field is required "]))),[3,"displayValueContext","value"],[3,"value"]]},template:function(e,t){1&e&&(H.TgZ(0,"nui-widget-editor-accordion",0),H.ALo(1,"async"),H.ALo(2,"nuiWidgetEditorAccordionFormState"),H.TgZ(3,"div",1),H._UZ(4,"nui-icon",2),H.ALo(5,"async"),H.ALo(6,"nuiFormHeaderIconPipe"),H.TgZ(7,"div",3),H.TgZ(8,"span",4),H.SDv(9,5),H.qZA(),H.TgZ(10,"div",6),H._uU(11),H.qZA(),H.qZA(),H.qZA(),H.TgZ(12,"div",7),H.TgZ(13,"div",8),H.TgZ(14,"nui-form-field",9),H.TgZ(15,"nui-select-v2",10),H.ALo(16,"async"),H.YNc(17,Id,2,3,"nui-select-v2-option",11),H.qZA(),H.TgZ(18,"nui-validation-message",12),H.SDv(19,13),H.qZA(),H.qZA(),H.qZA(),H.TgZ(20,"div",8),H.TgZ(21,"nui-form-field",14),H.TgZ(22,"nui-select-v2",15),H.ALo(23,"async"),H.YNc(24,_d,2,2,"nui-select-v2-option",16),H.qZA(),H.TgZ(25,"nui-validation-message",12),H.SDv(26,17),H.qZA(),H.qZA(),H.qZA(),H.TgZ(27,"div",8),H.ynx(28,18),H.TgZ(29,"nui-form-field",19),H.TgZ(30,"nui-select-v2",20),H.ALo(31,"async"),H.YNc(32,Ad,2,2,"nui-select-v2-option",16),H.qZA(),H.TgZ(33,"nui-validation-message",12),H.SDv(34,21),H.qZA(),H.qZA(),H.BQk(),H.qZA(),H.qZA(),H.qZA()),2&e&&(H.Q6J("formGroup",t.form)("state",H.lcZ(1,16,H.lcZ(2,18,t.form))),H.xp6(4),H.Q6J("icon",H.lcZ(5,20,H.xi3(6,22,t.form,"widget_pie-chart"))),H.xp6(6),H.Q6J("title",t.chartTitle),H.xp6(1),H.hij(" ",t.chartTitle," "),H.xp6(3),H.Q6J("control",t.form.controls.type),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(16,25,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.chartTypes),H.xp6(4),H.Q6J("showOptionalText",!1)("control",t.form.controls.legendPlacement),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(23,27,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.legendPlacementOptions),H.xp6(5),H.Q6J("showOptionalText",!1)("control",t.legendFormatterControl),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(31,29,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.legendFormatters))},directives:[pu.J,X.JL,X.sg,j.oJW,j.hgI,j.j_n,X.JJ,X.u,V.sg,j.CfE,X.x0,j.rLF],pipes:[V.Ov,Cu.F,xu.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}();function Zd(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",22),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i.value),H.xp6(1),H.hij(" ",i.label," ")}}function Od(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",22),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i.componentType),H.xp6(1),H.hij(" ",i.label," ")}}function Pd(e,t){}var Fd=function(){return["formReady"]};function Dd(e,t){if(1&e){var i=H.EpF();H.ynx(0,27,28),H.NdJ("output",function(e){return H.CHM(i),H.oxw(2).onFormReady(e.payload)}),H.YNc(2,Pd,0,0,"ng-template",29),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(1).attached(e)}),H.BQk()}if(2&e){var n=H.MAs(1),r=H.oxw(2);H.Q6J("componentId",r.getConfigurationComponent())("componentType",r.getConfigurationComponent())("properties",r.configurationComponentProperties)("outputs",H.DdM(5,Fd)),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}function $d(e,t){if(1&e&&(H.ynx(0,23),H.TgZ(1,"nui-form-field",24),H.TgZ(2,"nui-select-v2",20),H.ALo(3,"async"),H.YNc(4,Od,2,2,"nui-select-v2-option",11),H.qZA(),H.TgZ(5,"nui-validation-message",12),H.SDv(6,25),H.qZA(),H.qZA(),H.YNc(7,Dd,3,6,"ng-container",26),H.BQk()),2&e){var i=H.oxw();H.xp6(1),H.Q6J("showOptionalText",!1)("control",i.form.controls.componentType),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(3,5,i.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",i.contentFormatters),H.xp6(3),H.Q6J("ngIf",!!i.getConfigurationComponent())}}function Md(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",22),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i.id),H.xp6(1),H.hij(" ",i.label," ")}}function Rd(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",22),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i.componentType),H.xp6(1),H.hij(" ",i.label," ")}}var Jd=(yo(n={},ks.DonutChart,$localize(cn||(cn=Zo(["Donut"])))),yo(n,ks.PieChart,$localize(un||(un=Zo(["Pie"])))),yo(n,ks.VerticalBarChart,$localize(dn||(dn=Zo(["Vertical Bar"])))),yo(n,ks.HorizontalBarChart,$localize(pn||(pn=Zo(["Horizontal Bar"])))),n),Ld=function(){var e=function(){function e(t,i,n){Oo(this,e),this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.legendPlacement=ne.w.None,this.formReady=new H.vpe,this.chartTypeNamesMap=Jd,this.legendFormatters=[],this.contentFormatters=[],this.formatterHasConfigurationComponent=!1,this.currentConfigurationComponent="",this.chartFormatters=[],this.cachedChartOptionsViewModels=[],this.rawFormatter={componentType:"",label:$localize(hn||(hn=Zo(["Raw"]))),dataTypes:{value:null}}}return Fo(e,[{key:"chartTypeSelectViewModels",get:function(){var e,t,i,n=this;return(!this.cachedChartOptionsViewModels||this.cachedChartOptionsViewModels.length!==(null===(t=null===(e=this.chartOptions)||void 0===e?void 0:e.chartTypes)||void 0===t?void 0:t.length))&&(this.cachedChartOptionsViewModels=((null===(i=this.chartOptions)||void 0===i?void 0:i.chartTypes)||[]).map(function(e){return{label:n.chartTypeNamesMap[e],value:e}})),this.cachedChartOptionsViewModels}},{key:"chartTitle",get:function(){return this.chartTypeNamesMap[this.form.controls.type.value]}},{key:"getConfigurationComponent",value:function(){var e;return(null===(e=this.getCurrentFormatterDefinition())||void 0===e?void 0:e.configurationComponent)||""}},{key:"getConfigurationComponentProperties",value:function(){this.configurationComponentProperties={contentFormatterProperties:this.contentFormatterProperties,contentFormatterDefinition:this.getCurrentFormatterDefinition(),dsOutput:this.dsOutput}}},{key:"getCurrentFormatterDefinition",value:function(){var e,t=null===(e=this.form.get("contentFormatter.componentType"))||void 0===e?void 0:e.value;return this.contentFormatters.find(function(e){return e.componentType===t})}},{key:"ngOnInit",value:function(){this.form=this.formBuilder.group({type:[this.chartType||"",X.kI.required],legendPlacement:this.legendPlacement,legendFormatter:this.formBuilder.group({componentType:this.legendFormatterComponentType||this.rawFormatter.componentType}),contentFormatter:this.formBuilder.group({componentType:this.contentFormatterComponentType})}),this.legendFormatters=[this.rawFormatter].concat(_o(this.chartOptions.legendFormatters||[])),this.contentFormatters=_o(this.chartOptions.contentFormatters||[]),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i,n,r;e.chartType&&!e.chartType.isFirstChange()&&(null===(t=this.form.get("type"))||void 0===t||t.setValue(e.chartType.currentValue)),e.legendPlacement&&!e.legendPlacement.isFirstChange()&&(null===(i=this.form.get("legendPlacement"))||void 0===i||i.setValue(e.legendPlacement.currentValue)),e.legendFormatterComponentType&&!e.legendFormatterComponentType.isFirstChange()&&(null===(n=this.form.get("legendFormatter").get("componentType"))||void 0===n||n.setValue(this.legendFormatterComponentType)),e.contentFormatterComponentType&&!e.contentFormatterComponentType.isFirstChange()&&(null===(r=this.form.get("contentFormatter").get("componentType"))||void 0===r||r.setValue(this.contentFormatterComponentType)),this.form&&this.getConfigurationComponentProperties()}},{key:"onFormReady",value:function(e){this.form.get("contentFormatter").setControl("properties",e)}}]),e}();return e.lateLoadKey="ProportionalChartOptionsEditorComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(zu.p),H.Y36(X.qu))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-proportional-chart-options-editor-component"]],inputs:{chartOptions:"chartOptions",chartType:"chartType",legendPlacement:"legendPlacement",legendFormatterComponentType:"legendFormatterComponentType",contentFormatterComponentType:"contentFormatterComponentType",contentFormatterProperties:"contentFormatterProperties",dsOutput:"dsOutput"},outputs:{formReady:"formReady"},features:[H.TTD],decls:36,vars:32,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(fn||(fn=Zo([":\u241ff3ecd72a8d0f15303a8f7f61c278783962a6d00c\u241f4926288099895660391:Chart Options"]))),[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",$localize(gn||(gn=Zo([":\u241ff2102c0b996b067ab2a46c7743fe5931fa47f16d\u241f7337152278540773645:Chart Type"]))),3,"control"],["formControlName","type","placeholder",$localize(mn||(mn=Zo([":\u241f35a0bc25979ae578aea9594e8c587200628713e1\u241f5551943712413491013:Select chart type"]))),3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],$localize(vn||(vn=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),["formGroupName","contentFormatter",4,"ngIf"],["caption",$localize(yn||(yn=Zo([":\u241f5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5\u241f7297822327994766046:Legend"]))),3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],$localize(bn||(bn=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),["formGroupName","legendFormatter"],["caption",$localize(Cn||(Cn=Zo([":\u241f7f0b920b08ab06e490eff4f718ef3fecc87a719b\u241f5989769742900149410:Legend format"]))),3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],$localize(xn||(xn=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),[3,"value"],["formGroupName","contentFormatter"],["caption",$localize(wn||(wn=Zo([":\u241f7aad3a4ab45c0132aefc2da9c78cde45d3593850\u241f4108378864701615700:Content format"]))),1,"mb-4",3,"showOptionalText","control"],$localize(kn||(kn=Zo([":\u241fc9a9da14b0f8c677efa737185f1232f8537bd2a6\u241f3224868488156254475: This field is required "]))),["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output",4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(e,t){var i;(1&e&&(H.TgZ(0,"nui-widget-editor-accordion",0),H.ALo(1,"async"),H.ALo(2,"nuiWidgetEditorAccordionFormState"),H.TgZ(3,"div",1),H._UZ(4,"nui-icon",2),H.ALo(5,"async"),H.ALo(6,"nuiFormHeaderIconPipe"),H.TgZ(7,"div",3),H.TgZ(8,"span",4),H.SDv(9,5),H.qZA(),H.TgZ(10,"div",6),H._uU(11),H.qZA(),H.qZA(),H.qZA(),H.TgZ(12,"div",7),H.TgZ(13,"div",8),H.TgZ(14,"nui-form-field",9),H.TgZ(15,"nui-select-v2",10),H.ALo(16,"async"),H.YNc(17,Zd,2,2,"nui-select-v2-option",11),H.qZA(),H.TgZ(18,"nui-validation-message",12),H.SDv(19,13),H.qZA(),H.qZA(),H.qZA(),H.TgZ(20,"div",8),H.YNc(21,$d,8,7,"ng-container",14),H.qZA(),H.TgZ(22,"div",8),H.TgZ(23,"nui-form-field",15),H.TgZ(24,"nui-select-v2",16),H.ALo(25,"async"),H.YNc(26,Md,2,2,"nui-select-v2-option",11),H.qZA(),H.TgZ(27,"nui-validation-message",12),H.SDv(28,17),H.qZA(),H.qZA(),H.qZA(),H.ynx(29,18),H.TgZ(30,"nui-form-field",19),H.TgZ(31,"nui-select-v2",20),H.ALo(32,"async"),H.YNc(33,Rd,2,2,"nui-select-v2-option",11),H.qZA(),H.TgZ(34,"nui-validation-message",12),H.SDv(35,21),H.qZA(),H.qZA(),H.BQk(),H.qZA(),H.qZA()),2&e)&&(H.Q6J("formGroup",t.form)("state",H.lcZ(1,17,H.lcZ(2,19,t.form))),H.xp6(4),H.Q6J("icon",H.lcZ(5,21,H.xi3(6,23,t.form,"widget_pie-chart"))),H.xp6(6),H.Q6J("title",t.chartTitle),H.xp6(1),H.hij(" ",t.chartTitle," "),H.xp6(3),H.Q6J("control",t.form.controls.type),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(16,26,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.chartTypeSelectViewModels),H.xp6(4),H.Q6J("ngIf","DonutChart"===(null==(i=t.form.get("type"))?null:i.value)),H.xp6(2),H.Q6J("showOptionalText",!1)("control",t.form.controls.legendPlacement),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(25,28,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.chartOptions.legendPlacementOptions),H.xp6(4),H.Q6J("showOptionalText",!1)("control",t.form.controls.componentType),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(32,30,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.legendFormatters))},directives:[pu.J,X.JL,X.sg,j.oJW,j.hgI,j.j_n,X.JJ,X.u,V.sg,j.CfE,V.O5,X.x0,j.rLF,pe.$,he.Pl],pipes:[V.Ov,Cu.F,xu.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}();function Ed(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",18),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("displayValueContext",i.label)("value",i.aggregatorType),H.xp6(1),H.hij(" ",i.label," ")}}function qd(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",18),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("displayValueContext",i.label)("value",i.componentType),H.xp6(1),H.hij(" ",i.label," ")}}function Bd(e,t){}var Nd=function(){return["formReady"]};function Qd(e,t){if(1&e){var i=H.EpF();H.ynx(0,19,20),H.NdJ("output",function(e){return H.CHM(i),H.oxw(2).onFormReady("aggregator",e.payload)}),H.YNc(2,Bd,0,0,"ng-template",21),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(1).attached(e)}),H.BQk()}if(2&e){var n=H.MAs(1),r=H.oxw(2);H.Q6J("componentType",null==r.currentAggregatorDefinition?null:r.currentAggregatorDefinition.configurationComponent)("properties",r.aggregatorConfiguratorProps)("outputs",H.DdM(4,Nd)),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}function Yd(e,t){}function Vd(e,t){if(1&e){var i=H.EpF();H.ynx(0,19,20),H.NdJ("output",function(e){return H.CHM(i),H.oxw(2).onFormReady("formatter",e.payload)}),H.YNc(2,Yd,0,0,"ng-template",21),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(1).attached(e)}),H.BQk()}if(2&e){var n=H.MAs(1),r=H.oxw(2);H.Q6J("componentType",null==r.currentFormatterDefinition?null:r.currentFormatterDefinition.configurationComponent)("properties",r.formatterConfiguratorProps)("outputs",H.DdM(4,Nd)),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}function jd(e,t){if(1&e&&(H.ynx(0,1),H.TgZ(1,"nui-widget-editor-accordion",2),H.ALo(2,"async"),H.ALo(3,"nuiWidgetEditorAccordionFormState"),H.TgZ(4,"div",3),H._UZ(5,"nui-icon",4),H.ALo(6,"async"),H.ALo(7,"nuiFormHeaderIconPipe"),H.TgZ(8,"div",5),H.TgZ(9,"span",6),H.SDv(10,7),H.qZA(),H.TgZ(11,"div",8),H._uU(12),H.qZA(),H.qZA(),H.qZA(),H.TgZ(13,"div",9),H.TgZ(14,"div",10),H.TgZ(15,"nui-form-field",11),H.TgZ(16,"nui-select-v2",12),H.YNc(17,Ed,2,3,"nui-select-v2-option",13),H.qZA(),H.qZA(),H.qZA(),H.TgZ(18,"div",14),H.TgZ(19,"nui-form-field",15),H.TgZ(20,"nui-select-v2",16),H.YNc(21,qd,2,3,"nui-select-v2-option",13),H.qZA(),H.qZA(),H.qZA(),H.YNc(22,Qd,3,5,"ng-container",17),H.YNc(23,Vd,3,5,"ng-container",17),H.qZA(),H.qZA(),H.BQk()),2&e){var i=H.oxw();H.Q6J("formGroup",i.form),H.xp6(1),H.Q6J("state",H.lcZ(2,11,H.lcZ(3,13,i.form))),H.xp6(4),H.Q6J("icon",H.lcZ(6,15,H.xi3(7,17,i.form,"customize"))),H.xp6(6),H.Q6J("title",i.subtitleText),H.xp6(1),H.hij(" ",i.subtitleText," "),H.xp6(3),H.Q6J("control",i.form.get("aggregator.aggregatorType")),H.xp6(2),H.Q6J("ngForOf",i.aggregators),H.xp6(2),H.Q6J("control",i.form.get("formatter.componentType")),H.xp6(2),H.Q6J("ngForOf",i.formatters),H.xp6(1),H.Q6J("ngIf",null==i.currentAggregatorDefinition?null:i.currentAggregatorDefinition.configurationComponent),H.xp6(1),H.Q6J("ngIf",null==i.currentFormatterDefinition?null:i.currentFormatterDefinition.configurationComponent)}}var Wd=function(){var e=function(){function e(t,i,n,r,o){Oo(this,e),this.formBuilder=t,this.changeDetector=i,this.eventBus=n,this.contentFormattersRegistry=r,this.aggregatorRegistry=o,this.formReady=new H.vpe,this.shown=!0,this.form=this.formBuilder.group({formatter:this.formBuilder.group({componentType:[void 0],properties:[]}),aggregator:this.formBuilder.group({aggregatorType:[void 0],properties:[]})}),this.dataFields=[],this.destroy$=new jo.xQ}return Fo(e,[{key:"ngOnInit",value:function(){var e=this;this.watchFormChanges(),this.setFromRegistry(),this.eventBus.getStream(_u.gg).pipe((0,Wo.R)(this.destroy$)).subscribe(function(t){var i,n=t.payload;n&&(null===(i=n.dataFieldsConfig)||void 0===i||i.dataFields$.pipe((0,Wo.R)(e.destroy$)).subscribe(function(t){e.dataFields=t,e.updateAggregatorConfiguratorProps()}))}),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i;e.formatter&&(null===(t=this.form.get("formatter"))||void 0===t||t.patchValue(Object.assign({},e.formatter.currentValue))),e.aggregator&&(null===(i=this.form.get("aggregator"))||void 0===i||i.patchValue(Object.assign({},e.aggregator.currentValue))),e.chartType&&(this.shown=e.chartType.currentValue===ks.DonutChart)}},{key:"ngOnDestroy",value:function(){this.destroy$.complete()}},{key:"onFormReady",value:function(e,t){this.form.get(e).setControl("properties",t)}},{key:"subtitleText",get:function(){var e,t;return"".concat(null===(e=this.currentAggregatorDefinition)||void 0===e?void 0:e.label,", ").concat(null===(t=this.currentFormatterDefinition)||void 0===t?void 0:t.label)}},{key:"setFromRegistry",value:function(){var e,t,i=this;this.formatters=this.contentFormattersRegistry.getItems(),this.aggregators=this.aggregatorRegistry.getItems();var n=this.formatters.find(function(e){var t;return e.componentType===(null===(t=i.formatter)||void 0===t?void 0:t.componentType)});n||(n=this.formatters[0]),null===(e=this.form.get("formatter.componentType"))||void 0===e||e.setValue(n.componentType);var r=this.aggregators.find(function(e){var t;return e.aggregatorType===(null===(t=i.aggregator)||void 0===t?void 0:t.aggregatorType)});r||(r=this.aggregators[0]),null===(t=this.form.get("aggregator.aggregatorType"))||void 0===t||t.setValue(r.aggregatorType)}},{key:"watchFormChanges",value:function(){var e,t,i=this;null===(e=this.form.get("aggregator.aggregatorType"))||void 0===e||e.valueChanges.pipe((0,Wo.R)(this.destroy$)).subscribe(function(e){i.currentAggregatorDefinition=i.aggregators.find(function(t){return t.aggregatorType===e}),i.updateAggregatorConfiguratorProps()}),null===(t=this.form.get("formatter.componentType"))||void 0===t||t.valueChanges.pipe((0,Wo.R)(this.destroy$)).subscribe(function(e){i.currentFormatterDefinition=i.formatters.find(function(t){return t.componentType===e}),i.updateAggregatorConfiguratorProps()})}},{key:"updateAggregatorConfiguratorProps",value:function(){var e,t;this.aggregatorConfiguratorProps=Object.assign(Object.assign(Object.assign({},null===(e=this.currentAggregatorDefinition)||void 0===e?void 0:e.properties),null===(t=this.aggregator)||void 0===t?void 0:t.properties),{metrics:this.dataFields})}}]),e}();return e.lateLoadKey="DonutContentConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(X.qu),H.Y36(H.sBO),H.Y36(ce.nY),H.Y36(us.UA),H.Y36(hs))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-donut-content-configuration"]],inputs:{chartType:"chartType",formatter:"formatter",aggregator:"aggregator"},outputs:{formReady:"formReady"},features:[H.TTD],decls:1,vars:1,consts:function(){return[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(Tn||(Tn=Zo([":\u241fc488fe848f6a00cefad87ff595b384e4e0f7ff1d\u241f2010665105219070274:Donut Content Configuration"]))),[1,"nui-text-secondary",3,"title"],[1,"donut-content-configuration__accordion-content"],["formGroupName","aggregator",1,"mb-4"],["caption",$localize(Sn||(Sn=Zo([":\u241f87181c5142c58c027d97ac0f37b9c6bb78b624cd\u241f6056551297792932760:Aggregate"]))),3,"control"],["placeholder",$localize(In||(In=Zo([":\u241f408b4f352f2fec5727e6df77cb926194384bbba0\u241f736196504450716827:Select Format"]))),"formControlName","aggregatorType"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["formGroupName","formatter",1,"mb-4"],["caption",$localize(_n||(_n=Zo([":\u241f7722a92a1fc887570b4f4d8a7bb916f067f32028\u241f7513076467032912668:Format"]))),3,"control"],["placeholder",$localize(An||(An=Zo([":\u241f408b4f352f2fec5727e6df77cb926194384bbba0\u241f736196504450716827:Select Format"]))),"formControlName","componentType"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(e,t){1&e&&H.YNc(0,jd,24,20,"ng-container",0),2&e&&H.Q6J("ngIf",t.shown)},directives:[V.O5,X.JL,X.sg,pu.J,j.oJW,X.x0,j.hgI,j.j_n,X.JJ,X.u,V.sg,j.rLF,pe.$,he.Pl],pipes:[V.Ov,Cu.F,xu.d],styles:[".donut-content-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}(),Hd=i(24141);function Ud(e,t){if(1&e){var i=H.EpF();H.ynx(0),H.TgZ(1,"div",19),H.TgZ(2,"nui-form-field",20),H.TgZ(3,"nui-textbox-number",21),H.NdJ("valueChange",function(){return H.CHM(i),H.oxw(2).stub()}),H.qZA(),H.TgZ(4,"nui-validation-message",22),H.SDv(5,23),H.qZA(),H.qZA(),H.qZA(),H.BQk()}if(2&e){var n=H.oxw(2);H.xp6(2),H.Q6J("control",n.form.controls.width),H.xp6(2),H.Q6J("show",n.form.controls.width.invalid)}}function Gd(e,t){1&e&&(H.TgZ(0,"div",19),H.TgZ(1,"nui-message",24),H.tHW(2,25),H._UZ(3,"b"),H.N_p(),H.qZA(),H.qZA()),2&e&&(H.xp6(1),H.Q6J("allowDismiss",!1))}function Kd(e,t){if(1&e&&(H.ynx(0),H.YNc(1,Ud,6,2,"ng-container",17),H.YNc(2,Gd,4,1,"div",18),H.BQk()),2&e){var i=H.oxw();H.xp6(1),H.Q6J("ngIf",!i.isWidthMessageDisplayedForThisColumn()),H.xp6(1),H.Q6J("ngIf",i.isWidthMessageDisplayedForThisColumn())}}var Xd=function(){var e=function(){function e(t,i){var n=this;Oo(this,e),this.formBuilder=t,this.changeDetector=i,this.isWidthMessageDisplayed=!1,this.destroy$=new jo.xQ,this.form=this.formBuilder.group({label:["",[X.kI.required]],isActive:!0,width:void 0}),this.form.valueChanges.pipe((0,Wo.R)(this.destroy$)).subscribe(function(e){var t;null===(t=n.changeFn)||void 0===t||t.call(n,e)})}return Fo(e,[{key:"registerOnChange",value:function(e){this.changeFn=e}},{key:"registerOnTouched",value:function(e){}},{key:"setDisabledState",value:function(e){e?this.form.disable():this.form.enable()}},{key:"validate",value:function(e){return this.form.valid?null:{nestedForm:!0}}},{key:"writeValue",value:function(e){this.form.patchValue({label:e.label,isActive:e.isActive,width:e.width},{emitEvent:!1}),this.changeDetector.markForCheck()}},{key:"ngOnInit",value:function(){var e=this;(0,Hd.t)(this.formControl,function(){e.form.markAllAsTouched()})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"stub",value:function(){}},{key:"isWidthMessageDisplayedForThisColumn",value:function(){return this.isWidthMessageDisplayed&&"number"!=typeof this.form.controls.width.value}}]),e}();return e.lateLoadKey="DescriptionConfigurationV2Component",e.\u0275fac=function(t){return new(t||e)(H.Y36(X.qu),H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-description-configuration-v2"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[H._Bn([{provide:X.JU,useExisting:(0,H.Gpc)(function(){return e}),multi:!0},{provide:X.Cf,useExisting:(0,H.Gpc)(function(){return e}),multi:!0}])],decls:23,vars:17,consts:function(){return[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],$localize(zn||(zn=Zo([":\u241feec715de352a6b114713b30b640d319fa78207a0\u241f4902817035128594900:Description"]))),[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",$localize(Zn||(Zn=Zo([":\u241f863226cffd5b66a6fee9810a9282a5006d6ef576\u241f4077520913910941990:Label"]))),1,"mb-3",3,"control"],["formControlName","label"],["for","required"],$localize(On||(On=Zo([":\u241fc9a9da14b0f8c677efa737185f1232f8537bd2a6\u241f3224868488156254475: This field is required "]))),[3,"control"],["formControlName","isActive"],$localize(Pn||(Pn=Zo([":\u241f49e97f1ac4309fd5992a9520d74fa732c4a77481\u241f5413084173448405143:Show this column"]))),[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",$localize(Fn||(Fn=Zo([":\u241f6b3f02f1feab94e0f0a6823f49a009fa7be7dfa9\u241f8419094197651631948:Column width (px)"]))),1,"mb-3",3,"control"],["placeholder",$localize(Dn||(Dn=Zo([":\u241f455a91268699c6879146b5fe44595de6628e6d32\u241f4319439665214681027:Auto width"]))),"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],$localize($n||($n=Zo([":\u241f356aa3e61db78cca0742edfab898c6bf0c8051a6\u241f3835988025416576743: Minimum width of the column is 62px "]))),["type","info",3,"allowDismiss"],$localize(Mn||(Mn=Zo([":\u241f8e3d3c0a38f0221dc5901334290180f5705a0fbf\u241f2546138047162560558:",":START_BOLD_TEXT:All columns cannot have fixed width.",":CLOSE_BOLD_TEXT:"])),"\ufffd#3\ufffd","\ufffd/#3\ufffd")]},template:function(e,t){var i;(1&e&&(H.ynx(0,0),H.TgZ(1,"nui-widget-editor-accordion",1),H.ALo(2,"async"),H.ALo(3,"nuiWidgetEditorAccordionFormState"),H.TgZ(4,"div",2),H._UZ(5,"nui-icon",3),H.ALo(6,"async"),H.ALo(7,"nuiFormHeaderIconPipe"),H.TgZ(8,"div",4),H.TgZ(9,"span",5),H.SDv(10,6),H.qZA(),H.TgZ(11,"div",7),H._uU(12),H.qZA(),H.qZA(),H.qZA(),H.TgZ(13,"div",8),H.TgZ(14,"div",9),H.TgZ(15,"nui-form-field",10),H._UZ(16,"nui-textbox",11),H.TgZ(17,"nui-validation-message",12),H.SDv(18,13),H.qZA(),H.qZA(),H.qZA(),H.TgZ(19,"nui-form-field",14),H.TgZ(20,"nui-checkbox",15),H.SDv(21,16),H.qZA(),H.qZA(),H.YNc(22,Kd,3,2,"ng-container",17),H.qZA(),H.qZA(),H.BQk()),2&e)&&(H.Q6J("formGroup",t.form),H.xp6(1),H.Q6J("state",H.lcZ(2,8,H.lcZ(3,10,t.form))),H.xp6(4),H.Q6J("icon",H.lcZ(6,12,H.xi3(7,14,t.form,"widget_list"))),H.xp6(6),H.Q6J("title",t.form.controls.label.value),H.xp6(1),H.hij(" ",t.form.controls.label.value," "),H.xp6(3),H.Q6J("control",t.form.controls.label),H.xp6(4),H.Q6J("control",t.form.controls.isActive),H.xp6(3),H.Q6J("ngIf",null==(i=t.form.get("isActive"))?null:i.value))},directives:[X.JL,X.sg,pu.J,j.oJW,j.hgI,j.XHW,X.JJ,X.u,j.CfE,j.bK4,V.O5,j.I5I,j.qqZ],pipes:[V.Ov,Cu.F,xu.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}(),ep=i(29569),tp=i.n(ep),ip=i(17857);function np(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",14),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("displayValueContext",i.label)("value",i.componentType),H.xp6(1),H.hij(" ",i.label," ")}}function rp(e,t){}var op=function(){return["formReady"]};function sp(e,t){if(1&e){var i=H.EpF();H.ynx(0,15,16),H.NdJ("output",function(e){return H.CHM(i),H.oxw().onFormReady(e.payload)}),H.YNc(2,rp,0,0,"ng-template",17),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(1).attached(e)}),H.BQk()}if(2&e){var n=H.MAs(1),r=H.oxw();H.Q6J("componentType",r.formatterConfigurator)("properties",r.formatterConfiguratorProps)("outputs",H.DdM(4,op)),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}var ap=function(){var e=function(){function e(t,i,n,r,o,s){var a,l,c,u=this;Oo(this,e),this.formBuilder=t,this.changeDetector=i,this.configuratorHeading=n,this.eventBus=r,this.formattersRegistryCommon=o,this.tableFormattersRegistryService=s,this._dataFields=[],this.onDestroy$=new jo.xQ,this.providedFormatters=[],this._formatters=[],this.propertiesFormReady=new jo.xQ,this.subscribeToFormattersRegistry(),this.form=this.formBuilder.group({componentType:this.formBuilder.control(null===(l=null===(a=this.providedFormatters)||void 0===a?void 0:a[0])||void 0===l?void 0:l.componentType,X.kI.required),properties:this.formBuilder.control({},function(){var e;return(null===(e=u.propertiesForm)||void 0===e?void 0:e.invalid)?{properties:!0}:null})}),null===(c=this.form.get("componentType"))||void 0===c||c.valueChanges.pipe((0,Wo.R)(this.onDestroy$)).subscribe(function(){return u.createFormatterConfigurator()}),this.form.valueChanges.pipe((0,Wo.R)(this.onDestroy$)).subscribe(function(){u.updateSubtitle(),u.onValueChange(),u.changeDetector.detectChanges()}),this.eventBus.subscribeUntil(_u.PF,this.onDestroy$,function(e){var t=(tp()(e.payload.result)?e.payload:e.payload.result||{}).dataFields;u.dataFields=t})}return Fo(e,[{key:"formatters",get:function(){return this._formatters},set:function(e){!this.tableFormattersRegistryService.isEmpty||this.handleFormattersUpdate(e)}},{key:"dataFields",get:function(){return this._dataFields},set:function(e){this._dataFields=e,this.updateAvailableFormatters()}},{key:"formatter",get:function(){var e;return null===(e=this.form)||void 0===e?void 0:e.value}},{key:"ngOnInit",value:function(){var e=this;(0,Hd.t)(this.formControl,function(){e.form.markAllAsTouched(),e.propertiesForm.markAllAsTouched()})}},{key:"ngOnDestroy",value:function(){this.onDestroy$.next(),this.onDestroy$.complete()}},{key:"ngOnChanges",value:function(e){}},{key:"registerOnChange",value:function(e){this.changeFn=e}},{key:"registerOnTouched",value:function(e){this.touchFn=e}},{key:"setDisabledState",value:function(e){}},{key:"writeValue",value:function(e){this.input=e,this.form.patchValue(e,{emitEvent:!1}),this.createFormatterConfigurator(),this.changeDetector.markForCheck()}},{key:"validate",value:function(e){return!this.form.valid||this.propertiesForm&&!this.propertiesForm.valid?{error:"error"}:null}},{key:"getSelectedFormatterDefinition",value:function(){var e,t;if(this.providedFormatters.length>0){var i=null===(e=this.form.get("componentType"))||void 0===e?void 0:e.value;return null!==(t=this.providedFormatters.find(function(e){return e.componentType===i}))&&void 0!==t?t:null}return null}},{key:"getSelectedDataField",value:function(){var e,t,i=this.form.controls.properties;if(i&&this.dataFields&&this.dataFields.length>0){var n=null===(e=i.value.dataFieldIds)||void 0===e?void 0:e.value;return null!==(t=this.dataFields.find(function(e){return e.id===n}))&&void 0!==t?t:null}return null}},{key:"ngDoCheck",value:function(){if(this.form&&this.propertiesForm){var e=this.form.controls.properties;this.propertiesForm.touched&&e.untouched&&(e.markAsTouched(),this.changeDetector.markForCheck()),this.propertiesForm.untouched&&e.touched&&(e.markAsUntouched(),this.changeDetector.markForCheck())}}},{key:"onFormReady",value:function(e){var t=this;this.propertiesFormReady.next(),this.propertiesForm=e;var i=this.form.controls.properties;i.markAsPristine(),this.propertiesForm.valueChanges.pipe((0,Wo.R)(this.propertiesFormReady)).subscribe(function(){i.setValue(t.propertiesForm.value),t.onValueChange()}),this.propertiesForm.patchValue(this.formatter.properties)}},{key:"onValueChange",value:function(){var e;null===(e=this.changeFn)||void 0===e||e.call(this,this.form.value)}},{key:"updateSubtitle",value:function(){var e,t;this.subtitleText="".concat(null===(e=this.getSelectedFormatterDefinition())||void 0===e?void 0:e.label),this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(", ".concat(null===(t=this.getSelectedDataField())||void 0===t?void 0:t.label)))}},{key:"createFormatterConfigurator",value:function(){var e,t,i,n,r=this,o=this.providedFormatters.find(function(e){var t;return e.componentType===(null===(t=r.form.get("componentType"))||void 0===t?void 0:t.value)});this.formatterConfigurator=o?null!==(e=o.configurationComponent)&&void 0!==e?e:"ValueSelectorComponent":null,(null==o?void 0:o.componentType)!==(null===(t=this.formatter)||void 0===t?void 0:t.componentType)&&(null===(n=null===(i=this.formatter)||void 0===i?void 0:i.properties)||void 0===n?void 0:n.dataFieldIds)&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:o}}},{key:"updateAvailableFormatters",value:function(){var e;if((null===(e=this._dataFields)||void 0===e?void 0:e.length)&&this.providedFormatters.length){var t={null:!0};this._dataFields.forEach(function(e){return t[e.dataType]=!0}),this._formatters=this.providedFormatters.filter(function(e){return(e.dataTypes.value instanceof Array?e.dataTypes.value:[e.dataTypes.value]).some(function(e){return t[e]})}),this.form&&this.createFormatterConfigurator()}}},{key:"subscribeToFormattersRegistry",value:function(){var e=this;this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,Wo.R)(this.onDestroy$)).subscribe(function(t){e.handleFormattersUpdate(t)})}},{key:"handleFormattersUpdate",value:function(e){e!==this.providedFormatters&&(this.providedFormatters=(null==e?void 0:e.length)>0?e:ip.X,this.updateAvailableFormatters())}},{key:"formattersRegistry",get:function(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}}]),e}();return e.lateLoadKey="PresentationConfigurationV2Component",e.\u0275fac=function(t){return new(t||e)(H.Y36(X.qu),H.Y36(H.sBO),H.Y36(zu.p),H.Y36(ce.nY),H.Y36(ce.m4,8),H.Y36(us.C))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-presentation-configuration-v2"]],inputs:{formatters:"formatters",dataFieldIds:"dataFieldIds",formControl:"formControl"},features:[H._Bn([{provide:X.JU,useExisting:(0,H.Gpc)(function(){return e}),multi:!0},{provide:X.Cf,useExisting:(0,H.Gpc)(function(){return e}),multi:!0}],[{provide:X.gN,useExisting:X.sg}]),H.TTD],decls:20,vars:20,consts:function(){return[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(Rn||(Rn=Zo([":\u241f3c991a92a6b04b4f5a42f0b72befa96a8d2e809c\u241f5065098939944125110:Property and formatting"]))),[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",$localize(Jn||(Jn=Zo([":\u241f7722a92a1fc887570b4f4d8a7bb916f067f32028\u241f7513076467032912668:Format"]))),3,"control"],["placeholder",$localize(Ln||(Ln=Zo([":\u241f408b4f352f2fec5727e6df77cb926194384bbba0\u241f736196504450716827:Select Format"]))),"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(e,t){1&e&&(H.ynx(0,0),H.TgZ(1,"nui-widget-editor-accordion",1),H.ALo(2,"async"),H.ALo(3,"nuiWidgetEditorAccordionFormState"),H.TgZ(4,"div",2),H._UZ(5,"nui-icon",3),H.ALo(6,"async"),H.ALo(7,"nuiFormHeaderIconPipe"),H.TgZ(8,"div",4),H.TgZ(9,"span",5),H.SDv(10,6),H.qZA(),H.TgZ(11,"div",7),H._uU(12),H.qZA(),H.qZA(),H.qZA(),H.TgZ(13,"div",8),H.TgZ(14,"div",9),H.TgZ(15,"nui-form-field",10),H.TgZ(16,"nui-select-v2",11),H.ALo(17,"async"),H.YNc(18,np,2,3,"nui-select-v2-option",12),H.qZA(),H.qZA(),H.qZA(),H.YNc(19,sp,3,5,"ng-container",13),H.qZA(),H.qZA(),H.BQk()),2&e&&(H.Q6J("formGroup",t.form),H.xp6(1),H.Q6J("state",H.lcZ(2,9,H.lcZ(3,11,t.form))),H.xp6(4),H.Q6J("icon",H.lcZ(6,13,H.xi3(7,15,t.form,"customize"))),H.xp6(6),H.Q6J("title",t.subtitleText),H.xp6(1),H.hij(" ",t.subtitleText," "),H.xp6(3),H.Q6J("control",t.form.controls.componentType),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(17,18,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.formatters),H.xp6(1),H.Q6J("ngIf",t.formatterConfigurator))},directives:[X.JL,X.sg,pu.J,j.oJW,j.hgI,j.j_n,X.JJ,X.u,V.sg,V.O5,j.rLF,pe.$,he.Pl],pipes:[V.Ov,Cu.F,xu.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}(),lp=i(50191),cp=i(29014);function up(e,t){if(1&e){var i=H.EpF();H.ynx(0),H.TgZ(1,"div",19),H.TgZ(2,"nui-form-field",20),H.TgZ(3,"nui-textbox-number",21),H.NdJ("valueChange",function(){return H.CHM(i),H.oxw(2).stub()}),H.qZA(),H.TgZ(4,"nui-validation-message",22),H.SDv(5,23),H.qZA(),H.qZA(),H.qZA(),H.BQk()}if(2&e){var n=H.oxw(2);H.xp6(2),H.Q6J("control",n.form.controls.width),H.xp6(2),H.Q6J("show",n.form.controls.width.invalid)}}function dp(e,t){1&e&&(H.TgZ(0,"nui-message",24),H.tHW(1,25),H._UZ(2,"b"),H.N_p(),H.qZA()),2&e&&H.Q6J("allowDismiss",!1)}function pp(e,t){if(1&e&&(H.ynx(0),H.YNc(1,up,6,2,"ng-container",17),H.YNc(2,dp,3,1,"nui-message",18),H.BQk()),2&e){var i=H.oxw();H.xp6(1),H.Q6J("ngIf",!i.isWidthMessageDisplayed),H.xp6(1),H.Q6J("ngIf",i.isWidthMessageDisplayed)}}var hp=function(){var e=function(){function e(t,i){Oo(this,e),this.formBuilder=t,this.changeDetector=i,this.formReady=new H.vpe,this.formDestroy=new H.vpe}return Fo(e,[{key:"ngOnInit",value:function(){var e;this.form=this.formBuilder.group({label:[this.label||null,[X.kI.required]],isActive:null===(e=this.isActive)||void 0===e||e,width:this.width||void 0}),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t,i,n;e.label&&(null===(t=this.form)||void 0===t||t.patchValue({label:e.label.currentValue})),e.isActive&&(null===(i=this.form)||void 0===i||i.patchValue({isActive:e.isActive.currentValue})),e.width&&(null===(n=this.form)||void 0===n||n.patchValue({width:e.width.currentValue}))}},{key:"stub",value:function(){}},{key:"ngOnDestroy",value:function(){this.formDestroy.emit(this.form)}}]),e}();return e.lateLoadKey="DescriptionConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(X.qu),H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label",isActive:"isActive",width:"width",isWidthMessageDisplayed:"isWidthMessageDisplayed"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[H.TTD],decls:23,vars:17,consts:function(){return[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],$localize(En||(En=Zo([":\u241feec715de352a6b114713b30b640d319fa78207a0\u241f4902817035128594900:Description"]))),[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",$localize(qn||(qn=Zo([":\u241f863226cffd5b66a6fee9810a9282a5006d6ef576\u241f4077520913910941990:Label"]))),1,"mb-3",3,"control"],["formControlName","label"],["for","required"],$localize(Bn||(Bn=Zo([":\u241fc9a9da14b0f8c677efa737185f1232f8537bd2a6\u241f3224868488156254475: This field is required "]))),[3,"control"],["formControlName","isActive"],$localize(Nn||(Nn=Zo([":\u241f49e97f1ac4309fd5992a9520d74fa732c4a77481\u241f5413084173448405143:Show this column"]))),[4,"ngIf"],["type","info",3,"allowDismiss",4,"ngIf"],[1,"mt-4"],["caption",$localize(Qn||(Qn=Zo([":\u241f6b3f02f1feab94e0f0a6823f49a009fa7be7dfa9\u241f8419094197651631948:Column width (px)"]))),1,"mb-3",3,"control"],["placeholder",$localize(Yn||(Yn=Zo([":\u241f455a91268699c6879146b5fe44595de6628e6d32\u241f4319439665214681027:Auto width"]))),"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],$localize(Vn||(Vn=Zo([":\u241f356aa3e61db78cca0742edfab898c6bf0c8051a6\u241f3835988025416576743: Minimum width of the column is 62px "]))),["type","info",3,"allowDismiss"],$localize(jn||(jn=Zo([":\u241fed094d9c3b5f802e6adca32349fb4756bfad4786\u241f5991148749044556035:",":START_BOLD_TEXT:All columns can not have fixed width.",":CLOSE_BOLD_TEXT:"])),"\ufffd#2\ufffd","\ufffd/#2\ufffd")]},template:function(e,t){var i;(1&e&&(H.ynx(0,0),H.TgZ(1,"nui-widget-editor-accordion",1),H.ALo(2,"async"),H.ALo(3,"nuiWidgetEditorAccordionFormState"),H.TgZ(4,"div",2),H._UZ(5,"nui-icon",3),H.ALo(6,"async"),H.ALo(7,"nuiFormHeaderIconPipe"),H.TgZ(8,"div",4),H.TgZ(9,"span",5),H.SDv(10,6),H.qZA(),H.TgZ(11,"div",7),H._uU(12),H.qZA(),H.qZA(),H.qZA(),H.TgZ(13,"div",8),H.TgZ(14,"div",9),H.TgZ(15,"nui-form-field",10),H._UZ(16,"nui-textbox",11),H.TgZ(17,"nui-validation-message",12),H.SDv(18,13),H.qZA(),H.qZA(),H.qZA(),H.TgZ(19,"nui-form-field",14),H.TgZ(20,"nui-checkbox",15),H.SDv(21,16),H.qZA(),H.qZA(),H.YNc(22,pp,3,2,"ng-container",17),H.qZA(),H.qZA(),H.BQk()),2&e)&&(H.Q6J("formGroup",t.form),H.xp6(1),H.Q6J("state",H.lcZ(2,8,H.lcZ(3,10,t.form))),H.xp6(4),H.Q6J("icon",H.lcZ(6,12,H.xi3(7,14,t.form,"widget_list"))),H.xp6(6),H.Q6J("title",t.form.controls.label.value),H.xp6(1),H.hij(" ",t.form.controls.label.value," "),H.xp6(3),H.Q6J("control",t.form.controls.label),H.xp6(4),H.Q6J("control",t.form.controls.isActive),H.xp6(3),H.Q6J("ngIf",null==(i=t.form.get("isActive"))?null:i.value))},directives:[X.JL,X.sg,pu.J,j.oJW,j.hgI,j.XHW,X.JJ,X.u,j.CfE,j.bK4,V.O5,j.I5I,j.qqZ],pipes:[V.Ov,Cu.F,xu.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}(),fp=function(){var e=function(){function e(t,i,n,r){Oo(this,e),this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.logger=r,this.formReady=new H.vpe,this.dropdownItems={}}return Fo(e,[{key:"ngOnChanges",value:function(e){e.formatterDefinition&&(this.mapDropdownItems(),this.initForm()),e.dataFields&&this.mapDropdownItems(),e.formatter&&this.updateForm()}},{key:"mapDropdownItems",value:function(){var e=this;this.dataFields?this.dropdownItems=Object.keys(this.formatterDefinition.dataTypes).reduce(function(t,i){var n=e.formatterDefinition.dataTypes[i];return t[i]=n?e.dataFields.filter(function(e){return"string"==typeof n?e.dataType===n:n.includes(e.dataType)}):e.dataFields,t},{}):this.logger.error("There are no dataFields defined for formatter:",this.formatterDefinition)}},{key:"dataFieldIds",get:function(){return this.form.get("dataFieldIds")}},{key:"initForm",value:function(){var e=this,t=Object.keys(this.formatterDefinition.dataTypes||{}).reduce(function(t,i){var n,r,o,s;return t[i]=[null!==(s=null===(o=null===(r=null===(n=e.formatter)||void 0===n?void 0:n.properties)||void 0===r?void 0:r.dataFieldIds)||void 0===o?void 0:o[i])&&void 0!==s?s:null,X.kI.required],t},{});this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group(t)}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}},{key:"updateForm",value:function(){var e;this.form.patchValue(null!==(e=this.formatter.properties)&&void 0!==e?e:{},{onlySelf:!1,emitEvent:!1})}},{key:"addCustomFormControls",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(H.LFG(H.sBO),H.LFG(zu.p),H.LFG(X.qu),H.LFG(j.mQy))},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac}),e}();function gp(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",11),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i.id),H.xp6(1),H.hij(" ",i.label," ")}}function mp(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",11),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i.id),H.xp6(1),H.hij(" ",i.label," ")}}var vp=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){return Oo(this,i),t.call(this,e,n,r,o)}return Fo(i)}(fp);return e.lateLoadKey="LinkConfiguratorComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(zu.p),H.Y36(X.qu),H.Y36(j.mQy))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-link-configurator"]],features:[H.qOj],decls:14,vars:5,consts:function(){return[[3,"formGroup"],["formGroupName","dataFieldIds"],[1,"mb-4"],["caption",$localize(Wn||(Wn=Zo([":\u241f863226cffd5b66a6fee9810a9282a5006d6ef576\u241f4077520913910941990:Label"]))),1,"mb-3",3,"control"],["formControlName","value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],$localize(Hn||(Hn=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),["caption",$localize(Un||(Un=Zo([":\u241f801b98c6f02fe3b32f6afa3ee854c99ed83474e6\u241f2375260419993138758:URL"]))),1,"mb-3",3,"control"],["formControlName","link"],$localize(Gn||(Gn=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),[3,"value"]]},template:function(e,t){1&e&&(H.TgZ(0,"div",0),H.TgZ(1,"div",1),H.TgZ(2,"div",2),H.TgZ(3,"nui-form-field",3),H.TgZ(4,"nui-select-v2",4),H.YNc(5,gp,2,2,"nui-select-v2-option",5),H.qZA(),H.TgZ(6,"nui-validation-message",6),H.SDv(7,7),H.qZA(),H.qZA(),H.qZA(),H.TgZ(8,"div"),H.TgZ(9,"nui-form-field",8),H.TgZ(10,"nui-select-v2",9),H.YNc(11,mp,2,2,"nui-select-v2-option",5),H.qZA(),H.TgZ(12,"nui-validation-message",6),H.SDv(13,10),H.qZA(),H.qZA(),H.qZA(),H.qZA(),H.qZA()),2&e&&(H.Q6J("formGroup",t.form),H.xp6(3),H.Q6J("control",t.dataFieldIds.controls.value),H.xp6(2),H.Q6J("ngForOf",t.dropdownItems.value),H.xp6(4),H.Q6J("control",t.dataFieldIds.controls.link),H.xp6(2),H.Q6J("ngForOf",t.dropdownItems.link))},directives:[X.JL,X.sg,X.x0,j.hgI,j.j_n,X.JJ,X.u,V.sg,j.CfE,j.rLF],encapsulation:2}),e}();function yp(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",8),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("displayValueContext",i.label)("value",i.id),H.xp6(1),H.hij(" ",i.label," ")}}function bp(e,t){if(1&e&&(H.TgZ(0,"div",1),H.TgZ(1,"div",2),H.TgZ(2,"nui-form-field",3),H.TgZ(3,"nui-select-v2",4),H.ALo(4,"async"),H.YNc(5,yp,2,3,"nui-select-v2-option",5),H.qZA(),H.TgZ(6,"nui-validation-message",6),H.SDv(7,7),H.qZA(),H.qZA(),H.qZA(),H.qZA()),2&e){var i=H.oxw();H.Q6J("formGroup",i.form),H.xp6(2),H.Q6J("control",i.dataFieldIds.controls.value),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(4,4,i.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",i.dropdownItems.value)}}var Cp=function(){var e=function(e){xo(i,e);var t=ko(i);function i(e,n,r,o){return Oo(this,i),t.call(this,e,n,r,o)}return Fo(i)}(fp);return e.lateLoadKey="ValueSelectorComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(zu.p),H.Y36(X.qu),H.Y36(j.mQy))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-value-selector"]],features:[H.qOj],decls:1,vars:1,consts:function(){return[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["formGroupName","dataFieldIds"],["caption",$localize(Kn||(Kn=Zo([":\u241f5049e204c14c648691ac775a64fb504467aeb549\u241f6555318547274416232:Value"]))),1,"mb-3",3,"control"],["formControlName","value","placeholder",$localize(Xn||(Xn=Zo([":\u241f25b479494f612322c149610b9b2e3cd4c782c313\u241f4594093405818643397:Select Value"]))),3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],$localize(er||(er=Zo([":\u241fb17406f843dc33feb81478ae8273dc1aae06bbf6\u241f2244196281006156184: This field is required "]))),[3,"displayValueContext","value"]]},template:function(e,t){1&e&&H.YNc(0,bp,8,6,"div",0),2&e&&H.Q6J("ngIf",t.form)},directives:[V.O5,X.JL,X.sg,X.x0,j.hgI,j.j_n,X.JJ,X.u,V.sg,j.CfE,j.rLF],pipes:[V.Ov],encapsulation:2}),e}(),xp=i(76974),wp=i.n(xp);function kp(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",14),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("displayValueContext",i.label)("value",i.componentType),H.xp6(1),H.hij(" ",i.label," ")}}function Tp(e,t){}var Sp=function(){return["formReady"]};function Ip(e,t){if(1&e){var i=H.EpF();H.ynx(0,15,16),H.NdJ("output",function(e){return H.CHM(i),H.oxw().onFormReady(e.payload)}),H.YNc(2,Tp,0,0,"ng-template",17),H.NdJ("attached",function(e){return H.CHM(i),H.MAs(1).attached(e)}),H.BQk()}if(2&e){var n=H.MAs(1),r=H.oxw();H.Q6J("componentType",r.formatterConfigurator)("properties",r.formatterConfiguratorProps)("outputs",H.DdM(4,Sp)),H.xp6(2),H.Q6J("cdkPortalOutlet",n.portal)}}var _p=function(){var e=function(){function e(t,i,n,r,o){Oo(this,e),this.formBuilder=t,this.changeDetector=i,this.configuratorHeading=n,this.formattersRegistryCommon=r,this.tableFormattersRegistryService=o,this._providedFormatters=[],this._formatters=[],this._dataFields=[],this.formReady=new H.vpe,this.formDestroy=new H.vpe,this.formatterForm=this.formBuilder.group({}),this.formatterFormGroupName="formatter",this.onDestroy$=new jo.xQ,this.subscribeToFormattersRegistry()}return Fo(e,[{key:"formatters",get:function(){return this._formatters},set:function(e){!this.tableFormattersRegistryService.isEmpty||this.handleFormattersUpdate(e)}},{key:"dataFields",get:function(){return this._dataFields},set:function(e){this._dataFields=e,this.updateAvailableFormatters()}},{key:"ngOnInit",value:function(){var e,t=this;this.formatterForm=this.formBuilder.group({componentType:[this.formatter&&this.formatter.componentType||this._providedFormatters&&this._providedFormatters.length>0&&this._providedFormatters[0].componentType,[X.kI.required]]}),this.form=this.formBuilder.group(yo({},this.formatterFormGroupName,this.formatterForm)),null===(e=this.formatterForm.get("componentType"))||void 0===e||e.valueChanges.pipe((0,Wo.R)(this.onDestroy$)).subscribe(function(){return t.createFormatterConfigurator()}),this.createFormatterConfigurator(),this.formReady.emit(this.form),this.formatterForm.valueChanges.pipe((0,Wo.R)(this.onDestroy$)).subscribe(function(){t.updateSubtitle(),t.changeDetector.detectChanges()})}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnChanges",value:function(e){var t;if(e.dataFieldIds){var i=e.dataFieldIds,n=i.currentValue,r=i.previousValue;if(n&&n!==r){var o=n.map(function(e){return{id:e,label:wp()(e)}});this.dataFields=o,this.updateSubtitle()}}e.formatter&&(null===(t=this.form)||void 0===t||t.patchValue(yo({},this.formatterFormGroupName,e.formatter.currentValue),{emitEvent:!1}),this.updateSubtitle()),e.dataFields&&0===e.dataFields.previousValue.length&&this.formatterForm&&this.updateSubtitle()}},{key:"getSelectedFormatterDefinition",value:function(){var e,t;if(this._providedFormatters.length>0){var i=null===(e=this.formatterForm.get("componentType"))||void 0===e?void 0:e.value;return null!==(t=this._providedFormatters.find(function(e){return e.componentType===i}))&&void 0!==t?t:null}return null}},{key:"getSelectedDataField",value:function(){var e,t,i=this.formatterForm.controls.properties;if(i&&this.dataFields&&this.dataFields.length>0){var n=null===(e=i.get("dataFieldIds"))||void 0===e?void 0:e.value.value;return null!==(t=this.dataFields.find(function(e){return e.id===n}))&&void 0!==t?t:null}return null}},{key:"onFormReady",value:function(e){this.form.get(this.formatterFormGroupName).setControl("properties",e)}},{key:"updateSubtitle",value:function(){var e,t;this.subtitleText="".concat(null===(e=this.getSelectedFormatterDefinition())||void 0===e?void 0:e.label),this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(", ".concat(null===(t=this.getSelectedDataField())||void 0===t?void 0:t.label)))}},{key:"createFormatterConfigurator",value:function(){var e,t,i,n,r=this,o=this._providedFormatters.find(function(e){var t;return e.componentType===(null===(t=r.formatterForm.get("componentType"))||void 0===t?void 0:t.value)});this.formatterConfigurator=o?null!==(e=o.configurationComponent)&&void 0!==e?e:"ValueSelectorComponent":null,(null==o?void 0:o.componentType)!==(null===(t=this.formatter)||void 0===t?void 0:t.componentType)&&(null===(n=null===(i=this.formatter)||void 0===i?void 0:i.properties)||void 0===n?void 0:n.dataFieldIds)&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:o}}},{key:"updateAvailableFormatters",value:function(){if(this._dataFields.length&&this._providedFormatters.length){var e={null:!0};this._dataFields.forEach(function(t){return e[t.dataType]=!0}),this._formatters=this._providedFormatters.filter(function(t){return(t.dataTypes.value instanceof Array?t.dataTypes.value:[t.dataTypes.value]).some(function(t){return e[t]})}),this.formatterForm&&this.createFormatterConfigurator()}}},{key:"subscribeToFormattersRegistry",value:function(){this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,ea.b)(this.handleFormattersUpdate.bind(this)),(0,Wo.R)(this.onDestroy$)).subscribe()}},{key:"handleFormattersUpdate",value:function(e){e!==this._providedFormatters&&(this._providedFormatters=e,this.updateAvailableFormatters())}},{key:"formattersRegistry",get:function(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}},{key:"ngOnDestroy",value:function(){this.formDestroy.emit(this.form),this.onDestroy$.next(),this.onDestroy$.complete()}}]),e}();return e.lateLoadKey="PresentationConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(X.qu),H.Y36(H.sBO),H.Y36(zu.p),H.Y36(ce.m4,8),H.Y36(us.C))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-table-column-presentation-configuration"]],inputs:{formatter:"formatter",formatters:"formatters",dataFieldIds:"dataFieldIds",dataFields:"dataFields"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[H._Bn([],[{provide:X.gN,useExisting:X.sg}]),H.TTD],decls:20,vars:20,consts:function(){return[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(tr||(tr=Zo([":\u241f3c991a92a6b04b4f5a42f0b72befa96a8d2e809c\u241f5065098939944125110:Property and formatting"]))),[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",$localize(ir||(ir=Zo([":\u241f7722a92a1fc887570b4f4d8a7bb916f067f32028\u241f7513076467032912668:Format"]))),3,"control"],["placeholder",$localize(nr||(nr=Zo([":\u241f408b4f352f2fec5727e6df77cb926194384bbba0\u241f736196504450716827:Select Format"]))),"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(e,t){1&e&&(H.ynx(0,0),H.TgZ(1,"nui-widget-editor-accordion",1),H.ALo(2,"async"),H.ALo(3,"nuiWidgetEditorAccordionFormState"),H.TgZ(4,"div",2),H._UZ(5,"nui-icon",3),H.ALo(6,"async"),H.ALo(7,"nuiFormHeaderIconPipe"),H.TgZ(8,"div",4),H.TgZ(9,"span",5),H.SDv(10,6),H.qZA(),H.TgZ(11,"div",7),H._uU(12),H.qZA(),H.qZA(),H.qZA(),H.TgZ(13,"div",8),H.TgZ(14,"div",9),H.TgZ(15,"nui-form-field",10),H.TgZ(16,"nui-select-v2",11),H.ALo(17,"async"),H.YNc(18,kp,2,3,"nui-select-v2-option",12),H.qZA(),H.qZA(),H.qZA(),H.YNc(19,Ip,3,5,"ng-container",13),H.qZA(),H.qZA(),H.BQk()),2&e&&(H.Q6J("formGroup",t.formatterForm),H.xp6(1),H.Q6J("state",H.lcZ(2,9,H.lcZ(3,11,t.form))),H.xp6(4),H.Q6J("icon",H.lcZ(6,13,H.xi3(7,15,t.form,"customize"))),H.xp6(6),H.Q6J("title",t.subtitleText),H.xp6(1),H.hij(" ",t.subtitleText," "),H.xp6(3),H.Q6J("control",t.formatterForm.controls.componentType),H.xp6(1),H.Q6J("popupViewportMargin",H.lcZ(17,18,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",t.formatters),H.xp6(1),H.Q6J("ngIf",t.formatterConfigurator))},directives:[X.JL,X.sg,pu.J,j.oJW,j.hgI,j.j_n,X.JJ,X.u,V.sg,V.O5,j.rLF,pe.$,he.Pl],pipes:[V.Ov,Cu.F,xu.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}(),Ap=i(23348),zp=i.n(Ap);function Zp(e,t){1&e&&(H.TgZ(0,"div",6),H.TgZ(1,"nui-message",7),H.tHW(2,8),H._UZ(3,"b"),H.N_p(),H.qZA(),H.qZA()),2&e&&(H.xp6(1),H.Q6J("allowDismiss",!1))}var Op=function(){var e=function(){function e(t,i,n,r,o){var s=this;Oo(this,e),this.formBuilder=t,this.changeDetector=i,this.dialogService=n,this.pizzagnaService=r,this.eventBus=o,this.columns=[],this.formatters=[],this.dataFields=[],this.formReady=new H.vpe,this.onDestroy$=new jo.xQ,this.lastValidDataFields=[],this.eventBus.subscribeUntil(_u.gg,this.onDestroy$,function(e){!e.payload||(s.dataSource=e.payload)}),this.eventBus.subscribeUntil(_u.PF,this.onDestroy$,function(e){var t,i=(tp()(e.payload.result)?e.payload:e.payload.result||{}).dataFields;if(i){var n=s.pizzagnaService.pizzagna;n=(0,j.zdu)(n,"".concat(ce.xW.Data,".columns.properties.dataFields"),i);var r=(null===(t=s.pizzagnaService.pizzagna[ce.xW.Structure].columns.properties)||void 0===t?void 0:t.template).findIndex(function(e){return"presentation"===e.id});n=(0,j.zdu)(n,"".concat(ce.xW.Structure,".columns.properties.template[").concat(r,"].properties.dataFields"),i),n=Ws()(s.pizzagnaService.pizzagna,"".concat(ce.xW.Data,".columns.properties.columns")).map(function(e){return e.id}).reduce(function(e,t){return(0,j.zdu)(e,"".concat(ce.xW.Data,".").concat(t,"/presentation.properties.dataFields"),i)},n),s.pizzagnaService.updatePizzagna(n),s.eventBus.getStream(le.M).next({payload:{path:"",value:n}})}})}return Fo(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){var t,i,n,r=this;if(e.dataFields&&e.dataFields.currentValue){this.lastValidDataFields=e.dataFields.currentValue;var o=null===(n=null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.getFeatureConfig(ce.ni.DisableTableColumnGeneration))||void 0===n?void 0:n.enabled,s=this.mergeColumns(e.dataFields.currentValue,this.columns);(null==s?void 0:s.length)||o?this.onItemsChange(s):o||this.resetColumns(!1),setTimeout(function(){return r.changeDetector.markForCheck()})}if(e.columns){var a=this.columns.map(function(e){var t;return{id:e.id,children:(t={},yo(t,"".concat(e.id,"/description"),Object.assign({},e)),yo(t,"".concat(e.id,"/presentation"),Object.assign({},e)),t)}});this.pizzagnaService.createComponentsFromTemplateWithProperties("columns",a),setTimeout(function(){var e,t;null===(e=r.form.get("columns"))||void 0===e||e.setValue(_o(null===(t=r.form.get("columns"))||void 0===t?void 0:t.value))})}}},{key:"onFormReady",value:function(e){var t,i=this;this.form=this.formBuilder.group({columns:e,columnsOutput:{}}),this.emptyColumns$=this.form.valueChanges.pipe((0,ia.U)(function(e){return 0===e.columns.length})),this.formReady.emit(this.form),null===(t=this.form.get("columns"))||void 0===t||t.valueChanges.subscribe(function(e){var t,n=e.map(function(e){for(var t,n,r={id:e.id},o=0,s=Object.keys(e.properties);o<s.length;o++){var a=s[o];r=Object.assign(Object.assign({},r),e.properties[a])}return r.sortable=null===(n=null===(t=i.lastValidDataFields)||void 0===t?void 0:t.find(function(e){var t,i,n;return e.id===(null===(n=null===(i=null===(t=r.formatter)||void 0===t?void 0:t.properties)||void 0===i?void 0:i.dataFieldIds)||void 0===n?void 0:n.value)}))||void 0===n?void 0:n.sortable,r});null===(t=i.form.get("columnsOutput"))||void 0===t||t.setValue(n)})}},{key:"onItemsChange",value:function(e){var t=e.map(function(e){return e.id});this.pizzagnaService.createComponentsFromTemplate("columns",t),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:ce.xW.Data,propertyPath:["columns"]},e)}},{key:"addColumn",value:function(){this.onItemsChange([].concat(_o(this.columns),[{id:(0,j.VjN)("column"),label:"",formatter:void 0}]))}},{key:"onResetColumns",value:function(){var e;this.resetColumns(!!(null===(e=this.columns)||void 0===e?void 0:e.length))}},{key:"resetColumns",value:function(e){var t=this,i=function(){var e=t.lastValidDataFields.map(function(e){return{id:(0,j.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:e.id}}},isActive:!0,label:e.label,width:void 0,sortable:e.sortable}});t.onItemsChange(e)};e?this.dialogService.confirm({title:$localize(rr||(rr=Zo(["Are you sure?"]))),message:$localize(or||(or=Zo(["Resetting the columns will revert them to their default configurations. Do you wish to proceed?"]))),confirmText:$localize(sr||(sr=Zo(["Reset Columns"])))}).result.then(function(e){e&&i()},function(){}):i()}},{key:"mergeColumns",value:function(e,t){var i=e.map(function(e){return e.id});return t.filter(function(e){var t,n,r,o;return!!(null===(n=null===(t=e.formatter)||void 0===t?void 0:t.properties)||void 0===n?void 0:n.dataFieldIds)&&zp()(null===(o=null===(r=e.formatter)||void 0===r?void 0:r.properties)||void 0===o?void 0:o.dataFieldIds).some(function(e){return i.includes(e)})})}},{key:"ngOnDestroy",value:function(){this.onDestroy$.next(),this.onDestroy$.complete()}}]),e}();return e.lateLoadKey="TableColumnsConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(X.qu),H.Y36(H.sBO),H.Y36(j.xAy),H.Y36(zo.p),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",formatters:"formatters",componentId:"componentId",dataFields:"dataFields",nodes:"nodes"},outputs:{formReady:"formReady"},features:[H.TTD],decls:7,vars:5,consts:function(){return[["headerPrefix",$localize(ar||(ar=Zo([":\u241fe3c2715ed7f11ed4ac89f4153d8557f182a6918e\u241f763982378603811482:Column"]))),3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],$localize(lr||(lr=Zo([":\u241f736c64fea4ef76879faff01d9feb9b0ae0e1ce6c\u241f1971419615059875635:Add new column\n"]))),["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],$localize(cr||(cr=Zo([":\u241fe381db96d57a8fce44c3c93407e43f7774ae0caf\u241f1216924115236014479:Reset columns\n"]))),[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],$localize(ur||(ur=Zo([":\u241f67705586cab07e9ae4f2a9822320fa14e7fb60a7\u241f8157770720263764419:",":START_BOLD_TEXT:At least one column must be added.",":CLOSE_BOLD_TEXT:"])),"\ufffd#3\ufffd","\ufffd/#3\ufffd")]},template:function(e,t){1&e&&(H.TgZ(0,"nui-items-dynamic",0),H.NdJ("itemsChange",function(e){return t.onItemsChange(e)})("formReady",function(e){return t.onFormReady(e)}),H.qZA(),H.YNc(1,Zp,4,1,"div",1),H.ALo(2,"async"),H.TgZ(3,"button",2),H.NdJ("click",function(){return t.addColumn()}),H.SDv(4,3),H.qZA(),H.TgZ(5,"button",4),H.NdJ("click",function(){return t.onResetColumns()}),H.SDv(6,5),H.qZA()),2&e&&(H.Q6J("items",t.columns)("nodes",t.nodes),H.xp6(1),H.Q6J("ngIf",H.lcZ(2,3,t.emptyColumns$)&&t.form.touched))},directives:[Kc,V.O5,j.r0F,j.qqZ],pipes:[V.Ov],encapsulation:2,changeDetection:0}),e}(),Pp=i(53294);function Fp(e,t){1&e&&(H.TgZ(0,"div",3),H.TgZ(1,"nui-message",4),H.tHW(2,5),H._UZ(3,"b"),H.N_p(),H.qZA(),H.qZA()),2&e&&(H.xp6(1),H.Q6J("allowDismiss",!1))}function Dp(e,t){if(1&e){var i=H.EpF();H.TgZ(0,"button",6),H.NdJ("click",function(){return H.CHM(i),H.oxw().addSeries()}),H.SDv(1,7),H.qZA()}}var $p=function(){var e=function(){function e(t,i,n){Oo(this,e),this.pizzagnaService=t,this.changeDetector=i,this.eventBus=n,this.series=[],this.formReady=new H.vpe,this.destroy$=new jo.xQ}return Fo(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngOnChanges",value:function(e){var t=this;e.allSeries&&!e.allSeries.isFirstChange()&&(this.createSeriesConfigComponents(this.series),setTimeout(function(){return t.changeDetector.markForCheck()}))}},{key:"onFormReady",value:function(e){this.form=e,this.formReady.emit(e),this.emptySeries$=this.form.valueChanges.pipe((0,ia.U)(function(e){return 0===e.length}))}},{key:"onItemsChange",value:function(e){this.createSeriesConfigComponents(e),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:ce.xW.Data,propertyPath:["series"]},e)}},{key:"isPossibleToAddSeries",value:function(){return(this.allSeries&&this.allSeries.length)>(this.series&&this.series.length)}},{key:"addSeries",value:function(){this.onItemsChange([].concat(_o(this.series),[{id:(0,j.VjN)("series"),selectedSeriesId:null}]))}},{key:"createSeriesConfigComponents",value:function(e){var t=e.map(function(e){return e.id});this.pizzagnaService.createComponentsFromTemplate("series",t)}}]),e}();return e.lateLoadKey="TimeseriesSeriesCollectionConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(zo.p),H.Y36(H.sBO),H.Y36(ce.nY))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-timeseries-series-collection-configuration"]],inputs:{nodes:"nodes",componentId:"componentId",series:"series",availableSeries:"availableSeries",allSeries:"allSeries"},outputs:{formReady:"formReady"},features:[H.TTD],decls:4,vars:7,consts:function(){return[[3,"items","nodes","moveButtons","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","type","button","class","ml-4 mb-4",3,"click",4,"ngIf"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],$localize(dr||(dr=Zo([":\u241f46a7534407b391db85f57b5fd207e4288d7901c1\u241f4355007031052301783:",":START_BOLD_TEXT:At least one series must be added.",":CLOSE_BOLD_TEXT:"])),"\ufffd#3\ufffd","\ufffd/#3\ufffd"),["nui-button","","icon","add","displayStyle","action","type","button",1,"ml-4","mb-4",3,"click"],$localize(pr||(pr=Zo([":\u241f7dfc5b976469c500547252e1509e97083f0e497e\u241f8203243807445939336:Add new series\n"])))]},template:function(e,t){1&e&&(H.TgZ(0,"nui-items-dynamic",0),H.NdJ("itemsChange",function(e){return t.onItemsChange(e)})("formReady",function(e){return t.onFormReady(e)}),H.qZA(),H.YNc(1,Fp,4,1,"div",1),H.ALo(2,"async"),H.YNc(3,Dp,2,0,"button",2)),2&e&&(H.Q6J("items",t.series)("nodes",t.nodes)("moveButtons",!1),H.xp6(1),H.Q6J("ngIf",H.lcZ(2,5,t.emptySeries$)&&t.form.touched),H.xp6(2),H.Q6J("ngIf",t.isPossibleToAddSeries()))},directives:[Kc,V.O5,j.qqZ,j.r0F],pipes:[V.Ov],encapsulation:2,changeDetection:0}),e}(),Mp=function(){var e=function(){function e(t,i){Oo(this,e),this.formBuilder=t,this.changeDetector=i,this.formReady=new H.vpe,this.formDestroy=new H.vpe}return Fo(e,[{key:"ngOnInit",value:function(){this.form=this.formBuilder.group({label:[this.label,X.kI.required]}),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){if(e.label){var t=e.label.currentValue;t&&this.form.patchValue({label:t})}}},{key:"ngOnDestroy",value:function(){this.formDestroy.emit(this.form)}}]),e}();return e.lateLoadKey="TimeseriesTileDescriptionConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(X.qu),H.Y36(H.sBO))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[H.TTD],decls:20,vars:22,consts:function(){return[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(hr||(hr=Zo([":\u241feec715de352a6b114713b30b640d319fa78207a0\u241f4902817035128594900:Description"]))),[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-description-configuration__accordion-content"],["caption",$localize(fr||(fr=Zo([":\u241f863226cffd5b66a6fee9810a9282a5006d6ef576\u241f4077520913910941990:Label"]))),3,"control"],["formControlName","label","placeholder",$localize(gr||(gr=Zo([":\u241f8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5\u241f725093659603391179:Set label"])))],["for","required"],$localize(mr||(mr=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "])))]},template:function(e,t){var i,n;(1&e&&(H.ynx(0,0),H.TgZ(1,"nui-widget-editor-accordion",1),H.ALo(2,"async"),H.ALo(3,"nuiWidgetEditorAccordionFormState"),H.TgZ(4,"div",2),H._UZ(5,"nui-icon",3),H.ALo(6,"async"),H.ALo(7,"nuiFormHeaderIconPipe"),H.ALo(8,"async"),H.ALo(9,"nuiFormHeaderIconPipe"),H.TgZ(10,"div",4),H.TgZ(11,"span",5),H.SDv(12,6),H.qZA(),H.TgZ(13,"div",7),H._uU(14),H.qZA(),H.qZA(),H.qZA(),H.TgZ(15,"div",8),H.TgZ(16,"nui-form-field",9),H._UZ(17,"nui-textbox",10),H.TgZ(18,"nui-validation-message",11),H.SDv(19,12),H.qZA(),H.qZA(),H.qZA(),H.qZA(),H.BQk()),2&e)&&(H.Q6J("formGroup",t.form),H.xp6(1),H.Q6J("state",H.lcZ(2,7,H.lcZ(3,9,t.form.get("label")))),H.xp6(4),H.Q6J("icon",H.lcZ(6,11,H.xi3(7,13,t.form.get("label"),"edit")))("iconColor",H.lcZ(8,16,H.Dn7(9,18,t.form.get("label"),"gray",""))),H.xp6(8),H.Q6J("title",null==(i=t.form.get("label"))?null:i.value),H.xp6(1),H.hij(" ",null==(n=t.form.get("label"))?null:n.value," "),H.xp6(2),H.Q6J("control",t.form.get("label")))},directives:[X.JL,X.sg,pu.J,j.oJW,j.hgI,j.XHW,X.JJ,X.u,j.CfE],pipes:[V.Ov,Cu.F,xu.d],styles:[".timeseries-tile-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}();function Rp(e,t){if(1&e&&(H.TgZ(0,"nui-select-v2-option",14),H._uU(1),H.qZA()),2&e){var i=t.$implicit;H.Q6J("value",i),H.xp6(1),H.hij(" ",i.description," ")}}var Jp=function(){var e=function(){function e(t,i,n,r){Oo(this,e),this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.pizzagnaService=r,this.formReady=new H.vpe,this.formDestroy=new H.vpe,this.destroy$=new jo.xQ}return Fo(e,[{key:"selectedSeries",get:function(){return this._selectedSeries},set:function(e){this._selectedSeries=e,e&&this.form.patchValue({id:e.id})}},{key:"ngOnInit",value:function(){this.form=this.formBuilder.group({id:[this.selectedSeriesId||null,[X.kI.required]]}),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){var t=this;if(e.allSeries&&(this.selectedSeries=this.allSeries.find(function(e){return t.selectedSeriesId===e.id})),e.selectedSeriesId){if(!this.allSeries)return;this.selectedSeries=this.allSeries.find(function(e){return t.selectedSeriesId===e.id})}}},{key:"onSelect",value:function(e){var t=this;this.selectedSeriesId=e.id,this.selectedSeries=e,this.form.patchValue({id:e.id}),setTimeout(function(){t.pizzagnaService.setProperty("".concat(ce.xW.Data,".").concat(t.componentId,".properties.selectedSeriesId"),e.id),t.changeDetector.markForCheck()})}},{key:"ngOnDestroy",value:function(){this.formDestroy.emit(this.form),this.destroy$.next(),this.destroy$.complete()}}]),e}();return e.lateLoadKey="TimeseriesTileIndicatorDataConfigurationComponent",e.\u0275fac=function(t){return new(t||e)(H.Y36(H.sBO),H.Y36(zu.p),H.Y36(X.qu),H.Y36(zo.p))},e.\u0275cmp=H.Xpm({type:e,selectors:[["nui-timeseries-tile-indicator-data-configuration"]],inputs:{componentId:"componentId",selectedSeriesId:"selectedSeriesId",allSeries:"allSeries",availableSeries:"availableSeries"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[H.TTD],decls:21,vars:23,consts:function(){return[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(vr||(vr=Zo([":\u241ff39271d40a9c081425a980174610625a267d18f7\u241f8676967573592446270:Indicator data"]))),[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-data-configuration__accordion-content"],["caption",$localize(yr||(yr=Zo([":\u241fc5efb3039d96058120ee5d8148ceeb972d8d4e1f\u241f3385528249572340947:Series data"]))),3,"control"],["placeholder",$localize(br||(br=Zo([":\u241fc5efb3039d96058120ee5d8148ceeb972d8d4e1f\u241f3385528249572340947:Series data"]))),3,"value","popupViewportMargin","valueSelected"],[3,"value",4,"ngFor","ngForOf"],["for","required"],$localize(Cr||(Cr=Zo([":\u241f8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c\u241f8999046125839025839: This field is required "]))),[3,"value"]]},template:function(e,t){1&e&&(H.ynx(0,0),H.TgZ(1,"nui-widget-editor-accordion",1),H.ALo(2,"async"),H.ALo(3,"nuiWidgetEditorAccordionFormState"),H.TgZ(4,"div",2),H._UZ(5,"nui-icon",3),H.ALo(6,"async"),H.ALo(7,"nuiFormHeaderIconPipe"),H.TgZ(8,"div",4),H.TgZ(9,"span",5),H.SDv(10,6),H.qZA(),H.TgZ(11,"div",7),H._uU(12),H.qZA(),H.qZA(),H.qZA(),H.TgZ(13,"div",8),H.TgZ(14,"nui-form-field",9),H.TgZ(15,"nui-select-v2",10),H.NdJ("valueSelected",function(e){return t.onSelect(e)}),H.ALo(16,"async"),H.YNc(17,Rp,2,2,"nui-select-v2-option",11),H.ALo(18,"nuiAddData"),H.qZA(),H.TgZ(19,"nui-validation-message",12),H.SDv(20,13),H.qZA(),H.qZA(),H.qZA(),H.qZA(),H.BQk()),2&e&&(H.Q6J("formGroup",t.form),H.xp6(1),H.Q6J("state",H.lcZ(2,9,H.lcZ(3,11,t.form.get("id")))),H.xp6(4),H.Q6J("icon",H.lcZ(6,13,H.xi3(7,15,t.form.get("id"),"database"))),H.xp6(6),H.Q6J("title",null==t.selectedSeries?null:t.selectedSeries.description),H.xp6(1),H.hij(" ",null==t.selectedSeries?null:t.selectedSeries.description," "),H.xp6(2),H.Q6J("control",t.form.get("id")),H.xp6(1),H.Q6J("value",t.selectedSeries)("popupViewportMargin",H.lcZ(16,18,t.configuratorHeading.height$)),H.xp6(2),H.Q6J("ngForOf",H.xi3(18,20,t.availableSeries,t.selectedSeries)))},directives:[X.JL,X.sg,pu.J,j.oJW,j.hgI,j.j_n,V.sg,j.CfE,j.rLF],pipes:[V.Ov,Cu.F,xu.d,Nc],styles:[".timeseries-tile-data-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),e}(),Lp=i(69823),Ep=(i(30510),i(15130)),qp=function(){var e=function(){function e(){Oo(this,e)}return Fo(e,null,[{key:"getTextColor",value:function(e){return new ee.kJ9(new ee.jpW([e]),{light:"white",dark:"black"}).get(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac}),e}(),Bp=i(62053),Np=function(){var e=function(){function e(t,i){Oo(this,e),this.configuratorService=t,this.componentPortalService=i}return Fo(e,[{key:"open",value:function(e){if(!e.portalBundle){var t={portal:this.componentPortalService.createComponentPortal(cu,null),attached:function(t){t.instance.cloneSelectionComponentType=e.widgetSelectionComponentType}};e.portalBundle=t}return this.configuratorService.open(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(H.LFG(Ep.J),H.LFG(Bp.$))},e.\u0275prov=H.Yz7({token:e,factory:e.\u0275fac}),e}(),Qp=i(58746),Yp=i(35484);i(79705),i(10841),i(45626),i(91363),i(82262);var Vp=[ac.n,cc.P,Lp.P,$u.s,Du,Au.K,md,Ru,Lu,Ld,zd,Pp.U,Xu,$p,Op,cp.O,lp.P,Yp.Z,mc,hc,wc,xc,kc.C,Fc,vp,Cp,Tc.s,Xc,Jc,Sc.a,Ic,Bu,Hu,ed.U,du.j,hu.b,cu,hp,Xd,_p,ap,Mp,Jp,Nu.O,Su,fd,sd,Wd,Cd,Sd],jp=function(){var e=Fo(function e(t){Oo(this,e);var i,n=vo(Vp.filter(function(e){return e.lateLoadKey}));try{for(n.s();!(i=n.n()).done;){var r=i.value;t.registerByLateLoadKey(r)}}catch(o){n.e(o)}finally{n.f()}});return e.\u0275fac=function(t){return new(t||e)(H.LFG(uc.h))},e.\u0275mod=H.oAB({type:e}),e.\u0275inj=H.cJS({providers:[Ep.J,zu.p,uu.e,Qp.s,Np,qp,yl,Aa],imports:[[K.Cl,G,X.UX,te.IX,Kl._t,he.eL,j.Gsl,Xl,j.Ts3,j.r$w,j.cnx,j.F__,j.ILf,j.YMY,j.C6o,j.Az_,j.s2z,j.qAs,j.CUE,j.LRI,j.uCA,j.Ld5,j.CND,j.a51,j.cJ5,j.gkT,j.grO,j.bGb,j.a$t,j.ZuS,j.sF0]]}),e}();H.B6R(lp.P,[X.JL,X.sg,Xd,X.JJ,X.oH,ap],[]),H.B6R(nu.i,[V.O5,V.sg,V.mk,V.PC,j.oJW,pe.$,he.Pl],[]);var Wp=function(){var e=function(){function e(t){Oo(this,e),this.gridsterItem=t}return Fo(e,[{key:"ngOnChanges",value:function(e){e.nuiGridsterItemWidgetId&&(this.gridsterItem.widgetId=this.nuiGridsterItemWidgetId)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(H.Y36(te.IM,3))},e.\u0275dir=H.lG2({type:e,selectors:[["","nuiGridsterItemWidgetId",""]],inputs:{nuiGridsterItemWidgetId:"nuiGridsterItemWidgetId"},features:[H.TTD]}),e}();i(54607);var Hp=yo({},ce.xW.Structure,(yo(r={},le.XM,{id:le.XM,componentType:cc.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]}}),yo(r,"presentation",{id:"presentation",componentType:du.j.lateLoadKey,properties:{headerText:$localize(xr||(xr=Zo(["Presentation"]))),nodes:["titleAndDescription"]}}),yo(r,"titleAndDescription",{id:"titleAndDescription",componentType:ed.U.lateLoadKey,providers:{converter:{providerId:le.j4}}}),yo(r,"dataAndCalculations",{id:"dataAndCalculations",componentType:du.j.lateLoadKey,properties:{headerText:$localize(wr||(wr=Zo(["Data and calculations"]))),nodes:["dataSource","grouping","entityFormatting"]}}),yo(r,"dataSource",{id:"dataSource",componentType:$u.s.lateLoadKey,properties:{dataSourceProviders:[]},providers:yo({},ce.Mu.Converter,{providerId:le.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId"]}]}})}),yo(r,"grouping",{id:"grouping",componentType:fd.lateLoadKey,properties:{groups:[],groupBy:[]},providers:yo({},ce.Mu.Converter,{providerId:le.VX,properties:{formParts:[{previewPath:"listWidget.providers.".concat(ce.Mu.Adapter,".properties"),keys:["groupBy","drillstate","groups"]}]}})}),yo(r,"entityFormatting",{id:"entityFormatting",componentType:sd.lateLoadKey,properties:{mappingKeys:["icon_status","capital","name","icon","url"],dataFieldIds:{icon:"icon",status:"icon_status",detailedUrl:"capital",label:"name",url:"url"}},providers:yo({},ce.Mu.Converter,{providerId:le.VX,properties:{formParts:[{previewPath:"listWidget.providers.".concat(ce.Mu.Adapter,".properties.componentsConfig.leaf.properties"),keys:["dataFieldIds"]}]}})}),r)),Up={id:"header",componentType:Hl.lateLoadKey,properties:{editMode:!1}},Gp={id:"loading",componentType:ss.lateLoadKey,providers:yo({},ce.Mu.LoadingAdapter,{providerId:le.IG})},Kp={id:"body",componentType:Dl.lateLoadKey,properties:{content:"bodyContent"}},Xp=(yo(o={},ce.WE.Unknown,Il.ErrorUnknown),yo(o,ce.WE.Forbidden,Il.ErrorForbidden),yo(o,ce.WE.NotFound,Il.ErrorNotFound),o),eh=(yo(s={},Il.ErrorUnknown,{id:Il.ErrorUnknown,componentType:U.lateLoadKey,properties:{image:"no-data-to-show",title:$localize(kr||(kr=Zo(["Whoops, something went wrong"]))),description:$localize(Tr||(Tr=Zo(["There was an unexpected error."])))}}),yo(s,Il.ErrorForbidden,{id:Il.ErrorForbidden,componentType:U.lateLoadKey,properties:{image:"no-data-to-show",title:$localize(Sr||(Sr=Zo(["403 - Forbidden"]))),description:$localize(Ir||(Ir=Zo(["The requested action was forbidden."])))}}),yo(s,Il.ErrorNotFound,{id:Il.ErrorNotFound,componentType:U.lateLoadKey,properties:{image:"no-data-to-show",title:$localize(_r||(_r=Zo(["404 - Not Found"]))),description:$localize(Ar||(Ar=Zo(["The requested resource could not be found."])))}}),s);function th(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le.Cz,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xp,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:eh;return Object.assign({bodyContent:{id:"bodyContent",componentType:Ol.lateLoadKey,properties:{primaryContent:e,fallbackMap:i},providers:yo({},ce.Mu.ContentFallbackAdapter,{providerId:t})}},n)}var ih={providerId:le.GN};function nh(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{providerId:le.tc,properties:{enabled:e,interval:t}}}var rh=(yo(c={},ce.xW.Structure,Object.assign(Object.assign(Object.assign(Object.assign((yo(a={},le.XM,{id:le.XM,componentType:Mo.lateLoadKey,properties:{nodes:["header","loading","search","body"]},providers:yo({},ce.Mu.EventProxy,ih)}),yo(a,"header",Up),yo(a,"loading",Gp),yo(a,"body",Object.assign(Object.assign({},Kp),{properties:Object.assign(Object.assign({},Kp.properties),{elementClass:"overflow-auto"})})),a),th("listWidget")),{search:{id:"search",componentType:Sl.lateLoadKey}}),th("mainContent")),{mainContent:{id:"mainContent",componentType:Mo.lateLoadKey,properties:{nodes:["navigationBar","listWidget"]}},navigationBar:{id:"navigationBar",componentType:es.lateLoadKey},listWidget:{id:"listWidget",componentType:rs.lateLoadKey,providers:{},properties:{elementClass:"w-100 p-3"}}})),yo(c,ce.xW.Configuration,(yo(l={},le.XM,{id:le.XM}),yo(l,"header",{properties:{title:$localize(zr||(zr=Zo(["Empty Custom Widget"])))}}),l)),c),oh={paths:{widget:yo({},ce.AC.Root,le.XM),configurator:(u={},yo(u,ce.AC.Root,le.XM),yo(u,ce.AC.DataSourceProviders,"dataSource.properties.dataSourceProviders"),u)},widget:rh,configurator:Hp},sh=yo({},ce.xW.Structure,(yo(d={},le.XM,{id:le.XM,componentType:cc.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","customConfig"]}}),yo(d,"presentation",{id:"presentation",componentType:du.j.lateLoadKey,properties:{headerText:$localize(Zr||(Zr=Zo(["Presentation"]))),nodes:["titleAndDescription"]}}),yo(d,"titleAndDescription",{id:"titleAndDescription",componentType:ed.U.lateLoadKey,providers:{converter:{providerId:le.j4}}}),yo(d,"customConfig",{id:"customConfig",componentType:du.j.lateLoadKey,properties:{headerText:$localize(Or||(Or=Zo(["Custom Widget Configuration"]))),nodes:["embeddedContentSelection"]}}),yo(d,"embeddedContentSelection",{id:"embeddedContentSelection",componentType:Ru.lateLoadKey,properties:{messageComponent:{componentType:Lu.lateLoadKey,properties:{emphasizeText:"Some content may not work as expected.",generalText:"Web pages embedded in a widget may not be able to open popup windows or may experience formatting problems.\n                                    If you supply your own HTML, dangerous content like scripts will be removed.",link:{href:"https://www.solarwinds.com/",target:"_blank",text:"Learn more about best practices for the HTML widget"},allowDismiss:!0}}},providers:yo({},ce.Mu.Converter,{providerId:le.VX,properties:{formParts:[{previewPath:"mainContent.properties",keys:["customEmbeddedContent","mode","messageComponent","sanitized"]}]}})}),d)),ah=(yo(f={},ce.xW.Structure,Object.assign(Object.assign((yo(h={},le.XM,{id:le.XM,componentType:Mo.lateLoadKey,providers:(p={},yo(p,ce.Mu.Refresher,nh()),yo(p,ce.Mu.EventProxy,ih),p),properties:{nodes:["header","loading","body"]}}),yo(h,"header",Up),yo(h,"loading",Gp),yo(h,"body",Kp),h),th("mainContent")),{mainContent:{id:"mainContent",componentType:se.lateLoadKey,properties:{elementClass:"d-flex w-100 justify-content-center"}}})),yo(f,ce.xW.Configuration,{header:{properties:{title:$localize(Pr||(Pr=Zo(["Empty Embedded Content Widget"])))}}}),f),lh={paths:{widget:yo({},ce.AC.Root,le.XM),configurator:yo({},ce.AC.Root,le.XM)},widget:ah,configurator:sh},ch=i(30412),uh=[{componentType:Sc.a.lateLoadKey,label:$localize(Fr||(Fr=Zo(["Raw Formatter"]))),dataTypes:{value:null}},{componentType:Fc.lateLoadKey,label:$localize(Dr||(Dr=Zo(["Si Units Formatter"]))),dataTypes:{value:null}},{componentType:kc.C.lateLoadKey,label:$localize($r||($r=Zo(["Icon"]))),dataTypes:{value:null}}],dh=yo({},ce.xW.Structure,(yo(m={},le.XM,{id:le.XM,componentType:cc.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","tiles"]},providers:yo({},ce.Mu.FormattersRegistry,{providerId:le.s6})}),yo(m,"presentation",{id:"presentation",componentType:du.j.lateLoadKey,properties:{headerText:$localize(Mr||(Mr=Zo(["Presentation"]))),nodes:["titleAndDescription","refresher"]}}),yo(m,"titleAndDescription",{id:"titleAndDescription",componentType:ed.U.lateLoadKey,providers:{converter:{providerId:le.j4}}}),yo(m,"refresher",ch.l),yo(m,"tiles",{id:"tiles",componentType:md.lateLoadKey,properties:{template:[{id:"description",componentType:Bu.lateLoadKey,properties:{configurableUnits:!0,backgroundColors:_o(bu)},providers:yo({},ce.Mu.Converter,{providerId:le.YN,properties:{formParts:[{previewPath:"properties.widgetData",keys:["label","backgroundColor","units"]}]}})},{id:"dataSource",componentType:$u.s.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Au.K.lateLoadKey},providers:(g={},yo(g,ce.Mu.Converter,{providerId:le.YN,properties:{formParts:[{previewPath:"providers.dataSource",keys:["providerId","properties"]},{previewPath:"providers.adapter.properties.dataSource",keys:["properties"]}]}}),yo(g,ce.Mu.Broadcaster,{providerId:le.m_,properties:{configs:[{trackOn:"component",key:"dataFieldIds",paths:["data.{parentComponentId}/formatting.properties.dataFieldIds"]}]}}),g)},{id:"thresholds",componentType:Hu.lateLoadKey,providers:yo({},ce.Mu.Converter,{providerId:le.YN,properties:{formParts:[{previewPath:"providers.adapter.properties.thresholds",keys:["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"]}]}})},{id:"backgroundColorRules",componentType:Su.lateLoadKey,properties:{backgroundColors:_o(bu)},providers:yo({},ce.Mu.Converter,{providerId:le.YN,properties:{formParts:[{previewPath:"providers.kpiColorPrioritizer.properties",keys:["rules"]}]}})},{id:"formatting",componentType:_p.lateLoadKey,providers:yo({},ce.Mu.Converter,{providerId:le.YN,properties:{formParts:[{previewPath:"properties.configuration.formatters.Value",keys:["formatter"]}]}}),properties:{formatter:{componentType:Sc.a.lateLoadKey,properties:{dataFieldIds:{value:"value"}}}}}]},providers:yo({},ce.Mu.Converter,{providerId:le.ns})}),m)),ph=(yo(x={},ce.xW.Structure,Object.assign(Object.assign((yo(y={},le.XM,{id:le.XM,componentType:Mo.lateLoadKey,providers:(v={},yo(v,ce.Mu.Refresher,nh()),yo(v,ce.Mu.EventProxy,ih),v),properties:{nodes:["header","loading","body"]}}),yo(y,"header",Up),yo(y,"loading",Gp),yo(y,"body",Object.assign(Object.assign({},Kp),{properties:Object.assign(Object.assign({},Kp.properties),{elementClass:"overflow-hidden"})})),y),th("tiles",le.C)),{tiles:{id:"tiles",componentType:qo.lateLoadKey,properties:{elementClass:"flex-grow-1 pt-2 px-3 pb-3 w-100",template:{componentType:Ao.lateLoadKey,providers:(b={},yo(b,ce.Mu.KpiColorPrioritizer,{providerId:le.tS,properties:{}}),yo(b,ce.Mu.Adapter,{providerId:le.u1,properties:{propertyPath:"widgetData"}}),b),properties:{elementClass:"flex-grow-1"}}}}})),yo(x,ce.xW.Configuration,(yo(C={},le.XM,{id:le.XM,providers:yo({},ce.Mu.Refresher,nh(!1,60))}),yo(C,"header",{properties:{title:$localize(Rr||(Rr=Zo(["Empty KPI Widget"])))}}),C)),x),hh="tiles.properties.template[0]",fh="tiles.properties.template[1]",gh={paths:{widget:yo({},ce.AC.Root,le.XM),configurator:(w={},yo(w,ce.AC.Root,le.XM),yo(w,ce.AC.DataSourceConfigComponentType,"".concat(fh,".componentType")),yo(w,ce.AC.TileDescriptionConfigComponentType,"".concat(hh,".componentType")),yo(w,ce.AC.DataSourceProviders,"".concat(fh,".properties.dataSourceProviders")),yo(w,ce.AC.TileDescriptionBackgroundColors,"".concat(hh,".properties.backgroundColors")),yo(w,ce.AC.TileBackgroundColorRulesBackgroundColors,"tiles.properties.template[3].properties.backgroundColors"),w)},widget:ph,configurator:dh},mh={paths:{widget:yo({},ce.AC.Root,le.XM),configurator:yo({},ce.AC.Root,le.XM)},widget:(T={},yo(T,ce.xW.Structure,(k={},yo(k,le.XM,{id:le.XM,componentType:Mo.lateLoadKey,properties:{nodes:["header","body"]}}),yo(k,"header",Up),yo(k,"body",Kp),yo(k,"bodyContent",{id:"bodyContent",componentType:Xc.lateLoadKey}),k)),yo(T,ce.xW.Configuration,{header:{properties:{title:$localize(Jr||(Jr=Zo(["New Widget"])))}}}),T)},vh=function(e,t){var i=(null==t?void 0:t.chartSeriesDataFieldId)||"data[0]",n=e[0];return(null==t?void 0:t.activeMetricId)&&((n=e.find(function(e){return e.id===(null==t?void 0:t.activeMetricId)}))||console.warn("No metric with id: ".concat(null==t?void 0:t.activeMetricId," found. Taking first available."))),Ws()(n,i)};vh.aggregatorType="fieldMapper";var yh=i(76275),bh=i.n(yh),Ch=function(e,t){var i,n=e.map(function(e){return e.data[0]}),r=t||{},o=r.activeMetricId,s=r.base100,a=bh()(n),l=n[0];o&&((l=null===(i=e.find(function(e){return e.id===o}))||void 0===i?void 0:i.data[0])||console.warn("No metric with id: ".concat(o," found. Taking first available.")));var c=l/a,u=s?100*c:c;return(u=Math.round(100*u)/100).toString()};Ch.aggregatorType="percentageAggregator";var xh=function(e,t){var i=(t||{}).activeMetricId;if(i){var n=e.find(function(e){return e.id===i});if(n)return n.data[0]}return bh()(e.map(function(e){return e.data[0]})).toString()};xh.aggregatorType="sumAggregator";var wh=[{componentType:"",label:$localize(Lr||(Lr=Zo(["Raw Formatter"]))),dataTypes:{value:null}},{componentType:Jc.lateLoadKey,label:$localize(Er||(Er=Zo(["Status With Icon"]))),dataTypes:{value:null}},{componentType:Tc.s.lateLoadKey,label:$localize(qr||(qr=Zo(["Link"]))),dataTypes:{value:null}}],kh=[{componentType:Sc.a.lateLoadKey,label:$localize(Br||(Br=Zo(["Raw Formatter"]))),dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:Fc.lateLoadKey,label:$localize(Nr||(Nr=Zo(["Si Units Formatter"]))),dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:Ic.lateLoadKey,label:$localize(Qr||(Qr=Zo(["Percentage Formatter"]))),dataTypes:{value:null},properties:{elementClass:"nui-text-page"}}],Th=[{aggregatorType:xh.aggregatorType,label:"Sum Aggregator",fn:xh,configurationComponent:Cd.lateLoadKey},{aggregatorType:Ch.aggregatorType,label:"Percentage Aggregator",fn:Ch,properties:{base100:!0},configurationComponent:Cd.lateLoadKey},{aggregatorType:vh.aggregatorType,label:"Field Mapper Aggregator",fn:vh,configurationComponent:Sd.lateLoadKey}],Sh=yo({},ce.xW.Structure,(yo(I={},le.XM,{id:le.XM,componentType:cc.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]},providers:yo({},ce.Mu.FormattersRegistry,{providerId:le.rf})}),yo(I,"presentation",{id:"presentation",componentType:du.j.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor"]}}),yo(I,"titleAndDescription",{id:"titleAndDescription",componentType:ed.U.lateLoadKey,providers:yo({},ce.Mu.Converter,{providerId:le.j4})}),yo(I,"chartOptionsEditor",{id:"chartOptionsEditor",componentType:Ld.lateLoadKey,properties:{chartOptions:{chartTypes:["PieChart","DonutChart","VerticalBarChart","HorizontalBarChart"],legendPlacementOptions:[{id:ne.w.None,label:$localize(Yr||(Yr=Zo(["None"])))},{id:ne.w.Right,label:$localize(Vr||(Vr=Zo(["Right"])))},{id:ne.w.Bottom,label:$localize(jr||(jr=Zo(["Bottom"])))}],contentFormatters:[{componentType:xc.lateLoadKey,label:$localize(Wr||(Wr=Zo(["Raw"])))},{componentType:wc.lateLoadKey,label:$localize(Hr||(Hr=Zo(["Sum"])))},{componentType:mc.lateLoadKey,label:$localize(Ur||(Ur=Zo(["Percentage"]))),configurationComponent:"DonutContentPercentageConfigurationComponent"}],legendFormatters:[{componentType:Jc.lateLoadKey,label:$localize(Gr||(Gr=Zo(["Status With Icon"])))},{componentType:Tc.s.lateLoadKey,label:$localize(Kr||(Kr=Zo(["Link"])))}]}},providers:yo({},ce.Mu.Converter,{providerId:le.dz})}),yo(I,"refresher",ch.l),yo(I,"dataAndCalculations",{id:"dataAndCalculations",componentType:du.j.lateLoadKey,properties:{headerText:$localize(Xr||(Xr=Zo(["Data and Calculations"]))),nodes:["dataSource"]}}),yo(I,"dataSource",{id:"dataSource",componentType:$u.s.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Au.K.lateLoadKey},providers:(S={},yo(S,ce.Mu.Converter,{providerId:le.VX,properties:{formParts:[{previewPath:"chart.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}}),yo(S,ce.Mu.Broadcaster,{providerId:le.m_,properties:{configs:[{trackOn:"component",key:"dsOutput",paths:["data.chartOptionsEditor.properties.dsOutput"]}]}}),S)}),I)),Ih=(yo(Z={},ce.xW.Structure,Object.assign(Object.assign((yo(A={},le.XM,{id:le.XM,componentType:Mo.lateLoadKey,properties:{nodes:["header","loading","body"]},providers:(_={},yo(_,ce.Mu.Refresher,nh()),yo(_,ce.Mu.EventProxy,ih),_)}),yo(A,"header",Up),yo(A,"loading",Gp),yo(A,"body",Object.assign(Object.assign({},Kp),{properties:Object.assign(Object.assign({},Kp.properties),{elementClass:"overflow-auto"})})),A),th("chart")),{chart:{id:"chart",componentType:Qs.lateLoadKey,providers:yo({},ce.Mu.Adapter,{providerId:le.bZ,properties:{componentId:"chart",propertyPath:"widgetData"}}),properties:{elementClass:"d-flex flex-grow-1 justify-content-center overflow-auto"}}})),yo(Z,ce.xW.Configuration,(yo(z={},le.XM,{id:le.XM,providers:yo({},ce.Mu.Refresher,nh(!1,60))}),yo(z,"header",{properties:{title:$localize(eo||(eo=Zo(["Empty Proportional Widget"])))}}),z)),Z),_h={paths:{widget:yo({},ce.AC.Root,le.XM),configurator:(O={},yo(O,ce.AC.Root,le.XM),yo(O,ce.AC.DataSourceConfigComponentType,"dataSource.componentType"),yo(O,ce.AC.DataSourceProviders,"dataSource.properties.dataSourceProviders"),yo(O,ce.AC.Formatters,"chartOptionsEditor.properties.chartOptions.contentFormatters"),O)},widget:Ih,configurator:Sh},Ah=(yo(M={},ce.xW.Structure,Object.assign(Object.assign((yo(F={},le.XM,{id:le.XM,componentType:Mo.lateLoadKey,providers:(P={},yo(P,ce.Mu.Refresher,nh()),yo(P,ce.Mu.EventProxy,{providerId:le.GN,properties:{downstreams:[le.pV.id]}}),P),properties:{nodes:["header","loading","body"]}}),yo(F,"header",Up),yo(F,"loading",Gp),yo(F,"body",Object.assign(Object.assign({},Kp),{properties:Object.assign(Object.assign({},Kp.properties),{elementClass:"overflow-auto"})})),F),th("table")),{table:{id:"table",componentType:ba.lateLoadKey,providers:(D={},yo(D,ce.Mu.Adapter,{providerId:le.l5,properties:{componentId:"table",dataPath:"widgetData",dataFieldsPath:"dataFields",totalItemsPath:"totalItems"}}),yo(D,"virtualViewportManager",{providerId:le.Vx}),D),properties:{elementClass:"flex-grow-1 mx-3 mb-3 mt-2",delayedMousePresenceDetectionEnabled:!0,configuration:{columns:[],scrollActivationDelayMs:500,headerTooltipsEnabled:!0}}}})),yo(M,ce.xW.Configuration,(yo($={},le.XM,{id:le.XM,providers:yo({},ce.Mu.Refresher,nh(!1,60))}),yo($,"header",{properties:{title:$localize(to||(to=Zo(["Empty Table Widget"])))}}),$)),M),zh={paths:{widget:yo({},ce.AC.Root,le.XM),configurator:(R={},yo(R,ce.AC.Root,le.XM),yo(R,ce.AC.DataSourceConfigComponentType,"dataSource.componentType"),yo(R,ce.AC.DataSourceProviders,"dataSource.properties.dataSourceProviders"),yo(R,ce.AC.Formatters,"columns.properties.template[1].properties.formatters"),R)},widget:Ah,configurator:ip.P},Zh=yo({},ce.xW.Structure,(yo(J={},le.XM,{id:le.XM,componentType:cc.P.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","series"]}}),yo(J,"presentation",{id:"presentation",componentType:du.j.lateLoadKey,properties:{headerText:$localize(io||(io=Zo(["Presentation"]))),nodes:["titleAndDescription","timeseriesMetadata"]}}),yo(J,"titleAndDescription",{id:"titleAndDescription",componentType:ed.U.lateLoadKey,providers:yo({},ce.Mu.Converter,{providerId:le.j4})}),yo(J,"timeseriesMetadata",{id:"timeseriesMetadata",componentType:Xu.lateLoadKey,properties:{legendPlacements:[{id:ne.w.None,label:$localize(no||(no=Zo(["None"])))},{id:ne.w.Right,label:$localize(ro||(ro=Zo(["Right"])))},{id:ne.w.Bottom,label:$localize(oo||(oo=Zo(["Bottom"])))}]},providers:yo({},ce.Mu.Converter,{providerId:le.dZ})}),yo(J,"refresher",ch.l),yo(J,"dataAndCalculations",{id:"dataAndCalculations",componentType:du.j.lateLoadKey,properties:{headerText:$localize(so||(so=Zo(["Data and Calculations"]))),nodes:["dataSource"]}}),yo(J,"dataSource",{id:"dataSource",componentType:$u.s.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Au.K.lateLoadKey},providers:yo({},ce.Mu.Converter,{providerId:le.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}})}),yo(J,"series",{id:"series",componentType:$p.lateLoadKey,providers:yo({},ce.Mu.Converter,{providerId:le.Ip}),properties:{template:[{id:"description",componentType:Mp.lateLoadKey,providers:yo({},ce.Mu.Converter,{providerId:le.Es,properties:{formParts:[{previewPath:"chart.providers.adapter.properties.series",keys:["label"]}]}})},{id:"indicatorData",componentType:Jp.lateLoadKey,providers:yo({},ce.Mu.Converter,{providerId:le.Gq})}]}}),J)),Oh=(yo(B={},ce.xW.Structure,Object.assign(Object.assign((yo(E={},le.XM,{id:le.XM,componentType:Mo.lateLoadKey,providers:(L={},yo(L,ce.Mu.Refresher,nh()),yo(L,ce.Mu.EventProxy,ih),L),properties:{nodes:["header","loading","body"]}}),yo(E,"header",Up),yo(E,"loading",Gp),yo(E,"body",Object.assign(Object.assign({},Kp),{properties:Object.assign(Object.assign({},Kp.properties),{elementClass:"overflow-auto"})})),E),th("mainContent")),{mainContent:{id:"mainContent",componentType:Mo.lateLoadKey,properties:{nodes:["timeframeSelection","chart"]}},timeframeSelection:{id:"timeframeSelection",componentType:Ta.lateLoadKey},chart:{id:"chart",componentType:kl.lateLoadKey,properties:{elementClass:"d-flex flex-column justify-content-center h-100 overflow-auto",configuration:{preset:_a.Line,scales:{y:{type:Ia.Linear},x:{type:Ia.Time}}}},providers:yo({},ce.Mu.Adapter,{providerId:le.R9,properties:{componentId:"chart",propertyPath:"widgetData",series:[]}})}})),yo(B,ce.xW.Configuration,(yo(q={},le.XM,{id:le.XM,providers:yo({},ce.Mu.Refresher,nh(!1,60))}),yo(q,"header",{properties:{title:$localize(ao||(ao=Zo(["Empty Timeseries Widget"])))}}),q)),B),Ph={paths:{widget:yo({},ce.AC.Root,le.XM),configurator:(N={},yo(N,ce.AC.Root,le.XM),yo(N,ce.AC.DataSourceConfigComponentType,"dataSource.componentType"),yo(N,ce.AC.DataSourceProviders,"dataSource.properties.dataSourceProviders"),N)},widget:Oh,configurator:Zh},Fh=i(96800),Dh=[se,Ao,Qa,ss,Qs,Mo,Xa,ll,vl,Da,ba,Ca.q,qo,Ta,kl,Dl,Ol,Hl,U,rs,Ko,Vo,es,Sl,ms],$h=function(){var e=Fo(function e(t,i,n,r){Oo(this,e),t.registerWidgetType("kpi",1,gh),t.registerWidgetType("table",1,zh),t.registerWidgetType("proportional",1,_h),t.registerWidgetType("timeseries",1,Ph),t.registerWidgetType("previewPlaceholder",1,mh),t.registerWidgetType("embedded-content",1,lh),t.registerWidgetType("drilldown",1,oh);var o,s=vo(Dh.filter(function(e){return e.lateLoadKey}));try{for(s.s();!(o=s.n()).done;){var a=o.value;i.registerByLateLoadKey(a)}}catch(l){s.e(l)}finally{s.f()}n.registerEvent(le.RG),n.registerEvent(le.y4),n.registerEvent(le.j7),n.registerEvent(le.Ef),n.registerEvent(le.MO),n.registerEvent(le.pV),n.registerEvent(le.Xi),n.registerEvent(le.M),n.registerEvent(le.re),n.registerEvent(le.xZ),n.registerEvent(le.N9),n.registerEvent(_u.PF),n.registerEvent(le.QD),r.addItems(uh)});return e.\u0275fac=function(t){return new(t||e)(H.LFG(cs.x),H.LFG(uc.h),H.LFG(Fh.o),H.LFG(us.YX))},e.\u0275mod=H.oAB({type:e}),e.\u0275inj=H.cJS({providers:[Bp.$,cs.x,V.JJ,Ys.g],imports:[[G,te.IX,j.Gsl,j.Az_,ee.$y4,jp,j.Ts3,j.sF0,j.r$w,Xl,j.cnx,j.BSv,j.hvO,j.l70,K.Cl,j.JhO,X.UX,j.ILf,j.VSN,j.a$t,j.lam,j.ZuS,j.w0o]]}),e}();H.B6R(ie.M,[te.sm,V.sg,te.IM,Wp,V.O5,Gl,ss],[V.Nd]);var Mh=((Mh||(Mh={})).Value="Value",Mh);function Rh(e,t,i){var n=t;return i.forEach(function(i,r){if(0!==i.data.length){var o=-1,s=-1,a=t[r].data;a.length>0?(o=i.data.findIndex(function(e){return wa()(e.x).isSame(a[0].x)}),s=i.data.findIndex(function(e){return wa()(e.x).isSame(a[a.length-1].x)})):(o=i.data.findIndex(function(t){return wa()(t.x).isAfter(e.startDatetime)}),s=i.data.findIndex(function(t){return wa()(t.x).isAfter(e.endDatetime)})-1);var l=wa()(e.startDatetime);(0===a.length||!l.isSame(a[0].x))&&l.isBetween(i.data[0].x,i.data[i.data.length-1].x)&&n[r].data.unshift(Object.assign(Object.assign({},i.data[o-1]),{x:e.startDatetime.toDate()}));var c=wa()(e.endDatetime);(0===a.length||!c.isSame(a[a.length-1].x))&&c.isBetween(i.data[0].x,i.data[i.data.length-1].x)&&n[r].data.push(Object.assign(Object.assign({},i.data[s]),{x:e.endDatetime.toDate()}))}}),n}i(388),i(54910),i(81354),i(37367),i(43925),i(83645),i(18989);var Jh={presentation:{id:"presentation",componentType:du.j.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor","donutContentConfiguration"]}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:zd.lateLoadKey,properties:{chartTypes:[{id:"PieChart",label:$localize(lo||(lo=Zo(["Pie"])))},{id:"DonutChart",label:$localize(co||(co=Zo(["Donut"])))},{id:"VerticalBarChart",label:$localize(uo||(uo=Zo(["Vertical Bar"])))},{id:"HorizontalBarChart",label:$localize(po||(po=Zo(["Horizontal Bar"])))}],legendPlacementOptions:[{id:ne.w.None,label:$localize(ho||(ho=Zo(["None"])))},{id:ne.w.Right,label:$localize(fo||(fo=Zo(["Right"])))},{id:ne.w.Bottom,label:$localize(go||(go=Zo(["Bottom"])))}]},providers:(Q={},yo(Q,ce.Mu.Converter,{providerId:le.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions",keys:["type","legendPlacement","legendFormatter"]}]}}),yo(Q,ce.Mu.Broadcaster,{providerId:le.m_,properties:{configs:[{trackOn:"component",key:"chartTypeChanged$",paths:["data.donutContentConfiguration.properties.chartType"]}]}}),Q)},donutContentConfiguration:{id:"donutContentConfiguration",componentType:Wd.lateLoadKey,providers:yo({},ce.Mu.Converter,{providerId:le.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions.donutContentConfig",keys:["formatter","aggregator"]}]}})}}}}])}();