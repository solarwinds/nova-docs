"use strict";(self.webpackChunk_nova_ui_dashboards=self.webpackChunk_nova_ui_dashboards||[]).push([[984],{30984:function(e,r,t){t.r(r),t.d(r,{OverviewModule:function(){return S}});var i=t(99763),o=t(46806),s=t(69063),d=t(91580),a=t(98462),n=t(48791),p=t(10325),l=t(40844),c=t(59311),u=t.n(c),g=t(79765),v=t(33018);let h=(()=>{class e{constructor(e){this.toastService=e,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=(e,r)=>{const t=new g.xQ;return setTimeout(()=>{if(this.allowSubmit)t.next(e);else{const e=$localize`Submit failed.`;this.toastService.error({title:e}),t.error(e)}},1e3),t.asObservable()},this.tryRemove=e=>{const r=new g.xQ;return setTimeout(()=>{if(this.allowRemoval)r.next(e);else{const e=$localize`Widget removal failed.`;this.toastService.error({title:e}),r.error(e)}},200),r.asObservable()},this.toastService.setConfig({timeOut:2e3})}}return e.\u0275fac=function(r){return new(r||e)(v.LFG(o.klp))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac}),e})();var m=t(77459);const f={widget1:{cols:6,rows:6,y:0,x:0},widget2:{cols:6,rows:6,y:0,x:6},widget3:{cols:7,rows:6,y:6,x:0},widget4:{cols:5,rows:6,y:6,x:7}},w=[{id:"widget1",type:"kpi",pizzagna:{[s.xW5.Configuration]:{header:{properties:{title:"KPI Widget!",subtitle:"A bunch of number boxes"}},tiles:{properties:{nodes:["kpi1","kpi2"]}},kpi1:{id:"kpi1",componentType:s.ufE.lateLoadKey,providers:{[s.Muk.DataSource]:{providerId:a.Of.providerId},[s.Muk.Adapter]:{providerId:s.u1$,properties:{componentId:"kpi1",propertyPath:"widgetData",thresholds:{showThresholds:!0,warningThresholdValue:5,criticalThresholdValue:8}}}},properties:{elementClass:"flex-grow-1",widgetData:{id:"totalStorage",value:0,label:"Total storage"}}},kpi2:{id:"kpi2",componentType:s.ufE.lateLoadKey,providers:{[s.Muk.DataSource]:{providerId:a.v8.providerId},[s.Muk.Adapter]:{providerId:s.u1$,properties:{componentId:"kpi2",propertyPath:"widgetData",thresholds:{warningThresholdValue:120,criticalThresholdValue:150}}}},properties:{elementClass:"flex-grow-1",widgetData:{id:"downloadSpeed",value:0,label:"Download speed"}}}}}},{id:"widget2",type:"proportional",pizzagna:{[s.xW5.Configuration]:{header:{properties:{title:"Proportional Widget!",subtitle:"Proportional widget with legend formatters"}},chart:{providers:{[s.Muk.DataSource]:{providerId:n.DU.providerId}},properties:{configuration:{chartOptions:{type:s.EMX.PieChart,legendPlacement:s.woB.Right,legendFormatter:{componentType:s.s9y.lateLoadKey}}}}}}}},{id:"widget3",type:"timeseries",pizzagna:{[s.xW5.Configuration]:{[s.XMI]:{providers:{[s.Muk.DataSource]:{providerId:l.GS.providerId}}},header:{properties:{title:"Timeseries Widget!",subtitle:"Basic timeseries widget"}},chart:{providers:{[s.Muk.Adapter]:{properties:{series:[{id:"series-1",label:"Average CPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"},{id:"series-3",label:"Average CPU Load",selectedSeriesId:"series-3"}]}}},properties:{configuration:{legendPlacement:s.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)"}}},timeframeSelection:{properties:{timeframe:{startDatetime:(0,m.ad)().subtract(7,"day").format(),endDatetime:(0,m.ad)().format(),selectedPresetId:null}}}}}},{id:"widget4",type:"table",pizzagna:{[s.xW5.Configuration]:{header:{properties:{title:"Table Widget!",subtitle:"Basic table widget"}},table:{providers:{[s.Muk.DataSource]:{providerId:p.P.providerId}},properties:{configuration:{columns:[{id:"column1",label:"No",isActive:!0,formatter:{componentType:s.aDR.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:s.aDR.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Location",isActive:!0,formatter:{componentType:s.s9y.lateLoadKey,properties:{dataFieldIds:{value:"firstUrlLabel",link:"firstUrl"}}}}],sorterConfiguration:{descendantSorting:!0,sortBy:"column1"},hasVirtualScroll:!0}}}}}}];var b=t(5457),C=t(46276),y=t(54607);const I=[{path:"",component:(()=>{class e{constructor(e,r,t,i){this.providerRegistry=e,this.submitHandler=r,this.themeSwitcherService=t,this.widgetTypesService=i,this.dashboard={positions:{},widgets:{}},this.gridsterConfig={minCols:12,maxCols:12,minRows:12},this.editMode=!1,this.dsError=!1,this.providerRegistry.setProviders({[a.Of.providerId]:{provide:s.Fk3,useClass:a.Of,deps:[]},[a.v8.providerId]:{provide:s.Fk3,useClass:a.v8,deps:[]},[n.U8.providerId]:{provide:s.Fk3,useClass:n.U8,deps:[]},[n.DU.providerId]:{provide:s.Fk3,useClass:n.DU,deps:[]},[n.An.providerId]:{provide:s.Fk3,useClass:n.An,deps:[]},[p.P.providerId]:{provide:s.Fk3,useClass:p.P,deps:[o.oDG,s.nYw]},[p.B.providerId]:{provide:s.Fk3,useClass:p.B,deps:[o.oDG,s.nYw]},[l.GS.providerId]:{provide:s.Fk3,useClass:l.GS,deps:[]},[l.mx.providerId]:{provide:s.Fk3,useClass:l.mx,deps:[]}})}ngOnInit(){const e=w.map(e=>Object.assign(Object.assign({},e),{pizzagna:Object.assign(Object.assign({},this.widgetTypesService.getWidgetType(e.type,e.version).widget),e.pizzagna)})),r=u()(e,e=>e.id);this.dashboard={positions:f,widgets:r}}onDsErrorChange(e){a.Of.mockError=e,l.GS.mockError=e,p.P.mockError=e,n.DU.mockError=e}}return e.\u0275fac=function(r){return new(r||e)(v.Y36(s.CNH),v.Y36(h),v.Y36(o.ERq),v.Y36(s.xTe))},e.\u0275cmp=v.Xpm({type:e,selectors:[["acme-dashboard"]],features:[v._Bn([h])],decls:3,vars:6,consts:[[3,"editMode","dsError","editModeChange","dsErrorChange"],[1,"dashboard"],[3,"nuiWidgetEditor","dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"]],template:function(e,r){1&e&&(v.TgZ(0,"dashboard-test-harness",0),v.NdJ("editModeChange",function(e){return r.editMode=e})("dsErrorChange",function(e){return r.onDsErrorChange(e)}),v.TgZ(1,"div",1),v.TgZ(2,"nui-dashboard",2),v.NdJ("dashboardChange",function(e){return r.dashboard=e})("gridsterConfigChange",function(e){return r.gridsterConfig=e}),v.qZA(),v.qZA(),v.qZA()),2&e&&(v.Q6J("editMode",r.editMode)("dsError",r.dsError),v.xp6(2),v.Q6J("nuiWidgetEditor",r.submitHandler)("dashboard",r.dashboard)("gridsterConfig",r.gridsterConfig)("editMode",r.editMode))},directives:[b.W,C.M,y.t],styles:[".dashboard[_ngcontent-%COMP%]{height:725px;width:1000px}"]}),e})(),data:{srlc:{hideIndicator:!0}}}];let S=(()=>{class e{constructor(e){var r;this.widgetTypesService=e,null===(r=this.widgetTypesService.getWidgetType("proportional",1).widget.structure[s.XMI].providers)||void 0===r||delete r.refresher,this.setDataSourceProviders("table",[p.P.providerId,p.B.providerId]),this.setDataSourceProviders("kpi",[a.Of.providerId,a.v8.providerId]),this.setDataSourceProviders("proportional",[n.U8.providerId,n.DU.providerId,n.An.providerId]),this.setDataSourceProviders("timeseries",[l.GS.providerId,l.mx.providerId])}setDataSourceProviders(e,r){const t=this.widgetTypesService.getWidgetType(e,1);this.widgetTypesService.setNode(t,"configurator",s.ACc.DataSourceProviders,r)}}return e.\u0275fac=function(r){return new(r||e)(v.LFG(s.xTe))},e.\u0275mod=v.oAB({type:e}),e.\u0275inj=v.cJS({providers:[s.CNH],imports:[[d.o,s.Pi,o.Gsl,o.Az_,o.vvu,o.cJ5,o.Ts3,i.Bz.forChild(I)]]}),e})()}}]);