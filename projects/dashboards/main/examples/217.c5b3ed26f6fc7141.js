"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[217],{14217:(z,v,d)=>{d.r(v),d.d(v,{ConfiguratorTestModule:()=>N});var y=d(11420),l=d(30652),e=d(49018),T=d(29834),c=d(13308),p=d(33985),g=d(71823),u=d(60476),b=d(12498),w=d.n(b),m=d(77579),I=d(95698),A=d(82722),C=d(69808),o=d(5e3),D=d(90733),M=d.n(D),O=d(34793),E=d.n(O),f=d(28330);const P={widget1:{cols:6,rows:6,y:0,x:0},widget2:{cols:6,rows:6,y:0,x:6},widget3:{cols:7,rows:6,y:6,x:0},widget4:{cols:5,rows:6,y:6,x:7}},h=[{id:"widget1",type:"kpi",pizzagna:{[e.xW5.Configuration]:{header:{properties:{title:"KPI Widget!",subtitle:"A bunch of number boxes"}},tiles:{properties:{nodes:["kpi1","kpi2"]}},kpi1:{id:"kpi1",componentType:e.ufE.lateLoadKey,providers:{[e.Muk.DataSource]:{providerId:c.Of.providerId},[e.Muk.Adapter]:{providerId:e.u1$,properties:{componentId:"kpi1",propertyPath:"widgetData",thresholds:{showThresholds:!0,warningThresholdValue:5,criticalThresholdValue:8}}}},properties:{elementClass:"flex-grow-1",widgetData:{id:"totalStorage",value:0,label:"Total storage"}}},kpi2:{id:"kpi2",componentType:e.ufE.lateLoadKey,providers:{[e.Muk.DataSource]:{providerId:c.v8.providerId},[e.Muk.Adapter]:{providerId:e.u1$,properties:{componentId:"kpi2",propertyPath:"widgetData",thresholds:{warningThresholdValue:120,criticalThresholdValue:150}}}},properties:{elementClass:"flex-grow-1",widgetData:{id:"downloadSpeed",value:0,label:"Download speed"}}}}}},{id:"widget2",type:"proportional",pizzagna:{[e.xW5.Configuration]:{header:{properties:{title:"Proportional Widget!",subtitle:"Proportional widget with legend formatters"}},chart:{providers:{[e.Muk.DataSource]:{providerId:p.DU.providerId}},properties:{configuration:{chartOptions:{type:e.EMX.PieChart,legendPlacement:e.woB.Right,legendFormatter:{componentType:e.s9y.lateLoadKey}}}}}}}},{id:"widget3",type:"timeseries",pizzagna:{[e.xW5.Configuration]:{[e.XMI]:{providers:{[e.Muk.DataSource]:{providerId:u.GS.providerId}}},header:{properties:{title:"Timeseries Widget!",subtitle:"Basic timeseries widget"}},chart:{providers:{[e.Muk.Adapter]:{properties:{series:[{id:"series-1",label:"Average CPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"},{id:"series-3",label:"Average CPU Load",selectedSeriesId:"series-3"}]}}},properties:{configuration:{legendPlacement:e.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)"}}},timeframeSelection:{properties:{timeframe:{startDatetime:(0,f.ad)().subtract(7,"day").format(),endDatetime:(0,f.ad)().format(),selectedPresetId:null}}}}}},{id:"widget4",type:"table",pizzagna:{[e.xW5.Configuration]:{header:{properties:{title:"Table Widget!",subtitle:"Basic table widget"}},table:{providers:{[e.Muk.DataSource]:{providerId:g.P.providerId}},properties:{configuration:{columns:[{id:"column1",label:"No",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Location",isActive:!0,formatter:{componentType:e.s9y.lateLoadKey,properties:{dataFieldIds:{value:"firstUrlLabel",link:"firstUrl"}}}}],sorterConfiguration:{descendantSorting:!0,sortBy:"column1"},hasVirtualScroll:!0}}}}}}];function W(s,a){if(1&s&&(o.TgZ(0,"div",3)(1,"div",4),o._uU(2),o.qZA()()),2&s){const t=a.item;o.xp6(2),o.hij(" ",t.title," ")}}let R=(()=>{class s{constructor(t){this.widgetTypesService=t,this.widgetSelected=new o.vpe,this.widgetItems=[]}ngOnInit(){const t=new C.rS;this.widgetItems=h.map(i=>(console.log(i),{title:t.transform(i.type),widget:this.widgetTypesService.mergeWithWidgetType(i)})),this.onSelect([this.widgetItems[0]]),h.forEach(i=>{this.addUnconfiguredWidgetWithConfigLayer(i)})}addUnconfiguredWidgetWithConfigLayer(t){const i=(new C.rS).transform(t.type);this.widgetItems.push({title:`Unconfigured ${i} With Config Layer`,widget:Object.assign(Object.assign({},M()(this.widgetTypesService.mergeWithWidgetType(t))),{id:`unconfiguredWithConfigLayer${i}`,metadata:{needsConfiguration:!0}})}),E()(this.widgetItems[this.widgetItems.length-1].widget.pizzagna,`${e.xW5.Configuration}.header.properties.title`,`Unconfigured ${i} With Config Layer`)}onSelect(t){this.widgetSelected.emit(t[0].widget),this.widgetSelection=t}}return s.lateLoadKey="AcmeCloneSelectionComponent",s.\u0275fac=function(t){return new(t||s)(o.Y36(e.xTe))},s.\u0275cmp=o.Xpm({type:s,selectors:[["acme-clone-selection"]],outputs:{widgetSelected:"widgetSelected"},decls:4,vars:3,consts:[[1,"nui-widget-cloner"],["selectionMode","singleWithRequiredSelection",3,"itemsSource","selection","repeatItemTemplateRef","selectionChange"],["widgetClonerItem",""],[1,"nui-widget-cloner__item","d-flex","pt-2","pb-2","align-items-center"],[1,"text-info","ml-3"]],template:function(t,i){if(1&t&&(o.TgZ(0,"div",0)(1,"nui-repeat",1),o.NdJ("selectionChange",function(n){return i.onSelect(n)}),o.qZA()(),o.YNc(2,W,3,1,"ng-template",null,2,o.W1O)),2&t){const r=o.MAs(3);o.xp6(1),o.Q6J("itemsSource",i.widgetItems)("selection",i.widgetSelection)("repeatItemTemplateRef",r)}},directives:[l.$N6],styles:[".nui-widget-cloner__item[_ngcontent-%COMP%]{height:60px}"]}),s})(),S=(()=>{class s{constructor(t){this.toastService=t,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=i=>{const r=new m.x;return setTimeout(()=>{if(this.allowSubmit)r.next(i);else{const n=$localize`Submit failed.`;this.toastService.error({title:n}),r.error(n)}},1e3),r.asObservable()},this.tryRemove=i=>{const r=new m.x;return setTimeout(()=>{if(this.allowRemoval)r.next(i);else{const n=$localize`Widget removal failed.`;this.toastService.error({title:n}),r.error(n)}},200),r.asObservable()},this.toastService.setConfig({timeOut:2e3})}}return s.\u0275fac=function(t){return new(t||s)(o.LFG(l.klp))},s.\u0275prov=o.Yz7({token:s,factory:s.\u0275fac}),s})();var F=d(98379),L=d(34575),U=d(44994);const x=[{path:"",component:(()=>{class s{constructor(t,i,r,n,k){this.providerRegistry=t,this.submitHandler=i,this.themeSwitcherService=r,this.widgetTypesService=n,this.widgetClonerService=k,this.destroy$=new m.x,this.dashboard={positions:{},widgets:{}},this.gridsterConfig={minCols:12,maxCols:12,minRows:12},this.editMode=!1,this.dsError=!1,this.providerRegistry.setProviders({[c.Of.providerId]:{provide:e.Fk3,useClass:c.Of,deps:[]},[c.v8.providerId]:{provide:e.Fk3,useClass:c.v8,deps:[]},[p.U8.providerId]:{provide:e.Fk3,useClass:p.U8,deps:[]},[p.DU.providerId]:{provide:e.Fk3,useClass:p.DU,deps:[]},[p.An.providerId]:{provide:e.Fk3,useClass:p.An,deps:[]},[g.P.providerId]:{provide:e.Fk3,useClass:g.P,deps:[l.oDG,e.nYw]},[g.B.providerId]:{provide:e.Fk3,useClass:g.B,deps:[l.oDG,e.nYw]},[u.GS.providerId]:{provide:e.Fk3,useClass:u.GS,deps:[]},[u.mx.providerId]:{provide:e.Fk3,useClass:u.mx,deps:[]}})}ngOnInit(){const t=h.map(r=>Object.assign(Object.assign({},r),{pizzagna:Object.assign(Object.assign({},this.widgetTypesService.getWidgetType(r.type,r.version).widget),r.pizzagna)})),i=w()(t,r=>r.id);this.dashboard={positions:P,widgets:i}}onDsErrorChange(t){c.Of.mockError=t,u.GS.mockError=t,g.P.mockError=t,p.DU.mockError=t}onCloneWidget(){this.widgetClonerService.open({dashboardComponent:this.dashboardComponent,trySubmit:this.submitHandler.trySubmit,widgetSelectionComponentType:R}).pipe((0,I.q)(1),(0,A.R)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return s.\u0275fac=function(t){return new(t||s)(o.Y36(e.CNH),o.Y36(S),o.Y36(l.ERq),o.Y36(e.xTe),o.Y36(e.$Ie))},s.\u0275cmp=o.Xpm({type:s,selectors:[["acme-dashboard"]],viewQuery:function(t,i){if(1&t&&o.Gf(e.MXM,7),2&t){let r;o.iGM(r=o.CRH())&&(i.dashboardComponent=r.first)}},features:[o._Bn([S])],decls:5,vars:6,consts:function(){let a;return a=$localize`:␟489801ff09de9b4a6ca8b6e05a475fa1ca00d98e␟5813529530812520031: Create Widget Clone
`,[["type","button","nui-button","",1,"mb-3","ml-4","nui-widget-cloner-test-button",3,"click"],a,[3,"editMode","dsError","editModeChange","dsErrorChange"],[1,"dashboard"],[3,"nuiWidgetEditor","dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"]]},template:function(t,i){1&t&&(o.TgZ(0,"button",0),o.NdJ("click",function(){return i.onCloneWidget()}),o.SDv(1,1),o.qZA(),o.TgZ(2,"dashboard-test-harness",2),o.NdJ("editModeChange",function(n){return i.editMode=n})("dsErrorChange",function(n){return i.onDsErrorChange(n)}),o.TgZ(3,"div",3)(4,"nui-dashboard",4),o.NdJ("dashboardChange",function(n){return i.dashboard=n})("gridsterConfigChange",function(n){return i.gridsterConfig=n}),o.qZA()()()),2&t&&(o.xp6(2),o.Q6J("editMode",i.editMode)("dsError",i.dsError),o.xp6(2),o.Q6J("nuiWidgetEditor",i.submitHandler)("dashboard",i.dashboard)("gridsterConfig",i.gridsterConfig)("editMode",i.editMode))},directives:[l.r0F,F.W,L.M,U.t],styles:[".dashboard[_ngcontent-%COMP%]{height:725px;width:1000px}"]}),s})(),data:{srlc:{hideIndicator:!0}}}];let N=(()=>{class s{constructor(t){var i;this.widgetTypesService=t,null===(i=this.widgetTypesService.getWidgetType("proportional",1).widget.structure[e.XMI].providers)||void 0===i||delete i.refresher,this.setDataSourceProviders("table",[g.P.providerId,g.B.providerId]),this.setDataSourceProviders("kpi",[c.Of.providerId,c.v8.providerId]),this.setDataSourceProviders("proportional",[p.U8.providerId,p.DU.providerId,p.An.providerId]),this.setDataSourceProviders("timeseries",[u.GS.providerId,u.mx.providerId])}setDataSourceProviders(t,i){const r=this.widgetTypesService.getWidgetType(t,1);this.widgetTypesService.setNode(r,"configurator",e.ACc.DataSourceProviders,i)}}return s.\u0275fac=function(t){return new(t||s)(o.LFG(e.xTe))},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({providers:[e.CNH],imports:[[T.o,e.Pi,l.Gsl,l.Az_,l.vvu,l.cJ5,l.Ts3,l.ZuS,y.Bz.forChild(x)]]}),s})()}}]);