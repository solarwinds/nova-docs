(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[357],{54195:(re,W,l)=>{"use strict";l.d(W,{b:()=>a});var d=l(94650);let a=(()=>{class O{}return O.lateLoadKey="PreviewOverlayComponent",O.\u0275fac=function(R){return new(R||O)},O.\u0275cmp=d.Xpm({type:O,selectors:[["nui-preview-overlay"]],decls:2,vars:0,consts:function(){let e;return e=$localize`:␟5c3a86dc3add2a84bd6fe948cb6fe0c451fcce21␟7864955898524965693: This is a non-interactive widget preview `,[[1,"nui-text-label","content"],e]},template:function(R,N){1&R&&(d.TgZ(0,"div",0),d.SDv(1,1),d.qZA())},styles:["[_nghost-%COMP%]{opacity:0;transition-property:opacity;transition-duration:.5s;position:absolute;z-index:1060;background-color:var(--nui-color-bg-content_popover,#fff);height:100%;width:100%}[_nghost-%COMP%]:hover{opacity:.96}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:center;align-items:center;position:absolute;inset:0 2px 2px;cursor:not-allowed}"]}),O})()},18177:(re,W,l)=>{"use strict";l.d(W,{M:()=>G});var d=l(94650),a=l(29583),O=l(69754),e=l.n(O),R=l(72536),N=l(39973),A=l(65470);const T={displayGrid:a.KY.None,gridType:a.tQ.VerticalFixed,compactType:a.RU.CompactUp,margin:15,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,mobileBreakpoint:640,minCols:12,maxCols:12,minRows:12,fixedRowHeight:44,minItemArea:1,defaultItemCols:6,defaultItemRows:6,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,scrollSensitivity:10,scrollSpeed:20,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{enabled:!1,ignoreContent:!0,dragHandleClass:"nui-dashboard__widget--drag-handle"},resizable:{enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0}},swap:!1,pushItems:!0,pushResizeItems:!0,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1};var p=l(36895),v=l(923),h=l(82074),w=l(82442);function M(y,z){if(1&y){const D=d.EpF();d.TgZ(0,"nui-widget",5),d.NdJ("widgetChange",function(m){d.CHM(D);const x=d.oxw(2);return d.KtG(x.onWidgetChange(m))}),d.qZA()}if(2&y){const D=d.oxw().$implicit;d.Q6J("widget",D.value),d.uIk("widget-id",D.key)("widget-type",D.value.type)("widget-guid",D.value.uniqueKey)}}function F(y,z){if(1&y&&(d.TgZ(0,"gridster-item",3),d.YNc(1,M,1,4,"nui-widget",4),d.qZA()),2&y){const D=z.$implicit,C=d.oxw(),m=d.MAs(4);d.Q6J("item",C.dashboard.positions[D.key])("nuiGridsterItemWidgetId",D.key),d.xp6(1),d.Q6J("ngIf",C.shouldWidgetRender(D.key))("ngIfElse",m)}}function L(y,z){1&y&&(d.TgZ(0,"div",6),d._UZ(1,"nui-loading",7),d.qZA()),2&y&&(d.xp6(1),d.Q6J("active",!0))}let G=(()=>{class y{get dashboard(){return this.dashboardBuffer||this._dashboard}set dashboard(D){this._dashboard=D,this.dashboardBuffer=null}get hostClass(){return!0}constructor(D){this.eventBus=D,this.editMode=!1,this.gridsterConfigChange=new d.vpe,this.dashboardChange=new d.vpe,this.gridsterItemsVisibilityMap={},this.orderWidgets=(C,m)=>{const x=this.dashboard.positions[C.key],k=this.dashboard.positions[m.key];return x.y-k.y||x.x-k.x},this.trackByFn=(C,m)=>m.key,this.updateWidgetPosition=(C,m)=>{const x=String(m.widgetId),k=(0,R.zdu)(this.dashboard,"positions."+x,C);this.dashboardChange.emit(k),this.eventBus.getStream(N.Xi).next({widgetId:x,payload:C})},this.emitWidgetResize=(C,m)=>{const x=m.widgetId;this.eventBus.getStream(N.pV).next({widgetId:x,payload:{widgetId:x,height:m.height,width:m.width}})}}ngAfterViewInit(){setTimeout(()=>this.calculateWidgetsVisibility())}onGridsterScroll(){this.calculateWidgetsVisibility()}ngOnChanges(D){var C,m,x;if(D.gridsterConfig){if(D.gridsterConfig.isFirstChange()){const k=e()(this.gridsterConfig||{},T);this.hookEvent(k,"itemChangeCallback",this.updateWidgetPosition),this.hookEvent(k,"itemResizeCallback",this.emitWidgetResize),this.gridsterConfigChange.emit(k)}null!==(C=this.gridsterConfig)&&void 0!==C&&C.api&&(null===(x=(m=this.gridsterConfig.api).optionsChanged)||void 0===x||x.call(m))}if(D.editMode){if(!this.gridsterConfig.resizable)throw new Error("Gridster's resizable prop is undefined");if(this.gridsterConfig.resizable.enabled=this.editMode,!this.gridsterConfig.draggable)throw new Error("Gridster's draggable prop is undefined");this.gridsterConfig.draggable.enabled=this.editMode,this.gridsterConfigChange.emit(Object.assign({},this.gridsterConfig)),this.eventBus.getStream(N.N9).next({payload:this.editMode})}}onWidgetChange(D){this.dashboard.widgets[D.id]&&this.updateWidget(D)}updateWidget(D){var C,m,x,k,X;let q=this.dashboard;if(!this.dashboard.positions[D.id]&&null!==(C=this.gridsterConfig)&&void 0!==C&&C.api){const se=null===(x=(m=this.gridsterConfig.api).getFirstPossiblePosition)||void 0===x?void 0:x.call(m,{x:0,y:0,rows:null===(k=this.gridsterConfig)||void 0===k?void 0:k.defaultItemRows,cols:null===(X=this.gridsterConfig)||void 0===X?void 0:X.defaultItemCols});q=(0,R.zdu)(q,`positions.${D.id}`,se)}q=(0,R.zdu)(q,`widgets.${D.id}`,D),this.dashboardBuffer=q,this.dashboardChange.emit(q)}removeWidget(D,C=!0){let m=this.dashboard;if(!m.widgets[D])return;const x=Object.assign({},m.widgets);if(delete x[D],m=(0,R.zdu)(m,"widgets",x),C){const k=Object.assign({},m.positions);delete k[D],m=(0,R.zdu)(m,"positions",k)}this.dashboardChange.emit(m)}shouldWidgetRender(D){var C;return null===(C=this.belowFoldLazyLoadingConfig)||void 0===C||!C.enabled||this.gridsterItemsVisibilityMap[D]}hookEvent(D,C,m){const x=D[C];D[C]=(k,X)=>{m(k,X),x&&x(k,X)}}calculateWidgetsVisibility(){var D;if(null===(D=this.belowFoldLazyLoadingConfig)||void 0===D||!D.enabled)return;const C=this.gridster.el.getBoundingClientRect();this.gridsterItemsVisibilityMap=this.gridsterItems.reduce((m,x)=>{var k;const{el:X}=x,q=x.widgetId;if((null===(k=this.belowFoldLazyLoadingConfig.configuration)||void 0===k||!k.reloadWidgetsOnScroll)&&m[q])return m;const se=X.getBoundingClientRect();return m[q]=(se.top>C.top&&se.top<C.bottom||se.bottom>C.top&&se.bottom<C.bottom)&&(se.left>C.left&&se.left<C.right||se.right>C.left&&se.right<C.right),m},this.gridsterItemsVisibilityMap)}}return y.\u0275fac=function(D){return new(D||y)(d.Y36(A.Bc))},y.\u0275cmp=d.Xpm({type:y,selectors:[["nui-dashboard"]],viewQuery:function(D,C){if(1&D&&(d.Gf(a.sm,5),d.Gf(a.IM,5)),2&D){let m;d.iGM(m=d.CRH())&&(C.gridster=m.first),d.iGM(m=d.CRH())&&(C.gridsterItems=m)}},hostVars:2,hostBindings:function(D,C){2&D&&d.ekj("nui-dashboard",C.hostClass)},inputs:{gridsterConfig:"gridsterConfig",dashboard:"dashboard",editMode:"editMode",belowFoldLazyLoadingConfig:"belowFoldLazyLoadingConfig"},outputs:{gridsterConfigChange:"gridsterConfigChange",dashboardChange:"dashboardChange"},features:[d._Bn([{provide:A.Bc,useClass:R.Ndp}]),d.TTD],decls:5,vars:6,consts:[[1,"nui-dashboard__gridster",3,"options","scroll"],["class","nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId",4,"ngFor","ngForOf","ngForTrackBy"],["emptyWidgetTpl",""],[1,"nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId"],["class","w-100 h-100 d-block",3,"widget","widgetChange",4,"ngIf","ngIfElse"],[1,"w-100","h-100","d-block",3,"widget","widgetChange"],[1,"w-100","h-100","d-block"],[3,"active"]],template:function(D,C){1&D&&(d.TgZ(0,"gridster",0),d.NdJ("scroll",function(){return C.onGridsterScroll()}),d.YNc(1,F,2,4,"gridster-item",1),d.ALo(2,"keyvalue"),d.qZA(),d.YNc(3,L,2,1,"ng-template",null,2,d.W1O)),2&D&&(d.Q6J("options",C.gridsterConfig),d.xp6(1),d.Q6J("ngForOf",d.xi3(2,3,C.dashboard.widgets,C.orderWidgets))("ngForTrackBy",C.trackByFn))},dependencies:[p.sg,p.O5,a.sm,a.IM,v.K,h.N,w.B,p.Nd],styles:['.nui-dashboard__gridster{background-color:var(--nui-color-bg-workspace,#f0f0f0)}.nui-dashboard__gridster .gridster-preview{border-width:4px;border-style:solid;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.nui-dashboard__gridster .gridster-preview:before{background-color:var(--nui-color-selected-contrast,#00c4d2);border-radius:50%;content:"";display:block;height:40px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:40px;z-index:1}.nui-dashboard__gridster .gridster-preview:after{color:var(--nui-color-icon-light,#fff);content:"+";display:block;font-size:19px;font-weight:700;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);z-index:2}.nui-dashboard__gridster-item{box-shadow:0 0 5px #999;box-shadow:0 0 var(--nui-space-xs, 5px) var(--nui-color-line-dark, #999999);background-color:var(--nui-color-bg-light,#fff)}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler{border-bottom-color:#00c4d2;border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);margin:0;z-index:2000}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler.handle-se{border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);right:2px;bottom:2px}.mobile .nui-dashboard__gridster-item.nui-dashboard__gridster-item{height:auto!important}\n'],encapsulation:2}),y})()},82074:(re,W,l)=>{"use strict";l.d(W,{N:()=>e});var d=l(37340),a=l(94650),O=l(72536);let e=(()=>{class R{constructor(A){this.changeDetector=A,this.active=!1}}return R.lateLoadKey="LoadingComponent",R.\u0275fac=function(A){return new(A||R)(a.Y36(a.sBO))},R.\u0275cmp=a.Xpm({type:R,selectors:[["nui-loading"]],inputs:{active:"active"},decls:1,vars:2,consts:[["compactMode","true",3,"show"]],template:function(A,T){1&A&&(a.TgZ(0,"nui-progress",0),a.NdJ("@animate.start",function(v){return v.element.style.display="block"})("@animate.done",function(v){return v.element.style.display=v.toState?"block":"none"}),a.qZA()),2&A&&a.Q6J("@animate",T.active)("show",!0)},dependencies:[O.t15],styles:["[_nghost-%COMP%]{height:5px;flex-shrink:0}"],data:{animation:[(0,d.X$)("animate",[(0,d.SB)("true",(0,d.oB)({opacity:1})),(0,d.SB)("false",(0,d.oB)({opacity:0})),(0,d.eR)("false <=> true",(0,d.jt)(500))])]}}),R})()},54910:(re,W,l)=>{"use strict";l.d(W,{i:()=>v});var d=l(34235),a=l.n(d),O=l(77579),e=l(82722),R=l(7350),N=l(92954),A=l(39973),T=l(65470),p=l(94650);let v=(()=>{class h{constructor(M,F,L){this.eventBus=M,this.dataSource=F,this.pizzagnaService=L,this.destroy$=new O.x,this.dataSource&&(this.setupRefreshListener(),this.dataSource.outputsSubject.pipe((0,e.R)(this.destroy$)).subscribe(G=>this.handleDataSourceUpdate(G)),this.dataSource.busy&&this.dataSource.busy.pipe((0,e.R)(this.destroy$)).subscribe(G=>{this.eventBus.getStream(A.QD).next({payload:{componentId:this.componentId,busy:G}})}))}setupRefreshListener(){this.eventBus.getStream(A.RG).pipe((0,e.R)(this.destroy$)).subscribe(()=>this.handleRefresh())}handleRefresh(){this.eventBus.getStream(A.R1).next({}),this.dataSource.applyFilters()}handleDataSourceUpdate(M){this.lastValue=a()(M?.result)?M:M?.result,this.updateOutput(this.lastValue),this.eventBus.getStream(R.PF).next({payload:Object.assign({componentId:this.componentId},M)})}ngOnDestroy(){this.updateOutput(void 0);const M={payload:{componentId:this.componentId}};this.eventBus.getStream(R.yX).next(M);const F={payload:{componentId:this.componentId,busy:!1}};this.eventBus.getStream(A.QD).next(F),this.destroy$.next(),this.destroy$.complete()}updateConfiguration(M){M.componentId&&(this.componentId=M.componentId),this.updateAdapterProperties(M),this.updateDataSourceProperties(M),typeof this.lastValue<"u"&&this.updateOutput(this.lastValue)}updateAdapterProperties(M){this.propertyPath=M.propertyPath}updateDataSourceProperties(M){var F,L;const G=null===(F=M?.dataSource)||void 0===F?void 0:F.properties;if(this.dataSourceConfiguration!==G){this.dataSourceConfiguration=G;const y=this.dataSource;y?.updateConfiguration&&y.updateConfiguration(null===(L=M.dataSource)||void 0===L?void 0:L.properties),this.eventBus.getStream(A.RG).next({})}typeof this.dataSourceConfiguration>"u"&&typeof G>"u"&&setTimeout(()=>this.eventBus.getStream(A.RG).next({}))}updateOutput(M){this.pizzagnaService.setProperty({pizzagnaKey:T.xW.Data,componentId:this.componentId,propertyPath:[this.propertyPath]},this.processOutput(M))}processOutput(M){return M}}return h.\u0275fac=function(M){return new(M||h)(p.LFG(T.nY),p.LFG(T.Fk,8),p.LFG(N.p))},h.\u0275prov=p.Yz7({token:h,factory:h.\u0275fac}),h})()},43925:(re,W,l)=>{"use strict";l.d(W,{I:()=>e});var d=l(39973),a=l(65470),O=l(94650);let e=(()=>{class R{constructor(A){this.eventBus=A,this.initializeSubscriptions()}updateConfiguration(A){this.properties=A}initializeSubscriptions(){this.eventBus.getStream(d.b1).subscribe(A=>{var T,p,v;(null===(T=this.properties)||void 0===T||!T.interactionType||(null===(p=this.properties)||void 0===p?void 0:p.interactionType)===(null===(v=A.payload)||void 0===v?void 0:v.interactionType))&&this.handleInteraction(A.payload)})}}return R.\u0275fac=function(A){return new(A||R)(O.LFG(a.nY))},R.\u0275prov=O.Yz7({token:R,factory:R.\u0275fac}),R})()},83645:(re,W,l)=>{"use strict";l.d(W,{O:()=>A});var d=l(65470),a=l(43925),O=l(94650),e=l(72536),R=l(32814);class N extends Window{}let A=(()=>{class T extends a.I{constructor(v,h,w,M){super(v),this.window=h,this.logger=w,this.urlInteractionService=M}handleInteraction(v){var h;if(null===(h=this.properties)||void 0===h||!h.url)return void this.logger.warn("The target url has not been defined.");const w=this.urlInteractionService.template(this.properties.url,{data:v.data});w&&(this.properties.newWindow?this.window.open(w):this.window.location.href=w)}}return T.\u0275fac=function(v){return new(v||T)(O.LFG(d.nY),O.LFG("windowObject"),O.LFG(e.mQy),O.LFG(R.v))},T.\u0275prov=O.Yz7({token:T,factory:T.\u0275fac}),T})()},43397:(re,W,l)=>{"use strict";l.d(W,{g:()=>e});var d=l(61135),a=l(27386),O=l(94650);let e=(()=>{class R{constructor(){this._refreshRateSeconds=a.Q,this.refreshRateSeconds$=new d.X(this.refreshRateSeconds)}get refreshRateSeconds(){return this._refreshRateSeconds}set refreshRateSeconds(A){this._refreshRateSeconds=A,this.refreshRateSeconds$.next(this._refreshRateSeconds)}}return R.\u0275fac=function(A){return new(A||R)},R.\u0275prov=O.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()},388:(re,W,l)=>{"use strict";l.d(W,{q:()=>T});var d=l(77579),a=l(82722),O=l(39973),e=l(65470),R=l(27386),N=l(94650),A=l(43397);let T=(()=>{class p{constructor(h,w,M){this.eventBus=h,this.ngZone=w,this.refresherSettings=M,this.enabled=!0,this.overrideDefaultSettings=!0,this.interval=R.Q,this.eventDef=O.RG,this.destroy$=new d.x,this.refresherSettings.refreshRateSeconds$.pipe((0,a.R)(this.destroy$)).subscribe(F=>{this.overrideDefaultSettings||this.initializeInterval()})}updateConfiguration(h){var w,M,F,L;this.interval=null!==(w=h.interval)&&void 0!==w?w:R.Q,this.enabled=null===(M=h.enabled)||void 0===M||M,this.overrideDefaultSettings=null===(F=h.overrideDefaultSettings)||void 0===F||F,this.eventDef=null!==(L=h.event)&&void 0!==L?L:O.RG,this.initializeInterval()}ngOnDestroy(){this.clearInterval(),this.destroy$.next(),this.destroy$.complete()}initializeInterval(){this.clearInterval(),!(typeof this.interval>"u"||this.getInterval()<=0||!1===this.enabled)&&this.ngZone.runOutsideAngular(()=>{this.intervalRef=setInterval(()=>{this.ngZone.run(()=>{this.performAction()})},1e3*this.getInterval())})}performAction(){this.eventBus.getStream(this.eventDef).next({})}getInterval(){return this.overrideDefaultSettings?this.interval:this.refresherSettings.refreshRateSeconds}clearInterval(){typeof this.intervalRef<"u"&&(clearInterval(this.intervalRef),this.intervalRef=void 0)}}return p.\u0275fac=function(h){return new(h||p)(N.LFG(e.nY),N.LFG(N.R0b),N.LFG(A.g))},p.\u0275prov=N.Yz7({token:p,factory:p.\u0275fac}),p})()},6505:(re,W,l)=>{"use strict";l.d(W,{Y:()=>q});var d=l(94650),a=l(69751),O=l(38421);const{isArray:e}=Array;var N=l(60515),A=l(25403),T=l(63269);var v=l(56451),h=l(63900),w=l(68675),M=l(18505),F=l(54004),L=l(78372),G=l(82722),y=l(72536),z=l(92954),D=l(39973),C=l(65470),m=l(54910),X=function(se,de){return function(pe,ne){de(pe,ne,se)}};let q=class extends m.i{constructor(de,pe,ne,le){super(de,pe,ne),this.virtualViewport=le}setupRefreshListener(){const de=function p(...se){const de=(0,T.jO)(se),pe=function R(se){return 1===se.length&&e(se[0])?se[0]:se}(se);return pe.length?new a.y(ne=>{let le=pe.map(()=>[]),Y=pe.map(()=>!1);ne.add(()=>{le=Y=null});for(let j=0;!ne.closed&&j<pe.length;j++)(0,O.Xf)(pe[j]).subscribe((0,A.x)(ne,ce=>{if(le[j].push(ce),le.every(oe=>oe.length)){const oe=le.map(Te=>Te.shift());ne.next(de?de(...oe):oe),le.some((Te,Ee)=>!Te.length&&Y[Ee])&&ne.complete()}},()=>{Y[j]=!0,!le[j].length&&ne.complete()}));return()=>{le=Y=null}}):N.E}(this.eventBus.getStream(D.j7),this.eventBus.getStream(D.RG)).pipe((0,h.w)(()=>this.eventBus.getStream(D.RG).pipe((0,w.O)(void 0))),(0,M.b)(()=>this.virtualViewport.reset({emitFirstPage:!1})),(0,F.U)(()=>{}));(0,v.T)(de,this.eventBus.getStream(D.df)).pipe((0,L.b)(10),(0,M.b)(()=>this.handleRefresh()),(0,G.R)(this.destroy$)).subscribe()}updateAdapterProperties(de){this.dataPath=de.dataPath,this.dataFieldsPath=de.dataFieldsPath,this.totalItemsPath=de.totalItemsPath}updateOutput(de){var pe,ne;const le=null===(pe=de?.paginator)||void 0===pe?void 0:pe.total,Y=null===(ne=de?.repeat)||void 0===ne?void 0:ne.itemsSource,j=de?.dataFields;this.pizzagnaService.setProperty({pizzagnaKey:C.xW.Data,componentId:this.componentId,propertyPath:[this.totalItemsPath]},le),this.pizzagnaService.setProperty({pizzagnaKey:C.xW.Data,componentId:this.componentId,propertyPath:[this.dataPath]},Y),this.pizzagnaService.setProperty({pizzagnaKey:C.xW.Data,componentId:this.componentId,propertyPath:[this.dataFieldsPath]},j)}};q=function(se,de,pe,ne){var j,le=arguments.length,Y=le<3?de:null===ne?ne=Object.getOwnPropertyDescriptor(de,pe):ne;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Y=Reflect.decorate(se,de,pe,ne);else for(var ce=se.length-1;ce>=0;ce--)(j=se[ce])&&(Y=(le<3?j(Y):le>3?j(de,pe,Y):j(de,pe))||Y);return le>3&&Y&&Object.defineProperty(de,pe,Y),Y}([X(0,(0,d.tBr)(C.nY)),X(1,(0,d.tBr)(C.Fk)),X(3,(0,d.FiY)()),function(se,de){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",de)}(0,[y.Ndp,Object,z.p,y.zCP])],q)},81354:(re,W,l)=>{"use strict";l.d(W,{f:()=>h});var d=l(94650),a=l(11094),O=l.n(a),e=l(72536),R=l(92954),N=l(65470),A=l(54910),v=function(w,M){return function(F,L){M(F,L,w)}};let h=class extends A.i{constructor(M,F,L){super(M,F,L),this.seriesIndex=[]}updateConfiguration(M){this.seriesIndex=O()(M.series),super.updateConfiguration(M)}processOutput(M){return M&&Object.assign(Object.assign({},M),{series:this.buildSeriesSet(M?.series)})}buildSeriesSet(M){return M?M.filter(F=>this.seriesIndex.find(L=>L.selectedSeriesId===F.id)).map(F=>{var L;return{id:F.id,data:F.data,link:F.link,secondaryLink:F.secondaryLink,legendDescriptionPrimary:null===(L=this.seriesIndex.find(G=>G.selectedSeriesId===F.id))||void 0===L?void 0:L.label,legendDescriptionSecondary:F.description}}):[]}};h=function(w,M,F,L){var z,G=arguments.length,y=G<3?M:null===L?L=Object.getOwnPropertyDescriptor(M,F):L;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=Reflect.decorate(w,M,F,L);else for(var D=w.length-1;D>=0;D--)(z=w[D])&&(y=(G<3?z(y):G>3?z(M,F,y):z(M,F))||y);return G>3&&y&&Object.defineProperty(M,F,y),y}([v(0,(0,d.tBr)(N.nY)),v(1,(0,d.tBr)(N.Fk)),function(w,M){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",M)}(0,[e.Ndp,Object,R.p])],h)},27386:(re,W,l)=>{"use strict";l.d(W,{Q:()=>d});const d=300},52409:(re,W,l)=>{"use strict";l.d(W,{q:()=>a});var d=l(94650);let a=(()=>{class O{}return O.lateLoadKey="TemplateLoadErrorComponent",O.\u0275fac=function(R){return new(R||O)},O.\u0275cmp=d.Xpm({type:O,selectors:[["ng-component"]],decls:3,vars:0,template:function(R,N){1&R&&(d.TgZ(0,"code")(1,"pre"),d._uU(2,"Template load error!"),d.qZA()())},encapsulation:2}),O})()},82442:(re,W,l)=>{"use strict";l.d(W,{B:()=>N});var d=l(94650),a=l(39973),O=l(84356),e=l(40494),R=l(56927);let N=(()=>{class A{constructor(p,v){this.widgetConfigurationService=p,this.widgetTypesService=v,this.widgetChange=new d.vpe,this.rootNode=a.XM}ngOnChanges(p){var v,h;if(p.widget){const w=this.widget.type;if((p.widget.previousValue&&p.widget.previousValue.type)!==w){const F=this.widgetTypesService.getWidgetType(w,this.widget.version);this.rootNode=(null===(h=null===(v=F?.paths)||void 0===v?void 0:v.widget)||void 0===h?void 0:h.root)||a.XM}this.widgetConfigurationService.updateWidget(this.widget)}}onPizzagnaChange(p){this.widgetChange.emit(Object.assign(Object.assign({},this.widget),{pizzagna:p}))}}return A.\u0275fac=function(p){return new(p||A)(d.Y36(O.I),d.Y36(e.x))},A.\u0275cmp=d.Xpm({type:A,selectors:[["nui-widget"]],hostAttrs:[1,"nui-widget"],inputs:{widget:"widget"},outputs:{widgetChange:"widgetChange"},features:[d._Bn([O.I]),d.TTD],decls:1,vars:2,consts:[[3,"rootNode","pizzagna","pizzagnaChange"]],template:function(p,v){1&p&&(d.TgZ(0,"nui-pizzagna",0),d.NdJ("pizzagnaChange",function(w){return v.onPizzagnaChange(w)}),d.qZA()),2&p&&d.Q6J("rootNode",v.rootNode)("pizzagna",v.widget.pizzagna)},dependencies:[R.R]}),A})()},61817:(re,W,l)=>{"use strict";l.d(W,{n:()=>M});var d=l(94650),a=l(77579),O=l(72536),e=l(56927),R=l(40494),N=l(28726),A=l(36895),T=l(54195),p=l(84080),v=l(30510);const h=["previewPizzagnaComponent"];function w(F,L){if(1&F){const G=d.EpF();d.TgZ(0,"nui-pizzagna",8,9),d.NdJ("pizzagnaChange",function(z){d.CHM(G);const D=d.oxw();return d.KtG(D.onPizzagnaChange(z))}),d.ALo(2,"nuiPizzagnaRoot"),d.qZA()}if(2&F){const G=d.oxw();d.Q6J("rootNode",d.xi3(2,2,G.previewWidget,"widget"))("pizzagna",null==G.previewWidget?null:G.previewWidget.pizzagna)}}let M=(()=>{class F{constructor(G,y){this.widgetTypesService=G,this.changeDetector=y,this.result=new d.vpe,this.formPortalAttached=new d.vpe,this.submitError=new a.x,this.destroy$=new a.x}ngOnInit(){this.previewWidget||(this.previewWidget={id:null,type:"previewPlaceholder",pizzagna:this.widgetTypesService.getWidgetType("previewPlaceholder").widget})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleSubmitError(){this.submitError.next()}onFormPortalAttached(G){this.formPortalAttached.emit(G)}updateWidget(G){this.previewWidget=G,this.changeDetector.markForCheck()}formCancel(){this.result.next(null)}formSubmit(){this.result.next(this.previewWidget)}onPizzagnaChange(G){this.previewWidget&&(this.previewWidget.pizzagna=G)}}return F.lateLoadKey="ConfiguratorComponent",F.\u0275fac=function(G){return new(G||F)(d.Y36(R.x),d.Y36(d.sBO))},F.\u0275cmp=d.Xpm({type:F,selectors:[["nui-configurator"]],viewQuery:function(G,y){if(1&G&&d.Gf(h,7),2&G){let z;d.iGM(z=d.CRH())&&(y.previewPizzagnaComponent=z.first)}},hostAttrs:[1,"nui-configurator"],inputs:{formPortal:"formPortal",previewWidget:"previewWidget"},outputs:{result:"result",formPortalAttached:"formPortalAttached"},features:[d._Bn([N.m,{provide:O.nse,useValue:".nui-dashwiz-step--active .configurator-scrollable"}])],decls:9,vars:4,consts:[[1,"nui-configurator__backdrop"],[1,"nui-configurator__content"],["orientation","right","paneSize","30vw","paneMinSize","20vw","paneMaxSize","80vw","isResizable","true",1,"h-100",3,"headerPadding","sidePaneBodyPadding"],[1,"nui-configurator__preview","d-flex","align-items-center","justify-content-center"],[1,"nui-configurator__preview-area"],["class","flex-grow-1 w-100",3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],["nuiPanelEmbeddedBody","",1,"nui-configurator__body"],[3,"cdkPortalOutlet","attached"],[1,"flex-grow-1","w-100",3,"rootNode","pizzagna","pizzagnaChange"],["previewPizzagnaComponent",""]],template:function(G,y){1&G&&(d._UZ(0,"div",0),d.TgZ(1,"div",1)(2,"nui-panel",2)(3,"div",3)(4,"div",4),d._UZ(5,"nui-preview-overlay"),d.YNc(6,w,3,5,"nui-pizzagna",5),d.qZA()(),d.TgZ(7,"div",6),d.ynx(8,7),d.NdJ("attached",function(D){return y.onFormPortalAttached(D)}),d.BQk(),d.qZA()()()),2&G&&(d.xp6(2),d.Q6J("headerPadding",!1)("sidePaneBodyPadding",!1),d.xp6(4),d.Q6J("ngIf",null==y.previewWidget?null:y.previewWidget.pizzagna),d.xp6(2),d.Q6J("cdkPortalOutlet",y.formPortal))},dependencies:[A.O5,T.b,p.Pl,e.R,O.yXm,v.l],styles:[".nui-configurator__backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1040;background-color:var(--nui-color-overlay-modal,rgba(17, 17, 17, .5));opacity:.5;filter:alpha(opacity=50)}.nui-configurator__content[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1040}.nui-configurator__heading[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #d9d9d9}.nui-configurator__body[_ngcontent-%COMP%]{overflow-anchor:none;height:100vh}.nui-configurator__preview[_ngcontent-%COMP%]{height:100vh}.nui-configurator__preview-area[_ngcontent-%COMP%]{display:flex;width:80%;position:relative;background-color:var(--nui-color-bg-content_popover,#fff);border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);margin:auto;min-height:40vh;max-height:80vh;overflow:hidden}"]}),F})()},96899:(re,W,l)=>{"use strict";l.d(W,{C:()=>A});var d=l(94650),a=l(72536),O=l(36895);function e(T,p){if(1&T&&d._UZ(0,"nui-icon",4),2&T){const v=d.oxw(2);d.Q6J("icon",null==v.data?null:v.data.value)}}function R(T,p){if(1&T&&(d.TgZ(0,"div",2),d.YNc(1,e,1,1,"nui-icon",3),d.qZA()),2&T){const v=d.oxw(),h=d.MAs(2);d.xp6(1),d.Q6J("ngIf",v.iconFound)("ngIfElse",h)}}function N(T,p){1&T&&d._UZ(0,"nui-icon",5)}let A=(()=>{class T{constructor(v,h){this.changeDetector=v,this.iconService=h,this.isValid=!1,this.iconFound=!0}ngOnChanges(){var v,h;this.isValid=!(null===(v=this.data)||void 0===v||!v.value),this.iconFound=!!this.iconService.getIconData(null===(h=this.data)||void 0===h?void 0:h.value)}}return T.lateLoadKey="IconFormatterComponent",T.\u0275fac=function(v){return new(v||T)(d.Y36(d.sBO),d.Y36(a.C6t))},T.\u0275cmp=d.Xpm({type:T,selectors:[["ng-component"]],inputs:{data:"data"},features:[d.TTD],decls:3,vars:1,consts:function(){let p;return p=$localize`:␟8cf3dbb8fe1e2fa079d4c2167cd4c81cdcfe89c2␟7731831112083433420:Unknown icon`,[["class","d-flex align-items-center justify-content-center",4,"ngIf"],["iconNotFound",""],[1,"d-flex","align-items-center","justify-content-center"],[3,"icon",4,"ngIf","ngIfElse"],[3,"icon"],["title",p,"iconColor","disabled-gray","icon","help"]]},template:function(v,h){1&v&&(d.YNc(0,R,2,2,"div",0),d.YNc(1,N,1,0,"ng-template",null,1,d.W1O)),2&v&&d.Q6J("ngIf",h.isValid)},dependencies:[O.O5,a.oJW],encapsulation:2}),T})()},62878:(re,W,l)=>{"use strict";l.d(W,{s:()=>e});var d=l(94650),a=l(36895);function O(R,N){if(1&R&&(d.TgZ(0,"a",2),d._uU(1),d.qZA()),2&R){const A=d.oxw();d.Q6J("href",null==A.data?null:A.data.link,d.LSH)("target",A.targetSelf?"_self":"_blank"),d.xp6(1),d.hij(" ",null==A.data?null:A.data.value," ")}}let e=(()=>{class R{constructor(A){this.changeDetector=A,this.isValid=!1}ngOnChanges(A){this.isValid=Boolean(this.data&&this.data.value&&this.data.link)}}return R.lateLoadKey="LinkFormatterComponent",R.\u0275fac=function(A){return new(A||R)(d.Y36(d.sBO))},R.\u0275cmp=d.Xpm({type:R,selectors:[["ng-component"]],inputs:{data:"data",targetSelf:"targetSelf"},features:[d.TTD],decls:2,vars:1,consts:[[1,"link-formatter-container"],["class","nui-text-ellipsis",3,"href","target",4,"ngIf"],[1,"nui-text-ellipsis",3,"href","target"]],template:function(A,T){1&A&&(d.TgZ(0,"div",0),d.YNc(1,O,2,3,"a",1),d.qZA()),2&A&&(d.xp6(1),d.Q6J("ngIf",T.isValid))},dependencies:[a.O5],styles:[".link-formatter-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}"]}),R})()},24803:(re,W,l)=>{"use strict";l.d(W,{a:()=>a});var d=l(94650);let a=(()=>{class O{constructor(R){this.changeDetector=R}}return O.lateLoadKey="RawFormatterComponent",O.\u0275fac=function(R){return new(R||O)(d.Y36(d.sBO))},O.\u0275cmp=d.Xpm({type:O,selectors:[["ng-component"]],hostVars:2,hostBindings:function(R,N){2&R&&d.Tol(N.elementClass)},inputs:{data:"data",elementClass:"elementClass"},decls:2,vars:1,template:function(R,N){1&R&&(d.ynx(0),d._uU(1),d.BQk()),2&R&&(d.xp6(1),d.Oqu(null==N.data?null:N.data.value))},encapsulation:2}),O})()},66213:(re,W,l)=>{"use strict";l.d(W,{Q:()=>e});var d=l(94650),a=l(35720),O=l(72536);let e=(()=>{class R{constructor(A,T){this.el=A,this.heading=T,this.disableCloseButton=!1,this.close=new d.vpe}ngOnChanges(){this.heading.height$.next(+getComputedStyle(this.el.nativeElement).height.slice(0,-2))}}return R.\u0275fac=function(A){return new(A||R)(d.Y36(d.SBq),d.Y36(a.p))},R.\u0275cmp=d.Xpm({type:R,selectors:[["nui-configurator-heading"]],inputs:{configuratorTitle:"configuratorTitle",disableCloseButton:"disableCloseButton"},outputs:{close:"close"},features:[d.TTD],decls:4,vars:3,consts:[[1,"configurator-heading","d-flex","justify-content-between","align-items-center","p-4"],[1,"nui-text-panel","nui-text-ellipsis",3,"title"],["nui-button","","type","button","displayStyle","action","icon","close",3,"disabled","click"]],template:function(A,T){1&A&&(d.TgZ(0,"div",0)(1,"span",1),d._uU(2),d.qZA(),d.TgZ(3,"button",2),d.NdJ("click",function(){return T.close.emit()}),d.qZA()()),2&A&&(d.xp6(1),d.Q6J("title",T.configuratorTitle),d.xp6(1),d.hij(" ",T.configuratorTitle," "),d.xp6(1),d.Q6J("disabled",T.disableCloseButton))},dependencies:[O.r0F],styles:["[_nghost-%COMP%]{z-index:1080;background-color:var(--nui-color-bg-content,#fff)}[_nghost-%COMP%]   .configurator-heading[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),R})()},83385:(re,W,l)=>{"use strict";l.d(W,{e:()=>O});var d=l(95698),a=l(94650);let O=(()=>{class e{constructor(){this.accordions=[]}registerAccordion(N){this.accordions.push({instance:N,openSubscription:N.openSubject.subscribe(()=>{this.closeAllAccordions(),N.open=!0}),destroySubscription:N.destroySubject.pipe((0,d.q)(1)).subscribe(()=>{this.removeAccordion(N)})})}closeAllAccordions(){this.accordions.forEach(N=>{N.instance.closeAccordion()})}removeAccordion(N){const A=this.accordions.findIndex(T=>T.instance===N);this.accordions[A].openSubscription.unsubscribe(),this.accordions.splice(A,1)}}return e.\u0275fac=function(N){return new(N||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})()},4433:(re,W,l)=>{"use strict";l.d(W,{J:()=>v});var d=l(77579),a=l(65470),O=l(94650),e=l(83385),R=l(36895),N=l(72536);function A(h,w){if(1&h&&O._UZ(0,"nui-icon",4),2&h){const M=O.oxw();O.Q6J("icon",M.open?"triangle-down":"triangle-left")}}const T=[[["","accordionHeader",""]],"*"],p=["[accordionHeader]","*"];let v=(()=>{class h{constructor(M,F){this.accordionCoordinator=M,this.cd=F,this.showOpenStateIcon=!0,this.state=a.Nc.DEFAULT,this.open=!1,this.openSubject=new d.x,this.destroySubject=new d.x}ngOnInit(){this.accordionCoordinator.registerAccordion(this)}openChange(M){M?this.openSubject.next():this.closeAccordion()}closeAccordion(){this.cd.markForCheck(),this.open=!1}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete()}}return h.\u0275fac=function(M){return new(M||h)(O.Y36(e.e),O.Y36(O.sBO))},h.\u0275cmp=O.Xpm({type:h,selectors:[["nui-widget-editor-accordion"]],inputs:{showOpenStateIcon:"showOpenStateIcon",state:"state"},ngContentSelectors:p,decls:6,vars:6,consts:[[1,"nui-widget-editor-accordion"],[3,"open","openChange"],["nuiExpanderHeader","",1,"d-flex","align-items-start"],["class","nui-widget-editor-accordion__edit-icon",3,"icon",4,"ngIf"],[1,"nui-widget-editor-accordion__edit-icon",3,"icon"]],template:function(M,F){1&M&&(O.F$t(T),O.TgZ(0,"div",0)(1,"nui-expander",1),O.NdJ("openChange",function(G){return F.openChange(G)}),O.TgZ(2,"div",2),O.Hsn(3),O.YNc(4,A,1,1,"nui-icon",3),O.qZA(),O.Hsn(5,1),O.qZA()()),2&M&&(O.xp6(1),O.Q6J("open",F.open),O.xp6(1),O.ekj("error-state","critical"===F.state)("warning-state","warning"===F.state),O.xp6(2),O.Q6J("ngIf",F.showOpenStateIcon))},dependencies:[R.O5,N.oJW,N.Fxv],styles:[".nui-widget-editor-accordion nui-form-field:last-child .nui-form-field{margin-bottom:0}.nui-widget-editor-accordion__edit-icon{padding:10px;margin-left:auto;margin-right:5px}.nui-widget-editor-accordion .nui-expander--expanded{padding-bottom:0}.nui-widget-editor-accordion .nui-expander__header-icon{display:none}.nui-widget-editor-accordion .nui-expander__header .error-state{background-color:var(--nui-color-semantic-critical-bg,#fceae6)}.nui-widget-editor-accordion .nui-expander__header .warning-state{background-color:var(--nui-color-semantic-warning-bg,#fff9e6)}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader]{border-top:1px solid;border-top-color:var(--nui-color-line-default,#d9d9d9);min-height:50px}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]{overflow:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div{overflow-x:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div .nui-text-secondary{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget-editor-accordion .nui-expander__body{margin:0;padding:0;border-left:none}\n"],encapsulation:2,changeDetection:0}),h})()},19797:(re,W,l)=>{"use strict";l.d(W,{b:()=>C});var d=l(8817),a=l.n(d),O=l(61135),e=l(77579),R=l(82722),N=l(56927),A=l(39973),T=l(65470),p=l(61817),v=l(94650),h=l(90433),w=l(28726),M=l(36895),F=l(77341),L=l(23309),G=l(66213);const y=["formPizzagnaComponent"];function z(m,x){if(1&m){const k=v.EpF();v.TgZ(0,"nui-pizzagna",6,7),v.NdJ("pizzagnaChange",function(q){v.CHM(k);const se=v.oxw(2);return v.KtG(se.formPizzagna=q)}),v.qZA()}if(2&m){const k=v.oxw(2);v.Q6J("rootNode",k.formRoot)("pizzagna",k.formPizzagna)}}function D(m,x){if(1&m&&(v.TgZ(0,"div",4),v.YNc(1,z,2,2,"nui-pizzagna",5),v.qZA()),2&m){const k=v.oxw();v.Q6J("formGroup",k.form),v.xp6(1),v.Q6J("ngIf",k.formPizzagna)}}let C=(()=>{class m{set formPizzagnaComponent(k){var X;null===(X=k?.eventBus)||void 0===X||X.getStream(A.xZ).pipe((0,R.R)(this.destroy$)).subscribe(q=>{var se,de,pe;const ne=q.payload;ne&&ne.id&&(null===(pe=null===(de=null===(se=this.configurator)||void 0===se?void 0:se.previewPizzagnaComponent)||void 0===de?void 0:de.eventBus)||void 0===pe||pe.getStream(ne.id).next(ne.payload))}),this._formPizzagnaComponent=k}constructor(k,X,q,se){this.changeDetector=k,this.formBuilder=X,this.previewService=q,this.configurator=se,this.navigationControl=new O.X({busyState:{busy:!1},allowStepChange:!0}),this.busy=!1,this.destroy$=new e.x,this.form=this.formBuilder.group({})}ngOnInit(){var k;this.previewService.preview=null===(k=this.configurator.previewWidget)||void 0===k?void 0:k.pizzagna[T.xW.Configuration],this.previewService.previewChanged.pipe((0,R.R)(this.destroy$)).subscribe(X=>{this.onPreviewPizzagnaUpdate(X),this.changeDetector.detectChanges()}),this.configurator.submitError.pipe((0,R.R)(this.destroy$)).subscribe(()=>{this.toggleBusy()}),this.changeDetector.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewPizzagnaUpdate(k){var X;const q=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(X=this.configurator.previewWidget)||void 0===X?void 0:X.pizzagna),{[T.xW.Configuration]:k})});this.configurator.updateWidget(q);const se=a()(k,m.TITLE_PATH,"");this.configuratorTitle=$localize`Editing ${se}`}onFinish(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0});this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}}return m.lateLoadKey="WidgetEditorComponent",m.TITLE_PATH="header.properties.title",m.\u0275fac=function(k){return new(k||m)(v.Y36(v.sBO),v.Y36(h.qu),v.Y36(w.m),v.Y36(p.n))},m.\u0275cmp=v.Xpm({type:m,selectors:[["nui-widget-editor"]],viewQuery:function(k,X){if(1&k&&v.Gf(y,5),2&k){let q;v.iGM(q=v.CRH())&&(X.formPizzagnaComponent=q.first)}},hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",formRoot:"formRoot"},decls:5,vars:5,consts:function(){let x;return x=$localize`:␟afa960379d26eb20fd22e6e10537c1c5ec74c5d1␟4319441956121197474:Save Changes`,[[3,"configuratorTitle","disableCloseButton","close"],["finishText",x,3,"hideHeader","navigationControl","finish","cancel"],[3,"stepTemplate"],["step1",""],[3,"formGroup"],[3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],[3,"rootNode","pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(k,X){if(1&k&&(v.TgZ(0,"nui-configurator-heading",0),v.NdJ("close",function(){return X.onCancel()}),v.qZA(),v.TgZ(1,"nui-dashwiz",1),v.NdJ("finish",function(){return X.onFinish()})("cancel",function(){return X.onCancel()}),v._UZ(2,"nui-dashwiz-step",2),v.qZA(),v.YNc(3,D,2,2,"ng-template",null,3,v.W1O)),2&k){const q=v.MAs(4);v.Q6J("configuratorTitle",X.configuratorTitle)("disableCloseButton",X.busy),v.xp6(1),v.Q6J("hideHeader",!0)("navigationControl",X.navigationControl),v.xp6(1),v.Q6J("stepTemplate",q)}},dependencies:[M.O5,h.JL,h.sg,N.R,F.i,L.u,G.Q],encapsulation:2,changeDetection:0}),m})()},23309:(re,W,l)=>{"use strict";l.d(W,{u:()=>A});var d=l(94650),a=l(72536),O=l(77744),e=l(36895);function R(T,p){1&T&&d.GkF(0)}const N=function(T){return{"nui-dashwiz-step--active":T}};let A=(()=>{class T{constructor(){this.hidden=!1,this.spinnerSize=a.Eye.Large,this.enter=new d.vpe,this.valid=new d.vpe,this.exit=new d.vpe,this.next=new d.vpe,this.busyConfig={busy:!1},this.visited=!1,this.active=!1,this.complete=!1,this.icon="step",this.iconColor="",this.enterStep=v=>{this.enter.emit(v)},this.exitStep=v=>{this.exit.emit(v)},this.nextStep=v=>{this.next.emit(v)},this.applyEnteringStep=()=>{this.active=!0,this.icon="step-active",this.iconColor="black"},this.applyExitingStep=()=>{this.active=!1,this.visited=!0,this.icon="step-complete",this.iconColor=""}}ngOnInit(){this.nextText=this.nextText||$localize`Next`}ngOnChanges(v){v.stepControl&&this.valid.emit(this.stepControl)}}return T.\u0275fac=function(v){return new(v||T)},T.\u0275cmp=d.Xpm({type:T,selectors:[["nui-dashwiz-step"]],inputs:{stepTemplate:"stepTemplate",stepControl:"stepControl",title:"title",nextText:"nextText",hidden:"hidden",disabled:"disabled",spinnerSize:"spinnerSize"},outputs:{enter:"enter",valid:"valid",exit:"exit",next:"next"},features:[d.TTD],decls:4,vars:9,consts:[["nui-busy","",1,"nui-dashwiz-step","animated","h-100",3,"ngClass","busy"],["cdkScrollable","",1,"h-100","overflow-auto","nui-scroll-shadows","configurator-scrollable"],[4,"ngTemplateOutlet"],[3,"percent","allowCancel","message","size"]],template:function(v,h){1&v&&(d.TgZ(0,"div",0)(1,"div",1),d.YNc(2,R,1,0,"ng-container",2),d.qZA(),d._UZ(3,"nui-spinner",3),d.qZA()),2&v&&(d.Q6J("ngClass",d.VKq(7,N,h.active))("busy",h.busyConfig.busy),d.xp6(2),d.Q6J("ngTemplateOutlet",h.stepTemplate),d.xp6(1),d.Q6J("percent",h.busyConfig.percent)("allowCancel",h.busyConfig.allowCancel)("message",h.busyConfig.message)("size",h.spinnerSize))},dependencies:[O.PQ,e.mk,e.tP,a.ERI,a.ORR],styles:[".nui-dashwiz-step[_ngcontent-%COMP%]{display:none}.nui-dashwiz-step--active[_ngcontent-%COMP%]{display:block}"]}),T})()},69823:(re,W,l)=>{"use strict";l.d(W,{P:()=>A});var d=l(94650),a=l(36895),O=l(72536);function e(T,p){if(1&T){const v=d.EpF();d.TgZ(0,"button",6),d.NdJ("click",function(){d.CHM(v);const w=d.oxw();return d.KtG(w.onBack())}),d.TgZ(1,"span"),d.SDv(2,7),d.qZA()()}if(2&T){const v=d.oxw();d.Q6J("disabled",v.busy)}}function R(T,p){if(1&T){const v=d.EpF();d.TgZ(0,"button",8),d.NdJ("click",function(){d.CHM(v);const w=d.oxw();return d.KtG(w.onNext())}),d.TgZ(1,"span"),d._uU(2),d.qZA()()}if(2&T){const v=d.oxw();d.Q6J("displayStyle",v.canFinish?"default":"primary")("disabled",v.busy),d.xp6(2),d.Oqu(v.nextText)}}function N(T,p){if(1&T){const v=d.EpF();d.TgZ(0,"button",9),d.NdJ("click",function(){d.CHM(v);const w=d.oxw();return d.KtG(w.onFinish())}),d.TgZ(1,"span"),d._uU(2),d.qZA()()}if(2&T){const v=d.oxw();d.Q6J("isBusy",v.busy)("disabled",v.busy),d.xp6(2),d.Oqu(v.finishText)}}let A=(()=>{class T{constructor(v){this.changeDetector=v,this.busy=!1,this.canFinish=!1,this.canProceed=!1,this.isFirstStepActive=!1,this.isLastStepActive=!1,this.cancel=new d.vpe,this.next=new d.vpe,this.back=new d.vpe,this.finish=new d.vpe}onCancel(){this.cancel.emit()}onNext(){this.next.emit()}onBack(){this.back.emit()}onFinish(){this.finish.emit()}}return T.lateLoadKey="DashwizButtonsComponent",T.\u0275fac=function(v){return new(v||T)(d.Y36(d.sBO))},T.\u0275cmp=d.Xpm({type:T,selectors:[["nui-dashwiz-buttons"]],inputs:{busy:"busy",canFinish:"canFinish",canProceed:"canProceed",isFirstStepActive:"isFirstStepActive",isLastStepActive:"isLastStepActive",nextText:"nextText",finishText:"finishText"},outputs:{cancel:"cancel",next:"next",back:"back",finish:"finish"},decls:7,vars:4,consts:function(){let p,v;return p=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,v=$localize`:␟cda31dbd724cf5f4fa7a4274d9120651490c8a8c␟8890553633144307762:Back`,[[1,"d-flex","justify-content-end","p-4"],["nui-button","","type","button",1,"nui-dashwiz-buttons__cancel-button",3,"disabled","click"],p,["class","ml-3 nui-dashwiz-buttons__back-button","nui-button","","icon","caret-left","type","button",3,"disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__next-button","nui-button","","type","button",3,"displayStyle","disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__finish-button","nui-button","","type","button","displayStyle","primary",3,"isBusy","disabled","click",4,"ngIf"],["nui-button","","icon","caret-left","type","button",1,"ml-3","nui-dashwiz-buttons__back-button",3,"disabled","click"],v,["nui-button","","type","button",1,"ml-3","nui-dashwiz-buttons__next-button",3,"displayStyle","disabled","click"],["nui-button","","type","button","displayStyle","primary",1,"ml-3","nui-dashwiz-buttons__finish-button",3,"isBusy","disabled","click"]]},template:function(v,h){1&v&&(d.TgZ(0,"div",0)(1,"button",1),d.NdJ("click",function(){return h.onCancel()}),d.TgZ(2,"span"),d.SDv(3,2),d.qZA()(),d.YNc(4,e,3,1,"button",3),d.YNc(5,R,3,3,"button",4),d.YNc(6,N,3,3,"button",5),d.qZA()),2&v&&(d.xp6(1),d.Q6J("disabled",h.busy),d.xp6(3),d.Q6J("ngIf",!h.isFirstStepActive),d.xp6(1),d.Q6J("ngIf",!h.isLastStepActive&&h.canProceed),d.xp6(1),d.Q6J("ngIf",h.canFinish||h.isLastStepActive))},dependencies:[a.O5,O.r0F],encapsulation:2}),T})()},77341:(re,W,l)=>{"use strict";l.d(W,{i:()=>pe});var d=l(94650),a=l(62516),O=l.n(a),e=l(36397),R=l.n(e),N=l(34235),A=l.n(N),T=l(61135),p=l(23309),v=l(69823),h=l(72536),w=l(34317),M=l(36895),F=l(84080),L=l(46747);const G=["container"],y=["stepTitle"],z=function(ne){return{"min-width.px":ne}};function D(ne,le){if(1&ne&&(d.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"span",18)(5,"span",19,20),d._uU(7),d.qZA(),d.TgZ(8,"div",21)(9,"div",22),d._UZ(10,"div",23),d.qZA(),d._UZ(11,"nui-icon",24),d.TgZ(12,"div",25),d._UZ(13,"div",23),d.qZA()()()()()()()),2&ne){const Y=d.oxw().$implicit,j=d.oxw(3);d.xp6(7),d.hij(" ",Y.title,""),d.xp6(3),d.Q6J("ngStyle",d.VKq(5,z,j.stepLineWidth)),d.xp6(1),d.Q6J("icon",Y.icon)("iconColor",Y.iconColor),d.xp6(2),d.Q6J("ngStyle",d.VKq(7,z,j.stepLineWidth))}}const C=function(ne,le,Y,j,ce,oe){return{"nui-dashwiz__header-step--first":ne,"nui-dashwiz__header-step--last":le,"nui-dashwiz__header-step--visited":Y,"nui-dashwiz__header-step--disabled":j,"nui-dashwiz__header-step--active":ce,"nui-dashwiz__header-step--complete":oe}};function m(ne,le){if(1&ne){const Y=d.EpF();d.TgZ(0,"li",12),d.NdJ("click",function(){const oe=d.CHM(Y).$implicit,Te=d.oxw(3);return d.KtG(Te.selectStep(oe))}),d.YNc(1,D,14,9,"div",13),d.qZA()}if(2&ne){const Y=le.$implicit,j=le.first,ce=le.last,oe=d.oxw(3);d.Q6J("ngClass",d.HTZ(2,C,j,ce,Y.visited,Y.disabled||!Y.visited||oe.currentStep.busyConfig.busy,Y.active,Y.complete)),d.xp6(1),d.Q6J("ngIf",!Y.hidden)}}function x(ne,le){if(1&ne&&(d.TgZ(0,"ul",10),d.YNc(1,m,2,9,"li",11),d.qZA()),2&ne){const Y=d.oxw(2);d.xp6(1),d.Q6J("ngForOf",Y.steps)}}function k(ne,le){if(1&ne&&(d.TgZ(0,"div",8),d.YNc(1,x,2,1,"ul",9),d.qZA()),2&ne){const Y=d.oxw();d.ekj("nui-dashwiz__header--lines-stretched",Y.stretchStepLines),d.xp6(1),d.Q6J("ngIf",Y.steps)}}function X(ne,le){}function q(ne,le){}const se=function(){return["cancel","next","back","finish"]},de=["*"];let pe=(()=>{class ne{constructor(Y,j,ce,oe){this.changeDetector=Y,this.componentFactoryResolver=j,this.logger=ce,this.dashwizService=oe,this.hideHeader=!1,this.canProceed=!1,this.canFinish=!1,this.finishText=ne.placeholderFinishText,this.stretchStepLines=!1,this.stepNavigated=new d.vpe,this.cancel=new d.vpe,this.finish=new d.vpe,this.next=new d.vpe,this.back=new d.vpe,this.navigationControl=new T.X({busyState:{busy:!1},allowStepChange:!0}),this.stepLineWidth=65,this.previousStepIndex=0,this.onBack=()=>{if(!A()(this.stepIndex)){let Te=this.arraySteps[this.stepIndex-1];(Te.hidden||Te.disabled)&&(Te=O()(this.arraySteps.slice(0).reverse(),Ee=>!Ee.hidden,R()(this.arraySteps.slice(0).reverse(),this.arraySteps[this.stepIndex])+1)),this.selectStep(Te),this.back.emit()}},this.onNext=()=>{let Te=this.arraySteps[this.stepIndex+1];this.handleStepControl(this.currentStep),this.currentStep.nextStep({currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.currentStep,previousStepIndex:this.stepIndex}),(Te.hidden||Te.disabled&&!A()(Te.stepControl))&&(Te=O()(this.arraySteps,Ee=>!Ee.hidden,this.stepIndex+1)),(A()(this.currentStep.stepControl)||this.currentStep.stepControl)&&(this.currentStep.complete=!0),Te.disabled&&!Te.visited&&(this.currentStep.complete=!1),this.selectStep(Te),this.next.emit()},this.onFinish=()=>{this.finish.emit()},this.onCancel=()=>{this.cancel.emit(0!==this.steps.toArray().filter(Te=>Te.complete).length)},this.buttonPortalActionMap={cancel:this.onCancel,next:this.onNext,back:this.onBack,finish:this.onFinish},oe&&(oe.component=this)}ngOnInit(){this.buttonComponentTypes=this.buttonComponentTypes||[v.P.lateLoadKey],this.finishText===ne.placeholderFinishText&&this.logger.warn(`DashwizComponent input "finishText" is using placeholder text\n"${ne.placeholderFinishText}". A value should be specified.`)}ngDoCheck(){this.currentStep&&(this.buttonProperties={busy:this.currentStep.busyConfig.busy,canProceed:this.canProceed,canFinish:this.canFinish,isLastStepActive:this.steps.last.active,isFirstStepActive:this.steps.first.active,nextText:this.currentStep.nextText,finishText:this.finishText})}ngAfterContentInit(){const Y=this.steps.filter(j=>j.active);this.arraySteps=this.steps.toArray(),0===Y.length&&(this.currentStep=this.steps.first,this.selectStep(this.currentStep),this.changeDetector.detectChanges()),this.steps.toArray().forEach(j=>{j.valid.subscribe(ce=>{A()(ce)||this.handleStepControl(j)})}),this.navigationControl.subscribe(j=>{this.currentStep.busyConfig=j.busyState,j.allowStepChange&&!A()(this.futureStep)&&this.currentStep!==this.futureStep&&(this.enterAnotherStep(),this.futureStep=void 0)})}ngAfterViewChecked(){this.stretchStepLines&&(this.stepLineWidth=Math.round(this.getLargestLabelWidth()/2),this.changeDetector.detectChanges())}ngOnDestroy(){this.steps.toArray().forEach(Y=>Y.valid.unsubscribe()),this.navigationControl.unsubscribe(),this.dashwizService.component=void 0}addStepDynamic(Y,j){const ce=this.componentFactoryResolver.resolveComponentFactory(p.u),oe=this.dynamicStep.createComponent(ce);return oe.instance.stepTemplate=Y.stepTemplate,this.arraySteps.splice(j,0,oe.instance),this.steps.reset(this.arraySteps),oe.instance}disableStep(Y){const j=this.arraySteps.indexOf(Y);this.arraySteps[j].disabled=!0,this.changeDetector.detectChanges()}enableStep(Y){const j=this.arraySteps.indexOf(Y);this.arraySteps[j].disabled=!1,this.changeDetector.detectChanges()}hideStep(Y){const j=this.arraySteps.indexOf(Y);this.arraySteps[j].hidden=!0}showStep(Y){const j=this.arraySteps.indexOf(Y);this.arraySteps[j].hidden=!1}goToStep(Y){this.selectStep(this.arraySteps[Y])}selectStep(Y){Y.disabled||(this.futureStep=Y,this.currentStep.exitStep({currentStepIndex:this.arraySteps.indexOf(this.futureStep),currentStep:this.futureStep,previousStep:this.arraySteps[this.stepIndex],previousStepIndex:this.stepIndex}),this.navigationControl.value.allowStepChange&&this.enterAnotherStep())}enterAnotherStep(){var Y;this.currentStep.applyExitingStep(),null===(Y=this.futureStep)||void 0===Y||Y.enterStep(),this.futureStep&&(this.currentStep=this.futureStep),this.currentStep.applyEnteringStep(),this.stepIndex=this.arraySteps.indexOf(this.currentStep),this.stepNavigatedEvent={currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.arraySteps[this.previousStepIndex],previousStepIndex:this.previousStepIndex},this.stepNavigated.emit(this.stepNavigatedEvent),this.previousStepIndex=this.stepIndex}onButtonPortalOutput(Y){var j,ce;null===(ce=(j=this.buttonPortalActionMap)[Y.id])||void 0===ce||ce.call(j)}disableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(Y=>{Y.disabled=!0})}enableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(Y=>{Y.disabled=!1})}handleStepControl(Y){A()(Y.stepControl)||(Y.stepControl?this.enableFollowingSteps():this.disableFollowingSteps())}getLargestLabelWidth(){const Y=this.stepTitles.map(j=>j.nativeElement.offsetWidth);return Math.round(Math.max(...Y))}}return ne.placeholderFinishText="Action",ne.\u0275fac=function(Y){return new(Y||ne)(d.Y36(d.sBO),d.Y36(d._Vd),d.Y36(h.mQy),d.Y36(w.e))},ne.\u0275cmp=d.Xpm({type:ne,selectors:[["nui-dashwiz"]],contentQueries:function(Y,j,ce){if(1&Y&&d.Suo(ce,p.u,4),2&Y){let oe;d.iGM(oe=d.CRH())&&(j.steps=oe)}},viewQuery:function(Y,j){if(1&Y&&(d.Gf(G,5,d.s_b),d.Gf(y,5)),2&Y){let ce;d.iGM(ce=d.CRH())&&(j.dynamicStep=ce.first),d.iGM(ce=d.CRH())&&(j.stepTitles=ce)}},hostAttrs:[1,"flex-grow-1","overflow-auto"],inputs:{hideHeader:"hideHeader",canProceed:"canProceed",canFinish:"canFinish",finishText:"finishText",stretchStepLines:"stretchStepLines",buttonComponentTypes:"buttonComponentTypes",navigationControl:"navigationControl"},outputs:{stepNavigated:"stepNavigated",cancel:"cancel",finish:"finish",next:"next",back:"back"},ngContentSelectors:de,decls:10,vars:6,consts:[[1,"nui-dashwiz","d-flex","flex-column","h-100"],["class","nui-dashwiz__header",3,"nui-dashwiz__header--lines-stretched",4,"ngIf"],[1,"nui-scroll-shadows","flex-grow-1","overflow-auto"],["container",""],[1,"nui-dashwiz__footer"],["nuiComponentPortal","","componentId","dashwizButtons",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-dashwiz__header"],["class","nui-dashwiz__header-steps",4,"ngIf"],[1,"nui-dashwiz__header-steps"],["class","nui-dashwiz__header-step",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nui-dashwiz__header-step",3,"ngClass","click"],["class","nui-dashwiz__header-step-container",4,"ngIf"],[1,"nui-dashwiz__header-step-container"],[1,"nui-dashwiz__header-step-row"],[1,"nui-dashwiz__header-step-col"],[1,"nui-dashwiz__header-step-content"],[1,"nui-dashwiz__header-step-link"],[1,"nui-dashwiz__header-step-title"],["stepTitle",""],[1,"nui-dashwiz__header-step-link-container"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-right"],[1,"nui-dashwiz__header-step-line",3,"ngStyle"],[3,"icon","iconColor"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-left"]],template:function(Y,j){if(1&Y){const ce=d.EpF();d.F$t(),d.TgZ(0,"div",0),d.YNc(1,k,2,3,"div",1),d.TgZ(2,"div",2),d.Hsn(3),d.YNc(4,X,0,0,"ng-template",null,3,d.W1O),d.qZA(),d.TgZ(6,"div",4),d.ynx(7,5,6),d.NdJ("output",function(Te){return j.onButtonPortalOutput(Te)}),d.YNc(9,q,0,0,"ng-template",7),d.NdJ("attached",function(Te){d.CHM(ce);const Ee=d.MAs(8);return d.KtG(Ee.attached(Te))}),d.BQk(),d.qZA()()}if(2&Y){const ce=d.MAs(8);d.xp6(1),d.Q6J("ngIf",!j.hideHeader),d.xp6(6),d.Q6J("componentType",1===j.buttonComponentTypes.length?j.buttonComponentTypes[0]:j.buttonComponentTypes[j.stepIndex])("properties",j.buttonProperties)("outputs",d.DdM(5,se)),d.xp6(2),d.Q6J("cdkPortalOutlet",ce.portal)}},dependencies:[M.mk,M.sg,M.O5,M.PC,F.Pl,L.$,h.oJW],styles:[".nui-dashwiz__header[_ngcontent-%COMP%]{padding:10px 15px;background-color:var(--nui-color-bg-secondary,#fafafa);border-bottom:1px solid #d9d9d9;border-bottom:1px solid var(--nui-color-line-default, #d9d9d9);overflow:hidden;text-align:center;display:flex;justify-content:center;-webkit-user-select:none;-o-user-select:none;user-select:none}.nui-dashwiz__header-steps[_ngcontent-%COMP%]{margin-bottom:0;white-space:nowrap;display:inline-flex}.nui-dashwiz__header-step[_ngcontent-%COMP%]{line-height:normal;display:inline-flex;cursor:pointer}.nui-dashwiz__header-step--disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:default}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--first[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%], .nui-dashwiz__header-step--last[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%]{border-color:transparent;opacity:0}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]{cursor:default}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-bg-dark,#111)}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{text-decoration:none}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step-container[_ngcontent-%COMP%]{display:inline-table;width:100%}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]{display:none}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0}.nui-dashwiz__header-step-row[_ngcontent-%COMP%]{display:table-row}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-default,#d9d9d9)}.nui-dashwiz__header-step-col-right[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{margin-right:-1px}.nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-bottom:solid 2px;height:2px}.nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6));transition:color .3s}.nui-dashwiz__header-step-link-container[_ngcontent-%COMP%]{display:flex;align-content:baseline;justify-content:center;align-items:center}.nui-dashwiz__header-step-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis;vertical-align:middle;display:inline-block;max-width:140px;margin:0 0 5px;text-decoration:inherit}.nui-dashwiz__header.nui-dashwiz__header--lines-stretched[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{max-width:unset}.nui-dashwiz__footer[_ngcontent-%COMP%]{z-index:1080;background-color:var(--nui-color-bg-content,#fff);border-top:solid 1px var(--nui-color-line-default, #d9d9d9)}"]}),ne})()},34317:(re,W,l)=>{"use strict";l.d(W,{e:()=>a});var d=l(94650);let a=(()=>{class O{constructor(){}}return O.\u0275fac=function(R){return new(R||O)},O.\u0275prov=d.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},12204:(re,W,l)=>{"use strict";l.d(W,{F:()=>a});var d=l(90433);function a(O){if(O.valid||O.untouched)return!1;if(O instanceof d.cw)for(const e of Object.keys(O.controls))if(a(O.controls[e]))return!0;if(O instanceof d.Oe)for(let e=0;e<O.length;e++)if(a(O.at(e)))return!0;return(O.touched||O.dirty)&&!!O.errors}},30510:(re,W,l)=>{"use strict";l.d(W,{l:()=>O});var d=l(40494),a=l(94650);let O=(()=>{class e{constructor(N){this.widgetTypesService=N}transform(N,A="widget"){var T,p;return N?.type?null===(p=null===(T=this.widgetTypesService.getWidgetType(N.type,N.version).paths)||void 0===T?void 0:T[A])||void 0===p?void 0:p.root:null}}return e.\u0275fac=function(N){return new(N||e)(a.Y36(d.x,16))},e.\u0275pipe=a.Yjl({name:"nuiPizzagnaRoot",type:e,pure:!0}),e})()},45934:(re,W,l)=>{"use strict";l.d(W,{F:()=>w});var d=l(39841),a=l(68675),O=l(54004),e=l(54482),R=l(25403),N=l(25032),A=l(38421),p=l(65470),v=l(12204),h=l(94650);let w=(()=>{class M{transform(L){if(!L)throw new Error("Provided form is undefined");return(0,d.a)([L.statusChanges,L.valueChanges]).pipe((0,a.O)(null),(0,O.U)(()=>(0,v.F)(L)?p.Nc.CRITICAL:p.Nc.DEFAULT),function T(M,F){return(0,e.e)((L,G)=>{const y=new Set;L.subscribe((0,R.x)(G,z=>{const D=M?M(z):z;y.has(D)||(y.add(D),G.next(z))})),F&&(0,A.Xf)(F).subscribe((0,R.x)(G,()=>y.clear(),N.Z))})}())}}return M.\u0275fac=function(L){return new(L||M)},M.\u0275pipe=h.Yjl({name:"nuiWidgetEditorAccordionFormState",type:M,pure:!1}),M})()},76e3:(re,W,l)=>{"use strict";l.d(W,{d:()=>N});var d=l(39841),a=l(68675),O=l(54004),e=l(12204),R=l(94650);let N=(()=>{class A{transform(p,v,h=A.ERROR_ICON_DEFAULT){if(!p)throw new Error("Provided form is undefined");return(0,d.a)([p.statusChanges,p.valueChanges]).pipe((0,a.O)(null),(0,O.U)(()=>(0,e.F)(p)?h:v))}}return A.ERROR_ICON_DEFAULT="status_critical",A.\u0275fac=function(p){return new(p||A)},A.\u0275pipe=R.Yjl({name:"nuiFormHeaderIconPipe",type:A,pure:!1}),A})()},72459:(re,W,l)=>{"use strict";l.d(W,{q:()=>v});var d=l(34235),a=l.n(d),O=l(77579),e=l(61135),R=l(82722),N=l(65470),A=l(7350),T=l(94650),p=l(34317);let v=(()=>{class h{constructor(M,F){this.eventBus=M,this.dashwizService=F,this.onDestroy$=new O.x,this.dataSourceCreated$=new O.x,this.error$=new O.x,this.busy$=new e.X(!1),this.dataSourceFields$=new e.X([]),this.eventBus.subscribeUntil(A.gg,this.onDestroy$,L=>{L.payload&&this.onDataSourceCreated(L.payload)}),this.eventBus.subscribeUntil(A.PF,this.onDestroy$,L=>{var G;if(null!==(G=L.payload)&&void 0!==G&&G.error)this.error$.next(L.payload.error);else{this.error$.next(null);const y=a()(L.payload.result)?L.payload:L.payload.result||{};y?.dataFields&&this.dataSourceFields$.next(y.dataFields)}})}onDataSourceCreated(M){var F;this.dataSource=M,this.dataSourceCreated$.next(),null===(F=this.dataSource.busy)||void 0===F||F.pipe((0,R.R)(this.dataSourceCreated$)).subscribe(L=>{var G,y;null===(y=null===(G=this.dashwizService)||void 0===G?void 0:G.component)||void 0===y||y.navigationControl.next({busyState:{busy:L},allowStepChange:!L}),this.busy$.next(L)})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return h.\u0275fac=function(M){return new(M||h)(T.LFG(N.nY),T.LFG(p.e))},h.\u0275prov=T.Yz7({token:h,factory:h.\u0275fac}),h})()},35720:(re,W,l)=>{"use strict";l.d(W,{p:()=>O});var d=l(61135),a=l(94650);let O=(()=>{class e{constructor(){this.height$=new d.X(0)}}return e.\u0275fac=function(N){return new(N||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})()},15130:(re,W,l)=>{"use strict";l.d(W,{J:()=>z});var d=l(75883),a=l(90733),O=l.n(a),e=l(75946),R=l.n(e),N=l(77579),A=l(60515),T=l(39646),p=l(69751),v=l(63900),h=l(70262),w=l(82722),M=l(39300),F=l(72536),L=l(40494),G=l(61817),y=l(94650);let z=(()=>{class D{constructor(m,x,k,X,q,se,de){this.componentFactoryResolver=m,this.widgetTypesService=x,this.injector=k,this.appRef=X,this.logger=q,this.router=de,this.close$=new N.x,this.handleSubmit=(pe,ne)=>le=>le.pipe(this.trySubmit(ne,pe),this.updateDashboard(pe.dashboardComponent)),this.trySubmit=(pe,ne)=>le=>le.pipe((0,v.w)(Y=>Y&&R()(pe)?pe(Y,ne).pipe((0,h.K)(j=>(this.logger.error(j),this.componentRef.instance.handleSubmitError(),A.E))):(0,T.of)(Y))),this.updateDashboard=pe=>ne=>new p.y(le=>ne.subscribe(Y=>{if(Y){let j;Y.id=Y.id||(0,F.VjN)(),j=pe.dashboard.widgets[Y.id]?Object.assign(Object.assign({},Y),{pizzagna:Object.assign(Object.assign({},this.widgetTypesService.getWidgetType(Y.type,Y.version).widget),{configuration:Y.pizzagna.configuration})}):Y,pe.removeWidget(j.id,!1),setTimeout(()=>{pe.updateWidget(j)})}this.close(),le.next()})),this.renderer=se.createRenderer(null,null)}open(m){var x;const k={dashboardComponent:m.dashboardComponent,widget:O()(m.widget)};this.componentRef=this.appendComponentToBody();const X=this.componentRef.instance;return X.formPortal=m.portalBundle.portal,X.previewWidget=O()(m.widget),!(null===(x=m.portalBundle)||void 0===x)&&x.attached&&X.formPortalAttached.pipe((0,w.R)(this.close$)).subscribe(m.portalBundle.attached),X.changeDetector.detectChanges(),X.result.asObservable().pipe(this.handleSubmit(k,m.trySubmit))}close(){this.renderer&&(this.close$.next(),this.renderer.removeChild(document.body,this.componentRef.hostView.rootNodes[0]),this.appRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.renderer.removeStyle(document.body,"overflow"))}appendComponentToBody(){const x=this.componentFactoryResolver.resolveComponentFactory(G.n).create(this.injector);return this.appRef.attachView(x.hostView),this.renderer.appendChild(document.body,x.hostView.rootNodes[0]),this.renderer.setStyle(document.body,"overflow","hidden"),this.router&&this.router.events.pipe((0,M.h)(k=>k instanceof d.m2),(0,w.R)(this.close$)).subscribe(()=>this.close()),x}}return D.\u0275fac=function(m){return new(m||D)(y.LFG(y._Vd),y.LFG(L.x),y.LFG(y.zs3),y.LFG(y.z2F),y.LFG(F.mQy),y.LFG(y.FYo),y.LFG(d.F0,8))},D.\u0275prov=y.Yz7({token:D,factory:D.\u0275fac}),D})()},95819:(re,W,l)=>{"use strict";l.d(W,{a:()=>A});var d=l(77579),a=l(92954),O=l(39973),e=l(65470),R=l(94650),N=l(28726);let A=(()=>{class T{constructor(v,h,w){this.eventBus=v,this.previewService=h,this.pizzagnaService=w,this.destroy$=new d.x}ngAfterViewInit(){this.buildForm(),this.toPreview(this.component.form)}setComponent(v,h){this.component=v,this.componentId=h}getPreview(){return this.previewService.preview}updatePreview(v){this.previewService.preview=v}updateFormPizzagna(v){this.pizzagnaService.updatePizzagna(v),this.eventBus.getStream(O.M).next({payload:{path:"",value:v}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return T.\u0275fac=function(v){return new(v||T)(R.LFG(e.nY),R.LFG(N.m),R.LFG(a.p))},T.\u0275prov=R.Yz7({token:T,factory:T.\u0275fac}),T})()},79705:(re,W,l)=>{"use strict";l.d(W,{l:()=>F});var d=l(18680),a=l.n(d),O=l(12498),e=l.n(O),R=l(95835),N=l.n(R),A=l(82722),T=l(72536),p=l(92954),v=l(65470),h=l(95819),w=l(94650),M=l(28726);let F=(()=>{class L extends h.a{constructor(y,z,D){super(y,z,D),this.shouldReadForm=!1}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var y,z,D;const C=this.getPreview(),m=(null===(D=null===(z=null===(y=C?.tiles)||void 0===y?void 0:y.properties)||void 0===z?void 0:z.nodes)||void 0===D?void 0:D.map(X=>({id:X,componentType:C[X].componentType})))||[],x=m?.map(X=>X.id);this.pizzagnaService.createComponentsFromTemplate("tiles",x);let k=this.pizzagnaService.pizzagna;k=(0,T.zdu)(k,`${v.xW.Data}.tiles.properties.tiles`,m),setTimeout(()=>this.shouldReadForm=!0),this.updateFormPizzagna(k)}toPreview(y){var z;null===(z=y.get("tiles"))||void 0===z||z.valueChanges.pipe((0,A.R)(this.destroy$)).subscribe(D=>{var C,m;if(!this.shouldReadForm)return;let x=this.getPreview();const k=(D||[]).map(se=>se.id),X=a()(null===(m=null===(C=x?.tiles)||void 0===C?void 0:C.properties)||void 0===m?void 0:m.nodes,k);X.length&&(x=N()(x,X));const q=e()(D,se=>se.id);x=(0,T.zdu)(x,"tiles.properties.nodes",k);for(const se of k){const de=q[se];if(de&&!x[de.id]){const pe=this.getTileConfiguration(de.id,de.componentType);x=(0,T.zdu)(x,de.id,pe)}}this.updatePreview(x)})}getTileConfiguration(y,z){return{id:y,providers:{dataSource:{providerId:void 0}}}}}return L.\u0275fac=function(y){return new(y||L)(w.LFG(v.nY),w.LFG(M.m),w.LFG(p.p))},L.\u0275prov=w.Yz7({token:L,factory:L.\u0275fac}),L})()},82262:(re,W,l)=>{"use strict";l.d(W,{M:()=>p});var d=l(82722),a=l(72536),O=l(92954),e=l(65470),R=l(95186),N=l(95819),A=l(94650),T=l(28726);let p=(()=>{class v extends N.a{constructor(w,M,F){super(w,M,F),this.PROPERTIES_PATH=`${e.xW.Configuration}.chartOptionsEditor.properties`}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var w,M,F,L,G,y,z,D,C,m,x;const k=null===(F=null===(M=null===(w=this.getPreview().chart)||void 0===w?void 0:w.properties)||void 0===M?void 0:M.configuration)||void 0===F?void 0:F.chartOptions;let X=this.pizzagnaService.pizzagna;X=(0,a.zdu)(X,`${this.PROPERTIES_PATH}.chartType`,null!==(L=k?.type)&&void 0!==L?L:void 0),X=(0,a.zdu)(X,`${this.PROPERTIES_PATH}.legendPlacement`,null!==(G=k?.legendPlacement)&&void 0!==G?G:R.w.None),X=(0,a.zdu)(X,`${this.PROPERTIES_PATH}.legendFormatterComponentType`,null!==(z=null===(y=k?.legendFormatter)||void 0===y?void 0:y.componentType)&&void 0!==z?z:""),X=(0,a.zdu)(X,`${this.PROPERTIES_PATH}.contentFormatterComponentType`,null!==(C=null===(D=k?.contentFormatter)||void 0===D?void 0:D.componentType)&&void 0!==C?C:"DonutContentRawFormatterComponent"),X=(0,a.zdu)(X,`${this.PROPERTIES_PATH}.contentFormatterProperties`,null!==(x=null===(m=k?.contentFormatter)||void 0===m?void 0:m.properties)&&void 0!==x?x:""),this.updateFormPizzagna(X)}toPreview(w){w.valueChanges.pipe((0,d.R)(this.destroy$)).subscribe(M=>{const F=(0,a.zdu)(this.getPreview(),"chart.properties.configuration.chartOptions",M);this.updatePreview(F)})}}return v.\u0275fac=function(w){return new(w||v)(A.LFG(e.nY),A.LFG(T.m),A.LFG(O.p))},v.\u0275prov=A.Yz7({token:v,factory:v.\u0275fac}),v})()},45626:(re,W,l)=>{"use strict";l.d(W,{c:()=>T});var d=l(82722),a=l(72536),O=l(92954),e=l(65470),R=l(95819),N=l(94650),A=l(28726);class T extends R.a{constructor(v,h,w){super(v,h,w)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var v,h;let w=this.pizzagnaService.pizzagna;const M=null===(h=null===(v=this.getPreview())||void 0===v?void 0:v.header)||void 0===h?void 0:h.properties;w=(0,a.zdu)(w,`${T.PROPERTIES_PATH}.title`,M?.title),w=(0,a.zdu)(w,`${T.PROPERTIES_PATH}.subtitle`,M?.subtitle),w=(0,a.zdu)(w,`${T.PROPERTIES_PATH}.url`,M?.url),w=(0,a.zdu)(w,`${T.PROPERTIES_PATH}.description`,M?.description),w=(0,a.zdu)(w,`${T.PROPERTIES_PATH}.collapsible`,M?.collapsible),this.updateFormPizzagna(w)}toPreview(v){v.valueChanges.pipe((0,d.R)(this.destroy$)).subscribe(h=>{const w=(0,a.zdu)(this.getPreview(),"header.properties",h);this.updatePreview(w)})}}T.PROPERTIES_PATH=`${e.xW.Configuration}.titleAndDescription.properties`,T.\u0275fac=function(v){return new(v||T)(N.LFG(e.nY),N.LFG(A.m),N.LFG(O.p))},T.\u0275prov=N.Yz7({token:T,factory:T.\u0275fac})},10841:(re,W,l)=>{"use strict";l.d(W,{w:()=>m});var d=l(8817),a=l.n(d),O=l(71973),e=l.n(O),R=l(64509),N=l.n(R),A=l(34235),T=l.n(A),p=l(77579),v=l(39841),h=l(82722),w=l(54004),M=l(71884),F=l(72536),L=l(92954),G=l(65470),y=l(7350),z=l(95819),D=l(94650),C=l(28726);let m=(()=>{class x extends z.a{constructor(X,q,se){super(X,q,se),this.indicatorDataKey="indicatorData",this.previewSeriesPath=`providers.${G.Mu.Adapter}.properties.series`,this.formSeriesComponentPath=`${G.xW.Data}.series.properties`,this.dataSourceSeries$=new p.x,this.selectedSeriesIds$=new p.x,this.shouldReadForm=!1,this.subscribeToAvailableDataFieldsChange(),this.eventBus.subscribeUntil(y.ay,this.destroy$,de=>{const pe=`${G.xW.Structure}.series.properties.nodes`,ne=a()(this.pizzagnaService.pizzagna,pe);this.pizzagnaService.removeComponents(ne);let le=this.pizzagnaService.pizzagna;le=(0,F.zdu)(le,pe,[]),le=(0,F.zdu)(le,`${this.formSeriesComponentPath}.series`,[]),this.updateFormPizzagna(le)}),this.eventBus.subscribeUntil(y.PF,this.destroy$,de=>{var pe;const{series:ne}=T()(de.payload.result)?de.payload:de.payload.result||{};if(ne){this.dataSourceSeries$.next(ne);let le=this.pizzagnaService.pizzagna;le=(0,F.zdu)(le,`${this.formSeriesComponentPath}.allSeries`,ne);const j=(null===(pe=this.pizzagnaService.pizzagna[G.xW.Structure][this.component.componentId].properties)||void 0===pe?void 0:pe.template).findIndex(ze=>ze.id===this.indicatorDataKey);le=(0,F.zdu)(le,`${G.xW.Structure}.series.properties.template[${j}].properties.allSeries`,ne),le=a()(this.getPreview(),`chart.${this.previewSeriesPath}`,[]).reduce((ze,Ve)=>(0,F.zdu)(ze,`${G.xW.Data}.${Ve.id}/${this.indicatorDataKey}.properties.allSeries`,ne),le),this.updateFormPizzagna(le);const Te=`${this.formSeriesComponentPath}.series`,Ee=a()(this.pizzagnaService.pizzagna,Te);if(e()(Ee)){this.shouldReadForm=!1;const ze=ne.map(Ne=>({id:Ne.id,selectedSeriesId:Ne.id,label:Ne.name})),Ve=(0,F.zdu)(this.getPreview(),`chart.${this.previewSeriesPath}`,ze);this.updatePreview(Ve),this.buildForm(),setTimeout(()=>{this.updateAvailableSeries([]),this.shouldReadForm=!0})}}})}buildForm(){const X=this.getPreview(),q=a()(X,`chart.${this.previewSeriesPath}`,[]),se=q.map(le=>({id:le.id,selectedSeriesId:le.selectedSeriesId})),de=q.map(le=>le.id);this.pizzagnaService.createComponentsFromTemplate("series",de);const ne=(0,F.zdu)(this.pizzagnaService.pizzagna,`${this.formSeriesComponentPath}.series`,se);this.updateFormPizzagna(ne),this.selectedSeriesIds$.next(se.map(le=>le.selectedSeriesId)),setTimeout(()=>this.shouldReadForm=!0)}toPreview(X){X.valueChanges.pipe((0,h.R)(this.destroy$)).subscribe(q=>{if(!this.shouldReadForm)return;const se=this.getPreview(),{chart:de}=se,pe=a()(de,this.previewSeriesPath,[]),ne=q.map(j=>Object.assign({id:j.id,selectedSeriesId:j.selectedSeriesId},pe.find(ce=>ce.id===j.id))),le=(0,F.zdu)(se,`chart.${this.previewSeriesPath}`,ne);this.updatePreview(le);const Y=q.map(j=>a()(j,`properties[${j.id}/indicatorData].id`)).filter(j=>!e()(j));this.selectedSeriesIds$.next(Y)})}ngOnDestroy(){this.dataSourceSeries$.complete(),this.selectedSeriesIds$.complete(),super.ngOnDestroy()}updateAvailableSeries(X){var q;if(!this.pizzagnaService.pizzagna)return;let se=this.pizzagnaService.pizzagna;se=(0,F.zdu)(se,`${this.formSeriesComponentPath}.availableSeries`,X);const pe=(null===(q=this.pizzagnaService.pizzagna[G.xW.Structure][this.component.componentId].properties)||void 0===q?void 0:q.template).findIndex(Y=>Y.id===this.indicatorDataKey);se=(0,F.zdu)(se,`${G.xW.Structure}.series.properties.template[${pe}].properties.availableSeries`,X),se=a()(this.pizzagnaService.pizzagna,`${G.xW.Structure}.series.properties.nodes`).reduce((Y,j)=>(0,F.zdu)(Y,`${G.xW.Data}.${j}/${this.indicatorDataKey}.properties.availableSeries`,X),se),this.updateFormPizzagna(se)}subscribeToAvailableDataFieldsChange(){(0,v.a)([this.dataSourceSeries$,this.selectedSeriesIds$]).pipe((0,h.R)(this.destroy$),(0,w.U)(([X,q])=>X.filter(se=>!q.find(de=>de===se.id))),(0,M.x)(N())).subscribe(this.updateAvailableSeries.bind(this))}}return x.\u0275fac=function(X){return new(X||x)(D.LFG(G.nY),D.LFG(C.m),D.LFG(L.p))},x.\u0275prov=D.Yz7({token:x,factory:x.\u0275fac}),x})()},91363:(re,W,l)=>{"use strict";l.d(W,{l:()=>a});const a=new(l(94650).OlP)("CONFIGURATOR_CONVERTER")},28726:(re,W,l)=>{"use strict";l.d(W,{m:()=>O});var d=l(77579),a=l(94650);let O=(()=>{class e{constructor(){this.previewChanged=new d.x}get preview(){return this._preview}set preview(N){this._preview=N,this.previewChanged.next(N)}}return e.\u0275fac=function(N){return new(N||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})()},58746:(re,W,l)=>{"use strict";l.d(W,{s:()=>T});var d=l(90733),a=l.n(d),O=l(65470),e=l(19797),R=l(15130),N=l(94650),A=l(62053);let T=(()=>{class p{constructor(h,w){this.configuratorService=h,this.componentPortalService=w}open(h){if(!h.portalBundle){const M={portal:this.componentPortalService.createComponentPortal(e.b,null),attached:F=>{var L;const G=F.instance;G.formPizzagna=h.formPizzagna,G.formRoot=null===(L=h.paths)||void 0===L?void 0:L.root,G.changeDetector.markForCheck()}};h.portalBundle=M}const w=a()(h.widget);return delete w.pizzagna[O.xW.Data],h.widget=w,this.configuratorService.open(h)}}return p.\u0275fac=function(h){return new(h||p)(N.LFG(R.J),N.LFG(A.$))},p.\u0275prov=N.Yz7({token:p,factory:p.\u0275fac}),p})()},7350:(re,W,l)=>{"use strict";l.d(W,{PF:()=>e,ay:()=>N,gg:()=>A,yX:()=>R});var d=l(4707),a=l(61135),O=l(72536);const e=new O.JRy("DATA_SOURCE_OUTPUT",()=>new d.t(1)),R=new O.JRy("DATA_SOURCE_DESTROYED"),N=new O.JRy("DATA_SOURCE_CHANGE"),A=new O.JRy("DATA_SOURCE_CREATED",()=>new a.X({payload:void 0}))},923:(re,W,l)=>{"use strict";l.d(W,{K:()=>O});var d=l(94650),a=l(29583);let O=(()=>{class e{constructor(N){this.gridsterItem=N}ngOnChanges(N){N.nuiGridsterItemWidgetId&&(this.gridsterItem.widgetId=this.nuiGridsterItemWidgetId)}}return e.\u0275fac=function(N){return new(N||e)(d.Y36(a.IM,3))},e.\u0275dir=d.lG2({type:e,selectors:[["","nuiGridsterItemWidgetId",""]],inputs:{nuiGridsterItemWidgetId:"nuiGridsterItemWidgetId"},features:[d.TTD]}),e})()},84710:(re,W,l)=>{"use strict";l.d(W,{t:()=>D});var d=l(90733),a=l.n(d),O=l(77579),e=l(63900),R=l(82722),N=l(18177),A=l(58746),T=l(39973),p=l(75946),v=l.n(p),h=l(69751),w=l(60515),M=l(39646),F=l(70262),L=l(94650),G=l(72536);let y=(()=>{class C{constructor(x){this.logger=x,this.updateDashboard=k=>X=>new h.y(q=>X.subscribe(se=>{se&&k.removeWidget(se),q.next()}))}handleRemove(x,k,X,q){return this.tryRemove(q,k,X).pipe(this.updateDashboard(x))}tryRemove(x,k,X){return v()(x)?x(k,X).pipe((0,F.K)(q=>(this.logger.error(q),w.E))):(0,M.of)(k)}}return C.\u0275fac=function(x){return new(x||C)(L.LFG(G.mQy))},C.\u0275prov=L.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();var z=l(40494);let D=(()=>{class C{constructor(x,k,X,q){this.dashboardComponent=x,this.widgetEditorService=k,this.widgetRemovalService=X,this.widgetTypesService=q,this.destroy$=new O.x}ngOnInit(){this.dashboardComponent.eventBus.getStream(T.Ef).pipe((0,e.w)(x=>{const k=this.dashboardComponent.dashboard.widgets[x.widgetId],X=this.widgetTypesService.getWidgetType(k.type,k.version);return this.widgetEditorService.open({dashboardComponent:this.dashboardComponent,formPizzagna:X.configurator,paths:X.paths.configurator,widget:k,trySubmit:this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.trySubmit})}),(0,R.R)(this.destroy$)).subscribe(),this.dashboardComponent.eventBus.getStream(T.y4).pipe((0,e.w)(x=>{if(!x.widgetId)throw new Error("event has to have widgetId");const k=x.widgetId,X=this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.tryRemove,q={dashboardComponent:this.dashboardComponent,widget:a()(this.dashboardComponent.dashboard.widgets[k])};return this.widgetRemovalService.handleRemove(this.dashboardComponent,k,q,X)}),(0,R.R)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return C.\u0275fac=function(x){return new(x||C)(L.Y36(N.M,3),L.Y36(A.s),L.Y36(y),L.Y36(z.x))},C.\u0275dir=L.lG2({type:C,selectors:[["","nuiWidgetEditor",""]],inputs:{dashboardPersistenceHandler:["nuiWidgetEditor","dashboardPersistenceHandler"]}}),C})()},18989:(re,W,l)=>{"use strict";l.d(W,{n:()=>A});var d=l(21503),a=l.n(d),O=l(50772),e=l.n(O),R=l(68921),N=l.n(R);function A(v,...h){const w=h.filter(y=>typeof y.previousValue<"u"||typeof y.currentValue<"u");if(!e()(w,y=>y.currentValue!==y.previousValue))return v;if(1===w.length)return w[0].currentValue;const M=function p(v){for(const h of v){const w=typeof h.currentValue;if("undefined"!==w&&null!=h.currentValue)return a()(h.currentValue)?"object"==typeof h.currentValue[0]?"object[]":"array":h.currentValue.constructor!==Object?"advanced":w}return"undefined"}(w);return["object","object[]"].includes(M)?N()(...w.map(y=>"object"==typeof y.currentValue?Object.keys(y.currentValue||{}):[])).reduce((y,z)=>{const D=typeof v>"u"||null===v||typeof v[z]>"u"?void 0:v[z],C=w.map(m=>({previousValue:typeof m.previousValue>"u"||null==m.previousValue?void 0:m.previousValue[z],currentValue:typeof m.currentValue>"u"||null==m.currentValue?void 0:m.currentValue[z]}));return y[z]=A(D,...C),y},"object[]"===M?[]:{}):function T(v){for(let h=v.length-1;h>=0;h--){const w=v[h].currentValue;if(typeof w<"u")return w}}(w)}},56927:(re,W,l)=>{"use strict";l.d(W,{R:()=>M});var d=l(94650),a=l(72536),O=l(18989),e=l(39973),R=l(65470),N=l(17654),A=l(92954),T=l(84080),p=l(36895),v=l(46747);function h(F,L){}function w(F,L){if(1&F){const G=d.EpF();d.ynx(0)(1,1,2),d.NdJ("output",function(z){d.CHM(G);const D=d.oxw();return d.KtG(D.onOutput(z))}),d.YNc(3,h,0,0,"ng-template",3),d.NdJ("attached",function(z){d.CHM(G);const D=d.MAs(2);return d.KtG(D.attached(z))}),d.BQk()()}if(2&F){const G=d.MAs(2),y=d.oxw();d.xp6(1),d.Q6J("componentId",y.rootNode)("componentType",null==y.pizza[y.rootNode]?null:y.pizza[y.rootNode].componentType)("properties",null==y.pizza[y.rootNode]?null:y.pizza[y.rootNode].properties)("providers",null==y.pizza[y.rootNode]?null:y.pizza[y.rootNode].providers)("outputs",y.outputs),d.xp6(2),d.Q6J("cdkPortalOutlet",G.portal)}}let M=(()=>{class F{get pizzagna(){return this._pizzagnaBuffer||this._pizzagna}set pizzagna(G){this._pizzagna=G,this._pizzagnaBuffer=null}constructor(G,y,z){this.pizzagnaService=G,this.logger=y,this.eventBus=z,this.rootNode=e.XM,this.pizzagnaChange=new d.vpe,this.output=new d.vpe,z.getStream(e.M).subscribe(D=>{const C=(0,a.zdu)(this.pizzagna,D.payload.path,D.payload.value);this._pizzagnaBuffer=C,this.pizzagnaChange.emit(C)})}ngOnChanges(G){if(G.pizzagna){const y=G.pizzagna.previousValue;this.pizzagnaService.updatePizzagna(this.pizzagna),this.pizza=this.mergePizzagnaIntoPizza(this.pizza,y,this.pizzagna),this.pizza&&!this.pizza[this.rootNode]&&this.logger.warn("Pizzagna doesn't contain root node '"+this.rootNode+"'. Pizzagna = ",this.pizzagna),this.pizzagnaService.updateComponents(this.pizza)}}onOutput(G){this.output.emit(G)}mergePizzagnaIntoPizza(G,y,z){return(0,O.n)(G,this.getLayerChanges(y,z,R.xW.Structure),this.getLayerChanges(y,z,R.xW.Configuration),this.getLayerChanges(y,z,R.xW.Data))}getLayerChanges(G,y,z){return{previousValue:this.getLayerSafe(G,z),currentValue:this.getLayerSafe(y,z)}}getLayerSafe(G,y){return G&&G[y]}}return F.\u0275fac=function(G){return new(G||F)(d.Y36(A.p),d.Y36(a.mQy),d.Y36(R.nY))},F.\u0275cmp=d.Xpm({type:F,selectors:[["nui-pizzagna"]],inputs:{rootNode:"rootNode",pizzagna:"pizzagna",outputs:"outputs"},outputs:{pizzagnaChange:"pizzagnaChange",output:"output"},features:[d._Bn([A.p,N.v,{provide:R.nY,useClass:a.Ndp}]),d.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(G,y){1&G&&d.YNc(0,w,4,6,"ng-container",0),2&G&&d.Q6J("ngIf",y.pizza&&y.pizza[y.rootNode])},dependencies:[T.Pl,p.O5,v.$],encapsulation:2}),F})()},46747:(re,W,l)=>{"use strict";l.d(W,{$:()=>F});var d=l(94650),a=l(21503),O=l.n(a),e=l(90377),R=l.n(e),N=l(19574),A=l.n(N),T=l(4707),p=l(77579),v=l(82722),h=l(84828),w=l(72536),M=l(62053);let F=(()=>{class L{constructor(y,z,D,C,m){this.injector=y,this.logger=z,this.portalService=D,this.renderer=C,this.providerRegistry=m,this.output=new d.vpe,this.propertiesChanges=new T.t,this.providerInstances={},this.destroy$=new p.x}ngOnInit(){this.logger.debug("Portal created:",this.componentId),this.recreatePortal()}ngAfterViewInit(){Object.keys(this.providerInstances).forEach(y=>{const z=this.providerInstances[y];z.ngAfterViewInit&&z.ngAfterViewInit()})}ngOnChanges(y){let z=!1;const D=y.providers;D&&!D.isFirstChange()&&(this.checkForProviderChanges(D)?(this.logger.debug("Portal recreated (provider change):",this.componentId),this.recreatePortal(),z=!0):this.updateProviderConfigurations(D)),y.componentType&&!y.componentType.isFirstChange()&&!z&&(this.logger.debug("Portal recreated (component change):",this.componentId),this.recreatePortal()),y.properties&&this.propertiesChanges.next(y.properties)}ngOnDestroy(){this.logger.debug("Portal destroyed:",this.componentId),this.destroyProviders(),this.destroy$.next(),this.destroy$.complete()}attached(y){this.component=y.instance,this.renderer.listen(y.location.nativeElement,"click",z=>{(z.ctrlKey||z.metaKey)&&z.shiftKey&&0===z.button&&(console.log("==================== PIZZAGNA DUMP ========================="),console.log("componentId:",this.componentId),console.log("component:",this.component),console.log("componentType:",this.componentType),console.log("properties:",this.properties),console.log("providers:",this.providers),console.log("providerInstances:",this.providerInstances),console.log("============================================================"))});for(const z of Object.keys(this.providerInstances)){const D=this.providerInstances[z];D.setComponent&&D.setComponent(this.component,this.componentId),D.setProviders&&D.setProviders(this.providerInstances,this.componentId)}this.subscribeToOutputs(),this.changesSubscription=this.propertiesChanges.pipe((0,v.R)(this.destroy$)).subscribe(z=>this.applyPropertiesChange(z))}recreatePortal(){this.changesSubscription&&(this.changesSubscription.unsubscribe(),this.changesSubscription=void 0,this.propertiesChanges=new T.t);let y=this.injector;if(this.destroyProviders(),this.providers&&(y=this.updateProviders(y)),this.portal=this.portalService.createComponentPortal(this.componentType,y),this.properties)for(const z of Object.keys(this.properties))this.propertiesChanges.next(new d.WD2(void 0,this.properties,!0))}updateProviders(y){const z=Object.keys(this.providers),D=z.reduce((m,x)=>(this.providers[x].providerId&&(m[x]=this.providerRegistry.getProvider(this.providers[x].providerId)),m),{}),C=this.portalService.createInjector({injector:y,providers:R()(D)});this.providerInstances=z.reduce((m,x)=>{const k=D[x],X=this.providers[x];if(k){const q=C.get(k.provide,null),se=O()(q)?q.find(de=>de instanceof k.useClass):q;if(!se)throw new Error("Provider '"+x+"' does not exist.");se.updateConfiguration&&X.properties&&se.updateConfiguration(Object.assign({providerKey:x},X.properties||{})),se.providerKey=x,m[x]=se}else X.providerId&&this.logger.error("There's no registered provider for id",x);return m},this.providerInstances);for(const m of Object.keys(this.providerInstances)){const x=this.providerInstances[m];x.ngOnInit&&x.ngOnInit()}return C}updateProviderConfigurations(y){for(const z of Object.keys(this.providers)){if(!this.providers[z].providerId)return;const D=this.providerInstances[z];if(!D)throw new Error("Provider '"+z+"' does not exist.");const C=y.previousValue[z],m=y.currentValue[z],k=m&&m.properties;(C&&C.properties)!==k&&D.updateConfiguration&&D.updateConfiguration(Object.assign({providerKey:z},k))}}subscribeToOutputs(){if(this.outputs)for(const y of this.outputs.filter(z=>this.component[z]instanceof d.vpe))this.component[y].pipe((0,v.R)(this.destroy$)).subscribe(z=>{this.output.emit({id:y,payload:z})})}checkForProviderChanges(y){const z=y.previousValue?Object.keys(y.previousValue):[],D=y.currentValue?Object.keys(y.currentValue):[];if(z.length!==D.length||A()(z,D).length>0)return!0;const C=Object.keys(y.previousValue).map(x=>y.previousValue[x].providerId),m=Object.keys(y.currentValue).map(x=>y.currentValue[x].providerId);return A()(C,m).length>0}destroyProviders(){if(this.providerInstances)for(const y of Object.keys(this.providerInstances)){const z=this.providerInstances[y];z.ngOnDestroy&&z.ngOnDestroy(),delete this.providerInstances[y]}}applyPropertiesChange(y){let z=y.currentValue;if(!z)return;z=Object.assign(Object.assign({},z),{componentId:this.componentId});const D={};let C=!1;for(const m of Object.keys(z)){const x=this.component[m];z[m]!==x&&(C=!0,this.component[m]=z[m],this.component.ngOnChanges&&(D[m]=new d.WD2(x,z[m],y.isFirstChange())))}if(C){this.component.ngOnChanges&&this.component.ngOnChanges(D);const m=this.component.changeDetector;m?m.markForCheck():this.logger.warn(`Property 'changeDetector' is missing on component '${this.componentType}', so dynamic refresh of given component might not work.`)}}}return L.\u0275fac=function(y){return new(y||L)(d.Y36(d.zs3),d.Y36(w.mQy),d.Y36(M.$),d.Y36(d.Qsj),d.Y36(h.C))},L.\u0275dir=d.lG2({type:L,selectors:[["","nuiComponentPortal",""]],inputs:{componentId:"componentId",componentType:"componentType",properties:"properties",providers:"providers",outputs:"outputs"},outputs:{output:"output"},exportAs:["nuiComponentPortal"],features:[d.TTD]}),L})()},48876:(re,W,l)=>{"use strict";l.d(W,{Z:()=>a});var d=l(65470);function a(O){return O.providerKey?[O.pizzagnaKey||d.xW.Data,O.componentId,"providers",O.providerKey,"properties",...O.propertyPath].join("."):[O.pizzagnaKey||d.xW.Data,O.componentId,"properties",...O.propertyPath].join(".")}},62053:(re,W,l)=>{"use strict";l.d(W,{$:()=>N});var d=l(84080),a=l(94650),O=l(52409),e=l(8214),R=l(72536);let N=(()=>{class A{constructor(p,v){this.componentRegistry=p,this.logger=v}createComponentPortal(p,v){let h;return h="string"==typeof p?this.componentRegistry.getComponentType(p):p,h||(this.logger.error(`Cannot Find Component Type ${p}`),h=O.q),new d.C5(h,null,v)}createInjector(p){return a.zs3.create({providers:p.providers||[],parent:p.injector,name:"Component Injector"})}}return A.\u0275fac=function(p){return new(p||A)(a.LFG(e.h),a.LFG(R.mQy))},A.\u0275prov=a.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()},8214:(re,W,l)=>{"use strict";l.d(W,{h:()=>O});var d=l(94650),a=l(72536);let O=(()=>{class e{constructor(N){this.logger=N,this.components={}}registerByLateLoadKey(N){this.registerComponentType(N.lateLoadKey,N)}registerComponentType(N,A){this.components[N]=A}getComponentType(N){const A=this.components[N];return A||this.logger.warn("Component '"+N+"' not defined. Available components: "+JSON.stringify(Object.keys(this.components))),A}}return e.\u0275fac=function(N){return new(N||e)(d.LFG(a.mQy))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},17654:(re,W,l)=>{"use strict";l.d(W,{v:()=>R});var d=l(72536),a=l(65470),O=l(94650);let R=(()=>{class N{getPizzagnaUpdatedWithComponents(T,p,v){var h;const M=null===(h=T[a.xW.Structure][p].properties)||void 0===h?void 0:h.template;return this.getPizzagnaWithChildren(T,v,M,p)}getPizzagnaWithChildren(T,p,v,h){let M=p.map(F=>({id:F,componentType:"WidgetConfiguratorSectionComponent"})).reduce((F,L)=>this.updateChildPizzagna(F,v,L),T);return M=this.getPizzagnaWithNodesSet(M,h,p),M}updateChildPizzagna(T,p,v){let h=(0,d.zdu)(T,`${a.xW.Structure}.${v.id}`,v);const w=p.map(F=>Object.assign(Object.assign({},F),{id:`${v.id}/${F.id}`}));h=w.reduce((F,L)=>(0,d.zdu)(F,`${a.xW.Structure}.${L.id}`,L),h);const M=w.map(F=>F.id);return h=this.getPizzagnaWithNodesSet(h,v.id,M),h}getPizzagnaWithNodesSet(T,p,v){return(0,d.zdu)(T,`${a.xW.Structure}.${p}.properties.nodes`,v)}}return N.\u0275fac=function(T){return new(T||N)},N.\u0275prov=O.Yz7({token:N,factory:N.\u0275fac}),N})()},92954:(re,W,l)=>{"use strict";l.d(W,{p:()=>w});var d=l(21503),a=l.n(d),O=l(95835),e=l.n(O),R=l(4707),N=l(72536),A=l(39973),T=l(65470),p=l(48876),v=l(17654),h=l(94650);let w=(()=>{class M{constructor(L,G){this.eventBus=L,this.dynamicComponentCreator=G,this.pizzaChanged=new R.t(1)}updatePizzagna(L){this.pizzagna=L}updateComponents(L){this.components=L,this.pizzaChanged.next(L)}getComponent(L){const G=this.components[L];if(!G)throw new Error("Component '"+L+"' is not defined!");return G}setProperty(L,G){const y="string"==typeof L?L:(0,p.Z)(L);this.eventBus.getStream(A.M).next({payload:{path:y,value:G}})}createComponentsFromTemplateWithProperties(L,G){const y=G.map(D=>D.id);let z=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,L,y);for(const D of G)for(const C of Object.keys(D.children))z=(0,N.zdu)(z,`${T.xW.Data}.${C}.properties`,D.children[C]);this.updatePizzagna(z),this.eventBus.getStream(A.M).next({payload:{path:"",value:z}})}createComponentsFromTemplate(L,G){const y=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,L,G);this.updatePizzagna(y),this.eventBus.getStream(A.M).next({payload:{path:"",value:y}})}removeComponents(L){a()(L)?L.forEach(G=>this.removeComponent(G)):this.removeComponent(L)}removeComponent(L){var G;const y=Object.assign({},this.pizzagna),D=[L,...null===(G=this.pizzagna[T.xW.Structure][L].properties)||void 0===G?void 0:G.nodes],C=[T.xW.Structure,T.xW.Configuration,T.xW.Data];for(const m of C)if(y[m])for(const x of D)y[m]=e()(y[m],x);this.eventBus.getStream(A.M).next({payload:{path:"",value:y}}),this.updatePizzagna(y)}}return M.\u0275fac=function(L){return new(L||M)(h.LFG(T.nY),h.LFG(v.v))},M.\u0275prov=h.Yz7({token:M,factory:M.\u0275fac}),M})()},96800:(re,W,l)=>{"use strict";l.d(W,{o:()=>a});var d=l(94650);let a=(()=>{class O{constructor(){this.events={}}registerEvent(R){this.events[R.id]=R}getEvent(R){const N=this.events[R];if(!N)throw new Error("Event with id '"+R+"' is not registered. Registered events are: "+JSON.stringify(Object.keys(this.events)));return N}}return O.\u0275fac=function(R){return new(R||O)},O.\u0275prov=d.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},78990:(re,W,l)=>{"use strict";l.d(W,{Z:()=>O});var d=l(94650);const a={">":{comparatorFn:(e,R)=>e>R,label:"Value is greater than"},"<":{comparatorFn:(e,R)=>e<R,label:"Value is less than"},">=":{comparatorFn:(e,R)=>e>=R,label:"Value is greater, or equal to"},"<=":{comparatorFn:(e,R)=>e<=R,label:"Value is less than, or equal to"},"==":{comparatorFn:(e,R)=>e==R,label:"Value is exactly"}};let O=(()=>{class e{constructor(){this.comparators=Object.assign({},a)}registerComparators(N){this.comparators=Object.assign(Object.assign({},this.comparators),N)}clearComparators(){this.comparators={}}getComparators(){return this.comparators}}return e.\u0275fac=function(N){return new(N||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},84828:(re,W,l)=>{"use strict";l.d(W,{C:()=>_i});var d=l(36895),a=l(94650),O=l(72536),e=l(54910),R=l(82722),N=l(92954),A=l(39973),T=l(65470),h=function(B,J){return function(I,b){J(I,b,B)}};let w=class extends e.i{constructor(J,I,b){super(J,I,b),this.dataSource=I,this.drillstate=[],this.eventBus.getStream(A.EC).pipe((0,R.R)(this.destroy$)).subscribe(U=>{var Q;null!==(Q=this.dataSource.busy)&&void 0!==Q&&Q.value||this.onDrilldown(U)}),this.registerFilters()}updateAdapterProperties(J){this.dataPath=J.dataPath,this.drillstate=J.drillstate||this.drillstate,this.groupBy=J.groupBy,this.componentsConfig=J.componentsConfig,this.navigationBarId=J.navigationBarId}updateOutput(J){const I=this.getWidgetInput(J,this.drillstate.length!==this.groupBy.length);if(this.pizzagnaService.setProperty(`${T.xW.Data}.${this.componentId}.properties`,I),this.navigationBarId){const Q=`${T.xW.Data}.${this.navigationBarId}.properties.navBarConfig.isRoot`,te=`${T.xW.Data}.${this.navigationBarId}.properties.navBarConfig.buttons.back.disabled`;this.pizzagnaService.setProperty(`${T.xW.Data}.${this.navigationBarId}.properties.navBarConfig.label`,this.drillstate[this.drillstate.length-1]),this.pizzagnaService.setProperty(te,!!this.drillstate.length),this.pizzagnaService.setProperty(Q,!this.drillstate.length)}}getWidgetInput(J,I){return{[this.dataPath]:J,configuration:this.componentsConfig[I?"group":"leaf"]}}onDrilldown(J){const{payload:I}=J;return I.reset?(this.drillstate=[],void this.eventBus.next(A.RG,{})):I.back?(this.drillstate.length=this.drillstate.length-1,void this.eventBus.next(A.RG,{})):(this.drillstate.push(I.id),void this.eventBus.next(A.RG,{}))}registerFilters(){this.dataSource.registerComponent({group:{componentInstance:{getFilters:()=>({value:this.groupBy})}},drillstate:{componentInstance:{getFilters:()=>({value:this.drillstate})}}})}};w=function(B,J,I,b){var te,U=arguments.length,Q=U<3?J:null===b?b=Object.getOwnPropertyDescriptor(J,I):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(B,J,I,b);else for(var ae=B.length-1;ae>=0;ae--)(te=B[ae])&&(Q=(U<3?te(Q):U>3?te(J,I,Q):te(J,I))||Q);return U>3&&Q&&Object.defineProperty(J,I,Q),Q}([h(0,(0,a.tBr)(T.nY)),h(1,(0,a.tBr)(T.Fk)),function(B,J){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",J)}(0,[O.Ndp,Object,N.p])],w);var M=l(77579);let F=(()=>{class B{constructor(I){this.eventBus=I,this.destroy$=new M.x,I.streamAdded.pipe((0,R.R)(this.destroy$)).subscribe(b=>{I.getStream({id:b}).pipe((0,R.R)(this.destroy$)).subscribe(U=>{console.log(`${U.id}: `,U.payload)})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})();var L=l(83645),G=l(78990);let y=(()=>{class B{constructor(I,b,U){this.dataSource=I,this.pizzagnaService=b,this.destroy$=new M.x,this.propertyPath="backgroundColor",this.comparators=U.getComparators()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateConfiguration(I){I?.rules&&(this.rules=I?.rules,this.subscribeToDataChanges(),this.checkColorConditions())}setComponent(I,b){this.subscribeToDataChanges(),this.componentId=b}subscribeToDataChanges(){var I;this.dataSource&&(null===(I=this.dsSubscription$)||void 0===I||I.unsubscribe(),this.dsSubscription$=this.dataSource.outputsSubject.pipe((0,R.R)(this.destroy$)).subscribe(b=>{var U;this.latestValueFromDS=(null===(U=b.result)||void 0===U?void 0:U.value)||this.latestValueFromDS,this.checkColorConditions()}))}checkColorConditions(){var I,b;if(!this.rules)return;if(0===this.rules.length)return this.setColor(void 0),void(null===(I=this.dsSubscription$)||void 0===I||I.unsubscribe());let U;const Q=this.rules&&[...this.rules].reverse();for(const te of Q)if(null!==(b=this.comparators[te.comparisonType])&&void 0!==b&&b.comparatorFn(this.latestValueFromDS,te.value)){U=te.color;break}this.setColor(U)}setColor(I){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:[this.propertyPath]},I)}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.Fk,8),a.LFG(N.p),a.LFG(G.Z))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})();var z=l(33816),D=l.n(z),C=(()=>{return(B=C||(C={})).Warning="var(--nui-color-semantic-warning)",B.Critical="var(--nui-color-semantic-critical)",C;var B})(),X=function(B,J){return function(I,b){J(I,b,B)}};let q=class extends e.i{constructor(J,I,b,U){super(J,I,b),this.numberPipe=U}updateConfiguration(J){this.thresholds=J.thresholds,super.updateConfiguration(J)}processOutput(J){const I=this.processThresholds(J);return this.processNumberFormat(I)}setComponent(J,I){I&&(this.componentId=I)}getThresholdColor(J,I,b){const U=this.getThresholdChecks(J,I,J.reversedThresholds);return U.warningCheck?C.Warning:U.criticalCheck?C.Critical:b}getThresholdChecks(J,I,b){const U=J.warningThresholdValue,Q=J.criticalThresholdValue,te=!D()(U)&&I.value<=U&&I.value>Q,ae=I.value<=Q,me=!D()(U)&&I.value>=U&&I.value<Q;return{warningCheck:b?te:me,criticalCheck:b?ae:I.value>=Q}}processThresholds(J){var I;if(!J||null===(I=this.thresholds)||void 0===I||!I.showThresholds||"number"!=typeof J.value)return J;const b=this.getThresholdColor(this.thresholds,J,J.backgroundColor);return Object.assign(Object.assign({},J),{backgroundColor:b})}processNumberFormat(J){if("number"!=typeof J?.value||!J?.numberFormat)return J;const I=this.numberPipe.transform(J.value,J.numberFormat);return Object.assign(Object.assign({},J),{value:I})}};q=function(B,J,I,b){var te,U=arguments.length,Q=U<3?J:null===b?b=Object.getOwnPropertyDescriptor(J,I):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(B,J,I,b);else for(var ae=B.length-1;ae>=0;ae--)(te=B[ae])&&(Q=(U<3?te(Q):U>3?te(J,I,Q):te(J,I))||Q);return U>3&&Q&&Object.defineProperty(J,I,Q),Q}([X(0,(0,a.tBr)(T.nY)),X(1,(0,a.FiY)()),X(1,(0,a.tBr)(T.Fk)),function(B,J){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",J)}(0,[O.Ndp,Object,N.p,d.JJ])],q);var se=l(21503),de=l.n(se),pe=l(61135),ne=l(39300),le=l(71884),Y=l(18505);let j=(()=>{class B{constructor(I,b){this.eventBus=I,this.pizzagnaService=b,this.brokers=[],this.builder=new ce(this.brokers),this.destroySubscriptions$=new M.x,this.getMin=U=>Math.min(...U),this.getMax=U=>Math.max(...U),this.valuesObject=this.builder.valuesObject}updateConfiguration(I){this.properties=I,this.componentId&&this.createPropertiesAndSubscribeToBrokers()}configure(){return this.builder}getBrokers(){return this.brokers}subscribeToBrokers(){this.destroy(),this.brokers.forEach(I=>{I.in$.pipe((0,ne.h)(b=>!!I.in$.observers.length),(0,le.x)(),(0,Y.b)(b=>this.configureValueModel(b)),(0,Y.b)(b=>this.processAndEmitSyncedValue(b,I)),(0,R.R)(this.destroySubscriptions$)).subscribe()})}setComponent(I,b){this.componentId=b,this.updateConfiguration(this.properties)}destroy(){this.destroySubscriptions$.next(),this.destroySubscriptions$.complete()}processAndEmitSyncedValue(I,b){let U=this.getMin;b?.type&&(U="min"===b.type?this.getMin:this.getMax);const Q=this.valuesObject[b.id].filter(te=>te.targetID&&te.targetValue).map(te=>te.targetValue);b.out$.next(Object.assign(Object.assign({},I),{targetValue:U([...Q])}))}configureValueModel(I){const b=this.valuesObject[I.id].filter(U=>U.targetID===I.targetID);b.length?b[0].targetValue=I.targetValue:this.valuesObject[I.id].push({targetID:I.targetID,targetValue:I.targetValue})}createPropertiesAndSubscribeToBrokers(){var I,b;this.tileNodes=null===(I=this.pizzagnaService.getComponent(this.componentId).properties)||void 0===I?void 0:I.nodes;const{scaleSyncConfig:U}=this.properties;null!==(b=this.tileNodes)&&void 0!==b&&b.length&&(this.tileNodes.forEach((Q,te)=>{this.pizzagnaService.setProperty({componentId:Q,pizzagnaKey:T.xW.Data,propertyPath:["syncValuesBroker"]},this.getBrokers())}),U&&de()(U)&&(U.forEach(Q=>this.configure().addBroker({id:Q.id,type:Q?.type})),this.subscribeToBrokers()))}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY),a.LFG(N.p))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})();class ce{constructor(J){this.brokers=J,this.valuesObject={}}addBroker(J){const I={id:J.id,targetID:"",targetValue:1};return this.valuesObject[J.id]=new Array,this.brokers.push(Object.assign(Object.assign({},J),this.getDefaultBrokerObject(I,I))),this}getDefaultBrokerObject(J,I){return{in$:new pe.X(J),out$:new pe.X(I)}}}var oe=l(71973),Te=l.n(oe),Ee=l(30836),ze=l.n(Ee),Ve=l(7350);let Ne=(()=>{class B{constructor(I,b){this.eventBus=I,this.pizzagnaService=b,this.destroy$=new M.x,this.eventBus.getStream(Ve.PF).pipe((0,R.R)(this.destroy$)).subscribe(U=>{this.handleDataSourceOutput(U)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(I,b){this.componentId=b}handleDataSourceOutput(I){var b,U,Q,te;this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:T.xW.Data},typeof(null===(U=null===(b=I.payload)||void 0===b?void 0:b.error)||void 0===U?void 0:U.type)<"u"?null===(te=null===(Q=I.payload)||void 0===Q?void 0:Q.error)||void 0===te?void 0:te.type.toString():void 0)}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY),a.LFG(N.p))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})(),ot=(()=>{class B extends Ne{constructor(I,b){super(I,b),this.multipleErrorFallbackKey=T.WE.Unknown,this.errorMap={},this.eventBus.getStream(Ve.yX).pipe((0,R.R)(this.destroy$)).subscribe(U=>{this.handleDataSourceDestroyed(U)})}updateConfiguration(I){I.multipleErrorFallbackKey&&(this.multipleErrorFallbackKey=I.multipleErrorFallbackKey)}handleDataSourceOutput(I){this.errorMap=this.updateErrorMap(I),this.setFallbackKeyProperty()}handleDataSourceDestroyed(I){var b;!(null===(b=I.payload)||void 0===b)&&b.componentId&&delete this.errorMap[I.payload.componentId],this.setFallbackKeyProperty()}setFallbackKeyProperty(){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:T.xW.Data},this.getFallbackKey())}getFallbackKey(){if(Te()(this.errorMap))return;const I=ze()(Object.values(this.errorMap));return 1===I.length?I[0]:this.multipleErrorFallbackKey}updateErrorMap(I){var b,U,Q,te;const ae=this.errorMap,me=typeof(null===(U=null===(b=I.payload)||void 0===b?void 0:b.error)||void 0===U?void 0:U.type)<"u"?null===(te=null===(Q=I.payload)||void 0===Q?void 0:Q.error)||void 0===te?void 0:te.type.toString():void 0;return me?me&&(ae[I.payload.componentId]=me):delete ae[I.payload.componentId],ae}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY),a.LFG(N.p))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})(),Ct=(()=>{class B{constructor(I,b){this.eventBus=I,this.pizzagnaService=b,this.loadingMap={},this.destroy$=new M.x,this.eventBus.getStream(A.QD).pipe((0,R.R)(this.destroy$)).subscribe(({payload:U})=>{U?.componentId&&(U?.busy?this.loadingMap[U.componentId]=!0:delete this.loadingMap[U.componentId]),this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["active"],pizzagnaKey:T.xW.Data},!Te()(this.loadingMap))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(I,b){this.componentId=b}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY),a.LFG(N.p))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})();var Ot=l(8817),ye=l.n(Ot),it=l(54004);const ht=/\{.*?\}/g,It=/\{|\}/g;function vt(B,J){const I=B.match(ht);if(!I)return B;let b=B;for(const U of I){const Q=Et(U);J[Q]?b=b.replace(U,J[Q]):console.warn(`There's no ${U} key found in the data: ${J}`)}return b}const Et=B=>B.replace(It,"");let mt=(()=>{class B{constructor(I){this.pizzagnaService=I,this.defaultTrackOn="pizzagna",this.subscriptions=[]}setComponent(I,b){this.component=I,this.componentId=b,this.parentComponentId=function gt(B){const J=B.split("/");return J?.length>1?J[J.length-2]:B}(b),this.initChangeSubscriptions()}updateConfiguration(I){this.configs=I?.configs}initChangeSubscriptions(){for(const I of this.configs){const b=this.getObservableFor(I);if(!b)return void console.warn("no observable found on 'PizzagnaBroadcasterService', for part: ",I);const U=b.subscribe(Q=>{for(const te of I.paths){const ae=vt(te,this);this.pizzagnaService.setProperty(ae,Q)}});this.subscriptions.push(U)}}getObservableFor(I){return"component"===(I.trackOn||this.defaultTrackOn)?this.getComponentObservableFor(I):this.getPizzagnaObservableFor(I)}getPizzagnaObservableFor(I){return this.pizzagnaService.pizzaChanged.pipe((0,it.U)(b=>ye()(b,I.key)),(0,le.x)())}getComponentObservableFor(I){return ye()(this.component,I.key)?.pipe((0,le.x)())}ngOnDestroy(){for(const I of this.subscriptions)I.unsubscribe()}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(N.p))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})();var ft=l(388),_e=l(43397),Fe=l(6505),Pt=l(81354),Ht=l(34317),Dt=l(72459),$t=l(16372),Tt=l.n($t),dt=l(95819),Me=l(28726);let K=(()=>{class B extends dt.a{get previewComponentId(){return this.componentId.split("/")[0]}constructor(I,b,U){super(I,b,U)}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),b=this.formParts.reduce((U,Q)=>{const te=`${this.previewComponentId}.${Q.previewPath}`,ae=ye()(I,te);if(ae)for(const me of Q.keys)void 0!==ae[me]&&(U=(0,O.zdu)(U,`${T.xW.Data}.${this.componentId}.properties.${me}`,ae[me]));return U},this.pizzagnaService.pizzagna);this.updateFormPizzagna(b)}toPreview(I){I.valueChanges.pipe((0,R.R)(this.destroy$)).subscribe(b=>{const U=this.formParts.reduce((Q,te)=>{let ae=te.previewOutputPath||te.previewPath;ae=`${this.previewComponentId}.${ae}`;const me=ye()(Q,ae),Se=Tt()(b,te.keys),Xe=Object.assign(Object.assign({},me),Se);return(0,O.zdu)(Q,`${ae}`,Xe)},this.getPreview());this.updatePreview(U)})}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY),a.LFG(Me.m),a.LFG(N.p))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})();var u=l(79705),_=l(82262);let f=(()=>{class B extends dt.a{get previewComponentId(){return this.componentId.split("/")[0]}constructor(I,b,U){super(I,b,U)}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),b=this.formParts.reduce((U,Q)=>{const ae=ye()(I,Q.previewPath)?.find(Se=>Se.id===this.previewComponentId),me=Tt()(ae,Q.keys);return(0,O.zdu)(U,`${T.xW.Data}.${this.componentId}.properties`,me)},this.pizzagnaService.pizzagna);this.updateFormPizzagna(b)}toPreview(I){I.valueChanges.pipe((0,R.R)(this.destroy$)).subscribe(b=>{const U=this.formParts.reduce((Q,te)=>{const ae=te.previewOutputPath||te.previewPath,me=ye()(Q,ae),Se=me.findIndex(pi=>pi.id===this.previewComponentId),Xe=me[Se],bt=Tt()(b,te.keys),ui=Object.assign(Object.assign({},Xe),bt);return(0,O.zdu)(Q,`${ae}[${Se}]`,ui)},this.getPreview());this.updatePreview(U)})}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY),a.LFG(Me.m),a.LFG(N.p))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})(),S=(()=>{class B extends dt.a{constructor(I,b,U){super(I,b,U)}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),b=this.formParts.reduce((U,Q)=>{const te=ye()(I,Q.previewPath);if(te)for(const ae of Q.keys)void 0!==te[ae]&&(U=(0,O.zdu)(U,`${T.xW.Data}.${this.componentId}.properties.${ae}`,te[ae]));return U},this.pizzagnaService.pizzagna);this.updateFormPizzagna(b)}toPreview(I){I.valueChanges.pipe((0,R.R)(this.destroy$)).subscribe(b=>{const U=this.formParts.reduce((Q,te)=>{const ae=te.previewOutputPath||te.previewPath,me=ye()(Q,ae),Se=Tt()(b,te.keys),Xe=Object.assign(Object.assign({},me),Se);return(0,O.zdu)(Q,ae,Xe)},this.getPreview());this.updatePreview(U)})}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY),a.LFG(Me.m),a.LFG(N.p))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})();var $=l(45626),H=l(90433),ue=l(64509),Ce=l.n(ue),fe=l(68675),Le=l(94813);let Ke=(()=>{class B extends dt.a{constructor(I,b,U){super(I,b,U)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var I,b,U,Q;const te=null===(I=this.getPreview())||void 0===I?void 0:I.table,ae=null===(b=te?.properties)||void 0===b?void 0:b.dataFields,me=null===(Q=null===(U=te?.properties)||void 0===U?void 0:U.configuration)||void 0===Q?void 0:Q.columns;let Se=this.pizzagnaService.pizzagna;Se=(0,O.zdu)(Se,`${T.xW.Data}.columns.properties.columns`,me??[]),Se=(0,O.zdu)(Se,`${T.xW.Data}.columns.properties.dataFields`,ae),this.updateFormPizzagna(Se)}toPreview(I){const b=I.contains("columnsOutput")?I.get("columnsOutput"):I.get("columns");if(!b)throw new Error("FormControl is not defined!");b.valueChanges.pipe((0,R.R)(this.destroy$),(0,le.x)(Ce())).subscribe(U=>{setTimeout(()=>{const ae=this.getPreview();this.updatePreview((0,O.zdu)(ae,"table.properties.configuration.columns",U))});let te=this.pizzagnaService.pizzagna;setTimeout(()=>{var ae,me,Se,Xe,bt;te=(0,O.zdu)(te,`${T.xW.Structure}.columns.properties.template`,null===(ae=this.pizzagnaService.pizzagna[T.xW.Structure].columns.properties)||void 0===ae?void 0:ae.template),te=(0,O.zdu)(te,`${T.xW.Data}.filters.properties.columns`,U),te=(0,O.zdu)(te,`${T.xW.Structure}.presentation.properties.nodes`,[...null!==(bt=null===(Xe=null===(Se=null===(me=te?.structure)||void 0===me?void 0:me.presentation)||void 0===Se?void 0:Se.properties)||void 0===Xe?void 0:Xe.nodes)&&void 0!==bt?bt:[]]),this.updateFormPizzagna(te)})}),this.subscribeToColumnsValueChange()}subscribeToColumnsValueChange(){var I;null===(I=this.component.form.get("columnsOutput"))||void 0===I||I.valueChanges.pipe((0,fe.O)(this.component.form.get("columnsOutput").value),(0,ne.h)(b=>b.length>0),(0,Y.b)(()=>this.handleWidthValidation()),(0,it.U)(b=>this.filterColumnsWithoutSpecifiedWidth(b)),(0,it.U)(b=>this.handleColumnsWithoutSpecifiedWidth(b)),function ve(B,J){return(0,le.x)((I,b)=>J?J(I[B],b[B]):I[B]===b[B])}("id"),(0,Le.j)("id"),(0,R.R)(this.destroy$)).subscribe(b=>this.setWidthMessages(b))}filterColumnsWithoutSpecifiedWidth(I){return I.filter(b=>b.isActive&&!b.width)}handleColumnsWithoutSpecifiedWidth(I){switch(I.length){case 0:{const b=this.component.form.get("columns").controls.filter(Q=>ye()(Q,`value.properties[${Q.value.id}/description].isActive`));if(Te()(b))return{id:void 0,label:void 0};const U=b[b.length-1];return console.warn(`Cannot set width for all columns. Resetting "${U.value.label}" width.`),U.patchValue({width:null},{emitEvent:!1}),U.value}case 1:return I[0];default:return{id:void 0,label:void 0}}}handleWidthValidation(){this.component.form.get("columns").controls.forEach(I=>{var b;const Q=I.get(`properties.${I.value.id}/description`);if(!Q)return;const te=null===(b=Q.get("isActive"))||void 0===b?void 0:b.value,ae=Q.get("width");te?(ae?.setValidators([H.kI.min(62)]),ae?.markAllAsTouched(),ae?.updateValueAndValidity({emitEvent:!1})):(ae?.clearValidators(),ae?.updateValueAndValidity({emitEvent:!1}))})}setWidthMessages(I){var b;if(!this.pizzagnaService.pizzagna)return;const U="isWidthMessageDisplayed",{pizzagna:Q}=this.pizzagnaService;(null===(b=Q.data.columns.properties)||void 0===b?void 0:b.columns).forEach(ae=>this.pizzagnaService.setProperty(`${T.xW.Data}.${ae.id}/description.properties.${U}`,!1)),I&&this.pizzagnaService.setProperty(`${T.xW.Data}.${I}/description.properties.${U}`,!0)}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY),a.LFG(Me.m),a.LFG(N.p))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})(),Je=(()=>{class B extends dt.a{constructor(I,b,U){super(I,b,U)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var I,b,U,Q,te;let ae=this.pizzagnaService.pizzagna;const me=null===(I=this.getPreview())||void 0===I?void 0:I.table,Se=null===(U=null===(b=me?.properties)||void 0===b?void 0:b.configuration)||void 0===U?void 0:U.columns,Xe=null===(te=null===(Q=me?.properties)||void 0===Q?void 0:Q.configuration)||void 0===te?void 0:te.sorterConfiguration;ae=(0,O.zdu)(ae,`${T.xW.Data}.filters.properties.columns`,Se),ae=(0,O.zdu)(ae,`${T.xW.Data}.filters.properties.sorterConfiguration`,Xe),this.updateFormPizzagna(ae)}toPreview(I){I.valueChanges.pipe((0,R.R)(this.destroy$)).subscribe(b=>{let U=this.getPreview();U=(0,O.zdu)(U,"table.properties.configuration.sorterConfiguration",b.sorterConfiguration),this.updatePreview(U),this.buildForm()})}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY),a.LFG(Me.m),a.LFG(N.p))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})(),Ue=(()=>{class B extends dt.a{constructor(I,b,U,Q){super(I,b,U),this.timeframeService=Q}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){let I=this.pizzagnaService.pizzagna;const b=this.getPreview(),U=Object.keys(this.timeframeService.currentPresets).map(Se=>({id:Se,name:this.timeframeService.currentPresets[Se].name})),Q=`${T.xW.Data}.timeseriesMetadata.properties`;I=(0,O.zdu)(I,`${Q}.timeSpans`,U);const te=ye()(b,"timeframeSelection.properties.timeframe.selectedPresetId","last7Days"),ae=U.find(Se=>Se.id===te);ae&&(I=(0,O.zdu)(I,`${Q}.startingTimespan`,ae));const me=ye()(b,"chart.properties.configuration");me&&(I=(0,O.zdu)(I,`${Q}.legendPlacement`,me.legendPlacement),I=(0,O.zdu)(I,`${Q}.leftAxisLabel`,me.leftAxisLabel),I=(0,O.zdu)(I,`${Q}.preset`,me.preset)),this.updateFormPizzagna(I)}toPreview(I){I.valueChanges.pipe((0,R.R)(this.destroy$)).subscribe(b=>{let U=this.getPreview();const Q=ye()(b,"startingTimespan.id");Q&&(U=(0,O.zdu)(U,"timeframeSelection.properties.timeframe.selectedPresetId",Q));const te="chart.properties.configuration";U=(0,O.zdu)(U,`${te}.legendPlacement`,ye()(b,"legendPlacement","")),U=(0,O.zdu)(U,`${te}.leftAxisLabel`,ye()(b,"leftAxisLabel","")),U=(0,O.zdu)(U,`${te}.preset`,ye()(b,"preset","")),this.updatePreview(U)})}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY),a.LFG(Me.m),a.LFG(N.p),a.LFG(O.hYR))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})();var He=l(10841);let rt=(()=>{class B extends dt.a{get previewComponentId(){return this.componentId.split("/")[0]}constructor(I,b,U){super(I,b,U),this.previewSeriesPath=`chart.providers.${T.Mu.Adapter}.properties.series`}buildForm(){const b=ye()(this.getPreview(),this.previewSeriesPath,[]).find(te=>te.id===this.previewComponentId),Q=(0,O.zdu)(this.pizzagnaService.pizzagna,`${T.xW.Data}.${this.componentId}.properties`,{selectedSeriesId:b&&b.selectedSeriesId});this.updateFormPizzagna(Q)}toPreview(I){I.valueChanges.pipe((0,R.R)(this.destroy$)).subscribe(b=>{const U=b.id,Q=this.getPreview(),te=ye()(Q,this.previewSeriesPath,[]),ae=te.findIndex(me=>me.id===this.previewComponentId);if(ae>-1){const me=[...te];me[ae]=Object.assign(Object.assign({},me[ae]),{selectedSeriesId:U});const Se=(0,O.zdu)(Q,`${this.previewSeriesPath}`,me);this.updatePreview(Se)}})}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(T.nY),a.LFG(Me.m),a.LFG(N.p))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac}),B})();var Be=l(91363),Ut=l(96800),ct=l(34357),Ge=l(32814),Qt=l(84356),we=l(96465);let _i=(()=>{class B{constructor(I){this.logger=I,this.staticProviders={},this.setProviders({[A.tc]:{provide:ft.q,deps:[T.nY,a.R0b,_e.g]},[A.GN]:{provide:we.q,deps:[T.nY,[new a.FiY,T.Bc],[new a.FiY,Qt.I],Ut.o,N.p]},[A.bZ]:{provide:e.i,deps:[T.nY,[new a.FiY,T.Fk],N.p]},[A.l5]:{provide:Fe.Y,deps:[T.nY,[new a.FiY,T.Fk],N.p,O.zCP]},[A.R9]:{provide:Pt.f,deps:[T.nY,[new a.FiY,T.Fk],N.p]},[A.u1]:{provide:q,deps:[T.nY,[new a.FiY,T.Fk],N.p,d.JJ]},[A.mf]:{provide:w,deps:[T.nY,[new a.FiY,T.Fk],N.p]},[A.tS]:{provide:y,deps:[[new a.FiY,T.Fk],N.p,G.Z]},[A.j4]:{provide:Be.l,useClass:$.c,deps:[T.nY,Me.m,N.p]},[A.dz]:{provide:Be.l,useClass:_.M,deps:[T.nY,Me.m,N.p]},[A.ns]:{provide:Be.l,useClass:u.l,deps:[T.nY,Me.m,N.p]},[A.YN]:{provide:Be.l,useClass:K,deps:[T.nY,Me.m,N.p]},[A.VX]:{provide:Be.l,useClass:S,deps:[T.nY,Me.m,N.p]},[A.Es]:{provide:Be.l,useClass:f,deps:[T.nY,Me.m,N.p]},[A.Gq]:{provide:Be.l,useClass:rt,deps:[T.nY,Me.m,N.p,O.hYR]},[A.dZ]:{provide:Be.l,useClass:Ue,deps:[T.nY,Me.m,N.p,O.hYR]},[A.Ip]:{provide:Be.l,useClass:He.w,deps:[T.nY,Me.m,N.p]},[A.n5]:{provide:Be.l,useClass:Ke,deps:[T.nY,Me.m,N.p]},[A.LU]:{provide:Be.l,useClass:Je,deps:[T.nY,Me.m,N.p]},[A.IG]:{provide:Ct,deps:[T.nY,N.p]},[A.Cz]:{provide:Ne,deps:[T.nY,N.p]},[A.C]:{provide:ot,deps:[T.nY,N.p]},[A.$u]:{provide:j,deps:[T.nY,N.p]},[A.DJ]:{provide:L.O,deps:[T.nY,"windowObject",O.mQy,Ge.v]},[A.F]:{provide:F,deps:[T.nY]},[A.Vx]:{provide:O.zCP,deps:[]},[A.m_]:{provide:mt,deps:[N.p]},[A.Hp]:{provide:T.m4,useExisting:ct.C,deps:[N.p]},[A.s6]:{provide:T.m4,useExisting:ct.YX,deps:[N.p]},[A.rf]:{provide:T.m4,useExisting:ct.UA,deps:[N.p]},[A.Xh]:{provide:Dt.q,deps:[T.nY,[new a.FiY,Ht.e]]}})}setProviders(I){this.staticProviders=Object.assign({},this.staticProviders,I)}getProvider(I){const b=this.staticProviders[I];return b||(this.logger.warn("No provider registered for id",I),this.logger.warn("Known providers:",Object.keys(this.staticProviders).join(", "))),b}getProviderInstance(I,b){return a.zs3.create({providers:[I],parent:b}).get(T.Fk)}}return B.\u0275fac=function(I){return new(I||B)(a.LFG(O.mQy))},B.\u0275prov=a.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},52198:(re,W,l)=>{"use strict";l.d(W,{k:()=>R});var d=l(61135),a=l(54004),O=l(72536),e=l(94650);let R=(()=>{class N{get stateVersion(){return this._stateVersion}get isEmpty(){return this._isEmpty}constructor(T,p){this.logger=T,this.className=p,this.state$=new d.X({}),this.stateChanged$=this.state$.asObservable().pipe((0,a.U)(()=>this.getItems())),this._isEmpty=!0}addItems(T,p={overrideExisting:!0}){const v=this.state$.value;T.forEach(h=>{!v[this.getItemKey(h)]||p.overrideExisting?v[this.getItemKey(h)]=Object.assign({},h):this.logger.warn(`Logger - ${this.className}: item with ${this.getItemKey(h)}\n                    is already registered. Skipping.`)}),this.state$.next(v),T.length>0&&this.updateStateFlags(!1)}getItem(T){return this.state$.value[T]}getItems(){return Object.values(this.state$.value)}reset(){this.state$.next({}),this.updateStateFlags(!0)}ngOnDestroy(){this.state$.complete()}updateStateFlags(T){this._isEmpty=T,this._stateVersion=(0,O.VjN)()}}return N.\u0275fac=function(T){e.$Z()},N.\u0275dir=e.lG2({type:N}),N})()},34357:(re,W,l)=>{"use strict";l.d(W,{C:()=>R,UA:()=>A,YX:()=>N,qy:()=>T});var d=l(52198),a=l(94650),O=l(72536);class e extends d.k{constructor(){super(...arguments),this.formattersStateChanged$=this.stateChanged$}addFormatters(v,h={overrideExisting:!0}){super.addItems(v,h)}getFormatters(){return super.getItems()}getItemKey(v){return v.componentType}}let R=(()=>{class p extends e{constructor(h){super(h,"TableFormatterRegistryService")}}return p.\u0275fac=function(h){return new(h||p)(a.LFG(O.mQy))},p.\u0275prov=a.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),N=(()=>{class p extends e{constructor(h){super(h,"KpiFormattersRegistryService")}}return p.\u0275fac=function(h){return new(h||p)(a.LFG(O.mQy))},p.\u0275prov=a.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),A=(()=>{class p extends e{constructor(h){super(h,"ProportionalDonutContentFormattersRegistryService")}}return p.\u0275fac=function(h){return new(h||p)(a.LFG(O.mQy))},p.\u0275prov=a.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),T=(()=>{class p extends e{constructor(h){super(h,"ProportionalLegendFormattersRegistryService")}}return p.\u0275fac=function(h){return new(h||p)(a.LFG(O.mQy))},p.\u0275prov=a.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},39973:(re,W,l)=>{"use strict";l.d(W,{$d:()=>Pt,$u:()=>it,C:()=>ye,Cz:()=>Ot,DJ:()=>gt,EC:()=>m,Ef:()=>T,Es:()=>Ve,F:()=>ht,GN:()=>ce,Gq:()=>ot,Hp:()=>Et,IG:()=>Ct,Ip:()=>j,LU:()=>Te,M:()=>F,MO:()=>p,N9:()=>z,QD:()=>y,R1:()=>C,R9:()=>X,RG:()=>R,VX:()=>ze,Vx:()=>vt,XM:()=>e,Xh:()=>Fe,Xi:()=>w,YN:()=>Ne,b1:()=>D,bZ:()=>k,dZ:()=>Y,df:()=>N,dz:()=>ne,j4:()=>pe,j7:()=>v,kV:()=>M,l5:()=>Ee,m_:()=>It,mf:()=>se,n5:()=>oe,ns:()=>le,pV:()=>h,re:()=>L,rf:()=>ft,s6:()=>mt,tS:()=>de,tc:()=>x,u1:()=>q,xZ:()=>G,y4:()=>A});var d=l(61135),a=l(4707),O=l(72536);const e="/",R=new O.JRy("REFRESH"),N=new O.JRy("SCROLL_NEXT_PAGE"),A=new O.JRy("WIDGET_REMOVE"),T=new O.JRy("WIDGET_EDIT"),p=new O.JRy("WIDGET_CREATE"),v=new O.JRy("WIDGET_READY"),h=new O.JRy("WIDGET_RESIZE"),w=new O.JRy("WIDGET_POSITION_CHANGE"),M=new O.JRy("WIDGET_SEARCH",()=>new d.X({payload:""})),F=new O.JRy("SET_PROPERTY_VALUE"),L=new O.JRy("SET_TIMEFRAME"),G=new O.JRy("PREVIEW_EVENT"),y=new O.JRy("DATA_SOURCE_BUSY"),z=new O.JRy("DASHBOARD_EDIT_MODE",()=>new a.t(1)),D=new O.JRy("INTERACTION"),C=new O.JRy("DATA_SOURCE_INVOKED"),m=new O.JRy("DRILLDOWN"),x="NOVA_DATASOURCE_INTERVAL_REFRESHER",k="NOVA_DATASOURCE_ADAPTER",X="NOVA_TIMESERIES_DATASOURCE_ADAPTER",q="NOVA_KPI_DATASOURCE_ADAPTER",se="NOVA_DRILLDOWN_DATASOURCE_ADAPTER",de="NOVA_KPI_COLOR_PRIORITIZER",pe="NOVA_TITLE_AND_DESCRIPTION_CONVERTER",ne="NOVA_PROPORTIONAL_WIDGET_CHART_OPTIONS_CONVERTER",le="NOVA_KPI_TILES_CONVERTER",Y="NOVA_TIMESERIES_METADATA_CONVERTER",j="NOVA_TIMESERIES_SERIES_CONVERTER",ce="NOVA_DASHBOARD_EVENT_PROXY",oe="NOVA_TABLE_COLUMNS_CONVERTER",Te="NOVA_TABLE_FILTERS_CONVERTER",Ee="NOVA_TABLE_DATASOURCE_ADAPTER",ze="NOVA_GENERIC_CONVERTER",Ve="NOVA_GENERIC_ARRAY_CONVERTER",Ne="NOVA_KPI_SECTION_CONVERTER",ot="NOVA_TIMESERIES_TILE_INDICATOR_DATA_CONVERTER",Ct="NOVA_LOADING_ADAPTER",Ot="NOVA_STATUS_CONTENT_FALLBACK_ADAPTER",ye="NOVA_KPI_STATUS_CONTENT_FALLBACK_ADAPTER",it="NOVA_KPI_SCALE_SYNC_BROKER",gt="NOVA_URL_INTERACTION_HANDLER",ht="NOVA_EVENT_BUS_DEBUGGER",It="NOVA_PIZZAGNA_BROADCASTER",vt="NOVA_VIRTUAL_VIEWPORT_MANAGER",Et="NOVA_TABLE_FORMATTERS_REGISTRY",mt="NOVA_KPI_FORMATTERS_REGISTRY",ft="NOVA_PROPORTIONAL_CONTENT_FORMATTERS_REGISTRY",Fe="NOVA_CONFIGURATOR_DATA_SOURCE_MANAGER",Pt={id:"CHART_METRIC_REMOVE"}},32814:(re,W,l)=>{"use strict";l.d(W,{v:()=>O});var d=l(94650),a=l(72536);let O=(()=>{class e{constructor(N){this.logger=N}template(N,A){const T=new RegExp(/\$\{([a-zA-Z0-9.]*)\}/g);return N.replace(T,(p,v)=>{var h;try{return null!==(h=this.evaluate(v.split("."),A))&&void 0!==h?h:""}catch(w){return this.logger.error(w),""}})}evaluate(N,A){return N.reduce((T,p)=>T[p],A)}}return e.\u0275fac=function(N){return new(N||e)(d.LFG(a.mQy))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},84356:(re,W,l)=>{"use strict";l.d(W,{I:()=>a});var d=l(94650);let a=(()=>{class O{updateWidget(R){this.widget=R}getWidget(){return this.widget}}return O.\u0275fac=function(R){return new(R||O)},O.\u0275prov=d.Yz7({token:O,factory:O.\u0275fac}),O})()},96465:(re,W,l)=>{"use strict";l.d(W,{q:()=>w});var d=l(12498),a=l.n(d),O=l(30836),e=l.n(O),R=l(77579),N=l(82722),A=l(92954),T=l(65470),p=l(94650),v=l(84356),h=l(96800);let w=(()=>{class M{constructor(L,G,y,z,D){this.pizzagnaBus=L,this.dashboardBus=G,this.widgetConfigurationService=y,this.eventRegistry=z,this.pizzagnaService=D,this.upstreamSubscriptions={},this.downstreamSubscriptions={},this.destroy$=new R.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(L){this.component=L}updateConfiguration(L){this.providerKey=L.providerKey,this.upstreams=L.upstreams,this.downstreams=L.downstreams,this.upstreams&&this.registerUpstreamSubscriptions(...this.upstreams),this.downstreams&&this.registerDownstreamSubscriptions(...this.downstreams)}addUpstream(L){this.addStream(L,"upstreams")}addDownstream(L){this.addStream(L,"downstreams")}addStream(L,G){const y=e()((this[G]||[]).concat(L.id));this[G]=y,this.component&&this.pizzagnaService.setProperty({componentId:this.component.componentId,pizzagnaKey:T.xW.Data,providerKey:this.providerKey,propertyPath:[G]},y)}registerUpstreamSubscriptions(...L){this.dashboardBus&&this.registerSubscriptions(L,this.upstreamSubscriptions,this.pizzagnaBus,(G,y)=>{const z=this.widgetConfigurationService.getWidget().id;this.dashboardBus.getStream(G).next(Object.assign({},y,{widgetId:z}))})}registerDownstreamSubscriptions(...L){this.dashboardBus&&this.registerSubscriptions(L,this.downstreamSubscriptions,this.dashboardBus,(G,y)=>{const z=this.widgetConfigurationService.getWidget().id;(typeof y.widgetId>"u"||z===y.widgetId)&&this.pizzagnaBus.getStream(G).next(y)})}registerSubscriptions(L=[],G,y,z){const D=L?a()(L,C=>C):null;for(const C of Object.keys(G))(!D||!D[C])&&(G[C].unsubscribe(),delete G[C]);for(const C of Object.keys(D??{}).filter(m=>!G[m])){const m=this.eventRegistry.getEvent(C);G[C]=y.getStream(m).pipe((0,N.R)(this.destroy$)).subscribe(x=>{z(m,x)})}}}return M.\u0275fac=function(L){return new(L||M)(p.LFG(T.nY),p.LFG(T.Bc,8),p.LFG(v.I,8),p.LFG(h.o),p.LFG(A.p))},M.\u0275prov=p.Yz7({token:M,factory:M.\u0275fac}),M})()},40494:(re,W,l)=>{"use strict";l.d(W,{x:()=>A});var d=l(69754),a=l.n(d),O=l(34793),e=l.n(O),R=l(65470),N=l(94650);let A=(()=>{class T{constructor(){this.widgetTypes={}}registerWidgetType(v,h,w){let M=this.widgetTypes[v];M||(M=[],this.widgetTypes[v]=M),M.length<h&&(M.length=h),M[h-1]=w}getWidgetType(v,h){const w=this.widgetTypes[v];if(!w||0===w.length)throw new Error("Type '"+v+"' not found in the registry. Available types: "+Object.keys(this.widgetTypes).join(", "));if(typeof h<"u"&&(h<=0||w.length<h))throw new Error("Version "+h+" for widget type '"+v+"' not registered. Max available version is "+w.length);return w[(typeof h>"u"?w.length:h)-1]}mergeWithWidgetType(v){const h=this.getWidgetType(v.type,v.version);return Object.assign(Object.assign({},v),{pizzagna:a()(v.pizzagna,h.widget)})}setNode(v,h,w,M){var F,L;const z=`${h}.${R.xW.Structure}.${(null===(L=null===(F=v.paths)||void 0===F?void 0:F[h])||void 0===L?void 0:L[w])||w}`;e()(v,z,M)}}return T.\u0275fac=function(v){return new(v||T)},T.\u0275prov=N.Yz7({token:T,factory:T.\u0275fac}),T})()},65470:(re,W,l)=>{"use strict";l.d(W,{AC:()=>p,B5:()=>A,Bc:()=>O,Fk:()=>e,Mu:()=>T,Nc:()=>w,WE:()=>M,m4:()=>R,nY:()=>a,ni:()=>v,xW:()=>h});var d=l(94650);const a=new d.OlP("PIZZAGNA_EVENT_BUS"),O=new d.OlP("DASHBOARD_EVENT_BUS"),e=new d.OlP("DATA_SOURCE"),R=new d.OlP("FORMATTERS_REGISTRY"),A=(new d.OlP("TEST_REGISTRY"),new d.OlP("HEADER_LINK_PROVIDER"));var T=(()=>{return(F=T||(T={})).DataSource="dataSource",F.Adapter="adapter",F.Converter="converter",F.Broadcaster="broadcaster",F.Refresher="refresher",F.EventProxy="eventProxy",F.LoadingAdapter="loadingAdapter",F.ContentFallbackAdapter="contentFallbackAdapter",F.InteractionHandler="interactionHandler",F.EventBusDebugger="eventBusDebugger",F.KpiColorPrioritizer="kpiColorPrioritizer",F.FormattersRegistry="formattersRegistry",F.DataSourceManager="dataSourceManager",T;var F})(),p=(()=>{return(F=p||(p={})).Root="root",F.DataSourceConfigComponentType="dataSourceConfigComponentType",F.TileDescriptionConfigComponentType="tileDescriptionConfigComponentType",F.DataSourceProviders="dataSourceProviders",F.Formatters="formatters",F.TileDescriptionBackgroundColors="tileDescriptionBackgroundColors",F.TileBackgroundColorRulesBackgroundColors="tileBackgroundColorRulesBackgroundColors",p;var F})(),v=(()=>{return(F=v||(v={})).Interactivity="interactivity",F.DisableTableColumnGeneration="disableTableColumnGeneration",v;var F})(),h=(()=>{return(F=h||(h={})).Structure="structure",F.Configuration="configuration",F.Data="data",h;var F})(),w=(()=>{return(F=w||(w={})).CRITICAL="critical",F.WARNING="warning",F.DEFAULT="default",w;var F})(),M=(()=>{return(F=M||(M={})).Unknown="0",F.Ok="200",F.Forbidden="403",F.NotFound="404",M;var F})()},95186:(re,W,l)=>{"use strict";l.d(W,{w:()=>d});var d=(()=>{return(a=d||(d={})).None="None",a.Right="Right",a.Bottom="Bottom",d;var a})()},88173:(re,W,l)=>{"use strict";l.d(W,{X:()=>e});var d=l(96899),a=l(62878);const e=[{componentType:l(24803).a.lateLoadKey,label:$localize`No Formatter`,dataTypes:{value:null}},{componentType:a.s.lateLoadKey,label:$localize`Link`,configurationComponent:"LinkConfiguratorComponent",dataTypes:{value:"label",link:"link"}},{componentType:d.C.lateLoadKey,label:$localize`Icon`,dataTypes:{value:"string"}}]},5357:(re,W,l)=>{"use strict";l.d(W,{hiK:()=>xi.h,p3D:()=>Qe.p,Fk3:()=>m.Fk,ay7:()=>ke.ay,PFv:()=>ke.PF,vXf:()=>Vi,tFi:()=>hc,XMI:()=>C.XM,wz0:()=>fc,NlZ:()=>mc,pPd:()=>Dc,MXM:()=>w.M,cY_:()=>Fn,dsi:()=>In,vHB:()=>vn,O5k:()=>Gi,TAb:()=>wi,gIB:()=>Vt,B:()=>G,lc0:()=>Ji,Ksf:()=>M,PIV:()=>Nt,AOA:()=>Ki,B5u:()=>m.B5,WEY:()=>m.WE,Cg1:()=>$i.C,ZhR:()=>Ce.Z,ufE:()=>j,Klf:()=>di,woB:()=>we.w,s9y:()=>ei.s,vB5:()=>ft,fp5:()=>Dt,mf:()=>C.mf,VXI:()=>C.VX,tSO:()=>C.tS,u1$:()=>C.u1,$uq:()=>C.$u,j4g:()=>C.j4,DJm:()=>C.DJ,Qpk:()=>po,Pi:()=>Mc,nYw:()=>m.nY,ntI:()=>Ui,xW5:()=>m.xW,khc:()=>ve,UAh:()=>ue.UA,qy4:()=>ue.qy,EMX:()=>Ge,CNH:()=>S.C,aDR:()=>Wt.a,g4s:()=>hi.g,PEA:()=>ti,aAT:()=>Ne,Car:()=>ue.C,CKZ:()=>Pe,D9N:()=>nt,L9g:()=>at,Usc:()=>At,Q$d:()=>tt,MOJ:()=>C.MO,zer:()=>yt,CyH:()=>Gt,niB:()=>m.ni,ACc:()=>m.AC,Muk:()=>m.Mu,$Ie:()=>_o,jFY:()=>Ye,xTe:()=>H.x,GE5:()=>Pc,Amp:()=>ai,j5E:()=>pt,LtV:()=>li,O9d:()=>Mt});var d=l(36895),a=l(72536),O=l(54195),e=l(94650);let R=(()=>{class n{constructor(t){this.changeDetector=t,this.defaultClasses="d-flex flex-column justify-content-center w-100 p-3",this.elementClass=""}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`}}return n.lateLoadKey="WidgetErrorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-error"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{image:"image",title:"title",description:"description",elementClass:"elementClass"},decls:6,vars:3,consts:[[3,"image"],[1,"widget-error__title"],[1,"d-flex","justify-content-center","text-center"]],template:function(t,i){1&t&&(e._UZ(0,"nui-image",0),e.TgZ(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._uU(5),e.qZA()),2&t&&(e.Q6J("image",i.image),e.xp6(3),e.Oqu(i.title),e.xp6(2),e.Oqu(i.description))},dependencies:[a.cuP],styles:[".widget-error__title[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center;margin-top:20px;margin-bottom:10px}"]}),n})(),A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,a.sF0,d.ez]}),n})();var T=l(77744),p=l(90433),v=l(29583),h=l(32815),w=l(18177),M=(()=>{return(n=M||(M={}))[n.URL=0]="URL",n[n.HTML=1]="HTML",M;var n})(),F=l(11481);const L=["anchor"];let G=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.document=i,this.domSanitizer=o,this.sanitized=!0,this.elementClass=""}ngOnInit(){this.validateAndApplyEmbeddedContent()}ngOnChanges(t){t.customEmbeddedContent&&!t.customEmbeddedContent.firstChange&&this.validateAndApplyEmbeddedContent()}validateAndApplyEmbeddedContent(){const t=this.sanitized&&this.sanitizeContext(this.mode===M.URL?e.q3G.URL:e.q3G.HTML);if(this.anchor.nativeElement.innerHTML="",this.mode===M.URL){const i=this.document.createElement("iframe");i.src=this.sanitized?t:this.customEmbeddedContent,i.width="100%",i.height="100%",this.anchor.nativeElement.appendChild(i)}else this.anchor.nativeElement.innerHTML=this.sanitized?t:this.customEmbeddedContent}sanitizeContext(t){var i;return this.domSanitizer.sanitize(t,null===(i=this.customEmbeddedContent)||void 0===i?void 0:i.trim())}}return n.lateLoadKey="EmbeddedContentComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(d.K0),e.Y36(F.H7))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-embedded-content"]],viewQuery:function(t,i){if(1&t&&e.Gf(L,7),2&t){let o;e.iGM(o=e.CRH())&&(i.anchor=o.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{mode:"mode",customEmbeddedContent:"customEmbeddedContent",sanitized:"sanitized",elementClass:"elementClass"},features:[e.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["anchor",""]],template:function(t,i){1&t&&e._UZ(0,"div",0,1)},encapsulation:2,changeDetection:0}),n})();var y=l(33816),z=l.n(y);function D(n,s){const{dataFieldIds:t}=n.properties||{};let i;return i=t?Object.keys(t).reduce((o,r)=>(o[r]=s[t[r]],o),{}):{value:s.value},i}var C=l(39973),m=l(65470),x=l(84080),k=l(46747);function X(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"a",4),e.GkF(2,5),e.qZA(),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(4);e.xp6(1),e.Q6J("href",t.widgetData.link,e.LSH),e.xp6(1),e.Q6J("ngTemplateOutlet",i)}}function q(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onInteraction())}),e.GkF(2,5),e.qZA(),e.BQk()}if(2&n){e.oxw();const t=e.MAs(4);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}function se(n,s){}function de(n,s){if(1&n){const t=e.EpF();e.ynx(0,15,16),e.TgZ(2,"div",17)(3,"span",18),e.YNc(4,se,0,0,"ng-template",19),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(1);return e.KtG(r.attached(o))}),e.qZA()(),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw(2);let o,r;e.Q6J("componentType",null==i.configuration||null==i.configuration.formatters||null==i.configuration.formatters.Value||null==i.configuration.formatters.Value.formatter?null:i.configuration.formatters.Value.formatter.componentType)("properties",i.formattersProperties.Value),e.xp6(3),e.Q6J("ngClass","IconFormatterComponent"===(null==i.configuration||null==i.configuration.formatters||null==i.configuration.formatters.Value||null==i.configuration.formatters.Value.formatter?null:i.configuration.formatters.Value.formatter.componentType)?"without-filter":"")("useZoom",!1)("scaleIN$",null==(o=i.getScaleBroker("value"))?null:o.out$)("scaleOUT$",null==(r=i.getScaleBroker("value"))?null:r.in$),e.xp6(1),e.Q6J("cdkPortalOutlet",t.portal)}}const pe=function(n){return{"background-color":n}},ne=function(n){return{color:n}};function le(n,s){if(1&n&&(e._UZ(0,"div",7),e.TgZ(1,"div",8)(2,"div",9)(3,"div",10)(4,"span",11),e._uU(5),e.qZA()(),e.YNc(6,de,5,7,"ng-container",12),e.TgZ(7,"div",13)(8,"span",14),e._uU(9),e.qZA()()()()),2&n){const t=e.oxw(),i=e.MAs(6);let o,r,c,g;e.ekj("nui-kpi-indicator--interactive",t.interactive),e.Q6J("ngStyle",e.VKq(18,pe,t.backgroundColor||(null==t.widgetData?null:t.widgetData.backgroundColor))),e.xp6(1),e.Q6J("ngStyle",e.VKq(20,ne,(null==t.widgetData?null:t.widgetData.textColor)||t.backgroundColor||(null==t.widgetData?null:t.widgetData.backgroundColor)||t.defaultColor)),e.xp6(2),e.Q6J("title",null==t.widgetData?null:t.widgetData.label),e.xp6(1),e.Q6J("useZoom",!1)("minScale",.5)("scaleIN$",null==(o=t.getScaleBroker("label"))?null:o.out$)("scaleOUT$",null==(r=t.getScaleBroker("label"))?null:r.in$),e.xp6(1),e.Oqu(null==t.widgetData?null:t.widgetData.label),e.xp6(1),e.Q6J("ngIf",null==t.configuration||null==t.configuration.formatters?null:t.configuration.formatters.Value)("ngIfElse",i),e.xp6(1),e.Q6J("title",null==t.widgetData?null:t.widgetData.units),e.xp6(1),e.Q6J("useZoom",!1)("scaleIN$",null==(c=t.getScaleBroker("units"))?null:c.out$)("scaleOUT$",null==(g=t.getScaleBroker("units"))?null:g.in$)("minScale",.5),e.xp6(1),e.Oqu(null==t.widgetData?null:t.widgetData.units)}}function Y(n,s){if(1&n&&(e.TgZ(0,"div",20)(1,"span",21),e._uU(2),e.qZA()()),2&n){const t=e.oxw();let i,o;e.Udp("font-size",null==t.widgetData?null:t.widgetData.fontSize),e.Q6J("title",null==t.widgetData?null:t.widgetData.value),e.xp6(1),e.Q6J("useZoom",!1)("scaleIN$",null==(i=t.getScaleBroker("value"))?null:i.out$)("scaleOUT$",null==(o=t.getScaleBroker("value"))?null:o.in$),e.xp6(1),e.hij(" ",null==t.widgetData?null:t.widgetData.value,"")}}let j=(()=>{class n{get interactive(){var t,i,o,r,c;return((null===(t=this.configuration)||void 0===t?void 0:t.interactive)||(null===(r=null===(o=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===o?void 0:o.getFeatureConfig(m.ni.Interactivity))||void 0===r?void 0:r.enabled))&&!z()(null===(c=this.widgetData)||void 0===c?void 0:c.value)||!1}constructor(t,i,o){this.changeDetector=t,this.dataSource=i,this.eventBus=o,this.busy=!1,this.elementClass="",this.defaultColor="var(--nui-color-bg-secondary)"}onInteraction(){this.interactive&&this.eventBus.getStream(C.b1).next({payload:{data:this.widgetData}})}getScaleBroker(t){if(this.syncValuesBroker)return this.syncValuesBroker.find(i=>i.id===t)}ngOnChanges(t){var i;if(t.configuration){const o=t.configuration.currentValue.formatters;o&&(this.formattersProperties=this.getFormatterProperties(o))}t.widgetData&&null!==(i=this.configuration)&&void 0!==i&&i.formatters&&(this.formattersProperties=this.getFormatterProperties(this.configuration.formatters))}getFormatterProperties(t){return Object.keys(t).reduce((r,c)=>{var g;const E=null===(g=t[c])||void 0===g?void 0:g.formatter;return E&&(r[c]={data:D(E,this.widgetData)}),r},{})}}return n.lateLoadKey="KpiComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(m.Fk,8),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-kpi"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",backgroundColor:"backgroundColor",syncValuesBroker:"syncValuesBroker",configuration:"configuration",busy:"busy"},features:[e.TTD],decls:7,vars:3,consts:[["nui-busy","",1,"w-100","h-100",3,"busy"],[4,"ngIf"],["kpiContent",""],["kpiValueRaw",""],[1,"nui-kpi-indicator",3,"href"],[3,"ngTemplateOutlet"],[1,"nui-kpi-indicator",3,"click"],[1,"nui-kpi-indicator__background",3,"ngStyle"],[1,"nui-kpi-indicator__text",3,"ngStyle"],[1,"nui-kpi-indicator__zoom-container"],[1,"nui-kpi-indicator__description",3,"title"],["nuiZoomContent","",3,"useZoom","minScale","scaleIN$","scaleOUT$"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties",4,"ngIf","ngIfElse"],[1,"nui-kpi-indicator__units",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$","minScale"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[1,"nui-kpi-indicator__value"],["nuiZoomContent","",3,"ngClass","useZoom","scaleIN$","scaleOUT$"],[3,"cdkPortalOutlet","attached"],[1,"nui-kpi-indicator__value",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,X,3,2,"ng-container",1),e.YNc(2,q,3,1,"ng-container",1),e.qZA(),e.YNc(3,le,10,22,"ng-template",null,2,e.W1O),e.YNc(5,Y,3,7,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("busy",i.busy),e.xp6(1),e.Q6J("ngIf",null==i.widgetData?null:i.widgetData.link),e.xp6(1),e.Q6J("ngIf",!(null!=i.widgetData&&i.widgetData.link)))},dependencies:[d.mk,d.O5,d.tP,d.PC,a.ERI,x.Pl,k.$,a.mEK],styles:[".nui-kpi-indicator[_ngcontent-%COMP%]{position:relative;display:block;height:100%;width:100%}.nui-kpi-indicator__background[_ngcontent-%COMP%]{height:100%;width:100%;background-color:var(--nui-color-bg-secondary,#fafafa);color:var(--nui-color-text-default,#111)}.nui-kpi-indicator__text[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;pointer-events:none}.nui-kpi-indicator__text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}.nui-kpi-indicator__value[_ngcontent-%COMP%]{font-size:54px;font-weight:600;margin:auto 0;min-width:100%;white-space:nowrap;display:flex;align-items:center;justify-content:center;height:100%;min-height:5px;max-height:200px}.nui-kpi-indicator__value[_ngcontent-%COMP%] > span.without-filter[_ngcontent-%COMP%]{filter:unset}.nui-kpi-indicator__units[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-bottom:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__units[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__description[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-top:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__description[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__zoom-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:30% 40% 30%;width:100%;height:100%}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]{cursor:pointer}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]:hover{filter:brightness(90%)}"],changeDetection:0}),n})();var ce=l(92954),oe=l(77579),Te=l(18989);let Ee=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.pizzagnaService=i,this.logger=o,this.destroyed$=new oe.x}ngOnChanges(t){(t.nodes||t.template)&&this.updateNodeConfigs({changesNodes:t.nodes,changesTemplate:t.template})}ngDoCheck(){this.checkNodeConfigs()&&(this.updateNodeConfigs(),this.changeDetector.detectChanges())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}trackByFn(t,i){return i.id}checkNodeConfigs(){const t=this.getNodes();if(!this.nodeComponentsConfigs||t.length!==this.nodeComponentsConfigs.length)return!0;for(let i=0;i<t.length;i++)if(this.pizzagnaService.getComponent(t[i])!==this.nodeComponentsConfigs[i])return!0;return!1}updateNodeComponentConfigs(){const t=this.getNodes();this.nodeComponentsConfigs=t&&t.map(i=>{const o=this.pizzagnaService.getComponent(i);if(typeof o>"u")throw new Error("No component with id '"+i+"' was defined in the configuration.");return o})}updateNodeConfigs(t){this.nodeConfigs=(0,Te.n)(this.nodeConfigs,this.getTemplateChangeForNodes(t),this.getNodeComponentsConfigs())}getNodeComponentsConfigs(){const t={currentValue:void 0,previousValue:this.nodeComponentsConfigs?[...this.nodeComponentsConfigs]:void 0};return this.updateNodeComponentConfigs(),t.currentValue=this.nodeComponentsConfigs,t}getTemplateChangeForNodes(t){const{changesNodes:i,changesTemplate:o}=t||{},r=c=>{var g;return c&&(null===(g=this.getNodes())||void 0===g?void 0:g.map(()=>c))};return{currentValue:r(o?o.currentValue:this.template),previousValue:i?this.template:r(o?o.previousValue:this.template)}}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.sBO),e.LFG(ce.p),e.LFG(a.mQy))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function ze(n,s){}function Ve(n,s){if(1&n){const t=e.EpF();e.ynx(0)(1,1,2),e.YNc(3,ze,0,0,"ng-template",3),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(2);return e.KtG(r.attached(o))}),e.BQk()()}if(2&n){const t=s.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let Ne=(()=>{class n extends Ee{constructor(t,i,o){super(t,i,o),this.nodes=[],this.direction="column",this.elementClass="",this.defaultClassNames="h-100 w-100 d-flex"}ngOnInit(){this.classNames=`${this.defaultClassNames} flex-${this.direction} ${this.elementClass}`}ngOnDestroy(){super.ngOnDestroy()}getNodes(){return this.nodes}}return n.lateLoadKey="StackComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(ce.p),e.Y36(a.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-stack"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{nodes:"nodes",direction:"direction",elementClass:"elementClass"},features:[e.qOj],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,Ve,4,5,"ng-container",0),2&t&&e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn)},dependencies:[d.sg,x.Pl,k.$],encapsulation:2}),n})();const ot=["gridItemsContainer"];function Ct(n,s){}function Ot(n,s){if(1&n){const t=e.EpF();e.ynx(0)(1,3,4),e.YNc(3,Ct,0,0,"ng-template",5),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(2);return e.KtG(r.attached(o))}),e.BQk()()}if(2&n){const t=s.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("properties",t.properties)("providers",t.providers),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}const ye=function(n){return{"prioritize-rows":n}};let it=(()=>{class n extends Ee{constructor(t,i,o,r){super(t,i,o),this.ngZone=r,this.nodes=[],this.direction="column",this.prioritizeGridRows=!1}ngAfterViewInit(){this.handleGridFlowOnResize()}ngOnDestroy(){var t;null===(t=this.tilesResizeObserver)||void 0===t||t.disconnect(),super.ngOnDestroy()}getNodes(){return this.nodes}handleGridFlowOnResize(){this.tilesResizeObserver=new ResizeObserver(()=>this.onResize()),this.ngZone.runOutsideAngular(()=>{this.tilesResizeObserver.observe(this.gridItemsContainer.nativeElement)})}onResize(){var t;if((null===(t=this.nodes)||void 0===t?void 0:t.length)<2)return;const i=this.gridItemsContainer.nativeElement.getBoundingClientRect(),{height:o,width:r}=i,c=o/r,g=gt(this.nodes.length);return c-.05>g&&!this.prioritizeGridRows?(this.prioritizeGridRows=!0,void this.changeDetector.detectChanges()):c+.05<g&&this.prioritizeGridRows?(this.prioritizeGridRows=!1,void this.changeDetector.detectChanges()):void 0}}return n.lateLoadKey="TilesComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(ce.p),e.Y36(a.mQy),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-tiles"]],viewQuery:function(t,i){if(1&t&&e.Gf(ot,7),2&t){let o;e.iGM(o=e.CRH())&&(i.gridItemsContainer=o.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{nodes:"nodes",direction:"direction"},features:[e.qOj],decls:3,vars:5,consts:[[1,"nui-grid-layout",3,"ngClass"],["gridItemsContainer",""],[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Ot,4,5,"ng-container",2),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(3,ye,i.prioritizeGridRows)),e.xp6(2),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn))},dependencies:[d.mk,d.sg,x.Pl,k.$],styles:[".nui-grid-layout[_ngcontent-%COMP%]{display:grid;height:100%;gap:10px;grid-template-columns:repeat(auto-fit,minmax(94.8px,1fr));grid-template-rows:repeat(auto-fit,minmax(15px,1fr));line-height:1.2}.nui-grid-layout.prioritize-rows[_ngcontent-%COMP%]{grid-auto-flow:column;grid-template-columns:minmax(1px,1fr)}.mobile[_nghost-%COMP%], .mobile   [_nghost-%COMP%]{min-height:160px}"]}),n})();const gt=n=>.25*n+.7;function ht(n,s){if(1&n&&(e.TgZ(0,"div",6),e._UZ(1,"nui-icon",7),e.TgZ(2,"span",8),e._uU(3),e.qZA()()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("icon",t.key),e.xp6(1),e.Q6J("title",t.value),e.xp6(1),e.Oqu(t.value)}}function It(n,s){1&n&&e._UZ(0,"nui-icon",9)}const vt=function(n,s){return{"widget-medium":n,"widget-small":s}};let ft=(()=>{class n{set widgetWidth(t){this.isMedium=t<=600&&t>480,this.isSmall=t<=480}constructor(t){this.changeDetector=t,this.navigated=new e.vpe}onButtonClick(){this.canNavigate&&this.navigated.emit(this)}}return n.lateLoadKey="ListGroupItemComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-list-group-item"]],hostAttrs:[1,"w-100"],inputs:{id:"id",label:"label",statuses:"statuses",canNavigate:"canNavigate",widgetWidth:"widgetWidth"},outputs:{navigated:"navigated"},decls:7,vars:8,consts:[[1,"list-group-item",3,"ngClass","click"],[1,"list-group-item__label",3,"title"],[1,"list-group-item__statuses"],[1,"statuses"],["class","status-column",4,"ngFor","ngForOf"],["icon","caret-right",4,"ngIf"],[1,"status-column"],[1,"mr-2",3,"icon"],[1,"status-column__label",3,"title"],["icon","caret-right"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onButtonClick()}),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,ht,4,3,"div",4),e.qZA(),e.YNc(6,It,1,0,"nui-icon",5),e.qZA()()),2&t&&(e.Q6J("ngClass",e.WLB(5,vt,i.isMedium,i.isSmall)),e.xp6(1),e.Q6J("title",i.label),e.xp6(1),e.Oqu(i.label),e.xp6(3),e.Q6J("ngForOf",i.statuses),e.xp6(1),e.Q6J("ngIf",i.canNavigate))},dependencies:[d.mk,d.sg,d.O5,a.oJW],styles:[".list-group-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.list-group-item__label[_ngcontent-%COMP%]{width:25%;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item__statuses[_ngcontent-%COMP%]{width:75%;display:flex;align-items:center}.list-group-item[_ngcontent-%COMP%]   .status-column[_ngcontent-%COMP%]{display:flex;width:75px;min-width:75px;max-width:100%;justify-content:flex-start;align-items:center;padding-right:10px}.list-group-item[_ngcontent-%COMP%]   .status-column__label[_ngcontent-%COMP%]{margin-left:5px;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]{justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%], .widget-medium[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]{justify-content:flex-end}.widget-small[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%], .widget-small[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{justify-content:space-between}"],changeDetection:0}),n})();var _e=l(82722);function Fe(n,s){if(1&n&&e._UZ(0,"nui-icon",9),2&n){const t=e.oxw();e.Q6J("icon",t.icon)("status",t.status)}}function Pt(n,s){if(1&n&&e._uU(0),2&n){const t=e.oxw();e.Oqu(t.status)}}function Ht(n,s){1&n&&e._UZ(0,"nui-icon",10)}let Dt=(()=>{class n{onButtonClick(){this.canNavigate&&this.navigated.emit(this)}constructor(t,i){this.changeDetector=t,this.eventBus=i,this.navigated=new e.vpe,this.searchTerm="",this.destroy$=new oe.x}ngOnInit(){this.eventBus.getStream(C.kV).pipe((0,_e.R)(this.destroy$)).subscribe(t=>{var i;this.searchTerm=null!==(i=t.payload)&&void 0!==i?i:"",this.changeDetector.markForCheck()})}}return n.lateLoadKey="ListLeafItemComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-list-leaf-item"]],hostAttrs:[1,"w-100"],inputs:{icon:"icon",status:"status",detailedUrl:"detailedUrl",label:"label",canNavigate:"canNavigate",url:"url"},outputs:{navigated:"navigated"},decls:12,vars:14,consts:[[1,"nui-list-leaf-item",3,"click"],[1,"nui-list-leaf-item__info-container"],[1,"nui-list-leaf-item__icon-container"],["class","mr-1",3,"icon","status",4,"ngIf","ngIfElse"],[1,"nui-list-leaf-item__description"],[1,"nui-text-ellipsis",3,"ngClass","innerHTML"],[1,"nui-text-secondary","nui-text-ellipsis",3,"innerHTML"],["statusTpl",""],["icon","caret-right",4,"ngIf"],[1,"mr-1",3,"icon","status"],["icon","caret-right"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onButtonClick()}),e.TgZ(1,"div",1)(2,"div",2),e.YNc(3,Fe,1,2,"nui-icon",3),e.qZA(),e.TgZ(4,"div",4),e._UZ(5,"a",5),e.ALo(6,"nuiHighlight"),e._UZ(7,"div",6),e.ALo(8,"nuiHighlight"),e.qZA(),e.YNc(9,Pt,1,1,"ng-template",null,7,e.W1O),e.qZA(),e.YNc(11,Ht,1,0,"nui-icon",8),e.qZA()),2&t){const o=e.MAs(10);e.xp6(3),e.Q6J("ngIf",i.icon)("ngIfElse",o),e.xp6(2),e.Q6J("ngClass",i.url?"":"not-active")("innerHTML",e.xi3(6,8,i.label,i.searchTerm),e.oJD),e.uIk("target",i.url?"_blank":null)("href",i.url||null,e.LSH),e.xp6(2),e.Q6J("innerHTML",e.xi3(8,11,i.detailedUrl,i.searchTerm),e.oJD),e.xp6(4),e.Q6J("ngIf",i.canNavigate)}},dependencies:[d.mk,d.O5,a.oJW,a.SgB],styles:[".nui-list-leaf-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nui-list-leaf-item__info-container[_ngcontent-%COMP%]{display:flex;height:40px}.nui-list-leaf-item__icon-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:30px}.nui-list-leaf-item__description[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr 1fr;grid-template-columns:1fr;max-width:100%}a.not-active[_ngcontent-%COMP%]{text-decoration:none;color:#111}"],changeDetection:0}),n})();function $t(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"button",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onBack())}),e.qZA(),e.TgZ(2,"button",3),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onHome())}),e.qZA(),e.TgZ(3,"div",4),e._uU(4),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("isRepeat",!0)("disabled",!(null!=t.navBarConfig&&null!=t.navBarConfig.buttons&&null!=t.navBarConfig.buttons.back&&t.navBarConfig.buttons.back.disabled)),e.xp6(1),e.Q6J("isRepeat",!0),e.xp6(2),e.Oqu(null==t.navBarConfig?null:t.navBarConfig.label)}}let Tt=(()=>{class n{constructor(t,i){this.changeDetector=t,this.eventBus=i,this.navigated=new e.vpe}onBack(){var t,i,o;this.navBarConfig&&this.eventBus.getStream(C.EC).next({payload:{back:null===(o=null===(i=null===(t=this.navBarConfig)||void 0===t?void 0:t.buttons)||void 0===i?void 0:i.back)||void 0===o?void 0:o.disabled}})}onHome(){this.eventBus.getStream(C.EC).next({payload:{reset:!0}})}}return n.lateLoadKey="ListNavigationBarComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-navigation-bar"]],inputs:{navBarConfig:"navBarConfig"},outputs:{navigated:"navigated"},decls:1,vars:1,consts:[["class","list-nav-bar",4,"ngIf"],[1,"list-nav-bar"],["nui-button","","type","button","displayStyle","action","icon","arrow-left",3,"isRepeat","disabled","click"],["nui-button","","type","button","displayStyle","action","icon","overview",3,"isRepeat","click"],[1,"list-nav-bar__label"]],template:function(t,i){1&t&&e.YNc(0,$t,5,4,"div",0),2&t&&e.Q6J("ngIf",i.navBarConfig&&!(null!=i.navBarConfig&&i.navBarConfig.isRoot))},dependencies:[d.O5,a.r0F],styles:[".list-nav-bar[_ngcontent-%COMP%]{width:100%;margin:2px 0;padding:0 15px;display:flex;align-items:center}.list-nav-bar__label[_ngcontent-%COMP%]{padding-left:5px;color:#1119}"],changeDetection:0}),n})();function dt(n,s){}const Me=function(){return["navigated"]};function K(n,s){if(1&n){const t=e.EpF();e.ynx(0,2,3),e.NdJ("output",function(){const r=e.CHM(t).item,c=e.oxw();return e.KtG(c.onListItemEvent(r))}),e.YNc(2,dt,0,0,"ng-template",4),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(1);return e.KtG(r.attached(o))}),e.BQk()}if(2&n){const t=s.item,i=e.MAs(1),o=e.oxw();e.Q6J("componentId",o.configuration.componentType)("componentType",o.configuration.componentType)("properties",o.getPropsFor(t))("outputs",e.DdM(5,Me)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let _=(()=>{class n{constructor(t,i,o,r){this.changeDetector=t,this.zone=i,this.host=o,this.eventBus=r,this.itemFormatterProps=new Map,this.destroy$=new oe.x}ngOnInit(){this.initResizeObserver()}ngOnChanges(t){var i;null!==(i=t.data)&&void 0!==i&&i.currentValue&&t.data.currentValue.forEach(o=>this.itemFormatterProps.set(o,this.calcItemProps(o)))}onListItemEvent(t){this.eventBus.getStream(C.EC).next({payload:t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.itemFormatterProps.clear()}getPropsFor(t){return Object.assign(Object.assign({},this.itemFormatterProps.get(t)),{widgetWidth:this.widgetWidth})}calcItemProps(t){return this.configuration?Object.assign(Object.assign({},D(this.configuration,t)),this.configuration.itemProperties):t}initResizeObserver(){const t=new a.Pa2(this.host,this.zone);t.debounceTime=10,t.ngAfterViewInit(),t.containerResize.pipe((0,_e.R)(this.destroy$)).subscribe(()=>{this.widgetWidth=this.host.nativeElement.offsetWidth})}}return n.lateLoadKey="ListWidgetComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-list-widget"]],hostAttrs:[2,"overflow","scroll"],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{data:"data",configuration:"configuration",elementClass:"elementClass"},features:[e.TTD],decls:3,vars:2,consts:[[3,"itemsSource","repeatItemTemplateRef"],["repeatItemTemplate",""],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){if(1&t&&(e._UZ(0,"nui-repeat",0),e.YNc(1,K,3,6,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("itemsSource",i.data)("repeatItemTemplateRef",o)}},dependencies:[x.Pl,k.$,a.$N6]}),n})();var f=l(82074),S=l(84828),$=l(96465),H=l(40494),ue=l(34357),Ce=l(78990),fe=l(52198);let ve=(()=>{class n extends fe.k{constructor(t){super(t,"ProportionalContentAggregatorsRegistryService")}getItemKey(t){return t.aggregatorType}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(a.mQy))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Le(n,s){}function Ke(n,s){if(1&n){const t=e.EpF();e.ynx(0,1,2),e.YNc(2,Le,0,0,"ng-template",3),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(1);return e.KtG(r.attached(o))}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",null==i.contentFormatter?null:i.contentFormatter.componentType)("properties",i.contentFormatterProperties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let Je=(()=>{class n{constructor(t,i,o,r){this.aggregatorRegistry=t,this.formatterRegistry=i,this.changeDetector=o,this.logger=r,this.destroy$=new oe.x}ngOnChanges(t){if(t.donutConfig){const i=t.donutConfig.currentValue,{formatter:o,aggregator:r}=i;r?.aggregatorType&&(this.updateAggregatorDefinition(r),this.updateAggregatedValue()),o?.componentType&&(this.contentFormatter=o,this.updateFormatterDefinition(o),this.updateFormatterProperties())}t.widgetData&&(this.updateAggregatedValue(),this.updateFormatterProperties()),t.chartAssist&&this.subscribeToChartAssist()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getFormatterProperties(t){var i;if(t)return Object.assign(Object.assign({},null===(i=this.contentFormatterDefinition)||void 0===i?void 0:i.properties),{data:D(t,{value:this.aggregatedValue})})}updateAggregatorDefinition(t){const i=this.aggregatorRegistry.getItem(t.aggregatorType);i?this.contentAggregatorDefinition=i:this.logger.warn(`No aggregator with key ${t.aggregatorType} found in registry.`)}updateFormatterDefinition(t){const i=this.formatterRegistry.getItem(t.componentType);i?this.contentFormatterDefinition=i:this.logger.warn(`No aggregator with key ${t.componentType} found in registry.`)}updateAggregatedValue(){var t;if(!this.widgetData||!this.contentAggregatorDefinition)return void this.logger.warn(`Can't aggregate value. Aggregator key: ${null===(t=this.contentAggregatorDefinition)||void 0===t?void 0:t.aggregatorType}. Data: ${this.widgetData}`);const i=this.getAggregatorProperties();this.aggregatedValue=this.contentAggregatorDefinition.fn(this.widgetData,Object.assign(Object.assign({},i),{activeMetricId:this.emphasizedSeriesId||i.activeMetricId})).toString()}updateFormatterProperties(){this.contentFormatterProperties=this.getFormatterProperties(this.contentFormatter)}getAggregatorProperties(){var t,i,o;return Object.assign(Object.assign({},null===(t=this.contentAggregatorDefinition)||void 0===t?void 0:t.properties),null===(o=null===(i=this.donutConfig)||void 0===i?void 0:i.aggregator)||void 0===o?void 0:o.properties)}subscribeToChartAssist(){var t,i,o;null===(t=this.chartAssistSubscription)||void 0===t||t.unsubscribe(),this.chartAssistSubscription=null===(o=null===(i=this.chartAssist)||void 0===i?void 0:i.chartAssistSubject)||void 0===o?void 0:o.pipe((0,_e.R)(this.destroy$)).subscribe(r=>{var c;this.emphasizedSeriesId=null===(c=r.payload)||void 0===c?void 0:c.seriesId,this.updateAggregatedValue(),this.updateFormatterProperties(),this.changeDetector.detectChanges()})}}return n.lateLoadKey="ProportionalDonutContentComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(ve),e.Y36(ue.UA),e.Y36(e.sBO),e.Y36(a.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-proportional-donut-content"]],inputs:{widgetData:"widgetData",donutConfig:"donutConfig",chartAssist:"chartAssist"},features:[e.TTD],decls:1,vars:1,consts:[["nuiComponentPortal","",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,Ke,3,3,"ng-container",0),2&t&&e.Q6J("ngIf",null==i.contentFormatter?null:i.contentFormatter.componentType)},dependencies:[d.O5,x.Pl,k.$],changeDetection:0}),n})();var Ue=l(64509),He=l.n(Ue),rt=l(50772),Be=l.n(rt);let ct=(()=>{class n{constructor(t){this.unitConversionService=t,this.transform=(i,o="generic",r=1e6)=>{const c="string"==typeof i?parseFloat(i):i;if(void 0===c||isNaN(c)||c<r&&"percent"!==o)return i?.toString()||"";const g=this.unitConversionService.convert(c,"bytes"===o?a.Qln.Bytes:a.Qln.Standard,1);return this.unitConversionService.getFullDisplay(g,o)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.CrH,16))},n.\u0275pipe=e.Yjl({name:"nuiDashboardUnitConversion",type:n,pure:!0}),n})();var Ge=(()=>{return(n=Ge||(Ge={})).DonutChart="DonutChart",n.PieChart="PieChart",n.VerticalBarChart="VerticalBarChart",n.HorizontalBarChart="HorizontalBarChart",Ge;var n})();let Qt=(()=>{class n{static buildChartSeries(t,i,o,r){return(t||[]).map(g=>Object.assign(Object.assign({},g),{accessors:i,renderer:o,scales:r}))}static getChartAttributes(t,i,o){const r=n.getChartTools(t),c={grid:r.gridFunction(),accessors:r.accessorFunction(i,o),renderer:r.rendererFunction(),scales:r.scaleFunction()};return r.preprocessor&&(c.preprocessor=r.preprocessor),c}static getChartTools(t){const i=c=>{const g=new h.UDz(c);return g.series.color=(E,P)=>{var Z;return null!==(Z=P.color)&&void 0!==Z?Z:c.get(E)},g};function o(c,g){const E=(0,h.Q6e)(this.config,c,g);return E.series.color=(P,Z)=>{var V;return null!==(V=Z.color)&&void 0!==V?V:c?.get(P)},E.data.value=P=>Number.isFinite(P)?P:P.value,E}return{[Ge.DonutChart]:{preprocessor:h.fy$,gridFunction:h.Y6Q,rendererFunction:()=>new h.E8N,accessorFunction:i,scaleFunction:h._N$},[Ge.PieChart]:{preprocessor:h.fy$,gridFunction:h.Y6Q,rendererFunction:()=>new h.bOg,accessorFunction:i,scaleFunction:h._N$},[Ge.HorizontalBarChart]:{config:{horizontal:!0},gridFunction(){return(0,h.skL)(this.config)},rendererFunction:()=>new h.Z7w({highlightStrategy:new h.TrQ("y")}),accessorFunction:o,scaleFunction(){return(0,h.CQI)(this.config)}},[Ge.VerticalBarChart]:{config:{horizontal:!1},gridFunction(){return(0,h.skL)(this.config)},rendererFunction:()=>new h.Z7w({highlightStrategy:new h.TrQ("x")}),accessorFunction:o,scaleFunction(){return(0,h.CQI)(this.config)}}}[t]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var we=l(95186);const _i=["gridContainer"];function B(n,s){}function J(n,s){if(1&n){const t=e.EpF();e.ynx(0)(1,12,13),e.YNc(3,B,0,0,"ng-template",14),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(2);return e.KtG(r.attached(o))}),e.BQk()()}if(2&n){const t=e.MAs(2),i=e.oxw(3);e.xp6(1),e.Q6J("componentType",(null==i.contentFormatter?null:i.contentFormatter.componentType)||"DonutContentRawFormatterComponent")("properties",i.contentFormatterProperties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function I(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"nui-proportional-donut-content",15),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("widgetData",t.widgetData)("donutConfig",null==t.configuration||null==t.configuration.chartOptions?null:t.configuration.chartOptions.donutContentConfig)("chartAssist",t.chartAssist)}}function b(n,s){if(1&n&&(e.TgZ(0,"nui-chart-donut-content",8)(1,"div",9)(2,"div",10),e.YNc(3,J,4,3,"ng-container",11),e.YNc(4,I,2,3,"ng-container",11),e.qZA()()()),2&n){const t=e.oxw(2);e.Q6J("plugin",t.donutContentPlugin),e.xp6(2),e.Q6J("useZoom",!1),e.xp6(1),e.Q6J("ngIf",!(null!=t.configuration&&null!=t.configuration.chartOptions&&t.configuration.chartOptions.donutContentConfig)),e.xp6(1),e.Q6J("ngIf",null==t.configuration||null==t.configuration.chartOptions?null:t.configuration.chartOptions.donutContentConfig)}}function U(n,s){if(1&n&&(e.TgZ(0,"div",5),e._UZ(1,"nui-chart",6),e.YNc(2,b,5,4,"nui-chart-donut-content",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("chart",t.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",t.donutContentPlugin)}}function Q(n,s){}const te=function(n){return{data:n}};function ae(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",22),e.ynx(2,12,23),e.YNc(4,Q,0,0,"ng-template",14),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(3);return e.KtG(r.attached(o))}),e.BQk(),e.qZA()()}if(2&n){const t=e.MAs(3),i=e.oxw().index,o=e.oxw(2);e.xp6(2),e.Q6J("componentType",o.legendFormatter.componentType)("properties",e.VKq(3,te,o.widgetData[i])),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function me(n,s){if(1&n&&e._UZ(0,"nui-icon",29),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("icon",i.seriesToIconMap[t.id])}}const Se=function(n){return{"nui-text-link-small link":n}};function Xe(n,s){if(1&n&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Se,i.interactive)),e.xp6(1),e.hij(" ",t.name," ")}}function bt(n,s){if(1&n&&(e.TgZ(0,"a",31),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.Q6J("href",t.link,e.LSH)("title",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function ui(n,s){if(1&n&&(e._UZ(0,"nui-rich-legend-tile",24),e.ALo(1,"nuiDashboardUnitConversion"),e.YNc(2,me,1,1,"nui-icon",25),e.TgZ(3,"div",26),e.YNc(4,Xe,2,4,"div",27),e.YNc(5,bt,2,3,"a",28),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("value",e.lcZ(1,7,i.computeLegendTileValue(t.data[0])))("unitLabel",i.legendUnitLabel)("color",i.chartAssist.palette.textColors.get(t.id))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",i.seriesToIconMap&&i.seriesToIconMap[t.id]),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link)}}function pi(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",19),e.NdJ("isSelectedChange",function(o){const c=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.chartAssist.toggleSeries(c.id,o))})("mouseenter",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.chartAssist.emphasizeSeries(r.id))})("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onInteraction(r))}),e.YNc(1,ae,5,5,"div",20),e.YNc(2,ui,6,9,"ng-template",null,21,e.W1O),e.qZA()}if(2&n){const t=s.$implicit,i=e.MAs(3),o=e.oxw(2);e.ekj("nui-proportional-widget__legend--interactive",o.interactive),e.Q6J("ngClass",(o.prioritizedGridRows.right||o.prioritizedGridRows.bottom)&&"description-min-width--unset")("isSelected",!o.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==o.chartAssist.renderStatesIndex[t.id]?null:o.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("ngIf",o.legendFormatter&&o.legendFormatter.componentType)("ngIfElse",i)}}const Ro=function(n){return[n]};function No(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"nui-legend",17),e.NdJ("mouseleave",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.chartAssist.resetVisibleSeries())}),e.YNc(2,pi,4,7,"nui-legend-series",18),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(5,Ro,t.legendShouldBeAlignedRight()?"scrollable":"legend-bottom")),e.xp6(1),e.Q6J("interactive",!1)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}function Ao(n,s){1&n&&(e.TgZ(0,"div",32),e._UZ(1,"nui-image",33),e.qZA())}const yo=function(n,s,t){return{"prioritize-rows__right":n,"prioritize-rows__bottom":s,"empty-grid":t}};let gi=(()=>{class n{get interactive(){var t,i,o,r;return(null===(t=this.configuration)||void 0===t?void 0:t.interactive)||(null===(r=null===(o=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===o?void 0:o.getFeatureConfig(m.ni.Interactivity))||void 0===r?void 0:r.enabled)||!1}constructor(t,i,o,r,c,g,E){this.changeDetector=t,this.ngZone=i,this.kvDiffers=o,this.eventBus=r,this.dataSource=c,this.logger=g,this.prioritizedGridRows={right:!1,bottom:!1},this.chartPalette=new h.syg((0,h.GUR)()),this.differ=this.kvDiffers.find(this.prioritizedGridRows).create(),this.unitConversionPipe=new ct(E)}computeLegendTileValue(t){var i,o;return null===(o=null===(i=this.accessors.data)||void 0===i?void 0:i.value)||void 0===o?void 0:o.call(i,t,0,null,null)}ngOnChanges(t){var i,o,r,c;const g=null===(o=null===(i=t.configuration)||void 0===i?void 0:i.currentValue)||void 0===o?void 0:o.chartColors,E=null===(c=null===(r=t.configuration)||void 0===r?void 0:r.previousValue)||void 0===c?void 0:c.chartColors;if((t.widgetData||!He()(g,E))&&this.updateChartColors(),t.configuration){const P=t.configuration.currentValue.chartOptions.type;P&&P!==(t.configuration.previousValue&&t.configuration.previousValue.chartOptions.type)&&(this.buildChart(P),this.widgetData&&this.updateChart()),this.legendFormatter=this.configuration.chartOptions.legendFormatter,this.contentFormatter=this.configuration.chartOptions.contentFormatter,this.chartFormatterComponentType=this.configuration.chartOptions.chartFormatterComponentType,this.getContentFormatterProperties(),this.changeDetector.markForCheck()}t.widgetData&&this.chartAssist&&(this.updateChart(),this.getContentFormatterProperties(),this.changeDetector.markForCheck())}ngAfterViewInit(){this.handleGridFlowOnResize()}ngOnDestroy(){var t,i;null===(t=this.proportionalWidgetResizeObserver)||void 0===t||t.disconnect(),null===(i=this.chartTypeSubscription$)||void 0===i||i.unsubscribe()}getContentFormatterProperties(){var t;this.contentFormatterProperties={data:this.widgetData,config:this.configuration,chartAssist:this.chartAssist,properties:null===(t=this.contentFormatter)||void 0===t?void 0:t.properties}}isDonutChart(){return this.configuration.chartOptions.type===Ge.DonutChart}isRadialChart(){return-1!==[Ge.DonutChart,Ge.PieChart].indexOf(this.configuration.chartOptions.type)}hasLegend(){return this.configuration.chartOptions.legendPlacement!==we.w.None}legendShouldBeAlignedRight(){return this.configuration.chartOptions.legendPlacement===we.w.Right}onInteraction(t){this.interactive&&this.eventBus.getStream(C.b1).next({payload:{data:t}})}buildChart(t){var i,o;this.donutContentPlugin=null;const{grid:r,accessors:c,renderer:g,scales:E,preprocessor:P}=Qt.getChartAttributes(t,null===(i=this.chartPalette)||void 0===i?void 0:i.standardColors);this.chartAssist=new h.doR(new h.kL2(r),P,this.chartPalette),this.renderer=g,this.accessors=c,this.scales=E,this.isDonutChart()&&(this.donutContentPlugin=new h.iM,this.chartAssist.chart.addPlugin(this.donutContentPlugin)),this.configuration.chartOptions.type===Ge.HorizontalBarChart?(this.scales.x.formatters.tick=Z=>this.unitConversionPipe.transform(Z),this.applyTickLabelMaxWidths()):this.configuration.chartOptions.type===Ge.VerticalBarChart&&(this.scales.y.formatters.tick=Z=>this.unitConversionPipe.transform(Z)),null===(o=this.chartTypeSubscription$)||void 0===o||o.unsubscribe(),this.chartTypeSubscription$=this.chartAssist.chart.getEventBus().getStream(h.q7O).subscribe(Z=>{const V=this.widgetData.find(ee=>ee.id===Z.data.seriesId);this.onInteraction(V)})}handleGridFlowOnResize(){this.proportionalWidgetResizeObserver=new ResizeObserver(()=>this.onResize()),this.ngZone.runOutsideAngular(()=>{this.proportionalWidgetResizeObserver.observe(this.gridContainer.nativeElement)})}applyTickLabelMaxWidths(){var t,i,o,r,c,g;const E=this.chartAssist.chart.getGrid().config().axis;E.left.tickLabel.maxWidth=null!==(o=null===(i=null===(t=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===t?void 0:t.maxWidth)||void 0===i?void 0:i.left)&&void 0!==o?o:n.TICK_LABEL_MAX_WIDTH,E.right.tickLabel.maxWidth=null!==(g=null===(c=null===(r=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===r?void 0:r.maxWidth)||void 0===c?void 0:c.right)&&void 0!==g?g:n.TICK_LABEL_MAX_WIDTH}onResize(){if(!this.isContainerInNoSwitchLayoutInterval()){switch(this.configuration.chartOptions.legendPlacement){case we.w.Bottom:this.prioritizedGridRows.bottom=this.containerHasRowLayoutWidth();break;case we.w.Right:this.prioritizedGridRows.right=this.containerHasRowLayoutWidth()}this.differ.diff(this.prioritizedGridRows)&&this.changeDetector.detectChanges()}}isContainerInNoSwitchLayoutInterval(){const t=this.gridContainer.nativeElement.getBoundingClientRect().width;return t>n.MAX_ROW_LAYOUT_SIZE-n.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2&&t<n.MAX_ROW_LAYOUT_SIZE+n.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2}containerHasRowLayoutWidth(){return this.gridContainer.nativeElement.getBoundingClientRect().width<n.MAX_ROW_LAYOUT_SIZE}updateChart(){this.chartAssist.update(Qt.buildChartSeries(this.widgetData,this.accessors,this.renderer,this.scales))}updateChartColors(){var t,i;let o;const r=null===(t=this.widgetData)||void 0===t?void 0:t.map(g=>g.color),c=this.configuration.chartColors;o=!this.configuration.prioritizeWidgetColors&&Be()(r)?this.getDataDriverColorProvider(this.widgetData):c?this.getConfigurationColorProvider(c):(0,h.GUR)(),this.chartPalette=new h.syg(o),this.buildChart(null===(i=this.configuration)||void 0===i?void 0:i.chartOptions.type),this.chartAssist&&(this.chartAssist.palette=this.chartPalette,this.updateChart())}getDataDriverColorProvider(t){let i;if(t?.map(r=>r.color).filter(r=>!!r).length===t.length){const r=t.reduce((c,g)=>(c[g.id]=g.color,c),{});i=new h.oki(r)}else{const r=t.filter(c=>c.color);this.logger.warn(`Not all series have colors set, setting default pallette. Current series color config: ${JSON.stringify(r)}`),i=(0,h.GUR)()}return i}getConfigurationColorProvider(t){var i;let o;return this.configuration.prioritizeWidgetColors&&this.widgetData&&(this.widgetData=this.widgetData.map(r=>{const c=Object.assign({},r);return c.color&&delete c.color,c})),Array.isArray(t)?o=new h.jpW(t):Object.keys(t).length===(null===(i=this.widgetData)||void 0===i?void 0:i.length)?o=new h.oki(t):(this.logger.warn(`Not all series have colors set, setting default pallette. Current series color config: ${JSON.stringify(t)}`),o=(0,h.GUR)()),o}}return n.lateLoadKey="ProportionalWidgetComponent",n.NO_SWITCH_LAYOUT_INTERVAL_SIZE=20,n.MAX_ROW_LAYOUT_SIZE=360,n.TICK_LABEL_MAX_WIDTH=75,n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(e.aQg),e.Y36(m.nY),e.Y36(m.Fk),e.Y36(a.mQy),e.Y36(a.CrH))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-proportional-widget"]],viewQuery:function(t,i){if(1&t&&e.Gf(_i,7),2&t){let o;e.iGM(o=e.CRH())&&(i.gridContainer=o.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",elementClass:"elementClass",seriesToIconMap:"seriesToIconMap"},features:[e.TTD],decls:5,vars:8,consts:[[1,"w-100","nui-chart-layout","flex-grow-1","p-3",3,"ngClass"],["gridContainer",""],["class","d-flex chart has-overlay",4,"ngIf"],["class","w-100 d-flex legend",3,"ngClass",4,"ngIf"],["class","mb-3 mt-3 d-flex align-items-center justify-content-center",4,"ngIf"],[1,"d-flex","chart","has-overlay"],[1,"w-100",3,"chart"],["class","nui-proportional-widget__chart-donut-content",3,"plugin",4,"ngIf"],[1,"nui-proportional-widget__chart-donut-content",3,"plugin"],[1,"h-100","w-100","d-flex","justify-content-center","align-items-center","text-center"],["nuiZoomContent","",1,"d-inline-block",3,"useZoom"],[4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal2","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"widgetData","donutConfig","chartAssist"],[1,"w-100","d-flex","legend",3,"ngClass"],[1,"w-100","m-auto",3,"interactive","orientation","mouseleave"],["class","proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","nui-proportional-widget__legend--interactive","isSelectedChange","mouseenter","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","click"],[4,"ngIf","ngIfElse"],["legendDefaultTile",""],["description",""],["componentPortal","nuiComponentPortal"],[3,"value","unitLabel","color","backgroundColor"],["legendTransclusion","","class","align-items-center",3,"icon",4,"ngIf"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["legendTransclusion","",1,"align-items-center",3,"icon"],[1,"description","description-primary",3,"ngClass"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"mb-3","mt-3","d-flex","align-items-center","justify-content-center"],["image","no-data-to-show"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,U,3,2,"div",2),e.YNc(3,No,3,7,"div",3),e.YNc(4,Ao,2,0,"div",4),e.qZA()),2&t&&(e.Q6J("ngClass",e.kEZ(4,yo,i.prioritizedGridRows.right,i.prioritizedGridRows.bottom,!(i.widgetData&&i.widgetData.length>0&&i.chartAssist))),e.xp6(2),e.Q6J("ngIf",i.widgetData&&i.widgetData.length>0&&i.chartAssist),e.xp6(1),e.Q6J("ngIf",i.hasLegend()&&i.chartAssist),e.xp6(1),e.Q6J("ngIf",!i.widgetData||0===i.widgetData.length||!i.chartAssist))},dependencies:[d.mk,d.sg,d.O5,h.FVX,h.kJo,h.wHi,h.xH4,h.kwD,a.oJW,a.cuP,x.Pl,k.$,a.mEK,Je,ct],styles:['.nui-proportional-widget__chart-donut-content[_ngcontent-%COMP%]{position:absolute}.nui-proportional-widget__legend--interactive[_ngcontent-%COMP%]{cursor:pointer!important}.has-overlay[_ngcontent-%COMP%]{overflow:auto}.nui-chart-layout[_ngcontent-%COMP%]{grid-template:"axis-label-left    axis-label-right    ." 0fr "chart              chart               legend" minmax(60%,auto) "axis-label-bottom  axis-label-bottom   ." 0fr "legend-bottom      legend-bottom       ." minmax(auto,min-content) / 1fr 1fr auto}.nui-chart-layout[_ngcontent-%COMP%]   .legend-bottom[_ngcontent-%COMP%]{overflow:auto;align-self:auto;padding-left:0}.prioritize-rows__right[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%], .prioritize-rows__bottom[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%]{max-width:unset;width:100%}.prioritize-rows[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{justify-self:start}.prioritize-rows__right[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend      legend       ." 40%}.prioritize-rows__bottom[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend-bottom      legend-bottom      ." 40%}.empty-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:1fr}.proportional-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}']}),n})();var hi=l(43397);let qi=(()=>{class n{constructor(){this.enabled=!0,this.delay=500}onHostMouseenter(){this.enabled&&(this.timeout=setTimeout(()=>{this.mousePresentSubject.next(!0)},this.delay))}onHostClick(){this.enabled&&this.mousePresentSubject.next(!0)}onHostMouseleave(){this.enabled&&(clearTimeout(this.timeout),this.mousePresentSubject.next(!1))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","nuiDelayedMousePresenceDetection",""]],hostBindings:function(t,i){1&t&&e.NdJ("mouseenter",function(){return i.onHostMouseenter()})("click",function(){return i.onHostClick()})("mouseleave",function(){return i.onHostMouseleave()})},inputs:{enabled:["nuiDelayedMousePresenceDetection","enabled"],mousePresentSubject:"mousePresentSubject",delay:"delay"}}),n})();var Mo=l(8817),Yt=l.n(Mo),Po=l(95835),Do=l.n(Po),en=l(61135),zt=l(56451),tn=l(39646),st=l(18505),Xt=l(39300),St=l(54004),mi=l(95698),nn=l(78372);let on=(()=>{class n{constructor(){this.searchDebounceTime=500}initWidget(t){this.widget=t,this.initSearch()}initSearch(){var t,i;this.defineSearch();const o=null===(i=null===(t=this.widget.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.featuresChanged;o&&o.pipe((0,_e.R)(this.widget.onDestroy$)).subscribe(()=>{this.defineSearch()})}registerSearch(){this.widget.dataSource&&this.widget.dataSource.registerComponent({search:{componentInstance:{getFilters:()=>({type:"search",value:this.widget.searchValue})}}})}deregisterSearch(){var t,i;this.widget.dataSource&&(null===(i=(t=this.widget.dataSource).deregisterComponent)||void 0===i||i.call(t,"search"))}defineSearch(){var t,i;const o=null===(t=this.widget.configuration)||void 0===t?void 0:t.searchConfiguration,r=null===(i=this.widget.dataSource.features)||void 0===i?void 0:i.getFeatureConfig("search");this.widget.isSearchEnabled=!(!o?.enabled||!r?.enabled),this.widget.isSearchEnabled?(this.widget.searchValue=o?.searchTerm||"",this.registerSearch(),this.searchDebounceTime=z()(o?.searchDebounce)?this.searchDebounceTime:o?.searchDebounce,this.watchSearchTerm()):this.deregisterSearch()}watchSearchTerm(){this.widget.searchTerm$.pipe((0,nn.b)(this.searchDebounceTime),(0,_e.R)(this.widget.onDestroy$)).subscribe(()=>{this.widget.pizzagnaService.setProperty({pizzagnaKey:m.xW.Configuration,componentId:this.widget.componentId,propertyPath:["configuration.searchConfiguration.searchTerm"]},this.widget.searchValue),this.widget.eventBus.getStream(C.RG).next({})})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),rn=(()=>{class n{constructor(){this.visibleItems=[]}initWidget(t){this.widget=t}initVirtualScroll(){this.widget.hasVirtualScroll?this.registerVirtualScroll():this.deregisterVirtualScroll()}registerVirtualScroll(){this.widget.dataSource&&this.widget.dataSource.registerComponent({[(0,a.$0I)("virtualScroll")]:{componentInstance:this.widget.viewportManager}})}deregisterVirtualScroll(){var t,i;this.widget.dataSource&&(null===(i=(t=this.widget.dataSource).deregisterComponent)||void 0===i||i.call(t,(0,a.$0I)("virtualScroll")))}subscribeToVirtualScroll(){this.widget.vscrollViewport&&((0,zt.T)(this.widget.vscrollViewport.renderedRangeStream,this.widget.tableUpdate$.pipe((0,St.U)(()=>{var t;return null===(t=this.widget.vscrollViewport)||void 0===t?void 0:t.getRenderedRange()}))).pipe((0,st.b)(t=>{this.visibleItems=this.widget.tableData.slice(t?.start,t?.end),this.widget.changeDetector.detectChanges()}),(0,_e.R)(this.widget.onDestroy$)).subscribe(),this.widget.viewportManager.setViewport(this.widget.vscrollViewport).observeNextPage$({pageSize:this.widget.range,emitFirstPage:!0}).pipe((0,Xt.h)(t=>{var i,o;return t.end>=(null!==(o=null===(i=this.widget.vscrollViewport)||void 0===i?void 0:i.getDataLength())&&void 0!==o?o:0)}),(0,st.b)(t=>this.widget.zone.run(()=>{this.widget.dataSource.page=t.end/(t.end-t.start),this.widget.eventBus.getStream(C.df).next({}),this.widget.changeDetector.detectChanges()})),(0,_e.R)(this.widget.onDestroy$)).subscribe())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var bo=l(84356);const Fo=["widgetTable"];function xo(n,s){1&n&&(e.TgZ(0,"div",10),e._UZ(1,"nui-image",11),e.qZA())}function Lo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"nui-search",13),e.NdJ("inputChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onSearchInputChanged(o))})("cancel",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onSearchInputChanged(o))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("value",t.searchValue)}}function Go(n,s){if(1&n&&(e.TgZ(0,"th",17),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.Udp("width",i.columnsWidthMap.get(t.id),"px")("max-width",i.columnsWidthMap.get(t.id),"px")("min-width",i.columnsWidthMap.get(t.id),"px"),e.Q6J("isColumnSortingDisabled",!t.sortable)("title",t.label)("tooltipText",i.headerTooltipsEnabled?t.label:void 0)("alignment",i.getColumnAlignment(t)),e.xp6(1),e.hij(" ",t.label," ")}}function wo(n,s){}function $o(n,s){if(1&n){const t=e.EpF();e.ynx(0,20,21),e.YNc(2,wo,0,0,"ng-template",22),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(1);return e.KtG(r.attached(o))}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw().$implicit,o=e.oxw().$implicit;e.Q6J("componentType",null==o.formatter?null:o.formatter.componentType)("properties",i[o.id]),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function Uo(n,s){if(1&n&&(e.TgZ(0,"td",18),e.YNc(1,$o,3,3,"ng-container",19),e.qZA()),2&n){const t=s.$implicit,i=e.oxw().$implicit,o=e.oxw();e.Udp("width",o.columnsWidthMap.get(i.id),"px")("max-width",o.columnsWidthMap.get(i.id),"px")("min-width",o.columnsWidthMap.get(i.id),"px"),e.Q6J("alignment",o.getColumnAlignment(i)),e.xp6(1),e.Q6J("ngIf",t[i.id]&&i.formatter)}}function zo(n,s){1&n&&(e.ynx(0,14),e.YNc(1,Go,2,11,"th",15),e.ynx(2),e.YNc(3,Uo,2,8,"td",16),e.BQk()()),2&n&&e.s9C("nuiColumnDef",s.$implicit.id)}function Bo(n,s){1&n&&e._UZ(0,"tr",23)}function Wo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"tr",24),e.NdJ("click",function(o){const c=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.onInteraction(c,o))}),e.qZA()}if(2&n){const t=e.oxw();e.uIk("role",t.interactive?"button":"")}}const ko=function(n){return{"virtual-scroll-disabled":n}};let fi=(()=>{class n{set range(t){this._range=t}get range(){return this.getTableScrollRange()}get headerTooltipsEnabled(){var t;return null===(t=this.configuration.headerTooltipsEnabled)||void 0===t||t}set scrollBuffer(t){if(t>100||t<0)throw new Error("Invalid scroll buffer provided. Required range 1..100");this._scrollBuffer=t}get interactive(){var t,i,o,r,c,g;return null!==(g=null!==(i=null===(t=this.configuration)||void 0===t?void 0:t.interactive)&&void 0!==i?i:null===(c=null===(r=null===(o=this.dataSource)||void 0===o?void 0:o.features)||void 0===r?void 0:r.getFeatureConfig(m.ni.Interactivity))||void 0===c?void 0:c.enabled)&&void 0!==g&&g}constructor(t,i,o,r,c,g,E,P,Z,V,ee,ge){this.eventBus=t,this.dataSource=i,this.widgetConfigurationService=o,this.changeDetector=r,this.pizzagnaService=c,this.viewportManager=g,this.zone=E,this.el=P,this.logger=Z,this.searchAddon=V,this.virtualScrollAddon=ee,this.formattersRegistryService=ge,this.indentFromTop=70,this.sortable=!0,this.delayedMousePresenceDetectionEnabled=!0,this.tableData=[],this.columns=[],this.columnsWidthMap=new Map,this.hasVirtualScroll=!0,this.isSearchEnabled=!1,this.searchTerm$=new oe.x,this.onDestroy$=new oe.x,this.tableUpdate$=new oe.x,this.mousePresent$=new en.X(!1),this.rowHeight=24,this._scrollBuffer=0,this.totalPages=0,this.lastPageFetched=0,this.sortableSet={},this.defaultColumnAlignment="left",this.idle=!1,this.isBusy=this.lastPageFetched!==this.totalPages}ngOnChanges(t){var i,o,r,c;if(t.dataFields&&!(null===(i=this.dataFields)||void 0===i)&&i.length&&this.setSortableSet(),(t.widgetData||t.configuration||t.dataFields)&&(this.updateTable(),null===(o=this.vscrollViewport)||void 0===o||o.checkViewportSize()),t.configuration){this.isSortByUpdated(t.configuration)&&(null===(r=t.configuration.currentValue.sortable)||void 0===r||r)&&this.onSortOrderChanged({direction:t.configuration.currentValue.sorterConfiguration.descendantSorting?a.aQE.descending:a.aQE.ascending,sortBy:t.configuration.currentValue.sorterConfiguration.sortBy});const g=Yt()(t,"configuration.currentValue.hasVirtualScroll",!0);this.hasVirtualScroll!==g&&(this.hasVirtualScroll=g,this.virtualScrollAddon.initVirtualScroll())}t.totalItems&&(this.totalPages=Math.floor((null!==(c=this.totalItems)&&void 0!==c?c:0)/this.range))}ngOnInit(){this.dataSource&&(this.setSortFilter(),this.registerSorter(),this.virtualScrollAddon.initWidget(this))}ngAfterViewInit(){var t;if(!this.dataSource)return;null===(t=this.dataSource.busy)||void 0===t||t.pipe((0,st.b)(o=>this.isBusy=o),(0,_e.R)(this.onDestroy$)).subscribe(),this.virtualScrollAddon.initVirtualScroll(),this.searchAddon.initWidget(this);const i=this.eventBus.getStream(C.pV).pipe((0,Xt.h)(o=>{var r,c;return(null===(c=null===(r=o.payload)||void 0===r?void 0:r.widgetId)||void 0===c?void 0:c.toString())===this.widgetConfigurationService.getWidget().id}),(0,St.U)(o=>{var r,c;return null!==(c=null===(r=o.payload)||void 0===r?void 0:r.height)&&void 0!==c?c:0}));i.pipe((0,_e.R)(this.onDestroy$)).subscribe(o=>{var r;this.tableContainerHeight=o-this.indentFromTop,null===(r=this.vscrollViewport)||void 0===r||r.checkViewportSize(),this.changeDetector.detectChanges()}),setTimeout(()=>{(0,zt.T)((0,tn.of)(this.range*this.rowHeight),i,(0,tn.of)(this.el.nativeElement.getBoundingClientRect().height)).pipe((0,Xt.h)(o=>!!o),(0,mi.q)(1),(0,st.b)(o=>{this.tableWidgetHeight=o,this.virtualScrollAddon.subscribeToVirtualScroll(),this.eventBus.getStream(C.j7).next({})})).subscribe()})}ngOnDestroy(){var t;this.onDestroy$.next(),this.onDestroy$.complete(),this.tableUpdate$.complete(),null===(t=this.searchTerm$)||void 0===t||t.complete(),this.pizzagnaService.setProperty({componentId:"bodyContent",propertyPath:["fallbackKey"],pizzagnaKey:m.xW.Data},void 0)}shouldDisplayTable(){var t;const i=this.columns.length>0,o=(null===(t=this.tableData)||void 0===t?void 0:t.length)>0;return this.isSearchEnabled||this.hasVirtualScroll&&(this.isBusy||this.idle)?i:i&&o}dataTrackBy(t,i){return i?i.id:t}columnTrackBy(t,i){return i.id}updateColumns(t){this.headers=t.columns.filter(r=>r.isActive).map(r=>r.id);const i=t.columns.every(r=>Boolean(r.width)),o=t.columns.map((r,c,g)=>{var E,P,Z,V;return this.columnsWidthMap.set(r.id,r.width),i&&this.columnsWidthMap.set(g[g.length-1].id,void 0),Object.assign(Object.assign({},r),{sortable:null===(V=this.sortableSet[null===(Z=null===(P=null===(E=r?.formatter)||void 0===E?void 0:E.properties)||void 0===P?void 0:P.dataFieldIds)||void 0===Z?void 0:Z.value])||void 0===V||V})});o.length>0&&i&&this.logger.warn("Cannot set width for all columns. Resetting last column width."),this.columns.length!==o.length?this.columns=[...o]:this.columns.forEach((r,c)=>{Object.assign(r,o[c],{})})}mapTableData(t,i,o){return o&&0!==o.length?t.map(r=>{const c=i.reduce((g,E)=>{var P,Z,V;const ee=null===(Z=null===(P=E.formatter)||void 0===P?void 0:P.properties)||void 0===Z?void 0:Z.dataFieldIds;if(!ee)return g;const ge=Object.keys(ee).reduce((ie,Oe)=>(ie[Oe]=r[ee[Oe]],ie),{});return g[E.id]=Object.assign({data:ge},Do()(null===(V=E.formatter)||void 0===V?void 0:V.properties,"dataFieldIds")),g},{});return c.__record=r,c}):(this.logger.warn("There are no data fields defined, so table data cannot be displayed."),[])}onSortOrderChanged(t){var i,o;this.sortedColumn=t;const r=this.columns.find(P=>P.id===t.sortBy);if(!r)return;const g=(null===(o=null===(i=r.formatter)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.dataFieldIds)?.value;if(!g)return;const E={sortBy:g,direction:t.direction};He()(E,this.sortFilter)||(this.sortFilter=E,this.flushTableData(),this.eventBus.getStream(C.RG).next({}))}onInteraction(t,i){this.interactive&&(i.target.closest((this.configuration.interactionIgnoredSelectors||a.hrM).join(","))||this.eventBus.getStream(C.b1).next({payload:{data:t.__record}}))}onSearchInputChanged(t){this.searchValue=t,this.searchTerm$.next("")}getColumnAlignment(t){var i,o,r;return null===(i=t?.formatter)||void 0===i||!i.componentType||this.formattersRegistryService.isEmpty?this.defaultColumnAlignment:((null===(o=this.formatters)||void 0===o?void 0:o.version)!==this.formattersRegistryService.stateVersion&&(this.formatters={items:this.formattersRegistryService.getItems().reduce((c,g)=>Object.assign(Object.assign({},c),{[g.componentType]:g}),{}),version:this.formattersRegistryService.stateVersion}),(null===(r=this.formatters.items[t.formatter.componentType])||void 0===r?void 0:r.alignment)||this.defaultColumnAlignment)}setSortFilter(){var t,i,o,r,c,g,E;if(this.configuration){const P=null===(t=this.configuration.sorterConfiguration)||void 0===t?void 0:t.sortBy,Z=null===(g=null===(c=null===(r=null===(o=null===(i=this.configuration.columns)||void 0===i?void 0:i.find(V=>V.id===P))||void 0===o?void 0:o.formatter)||void 0===r?void 0:r.properties)||void 0===c?void 0:c.dataFieldIds)||void 0===g?void 0:g.value;this.sortFilter={direction:null!==(E=this.configuration.sorterConfiguration)&&void 0!==E&&E.descendantSorting?a.aQE.descending:a.aQE.ascending,sortBy:Z}}}isSortByUpdated(t){var i;const o=null===(i=t.previousValue)||void 0===i?void 0:i.sorterConfiguration,r=t.currentValue.sorterConfiguration,c=o?.sortBy,g=r?.sortBy;return g?!(c===g&&r.descendantSorting===o.descendantSorting):Boolean(c)}updateTable(){this.widgetData&&this.dataFields&&this.configuration.columns&&(this.updateColumns(this.configuration),this.idle=!1,this.tableData=this.mapTableData(this.widgetData,this.configuration.columns,this.dataFields),this.tableUpdate$.next(),this.changeDetector.detectChanges())}registerSorter(){this.dataSource.registerComponent({sorter:{componentInstance:{getFilters:()=>({type:"sorter",value:this.sortFilter})}}})}setSortableSet(){this.sortableSet={},this.dataFields.forEach(t=>{var i;this.sortableSet[t.id]=null===(i=t.sortable)||void 0===i||i})}flushTableData(){this.idle=!0,this.tableData=[]}getTableScrollRange(){var t;const o=(null!==(t=this._scrollBuffer)&&void 0!==t?t:0)/100+1;return this._range?Math.floor(this._range*o):Math.floor(this.tableWidgetHeight/this.rowHeight*2*o)}}return n.lateLoadKey="TableWidgetComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(m.nY),e.Y36(m.Fk,8),e.Y36(bo.I,8),e.Y36(e.sBO),e.Y36(ce.p),e.Y36(a.zCP),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(a.mQy),e.Y36(on),e.Y36(rn),e.Y36(ue.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-widget"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Fo,5),e.Gf(T.N7,5),e.Gf(a.xhB,5,e.SBq)),2&t){let o;e.iGM(o=e.CRH())&&(i.table=o.first),e.iGM(o=e.CRH())&&(i.vscrollViewport=o.first),e.iGM(o=e.CRH())&&(i.tableRows=o)}},hostVars:4,hostBindings:function(t,i){2&t&&(e.Tol(i.elementClass),e.ekj("table-widget-fullwidth",!0))},inputs:{widgetData:"widgetData",componentId:"componentId",configuration:"configuration",dataFields:"dataFields",totalItems:"totalItems",indentFromTop:"indentFromTop",sortable:"sortable",delayedMousePresenceDetectionEnabled:"delayedMousePresenceDetectionEnabled",range:"range",elementClass:"elementClass"},features:[e._Bn([on,rn]),e.TTD],decls:11,vars:24,consts:[["class","h-100 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"nui-table-widget","d-flex","flex-column",3,"ngClass"],["class","mr-2 mb-2 flex-row",4,"ngIf"],[1,"flex-row","h-100","nui-table-widget-container",3,"nuiDelayedMousePresenceDetection","delay","mousePresentSubject"],["tableStickyHeader","",1,"calc-height",2,"height","calc(100% - 2px)",3,"itemSize","ngClass"],["nui-table","",1,"nui-table-widget__main",3,"reorderable","sortable","totalItems","dataSource","sortedColumn","trackBy","sortOrderChanged"],["widgetTable",""],[3,"nuiColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["nui-header-row","",4,"nuiHeaderRowDef"],["nuiRowDef","","cdkVirtualFor","",3,"nuiRowDefColumns","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"h-100","d-flex","justify-content-center","align-items-center"],["image","no-data-to-show"],[1,"mr-2","mb-2","flex-row"],[1,"unlimited-width","d-flex","justify-content-end","flex-grow-1",3,"value","inputChange","cancel"],[3,"nuiColumnDef"],["nui-header-cell","",3,"isColumnSortingDisabled","width","max-width","min-width","title","tooltipText","alignment",4,"nuiHeaderCellDef"],["nui-cell","",3,"width","max-width","min-width","alignment",4,"nuiCellDef"],["nui-header-cell","",3,"isColumnSortingDisabled","title","tooltipText","alignment"],["nui-cell","",3,"alignment"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["nui-header-row",""],["nui-row","","density","tiny",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,xo,2,0,"div",0),e.TgZ(1,"div",1),e.YNc(2,Lo,2,1,"div",2),e.TgZ(3,"div",3)(4,"cdk-virtual-scroll-viewport",4),e.ALo(5,"async"),e.TgZ(6,"table",5,6),e.NdJ("sortOrderChanged",function(r){return i.onSortOrderChanged(r)}),e.YNc(8,zo,4,1,"ng-container",7),e.YNc(9,Bo,1,0,"tr",8),e.YNc(10,Wo,1,1,"ng-template",9),e.qZA()()()()),2&t&&(e.Q6J("ngIf",!i.shouldDisplayTable()),e.xp6(1),e.Q6J("ngClass",i.shouldDisplayTable()?"h-100":"invisible"),e.xp6(1),e.Q6J("ngIf",i.isSearchEnabled),e.xp6(1),e.Q6J("nuiDelayedMousePresenceDetection",i.delayedMousePresenceDetectionEnabled)("delay",i.configuration.scrollActivationDelayMs)("mousePresentSubject",i.mousePresent$),e.xp6(1),e.Q6J("itemSize",i.rowHeight)("ngClass",e.VKq(22,ko,!1===e.lcZ(5,20,i.mousePresent$)&&i.delayedMousePresenceDetectionEnabled)),e.xp6(2),e.Q6J("reorderable",null==i.configuration?null:i.configuration.reorderable)("sortable",i.sortable)("totalItems",i.totalItems)("dataSource",i.virtualScrollAddon.visibleItems)("sortedColumn",i.sortedColumn)("trackBy",i.dataTrackBy),e.xp6(2),e.Q6J("ngForOf",i.columns)("ngForTrackBy",i.columnTrackBy),e.xp6(1),e.Q6J("nuiHeaderRowDef",i.headers),e.xp6(1),e.Q6J("nuiRowDefColumns",i.headers)("cdkVirtualForOf",i.tableData)("cdkVirtualForTrackBy",i.dataTrackBy))},dependencies:[d.mk,d.sg,d.O5,a.cuP,x.Pl,k.$,a.ac$,a.Pu4,a.wCL,a.l6o,a.ue9,a.xhB,a.Go6,a.Asp,a.tNH,a.yNF,a.Fpu,T.xd,T.x0,T.N7,a.gSk,qi,d.Ov],styles:[".nui-table-widget[_ngcontent-%COMP%]{overflow:auto;width:100%}.nui-table-widget[_ngcontent-%COMP%]   .display-contents[_ngcontent-%COMP%]{display:contents}.nui-table-widget__main[_ngcontent-%COMP%]{flex:1 1 auto}.nui-table-widget__paginator[_ngcontent-%COMP%]{margin-top:10px}.nui-table-widget__overflow[_ngcontent-%COMP%]{overflow-y:auto}.nui-table-widget[_ngcontent-%COMP%]   .nui-table-widget-container[_ngcontent-%COMP%]   .virtual-scroll-disabled.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{overflow:hidden!important}.mobile[_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%], .mobile   [_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%]{min-height:200px}.table-widget-fullwidth[_nghost-%COMP%]{width:calc(100% - 10px)}.invisible[_ngcontent-%COMP%]{height:0}@-moz-document url-prefix(){.nui-table-widget-container{margin-right:10px}}"],changeDetection:0}),n})();var sn=l(52409),Ti=l(15439),We=l.n(Ti);let Zo=(()=>{class n{convertToSerializable(t){return{startDatetime:t.startDatetime.format(),endDatetime:t.endDatetime.format(),selectedPresetId:t.selectedPresetId,title:t.title}}convertFromSerializable(t){return{startDatetime:We()(t.startDatetime,We().defaultFormat),endDatetime:We()(t.endDatetime,We().defaultFormat),selectedPresetId:t.selectedPresetId,title:t.title}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ci=(()=>{class n{constructor(t,i,o,r,c,g,E){this.pizzagnaService=t,this.timeframeService=i,this.tfSerialization=o,this.history=r,this.dataSource=c,this.eventBus=g,this.changeDetector=E,this.currentTimeframe=this.timeframeService.getTimeframeByPresetId("last7Days")}ngOnChanges(t){if(t.timeframe){let i=this.tfSerialization.convertFromSerializable(this.timeframe);i=this.timeframeService.reconcileTimeframe(i),i.selectedPresetId&&(i=this.timeframeService.getTimeframeByPresetId(i.selectedPresetId)),this.currentTimeframe=i,t.timeframe.isFirstChange()||this.eventBus.getStream(C.RG).next({})}t.minDate&&(this.minDateAsMoment=We()(this.minDate,We().defaultFormat)),t.maxDate&&(this.maxDateAsMoment=We()(this.maxDate,We().defaultFormat))}ngOnInit(){this.history.restart(this.currentTimeframe),this.eventBus.getStream(C.re).subscribe(t=>{if(!t.payload)throw new Error("Unable to set timeframe. Event payload is undefined");this.onTimeframeChange(this.history.save(this.tfSerialization.convertFromSerializable(t.payload)))}),this.dataSource&&this.dataSource.registerComponent({timeframe:{componentInstance:{getFilters:()=>({type:"timeframe",value:this.timeframeService.reconcileTimeframe(this.currentTimeframe)})}}})}onTimeframeChange(t){const i=this.timeframeService.reconcileTimeframe(t);i.selectedPresetId=i.selectedPresetId||"",this.timeframeService.isEqual(i,this.currentTimeframe)||this.pizzagnaService.setProperty({pizzagnaKey:m.xW.Data,componentId:this.componentId,propertyPath:["timeframe"]},this.tfSerialization.convertToSerializable(i))}}return n.lateLoadKey="TimeframeSelectionComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(ce.p),e.Y36(a.hYR),e.Y36(Zo),e.Y36(a.vpR),e.Y36(m.Fk,8),e.Y36(m.nY),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-timeframe-selection"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{componentId:"componentId",minDate:"minDate",maxDate:"maxDate",timeframe:"timeframe"},features:[e._Bn([a.vpR]),e.TTD],decls:6,vars:8,consts:[[3,"minDate","maxDate","timeFrame","historyIndex","timeFrameChange","undo","clear"],["icon","calendar",1,"pr-3"],["timeFrameSelection","",3,"presets"]],template:function(t,i){1&t&&(e.TgZ(0,"nui-time-frame-bar",0),e.NdJ("timeFrameChange",function(r){return i.onTimeframeChange(i.history.restart(r))})("undo",function(){return i.onTimeframeChange(i.history.undo())})("clear",function(){return i.onTimeframeChange(i.history.restart())}),e._UZ(1,"nui-icon",1),e._uU(2),e.ALo(3,"timeFrame"),e.TgZ(4,"nui-quick-picker",2),e._UZ(5,"nui-time-frame-picker"),e.qZA()()),2&t&&(e.Q6J("minDate",i.minDateAsMoment)("maxDate",i.maxDateAsMoment)("timeFrame",i.currentTimeframe)("historyIndex",i.history.index),e.xp6(2),e.hij(" ",e.lcZ(3,6,i.currentTimeframe)," "),e.xp6(2),e.Q6J("presets",i.timeframeService.currentPresets))},dependencies:[a.oJW,a.y0H,a.mtp,a.xlZ,a.aEp],styles:["[_nghost-%COMP%]{border-top:1px solid;border-top-color:var(--nui-color-line-default,#d9d9d9);border-bottom:1px solid;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),n})();function Vo(n,s){if("percent"===s)return{min:0,max:100};const t=n.filter(o=>{var r;return"percent"!==o.metricUnits&&(null===(r=o.data)||void 0===r?void 0:r.length)});if(0===t.length)return{min:-1,max:1};const i=t.flatMap(o=>{var r;return null!==(r=o.data)&&void 0!==r?r:[]});return i.reduce((o,r)=>({min:Math.min(o.min,r.y),max:Math.max(o.max,r.y)}),{min:i[0].y,max:i[0].y})}const an="var(--nui-color-brand-six)",ln="var(--nui-color-text-light)";var Bt=(()=>{return(n=Bt||(Bt={})).DataPoints="dataPoints",n.Series="series",n.Values="values",Bt;var n})(),nt=(()=>{return(n=nt||(nt={})).Time="time",n.TimeInterval="timeInterval",n.Linear="linear",nt;var n})(),Pe=(()=>{return(n=Pe||(Pe={})).Line="line",n.StackedArea="stackedArea",n.StackedPercentageArea="stackedPercentageArea",n.StackedBar="stackedBar",n.StatusBar="statusBar",Pe;var n})(),_t=(()=>{return(n=_t||(_t={}))[n.line=1]="line",n[n.counter=2]="counter",n[n.event=3]="event",n[n.alert=4]="alert",n[n.status=5]="status",n[n.multi=6]="multi",n[n.dpaWaitTime=7]="dpaWaitTime",_t;var n})(),je=(()=>{return(n=je||(je={})).None="none",n.Normalize="normalize",n.ChangePoint="changePoint",n.Difference="difference",n.Linear="linear",n.PercentileStd="percentileStd",n.Smoothing="smoothing",n.LoessStandardize="loessStandardize",n.Standardize="standardize",n.FloatingAverage="floatingAverage",je;var n})(),at=(()=>{return(n=at||(at={}))[n.ModernDashboard=0]="ModernDashboard",n[n.PerfstackApp=1]="PerfstackApp",at;var n})();const Ho={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"},Ko=n=>{const t=((n,s)=>new Intl.DateTimeFormat(We().locale(),s).format(n))(n,Ho).split(",");if(2!==t.length)throw new Error("Invalid timeseries date time format.");return`${t[0]} ${t[1]}`};let Ft=(()=>{class n{constructor(t){this.unitConversionService=t,this.unitConversionPipe=new ct(this.unitConversionService)}getScale(t,i,o){let r;switch(t.type){case nt.Time:r=new h.FBd,r.isTimeseriesScale=!0,r.formatters.title=Ko;break;case nt.Linear:r=new h.f$s,r.isTimeseriesScale=!0,r.formatters.tick=(c,g)=>{var E,P;return this.unitConversionPipe.transform(c,null!==(P=null===(E=t.properties)||void 0===E?void 0:E.axisUnits)&&void 0!==P?P:i,a.Qln.Standard)};break;case nt.TimeInterval:r=new h.lTH((0,Ti.duration)(1,"hour"))}return this.updateConfiguration(r,t,o),r}updateConfiguration(t,i,o){var r,c,g,E,P,Z,V;switch(i.type){case nt.Time:{const ee=null===(r=i.properties)||void 0===r?void 0:r.timeInterval;ee?.startDatetime&&ee?.endDatetime&&t.fixDomain([ee.startDatetime,ee.endDatetime]);break}case nt.TimeInterval:{const ee=null===(c=i.properties)||void 0===c?void 0:c.interval;if("number"==typeof ee){if(ee<=0)throw new Error("Interval value must be greater than zero.");t instanceof h.lTH&&t.interval((0,Ti.duration)(ee,"seconds"))}break}case nt.Linear:if(!(null===(g=i.properties)||void 0===g)&&g.axisUnits&&(t.scaleUnits=i.properties.axisUnits),o?.preset===Pe.StatusBar||o?.preset===Pe.StackedArea&&"percent"===(null===(E=i.properties)||void 0===E?void 0:E.axisUnits))return;if("percent"===(null===(P=i.properties)||void 0===P?void 0:P.axisUnits)&&t.setFixDomainValues&&t.setFixDomainValues([0,25,50,75,100]),"percent"!==(null===(Z=i.properties)||void 0===Z?void 0:Z.axisUnits)&&null!==(V=i.properties)&&void 0!==V&&V.domain&&t.setFixDomainValues){const ee=o?.preset===Pe.StackedBar?this.getStackedBarScaleDomain(i.properties.domain):this.getLineScaleDomain(i.properties.domain);t.setFixDomainValues(ee)}}}getStackedBarScaleDomain({min:t,max:i}){(0===i||i%4>0)&&(i=i+4-i%4);const o=Math.floor((i-t)/4);return[t,t+o,t+2*o,i-o,i]}getLineScaleDomain({min:t,max:i}){if(t>i){const c=t;t=i,i=c}Math.abs((i-t)/((i+t)/2))<.5&&(t-=.5*Math.abs(t),i+=.5*Math.abs(i)),0===t&&0===i&&(t=-1,i=1),Math.abs(i-t)<.04&&(i+=.04);const r=(i-t)/4;return function Jo(n,s=new Map([[1,2],[2,2],[3,2],[4,1]])){return n.map(t=>{var i;const o=Math.floor(Math.abs(t)).toString().length,r=null!==(i=s.get(o))&&void 0!==i?i:0;return+t.toFixed(r)})}([t,t+r,t+2*r,i-r,i])}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(a.CrH))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),dn=(()=>{class n{get seriesInteractive(){var t,i,o,r;return"series"===(null===(t=this.configuration)||void 0===t?void 0:t.interaction)||(null===(r=null===(o=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===o?void 0:o.getFeatureConfig(m.ni.Interactivity))||void 0===r?void 0:r.enabled)||!1}constructor(t,i,o){this.eventBus=t,this.timeseriesScalesService=i,this.dataSource=o,this.widgetData={},this.configuration={},this.scales={},this.destroy$=new oe.x,this.buildChart$=new oe.x,this.resetChart=!1,this.chartBuilt=!1,this.buildChart$.pipe((0,_e.R)(this.destroy$)).subscribe(()=>{this.chartBuilt=!0})}ngOnInit(){this.configuration.preset===Pe.Line&&this.widgetData&&this.widgetData.series&&this.widgetData.series.forEach(t=>t.rawData=t.data)}ngOnChanges(t){var i,o,r,c,g,E,P,Z;let V=!1,ee=!1;if(t.configuration){const ge=t.configuration.currentValue,ie=t.configuration.previousValue;if(ge?.preset!==ie?.preset&&(ee=!0),ge?.scales!==ie?.scales){const Oe=Object.keys(ge?.scales);for(const he of Oe){const Ie=null===(i=ge?.scales)||void 0===i?void 0:i[he],Re=null===(o=ie?.scales)||void 0===o?void 0:o[he];Ie&&(Ie?.type!==Re?.type||(null===(r=Ie?.properties)||void 0===r?void 0:r.axisUnits)!==(null===(c=Re?.properties)||void 0===c?void 0:c.axisUnits)?(this.scales[he]=this.timeseriesScalesService.getScale(Ie,ge.units,this.configuration),V=!0):Ie?.properties!==Re?.properties&&(this.timeseriesScalesService.updateConfiguration(this.scales[he],Ie,this.configuration),V=!0))}}}(ee||!this.chartBuilt)&&this.buildChart(),t.widgetData&&!t.widgetData.isFirstChange()&&(0===(null===(E=null===(g=this.widgetData)||void 0===g?void 0:g.series)||void 0===E?void 0:E.length)&&(this.resetChart=!0),this.widgetData&&this.widgetData.series&&(this.resetChart&&(null===(Z=null===(P=this.widgetData)||void 0===P?void 0:P.series)||void 0===Z?void 0:Z.length)>0&&(this.resetChart=!1,this.buildChart()),this.applyPreviousTransformer(t.widgetData.previousValue),V=!0)),V&&this.updateChartData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.buildChart$.complete()}applyPreviousTransformer(t){this.widgetData.series.forEach(i=>{var o;i.rawData=i.data,i.transformer=null===(o=t?.series.find(r=>r.id===i.id))||void 0===o?void 0:o.transformer,this.transformSeriesData(i)})}transformSeriesData(t){if(t.transformer&&t.rawData&&t.rawData.length>0)try{t.data=t.transformer(t.rawData,"percent"===t.metricUnits),this.updateYAxisDomain()}catch(i){t.transformer=void 0,t.data=t.rawData,console.error(i.message)}}updateYAxisDomain(){var t,i;const o=["y","yRight"];for(const r of o){const c=null===(t=this.configuration.scales)||void 0===t?void 0:t[r];c?.properties&&(c.properties.domain=Object.assign({},Vo(this.widgetData.series,null===(i=c?.properties)||void 0===i?void 0:i.axisUnits)),this.timeseriesScalesService.updateConfiguration(this.scales[r],c,this.configuration))}}removeMetric(t){this.eventBus.next(C.$d,{payload:{metricId:t,groupUniqueId:this.configuration.groupUniqueId}})}}return n.\u0275fac=function(t){e.$Z()},n.\u0275dir=e.lG2({type:n,inputs:{widgetData:"widgetData",configuration:"configuration"},features:[e.TTD]}),n})();function Qo(n,s){if(1&n&&e._UZ(0,"nui-rich-legend-tile",12),2&n){const t=e.oxw().$implicit,i=e.oxw().index,o=e.oxw(2);e.Q6J("value",o.chartAssist.getHighlightedValue(t,"y","value"))("backgroundColor",0===i?o.summaryLegendBcgColor:o.chartAssist.palette.standardColors.get(t.id))("color",0===i?o.summaryLegendColor:o.chartAssist.palette.textColors.get(t.id))}}function Xo(n,s){1&n&&e._UZ(0,"nui-icon",16),2&n&&e.Q6J("icon",s.$implicit)}function jo(n,s){if(1&n&&(e.TgZ(0,"div",13),e._UZ(1,"div",14),e.YNc(2,Xo,1,1,"nui-icon",15),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.Udp("background-color",i.getDataPointData(t,"color")),e.xp6(1),e.Q6J("ngIf",i.getDataPointData(t,"icon"))}}function qo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.removeMetric(o.id))}),e.qZA()}}function er(n,s){if(1&n&&(e.TgZ(0,"div",6)(1,"nui-legend",7)(2,"nui-legend-series",8),e.YNc(3,Qo,1,3,"nui-rich-legend-tile",9),e.YNc(4,jo,3,3,"div",10),e.YNc(5,qo,1,0,"button",11),e.qZA()()()),2&n){const t=s.$implicit,i=e.oxw().index,o=e.oxw(2);e.ekj("justify-content-center",o.configuration.type===o.timeseriesChartTypes.alert&&o.chartAssist.sparks.length>1)("last-legend-margin",o.configuration.type===o.timeseriesChartTypes.alert&&i>0&&i===o.chartAssist.sparks.length-1)("layout-fixed-legend",null==o.configuration.gridConfig?null:o.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("active",o.chartAssist.isLegendActive),e.xp6(1),e.Q6J("descriptionPrimary",t.legendDescriptionPrimary)("descriptionSecondary",o.getDescriptionSecondary(t,i)),e.xp6(1),e.Q6J("ngIf",o.configuration.type===o.timeseriesChartTypes.alert),e.xp6(1),e.Q6J("ngIf",o.isStatusChart()),e.xp6(1),e.Q6J("ngIf",o.displayDeleteButton())}}function tr(n,s){if(1&n&&(e.TgZ(0,"div",3),e._UZ(1,"nui-chart",4),e.YNc(2,er,6,12,"div",5),e.qZA()),2&n){const t=s.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("chart",t.chart)("nuiChartCollectionId",i.collectionId),e.xp6(1),e.Q6J("ngIf",(null==t.chartSeriesSet?null:t.chartSeriesSet.length)>0&&t.chartSeriesSet[0])}}function ir(n,s){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,tr,3,3,"div",2),e.qZA()),2&n){const t=e.oxw();e.ekj("layout-fixed",null==t.configuration.gridConfig?null:t.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.sparks)("ngForTrackBy",t.chartAssist.trackByFn)}}let Oi=(()=>{class n extends dn{constructor(t,i,o,r,c){super(c,o,i),this.iconService=t,this.timeseriesScalesService=o,this.changeDetector=r,this.eventBus=c,this.collectionId=(0,a.VjN)("timeseries-status-charts"),this.chartUpdate$=new oe.x,this.timeseriesChartTypes=_t,this.summaryLegendBcgColor=an,this.summaryLegendColor=ln}ngOnInit(){}getDataPointData(t,i){var o;const r=null===(o=this.chartAssist.highlightedDataPoints[t.id])||void 0===o?void 0:o.data;return r?r[i]:t.data.length>0?t.data[t.data.length-1][i]:void 0}buildChart(){var t;this.buildChart$.next(),this.chartAssist=new h.ruA,this.accessors=(0,h.s_I)(this.chartAssist.palette.standardColors),this.accessors.data.color=(o,r,c,g)=>typeof o.color>"u"?"var(--nui-color-semantic-unknown)":o.color,this.accessors.data.thickness=o=>typeof o.thick>"u"||o.thick?h.Z7w.THICK:h.Z7w.THIN,this.accessors.data.marker=o=>o.icon?this.iconService.getIconResized(this.iconService.getIconData(o.icon).code,8):void 0,this.accessors.data.y=o=>o.value,this.renderer=new h.Z7w({highlightStrategy:(null===(t=this.configuration)||void 0===t?void 0:t.projectType)===at.PerfstackApp?new h.FoF("x"):new h.Pkp("x"),pointerEvents:!1}),this.setGridConfigFromConfiguration(this.chartAssist.gridConfig),this.setGridConfigFromConfiguration(this.chartAssist.lastGridConfig),this.scales.y=new h.jS7,this.scales.y.fixDomain(h.s1E.STATUS_DOMAIN),this.scales.y.isTimeseriesScale=!0,this.scales.yRight&&(this.scales.yRight=this.scales.y)}updateChartData(){var t,i,o,r,c,g,E;const{gridConfig:P,lastGridConfig:Z}=this.chartAssist;P.axis.bottom.visible=!(null!==(t=this.configuration)&&void 0!==t&&t.hasAdjacentChart),Z.axis.bottom.visible=!(null!==(i=this.configuration)&&void 0!==i&&i.hasAdjacentChart),P.borders.bottom.className=null!==(o=this.configuration)&&void 0!==o&&o.hasAdjacentChart?"nui-chart-border":"nui-chart-border nui-chart-border--thick",Z.borders.bottom.className=null!==(r=this.configuration)&&void 0!==r&&r.hasAdjacentChart?"nui-chart-border":"nui-chart-border nui-chart-border--thick",this.chartUpdate$.next();let V=this.widgetData.series;1===V.length&&V[0].id===(null===(c=this.widgetData.summarySerie)||void 0===c?void 0:c.id)&&(V=[]);const ge=[...this.widgetData.summarySerie?[this.widgetData.summarySerie]:[],...V].map(ie=>Object.assign(Object.assign({},ie),{data:this.transformData(ie.data,this.scales.x instanceof h.lTH),accessors:this.accessors,renderer:this.renderer,scales:this.scales}));this.chartAssist.update(ge),this.configuration.enableZoom&&(this.chartAssist.sparks.forEach((ie,Oe)=>{var he,Ie,Re,be,lt;(null===(he=this.configuration)||void 0===he?void 0:he.projectType)===at.PerfstackApp?null!==(Ie=ie?.chart)&&void 0!==Ie&&Ie.hasPlugin(h.F7W)||null===(Re=ie?.chart)||void 0===Re||Re.addPlugin(this.zoomPlugins[Oe]):null!==(be=ie?.chart)&&void 0!==be&&be.hasPlugin(h.Rbc)||null===(lt=ie?.chart)||void 0===lt||lt.addPlugin(new h.Rbc({enableExternalEvents:!0}))}),null===(g=this.chartAssist.sparks[0].chart)||void 0===g||g.getEventBus().getStream(h.bdF).pipe((0,_e.R)((0,zt.T)(this.chartUpdate$,null===(E=this.chartAssist.sparks[0].chart)||void 0===E?void 0:E.eventBus.getStream(h.wu_),this.buildChart$))).subscribe(ie=>{const Oe=ie.data,he=Oe[Object.keys(Oe)[0]];this.eventBus.getStream(C.re).next({payload:{startDatetime:he[0],endDatetime:he[1],selectedPresetId:void 0}})}))}transformData(t,i){const o=[];return t.forEach((r,c)=>{(i||t.length-1!==c)&&o.push({start:r.x,end:i?r.x:t[c+1].x,status:r.y,color:r.color,thick:r.thick,icon:r.icon,value:r.y})}),o}setGridConfigFromConfiguration(t){var i,o,r;const c=this.configuration;!(null===(i=c.gridConfig)||void 0===i)&&i.xAxisTicksCount&&(t.axis.bottom.approximateTicks=c.gridConfig.xAxisTicksCount),t.dimension.marginLocked&&!(null===(o=c.gridConfig)||void 0===o)&&o.sideMarginLocked&&(t.dimension.marginLocked.left=!0,t.dimension.marginLocked.right=!0),null!==(r=c.gridConfig)&&void 0!==r&&r.sideMargin&&(t.dimension.margin.left=c.gridConfig.sideMargin,t.dimension.margin.right=c.gridConfig.sideMargin)}displayDeleteButton(){return!!this.configuration.allowLegendMenu&&this.configuration.projectType===at.PerfstackApp}isStatusChart(){var t;return(null===(t=this.configuration)||void 0===t?void 0:t.type)!==_t.alert}getDescriptionSecondary(t,i){return this.isStatusChart()||0===i?t.legendDescriptionSecondary:""}}return n.lateLoadKey="StatusChartComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(a.C6t),e.Y36(m.Fk,8),e.Y36(Ft),e.Y36(e.sBO),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-status-bar-chart"]],features:[e.qOj],decls:1,vars:1,consts:[["class","status-bar-chart",3,"layout-fixed",4,"ngIf"],[1,"status-bar-chart"],["class","d-flex",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex"],[1,"d-flex","flex-grow-1",3,"chart","nuiChartCollectionId"],["class","d-flex flex-column pl-2",3,"justify-content-center","last-legend-margin","layout-fixed-legend",4,"ngIf"],[1,"d-flex","flex-column","pl-2"],[1,"status-bar-chart__legend",3,"active"],[3,"descriptionPrimary","descriptionSecondary"],[3,"value","backgroundColor","color",4,"ngIf"],["class","status-bar-chart__legend__tile d-flex justify-content-center align-items-center",4,"ngIf"],["nui-button","","legendMenu","","icon","remove","type","button","displayStyle","action",3,"click",4,"ngIf"],[3,"value","backgroundColor","color"],[1,"status-bar-chart__legend__tile","d-flex","justify-content-center","align-items-center"],[1,"w-100","h-100","status-bar-chart__legend__tile__background"],["class","status-bar-chart__legend__tile__icon",3,"icon",4,"ngIf"],[1,"status-bar-chart__legend__tile__icon",3,"icon"],["nui-button","","legendMenu","","icon","remove","type","button","displayStyle","action",3,"click"]],template:function(t,i){1&t&&e.YNc(0,ir,2,4,"div",0),2&t&&e.Q6J("ngIf",i.chartAssist)},dependencies:[d.sg,d.O5,a.r0F,h.FVX,h.kJo,h.wHi,h.xH4,h.VMb,a.oJW],styles:[".status-bar-chart__legend__tile[_ngcontent-%COMP%]{width:60px;position:relative}.status-bar-chart__legend__tile__background[_ngcontent-%COMP%]{position:absolute;opacity:.4}.status-bar-chart__legend__tile__icon[_ngcontent-%COMP%]{position:absolute}[_nghost-%COMP%]     .description-container{flex-grow:1}nui-legend-series[_ngcontent-%COMP%]:hover{background-color:#f2f2f2;max-width:100%}.layout-fixed-legend[_ngcontent-%COMP%]{max-width:250px;min-width:250px;padding-left:8px!important}.layout-fixed-legend[_ngcontent-%COMP%]   nui-legend[_ngcontent-%COMP%]{margin:0!important;width:100%}.last-legend-margin[_ngcontent-%COMP%]{justify-content:start!important;margin-top:7px}"]}),n})();var nr=l(90733),ut=l.n(nr);function or(n,s){const t=ut()(n),i=n.length,o={x:[],y:[]};return t.forEach(g=>{o.x.push(g.x.valueOf()),o.y.push(g.y)}),function r(g){const E=[];let P,Z,V=0;for(let ee=0;ee<i;ee++){if(ee===i-1){E.push(V);break}P=g[ee+1],Z=g[ee],V=P-Z,s&&(V=Math.abs(V)),E.push(V)}return E}(o.y).forEach((g,E)=>{t[E].y=g}),t}var Rt=l(34978);function Ii(n){let s=n.length,t=-1;for(;++t<s;)if(!isFinite(n[t]))return!1;return!0}function sr(n){let s=n.length,t=0;for(;++t<s;)if(n[t-1]>=n[t])return!1;return!0}function ar(n){return(n=1-n*n*n)*n*n}function lr(n,s,t,i){const o=i[0],c=cn(s,i[1]);if(c<n.length&&n[c]-n[t]<n[t]-n[o]){const g=cn(s,o);i[0]=g,i[1]=c}}function cn(n,s){let t=s+1;for(;t<n.length&&0===n[t];)t++;return t}function dr(n){return function cr(n,s){let t=(n=n.slice().sort(_r)).length-1;return s.map(function(i){if(0===i)return n[0];if(1===i)return n[t];let o=1+i*t,r=Math.floor(o),c=o-r,g=n[r-1];return 0===c?g:g+c*(n[r]-g)})}(n,[.5])[0]}function _r(n,s){return n-s}function vi(n,s){const t=ut()(n),i={x:[],y:[]};return t.forEach(r=>{i.x.push(r.x.valueOf()),i.y.push(r.y)}),function rr(){let n=.3,s=2,t=1e-12;function i(o,r,c){let E,g=o.length;if(g!==r.length)throw new Error("Mismatched array lengths");if(0===g)throw new Error("At least one point required.");if(arguments.length<3)for(c=[],E=-1;++E<g;)c[E]=1;if(Ii(o),Ii(r),Ii(c),sr(o),1===g)return[r[0]];if(2===g)return[r[0],r[1]];const P=Math.floor(n*g);if(P<2)throw new Error("Bandwidth too small.");const Z=[],V=[],ee=[];for(E=-1;++E<g;)Z[E]=0,V[E]=0,ee[E]=1;let ge=-1;for(;++ge<=s;){const ie=[0,P-1];let Oe;for(E=-1;++E<g;){Oe=o[E],E>0&&lr(o,c,E,ie);const be=ie[0],lt=ie[1];let Kt=0,fo=0,To=0,Co=0,Oo=0,bc=Math.abs(1/(o[o[E]-o[be]>o[lt]-o[E]?be:lt]-Oe));for(let wt=be;wt<=lt;++wt){let ci=o[wt],So=r[wt],Xi=ar((wt<E?Oe-ci:ci-Oe)*bc)*ee[wt]*c[wt],ji=ci*Xi;Kt+=Xi,fo+=ji,To+=ci*ji,Co+=So*Xi,Oo+=So*ji}const Jt=fo/Kt,Io=Co/Kt,Fc=Oo/Kt,vo=To/Kt,Eo=Math.sqrt(Math.abs(vo-Jt*Jt))<t?0:(Fc-Jt*Io)/(vo-Jt*Jt);Z[E]=Eo*Oe+(Io-Eo*Jt),V[E]=Math.abs(r[E]-Z[E])}if(ge===s)break;const he=dr(V);if(Math.abs(he)<t)break;let Ie,Re;for(E=-1;++E<g;)Ie=V[E]/(6*he),ee[E]=Ie>=1?0:(Re=1-Ie*Ie)*Re}return Z}return i.bandwidth=function(o){return arguments.length?(n=o,i):o},i.robustnessIterations=function(o){return arguments.length?(s=o,i):o},i.accuracy=function(o){return arguments.length?(t=o,i):o},i}().bandwidth(.1)(i.x,i.y).forEach((r,c)=>{t[c].y=r}),t}function ur(n,s){var t,i,o,r;let c=ut()(n);c=vi(c);let P,V,ee,ge,Z=0,ie=[],Oe=[],he=!0,Ie=0,Re=19,be=20,lt=be+Re;for(;he;){he=!1,ie=[],Oe=[];for(let Ze=Ie;Ze<=Re;Ze++)ie.push(n[Ze].y);for(let Ze=be;Ze<=lt;Ze++)Oe.push(n[Ze].y);if(Z=null!==(t=Rt.J69(ie))&&void 0!==t?t:0,ee=null!==(i=Rt.J69(Oe))&&void 0!==i?i:0,V=null!==(o=Rt.P3(ie))&&void 0!==o?o:0,V<1&&(V=1),ge=null!==(r=Rt.P3(Oe))&&void 0!==r?r:0,ge<1&&(ge=1),P=pr(Z,ee,V,ge,ie.length,Oe.length,1.729),P>1.729){for(let Ze=Ie;Ze<=Re;Ze++)c[Ze].y=Z;Ie=be}Re=lt,Re+20<n.length?(he=!0,be=Re+1,lt=be+20-1):Re=n.length-1}for(let Ze=Ie;Ze<=Re;Ze++)c[Ze].y=Z;return c}function pr(n,s,t,i,o,r,c){const g=n-s,E=Math.pow(t,2)/o+Math.pow(i,2)/r;let Z=g/Math.sqrt(E);return Z>c&&n<s+2*i&&n>s-2*i&&s<n+2*t&&s>n-2*t&&(Z=0),Math.abs(Z)}function gr(n,s){const t=ut()(n);return t.forEach((o,r)=>{t[r].y=function i(o,r){let c=0,g=0;const E=We()(o[r].x);for(;r>=0&&E.diff(We()(o[r].x),"minutes")<=60;)g++,c+=o[r].y,r--;return c/g}(t,r)}),t}function Ei(n,s){const t=ut()(n),i={x:[],y:[]};return t.forEach(c=>{i.x.push(c.x.valueOf()),i.y.push(c.y)}),function r(c){const g=Math.max(...c),E=Math.min(...c);return c.map(g===E?P=>0:P=>(P-E)/(g-E))}(i.y).forEach((c,g)=>{t[g].y=100*c}),t}function hr(n,s){const t=ut()(n),i={x:[],y:[]};return t.forEach(c=>{i.x.push(c.x.valueOf()),i.y.push(c.y)}),function o(c,g){let E=0,P=0,Z=0,V=0,ee=0,ge=0,ie=0;if(c.length!==g.length)throw new Error("The x and y data arrays need to be the same length");if(0===c.length)throw new Error("There's no data to work with");for(let be=0;be<c.length;be++)ge=c[be],ie=g[be],E+=ge,P+=ie,V+=Math.pow(ge,2),Z+=ge*ie,ee++;const Oe=(ee*Z-E*P)/(ee*V-E*E),he=P/ee-Oe*E/ee,Ie=[],Re=[];for(let be=0;be<c.length;be++)ge=c[be],ie=ge*Oe+he,Ie.push(ge),Re.push(ie);return Re}(i.x,i.y).forEach((c,g)=>{t[g].y=c}),t}function _n(n,s){let t=ut()(n);const i={x:[],y:[]};return t.forEach(c=>{i.x.push(c.x.valueOf()),i.y.push(c.y)}),function r(c){var g;const E=null!==(g=Rt.P3(c))&&void 0!==g?g:1;return c.map(P=>{var Z;return(P-(null!==(Z=Rt.J69(c))&&void 0!==Z?Z:0))/(E<1?1:E)})}(i.y).forEach((c,g)=>{t[g].y=s?Math.abs(c):c}),s&&(t=Ei(t)),t}function mr(n,s){let t=ut()(n);return t=vi(t),t=_n(t,s),t}function fr(n,s){let t=ut()(n);const i={x:[],y:[]};return t.forEach(g=>{i.x.push(g.x.valueOf()),i.y.push(g.y)}),function o(g){var E;const P=null!==(E=Rt.C2o(g))&&void 0!==E?E:0,Z=function r(g,E){var P;const Z=g.map(ee=>Math.abs(ee-E));let V=null!==(P=Rt.C2o(Z))&&void 0!==P?P:0;return V<1&&(V=1),V}(g,P);return g.map(V=>(V-P)/Z)}(i.y).forEach((g,E)=>{t[E].y=s?Math.abs(g):g}),s&&(t=Ei(t)),t}let jt=(()=>{class n extends dn{constructor(t,i,o,r){super(t,o,i),this.eventBus=t,this.timeseriesScalesService=o,this.changeDetector=r,this.valueAccessorKey="y",this.collectionId="",this.timeseriesChartTypes=_t,this.summaryLegendBcgColor=an,this.summaryLegendColor=ln,this.transformers=new Map([[je.None,{displayName:$localize`None`,transformer:void 0}],[je.ChangePoint,{displayName:$localize`Change Point`,transformer:ur}],[je.Difference,{displayName:$localize`Difference`,transformer:or}],[je.FloatingAverage,{displayName:$localize`Floating Average`,transformer:gr}],[je.Linear,{displayName:$localize`Linear`,transformer:hr}],[je.Normalize,{displayName:$localize`Normalize`,transformer:Ei}],[je.PercentileStd,{displayName:$localize`Percentile Standardized`,transformer:fr}],[je.Smoothing,{displayName:$localize`Smoothing`,transformer:vi}],[je.LoessStandardize,{displayName:$localize`Smoothing Standardized`,transformer:mr}],[je.Standardize,{displayName:$localize`Standardize`,transformer:_n}]])}mapSeriesSet(t,i){const o=[i.y];i.yRight&&o.push(i.yRight);const r=t.map(c=>{var g;let E=o.find(P=>P.scaleUnits===c.metricUnits);return E||(E=null!==(g=o.find(P=>"generic"===P.scaleUnits))&&void 0!==g?g:i.y),Object.assign(Object.assign({},c),{scales:{x:i.x,y:E},renderer:this.renderer,accessors:this.accessors})});return this.widgetData.summarySerie&&(this.summarySerie=Object.assign(Object.assign({},this.widgetData.summarySerie),{accessors:new h.Ofn,renderer:new h.CJs({ignoreForDomainCalculation:!0}),scales:{x:i.x,y:i.y},showInLegend:!1,preprocess:!1}),r.push(this.summarySerie)),r}hasLegend(){return this.configuration.legendPlacement&&this.configuration.legendPlacement!==we.w.None}legendShouldBeAlignedRight(){return this.configuration.legendPlacement===we.w.Right}onPrimaryDescClick(t,i){this.seriesInteractive&&(t.stopPropagation(),this.eventBus.getStream(C.b1).next({payload:{data:i,interactionType:Bt.Series}}))}updateChartData(){var t,i,o,r;const c=this.chartAssist.chart.getGrid();!(null===(t=this.scales.y)||void 0===t)&&t.id&&(c.leftScaleId=this.scales.y.id),this.scales.yRight&&1===this.widgetData.series.length||this.scales.y&&this.scales.yRight&&this.scales.y.scaleUnits===this.scales.yRight.scaleUnits?(this.scales.yRight=this.scales.y,c.rightScaleId=this.scales.y.id):null!==(i=this.scales.yRight)&&void 0!==i&&i.id&&(c.rightScaleId=this.scales.yRight.id);const g=c.config();g.axis.bottom.visible=!(null!==(o=this.configuration)&&void 0!==o&&o.hasAdjacentChart),g.borders.bottom.visible=!(null!==(r=this.configuration)&&void 0!==r&&r.hasAdjacentChart),this.chartAssist.update(this.mapSeriesSet(this.widgetData.series,this.scales))}buildChart(){var t,i,o,r;this.buildChart$.next();const c=this.configuration.chartColors&&(null===(t=this.configuration.chartColors)||void 0===t?void 0:t.length)>0?new h.jpW(this.configuration.chartColors):(0,h.GUR)(),g=new h.syg(c);this.accessors=this.createAccessors(g.standardColors),this.chartAssist=this.createChartAssist(g);const E=this.chartAssist.chart,P=E.getGrid().config();!(null===(i=this.configuration.gridConfig)||void 0===i)&&i.xAxisTicksCount&&(P.axis.bottom.approximateTicks=this.configuration.gridConfig.xAxisTicksCount),P.dimension.marginLocked&&!(null===(o=this.configuration.gridConfig)||void 0===o)&&o.sideMarginLocked&&(P.dimension.marginLocked.left=!0,P.dimension.marginLocked.right=!0),!(null===(r=this.configuration.gridConfig)||void 0===r)&&r.sideMargin&&(P.dimension.margin.left=this.configuration.gridConfig.sideMargin,P.dimension.margin.right=this.configuration.gridConfig.sideMargin),this.configuration.enableZoom&&this.zoomPlugins.length&&E.addPlugin(this.zoomPlugins[0]),E.getEventBus().getStream(h.bdF).pipe((0,_e.R)((0,zt.T)(this.destroy$,this.buildChart$))).subscribe(Z=>{const V=Z.data,ee=V[Object.keys(V)[0]];this.eventBus.getStream(C.re).next({payload:{startDatetime:ee[0],endDatetime:ee[1],selectedPresetId:void 0}})}),this.setupInteraction()}setupInteraction(){this.chartAssist.chart.getEventBus().getStream(h.C1c).pipe((0,_e.R)((0,zt.T)(this.destroy$,this.buildChart$))).subscribe(t=>{const i=t.data;i.interactionType===h.s_5.Click&&this.eventBus.getStream(C.b1).next({payload:{data:i.dataPoints,interactionType:Bt.DataPoints}})}),this.chartAssist.chart.getEventBus().getStream(h.hkV).pipe((0,_e.R)((0,zt.T)(this.destroy$,this.buildChart$))).subscribe(t=>{const i=t.data;i.interactionType===h.s_5.Click&&this.eventBus.getStream(C.b1).next({payload:{data:i.values,interactionType:Bt.Values}})})}displayLegendMenu(){return this.configuration.preset===Pe.Line&&!!this.configuration.allowLegendMenu&&this.configuration.projectType===at.PerfstackApp}transformData(t,i){var o;const r=this.widgetData.series.find(c=>c.id===t);r&&(r.transformer=null===(o=this.transformers.get(i))||void 0===o?void 0:o.transformer,r.rawData&&(void 0===r.transformer?(r.data=r.rawData,this.updateYAxisDomain()):this.transformSeriesData(r)),this.updateChartData())}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m.nY),e.LFG(m.Fk,8),e.LFG(Ft),e.LFG(e.sBO))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function Tr(n,s){if(1&n&&(e.TgZ(0,"div",5)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.configuration.leftAxisLabel)}}const un=function(n){return{"nui-text-link-small link":n}};function Cr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",10),e.NdJ("mouseenter",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.chartAssist.resetVisibleSeries())}),e._UZ(1,"nui-rich-legend-tile",11),e.TgZ(2,"div",12)(3,"div",13)(4,"div",14),e._uU(5),e.qZA(),e.TgZ(6,"div",15),e._uU(7),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.Q6J("interactive",!1),e.xp6(1),e.Q6J("value",t.chartAssist.getHighlightedValue(t.summarySerie,"y","tick"))("backgroundColor",t.summaryLegendBcgColor)("color",t.summaryLegendColor),e.xp6(3),e.Q6J("ngClass",e.VKq(9,un,t.seriesInteractive))("title",t.summarySerie.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.summarySerie.legendDescriptionPrimary," "),e.xp6(1),e.Q6J("title",t.summarySerie.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.summarySerie.legendDescriptionSecondary," ")}}function Or(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",26),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.onPrimaryDescClick(o,r))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(3,un,i.seriesInteractive))("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Ir(n,s){if(1&n&&(e.TgZ(0,"a",27),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function vr(n,s){if(1&n&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Er(n,s){if(1&n&&(e.TgZ(0,"a",28),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Sr(n,s){1&n&&e._UZ(0,"nui-icon",29)}function Rr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-menu-action",31),e.NdJ("actionDone",function(){const r=e.CHM(t).$implicit,c=e.oxw(2).$implicit,g=e.oxw(2);return e.KtG(g.transformData(c.id,r.key))}),e._uU(1),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2).$implicit;e.ekj("selected",(null==i.transformer?null:i.transformer.name)===(null==t.value.transformer?null:t.value.transformer.name)),e.xp6(1),e.hij(" ",t.value.displayName," ")}}function Nr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-menu",30)(1,"nui-menu-group")(2,"nui-menu-action",31),e.NdJ("actionDone",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.removeMetric(o.id))}),e.SDv(3,32),e.qZA()(),e.TgZ(4,"nui-menu-group",33),e.YNc(5,Rr,2,3,"nui-menu-action",34),e.ALo(6,"nuiMapKeyValue"),e.qZA()()}if(2&n){const t=e.oxw(3);e.Q6J("appendToBody",!0),e.xp6(5),e.Q6J("ngForOf",e.lcZ(6,2,t.transformers))}}function Ar(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",16),e.NdJ("isSelectedChange",function(o){const c=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.chartAssist.toggleSeries(c.id,o))})("mouseenter",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.chartAssist.emphasizeSeries(r.id))})("mouseleave",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.chartAssist.resetVisibleSeries())}),e.TgZ(1,"nui-rich-legend-tile",11),e._UZ(2,"nui-chart-marker",17),e.qZA(),e.TgZ(3,"div",18)(4,"div",19),e.YNc(5,Or,2,5,"div",20),e.YNc(6,Ir,2,3,"a",21),e.YNc(7,vr,2,2,"div",22),e.YNc(8,Er,2,3,"a",23),e.qZA(),e.YNc(9,Sr,1,0,"nui-icon",24),e.qZA(),e.YNc(10,Nr,7,4,"nui-menu",25),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(3),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink&&!i.widgetData.summarySerie),e.xp6(1),e.Q6J("ngIf",t.secondaryLink&&!i.widgetData.summarySerie),e.xp6(1),e.Q6J("ngIf",t.transformer),e.xp6(1),e.Q6J("ngIf",i.displayLegendMenu())}}const yr=function(n){return[n]};function Mr(n,s){if(1&n&&(e.TgZ(0,"div",6)(1,"nui-legend",7),e.YNc(2,Cr,8,11,"nui-legend-series",8),e.YNc(3,Ar,11,14,"nui-legend-series",9),e.qZA()()),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(7,yr,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngIf",t.widgetData.summarySerie&&t.summarySerie),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let Si=(()=>{class n extends jt{constructor(t,i,o,r){super(t,i,o,r),this.renderer=new h.Med}createAccessors(t){return new h.qxh(t)}createChartAssist(t){const i=new h.c_e;i.axis.left.fit=!0;const o=new h.kL2(new h.Be5(i));return new h.doR(o,null,t)}}return n.lateLoadKey="LineChartComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(m.nY),e.Y36(m.Fk,8),e.Y36(Ft),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-line-chart"]],features:[e.qOj],decls:5,vars:6,consts:function(){let s,t;return s=$localize`:␟019d4bd6a5690f0cfa0ecf346a4e6bf7f0d8debb␟4814285799071780083:Remove`,t=$localize`:␟0e0f4abd3e0ba041e65167d13502b5506faddadc␟6744532767173419675:Display Transforms`,[[1,"nui-chart-layout","h-100"],["class","axis-label-left nui-text-small",4,"ngIf"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"axis-label-left","nui-text-small"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],[3,"interactive","mouseenter",4,"ngIf"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[3,"interactive","mouseenter"],[3,"value","backgroundColor","color"],["description","",1,"description-container"],[1,"description-text","nui-text-small"],[1,"description","description-primary",3,"ngClass","title"],[1,"description","description-secondary",3,"title"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","nui-text-small","justify-content-center"],[1,"descriptions"],["class","description description-primary",3,"ngClass","title","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["icon","performance","iconColor","primary-blue",4,"ngIf"],["legendMenu","","icon","menu","displayStyle","action",3,"appendToBody",4,"ngIf"],[1,"description","description-primary",3,"ngClass","title","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"],["icon","performance","iconColor","primary-blue"],["legendMenu","","icon","menu","displayStyle","action",3,"appendToBody"],[3,"actionDone"],s,["header",t],[3,"selected","actionDone",4,"ngFor","ngForOf"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Tr,3,1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"nui-chart",3),e.qZA(),e.YNc(4,Mr,4,9,"div",4),e.qZA()),2&t&&(e.ekj("layout-fixed",null==i.configuration.gridConfig?null:i.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("ngIf",!(null!=i.configuration.gridConfig&&i.configuration.gridConfig.hideYAxisLabel)),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},dependencies:[d.mk,d.sg,d.O5,h.FVX,h.kJo,h.wHi,h.xH4,h.VMb,h.sRf,a.oJW,a.VDk,a.Mnp,a.y7b,a.eQ8],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{max-width:250px;min-width:250px;padding-left:8px!important}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   nui-legend[_ngcontent-%COMP%]{margin:0!important;width:100%}nui-legend-series[_ngcontent-%COMP%]{width:100%}nui-icon[_ngcontent-%COMP%]{padding:0 5px;align-items:center}[_nghost-%COMP%]     div:has(> .description-container){flex-grow:1;overflow:hidden}[_nghost-%COMP%]     div:has(> .description-container) .descriptions{overflow:hidden}.selected[_ngcontent-%COMP%]{background-color:#00c4d21a}.selected[_ngcontent-%COMP%]:hover{background-color:#00c4d233}"]}),n})();function Pr(n,s){if(1&n&&(e.TgZ(0,"div",5)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.configuration.leftAxisLabel)}}const pn=function(n){return{"nui-text-link-small link":n}};function Dr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",10),e.NdJ("mouseenter",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.chartAssist.resetVisibleSeries())}),e._UZ(1,"nui-rich-legend-tile",11),e.TgZ(2,"div",12)(3,"div",13)(4,"div",14),e._uU(5),e.qZA(),e.TgZ(6,"div",15),e._uU(7),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.Q6J("interactive",!1),e.xp6(1),e.Q6J("value",t.chartAssist.getHighlightedValue(t.summarySerie,"y","tick"))("backgroundColor",t.summaryLegendBcgColor)("color",t.summaryLegendColor),e.xp6(3),e.Q6J("ngClass",e.VKq(9,pn,t.seriesInteractive))("title",t.summarySerie.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.summarySerie.legendDescriptionPrimary," "),e.xp6(1),e.Q6J("title",t.summarySerie.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.summarySerie.legendDescriptionSecondary," ")}}function br(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",26),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.onPrimaryDescClick(o,r))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(3,pn,i.seriesInteractive))("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Fr(n,s){if(1&n&&(e.TgZ(0,"a",27),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function xr(n,s){if(1&n&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Lr(n,s){if(1&n&&(e.TgZ(0,"a",28),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Gr(n,s){1&n&&e._UZ(0,"nui-icon",29)}function wr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-menu-action",31),e.NdJ("actionDone",function(){const r=e.CHM(t).$implicit,c=e.oxw(2).$implicit,g=e.oxw(2);return e.KtG(g.transformData(c.id,r.key))}),e._uU(1),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2).$implicit;e.ekj("selected",(null==i.transformer?null:i.transformer.name)===(null==t.value.transformer?null:t.value.transformer.name)),e.xp6(1),e.hij(" ",t.value.displayName," ")}}function $r(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-menu",30)(1,"nui-menu-group")(2,"nui-menu-action",31),e.NdJ("actionDone",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.removeMetric(o.id))}),e.SDv(3,32),e.qZA()(),e.TgZ(4,"nui-menu-group",33),e.YNc(5,wr,2,3,"nui-menu-action",34),e.ALo(6,"nuiMapKeyValue"),e.qZA()()}if(2&n){const t=e.oxw(3);e.Q6J("appendToBody",!0),e.xp6(5),e.Q6J("ngForOf",e.lcZ(6,2,t.transformers))}}function Ur(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",16),e.NdJ("isSelectedChange",function(o){const c=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.chartAssist.toggleSeries(c.id,o))})("mouseenter",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.chartAssist.emphasizeSeries(r.id))})("mouseleave",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.chartAssist.resetVisibleSeries())}),e.TgZ(1,"nui-rich-legend-tile",11),e._UZ(2,"nui-chart-marker",17),e.qZA(),e.TgZ(3,"div",18)(4,"div",19),e.YNc(5,br,2,5,"div",20),e.YNc(6,Fr,2,3,"a",21),e.YNc(7,xr,2,2,"div",22),e.YNc(8,Lr,2,3,"a",23),e.qZA(),e.YNc(9,Gr,1,0,"nui-icon",24),e.qZA(),e.YNc(10,$r,7,4,"nui-menu",25),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(3),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink&&!i.widgetData.summarySerie),e.xp6(1),e.Q6J("ngIf",t.secondaryLink&&!i.widgetData.summarySerie),e.xp6(1),e.Q6J("ngIf",t.transformer),e.xp6(1),e.Q6J("ngIf",i.displayLegendMenu())}}const zr=function(n){return[n]};function Br(n,s){if(1&n&&(e.TgZ(0,"div",6)(1,"nui-legend",7),e.YNc(2,Dr,8,11,"nui-legend-series",8),e.YNc(3,Ur,11,14,"nui-legend-series",9),e.qZA()()),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(7,zr,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngIf",t.widgetData.summarySerie&&t.summarySerie),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let Ri=(()=>{class n extends jt{constructor(t,i,o,r){super(t,i,o,r),this.renderer=new h.QtU,this.valueAccessorKey="y1"}createAccessors(t){return(0,h.mIe)(t)}createChartAssist(t){var i;const o=(0,h.nuZ)(),r=o.config();r.axis.left.fit=!0;const c=new h.kL2(o);return!(null===(i=this.configuration.gridConfig)||void 0===i)&&i.hideYAxisTicksLabels&&"percent"===this.configuration.units&&(r.axis.left.visible=!1,r.axis.right.visible=!1),new h.doR(c,h.aCj,t)}}return n.lateLoadKey="StackedAreaChartComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(m.nY),e.Y36(m.Fk,8),e.Y36(Ft),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-stacked-area-chart"]],features:[e.qOj],decls:5,vars:6,consts:function(){let s,t;return s=$localize`:␟019d4bd6a5690f0cfa0ecf346a4e6bf7f0d8debb␟4814285799071780083:Remove`,t=$localize`:␟0e0f4abd3e0ba041e65167d13502b5506faddadc␟6744532767173419675:Display Transforms`,[[1,"nui-chart-layout","h-100"],["class","axis-label-left nui-text-small",4,"ngIf"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"axis-label-left","nui-text-small"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],[3,"interactive","mouseenter",4,"ngIf"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[3,"interactive","mouseenter"],[3,"value","backgroundColor","color"],["description","",1,"description-container"],[1,"description-text","nui-text-small"],[1,"description","description-primary",3,"ngClass","title"],[1,"description","description-secondary",3,"title"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","nui-text-small","justify-content-center"],[1,"descriptions"],["class","description description-primary",3,"ngClass","title","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["icon","performance","iconColor","primary-blue",4,"ngIf"],["legendMenu","","icon","menu","displayStyle","action",3,"appendToBody",4,"ngIf"],[1,"description","description-primary",3,"ngClass","title","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"],["icon","performance","iconColor","primary-blue"],["legendMenu","","icon","menu","displayStyle","action",3,"appendToBody"],[3,"actionDone"],s,["header",t],[3,"selected","actionDone",4,"ngFor","ngForOf"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Pr,3,1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"nui-chart",3),e.qZA(),e.YNc(4,Br,4,9,"div",4),e.qZA()),2&t&&(e.ekj("layout-fixed",null==i.configuration.gridConfig?null:i.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("ngIf",!(null!=i.configuration.gridConfig&&i.configuration.gridConfig.hideYAxisLabel)),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},dependencies:[d.mk,d.sg,d.O5,h.FVX,h.kJo,h.wHi,h.xH4,h.VMb,h.sRf,a.oJW,a.VDk,a.Mnp,a.y7b,a.eQ8],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{max-width:250px;min-width:250px;padding-left:8px!important}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   nui-legend[_ngcontent-%COMP%]{margin:0!important;width:100%}nui-legend-series[_ngcontent-%COMP%]{width:100%}nui-icon[_ngcontent-%COMP%]{padding:0 5px;align-items:center}[_nghost-%COMP%]     div:has(> .description-container){flex-grow:1;overflow:hidden}[_nghost-%COMP%]     div:has(> .description-container) .descriptions{overflow:hidden}.selected[_ngcontent-%COMP%]{background-color:#00c4d21a}.selected[_ngcontent-%COMP%]:hover{background-color:#00c4d233}"]}),n})();function Wr(n,s){if(1&n&&(e.TgZ(0,"div",5)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.configuration.leftAxisLabel)}}const gn=function(n){return{"nui-text-link-small link":n}};function kr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",10),e.NdJ("mouseenter",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.chartAssist.resetVisibleSeries())}),e._UZ(1,"nui-rich-legend-tile",11),e.TgZ(2,"div",12)(3,"div",13)(4,"div",14),e._uU(5),e.qZA(),e.TgZ(6,"div",15),e._uU(7),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.Q6J("interactive",!1),e.xp6(1),e.Q6J("value",t.chartAssist.getHighlightedValue(t.summarySerie,"y","tick"))("backgroundColor",t.summaryLegendBcgColor)("color",t.summaryLegendColor),e.xp6(3),e.Q6J("ngClass",e.VKq(9,gn,t.seriesInteractive))("title",t.summarySerie.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.summarySerie.legendDescriptionPrimary," "),e.xp6(1),e.Q6J("title",t.summarySerie.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.summarySerie.legendDescriptionSecondary," ")}}function Zr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",26),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.onPrimaryDescClick(o,r))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(3,gn,i.seriesInteractive))("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Vr(n,s){if(1&n&&(e.TgZ(0,"a",27),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Jr(n,s){if(1&n&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Hr(n,s){if(1&n&&(e.TgZ(0,"a",28),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Yr(n,s){1&n&&e._UZ(0,"nui-icon",29)}function Kr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-menu-action",31),e.NdJ("actionDone",function(){const r=e.CHM(t).$implicit,c=e.oxw(2).$implicit,g=e.oxw(2);return e.KtG(g.transformData(c.id,r.key))}),e._uU(1),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2).$implicit;e.ekj("selected",(null==i.transformer?null:i.transformer.name)===(null==t.value.transformer?null:t.value.transformer.name)),e.xp6(1),e.hij(" ",t.value.displayName," ")}}function Qr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-menu",30)(1,"nui-menu-group")(2,"nui-menu-action",31),e.NdJ("actionDone",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.removeMetric(o.id))}),e.SDv(3,32),e.qZA()(),e.TgZ(4,"nui-menu-group",33),e.YNc(5,Kr,2,3,"nui-menu-action",34),e.ALo(6,"nuiMapKeyValue"),e.qZA()()}if(2&n){const t=e.oxw(3);e.Q6J("appendToBody",!0),e.xp6(5),e.Q6J("ngForOf",e.lcZ(6,2,t.transformers))}}function Xr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",16),e.NdJ("isSelectedChange",function(o){const c=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.chartAssist.toggleSeries(c.id,o))})("mouseenter",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.chartAssist.emphasizeSeries(r.id))})("mouseleave",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.chartAssist.resetVisibleSeries())}),e.TgZ(1,"nui-rich-legend-tile",11),e._UZ(2,"nui-chart-marker",17),e.qZA(),e.TgZ(3,"div",18)(4,"div",19),e.YNc(5,Zr,2,5,"div",20),e.YNc(6,Vr,2,3,"a",21),e.YNc(7,Jr,2,2,"div",22),e.YNc(8,Hr,2,3,"a",23),e.qZA(),e.YNc(9,Yr,1,0,"nui-icon",24),e.qZA(),e.YNc(10,Qr,7,4,"nui-menu",25),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(3),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink&&!i.widgetData.summarySerie),e.xp6(1),e.Q6J("ngIf",t.secondaryLink&&!i.widgetData.summarySerie),e.xp6(1),e.Q6J("ngIf",t.transformer),e.xp6(1),e.Q6J("ngIf",i.displayLegendMenu())}}const jr=function(n){return[n]};function qr(n,s){if(1&n&&(e.TgZ(0,"div",6)(1,"nui-legend",7),e.YNc(2,kr,8,11,"nui-legend-series",8),e.YNc(3,Xr,11,14,"nui-legend-series",9),e.qZA()()),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(7,jr,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngIf",t.widgetData.summarySerie&&t.summarySerie),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let Ni=(()=>{class n extends jt{constructor(t,i,o,r){super(t,i,o,r),this.valueAccessorKey="value"}mapSeriesSet(t,i){return this.accessors.data.thickness=i.x instanceof h.lTH?void 0:()=>5,super.mapSeriesSet(t,i)}createAccessors(t){const i=(0,h.Q6e)({horizontal:!1},t);return i.data.category=o=>o.x,i.data.value=o=>o.y,i}createChartAssist(t){var i;this.renderer=new h.Z7w({highlightStrategy:(null===(i=this.configuration)||void 0===i?void 0:i.projectType)===at.PerfstackApp?new h.FoF("x"):new h.Pkp("x"),pointerEvents:!1});const o=new h.kL2((0,h.skL)());return o.addPlugin(new h.koE),o.addPlugin(new h.$fK),new h.doR(o,h.knu,t)}}return n.lateLoadKey="StackedBarChartComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(m.nY),e.Y36(m.Fk,8),e.Y36(Ft),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-stacked-bar-chart"]],features:[e.qOj],decls:5,vars:6,consts:function(){let s,t;return s=$localize`:␟019d4bd6a5690f0cfa0ecf346a4e6bf7f0d8debb␟4814285799071780083:Remove`,t=$localize`:␟0e0f4abd3e0ba041e65167d13502b5506faddadc␟6744532767173419675:Display Transforms`,[[1,"nui-chart-layout","h-100"],["class","axis-label-left nui-text-small",4,"ngIf"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"axis-label-left","nui-text-small"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],[3,"interactive","mouseenter",4,"ngIf"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[3,"interactive","mouseenter"],[3,"value","backgroundColor","color"],["description","",1,"description-container"],[1,"description-text","nui-text-small"],[1,"description","description-primary",3,"ngClass","title"],[1,"description","description-secondary",3,"title"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","nui-text-small","justify-content-center"],[1,"descriptions"],["class","description description-primary",3,"ngClass","title","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["icon","performance","iconColor","primary-blue",4,"ngIf"],["legendMenu","","icon","menu","displayStyle","action",3,"appendToBody",4,"ngIf"],[1,"description","description-primary",3,"ngClass","title","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"],["icon","performance","iconColor","primary-blue"],["legendMenu","","icon","menu","displayStyle","action",3,"appendToBody"],[3,"actionDone"],s,["header",t],[3,"selected","actionDone",4,"ngFor","ngForOf"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Wr,3,1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"nui-chart",3),e.qZA(),e.YNc(4,qr,4,9,"div",4),e.qZA()),2&t&&(e.ekj("layout-fixed",null==i.configuration.gridConfig?null:i.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("ngIf",!(null!=i.configuration.gridConfig&&i.configuration.gridConfig.hideYAxisLabel)),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},dependencies:[d.mk,d.sg,d.O5,h.FVX,h.kJo,h.wHi,h.xH4,h.VMb,h.sRf,a.oJW,a.VDk,a.Mnp,a.y7b,a.eQ8],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{max-width:250px;min-width:250px;padding-left:8px!important}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   nui-legend[_ngcontent-%COMP%]{margin:0!important;width:100%}nui-legend-series[_ngcontent-%COMP%]{width:100%}nui-icon[_ngcontent-%COMP%]{padding:0 5px;align-items:center}[_nghost-%COMP%]     div:has(> .description-container){flex-grow:1;overflow:hidden}[_nghost-%COMP%]     div:has(> .description-container) .descriptions{overflow:hidden}.selected[_ngcontent-%COMP%]{background-color:#00c4d21a}.selected[_ngcontent-%COMP%]:hover{background-color:#00c4d233}"]}),n})();function es(n,s){if(1&n&&(e.TgZ(0,"div",5)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.configuration.leftAxisLabel)}}const hn=function(n){return{"nui-text-link-small link":n}};function ts(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",10),e.NdJ("mouseenter",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.chartAssist.resetVisibleSeries())}),e._UZ(1,"nui-rich-legend-tile",11),e.TgZ(2,"div",12)(3,"div",13)(4,"div",14),e._uU(5),e.qZA(),e.TgZ(6,"div",15),e._uU(7),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.Q6J("interactive",!1),e.xp6(1),e.Q6J("value",t.chartAssist.getHighlightedValue(t.summarySerie,"y","tick"))("backgroundColor",t.summaryLegendBcgColor)("color",t.summaryLegendColor),e.xp6(3),e.Q6J("ngClass",e.VKq(9,hn,t.seriesInteractive))("title",t.summarySerie.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.summarySerie.legendDescriptionPrimary," "),e.xp6(1),e.Q6J("title",t.summarySerie.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.summarySerie.legendDescriptionSecondary," ")}}function is(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",26),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.onPrimaryDescClick(o,r))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(3,hn,i.seriesInteractive))("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function ns(n,s){if(1&n&&(e.TgZ(0,"a",27),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function os(n,s){if(1&n&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function rs(n,s){if(1&n&&(e.TgZ(0,"a",28),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function ss(n,s){1&n&&e._UZ(0,"nui-icon",29)}function as(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-menu-action",31),e.NdJ("actionDone",function(){const r=e.CHM(t).$implicit,c=e.oxw(2).$implicit,g=e.oxw(2);return e.KtG(g.transformData(c.id,r.key))}),e._uU(1),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2).$implicit;e.ekj("selected",(null==i.transformer?null:i.transformer.name)===(null==t.value.transformer?null:t.value.transformer.name)),e.xp6(1),e.hij(" ",t.value.displayName," ")}}function ls(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-menu",30)(1,"nui-menu-group")(2,"nui-menu-action",31),e.NdJ("actionDone",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.removeMetric(o.id))}),e.SDv(3,32),e.qZA()(),e.TgZ(4,"nui-menu-group",33),e.YNc(5,as,2,3,"nui-menu-action",34),e.ALo(6,"nuiMapKeyValue"),e.qZA()()}if(2&n){const t=e.oxw(3);e.Q6J("appendToBody",!0),e.xp6(5),e.Q6J("ngForOf",e.lcZ(6,2,t.transformers))}}function ds(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",16),e.NdJ("isSelectedChange",function(o){const c=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.chartAssist.toggleSeries(c.id,o))})("mouseenter",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.chartAssist.emphasizeSeries(r.id))})("mouseleave",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.chartAssist.resetVisibleSeries())}),e.TgZ(1,"nui-rich-legend-tile",11),e._UZ(2,"nui-chart-marker",17),e.qZA(),e.TgZ(3,"div",18)(4,"div",19),e.YNc(5,is,2,5,"div",20),e.YNc(6,ns,2,3,"a",21),e.YNc(7,os,2,2,"div",22),e.YNc(8,rs,2,3,"a",23),e.qZA(),e.YNc(9,ss,1,0,"nui-icon",24),e.qZA(),e.YNc(10,ls,7,4,"nui-menu",25),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(3),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink&&!i.widgetData.summarySerie),e.xp6(1),e.Q6J("ngIf",t.secondaryLink&&!i.widgetData.summarySerie),e.xp6(1),e.Q6J("ngIf",t.transformer),e.xp6(1),e.Q6J("ngIf",i.displayLegendMenu())}}const cs=function(n){return[n]};function _s(n,s){if(1&n&&(e.TgZ(0,"div",6)(1,"nui-legend",7),e.YNc(2,ts,8,11,"nui-legend-series",8),e.YNc(3,ds,11,14,"nui-legend-series",9),e.qZA()()),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(7,cs,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngIf",t.widgetData.summarySerie&&t.summarySerie),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let Ai=(()=>{class n extends jt{constructor(t,i,o,r){super(t,i,o,r),this.renderer=new h.QtU,this.valueAccessorKey="y1"}createAccessors(t){return(0,h.mIe)(t)}createChartAssist(t){const i=(0,h.nuZ)();i.config().axis.left.fit=!0;const o=new h.kL2(i);return new h.doR(o,h.HAP,t)}}return n.lateLoadKey="StackedPercentageAreaChartComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(m.nY),e.Y36(m.Fk,8),e.Y36(Ft),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-stacked-percentage-area-chart"]],features:[e.qOj],decls:5,vars:6,consts:function(){let s,t;return s=$localize`:␟019d4bd6a5690f0cfa0ecf346a4e6bf7f0d8debb␟4814285799071780083:Remove`,t=$localize`:␟0e0f4abd3e0ba041e65167d13502b5506faddadc␟6744532767173419675:Display Transforms`,[[1,"nui-chart-layout","h-100"],["class","axis-label-left nui-text-small",4,"ngIf"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"axis-label-left","nui-text-small"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],[3,"interactive","mouseenter",4,"ngIf"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[3,"interactive","mouseenter"],[3,"value","backgroundColor","color"],["description","",1,"description-container"],[1,"description-text","nui-text-small"],[1,"description","description-primary",3,"ngClass","title"],[1,"description","description-secondary",3,"title"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","nui-text-small","justify-content-center"],[1,"descriptions"],["class","description description-primary",3,"ngClass","title","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["icon","performance","iconColor","primary-blue",4,"ngIf"],["legendMenu","","icon","menu","displayStyle","action",3,"appendToBody",4,"ngIf"],[1,"description","description-primary",3,"ngClass","title","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"],["icon","performance","iconColor","primary-blue"],["legendMenu","","icon","menu","displayStyle","action",3,"appendToBody"],[3,"actionDone"],s,["header",t],[3,"selected","actionDone",4,"ngFor","ngForOf"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,es,3,1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"nui-chart",3),e.qZA(),e.YNc(4,_s,4,9,"div",4),e.qZA()),2&t&&(e.ekj("layout-fixed",null==i.configuration.gridConfig?null:i.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("ngIf",!(null!=i.configuration.gridConfig&&i.configuration.gridConfig.hideYAxisLabel)),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},dependencies:[d.mk,d.sg,d.O5,h.FVX,h.kJo,h.wHi,h.xH4,h.VMb,h.sRf,a.oJW,a.VDk,a.Mnp,a.y7b,a.eQ8],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{max-width:250px;min-width:250px;padding-left:8px!important}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   nui-legend[_ngcontent-%COMP%]{margin:0!important;width:100%}nui-legend-series[_ngcontent-%COMP%]{width:100%}nui-icon[_ngcontent-%COMP%]{padding:0 5px;align-items:center}[_nghost-%COMP%]     div:has(> .description-container){flex-grow:1;overflow:hidden}[_nghost-%COMP%]     div:has(> .description-container) .descriptions{overflow:hidden}.selected[_ngcontent-%COMP%]{background-color:#00c4d21a}.selected[_ngcontent-%COMP%]:hover{background-color:#00c4d233}"]}),n})(),mn=(()=>{class n{constructor(){this.presets={[Pe.Line]:{componentType:Si.lateLoadKey},[Pe.StackedArea]:{componentType:Ri.lateLoadKey},[Pe.StackedPercentageArea]:{componentType:Ai.lateLoadKey},[Pe.StackedBar]:{componentType:Ni.lateLoadKey},[Pe.StatusBar]:{componentType:Oi.lateLoadKey}}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function us(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.explore(!0))}),e.qZA()}}function ps(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.zoomIn())}),e.qZA()}}function gs(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.YNc(1,us,1,0,"button",3),e.YNc(2,ps,1,0,"button",4),e.TgZ(3,"button",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.zoomOut())}),e.qZA(),e.TgZ(4,"button",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.clearZoom())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.exploringEnabled),e.xp6(1),e.Q6J("ngIf",t.isZoomInAllowed())}}const hs={id:"TIMESERIES_INSPECTION_MENU_ZOOM_IN"},ms={id:"TIMESERIES_INSPECTION_MENU_ZOOM_OUT"},fs={id:"TIMESERIES_INSPECTION_MENU_EXPLORE"},Ts={id:"TIMESERIES_INSPECTION_MENU_CLOSE"},Cs={id:"TIMESERIES_INSPECTION_MENU_SYNCHRONIZE"},Os={id:"TIMESERIES_INSPECTION_MENU_CLEAR"};let fn=(()=>{class n{constructor(t,i,o){this.element=t,this.eventBus=i,this.syncService=o,this.exploringEnabled=!1,this.allowed=!1,this.offset=38,this.destroy$=new oe.x}ngOnInit(){var t;this.plugin.zoomCreated$.subscribe(()=>this.explore(!1)),this.eventBus.getStream(Cs).subscribe(()=>{var i;const{startDate:o,endDate:r}=this.plugin.getInspectionFrame();o&&r&&this.syncService.syncPositionInsideCollection(null!==(i=this.collectionId)&&void 0!==i?i:"",o,r)}),this.eventBus.getStream(Os).subscribe(()=>this.clearZoom()),null===(t=this.plugin)||void 0===t||t.openPopover$.pipe((0,_e.R)(this.destroy$)).subscribe(i=>{this.element.nativeElement.style.left=this.offset+i+"px"})}ngOnChanges(t){var i;null!==(i=t.allowed)&&void 0!==i&&i.currentValue?this.plugin.showPopover():this.plugin.closePopover()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}clearZoom(){var t;this.syncService.clearZoomInsideCollection(null!==(t=this.collectionId)&&void 0!==t?t:""),this.eventBus.next(Ts,{})}isZoomInAllowed(){const{startDate:t,endDate:i}=this.plugin.getInspectionFrame();return!t||!i||i.diff(t,"minutes")>10}zoomIn(){var t;const i=this.plugin.getInspectionFrame();this.eventBus.next(hs,{payload:i}),this.syncService.clearZoomInsideCollection(null!==(t=this.collectionId)&&void 0!==t?t:"")}zoomOut(){const t=this.plugin.getInspectionFrame();this.eventBus.next(ms,{payload:t}),setTimeout(()=>{this.plugin.closePopover()})}explore(t=!1){const i=this.plugin.getInspectionFrame();this.eventBus.next(fs,{payload:{ids:this.metricIds,startDate:i.startDate,endDate:i.endDate,openSidePanel:t,exploringEnabled:this.exploringEnabled}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(m.nY),e.Y36(h.n_R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-timeseries-inspection-menu"]],inputs:{plugin:"plugin",exploringEnabled:"exploringEnabled",metricIds:"metricIds",collectionId:"collectionId",allowed:"allowed"},features:[e.TTD],decls:3,vars:7,consts:function(){let s,t,i,o;return s=$localize`:␟edba83a887582b9af04b111ef3aeaa0cd10f4c60␟5327174997241408397:Inspect selection in the data explorer`,t=$localize`:␟34fb6028a6630cf3a7308084b31e86e89d057965␟1470758907984185227:Zoom In`,i=$localize`:␟677ce9c57b5558cb10f0b39327d5a965bfb21dc5␟1356460275822781324:Zoom Out`,o=$localize`:␟97fc19ab6ec2f01cfa529e2f22c232f4e3cc0c70␟103921551219467537:Clear selection`,[["trigger","openPopoverSubject","placement","right",1,"popover",3,"unlimited","template","container","openPopover","closePopover","hasPadding","withGrowAfterOpen"],["popoverTemplate",""],[1,"inspection-menu"],["nui-button","","type","button","icon","details","title",s,3,"click",4,"ngIf"],["nui-button","","type","button","icon","zoom-in","title",t,3,"click",4,"ngIf"],["nui-button","","type","button","icon","zoom-out","title",i,3,"click"],["nui-button","","type","button","icon","remove","title",o,3,"click"],["nui-button","","type","button","icon","details","title",s,3,"click"],["nui-button","","type","button","icon","zoom-in","title",t,3,"click"]]},template:function(t,i){if(1&t&&(e._UZ(0,"nui-popover",0),e.YNc(1,gs,5,2,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("unlimited",!0)("template",o)("container",i.element.nativeElement)("openPopover",i.plugin.openPopover$)("closePopover",i.plugin.closePopover$)("hasPadding",!1)("withGrowAfterOpen",!0)}},dependencies:[d.O5,a.r0F,a.U$R],styles:["[_nghost-%COMP%]{position:absolute;top:5px}.popover[_ngcontent-%COMP%]{position:absolute;pointer-events:none}[_nghost-%COMP%]     nui-overlay-arrow{display:none!important}.inspection-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.inspection-menu[_ngcontent-%COMP%]     button{border:0}.inspection-menu[_ngcontent-%COMP%]     .nui-button.is-empty{min-width:25px!important;min-height:25px!important}"]}),n})();function Is(n,s){}function vs(n,s){if(1&n&&e._UZ(0,"nui-timeseries-inspection-menu",7),2&n){const t=e.oxw(2);e.Q6J("allowed",t.allowPopover)("plugin",t.zoomPlugins[0])("collectionId",t.collectionId)("exploringEnabled",t.isExploringEnabled())("metricIds",null==t.configuration?null:t.configuration.metricIds)}}const Es=function(n,s,t,i){return{widgetData:n,configuration:s,collectionId:t,zoomPlugins:i}};function Ss(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("mouseleave",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleLeave())})("mouseenter",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleEnter())}),e.ynx(1,3,4),e.YNc(3,Is,0,0,"ng-template",5),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(2);return e.KtG(r.attached(o))}),e.BQk(),e.YNc(4,vs,1,5,"nui-timeseries-inspection-menu",6),e.qZA()}if(2&n){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentType",i.chartPreset.componentType)("properties",e.l5B(4,Es,i.widgetData,i.configuration,i.collectionId||(null==i.configuration?null:i.configuration.collectionId),i.zoomPlugins)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal),e.xp6(1),e.Q6J("ngIf",(null==i.configuration?null:i.configuration.enableZoom)&&(null==i.configuration?null:i.configuration.projectType)===i.timeseriesWidgetProjectType.PerfstackApp&&i.zoomPlugins.length)}}function Rs(n,s){1&n&&(e.TgZ(0,"div"),e._UZ(1,"nui-image",8),e.qZA())}let yi=(()=>{class n{constructor(t,i,o){this.timeseriesChartPresetService=t,this.changeDetector=i,this.zoomPluginsSyncService=o,this.elementClass="",this.zoomPlugins=[],this.allowPopover=!1,this.timeseriesWidgetProjectType=at}ngOnInit(){var t,i,o,r;(null===(t=this.configuration)||void 0===t?void 0:t.projectType)===at.PerfstackApp?this.configuration.type===_t.alert?(null===(i=this.widgetData)||void 0===i||i.series.forEach(()=>this.zoomPlugins.push(this.getTimeseriesZoomPlugin())),1===(null===(o=this.widgetData)||void 0===o?void 0:o.series.length)&&this.widgetData.series[0].id===(null===(r=this.widgetData.summarySerie)||void 0===r?void 0:r.id)||this.zoomPlugins.push(this.getTimeseriesZoomPlugin())):this.zoomPlugins.push(this.getTimeseriesZoomPlugin()):this.zoomPlugins.push(new h.Rbc)}getTimeseriesZoomPlugin(){return new h.F7W({collectionId:this.collectionId},this.zoomPluginsSyncService)}ngOnChanges(t){var i,o;t.configuration&&t.configuration.currentValue?.preset!==t.configuration.previousValue?.preset&&(this.chartPreset=this.timeseriesChartPresetService.presets[null!==(o=null===(i=this.configuration)||void 0===i?void 0:i.preset)&&void 0!==o?o:Pe.Line])}shouldShowChart(){var t,i,o;return(null!==(o=null===(i=null===(t=this.widgetData)||void 0===t?void 0:t.series)||void 0===i?void 0:i.length)&&void 0!==o?o:0)>0}toggleLeave(){this.allowPopover=!1}toggleEnter(){this.allowPopover=!0}isExploringEnabled(){var t,i,o;return(null===(t=this.configuration)||void 0===t?void 0:t.type)!==_t.line&&(null===(i=this.configuration)||void 0===i?void 0:i.type)!==_t.multi&&(null===(o=this.configuration)||void 0===o?void 0:o.type)!==_t.status}}return n.lateLoadKey="TimeseriesWidgetComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(mn),e.Y36(e.sBO),e.Y36(h.n_R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-timeseries-widget"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",collectionId:"collectionId",elementClass:"elementClass"},features:[e.TTD],decls:2,vars:2,consts:[["class","h-100 timeseries-widget-content",3,"mouseleave","mouseenter",4,"ngIf"],[4,"ngIf"],[1,"h-100","timeseries-widget-content",3,"mouseleave","mouseenter"],["nuiComponentPortal","","componentId","timeseriesWidgetChart",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"allowed","plugin","collectionId","exploringEnabled","metricIds",4,"ngIf"],[3,"allowed","plugin","collectionId","exploringEnabled","metricIds"],["image","no-data-to-show"]],template:function(t,i){1&t&&(e.YNc(0,Ss,5,9,"div",0),e.YNc(1,Rs,2,0,"div",1)),2&t&&(e.Q6J("ngIf",i.shouldShowChart()),e.xp6(1),e.Q6J("ngIf",!i.shouldShowChart()))},dependencies:[d.O5,a.cuP,x.Pl,k.$,fn],styles:[".timeseries-widget-content[_ngcontent-%COMP%]{padding:10px;position:relative}"]}),n})();function Ns(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-search",1),e.NdJ("inputChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onSearchInputChanged(o))})("cancel",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onSearch(o))})("search",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onSearch(o))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("value",t.searchValue)}}let Mi=(()=>{class n{constructor(t,i){this.dataSource=t,this.eventBus=i,this.enabled=!1,this.searchTerm$=new oe.x,this.destroy$=new oe.x}ngOnInit(){var t,i,o,r;!(null===(o=null===(i=null===(t=this.dataSource.features)||void 0===t?void 0:t.getSupportedFeatures())||void 0===i?void 0:i.search)||void 0===o)&&o.enabled&&(this.enabled=!0),this.registerFilters(),this.handleSearchTermSubscription(null===(r=this.configuration)||void 0===r?void 0:r.searchOnKeyUp)}ngOnChanges(t){t.configuration&&this.handleSearchTermSubscription(t.configuration.currentValue.searchOnKeyUp)}onSearchInputChanged(t){var i,o;null!==(o=null===(i=this.configuration)||void 0===i?void 0:i.searchOnKeyUp)&&void 0!==o&&o.enabled&&(this.searchValue=t,this.searchTerm$.next(t))}onSearch(t){this.searchValue=t,this.searchTerm$.next(t)}ngOnDestroy(){this.eventBus.getStream(C.kV).next({payload:""}),this.destroy$.next(),this.destroy$.complete()}registerFilters(){var t;null===(t=this.dataSource)||void 0===t||t.registerComponent({search:{componentInstance:{getFilters:()=>({value:this.searchValue})}}})}handleSearchTermSubscription(t){var i;null===(i=this.searchTermSubscription)||void 0===i||i.unsubscribe(),this.searchTermSubscription=this.searchTerm$.pipe((0,_e.R)(this.destroy$),(0,nn.b)(t?.debounceTime||n.defaultSearchDebounce)).subscribe(o=>{this.eventBus.getStream(C.RG).next({}),this.eventBus.getStream(C.kV).next({payload:o})})}}return n.lateLoadKey="WidgetSearchComponent",n.defaultSearchDebounce=500,n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Fk,8),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-search"]],hostVars:4,hostBindings:function(t,i){2&t&&e.ekj("default",i.enabled)("invisible",!i.enabled)},inputs:{configuration:"configuration",searchValue:"searchValue"},features:[e.TTD],decls:1,vars:1,consts:[["class","unlimited-width",3,"value","inputChange","cancel","search",4,"ngIf"],[1,"unlimited-width",3,"value","inputChange","cancel","search"]],template:function(t,i){1&t&&e.YNc(0,Ns,1,1,"nui-search",0),2&t&&e.Q6J("ngIf",i.enabled)},dependencies:[d.O5,a.gSk],styles:[".default[_nghost-%COMP%]{padding:5px 10px}.invisible[_nghost-%COMP%]{height:0}"],changeDetection:0}),n})();var qe=(()=>{return(n=qe||(qe={})).ErrorUnknown="errorUnknown",n.ErrorForbidden="errorForbidden",n.ErrorNotFound="errorNotFound",qe;var n})();function As(n,s){}function ys(n,s){}function Ms(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",5),e.ynx(1,1,2),e.YNc(3,ys,0,0,"ng-template",3),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(2);return e.KtG(r.attached(o))}),e.BQk(),e.qZA()}if(2&n){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentId",i.nodeConfigs[1].id)("componentType",i.nodeConfigs[1].componentType)("providers",i.nodeConfigs[1].providers)("properties",i.nodeConfigs[1].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}const Ps=function(n,s){return{"d-none":n,"d-flex":s}};let Pi=(()=>{class n extends Ee{constructor(t,i,o){super(t,i,o),this.elementClass="",this.defaultClasses="w-100"}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`}ngOnDestroy(){super.ngOnDestroy()}getNodes(){return this.fallbackKey?[this.primaryContent,this.fallbackMap&&this.fallbackMap[this.fallbackKey]||qe.ErrorUnknown]:[this.primaryContent]}}return n.lateLoadKey="WidgetBodyContentComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(ce.p),e.Y36(a.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-body-content"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{componentId:"componentId",primaryContent:"primaryContent",fallbackKey:"fallbackKey",fallbackMap:"fallbackMap",elementClass:"elementClass"},features:[e.qOj],decls:5,vars:10,consts:[[1,"h-100",3,"ngClass"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["class","d-flex h-100",4,"ngIf"],[1,"d-flex","h-100"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e.ynx(1,1,2),e.YNc(3,As,0,0,"ng-template",3),e.NdJ("attached",function(c){e.CHM(o);const g=e.MAs(2);return e.KtG(g.attached(c))}),e.BQk(),e.qZA(),e.YNc(4,Ms,4,5,"div",4)}if(2&t){const o=e.MAs(2);e.Q6J("ngClass",e.WLB(7,Ps,i.fallbackKey,!i.fallbackKey)),e.xp6(1),e.Q6J("componentId",i.nodeConfigs[0].id)("componentType",i.nodeConfigs[0].componentType)("providers",i.nodeConfigs[0].providers)("properties",i.nodeConfigs[0].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",o.portal),e.xp6(1),e.Q6J("ngIf",i.fallbackKey)}},dependencies:[d.mk,d.O5,x.Pl,k.$],encapsulation:2}),n})();function Ds(n,s){1&n&&e._UZ(0,"nui-preview-overlay")}function bs(n,s){}let Di=(()=>{class n extends Ee{constructor(t,i,o,r){super(i,o,r),this.eventBus=t,this.editMode=!1,this.elementClass="",this.defaultClasses="d-flex h-100 w-100",this.getNodes=()=>[this.content]}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`,this.eventBus.getStream(C.N9).pipe((0,_e.R)(this.destroyed$)).subscribe(t=>{this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:m.xW.Data,propertyPath:["editMode"]},!!t.payload)})}ngOnDestroy(){super.ngOnDestroy()}}return n.lateLoadKey="WidgetBodyComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(m.nY),e.Y36(e.sBO),e.Y36(ce.p),e.Y36(a.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-body"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{componentId:"componentId",editMode:"editMode",content:"content",elementClass:"elementClass"},features:[e.qOj],decls:4,vars:6,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){if(1&t){const o=e.EpF();e.YNc(0,Ds,1,0,"nui-preview-overlay",0),e.ynx(1,1,2),e.YNc(3,bs,0,0,"ng-template",3),e.NdJ("attached",function(c){e.CHM(o);const g=e.MAs(2);return e.KtG(g.attached(c))}),e.BQk()}if(2&t){const o=e.MAs(2);e.Q6J("ngIf",i.editMode),e.xp6(1),e.Q6J("componentId",i.nodeConfigs[0].id)("componentType",i.nodeConfigs[0].componentType)("providers",i.nodeConfigs[0].providers)("properties",i.nodeConfigs[0].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",o.portal)}},dependencies:[d.O5,O.b,x.Pl,k.$],styles:["[_nghost-%COMP%]{position:relative}"]}),n})();var xt=l(37340);const Fs=["widgetHeaderCustomElement"];function xs(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleCollapsed())}),e._UZ(1,"span",19),e.qZA()}}function Ls(n,s){1&n&&(e.TgZ(0,"div",20),e._UZ(1,"nui-icon",21),e.qZA())}function Gs(n,s){if(1&n&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Q6J("title",t.title),e.xp6(1),e.hij(" ",t.title," ")}}function ws(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"a",23),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.prepareLink(o))})("mouseenter",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.prepareLink(o))})("mousedown",function(o){return o.stopPropagation(),o.preventDefault()}),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("href",t.url,e.LSH)("nuiTooltip",t.linkTooltip),e.xp6(1),e.Oqu(t.title)}}function $s(n,s){if(1&n&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Q6J("title",t.subtitle),e.xp6(1),e.hij(" ",t.subtitle," ")}}function Us(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.prepareLink(o))})("mouseenter",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.prepareLink(o))})("mousedown",function(o){return o.stopPropagation(),o.preventDefault()}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("href",t.url,e.LSH)("nuiTooltip",t.linkTooltip)}}function zs(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onEditWidget())}),e.qZA()}}function Bs(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleCollapsed())}),e.qZA()}}function Ws(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-menu-action",30),e.NdJ("actionDone",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onReloadData())}),e._UZ(1,"nui-icon",31),e.TgZ(2,"span"),e.SDv(3,32),e.qZA()()}}function ks(n,s){if(1&n&&(e.TgZ(0,"nui-menu",28),e.YNc(1,Ws,4,0,"nui-menu-action",29),e.qZA()),2&n){const t=e.oxw();e.Q6J("appendToBody",!0),e.xp6(1),e.Q6J("ngIf",t.reloadable)}}function Zs(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nui-popup",33)(1,"span",34),e._UZ(2,"button",35),e.qZA(),e.TgZ(3,"div",36)(4,"nui-menu-action",37),e.NdJ("actionDone",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeWidget())}),e.SDv(5,38),e.qZA()()()}2&n&&e.Q6J("appendToBody",!0)}function Vs(n,s){1&n&&e._UZ(0,"div",39)}const Js=["*"];let bi=(()=>{class n{get hostClass(){return!0}get state(){return this.collapsed&&this.collapsible?"collapsed":"expanded"}constructor(t,i,o,r,c){this.eventBus=t,this.pizzagnaService=i,this.changeDetector=o,this.eventProxy=r,this.linkProvider=c,this.editMode=!0,this.editable=!0,this.removable=!0,this.collapsible=!1,this.reloadable=!0,this.hideMenu=!1,this.collapsed=!1,this.onDestroy$=new oe.x,this.linkTooltip=$localize`Explore this data`}ngOnInit(){this.collapsible&&this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:m.xW.Data,propertyPath:["isCollapsed"]},!0),this.eventProxy&&(this.eventProxy.addUpstream(C.Ef),this.eventProxy.addUpstream(C.y4),this.eventProxy.addDownstream(C.N9)),this.eventBus.getStream(C.N9).pipe((0,_e.R)(this.onDestroy$)).subscribe(t=>{this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:m.xW.Data,propertyPath:["collapsed"]},!t.payload),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:m.xW.Data,propertyPath:["editMode"]},!!t.payload)})}ngAfterViewInit(){setTimeout(()=>{this.withCustomElement=0!==this.widgetHeaderCustomElement.nativeElement.childNodes.length})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}removeWidget(){this.eventBus.getStream(C.y4).next({})}toggleCollapsed(){this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:m.xW.Data,propertyPath:["collapsed"]},!this.collapsed)}onEditWidget(){this.eventBus.getStream(C.Ef).next({})}onReloadData(){if(!this.reloadable)throw new Error("The widget is not reloadable, so it can't be reloaded manually.");this.eventBus.getStream(C.RG).next({})}prepareLink(t){const i=t.target;if(i&&this.linkProvider){const o=this.linkProvider.getLink(this.url);o&&i.setAttribute("href",o)}return!0}}return n.lateLoadKey="WidgetHeaderComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(m.nY),e.Y36(ce.p),e.Y36(e.sBO),e.Y36($.q,8),e.Y36(m.B5,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-header"]],viewQuery:function(t,i){if(1&t&&e.Gf(Fs,5),2&t){let o;e.iGM(o=e.CRH())&&(i.widgetHeaderCustomElement=o.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.ekj("nui-widget-header",i.hostClass)},inputs:{componentId:"componentId",editMode:"editMode",editable:"editable",removable:"removable",collapsible:"collapsible",reloadable:"reloadable",title:"title",subtitle:"subtitle",hideMenu:"hideMenu",url:"url",collapsed:"collapsed"},ngContentSelectors:Js,decls:19,vars:20,consts:function(){let s,t,i,o;return s=$localize`:␟8028b4b4a38e861642d3d465f1fd0e08ea5bdcd0␟8529558445404824560:Edit widget`,t=$localize`:␟aefc550c9735e4112bc884389f77c619007acb8e␟9121781503543370614:Reload data`,i=$localize`:␟6d4f27e8085712e506aaaee1704b3e0455d15652␟8500807759101015900:Remove widget`,o=$localize`:␟0f0e6eea7e5a63ccfd2d07117d5560cb89936c2c␟495801405190883151:Remove Widget`,[[1,"nui-widget__header"],[1,"nui-widget__header__container"],["class","collapse-container",3,"click",4,"ngIf"],[1,"nui-widget__header__content"],["class","nui-widget__header__content-drag-icon nui-dashboard__widget--drag-handle",4,"ngIf"],[1,"nui-widget__header__content-custom-element"],["widgetHeaderCustomElement",""],[1,"nui-widget__header__content-title-container","nui-dashboard__widget--drag-handle"],["class","nui-text-widget nui-widget__header__content-title",3,"title",4,"ngIf"],[4,"ngIf"],["class","nui-text-hint nui-widget__header__content-help-hint",3,"title",4,"ngIf"],[1,"nui-widget__header__content-actions"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown",4,"ngIf"],["class","nui-widget-header__action-edit","nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",s,3,"click",4,"ngIf"],["class","nui-widget-header__action-toggle-collapsed","nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",3,"click",4,"ngIf"],["class","nui-widget__header__content-actions__menu","icon","menu","displayStyle","action",3,"appendToBody",4,"ngIf"],["class","nui-widget-header__action-remove",3,"appendToBody",4,"ngIf"],["class","collapse-spacer",4,"ngIf"],[1,"collapse-container",3,"click"],[1,"collapse-container__line"],[1,"nui-widget__header__content-drag-icon","nui-dashboard__widget--drag-handle"],["icon","drag","iconColor","gray"],[1,"nui-text-widget","nui-widget__header__content-title",3,"title"],[1,"nui-text-widget","nui-widget__header__content-title",3,"href","nuiTooltip","click","mouseenter","mousedown"],[1,"nui-text-hint","nui-widget__header__content-help-hint",3,"title"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown"],["nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",s,1,"nui-widget-header__action-edit",3,"click"],["nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",1,"nui-widget-header__action-toggle-collapsed",3,"click"],["icon","menu","displayStyle","action",1,"nui-widget__header__content-actions__menu",3,"appendToBody"],[3,"actionDone",4,"ngIf"],[3,"actionDone"],["icon","reload"],t,[1,"nui-widget-header__action-remove",3,"appendToBody"],["nuiTooltip",i],["nui-button","","nuiPopupToggle","","type","button","icon","remove","iconColor","red","displayStyle","action"],["popupAreaContent","",1,"nui-menu"],["type","destructive",3,"actionDone"],o,[1,"collapse-spacer"]]},template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,xs,2,0,"div",2),e.TgZ(3,"div",3),e.YNc(4,Ls,2,0,"div",4),e.TgZ(5,"div",5,6),e.Hsn(7),e.qZA(),e.TgZ(8,"div",7),e.YNc(9,Gs,2,2,"div",8),e.YNc(10,ws,3,3,"div",9),e.YNc(11,$s,2,2,"div",10),e.qZA(),e.TgZ(12,"div",11),e.YNc(13,Us,1,2,"a",12),e.YNc(14,zs,1,0,"button",13),e.YNc(15,Bs,1,0,"button",14),e.YNc(16,ks,2,2,"nui-menu",15),e.YNc(17,Zs,6,1,"nui-popup",16),e.qZA()()(),e.YNc(18,Vs,1,0,"div",17),e.qZA()),2&t&&(e.xp6(1),e.ekj("nui-widget__header__container--collapsible",i.collapsible)("nui-widget__header__container--collapsed",i.collapsible&&i.collapsed)("nui-widget__header__container--expanded",i.collapsible&&!i.collapsed),e.Q6J("@expandedState",i.state),e.xp6(1),e.Q6J("ngIf",i.collapsed&&i.collapsible),e.xp6(2),e.Q6J("ngIf",i.editMode),e.xp6(4),e.ekj("nui-widget__header__content-title-with-additional-content",i.withCustomElement||i.editMode),e.xp6(1),e.Q6J("ngIf",!i.url||i.editMode),e.xp6(1),e.Q6J("ngIf",i.url&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.subtitle),e.xp6(2),e.Q6J("ngIf",i.url&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.editable&&i.editMode),e.xp6(1),e.Q6J("ngIf",i.collapsible&&!i.editMode),e.xp6(1),e.Q6J("ngIf",!i.hideMenu&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.removable&&i.editMode),e.xp6(1),e.Q6J("ngIf",i.collapsible))},dependencies:[d.O5,a.r0F,a.oJW,a.VDk,a.Mnp,a.btB,a.RXH,a.i9q],styles:[".nui-widget__header[_ngcontent-%COMP%]{display:flex;position:relative}.nui-widget__header[_ngcontent-%COMP%]   .collapse-spacer[_ngcontent-%COMP%]{margin-bottom:15px}.nui-widget__header__container[_ngcontent-%COMP%]{z-index:500;width:100%}.nui-widget__header__container--collapsible[_ngcontent-%COMP%]{width:100%}.nui-widget__header__container--collapsed[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container__line[_ngcontent-%COMP%]{width:16px;height:1px;background:var(--nui-color-line-active,#0079aa);margin:5px 0;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{align-items:flex-start;display:flex;opacity:1}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-drag-icon[_ngcontent-%COMP%]{align-items:center;cursor:move;display:flex;height:30px;justify-content:center;margin:5px;width:30px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title[_ngcontent-%COMP%]{display:block;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-container[_ngcontent-%COMP%]{flex:1;min-width:0;padding:10px 0 5px 10px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-with-additional-content[_ngcontent-%COMP%]{padding-left:0}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-help-hint[_ngcontent-%COMP%]{max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-actions[_ngcontent-%COMP%]{display:flex;padding:5px 10px 0 5px}"],data:{animation:[(0,xt.X$)("expandedState",[(0,xt.SB)("expanded",(0,xt.oB)({height:"*"})),(0,xt.SB)("collapsed",(0,xt.oB)({height:"11px"})),(0,xt.eR)("expanded <=> collapsed",[(0,xt.jt)("350ms ease-in-out")])])]}}),n})();l(82442);var et=l(41206);let Tn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[x.eL,A,x.eL]}),n})();const Ys=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred ","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgrey","#d3d3d3"],["lightgreen","#90ee90"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370d8"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#d87093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]);let Cn=(()=>{class n{RGBToHexRGBToHex(t){const i=t.indexOf(",")>-1?",":" ",o=t.substr(4).split(")")[0].split(i);let r=(+o[0]).toString(16),c=(+o[1]).toString(16),g=(+o[2]).toString(16);return 1===r.length&&(r="0"+r),1===c.length&&(c="0"+c),1===g.length&&(g="0"+g),"#"+r+c+g}isHEX(t){return/^#[0-9A-F]{6}$/i.test(t)||/^#([0-9A-F]{3}){1,2}$/i.test(t)}colorKeywordsToHex(t){const i=Ys.get(t);return z()(i)?"":i}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Ks=l(98184);function Qs(n,s){if(1&n&&e._UZ(0,"div",10),2&n){const t=e.oxw().$implicit,i=e.oxw();e.ekj("black-tick",i.isBlackTick||(null==t?null:t.color)===i.defaultColor)}}function Xs(n,s){if(1&n&&(e.TgZ(0,"div",4)(1,"nui-select-v2-option",5,6)(3,"div",7)(4,"div",8),e.YNc(5,Qs,1,2,"div",9),e.qZA()()()()),2&n){const t=s.$implicit,i=e.MAs(2),o=e.oxw();e.xp6(1),e.Q6J("value",null==t?null:t.color)("displayValueContext",t),e.xp6(2),e.ekj("color-picker-option--selected",null==i?null:i.selected),e.uIk("title",null==t?null:t.label),e.xp6(1),e.Q6J("ngStyle",o.setStyles(null==t?null:t.color)),e.xp6(1),e.Q6J("ngIf",null==i?null:i.selected)}}function js(n,s){if(1&n&&(e.TgZ(0,"div",11)(1,"div",12),e._UZ(2,"div",13),e.qZA(),e.TgZ(3,"div",14),e._UZ(4,"nui-icon",15),e.qZA()()),2&n){const t=s.$implicit,i=s.open,o=e.oxw();e.xp6(1),e.uIk("title",null==t?null:t.label),e.xp6(1),e.Q6J("ngStyle",o.setStyles(null==t?null:t.color)),e.xp6(2),e.Udp("transform",i?"rotate(180deg)":"")}}let Fi=(()=>{class n{constructor(t,i,o){this.changeDetection=t,this.colorService=i,this.cdkOverlay=o,this.defaultColor="var(--nui-color-bg-secondary)",this.overlayUtilities=new a.KcF,this.destroy$=new oe.x,this.setStyles=r=>({"background-color":r||this.defaultColor})}ngOnChanges(t){t.colors&&(this.colors=t.colors.currentValue),t.colorPalette&&(this.colorPalette=t.colorPalette.currentValue)}ngAfterViewInit(){var t;this.value&&(null===(t=this.select)||void 0===t||t.writeValue(this.value),this.isBlackTick=this.determineBlackTick(this.value.toString())),this.palette=this.colorPalette||this.colors.map(r=>({color:r})),this.initOverlayUtilities(),this.select.valueSelected.pipe((0,st.b)(r=>this.writeValue(r)),(0,st.b)(r=>this.onChange(r)),(0,_e.R)(this.destroy$)).subscribe(r=>{r&&(this.isBlackTick=this.determineBlackTick(r.toString()))});const i=(0,a.gpG)(),o=this.cdkOverlay.position().flexibleConnectedTo(this.select.elRef.nativeElement).withPush(!1).withViewportMargin(0).withPositions([i["bottom-right"],i["bottom-left"],i["top-right"],i["top-left"]]);this.overlayConfig={maxWidth:this.cols?30*this.cols+20+"px":"260px",positionStrategy:o}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onChange(t){}_onTouched(){}writeValue(t){var i;this.value=t,null===(i=this.select)||void 0===i||i.writeValue(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this._onTouched=t}determineBlackTick(t){let i="#fff";return i=this.colorService.isHEX(t)?t:(0,h.ruO)(t)||this.colorService.RGBToHexRGBToHex(t)||this.colorService.colorKeywordsToHex(t),"#fff"===this.getContrastOnBgColor(i)}initOverlayUtilities(){const t=this.select.dropdown;this.selectResizeObserver=this.overlayUtilities.setPopupComponent(this.select.dropdown).getResizeObserver({updateSize:!1}),t.show$.pipe((0,_e.R)(this.destroy$)).subscribe(()=>{this.overlayUtilities.syncWidth(),this.selectResizeObserver.observe(this.select.elRef.nativeElement)}),t.hide$.pipe((0,_e.R)(this.destroy$)).subscribe(()=>{this.selectResizeObserver.unobserve(this.select.elRef.nativeElement)})}getContrastOnBgColor(t){return t?parseInt(t.replace("#",""),16)>8388607.5?"#fff":"#000":""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Cn),e.Y36(Ks.aV))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-color-picker"]],viewQuery:function(t,i){if(1&t&&e.Gf(a.j_n,5),2&t){let o;e.iGM(o=e.CRH())&&(i.select=o.first)}},inputs:{colors:"colors",colorPalette:"colorPalette",cols:"cols"},features:[e._Bn([{provide:a.MDN,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},Cn]),e.TTD],decls:5,vars:4,consts:[[1,"color-picker-select",3,"overlayConfig","syncWidth","displayValueTemplate"],[1,"color-picker-container"],["class","d-inline-flex flex-wrap box",4,"ngFor","ngForOf"],["colorSelectTemplate",""],[1,"d-inline-flex","flex-wrap","box"],[1,"w-100","h-100","reset-box-sizes",3,"value","displayValueContext"],["option",""],[1,"color-picker-option"],[1,"color-picker-option__color-box",3,"ngStyle"],["class","color-picker-option__glyph",3,"black-tick",4,"ngIf"],[1,"color-picker-option__glyph"],[1,"color-picker-input"],[1,"color-picker-input__box"],[1,"color-picker-input__color-box",3,"ngStyle"],[1,"color-picker-input__toggle"],["icon","caret-down"]],template:function(t,i){if(1&t&&(e.TgZ(0,"nui-select-v2",0)(1,"div",1),e.YNc(2,Xs,6,7,"div",2),e.qZA()(),e.YNc(3,js,5,4,"ng-template",null,3,e.W1O)),2&t){const o=e.MAs(4);e.Q6J("overlayConfig",i.overlayConfig)("syncWidth",!1)("displayValueTemplate",o),e.xp6(2),e.Q6J("ngForOf",i.palette)}},dependencies:[d.sg,d.O5,d.PC,a.oJW,a.j_n,a.rLF],styles:[".box[_ngcontent-%COMP%]{width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]{padding:5px 10px}.color-picker-select[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;min-width:unset;cursor:pointer}.color-picker-input[_ngcontent-%COMP%]{display:flex}.color-picker-input__box[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.color-picker-input__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);width:17px;height:17px;flex-grow:1;margin:0 10px}.color-picker-input__toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);width:30px;height:30px}.color-picker-option[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.color-picker-option__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);padding:1px 0 0 1px}.color-picker-option--selected[_ngcontent-%COMP%]{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.color-picker-option--selected[_ngcontent-%COMP%]:focus{outline:none}.color-picker-option__glyph[_ngcontent-%COMP%]{width:100%;height:100%;background-size:12px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMjAgMjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAgMjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS54dWktY2hlY2tib3gtZ2x5cGh7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDozO3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1saW5lY2FwOnJvdW5kO30KPC9zdHlsZT4KPHBvbHlsaW5lIGNsYXNzPSJ4dWktY2hlY2tib3gtZ2x5cGgiIHBvaW50cz0iMTcsNCA4LDE1IDMsOSAiLz4KPC9zdmc+);background-repeat:no-repeat}.color-picker-option__glyph.black-tick[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}"],changeDetection:0}),n})();var On=l(61817);let qt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-drop-area"]],decls:0,vars:0,template:function(t,i){},styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;border:3px solid;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:var(--nui-color-busy-default,rgba(0, 196, 210, .2))}"]}),n})();function ta(n,s){}const ia=function(){return["formReady"]};function na(n,s){if(1&n){const t=e.EpF();e.ynx(0)(1,1,2),e.NdJ("output",function(o){const c=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.onEvent(c.id,o))}),e.YNc(3,ta,0,0,"ng-template",3),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(2);return e.KtG(r.attached(o))}),e.BQk()()}if(2&n){const t=s.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties)("outputs",e.DdM(6,ia)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let Nt=(()=>{class n extends Ee{constructor(t,i,o,r,c){super(t,i,o),this.formDirective=r,this.eventBus=c,this.elementClass=""}ngOnInit(){this.form=this.formDirective.form}ngOnChanges(t){super.ngOnChanges(t)}onEvent(t,i){"formReady"===i.id&&this.addFormGroup(t,i.payload)}addFormGroup(t,i){this.form.addControl(t,i)}getNodes(){return this.nodes}}return n.lateLoadKey="FormStackComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(ce.p),e.Y36(a.mQy),e.Y36(p.sg),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-form-stack"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{nodes:"nodes"},features:[e._Bn([],[{provide:p.gN,useExisting:p.sg}]),e.qOj,e.TTD],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,na,4,7,"ng-container",0),2&t&&e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn)},dependencies:[d.sg,x.Pl,k.$],encapsulation:2}),n})();var xi=l(8214),oa=(l(17654),l(56927));l(48876);let In=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.formBuilder=i,this.logger=o,this.formReady=new e.vpe}ngOnChanges(t){var i,o;this.form||this.initForm(),this.contentFormatterProperties?Object.keys(this.contentFormatterProperties).forEach(r=>{var c,g;null===(g=null===(c=this.form)||void 0===c?void 0:c.get(r))||void 0===g||g.setValue(this.contentFormatterProperties[r])}):null===(o=null===(i=this.form)||void 0===i?void 0:i.get("currentMetric"))||void 0===o||o.patchValue(this.properMetric)}ngOnInit(){this.initForm()}initForm(){this.form=this.formBuilder.group({currentMetric:[this.properMetric,p.kI.required]}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}get currentMetric(){return this.form.get("currentMetric")}get properMetric(){var t,i,o,r;const c=null===(t=this.contentFormatterProperties)||void 0===t?void 0:t.currentMetric;return(null===(i=this.dsOutput)||void 0===i?void 0:i.result.find(E=>E.id===c))?c:null===(r=null===(o=this.dsOutput)||void 0===o?void 0:o.result[0])||void 0===r?void 0:r.id}addCustomFormControls(t){}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.sBO),e.LFG(p.qu),e.LFG(a.mQy))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function ra(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",7),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}let vn=(()=>{class n extends In{constructor(t,i,o,r){super(t,i,o),this.pizzagnaService=r}}return n.lateLoadKey="DonutContentPercentageConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(a.mQy),e.Y36(ce.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-donut-content-configurator"]],features:[e.qOj],decls:7,vars:3,consts:function(){let s,t;return s=$localize`:␟447ffd4cbfd3d8c3ca8dd216c0a82ecadc24a7de␟4196232656388343089:Metrics`,t=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup"],[1,"mt-4"],["caption",s,1,"mb-3",3,"control"],["formControlName","currentMetric"],[3,"value",4,"ngFor","ngForOf"],["for","required"],t,[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nui-form-field",2)(3,"nui-select-v2",3),e.YNc(4,ra,2,2,"nui-select-v2-option",4),e.qZA(),e.TgZ(5,"nui-validation-message",5),e.SDv(6,6),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("control",i.currentMetric),e.xp6(2),e.Q6J("ngForOf",null==i.dsOutput?null:i.dsOutput.result))},dependencies:[d.sg,p.JJ,p.JL,p.sg,p.u,a.hgI,a.j_n,a.rLF,a.CfE],encapsulation:2}),n})();var sa=l(10912),Li=l.n(sa);let Gi=(()=>{class n{constructor(t){this.changeDetector=t,this.destroy$=new oe.x}ngOnChanges(t){var i;t.data&&(this.sum=Li()(this.data,o=>o.data[0])),t.properties&&(this.currentMetricData=(null===(i=this.data.find(o=>{var r;return o.id===(null===(r=this.properties)||void 0===r?void 0:r.currentMetric)}))||void 0===i?void 0:i.data[0])||this.data[0].data[0]),this.getProperContentValue()}ngOnInit(){this.chartAssist.chartAssistSubject.pipe((0,st.b)(t=>this.emphasizedSeriesData=this.data.find(i=>i.id===t.payload.seriesId)),(0,st.b)(()=>this.getProperContentValue()),(0,_e.R)(this.destroy$)).subscribe()}getProperSeriesData(){var t;return this.emphasizedSeriesData?null===(t=this.emphasizedSeriesData)||void 0===t?void 0:t.data[0]:this.currentMetricData}getProperContentValue(){this.chartContent=(this.getProperSeriesData()/this.sum*100).toFixed(2)+"%"}}return n.lateLoadKey="DonutContentPercentageFormatterComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{data:"data",chartAssist:"chartAssist",properties:"properties"},features:[e.TTD],decls:4,vars:1,consts:[[1,"nui-text-page"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"div",0),e._uU(3),e.qZA()(),e.BQk()),2&t&&(e.xp6(3),e.hij(" ",i.chartContent," "))},encapsulation:2}),n})();function aa(n,s){if(1&n&&e._UZ(0,"nui-icon",5),2&n){const t=e.oxw();e.Q6J("icon",null==t.config?null:t.config.chartDonutContentIcon)}}function la(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.xi3(2,1,t.sum,"1.0-3"))}}function da(n,s){if(1&n&&e._uU(0),2&n){const t=e.oxw();e.Oqu(t.convertedValue)}}function ca(n,s){if(1&n&&(e.TgZ(0,"div",6),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.config?null:t.config.chartDonutContentLabel," ")}}let En=(()=>{class n{constructor(t,i){this.changeDetector=t,this.conversionThreshold=1e6,this.unitConversionPipe=new ct(i)}ngOnChanges(){this.sum=Li()(this.data,t=>t.data[0]),this.convertedValue=this.unitConversionPipe.transform(this.sum)}}return n.lateLoadKey="DonutContentRawFormatterComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(a.CrH))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{data:"data",config:"config"},features:[e.TTD],decls:7,vars:4,consts:[["iconSize","medium",3,"icon",4,"ngIf"],[1,"nui-text-page"],[4,"ngIf","ngIfElse"],["convertedValueDisplay",""],["class","nui-text-secondary",4,"ngIf"],["iconSize","medium",3,"icon"],[1,"nui-text-secondary"]],template:function(t,i){if(1&t&&(e.ynx(0),e.YNc(1,aa,1,1,"nui-icon",0),e.TgZ(2,"div",1),e.YNc(3,la,3,4,"span",2),e.YNc(4,da,1,1,"ng-template",null,3,e.W1O),e.qZA(),e.YNc(6,ca,2,1,"div",4),e.BQk()),2&t){const o=e.MAs(5);e.xp6(1),e.Q6J("ngIf",null==i.config?null:i.config.chartDonutContentIcon),e.xp6(2),e.Q6J("ngIf",i.sum<i.conversionThreshold)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",null==i.config?null:i.config.chartDonutContentLabel)}},dependencies:[d.O5,a.oJW,d.JJ],encapsulation:2}),n})(),wi=(()=>{class n{constructor(t){this.changeDetector=t}ngOnChanges(){this.sum=Li()(this.data,t=>t.data[0])}}return n.lateLoadKey="DonutContentSumFormatterComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{data:"data"},features:[e.TTD],decls:3,vars:1,consts:[[1,"nui-text-page"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0),e._uU(2),e.qZA(),e.BQk()),2&t&&(e.xp6(2),e.Oqu(i.sum))},encapsulation:2}),n})();var $i=l(96899),ei=l(62878),Wt=l(24803);let Ui=(()=>{class n extends Wt.a{}return n.lateLoadKey="PercentageFormatterComponent",n.\u0275fac=function(){let s;return function(i){return(s||(s=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:1,template:function(t,i){1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t&&(e.xp6(1),e.hij(" ",null==i.data?null:i.data.value,"% "))},encapsulation:2}),n})();var _a=l(51467),ua=l.n(_a),pa=l(73943),ga=l.n(pa);const ha=[{power:1,prefix:"",label:""},{power:3,prefix:"k",label:"kilo"},{power:6,prefix:"M",label:"mega"},{power:9,prefix:"G",label:"giga"},{power:12,prefix:"T",label:"tera"},{power:15,prefix:"P",label:"peta"},{power:18,prefix:"E",label:"exa"},{power:21,prefix:"Z",label:"zetta"},{power:24,prefix:"Y",label:"yotta"}],ma=[{power:-24,prefix:"y",label:"yocto"},{power:-21,prefix:"z",label:"zepto"},{power:-18,prefix:"a",label:"atto"},{power:-15,prefix:"f",label:"femto"},{power:-12,prefix:"p",label:"pico"},{power:-9,prefix:"n",label:"nano"},{power:-6,prefix:"\xb5",label:"micro"},{power:-3,prefix:"m",label:"milli"},{power:1,prefix:"",label:""}];let ti=(()=>{class n{constructor(t){this.changeDetector=t,this.value="0"}ngOnChanges(t){if(t.data){const{value:i}=t.data.currentValue;i&&this.processSiUnitsValue(ga()(i))}}processSiUnitsValue(t){const i=this.getTransformPrefix(ua()(t));this.value=this.getTransformedValue(t,i),this.modifier=i?.prefix}getTransformedValue(t,i){if(!i)return t;const o=1!==i.power?+t*Math.pow(10,-i.power):+t;return(Math.round(10*o)/10).toString()}getTransformPrefix(t){var i;const o=Math.abs(t);if(Number.isNaN(o))return;const r=(null===(i=this.data)||void 0===i?void 0:i.shiftPoint)||n.SHIFT_POINT_DEFAULT;if(o>=1){const E=Math.round(o).toString().length;return[...ha].reverse().find(Z=>E>=Z.power+1+r)}{const c=Sn(o);return[...ma].reverse().find(E=>c<=Math.abs(E.power)+1+r)}}}return n.lateLoadKey="SiUnitsFormatterComponent",n.SHIFT_POINT_DEFAULT=0,n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{data:"data",elementClass:"elementClass"},features:[e.TTD],decls:6,vars:2,consts:[[1,"d-flex","flex-nowrap"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.BQk()),2&t&&(e.xp6(3),e.Oqu(i.value),e.xp6(2),e.hij(" ",i.modifier,""))},encapsulation:2}),n})();function Sn(n,s=1){const t=Math.abs(n);if(t>=1)return 1;const i=s+1;return t*Math.pow(10,i)>1?i:Sn(t,i)}function fa(n,s){if(1&n&&(e.TgZ(0,"div")(1,"a",6),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("href",null==t.data?null:t.data.link,e.LSH)("title",t.data.name),e.xp6(1),e.hij(" ",t.data.name," ")}}function Ta(n,s){if(1&n&&(e.TgZ(0,"span",7),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Udp("font-size",11,"px"),e.xp6(1),e.Oqu(t.data.name)}}function Ca(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",1)(2,"span",2),e._uU(3),e.qZA(),e._UZ(4,"nui-icon",3),e.YNc(5,fa,3,3,"div",4),e.YNc(6,Ta,2,3,"ng-template",null,5,e.W1O),e.qZA(),e.BQk()),2&n){const t=e.MAs(7),i=e.oxw();e.xp6(3),e.Oqu(i.data.data),e.xp6(1),e.Q6J("icon",i.data.icon),e.xp6(1),e.Q6J("ngIf",null==i.data?null:i.data.link)("ngIfElse",t)}}let zi=(()=>{class n{constructor(t){this.changeDetector=t,this.isValid=!1}ngOnChanges(){this.isValid=!!(this.data&&this.data.icon&&this.data.name&&this.data.data)}}return n.lateLoadKey="StatusWithIconFormatterComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{data:"data"},features:[e.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nui-text-label","align-items-center","status-icon-formatter"],[1,"nui-text-ellipsis","text-right","pl-3"],[1,"nui-icon","nui-icon-line-height","mx-2",3,"icon"],[4,"ngIf","ngIfElse"],["noLink",""],["rel","noopener noreferrer",1,"nui-text-link-small","nui-text-ellipsis","link",3,"href","title","click"],[1,"nui-text-ellipsis"]],template:function(t,i){1&t&&e.YNc(0,Ca,8,4,"ng-container",0),2&t&&e.Q6J("ngIf",i.isValid)},dependencies:[d.O5,a.oJW],styles:[".status-icon-formatter[_ngcontent-%COMP%]{display:grid;grid-template-columns:50px auto minmax(114px,1fr)}"]}),n})();var Rn=l(66213),Bi=l(68675),Oa=l(21503),Nn=l.n(Oa);let Wi=(()=>{class n{transform(t,i,o){if(!z()(t)){if(Nn()(t)){if(!i)return t;const c=[...t];return c.push(i),c}return Object.assign({},t,{[typeof o>"u"?"undefined":o]:i})}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"nuiAddData",type:n,pure:!0}),n})(),ki=(()=>{class n{constructor(){this.defaultHeaderPrefix=$localize`Value`}transform(t,i,o=this.defaultHeaderPrefix){return`${o} ${i+1}${t?" - ":""}${t||""}`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"nuiWidgetConfiguratorSectionHeader",type:n,pure:!0}),n})();function Ia(n,s){if(1&n&&e._UZ(0,"nui-drop-area",9),2&n){const t=e.oxw(2);e.Udp("height",t.height,"px")}}function va(n,s){1&n&&(e.ynx(0),e.TgZ(1,"div",12),e._UZ(2,"nui-icon",13),e.qZA(),e.BQk())}function Ea(n,s){if(1&n&&(e.YNc(0,va,3,0,"ng-container",10),e.TgZ(1,"span",11),e.ALo(2,"nuiWidgetConfiguratorSectionHeader"),e._uU(3),e.ALo(4,"nuiWidgetConfiguratorSectionHeader"),e.qZA()),2&n){const t=e.oxw(),i=t.$implicit,o=t.index,r=e.oxw();e.Q6J("ngIf",r.moveButtons),e.xp6(1),e.Q6J("title",e.Dn7(2,3,r.headerMap.get(i.id),o,r.headerPrefix)),e.xp6(2),e.hij(" ",e.Dn7(4,7,r.headerMap.get(i.id),o,r.headerPrefix)," ")}}function Sa(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),r=o.$implicit,c=o.index,g=e.oxw();return e.KtG(g.removeItem(g.getItemForNode(r),c))}),e.qZA()()}if(2&n){const t=e.oxw().index;e.xp6(1),e.MGl("id","kpi-widget-remove-btn-",t,"")}}function Ra(n,s){}const Na=function(){return["formReady","formDestroy"]};function Aa(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("cdkDragStarted",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.cdkDragStarted(o))}),e.YNc(1,Ia,1,2,"nui-drop-area",3),e.YNc(2,Ea,5,11,"ng-template",null,4,e.W1O),e.YNc(4,Sa,2,1,"ng-template",null,5,e.W1O),e.ynx(6,6,7),e.NdJ("output",function(o){const c=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.onEvent(c.id,o))}),e.ALo(8,"nuiAddData"),e.ALo(9,"nuiAddData"),e.YNc(10,Ra,0,0,"ng-template",8),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(7);return e.KtG(r.attached(o))}),e.BQk(),e.qZA()}if(2&n){const t=s.$implicit,i=e.MAs(3),o=e.MAs(5),r=e.MAs(7);e.xp6(6),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",e.Dn7(8,6,e.Dn7(9,10,t.properties,i,"headerTextTemplate"),o,"headerButtonsTemplate"))("outputs",e.DdM(14,Na)),e.xp6(4),e.Q6J("cdkPortalOutlet",r.portal)}}let ii=(()=>{class n extends Ee{constructor(t,i,o,r){super(t,i,o),this.formBuilder=r,this.items=[],this.moveButtons=!0,this.formReady=new e.vpe,this.itemsChange=new e.vpe,this.headerMap=new Map}getItemForNode(t){return this.items.find(i=>i.id===t.id)}getNodes(){return this.nodes}ngOnInit(){this.form=this.formBuilder.array([],p.kI.required),this.formReady.emit(this.form)}onEvent(t,i){const o=this.items.find(c=>c.id===t),r=this.items.findIndex(c=>c.id===t);"formReady"===i.id&&o&&this.onFormReady(o,i.payload,r),"formDestroy"===i.id&&this.onFormDestroy(i.payload)}onFormReady(t,i,o){const r=this.formBuilder.group({id:[t.id],componentType:[t.componentType],properties:i});this.form.setControl(o,r),setTimeout(()=>{var c;const g=null===(c=i.get(`${t.id}/description`))||void 0===c?void 0:c.get("label");g?.valueChanges.pipe((0,Bi.O)(g.value),(0,_e.R)(this.destroyed$)).subscribe(E=>{this.headerMap.set(t.id,E||""),this.changeDetector.markForCheck()})})}onFormDestroy(t){setTimeout(()=>{let i=0;for(;i<this.form.length&&this.form.at(i).get("properties")!==t;i++);this.form.removeAt(i),this.form.patchValue(this.form.value,{emitEvent:!0})})}trackBy(t,i){return i.id}removeItem(t,i){if(!t)throw new Error("Unable to remove undefined item from pizzagna");this.itemsChange.emit(this.items.filter(o=>o!==t)),this.items.splice(i,1),this.nodes.splice(i,1),this.pizzagnaService.removeComponents(t.id)}moveItem(t,i){const o=[...this.items],r=o.splice(t,1);o.splice(i,0,...r);const c=[...this.nodes],g=c.splice(t,1);c.splice(i,0,...g),this.nodes=[...c],this.moveFormValues(t,i),this.itemsChange.emit(o),setTimeout(()=>{this.form.setValue(this.form.value,{emitEvent:!0})})}drop(t){this.moveItem(t.previousIndex,t.currentIndex)}cdkDragStarted(t){this.height=t.source.element.nativeElement.offsetHeight}moveFormValues(t,i){const o=this.form.at(t);this.form.removeAt(t),this.form.insert(i,o)}ngOnDestroy(){super.ngOnDestroy()}}return n.lateLoadKey="ItemsDynamicComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(ce.p),e.Y36(a.mQy),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-items-dynamic"]],inputs:{items:"items",moveButtons:"moveButtons",nodes:"nodes",headerPrefix:"headerPrefix"},outputs:{formReady:"formReady",itemsChange:"itemsChange"},features:[e.qOj],decls:2,vars:3,consts:[["cdkDropList","",1,"nui-items-dynamic",3,"formGroup","cdkDropListDropped"],["cdkDrag","","class","nui-items-dynamic__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"nui-items-dynamic__node-item",3,"cdkDragStarted"],["class","nui-items-dynamic__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-items-dynamic__drop-area"],[4,"ngIf"],[1,"nui-items-dynamic__header-text",3,"title"],["cdkDragHandle","",1,"nui-items-dynamic__drag-handler"],["icon","drag"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(r){return i.drop(r)}),e.YNc(1,Aa,11,15,"div",1),e.qZA()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackBy))},dependencies:[d.sg,d.O5,p.JL,p.sg,et.Wj,et.Zt,et.Bh,et.Hk,x.Pl,k.$,a.oJW,a.r0F,qt,Wi,ki],styles:[".nui-items-dynamic__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-items-dynamic__drag-handler{cursor:move;display:flex}.nui-items-dynamic__node-item{background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-items-dynamic__node-item .widget-configurator-section{margin:0}.nui-items-dynamic__drop-area{margin:15px}.kpi-indicators-configuration__color-preview{width:16px;height:16px;margin-right:15px;border-radius:3px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),n})(),An=(()=>{class n{}return n.lateLoadKey="PreviewPlaceholderComponent",n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-preview-placeholder"]],decls:6,vars:0,consts:function(){let s,t;return s=$localize`:␟2dddb51ea396d77c6eae240cec72bcac05cbd28b␟7484658843094717966:This is a preview of your widget`,t=$localize`:␟fd2e41589bd70eddf4486b814980d2891ec182f9␟3997823842478388980: As you make configuration changes, this area will update to match. To get started, select a widget type on the configuration panel.
`,[s,t]},template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"b"),e.SDv(2,0),e.qZA(),e._uU(3,"."),e.qZA(),e.TgZ(4,"div"),e.SDv(5,1),e.qZA())},styles:["[_nghost-%COMP%]{max-width:300px;padding:0 10px;margin:auto}"]}),n})();var ya=l(28726),yn=l(77341),Mn=l(23309);function Ma(n,s){}const Pa=function(){return["widgetSelected"]};function Da(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",6),e.ynx(1,7,8),e.NdJ("output",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onSelect(o.payload))}),e.YNc(3,Ma,0,0,"ng-template",9),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(2);return e.KtG(r.attached(o))}),e.BQk(),e.qZA()}if(2&n){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentType",i.cloneSelectionComponentType)("outputs",e.DdM(3,Pa)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function ba(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"nui-pizzagna",11,12),e.NdJ("pizzagnaChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.formPizzagna=o)}),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("pizzagna",t.formPizzagna)}}let Pn=(()=>{class n{constructor(t,i,o,r,c){this.changeDetector=t,this.configurator=i,this.previewService=o,this.formBuilder=r,this.widgetTypesService=c,this.navigationControl=new en.X({busyState:{busy:!1},allowStepChange:!0}),this.destroy$=new oe.x,this.resetForm$=new oe.x,this.busy=!1,this.isFormDisplayed=!1,this.resetForm()}ngOnInit(){this.previewService.previewChanged.pipe((0,_e.R)(this.destroy$)).subscribe(t=>{this.onPreviewPizzagnaUpdate(t)}),this.configurator.submitError.pipe((0,_e.R)(this.destroy$)).subscribe(()=>{this.toggleBusy()})}ngAfterViewInit(){this.changeDetector.markForCheck()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.resetForm$.complete()}onPreviewPizzagnaUpdate(t){var i;if(!this.isFormDisplayed)return;const o=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(i=this.configurator.previewWidget)||void 0===i?void 0:i.pizzagna),{[m.xW.Configuration]:t})});this.configurator.updateWidget(o)}canFinish(){var t,i,o,r;return!(null===(i=null===(t=this.widgetTemplate)||void 0===t?void 0:t.pizzagna)||void 0===i||!i.configuration||null!==(r=null===(o=this.widgetTemplate)||void 0===o?void 0:o.metadata)&&void 0!==r&&r.needsConfiguration)}onFinish(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1});this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}onStepNavigated(t){this.isFormDisplayed=1===t.currentStepIndex,0===t.currentStepIndex&&1===t.previousStepIndex?(this.formPizzagna=void 0,this.resetForm(),this.onSelect(this.widgetTemplate)):1===t.currentStepIndex&&(this.formPizzagna=this.widgetTypesService.getWidgetType(this.widgetTemplate.type,this.widgetTemplate.version).configurator,this.previewService.preview=this.widgetTemplate.pizzagna[m.xW.Configuration])}onSelect(t){var i;this.widgetTemplate=t;const o=Object.assign(Object.assign({},t),{id:(null===(i=this.configurator.previewWidget)||void 0===i?void 0:i.id)||null});this.configurator.updateWidget(null),setTimeout(()=>{this.configurator.updateWidget(ut()(o))})}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}resetForm(){this.resetForm$.next(),this.form=this.formBuilder.group({}),this.form.statusChanges.pipe((0,_e.R)(this.resetForm$),(0,_e.R)(this.destroy$)).subscribe(()=>{this.changeDetector.markForCheck()})}}return n.lateLoadKey="WidgetClonerComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(On.n),e.Y36(ya.m),e.Y36(p.qu),e.Y36(H.x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-cloner"]],hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",cloneSelectionComponentType:"cloneSelectionComponentType"},decls:8,vars:7,consts:function(){let s,t,i;return s=$localize`:␟a638e97aa8422948b3e628089bbc9e0cd89e0087␟696117927395958397:Creating Widget`,t=$localize`:␟1af9862ac515933a9a72e92970c3e92bda63f6e8␟8076137290276236439:Create Widget`,i=$localize`:␟072d4d4ec83a5a97345a1c13b90c213b47326d09␟6673660887182833564:Customize`,[["configuratorTitle",s,3,"disableCloseButton","close"],["finishText",t,3,"hideHeader","canProceed","canFinish","navigationControl","finish","cancel","stepNavigated"],["nextText",i,3,"stepTemplate"],[3,"stepTemplate"],["step1",""],["step2",""],[1,"p-4","h-100"],["nuiComponentPortal","",3,"componentType","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"formGroup"],[3,"pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-configurator-heading",0),e.NdJ("close",function(){return i.onCancel()}),e.qZA(),e.TgZ(1,"nui-dashwiz",1),e.NdJ("finish",function(){return i.onFinish()})("cancel",function(){return i.onCancel()})("stepNavigated",function(r){return i.onStepNavigated(r)}),e._UZ(2,"nui-dashwiz-step",2)(3,"nui-dashwiz-step",3),e.qZA(),e.YNc(4,Da,4,4,"ng-template",null,4,e.W1O),e.YNc(6,ba,3,2,"ng-template",null,5,e.W1O)),2&t){const o=e.MAs(5),r=e.MAs(7);e.Q6J("disableCloseButton",i.busy),e.xp6(1),e.Q6J("hideHeader",!0)("canProceed",!!i.widgetTemplate)("canFinish",i.canFinish())("navigationControl",i.navigationControl),e.xp6(1),e.Q6J("stepTemplate",o),e.xp6(1),e.Q6J("stepTemplate",r)}},dependencies:[p.JL,p.sg,x.Pl,oa.R,k.$,yn.i,Mn.u,Rn.Q],encapsulation:2,changeDetection:0}),n})();var Fa=l(83385);function xa(n,s){1&n&&e.GkF(0)}function La(n,s){1&n&&e.GkF(0)}function Ga(n,s){if(1&n&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Q6J("title",t.headerText),e.xp6(1),e.hij(" ",t.headerText," ")}}function wa(n,s){}const $a=function(){return["formReady"]};function Ua(n,s){if(1&n){const t=e.EpF();e.ynx(0)(1,6,7),e.NdJ("output",function(o){const c=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.onEvent(c.id,o))}),e.YNc(3,wa,0,0,"ng-template",8),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(2);return e.KtG(r.attached(o))}),e.BQk()()}if(2&n){const t=s.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties)("outputs",e.DdM(6,$a)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}const za=[[["","headerText",""]],[["","headerButtons",""]],"*"],Ba=["[headerText]","[headerButtons]","*"];let Ye=(()=>{class n extends Ee{constructor(t,i,o,r){super(t,i,o),this.formBuilder=r,this.nodes=[],this.headerText="",this.formReady=new e.vpe,this.formDestroy=new e.vpe}getNodes(){return this.nodes}ngOnInit(){this.form=this.formBuilder.group({})}onEvent(t,i){"formReady"===i.id&&this.addFormGroup(t,i.payload),Object.keys(this.form.controls).length===this.getNodes().length&&this.formReady.emit(this.form)}addFormGroup(t,i){this.form.addControl(t,i)}ngOnDestroy(){this.formDestroy.emit(this.form),super.ngOnDestroy()}}return n.lateLoadKey="WidgetConfiguratorSectionComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(ce.p),e.Y36(a.mQy),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-configurator-section"]],hostAttrs:[1,"nui-widget-configurator-section"],inputs:{headerTextTemplate:"headerTextTemplate",headerButtonsTemplate:"headerButtonsTemplate",nodes:"nodes",headerText:"headerText"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.qOj],ngContentSelectors:Ba,decls:9,vars:5,consts:[[1,"widget-configurator-section"],[1,"widget-configurator-section__header","d-flex","justify-content-between","align-items-center"],[4,"ngTemplateOutlet"],["headerText","","class","widget-configurator-section__header-text",3,"title",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["headerText","",1,"widget-configurator-section__header-text",3,"title"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&(e.F$t(za),e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,xa,1,0,"ng-container",2),e.YNc(3,La,1,0,"ng-container",2),e.YNc(4,Ga,2,2,"div",3),e.Hsn(5),e.Hsn(6,1),e.qZA(),e.YNc(7,Ua,4,7,"ng-container",4),e.Hsn(8,2),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngTemplateOutlet",i.headerTextTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",i.headerButtonsTemplate),e.xp6(1),e.Q6J("ngIf",i.headerText),e.xp6(3),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn))},dependencies:[d.sg,d.O5,d.tP,x.Pl,k.$],styles:[".widget-configurator-section{margin:15px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9)}.widget-configurator-section__header{padding:15px 5px 15px 15px;height:40px;font-size:16px;font-weight:600;background-color:var(--nui-color-bg-table_header,#f0f0f0);color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6))}.widget-configurator-section__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();var De=l(4433),Wa=l(19797),ka=l(21617);const Va=[$localize`Blue`,$localize`Blue Light`,$localize`Blue Dark`,$localize`Pink`,$localize`Pink Light`,$localize`Pink Dark`,$localize`Sea Green`,$localize`Sea Green Light`,$localize`Sea Green Dark`,$localize`Violet`,$localize`Violet Light`,$localize`Violet Dark`,$localize`Lime Green`,$localize`Lime Green Light`,$localize`Lime Green Dark`,$localize`Orange`,$localize`Orange Light`,$localize`Orange Dark`,$localize`Ultramarine`,$localize`Ultramarine Light`,$localize`Ultramarine Dark`,$localize`Bordeaux`,$localize`Bordeaux Light`,$localize`Bordeaux Dark`,$localize`Ochroid`,$localize`Ochroid Light`,$localize`Ochroid Dark`,$localize`Anthracite`,$localize`Anthracite Light`,$localize`Anthracite Dark`],Ja=[$localize`Down`,$localize`Down Light`,$localize`Critical`,$localize`Critical Light`,$localize`Warning`,$localize`Warning Light`,$localize`Unknown`,$localize`Unknown Light`,$localize`Ok`,$localize`Ok Light`,$localize`Info`,$localize`Info Light`],Dn=l.n(ka)()([...h.wlb,...h.Sj$],[...Va,...Ja]),Zi="var(--nui-color-bg-secondary)",Vi=[...h.wlb,...h.Sj$].map(n=>({color:n,label:Dn[n]}));var xe=l(45934),$e=l(76e3);function Ha(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",27),e._uU(1),e.qZA()),2&n){const t=s.$implicit,i=e.oxw(2);e.Q6J("value",t.key),e.xp6(1),e.hij(" ",i.getLabel(t.key)," ")}}function Ya(n,s){if(1&n&&e._UZ(0,"nui-drop-area"),2&n){const t=e.oxw(2);e.Udp("height",t.height,"px")}}function Ka(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",14),e.NdJ("cdkDragStarted",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.cdkDragStarted(o))}),e.TgZ(2,"div",15),e._UZ(3,"nui-icon",16),e.qZA(),e.TgZ(4,"div",17)(5,"nui-form-field",18)(6,"nui-select-v2",19),e.YNc(7,Ha,2,2,"nui-select-v2-option",20),e.ALo(8,"keyvalue"),e.qZA()(),e.TgZ(9,"nui-form-field",21),e._UZ(10,"nui-textbox",22),e.qZA(),e.TgZ(11,"nui-form-field",23),e._UZ(12,"nui-color-picker",24),e.qZA()(),e.TgZ(13,"button",25),e.NdJ("click",function(){const r=e.CHM(t).index,c=e.oxw();return e.KtG(c.removeRule(r))}),e.qZA(),e.YNc(14,Ya,1,2,"nui-drop-area",26),e.qZA(),e.BQk()}if(2&n){const t=s.$implicit,i=e.oxw();e.xp6(1),e.Q6J("formGroup",t),e.xp6(4),e.Q6J("control",t.get("comparisonType")),e.xp6(1),e.Q6J("formControl",t.get("comparisonType")),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,7,i.availableComparators)),e.xp6(2),e.Q6J("control",t.get("value")),e.xp6(2),e.Q6J("control",t.get("color")),e.xp6(1),e.Q6J("colorPalette",i.palette)}}let bn=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.formBuilder=i,this.formReady=new e.vpe,this.destroy$=new oe.x,this.availableComparators=o.getComparators()}ngOnInit(){var t;this.palette=[{color:Zi,label:$localize`Default color`}].concat(this.backgroundColors),this.formLocal=this.initDefaultRulesGroup(),this.form=this.formBuilder.group({rules:[[]]}),null===(t=this.formLocal.get("rules"))||void 0===t||t.value.valueChanges.pipe((0,st.b)(i=>{var o;return null===(o=this.form.get("rules"))||void 0===o?void 0:o.patchValue([...i])}),(0,_e.R)(this.destroy$)).subscribe(),this.formReady.emit(this.form)}ngOnChanges(t){var i,o;t.rules&&((null===(o=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===o?void 0:o.value).setValue([]),this.rules&&Nn()(this.rules)&&this.rules.forEach(r=>{var c;(null===(c=this.formLocal.get("rules"))||void 0===c?void 0:c.value).push(this.formBuilder.group({comparisonType:[r.comparisonType,[p.kI.required]],value:[r.value,[p.kI.required]],color:[r.color]}))}))}getColorRulesSubtitle(){var t,i,o,r;return 0===(null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).controls.length?$localize`No color rules`:$localize`${(null===(r=null===(o=this.formLocal)||void 0===o?void 0:o.get("rules"))||void 0===r?void 0:r.value).controls.length} color rules`}getLabel(t){var i;return(null===(i=this.availableComparators[t])||void 0===i?void 0:i.label)||"Custom Comparator"}removeRule(t){var i,o;(null===(o=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===o?void 0:o.value).removeAt(t)}addRule(){var t,i;(null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).push(this.formBuilder.group({comparisonType:[">",[p.kI.required]],value:[0,[p.kI.required]],color:[Zi]}))}drop(t){this.move(t.currentIndex,t.previousIndex)}cdkDragStarted(t){this.height=t.source.element.nativeElement.offsetHeight}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initDefaultRulesGroup(){return this.formBuilder.group({rules:[this.formBuilder.array([],p.kI.required)]})}move(t,i){var o,r;const c=null===(r=null===(o=this.formLocal)||void 0===o?void 0:o.get("rules"))||void 0===r?void 0:r.value,g=t>i?1:-1;if(!c)return;const E=c.at(i);for(let P=i;P*g<t*g;P+=g){const Z=c.at(P+g);c.setControl(P,Z)}c.setControl(t,E)}}return n.lateLoadKey="BackgroundColorRulesConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(Ce.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-background-color-rules-configuration"]],inputs:{rules:"rules",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:15,consts:function(){let s,t,i;return s=$localize`:␟3b53b67118a64c409177ae5a41f5978d0e5a95bd␟4898023314284497772:Background color rules`,t=$localize`:␟9c8318d49f867d23436872f260ebf9263e9d0120␟2303161252907317626: Add new rule `,i=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"kpi-color-rules-configuration__accordion-content"],[1,"mb-4"],[1,"mb-3"],["cdkDropList","",3,"cdkDropListDropped"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],t,["cdkDrag","",1,"kpi-color-rule","d-flex","pt-3",3,"formGroup","cdkDragStarted"],[1,"kpi-color-rule__control","justify-content-center","d-flex"],["icon","drag","cdkDragHandle","",1,"kpi-color-rule__drag","align-items-center"],[1,"d-flex","flex-grow-1","flex-wrap"],[1,"mr-3","mb-3","flex-grow-1",3,"control"],["placeholder",i,2,"min-width","220px",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"mr-3","mb-3",2,"max-width","100px",3,"control"],["formControlName","value"],[1,"mr-3","mb-3",3,"control"],["formControlName","color",3,"colorPalette"],["nui-button","","icon","delete","displayStyle","action","type","button",1,"kpi-color-rule__control",3,"click"],[3,"height",4,"cdkDragPlaceholder"],[3,"value"]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"p",9),e._uU(15," We can automatically change the background color when the value meets certain conditions. "),e.qZA(),e.TgZ(16,"div",10),e.NdJ("cdkDropListDropped",function(r){return i.drop(r)}),e.YNc(17,Ka,15,9,"ng-container",11),e.qZA(),e.TgZ(18,"button",12),e.NdJ("click",function(){return i.addRule()}),e.SDv(19,13),e.qZA()()()()),2&t){let o;e.Q6J("formGroup",i.formLocal)("state",e.lcZ(1,6,e.lcZ(2,8,i.formLocal))),e.xp6(4),e.Q6J("icon",e.lcZ(5,10,e.xi3(6,12,i.formLocal,"color"))),e.xp6(6),e.Q6J("title",i.getColorRulesSubtitle()),e.xp6(1),e.hij(" ",i.getColorRulesSubtitle()," "),e.xp6(6),e.Q6J("ngForOf",null==(o=i.formLocal.get("rules"))?null:o.value.controls)}},dependencies:[d.sg,p.JJ,p.JL,p.oH,p.sg,p.u,et.Wj,et.Zt,et.Bh,et.Hk,a.oJW,a.XHW,a.hgI,a.r0F,a.j_n,a.rLF,De.J,Fi,qt,d.Ov,d.Nd,xe.F,$e.d],styles:[".kpi-color-rules-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-color-rules-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-color-rules-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-color-rules-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:10px}.kpi-color-rules-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}.kpi-color-rule[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-content,#fff)}.kpi-color-rule__drag[_ngcontent-%COMP%]{cursor:move}.kpi-color-rule__control[_ngcontent-%COMP%]{min-width:30px;height:30px}"],changeDetection:0}),n})();var ke=l(7350),Xa=l(34235),ni=l.n(Xa);function ja(n,s){1&n&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,3),e.qZA()()),2&n&&e.Q6J("allowDismiss",!1)}function qa(n,s){if(1&n&&(e.TgZ(0,"nui-message",4)(1,"b"),e.SDv(2,5),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw();e.Q6J("allowDismiss",!1),e.xp6(3),e.hij(" ",t.dataSourceError.message||t.dataSourceError.type," ")}}let Lt=(()=>{class n{constructor(t){this.changeDetector=t,this.errorState=new e.vpe,this.onDestroy$=new oe.x,this.dataSourceClear$=new oe.x}ngOnChanges(t){t.dataSource&&this.onDataSourceChanged()}onDataSourceChanged(){var t,i,o;this.dataSourceClear$.next(),null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.busy)||void 0===i||i.pipe((0,_e.R)(this.dataSourceClear$)).subscribe(r=>{this.busy=r,this.changeDetector.markForCheck()}),null===(o=this.dataSource)||void 0===o||o.outputsSubject.pipe((0,_e.R)(this.dataSourceClear$)).subscribe(r=>{this.data=ni()(r?.result)?r:r?.result,this.dataSourceError=r?.error,this.errorState.emit(!!this.dataSourceError),this.changeDetector.markForCheck()})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete(),this.dataSourceClear$.next(),this.dataSourceClear$.complete()}}return n.lateLoadKey="DataSourceErrorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-data-source-error"]],inputs:{dataSource:"dataSource"},outputs:{errorState:"errorState"},features:[e.TTD],decls:3,vars:2,consts:function(){let s,t;return s=$localize`:␟7471accb59033b8bee2f7d6907d8deefcfe7d5de␟8643306703234832815:Select a data source`,t=$localize`:␟c399afe21627dcfed1a9865c0e084fac997896c2␟4016661485141937765:Something went wrong with the data source: `,[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],s,["type","critical",1,"mt-4","d-block",3,"allowDismiss"],t]},template:function(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,ja,3,1,"nui-message",0),e.YNc(2,qa,4,2,"nui-message",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!i.dataSource),e.xp6(1),e.Q6J("ngIf",i.dataSourceError))},dependencies:[d.O5,a.qqZ],encapsulation:2,changeDetection:0}),n})();var Qe=l(35720);function el(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("title",null==t?null:t.label)("value",t),e.xp6(1),e.hij(" ",t.label," ")}}function tl(n,s){}const il=function(){return["errorState"]},nl=function(n){return{dataSource:n}};let Fn=(()=>{class n{constructor(t,i,o,r,c,g,E){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.providerRegistryService=r,this.eventBus=c,this.injector=g,this.logger=E,this.dataSourceProviders=[],this.errorComponent=Lt.lateLoadKey,this.formReady=new e.vpe,this.hasDataSourceError=!1,this.dataFieldIds=new oe.x}ngOnInit(){var t;this.form=this.formBuilder.group({providerId:[this.providerId||"",[p.kI.required]],properties:[this.properties||{}],dataSource:[null,[p.kI.required]]}),this.form.setValidators([()=>this.hasDataSourceError?{dataSourceError:!0}:null]),null===(t=this.form.get("dataSource"))||void 0===t||t.valueChanges.subscribe(i=>{var o,r;null===(o=this.form.get("providerId"))||void 0===o||o.setValue(i?.providerId),i?.properties&&(null===(r=this.form.get("properties"))||void 0===r||r.setValue(i?.properties))}),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,r,c,g,E,P,Z,V;if(t.providerId&&!t.providerId.isFirstChange()||t.properties&&!t.properties.isFirstChange()){const ee=null===(i=t.providerId)||void 0===i?void 0:i.previousValue,ge=null===(o=t.properties)||void 0===o?void 0:o.previousValue;if(ee!==this.providerId||ge!==this.properties){const ie=this.dataSourceProviders.find(Oe=>{var he,Ie;return Oe.providerId===this.providerId&&He()(null!==(he=Oe.properties)&&void 0!==he?he:{},null!==(Ie=this.properties)&&void 0!==Ie?Ie:{})});ie?(null===(Z=null===(P=this.form)||void 0===P?void 0:P.get("dataSource"))||void 0===Z||Z.setValue(ie),this.invokeDataSource(ie)):(null===(c=null===(r=this.form)||void 0===r?void 0:r.get("providerId"))||void 0===c||c.setValue(this.providerId),null===(E=null===(g=this.form)||void 0===g?void 0:g.get("properties"))||void 0===E||E.setValue(this.properties),this.invokeDataSource({properties:this.properties,providerId:this.providerId}))}}if(t.dataSourceProviders&&!t.dataSourceProviders.isFirstChange()&&1===this.dataSourceProviders.length){const ee=this.dataSourceProviders[0];null===(V=this.form.get("dataSource"))||void 0===V||V.setValue(ee),this.invokeDataSource(ee)}}ngAfterViewInit(){var t;if(this.dataSourceProviders&&1===this.dataSourceProviders.length){const i=this.dataSourceProviders[0];null===(t=this.form.get("dataSource"))||void 0===t||t.setValue(i),this.invokeDataSource(i)}}onDataSourceSelected(t){this.eventBus.next(ke.ay,{}),this.invokeDataSource(t)}invokeDataSource(t){var i;if(!t.providerId)return;const o=this.providerRegistryService.getProvider(t.providerId);if(o){this.dataSource=this.providerRegistryService.getProviderInstance(o,this.injector),this.eventBus.next(ke.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,mi.q)(1)).subscribe(c=>{this.eventBus.next(ke.PF,{payload:c}),this.dataFieldIds.next(Object.keys(c.result||c))});const r=this.dataSource;r?.updateConfiguration&&r.updateConfiguration(null!==(i=t.properties)&&void 0!==i?i:{}),setTimeout(()=>{this.dataSource.applyFilters()})}else this.logger.warn("No provider found for id:",t.providerId)}onErrorState(t){this.hasDataSourceError=t,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}return n.lateLoadKey="DataSourceConfigurationV2Component",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Qe.p),e.Y36(p.qu),e.Y36(S.C),e.Y36(m.nY),e.Y36(e.zs3),e.Y36(a.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",properties:"properties",providerId:"providerId",errorComponent:"errorComponent"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:28,consts:function(){let s,t;return s=$localize`:␟1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0␟1107354728956440783:Data Source`,t=$localize`:␟87aabb92d16c162e46a9ef3703445351a3e41739␟6527825109146827187:Select data source`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],[3,"control"],["placeholder",t,"formControlName","dataSource",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-select-v2",9),e.NdJ("valueSelected",function(c){return i.onDataSourceSelected(c)}),e.ALo(15,"async"),e.YNc(16,el,2,3,"nui-select-v2-option",10),e.qZA()(),e.ynx(17,11,12),e.NdJ("output",function(c){return i.onErrorState(c.payload)}),e.YNc(19,tl,0,0,"ng-template",13),e.NdJ("attached",function(c){e.CHM(o);const g=e.MAs(18);return e.KtG(g.attached(c))}),e.BQk(),e.qZA()()}if(2&t){const o=e.MAs(18);let r,c,g;e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"database"))),e.xp6(6),e.Q6J("title",null==(r=i.form.get("dataSource"))||null==r.value?null:r.value.label),e.xp6(1),e.hij(" ",null==(c=i.form.get("dataSource"))||null==c.value?null:c.value.label," "),e.xp6(2),e.Q6J("control",i.form.get("dataSource")),e.xp6(1),e.Q6J("title",null==(g=i.form.get("dataSource"))||null==g.value?null:g.value.label)("popupViewportMargin",e.lcZ(15,23,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.dataSourceProviders),e.xp6(1),e.Q6J("componentId",i.errorComponent)("componentType",i.errorComponent)("outputs",e.DdM(25,il))("properties",e.VKq(26,nl,i.dataSource)),e.xp6(2),e.Q6J("cdkPortalOutlet",o.portal)}},dependencies:[d.sg,p.JJ,p.JL,p.sg,p.u,x.Pl,k.$,a.oJW,a.hgI,a.j_n,a.rLF,De.J,d.Ov,xe.F,$e.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function ol(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("title",t)("value",t),e.xp6(1),e.hij(" ",t," ")}}function rl(n,s){}const sl=function(){return["errorState"]},al=function(n){return{dataSource:n}};let kt=(()=>{class n{constructor(t,i,o,r,c,g,E){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.providerRegistryService=r,this.eventBus=c,this.injector=g,this.logger=E,this.dataSourceProviders=[],this.errorComponent=Lt.lateLoadKey,this.formReady=new e.vpe,this.hasDataSourceError=!1,this.dsOutput=new oe.x,this.dataFieldIds=new oe.x}ngOnInit(){this.form=this.formBuilder.group({providerId:[this.providerId||"",[p.kI.required]],properties:this.formBuilder.group(this.properties||{})}),this.form.setValidators([()=>this.hasDataSourceError?{dataSourceError:!0}:null]),this.formReady.emit(this.form)}ngOnChanges(t){var i;t.providerId&&!t.providerId.isFirstChange()&&t.providerId.previousValue!==this.providerId&&(null===(i=this.form.get("providerId"))||void 0===i||i.setValue(this.providerId),this.invokeDataSource(this.providerId))}onDataSourceChange(t){this.eventBus.next(ke.ay,{}),this.invokeDataSource(t)}invokeDataSource(t){if(!t)return;const i=this.providerRegistryService.getProvider(t);i?(this.dataSource=this.providerRegistryService.getProviderInstance(i,this.injector),this.eventBus.next(ke.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,mi.q)(1)).subscribe(o=>{this.eventBus.next(ke.PF,{payload:o}),this.dsOutput.next(o);const r=o?.result||o;r&&this.dataFieldIds.next(Object.keys(r))}),setTimeout(()=>{this.dataSource.applyFilters()})):this.logger.warn("No provider found for id:",t)}onErrorState(t){this.hasDataSourceError=t,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}return n.lateLoadKey="DataSourceConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Qe.p),e.Y36(p.qu),e.Y36(S.C),e.Y36(m.nY),e.Y36(e.zs3),e.Y36(a.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",errorComponent:"errorComponent",properties:"properties",providerId:"providerId"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:28,consts:function(){let s,t,i;return s=$localize`:␟1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0␟1107354728956440783:Data Source`,t=$localize`:␟7f3bce5049b2c517378a6624460b84d2da9ce332␟7245698475792706694:Select Data Source`,i=$localize`:␟18c18c5d61f92ef5c3caa37df00fc514fef3d90c␟4806513497858020797:Data Sources`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],["caption",t,3,"control"],["placeholder",i,"formControlName","providerId",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-select-v2",9),e.NdJ("valueSelected",function(c){return i.onDataSourceChange(c)}),e.ALo(15,"async"),e.YNc(16,ol,2,3,"nui-select-v2-option",10),e.qZA()(),e.ynx(17,11,12),e.NdJ("output",function(c){return i.onErrorState(c.payload)}),e.YNc(19,rl,0,0,"ng-template",13),e.NdJ("attached",function(c){e.CHM(o);const g=e.MAs(18);return e.KtG(g.attached(c))}),e.BQk(),e.qZA()()}if(2&t){const o=e.MAs(18);let r,c,g;e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"database"))),e.xp6(6),e.Q6J("title",null==(r=i.form.get("providerId"))?null:r.value),e.xp6(1),e.hij(" ",null==(c=i.form.get("providerId"))?null:c.value," "),e.xp6(2),e.Q6J("control",i.form.get("providerId")),e.xp6(1),e.Q6J("title",null==(g=i.form.get("providerId"))?null:g.value)("popupViewportMargin",e.lcZ(15,23,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.dataSourceProviders),e.xp6(1),e.Q6J("componentId",i.errorComponent)("componentType",i.errorComponent)("outputs",e.DdM(25,sl))("properties",e.VKq(26,al,i.dataSource)),e.xp6(2),e.Q6J("cdkPortalOutlet",o.portal)}},dependencies:[d.sg,p.JJ,p.JL,p.sg,p.u,x.Pl,k.$,a.oJW,a.hgI,a.j_n,a.rLF,De.J,d.Ov,xe.F,$e.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function ll(n,s){1&n&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,3),e.qZA()()),2&n&&e.Q6J("allowDismiss",!1)}function dl(n,s){1&n&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,4),e.qZA()()),2&n&&e.Q6J("allowDismiss",!1)}function cl(n,s){if(1&n&&(e.TgZ(0,"nui-message",5)(1,"b"),e.SDv(2,6),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw();e.Q6J("allowDismiss",!1),e.xp6(3),e.hij(" ",t.dataSourceError.message||t.dataSourceError.type," ")}}let xn=(()=>{class n extends Lt{constructor(t){super(t),this.changeDetector=t}ngOnDestroy(){super.ngOnDestroy()}}return n.lateLoadKey="TableDataSourceErrorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-data-source-error"]],features:[e.qOj],decls:4,vars:3,consts:function(){let s,t,i;return s=$localize`:␟f4720e7c5bf93bfef522f919823f31793a4a09fb␟3836782658203534481:Data source needs to be configured`,t=$localize`:␟7471accb59033b8bee2f7d6907d8deefcfe7d5de␟8643306703234832815:Select a data source`,i=$localize`:␟c399afe21627dcfed1a9865c0e084fac997896c2␟4016661485141937765:Something went wrong with the data source: `,[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],s,t,["type","critical",1,"mt-4","d-block",3,"allowDismiss"],i]},template:function(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,ll,3,1,"nui-message",0),e.YNc(2,dl,3,1,"nui-message",0),e.YNc(3,cl,4,2,"nui-message",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.dataSource&&!(null!=i.data&&i.data.dataFields.length)&&!i.dataSourceError&&!i.busy),e.xp6(1),e.Q6J("ngIf",!i.dataSource),e.xp6(1),e.Q6J("ngIf",i.dataSourceError))},dependencies:[d.O5,a.qqZ],encapsulation:2,changeDetection:0}),n})();function _l(n,s){}let Ji=(()=>{class n{get urlCustomContent(){return this.form.get("urlCustomContent")}get htmlCustomContent(){return this.form.get("htmlCustomContent")}get modeValue(){return this.form.get("mode")}get customEmbeddedContentValue(){return this.form.get("customEmbeddedContent")}constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.mode=M.URL,this.formReady=new e.vpe,this.destroy$=new oe.x,this.form=this.formBuilder.group({mode:[this.mode],urlCustomContent:[""],htmlCustomContent:[""],customEmbeddedContent:[""]}),this.modes=[{value:M.URL,displayValue:$localize`Show the contents of a specific URL`},{value:M.HTML,displayValue:$localize`Show the exact HTML I supply below`}]}ngOnInit(){this.initializeForm(),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,r;t.customEmbeddedContent&&(this.mode===M.URL?null===(i=this.urlCustomContent)||void 0===i||i.setValue(this.customEmbeddedContent):this.mode===M.HTML&&(null===(o=this.htmlCustomContent)||void 0===o||o.setValue(this.customEmbeddedContent))),t.mode&&(null===(r=this.modeValue)||void 0===r||r.setValue(t.mode.currentValue))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){var t,i,o;null===(t=this.modeValue)||void 0===t||t.valueChanges.pipe((0,_e.R)(this.destroy$)).subscribe(r=>{var c,g,E,P,Z,V,ee,ge;r===M.URL?(null===(c=this.customEmbeddedContentValue)||void 0===c||c.setValue(null===(g=this.form.get("urlCustomContent"))||void 0===g?void 0:g.value),null===(E=this.htmlCustomContent)||void 0===E||E.disable(),null===(P=this.urlCustomContent)||void 0===P||P.enable()):r===M.HTML&&(null===(Z=this.customEmbeddedContentValue)||void 0===Z||Z.setValue(null===(V=this.form.get("htmlCustomContent"))||void 0===V?void 0:V.value),null===(ee=this.urlCustomContent)||void 0===ee||ee.disable(),null===(ge=this.htmlCustomContent)||void 0===ge||ge.enable())}),null===(i=this.urlCustomContent)||void 0===i||i.valueChanges.pipe((0,_e.R)(this.destroy$)).subscribe(r=>{var c;null===(c=this.customEmbeddedContentValue)||void 0===c||c.setValue(r)}),null===(o=this.htmlCustomContent)||void 0===o||o.valueChanges.pipe((0,_e.R)(this.destroy$)).subscribe(r=>{var c;null===(c=this.customEmbeddedContentValue)||void 0===c||c.setValue(r)})}}return n.lateLoadKey="EmbeddedContentConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-embedded-content-configuration"]],inputs:{mode:"mode",messageComponent:"messageComponent",customEmbeddedContent:"customEmbeddedContent"},outputs:{formReady:"formReady"},features:[e.TTD],decls:26,vars:23,consts:function(){let s,t;return s=$localize`:␟d18bb86a09ed7c63d7d00a1dad418e5328f59406␟5492801901920760741:Embedded Content`,t=$localize`:␟6a175ac244e51f9c713f8829e3ba9192f6728ba2␟9012225804233265629:What do you want to show in the widget?`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],s,[1,"nui-text-secondary"],[1,"embedded-configurator-section__accordion-content"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["caption",t,3,"control"],["formControlName","mode","name","mode","required","",3,"value","valueChange"],[3,"value"],[3,"control"],["formControlName","urlCustomContent"],["formControlName","htmlCustomContent","rows","7",1,"textarea-scrollable"]]},template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11," Show the specific HTML I supply "),e.qZA()()(),e.TgZ(12,"div",7),e.ynx(13,8,9),e.YNc(15,_l,0,0,"ng-template",10),e.NdJ("attached",function(c){e.CHM(o);const g=e.MAs(14);return e.KtG(g.attached(c))}),e.BQk(),e.TgZ(16,"nui-form-field",11)(17,"nui-radio-group",12),e.NdJ("valueChange",function(c){return i.mode=c}),e.TgZ(18,"nui-radio",13),e._uU(19),e.qZA(),e.TgZ(20,"nui-form-field",14),e._UZ(21,"nui-textbox",15),e.qZA(),e.TgZ(22,"nui-radio",13),e._uU(23),e.qZA(),e.TgZ(24,"nui-form-field",14),e._UZ(25,"nui-textbox",16),e.qZA()()()()()}if(2&t){const o=e.MAs(14);e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"tag"))),e.xp6(9),e.Q6J("componentType",i.messageComponent.componentType)("properties",i.messageComponent.properties),e.xp6(2),e.Q6J("cdkPortalOutlet",o.portal),e.xp6(1),e.Q6J("control",i.form.get("mode")),e.xp6(1),e.Q6J("value",i.mode),e.xp6(1),e.Q6J("value",i.modes[0].value),e.xp6(1),e.hij(" ",i.modes[0].displayValue," "),e.xp6(1),e.Q6J("control",i.form.get("urlCustomContent")),e.xp6(2),e.Q6J("value",i.modes[1].value),e.xp6(1),e.hij(" ",i.modes[1].displayValue," "),e.xp6(1),e.Q6J("control",i.form.get("htmlCustomContent"))}},dependencies:[p.JJ,p.JL,p.Q7,p.sg,p.u,x.Pl,k.$,a.oJW,a.XHW,a.hgI,a.UKb,a.wTj,De.J,d.Ov,xe.F,$e.d],styles:[".embedded-configurator-section__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function ul(n,s){if(1&n&&(e.tHW(0,1,1),e._UZ(1,"a",3),e.N_p()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("href",t.link.href,e.LSH)("target",t.link.target),e.pQV(t.link.text),e.QtT(0)}}let Ln=(()=>{class n{constructor(t){this.changeDetector=t}}return n.lateLoadKey="InfoMessageConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-info-message-configuration"]],inputs:{emphasizeText:"emphasizeText",generalText:"generalText",link:"link",allowDismiss:"allowDismiss"},decls:4,vars:4,consts:function(){let s;return s=$localize`:␟a533c3d45bdc55cc7b8fce70d448ffafc70b0f5b␟4231249583296268212:${"\ufffd#2\ufffd"}:START_BOLD_TEXT: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_LINK:${"\ufffd0:1\ufffd"}:INTERPOLATION_2:${"\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd"}:CLOSE_LINK:`,[["type","info",3,"allowDismiss"],s,[3,"href","target",4,"ngIf"],[3,"href","target"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-message",0),e.tHW(1,1),e._UZ(2,"b"),e.YNc(3,ul,2,3,"a",2),e.N_p(),e.qZA()),2&t&&(e.Q6J("allowDismiss",i.allowDismiss),e.xp6(3),e.Q6J("ngIf",i.link),e.pQV(i.emphasizeText)(i.generalText),e.QtT(1))},dependencies:[d.O5,a.qqZ],encapsulation:2,changeDetection:0}),n})();var Gn=l(39841);function pl(n,s){if(1&n&&(e.TgZ(0,"div",14)(1,"nui-form-field",15),e._UZ(2,"nui-textbox",16),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("control",t.form.get("units"))}}let wn=(()=>{class n{constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.defaultColor={label:$localize`Default color`,color:Zi},this.label="",this.backgroundColor=this.defaultColor.color,this.units="",this.formReady=new e.vpe}ngOnInit(){this.backgroundColors=[...this.backgroundColors],this.backgroundColors.unshift(this.defaultColor),this.form=this.formBuilder.group({label:[this.label,[p.kI.required]],backgroundColor:[this.backgroundColor,[p.kI.required]]}),this.configurableUnits&&this.form.addControl("units",this.formBuilder.control(this.units));const t=this.form.get("label"),i=t?.valueChanges.pipe((0,Bi.O)(t.value)),o=this.form.get("backgroundColor"),r=o?.valueChanges.pipe((0,Bi.O)(o?.value));this.subtitle$=(0,Gn.a)([i?.pipe((0,St.U)(c=>c||$localize`no label`)),r?.pipe((0,St.U)(c=>Dn[c]||$localize`Default Color`))]).pipe((0,St.U)(c=>c.join(", "))),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,r;t.label&&(null===(i=this.form)||void 0===i||i.patchValue({label:t.label.currentValue})),t.backgroundColor&&(null===(o=this.form)||void 0===o||o.patchValue({backgroundColor:t.backgroundColor.currentValue})),t.units&&(null===(r=this.form)||void 0===r||r.patchValue({units:t.units.currentValue}))}}return n.lateLoadKey="KpiDescriptionConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-kpi-description-configuration"]],inputs:{componentId:"componentId",configurableUnits:"configurableUnits",label:"label",backgroundColor:"backgroundColor",units:"units",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[e.TTD],decls:21,vars:22,consts:function(){let s,t,i,o,r,c;return s=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`,o=$localize`:␟e088252c0e2ede83d27a24702b1f77c90cee60b7␟3468485835384597147:Background Color`,r=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,c=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"kpi-description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"form-group",3,"control"],["formControlName","label","placeholder",i],["caption",o,1,"form-group",3,"control"],["formControlName","backgroundColor",1,"kpi-description-configuration__accordion-content__color-picker",3,"colorPalette"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",r,1,"form-group",3,"control"],["formControlName","units","placeholder",c]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e.ALo(11,"async"),e._uU(12),e.ALo(13,"async"),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",8)(16,"nui-form-field",9),e._UZ(17,"nui-textbox",10),e.qZA()(),e.TgZ(18,"nui-form-field",11),e._UZ(19,"nui-color-picker",12),e.qZA(),e.YNc(20,pl,3,1,"div",13),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,9,e.lcZ(2,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,13,e.xi3(6,15,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",e.lcZ(11,18,i.subtitle$)),e.xp6(2),e.hij(" ",e.lcZ(13,20,i.subtitle$)," "),e.xp6(4),e.Q6J("control",i.form.get("label")),e.xp6(2),e.Q6J("control",i.form.get("backgroundColor")),e.xp6(1),e.Q6J("colorPalette",i.backgroundColors),e.xp6(1),e.Q6J("ngIf",i.configurableUnits))},dependencies:[d.O5,p.JJ,p.JL,p.sg,p.u,a.oJW,a.XHW,a.hgI,De.J,Fi,d.Ov,xe.F,$e.d],styles:[".kpi-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-description-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-description-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-description-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:10px}.kpi-description-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}"],changeDetection:0}),n})();var gl=l(25032),Ae=(()=>{return(n=Ae||(Ae={})).Second="second",n.Minute="minute",n.Hour="hour",Ae;var n})();const $n={[Ae.Second]:1e3,[Ae.Minute]:6e4,[Ae.Hour]:36e5},hl={[Ae.Hour]:$localize`:hours unit (long):hours`,[Ae.Minute]:$localize`:minutes unit (long):minutes`,[Ae.Second]:$localize`:seconds unit (long):seconds`},oi={[Ae.Hour]:$localize`:hours unit (short):h`,[Ae.Minute]:$localize`:minutes unit (short):min`,[Ae.Second]:$localize`:seconds unit (short):sec`};function Zt(n,s){return $n[n]/$n[s]}function ml(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",7),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.label," ")}}let Hi=(()=>{class n{constructor(t,i){this.fb=t,this.cd=i,this.possibleUnits=[Ae.Second,Ae.Minute,Ae.Hour],this.unitItems=[],this.displayedUnitItems=[],this.currentUnit=null,this.valueChangeFix=gl.Z,this.destroy$=new oe.x}ngOnInit(){this.generateUnitItems(),this.filterUnitItems(),this.createForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getNumberMin(){if(!this.unitControl.value||null==this.minSeconds)return;const t=Zt(Ae.Second,this.unitControl.value.id);return Math.ceil(this.minSeconds*t)}getNumberMax(){if(!this.unitControl.value||null==this.maxSeconds)return;const t=Zt(Ae.Second,this.unitControl.value.id);return Math.floor(this.maxSeconds*t)}writeValue(t){if(isFinite(t)&&this.isRangeValid()&&this.unitControl.value){const i=Zt(Ae.Second,this.unitControl.value.id);this.numberControl.setValue(t*i)}else this.numberControl.setValue(null);this.cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){}setDisabledState(t){t?(this.numberControl.disable({emitEvent:!1}),this.unitControl.disable({emitEvent:!1})):(this.numberControl.enable({emitEvent:!1}),this.unitControl.enable({emitEvent:!1})),this.cd.markForCheck()}resetUnits(){this.unitControl.setValue(this.displayedUnitItems[0])}generateUnitItems(){this.possibleUnits.forEach((t,i)=>{this.unitItems[i]={id:t,label:hl[t]}})}filterUnitItems(){this.displayedUnitItems=this.unitItems.filter(t=>{let i=!1;if(null!=this.maxSeconds){const o=Zt(Ae.Second,t.id);i=Math.floor(this.maxSeconds*o)<=0}return!i})}createForm(){this.form=this.fb.group({number:[1,[p.kI.required]],unit:this.displayedUnitItems[0]}),this.numberControl=this.form.get("number"),this.unitControl=this.form.get("unit"),this.unitControl.value&&(this.currentUnit=this.unitControl.value.id),this.form.valueChanges.pipe((0,_e.R)(this.destroy$)).subscribe(()=>{this.updateError(),this.emitValueChange()})}updateError(){this.isNumberValid()?this.numberControl.setErrors(null):this.numberControl.setErrors({invalidNumber:!0})}emitValueChange(){const t=this.numberControl.value,i=this.unitControl.value;if(null==t||null==i)return void(this.onChange&&this.onChange(null));const o=Zt(i.id,Ae.Second);this.onChange&&this.onChange(t*o)}isRangeValid(){return this.minSeconds<=this.maxSeconds||null==this.maxSeconds}isNumberValid(){const t=this.numberControl.value;return!(t<this.minSeconds||t%1!=0)&&(!(t*Zt(this.unitControl.value.id,Ae.Second)>this.maxSeconds)&&this.isRangeValid())}getNumberValidationMessage(){const t={min:this.getNumberMin(),max:this.getNumberMax(),whole:!0};return this.getLocalizedNumberValidationMessage(t)}getLocalizedNumberValidationMessage(t){const{min:i,max:o,whole:r}=t,c=r?$localize`a whole number`:$localize`a number`;return null!=i&&null!=o?i===o?$localize`Must be ${c} equal to ${i}`:$localize`Must be ${c} between ${i} and ${o}`:null==i&&null!=o?$localize`Must be ${c} not larger than ${o}`:null!=i&&null==o?$localize`Must be ${c} not smaller than ${i}`:$localize`Must be ${c}`}validate(){var t;return(null===(t=this.form.get("number"))||void 0===t?void 0:t.errors)||null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-refresh-rate-configurator"]],inputs:{minSeconds:"minSeconds",maxSeconds:"maxSeconds"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}])],decls:8,vars:6,consts:[[1,"d-flex","flex-column",3,"formGroup"],[1,"d-flex","flex-row"],["formControlName","number","customBoxWidth","90px",3,"minValue","maxValue","valueChange"],["formControlName","unit",1,"ml-3"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["for","invalidNumber"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"nui-textbox-number",2),e.NdJ("valueChange",function(){return i.valueChangeFix()}),e.qZA(),e.TgZ(3,"nui-select-v2",3),e.YNc(4,ml,2,2,"nui-select-v2-option",4),e.qZA()(),e.TgZ(5,"nui-form-field",5)(6,"nui-validation-message",6),e._uU(7),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("minValue",i.minSeconds)("maxValue",i.maxSeconds),e.xp6(2),e.Q6J("ngForOf",i.displayedUnitItems),e.xp6(1),e.Q6J("control",i.form.get("number")),e.xp6(2),e.hij(" ",i.getNumberValidationMessage()," "))},dependencies:[d.sg,p._Y,p.JJ,p.JL,p.sg,p.u,a.I5I,a.hgI,a.j_n,a.rLF,a.CfE],encapsulation:2,changeDetection:0}),n})();function fl(n,s){if(1&n&&(e.TgZ(0,"div",15),e.SDv(1,16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.pQV(t.getDurationLabel(t.refresherSettings.refreshRateSeconds)),e.QtT(1)}}let Un=(()=>{class n{constructor(t,i,o,r,c){this.changeDetector=t,this.formBuilder=i,this.logger=o,this.refresherSettings=r,this.cd=c,this.minSeconds=1,this.maxSeconds=86400,this.overrideDefaultSettingsCaption=$localize`Custom refresh rate`,this.overrideDefaultSettings=!0,this.formReady=new e.vpe,this.destroyed$=new oe.x,this.resetInterval=()=>{var g;this.refreshRateComp.resetUnits(),null===(g=this.form.get("interval"))||void 0===g||g.setValue(this.interval||this.minSeconds)}}ngOnInit(){var t;this.form=this.formBuilder.group({enabled:[!0,[p.kI.required]],overrideDefaultSettings:[this.overrideDefaultSettings,[p.kI.required]],interval:[null!==(t=this.interval)&&void 0!==t?t:0,[p.kI.required]]}),this.form.statusChanges.pipe((0,_e.R)(this.destroyed$)).subscribe(()=>{this.form.markAllAsTouched(),this.cd.detectChanges()}),(0,Gn.a)([this.form.controls.enabled.valueChanges,this.form.controls.overrideDefaultSettings.valueChanges]).pipe((0,Xt.h)(i=>i.some(o=>!o)),(0,st.b)(this.resetInterval),(0,_e.R)(this.destroyed$)).subscribe(),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,r,c,g,E;t.enabled&&(null===(o=null===(i=this.form)||void 0===i?void 0:i.get("enabled"))||void 0===o||o.patchValue(this.enabled)),t.interval&&(null===(c=null===(r=this.form)||void 0===r?void 0:r.get("interval"))||void 0===c||c.patchValue(this.interval)),t.overrideDefaultSettings&&(null===(E=null===(g=this.form)||void 0===g?void 0:g.get("overrideDefaultSettings"))||void 0===E||E.patchValue(this.overrideDefaultSettings))}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getHeaderSubtitle(){var t,i,o;let r="";return null!==(t=this.form.get("enabled"))&&void 0!==t&&t.value?(r+=$localize`Enabled`,r+=", ",null!==(i=this.form.get("overrideDefaultSettings"))&&void 0!==i&&i.value?r+=this.getDurationLabel(null===(o=this.form.get("interval"))||void 0===o?void 0:o.value):r+=$localize`Use default value`+" ("+this.getDurationLabel(this.refresherSettings.refreshRateSeconds)+")"):r+=$localize`Disabled`,r}getDurationLabel(t){let i=t,o="";const r=Math.floor(i/3600);i%=3600;const c=Math.floor(i/60),g=i%60;return r>0&&(o+=r+" "+oi[Ae.Hour]+" "),c>0&&(o+=c+" "+oi[Ae.Minute]+" "),g>0&&(o+=g+" "+oi[Ae.Second]+" "),o=o.trim(),""===o?"0 "+oi[Ae.Second]:o}}return n.lateLoadKey="RefresherConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(a.mQy),e.Y36(hi.g),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-refresher-configuration"]],viewQuery:function(t,i){if(1&t&&e.Gf(Hi,5),2&t){let o;e.iGM(o=e.CRH())&&(i.refreshRateComp=o.first)}},inputs:{enabled:"enabled",interval:"interval",minSeconds:"minSeconds",maxSeconds:"maxSeconds",overrideDefaultSettingsCaption:"overrideDefaultSettingsCaption",overrideDefaultSettings:"overrideDefaultSettings"},outputs:{formReady:"formReady"},features:[e.TTD],decls:26,vars:25,consts:function(){let s,t,i;return s=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`,t=$localize`:␟913ac9d5354818a43028659e12bb79cc3a8d19e3␟2148212086281974142:Refresh widget periodically`,i=$localize`:␟094103d9c7a2be810d7fc6a1935e14695f19925f␟4443005292001830097: By default, the widget will refresh every ${"\ufffd0\ufffd"}:INTERPOLATION:. `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"d-flex","flex-column","nui-refresher-configuration__accordion-content"],[3,"control"],["formControlName","enabled"],t,[1,"mt-4"],["formControlName","overrideDefaultSettings"],["class","nui-help-hint",4,"ngIf"],["formControlName","interval",3,"minSeconds","maxSeconds"],[1,"nui-help-hint"],i]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div")(14,"nui-form-field",8)(15,"nui-switch",9),e.SDv(16,10),e.qZA()()(),e.TgZ(17,"div")(18,"div",11)(19,"nui-form-field",8)(20,"nui-switch",12),e._uU(21),e.YNc(22,fl,2,1,"div",13),e.qZA()()(),e.TgZ(23,"div",11)(24,"nui-form-field",8),e._UZ(25,"nui-refresh-rate-configurator",14),e.qZA()()()()()),2&t){let o,r,c;e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"reset"))),e.xp6(6),e.Q6J("title",i.getHeaderSubtitle()),e.xp6(1),e.hij(" ",i.getHeaderSubtitle()," "),e.xp6(3),e.Q6J("control",i.form.get("enabled")),e.xp6(3),e.ekj("hidden",!(null!=(o=i.form.get("enabled"))&&o.value)),e.xp6(2),e.Q6J("control",i.form.get("overrideDefaultSettings")),e.xp6(2),e.hij("",i.overrideDefaultSettingsCaption," "),e.xp6(1),e.Q6J("ngIf",!(null!=(r=i.form.get("overrideDefaultSettings"))&&r.value)),e.xp6(1),e.ekj("hidden",!(null!=(c=i.form.get("overrideDefaultSettings"))&&c.value)),e.xp6(1),e.Q6J("control",i.form.get("interval")),e.xp6(1),e.Q6J("minSeconds",i.minSeconds)("maxSeconds",i.maxSeconds)}},dependencies:[d.O5,p.JJ,p.JL,p.sg,p.u,a.oJW,a.hgI,a.qUD,De.J,Hi,d.Ov,xe.F,$e.d],styles:[".nui-refresher-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),n})();var Tl=l(45588),Cl=l.n(Tl);const Ol=n=>{const s=n.get("criticalThresholdValue"),t=n.get("warningThresholdValue"),i=n.get("reversedThresholds"),o=n.get("showThresholds");if(!s)throw new Error("criticalThresholdValue formControl is not defined");if((0,a.fS1)(s,"min","max"),!t)throw new Error("warningThresholdValue formControl is not defined");if((0,a.fS1)(t,"min","max"),o?.value){if(z()(t.value))return null;if(i?.value){if(s.value>=t.value)return t.setErrors({min:!0}),s.setErrors({max:!0}),{thresholds:!0}}else if(s.value<=t.value)return t.setErrors({max:!0}),s.setErrors({min:!0}),{thresholds:!0}}return null};function Il(n,s){if(1&n&&(e.TgZ(0,"nui-radio",14),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.displayValue," ")}}function vl(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"nui-form-field",17),e._UZ(3,"nui-textbox-number",18),e.TgZ(4,"nui-validation-message",11),e.SDv(5,19),e.qZA(),e.TgZ(6,"nui-validation-message",20),e.SDv(7,21),e.qZA(),e.TgZ(8,"nui-validation-message",22),e.SDv(9,23),e.qZA()()(),e.TgZ(10,"div",16)(11,"nui-form-field",24),e._UZ(12,"nui-textbox-number",25),e.TgZ(13,"nui-validation-message",11),e.SDv(14,26),e.qZA(),e.TgZ(15,"nui-validation-message",20),e.SDv(16,27),e.qZA(),e.TgZ(17,"nui-validation-message",22),e.SDv(18,28),e.qZA()()(),e.TgZ(19,"nui-form-field",29),e._UZ(20,"nui-checkbox",30),e.TgZ(21,"nui-validation-message",11),e.SDv(22,31),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("control",t.form.get("warningThresholdValue")),e.xp6(9),e.Q6J("control",t.form.get("criticalThresholdValue")),e.xp6(8),e.Q6J("control",t.form.get("reversedThresholds"))("showOptionalText",!1)}}let zn=(()=>{class n{constructor(t,i,o,r){this.changeDetector=t,this.formBuilder=i,this.logger=o,this.cd=r,this.formReady=new e.vpe,this.thresholdOptions=[{value:!1,displayValue:$localize`Never show critical or warning states for this KPI`},{value:!0,displayValue:$localize`Set custom thresholds for this widget`}],this.destroy$=new oe.x}ngOnInit(){this.validateRadioButtonsGroupValue(),this.form=this.formBuilder.group({criticalThresholdValue:[this.criticalThresholdValue||0,[p.kI.required]],warningThresholdValue:[this.warningThresholdValue||0],showThresholds:[this.showThresholds||!1,[p.kI.required]],reversedThresholds:[this.reversedThresholds||!1]},{validators:Ol}),this.handleWarningThreshold(this.warningThresholdValue),this.form.statusChanges.pipe((0,_e.R)(this.destroy$)).subscribe(t=>{this.form.markAllAsTouched(),this.cd.detectChanges()}),this.formReady.emit(this.form)}ngOnChanges(t){var i;const o=["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"];if(t){for(const r of Object.keys(t))if(Cl()(o,r)){const c=t[r].currentValue;c&&(null===(i=this.form)||void 0===i||i.patchValue({[r]:c}))}t.showThresholds&&setTimeout(()=>this.validateRadioButtonsGroupValue())}t.warningThresholdValue&&this.handleWarningThreshold(t.warningThresholdValue.currentValue)}getThresholdsSubtitle(t){return t?$localize`Custom thresholds`:$localize`No thresholds`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}validateRadioButtonsGroupValue(){this.radioButtonGroupValue=this.showThresholds}handleWarningThreshold(t){var i;const o=null===(i=this.form)||void 0===i?void 0:i.get("warningThresholdValue");z()(t)&&o?.setValue(null)}}return n.lateLoadKey="ThresholdsConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(a.mQy),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-thresholds-configuration"]],inputs:{criticalThresholdValue:"criticalThresholdValue",warningThresholdValue:"warningThresholdValue",showThresholds:"showThresholds",reversedThresholds:"reversedThresholds"},outputs:{formReady:"formReady"},features:[e.TTD],decls:19,vars:18,consts:function(){let s,t,i,o,r,c,g,E,P,Z,V,ee,ge,ie,Oe;return s=$localize`:␟784fdd6b2dc26499eca6e15094b55f0b1c1e1b7a␟8815471757829352344:Thresholds`,t=$localize`:␟6875687abe0982b513f60d230d71b9cc2d9eef3e␟9007062817247777645:How do you want to set warning/critical thresholds?`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,o=$localize`:␟5dda34ec4b693f2b13afdf28a4e5f00062f4c896␟4003830139037367407:Warning value`,r=$localize`:␟cae671d9eb277eadfd7752518814d3f852369cc9␟6643132921042050963:Never show the warning state`,c=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,g=$localize`:␟19d6eb371557c8ab18db5332a2e1955f18c2f16d␟3184669981998118637: Warning threshold should be greater than critical threshold `,E=$localize`:␟6c62f1e33dd914743cb977df6baba31779d7aed6␟1030183925045576042: Warning threshold should be lower than critical threshold `,P=$localize`:␟f8baa78544aa27624d43d59e5a225216aff1042f␟6033897450960508846:Critical value`,Z=$localize`:␟9b66a7e6fdeb05f4c1ffdc78ea8f4a7a2fb64d79␟7643729389671069649:Set critical value`,V=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,ee=$localize`:␟540b9b0f637cc0605bc00ccc586a3eab73aabcfc␟4465977748799047247: Critical threshold should be greater than warning threshold `,ge=$localize`:␟2efae84e117a2639681a8e5c0e4ce4eee42af17d␟9156849514888688496: Critical threshold should be lower than warning threshold `,ie=$localize`:␟18bcbeb2b14e6064ec6fe9276db140a4e800da3c␟5716867848923884165:Warning and critical when below threshold values`,Oe=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"kpi-thresholds-configuration__accordion-content"],["caption",t,3,"control"],["formControlName","showThresholds","name","showThresholds","required","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],i,["class","mt-4",4,"ngIf"],[3,"value"],[1,"mt-4"],[1,"mb-4"],["caption",o,3,"control"],["formControlName","warningThresholdValue","placeholder",r],c,["for","min"],g,["for","max"],E,["caption",P,3,"control"],["formControlName","criticalThresholdValue","placeholder",Z],V,ee,ge,["caption",ie,3,"control","showOptionalText"],["formControlName","reversedThresholds","required",""],Oe]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-radio-group",9),e.YNc(15,Il,2,2,"nui-radio",10),e.qZA(),e.TgZ(16,"nui-validation-message",11),e.SDv(17,12),e.qZA()(),e.YNc(18,vl,23,4,"div",13),e.qZA()()),2&t){let o,r,c;e.Q6J("formGroup",i.form)("state",e.lcZ(1,9,e.lcZ(2,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,13,e.xi3(6,15,i.form,"thresholds"))),e.xp6(6),e.Q6J("title",i.getThresholdsSubtitle(null==(o=i.form.get("showThresholds"))?null:o.value)),e.xp6(1),e.hij(" ",i.getThresholdsSubtitle(null==(r=i.form.get("showThresholds"))?null:r.value)," "),e.xp6(2),e.Q6J("control",i.form.get("showThresholds")),e.xp6(1),e.Q6J("value",i.radioButtonGroupValue),e.xp6(1),e.Q6J("ngForOf",i.thresholdOptions),e.xp6(3),e.Q6J("ngIf",null==(c=i.form.get("showThresholds"))?null:c.value)}},dependencies:[d.sg,d.O5,p.JJ,p.JL,p.Q7,p.sg,p.u,a.oJW,a.I5I,a.hgI,a.UKb,a.wTj,a.bK4,a.CfE,De.J,d.Ov,xe.F,$e.d],styles:[".kpi-thresholds-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function El(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Sl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Rl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}let Bn=(()=>{class n{constructor(t,i,o,r){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.eventBus=r,this.legendPlacements=[],this.timeSpans=[],this.availableChartTypes=[{label:$localize`Line`,value:Pe.Line},{label:$localize`Stacked area`,value:Pe.StackedArea},{label:$localize`Stacked % area`,value:Pe.StackedPercentageArea},{label:$localize`Bar`,value:Pe.StackedBar},{label:$localize`Status`,value:Pe.StatusBar}],this.formReady=new e.vpe,this.destroy$=new oe.x,this.form=this.formBuilder.group({leftAxisLabel:[""],startingTimespan:[null,p.kI.required],legendPlacement:[we.w.None,[p.kI.required]],preset:[Pe.Line,[p.kI.required]]})}ngOnInit(){var t;null===(t=this.form.get("startingTimespan"))||void 0===t||t.valueChanges.pipe((0,_e.R)(this.destroy$)).subscribe(i=>{setTimeout(()=>{this.eventBus.next(C.xZ,{payload:{id:C.RG}})})}),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,r,c;const g=this.form.get("startingTimespan");t.leftAxisLabel&&(null===(i=this.form.get("leftAxisLabel"))||void 0===i||i.setValue(this.leftAxisLabel,{emitEvent:!1})),t.startingTimespan&&g?.setValue(this.startingTimespan,{emitEvent:!1}),t.legendPlacement&&(null===(o=this.form.get("legendPlacement"))||void 0===o||o.setValue(this.legendPlacement,{emitEvent:!1})),t.preset&&(null===(r=this.form.get("preset"))||void 0===r||r.setValue(this.preset,{emitEvent:!1})),t.timeSpans&&!g?.value&&(null===(c=this.timeSpans)||void 0===c?void 0:c.length)>0&&g?.setValue(this.timeSpans[0])}getSecondaryText(){const t=this.form.controls.startingTimespan.value;return`${t&&t.name||$localize`No timespan`}, ${this.form.controls.legendPlacement.value||$localize`No legend`}, ${this.form.controls.leftAxisLabel.value||$localize`No y-axis label`}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.lateLoadKey="TimeseriesMetadataConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Qe.p),e.Y36(p.qu),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-timeseries-metadata-configuration"]],inputs:{legendPlacements:"legendPlacements",timeSpans:"timeSpans",startingTimespan:"startingTimespan",legendPlacement:"legendPlacement",leftAxisLabel:"leftAxisLabel",preset:"preset",availableChartTypes:"availableChartTypes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:40,vars:37,consts:function(){let s,t,i,o,r,c,g,E,P,Z,V,ee,ge;return s=$localize`:␟82fac4002b38b13e6e76cab565857c651740e8d4␟7635587638460371959:Timeseries metadata`,t=$localize`:␟7c1e198b83571c6f6d6774bbf5e8ef469b8ed3f8␟83369046626581484:Starting timespan`,i=$localize`:␟cea52b8401042ba9c3aac1cd5a7507d754f0d809␟4391839922437157830:Starting Timespan`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,r=$localize`:␟a9e3fc4b717bf285f084fc443a97f4c08b345203␟2498436426359230001:Chart legend`,c=$localize`:␟8137d4a0a1b9974f796c96ea5b70f4ec4304af97␟9008417256629743113:Select Legend Orientation`,g=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,E=$localize`:␟20f8b383236e858a2369abf573aa3a662a61dc2c␟7603862017185374134:Chart y-axis label`,P=$localize`:␟da1b3b8ad86495e008972fe0f8dfca60c9c60ac5␟5670370419656051485:Set chart y-axis label`,Z=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,V=$localize`:␟d4821e6eaad5b45a36e2873de2a6e0075c4b7621␟8983610989099122824:Chart type`,ee=$localize`:␟d4821e6eaad5b45a36e2873de2a6e0075c4b7621␟8983610989099122824:Chart type`,ge=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"timeseries-metadata-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","startingTimespan",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],o,["caption",r,3,"control"],["placeholder",c,"formControlName","legendPlacement",3,"popupViewportMargin"],g,["caption",E,3,"control"],["formControlName","leftAxisLabel","placeholder",P],Z,["caption",V,3,"control"],["placeholder",ee,"formControlName","preset",3,"popupViewportMargin"],ge,[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.ALo(7,"async"),e.ALo(8,"nuiFormHeaderIconPipe"),e.TgZ(9,"div",3)(10,"span",4),e.SDv(11,5),e.qZA(),e.TgZ(12,"div",6),e._uU(13),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",8)(16,"nui-form-field",9)(17,"nui-select-v2",10),e.ALo(18,"async"),e.YNc(19,El,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(20,"nui-validation-message",12),e.SDv(21,13),e.qZA()()(),e.TgZ(22,"div",8)(23,"nui-form-field",14)(24,"nui-select-v2",15),e.ALo(25,"async"),e.YNc(26,Sl,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(27,"nui-validation-message",12),e.SDv(28,16),e.qZA()()(),e.TgZ(29,"div",8)(30,"nui-form-field",17),e._UZ(31,"nui-textbox",18),e.TgZ(32,"nui-validation-message",12),e.SDv(33,19),e.qZA()()(),e.TgZ(34,"nui-form-field",20)(35,"nui-select-v2",21),e.ALo(36,"async"),e.YNc(37,Rl,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(38,"nui-validation-message",12),e.SDv(39,22),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"edit")))("iconColor",e.lcZ(7,25,e.Dn7(8,27,i.form,"gray",""))),e.xp6(8),e.Q6J("title",i.getSecondaryText()),e.xp6(1),e.hij(" ",i.getSecondaryText()," "),e.xp6(3),e.Q6J("control",i.form.controls.startingTimespan),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(18,31,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.timeSpans),e.xp6(4),e.Q6J("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(25,33,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendPlacements),e.xp6(4),e.Q6J("control",i.form.controls.leftAxisLabel),e.xp6(4),e.Q6J("control",i.form.controls.preset),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(36,35,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.availableChartTypes))},dependencies:[d.sg,p.JJ,p.JL,p.sg,p.u,a.oJW,a.XHW,a.hgI,a.j_n,a.rLF,a.CfE,De.J,d.Ov,xe.F,$e.d],styles:[".timeseries-metadata-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),n})(),At=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.formBuilder=i,this.logger=o,this.formReady=new e.vpe,this.form=this.formBuilder.group({title:["",p.kI.required],subtitle:[""],url:[""],description:[""],collapsible:[!1],collapsed:[!0]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i,o,r,c,g;t.title&&(null===(i=this.form.get("title"))||void 0===i||i.setValue(this.title)),t.url&&(null===(o=this.form.get("url"))||void 0===o||o.setValue(this.url)),t.subtitle&&(null===(r=this.form.get("subtitle"))||void 0===r||r.setValue(this.subtitle)),t.description&&(null===(c=this.form.get("description"))||void 0===c||c.setValue(this.description)),t.collapsible&&(null===(g=this.form.get("collapsible"))||void 0===g||g.setValue(this.collapsible))}getSecondaryText(){return`${this.form.controls.title.value||$localize`No title`}, ${this.form.controls.subtitle.value||$localize`no subtitle`}`}}return n.lateLoadKey="TitleAndDescriptionConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(a.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-title-and-description-configuration"]],inputs:{title:"title",url:"url",subtitle:"subtitle",description:"description",collapsible:"collapsible"},outputs:{formReady:"formReady"},features:[e.TTD],decls:31,vars:20,consts:function(){let s,t,i,o,r,c,g,E,P,Z,V,ee,ge;return s=$localize`:␟c1f3e3c0c4876967ade530f67b0696f7c1f5aa76␟6274813085792990828:Title and Description`,t=$localize`:␟f75e29ac7734f16cad4d02017646720be3030367␟1720994052291036243:Widget title`,i=$localize`:␟eb94f6289d261b9d7b1288cf92c4099023695dd9␟2301126677959299103:Set widget title`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,r=$localize`:␟d2b3deab155463fe2b5ac59000b6e3aa7771afc8␟2073684406211180788:Widget subtitle`,c=$localize`:␟b6d324cd44176b6e2bfe2ff16bbc7e7ee1c412fc␟8934433387734849172:Do not show a subtitle`,g=$localize`:␟cb04bfea86b30d40d2d30630c957bf3fd2e50b83␟9207103926988831681:Widget link URL`,E=$localize`:␟02773997819c014e0f299deb7cb8e054003850e1␟3668070782949850100:Do not link to another page`,P=$localize`:␟ab83c23bd6135460422e95fca32b4ec38ddff9e6␟3861388441030158101:Widget description`,Z=$localize`:␟2f50115d11fc3e29acafe6f99228c2304cffb722␟3301579533722588311:This won't be shown on the widget, but can be helpful for
                          other users who want to re-use this widget on their own dashboards`,V=$localize`:␟37b56526e384f843a15323dc730b484a97b4c968␟3830487495946043372:No description`,ee=$localize`:␟9de5a44cd2d54fe77e5c12131ab7a21792ce91df␟5450302501374652801:Hide widget header`,ge=$localize`:␟6570353e3fb49053e2327cb92f257eab8ccdd274␟5369485165489692848:Collapsible`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"title-and-description-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["id","kpi-widget-title","formControlName","title","placeholder",i],["for","required"],o,["caption",r,3,"control"],["id","kpi-widget-subtitle","formControlName","subtitle","placeholder",c],["caption",g,3,"control"],["id","kpi-widget-url","formControlName","url","placeholder",E],["caption",P,"hint",Z,3,"control"],["formControlName","description","placeholder",V],["caption",ee,3,"showOptionalText","control"],["formControlName","collapsible"],ge]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9),e._UZ(15,"nui-textbox",10),e.TgZ(16,"nui-validation-message",11),e.SDv(17,12),e.qZA()()(),e.TgZ(18,"div",8)(19,"nui-form-field",13),e._UZ(20,"nui-textbox",14),e.qZA()(),e.TgZ(21,"div",8)(22,"nui-form-field",15),e._UZ(23,"nui-textbox",16),e.qZA()(),e.TgZ(24,"div",8)(25,"nui-form-field",17),e._UZ(26,"nui-textbox",18),e.qZA()(),e.TgZ(27,"div")(28,"nui-form-field",19)(29,"nui-checkbox",20),e.SDv(30,21),e.qZA()()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,11,e.lcZ(2,13,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,15,e.xi3(6,17,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.getSecondaryText()),e.xp6(1),e.hij(" ",i.getSecondaryText()," "),e.xp6(3),e.Q6J("control",i.form.get("title")),e.xp6(5),e.Q6J("control",i.form.get("subtitle")),e.xp6(3),e.Q6J("control",i.form.get("url")),e.xp6(3),e.Q6J("control",i.form.get("description")),e.xp6(3),e.Q6J("showOptionalText",!1)("control",i.form.get("collapsible")))},dependencies:[p.JJ,p.JL,p.sg,p.u,a.oJW,a.XHW,a.hgI,a.bK4,a.CfE,De.J,d.Ov,xe.F,$e.d],styles:[".title-and-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function Nl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Al(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function yl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ml(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Pl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let Wn=(()=>{class n{constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.formReady=new e.vpe,this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group({icon:"",status:"",detailedUrl:"",label:"",url:""})})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){t.dataFieldIds&&this.getFieldMappingsControl.setValue(t.dataFieldIds.currentValue)}get getFieldMappingsControl(){return this.form.get("dataFieldIds")}}return n.lateLoadKey="EntityFormattingComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-entity-formatting-configuration"]],inputs:{mappingKeys:"mappingKeys",dataFieldIds:"dataFieldIds"},outputs:{formReady:"formReady"},features:[e.TTD],decls:46,vars:17,consts:function(){let s,t,i,o,r,c,g,E,P,Z,V;return s=$localize`:␟38ddd26fc749a9c493e70c642d321c868c47f178␟5252376970414591923:Entity formatting`,t=$localize`:␟14688213d67b2f0e553d66f8255281db245502fb␟3074987902485823708:Icon`,i=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,o=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,r=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,c=$localize`:␟06ae2001bf7ffd3cbe977e0c4ce0951f660ca197␟4936125302941310356:Details URL`,g=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,E=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,P=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,Z=$localize`:␟ec044db4c57a4750f8bec4371dc39e94f2e26d46␟994779223497739731:Label URL`,V=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,["title","Show status icon",1,"nui-text-secondary"],["formGroupName","dataFieldIds",1,"entity-formatting__accordion-content"],[1,"mb-3"],t,[1,"d-flex","flex-grow-1"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",i,"formControlName","icon"],[3,"value",4,"ngFor","ngForOf"],o,["placeholder",r,"formControlName","status"],c,["placeholder",g,"formControlName","detailedUrl"],E,["placeholder",P,"formControlName","label"],Z,["placeholder",V,"formControlName","url"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.TgZ(5,"div",3)(6,"span",4),e.SDv(7,5),e.qZA(),e.TgZ(8,"div",6),e._uU(9," Show status icon "),e.qZA()()(),e.TgZ(10,"div",7)(11,"div",8)(12,"label",4),e.SDv(13,9),e.qZA(),e.TgZ(14,"div",10)(15,"nui-form-field",11)(16,"nui-select-v2",12),e.YNc(17,Nl,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(18,"div",8)(19,"label",4),e.SDv(20,14),e.qZA(),e.TgZ(21,"div",10)(22,"nui-form-field",11)(23,"nui-select-v2",15),e.YNc(24,Al,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(25,"div",8)(26,"label",4),e.SDv(27,16),e.qZA(),e.TgZ(28,"div",10)(29,"nui-form-field",11)(30,"nui-select-v2",17),e.YNc(31,yl,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(32,"div",8)(33,"label",4),e.SDv(34,18),e.qZA(),e.TgZ(35,"div",10)(36,"nui-form-field",11)(37,"nui-select-v2",19),e.YNc(38,Ml,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(39,"div",8)(40,"label",4),e.SDv(41,20),e.qZA(),e.TgZ(42,"div",10)(43,"nui-form-field",11)(44,"nui-select-v2",21),e.YNc(45,Pl,2,2,"nui-select-v2-option",13),e.qZA()()()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,13,e.lcZ(2,15,i.form))),e.xp6(4),e.Q6J("icon","tag"),e.xp6(11),e.Q6J("control",i.getFieldMappingsControl.get("icon")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("status")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("detailedUrl")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("label")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("url")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys))},dependencies:[d.sg,p.JJ,p.JL,p.sg,p.u,p.x0,a.oJW,a.hgI,a.j_n,a.rLF,De.J,d.Ov,xe.F],styles:[".entity-formatting__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),n})();var Dl=l(18680),kn=l.n(Dl);function bl(n,s){1&n&&(e.TgZ(0,"label",18),e.SDv(1,19),e.qZA())}function Fl(n,s){1&n&&(e.TgZ(0,"label",20),e.SDv(1,21),e.qZA())}function xl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ll(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,bl,2,0,"label",10),e.YNc(2,Fl,2,0,"label",11),e.TgZ(3,"div",12)(4,"nui-form-field",13)(5,"nui-select-v2",14),e.YNc(6,xl,2,2,"nui-select-v2-option",15),e.qZA()(),e.TgZ(7,"div",16)(8,"button",17),e.NdJ("click",function(){const r=e.CHM(t).index,c=e.oxw();return e.KtG(c.removeRule(r))}),e.qZA()()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw();e.xp6(1),e.Q6J("ngIf",0!==i),e.xp6(1),e.Q6J("ngIf",0===i),e.xp6(2),e.Q6J("control",t),e.xp6(1),e.Q6J("formControlName",i),e.xp6(1),e.Q6J("ngForOf",o.selectData[i])}}function Gl(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addGrouping())}),e.SDv(1,24),e.qZA()}}let Zn=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.formBuilder=i,this.eventBus=o,this.formReady=new e.vpe,this.form=this.formBuilder.group({groups:[],groupBy:this.formBuilder.array([]),drillstate:[void 0]}),this.destroy$=new oe.x}get getGroupByControl(){return this.form.get("groupBy")}get getDrillStateControl(){return this.form.get("drillstate")}get getGroupsControl(){return this.form.get("groups")}ngOnInit(){this.eventBus.getStream(ke.gg).pipe((0,_e.R)(this.destroy$)).subscribe(t=>this.onDataSourceCreated(t)),this.getGroupByControl.valueChanges.pipe((0,_e.R)(this.destroy$)).subscribe(()=>this.fillGroupsOptions()),this.fillGroupsOptions(),this.formReady.emit(this.form)}ngOnChanges(t){t.groups&&this.getGroupsControl.setValue(t.groups.currentValue),t.groupBy&&!t.groupBy.firstChange&&(this.getGroupByControl.clear(),this.groupBy.forEach(i=>this.getGroupByControl.push(this.createControl(i))),this.fillGroupsOptions())}createControl(t){return this.formBuilder.control(t||"",p.kI.required)}addGrouping(){const t=this.createControl();this.getGroupByControl.push(t),this.fillGroupsOptions(),t.setValue(this.selectData[this.getGroupByControl.controls.length-1][0])}removeRule(t){this.getGroupByControl.removeAt(t),this.fillGroupsOptions()}isAddRestricted(){return this.selectData.some(t=>1===t.length)}getSubtitle(){var t;const i=this.getGroupByControl.controls.map((o,r)=>`${0===r?"By":"then"} ${o.value}`).join(", ");return 0===(null===(t=this.getGroupByControl)||void 0===t?void 0:t.value.length)?$localize`No groups`:$localize`${i}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onDataSourceCreated(t){var i,o,r;null===(r=null===(o=null===(i=t?.payload)||void 0===i?void 0:i.dataFieldsConfig)||void 0===o?void 0:o.dataFields$)||void 0===r||r.pipe((0,_e.R)(this.destroy$)).subscribe(c=>{var g;if(c){const E=c.map(Z=>Z.id);(kn()(this.groups,E).length||null===(g=this.groups)||void 0===g||!g.length)&&(this.groups=E,this.getGroupsControl.setValue(E),this.getGroupByControl.clear(),this.getDrillStateControl.setValue([]),this.fillGroupsOptions())}})}fillGroupsOptions(){this.selectData=[];const t=this.getGroupByControl.value;this.getGroupByControl.controls.forEach((i,o)=>{this.selectData[o]=[];const r=kn()(this.groups,t);t[o]&&this.selectData[o].push(t[o]),this.selectData[o]=[...this.selectData[o],...r]})}}return n.lateLoadKey="DrilldownConfiguratorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-grouping-configuration"]],inputs:{groups:"groups",groupBy:"groupBy"},outputs:{formReady:"formReady"},features:[e.TTD],decls:13,vars:11,consts:function(){let s,t,i,o,r;return s=$localize`:␟8658ad3b268c50fe2c1106dfb7bccdaa2e4290b2␟877780134171662191:Grouping`,t=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,i=$localize`:␟e2feaa48e92bd996631d6a90911db46fe38cd1a3␟4620310062886462675:Then`,o=$localize`:␟788a575e9f2466abeee0e51ab8f77e9cf19243de␟3653048554215358825:Group by`,r=$localize`:␟b8c2733945af01b52afbf8d2c9993bd9abda4c94␟3960498895552401303: Add another level `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],["formArrayName","groupBy",1,"grouping-configuration__accordion-content"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click",4,"ngIf"],["class","d-flex nui-text-secondary mb-1",4,"ngIf"],["class","d-flex nui-text-panel mb-2",4,"ngIf"],[1,"d-flex","flex-row","flex-grow-1","mb-4"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",t,3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"justify-content-center"],["nui-button","","icon","delete","displayStyle","action","type","button",3,"click"],[1,"d-flex","nui-text-secondary","mb-1"],i,[1,"d-flex","nui-text-panel","mb-2"],o,[3,"value"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],r]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.TgZ(5,"div",3)(6,"span",4),e.SDv(7,5),e.qZA(),e.TgZ(8,"div",6),e._uU(9),e.qZA()()(),e.TgZ(10,"div",7),e.YNc(11,Ll,9,5,"ng-container",8),e.YNc(12,Gl,2,0,"button",9),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,7,e.lcZ(2,9,i.form))),e.xp6(4),e.Q6J("icon","tag"),e.xp6(4),e.Q6J("title",i.getSubtitle()),e.xp6(1),e.hij(" ",i.getSubtitle()," "),e.xp6(2),e.Q6J("ngForOf",i.getGroupByControl.controls),e.xp6(1),e.Q6J("ngIf",!i.isAddRestricted()))},dependencies:[d.sg,d.O5,p.JJ,p.JL,p.sg,p.u,p.CE,a.oJW,a.hgI,a.r0F,a.j_n,a.rLF,De.J,d.Ov,xe.F],styles:[".grouping-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function wl(n,s){1&n&&(e.TgZ(0,"div",4)(1,"nui-message",5),e.tHW(2,6),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("allowDismiss",!1))}let Vn=(()=>{class n{constructor(t,i,o,r){this.pizzagnaService=t,this.changeDetector=i,this.formBuilder=o,this.eventBus=r,this.tiles=[],this.formReady=new e.vpe}ngOnChanges(t){}onFormReady(t){this.form=this.formBuilder.group({tiles:t}),this.emptyItems$=this.form.valueChanges.pipe((0,St.U)(i=>0===i.tiles.length)),this.formReady.emit(this.form)}onItemsChange(t){const o=t.map(c=>c.id);this.pizzagnaService.createComponentsFromTemplate("tiles",o),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:m.xW.Data,propertyPath:["tiles"]},t)}addTile(){this.onItemsChange([...this.tiles,{id:(0,a.VjN)("kpi"),componentType:j.lateLoadKey}])}}return n.lateLoadKey="KpiTilesConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(ce.p),e.Y36(e.sBO),e.Y36(p.qu),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-kpi-tiles-configuration-component"]],inputs:{componentId:"componentId",tiles:"tiles",nodes:"nodes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:5,vars:5,consts:function(){let s,t;return s=$localize`:␟79e4ae6fc9c1cd1ee331414b873fb40154ad1e95␟5306337511240259794: Add new value
`,t=$localize`:␟7ca16fec6555e99e64e1cbd41a9ce7a4f4cae2fd␟4636957726236815999:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one value must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","kpi-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],s,[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],t]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(r){return i.onItemsChange(r)})("formReady",function(r){return i.onFormReady(r)}),e.qZA(),e.YNc(1,wl,4,1,"div",1),e.ALo(2,"async"),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.addTile()}),e.SDv(4,3),e.qZA()),2&t&&(e.Q6J("items",i.tiles)("nodes",i.nodes),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,i.emptyItems$)&&i.form.touched))},dependencies:[d.O5,a.r0F,a.qqZ,ii,d.Ov],encapsulation:2,changeDetection:0}),n})();const $l=["metricsSelect"];function Ul(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",9),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function zl(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div")(2,"nui-form-field",2)(3,"nui-select-v2",3,4)(5,"nui-overlay-item",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.unsetMetric())}),e._uU(6,"Unset"),e.qZA(),e.YNc(7,Ul,2,3,"nui-select-v2-option",6),e.qZA(),e.TgZ(8,"nui-validation-message",7),e.SDv(9,8),e.qZA()()()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.form.controls.activeMetricId),e.xp6(5),e.Q6J("ngForOf",t.metrics)}}let ri=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.formBuilder=i,this.logger=o,this.formReady=new e.vpe,this.form=this.formBuilder.group({activeMetricId:[]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i;t.activeMetricId&&(null===(i=this.form.get("activeMetricId"))||void 0===i||i.setValue(t.activeMetricId.currentValue),this.metrics.find(r=>r.id===t.activeMetricId.currentValue)||this.logger.warn(`AggregatorMetricSelectorConfigurationComponent: No metric found for id: ${t.activeMetricId.currentValue}`))}unsetMetric(){this.form.controls.activeMetricId.reset(),this.meticsSelect.hideDropdown()}}return n.lateLoadKey="AggregatorMetricSelectorConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(a.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-aggregator-configurator"]],viewQuery:function(t,i){if(1&t&&e.Gf($l,5),2&t){let o;e.iGM(o=e.CRH())&&(i.meticsSelect=o.first)}},inputs:{metrics:"metrics",activeMetricId:"activeMetricId"},outputs:{formReady:"formReady"},features:[e.TTD],decls:1,vars:1,consts:function(){let s,t,i;return s=$localize`:␟f43d8212e6ffbc04ea0190118e7f893824ec2686␟8120854355855055890:Default Metric`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["caption",s,1,"mb-3",3,"control"],["formControlName","activeMetricId","placeholder",t],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,zl,10,3,"div",0),2&t&&e.Q6J("ngIf",i.form)},dependencies:[d.sg,d.O5,p.JJ,p.JL,p.sg,p.u,a.hgI,a.A4p,a.j_n,a.rLF,a.CfE],encapsulation:2,changeDetection:0}),n})();function Bl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Wl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function kl(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"nui-form-field",3)(3,"nui-select-v2",4,5)(5,"nui-overlay-item",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.unsetMetric())}),e._uU(6,"Unset"),e.qZA(),e.YNc(7,Bl,2,3,"nui-select-v2-option",7),e.qZA(),e.TgZ(8,"nui-validation-message",8),e.SDv(9,9),e.qZA()()(),e.TgZ(10,"div",2)(11,"nui-form-field",10)(12,"nui-select-v2",11),e.YNc(13,Wl,2,3,"nui-select-v2-option",7),e.qZA(),e.TgZ(14,"nui-validation-message",8),e.SDv(15,12),e.qZA()()()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.form.controls.activeMetricId),e.xp6(5),e.Q6J("ngForOf",t.metrics),e.xp6(4),e.Q6J("control",t.form.controls.chartSeriesDataFieldId),e.xp6(2),e.Q6J("ngForOf",t.chartSeriesDataFields)}}const Zl={id:"data[0]",label:"data",dataType:null};let Jn=(()=>{class n extends ri{constructor(t,i,o,r){super(t,i,o),this.eventBus=r,this.chartSeriesDataFields=[Zl],this.form=this.formBuilder.group({activeMetricId:[],chartSeriesDataFieldId:[]}),this.destroy$=new oe.x,this.eventBus.getStream(ke.gg).pipe((0,_e.R)(this.destroy$)).subscribe(c=>{var g,E;const P=c.payload;P&&(null===(E=null===(g=P.dataFieldsConfig)||void 0===g?void 0:g.chartSeriesDataFields$)||void 0===E||E.pipe((0,_e.R)(this.destroy$)).subscribe(Z=>this.chartSeriesDataFields=Z))})}ngOnChanges(t){var i;super.ngOnChanges(t),t.chartSeriesDataFieldId&&(null===(i=this.form.get("chartSeriesDataFieldId"))||void 0===i||i.setValue(t.chartSeriesDataFieldId.currentValue))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.lateLoadKey="FieldMapperAggregatorConfiguratorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(a.mQy),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-field-mapper-aggregator-configurator"]],inputs:{chartSeriesDataFieldId:"chartSeriesDataFieldId"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:function(){let s,t,i,o,r,c;return s=$localize`:␟f43d8212e6ffbc04ea0190118e7f893824ec2686␟8120854355855055890:Default Metric`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,o=$localize`:␟8e67f0d2aff5ba1a2d509b591efa53a4d2076369␟5258061076548910132:Chart Series Data Field`,r=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,c=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"mb-4"],["caption",s,1,"mb-4",3,"control"],["formControlName","activeMetricId","placeholder",t],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,["caption",o,1,"mb-4",3,"control"],["formControlName","chartSeriesDataFieldId","placeholder",r],c,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,kl,16,5,"div",0),2&t&&e.Q6J("ngIf",i.form)},dependencies:[d.sg,d.O5,p.JJ,p.JL,p.sg,p.u,a.hgI,a.A4p,a.j_n,a.rLF,a.CfE],encapsulation:2,changeDetection:0}),n})();function Vl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Jl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Hl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}let Hn=(()=>{class n{constructor(t,i,o,r){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.formReady=new e.vpe,this.form=this.formBuilder.group({type:[void 0,p.kI.required],legendPlacement:[void 0],legendFormatter:this.formBuilder.group({componentType:[void 0]})}),this.chartTypeChanged$=new oe.x,this.destroy$=new oe.x,this.legendFormatters=r.getItems(),this.form.controls.type.valueChanges.pipe((0,_e.R)(this.destroy$)).subscribe(c=>this.chartTypeChanged$.next(c))}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i;t.type&&this.form.controls.type.setValue(t.type.currentValue),t.legendPlacement&&this.form.controls.legendPlacement.setValue(t.legendPlacement.currentValue),t.legendFormatter&&(null===(i=this.form.get("legendFormatter.componentType"))||void 0===i||i.setValue(t.legendFormatter.currentValue.componentType))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.chartTypeChanged$.complete()}get chartTitle(){var t;const i=null===(t=this.form.get("type"))||void 0===t?void 0:t.value;return this.chartTypes.find(r=>r.id===i)?.label}get legendFormatterControl(){return this.form.get("legendFormatter.componentType")}}return n.lateLoadKey="ProportionalChartOptionsEditorV2Component",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Qe.p),e.Y36(p.qu),e.Y36(ue.qy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-proportional-chart-options-editor-v2-component"]],inputs:{type:"type",legendPlacement:"legendPlacement",legendFormatter:"legendFormatter",chartTypes:"chartTypes",legendPlacementOptions:"legendPlacementOptions"},outputs:{formReady:"formReady"},features:[e.TTD],decls:35,vars:31,consts:function(){let s,t,i,o,r,c,g,E;return s=$localize`:␟f3ecd72a8d0f15303a8f7f61c278783962a6d00c␟4926288099895660391:Chart Options`,t=$localize`:␟f2102c0b996b067ab2a46c7743fe5931fa47f16d␟7337152278540773645:Chart Type`,i=$localize`:␟35a0bc25979ae578aea9594e8c587200628713e1␟5551943712413491013:Select chart type`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,r=$localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`,c=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,g=$localize`:␟7f0b920b08ab06e490eff4f718ef3fecc87a719b␟5989769742900149410:Legend format`,E=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","type",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],o,["caption",r,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],c,["formGroupName","legendFormatter"],["caption",g,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],E,[3,"displayValueContext","value"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.ALo(16,"async"),e.YNc(17,Vl,2,3,"nui-select-v2-option",11),e.qZA(),e.TgZ(18,"nui-validation-message",12),e.SDv(19,13),e.qZA()()(),e.TgZ(20,"div",8)(21,"nui-form-field",14)(22,"nui-select-v2",15),e.ALo(23,"async"),e.YNc(24,Jl,2,2,"nui-select-v2-option",16),e.qZA(),e.TgZ(25,"nui-validation-message",12),e.SDv(26,17),e.qZA()()(),e.TgZ(27,"div",8),e.ynx(28,18),e.TgZ(29,"nui-form-field",19)(30,"nui-select-v2",20),e.ALo(31,"async"),e.YNc(32,Hl,2,2,"nui-select-v2-option",16),e.qZA(),e.TgZ(33,"nui-validation-message",12),e.SDv(34,21),e.qZA()(),e.BQk(),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"widget_pie-chart"))),e.xp6(6),e.Q6J("title",i.chartTitle),e.xp6(1),e.hij(" ",i.chartTitle," "),e.xp6(3),e.Q6J("control",i.form.controls.type),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(16,25,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartTypes),e.xp6(4),e.Q6J("showOptionalText",!1)("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(23,27,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendPlacementOptions),e.xp6(5),e.Q6J("showOptionalText",!1)("control",i.legendFormatterControl),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(31,29,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendFormatters))},dependencies:[d.sg,p.JJ,p.JL,p.sg,p.u,p.x0,a.oJW,a.hgI,a.j_n,a.rLF,a.CfE,De.J,d.Ov,xe.F,$e.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function Yl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Kl(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function Ql(n,s){}const Xl=function(){return["formReady"]};function jl(n,s){if(1&n){const t=e.EpF();e.ynx(0,27,28),e.NdJ("output",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onFormReady(o.payload))}),e.YNc(2,Ql,0,0,"ng-template",29),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(1);return e.KtG(r.attached(o))}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentId",i.getConfigurationComponent())("componentType",i.getConfigurationComponent())("properties",i.configurationComponentProperties)("outputs",e.DdM(5,Xl)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function ql(n,s){if(1&n&&(e.ynx(0,23),e.TgZ(1,"nui-form-field",24)(2,"nui-select-v2",20),e.ALo(3,"async"),e.YNc(4,Kl,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(5,"nui-validation-message",12),e.SDv(6,25),e.qZA()(),e.YNc(7,jl,3,6,"ng-container",26),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("showOptionalText",!1)("control",t.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(3,5,t.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",t.contentFormatters),e.xp6(3),e.Q6J("ngIf",!!t.getConfigurationComponent())}}function ed(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function td(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}const id={[Ge.DonutChart]:$localize`Donut`,[Ge.PieChart]:$localize`Pie`,[Ge.VerticalBarChart]:$localize`Vertical Bar`,[Ge.HorizontalBarChart]:$localize`Horizontal Bar`};let Yn=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.legendPlacement=we.w.None,this.formReady=new e.vpe,this.chartTypeNamesMap=id,this.legendFormatters=[],this.contentFormatters=[],this.formatterHasConfigurationComponent=!1,this.currentConfigurationComponent="",this.chartFormatters=[],this.cachedChartOptionsViewModels=[],this.rawFormatter={componentType:"",label:$localize`Raw`,dataTypes:{value:null}}}get chartTypeSelectViewModels(){var t,i,o;return(!this.cachedChartOptionsViewModels||this.cachedChartOptionsViewModels.length!==(null===(i=null===(t=this.chartOptions)||void 0===t?void 0:t.chartTypes)||void 0===i?void 0:i.length))&&(this.cachedChartOptionsViewModels=((null===(o=this.chartOptions)||void 0===o?void 0:o.chartTypes)||[]).map(r=>({label:this.chartTypeNamesMap[r],value:r}))),this.cachedChartOptionsViewModels}get chartTitle(){return this.chartTypeNamesMap[this.form.controls.type.value]}getConfigurationComponent(){var t;return(null===(t=this.getCurrentFormatterDefinition())||void 0===t?void 0:t.configurationComponent)||""}getConfigurationComponentProperties(){this.configurationComponentProperties={contentFormatterProperties:this.contentFormatterProperties,contentFormatterDefinition:this.getCurrentFormatterDefinition(),dsOutput:this.dsOutput}}getCurrentFormatterDefinition(){var t;const i=null===(t=this.form.get("contentFormatter.componentType"))||void 0===t?void 0:t.value;return this.contentFormatters.find(o=>o.componentType===i)}ngOnInit(){this.form=this.formBuilder.group({type:[this.chartType||"",p.kI.required],legendPlacement:this.legendPlacement,legendFormatter:this.formBuilder.group({componentType:this.legendFormatterComponentType||this.rawFormatter.componentType}),contentFormatter:this.formBuilder.group({componentType:this.contentFormatterComponentType})}),this.legendFormatters=[this.rawFormatter,...this.chartOptions.legendFormatters||[]],this.contentFormatters=[...this.chartOptions.contentFormatters||[]],this.formReady.emit(this.form)}ngOnChanges(t){var i,o,r,c;t.chartType&&!t.chartType.isFirstChange()&&(null===(i=this.form.get("type"))||void 0===i||i.setValue(t.chartType.currentValue)),t.legendPlacement&&!t.legendPlacement.isFirstChange()&&(null===(o=this.form.get("legendPlacement"))||void 0===o||o.setValue(t.legendPlacement.currentValue)),t.legendFormatterComponentType&&!t.legendFormatterComponentType.isFirstChange()&&(null===(r=this.form.get("legendFormatter").get("componentType"))||void 0===r||r.setValue(this.legendFormatterComponentType)),t.contentFormatterComponentType&&!t.contentFormatterComponentType.isFirstChange()&&(null===(c=this.form.get("contentFormatter").get("componentType"))||void 0===c||c.setValue(this.contentFormatterComponentType)),this.form&&this.getConfigurationComponentProperties()}onFormReady(t){this.form.get("contentFormatter").setControl("properties",t)}}return n.lateLoadKey="ProportionalChartOptionsEditorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Qe.p),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-proportional-chart-options-editor-component"]],inputs:{chartOptions:"chartOptions",chartType:"chartType",legendPlacement:"legendPlacement",legendFormatterComponentType:"legendFormatterComponentType",contentFormatterComponentType:"contentFormatterComponentType",contentFormatterProperties:"contentFormatterProperties",dsOutput:"dsOutput"},outputs:{formReady:"formReady"},features:[e.TTD],decls:36,vars:32,consts:function(){let s,t,i,o,r,c,g,E,P,Z;return s=$localize`:␟f3ecd72a8d0f15303a8f7f61c278783962a6d00c␟4926288099895660391:Chart Options`,t=$localize`:␟f2102c0b996b067ab2a46c7743fe5931fa47f16d␟7337152278540773645:Chart Type`,i=$localize`:␟35a0bc25979ae578aea9594e8c587200628713e1␟5551943712413491013:Select chart type`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,r=$localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`,c=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,g=$localize`:␟7f0b920b08ab06e490eff4f718ef3fecc87a719b␟5989769742900149410:Legend format`,E=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,P=$localize`:␟7aad3a4ab45c0132aefc2da9c78cde45d3593850␟4108378864701615700:Content format`,Z=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["formControlName","type","placeholder",i,3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],o,["formGroupName","contentFormatter",4,"ngIf"],["caption",r,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],c,["formGroupName","legendFormatter"],["caption",g,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],E,[3,"value"],["formGroupName","contentFormatter"],["caption",P,1,"mb-4",3,"showOptionalText","control"],Z,["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output",4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.ALo(16,"async"),e.YNc(17,Yl,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(18,"nui-validation-message",12),e.SDv(19,13),e.qZA()()(),e.TgZ(20,"div",8),e.YNc(21,ql,8,7,"ng-container",14),e.qZA(),e.TgZ(22,"div",8)(23,"nui-form-field",15)(24,"nui-select-v2",16),e.ALo(25,"async"),e.YNc(26,ed,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(27,"nui-validation-message",12),e.SDv(28,17),e.qZA()()(),e.ynx(29,18),e.TgZ(30,"nui-form-field",19)(31,"nui-select-v2",20),e.ALo(32,"async"),e.YNc(33,td,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(34,"nui-validation-message",12),e.SDv(35,21),e.qZA()(),e.BQk(),e.qZA()()),2&t){let o;e.Q6J("formGroup",i.form)("state",e.lcZ(1,17,e.lcZ(2,19,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,21,e.xi3(6,23,i.form,"widget_pie-chart"))),e.xp6(6),e.Q6J("title",i.chartTitle),e.xp6(1),e.hij(" ",i.chartTitle," "),e.xp6(3),e.Q6J("control",i.form.controls.type),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(16,26,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartTypeSelectViewModels),e.xp6(4),e.Q6J("ngIf","DonutChart"===(null==(o=i.form.get("type"))?null:o.value)),e.xp6(2),e.Q6J("showOptionalText",!1)("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(25,28,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartOptions.legendPlacementOptions),e.xp6(4),e.Q6J("showOptionalText",!1)("control",i.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(32,30,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendFormatters)}},dependencies:[d.sg,d.O5,p.JJ,p.JL,p.sg,p.u,p.x0,x.Pl,k.$,a.oJW,a.hgI,a.j_n,a.rLF,a.CfE,De.J,d.Ov,xe.F,$e.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function nd(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("displayValueContext",t.label)("value",t.aggregatorType),e.xp6(1),e.hij(" ",t.label," ")}}function od(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function rd(n,s){}const Kn=function(){return["formReady"]};function sd(n,s){if(1&n){const t=e.EpF();e.ynx(0,19,20),e.NdJ("output",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onFormReady("aggregator",o.payload))}),e.YNc(2,rd,0,0,"ng-template",21),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(1);return e.KtG(r.attached(o))}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentType",null==i.currentAggregatorDefinition?null:i.currentAggregatorDefinition.configurationComponent)("properties",i.aggregatorConfiguratorProps)("outputs",e.DdM(4,Kn)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function ad(n,s){}function ld(n,s){if(1&n){const t=e.EpF();e.ynx(0,19,20),e.NdJ("output",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onFormReady("formatter",o.payload))}),e.YNc(2,ad,0,0,"ng-template",21),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(1);return e.KtG(r.attached(o))}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentType",null==i.currentFormatterDefinition?null:i.currentFormatterDefinition.configurationComponent)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,Kn)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function dd(n,s){if(1&n&&(e.ynx(0,1),e.TgZ(1,"nui-widget-editor-accordion",2),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",3),e._UZ(5,"nui-icon",4),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",5)(9,"span",6),e.SDv(10,7),e.qZA(),e.TgZ(11,"div",8),e._uU(12),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"nui-form-field",11)(16,"nui-select-v2",12),e.YNc(17,nd,2,3,"nui-select-v2-option",13),e.qZA()()(),e.TgZ(18,"div",14)(19,"nui-form-field",15)(20,"nui-select-v2",16),e.YNc(21,od,2,3,"nui-select-v2-option",13),e.qZA()()(),e.YNc(22,sd,3,5,"ng-container",17),e.YNc(23,ld,3,5,"ng-container",17),e.qZA()(),e.BQk()),2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("state",e.lcZ(2,11,e.lcZ(3,13,t.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,15,e.xi3(7,17,t.form,"customize"))),e.xp6(6),e.Q6J("title",t.subtitleText),e.xp6(1),e.hij(" ",t.subtitleText," "),e.xp6(3),e.Q6J("control",t.form.get("aggregator.aggregatorType")),e.xp6(2),e.Q6J("ngForOf",t.aggregators),e.xp6(2),e.Q6J("control",t.form.get("formatter.componentType")),e.xp6(2),e.Q6J("ngForOf",t.formatters),e.xp6(1),e.Q6J("ngIf",null==t.currentAggregatorDefinition?null:t.currentAggregatorDefinition.configurationComponent),e.xp6(1),e.Q6J("ngIf",null==t.currentFormatterDefinition?null:t.currentFormatterDefinition.configurationComponent)}}let Qn=(()=>{class n{constructor(t,i,o,r,c){this.formBuilder=t,this.changeDetector=i,this.eventBus=o,this.contentFormattersRegistry=r,this.aggregatorRegistry=c,this.formReady=new e.vpe,this.shown=!0,this.form=this.formBuilder.group({formatter:this.formBuilder.group({componentType:[""],properties:[]}),aggregator:this.formBuilder.group({aggregatorType:[""],properties:[]})}),this.dataFields=[],this.destroy$=new oe.x}ngOnInit(){this.watchFormChanges(),this.setFromRegistry(),this.eventBus.getStream(ke.gg).pipe((0,_e.R)(this.destroy$)).subscribe(t=>{var i;const o=t.payload;o&&(null===(i=o.dataFieldsConfig)||void 0===i||i.dataFields$.pipe((0,_e.R)(this.destroy$)).subscribe(r=>{this.dataFields=r,this.updateAggregatorConfiguratorProps()}))}),this.formReady.emit(this.form)}ngOnChanges(t){var i,o;t.formatter&&(null===(i=this.form.get("formatter"))||void 0===i||i.patchValue(Object.assign({},t.formatter.currentValue))),t.aggregator&&(null===(o=this.form.get("aggregator"))||void 0===o||o.patchValue(Object.assign({},t.aggregator.currentValue))),t.chartType&&(this.shown=t.chartType.currentValue===Ge.DonutChart)}ngOnDestroy(){this.destroy$.complete()}onFormReady(t,i){this.form.get(t).setControl("properties",i)}get subtitleText(){var t,i;return`${null===(t=this.currentAggregatorDefinition)||void 0===t?void 0:t.label}, ${null===(i=this.currentFormatterDefinition)||void 0===i?void 0:i.label}`}setFromRegistry(){var t,i;this.formatters=this.contentFormattersRegistry.getItems(),this.aggregators=this.aggregatorRegistry.getItems();let o=this.formatters.find(c=>{var g;return c.componentType===(null===(g=this.formatter)||void 0===g?void 0:g.componentType)});o||(o=this.formatters[0]),null===(t=this.form.get("formatter.componentType"))||void 0===t||t.setValue(o.componentType);let r=this.aggregators.find(c=>{var g;return c.aggregatorType===(null===(g=this.aggregator)||void 0===g?void 0:g.aggregatorType)});r||(r=this.aggregators[0]),null===(i=this.form.get("aggregator.aggregatorType"))||void 0===i||i.setValue(r.aggregatorType)}watchFormChanges(){var t,i;null===(t=this.form.get("aggregator.aggregatorType"))||void 0===t||t.valueChanges.pipe((0,_e.R)(this.destroy$)).subscribe(o=>{this.currentAggregatorDefinition=this.aggregators.find(({aggregatorType:r})=>r===o),this.updateAggregatorConfiguratorProps()}),null===(i=this.form.get("formatter.componentType"))||void 0===i||i.valueChanges.pipe((0,_e.R)(this.destroy$)).subscribe(o=>{this.currentFormatterDefinition=this.formatters.find(({componentType:r})=>r===o),this.updateAggregatorConfiguratorProps()})}updateAggregatorConfiguratorProps(){var t,i;this.aggregatorConfiguratorProps=Object.assign(Object.assign(Object.assign({},null===(t=this.currentAggregatorDefinition)||void 0===t?void 0:t.properties),null===(i=this.aggregator)||void 0===i?void 0:i.properties),{metrics:this.dataFields})}}return n.lateLoadKey="DonutContentConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(m.nY),e.Y36(ue.UA),e.Y36(ve))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-donut-content-configuration"]],inputs:{chartType:"chartType",formatter:"formatter",aggregator:"aggregator"},outputs:{formReady:"formReady"},features:[e.TTD],decls:1,vars:1,consts:function(){let s,t,i,o,r;return s=$localize`:␟c488fe848f6a00cefad87ff595b384e4e0f7ff1d␟2010665105219070274:Donut Content Configuration`,t=$localize`:␟87181c5142c58c027d97ac0f37b9c6bb78b624cd␟6056551297792932760:Aggregate`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,o=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,r=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"donut-content-configuration__accordion-content"],["formGroupName","aggregator",1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","aggregatorType"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["formGroupName","formatter",1,"mb-4"],["caption",o,3,"control"],["placeholder",r,"formControlName","componentType"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&e.YNc(0,dd,24,20,"ng-container",0),2&t&&e.Q6J("ngIf",i.shown)},dependencies:[d.sg,d.O5,p.JJ,p.JL,p.sg,p.u,p.x0,x.Pl,k.$,a.oJW,a.hgI,a.j_n,a.rLF,De.J,d.Ov,xe.F,$e.d],styles:[".donut-content-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function Yi(n,s){const t=n.markAsTouched;n.markAsTouched=()=>{t.apply(n,arguments),s()}}function cd(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"nui-form-field",20)(3,"nui-textbox-number",21),e.NdJ("valueChange",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.stub())}),e.qZA(),e.TgZ(4,"nui-validation-message",22),e.SDv(5,23),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("control",t.form.controls.width),e.xp6(2),e.Q6J("show",t.form.controls.width.invalid)}}function _d(n,s){1&n&&(e.TgZ(0,"div",19)(1,"nui-message",24),e.tHW(2,25),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function ud(n,s){if(1&n&&(e.ynx(0),e.YNc(1,cd,6,2,"ng-container",17),e.YNc(2,_d,4,1,"div",18),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isWidthMessageDisplayedForThisColumn()),e.xp6(1),e.Q6J("ngIf",t.isWidthMessageDisplayedForThisColumn())}}let Xn=(()=>{class n{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.isWidthMessageDisplayed=!1,this.destroy$=new oe.x,this.form=this.formBuilder.group({label:["",[p.kI.required]],isActive:!0,width:void 0}),this.form.valueChanges.pipe((0,_e.R)(this.destroy$)).subscribe(o=>{var r;null===(r=this.changeFn)||void 0===r||r.call(this,o)})}registerOnChange(t){this.changeFn=t}registerOnTouched(t){}setDisabledState(t){t?this.form.disable():this.form.enable()}validate(t){return this.form.valid?null:{nestedForm:!0}}writeValue(t){this.form.patchValue({label:t.label,isActive:t.isActive,width:t.width},{emitEvent:!1}),this.changeDetector.markForCheck()}ngOnInit(){Yi(this.formControl,()=>{this.form.markAllAsTouched()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}stub(){}isWidthMessageDisplayedForThisColumn(){return this.isWidthMessageDisplayed&&"number"!=typeof this.form.controls.width.value}}return n.lateLoadKey="DescriptionConfigurationV2Component",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-description-configuration-v2"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}])],decls:23,vars:17,consts:function(){let s,t,i,o,r,c,g,E;return s=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,o=$localize`:␟49e97f1ac4309fd5992a9520d74fa732c4a77481␟5413084173448405143:Show this column`,r=$localize`:␟6b3f02f1feab94e0f0a6823f49a009fa7be7dfa9␟8419094197651631948:Column width (px)`,c=$localize`:␟455a91268699c6879146b5fe44595de6628e6d32␟4319439665214681027:Auto width`,g=$localize`:␟356aa3e61db78cca0742edfab898c6bf0c8051a6␟3835988025416576743: Minimum width of the column is 62px `,E=$localize`:␟8e3d3c0a38f0221dc5901334290180f5705a0fbf␟2546138047162560558:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:All columns cannot have fixed width.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"mb-3",3,"control"],["formControlName","label"],["for","required"],i,[3,"control"],["formControlName","isActive"],o,[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",r,1,"mb-3",3,"control"],["placeholder",c,"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],g,["type","info",3,"allowDismiss"],E]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10),e._UZ(16,"nui-textbox",11),e.TgZ(17,"nui-validation-message",12),e.SDv(18,13),e.qZA()()(),e.TgZ(19,"nui-form-field",14)(20,"nui-checkbox",15),e.SDv(21,16),e.qZA()(),e.YNc(22,ud,3,2,"ng-container",17),e.qZA()(),e.BQk()),2&t){let o;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,8,e.lcZ(3,10,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,12,e.xi3(7,14,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.form.controls.label.value),e.xp6(1),e.hij(" ",i.form.controls.label.value," "),e.xp6(3),e.Q6J("control",i.form.controls.label),e.xp6(4),e.Q6J("control",i.form.controls.isActive),e.xp6(3),e.Q6J("ngIf",null==(o=i.form.get("isActive"))?null:o.value)}},dependencies:[d.O5,p.JJ,p.JL,p.sg,p.u,a.oJW,a.XHW,a.I5I,a.hgI,a.bK4,a.CfE,a.qqZ,De.J,d.Ov,xe.F,$e.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();var jn=l(88173);function pd(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function gd(n,s){}const hd=function(){return["formReady"]};function md(n,s){if(1&n){const t=e.EpF();e.ynx(0,15,16),e.NdJ("output",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onFormReady(o.payload))}),e.YNc(2,gd,0,0,"ng-template",17),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(1);return e.KtG(r.attached(o))}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",i.formatterConfigurator)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,hd)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let qn=(()=>{class n{set formatters(t){this.tableFormattersRegistryService.isEmpty&&this.handleFormattersUpdate(t)}get formatters(){return this._formatters}set dataFields(t){this._dataFields=t,this.updateAvailableFormatters()}get dataFields(){return this._dataFields}get formatter(){var t;return null===(t=this.form)||void 0===t?void 0:t.value}constructor(t,i,o,r,c,g){var E,P,Z;this.formBuilder=t,this.changeDetector=i,this.configuratorHeading=o,this.eventBus=r,this.formattersRegistryCommon=c,this.tableFormattersRegistryService=g,this._dataFields=[],this.onDestroy$=new oe.x,this.providedFormatters=[],this._formatters=[],this.propertiesFormReady=new oe.x,this.subscribeToFormattersRegistry(),this.form=this.formBuilder.group({componentType:this.formBuilder.control(null===(P=null===(E=this.providedFormatters)||void 0===E?void 0:E[0])||void 0===P?void 0:P.componentType,p.kI.required),properties:this.formBuilder.control({},()=>{var V;return null!==(V=this.propertiesForm)&&void 0!==V&&V.invalid?{properties:!0}:null})}),null===(Z=this.form.get("componentType"))||void 0===Z||Z.valueChanges.pipe((0,_e.R)(this.onDestroy$)).subscribe(()=>this.createFormatterConfigurator()),this.form.valueChanges.pipe((0,_e.R)(this.onDestroy$)).subscribe(()=>{this.updateSubtitle(),this.onValueChange(),this.changeDetector.detectChanges()}),this.eventBus.subscribeUntil(ke.PF,this.onDestroy$,V=>{const{dataFields:ee}=ni()(V.payload.result)?V.payload:V.payload.result||{};this.dataFields=ee})}ngOnInit(){Yi(this.formControl,()=>{this.form.markAllAsTouched(),this.propertiesForm.markAllAsTouched()})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}ngOnChanges(t){}registerOnChange(t){this.changeFn=t}registerOnTouched(t){this.touchFn=t}setDisabledState(t){}writeValue(t){this.input=t,this.form.patchValue(t,{emitEvent:!1}),this.createFormatterConfigurator(),this.changeDetector.markForCheck()}validate(t){return!this.form.valid||this.propertiesForm&&!this.propertiesForm.valid?{error:"error"}:null}getSelectedFormatterDefinition(){var t,i;if(this.providedFormatters.length>0){const o=null===(t=this.form.get("componentType"))||void 0===t?void 0:t.value;return null!==(i=this.providedFormatters.find(r=>r.componentType===o))&&void 0!==i?i:null}return null}getSelectedDataField(){var t,i;const o=this.form.controls.properties;if(o&&this.dataFields&&this.dataFields.length>0){const r=null===(t=o.value.dataFieldIds)||void 0===t?void 0:t.value;return null!==(i=this.dataFields.find(c=>c.id===r))&&void 0!==i?i:null}return null}ngDoCheck(){if(!this.form||!this.propertiesForm)return;const t=this.form.controls.properties;this.propertiesForm.touched&&t.untouched&&(t.markAsTouched(),this.changeDetector.markForCheck()),this.propertiesForm.untouched&&t.touched&&(t.markAsUntouched(),this.changeDetector.markForCheck())}onFormReady(t){this.propertiesFormReady.next(),this.propertiesForm=t;const i=this.form.controls.properties;i.markAsPristine(),this.propertiesForm.valueChanges.pipe((0,_e.R)(this.propertiesFormReady)).subscribe(()=>{i.setValue(this.propertiesForm.value),this.onValueChange()}),this.propertiesForm.patchValue(this.formatter.properties)}onValueChange(){var t;null===(t=this.changeFn)||void 0===t||t.call(this,this.form.value)}updateSubtitle(){var t,i;this.subtitleText=`${null===(t=this.getSelectedFormatterDefinition())||void 0===t?void 0:t.label}`,this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(`, ${null===(i=this.getSelectedDataField())||void 0===i?void 0:i.label}`))}createFormatterConfigurator(){var t,i,o,r;const c=this.providedFormatters.find(g=>{var E;return g.componentType===(null===(E=this.form.get("componentType"))||void 0===E?void 0:E.value)});this.formatterConfigurator=c?null!==(t=c.configurationComponent)&&void 0!==t?t:"ValueSelectorComponent":null,c?.componentType!==(null===(i=this.formatter)||void 0===i?void 0:i.componentType)&&!(null===(r=null===(o=this.formatter)||void 0===o?void 0:o.properties)||void 0===r)&&r.dataFieldIds&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:c}}updateAvailableFormatters(){var t;if(null===(t=this._dataFields)||void 0===t||!t.length||!this.providedFormatters.length)return;const i={null:!0};this._dataFields.forEach(o=>i[o.dataType]=!0),this._formatters=this.providedFormatters.filter(o=>(o.dataTypes.value instanceof Array?o.dataTypes.value:[o.dataTypes.value]).some(c=>i[c])),this.form&&this.createFormatterConfigurator()}subscribeToFormattersRegistry(){this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,_e.R)(this.onDestroy$)).subscribe(t=>{this.handleFormattersUpdate(t)})}handleFormattersUpdate(t){t!==this.providedFormatters&&(this.providedFormatters=t?.length>0?t:jn.X,this.updateAvailableFormatters())}get formattersRegistry(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}}return n.lateLoadKey="PresentationConfigurationV2Component",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(Qe.p),e.Y36(m.nY),e.Y36(m.m4,8),e.Y36(ue.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-presentation-configuration-v2"]],inputs:{formatters:"formatters",dataFieldIds:"dataFieldIds",formControl:"formControl"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}],[{provide:p.gN,useExisting:p.sg}]),e.TTD],decls:20,vars:20,consts:function(){let s,t,i;return s=$localize`:␟3c991a92a6b04b4f5a42f0b72befa96a8d2e809c␟5065098939944125110:Property and formatting`,t=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10)(16,"nui-select-v2",11),e.ALo(17,"async"),e.YNc(18,pd,2,3,"nui-select-v2-option",12),e.qZA()()(),e.YNc(19,md,3,5,"ng-container",13),e.qZA()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form,"customize"))),e.xp6(6),e.Q6J("title",i.subtitleText),e.xp6(1),e.hij(" ",i.subtitleText," "),e.xp6(3),e.Q6J("control",i.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(17,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.formatters),e.xp6(1),e.Q6J("ngIf",i.formatterConfigurator))},dependencies:[d.sg,d.O5,p.JJ,p.JL,p.sg,p.u,x.Pl,k.$,a.oJW,a.hgI,a.j_n,a.rLF,De.J,d.Ov,xe.F,$e.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})(),eo=(()=>{class n{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.destroy$=new oe.x,this.isWidthMessageDisplayed=!1,this.form=this.formBuilder.group({description:this.formBuilder.control({}),presentation:this.formBuilder.control({})}),this.form.valueChanges.pipe((0,_e.R)(this.destroy$)).subscribe(o=>{var r;const c=Object.assign(Object.assign({id:null===(r=this.input)||void 0===r?void 0:r.id},o.description),{formatter:o.presentation});this.changeFn(c)})}ngOnInit(){Yi(this.formControl,()=>{this.form.markAllAsTouched()})}registerOnChange(t){this.changeFn=t}registerOnTouched(t){}setDisabledState(t){}validate(t){return this.form.valid?null:{error:"error"}}writeValue(t){this.input=t,this.form.setValue({presentation:t?.formatter||{},description:t},{emitEvent:!1}),this.changeDetector.markForCheck()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.lateLoadKey="TableColumnConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-column-configuration"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}])],decls:3,vars:4,consts:[[3,"formGroup"],[3,"formControl","isWidthMessageDisplayed"],[3,"formControl"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"nui-description-configuration-v2",1)(2,"nui-presentation-configuration-v2",2),e.qZA()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("formControl",i.form.controls.description)("isWidthMessageDisplayed",i.isWidthMessageDisplayed),e.xp6(1),e.Q6J("formControl",i.form.controls.presentation))},dependencies:[p.JJ,p.JL,p.oH,p.sg,Xn,qn],encapsulation:2}),n})();var fd=l(90377),to=l.n(fd),Td=l(72459);function Cd(n,s){if(1&n&&e._UZ(0,"nui-drop-area",16),2&n){const t=e.oxw(3);e.Udp("height",t.draggedItemHeight,"px")}}function Od(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",17),e._UZ(2,"nui-icon",18),e.qZA(),e.BQk(),e.TgZ(3,"span",19),e.ALo(4,"nuiWidgetConfiguratorSectionHeader"),e._uU(5),e.ALo(6,"nuiWidgetConfiguratorSectionHeader"),e.qZA()),2&n){const t=e.oxw(),i=t.$implicit,o=t.index,r=e.oxw(2);e.xp6(3),e.Q6J("title",e.Dn7(4,2,null==i?null:i.value.label,o,r.columnLabel)),e.xp6(2),e.hij(" ",e.Dn7(6,6,null==i?null:i.value.label,o,r.columnLabel)," ")}}function Id(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,r=e.oxw(2);return e.KtG(r.removeItem(o))}),e.qZA()()}if(2&n){const t=e.oxw().index;e.xp6(1),e.MGl("id","table-widget-remove-column-btn-",t,"")}}function vd(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.NdJ("cdkDragStarted",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cdkDragStarted(o))}),e.YNc(1,Cd,1,2,"nui-drop-area",11),e.YNc(2,Od,7,10,"ng-template",null,12,e.W1O),e.YNc(4,Id,2,1,"ng-template",null,13,e.W1O),e.TgZ(6,"nui-widget-configurator-section",14),e._UZ(7,"nui-table-column-configuration",15),e.qZA()()}if(2&n){const t=s.$implicit,i=e.MAs(3),o=e.MAs(5),r=e.oxw(2);e.xp6(6),e.Q6J("headerTextTemplate",i)("headerButtonsTemplate",o),e.xp6(1),e.Q6J("formControl",t)("isWidthMessageDisplayed",r.isWidthMessageDisplayed)}}function Ed(n,s){1&n&&(e.TgZ(0,"div",22)(1,"nui-message",23)(2,"b"),e.SDv(3,24),e.qZA()()()),2&n&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function Sd(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("cdkDropListDropped",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.drop(o))}),e.TgZ(1,"div",3),e.YNc(2,vd,8,4,"div",4),e.YNc(3,Ed,4,1,"div",5),e.ALo(4,"async"),e.TgZ(5,"button",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addColumn())}),e.SDv(6,7),e.qZA(),e.TgZ(7,"button",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onResetColumns())}),e.SDv(8,9),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngForOf",t.columnForms)("ngForTrackBy",t.trackBy),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,4,t.emptyColumns$)&&t.form.touched)}}let io=(()=>{class n{get columnForms(){return this.form.controls.columns.controls}constructor(t,i,o,r,c,g,E){this.formBuilder=t,this.changeDetector=i,this.dialogService=o,this.pizzagnaService=r,this.dataSourceManager=c,this.tableFormatterRegistry=g,this.eventBus=E,this.columns=[],this.formReady=new e.vpe,this.dataSourceFields=[],this.isWidthMessageDisplayed=!1,this.columnLabel=$localize`Column`,this.onDestroy$=new oe.x,this.form=this.formBuilder.group({columns:this.formBuilder.array([])}),this.form.controls.columns.valueChanges.pipe((0,_e.R)(this.onDestroy$)).subscribe(P=>{this.isWidthMessageDisplayed=this.getWidthMessageDisplayed(P),this.changeDetector.markForCheck()}),this.eventBus.subscribeUntil(ke.gg,this.onDestroy$,P=>{P.payload&&(this.dataSource=P.payload,this.changeDetector.markForCheck())}),this.eventBus.subscribeUntil(ke.PF,this.onDestroy$,P=>{var Z,V,ee,ge;if(null!==(Z=P.payload)&&void 0!==Z&&Z.error)return;const{dataFields:ie}=ni()(P.payload.result)?P.payload:P.payload.result||{};this.dataSourceFields=ie??[];const Oe=null===(ge=null===(ee=null===(V=this.dataSource)||void 0===V?void 0:V.features)||void 0===ee?void 0:ee.getFeatureConfig(m.ni.DisableTableColumnGeneration))||void 0===ge?void 0:ge.enabled,he=this.mergeColumns(this.dataSourceFields,this.getColumns());he?.length||Oe?this.updateColumns(he):Oe||this.resetColumns(!1),this.changeDetector.markForCheck()}),c.error$.pipe((0,_e.R)(this.onDestroy$)).subscribe(P=>{this.dataSourceError=P,this.changeDetector.markForCheck()})}ngOnInit(){var t,i,o;if(this.formReady.emit(this.form),this.template&&(null===(t=this.tableFormatterRegistry.getItems())||void 0===t||!t.length)){const r=null===(o=null===(i=this.template)||void 0===i?void 0:i[1].properties)||void 0===o?void 0:o.formatters;this.tableFormatterRegistry.addItems(r)}}ngOnChanges(t){t.columns&&this.updateColumns(this.columns,!1)}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}getColumns(){return this.form.controls.columns.value}updateColumns(t,i=!0){const o=this.form.controls.columns;o.controls=t.map(r=>{const c=new p.NI(r);c.setParent(o);const g=o.controls.find(E=>E.value.id===r.id);return g&&(c.markAsTouched=g.markAsTouched),c}),o.updateValueAndValidity({emitEvent:i}),this.changeDetector.markForCheck()}trackBy(t,i){var o;return null===(o=i?.value)||void 0===o?void 0:o.id}addColumn(){this.form.controls.columns.push(new p.NI({id:(0,a.VjN)("column"),label:"",isActive:!0,formatter:{}}))}onResetColumns(){var t;this.resetColumns(!(null===(t=this.getColumns())||void 0===t||!t.length))}resetColumns(t){const i=()=>{var o;const r=null===(o=this.dataSourceFields)||void 0===o?void 0:o.map(c=>({id:(0,a.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:c.id}}},isActive:!0,label:c.label,width:void 0,sortable:c.sortable}));this.updateColumns(r)};t?this.dialogService.confirm({title:$localize`Are you sure?`,message:$localize`Resetting the columns will revert them to their default configurations. Do you wish to proceed?`,confirmText:$localize`Reset Columns`}).result.then(r=>{r&&i()},()=>{}):i()}mergeColumns(t,i){const o=t.map(r=>r.id);return i.filter(r=>{var c,g,E,P;return!(null===(g=null===(c=r.formatter)||void 0===c?void 0:c.properties)||void 0===g||!g.dataFieldIds)&&to()(null===(P=null===(E=r.formatter)||void 0===E?void 0:E.properties)||void 0===P?void 0:P.dataFieldIds).some(Z=>o.includes(Z))})}getWidthMessageDisplayed(t){let i=0;for(const o of t)if("number"!=typeof o.width&&i++,i>1)return!1;return!0}moveItem(t,i){const o=this.form.controls.columns,r=o.at(t);o.removeAt(t),o.insert(i,r),this.changeDetector.detectChanges()}removeItem(t){this.form.controls.columns.removeAt(t),this.changeDetector.detectChanges()}drop(t){this.moveItem(t.previousIndex,t.currentIndex)}cdkDragStarted(t){this.draggedItemHeight=t.source.element.nativeElement.offsetHeight}}return n.lateLoadKey="TableColumnsConfigurationV2Component",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(a.xAy),e.Y36(ce.p),e.Y36(Td.q),e.Y36(ue.C),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",componentId:"componentId",template:"template"},outputs:{formReady:"formReady"},features:[e.TTD],decls:2,vars:1,consts:function(){let s,t,i;return s=$localize`:␟5d48cb2ef826d59b1522d72e9909067bbffc0cd8␟4528805165676686479: Add new column `,t=$localize`:␟35328f1fffd2017d6248e5e862bef9e325aca7e9␟5405644315909491800: Reset columns `,i=$localize`:␟de46acf5ee4d137a30dbc57e48aef06379e6e500␟8256146955477966251:At least one column must be added.`,[[1,"nui-table-columns-configuration"],["cdkDropList","",3,"formGroup","cdkDropListDropped",4,"ngIf"],["cdkDropList","",3,"formGroup","cdkDropListDropped"],["formArrayName","columns"],["cdkDrag","","class","nui-table-columns-configuration__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],s,["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],t,["cdkDrag","",1,"nui-table-columns-configuration__node-item",3,"cdkDragStarted"],["class","nui-table-columns-configuration__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],[1,"no-margin",3,"headerTextTemplate","headerButtonsTemplate"],[3,"formControl","isWidthMessageDisplayed"],[1,"nui-table-columns-configuration__drop-area"],["cdkDragHandle","",1,"nui-table-columns-configuration__drag-handler"],["icon","drag"],[1,"nui-table-columns-configuration__header-text",3,"title"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],i]},template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Sd,9,6,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!i.dataSourceError&&i.dataSourceFields.length))},dependencies:[d.sg,d.O5,p.JJ,p.JL,p.oH,p.sg,p.CE,et.Wj,et.Zt,et.Bh,et.Hk,a.oJW,a.r0F,a.qqZ,eo,Ye,qt,d.Ov,ki],styles:[".nui-table-columns-configuration__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-table-columns-configuration__drag-handler{cursor:move;display:flex}.nui-table-columns-configuration__node-item{background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-table-columns-configuration__node-item .widget-configurator-section{margin:0}.nui-table-columns-configuration__drop-area{margin:15px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),n})();function Rd(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"nui-form-field",20)(3,"nui-textbox-number",21),e.NdJ("valueChange",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.stub())}),e.qZA(),e.TgZ(4,"nui-validation-message",22),e.SDv(5,23),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("control",t.form.controls.width),e.xp6(2),e.Q6J("show",t.form.controls.width.invalid)}}function Nd(n,s){1&n&&(e.TgZ(0,"nui-message",24),e.tHW(1,25),e._UZ(2,"b"),e.N_p(),e.qZA()),2&n&&e.Q6J("allowDismiss",!1)}function Ad(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Rd,6,2,"ng-container",17),e.YNc(2,Nd,3,1,"nui-message",18),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isWidthMessageDisplayed),e.xp6(1),e.Q6J("ngIf",t.isWidthMessageDisplayed)}}let yd=(()=>{class n{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.formReady=new e.vpe,this.formDestroy=new e.vpe}ngOnInit(){var t;this.form=this.formBuilder.group({label:[this.label||null,[p.kI.required]],isActive:null===(t=this.isActive)||void 0===t||t,width:this.width||void 0}),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,r;t.label&&(null===(i=this.form)||void 0===i||i.patchValue({label:t.label.currentValue})),t.isActive&&(null===(o=this.form)||void 0===o||o.patchValue({isActive:t.isActive.currentValue})),t.width&&(null===(r=this.form)||void 0===r||r.patchValue({width:t.width.currentValue}))}stub(){}ngOnDestroy(){this.formDestroy.emit(this.form)}}return n.lateLoadKey="DescriptionConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label",isActive:"isActive",width:"width",isWidthMessageDisplayed:"isWidthMessageDisplayed"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:23,vars:17,consts:function(){let s,t,i,o,r,c,g,E;return s=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,o=$localize`:␟49e97f1ac4309fd5992a9520d74fa732c4a77481␟5413084173448405143:Show this column`,r=$localize`:␟6b3f02f1feab94e0f0a6823f49a009fa7be7dfa9␟8419094197651631948:Column width (px)`,c=$localize`:␟455a91268699c6879146b5fe44595de6628e6d32␟4319439665214681027:Auto width`,g=$localize`:␟356aa3e61db78cca0742edfab898c6bf0c8051a6␟3835988025416576743: Minimum width of the column is 62px `,E=$localize`:␟ed094d9c3b5f802e6adca32349fb4756bfad4786␟5991148749044556035:${"\ufffd#2\ufffd"}:START_BOLD_TEXT:All columns can not have fixed width.${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"mb-3",3,"control"],["formControlName","label"],["for","required"],i,[3,"control"],["formControlName","isActive"],o,[4,"ngIf"],["type","info",3,"allowDismiss",4,"ngIf"],[1,"mt-4"],["caption",r,1,"mb-3",3,"control"],["placeholder",c,"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],g,["type","info",3,"allowDismiss"],E]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10),e._UZ(16,"nui-textbox",11),e.TgZ(17,"nui-validation-message",12),e.SDv(18,13),e.qZA()()(),e.TgZ(19,"nui-form-field",14)(20,"nui-checkbox",15),e.SDv(21,16),e.qZA()(),e.YNc(22,Ad,3,2,"ng-container",17),e.qZA()(),e.BQk()),2&t){let o;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,8,e.lcZ(3,10,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,12,e.xi3(7,14,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.form.controls.label.value),e.xp6(1),e.hij(" ",i.form.controls.label.value," "),e.xp6(3),e.Q6J("control",i.form.controls.label),e.xp6(4),e.Q6J("control",i.form.controls.isActive),e.xp6(3),e.Q6J("ngIf",null==(o=i.form.get("isActive"))?null:o.value)}},dependencies:[d.O5,p.JJ,p.JL,p.sg,p.u,a.oJW,a.XHW,a.I5I,a.hgI,a.bK4,a.CfE,a.qqZ,De.J,d.Ov,xe.F,$e.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})(),Ki=(()=>{class n{constructor(t,i,o,r){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.logger=r,this.formReady=new e.vpe,this.dropdownItems={}}ngOnChanges(t){t.formatterDefinition&&(this.mapDropdownItems(),this.initForm()),t.dataFields&&this.mapDropdownItems(),t.formatter&&this.updateForm()}mapDropdownItems(){this.dataFields?this.dropdownItems=Object.keys(this.formatterDefinition.dataTypes).reduce((t,i)=>{const o=this.formatterDefinition.dataTypes[i];return t[i]=o?this.dataFields.filter(r=>"string"==typeof o?r.dataType===o:o.includes(r.dataType)):this.dataFields,t},{}):this.logger.error("There are no dataFields defined for formatter:",this.formatterDefinition)}get dataFieldIds(){return this.form.get("dataFieldIds")}initForm(){const i=Object.keys(this.formatterDefinition.dataTypes||{}).reduce((o,r)=>{var c,g,E,P;return o[r]=[null!==(P=null===(E=null===(g=null===(c=this.formatter)||void 0===c?void 0:c.properties)||void 0===g?void 0:g.dataFieldIds)||void 0===E?void 0:E[r])&&void 0!==P?P:null,p.kI.required],o},{});this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group(i)}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}updateForm(){var t;this.form.patchValue(null!==(t=this.formatter.properties)&&void 0!==t?t:{},{onlySelf:!1,emitEvent:!1})}addCustomFormControls(t){}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.sBO),e.LFG(Qe.p),e.LFG(p.qu),e.LFG(a.mQy))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function Md(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Pd(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}let Dd=(()=>{class n extends Ki{constructor(t,i,o,r){super(t,i,o,r)}initForm(){this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group({link:[null,p.kI.required],value:[null,p.kI.required]}),targetSelf:[!1]}),this.formReady.emit(this.form)}}return n.lateLoadKey="LinkConfiguratorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Qe.p),e.Y36(p.qu),e.Y36(a.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-link-configurator"]],features:[e.qOj],decls:17,vars:6,consts:function(){let s,t,i,o,r;return s=$localize`:label field caption| the entity field to be selected for the
                    html label property␟0b86bb6b0b2a82f208239974d253b86395143503␟7152588193113320722:Label`,t=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,i=$localize`:url field caption| the entity field to be selected for the
                    url html property␟ab9389f13cf14de62c26ae2d6d29351d72d8ca9e␟8752860715344063998:URL`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,r=$localize`:form field caption|switch configuring whether formatted link
                should open in new window/tab␟21e975dab4148f3f1b43017b9df1312910d25a21␟1433694158029413710:Open in the same window`,[[3,"formGroup"],["formGroupName","dataFieldIds"],[1,"mb-4"],["caption",s,1,"mb-3",3,"control"],["formControlName","value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],t,["caption",i,1,"mb-3",3,"control"],["formControlName","link"],o,["caption",r,1,"mb-3",3,"control"],["id","nui-switch-target","formControlName","targetSelf"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"nui-form-field",3)(4,"nui-select-v2",4),e.YNc(5,Md,2,2,"nui-select-v2-option",5),e.qZA(),e.TgZ(6,"nui-validation-message",6),e.SDv(7,7),e.qZA()()(),e.TgZ(8,"div")(9,"nui-form-field",8)(10,"nui-select-v2",9),e.YNc(11,Pd,2,2,"nui-select-v2-option",5),e.qZA(),e.TgZ(12,"nui-validation-message",6),e.SDv(13,10),e.qZA()()()(),e.TgZ(14,"div")(15,"nui-form-field",11),e._UZ(16,"nui-switch",12),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.dataFieldIds.controls.value),e.xp6(2),e.Q6J("ngForOf",i.dropdownItems.value),e.xp6(4),e.Q6J("control",i.dataFieldIds.controls.link),e.xp6(2),e.Q6J("ngForOf",i.dropdownItems.link),e.xp6(4),e.Q6J("control",i.form.controls.targetSelf))},dependencies:[d.sg,p.JJ,p.JL,p.sg,p.u,p.x0,a.hgI,a.j_n,a.rLF,a.CfE,a.qUD],encapsulation:2}),n})();function bd(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",8),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Fd(n,s){if(1&n&&(e.TgZ(0,"div",1)(1,"div",2)(2,"nui-form-field",3)(3,"nui-select-v2",4),e.ALo(4,"async"),e.YNc(5,bd,2,3,"nui-select-v2-option",5),e.qZA(),e.TgZ(6,"nui-validation-message",6),e.SDv(7,7),e.qZA()()()()),2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.dataFieldIds.controls.value),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(4,4,t.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",t.dropdownItems.value)}}let xd=(()=>{class n extends Ki{constructor(t,i,o,r){super(t,i,o,r)}}return n.lateLoadKey="ValueSelectorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Qe.p),e.Y36(p.qu),e.Y36(a.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-value-selector"]],features:[e.qOj],decls:1,vars:1,consts:function(){let s,t,i;return s=$localize`:␟5049e204c14c648691ac775a64fb504467aeb549␟6555318547274416232:Value`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["formGroupName","dataFieldIds"],["caption",s,1,"mb-3",3,"control"],["formControlName","value","placeholder",t,3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,Fd,8,6,"div",0),2&t&&e.Q6J("ngIf",i.form)},dependencies:[d.sg,d.O5,p.JJ,p.JL,p.sg,p.u,p.x0,a.hgI,a.j_n,a.rLF,a.CfE,d.Ov],encapsulation:2}),n})();var Ld=l(27501),Gd=l.n(Ld);function wd(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function $d(n,s){}const Ud=function(){return["formReady"]};function zd(n,s){if(1&n){const t=e.EpF();e.ynx(0,15,16),e.NdJ("output",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onFormReady(o.payload))}),e.YNc(2,$d,0,0,"ng-template",17),e.NdJ("attached",function(o){e.CHM(t);const r=e.MAs(1);return e.KtG(r.attached(o))}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",i.formatterConfigurator)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,Ud)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let no=(()=>{class n{set formatters(t){this.tableFormattersRegistryService.isEmpty&&this.handleFormattersUpdate(t)}get formatters(){return this._formatters}set dataFields(t){this._dataFields=t,this.updateAvailableFormatters()}get dataFields(){return this._dataFields}constructor(t,i,o,r,c){this.formBuilder=t,this.changeDetector=i,this.configuratorHeading=o,this.formattersRegistryCommon=r,this.tableFormattersRegistryService=c,this._providedFormatters=[],this._formatters=[],this._dataFields=[],this.formReady=new e.vpe,this.formDestroy=new e.vpe,this.formatterForm=this.formBuilder.group({}),this.formatterFormGroupName="formatter",this.onDestroy$=new oe.x,this.subscribeToFormattersRegistry()}ngOnInit(){var t;this.formatterForm=this.formBuilder.group({componentType:[this.formatter&&this.formatter.componentType||this._providedFormatters&&this._providedFormatters.length>0&&this._providedFormatters[0].componentType,[p.kI.required]]}),this.form=this.formBuilder.group({[this.formatterFormGroupName]:this.formatterForm}),null===(t=this.formatterForm.get("componentType"))||void 0===t||t.valueChanges.pipe((0,_e.R)(this.onDestroy$)).subscribe(()=>this.createFormatterConfigurator()),this.createFormatterConfigurator(),this.formReady.emit(this.form),this.formatterForm.valueChanges.pipe((0,_e.R)(this.onDestroy$)).subscribe(()=>{this.updateSubtitle(),this.changeDetector.detectChanges()})}ngAfterViewInit(){}ngOnChanges(t){var i;if(t.dataFieldIds){const{currentValue:o,previousValue:r}=t.dataFieldIds;if(o&&o!==r){const c=o.map(g=>({id:g,label:Gd()(g)}));this.dataFields=c,this.updateSubtitle()}}t.formatter&&(null===(i=this.form)||void 0===i||i.patchValue({[this.formatterFormGroupName]:t.formatter.currentValue},{emitEvent:!1}),this.updateSubtitle()),t.dataFields&&0===t.dataFields.previousValue.length&&this.formatterForm&&this.updateSubtitle()}getSelectedFormatterDefinition(){var t,i;if(this._providedFormatters.length>0){const o=null===(t=this.formatterForm.get("componentType"))||void 0===t?void 0:t.value;return null!==(i=this._providedFormatters.find(r=>r.componentType===o))&&void 0!==i?i:null}return null}getSelectedDataField(){var t,i;const o=this.formatterForm.controls.properties;if(o&&this.dataFields&&this.dataFields.length>0){const r=null===(t=o.get("dataFieldIds"))||void 0===t?void 0:t.value.value;return null!==(i=this.dataFields.find(c=>c.id===r))&&void 0!==i?i:null}return null}onFormReady(t){this.form.get(this.formatterFormGroupName).setControl("properties",t)}updateSubtitle(){var t,i;this.subtitleText=`${null===(t=this.getSelectedFormatterDefinition())||void 0===t?void 0:t.label}`,this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(`, ${null===(i=this.getSelectedDataField())||void 0===i?void 0:i.label}`))}createFormatterConfigurator(){var t,i,o,r;const c=this._providedFormatters.find(g=>{var E;return g.componentType===(null===(E=this.formatterForm.get("componentType"))||void 0===E?void 0:E.value)});this.formatterConfigurator=c?null!==(t=c.configurationComponent)&&void 0!==t?t:"ValueSelectorComponent":null,c?.componentType!==(null===(i=this.formatter)||void 0===i?void 0:i.componentType)&&!(null===(r=null===(o=this.formatter)||void 0===o?void 0:o.properties)||void 0===r)&&r.dataFieldIds&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:c}}updateAvailableFormatters(){if(!this._dataFields.length||!this._providedFormatters.length)return;const t={null:!0};this._dataFields.forEach(i=>t[i.dataType]=!0),this._formatters=this._providedFormatters.filter(i=>(i.dataTypes.value instanceof Array?i.dataTypes.value:[i.dataTypes.value]).some(r=>t[r])),this.formatterForm&&this.createFormatterConfigurator()}subscribeToFormattersRegistry(){this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,st.b)(this.handleFormattersUpdate.bind(this)),(0,_e.R)(this.onDestroy$)).subscribe()}handleFormattersUpdate(t){t!==this._providedFormatters&&(this._providedFormatters=t,this.updateAvailableFormatters())}get formattersRegistry(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}ngOnDestroy(){this.formDestroy.emit(this.form),this.onDestroy$.next(),this.onDestroy$.complete()}}return n.lateLoadKey="PresentationConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(Qe.p),e.Y36(m.m4,8),e.Y36(ue.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-column-presentation-configuration"]],inputs:{formatter:"formatter",formatters:"formatters",dataFieldIds:"dataFieldIds",dataFields:"dataFields"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e._Bn([],[{provide:p.gN,useExisting:p.sg}]),e.TTD],decls:20,vars:20,consts:function(){let s,t,i;return s=$localize`:␟3c991a92a6b04b4f5a42f0b72befa96a8d2e809c␟5065098939944125110:Property and formatting`,t=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10)(16,"nui-select-v2",11),e.ALo(17,"async"),e.YNc(18,wd,2,3,"nui-select-v2-option",12),e.qZA()()(),e.YNc(19,zd,3,5,"ng-container",13),e.qZA()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.formatterForm),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form,"customize"))),e.xp6(6),e.Q6J("title",i.subtitleText),e.xp6(1),e.hij(" ",i.subtitleText," "),e.xp6(3),e.Q6J("control",i.formatterForm.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(17,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.formatters),e.xp6(1),e.Q6J("ngIf",i.formatterConfigurator))},dependencies:[d.sg,d.O5,p.JJ,p.JL,p.sg,p.u,x.Pl,k.$,a.oJW,a.hgI,a.j_n,a.rLF,De.J,d.Ov,xe.F,$e.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function Bd(n,s){1&n&&(e.TgZ(0,"div",6)(1,"nui-message",7),e.tHW(2,8),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("allowDismiss",!1))}let Wd=(()=>{class n{constructor(t,i,o,r,c){this.formBuilder=t,this.changeDetector=i,this.dialogService=o,this.pizzagnaService=r,this.eventBus=c,this.columns=[],this.formatters=[],this.dataFields=[],this.formReady=new e.vpe,this.onDestroy$=new oe.x,this.lastValidDataFields=[],this.eventBus.subscribeUntil(ke.gg,this.onDestroy$,g=>{g.payload&&(this.dataSource=g.payload)}),this.eventBus.subscribeUntil(ke.PF,this.onDestroy$,g=>{var E;const{dataFields:P}=ni()(g.payload.result)?g.payload:g.payload.result||{};if(P){let Z=this.pizzagnaService.pizzagna;Z=(0,a.zdu)(Z,`${m.xW.Data}.columns.properties.dataFields`,P);const ee=(null===(E=this.pizzagnaService.pizzagna[m.xW.Structure].columns.properties)||void 0===E?void 0:E.template).findIndex(he=>"presentation"===he.id);Z=(0,a.zdu)(Z,`${m.xW.Structure}.columns.properties.template[${ee}].properties.dataFields`,P),Z=Yt()(this.pizzagnaService.pizzagna,`${m.xW.Data}.columns.properties.columns`).map(he=>he.id).reduce((he,Ie)=>(0,a.zdu)(he,`${m.xW.Data}.${Ie}/presentation.properties.dataFields`,P),Z),this.pizzagnaService.updatePizzagna(Z),this.eventBus.getStream(C.M).next({payload:{path:"",value:Z}})}})}ngOnInit(){}ngOnChanges(t){var i,o,r;if(t.dataFields&&t.dataFields.currentValue){this.lastValidDataFields=t.dataFields.currentValue;const c=null===(r=null===(o=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===o?void 0:o.getFeatureConfig(m.ni.DisableTableColumnGeneration))||void 0===r?void 0:r.enabled,g=this.mergeColumns(t.dataFields.currentValue,this.columns);g?.length||c?this.onItemsChange(g):c||this.resetColumns(!1),setTimeout(()=>this.changeDetector.markForCheck())}if(t.columns){const c=this.columns.map(g=>({id:g.id,children:{[`${g.id}/description`]:Object.assign({},g),[`${g.id}/presentation`]:Object.assign({},g)}}));this.pizzagnaService.createComponentsFromTemplateWithProperties("columns",c),setTimeout(()=>{var g,E,P;null===(g=this.form.get("columns"))||void 0===g||g.setValue([...null!==(P=null===(E=this.form.get("columns"))||void 0===E?void 0:E.value)&&void 0!==P?P:[]])})}}onFormReady(t){var i;this.form=this.formBuilder.group({columns:t,columnsOutput:{}}),this.emptyColumns$=this.form.valueChanges.pipe((0,St.U)(o=>0===o.columns.length)),this.formReady.emit(this.form),null===(i=this.form.get("columns"))||void 0===i||i.valueChanges.subscribe(o=>{var r;const c=o.map(g=>{var E,P;let Z={id:g.id};for(const V of Object.keys(g.properties))Z=Object.assign(Object.assign({},Z),g.properties[V]);return Z.sortable=null===(P=null===(E=this.lastValidDataFields)||void 0===E?void 0:E.find(V=>{var ee,ge,ie;return V.id===(null===(ie=null===(ge=null===(ee=Z.formatter)||void 0===ee?void 0:ee.properties)||void 0===ge?void 0:ge.dataFieldIds)||void 0===ie?void 0:ie.value)}))||void 0===P?void 0:P.sortable,Z});null===(r=this.form.get("columnsOutput"))||void 0===r||r.setValue(c)})}onItemsChange(t){const o=t.map(c=>c.id);this.pizzagnaService.createComponentsFromTemplate("columns",o),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:m.xW.Data,propertyPath:["columns"]},t)}addColumn(){this.onItemsChange([...this.columns,{id:(0,a.VjN)("column"),label:"",formatter:void 0}])}onResetColumns(){var t;this.resetColumns(!(null===(t=this.columns)||void 0===t||!t.length))}resetColumns(t){const i=()=>{const o=this.lastValidDataFields.map(r=>({id:(0,a.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:r.id}}},isActive:!0,label:r.label,width:void 0,sortable:r.sortable}));this.onItemsChange(o)};t?this.dialogService.confirm({title:$localize`Are you sure?`,message:$localize`Resetting the columns will revert them to their default configurations. Do you wish to proceed?`,confirmText:$localize`Reset Columns`}).result.then(r=>{r&&i()},()=>{}):i()}mergeColumns(t,i){const o=t.map(r=>r.id);return i.filter(r=>{var c,g,E,P;return!(null===(g=null===(c=r.formatter)||void 0===c?void 0:c.properties)||void 0===g||!g.dataFieldIds)&&to()(null===(P=null===(E=r.formatter)||void 0===E?void 0:E.properties)||void 0===P?void 0:P.dataFieldIds).some(Z=>o.includes(Z))})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return n.lateLoadKey="TableColumnsConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(a.xAy),e.Y36(ce.p),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",formatters:"formatters",componentId:"componentId",dataFields:"dataFields",nodes:"nodes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:7,vars:5,consts:function(){let s,t,i,o;return s=$localize`:␟e3c2715ed7f11ed4ac89f4153d8557f182a6918e␟763982378603811482:Column`,t=$localize`:␟71b3b6b8f687cdb01eafe73ac62da2e1e5b87af9␟5086057767318144098: Add new column
`,i=$localize`:␟74cee6ce69c809bb4e67d7cc9e16478a67f9e58d␟4978445162559740484: Reset columns
`,o=$localize`:␟67705586cab07e9ae4f2a9822320fa14e7fb60a7␟8157770720263764419:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one column must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[["headerPrefix",s,3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],t,["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],i,[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],o]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(r){return i.onItemsChange(r)})("formReady",function(r){return i.onFormReady(r)}),e.qZA(),e.YNc(1,Bd,4,1,"div",1),e.ALo(2,"async"),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.addColumn()}),e.SDv(4,3),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.onResetColumns()}),e.SDv(6,5),e.qZA()),2&t&&(e.Q6J("items",i.columns)("nodes",i.nodes),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,i.emptyColumns$)&&i.form.touched))},dependencies:[d.O5,a.r0F,a.qqZ,ii,d.Ov],encapsulation:2,changeDetection:0}),n})();function kd(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Zd(n,s){1&n&&(e.TgZ(0,"nui-message",19),e.tHW(1,20),e._UZ(2,"b"),e.N_p(),e.qZA()),2&n&&e.Q6J("allowDismiss",!1)}let oo=(()=>{class n{constructor(t,i,o){this.formBuilder=t,this.configuratorHeading=i,this.changeDetector=o,this.columns=[],this.formReady=new e.vpe,this.sortableColumns=[],this.onDestroy$=new oe.x}ngOnInit(){this.form=this.formBuilder.group({sorterConfiguration:this.formBuilder.group({sortBy:Yt()(this.sorterConfiguration,"sortBy",""),descendantSorting:Yt()(this.sorterConfiguration,"descendantSorting",!1)})}),this.form.valueChanges.pipe((0,_e.R)(this.onDestroy$)).subscribe(t=>{this.setAccordionSubtitleValues(t)}),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,r,c;const g=null===(i=this.form.get("sorterConfiguration"))||void 0===i?void 0:i.get("sortBy"),E=null===(o=this.form.get("sorterConfiguration"))||void 0===o?void 0:o.get("descendantSorting");if(t.sorterConfiguration){const P=this.sortableColumns.find(Z=>{var V;return Z.id===(null===(V=this.sorterConfiguration)||void 0===V?void 0:V.sortBy)});g?.setValue(P?.id,{emitEvent:!1}),E?.setValue(null===(r=this.sorterConfiguration)||void 0===r?void 0:r.descendantSorting,{emitEvent:!1})}if(t.columns){this.sortableColumns=this.columns.filter(Z=>{var V;return!!Z.formatter&&(null===(V=Z.sortable)||void 0===V||V)});const P=this.sortableColumns.find(Z=>{var V;return Z.id===(null===(V=this.sorterConfiguration)||void 0===V?void 0:V.sortBy)});g?.setValue(P?.id,{emitEvent:!1}),E?.setValue(null===(c=this.sorterConfiguration)||void 0===c?void 0:c.descendantSorting,{emitEvent:!1}),0===this.sortableColumns.length?(g?.disable(),E?.disable()):(g?.enable(),E?.enable())}this.changeDetector.detectChanges()}setAccordionSubtitleValues(t){var i,o;if(t.sorterConfiguration){const r=null===(i=this.columns)||void 0===i?void 0:i.find(g=>g.id===t.sorterConfiguration.sortBy);if(!r)return this.selectedSortByValue=$localize`No sorting`,this.selectedSortOrderValue="",void(null===(o=this.form.get("sorterConfiguration"))||void 0===o||o.patchValue({sortBy:"",descendantSorting:""},{emitEvent:!1}));const c=t.sorterConfiguration.descendantSorting?$localize`Descending`:$localize`Ascending`;this.selectedSortByValue=r.label,this.selectedSortOrderValue=", "+c,this.changeDetector.detectChanges()}}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return n.lateLoadKey="TableFiltersEditorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(Qe.p),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-filters-editor-component"]],inputs:{sorterConfiguration:"sorterConfiguration",columns:"columns"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:11,consts:function(){let s,t,i,o,r;return s=$localize`:␟2a63d63538326cdbebb382ee400f9c2ac4ba26eb␟2774613742044941352:Sorting`,t=$localize`:␟ec97f67072a83aaa972536b18d83179f6e4bbec9␟7699622144571229146:Sort by`,i=$localize`:␟e9d403d84c2efea04f713258598abc6dc8fab8bc␟270381191166569688:Select column`,o=$localize`:␟00c361649822cfeeb5fad8e44bf6c9b9fbcc9852␟7343210469772540594: Descending `,r=$localize`:␟73a7df661af2f227feac942adb7cec0474f2b208␟1677678378385679212:${"\ufffd#2\ufffd"}:START_BOLD_TEXT:No columns are sortable.${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["icon","widget_pie-chart",1,"align-self-start","pt-2"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"table-filters-configuration__accordion-content"],["formGroupName","sorterConfiguration",1,"d-flex","align-items-end"],["caption",t,1,"w-50",3,"control"],["placeholder",i,"formControlName","sortBy",1,"table-filters-configuration__accordion-content__sort-by-input",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],[1,"ml-2"],[3,"control"],["formControlName","descendantSorting"],o,[1,"p-5"],["type","info",3,"allowDismiss",4,"ngIf"],[3,"value"],["type","info",3,"allowDismiss"],r]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0)(1,"div",1),e._UZ(2,"nui-icon",2),e.TgZ(3,"div",3)(4,"span",4),e.SDv(5,5),e.qZA(),e.TgZ(6,"div",6),e._uU(7),e.qZA()()(),e.TgZ(8,"div",7)(9,"div",8)(10,"nui-form-field",9)(11,"nui-select-v2",10),e.ALo(12,"async"),e.YNc(13,kd,2,2,"nui-select-v2-option",11),e.qZA()(),e.TgZ(14,"div",12)(15,"nui-form-field",13)(16,"nui-checkbox",14),e.SDv(17,15),e.qZA()()()()(),e.TgZ(18,"div",16),e.YNc(19,Zd,3,1,"nui-message",17),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(6),e.Q6J("title",i.selectedSortByValue+i.selectedSortOrderValue),e.xp6(1),e.AsE(" ",i.selectedSortByValue,"",i.selectedSortOrderValue," "),e.xp6(3),e.Q6J("control",i.form.controls.sortBy),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(12,9,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.sortableColumns),e.xp6(2),e.Q6J("control",i.form.controls.descendantSorting),e.xp6(4),e.Q6J("ngIf",!i.sortableColumns.length))},dependencies:[d.sg,d.O5,p.JJ,p.JL,p.sg,p.u,p.x0,a.oJW,a.hgI,a.j_n,a.rLF,a.bK4,a.qqZ,De.J,d.Ov],styles:[".table-filters-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function Vd(n,s){1&n&&(e.TgZ(0,"div",3)(1,"nui-message",4),e.tHW(2,5),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function Jd(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addSeries())}),e.SDv(1,7),e.qZA()}}let ro=(()=>{class n{constructor(t,i,o){this.pizzagnaService=t,this.changeDetector=i,this.eventBus=o,this.series=[],this.formReady=new e.vpe,this.destroy$=new oe.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnChanges(t){t.allSeries&&!t.allSeries.isFirstChange()&&(this.createSeriesConfigComponents(this.series),setTimeout(()=>this.changeDetector.markForCheck()))}onFormReady(t){this.form=t,this.formReady.emit(t),this.emptySeries$=this.form.valueChanges.pipe((0,St.U)(i=>0===i.length))}onItemsChange(t){this.createSeriesConfigComponents(t),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:m.xW.Data,propertyPath:["series"]},t)}isPossibleToAddSeries(){return(this.allSeries&&this.allSeries.length)>(this.series&&this.series.length)}addSeries(){this.onItemsChange([...this.series,{id:(0,a.VjN)("series"),selectedSeriesId:null}])}createSeriesConfigComponents(t){const o=t.map(r=>r.id);this.pizzagnaService.createComponentsFromTemplate("series",o)}}return n.lateLoadKey="TimeseriesSeriesCollectionConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(ce.p),e.Y36(e.sBO),e.Y36(m.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-timeseries-series-collection-configuration"]],inputs:{nodes:"nodes",componentId:"componentId",series:"series",availableSeries:"availableSeries",allSeries:"allSeries"},outputs:{formReady:"formReady"},features:[e.TTD],decls:4,vars:7,consts:function(){let s,t;return s=$localize`:␟46a7534407b391db85f57b5fd207e4288d7901c1␟4355007031052301783:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one series must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,t=$localize`:␟6231821a0315549db22f614abdf9b5e9b036a0ca␟8188707268253933960: Add new series
`,[[3,"items","nodes","moveButtons","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","type","button","class","ml-4 mb-4",3,"click",4,"ngIf"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],s,["nui-button","","icon","add","displayStyle","action","type","button",1,"ml-4","mb-4",3,"click"],t]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(r){return i.onItemsChange(r)})("formReady",function(r){return i.onFormReady(r)}),e.qZA(),e.YNc(1,Vd,4,1,"div",1),e.ALo(2,"async"),e.YNc(3,Jd,2,0,"button",2)),2&t&&(e.Q6J("items",i.series)("nodes",i.nodes)("moveButtons",!1),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,5,i.emptySeries$)&&i.form.touched),e.xp6(2),e.Q6J("ngIf",i.isPossibleToAddSeries()))},dependencies:[d.O5,a.r0F,a.qqZ,ii,d.Ov],encapsulation:2,changeDetection:0}),n})(),so=(()=>{class n{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.formReady=new e.vpe,this.formDestroy=new e.vpe}ngOnInit(){this.form=this.formBuilder.group({label:[this.label,p.kI.required]}),this.formReady.emit(this.form)}ngOnChanges(t){if(t.label){const i=t.label.currentValue;i&&this.form.patchValue({label:i})}}ngOnDestroy(){this.formDestroy.emit(this.form)}}return n.lateLoadKey="TimeseriesTileDescriptionConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:20,vars:22,consts:function(){let s,t,i,o;return s=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-description-configuration__accordion-content"],["caption",t,3,"control"],["formControlName","label","placeholder",i],["for","required"],o]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.ALo(8,"async"),e.ALo(9,"nuiFormHeaderIconPipe"),e.TgZ(10,"div",4)(11,"span",5),e.SDv(12,6),e.qZA(),e.TgZ(13,"div",7),e._uU(14),e.qZA()()(),e.TgZ(15,"div",8)(16,"nui-form-field",9),e._UZ(17,"nui-textbox",10),e.TgZ(18,"nui-validation-message",11),e.SDv(19,12),e.qZA()()()(),e.BQk()),2&t){let o,r;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,7,e.lcZ(3,9,i.form.get("label")))),e.xp6(4),e.Q6J("icon",e.lcZ(6,11,e.xi3(7,13,i.form.get("label"),"edit")))("iconColor",e.lcZ(8,16,e.Dn7(9,18,i.form.get("label"),"gray",""))),e.xp6(8),e.Q6J("title",null==(o=i.form.get("label"))?null:o.value),e.xp6(1),e.hij(" ",null==(r=i.form.get("label"))?null:r.value," "),e.xp6(2),e.Q6J("control",i.form.get("label"))}},dependencies:[p.JJ,p.JL,p.sg,p.u,a.oJW,a.XHW,a.hgI,a.CfE,De.J,d.Ov,xe.F,$e.d],styles:[".timeseries-tile-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function Hd(n,s){if(1&n&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.description," ")}}let ao=(()=>{class n{set selectedSeries(t){this._selectedSeries=t,t&&this.form.patchValue({id:t.id})}get selectedSeries(){return this._selectedSeries}constructor(t,i,o,r){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.pizzagnaService=r,this.formReady=new e.vpe,this.formDestroy=new e.vpe,this.destroy$=new oe.x}ngOnInit(){this.form=this.formBuilder.group({id:[this.selectedSeriesId||null,[p.kI.required]]}),this.formReady.emit(this.form)}ngOnChanges(t){if(t.allSeries&&(this.selectedSeries=this.allSeries.find(i=>this.selectedSeriesId===i.id)),t.selectedSeriesId){if(!this.allSeries)return;this.selectedSeries=this.allSeries.find(i=>this.selectedSeriesId===i.id)}}onSelect(t){this.selectedSeriesId=t.id,this.selectedSeries=t,this.form.patchValue({id:t.id}),setTimeout(()=>{this.pizzagnaService.setProperty(`${m.xW.Data}.${this.componentId}.properties.selectedSeriesId`,t.id),this.changeDetector.markForCheck()})}ngOnDestroy(){this.formDestroy.emit(this.form),this.destroy$.next(),this.destroy$.complete()}}return n.lateLoadKey="TimeseriesTileIndicatorDataConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Qe.p),e.Y36(p.qu),e.Y36(ce.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-timeseries-tile-indicator-data-configuration"]],inputs:{componentId:"componentId",selectedSeriesId:"selectedSeriesId",allSeries:"allSeries",availableSeries:"availableSeries"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:21,vars:23,consts:function(){let s,t,i,o;return s=$localize`:␟f39271d40a9c081425a980174610625a267d18f7␟8676967573592446270:Indicator data`,t=$localize`:␟c5efb3039d96058120ee5d8148ceeb972d8d4e1f␟3385528249572340947:Series data`,i=$localize`:␟c5efb3039d96058120ee5d8148ceeb972d8d4e1f␟3385528249572340947:Series data`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],s,[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-data-configuration__accordion-content"],["caption",t,3,"control"],["placeholder",i,3,"value","popupViewportMargin","valueSelected"],[3,"value",4,"ngFor","ngForOf"],["for","required"],o,[3,"value"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.NdJ("valueSelected",function(r){return i.onSelect(r)}),e.ALo(16,"async"),e.YNc(17,Hd,2,2,"nui-select-v2-option",11),e.ALo(18,"nuiAddData"),e.qZA(),e.TgZ(19,"nui-validation-message",12),e.SDv(20,13),e.qZA()()()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form.get("id")))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form.get("id"),"database"))),e.xp6(6),e.Q6J("title",null==i.selectedSeries?null:i.selectedSeries.description),e.xp6(1),e.hij(" ",null==i.selectedSeries?null:i.selectedSeries.description," "),e.xp6(2),e.Q6J("control",i.form.get("id")),e.xp6(1),e.Q6J("value",i.selectedSeries)("popupViewportMargin",e.lcZ(16,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",e.xi3(18,20,i.availableSeries,i.selectedSeries)))},dependencies:[d.sg,p.JL,p.sg,a.oJW,a.hgI,a.j_n,a.rLF,a.CfE,De.J,d.Ov,Wi,xe.F,$e.d],styles:[".timeseries-tile-data-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();var Yd=l(69823),lo=(l(30510),l(15130));let Qd=(()=>{class n{static getTextColor(t){return new h.kJ9(new h.jpW([t]),{light:"white",dark:"black"}).get(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var co=l(62053);let _o=(()=>{class n{constructor(t,i){this.configuratorService=t,this.componentPortalService=i}open(t){if(!t.portalBundle){const i={portal:this.componentPortalService.createComponentPortal(Pn,null),attached:o=>{o.instance.cloneSelectionComponentType=t.widgetSelectionComponentType}};t.portalBundle=i}return this.configuratorService.open(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(lo.J),e.LFG(co.$))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Xd=l(58746);l(79705),l(10841),l(45626),l(91363),l(82262);const uo=[On.n,Nt,Yd.P,kt,Fn,Lt,Vn,Ji,Ln,Yn,Hn,oo,Bn,ro,Wd,io,eo,xn,Gi,vn,wi,En,$i.C,ti,Dd,xd,ei.s,An,zi,Wt.a,Ui,wn,zn,At,Ye,Wa.b,Pn,yd,Xn,no,qn,so,ao,Un,bn,Zn,Wn,Qn,ri,Jn];let po=(()=>{class n{constructor(t){for(const i of uo.filter(o=>o.lateLoadKey))t.registerByLateLoadKey(i)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(xi.h))},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[lo.J,Qe.p,Fa.e,Xd.s,_o,Qd,mn,Ft],imports:[T.Cl,A,p.UX,v.IX,et._t,x.eL,a.Gsl,Tn,a.Ts3,a.r$w,a.cnx,a.F__,a.ILf,a.YMY,a.C6o,a.Az_,a.s2z,a.qAs,a.CUE,a.LRI,a.uCA,a.Ld5,a.CND,a.a51,a.cJ5,a.gkT,a.grO,a.bGb,a.a$t,a.ZuS,a.sF0]}),n})();l(923),l(84710);const ec={[m.xW.Structure]:{[C.XM]:{id:C.XM,componentType:Nt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]}},presentation:{id:"presentation",componentType:Ye.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:At.lateLoadKey,providers:{converter:{providerId:C.j4}}},dataAndCalculations:{id:"dataAndCalculations",componentType:Ye.lateLoadKey,properties:{headerText:$localize`Data and calculations`,nodes:["dataSource","grouping","entityFormatting"]}},dataSource:{id:"dataSource",componentType:kt.lateLoadKey,properties:{dataSourceProviders:[]},providers:{[m.Mu.Converter]:{providerId:C.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId"]}]}}}},grouping:{id:"grouping",componentType:Zn.lateLoadKey,properties:{groups:[],groupBy:[]},providers:{[m.Mu.Converter]:{providerId:C.VX,properties:{formParts:[{previewPath:`listWidget.providers.${m.Mu.Adapter}.properties`,keys:["groupBy","drillstate","groups"]}]}}}},entityFormatting:{id:"entityFormatting",componentType:Wn.lateLoadKey,properties:{mappingKeys:["icon_status","capital","name","icon","url"],dataFieldIds:{icon:"icon",status:"icon_status",detailedUrl:"capital",label:"name",url:"url"}},providers:{[m.Mu.Converter]:{providerId:C.VX,properties:{formParts:[{previewPath:`listWidget.providers.${m.Mu.Adapter}.properties.componentsConfig.leaf.properties`,keys:["dataFieldIds"]}]}}}}}},yt={id:"header",componentType:bi.lateLoadKey,properties:{editMode:!1}},Gt={id:"loading",componentType:f.N.lateLoadKey,providers:{[m.Mu.LoadingAdapter]:{providerId:C.IG}}},tt={id:"body",componentType:Di.lateLoadKey,properties:{content:"bodyContent"}},tc={[m.WE.Unknown]:qe.ErrorUnknown,[m.WE.Forbidden]:qe.ErrorForbidden,[m.WE.NotFound]:qe.ErrorNotFound},ic={[qe.ErrorUnknown]:{id:qe.ErrorUnknown,componentType:R.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`Whoops, something went wrong`,description:$localize`There was an unexpected error.`}},[qe.ErrorForbidden]:{id:qe.ErrorForbidden,componentType:R.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`403 - Forbidden`,description:$localize`The requested action was forbidden.`}},[qe.ErrorNotFound]:{id:qe.ErrorNotFound,componentType:R.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`404 - Not Found`,description:$localize`The requested resource could not be found.`}}};function Mt(n,s=C.Cz,t=tc,i=ic){return Object.assign({bodyContent:{id:"bodyContent",componentType:Pi.lateLoadKey,properties:{primaryContent:n,fallbackMap:t},providers:{[m.Mu.ContentFallbackAdapter]:{providerId:s}}}},i)}const Vt={providerId:C.GN};function pt(n=!1,s=0){return{providerId:C.tc,properties:{enabled:n,interval:s}}}const nc={[m.xW.Structure]:Object.assign(Object.assign(Object.assign(Object.assign({[C.XM]:{id:C.XM,componentType:Ne.lateLoadKey,properties:{nodes:["header","loading","search","body"]},providers:{[m.Mu.EventProxy]:Vt}},header:yt,loading:Gt,body:Object.assign(Object.assign({},tt),{properties:Object.assign(Object.assign({},tt.properties),{elementClass:"overflow-auto"})})},Mt("listWidget")),{search:{id:"search",componentType:Mi.lateLoadKey}}),Mt("mainContent")),{mainContent:{id:"mainContent",componentType:Ne.lateLoadKey,properties:{nodes:["navigationBar","listWidget"]}},navigationBar:{id:"navigationBar",componentType:Tt.lateLoadKey},listWidget:{id:"listWidget",componentType:_.lateLoadKey,providers:{},properties:{elementClass:"w-100 p-3"}}}),[m.xW.Configuration]:{[C.XM]:{id:C.XM},header:{properties:{title:$localize`Empty Custom Widget`}}}},oc={paths:{widget:{[m.AC.Root]:C.XM},configurator:{[m.AC.Root]:C.XM,[m.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:nc,configurator:ec},rc={[m.xW.Structure]:{[C.XM]:{id:C.XM,componentType:Nt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","customConfig"]}},presentation:{id:"presentation",componentType:Ye.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:At.lateLoadKey,providers:{converter:{providerId:C.j4}}},customConfig:{id:"customConfig",componentType:Ye.lateLoadKey,properties:{headerText:$localize`Custom Widget Configuration`,nodes:["embeddedContentSelection"]}},embeddedContentSelection:{id:"embeddedContentSelection",componentType:Ji.lateLoadKey,properties:{messageComponent:{componentType:Ln.lateLoadKey,properties:{emphasizeText:"Some content may not work as expected.",generalText:"Web pages embedded in a widget may not be able to open popup windows or may experience formatting problems.\n                                    If you supply your own HTML, dangerous content like scripts will be removed.",link:{href:"https://www.solarwinds.com/",target:"_blank",text:"Learn more about best practices for the HTML widget"},allowDismiss:!0}}},providers:{[m.Mu.Converter]:{providerId:C.VX,properties:{formParts:[{previewPath:"mainContent.properties",keys:["customEmbeddedContent","mode","messageComponent","sanitized"]}]}}}}}},sc={[m.xW.Structure]:Object.assign(Object.assign({[C.XM]:{id:C.XM,componentType:Ne.lateLoadKey,providers:{[m.Mu.Refresher]:pt(),[m.Mu.EventProxy]:Vt},properties:{nodes:["header","loading","body"]}},header:yt,loading:Gt,body:tt},Mt("mainContent")),{mainContent:{id:"mainContent",componentType:G.lateLoadKey,properties:{elementClass:"d-flex w-100 justify-content-center"}}}),[m.xW.Configuration]:{header:{properties:{title:$localize`Empty Embedded Content Widget`}}}},ac={paths:{widget:{[m.AC.Root]:C.XM},configurator:{[m.AC.Root]:C.XM}},widget:sc,configurator:rc},si={id:"refresher",componentType:Un.lateLoadKey,providers:{[m.Mu.Converter]:{providerId:C.VX,properties:{formParts:[{previewPath:`${C.XM}.providers.refresher.properties`,keys:["enabled","interval","overrideDefaultSettings"]}]}}},properties:{overrideDefaultSettings:!1}},lc=[{componentType:Wt.a.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:ti.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null}},{componentType:$i.C.lateLoadKey,label:$localize`Icon`,dataTypes:{value:null}}],dc={[m.xW.Structure]:{[C.XM]:{id:C.XM,componentType:Nt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","tiles"]},providers:{[m.Mu.FormattersRegistry]:{providerId:C.s6}}},presentation:{id:"presentation",componentType:Ye.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","refresher"]}},titleAndDescription:{id:"titleAndDescription",componentType:At.lateLoadKey,providers:{converter:{providerId:C.j4}}},refresher:si,tiles:{id:"tiles",componentType:Vn.lateLoadKey,properties:{template:[{id:"description",componentType:wn.lateLoadKey,properties:{configurableUnits:!0,backgroundColors:[...Vi]},providers:{[m.Mu.Converter]:{providerId:C.YN,properties:{formParts:[{previewPath:"properties.widgetData",keys:["label","backgroundColor","units"]}]}}}},{id:"dataSource",componentType:kt.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Lt.lateLoadKey},providers:{[m.Mu.Converter]:{providerId:C.YN,properties:{formParts:[{previewPath:"providers.dataSource",keys:["providerId","properties"]},{previewPath:"providers.adapter.properties.dataSource",keys:["properties"]}]}},[m.Mu.Broadcaster]:{providerId:C.m_,properties:{configs:[{trackOn:"component",key:"dataFieldIds",paths:["data.{parentComponentId}/formatting.properties.dataFieldIds"]}]}}}},{id:"thresholds",componentType:zn.lateLoadKey,providers:{[m.Mu.Converter]:{providerId:C.YN,properties:{formParts:[{previewPath:"providers.adapter.properties.thresholds",keys:["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"]}]}}}},{id:"backgroundColorRules",componentType:bn.lateLoadKey,properties:{backgroundColors:[...Vi]},providers:{[m.Mu.Converter]:{providerId:C.YN,properties:{formParts:[{previewPath:"providers.kpiColorPrioritizer.properties",keys:["rules"]}]}}}},{id:"formatting",componentType:no.lateLoadKey,providers:{[m.Mu.Converter]:{providerId:C.YN,properties:{formParts:[{previewPath:"properties.configuration.formatters.Value",keys:["formatter"]}]}}},properties:{formatter:{componentType:Wt.a.lateLoadKey,properties:{dataFieldIds:{value:"value"}}}}}]},providers:{[m.Mu.Converter]:{providerId:C.ns}}}}},cc={[m.xW.Structure]:Object.assign(Object.assign({[C.XM]:{id:C.XM,componentType:Ne.lateLoadKey,providers:{[m.Mu.Refresher]:pt(),[m.Mu.EventProxy]:Vt},properties:{nodes:["header","loading","body"]}},header:yt,loading:Gt,body:Object.assign(Object.assign({},tt),{properties:Object.assign(Object.assign({},tt.properties),{elementClass:"overflow-hidden"})})},Mt("tiles",C.C)),{tiles:{id:"tiles",componentType:it.lateLoadKey,properties:{elementClass:"flex-grow-1 pt-2 px-3 pb-3 w-100",template:{componentType:j.lateLoadKey,providers:{[m.Mu.KpiColorPrioritizer]:{providerId:C.tS,properties:{}},[m.Mu.Adapter]:{providerId:C.u1,properties:{propertyPath:"widgetData"}}},properties:{elementClass:"flex-grow-1"}}}}}),[m.xW.Configuration]:{[C.XM]:{id:C.XM,providers:{[m.Mu.Refresher]:pt(!1,60)}},header:{properties:{title:$localize`Empty KPI Widget`}}}},go="tiles.properties.template[0]",ho="tiles.properties.template[1]",uc={paths:{widget:{[m.AC.Root]:C.XM},configurator:{[m.AC.Root]:C.XM,[m.AC.DataSourceConfigComponentType]:`${ho}.componentType`,[m.AC.TileDescriptionConfigComponentType]:`${go}.componentType`,[m.AC.DataSourceProviders]:`${ho}.properties.dataSourceProviders`,[m.AC.TileDescriptionBackgroundColors]:`${go}.properties.backgroundColors`,[m.AC.TileBackgroundColorRulesBackgroundColors]:"tiles.properties.template[3].properties.backgroundColors"}},widget:cc,configurator:dc},pc={paths:{widget:{[m.AC.Root]:C.XM},configurator:{[m.AC.Root]:C.XM}},widget:{[m.xW.Structure]:{[C.XM]:{id:C.XM,componentType:Ne.lateLoadKey,properties:{nodes:["header","body"]}},header:yt,body:tt,bodyContent:{id:"bodyContent",componentType:An.lateLoadKey}},[m.xW.Configuration]:{header:{properties:{title:$localize`New Widget`}}}}},Qi=(n,s)=>{const t=s?.chartSeriesDataFieldId||"data[0]";let i=n[0];return s?.activeMetricId&&(i=n.find(o=>o.id===s?.activeMetricId),i||console.warn(`No metric with id: ${s?.activeMetricId} found. Taking first available.`)),Yt()(i,t)};Qi.aggregatorType="fieldMapper";var gc=l(7154),mo=l.n(gc);const ai=(n,s)=>{var t;const i=n.map(Z=>Z.data[0]),{activeMetricId:o,base100:r}=s||{},c=mo()(i);let g=i[0];o&&(g=null===(t=n.find(Z=>Z.id===o))||void 0===t?void 0:t.data[0],g||console.warn(`No metric with id: ${o} found. Taking first available.`));const E=g/c;let P=r?100*E:E;return P=Math.round(100*P)/100,P.toString()};ai.aggregatorType="percentageAggregator";const li=(n,s)=>{const{activeMetricId:t}=s||{};if(t){const i=n.find(o=>o.id===t);if(i)return i.data[0]}return mo()(n.map(i=>i.data[0])).toString()};li.aggregatorType="sumAggregator";const hc=[{componentType:"",label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:zi.lateLoadKey,label:$localize`Status With Icon`,dataTypes:{value:null}},{componentType:ei.s.lateLoadKey,label:$localize`Link`,dataTypes:{value:null}}],mc=[{componentType:Wt.a.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:ti.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:Ui.lateLoadKey,label:$localize`Percentage Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}}],fc=[{aggregatorType:li.aggregatorType,label:"Sum Aggregator",fn:li,configurationComponent:ri.lateLoadKey},{aggregatorType:ai.aggregatorType,label:"Percentage Aggregator",fn:ai,properties:{base100:!0},configurationComponent:ri.lateLoadKey},{aggregatorType:Qi.aggregatorType,label:"Field Mapper Aggregator",fn:Qi,configurationComponent:Jn.lateLoadKey}],Tc={[m.xW.Structure]:{[C.XM]:{id:C.XM,componentType:Nt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]},providers:{[m.Mu.FormattersRegistry]:{providerId:C.rf}}},presentation:{id:"presentation",componentType:Ye.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor"]}},titleAndDescription:{id:"titleAndDescription",componentType:At.lateLoadKey,providers:{[m.Mu.Converter]:{providerId:C.j4}}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:Yn.lateLoadKey,properties:{chartOptions:{chartTypes:["PieChart","DonutChart","VerticalBarChart","HorizontalBarChart"],legendPlacementOptions:[{id:we.w.None,label:$localize`None`},{id:we.w.Right,label:$localize`Right`},{id:we.w.Bottom,label:$localize`Bottom`}],contentFormatters:[{componentType:En.lateLoadKey,label:$localize`Raw`},{componentType:wi.lateLoadKey,label:$localize`Sum`},{componentType:Gi.lateLoadKey,label:$localize`Percentage`,configurationComponent:"DonutContentPercentageConfigurationComponent"}],legendFormatters:[{componentType:zi.lateLoadKey,label:$localize`Status With Icon`},{componentType:ei.s.lateLoadKey,label:$localize`Link`}]}},providers:{[m.Mu.Converter]:{providerId:C.dz}}},refresher:si,dataAndCalculations:{id:"dataAndCalculations",componentType:Ye.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:kt.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Lt.lateLoadKey},providers:{[m.Mu.Converter]:{providerId:C.VX,properties:{formParts:[{previewPath:"chart.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}},[m.Mu.Broadcaster]:{providerId:C.m_,properties:{configs:[{trackOn:"component",key:"dsOutput",paths:["data.chartOptionsEditor.properties.dsOutput"]}]}}}}}},Cc={[m.xW.Structure]:Object.assign(Object.assign({[C.XM]:{id:C.XM,componentType:Ne.lateLoadKey,properties:{nodes:["header","loading","body"]},providers:{[m.Mu.Refresher]:pt(),[m.Mu.EventProxy]:Vt}},header:yt,loading:Gt,body:Object.assign(Object.assign({},tt),{properties:Object.assign(Object.assign({},tt.properties),{elementClass:"overflow-auto"})})},Mt("chart")),{chart:{id:"chart",componentType:gi.lateLoadKey,providers:{[m.Mu.Adapter]:{providerId:C.bZ,properties:{componentId:"chart",propertyPath:"widgetData"}}},properties:{elementClass:"d-flex flex-grow-1 justify-content-center overflow-auto"}}}),[m.xW.Configuration]:{[C.XM]:{id:C.XM,providers:{[m.Mu.Refresher]:pt(!1,60)}},header:{properties:{title:$localize`Empty Proportional Widget`}}}},Oc={paths:{widget:{[m.AC.Root]:C.XM},configurator:{[m.AC.Root]:C.XM,[m.AC.DataSourceConfigComponentType]:"dataSource.componentType",[m.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[m.AC.Formatters]:"chartOptionsEditor.properties.chartOptions.contentFormatters"}},widget:Cc,configurator:Tc},Ic={[m.xW.Structure]:{[C.XM]:{id:C.XM,componentType:Nt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","columns"]},providers:{[m.Mu.FormattersRegistry]:{providerId:C.Hp},[m.Mu.DataSourceManager]:{providerId:C.Xh}}},presentation:{id:"presentation",componentType:Ye.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","filters"]}},titleAndDescription:{id:"titleAndDescription",componentType:At.lateLoadKey,providers:{[m.Mu.Converter]:{providerId:C.j4}}},filters:{id:"filters",componentType:oo.lateLoadKey,providers:{[m.Mu.Converter]:{providerId:C.LU}}},refresher:si,dataAndCalculations:{id:"dataAndCalculations",componentType:Ye.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:kt.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:xn.lateLoadKey},providers:{[m.Mu.Converter]:{providerId:C.VX,properties:{formParts:[{previewPath:"table.providers.dataSource",keys:["providerId","properties"]},{previewPath:"table.providers.adapter.properties.dataSource",keys:["properties"]}]}}}},columns:{id:"columns",componentType:io.lateLoadKey,properties:{template:[{},{properties:{formatters:jn.X}}]},providers:{[m.Mu.Converter]:{providerId:C.n5}}}}},vc={[m.xW.Structure]:Object.assign(Object.assign({[C.XM]:{id:C.XM,componentType:Ne.lateLoadKey,providers:{[m.Mu.Refresher]:pt(),[m.Mu.EventProxy]:{providerId:C.GN,properties:{downstreams:[C.pV.id]}}},properties:{nodes:["header","loading","body"]}},header:yt,loading:Gt,body:Object.assign(Object.assign({},tt),{properties:Object.assign(Object.assign({},tt.properties),{elementClass:"overflow-auto"})})},Mt("table")),{table:{id:"table",componentType:fi.lateLoadKey,providers:{[m.Mu.Adapter]:{providerId:C.l5,properties:{componentId:"table",dataPath:"widgetData",dataFieldsPath:"dataFields",totalItemsPath:"totalItems"}},virtualViewportManager:{providerId:C.Vx}},properties:{elementClass:"flex-grow-1 mx-3 mb-3 mt-2",delayedMousePresenceDetectionEnabled:!0,configuration:{columns:[],scrollActivationDelayMs:500,headerTooltipsEnabled:!0}}}}),[m.xW.Configuration]:{[C.XM]:{id:C.XM,providers:{[m.Mu.Refresher]:pt(!1,60)}},header:{properties:{title:$localize`Empty Table Widget`}}}},Ec={paths:{widget:{[m.AC.Root]:C.XM},configurator:{[m.AC.Root]:C.XM,[m.AC.DataSourceConfigComponentType]:"dataSource.componentType",[m.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[m.AC.Formatters]:"columns.properties.template[1].properties.formatters"}},widget:vc,configurator:Ic},Sc={[m.xW.Structure]:{[C.XM]:{id:C.XM,componentType:Nt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","series"]}},presentation:{id:"presentation",componentType:Ye.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","timeseriesMetadata"]}},titleAndDescription:{id:"titleAndDescription",componentType:At.lateLoadKey,providers:{[m.Mu.Converter]:{providerId:C.j4}}},timeseriesMetadata:{id:"timeseriesMetadata",componentType:Bn.lateLoadKey,properties:{legendPlacements:[{id:we.w.None,label:$localize`None`},{id:we.w.Right,label:$localize`Right`},{id:we.w.Bottom,label:$localize`Bottom`}]},providers:{[m.Mu.Converter]:{providerId:C.dZ}}},refresher:si,dataAndCalculations:{id:"dataAndCalculations",componentType:Ye.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:kt.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Lt.lateLoadKey},providers:{[m.Mu.Converter]:{providerId:C.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}}}},series:{id:"series",componentType:ro.lateLoadKey,providers:{[m.Mu.Converter]:{providerId:C.Ip}},properties:{template:[{id:"description",componentType:so.lateLoadKey,providers:{[m.Mu.Converter]:{providerId:C.Es,properties:{formParts:[{previewPath:"chart.providers.adapter.properties.series",keys:["label"]}]}}}},{id:"indicatorData",componentType:ao.lateLoadKey,providers:{[m.Mu.Converter]:{providerId:C.Gq}}}]}}}},Rc={[m.xW.Structure]:Object.assign(Object.assign({[C.XM]:{id:C.XM,componentType:Ne.lateLoadKey,providers:{[m.Mu.Refresher]:pt(),[m.Mu.EventProxy]:Vt},properties:{nodes:["header","loading","body"]}},header:yt,loading:Gt,body:Object.assign(Object.assign({},tt),{properties:Object.assign(Object.assign({},tt.properties),{elementClass:"overflow-auto"})})},Mt("mainContent")),{mainContent:{id:"mainContent",componentType:Ne.lateLoadKey,properties:{nodes:["timeframeSelection","chart"]}},timeframeSelection:{id:"timeframeSelection",componentType:Ci.lateLoadKey},chart:{id:"chart",componentType:yi.lateLoadKey,properties:{elementClass:"d-flex flex-column justify-content-center h-100 overflow-auto",configuration:{preset:Pe.Line,scales:{y:{type:nt.Linear},x:{type:nt.Time}}}},providers:{[m.Mu.Adapter]:{providerId:C.R9,properties:{componentId:"chart",propertyPath:"widgetData",series:[]}}}}}),[m.xW.Configuration]:{[C.XM]:{id:C.XM,providers:{[m.Mu.Refresher]:pt(!1,60)}},header:{properties:{title:$localize`Empty Timeseries Widget`}}}},Nc={paths:{widget:{[m.AC.Root]:C.XM},configurator:{[m.AC.Root]:C.XM,[m.AC.DataSourceConfigComponentType]:"dataSource.componentType",[m.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:Rc,configurator:Sc};var Ac=l(96800);const yc=[G,j,Si,f.N,gi,Ne,Ri,Ni,Ai,Oi,fi,sn.q,it,Ci,yi,Di,Pi,bi,R,_,Dt,ft,Tt,Mi,Je];let Mc=(()=>{class n{constructor(t,i,o,r){t.registerWidgetType("kpi",1,uc),t.registerWidgetType("table",1,Ec),t.registerWidgetType("proportional",1,Oc),t.registerWidgetType("timeseries",1,Nc),t.registerWidgetType("previewPlaceholder",1,pc),t.registerWidgetType("embedded-content",1,ac),t.registerWidgetType("drilldown",1,oc);for(const c of yc.filter(g=>g.lateLoadKey))i.registerByLateLoadKey(c);o.registerEvent(C.RG),o.registerEvent(C.y4),o.registerEvent(C.j7),o.registerEvent(C.Ef),o.registerEvent(C.MO),o.registerEvent(C.pV),o.registerEvent(C.Xi),o.registerEvent(C.M),o.registerEvent(C.re),o.registerEvent(C.xZ),o.registerEvent(C.N9),o.registerEvent(ke.PF),o.registerEvent(C.QD),r.addItems(lc)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(H.x),e.LFG(xi.h),e.LFG(Ac.o),e.LFG(ue.YX))},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[co.$,H.x,d.JJ,hi.g],imports:[A,v.IX,a.Gsl,a.Az_,h.$y4,po,a.Ts3,a.sF0,a.r$w,Tn,a.cnx,a.BSv,a.hvO,a.l70,T.Cl,a.JhO,p.UX,a.ILf,a.VSN,a.a$t,a.lam,a.ZuS,a.w0o,a.S6I]}),n})();var di=(()=>((di||(di={})).Value="Value",di))();function Pc(n,s,t){const i=s;return t.forEach((o,r)=>{if(0===o.data.length)return;let c=-1,g=-1;const E=s[r].data;E.length>0?(c=o.data.findIndex(V=>We()(V.x).isSame(E[0].x)),g=o.data.findIndex(V=>We()(V.x).isSame(E[E.length-1].x))):(c=o.data.findIndex(V=>We()(V.x).isAfter(n.startDatetime)),g=o.data.findIndex(V=>We()(V.x).isAfter(n.endDatetime))-1);const P=We()(n.startDatetime);(0===E.length||!P.isSame(E[0].x))&&P.isBetween(o.data[0].x,o.data[o.data.length-1].x)&&i[r].data.unshift(Object.assign(Object.assign({},o.data[c-1]),{x:n.startDatetime.toDate()}));const Z=We()(n.endDatetime);(0===E.length||!Z.isSame(E[E.length-1].x))&&Z.isBetween(o.data[0].x,o.data[o.data.length-1].x)&&i[r].data.push(Object.assign(Object.assign({},o.data[g]),{x:n.endDatetime.toDate()}))}),i}l(388),l(54910),l(81354),l(6505),l(43925),l(83645);const Dc={presentation:{id:"presentation",componentType:Ye.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor","donutContentConfiguration"]}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:Hn.lateLoadKey,properties:{chartTypes:[{id:"PieChart",label:$localize`Pie`},{id:"DonutChart",label:$localize`Donut`},{id:"VerticalBarChart",label:$localize`Vertical Bar`},{id:"HorizontalBarChart",label:$localize`Horizontal Bar`}],legendPlacementOptions:[{id:we.w.None,label:$localize`None`},{id:we.w.Right,label:$localize`Right`},{id:we.w.Bottom,label:$localize`Bottom`}]},providers:{[m.Mu.Converter]:{providerId:C.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions",keys:["type","legendPlacement","legendFormatter"]}]}},[m.Mu.Broadcaster]:{providerId:C.m_,properties:{configs:[{trackOn:"component",key:"chartTypeChanged$",paths:["data.donutContentConfiguration.properties.chartType"]}]}}}},donutContentConfiguration:{id:"donutContentConfiguration",componentType:Qn.lateLoadKey,providers:{[m.Mu.Converter]:{providerId:C.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions.donutContentConfig",keys:["formatter","aggregator"]}]}}}}}},84493:re=>{re.exports=function W(l,d){for(var a,O=-1,e=l.length;++O<e;){var R=d(l[O]);void 0!==R&&(a=void 0===a?R:a+R)}return a}},94133:(re,W,l)=>{var d=l(42664),a=l(50686),O=l(80707);re.exports=function e(R,N,A){var T=R.length;if(T<2)return T?O(R[0]):[];for(var p=-1,v=Array(T);++p<T;)for(var h=R[p],w=-1;++w<T;)w!=p&&(v[p]=d(v[p]||h,R[w],N,A));return O(a(v,1),N,A)}},38645:re=>{re.exports=function W(l,d,a){for(var O=-1,e=l.length,R=d.length,N={};++O<e;)a(N,l[O],O<R?d[O]:void 0);return N}},18680:(re,W,l)=>{var d=l(42664),a=l(50686),O=l(23269),e=l(21330),R=O(function(N,A){return e(N)?d(N,a(A,1,e,!0)):[]});re.exports=R},7154:(re,W,l)=>{var d=l(84493),a=l(32608);re.exports=function O(e){return e&&e.length?d(e,a):0}},10912:(re,W,l)=>{var d=l(96517),a=l(84493);re.exports=function O(e,R){return e&&e.length?a(e,d(R,2)):0}},68921:(re,W,l)=>{var d=l(50686),a=l(23269),O=l(80707),e=l(21330),R=a(function(N){return O(d(N,1,e,!0))});re.exports=R},19574:(re,W,l)=>{var d=l(69779),a=l(23269),O=l(94133),e=l(21330),R=a(function(N){return O(d(N,e))});re.exports=R},21617:(re,W,l)=>{var d=l(89719),a=l(38645);re.exports=function O(e,R){return a(e||[],R||[],d)}},29583:(re,W,l)=>{"use strict";l.d(W,{IM:()=>$t,IX:()=>Me,KY:()=>C,RU:()=>m,sm:()=>ne,tQ:()=>D});var d=l(36895),a=l(94650),O=l(77579),e=l(78372),R=l(82722),N=l(63900),A=l(5963);function T(K,u){if(1&K&&a._UZ(0,"div",3),2&K){const _=u.index,f=a.oxw();a.Q6J("ngStyle",f.gridRenderer.getGridColumnStyle(_))}}function p(K,u){if(1&K&&a._UZ(0,"div",4),2&K){const _=u.index,f=a.oxw();a.Q6J("ngStyle",f.gridRenderer.getGridRowStyle(_))}}const v=["*"];function h(K,u){if(1&K){const _=a.EpF();a.TgZ(0,"div",8),a.NdJ("mousedown",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))})("touchstart",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))}),a.qZA()}}function w(K,u){if(1&K){const _=a.EpF();a.TgZ(0,"div",9),a.NdJ("mousedown",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))})("touchstart",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))}),a.qZA()}}function M(K,u){if(1&K){const _=a.EpF();a.TgZ(0,"div",10),a.NdJ("mousedown",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))})("touchstart",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))}),a.qZA()}}function F(K,u){if(1&K){const _=a.EpF();a.TgZ(0,"div",11),a.NdJ("mousedown",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))})("touchstart",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))}),a.qZA()}}function L(K,u){if(1&K){const _=a.EpF();a.TgZ(0,"div",12),a.NdJ("mousedown",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))})("touchstart",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))}),a.qZA()}}function G(K,u){if(1&K){const _=a.EpF();a.TgZ(0,"div",13),a.NdJ("mousedown",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))})("touchstart",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))}),a.qZA()}}function y(K,u){if(1&K){const _=a.EpF();a.TgZ(0,"div",14),a.NdJ("mousedown",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))})("touchstart",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))}),a.qZA()}}function z(K,u){if(1&K){const _=a.EpF();a.TgZ(0,"div",15),a.NdJ("mousedown",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))})("touchstart",function(S){a.CHM(_);const $=a.oxw();return a.KtG($.resize.dragStartDelay(S))}),a.qZA()}}var D=(()=>{return(K=D||(D={})).Fit="fit",K.ScrollVertical="scrollVertical",K.ScrollHorizontal="scrollHorizontal",K.Fixed="fixed",K.VerticalFixed="verticalFixed",K.HorizontalFixed="horizontalFixed",D;var K})(),C=(()=>{return(K=C||(C={})).Always="always",K.OnDragAndResize="onDrag&Resize",K.None="none",C;var K})(),m=(()=>{return(K=m||(m={})).None="none",K.CompactUp="compactUp",K.CompactLeft="compactLeft",K.CompactUpAndLeft="compactUp&Left",K.CompactLeftAndUp="compactLeft&Up",K.CompactRight="compactRight",K.CompactUpAndRight="compactUp&Right",K.CompactRightAndUp="compactRight&Up",K.CompactDown="compactDown",K.CompactDownAndLeft="compactDown&Left",K.CompactLeftAndDown="compactLeft&Down",K.CompactDownAndRight="compactDown&Right",K.CompactRightAndDown="compactRight&Down",m;var K})(),x=(()=>{return(K=x||(x={})).LTR="ltr",K.RTL="rtl",x;var K})();class k{constructor(u){this.gridster=u}destroy(){this.gridster=null}checkCompact(){this.gridster.$options.compactType!==m.None&&(this.gridster.$options.compactType===m.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===m.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===m.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===m.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===m.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===m.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===m.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===m.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===m.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===m.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===m.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===m.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(u){this.gridster.$options.compactType!==m.None&&(this.gridster.$options.compactType===m.CompactUp?this.moveTillCollision(u,"y",-1):this.gridster.$options.compactType===m.CompactLeft?this.moveTillCollision(u,"x",-1):this.gridster.$options.compactType===m.CompactUpAndLeft?(this.moveTillCollision(u,"y",-1),this.moveTillCollision(u,"x",-1)):this.gridster.$options.compactType===m.CompactLeftAndUp?(this.moveTillCollision(u,"x",-1),this.moveTillCollision(u,"y",-1)):this.gridster.$options.compactType===m.CompactUpAndRight?(this.moveTillCollision(u,"y",-1),this.moveTillCollision(u,"x",1)):this.gridster.$options.compactType===m.CompactDown?this.moveTillCollision(u,"y",1):this.gridster.$options.compactType===m.CompactDownAndLeft?(this.moveTillCollision(u,"y",1),this.moveTillCollision(u,"x",-1)):this.gridster.$options.compactType===m.CompactLeftAndDown?(this.moveTillCollision(u,"x",-1),this.moveTillCollision(u,"y",1)):this.gridster.$options.compactType===m.CompactDownAndRight?(this.moveTillCollision(u,"y",1),this.moveTillCollision(u,"x",1)):this.gridster.$options.compactType===m.CompactRightAndDown&&(this.moveTillCollision(u,"x",1),this.moveTillCollision(u,"y",1)))}checkCompactMovement(u,_){let f=!1;this.gridster.grid.forEach(S=>{!1!==S.$item.compactEnabled&&this.moveTillCollision(S.$item,u,_)&&(f=!0,S.item[u]=S.$item[u],S.itemChanged())}),f&&this.checkCompact()}moveTillCollision(u,_,f){return u[_]+=f,this.gridster.checkCollision(u)?(u[_]-=f,!1):(this.moveTillCollision(u,_,f),!0)}}const X={gridType:D.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:m.None,mobileBreakpoint:640,useBodyForBreakpoint:!1,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:C.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,enableBoundaryControl:!1,disableAutoPositionOnConflict:!1,dirType:x.LTR};class q{static merge(u,_,f){for(const S in _)void 0!==_[S]&&f.hasOwnProperty(S)&&("object"==typeof _[S]?(S in u||(u[S]={}),u[S]=q.merge(u[S],_[S],f[S])):u[S]=_[S]);return u}static checkTouchEvent(u){void 0===u.clientX&&u.touches&&(u.touches&&u.touches.length?(u.clientX=u.touches[0].clientX,u.clientY=u.touches[0].clientY):u.changedTouches&&u.changedTouches.length&&(u.clientX=u.changedTouches[0].clientX,u.clientY=u.changedTouches[0].clientY))}static checkContentClassForEvent(u,_){if(u.$options.draggable.ignoreContent){if(!q.checkDragHandleClass(_.target,_.currentTarget,u.$options.draggable.dragHandleClass,u.$options.draggable.ignoreContentClass))return!0}else if(q.checkContentClass(_.target,_.currentTarget,u.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(u,_){return q.checkContentClass(_.target,_.currentTarget,u.$options.draggable.ignoreContentClass)||q.checkContentClass(_.target,_.currentTarget,u.$options.draggable.dragHandleClass)}static checkDragHandleClass(u,_,f,S){if(!u||u===_)return!1;if(u.hasAttribute("class")){const $=u.getAttribute("class").split(" ");if($.indexOf(f)>-1)return!0;if($.indexOf(S)>-1)return!1}return q.checkDragHandleClass(u.parentNode,_,f,S)}static checkContentClass(u,_,f){return!(!u||u===_)&&(!!(u.hasAttribute("class")&&u.getAttribute("class").split(" ").indexOf(f)>-1)||q.checkContentClass(u.parentNode,_,f))}static compareItems(u,_){return u.y>_.y?-1:u.y<_.y?1:u.x>_.x?-1:1}}class se{constructor(u){this.gridster=u,this.emptyCellClickCb=_=>{if(!this.gridster||this.gridster.movingItem||q.checkContentClassForEmptyCellClickEvent(this.gridster,_))return;const f=this.getValidItemFromEvent(_);f&&(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(_,f),this.gridster.cdRef.markForCheck())},this.emptyCellContextMenuCb=_=>{if(this.gridster.movingItem||q.checkContentClassForEmptyCellClickEvent(this.gridster,_))return;_.preventDefault(),_.stopPropagation();const f=this.getValidItemFromEvent(_);f&&(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(_,f),this.gridster.cdRef.markForCheck())},this.emptyCellDragDrop=_=>{const f=this.getValidItemFromEvent(_);f&&(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(_,f),this.gridster.cdRef.markForCheck())},this.emptyCellDragOver=_=>{_.preventDefault(),_.stopPropagation();const f=this.getValidItemFromEvent(_);f?(_.dataTransfer&&(_.dataTransfer.dropEffect="move"),this.gridster.movingItem=f):(_.dataTransfer&&(_.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()},this.emptyCellMouseDown=_=>{if(q.checkContentClassForEmptyCellClickEvent(this.gridster,_))return;_.preventDefault(),_.stopPropagation();const f=this.getValidItemFromEvent(_);!f||1!==_.buttons&&!(_ instanceof TouchEvent)||(this.initialItem=f,this.gridster.movingItem=f,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.removeWindowMousemoveListenerFn=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove),this.removeWindowTouchmoveListenerFn=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove)}),this.removeWindowMouseupListenerFn=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp),this.removeWindowTouchendListenerFn=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp))},this.emptyCellMouseMove=_=>{_.preventDefault(),_.stopPropagation();const f=this.getValidItemFromEvent(_,this.initialItem);f&&(this.gridster.movingItem=f,this.gridster.previewStyle())},this.emptyCellMouseUp=_=>{this.removeWindowMousemoveListenerFn(),this.removeWindowTouchmoveListenerFn(),this.removeWindowMouseupListenerFn(),this.removeWindowTouchendListenerFn();const f=this.getValidItemFromEvent(_,this.initialItem);f&&(this.gridster.movingItem=f),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(_,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()}}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),this.gridster.movingItem=null,this.initialItem=this.gridster=null,this.removeDocumentDragendListenerFn&&(this.removeDocumentDragendListenerFn(),this.removeDocumentDragendListenerFn=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.removeEmptyCellClickListenerFn&&this.gridster.options.emptyCellClickCallback?(this.removeEmptyCellClickListenerFn=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb),this.removeEmptyCellTouchendListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb)):!this.gridster.$options.enableEmptyCellClick&&this.removeEmptyCellClickListenerFn&&this.removeEmptyCellTouchendListenerFn&&(this.removeEmptyCellClickListenerFn(),this.removeEmptyCellTouchendListenerFn(),this.removeEmptyCellClickListenerFn=null,this.removeEmptyCellTouchendListenerFn=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.removeEmptyCellContextMenuListenerFn&&this.gridster.options.emptyCellContextMenuCallback?this.removeEmptyCellContextMenuListenerFn=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb):!this.gridster.$options.enableEmptyCellContextMenu&&this.removeEmptyCellContextMenuListenerFn&&(this.removeEmptyCellContextMenuListenerFn(),this.removeEmptyCellContextMenuListenerFn=null),this.gridster.$options.enableEmptyCellDrop&&!this.removeEmptyCellDropListenerFn&&this.gridster.options.emptyCellDropCallback?(this.removeEmptyCellDropListenerFn=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop),this.gridster.zone.runOutsideAngular(()=>{this.removeEmptyCellDragoverListenerFn=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver)}),this.removeDocumentDragendListenerFn=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.removeEmptyCellDropListenerFn&&this.removeEmptyCellDragoverListenerFn&&this.removeDocumentDragendListenerFn&&(this.removeEmptyCellDropListenerFn(),this.removeEmptyCellDragoverListenerFn(),this.removeDocumentDragendListenerFn(),this.removeEmptyCellDragoverListenerFn=null,this.removeEmptyCellDropListenerFn=null,this.removeDocumentDragendListenerFn=null),this.gridster.$options.enableEmptyCellDrag&&!this.removeEmptyCellMousedownListenerFn&&this.gridster.options.emptyCellDragCallback?(this.removeEmptyCellMousedownListenerFn=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown),this.removeEmptyCellTouchstartListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown)):!this.gridster.$options.enableEmptyCellDrag&&this.removeEmptyCellMousedownListenerFn&&this.removeEmptyCellTouchstartListenerFn&&(this.removeEmptyCellMousedownListenerFn(),this.removeEmptyCellTouchstartListenerFn(),this.removeEmptyCellMousedownListenerFn=null,this.removeEmptyCellTouchstartListenerFn=null)}getPixelsX(u,_){const f=this.gridster.options.scale;return f?(u.clientX-_.left)/f+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():u.clientX+this.gridster.el.scrollLeft-_.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(u,_){const f=this.gridster.options.scale;return f?(u.clientY-_.top)/f+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():u.clientY+this.gridster.el.scrollTop-_.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(u,_){u.preventDefault(),u.stopPropagation(),q.checkTouchEvent(u);const f=this.gridster.el.getBoundingClientRect(),S=this.getPixelsX(u,f),$=this.getPixelsY(u,f),H={x:this.gridster.pixelsToPositionX(S,Math.floor,!0),y:this.gridster.pixelsToPositionY($,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(_&&(H.cols=Math.min(Math.abs(_.x-H.x)+1,this.gridster.$options.emptyCellDragMaxCols),H.rows=Math.min(Math.abs(_.y-H.y)+1,this.gridster.$options.emptyCellDragMaxRows),_.x<H.x?H.x=_.x:_.x-H.x>this.gridster.$options.emptyCellDragMaxCols-1&&(H.x=this.gridster.movingItem?this.gridster.movingItem.x:0),_.y<H.y?H.y=_.y:_.y-H.y>this.gridster.$options.emptyCellDragMaxRows-1&&(H.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(H))return H}}class de{constructor(u){this.gridster=u}destroy(){this.gridster=null}updateItem(u,_,f){if(this.gridster.mobile)this.clearCellPosition(f,u),f.setStyle(u,"height",this.gridster.$options.keepFixedHeightInMobile?(_.rows-1)*this.gridster.$options.margin+_.rows*this.gridster.$options.fixedRowHeight+"px":_.rows*this.gridster.curWidth/_.cols+"px"),f.setStyle(u,"width",this.gridster.$options.keepFixedWidthInMobile?this.gridster.$options.fixedColWidth+"px":""),f.setStyle(u,"margin-bottom",this.gridster.$options.margin+"px"),f.setStyle(u,x.LTR?"margin-right":"margin-left","");else{const S=Math.round(this.gridster.curColWidth*_.x),$=Math.round(this.gridster.curRowHeight*_.y),H=this.gridster.curColWidth*_.cols-this.gridster.$options.margin,ue=this.gridster.curRowHeight*_.rows-this.gridster.$options.margin;this.setCellPosition(f,u,S,$),f.setStyle(u,"width",H+"px"),f.setStyle(u,"height",ue+"px");let Ce=null,fe=null;this.gridster.$options.outerMargin&&(this.gridster.rows===_.rows+_.y&&(Ce=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===_.cols+_.x&&(fe=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),f.setStyle(u,"margin-bottom",Ce),f.setStyle(u,x.LTR?"margin-right":"margin-left",fe)}}updateGridster(){let u="",_="",f="",S="";if(this.gridster.$options.gridType===D.Fit)u=D.Fit,_=D.ScrollVertical,f=D.ScrollHorizontal,S=D.Fixed;else if(this.gridster.$options.gridType===D.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,u=D.ScrollVertical,_=D.Fit,f=D.ScrollHorizontal,S=D.Fixed;else if(this.gridster.$options.gridType===D.ScrollHorizontal){const $=this.gridster.$options.rowHeightRatio;this.gridster.curColWidth=this.gridster.curRowHeight*($>=1?$:$+1),u=D.ScrollHorizontal,_=D.Fit,f=D.ScrollVertical,S=D.Fixed}else this.gridster.$options.gridType===D.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),u=D.Fixed,_=D.Fit,f=D.ScrollVertical,S=D.ScrollHorizontal):this.gridster.$options.gridType===D.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),u=D.ScrollVertical,_=D.Fit,f=D.ScrollHorizontal,S=D.Fixed):this.gridster.$options.gridType===D.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),u=D.ScrollHorizontal,_=D.Fit,f=D.ScrollVertical,S=D.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==D.Fit?this.gridster.renderer.removeClass(this.gridster.el,u):this.gridster.renderer.addClass(this.gridster.el,u),this.gridster.renderer.removeClass(this.gridster.el,_),this.gridster.renderer.removeClass(this.gridster.el,f),this.gridster.renderer.removeClass(this.gridster.el,S)}getGridColumnStyle(u){return{...this.getLeftPosition(this.gridster.curColWidth*u),width:this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin+"px"}}getGridRowStyle(u){return{...this.getTopPosition(this.gridster.curRowHeight*u),width:this.gridster.gridColumns.length*this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.curRowHeight-this.gridster.$options.margin+"px"}}getLeftPosition(u){const _=this.gridster.$options.dirType===x.RTL?-u:u;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+_+"px)"}:{left:this.getLeftMargin()+_+"px"}}getTopPosition(u){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+u+"px)"}:{top:this.getTopMargin()+u+"px"}}clearCellPosition(u,_){this.gridster.$options.useTransformPositioning?u.setStyle(_,"transform",""):(u.setStyle(_,"top",""),u.setStyle(_,"left",""))}setCellPosition(u,_,f,S){const $=this.gridster.$options.dirType===x.RTL?-f:f;this.gridster.$options.useTransformPositioning?u.setStyle(_,"transform","translate3d("+$+"px, "+S+"px, 0)"):(u.setStyle(_,"left",this.getLeftMargin()+$+"px"),u.setStyle(_,"top",this.getTopMargin()+S+"px"))}getLeftMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}let Y,j,oe,Te,Ee,ze,Ve,Ne,ot,pe=(()=>{class K{constructor(_,f){this.renderer=f,this.el=_.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(_=>this.previewStyle(_))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}previewStyle(_){_?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,_,this.renderer)):this.renderer.setStyle(this.el,"display","")}}return K.\u0275fac=function(_){return new(_||K)(a.Y36(a.SBq),a.Y36(a.Qsj))},K.\u0275cmp=a.Xpm({type:K,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},standalone:!0,features:[a.jDz],decls:0,vars:0,template:function(_,f){},styles:["gridster-preview{position:absolute;display:none;background:rgba(0,0,0,.15)}\n"],encapsulation:2}),K})(),ne=(()=>{class K{constructor(_,f,S,$){this.renderer=f,this.cdRef=S,this.zone=$,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.previewStyle$=new a.vpe,this.calculateLayout$=new O.x,this.resize$=new O.x,this.destroy$=new O.x,this.optionsChanged=()=>{this.setOptions();let ue,H=this.grid.length-1;for(;H>=0;H--)ue=this.grid[H],ue.updateOptions();this.calculateLayout()},this.onResize=()=>{this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())},this.getNextPossiblePosition=(H,ue={})=>{-1===H.cols&&(H.cols=this.$options.defaultItemCols),-1===H.rows&&(H.rows=this.$options.defaultItemRows),this.setGridDimensions();let fe,Ce=ue.y||0;for(;Ce<this.rows;Ce++)for(H.y=Ce,fe=ue.x||0;fe<this.columns;fe++)if(H.x=fe,!this.checkCollision(H))return!0;const ve=this.$options.maxRows>=this.rows+H.rows;return this.rows<=this.columns&&ve||!(this.$options.maxCols>=this.columns+H.cols)?!!ve&&(H.y=this.rows,H.x=0,!0):(H.x=this.columns,H.y=0,!0)},this.getFirstPossiblePosition=H=>{const ue=Object.assign({},H);return this.getNextPossiblePosition(ue),ue},this.getLastPossiblePosition=H=>{let ue={y:0,x:0};ue=this.grid.reduce((fe,ve)=>{const Le={y:ve.$item.y+ve.$item.rows-1,x:ve.$item.x+ve.$item.cols-1};return 1===q.compareItems(fe,Le)?Le:fe},ue);const Ce=Object.assign({},H);return this.getNextPossiblePosition(Ce,ue),Ce},this.el=_.nativeElement,this.$options=JSON.parse(JSON.stringify(X)),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new se(this),this.compact=new k(this),this.gridRenderer=new de(this)}static checkCollisionTwoItemsForSwaping(_,f){return _.x+(1===_.cols?0:1)<f.x+f.cols&&_.x+_.cols>f.x+(1===f.cols?0:1)&&_.y+(1===_.rows?0:1)<f.y+f.rows&&_.y+_.rows>f.y+(1===f.rows?0:1)}checkCollisionTwoItems(_,f){if(!(_.x<f.x+f.cols&&_.x+_.cols>f.x&&_.y<f.y+f.rows&&_.y+_.rows>f.y))return!1;if(!this.$options.allowMultiLayer)return!0;const $=this.$options.defaultLayerIndex;return(void 0===_.layerIndex?$:_.layerIndex)===(void 0===f.layerIndex?$:f.layerIndex)}ngOnInit(){this.options.initCallback&&this.options.initCallback(this),this.calculateLayout$.pipe((0,e.b)(0),(0,R.R)(this.destroy$)).subscribe(()=>this.calculateLayout()),this.resize$.pipe((0,N.w)(()=>(0,A.H)(100)),(0,R.R)(this.destroy$)).subscribe(()=>this.resize())}ngOnChanges(_){_.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged,resize:this.onResize,getNextPossiblePosition:this.getNextPossiblePosition,getFirstPossiblePosition:this.getFirstPossiblePosition,getLastPossiblePosition:this.getLastPossiblePosition,getItemComponent:f=>this.getItemComponent(f)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}resize(){let _,f;"fit"!==this.$options.gridType||this.mobile?(f=this.el.clientWidth,_=this.el.clientHeight):(f=this.el.offsetWidth,_=this.el.offsetHeight),(f!==this.curWidth||_!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=q.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize),this.emptyCell.updateOptions()}ngOnDestroy(){this.destroy$.next(),this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),this.emptyCell=null,this.compact.destroy(),this.compact=null}checkIfToResize(){const _=this.el.clientWidth,f=this.el.offsetWidth,S=this.el.scrollWidth,$=this.el.clientHeight,H=this.el.offsetHeight,ue=this.el.scrollHeight;return!(_<f&&ue>H&&ue-H<f-_||$<H&&S>f&&S-f<H-$)}checkIfMobile(){return this.$options.useBodyForBreakpoint?this.$options.mobileBreakpoint>document.body.clientWidth:this.$options.mobileBreakpoint>this.curWidth}setGridSize(){const _=this.el;let f,S;this.$options.setGridSize||this.$options.gridType===D.Fit&&!this.mobile?(f=_.offsetWidth,S=_.offsetHeight):(f=_.clientWidth,S=_.clientHeight),this.curWidth=f,this.curHeight=S}setGridDimensions(){this.setGridSize(),!this.mobile&&this.checkIfMobile()?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&!this.checkIfMobile()&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let $,_=this.$options.minRows,f=this.$options.minCols,S=this.grid.length-1;for(;S>=0;S--)$=this.grid[S],$.notPlaced||(_=Math.max(_,$.$item.y+$.$item.rows),f=Math.max(f,$.$item.x+$.$item.cols));_+=this.$options.addEmptyRowsCount,(this.columns!==f||this.rows!==_)&&(this.columns=f,this.rows=_,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let S=-this.$options.margin;null!==this.$options.outerMarginLeft?(S+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(S+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(S+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(S+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-S)/this.columns;let $=-this.$options.margin;null!==this.$options.outerMarginTop?($+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):($+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?($+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):($+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-$)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let f,_=this.grid.length-1;for(;_>=0;_--)f=this.grid[_],f.setSize(),f.drag.toggle(),f.resize.toggle();this.resize$.next()}updateGrid(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):("none"===this.$options.displayGrid||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=K.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=K.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(_){void 0===_.$item.cols&&(_.$item.cols=this.$options.defaultItemCols,_.item.cols=_.$item.cols,_.itemChanged()),void 0===_.$item.rows&&(_.$item.rows=this.$options.defaultItemRows,_.item.rows=_.$item.rows,_.itemChanged()),-1===_.$item.x||-1===_.$item.y?this.autoPositionItem(_):this.checkCollision(_.$item)&&(this.$options.disableWarnings||(_.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(_.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?_.notPlaced=!0:this.autoPositionItem(_)),this.grid.push(_),this.calculateLayout$.next()}removeItem(_){this.grid.splice(this.grid.indexOf(_),1),this.calculateLayout$.next(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(_.item,_)}checkCollision(_){let f=!1;if(this.options.itemValidateCallback&&(f=!this.options.itemValidateCallback(_)),!f&&this.checkGridCollision(_)&&(f=!0),!f){const S=this.findItemWithItem(_);S&&(f=S)}return f}checkGridCollision(_){const Ue=_.cols*_.rows;return!(_.y>-1&&_.x>-1&&_.cols+_.x<=this.$options.maxCols&&_.rows+_.y<=this.$options.maxRows&&_.cols<=(void 0===_.maxItemCols?this.$options.maxItemCols:_.maxItemCols)&&_.cols>=(void 0===_.minItemCols?this.$options.minItemCols:_.minItemCols)&&_.rows<=(void 0===_.maxItemRows?this.$options.maxItemRows:_.maxItemRows)&&_.rows>=(void 0===_.minItemRows?this.$options.minItemRows:_.minItemRows)&&(void 0===_.minItemArea?this.$options.minItemArea:_.minItemArea)<=Ue&&(void 0===_.maxItemArea?this.$options.maxItemArea:_.maxItemArea)>=Ue)}findItemWithItem(_){let S,f=0;for(;f<this.grid.length;f++)if(S=this.grid[f],S.$item!==_&&this.checkCollisionTwoItems(S.$item,_))return S;return!1}findItemsWithItem(_){const f=[];let $,S=0;for(;S<this.grid.length;S++)$=this.grid[S],$.$item!==_&&this.checkCollisionTwoItems($.$item,_)&&f.push($);return f}autoPositionItem(_){this.getNextPossiblePosition(_.$item)?(_.notPlaced=!1,_.item.x=_.$item.x,_.item.y=_.$item.y,_.itemChanged()):(_.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(_.item,["cols","rows","x","y"])))}pixelsToPositionX(_,f,S){const $=f(_/this.curColWidth);return S?$:Math.max($,0)}pixelsToPositionY(_,f,S){const $=f(_/this.curRowHeight);return S?$:Math.max($,0)}positionXToPixels(_){return _*this.curColWidth}positionYToPixels(_){return _*this.curRowHeight}getItemComponent(_){return this.grid.find(f=>f.item===_)}checkCollisionForSwaping(_){let f=!1;if(this.options.itemValidateCallback&&(f=!this.options.itemValidateCallback(_)),!f&&this.checkGridCollision(_)&&(f=!0),!f){const S=this.findItemWithItemForSwapping(_);S&&(f=S)}return f}findItemWithItemForSwapping(_){let S,f=this.grid.length-1;for(;f>-1;f--)if(S=this.grid[f],S.$item!==_&&K.checkCollisionTwoItemsForSwaping(S.$item,_))return S;return!1}previewStyle(_=!1){this.movingItem?(this.compact&&_&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}static getNewArrayLength(_,f,S){const $=Math.max(_,Math.floor(f/S));return $<0?0:Number.isFinite($)?Math.floor($):0}}return K.\u0275fac=function(_){return new(_||K)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.sBO),a.Y36(a.R0b))},K.\u0275cmp=a.Xpm({type:K,selectors:[["gridster"]],inputs:{options:"options"},standalone:!0,features:[a.TTD,a.jDz],ngContentSelectors:v,decls:4,vars:4,consts:[["class","gridster-column",3,"ngStyle",4,"ngFor","ngForOf"],["class","gridster-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"],[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"]],template:function(_,f){1&_&&(a.F$t(),a.YNc(0,T,1,1,"div",0),a.YNc(1,p,1,1,"div",1),a.Hsn(2),a._UZ(3,"gridster-preview",2)),2&_&&(a.Q6J("ngForOf",f.gridColumns),a.xp6(1),a.Q6J("ngForOf",f.gridRows),a.xp6(2),a.Q6J("gridRenderer",f.gridRenderer)("previewStyle$",f.previewStyle$))},dependencies:[d.sg,d.PC,pe],styles:["gridster{position:relative;box-sizing:border-box;background:grey;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}\n"],encapsulation:2}),K})();class le{constructor(u){this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=u,this.gridster=u.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(u,_){if(this.gridster.$options.pushItems&&!_){this.pushedItemsOrder=[],this.iteration=0;const f=this.push(this.gridsterItem,u);return f||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],f}return!1}restoreTempItems(){let u=this.pushedItemsTemp.length-1;for(;u>-1;u--)this.removeFromTempPushed(this.pushedItemsTemp[u])}restoreItems(){let u=0;const _=this.pushedItems.length;let f;for(;u<_;u++)f=this.pushedItems[u],f.$item.x=f.item.x||0,f.$item.y=f.item.y||0,f.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let u=0;const _=this.pushedItems.length;let f;for(;u<_;u++)f=this.pushedItems[u],f.checkItemChanges(f.$item,f.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let u=this.pushedItems.length-1,_=!1;for(;u>-1;u--)this.checkPushedItem(this.pushedItems[u],u)&&(_=!0);_&&this.checkPushBack()}push(u,_){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(u.$item)||""===_)return!1;const f=this.gridster.findItemsWithItem(u.$item),S=_===this.fromNorth||_===this.fromWest;f.sort((fe,ve)=>S?ve.$item.y-fe.$item.y||ve.$item.x-fe.$item.x:fe.$item.y-ve.$item.y||fe.$item.x-ve.$item.x);let H,$=0,ue=!0;const Ce=[];for(;$<f.length;$++){if(H=f[$],H===this.gridsterItem)continue;if(!H.canBeDragged()){ue=!1;break}const fe=this.pushedItemsTemp.indexOf(H);if(fe>-1&&this.pushedItemsTempPath[fe].length>10){ue=!1;break}if(this.tryPattern[_][0].call(this,H,u))this.pushedItemsOrder.push(H),Ce.push(H);else if(this.tryPattern[_][1].call(this,H,u))this.pushedItemsOrder.push(H),Ce.push(H);else if(this.tryPattern[_][2].call(this,H,u))this.pushedItemsOrder.push(H),Ce.push(H);else{if(!this.tryPattern[_][3].call(this,H,u)){ue=!1;break}this.pushedItemsOrder.push(H),Ce.push(H)}}if(!ue&&($=this.pushedItemsOrder.lastIndexOf(Ce[0]),$>-1)){let fe=this.pushedItemsOrder.length-1;for(;fe>=$;fe--)H=this.pushedItemsOrder[fe],this.pushedItemsOrder.pop(),this.removeFromTempPushed(H),this.removeFromPushedItem(H)}return this.iteration++,ue}trySouth(u,_){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(u),u.$item.y=_.$item.y+_.$item.rows,this.push(u,this.fromNorth)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}tryNorth(u,_){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(u),u.$item.y=_.$item.y-u.$item.rows,this.push(u,this.fromSouth)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}tryEast(u,_){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(u),u.$item.x=_.$item.x+_.$item.cols,this.push(u,this.fromWest)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}tryWest(u,_){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(u),u.$item.x=_.$item.x-u.$item.cols,this.push(u,this.fromEast)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}addToTempPushed(u){let _=this.pushedItemsTemp.indexOf(u);-1===_&&(_=this.pushedItemsTemp.push(u)-1,this.pushedItemsTempPath[_]=[]),this.pushedItemsTempPath[_].push({x:u.$item.x,y:u.$item.y})}removeFromTempPushed(u){const _=this.pushedItemsTemp.indexOf(u),f=this.pushedItemsTempPath[_].pop();f&&(u.$item.x=f.x,u.$item.y=f.y,u.setSize(),this.pushedItemsTempPath[_].length||(this.pushedItemsTemp.splice(_,1),this.pushedItemsTempPath.splice(_,1)))}addToPushed(u){if(this.pushedItems.indexOf(u)<0)this.pushedItems.push(u),this.pushedItemsPath.push([{x:u.item.x||0,y:u.item.y||0},{x:u.$item.x,y:u.$item.y}]);else{const _=this.pushedItems.indexOf(u);this.pushedItemsPath[_].push({x:u.$item.x,y:u.$item.y})}}removeFromPushed(u){u>-1&&(this.pushedItems.splice(u,1),this.pushedItemsPath.splice(u,1))}removeFromPushedItem(u){const _=this.pushedItems.indexOf(u);_>-1&&(this.pushedItemsPath[_].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(_,1),this.pushedItemsPath.splice(_,1)))}checkPushedItem(u,_){const f=this.pushedItemsPath[_];let $,H,ue,S=f.length-2,Ce=!1;for(;S>-1;S--)$=f[S],H=u.$item.x,ue=u.$item.y,u.$item.x=$.x,u.$item.y=$.y,this.gridster.findItemWithItem(u.$item)?(u.$item.x=H,u.$item.y=ue):(u.setSize(),f.splice(S+1,f.length-S-1),Ce=!0);return f.length<2&&this.removeFromPushed(_),Ce}}function Ct(K,u,_,f,S,$,H,ue,Ce,fe){Y=K.$options.scrollSensitivity,j=K.$options.scrollSpeed,oe=K.el,Te=Ce,Ee=fe;const ve=oe.offsetWidth,Ke=oe.scrollLeft,Je=oe.scrollTop,Ue=_-Je,He=oe.offsetHeight+Je-_-S,{clientX:rt,clientY:Be}=$;if(!K.$options.disableScrollVertical)if(H.clientY<Be&&He<Y){if(mt(),Te&&Ee&&!Ee.south||ot)return;ot=Ot(1,ue,H)}else if(H.clientY>Be&&Je>0&&Ue<Y){if(Et(),Te&&Ee&&!Ee.north||Ne)return;Ne=Ot(-1,ue,H)}else H.clientY!==Be&&ht();const ct=u-Ke;if(!K.$options.disableScrollHorizontal)if(H.clientX<rt&&Ke+ve-u-f<=Y){if(vt(),Te&&Ee&&!Ee.east||ze)return;ze=ye(1,ue,H)}else if(H.clientX>rt&&Ke>0&&ct<Y){if(It(),Te&&Ee&&!Ee.west||Ve)return;Ve=ye(-1,ue,H)}else H.clientX!==rt&&gt()}function Ot(K,u,_){let f=_.clientY;return window.setInterval(()=>{(!oe||-1===K&&oe.scrollTop-j<0)&&ht(),oe.scrollTop+=K*j,f+=K*j,u({clientX:_.clientX,clientY:f})},50)}function ye(K,u,_){let f=_.clientX;return window.setInterval(()=>{(!oe||-1===K&&oe.scrollLeft-j<0)&&gt(),oe.scrollLeft+=K*j,f+=K*j,u({clientX:f,clientY:_.clientY})},50)}function it(){gt(),ht(),oe=null}function gt(){It(),vt()}function ht(){mt(),Et()}function It(){ze&&(clearInterval(ze),ze=0)}function vt(){Ve&&(clearInterval(Ve),Ve=0)}function Et(){ot&&(clearInterval(ot),ot=0)}function mt(){Ne&&(clearInterval(Ne),Ne=0)}class ft{constructor(u){this.gridsterItem=u,this.gridster=u.gridster}destroy(){this.gridster=this.gridsterItem=this.swapedItem=null}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){const u=this.swapedItem.$item.x,_=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=u,this.swapedItem.$item.y=_):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(u){let _;if(_=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(u.$item):this.gridster.checkCollision(u.$item),_&&!0!==_&&_.canBeDragged()){const f=_,S=f.$item.x,$=f.$item.y,H=u.$item.x,ue=u.$item.y,Ce=H-S,fe=ue-$;f.$item.x=u.item.x-Ce,f.$item.y=u.item.y-fe,u.$item.x=f.item.x+Ce,u.$item.y=f.item.y+fe,this.gridster.checkCollision(f.$item)||this.gridster.checkCollision(u.$item)?(u.$item.x=H,u.$item.y=ue,f.$item.x=S,f.$item.y=$):(f.setSize(),this.swapedItem=f,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}var Fe=(()=>{return(K=Fe||(Fe={})).UP="UP",K.DOWN="DOWN",K.LEFT="LEFT",K.RIGHT="RIGHT",Fe;var K})();class Pt{constructor(u,_,f){this.zone=f,this.collision=!1,this.dragMove=S=>{S.stopPropagation(),S.preventDefault(),q.checkTouchEvent(S);let $=this.getDirections(S);this.gridster.options.enableBoundaryControl&&($.includes(Fe.UP)&&this.gridsterItem.el.getBoundingClientRect().top<this.gridster.el.getBoundingClientRect().top+this.margin&&($=$.filter(H=>H!=Fe.UP),S=new MouseEvent(S.type,{clientX:S.clientX,clientY:this.lastMouse.clientY})),$.includes(Fe.LEFT)&&this.gridsterItem.el.getBoundingClientRect().left<this.gridster.el.getBoundingClientRect().left+this.margin&&($=$.filter(H=>H!=Fe.LEFT),S=new MouseEvent(S.type,{clientX:this.lastMouse.clientX,clientY:S.clientY})),$.includes(Fe.RIGHT)&&this.gridsterItem.el.getBoundingClientRect().right>this.gridster.el.getBoundingClientRect().right-this.margin&&($=$.filter(H=>H!=Fe.RIGHT),S=new MouseEvent(S.type,{clientX:this.lastMouse.clientX,clientY:S.clientY})),$.includes(Fe.DOWN)&&this.gridsterItem.el.getBoundingClientRect().bottom>this.gridster.el.getBoundingClientRect().bottom-this.margin&&($=$.filter(H=>H!=Fe.DOWN),S=new MouseEvent(S.type,{clientX:S.clientX,clientY:this.lastMouse.clientY}))),$.length&&(this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,Ct(this.gridster,this.left,this.top,this.width,this.height,S,this.lastMouse,this.calculateItemPositionFromMousePosition),this.calculateItemPositionFromMousePosition(S))},this.calculateItemPositionFromMousePosition=S=>{this.gridster.options.scale?this.calculateItemPositionWithScale(S,this.gridster.options.scale):this.calculateItemPositionWithoutScale(S),this.calculateItemPosition(),this.lastMouse.clientX=S.clientX,this.lastMouse.clientY=S.clientY,this.zone.run(()=>{this.gridster.updateGrid()})},this.dragStop=S=>{S.stopPropagation(),S.preventDefault(),it(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,S)).then(this.makeDrag,this.cancelDrag):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})},this.cancelDrag=()=>{this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)},this.makeDrag=()=>{this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&!0!==this.collision&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)},this.dragStartDelay=S=>{if(S.target.classList.contains("gridster-item-resizable-handler")||q.checkContentClassForEvent(this.gridster,S))return;if(q.checkTouchEvent(S),!this.gridster.$options.draggable.delayStart)return void this.dragStart(S);const H=setTimeout(()=>{this.dragStart(S),Ue()},this.gridster.$options.draggable.delayStart),ue=this.gridsterItem.renderer.listen("document","mouseup",Ue),Ce=this.gridsterItem.renderer.listen("document","mouseleave",Ue),fe=this.gridsterItem.renderer.listen("window","blur",Ue),ve=this.gridsterItem.renderer.listen("document","touchmove",function Je(He){q.checkTouchEvent(He),(Math.abs(He.clientX-S.clientX)>9||Math.abs(He.clientY-S.clientY)>9)&&Ue()}),Le=this.gridsterItem.renderer.listen("document","touchend",Ue),Ke=this.gridsterItem.renderer.listen("document","touchcancel",Ue);function Ue(){clearTimeout(H),fe(),ue(),Ce(),ve(),Le(),Ke()}},this.gridsterItem=u,this.gridster=_,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),this.gridsterItem=this.gridster=this.collision=null,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(u){u.which&&1!==u.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,u),u.stopPropagation(),u.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=u.clientX,this.originalClientY=u.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.diffLeft=this.gridster.$options.dirType===x.RTL?u.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:u.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=u.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new le(this.gridsterItem),this.swap=new ft(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}calculateItemPositionWithScale(u,_){this.left=this.gridster.$options.dirType===x.RTL?this.gridster.el.scrollWidth-this.originalClientX+(u.clientX-this.originalClientX)/_+this.diffLeft:this.originalClientX+(u.clientX-this.originalClientX)/_+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(u.clientY-this.originalClientY)/_+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(u){this.left=this.gridster.$options.dirType===x.RTL?this.gridster.el.scrollWidth-u.clientX+this.diffLeft:u.clientX+this.offsetLeft-this.diffLeft,this.top=u.clientY+this.offsetTop-this.diffTop}calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){const u=this.path[this.path.length-1];let _="";u.x<this.gridsterItem.$item.x?_=this.push.fromWest:u.x>this.gridsterItem.$item.x?_=this.push.fromEast:u.y<this.gridsterItem.$item.y?_=this.push.fromNorth:u.y>this.gridsterItem.$item.y&&(_=this.push.fromSouth),this.push.pushItems(_,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}else this.collision=!1;this.gridster.previewStyle(!0)}toggle(){const u=this.gridsterItem.canBeDragged();!this.enabled&&u?(this.enabled=!this.enabled,this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartDelay),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartDelay)):this.enabled&&!u&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}getDirections(u){const _=[];return 0===this.lastMouse.clientX&&0===this.lastMouse.clientY&&(this.lastMouse.clientY=u.clientY,this.lastMouse.clientX=u.clientX),this.lastMouse.clientY>u.clientY&&_.push(Fe.UP),this.lastMouse.clientY<u.clientY&&_.push(Fe.DOWN),this.lastMouse.clientX<u.clientX&&_.push(Fe.RIGHT),this.lastMouse.clientX>u.clientX&&_.push(Fe.LEFT),_}}class Ht{constructor(u){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=u,this.gridster=u.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(u){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,u)}restoreItems(){let u=0;const _=this.pushedItems.length;let f;for(;u<_;u++)f=this.pushedItems[u],f.$item.x=f.item.x||0,f.$item.y=f.item.y||0,f.$item.cols=f.item.cols||1,f.$item.row=f.item.row||1,f.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let u=0;const _=this.pushedItems.length;let f;for(;u<_;u++)f=this.pushedItems[u],f.checkItemChanges(f.$item,f.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let u=this.pushedItems.length-1,_=!1;for(;u>-1;u--)this.checkPushedItem(this.pushedItems[u],u)&&(_=!0);_&&this.checkPushBack()}push(u,_){const f=this.gridster.checkCollision(u.$item);if(f&&!0!==f&&f!==this.gridsterItem&&f.canBeResized()){if(this.tryPattern[_].call(this,f,u,_))return!0}else if(!1===f)return!0;return!1}trySouth(u,_,f){const S=u.$item.y,$=u.$item.rows;return u.$item.y=_.$item.y+_.$item.rows,u.$item.rows=$+S-u.$item.y,this.gridster.checkCollisionTwoItems(u.$item,_.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.y=S,u.$item.rows=$,!1):(u.setSize(),this.addToPushed(u),this.push(_,f),!0)}tryNorth(u,_,f){const S=u.$item.rows;return u.$item.rows=_.$item.y-u.$item.y,this.gridster.checkCollisionTwoItems(u.$item,_.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.rows=S,!1):(u.setSize(),this.addToPushed(u),this.push(_,f),!0)}tryEast(u,_,f){const S=u.$item.x,$=u.$item.cols;return u.$item.x=_.$item.x+_.$item.cols,u.$item.cols=$+S-u.$item.x,this.gridster.checkCollisionTwoItems(u.$item,_.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.x=S,u.$item.cols=$,!1):(u.setSize(),this.addToPushed(u),this.push(_,f),!0)}tryWest(u,_,f){const S=u.$item.cols;return u.$item.cols=_.$item.x-u.$item.x,this.gridster.checkCollisionTwoItems(u.$item,_.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.cols=S,!1):(u.setSize(),this.addToPushed(u),this.push(_,f),!0)}addToPushed(u){if(this.pushedItems.indexOf(u)<0)this.pushedItems.push(u),this.pushedItemsPath.push([{x:u.item.x||0,y:u.item.y||0,cols:u.item.cols||0,rows:u.item.rows||0},{x:u.$item.x,y:u.$item.y,cols:u.$item.cols,rows:u.$item.rows}]);else{const _=this.pushedItems.indexOf(u);this.pushedItemsPath[_].push({x:u.$item.x,y:u.$item.y,cols:u.$item.cols,rows:u.$item.rows})}}removeFromPushed(u){u>-1&&(this.pushedItems.splice(u,1),this.pushedItemsPath.splice(u,1))}checkPushedItem(u,_){const f=this.pushedItemsPath[_];let $,H,ue,Ce,fe,S=f.length-2;for(;S>-1;S--)$=f[S],H=u.$item.x,ue=u.$item.y,Ce=u.$item.cols,fe=u.$item.rows,u.$item.x=$.x,u.$item.y=$.y,u.$item.cols=$.cols,u.$item.rows=$.rows,this.gridster.findItemWithItem(u.$item)?(u.$item.x=H,u.$item.y=ue,u.$item.cols=Ce,u.$item.rows=fe):(u.setSize(),f.splice(S+1,f.length-1-S));return f.length<2&&(this.removeFromPushed(_),!0)}}class Dt{constructor(u,_,f){this.zone=f,this.directionFunction=null,this.dragMove=S=>{if(null===this.directionFunction)throw new Error("The `directionFunction` has not been set before calling `dragMove`.");S.stopPropagation(),S.preventDefault(),q.checkTouchEvent(S),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,Ct(this.gridster,this.left,this.top,this.width,this.height,S,this.lastMouse,this.directionFunction,!0,this.resizeEventScrollType);const $=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(S.clientX-this.originalClientX)/$,clientY:this.originalClientY+(S.clientY-this.originalClientY)/$}),this.lastMouse.clientX=S.clientX,this.lastMouse.clientY=S.clientY,this.zone.run(()=>{this.gridster.updateGrid()})},this.dragStop=S=>{S.stopPropagation(),S.preventDefault(),it(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,S)).then(this.makeResize,this.cancelResize):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})},this.cancelResize=()=>{this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null},this.makeResize=()=>{this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null},this.handleNorth=S=>{if(this.top=S.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height?(this.height=this.minHeight,this.top=this.bottom-this.minHeight):this.gridster.options.enableBoundaryControl&&(this.top=Math.max(0,this.top),this.height=this.bottom-this.top),this.newPosition=this.gridster.pixelsToPositionY(this.top+(this.gridster.options.pushItems?this.margin:0),Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.top=this.gridster.positionYToPixels(this.gridsterItem.$item.y),this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)},this.handleWest=S=>{if(this.left=(this.gridster.$options.dirType===x.RTL?this.originalClientX+(this.originalClientX-S.clientX):S.clientX)+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width?(this.width=this.minWidth,this.left=this.right-this.minWidth):this.gridster.options.enableBoundaryControl&&(this.left=Math.max(0,this.left),this.width=this.right-this.left),this.newPosition=this.gridster.pixelsToPositionX(this.left+(this.gridster.options.pushItems?this.margin:0),Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.left=this.gridster.positionXToPixels(this.gridsterItem.$item.x),this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)},this.handleSouth=S=>{if(this.height=S.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.gridster.options.enableBoundaryControl){const H=this.gridster.el.getBoundingClientRect();this.bottom=Math.min(this.bottom,H.bottom-H.top-2*this.margin),this.height=this.bottom-this.top}if(this.newPosition=this.gridster.pixelsToPositionY(this.bottom+(this.gridster.options.pushItems?0:this.margin),Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.rows=this.itemBackup[3],void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)},this.handleEast=S=>{if(this.width=(this.gridster.$options.dirType===x.RTL?this.originalClientX+(this.originalClientX-S.clientX):S.clientX)+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.gridster.options.enableBoundaryControl){const ue=this.gridster.el.getBoundingClientRect();this.right=Math.min(this.right,ue.right-ue.left-2*this.margin),this.width=this.right-this.left}if(this.newPosition=this.gridster.pixelsToPositionX(this.right+(this.gridster.options.pushItems?0:this.margin),Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.cols=this.itemBackup[2],void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)},this.handleNorthWest=S=>{this.handleNorth(S),this.handleWest(S)},this.handleNorthEast=S=>{this.handleNorth(S),this.handleEast(S)},this.handleSouthWest=S=>{this.handleSouth(S),this.handleWest(S)},this.handleSouthEast=S=>{this.handleSouth(S),this.handleEast(S)},this.gridsterItem=u,this.gridster=_,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={west:!1,east:!1,north:!1,south:!1}}destroy(){this.gridster?.previewStyle(),this.gridster=this.gridsterItem=null}dragStart(u){if(u.which&&1!==u.which)return;this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,u),u.stopPropagation(),u.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=u.clientX,this.lastMouse.clientY=u.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=u.clientX,this.originalClientY=u.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=u.clientX+this.offsetLeft-this.left,this.diffRight=u.clientX+this.offsetLeft-this.right,this.diffTop=u.clientY+this.offsetTop-this.top,this.diffBottom=u.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new le(this.gridsterItem),this.pushResize=new Ht(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid();const{classList:_}=u.target;_.contains("handle-n")?(this.resizeEventScrollType.north=!0,this.directionFunction=this.handleNorth):_.contains("handle-w")?this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):_.contains("handle-s")?(this.resizeEventScrollType.south=!0,this.directionFunction=this.handleSouth):_.contains("handle-e")?this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):_.contains("handle-nw")?this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):_.contains("handle-ne")?this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):_.contains("handle-sw")?this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):_.contains("handle-se")&&(this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast))}toggle(){this.resizeEnabled=this.gridsterItem.canBeResized(),this.resizableHandles=this.gridsterItem.getResizableHandles()}dragStartDelay(u){if(q.checkTouchEvent(u),!this.gridster.$options.resizable.delayStart)return void this.dragStart(u);const _=setTimeout(()=>{this.dragStart(u),ve()},this.gridster.$options.resizable.delayStart),{cancelMouse:f,cancelMouseLeave:S,cancelOnBlur:$,cancelTouchMove:H,cancelTouchEnd:ue,cancelTouchCancel:Ce}=this.zone.runOutsideAngular(()=>({cancelMouse:this.gridsterItem.renderer.listen("document","mouseup",ve),cancelMouseLeave:this.gridsterItem.renderer.listen("document","mouseleave",ve),cancelOnBlur:this.gridsterItem.renderer.listen("window","blur",ve),cancelTouchMove:this.gridsterItem.renderer.listen("document","touchmove",fe),cancelTouchEnd:this.gridsterItem.renderer.listen("document","touchend",ve),cancelTouchCancel:this.gridsterItem.renderer.listen("document","touchcancel",ve)}));function fe(Le){q.checkTouchEvent(Le),(Math.abs(Le.clientX-u.clientX)>9||Math.abs(Le.clientY-u.clientY)>9)&&ve()}function ve(){clearTimeout(_),$(),f(),S(),H(),ue(),Ce()}}setItemTop(u){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,u)}setItemLeft(u){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,u,this.top)}setItemHeight(u){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",u+"px")}setItemWidth(u){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",u+"px")}}let $t=(()=>{class K{get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}constructor(_,f,S,$){this.renderer=S,this.zone=$,this.itemInit=new a.vpe,this.itemChange=new a.vpe,this.itemResize=new a.vpe,this.el=_.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=f,this.drag=new Pt(this,f,this.zone),this.resize=new Dt(this,f,this.zone)}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(_){_.item&&(this.updateOptions(),this.init||this.gridster.calculateLayout$.next()),_.item&&_.item.previousValue&&this.setSize()}updateOptions(){this.$item=q.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0,resizableHandles:{s:void 0,e:void 0,n:void 0,w:void 0,se:void 0,ne:void 0,sw:void 0,nw:void 0}})}ngOnDestroy(){this.gridster.removeItem(this),this.drag.destroy(),this.resize.destroy(),this.gridster=this.drag=this.resize=null}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){const f=this.$item.x*this.gridster.curColWidth,S=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,$=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=this.$item.y*this.gridster.curRowHeight,this.left=f,!this.init&&S>0&&$>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(S!==this.width||$!==this.height)&&(this.width=S,this.height=$,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(_,f){_.rows===f.rows&&_.cols===f.cols&&_.x===f.x&&_.y===f.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=f.x||0,this.$item.y=f.y||0,this.$item.cols=f.cols||1,this.$item.rows=f.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayout$.next(),this.itemChanged()))}canBeDragged(){const _=this.gridster.$options.draggable.enabled;return!this.gridster.mobile&&_&&(void 0===this.$item.dragEnabled?_:this.$item.dragEnabled)}canBeResized(){const _=this.gridster.$options.resizable.enabled;return!this.gridster.mobile&&_&&(void 0===this.$item.resizeEnabled?_:this.$item.resizeEnabled)}getResizableHandles(){const _=this.gridster.$options.resizable.handles,f=this.$item.resizableHandles;return void 0===f?_:{..._,...f}}bringToFront(_){if(_&&_<=0)return;const f=this.getLayerIndex(),S=this.gridster.$options.maxLayerIndex;if(f<S){const $=_?f+_:S;this.item.layerIndex=this.$item.layerIndex=$>S?S:$}}sendToBack(_){if(_&&_<=0)return;const f=this.getLayerIndex();if(f>0){const S=_?f-_:0;this.item.layerIndex=this.$item.layerIndex=S<0?0:S}}getLayerIndex(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}}return K.\u0275fac=function(_){return new(_||K)(a.Y36(a.SBq),a.Y36(ne),a.Y36(a.Qsj),a.Y36(a.R0b))},K.\u0275cmp=a.Xpm({type:K,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(_,f){2&_&&a.Udp("z-index",f.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},standalone:!0,features:[a.TTD,a.jDz],ngContentSelectors:v,decls:9,vars:8,consts:[["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(_,f){1&_&&(a.F$t(),a.Hsn(0),a.YNc(1,h,1,0,"div",0),a.YNc(2,w,1,0,"div",1),a.YNc(3,M,1,0,"div",2),a.YNc(4,F,1,0,"div",3),a.YNc(5,L,1,0,"div",4),a.YNc(6,G,1,0,"div",5),a.YNc(7,y,1,0,"div",6),a.YNc(8,z,1,0,"div",7)),2&_&&(a.xp6(1),a.Q6J("ngIf",(null==f.resize.resizableHandles?null:f.resize.resizableHandles.s)&&f.resize.resizeEnabled),a.xp6(1),a.Q6J("ngIf",(null==f.resize.resizableHandles?null:f.resize.resizableHandles.e)&&f.resize.resizeEnabled),a.xp6(1),a.Q6J("ngIf",(null==f.resize.resizableHandles?null:f.resize.resizableHandles.n)&&f.resize.resizeEnabled),a.xp6(1),a.Q6J("ngIf",(null==f.resize.resizableHandles?null:f.resize.resizableHandles.w)&&f.resize.resizeEnabled),a.xp6(1),a.Q6J("ngIf",(null==f.resize.resizableHandles?null:f.resize.resizableHandles.se)&&f.resize.resizeEnabled),a.xp6(1),a.Q6J("ngIf",(null==f.resize.resizableHandles?null:f.resize.resizableHandles.ne)&&f.resize.resizeEnabled),a.xp6(1),a.Q6J("ngIf",(null==f.resize.resizableHandles?null:f.resize.resizableHandles.sw)&&f.resize.resizeEnabled),a.xp6(1),a.Q6J("ngIf",(null==f.resize.resizableHandles?null:f.resize.resizableHandles.nw)&&f.resize.resizeEnabled))},dependencies:[d.O5],styles:["gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:white;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}\n"],encapsulation:2}),K})(),Me=(()=>{class K{}return K.\u0275fac=function(_){return new(_||K)},K.\u0275mod=a.oAB({type:K}),K.\u0275inj=a.cJS({imports:[ne,$t]}),K})()}}]);