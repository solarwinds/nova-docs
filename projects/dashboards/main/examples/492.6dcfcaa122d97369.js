"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[492],{61492:(C,T,l)=>{l.r(T),l.d(T,{default:()=>pe});var f=l(75883),c=l(72536),p=l(5357),I=l(88173),e=l(94650),w=l(9120),Z=l.n(w),y=l(61135),S=l(83905),x=l(50457),b=l(18505),_=l(54004),R=l(36895),D=l(18177),O=l(84710),W=function(a,s,t,n){return new(t||(t=Promise))(function(i,r){function d(u){try{h(n.next(u))}catch(g){r(g)}}function m(u){try{h(n.throw(u))}catch(g){r(g)}}function h(u){u.done?i(u.value):function o(i){return i instanceof t?i:new t(function(r){r(i)})}(u.value).then(d,m)}h((n=n.apply(a,s||[])).next())})};function P(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.reInitializeDashboard())}),e._uU(1," Restore Widget "),e.qZA()}}function B(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"nui-dashboard",7),e.NdJ("dashboardChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.dashboard=o)})("gridsterConfigChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.gridsterConfig=o)}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("dashboard",t.dashboard)("editMode",t.editMode)("gridsterConfig",t.gridsterConfig)}}let v=(()=>{class a extends c.LvN{constructor(){super(...arguments),this.cache=[],this.busy=new y.X(!1),this.dataFields=[{id:(0,c.$0I)("id"),label:"No",dataType:"number",sortable:!0},{id:(0,c.$0I)("name"),label:"Name",dataType:"string",sortable:!0},{id:(0,c.$0I)("tagline"),label:"Tagline",dataType:"string",sortable:!0},{id:(0,c.$0I)("first_brewed"),label:"First Brewed",dataType:"string",sortable:!0},{id:(0,c.$0I)("description"),label:"Description",dataType:"string",sortable:!1},{id:(0,c.$0I)("brewers_tips"),label:"Brewer's Tips",dataType:"string",sortable:!1}]}getFilteredData(t){var n,o,i,r,d,m;return W(this,void 0,void 0,function*(){const h=null!==(i=null===(o=null===(n=t.virtualScroll)||void 0===n?void 0:n.value)||void 0===o?void 0:o.start)&&void 0!==i?i:0,u=null!==(m=null===(d=null===(r=t.virtualScroll)||void 0===r?void 0:r.value)||void 0===d?void 0:d.end)&&void 0!==m?m:0;return 0===h&&(this.cache=[]),(0,S.z)((0,x.D)(this.fetch(h,u)).pipe((0,b.b)(g=>{g&&(this.cache=this.sortData(this.cache.concat(g.brewInfo),t),this.dataSubject.next(this.cache))}),(0,_.U)(()=>({repeat:{itemsSource:this.cache},dataFields:this.dataFields}))))})}fetch(t,n){return W(this,void 0,void 0,function*(){const o=n-t,i=n/o||0,r=yield(yield fetch(`https://api.punkapi.com/v2/beers/?page=${i}&per_page=${o}`)).json();if(console.log("\u{1f4d8} table-widget-interactive-example.component: 85# -> response:",r),Array.isArray(r))return{brewInfo:r.map(d=>({id:d.id,name:d.name,tagline:d.tagline,first_brewed:d.first_brewed,description:d.description,brewers_tips:d.brewers_tips})),total:r.length}})}sortData(t,n){var o,i,r,d;return Z()(t,null===(i=null===(o=n.sorter)||void 0===o?void 0:o.value)||void 0===i?void 0:i.sortBy,null===(d=null===(r=n.sorter)||void 0===r?void 0:r.value)||void 0===d?void 0:d.direction)}}return a.providerId="MockBeerDataSource",a})(),z=(()=>{class a{constructor(t,n,o){this.widgetTypesService=t,this.providerRegistry=n,this.changeDetectorRef=o,this.gridsterConfig={},this.editMode=!1}ngOnInit(){const t=this.widgetTypesService.getWidgetType("table",1);this.widgetTypesService.setNode(t,"configurator",p.ACc.DataSourceProviders,[v.providerId]),this.providerRegistry.setProviders({[v.providerId]:{provide:p.Fk3,useClass:v,deps:[]}}),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){const t=$,n={[t.id]:this.widgetTypesService.mergeWithWidgetType(t)};this.dashboard={positions:{[t.id]:{cols:12,rows:6,y:0,x:0}},widgets:n}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.xTe),e.Y36(p.CNH),e.Y36(e.sBO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["table-widget-interactive-example"]],decls:6,vars:3,consts:function(){let s;return s=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"value","valueChange"],s,["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"nui-switch",1),e.NdJ("valueChange",function(i){return n.editMode=i}),e.SDv(2,2),e.qZA(),e.YNc(3,P,2,0,"button",3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,B,1,3,"nui-dashboard",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("value",n.editMode),e.xp6(2),e.Q6J("ngIf",!(null!=n.dashboard&&n.dashboard.widgets.tableWidgetId)),e.xp6(2),e.Q6J("ngIf",n.dashboard))},dependencies:[c.r0F,R.O5,c.qUD,D.M,O.t],styles:[".dashboard[_ngcontent-%COMP%]{height:400px}"]}),a})();const H=[{id:"column1",label:$localize`Beer Name`,isActive:!0,width:185,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"name"}}}},{id:"column2",label:$localize`Tagline`,isActive:!0,width:250,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"tagline"}}}},{id:"column3",label:$localize`First Brewed`,isActive:!0,width:100,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"first_brewed"}}}},{id:"column4",label:$localize`Description`,isActive:!0,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"description"}}}}],$={id:"tableWidgetId",type:"table",pizzagna:{configuration:{[p.XMI]:{providers:{[p.Muk.InteractionHandler]:{providerId:p.DJm,properties:{url:"${'https://untappd.com/search?q='+data.name}",newWindow:!0}}}},header:{properties:{title:"Stupendous Suds",subtitle:"Try These Brilliant Brews"}},table:{providers:{[p.Muk.DataSource]:{providerId:v.providerId}},properties:{configuration:{interactive:!0,columns:H,sortable:!0,sorterConfiguration:{descendantSorting:!1,sortBy:""},hasVirtualScroll:!0}}}}}};var F=function(a,s,t,n){return new(t||(t=Promise))(function(i,r){function d(u){try{h(n.next(u))}catch(g){r(g)}}function m(u){try{h(n.throw(u))}catch(g){r(g)}}function h(u){u.done?i(u.value):function o(i){return i instanceof t?i:new t(function(r){r(i)})}(u.value).then(d,m)}h((n=n.apply(a,s||[])).next())})};function q(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.reInitializeDashboard())}),e._uU(1," Restore Widget "),e.qZA()}}function V(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"nui-dashboard",7),e.NdJ("dashboardChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.dashboard=o)})("gridsterConfigChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.gridsterConfig=o)}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("dashboard",t.dashboard)("editMode",t.editMode)("gridsterConfig",t.gridsterConfig)}}let E=(()=>{class a extends c.LvN{constructor(){super(...arguments),this.cache=[],this.busy=new y.X(!1),this.dataFields=[{id:(0,c.$0I)("id"),label:"No",dataType:"number",sortable:!0},{id:(0,c.$0I)("name"),label:"Name",dataType:"string",sortable:!0},{id:(0,c.$0I)("tagline"),label:"Tagline",dataType:"string",sortable:!0},{id:(0,c.$0I)("first_brewed"),label:"First Brewed",dataType:"string",sortable:!0},{id:(0,c.$0I)("description"),label:"Description",dataType:"string",sortable:!1},{id:(0,c.$0I)("brewers_tips"),label:"Brewer's Tips",dataType:"string",sortable:!1}]}getFilteredData(t){var n,o,i,r,d,m;return F(this,void 0,void 0,function*(){const h=null!==(i=null===(o=null===(n=t.virtualScroll)||void 0===n?void 0:n.value)||void 0===o?void 0:o.start)&&void 0!==i?i:0,u=null!==(m=null===(d=null===(r=t.virtualScroll)||void 0===r?void 0:r.value)||void 0===d?void 0:d.end)&&void 0!==m?m:0;return 0===h&&(this.cache=[]),(0,S.z)((0,x.D)(this.fetch(h,u)).pipe((0,b.b)(g=>{g&&(this.cache=this.sortData(this.cache.concat(g.brewInfo),t),this.dataSubject.next(this.cache))}),(0,_.U)(()=>({repeat:{itemsSource:this.cache},dataFields:this.dataFields}))))})}fetch(t,n){return F(this,void 0,void 0,function*(){const o=n-t,i=n/o||0,r=yield(yield fetch(`https://api.punkapi.com/v2/beers/?page=${i}&per_page=${o}`)).json();if(Array.isArray(r))return{brewInfo:r.map(d=>({id:d.id,name:d.name,tagline:d.tagline,first_brewed:d.first_brewed,description:d.description,brewers_tips:d.brewers_tips})),total:r.length}})}sortData(t,n){var o,i,r,d;return Z()(t,null===(i=null===(o=n.sorter)||void 0===o?void 0:o.value)||void 0===i?void 0:i.sortBy,null===(d=null===(r=n.sorter)||void 0===r?void 0:r.value)||void 0===d?void 0:d.direction)}}return a.providerId="BeerDataSource",a})(),L=(()=>{class a{constructor(t,n,o){this.widgetTypesService=t,this.providerRegistry=n,this.changeDetectorRef=o,this.gridsterConfig={},this.editMode=!1}ngOnInit(){const t=this.widgetTypesService.getWidgetType("table",1);this.widgetTypesService.setNode(t,"configurator",p.ACc.DataSourceProviders,[E.providerId]),this.providerRegistry.setProviders({[E.providerId]:{provide:p.Fk3,useClass:E,deps:[]}}),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){const t=X,n={[t.id]:this.widgetTypesService.mergeWithWidgetType(t)};this.dashboard={positions:{[t.id]:{cols:12,rows:6,y:0,x:0}},widgets:n}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.xTe),e.Y36(p.CNH),e.Y36(e.sBO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["table-widget-example"]],decls:6,vars:3,consts:function(){let s;return s=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"value","valueChange"],s,["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"nui-switch",1),e.NdJ("valueChange",function(i){return n.editMode=i}),e.SDv(2,2),e.qZA(),e.YNc(3,q,2,0,"button",3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,V,1,3,"nui-dashboard",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("value",n.editMode),e.xp6(2),e.Q6J("ngIf",!(null!=n.dashboard&&n.dashboard.widgets.tableWidgetId)),e.xp6(2),e.Q6J("ngIf",n.dashboard))},dependencies:[c.r0F,R.O5,c.qUD,D.M,O.t],styles:[".dashboard[_ngcontent-%COMP%]{height:400px}"]}),a})();const Y=[{id:"column1",label:$localize`Beer Name`,isActive:!0,width:185,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"name"}}}},{id:"column2",label:$localize`Tagline`,isActive:!0,width:250,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"tagline"}}}},{id:"column3",label:$localize`First Brewed`,isActive:!0,width:100,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"first_brewed"}}}},{id:"column4",label:$localize`Description`,isActive:!0,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"description"}}}}],X={id:"tableWidgetId",type:"table",pizzagna:{configuration:{header:{properties:{title:"Stupendous Suds",subtitle:"Try These Brilliant Brews"}},table:{providers:{[p.Muk.DataSource]:{providerId:E.providerId}},properties:{configuration:{columns:Y,sortable:!0,sorterConfiguration:{descendantSorting:!1,sortBy:""},hasVirtualScroll:!0}}}}}};let K=(()=>{class a{constructor(){this.widgetFileText=l(10682).Z,this.configuratorFileText=l(63112).Z}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["nui-table-docs"]],decls:93,vars:3,consts:[["type","info",3,"allowDismiss"],["filenamePrefix","table-widget-example","exampleTitle","Table widget"],["href","../injectables/UrlInteractionHandler.html","target","_blank"],["filenamePrefix","table-widget-interactive-example","exampleTitle","Table Interactive widget"],["target","parent","href","../additional-documentation/widget-types/table/table-with-search.html"],["href","../miscellaneous/enumerations.html#WellKnownDataSourceFeatures"],["language","typescript"]],template:function(t,n){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Table Widget"),e.qZA(),e.TgZ(2,"p"),e._uU(3," A Table widget displays data in tabular format, i.e. in rows and columns. Each row in the table represents an item, and each column shows a selected attribute of that item. You can scroll and sort this data using the controls on the widget.\n"),e.qZA(),e.TgZ(4,"h2"),e._uU(5,"Column Formatters"),e.qZA(),e.TgZ(6,"p"),e._uU(7," To present table values in a way that makes the most sense for users, it's necessary to specify an appropriate way to format the values of each column. With that in mind, a column formatter component can be used to format given data in a specific way. As such, the default formatter will format any given value as a simple string. But, data often need to be transformed beyond their raw value in some way to correctly display data types such as numbers, times, dates, pictures, links, etc. In those cases, a formatter specialized in formatting the particular data type must be used.\n"),e.qZA(),e.TgZ(8,"nui-message",0),e._uU(9," For details on how to instantiate a table widget, take a look at the inline comments under the source expander of the following example.\n"),e.qZA(),e.TgZ(10,"nui-example-wrapper",1),e._UZ(11,"table-widget-example"),e.qZA(),e.TgZ(12,"h3"),e._uU(13,"Interaction Handling"),e.qZA(),e.TgZ(14,"p"),e._uU(15," The example below has the "),e.TgZ(16,"code")(17,"a",2),e._uU(18,"UrlInteractionHandler"),e.qZA()(),e._uU(19," configured to handle the interactions that occur on the table's columns. Look at the inline comments in the source expander to see how it is configured.\n"),e.qZA(),e.TgZ(20,"nui-example-wrapper",3),e._UZ(21,"table-widget-interactive-example"),e.qZA(),e.TgZ(22,"h2"),e._uU(23,"Data source features"),e.qZA(),e.TgZ(24,"p"),e._uU(25," There are table specific data source features that are useful only when given data source is used in the context of a table widget. These are:\n"),e.qZA(),e.TgZ(26,"ul")(27,"li")(28,"b"),e._uU(29,"Search"),e.qZA(),e._uU(30," - "),e.TgZ(31,"a",4),e._uU(32,"described on a dedicated page"),e.qZA()(),e.TgZ(33,"li")(34,"b"),e._uU(35,"Disabling automatic column generation"),e.qZA(),e._uU(36," - turning on the feature called "),e.TgZ(37,"a",5)(38,"code"),e._uU(39,"DisableTableColumnGeneration"),e.qZA()(),e._uU(40," disables automatic column generation in the table widget editor. This was introduced to maintain backward compatibility with previous implementations of the table widget. "),e.qZA()(),e.TgZ(41,"h2"),e._uU(42,"Widget Schema"),e.qZA(),e.TgZ(43,"p"),e._uU(44," The code listings below are the source files for the Table widget definition with inline comments describing the parts that compose the standard Table widget type. It includes the widget's definition as well as its corresponding configurator form for defining how to configure (create/edit) the widget.\n"),e.qZA(),e.TgZ(45,"h2"),e._uU(46,"Widget"),e.qZA(),e.TgZ(47,"p"),e._uU(48," This part shows the actual widget definition. It includes, among other things, the components and providers that compose the widget itself.\n"),e.qZA(),e.TgZ(49,"nui-example-code",6),e._uU(50),e.qZA(),e.TgZ(51,"h2"),e._uU(52,"Configurator"),e.qZA(),e.TgZ(53,"p"),e._uU(54," This part shows the form that's used for configuring (creating/editing) the widget.\n"),e.qZA(),e.TgZ(55,"nui-example-code",6),e._uU(56),e.qZA(),e.TgZ(57,"h2"),e._uU(58,"Additional Features"),e.qZA(),e.TgZ(59,"ul")(60,"li")(61,"p")(62,"strong"),e._uU(63,"Scroll Activation Delay:"),e.qZA(),e._uU(64," By default, the table widget delays scroll activation for a short period of time after "),e.TgZ(65,"code"),e._uU(66,"mouseenter"),e.qZA(),e._uU(67," to mitigate accidental scrolling of the table while scrolling through the dashboard. To disable this feature, follow these steps: "),e.qZA(),e.TgZ(68,"ol")(69,"li"),e._uU(70," Go to your initialization of the dashboard and grab the reference to the table widget type: "),e._UZ(71,"br"),e.TgZ(72,"code"),e._uU(73,' const table = this.widgetTypesService.getWidgetType("table"); '),e.qZA()(),e.TgZ(74,"li"),e._uU(75," Change this property value to false: "),e._UZ(76,"br"),e.TgZ(77,"code"),e._uU(78," table.widget.structure.table.properties.delayedMousePresenceDetectionEnabled = false; "),e.qZA()()(),e._UZ(79,"br"),e.TgZ(80,"p"),e._uU(81,"Additionally, you can override the default delay of 500 ms:"),e.qZA(),e.TgZ(82,"ol")(83,"li"),e._uU(84," Grab the reference to the table widget type in your dashboard initialization similar to above: "),e._UZ(85,"br"),e.TgZ(86,"code"),e._uU(87,' const table = this.widgetTypesService.getWidgetType("table"); '),e.qZA()(),e.TgZ(88,"li"),e._uU(89," Change this property to the desired value in ms: "),e._UZ(90,"br"),e.TgZ(91,"code"),e._uU(92," table.widget.structure.table.properties.configuration.scrollActivationDelayMs = 750 "),e.qZA()()()()()),2&t&&(e.xp6(8),e.Q6J("allowDismiss",!1),e.xp6(42),e.Oqu(n.widgetFileText),e.xp6(6),e.Oqu(n.configuratorFileText))},dependencies:[c.hD2,c.i10,c.qqZ,z,L],encapsulation:2}),a})();var U=l(80529),J=l(64509),Q=l.n(J),j=l(33816),ee=l.n(j),te=l(77579),M=l(39646),ne=l(63900),oe=l(91005),ae=l(70262),ie=l(28746),re=l(7484),N=function(a,s,t,n){return new(t||(t=Promise))(function(i,r){function d(u){try{h(n.next(u))}catch(g){r(g)}}function m(u){try{h(n.throw(u))}catch(g){r(g)}}function h(u){u.done?i(u.value):function o(i){return i instanceof t?i:new t(function(r){r(i)})}(u.value).then(d,m)}h((n=n.apply(a,s||[])).next())})};function se(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.reInitializeDashboard())}),e._uU(1," Restore Widget "),e.qZA()}}function de(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"nui-dashboard",7),e.NdJ("dashboardChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.dashboard=o)})("gridsterConfigChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.gridsterConfig=o)}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("dashboard",t.dashboard)("editMode",t.editMode)("gridsterConfig",t.gridsterConfig)}}let A=(()=>{class a extends c.LvN{constructor(t,n){super(),this.logger=t,this.http=n,this.searchableColumn="title",this.page=1,this.busy=new y.X(!1),this.cache=Array.from({length:0}),this.supportedFeatures={search:{enabled:!0},pagination:{enabled:!0}},this.columnToQueryParamMap={title:"intitle",authors:"inauthor"},this.applyFilters$=new te.x,this.dataFields=[{id:"title",label:$localize`Title`,dataType:"string",sortable:!1},{id:"authors",label:$localize`Authors`,dataType:"string",sortable:!1}],this.features=new c.AM5(this.supportedFeatures),this.applyFilters$.pipe((0,ne.w)(o=>this.getData(o))).subscribe(o=>N(this,void 0,void 0,function*(){this.outputsSubject.next(yield this.getFilteredData(o))}))}getFilteredData(t){return N(this,void 0,void 0,function*(){return(0,S.z)((0,M.of)(t).pipe((0,b.b)(n=>{this.cache=this.cache.concat(n.books)}),(0,_.U)(n=>({result:{repeat:{itemsSource:this.cache},paginator:{total:n.totalItems},dataFields:this.dataFields}}))))})}getData(t){var n;return this.isNewSearchTerm(t.search)&&0===(null===(n=t.virtualScroll)||void 0===n?void 0:n.value.start)&&(this.cache=[]),this.http.get(this.getComposedUrl(t)).pipe((0,b.b)(()=>this.busy.next(!0)),(0,oe.g)(300),(0,_.U)(o=>{var i;return{books:(null===(i=o.items)||void 0===i?void 0:i.map(r=>{var d;return{title:r.volumeInfo.title,authors:(null===(d=r.volumeInfo.authors)||void 0===d?void 0:d.join(", "))||""}}))||[],totalItems:o.totalItems}}),(0,ae.K)(o=>(this.logger.error(o),(0,M.of)({books:[],totalItems:0}))),(0,ie.x)(()=>{this.busy.next(!1),this.previousFilters=t}))}getComposedUrl(t){var n,o;const r="maxResults="+(((null===(n=t.virtualScroll)||void 0===n?void 0:n.value.end)||0)-((null===(o=t.virtualScroll)||void 0===o?void 0:o.value.start)||0));return`${re.f7}?q=${t.search?`${this.columnToQueryParamMap[this.searchableColumn]}:${t.search.value}`:"_"}&${r}&${t.virtualScroll?`startIndex=${t.virtualScroll.value.start}`:""}&filter=full`}isNewSearchTerm(t){var n,o;return!ee()(t?.value)&&!Q()(t?.value,null===(o=null===(n=this.previousFilters)||void 0===n?void 0:n.search)||void 0===o?void 0:o.value)}applyFilters(){return N(this,void 0,void 0,function*(){this.applyFilters$.next(this.getFilters())})}}return a.providerId="AcmeTableGBooksDataSource",a.mockError=!1,a.\u0275fac=function(t){return new(t||a)(e.LFG(c.mQy),e.LFG(U.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac}),a})(),le=(()=>{class a{constructor(t,n,o){this.widgetTypesService=t,this.providerRegistry=n,this.changeDetectorRef=o,this.gridsterConfig={},this.editMode=!1}ngOnInit(){const t=this.widgetTypesService.getWidgetType("table",1);this.widgetTypesService.setNode(t,"configurator",p.ACc.DataSourceProviders,[A.providerId]),this.providerRegistry.setProviders({[A.providerId]:{provide:p.Fk3,useClass:A,deps:[c.mQy,U.eN]}}),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){const t=ce,n={[t.id]:this.widgetTypesService.mergeWithWidgetType(t)};this.dashboard={positions:{[t.id]:{cols:12,rows:6,y:0,x:0}},widgets:n}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.xTe),e.Y36(p.CNH),e.Y36(e.sBO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["table-widget-search-example"]],decls:6,vars:3,consts:function(){let s;return s=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"value","valueChange"],s,["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"nui-switch",1),e.NdJ("valueChange",function(i){return n.editMode=i}),e.SDv(2,2),e.qZA(),e.YNc(3,se,2,0,"button",3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,de,1,3,"nui-dashboard",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("value",n.editMode),e.xp6(2),e.Q6J("ngIf",!(null!=n.dashboard&&n.dashboard.widgets.tableWidgetId)),e.xp6(2),e.Q6J("ngIf",n.dashboard))},dependencies:[c.r0F,R.O5,c.qUD,D.M,O.t],styles:[".dashboard[_ngcontent-%COMP%]{height:400px}"]}),a})();const ce={id:"tableWidgetId",type:"table",pizzagna:{configuration:{header:{properties:{title:"Google Books"}},table:{providers:{[p.Muk.DataSource]:{providerId:A.providerId}},properties:{configuration:{columns:[{id:"column1",label:$localize`Title`,isActive:!0,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"title"}}}},{id:"column2",label:$localize`Author`,isActive:!0,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"authors"}}}}],sortable:!1,searchConfiguration:{enabled:!0},hasVirtualScroll:!0}}}}}},ue=[{path:"",component:K,data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}},{path:"example",component:L,data:{srlc:{hideIndicator:!0}}},{path:"table-search",component:(()=>{class a{constructor(){this.featuredDeclaredText="\n        private supportedFeatures: IDataSourceFeatures = {\n        search: { enabled: true },\n        pagination: { enabled: true },\n    };",this.featuresUsedText="\n        this.features = new DataSourceFeatures(this.supportedFeatures);\n    ",this.tableConfigurationText='\n        "table": {\n            ...\n            properties: {\n                configuration: {\n                    // define search configuration here\n                    searchConfiguration: {\n                        enabled: true,\n                        // following optional properties below can be configured as well\n                        // searchTerm: "search criteria here",\n                        // searchDebounce: 300,\n                    },\n                } as ITableWidgetConfig,\n            },\n        },\n    '}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["nui-table-search-docs"]],decls:47,vars:3,consts:[["href","../additional-documentation/anatomy/data-sources.html","target","_blank"],["href","../additional-documentation/widget-types/table.html","target","_blank"],["filenamePrefix","table-widget-search.example.component","exampleTitle","Table widget with Search"],["href","https://ux.solarwinds.io/nova/docs/nova-bits/latest/sdk/api-docs-ng2/interfaces/IDataSource.html","target","_blank"],["language","typescript"],["href","https://ux.solarwinds.io/nova/docs/nova-bits/latest/sdk/api-docs-ng2/classes/DataSourceFeatures.html#source","target","_blank"]],template:function(t,n){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Table Widget with Search Functionality"),e.qZA(),e.TgZ(2,"p"),e._uU(3," Table Widget can have search functionality. This page contains information only about setting up the search, so before proceeding get familiar with the following:\n"),e.qZA(),e.TgZ(4,"ul")(5,"li")(6,"a",0)(7,"code"),e._uU(8,"Data Sources"),e.qZA()(),e._uU(9," - for information about Data Sources and their Features. "),e.qZA(),e.TgZ(10,"li")(11,"a",1)(12,"code"),e._uU(13,"Table Widget"),e.qZA()(),e._uU(14," - for configuring a table widget itself. "),e.qZA()(),e.TgZ(15,"nui-example-wrapper",2),e._UZ(16,"table-widget-search-example"),e.qZA(),e.TgZ(17,"h2"),e._uU(18,"Configuring the Data Source"),e.qZA(),e.TgZ(19,"p"),e._uU(20," To use search within the Data Source you need to use data source Features. Data Source should "),e.TgZ(21,"em"),e._uU(22,"implement"),e.qZA(),e.TgZ(23,"a",3)(24,"code"),e._uU(25,"IDataSource"),e.qZA()(),e._uU(26," interface and have "),e.TgZ(27,"em"),e._uU(28,"features"),e.qZA(),e._uU(29," property set.\n"),e.qZA(),e.TgZ(30,"p"),e._uU(31,"Default way to do that is to declare the features:"),e.qZA(),e.TgZ(32,"nui-example-code",4),e._uU(33),e.qZA(),e.TgZ(34,"p"),e._uU(35," And then pass it to the "),e.TgZ(36,"a",5)(37,"code"),e._uU(38,"DataSourceFeatures"),e.qZA()()(),e.TgZ(39,"nui-example-code",4),e._uU(40),e.qZA(),e.TgZ(41,"h2"),e._uU(42,"Configuring the Widget"),e.qZA(),e.TgZ(43,"p"),e._uU(44," To configure the widget you have to enable search in the widget configuration:\n"),e.qZA(),e.TgZ(45,"nui-example-code",4),e._uU(46),e.qZA()),2&t&&(e.xp6(33),e.hij(" ",n.featuredDeclaredText,"\n"),e.xp6(7),e.hij(" ",n.featuresUsedText,"\n"),e.xp6(6),e.hij(" ",n.tableConfigurationText,"\n"))},dependencies:[c.hD2,c.i10,le],encapsulation:2}),a})(),data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}}];let pe=(()=>{class a{constructor(t){t.addItems(I.X)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(p.Car))},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[f.Bz.forChild(ue),c.Az_,c.vvu,c.gkT,c.cJ5,p.Pi]}),a})()},7484:(C,T,l)=>{l.d(T,{TZ:()=>c,Wg:()=>p,f7:()=>I,fL:()=>e,rV:()=>w,xb:()=>f});const f="https://cors-anywhere.herokuapp.com/",c="https://randomuser.me/",p="https://api.punkapi.com/v2/beers",I="https://www.googleapis.com/books/v1/volumes",e="api/1.3",w=`Error responding from server. Please visit ${c} and ${f} to see if they're available`},63112:(C,T,l)=>{l.d(T,{Z:()=>f});const f='// \xa9 2022 SolarWinds Worldwide, LLC. All rights reserved.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n//  of this software and associated documentation files (the "Software"), to\n//  deal in the Software without restriction, including without limitation the\n//  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n//  sell copies of the Software, and to permit persons to whom the Software is\n//  furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n//  all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n//  THE SOFTWARE.\n\n/* eslint-disable max-len */\nimport { FormStackComponent } from "../../configurator/components/form-stack/form-stack.component";\nimport { WidgetConfiguratorSectionComponent } from "../../configurator/components/widget-configurator-section/widget-configurator-section.component";\nimport { DataSourceConfigurationComponent } from "../../configurator/components/widgets/configurator-items/data-source-configuration/data-source-configuration.component";\nimport { TableDataSourceErrorComponent } from "../../configurator/components/widgets/configurator-items/data-source-error/table/table-data-source-error.component";\nimport { TitleAndDescriptionConfigurationComponent } from "../../configurator/components/widgets/configurator-items/title-and-description-configuration/title-and-description-configuration.component";\nimport { TableColumnsConfigurationV2Component } from "../../configurator/components/widgets/table/columns-editor-v2/table-columns-configuration-v2.component";\nimport { TableFiltersEditorComponent } from "../../configurator/components/widgets/table/filters-editor/table-filters-editor.component";\nimport {\n    DEFAULT_PIZZAGNA_ROOT,\n    NOVA_CONFIGURATOR_DATA_SOURCE_MANAGER,\n    NOVA_GENERIC_CONVERTER,\n    NOVA_TABLE_COLUMNS_CONVERTER,\n    NOVA_TABLE_FILTERS_CONVERTER,\n    NOVA_TABLE_FORMATTERS_REGISTRY,\n    NOVA_TITLE_AND_DESCRIPTION_CONVERTER,\n} from "../../services/types";\nimport { IPizzagna, PizzagnaLayer, WellKnownProviders } from "../../types";\nimport { REFRESHER_CONFIGURATOR } from "../common/configurator/components";\nimport { DEFAULT_TABLE_FORMATTERS } from "./default-table-formatters";\n\n/* eslint-enable max-len */\n\nexport const tableConfigurator: IPizzagna = {\n    [PizzagnaLayer.Structure]: {\n        [DEFAULT_PIZZAGNA_ROOT]: {\n            // base layout of the configurator - all form components referenced herein will be stacked in a column\n            id: DEFAULT_PIZZAGNA_ROOT,\n            componentType: FormStackComponent.lateLoadKey,\n            properties: {\n                elementClass: "flex-grow-1 overflow-auto nui-scroll-shadows",\n                // references to other components laid out in this form\n                nodes: ["presentation", "dataAndCalculations", "columns"],\n            },\n            providers: {\n                [WellKnownProviders.FormattersRegistry]: {\n                    providerId: NOVA_TABLE_FORMATTERS_REGISTRY,\n                },\n                [WellKnownProviders.DataSourceManager]: {\n                    providerId: NOVA_CONFIGURATOR_DATA_SOURCE_MANAGER,\n                },\n            },\n        },\n        // /presentation\n        presentation: {\n            id: "presentation",\n            componentType: WidgetConfiguratorSectionComponent.lateLoadKey,\n            properties: {\n                headerText: $localize`Presentation`,\n                // references to other components laid out in this form\n                nodes: ["titleAndDescription", "filters"],\n            },\n        },\n        // /presentation/titleAndDescription\n        titleAndDescription: {\n            id: "titleAndDescription",\n            componentType:\n                TitleAndDescriptionConfigurationComponent.lateLoadKey,\n            providers: {\n                [WellKnownProviders.Converter]: {\n                    providerId: NOVA_TITLE_AND_DESCRIPTION_CONVERTER,\n                },\n            },\n        },\n        // /presentation/filters - configuration of built-in filters like search, sorting and pagination\n        filters: {\n            id: "filters",\n            componentType: TableFiltersEditorComponent.lateLoadKey,\n            providers: {\n                [WellKnownProviders.Converter]: {\n                    providerId: NOVA_TABLE_FILTERS_CONVERTER,\n                },\n            },\n        },\n        refresher: REFRESHER_CONFIGURATOR,\n        // /dataAndCalculations\n        dataAndCalculations: {\n            id: "dataAndCalculations",\n            componentType: WidgetConfiguratorSectionComponent.lateLoadKey,\n            properties: {\n                headerText: $localize`Data and Calculations`,\n                nodes: ["dataSource"],\n            },\n        },\n        // /dataAndCalculations/dataSource\n        dataSource: {\n            id: "dataSource",\n            componentType: DataSourceConfigurationComponent.lateLoadKey,\n            properties: {\n                dataSourceProviders: [],\n                errorComponent: TableDataSourceErrorComponent.lateLoadKey,\n            },\n            providers: {\n                [WellKnownProviders.Converter]: {\n                    providerId: NOVA_GENERIC_CONVERTER,\n                    properties: {\n                        formParts: [\n                            {\n                                previewPath: "table.providers.dataSource",\n                                // TODO: Remove \'properties\' key in v10 - NUI-5831\n                                keys: ["providerId", "properties"],\n                            },\n                            {\n                                previewPath:\n                                    "table.providers.adapter.properties.dataSource",\n                                keys: ["properties"],\n                            },\n                        ],\n                    },\n                },\n            },\n        },\n        // A very important part of this configuration form is the \'columns\' section. It manages the configuration of columns and formatters that are used\n        // to display data in this table. Every column has multiple properties associated with it like: label, width, formatter and how to map incoming data\n        // into the formatter.\n        columns: {\n            id: "columns",\n            componentType: TableColumnsConfigurationV2Component.lateLoadKey,\n            properties: {\n                // Deprecated (see TableColumnsConfigurationV2Component.template)\n                template: [\n                    {},\n                    {\n                        properties: {\n                            formatters: DEFAULT_TABLE_FORMATTERS,\n                        },\n                    },\n                ],\n            },\n            providers: {\n                [WellKnownProviders.Converter]: {\n                    // this specialized converter does all the work with building the complex forms for every column of the table and mapping the data back\n                    // to the widget configuration that builds the table component from the individual column configurations\n                    providerId: NOVA_TABLE_COLUMNS_CONVERTER,\n                },\n            },\n        },\n    },\n};\n'},10682:(C,T,l)=>{l.d(T,{Z:()=>f});const f='// \xa9 2022 SolarWinds Worldwide, LLC. All rights reserved.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n//  of this software and associated documentation files (the "Software"), to\n//  deal in the Software without restriction, including without limitation the\n//  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n//  sell copies of the Software, and to permit persons to whom the Software is\n//  furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n//  all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n//  THE SOFTWARE.\n\nimport { StackComponent } from "../../components/layouts/stack/stack.component";\nimport { TableWidgetComponent } from "../../components/table-widget/table-widget.component";\nimport { ITableWidgetConfig } from "../../components/table-widget/types";\nimport {\n    DEFAULT_PIZZAGNA_ROOT,\n    NOVA_DASHBOARD_EVENT_PROXY,\n    NOVA_TABLE_DATASOURCE_ADAPTER,\n    NOVA_VIRTUAL_VIEWPORT_MANAGER,\n    WIDGET_RESIZE,\n} from "../../services/types";\nimport { IPizzagna, PizzagnaLayer, WellKnownProviders } from "../../types";\nimport {\n    widgetBodyContentNodes,\n    WIDGET_BODY,\n    WIDGET_HEADER,\n    WIDGET_LOADING,\n} from "../common/widget/components";\nimport { refresher } from "../common/widget/providers";\n\nexport const tableWidget: IPizzagna = {\n    [PizzagnaLayer.Structure]: {\n        [DEFAULT_PIZZAGNA_ROOT]: {\n            id: DEFAULT_PIZZAGNA_ROOT,\n            // base layout of the widget - all components referenced herein will be stacked in a column\n            componentType: StackComponent.lateLoadKey,\n            providers: {\n                // When enabled, this provider emits the REFRESH event on the pizzagna event bus every X seconds\n                [WellKnownProviders.Refresher]: refresher(),\n                [WellKnownProviders.EventProxy]: {\n                    // event proxy manages the transmission of events between widget and dashboard\n                    providerId: NOVA_DASHBOARD_EVENT_PROXY,\n                    properties: {\n                        // WIDGET_RESIZE event is used to adjust the virtual scroll viewport size\n                        downstreams: [WIDGET_RESIZE.id],\n                    },\n                },\n            },\n            properties: {\n                nodes: ["header", "loading", "body"],\n            },\n        },\n        // widget header\n        header: WIDGET_HEADER,\n        // this is the loading bar below the header\n        loading: WIDGET_LOADING,\n        // widget body\n        body: {\n            ...WIDGET_BODY,\n            properties: {\n                ...WIDGET_BODY.properties,\n                elementClass: "overflow-auto",\n            },\n        },\n\n        // retrieving the definitions for the body content nodes. the argument corresponds to the main content node key\n        ...widgetBodyContentNodes("table"),\n\n        // this is the main component showing a table with data\n        table: {\n            id: "table",\n            componentType: TableWidgetComponent.lateLoadKey,\n            providers: {\n                // adapter invokes the data source and assigns the output to this component\n                [WellKnownProviders.Adapter]: {\n                    providerId: NOVA_TABLE_DATASOURCE_ADAPTER,\n                    properties: {\n                        componentId: "table",\n                        dataPath: "widgetData",\n                        // data-fields are necessary to map incoming data to configured columns\n                        dataFieldsPath: "dataFields",\n                        totalItemsPath: "totalItems",\n                    },\n                },\n                virtualViewportManager: {\n                    providerId: NOVA_VIRTUAL_VIEWPORT_MANAGER,\n                },\n            },\n            properties: {\n                elementClass: "flex-grow-1 mx-3 mb-3 mt-2",\n                delayedMousePresenceDetectionEnabled: true,\n                configuration: {\n                    columns: [],\n                    // The delay in milliseconds after table mouseenter before scrolling is activated\n                    scrollActivationDelayMs: 500,\n                    // Whether to display or not table header tooltips\n                    headerTooltipsEnabled: true, // default\n                } as unknown as ITableWidgetConfig,\n            },\n        },\n    },\n    [PizzagnaLayer.Configuration]: {\n        [DEFAULT_PIZZAGNA_ROOT]: {\n            id: DEFAULT_PIZZAGNA_ROOT,\n            providers: {\n                // default refresher configuration\n                [WellKnownProviders.Refresher]: refresher(false, 60),\n            },\n        },\n        // default header configuration\n        header: {\n            properties: {\n                title: $localize`Empty Table Widget`,\n            },\n        },\n    },\n};\n'}}]);