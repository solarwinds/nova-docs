(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[388],{92120:(oe,B,a)=>{"use strict";a.d(B,{b:()=>d});var r=a(5e3);let d=(()=>{class O{}return O.lateLoadKey="PreviewOverlayComponent",O.\u0275fac=function(S){return new(S||O)},O.\u0275cmp=r.Xpm({type:O,selectors:[["nui-preview-overlay"]],decls:2,vars:0,consts:function(){let e;return e=$localize`:␟5c3a86dc3add2a84bd6fe948cb6fe0c451fcce21␟7864955898524965693: This is a non-interactive widget preview `,[[1,"nui-text-label","content"],e]},template:function(S,R){1&S&&(r.TgZ(0,"div",0),r.SDv(1,1),r.qZA())},styles:["[_nghost-%COMP%]{opacity:0;transition-property:opacity;transition-duration:.5s;position:absolute;z-index:1060;background-color:var(--nui-color-bg-content_popover,#fff);height:100%;width:100%}[_nghost-%COMP%]:hover{opacity:.96}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:center;align-items:center;position:absolute;top:0;right:2px;bottom:2px;left:2px;cursor:not-allowed}"]}),O})()},34575:(oe,B,a)=>{"use strict";a.d(B,{M:()=>b});var r=a(5e3),d=a(33748),O=a(69754),e=a.n(O),S=a(30652),R=a(53450),N=a(25878);const C={displayGrid:d.KY.None,gridType:d.tQ.VerticalFixed,compactType:d.RU.CompactUp,margin:15,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,mobileBreakpoint:640,minCols:12,maxCols:12,minRows:12,fixedRowHeight:44,minItemArea:1,defaultItemCols:6,defaultItemRows:6,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,scrollSensitivity:10,scrollSpeed:20,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{enabled:!1,ignoreContent:!0,dragHandleClass:"nui-dashboard__widget--drag-handle"},resizable:{enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0}},swap:!1,pushItems:!0,pushResizeItems:!0,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1};var p=a(69808),v=a(16041),g=a(43046),L=a(92474);function y(A,W){if(1&A){const P=r.EpF();r.TgZ(0,"nui-widget",5),r.NdJ("widgetChange",function(h){return r.CHM(P),r.oxw(2).onWidgetChange(h)}),r.qZA()}if(2&A){const P=r.oxw().$implicit;r.Q6J("widget",P.value),r.uIk("widget-id",P.key)("widget-type",P.value.type)}}function D(A,W){if(1&A&&(r.TgZ(0,"gridster-item",3),r.YNc(1,y,1,3,"nui-widget",4),r.qZA()),2&A){const P=W.$implicit,T=r.oxw(),h=r.MAs(4);r.Q6J("item",T.dashboard.positions[P.key])("nuiGridsterItemWidgetId",P.key),r.xp6(1),r.Q6J("ngIf",T.shouldWidgetRender(P.key))("ngIfElse",h)}}function G(A,W){1&A&&(r.TgZ(0,"div",6),r._UZ(1,"nui-loading",7),r.qZA()),2&A&&(r.xp6(1),r.Q6J("active",!0))}let b=(()=>{class A{constructor(P){this.eventBus=P,this.editMode=!1,this.gridsterConfigChange=new r.vpe,this.dashboardChange=new r.vpe,this.gridsterItemsVisibilityMap={},this.orderWidgets=(T,h)=>{const x=this.dashboard.positions[T.key],U=this.dashboard.positions[h.key];return x.y-U.y||x.x-U.x},this.trackByFn=(T,h)=>h.key,this.updateWidgetPosition=(T,h)=>{const x=String(h.widgetId),U=(0,S.zdu)(this.dashboard,"positions."+x,T);this.dashboardChange.emit(U),this.eventBus.getStream(R.Xi).next({widgetId:x,payload:T})},this.emitWidgetResize=(T,h)=>{const x=h.widgetId;this.eventBus.getStream(R.pV).next({widgetId:x,payload:{widgetId:x,height:h.height,width:h.width}})}}get dashboard(){return this.dashboardBuffer||this._dashboard}set dashboard(P){this._dashboard=P,this.dashboardBuffer=null}get hostClass(){return!0}ngAfterViewInit(){setTimeout(()=>this.calculateWidgetsVisibility())}onGridsterScroll(){this.calculateWidgetsVisibility()}ngOnChanges(P){var T,h,x;if(P.gridsterConfig){if(P.gridsterConfig.isFirstChange()){const U=e()(this.gridsterConfig||{},C);this.hookEvent(U,"itemChangeCallback",this.updateWidgetPosition),this.hookEvent(U,"itemResizeCallback",this.emitWidgetResize),this.gridsterConfigChange.emit(U)}(null===(T=this.gridsterConfig)||void 0===T?void 0:T.api)&&(null===(x=(h=this.gridsterConfig.api).optionsChanged)||void 0===x||x.call(h))}if(P.editMode){if(!this.gridsterConfig.resizable)throw new Error("Gridster's resizable prop is undefined");if(this.gridsterConfig.resizable.enabled=this.editMode,!this.gridsterConfig.draggable)throw new Error("Gridster's draggable prop is undefined");this.gridsterConfig.draggable.enabled=this.editMode,this.gridsterConfigChange.emit(Object.assign({},this.gridsterConfig)),this.eventBus.getStream(R.N9).next({payload:this.editMode})}}onWidgetChange(P){!this.dashboard.widgets[P.id]||this.updateWidget(P)}updateWidget(P){var T,h,x,U,K;let q=this.dashboard;if(!this.dashboard.positions[P.id]&&(null===(T=this.gridsterConfig)||void 0===T?void 0:T.api)){const ne=null===(x=(h=this.gridsterConfig.api).getFirstPossiblePosition)||void 0===x?void 0:x.call(h,{x:0,y:0,rows:null===(U=this.gridsterConfig)||void 0===U?void 0:U.defaultItemRows,cols:null===(K=this.gridsterConfig)||void 0===K?void 0:K.defaultItemCols});q=(0,S.zdu)(q,`positions.${P.id}`,ne)}q=(0,S.zdu)(q,`widgets.${P.id}`,P),this.dashboardBuffer=q,this.dashboardChange.emit(q)}removeWidget(P,T=!0){let h=this.dashboard;if(!h.widgets[P])return;const x=Object.assign({},h.widgets);if(delete x[P],h=(0,S.zdu)(h,"widgets",x),T){const U=Object.assign({},h.positions);delete U[P],h=(0,S.zdu)(h,"positions",U)}this.dashboardChange.emit(h)}shouldWidgetRender(P){var T;return!(null===(T=this.belowFoldLazyLoadingConfig)||void 0===T?void 0:T.enabled)||this.gridsterItemsVisibilityMap[P]}hookEvent(P,T,h){const x=P[T];P[T]=(U,K)=>{h(U,K),x&&x(U,K)}}calculateWidgetsVisibility(){var P;if(!(null===(P=this.belowFoldLazyLoadingConfig)||void 0===P?void 0:P.enabled))return;const T=this.gridster.el.getBoundingClientRect();this.gridsterItemsVisibilityMap=this.gridsterItems.reduce((h,x)=>{var U;const{el:K}=x,q=x.widgetId;if(!(null===(U=this.belowFoldLazyLoadingConfig.configuration)||void 0===U?void 0:U.reloadWidgetsOnScroll)&&h[q])return h;const ne=K.getBoundingClientRect();return h[q]=(ne.top>T.top&&ne.top<T.bottom||ne.bottom>T.top&&ne.bottom<T.bottom)&&(ne.left>T.left&&ne.left<T.right||ne.right>T.left&&ne.right<T.right),h},this.gridsterItemsVisibilityMap)}}return A.\u0275fac=function(P){return new(P||A)(r.Y36(N.Bc))},A.\u0275cmp=r.Xpm({type:A,selectors:[["nui-dashboard"]],viewQuery:function(P,T){if(1&P&&(r.Gf(d.sm,5),r.Gf(d.IM,5)),2&P){let h;r.iGM(h=r.CRH())&&(T.gridster=h.first),r.iGM(h=r.CRH())&&(T.gridsterItems=h)}},hostVars:2,hostBindings:function(P,T){2&P&&r.ekj("nui-dashboard",T.hostClass)},inputs:{gridsterConfig:"gridsterConfig",dashboard:"dashboard",editMode:"editMode",belowFoldLazyLoadingConfig:"belowFoldLazyLoadingConfig"},outputs:{gridsterConfigChange:"gridsterConfigChange",dashboardChange:"dashboardChange"},features:[r._Bn([{provide:N.Bc,useClass:S.Ndp}]),r.TTD],decls:5,vars:6,consts:[[1,"nui-dashboard__gridster",3,"options","scroll"],["class","nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId",4,"ngFor","ngForOf","ngForTrackBy"],["emptyWidgetTpl",""],[1,"nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId"],["class","w-100 h-100 d-block",3,"widget","widgetChange",4,"ngIf","ngIfElse"],[1,"w-100","h-100","d-block",3,"widget","widgetChange"],[1,"w-100","h-100","d-block"],[3,"active"]],template:function(P,T){1&P&&(r.TgZ(0,"gridster",0),r.NdJ("scroll",function(){return T.onGridsterScroll()}),r.YNc(1,D,2,4,"gridster-item",1),r.ALo(2,"keyvalue"),r.qZA(),r.YNc(3,G,2,1,"ng-template",null,2,r.W1O)),2&P&&(r.Q6J("options",T.gridsterConfig),r.xp6(1),r.Q6J("ngForOf",r.xi3(2,3,T.dashboard.widgets,T.orderWidgets))("ngForTrackBy",T.trackByFn))},directives:[d.sm,p.sg,d.IM,v.K,p.O5,g.B,L.N],pipes:[p.Nd],styles:['.nui-dashboard__gridster{background-color:var(--nui-color-bg-workspace,#f0f0f0)}.nui-dashboard__gridster .gridster-preview{border-width:4px;border-style:solid;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.nui-dashboard__gridster .gridster-preview:before{background-color:var(--nui-color-selected-contrast,#00c4d2);border-radius:50%;content:"";display:block;height:40px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:40px;z-index:1}.nui-dashboard__gridster .gridster-preview:after{color:var(--nui-color-icon-light,#fff);content:"+";display:block;font-size:19px;font-weight:700;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);z-index:2}.nui-dashboard__gridster-item{box-shadow:0 0 5px #999;box-shadow:0 0 var(--nui-space-xs, 5px) var(--nui-color-line-dark, #999999);background-color:var(--nui-color-bg-light,#fff)}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler{border-bottom-color:#00c4d2;border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);margin:0;z-index:2000}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler.handle-se{border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);right:2px;bottom:2px}.mobile .nui-dashboard__gridster-item.nui-dashboard__gridster-item{height:auto!important}\n'],encapsulation:2}),A})()},92474:(oe,B,a)=>{"use strict";a.d(B,{N:()=>e});var r=a(41777),d=a(5e3),O=a(30652);let e=(()=>{class S{constructor(N){this.changeDetector=N,this.active=!1}}return S.lateLoadKey="LoadingComponent",S.\u0275fac=function(N){return new(N||S)(d.Y36(d.sBO))},S.\u0275cmp=d.Xpm({type:S,selectors:[["nui-loading"]],inputs:{active:"active"},decls:1,vars:2,consts:[["compactMode","true",3,"show"]],template:function(N,C){1&N&&(d.TgZ(0,"nui-progress",0),d.NdJ("@animate.start",function(v){return v.element.style.display="block"})("@animate.done",function(v){return v.element.style.display=v.toState?"block":"none"}),d.qZA()),2&N&&d.Q6J("@animate",C.active)("show",!0)},directives:[O.t15],styles:["[_nghost-%COMP%]{height:5px;flex-shrink:0}"],data:{animation:[(0,r.X$)("animate",[(0,r.SB)("true",(0,r.oB)({opacity:1})),(0,r.SB)("false",(0,r.oB)({opacity:0})),(0,r.eR)("false <=> true",(0,r.jt)(500))])]}}),S})()},26365:(oe,B,a)=>{"use strict";a.d(B,{i:()=>v});var r=a(34235),d=a.n(r),O=a(77579),e=a(82722),S=a(81466),R=a(42339),N=a(53450),C=a(25878),p=a(5e3);let v=(()=>{class g{constructor(y,D,G){this.eventBus=y,this.dataSource=D,this.pizzagnaService=G,this.destroy$=new O.x,this.dataSource&&(this.setupRefreshListener(),this.dataSource.outputsSubject.pipe((0,e.R)(this.destroy$)).subscribe(b=>this.handleDataSourceUpdate(b)),this.dataSource.busy&&this.dataSource.busy.pipe((0,e.R)(this.destroy$)).subscribe(b=>{this.eventBus.getStream(N.QD).next({payload:{componentId:this.componentId,busy:b}})}))}setupRefreshListener(){this.eventBus.getStream(N.RG).pipe((0,e.R)(this.destroy$)).subscribe(()=>this.handleRefresh())}handleRefresh(){this.eventBus.getStream(N.R1).next({}),this.dataSource.applyFilters()}handleDataSourceUpdate(y){this.lastValue=d()(null==y?void 0:y.result)?y:null==y?void 0:y.result,this.updateOutput(this.lastValue),this.eventBus.getStream(S.PF).next({payload:Object.assign({componentId:this.componentId},y)})}ngOnDestroy(){this.updateOutput(void 0);const y={payload:{componentId:this.componentId}};this.eventBus.getStream(S.yX).next(y);const D={payload:{componentId:this.componentId,busy:!1}};this.eventBus.getStream(N.QD).next(D),this.destroy$.next(),this.destroy$.complete()}updateConfiguration(y){y.componentId&&(this.componentId=y.componentId),this.updateAdapterProperties(y),this.updateDataSourceProperties(y),void 0!==this.lastValue&&this.updateOutput(this.lastValue)}updateAdapterProperties(y){this.propertyPath=y.propertyPath}updateDataSourceProperties(y){var D,G;const b=null===(D=null==y?void 0:y.dataSource)||void 0===D?void 0:D.properties;if(this.dataSourceConfiguration!==b){this.dataSourceConfiguration=b;const A=this.dataSource;(null==A?void 0:A.updateConfiguration)&&A.updateConfiguration(null===(G=y.dataSource)||void 0===G?void 0:G.properties),this.eventBus.getStream(N.RG).next({})}void 0===this.dataSourceConfiguration&&void 0===b&&setTimeout(()=>this.eventBus.getStream(N.RG).next({}))}updateOutput(y){this.pizzagnaService.setProperty({pizzagnaKey:C.xW.Data,componentId:this.componentId,propertyPath:[this.propertyPath]},this.processOutput(y))}processOutput(y){return y}}return g.\u0275fac=function(y){return new(y||g)(p.LFG(C.nY),p.LFG(C.Fk,8),p.LFG(R.p))},g.\u0275prov=p.Yz7({token:g,factory:g.\u0275fac}),g})()},50271:(oe,B,a)=>{"use strict";a.d(B,{I:()=>e});var r=a(53450),d=a(25878),O=a(5e3);let e=(()=>{class S{constructor(N){this.eventBus=N,this.initializeSubscriptions()}updateConfiguration(N){this.properties=N}initializeSubscriptions(){this.eventBus.getStream(r.b1).subscribe(N=>{var C,p,v;(!(null===(C=this.properties)||void 0===C?void 0:C.interactionType)||(null===(p=this.properties)||void 0===p?void 0:p.interactionType)===(null===(v=N.payload)||void 0===v?void 0:v.interactionType))&&this.handleInteraction(N.payload)})}}return S.\u0275fac=function(N){return new(N||S)(O.LFG(d.nY))},S.\u0275prov=O.Yz7({token:S,factory:S.\u0275fac}),S})()},38046:(oe,B,a)=>{"use strict";a.d(B,{O:()=>N});var r=a(25878),d=a(50271),O=a(5e3),e=a(30652),S=a(99567);Window;let N=(()=>{class C extends d.I{constructor(v,g,L,y){super(v),this.window=g,this.logger=L,this.urlInteractionService=y}handleInteraction(v){var g;if(!(null===(g=this.properties)||void 0===g?void 0:g.url))return void this.logger.warn("The target url has not been defined.");const L=this.urlInteractionService.template(this.properties.url,{data:v.data});!L||(this.properties.newWindow?this.window.open(L):this.window.location.href=L)}}return C.\u0275fac=function(v){return new(v||C)(O.LFG(r.nY),O.LFG("windowObject"),O.LFG(e.mQy),O.LFG(S.v))},C.\u0275prov=O.Yz7({token:C,factory:C.\u0275fac}),C})()},61455:(oe,B,a)=>{"use strict";a.d(B,{g:()=>e});var r=a(61135),d=a(92221),O=a(5e3);let e=(()=>{class S{constructor(){this._refreshRateSeconds=d.Q,this.refreshRateSeconds$=new r.X(this.refreshRateSeconds)}get refreshRateSeconds(){return this._refreshRateSeconds}set refreshRateSeconds(N){this._refreshRateSeconds=N,this.refreshRateSeconds$.next(this._refreshRateSeconds)}}return S.\u0275fac=function(N){return new(N||S)},S.\u0275prov=O.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},97674:(oe,B,a)=>{"use strict";a.d(B,{q:()=>C});var r=a(77579),d=a(82722),O=a(53450),e=a(25878),S=a(92221),R=a(5e3),N=a(61455);let C=(()=>{class p{constructor(g,L,y){this.eventBus=g,this.ngZone=L,this.refresherSettings=y,this.enabled=!0,this.overrideDefaultSettings=!0,this.interval=S.Q,this.eventDef=O.RG,this.destroy$=new r.x,this.refresherSettings.refreshRateSeconds$.pipe((0,d.R)(this.destroy$)).subscribe(D=>{this.overrideDefaultSettings||this.initializeInterval()})}updateConfiguration(g){var L,y,D,G;this.interval=null!==(L=g.interval)&&void 0!==L?L:S.Q,this.enabled=null===(y=g.enabled)||void 0===y||y,this.overrideDefaultSettings=null===(D=g.overrideDefaultSettings)||void 0===D||D,this.eventDef=null!==(G=g.event)&&void 0!==G?G:O.RG,this.initializeInterval()}ngOnDestroy(){this.clearInterval(),this.destroy$.next(),this.destroy$.complete()}initializeInterval(){this.clearInterval(),!(void 0===this.interval||this.getInterval()<=0||!1===this.enabled)&&this.ngZone.runOutsideAngular(()=>{this.intervalRef=setInterval(()=>{this.ngZone.run(()=>{this.performAction()})},1e3*this.getInterval())})}performAction(){this.eventBus.getStream(this.eventDef).next({})}getInterval(){return this.overrideDefaultSettings?this.interval:this.refresherSettings.refreshRateSeconds}clearInterval(){void 0!==this.intervalRef&&(clearInterval(this.intervalRef),this.intervalRef=void 0)}}return p.\u0275fac=function(g){return new(g||p)(R.LFG(e.nY),R.LFG(R.R0b),R.LFG(N.g))},p.\u0275prov=R.Yz7({token:p,factory:p.\u0275fac}),p})()},42296:(oe,B,a)=>{"use strict";a.d(B,{Y:()=>q});var r=a(5e3),d=a(68306),O=a(38421);const{isArray:e}=Array;var R=a(60515),N=a(25403),C=a(63269);var v=a(56451),g=a(63900),L=a(68675),y=a(18505),D=a(54004),G=a(78372),b=a(82722),A=a(30652),W=a(42339),P=a(53450),T=a(25878),h=a(26365),K=function(ne,ae){return function(ce,te){ae(ce,te,ne)}};let q=class extends h.i{constructor(ae,ce,te,se){super(ae,ce,te),this.virtualViewport=se}setupRefreshListener(){const ae=function p(...ne){const ae=(0,C.jO)(ne),ce=function S(ne){return 1===ne.length&&e(ne[0])?ne[0]:ne}(ne);return ce.length?new d.y(te=>{let se=ce.map(()=>[]),V=ce.map(()=>!1);te.add(()=>{se=V=null});for(let j=0;!te.closed&&j<ce.length;j++)(0,O.Xf)(ce[j]).subscribe((0,N.x)(te,le=>{if(se[j].push(le),se.every(ie=>ie.length)){const ie=se.map(me=>me.shift());te.next(ae?ae(...ie):ie),se.some((me,Ie)=>!me.length&&V[Ie])&&te.complete()}},()=>{V[j]=!0,!se[j].length&&te.complete()}));return()=>{se=V=null}}):R.E}(this.eventBus.getStream(P.j7),this.eventBus.getStream(P.RG)).pipe((0,g.w)(()=>this.eventBus.getStream(P.RG).pipe((0,L.O)(void 0))),(0,y.b)(()=>this.virtualViewport.reset({emitFirstPage:!1})),(0,D.U)(()=>{}));(0,v.T)(ae,this.eventBus.getStream(P.df)).pipe((0,G.b)(10),(0,y.b)(()=>this.handleRefresh()),(0,b.R)(this.destroy$)).subscribe()}updateAdapterProperties(ae){this.dataPath=ae.dataPath,this.dataFieldsPath=ae.dataFieldsPath,this.totalItemsPath=ae.totalItemsPath}updateOutput(ae){var ce,te;const se=null===(ce=null==ae?void 0:ae.paginator)||void 0===ce?void 0:ce.total,V=null===(te=null==ae?void 0:ae.repeat)||void 0===te?void 0:te.itemsSource,j=null==ae?void 0:ae.dataFields;this.pizzagnaService.setProperty({pizzagnaKey:T.xW.Data,componentId:this.componentId,propertyPath:[this.totalItemsPath]},se),this.pizzagnaService.setProperty({pizzagnaKey:T.xW.Data,componentId:this.componentId,propertyPath:[this.dataPath]},V),this.pizzagnaService.setProperty({pizzagnaKey:T.xW.Data,componentId:this.componentId,propertyPath:[this.dataFieldsPath]},j)}};q=function(ne,ae,ce,te){var j,se=arguments.length,V=se<3?ae:null===te?te=Object.getOwnPropertyDescriptor(ae,ce):te;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)V=Reflect.decorate(ne,ae,ce,te);else for(var le=ne.length-1;le>=0;le--)(j=ne[le])&&(V=(se<3?j(V):se>3?j(ae,ce,V):j(ae,ce))||V);return se>3&&V&&Object.defineProperty(ae,ce,V),V}([K(0,(0,r.tBr)(T.nY)),K(1,(0,r.tBr)(T.Fk)),K(3,(0,r.FiY)()),function(ne,ae){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",ae)}(0,[A.Ndp,Object,W.p,A.zCP])],q)},10948:(oe,B,a)=>{"use strict";a.d(B,{f:()=>g});var r=a(5e3),d=a(11094),O=a.n(d),e=a(30652),S=a(42339),R=a(25878),N=a(26365),v=function(L,y){return function(D,G){y(D,G,L)}};let g=class extends N.i{constructor(y,D,G){super(y,D,G),this.seriesIndex=[]}updateConfiguration(y){this.seriesIndex=O()(y.series),super.updateConfiguration(y)}processOutput(y){return y&&Object.assign(Object.assign({},y),{series:this.buildSeriesSet(null==y?void 0:y.series)})}buildSeriesSet(y){return y?y.filter(D=>this.seriesIndex.find(G=>G.selectedSeriesId===D.id)).map(D=>{var G;return{id:D.id,data:D.data,link:D.link,secondaryLink:D.secondaryLink,legendDescriptionPrimary:null===(G=this.seriesIndex.find(b=>b.selectedSeriesId===D.id))||void 0===G?void 0:G.label,legendDescriptionSecondary:D.description}}):[]}};g=function(L,y,D,G){var W,b=arguments.length,A=b<3?y:null===G?G=Object.getOwnPropertyDescriptor(y,D):G;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(L,y,D,G);else for(var P=L.length-1;P>=0;P--)(W=L[P])&&(A=(b<3?W(A):b>3?W(y,D,A):W(y,D))||A);return b>3&&A&&Object.defineProperty(y,D,A),A}([v(0,(0,r.tBr)(R.nY)),v(1,(0,r.tBr)(R.Fk)),function(L,y){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",y)}(0,[e.Ndp,Object,S.p])],g)},92221:(oe,B,a)=>{"use strict";a.d(B,{Q:()=>r});const r=300},69769:(oe,B,a)=>{"use strict";a.d(B,{q:()=>d});var r=a(5e3);let d=(()=>{class O{}return O.lateLoadKey="TemplateLoadErrorComponent",O.\u0275fac=function(S){return new(S||O)},O.\u0275cmp=r.Xpm({type:O,selectors:[["ng-component"]],decls:3,vars:0,template:function(S,R){1&S&&(r.TgZ(0,"code")(1,"pre"),r._uU(2,"Template load error!"),r.qZA()())},encapsulation:2}),O})()},43046:(oe,B,a)=>{"use strict";a.d(B,{B:()=>R});var r=a(5e3),d=a(53450),O=a(63776),e=a(32656),S=a(87686);let R=(()=>{class N{constructor(p,v){this.widgetConfigurationService=p,this.widgetTypesService=v,this.widgetChange=new r.vpe,this.rootNode=d.XM}ngOnChanges(p){var v,g;if(p.widget){const L=this.widget.type;if((p.widget.previousValue&&p.widget.previousValue.type)!==L){const D=this.widgetTypesService.getWidgetType(L,this.widget.version);this.rootNode=(null===(g=null===(v=null==D?void 0:D.paths)||void 0===v?void 0:v.widget)||void 0===g?void 0:g.root)||d.XM}this.widgetConfigurationService.updateWidget(this.widget)}}onPizzagnaChange(p){this.widgetChange.emit(Object.assign(Object.assign({},this.widget),{pizzagna:p}))}}return N.\u0275fac=function(p){return new(p||N)(r.Y36(O.I),r.Y36(e.x))},N.\u0275cmp=r.Xpm({type:N,selectors:[["nui-widget"]],hostAttrs:[1,"nui-widget"],inputs:{widget:"widget"},outputs:{widgetChange:"widgetChange"},features:[r._Bn([O.I]),r.TTD],decls:1,vars:2,consts:[[3,"rootNode","pizzagna","pizzagnaChange"]],template:function(p,v){1&p&&(r.TgZ(0,"nui-pizzagna",0),r.NdJ("pizzagnaChange",function(L){return v.onPizzagnaChange(L)}),r.qZA()),2&p&&r.Q6J("rootNode",v.rootNode)("pizzagna",v.widget.pizzagna)},directives:[S.R],styles:[""]}),N})()},69155:(oe,B,a)=>{"use strict";a.d(B,{n:()=>y});var r=a(5e3),d=a(77579),O=a(30652),e=a(87686),S=a(32656),R=a(45122),N=a(92120),C=a(69808),p=a(47429),v=a(73193);const g=["previewPizzagnaComponent"];function L(D,G){if(1&D){const b=r.EpF();r.TgZ(0,"nui-pizzagna",8,9),r.NdJ("pizzagnaChange",function(W){return r.CHM(b),r.oxw().onPizzagnaChange(W)}),r.ALo(2,"nuiPizzagnaRoot"),r.qZA()}if(2&D){const b=r.oxw();r.Q6J("rootNode",r.xi3(2,2,b.previewWidget,"widget"))("pizzagna",null==b.previewWidget?null:b.previewWidget.pizzagna)}}let y=(()=>{class D{constructor(b,A){this.widgetTypesService=b,this.changeDetector=A,this.result=new r.vpe,this.formPortalAttached=new r.vpe,this.submitError=new d.x,this.destroy$=new d.x}ngOnInit(){this.previewWidget||(this.previewWidget={id:null,type:"previewPlaceholder",pizzagna:this.widgetTypesService.getWidgetType("previewPlaceholder").widget})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleSubmitError(){this.submitError.next()}onFormPortalAttached(b){this.formPortalAttached.emit(b)}updateWidget(b){this.previewWidget=b,this.changeDetector.markForCheck()}formCancel(){this.result.next(null)}formSubmit(){this.result.next(this.previewWidget)}onPizzagnaChange(b){this.previewWidget&&(this.previewWidget.pizzagna=b)}}return D.lateLoadKey="ConfiguratorComponent",D.\u0275fac=function(b){return new(b||D)(r.Y36(S.x),r.Y36(r.sBO))},D.\u0275cmp=r.Xpm({type:D,selectors:[["nui-configurator"]],viewQuery:function(b,A){if(1&b&&r.Gf(g,7),2&b){let W;r.iGM(W=r.CRH())&&(A.previewPizzagnaComponent=W.first)}},hostAttrs:[1,"nui-configurator"],inputs:{formPortal:"formPortal",previewWidget:"previewWidget"},outputs:{result:"result",formPortalAttached:"formPortalAttached"},features:[r._Bn([R.m,{provide:O.nse,useValue:".nui-dashwiz-step--active .configurator-scrollable"}])],decls:9,vars:4,consts:[[1,"nui-configurator__backdrop"],[1,"nui-configurator__content"],["orientation","right","paneSize","30vw","paneMinSize","20vw","paneMaxSize","80vw","isResizable","true",1,"h-100",3,"headerPadding","sidePaneBodyPadding"],[1,"nui-configurator__preview","d-flex","align-items-center","justify-content-center"],[1,"nui-configurator__preview-area"],["class","flex-grow-1 w-100",3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],["nuiPanelEmbeddedBody","",1,"nui-configurator__body"],[3,"cdkPortalOutlet","attached"],[1,"flex-grow-1","w-100",3,"rootNode","pizzagna","pizzagnaChange"],["previewPizzagnaComponent",""]],template:function(b,A){1&b&&(r._UZ(0,"div",0),r.TgZ(1,"div",1)(2,"nui-panel",2)(3,"div",3)(4,"div",4),r._UZ(5,"nui-preview-overlay"),r.YNc(6,L,3,5,"nui-pizzagna",5),r.qZA()(),r.TgZ(7,"div",6),r.ynx(8,7),r.NdJ("attached",function(P){return A.onFormPortalAttached(P)}),r.BQk(),r.qZA()()()),2&b&&(r.xp6(2),r.Q6J("headerPadding",!1)("sidePaneBodyPadding",!1),r.xp6(4),r.Q6J("ngIf",null==A.previewWidget?null:A.previewWidget.pizzagna),r.xp6(2),r.Q6J("cdkPortalOutlet",A.formPortal))},directives:[O.yXm,N.b,C.O5,e.R,p.Pl],pipes:[v.l],styles:[".nui-configurator__backdrop[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:var(--nui-color-overlay-modal,rgba(17, 17, 17, .5));opacity:.5;filter:alpha(opacity=50)}.nui-configurator__content[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040}.nui-configurator__heading[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #d9d9d9}.nui-configurator__body[_ngcontent-%COMP%]{overflow-anchor:none;height:100vh}.nui-configurator__preview[_ngcontent-%COMP%]{height:100vh}.nui-configurator__preview-area[_ngcontent-%COMP%]{display:flex;width:80%;position:relative;background-color:var(--nui-color-bg-content_popover,#fff);border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);margin:auto;min-height:40vh;max-height:80vh;overflow:hidden}"]}),D})()},16134:(oe,B,a)=>{"use strict";a.d(B,{C:()=>N});var r=a(5e3),d=a(30652),O=a(69808);function e(C,p){if(1&C&&r._UZ(0,"nui-icon",4),2&C){const v=r.oxw(2);r.Q6J("icon",null==v.data?null:v.data.value)}}function S(C,p){if(1&C&&(r.TgZ(0,"div",2),r.YNc(1,e,1,1,"nui-icon",3),r.qZA()),2&C){const v=r.oxw(),g=r.MAs(2);r.xp6(1),r.Q6J("ngIf",v.iconFound)("ngIfElse",g)}}function R(C,p){1&C&&r._UZ(0,"nui-icon",5)}let N=(()=>{class C{constructor(v,g){this.changeDetector=v,this.iconService=g,this.isValid=!1,this.iconFound=!0}ngOnChanges(){var v,g;this.isValid=!!(null===(v=this.data)||void 0===v?void 0:v.value),this.iconFound=!!this.iconService.getIconData(null===(g=this.data)||void 0===g?void 0:g.value)}}return C.lateLoadKey="IconFormatterComponent",C.\u0275fac=function(v){return new(v||C)(r.Y36(r.sBO),r.Y36(d.C6t))},C.\u0275cmp=r.Xpm({type:C,selectors:[["ng-component"]],inputs:{data:"data"},features:[r.TTD],decls:3,vars:1,consts:function(){let p;return p=$localize`:␟8cf3dbb8fe1e2fa079d4c2167cd4c81cdcfe89c2␟7731831112083433420:Unknown icon`,[["class","d-flex align-items-center justify-content-center",4,"ngIf"],["iconNotFound",""],[1,"d-flex","align-items-center","justify-content-center"],[3,"icon",4,"ngIf","ngIfElse"],[3,"icon"],["title",p,"iconColor","disabled-gray","icon","help"]]},template:function(v,g){1&v&&(r.YNc(0,S,2,2,"div",0),r.YNc(1,R,1,0,"ng-template",null,1,r.W1O)),2&v&&r.Q6J("ngIf",g.isValid)},directives:[O.O5,d.oJW],encapsulation:2}),C})()},61621:(oe,B,a)=>{"use strict";a.d(B,{s:()=>e});var r=a(5e3),d=a(69808);function O(S,R){if(1&S&&(r.TgZ(0,"a",2),r._uU(1),r.qZA()),2&S){const N=r.oxw();r.Q6J("href",null==N.data?null:N.data.link,r.LSH)("target",N.targetSelf?"_self":"_blank"),r.xp6(1),r.hij(" ",null==N.data?null:N.data.value," ")}}let e=(()=>{class S{constructor(N){this.changeDetector=N,this.isValid=!1}ngOnChanges(N){this.isValid=Boolean(this.data&&this.data.value&&this.data.link)}}return S.lateLoadKey="LinkFormatterComponent",S.\u0275fac=function(N){return new(N||S)(r.Y36(r.sBO))},S.\u0275cmp=r.Xpm({type:S,selectors:[["ng-component"]],inputs:{data:"data",targetSelf:"targetSelf"},features:[r.TTD],decls:2,vars:1,consts:[[1,"link-formatter-container"],["class","nui-text-ellipsis",3,"href","target",4,"ngIf"],[1,"nui-text-ellipsis",3,"href","target"]],template:function(N,C){1&N&&(r.TgZ(0,"div",0),r.YNc(1,O,2,3,"a",1),r.qZA()),2&N&&(r.xp6(1),r.Q6J("ngIf",C.isValid))},directives:[d.O5],styles:[".link-formatter-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}"]}),S})()},14366:(oe,B,a)=>{"use strict";a.d(B,{a:()=>d});var r=a(5e3);let d=(()=>{class O{constructor(S){this.changeDetector=S}}return O.lateLoadKey="RawFormatterComponent",O.\u0275fac=function(S){return new(S||O)(r.Y36(r.sBO))},O.\u0275cmp=r.Xpm({type:O,selectors:[["ng-component"]],hostVars:2,hostBindings:function(S,R){2&S&&r.Tol(R.elementClass)},inputs:{data:"data",elementClass:"elementClass"},decls:2,vars:1,template:function(S,R){1&S&&(r.ynx(0),r._uU(1),r.BQk()),2&S&&(r.xp6(1),r.Oqu(null==R.data?null:R.data.value))},encapsulation:2}),O})()},85822:(oe,B,a)=>{"use strict";a.d(B,{Q:()=>e});var r=a(5e3),d=a(32148),O=a(30652);let e=(()=>{class S{constructor(N,C){this.el=N,this.heading=C,this.disableCloseButton=!1,this.close=new r.vpe}ngOnChanges(){this.heading.height$.next(+getComputedStyle(this.el.nativeElement).height.slice(0,-2))}}return S.\u0275fac=function(N){return new(N||S)(r.Y36(r.SBq),r.Y36(d.p))},S.\u0275cmp=r.Xpm({type:S,selectors:[["nui-configurator-heading"]],inputs:{configuratorTitle:"configuratorTitle",disableCloseButton:"disableCloseButton"},outputs:{close:"close"},features:[r.TTD],decls:4,vars:3,consts:[[1,"configurator-heading","d-flex","justify-content-between","align-items-center","p-4"],[1,"nui-text-panel","nui-text-ellipsis",3,"title"],["nui-button","","type","button","displayStyle","action","icon","close",3,"disabled","click"]],template:function(N,C){1&N&&(r.TgZ(0,"div",0)(1,"span",1),r._uU(2),r.qZA(),r.TgZ(3,"button",2),r.NdJ("click",function(){return C.close.emit()}),r.qZA()()),2&N&&(r.xp6(1),r.Q6J("title",C.configuratorTitle),r.xp6(1),r.hij(" ",C.configuratorTitle," "),r.xp6(1),r.Q6J("disabled",C.disableCloseButton))},directives:[O.r0F],styles:["[_nghost-%COMP%]{z-index:1080;background-color:var(--nui-color-bg-content,#fff)}[_nghost-%COMP%]   .configurator-heading[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),S})()},71536:(oe,B,a)=>{"use strict";a.d(B,{e:()=>O});var r=a(95698),d=a(5e3);let O=(()=>{class e{constructor(){this.accordions=[]}registerAccordion(R){this.accordions.push({instance:R,openSubscription:R.openSubject.subscribe(()=>{this.closeAllAccordions(),R.open=!0}),destroySubscription:R.destroySubject.pipe((0,r.q)(1)).subscribe(()=>{this.removeAccordion(R)})})}closeAllAccordions(){this.accordions.forEach(R=>{R.instance.closeAccordion()})}removeAccordion(R){const N=this.accordions.findIndex(C=>C.instance===R);this.accordions[N].openSubscription.unsubscribe(),this.accordions.splice(N,1)}}return e.\u0275fac=function(R){return new(R||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},19837:(oe,B,a)=>{"use strict";a.d(B,{J:()=>v});var r=a(77579),d=a(25878),O=a(5e3),e=a(71536),S=a(30652),R=a(69808);function N(g,L){if(1&g&&O._UZ(0,"nui-icon",4),2&g){const y=O.oxw();O.Q6J("icon",y.open?"triangle-down":"triangle-left")}}const C=[[["","accordionHeader",""]],"*"],p=["[accordionHeader]","*"];let v=(()=>{class g{constructor(y,D){this.accordionCoordinator=y,this.cd=D,this.showOpenStateIcon=!0,this.state=d.Nc.DEFAULT,this.open=!1,this.openSubject=new r.x,this.destroySubject=new r.x}ngOnInit(){this.accordionCoordinator.registerAccordion(this)}openChange(y){y?this.openSubject.next():this.closeAccordion()}closeAccordion(){this.cd.markForCheck(),this.open=!1}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete()}}return g.\u0275fac=function(y){return new(y||g)(O.Y36(e.e),O.Y36(O.sBO))},g.\u0275cmp=O.Xpm({type:g,selectors:[["nui-widget-editor-accordion"]],inputs:{showOpenStateIcon:"showOpenStateIcon",state:"state"},ngContentSelectors:p,decls:6,vars:6,consts:[[1,"nui-widget-editor-accordion"],[3,"open","openChange"],["nuiExpanderHeader","",1,"d-flex","align-items-start"],["class","nui-widget-editor-accordion__edit-icon",3,"icon",4,"ngIf"],[1,"nui-widget-editor-accordion__edit-icon",3,"icon"]],template:function(y,D){1&y&&(O.F$t(C),O.TgZ(0,"div",0)(1,"nui-expander",1),O.NdJ("openChange",function(b){return D.openChange(b)}),O.TgZ(2,"div",2),O.Hsn(3),O.YNc(4,N,1,1,"nui-icon",3),O.qZA(),O.Hsn(5,1),O.qZA()()),2&y&&(O.xp6(1),O.Q6J("open",D.open),O.xp6(1),O.ekj("error-state","critical"===D.state)("warning-state","warning"===D.state),O.xp6(2),O.Q6J("ngIf",D.showOpenStateIcon))},directives:[S.Fxv,R.O5,S.oJW],styles:[".nui-widget-editor-accordion nui-form-field:last-child .nui-form-field{margin-bottom:0}.nui-widget-editor-accordion__edit-icon{padding:10px;margin-left:auto;margin-right:5px}.nui-widget-editor-accordion .nui-expander--expanded{padding-bottom:0}.nui-widget-editor-accordion .nui-expander__header-icon{display:none}.nui-widget-editor-accordion .nui-expander__header .error-state{background-color:var(--nui-color-semantic-critical-bg,#fceae6)}.nui-widget-editor-accordion .nui-expander__header .warning-state{background-color:var(--nui-color-semantic-warning-bg,#fff9e6)}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader]{border-top:1px solid;border-top-color:var(--nui-color-line-default,#d9d9d9);min-height:50px}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]{overflow:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div{overflow-x:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div .nui-text-secondary{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget-editor-accordion .nui-expander__body{margin:0;padding:0;border-left:none}\n"],encapsulation:2,changeDetection:0}),g})()},64406:(oe,B,a)=>{"use strict";a.d(B,{b:()=>T});var r=a(8817),d=a.n(r),O=a(61135),e=a(77579),S=a(82722),R=a(87686),N=a(53450),C=a(25878),p=a(69155),v=a(5e3),g=a(52382),L=a(45122),y=a(85822),D=a(61842),G=a(10628),b=a(69808);const A=["formPizzagnaComponent"];function W(h,x){if(1&h){const U=v.EpF();v.TgZ(0,"nui-pizzagna",6,7),v.NdJ("pizzagnaChange",function(q){return v.CHM(U),v.oxw(2).formPizzagna=q}),v.qZA()}if(2&h){const U=v.oxw(2);v.Q6J("rootNode",U.formRoot)("pizzagna",U.formPizzagna)}}function P(h,x){if(1&h&&(v.TgZ(0,"div",4),v.YNc(1,W,2,2,"nui-pizzagna",5),v.qZA()),2&h){const U=v.oxw();v.Q6J("formGroup",U.form),v.xp6(1),v.Q6J("ngIf",U.formPizzagna)}}let T=(()=>{class h{constructor(U,K,q,ne){this.changeDetector=U,this.formBuilder=K,this.previewService=q,this.configurator=ne,this.navigationControl=new O.X({busyState:{busy:!1},allowStepChange:!0}),this.busy=!1,this.destroy$=new e.x,this.form=this.formBuilder.group({})}set formPizzagnaComponent(U){var K;null===(K=null==U?void 0:U.eventBus)||void 0===K||K.getStream(N.xZ).pipe((0,S.R)(this.destroy$)).subscribe(q=>{var ne,ae,ce;const te=q.payload;te&&te.id&&(null===(ce=null===(ae=null===(ne=this.configurator)||void 0===ne?void 0:ne.previewPizzagnaComponent)||void 0===ae?void 0:ae.eventBus)||void 0===ce||ce.getStream(te.id).next(te.payload))}),this._formPizzagnaComponent=U}ngOnInit(){var U;this.previewService.preview=null===(U=this.configurator.previewWidget)||void 0===U?void 0:U.pizzagna[C.xW.Configuration],this.previewService.previewChanged.pipe((0,S.R)(this.destroy$)).subscribe(K=>{this.onPreviewPizzagnaUpdate(K),this.changeDetector.detectChanges()}),this.configurator.submitError.pipe((0,S.R)(this.destroy$)).subscribe(()=>{this.toggleBusy()}),this.changeDetector.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewPizzagnaUpdate(U){var K;const q=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(K=this.configurator.previewWidget)||void 0===K?void 0:K.pizzagna),{[C.xW.Configuration]:U})});this.configurator.updateWidget(q);const ne=d()(U,h.TITLE_PATH,"");this.configuratorTitle=$localize`Editing ${ne}`}onFinish(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0});this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}}return h.lateLoadKey="WidgetEditorComponent",h.TITLE_PATH="header.properties.title",h.\u0275fac=function(U){return new(U||h)(v.Y36(v.sBO),v.Y36(g.qu),v.Y36(L.m),v.Y36(p.n))},h.\u0275cmp=v.Xpm({type:h,selectors:[["nui-widget-editor"]],viewQuery:function(U,K){if(1&U&&v.Gf(A,5),2&U){let q;v.iGM(q=v.CRH())&&(K.formPizzagnaComponent=q.first)}},hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",formRoot:"formRoot"},decls:5,vars:5,consts:function(){let x;return x=$localize`:␟afa960379d26eb20fd22e6e10537c1c5ec74c5d1␟4319441956121197474:Save Changes`,[[3,"configuratorTitle","disableCloseButton","close"],["finishText",x,3,"hideHeader","navigationControl","finish","cancel"],[3,"stepTemplate"],["step1",""],[3,"formGroup"],[3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],[3,"rootNode","pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(U,K){if(1&U&&(v.TgZ(0,"nui-configurator-heading",0),v.NdJ("close",function(){return K.onCancel()}),v.qZA(),v.TgZ(1,"nui-dashwiz",1),v.NdJ("finish",function(){return K.onFinish()})("cancel",function(){return K.onCancel()}),v._UZ(2,"nui-dashwiz-step",2),v.qZA(),v.YNc(3,P,2,2,"ng-template",null,3,v.W1O)),2&U){const q=v.MAs(4);v.Q6J("configuratorTitle",K.configuratorTitle)("disableCloseButton",K.busy),v.xp6(1),v.Q6J("hideHeader",!0)("navigationControl",K.navigationControl),v.xp6(1),v.Q6J("stepTemplate",q)}},directives:[y.Q,D.i,G.u,g.JL,g.sg,b.O5,R.R],encapsulation:2,changeDetection:0}),h})()},10628:(oe,B,a)=>{"use strict";a.d(B,{u:()=>N});var r=a(5e3),d=a(30652),O=a(69808),e=a(8083);function S(C,p){1&C&&r.GkF(0)}const R=function(C){return{"nui-dashwiz-step--active":C}};let N=(()=>{class C{constructor(){this.hidden=!1,this.spinnerSize=d.Eye.Large,this.enter=new r.vpe,this.valid=new r.vpe,this.exit=new r.vpe,this.next=new r.vpe,this.busyConfig={busy:!1},this.visited=!1,this.active=!1,this.complete=!1,this.icon="step",this.iconColor="",this.enterStep=v=>{this.enter.emit(v)},this.exitStep=v=>{this.exit.emit(v)},this.nextStep=v=>{this.next.emit(v)},this.applyEnteringStep=()=>{this.active=!0,this.icon="step-active",this.iconColor="black"},this.applyExitingStep=()=>{this.active=!1,this.visited=!0,this.icon="step-complete",this.iconColor=""}}ngOnInit(){this.nextText=this.nextText||$localize`Next`}ngOnChanges(v){v.stepControl&&this.valid.emit(this.stepControl)}}return C.\u0275fac=function(v){return new(v||C)},C.\u0275cmp=r.Xpm({type:C,selectors:[["nui-dashwiz-step"]],inputs:{stepTemplate:"stepTemplate",stepControl:"stepControl",title:"title",nextText:"nextText",hidden:"hidden",disabled:"disabled",spinnerSize:"spinnerSize"},outputs:{enter:"enter",valid:"valid",exit:"exit",next:"next"},features:[r.TTD],decls:4,vars:9,consts:[["nui-busy","",1,"nui-dashwiz-step","animated","h-100",3,"ngClass","busy"],["cdkScrollable","",1,"h-100","overflow-auto","nui-scroll-shadows","configurator-scrollable"],[4,"ngTemplateOutlet"],[3,"percent","allowCancel","message","size"]],template:function(v,g){1&v&&(r.TgZ(0,"div",0)(1,"div",1),r.YNc(2,S,1,0,"ng-container",2),r.qZA(),r._UZ(3,"nui-spinner",3),r.qZA()),2&v&&(r.Q6J("ngClass",r.VKq(7,R,g.active))("busy",g.busyConfig.busy),r.xp6(2),r.Q6J("ngTemplateOutlet",g.stepTemplate),r.xp6(1),r.Q6J("percent",g.busyConfig.percent)("allowCancel",g.busyConfig.allowCancel)("message",g.busyConfig.message)("size",g.spinnerSize))},directives:[d.ERI,O.mk,e.PQ,O.tP,d.ORR],styles:[".nui-dashwiz-step[_ngcontent-%COMP%]{display:none}.nui-dashwiz-step--active[_ngcontent-%COMP%]{display:block}"]}),C})()},4235:(oe,B,a)=>{"use strict";a.d(B,{P:()=>N});var r=a(5e3),d=a(30652),O=a(69808);function e(C,p){if(1&C){const v=r.EpF();r.TgZ(0,"button",6),r.NdJ("click",function(){return r.CHM(v),r.oxw().onBack()}),r.TgZ(1,"span"),r.SDv(2,7),r.qZA()()}if(2&C){const v=r.oxw();r.Q6J("disabled",v.busy)}}function S(C,p){if(1&C){const v=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",function(){return r.CHM(v),r.oxw().onNext()}),r.TgZ(1,"span"),r._uU(2),r.qZA()()}if(2&C){const v=r.oxw();r.Q6J("displayStyle",v.canFinish?"default":"primary")("disabled",v.busy),r.xp6(2),r.Oqu(v.nextText)}}function R(C,p){if(1&C){const v=r.EpF();r.TgZ(0,"button",9),r.NdJ("click",function(){return r.CHM(v),r.oxw().onFinish()}),r.TgZ(1,"span"),r._uU(2),r.qZA()()}if(2&C){const v=r.oxw();r.Q6J("isBusy",v.busy)("disabled",v.busy),r.xp6(2),r.Oqu(v.finishText)}}let N=(()=>{class C{constructor(v){this.changeDetector=v,this.busy=!1,this.canFinish=!1,this.canProceed=!1,this.isFirstStepActive=!1,this.isLastStepActive=!1,this.cancel=new r.vpe,this.next=new r.vpe,this.back=new r.vpe,this.finish=new r.vpe}onCancel(){this.cancel.emit()}onNext(){this.next.emit()}onBack(){this.back.emit()}onFinish(){this.finish.emit()}}return C.lateLoadKey="DashwizButtonsComponent",C.\u0275fac=function(v){return new(v||C)(r.Y36(r.sBO))},C.\u0275cmp=r.Xpm({type:C,selectors:[["nui-dashwiz-buttons"]],inputs:{busy:"busy",canFinish:"canFinish",canProceed:"canProceed",isFirstStepActive:"isFirstStepActive",isLastStepActive:"isLastStepActive",nextText:"nextText",finishText:"finishText"},outputs:{cancel:"cancel",next:"next",back:"back",finish:"finish"},decls:7,vars:4,consts:function(){let p,v;return p=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,v=$localize`:␟cda31dbd724cf5f4fa7a4274d9120651490c8a8c␟8890553633144307762:Back`,[[1,"d-flex","justify-content-end","p-4"],["nui-button","","type","button",1,"nui-dashwiz-buttons__cancel-button",3,"disabled","click"],p,["class","ml-3 nui-dashwiz-buttons__back-button","nui-button","","icon","caret-left","type","button",3,"disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__next-button","nui-button","","type","button",3,"displayStyle","disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__finish-button","nui-button","","type","button","displayStyle","primary",3,"isBusy","disabled","click",4,"ngIf"],["nui-button","","icon","caret-left","type","button",1,"ml-3","nui-dashwiz-buttons__back-button",3,"disabled","click"],v,["nui-button","","type","button",1,"ml-3","nui-dashwiz-buttons__next-button",3,"displayStyle","disabled","click"],["nui-button","","type","button","displayStyle","primary",1,"ml-3","nui-dashwiz-buttons__finish-button",3,"isBusy","disabled","click"]]},template:function(v,g){1&v&&(r.TgZ(0,"div",0)(1,"button",1),r.NdJ("click",function(){return g.onCancel()}),r.TgZ(2,"span"),r.SDv(3,2),r.qZA()(),r.YNc(4,e,3,1,"button",3),r.YNc(5,S,3,3,"button",4),r.YNc(6,R,3,3,"button",5),r.qZA()),2&v&&(r.xp6(1),r.Q6J("disabled",g.busy),r.xp6(3),r.Q6J("ngIf",!g.isFirstStepActive),r.xp6(1),r.Q6J("ngIf",!g.isLastStepActive&&g.canProceed),r.xp6(1),r.Q6J("ngIf",g.canFinish||g.isLastStepActive))},directives:[d.r0F,O.O5],encapsulation:2}),C})()},61842:(oe,B,a)=>{"use strict";a.d(B,{i:()=>ce});var r=a(5e3),d=a(62516),O=a.n(d),e=a(36397),S=a.n(e),R=a(34235),N=a.n(R),C=a(61135),p=a(10628),v=a(4235),g=a(30652),L=a(59551),y=a(69808),D=a(47969),G=a(47429);const b=["container"],A=["stepTitle"],W=function(te){return{"min-width.px":te}};function P(te,se){if(1&te&&(r.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"span",18)(5,"span",19,20),r._uU(7),r.qZA(),r.TgZ(8,"div",21)(9,"div",22),r._UZ(10,"div",23),r.qZA(),r._UZ(11,"nui-icon",24),r.TgZ(12,"div",25),r._UZ(13,"div",23),r.qZA()()()()()()()),2&te){const V=r.oxw().$implicit,j=r.oxw(3);r.xp6(7),r.hij(" ",V.title,""),r.xp6(3),r.Q6J("ngStyle",r.VKq(5,W,j.stepLineWidth)),r.xp6(1),r.Q6J("icon",V.icon)("iconColor",V.iconColor),r.xp6(2),r.Q6J("ngStyle",r.VKq(7,W,j.stepLineWidth))}}const T=function(te,se,V,j,le,ie){return{"nui-dashwiz__header-step--first":te,"nui-dashwiz__header-step--last":se,"nui-dashwiz__header-step--visited":V,"nui-dashwiz__header-step--disabled":j,"nui-dashwiz__header-step--active":le,"nui-dashwiz__header-step--complete":ie}};function h(te,se){if(1&te){const V=r.EpF();r.TgZ(0,"li",12),r.NdJ("click",function(){const ie=r.CHM(V).$implicit;return r.oxw(3).selectStep(ie)}),r.YNc(1,P,14,9,"div",13),r.qZA()}if(2&te){const V=se.$implicit,j=se.first,le=se.last,ie=r.oxw(3);r.Q6J("ngClass",r.HTZ(2,T,j,le,V.visited,V.disabled||!V.visited||ie.currentStep.busyConfig.busy,V.active,V.complete)),r.xp6(1),r.Q6J("ngIf",!V.hidden)}}function x(te,se){if(1&te&&(r.TgZ(0,"ul",10),r.YNc(1,h,2,9,"li",11),r.qZA()),2&te){const V=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",V.steps)}}function U(te,se){if(1&te&&(r.TgZ(0,"div",8),r.YNc(1,x,2,1,"ul",9),r.qZA()),2&te){const V=r.oxw();r.ekj("nui-dashwiz__header--lines-stretched",V.stretchStepLines),r.xp6(1),r.Q6J("ngIf",V.steps)}}function K(te,se){}function q(te,se){}const ne=function(){return["cancel","next","back","finish"]},ae=["*"];let ce=(()=>{class te{constructor(V,j,le,ie){this.changeDetector=V,this.componentFactoryResolver=j,this.logger=le,this.dashwizService=ie,this.hideHeader=!1,this.canProceed=!1,this.canFinish=!1,this.finishText=te.placeholderFinishText,this.stretchStepLines=!1,this.stepNavigated=new r.vpe,this.cancel=new r.vpe,this.finish=new r.vpe,this.next=new r.vpe,this.back=new r.vpe,this.navigationControl=new C.X({busyState:{busy:!1},allowStepChange:!0}),this.stepLineWidth=65,this.previousStepIndex=0,this.onBack=()=>{if(!N()(this.stepIndex)){let me=this.arraySteps[this.stepIndex-1];(me.hidden||me.disabled)&&(me=O()(this.arraySteps.slice(0).reverse(),Ie=>!Ie.hidden,S()(this.arraySteps.slice(0).reverse(),this.arraySteps[this.stepIndex])+1)),this.selectStep(me),this.back.emit()}},this.onNext=()=>{let me=this.arraySteps[this.stepIndex+1];this.handleStepControl(this.currentStep),this.currentStep.nextStep({currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.currentStep,previousStepIndex:this.stepIndex}),(me.hidden||me.disabled&&!N()(me.stepControl))&&(me=O()(this.arraySteps,Ie=>!Ie.hidden,this.stepIndex+1)),(N()(this.currentStep.stepControl)||this.currentStep.stepControl)&&(this.currentStep.complete=!0),me.disabled&&!me.visited&&(this.currentStep.complete=!1),this.selectStep(me),this.next.emit()},this.onFinish=()=>{this.finish.emit()},this.onCancel=()=>{this.cancel.emit(0!==this.steps.toArray().filter(me=>me.complete).length)},this.buttonPortalActionMap={cancel:this.onCancel,next:this.onNext,back:this.onBack,finish:this.onFinish},ie&&(ie.component=this)}ngOnInit(){this.buttonComponentTypes=this.buttonComponentTypes||[v.P.lateLoadKey],this.finishText===te.placeholderFinishText&&this.logger.warn(`DashwizComponent input "finishText" is using placeholder text\n"${te.placeholderFinishText}". A value should be specified.`)}ngDoCheck(){this.currentStep&&(this.buttonProperties={busy:this.currentStep.busyConfig.busy,canProceed:this.canProceed,canFinish:this.canFinish,isLastStepActive:this.steps.last.active,isFirstStepActive:this.steps.first.active,nextText:this.currentStep.nextText,finishText:this.finishText})}ngAfterContentInit(){const V=this.steps.filter(j=>j.active);this.arraySteps=this.steps.toArray(),0===V.length&&(this.currentStep=this.steps.first,this.selectStep(this.currentStep),this.changeDetector.detectChanges()),this.steps.toArray().forEach(j=>{j.valid.subscribe(le=>{N()(le)||this.handleStepControl(j)})}),this.navigationControl.subscribe(j=>{this.currentStep.busyConfig=j.busyState,j.allowStepChange&&!N()(this.futureStep)&&this.currentStep!==this.futureStep&&(this.enterAnotherStep(),this.futureStep=void 0)})}ngAfterViewChecked(){this.stretchStepLines&&(this.stepLineWidth=Math.round(this.getLargestLabelWidth()/2),this.changeDetector.detectChanges())}ngOnDestroy(){this.steps.toArray().forEach(V=>V.valid.unsubscribe()),this.navigationControl.unsubscribe(),this.dashwizService.component=void 0}addStepDynamic(V,j){const le=this.componentFactoryResolver.resolveComponentFactory(p.u),ie=this.dynamicStep.createComponent(le);return ie.instance.stepTemplate=V.stepTemplate,this.arraySteps.splice(j,0,ie.instance),this.steps.reset(this.arraySteps),ie.instance}disableStep(V){const j=this.arraySteps.indexOf(V);this.arraySteps[j].disabled=!0,this.changeDetector.detectChanges()}enableStep(V){const j=this.arraySteps.indexOf(V);this.arraySteps[j].disabled=!1,this.changeDetector.detectChanges()}hideStep(V){const j=this.arraySteps.indexOf(V);this.arraySteps[j].hidden=!0}showStep(V){const j=this.arraySteps.indexOf(V);this.arraySteps[j].hidden=!1}goToStep(V){this.selectStep(this.arraySteps[V])}selectStep(V){V.disabled||(this.futureStep=V,this.currentStep.exitStep({currentStepIndex:this.arraySteps.indexOf(this.futureStep),currentStep:this.futureStep,previousStep:this.arraySteps[this.stepIndex],previousStepIndex:this.stepIndex}),this.navigationControl.value.allowStepChange&&this.enterAnotherStep())}enterAnotherStep(){var V;this.currentStep.applyExitingStep(),null===(V=this.futureStep)||void 0===V||V.enterStep(),this.futureStep&&(this.currentStep=this.futureStep),this.currentStep.applyEnteringStep(),this.stepIndex=this.arraySteps.indexOf(this.currentStep),this.stepNavigatedEvent={currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.arraySteps[this.previousStepIndex],previousStepIndex:this.previousStepIndex},this.stepNavigated.emit(this.stepNavigatedEvent),this.previousStepIndex=this.stepIndex}onButtonPortalOutput(V){var j,le;null===(le=(j=this.buttonPortalActionMap)[V.id])||void 0===le||le.call(j)}disableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(V=>{V.disabled=!0})}enableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(V=>{V.disabled=!1})}handleStepControl(V){N()(V.stepControl)||(V.stepControl?this.enableFollowingSteps():this.disableFollowingSteps())}getLargestLabelWidth(){const V=this.stepTitles.map(j=>j.nativeElement.offsetWidth);return Math.round(Math.max(...V))}}return te.placeholderFinishText="Action",te.\u0275fac=function(V){return new(V||te)(r.Y36(r.sBO),r.Y36(r._Vd),r.Y36(g.mQy),r.Y36(L.e))},te.\u0275cmp=r.Xpm({type:te,selectors:[["nui-dashwiz"]],contentQueries:function(V,j,le){if(1&V&&r.Suo(le,p.u,4),2&V){let ie;r.iGM(ie=r.CRH())&&(j.steps=ie)}},viewQuery:function(V,j){if(1&V&&(r.Gf(b,5,r.s_b),r.Gf(A,5)),2&V){let le;r.iGM(le=r.CRH())&&(j.dynamicStep=le.first),r.iGM(le=r.CRH())&&(j.stepTitles=le)}},hostAttrs:[1,"flex-grow-1","overflow-auto"],inputs:{hideHeader:"hideHeader",canProceed:"canProceed",canFinish:"canFinish",finishText:"finishText",stretchStepLines:"stretchStepLines",buttonComponentTypes:"buttonComponentTypes",navigationControl:"navigationControl"},outputs:{stepNavigated:"stepNavigated",cancel:"cancel",finish:"finish",next:"next",back:"back"},ngContentSelectors:ae,decls:10,vars:6,consts:[[1,"nui-dashwiz","d-flex","flex-column","h-100"],["class","nui-dashwiz__header",3,"nui-dashwiz__header--lines-stretched",4,"ngIf"],[1,"nui-scroll-shadows","flex-grow-1","overflow-auto"],["container",""],[1,"nui-dashwiz__footer"],["nuiComponentPortal","","componentId","dashwizButtons",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-dashwiz__header"],["class","nui-dashwiz__header-steps",4,"ngIf"],[1,"nui-dashwiz__header-steps"],["class","nui-dashwiz__header-step",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nui-dashwiz__header-step",3,"ngClass","click"],["class","nui-dashwiz__header-step-container",4,"ngIf"],[1,"nui-dashwiz__header-step-container"],[1,"nui-dashwiz__header-step-row"],[1,"nui-dashwiz__header-step-col"],[1,"nui-dashwiz__header-step-content"],[1,"nui-dashwiz__header-step-link"],[1,"nui-dashwiz__header-step-title"],["stepTitle",""],[1,"nui-dashwiz__header-step-link-container"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-right"],[1,"nui-dashwiz__header-step-line",3,"ngStyle"],[3,"icon","iconColor"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-left"]],template:function(V,j){if(1&V){const le=r.EpF();r.F$t(),r.TgZ(0,"div",0),r.YNc(1,U,2,3,"div",1),r.TgZ(2,"div",2),r.Hsn(3),r.YNc(4,K,0,0,"ng-template",null,3,r.W1O),r.qZA(),r.TgZ(6,"div",4),r.ynx(7,5,6),r.NdJ("output",function(me){return j.onButtonPortalOutput(me)}),r.YNc(9,q,0,0,"ng-template",7),r.NdJ("attached",function(me){return r.CHM(le),r.MAs(8).attached(me)}),r.BQk(),r.qZA()()}if(2&V){const le=r.MAs(8);r.xp6(1),r.Q6J("ngIf",!j.hideHeader),r.xp6(6),r.Q6J("componentType",1===j.buttonComponentTypes.length?j.buttonComponentTypes[0]:j.buttonComponentTypes[j.stepIndex])("properties",j.buttonProperties)("outputs",r.DdM(5,ne)),r.xp6(2),r.Q6J("cdkPortalOutlet",le.portal)}},directives:[y.O5,y.sg,y.mk,y.PC,g.oJW,D.$,G.Pl],styles:[".nui-dashwiz__header[_ngcontent-%COMP%]{padding:10px 15px;background-color:var(--nui-color-bg-secondary,#fafafa);border-bottom:1px solid #d9d9d9;border-bottom:1px solid var(--nui-color-line-default, #d9d9d9);overflow:hidden;text-align:center;display:flex;justify-content:center;-webkit-user-select:none;-o-user-select:none;user-select:none}.nui-dashwiz__header-steps[_ngcontent-%COMP%]{margin-bottom:0;white-space:nowrap;display:inline-flex}.nui-dashwiz__header-step[_ngcontent-%COMP%]{line-height:normal;display:inline-flex;cursor:pointer}.nui-dashwiz__header-step--disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:default}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--first[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%], .nui-dashwiz__header-step--last[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%]{border-color:transparent;opacity:0}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]{cursor:default}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-bg-dark,#111)}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{text-decoration:none}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step-container[_ngcontent-%COMP%]{display:inline-table;width:100%}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]{display:none}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0}.nui-dashwiz__header-step-row[_ngcontent-%COMP%]{display:table-row}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-default,#d9d9d9)}.nui-dashwiz__header-step-col-right[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{margin-right:-1px}.nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-bottom:solid 2px;height:2px}.nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6));transition:color .3s}.nui-dashwiz__header-step-link-container[_ngcontent-%COMP%]{display:flex;align-content:baseline;justify-content:center;align-items:center}.nui-dashwiz__header-step-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis;vertical-align:middle;display:inline-block;max-width:140px;margin:0 0 5px;text-decoration:inherit}.nui-dashwiz__header.nui-dashwiz__header--lines-stretched[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{max-width:unset}.nui-dashwiz__footer[_ngcontent-%COMP%]{z-index:1080;background-color:var(--nui-color-bg-content,#fff);border-top:solid 1px var(--nui-color-line-default, #d9d9d9)}"]}),te})()},59551:(oe,B,a)=>{"use strict";a.d(B,{e:()=>d});var r=a(5e3);let d=(()=>{class O{constructor(){}}return O.\u0275fac=function(S){return new(S||O)},O.\u0275prov=r.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},37716:(oe,B,a)=>{"use strict";a.d(B,{F:()=>d});var r=a(52382);function d(O){if(O.valid||O.untouched)return!1;if(O instanceof r.cw)for(const e of Object.keys(O.controls))if(d(O.controls[e]))return!0;if(O instanceof r.Oe)for(let e=0;e<O.length;e++)if(d(O.at(e)))return!0;return(O.touched||O.dirty)&&!!O.errors}},73193:(oe,B,a)=>{"use strict";a.d(B,{l:()=>O});var r=a(32656),d=a(5e3);let O=(()=>{class e{constructor(R){this.widgetTypesService=R}transform(R,N="widget"){var C,p;return(null==R?void 0:R.type)?null===(p=null===(C=this.widgetTypesService.getWidgetType(R.type,R.version).paths)||void 0===C?void 0:C[N])||void 0===p?void 0:p.root:null}}return e.\u0275fac=function(R){return new(R||e)(d.Y36(r.x,16))},e.\u0275pipe=d.Yjl({name:"nuiPizzagnaRoot",type:e,pure:!0}),e})()},16193:(oe,B,a)=>{"use strict";a.d(B,{F:()=>g});var r=a(39841),d=a(54482),O=a(25403),e=a(25032),R=a(68675),N=a(54004),C=a(25878),p=a(37716),v=a(5e3);let g=(()=>{class L{transform(D){if(!D)throw new Error("Provided form is undefined");return(0,r.a)([D.statusChanges,D.valueChanges]).pipe((0,R.O)(null),(0,N.U)(()=>(0,p.F)(D)?C.Nc.CRITICAL:C.Nc.DEFAULT),function S(L,y){return(0,d.e)((D,G)=>{const b=new Set;D.subscribe((0,O.x)(G,A=>{const W=L?L(A):A;b.has(W)||(b.add(W),G.next(A))})),null==y||y.subscribe((0,O.x)(G,()=>b.clear(),e.Z))})}())}}return L.\u0275fac=function(D){return new(D||L)},L.\u0275pipe=v.Yjl({name:"nuiWidgetEditorAccordionFormState",type:L,pure:!1}),L})()},15838:(oe,B,a)=>{"use strict";a.d(B,{d:()=>R});var r=a(39841),d=a(68675),O=a(54004),e=a(37716),S=a(5e3);let R=(()=>{class N{transform(p,v,g=N.ERROR_ICON_DEFAULT){if(!p)throw new Error("Provided form is undefined");return(0,r.a)([p.statusChanges,p.valueChanges]).pipe((0,d.O)(null),(0,O.U)(()=>(0,e.F)(p)?g:v))}}return N.ERROR_ICON_DEFAULT="status_critical",N.\u0275fac=function(p){return new(p||N)},N.\u0275pipe=S.Yjl({name:"nuiFormHeaderIconPipe",type:N,pure:!1}),N})()},61874:(oe,B,a)=>{"use strict";a.d(B,{q:()=>v});var r=a(34235),d=a.n(r),O=a(77579),e=a(61135),S=a(82722),R=a(25878),N=a(81466),C=a(5e3),p=a(59551);let v=(()=>{class g{constructor(y,D){this.eventBus=y,this.dashwizService=D,this.onDestroy$=new O.x,this.dataSourceCreated$=new O.x,this.error$=new O.x,this.busy$=new e.X(!1),this.dataSourceFields$=new e.X([]),this.eventBus.subscribeUntil(N.gg,this.onDestroy$,G=>{!G.payload||this.onDataSourceCreated(G.payload)}),this.eventBus.subscribeUntil(N.PF,this.onDestroy$,G=>{var b;if(null===(b=G.payload)||void 0===b?void 0:b.error)this.error$.next(G.payload.error);else{this.error$.next(null);const A=d()(G.payload.result)?G.payload:G.payload.result||{};(null==A?void 0:A.dataFields)&&this.dataSourceFields$.next(A.dataFields)}})}onDataSourceCreated(y){var D;this.dataSource=y,this.dataSourceCreated$.next(),null===(D=this.dataSource.busy)||void 0===D||D.pipe((0,S.R)(this.dataSourceCreated$)).subscribe(G=>{var b,A;null===(A=null===(b=this.dashwizService)||void 0===b?void 0:b.component)||void 0===A||A.navigationControl.next({busyState:{busy:G},allowStepChange:!G}),this.busy$.next(G)})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return g.\u0275fac=function(y){return new(y||g)(C.LFG(R.nY),C.LFG(p.e))},g.\u0275prov=C.Yz7({token:g,factory:g.\u0275fac}),g})()},32148:(oe,B,a)=>{"use strict";a.d(B,{p:()=>O});var r=a(61135),d=a(5e3);let O=(()=>{class e{constructor(){this.height$=new r.X(0)}}return e.\u0275fac=function(R){return new(R||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},42971:(oe,B,a)=>{"use strict";a.d(B,{J:()=>W});var r=a(11420),d=a(90733),O=a.n(d),e=a(75946),S=a.n(e),R=a(77579),N=a(60515),C=a(39646),p=a(68306),v=a(63900),g=a(70262),L=a(82722),y=a(39300),D=a(30652),G=a(32656),b=a(69155),A=a(5e3);let W=(()=>{class P{constructor(h,x,U,K,q,ne,ae){this.componentFactoryResolver=h,this.widgetTypesService=x,this.injector=U,this.appRef=K,this.logger=q,this.router=ae,this.close$=new R.x,this.handleSubmit=(ce,te)=>se=>se.pipe(this.trySubmit(te,ce),this.updateDashboard(ce.dashboardComponent)),this.trySubmit=(ce,te)=>se=>se.pipe((0,v.w)(V=>V&&S()(ce)?ce(V,te).pipe((0,g.K)(j=>(this.logger.error(j),this.componentRef.instance.handleSubmitError(),N.E))):(0,C.of)(V))),this.updateDashboard=ce=>te=>new p.y(se=>te.subscribe(V=>{if(V){let j;V.id=V.id||(0,D.VjN)(),j=ce.dashboard.widgets[V.id]?Object.assign(Object.assign({},V),{pizzagna:Object.assign(Object.assign({},this.widgetTypesService.getWidgetType(V.type,V.version).widget),{configuration:V.pizzagna.configuration})}):V,ce.removeWidget(j.id,!1),setTimeout(()=>{ce.updateWidget(j)})}this.close(),se.next()})),this.renderer=ne.createRenderer(null,null)}open(h){var x;const U={dashboardComponent:h.dashboardComponent,widget:O()(h.widget)};this.componentRef=this.appendComponentToBody();const K=this.componentRef.instance;return K.formPortal=h.portalBundle.portal,K.previewWidget=O()(h.widget),(null===(x=h.portalBundle)||void 0===x?void 0:x.attached)&&K.formPortalAttached.pipe((0,L.R)(this.close$)).subscribe(h.portalBundle.attached),K.changeDetector.detectChanges(),K.result.asObservable().pipe(this.handleSubmit(U,h.trySubmit))}close(){!this.renderer||(this.close$.next(),this.renderer.removeChild(document.body,this.componentRef.hostView.rootNodes[0]),this.appRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.renderer.removeStyle(document.body,"overflow"))}appendComponentToBody(){const x=this.componentFactoryResolver.resolveComponentFactory(b.n).create(this.injector);return this.appRef.attachView(x.hostView),this.renderer.appendChild(document.body,x.hostView.rootNodes[0]),this.renderer.setStyle(document.body,"overflow","hidden"),this.router&&this.router.events.pipe((0,y.h)(U=>U instanceof r.m2),(0,L.R)(this.close$)).subscribe(()=>this.close()),x}}return P.\u0275fac=function(h){return new(h||P)(A.LFG(A._Vd),A.LFG(G.x),A.LFG(A.zs3),A.LFG(A.z2F),A.LFG(D.mQy),A.LFG(A.FYo),A.LFG(r.F0,8))},P.\u0275prov=A.Yz7({token:P,factory:P.\u0275fac}),P})()},36216:(oe,B,a)=>{"use strict";a.d(B,{a:()=>N});var r=a(77579),d=a(42339),O=a(53450),e=a(25878),S=a(5e3),R=a(45122);let N=(()=>{class C{constructor(v,g,L){this.eventBus=v,this.previewService=g,this.pizzagnaService=L,this.destroy$=new r.x}ngAfterViewInit(){this.buildForm(),this.toPreview(this.component.form)}setComponent(v,g){this.component=v,this.componentId=g}getPreview(){return this.previewService.preview}updatePreview(v){this.previewService.preview=v}updateFormPizzagna(v){this.pizzagnaService.updatePizzagna(v),this.eventBus.getStream(O.M).next({payload:{path:"",value:v}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return C.\u0275fac=function(v){return new(v||C)(S.LFG(e.nY),S.LFG(R.m),S.LFG(d.p))},C.\u0275prov=S.Yz7({token:C,factory:C.\u0275fac}),C})()},75675:(oe,B,a)=>{"use strict";a.d(B,{l:()=>D});var r=a(18680),d=a.n(r),O=a(12498),e=a.n(O),S=a(95835),R=a.n(S),N=a(82722),C=a(30652),p=a(42339),v=a(25878),g=a(36216),L=a(5e3),y=a(45122);let D=(()=>{class G extends g.a{constructor(A,W,P){super(A,W,P),this.shouldReadForm=!1}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var A,W,P;const T=this.getPreview(),h=(null===(P=null===(W=null===(A=null==T?void 0:T.tiles)||void 0===A?void 0:A.properties)||void 0===W?void 0:W.nodes)||void 0===P?void 0:P.map(K=>({id:K,componentType:T[K].componentType})))||[],x=null==h?void 0:h.map(K=>K.id);this.pizzagnaService.createComponentsFromTemplate("tiles",x);let U=this.pizzagnaService.pizzagna;U=(0,C.zdu)(U,`${v.xW.Data}.tiles.properties.tiles`,h),setTimeout(()=>this.shouldReadForm=!0),this.updateFormPizzagna(U)}toPreview(A){var W;null===(W=A.get("tiles"))||void 0===W||W.valueChanges.pipe((0,N.R)(this.destroy$)).subscribe(P=>{var T,h;if(!this.shouldReadForm)return;let x=this.getPreview();const U=(P||[]).map(ne=>ne.id),K=d()(null===(h=null===(T=null==x?void 0:x.tiles)||void 0===T?void 0:T.properties)||void 0===h?void 0:h.nodes,U);K.length&&(x=R()(x,K));const q=e()(P,ne=>ne.id);x=(0,C.zdu)(x,"tiles.properties.nodes",U);for(const ne of U){const ae=q[ne];if(ae&&!x[ae.id]){const ce=this.getTileConfiguration(ae.id,ae.componentType);x=(0,C.zdu)(x,ae.id,ce)}}this.updatePreview(x)})}getTileConfiguration(A,W){return{id:A,providers:{dataSource:{providerId:void 0}}}}}return G.\u0275fac=function(A){return new(A||G)(L.LFG(v.nY),L.LFG(y.m),L.LFG(p.p))},G.\u0275prov=L.Yz7({token:G,factory:G.\u0275fac}),G})()},60167:(oe,B,a)=>{"use strict";a.d(B,{M:()=>p});var r=a(82722),d=a(30652),O=a(42339),e=a(25878),S=a(55413),R=a(36216),N=a(5e3),C=a(45122);let p=(()=>{class v extends R.a{constructor(L,y,D){super(L,y,D),this.PROPERTIES_PATH=`${e.xW.Configuration}.chartOptionsEditor.properties`}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var L,y,D,G,b,A,W,P,T,h,x;const U=null===(D=null===(y=null===(L=this.getPreview().chart)||void 0===L?void 0:L.properties)||void 0===y?void 0:y.configuration)||void 0===D?void 0:D.chartOptions;let K=this.pizzagnaService.pizzagna;K=(0,d.zdu)(K,`${this.PROPERTIES_PATH}.chartType`,null!==(G=null==U?void 0:U.type)&&void 0!==G?G:void 0),K=(0,d.zdu)(K,`${this.PROPERTIES_PATH}.legendPlacement`,null!==(b=null==U?void 0:U.legendPlacement)&&void 0!==b?b:S.w.None),K=(0,d.zdu)(K,`${this.PROPERTIES_PATH}.legendFormatterComponentType`,null!==(W=null===(A=null==U?void 0:U.legendFormatter)||void 0===A?void 0:A.componentType)&&void 0!==W?W:""),K=(0,d.zdu)(K,`${this.PROPERTIES_PATH}.contentFormatterComponentType`,null!==(T=null===(P=null==U?void 0:U.contentFormatter)||void 0===P?void 0:P.componentType)&&void 0!==T?T:"DonutContentRawFormatterComponent"),K=(0,d.zdu)(K,`${this.PROPERTIES_PATH}.contentFormatterProperties`,null!==(x=null===(h=null==U?void 0:U.contentFormatter)||void 0===h?void 0:h.properties)&&void 0!==x?x:""),this.updateFormPizzagna(K)}toPreview(L){L.valueChanges.pipe((0,r.R)(this.destroy$)).subscribe(y=>{const D=(0,d.zdu)(this.getPreview(),"chart.properties.configuration.chartOptions",y);this.updatePreview(D)})}}return v.\u0275fac=function(L){return new(L||v)(N.LFG(e.nY),N.LFG(C.m),N.LFG(O.p))},v.\u0275prov=N.Yz7({token:v,factory:v.\u0275fac}),v})()},42911:(oe,B,a)=>{"use strict";a.d(B,{c:()=>C});var r=a(82722),d=a(30652),O=a(42339),e=a(25878),S=a(36216),R=a(5e3),N=a(45122);class C extends S.a{constructor(v,g,L){super(v,g,L)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var v,g;let L=this.pizzagnaService.pizzagna;const y=null===(g=null===(v=this.getPreview())||void 0===v?void 0:v.header)||void 0===g?void 0:g.properties;L=(0,d.zdu)(L,`${C.PROPERTIES_PATH}.title`,null==y?void 0:y.title),L=(0,d.zdu)(L,`${C.PROPERTIES_PATH}.subtitle`,null==y?void 0:y.subtitle),L=(0,d.zdu)(L,`${C.PROPERTIES_PATH}.url`,null==y?void 0:y.url),L=(0,d.zdu)(L,`${C.PROPERTIES_PATH}.description`,null==y?void 0:y.description),L=(0,d.zdu)(L,`${C.PROPERTIES_PATH}.collapsible`,null==y?void 0:y.collapsible),this.updateFormPizzagna(L)}toPreview(v){v.valueChanges.pipe((0,r.R)(this.destroy$)).subscribe(g=>{const L=(0,d.zdu)(this.getPreview(),"header.properties",g);this.updatePreview(L)})}}C.PROPERTIES_PATH=`${e.xW.Configuration}.titleAndDescription.properties`,C.\u0275fac=function(v){return new(v||C)(R.LFG(e.nY),R.LFG(N.m),R.LFG(O.p))},C.\u0275prov=R.Yz7({token:C,factory:C.\u0275fac})},41294:(oe,B,a)=>{"use strict";a.d(B,{w:()=>h});var r=a(8817),d=a.n(r),O=a(71973),e=a.n(O),S=a(64509),R=a.n(S),N=a(34235),C=a.n(N),p=a(77579),v=a(39841),g=a(82722),L=a(54004),y=a(71884),D=a(30652),G=a(42339),b=a(25878),A=a(81466),W=a(36216),P=a(5e3),T=a(45122);let h=(()=>{class x extends W.a{constructor(K,q,ne){super(K,q,ne),this.indicatorDataKey="indicatorData",this.previewSeriesPath=`providers.${b.Mu.Adapter}.properties.series`,this.formSeriesComponentPath=`${b.xW.Data}.series.properties`,this.dataSourceSeries$=new p.x,this.selectedSeriesIds$=new p.x,this.shouldReadForm=!1,this.subscribeToAvailableDataFieldsChange(),this.eventBus.subscribeUntil(A.ay,this.destroy$,ae=>{const ce=`${b.xW.Structure}.series.properties.nodes`,te=d()(this.pizzagnaService.pizzagna,ce);this.pizzagnaService.removeComponents(te);let se=this.pizzagnaService.pizzagna;se=(0,D.zdu)(se,ce,[]),se=(0,D.zdu)(se,`${this.formSeriesComponentPath}.series`,[]),this.updateFormPizzagna(se)}),this.eventBus.subscribeUntil(A.PF,this.destroy$,ae=>{var ce;const{series:te}=C()(ae.payload.result)?ae.payload:ae.payload.result||{};if(te){this.dataSourceSeries$.next(te);let se=this.pizzagnaService.pizzagna;se=(0,D.zdu)(se,`${this.formSeriesComponentPath}.allSeries`,te);const j=(null===(ce=this.pizzagnaService.pizzagna[b.xW.Structure][this.component.componentId].properties)||void 0===ce?void 0:ce.template).findIndex(Ge=>Ge.id===this.indicatorDataKey);se=(0,D.zdu)(se,`${b.xW.Structure}.series.properties.template[${j}].properties.allSeries`,te),se=d()(this.getPreview(),`chart.${this.previewSeriesPath}`,[]).reduce((Ge,ze)=>(0,D.zdu)(Ge,`${b.xW.Data}.${ze.id}/${this.indicatorDataKey}.properties.allSeries`,te),se),this.updateFormPizzagna(se);const me=`${this.formSeriesComponentPath}.series`,Ie=d()(this.pizzagnaService.pizzagna,me);if(e()(Ie)){this.shouldReadForm=!1;const Ge=te.map(Ee=>({id:Ee.id,selectedSeriesId:Ee.id,label:Ee.name})),ze=(0,D.zdu)(this.getPreview(),`chart.${this.previewSeriesPath}`,Ge);this.updatePreview(ze),this.buildForm(),setTimeout(()=>{this.updateAvailableSeries([]),this.shouldReadForm=!0})}}})}buildForm(){const K=this.getPreview(),q=d()(K,`chart.${this.previewSeriesPath}`,[]),ne=q.map(se=>({id:se.id,selectedSeriesId:se.selectedSeriesId})),ae=q.map(se=>se.id);this.pizzagnaService.createComponentsFromTemplate("series",ae);const te=(0,D.zdu)(this.pizzagnaService.pizzagna,`${this.formSeriesComponentPath}.series`,ne);this.updateFormPizzagna(te),this.selectedSeriesIds$.next(ne.map(se=>se.selectedSeriesId)),setTimeout(()=>this.shouldReadForm=!0)}toPreview(K){K.valueChanges.pipe((0,g.R)(this.destroy$)).subscribe(q=>{if(!this.shouldReadForm)return;const ne=this.getPreview(),{chart:ae}=ne,ce=d()(ae,this.previewSeriesPath,[]),te=q.map(j=>Object.assign({id:j.id,selectedSeriesId:j.selectedSeriesId},ce.find(le=>le.id===j.id))),se=(0,D.zdu)(ne,`chart.${this.previewSeriesPath}`,te);this.updatePreview(se);const V=q.map(j=>d()(j,`properties[${j.id}/indicatorData].id`)).filter(j=>!e()(j));this.selectedSeriesIds$.next(V)})}ngOnDestroy(){this.dataSourceSeries$.complete(),this.selectedSeriesIds$.complete(),super.ngOnDestroy()}updateAvailableSeries(K){var q;if(!this.pizzagnaService.pizzagna)return;let ne=this.pizzagnaService.pizzagna;ne=(0,D.zdu)(ne,`${this.formSeriesComponentPath}.availableSeries`,K);const ce=(null===(q=this.pizzagnaService.pizzagna[b.xW.Structure][this.component.componentId].properties)||void 0===q?void 0:q.template).findIndex(V=>V.id===this.indicatorDataKey);ne=(0,D.zdu)(ne,`${b.xW.Structure}.series.properties.template[${ce}].properties.availableSeries`,K),ne=d()(this.pizzagnaService.pizzagna,`${b.xW.Structure}.series.properties.nodes`).reduce((V,j)=>(0,D.zdu)(V,`${b.xW.Data}.${j}/${this.indicatorDataKey}.properties.availableSeries`,K),ne),this.updateFormPizzagna(ne)}subscribeToAvailableDataFieldsChange(){(0,v.a)([this.dataSourceSeries$,this.selectedSeriesIds$]).pipe((0,g.R)(this.destroy$),(0,L.U)(([K,q])=>K.filter(ne=>!q.find(ae=>ae===ne.id))),(0,y.x)(R())).subscribe(this.updateAvailableSeries.bind(this))}}return x.\u0275fac=function(K){return new(K||x)(P.LFG(b.nY),P.LFG(T.m),P.LFG(G.p))},x.\u0275prov=P.Yz7({token:x,factory:x.\u0275fac}),x})()},27463:(oe,B,a)=>{"use strict";a.d(B,{l:()=>d});const d=new(a(5e3).OlP)("CONFIGURATOR_CONVERTER")},45122:(oe,B,a)=>{"use strict";a.d(B,{m:()=>O});var r=a(77579),d=a(5e3);let O=(()=>{class e{constructor(){this.previewChanged=new r.x}get preview(){return this._preview}set preview(R){this._preview=R,this.previewChanged.next(R)}}return e.\u0275fac=function(R){return new(R||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},67517:(oe,B,a)=>{"use strict";a.d(B,{s:()=>C});var r=a(90733),d=a.n(r),O=a(25878),e=a(64406),S=a(42971),R=a(5e3),N=a(94526);let C=(()=>{class p{constructor(g,L){this.configuratorService=g,this.componentPortalService=L}open(g){if(!g.portalBundle){const y={portal:this.componentPortalService.createComponentPortal(e.b,null),attached:D=>{var G;const b=D.instance;b.formPizzagna=g.formPizzagna,b.formRoot=null===(G=g.paths)||void 0===G?void 0:G.root,b.changeDetector.markForCheck()}};g.portalBundle=y}const L=d()(g.widget);return delete L.pizzagna[O.xW.Data],g.widget=L,this.configuratorService.open(g)}}return p.\u0275fac=function(g){return new(g||p)(R.LFG(S.J),R.LFG(N.$))},p.\u0275prov=R.Yz7({token:p,factory:p.\u0275fac}),p})()},81466:(oe,B,a)=>{"use strict";a.d(B,{PF:()=>e,ay:()=>R,gg:()=>N,yX:()=>S});var r=a(4707),d=a(61135),O=a(30652);const e=new O.JRy("DATA_SOURCE_OUTPUT",()=>new r.t(1)),S=new O.JRy("DATA_SOURCE_DESTROYED"),R=new O.JRy("DATA_SOURCE_CHANGE"),N=new O.JRy("DATA_SOURCE_CREATED",()=>new d.X({payload:void 0}))},16041:(oe,B,a)=>{"use strict";a.d(B,{K:()=>O});var r=a(5e3),d=a(33748);let O=(()=>{class e{constructor(R){this.gridsterItem=R}ngOnChanges(R){R.nuiGridsterItemWidgetId&&(this.gridsterItem.widgetId=this.nuiGridsterItemWidgetId)}}return e.\u0275fac=function(R){return new(R||e)(r.Y36(d.IM,3))},e.\u0275dir=r.lG2({type:e,selectors:[["","nuiGridsterItemWidgetId",""]],inputs:{nuiGridsterItemWidgetId:"nuiGridsterItemWidgetId"},features:[r.TTD]}),e})()},44994:(oe,B,a)=>{"use strict";a.d(B,{t:()=>P});var r=a(90733),d=a.n(r),O=a(77579),e=a(63900),S=a(82722),R=a(34575),N=a(67517),C=a(53450),p=a(75946),v=a.n(p),g=a(68306),L=a(60515),y=a(39646),D=a(70262),G=a(5e3),b=a(30652);let A=(()=>{class T{constructor(x){this.logger=x,this.updateDashboard=U=>K=>new g.y(q=>K.subscribe(ne=>{ne&&U.removeWidget(ne),q.next()}))}handleRemove(x,U,K,q){return this.tryRemove(q,U,K).pipe(this.updateDashboard(x))}tryRemove(x,U,K){return v()(x)?x(U,K).pipe((0,D.K)(q=>(this.logger.error(q),L.E))):(0,y.of)(U)}}return T.\u0275fac=function(x){return new(x||T)(G.LFG(b.mQy))},T.\u0275prov=G.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();var W=a(32656);let P=(()=>{class T{constructor(x,U,K,q){this.dashboardComponent=x,this.widgetEditorService=U,this.widgetRemovalService=K,this.widgetTypesService=q,this.destroy$=new O.x}ngOnInit(){this.dashboardComponent.eventBus.getStream(C.Ef).pipe((0,e.w)(x=>{const U=this.dashboardComponent.dashboard.widgets[x.widgetId],K=this.widgetTypesService.getWidgetType(U.type,U.version);return this.widgetEditorService.open({dashboardComponent:this.dashboardComponent,formPizzagna:K.configurator,paths:K.paths.configurator,widget:U,trySubmit:this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.trySubmit})}),(0,S.R)(this.destroy$)).subscribe(),this.dashboardComponent.eventBus.getStream(C.y4).pipe((0,e.w)(x=>{if(!x.widgetId)throw new Error("event has to have widgetId");const U=x.widgetId,K=this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.tryRemove,q={dashboardComponent:this.dashboardComponent,widget:d()(this.dashboardComponent.dashboard.widgets[U])};return this.widgetRemovalService.handleRemove(this.dashboardComponent,U,q,K)}),(0,S.R)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return T.\u0275fac=function(x){return new(x||T)(G.Y36(R.M,3),G.Y36(N.s),G.Y36(A),G.Y36(W.x))},T.\u0275dir=G.lG2({type:T,selectors:[["","nuiWidgetEditor",""]],inputs:{dashboardPersistenceHandler:["nuiWidgetEditor","dashboardPersistenceHandler"]}}),T})()},22783:(oe,B,a)=>{"use strict";a.d(B,{n:()=>N});var r=a(21503),d=a.n(r),O=a(50772),e=a.n(O),S=a(68921),R=a.n(S);function N(v,...g){const L=g.filter(b=>void 0!==b.previousValue||void 0!==b.currentValue);if(!e()(L,b=>b.currentValue!==b.previousValue))return v;if(1===L.length)return L[0].currentValue;const y=function p(v){for(const g of v){const L=typeof g.currentValue;if("undefined"!==L&&null!=g.currentValue)return d()(g.currentValue)?"object"==typeof g.currentValue[0]?"object[]":"array":g.currentValue.constructor!==Object?"advanced":L}return"undefined"}(L);return["object","object[]"].includes(y)?R()(...L.map(b=>"object"==typeof b.currentValue?Object.keys(b.currentValue||{}):[])).reduce((b,A)=>{const W=null==v||void 0===v[A]?void 0:v[A],P=L.map(T=>({previousValue:void 0===T.previousValue||null==T.previousValue?void 0:T.previousValue[A],currentValue:void 0===T.currentValue||null==T.currentValue?void 0:T.currentValue[A]}));return b[A]=N(W,...P),b},"object[]"===y?[]:{}):function C(v){for(let g=v.length-1;g>=0;g--){const L=v[g].currentValue;if(void 0!==L)return L}}(L)}},87686:(oe,B,a)=>{"use strict";a.d(B,{R:()=>y});var r=a(5e3),d=a(30652),O=a(22783),e=a(53450),S=a(25878),R=a(1892),N=a(42339),C=a(69808),p=a(47969),v=a(47429);function g(D,G){}function L(D,G){if(1&D){const b=r.EpF();r.ynx(0)(1,1,2),r.NdJ("output",function(W){return r.CHM(b),r.oxw().onOutput(W)}),r.YNc(3,g,0,0,"ng-template",3),r.NdJ("attached",function(W){return r.CHM(b),r.MAs(2).attached(W)}),r.BQk()()}if(2&D){const b=r.MAs(2),A=r.oxw();r.xp6(1),r.Q6J("componentId",A.rootNode)("componentType",null==A.pizza[A.rootNode]?null:A.pizza[A.rootNode].componentType)("properties",null==A.pizza[A.rootNode]?null:A.pizza[A.rootNode].properties)("providers",null==A.pizza[A.rootNode]?null:A.pizza[A.rootNode].providers)("outputs",A.outputs),r.xp6(2),r.Q6J("cdkPortalOutlet",b.portal)}}let y=(()=>{class D{constructor(b,A,W){this.pizzagnaService=b,this.logger=A,this.eventBus=W,this.rootNode=e.XM,this.pizzagnaChange=new r.vpe,this.output=new r.vpe,W.getStream(e.M).subscribe(P=>{const T=(0,d.zdu)(this.pizzagna,P.payload.path,P.payload.value);this._pizzagnaBuffer=T,this.pizzagnaChange.emit(T)})}get pizzagna(){return this._pizzagnaBuffer||this._pizzagna}set pizzagna(b){this._pizzagna=b,this._pizzagnaBuffer=null}ngOnChanges(b){if(b.pizzagna){const A=b.pizzagna.previousValue;this.pizzagnaService.updatePizzagna(this.pizzagna),this.pizza=this.mergePizzagnaIntoPizza(this.pizza,A,this.pizzagna),this.pizza&&!this.pizza[this.rootNode]&&this.logger.warn("Pizzagna doesn't contain root node '"+this.rootNode+"'. Pizzagna = ",this.pizzagna),this.pizzagnaService.updateComponents(this.pizza)}}onOutput(b){this.output.emit(b)}mergePizzagnaIntoPizza(b,A,W){return(0,O.n)(b,this.getLayerChanges(A,W,S.xW.Structure),this.getLayerChanges(A,W,S.xW.Configuration),this.getLayerChanges(A,W,S.xW.Data))}getLayerChanges(b,A,W){return{previousValue:this.getLayerSafe(b,W),currentValue:this.getLayerSafe(A,W)}}getLayerSafe(b,A){return b&&b[A]}}return D.\u0275fac=function(b){return new(b||D)(r.Y36(N.p),r.Y36(d.mQy),r.Y36(S.nY))},D.\u0275cmp=r.Xpm({type:D,selectors:[["nui-pizzagna"]],inputs:{rootNode:"rootNode",pizzagna:"pizzagna",outputs:"outputs"},outputs:{pizzagnaChange:"pizzagnaChange",output:"output"},features:[r._Bn([N.p,R.v,{provide:S.nY,useClass:d.Ndp}]),r.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(b,A){1&b&&r.YNc(0,L,4,6,"ng-container",0),2&b&&r.Q6J("ngIf",A.pizza&&A.pizza[A.rootNode])},directives:[C.O5,p.$,v.Pl],encapsulation:2}),D})()},47969:(oe,B,a)=>{"use strict";a.d(B,{$:()=>D});var r=a(5e3),d=a(21503),O=a.n(d),e=a(90377),S=a.n(e),R=a(19574),N=a.n(R),C=a(4707),p=a(77579),v=a(82722),g=a(98864),L=a(30652),y=a(94526);let D=(()=>{class G{constructor(A,W,P,T,h){this.injector=A,this.logger=W,this.portalService=P,this.renderer=T,this.providerRegistry=h,this.output=new r.vpe,this.propertiesChanges=new C.t,this.providerInstances={},this.destroy$=new p.x}ngOnInit(){this.logger.debug("Portal created:",this.componentId),this.recreatePortal()}ngAfterViewInit(){Object.keys(this.providerInstances).forEach(A=>{const W=this.providerInstances[A];W.ngAfterViewInit&&W.ngAfterViewInit()})}ngOnChanges(A){let W=!1;const P=A.providers;P&&!P.isFirstChange()&&(this.checkForProviderChanges(P)?(this.logger.debug("Portal recreated (provider change):",this.componentId),this.recreatePortal(),W=!0):this.updateProviderConfigurations(P)),A.componentType&&!A.componentType.isFirstChange()&&!W&&(this.logger.debug("Portal recreated (component change):",this.componentId),this.recreatePortal()),A.properties&&this.propertiesChanges.next(A.properties)}ngOnDestroy(){this.logger.debug("Portal destroyed:",this.componentId),this.destroyProviders(),this.destroy$.next(),this.destroy$.complete()}attached(A){this.component=A.instance,this.renderer.listen(A.location.nativeElement,"click",W=>{(W.ctrlKey||W.metaKey)&&W.shiftKey&&0===W.button&&(console.log("==================== PIZZAGNA DUMP ========================="),console.log("componentId:",this.componentId),console.log("component:",this.component),console.log("componentType:",this.componentType),console.log("properties:",this.properties),console.log("providers:",this.providers),console.log("providerInstances:",this.providerInstances),console.log("============================================================"))});for(const W of Object.keys(this.providerInstances)){const P=this.providerInstances[W];P.setComponent&&P.setComponent(this.component,this.componentId),P.setProviders&&P.setProviders(this.providerInstances,this.componentId)}this.subscribeToOutputs(),this.changesSubscription=this.propertiesChanges.pipe((0,v.R)(this.destroy$)).subscribe(W=>this.applyPropertiesChange(W))}recreatePortal(){this.changesSubscription&&(this.changesSubscription.unsubscribe(),this.changesSubscription=void 0,this.propertiesChanges=new C.t);let A=this.injector;if(this.destroyProviders(),this.providers&&(A=this.updateProviders(A)),this.portal=this.portalService.createComponentPortal(this.componentType,A),this.properties)for(const W of Object.keys(this.properties))this.propertiesChanges.next(new r.WD2(void 0,this.properties,!0))}updateProviders(A){const W=Object.keys(this.providers),P=W.reduce((h,x)=>(this.providers[x].providerId&&(h[x]=this.providerRegistry.getProvider(this.providers[x].providerId)),h),{}),T=this.portalService.createInjector({injector:A,providers:S()(P)});this.providerInstances=W.reduce((h,x)=>{const U=P[x],K=this.providers[x];if(U){const q=T.get(U.provide,null,null),ne=O()(q)?q.find(ae=>ae instanceof U.useClass):q;if(!ne)throw new Error("Provider '"+x+"' does not exist.");ne.updateConfiguration&&K.properties&&ne.updateConfiguration(Object.assign({providerKey:x},K.properties||{})),ne.providerKey=x,h[x]=ne}else K.providerId&&this.logger.error("There's no registered provider for id",x);return h},this.providerInstances);for(const h of Object.keys(this.providerInstances)){const x=this.providerInstances[h];x.ngOnInit&&x.ngOnInit()}return T}updateProviderConfigurations(A){for(const W of Object.keys(this.providers)){if(!this.providers[W].providerId)return;const P=this.providerInstances[W];if(!P)throw new Error("Provider '"+W+"' does not exist.");const T=A.previousValue[W],h=A.currentValue[W],U=h&&h.properties;(T&&T.properties)!==U&&P.updateConfiguration&&P.updateConfiguration(Object.assign({providerKey:W},U))}}subscribeToOutputs(){if(this.outputs)for(const A of this.outputs.filter(W=>this.component[W]instanceof r.vpe))this.component[A].pipe((0,v.R)(this.destroy$)).subscribe(W=>{this.output.emit({id:A,payload:W})})}checkForProviderChanges(A){const W=A.previousValue?Object.keys(A.previousValue):[],P=A.currentValue?Object.keys(A.currentValue):[];if(W.length!==P.length||N()(W,P).length>0)return!0;const T=Object.keys(A.previousValue).map(x=>A.previousValue[x].providerId),h=Object.keys(A.currentValue).map(x=>A.currentValue[x].providerId);return N()(T,h).length>0}destroyProviders(){if(this.providerInstances)for(const A of Object.keys(this.providerInstances)){const W=this.providerInstances[A];W.ngOnDestroy&&W.ngOnDestroy(),delete this.providerInstances[A]}}applyPropertiesChange(A){let W=A.currentValue;if(!W)return;W=Object.assign(Object.assign({},W),{componentId:this.componentId});const P={};let T=!1;for(const h of Object.keys(W)){const x=this.component[h];W[h]!==x&&(T=!0,this.component[h]=W[h],this.component.ngOnChanges&&(P[h]=new r.WD2(x,W[h],A.isFirstChange())))}if(T){this.component.ngOnChanges&&this.component.ngOnChanges(P);const h=this.component.changeDetector;h?h.markForCheck():this.logger.warn(`Property 'changeDetector' is missing on component '${this.componentType}', so dynamic refresh of given component might not work.`)}}}return G.\u0275fac=function(A){return new(A||G)(r.Y36(r.zs3),r.Y36(L.mQy),r.Y36(y.$),r.Y36(r.Qsj),r.Y36(g.C))},G.\u0275dir=r.lG2({type:G,selectors:[["","nuiComponentPortal",""]],inputs:{componentId:"componentId",componentType:"componentType",properties:"properties",providers:"providers",outputs:"outputs"},outputs:{output:"output"},exportAs:["nuiComponentPortal"],features:[r.TTD]}),G})()},29614:(oe,B,a)=>{"use strict";a.d(B,{Z:()=>d});var r=a(25878);function d(O){return O.providerKey?[O.pizzagnaKey||r.xW.Data,O.componentId,"providers",O.providerKey,"properties",...O.propertyPath].join("."):[O.pizzagnaKey||r.xW.Data,O.componentId,"properties",...O.propertyPath].join(".")}},94526:(oe,B,a)=>{"use strict";a.d(B,{$:()=>R});var r=a(47429),d=a(5e3),O=a(69769),e=a(40801),S=a(30652);let R=(()=>{class N{constructor(p,v){this.componentRegistry=p,this.logger=v}createComponentPortal(p,v){let g;return g="string"==typeof p?this.componentRegistry.getComponentType(p):p,g||(this.logger.error(`Cannot Find Component Type ${p}`),g=O.q),new r.C5(g,null,v)}createInjector(p){return d.zs3.create({providers:p.providers||[],parent:p.injector,name:"Component Injector"})}}return N.\u0275fac=function(p){return new(p||N)(d.LFG(e.h),d.LFG(S.mQy))},N.\u0275prov=d.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})()},40801:(oe,B,a)=>{"use strict";a.d(B,{h:()=>O});var r=a(5e3),d=a(30652);let O=(()=>{class e{constructor(R){this.logger=R,this.components={}}registerByLateLoadKey(R){this.registerComponentType(R.lateLoadKey,R)}registerComponentType(R,N){this.components[R]=N}getComponentType(R){const N=this.components[R];return N||this.logger.warn("Component '"+R+"' not defined. Available components: "+JSON.stringify(Object.keys(this.components))),N}}return e.\u0275fac=function(R){return new(R||e)(r.LFG(d.mQy))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1892:(oe,B,a)=>{"use strict";a.d(B,{v:()=>S});var r=a(30652),d=a(25878),O=a(5e3);let S=(()=>{class R{getPizzagnaUpdatedWithComponents(C,p,v){var g;const y=null===(g=C[d.xW.Structure][p].properties)||void 0===g?void 0:g.template;return this.getPizzagnaWithChildren(C,v,y,p)}getPizzagnaWithChildren(C,p,v,g){let y=p.map(D=>({id:D,componentType:"WidgetConfiguratorSectionComponent"})).reduce((D,G)=>this.updateChildPizzagna(D,v,G),C);return y=this.getPizzagnaWithNodesSet(y,g,p),y}updateChildPizzagna(C,p,v){let g=(0,r.zdu)(C,`${d.xW.Structure}.${v.id}`,v);const L=p.map(D=>Object.assign(Object.assign({},D),{id:`${v.id}/${D.id}`}));g=L.reduce((D,G)=>(0,r.zdu)(D,`${d.xW.Structure}.${G.id}`,G),g);const y=L.map(D=>D.id);return g=this.getPizzagnaWithNodesSet(g,v.id,y),g}getPizzagnaWithNodesSet(C,p,v){return(0,r.zdu)(C,`${d.xW.Structure}.${p}.properties.nodes`,v)}}return R.\u0275fac=function(C){return new(C||R)},R.\u0275prov=O.Yz7({token:R,factory:R.\u0275fac}),R})()},42339:(oe,B,a)=>{"use strict";a.d(B,{p:()=>L});var r=a(21503),d=a.n(r),O=a(95835),e=a.n(O),S=a(4707),R=a(30652),N=a(53450),C=a(25878),p=a(29614),v=a(1892),g=a(5e3);let L=(()=>{class y{constructor(G,b){this.eventBus=G,this.dynamicComponentCreator=b,this.pizzaChanged=new S.t(1)}updatePizzagna(G){this.pizzagna=G}updateComponents(G){this.components=G,this.pizzaChanged.next(G)}getComponent(G){const b=this.components[G];if(!b)throw new Error("Component '"+G+"' is not defined!");return b}setProperty(G,b){const A="string"==typeof G?G:(0,p.Z)(G);this.eventBus.getStream(N.M).next({payload:{path:A,value:b}})}createComponentsFromTemplateWithProperties(G,b){const A=b.map(P=>P.id);let W=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,G,A);for(const P of b)for(const T of Object.keys(P.children))W=(0,R.zdu)(W,`${C.xW.Data}.${T}.properties`,P.children[T]);this.updatePizzagna(W),this.eventBus.getStream(N.M).next({payload:{path:"",value:W}})}createComponentsFromTemplate(G,b){const A=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,G,b);this.updatePizzagna(A),this.eventBus.getStream(N.M).next({payload:{path:"",value:A}})}removeComponents(G){d()(G)?G.forEach(b=>this.removeComponent(b)):this.removeComponent(G)}removeComponent(G){var b;const A=Object.assign({},this.pizzagna),P=[G,...null===(b=this.pizzagna[C.xW.Structure][G].properties)||void 0===b?void 0:b.nodes],T=[C.xW.Structure,C.xW.Configuration,C.xW.Data];for(const h of T)if(A[h])for(const x of P)A[h]=e()(A[h],x);this.eventBus.getStream(N.M).next({payload:{path:"",value:A}}),this.updatePizzagna(A)}}return y.\u0275fac=function(G){return new(G||y)(g.LFG(C.nY),g.LFG(v.v))},y.\u0275prov=g.Yz7({token:y,factory:y.\u0275fac}),y})()},29242:(oe,B,a)=>{"use strict";a.d(B,{o:()=>d});var r=a(5e3);let d=(()=>{class O{constructor(){this.events={}}registerEvent(S){this.events[S.id]=S}getEvent(S){const R=this.events[S];if(!R)throw new Error("Event with id '"+S+"' is not registered. Registered events are: "+JSON.stringify(Object.keys(this.events)));return R}}return O.\u0275fac=function(S){return new(S||O)},O.\u0275prov=r.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},60343:(oe,B,a)=>{"use strict";a.d(B,{Z:()=>O});var r=a(5e3);const d={">":{comparatorFn:(e,S)=>e>S,label:"Value is greater than"},"<":{comparatorFn:(e,S)=>e<S,label:"Value is less than"},">=":{comparatorFn:(e,S)=>e>=S,label:"Value is greater, or equal to"},"<=":{comparatorFn:(e,S)=>e<=S,label:"Value is less than, or equal to"},"==":{comparatorFn:(e,S)=>e==S,label:"Value is exactly"}};let O=(()=>{class e{constructor(){this.comparators=Object.assign({},d)}registerComparators(R){this.comparators=Object.assign(Object.assign({},this.comparators),R)}clearComparators(){this.comparators={}}getComparators(){return this.comparators}}return e.\u0275fac=function(R){return new(R||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},98864:(oe,B,a)=>{"use strict";a.d(B,{C:()=>jt});var r=a(69808),d=a(5e3),O=a(30652),e=a(26365),S=a(82722),R=a(42339),N=a(53450),C=a(25878),g=function(z,Z){return function(I,M){Z(I,M,z)}};let L=class extends e.i{constructor(Z,I,M){super(Z,I,M),this.dataSource=I,this.drillstate=[],this.eventBus.getStream(N.EC).pipe((0,S.R)(this.destroy$)).subscribe(w=>{var H;(null===(H=this.dataSource.busy)||void 0===H?void 0:H.value)||this.onDrilldown(w)}),this.registerFilters()}updateAdapterProperties(Z){this.dataPath=Z.dataPath,this.drillstate=Z.drillstate||this.drillstate,this.groupBy=Z.groupBy,this.componentsConfig=Z.componentsConfig,this.navigationBarId=Z.navigationBarId}updateOutput(Z){const I=this.getWidgetInput(Z,this.drillstate.length!==this.groupBy.length);if(this.pizzagnaService.setProperty(`${C.xW.Data}.${this.componentId}.properties`,I),this.navigationBarId){const H=`${C.xW.Data}.${this.navigationBarId}.properties.navBarConfig.isRoot`,ee=`${C.xW.Data}.${this.navigationBarId}.properties.navBarConfig.buttons.back.disabled`;this.pizzagnaService.setProperty(`${C.xW.Data}.${this.navigationBarId}.properties.navBarConfig.label`,this.drillstate[this.drillstate.length-1]),this.pizzagnaService.setProperty(ee,!!this.drillstate.length),this.pizzagnaService.setProperty(H,!this.drillstate.length)}}getWidgetInput(Z,I){return{[this.dataPath]:Z,configuration:this.componentsConfig[I?"group":"leaf"]}}onDrilldown(Z){const{payload:I}=Z;return I.reset?(this.drillstate=[],void this.eventBus.next(N.RG,{})):I.back?(this.drillstate.length=this.drillstate.length-1,void this.eventBus.next(N.RG,{})):(this.drillstate.push(I.id),void this.eventBus.next(N.RG,{}))}registerFilters(){this.dataSource.registerComponent({group:{componentInstance:{getFilters:()=>({value:this.groupBy})}},drillstate:{componentInstance:{getFilters:()=>({value:this.drillstate})}}})}};L=function(z,Z,I,M){var ee,w=arguments.length,H=w<3?Z:null===M?M=Object.getOwnPropertyDescriptor(Z,I):M;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)H=Reflect.decorate(z,Z,I,M);else for(var re=z.length-1;re>=0;re--)(ee=z[re])&&(H=(w<3?ee(H):w>3?ee(Z,I,H):ee(Z,I))||H);return w>3&&H&&Object.defineProperty(Z,I,H),H}([g(0,(0,d.tBr)(C.nY)),g(1,(0,d.tBr)(C.Fk)),function(z,Z){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Z)}(0,[O.Ndp,Object,R.p])],L);var y=a(77579);let D=(()=>{class z{constructor(I){this.eventBus=I,this.destroy$=new y.x,I.streamAdded.pipe((0,S.R)(this.destroy$)).subscribe(M=>{I.getStream({id:M}).pipe((0,S.R)(this.destroy$)).subscribe(w=>{console.log(`${w.id}: `,w.payload)})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var G=a(38046),b=a(60343);let A=(()=>{class z{constructor(I,M,w){this.dataSource=I,this.pizzagnaService=M,this.destroy$=new y.x,this.propertyPath="backgroundColor",this.comparators=w.getComparators()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateConfiguration(I){(null==I?void 0:I.rules)&&(this.rules=null==I?void 0:I.rules,this.subscribeToDataChanges(),this.checkColorConditions())}setComponent(I,M){this.subscribeToDataChanges(),this.componentId=M}subscribeToDataChanges(){var I;!this.dataSource||(null===(I=this.dsSubscription$)||void 0===I||I.unsubscribe(),this.dsSubscription$=this.dataSource.outputsSubject.pipe((0,S.R)(this.destroy$)).subscribe(M=>{var w;this.latestValueFromDS=(null===(w=M.result)||void 0===w?void 0:w.value)||this.latestValueFromDS,this.checkColorConditions()}))}checkColorConditions(){var I,M;if(!this.rules)return;if(0===this.rules.length)return this.setColor(void 0),void(null===(I=this.dsSubscription$)||void 0===I||I.unsubscribe());let w;const H=this.rules&&[...this.rules].reverse();for(const ee of H)if(null===(M=this.comparators[ee.comparisonType])||void 0===M?void 0:M.comparatorFn(this.latestValueFromDS,ee.value)){w=ee.color;break}this.setColor(w)}setColor(I){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:[this.propertyPath]},I)}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.Fk,8),d.LFG(R.p),d.LFG(b.Z))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var W=a(33816),P=a.n(W),T=(()=>{return(z=T||(T={})).Warning="var(--nui-color-semantic-warning)",z.Critical="var(--nui-color-semantic-critical)",T;var z})(),K=function(z,Z){return function(I,M){Z(I,M,z)}};let q=class extends e.i{constructor(Z,I,M,w){super(Z,I,M),this.numberPipe=w}updateConfiguration(Z){this.thresholds=Z.thresholds,super.updateConfiguration(Z)}processOutput(Z){const I=this.processThresholds(Z);return this.processNumberFormat(I)}setComponent(Z,I){I&&(this.componentId=I)}getThresholdColor(Z,I,M){const w=this.getThresholdChecks(Z,I,Z.reversedThresholds);return w.warningCheck?T.Warning:w.criticalCheck?T.Critical:M}getThresholdChecks(Z,I,M){const w=Z.warningThresholdValue,H=Z.criticalThresholdValue,ee=!P()(w)&&I.value<=w&&I.value>H,re=I.value<=H,ge=!P()(w)&&I.value>=w&&I.value<H;return{warningCheck:M?ee:ge,criticalCheck:M?re:I.value>=H}}processThresholds(Z){var I;if(!Z||!(null===(I=this.thresholds)||void 0===I?void 0:I.showThresholds)||"number"!=typeof Z.value)return Z;const M=this.getThresholdColor(this.thresholds,Z,Z.backgroundColor);return Object.assign(Object.assign({},Z),{backgroundColor:M})}processNumberFormat(Z){if("number"!=typeof(null==Z?void 0:Z.value)||!(null==Z?void 0:Z.numberFormat))return Z;const I=this.numberPipe.transform(Z.value,Z.numberFormat);return Object.assign(Object.assign({},Z),{value:I})}};q=function(z,Z,I,M){var ee,w=arguments.length,H=w<3?Z:null===M?M=Object.getOwnPropertyDescriptor(Z,I):M;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)H=Reflect.decorate(z,Z,I,M);else for(var re=z.length-1;re>=0;re--)(ee=z[re])&&(H=(w<3?ee(H):w>3?ee(Z,I,H):ee(Z,I))||H);return w>3&&H&&Object.defineProperty(Z,I,H),H}([K(0,(0,d.tBr)(C.nY)),K(1,(0,d.FiY)()),K(1,(0,d.tBr)(C.Fk)),function(z,Z){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Z)}(0,[O.Ndp,Object,R.p,r.JJ])],q);var ne=a(21503),ae=a.n(ne),ce=a(61135),te=a(39300),se=a(71884),V=a(18505);let j=(()=>{class z{constructor(I,M){this.eventBus=I,this.pizzagnaService=M,this.brokers=[],this.builder=new le(this.brokers),this.destroySubscriptions$=new y.x,this.getMin=w=>Math.min(...w),this.getMax=w=>Math.max(...w),this.valuesObject=this.builder.valuesObject}updateConfiguration(I){this.properties=I,this.componentId&&this.createPropertiesAndSubscribeToBrokers()}configure(){return this.builder}getBrokers(){return this.brokers}subscribeToBrokers(){this.destroy(),this.brokers.forEach(I=>{I.in$.pipe((0,te.h)(M=>!!I.in$.observers.length),(0,se.x)(),(0,V.b)(M=>this.configureValueModel(M)),(0,V.b)(M=>this.processAndEmitSyncedValue(M,I)),(0,S.R)(this.destroySubscriptions$)).subscribe()})}setComponent(I,M){this.componentId=M,this.updateConfiguration(this.properties)}destroy(){this.destroySubscriptions$.next(),this.destroySubscriptions$.complete()}processAndEmitSyncedValue(I,M){let w=this.getMin;(null==M?void 0:M.type)&&(w="min"===M.type?this.getMin:this.getMax);const H=this.valuesObject[M.id].filter(ee=>ee.targetID&&ee.targetValue).map(ee=>ee.targetValue);M.out$.next(Object.assign(Object.assign({},I),{targetValue:w([...H])}))}configureValueModel(I){const M=this.valuesObject[I.id].filter(w=>w.targetID===I.targetID);M.length?M[0].targetValue=I.targetValue:this.valuesObject[I.id].push({targetID:I.targetID,targetValue:I.targetValue})}createPropertiesAndSubscribeToBrokers(){var I,M;this.tileNodes=null===(I=this.pizzagnaService.getComponent(this.componentId).properties)||void 0===I?void 0:I.nodes;const{scaleSyncConfig:w}=this.properties;(null===(M=this.tileNodes)||void 0===M?void 0:M.length)&&(this.tileNodes.forEach((H,ee)=>{this.pizzagnaService.setProperty({componentId:H,pizzagnaKey:C.xW.Data,propertyPath:["syncValuesBroker"]},this.getBrokers())}),w&&ae()(w)&&(w.forEach(H=>this.configure().addBroker({id:H.id,type:null==H?void 0:H.type})),this.subscribeToBrokers()))}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();class le{constructor(Z){this.brokers=Z,this.valuesObject={}}addBroker(Z){const I={id:Z.id,targetID:"",targetValue:1};return this.valuesObject[Z.id]=new Array,this.brokers.push(Object.assign(Object.assign({},Z),this.getDefaultBrokerObject(I,I))),this}getDefaultBrokerObject(Z,I){return{in$:new ce.X(Z),out$:new ce.X(I)}}}var ie=a(71973),me=a.n(ie),Ie=a(30836),Ge=a.n(Ie),ze=a(81466);let Ee=(()=>{class z{constructor(I,M){this.eventBus=I,this.pizzagnaService=M,this.destroy$=new y.x,this.eventBus.getStream(ze.PF).pipe((0,S.R)(this.destroy$)).subscribe(w=>{this.handleDataSourceOutput(w)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(I,M){this.componentId=M}handleDataSourceOutput(I){var M,w,H,ee;this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:C.xW.Data},void 0!==(null===(w=null===(M=I.payload)||void 0===M?void 0:M.error)||void 0===w?void 0:w.type)?null===(ee=null===(H=I.payload)||void 0===H?void 0:H.error)||void 0===ee?void 0:ee.type.toString():void 0)}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})(),je=(()=>{class z extends Ee{constructor(I,M){super(I,M),this.multipleErrorFallbackKey=C.WE.Unknown,this.errorMap={},this.eventBus.getStream(ze.yX).pipe((0,S.R)(this.destroy$)).subscribe(w=>{this.handleDataSourceDestroyed(w)})}updateConfiguration(I){I.multipleErrorFallbackKey&&(this.multipleErrorFallbackKey=I.multipleErrorFallbackKey)}handleDataSourceOutput(I){this.errorMap=this.updateErrorMap(I),this.setFallbackKeyProperty()}handleDataSourceDestroyed(I){var M;(null===(M=I.payload)||void 0===M?void 0:M.componentId)&&delete this.errorMap[I.payload.componentId],this.setFallbackKeyProperty()}setFallbackKeyProperty(){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:C.xW.Data},this.getFallbackKey())}getFallbackKey(){if(me()(this.errorMap))return;const I=Ge()(Object.values(this.errorMap));return 1===I.length?I[0]:this.multipleErrorFallbackKey}updateErrorMap(I){var M,w,H,ee;const re=this.errorMap,ge=void 0!==(null===(w=null===(M=I.payload)||void 0===M?void 0:M.error)||void 0===w?void 0:w.type)?null===(ee=null===(H=I.payload)||void 0===H?void 0:H.error)||void 0===ee?void 0:ee.type.toString():void 0;return ge?ge&&(re[I.payload.componentId]=ge):delete re[I.payload.componentId],re}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})(),ct=(()=>{class z{constructor(I,M){this.eventBus=I,this.pizzagnaService=M,this.loadingMap={},this.destroy$=new y.x,this.eventBus.getStream(N.QD).pipe((0,S.R)(this.destroy$)).subscribe(({payload:w})=>{(null==w?void 0:w.componentId)&&((null==w?void 0:w.busy)?this.loadingMap[w.componentId]=!0:delete this.loadingMap[w.componentId]),this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["active"],pizzagnaKey:C.xW.Data},!me()(this.loadingMap))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(I,M){this.componentId=M}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var _t=a(8817),Re=a.n(_t),Xe=a(54004);const st=/\{.*?\}/g,ut=/\{|\}/g;function pt(z,Z){const I=z.match(st);if(!I)return z;let M=z;for(const w of I){const H=gt(w);Z[H]?M=M.replace(w,Z[H]):console.warn(`There's no ${w} key found in the data: ${Z}`)}return M}const gt=z=>z.replace(ut,"");let at=(()=>{class z{constructor(I){this.pizzagnaService=I,this.defaultTrackOn="pizzagna",this.subscriptions=[]}setComponent(I,M){this.component=I,this.componentId=M,this.parentComponentId=function rt(z){const Z=z.split("/");return(null==Z?void 0:Z.length)>1?Z[Z.length-2]:z}(M),this.initChangeSubscriptions()}updateConfiguration(I){this.configs=null==I?void 0:I.configs}initChangeSubscriptions(){for(const I of this.configs){const M=this.getObservableFor(I);if(!M)return void console.warn("no observable found on 'PizzagnaBroadcasterService', for part: ",I);const w=M.subscribe(H=>{for(const ee of I.paths){const re=pt(ee,this);this.pizzagnaService.setProperty(re,H)}});this.subscriptions.push(w)}}getObservableFor(I){return"component"===(I.trackOn||this.defaultTrackOn)?this.getComponentObservableFor(I):this.getPizzagnaObservableFor(I)}getPizzagnaObservableFor(I){return this.pizzagnaService.pizzaChanged.pipe((0,Xe.U)(M=>Re()(M,I.key)),(0,se.x)())}getComponentObservableFor(I){const M=Re()(this.component,I.key);return null==M?void 0:M.pipe((0,se.x)())}ngOnDestroy(){for(const I of this.subscriptions)I.unsubscribe()}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var lt=a(97674),de=a(61455),ye=a(42296),bt=a(10948),xt=a(59551),Ot=a(61874),Lt=a(16372),dt=a.n(Lt),tt=a(36216),Ne=a(45122);let Y=(()=>{class z extends tt.a{constructor(I,M,w){super(I,M,w)}get previewComponentId(){return this.componentId.split("/")[0]}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),M=this.formParts.reduce((w,H)=>{const ee=`${this.previewComponentId}.${H.previewPath}`,re=Re()(I,ee);if(re)for(const ge of H.keys)void 0!==re[ge]&&(w=(0,O.zdu)(w,`${C.xW.Data}.${this.componentId}.properties.${ge}`,re[ge]));return w},this.pizzagnaService.pizzagna);this.updateFormPizzagna(M)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(M=>{const w=this.formParts.reduce((H,ee)=>{let re=ee.previewOutputPath||ee.previewPath;re=`${this.previewComponentId}.${re}`;const ge=Re()(H,re),Oe=dt()(M,ee.keys),Ye=Object.assign(Object.assign({},ge),Oe);return(0,O.zdu)(H,`${re}`,Ye)},this.getPreview());this.updatePreview(w)})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var _=a(75675),c=a(60167);let m=(()=>{class z extends tt.a{constructor(I,M,w){super(I,M,w)}get previewComponentId(){return this.componentId.split("/")[0]}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),M=this.formParts.reduce((w,H)=>{const ee=Re()(I,H.previewPath),re=null==ee?void 0:ee.find(Oe=>Oe.id===this.previewComponentId),ge=dt()(re,H.keys);return(0,O.zdu)(w,`${C.xW.Data}.${this.componentId}.properties`,ge)},this.pizzagnaService.pizzagna);this.updateFormPizzagna(M)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(M=>{const w=this.formParts.reduce((H,ee)=>{const re=ee.previewOutputPath||ee.previewPath,ge=Re()(H,re),Oe=ge.findIndex(ei=>ei.id===this.previewComponentId),Ye=ge[Oe],It=dt()(M,ee.keys),qt=Object.assign(Object.assign({},Ye),It);return(0,O.zdu)(H,`${re}[${Oe}]`,qt)},this.getPreview());this.updatePreview(w)})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})(),E=(()=>{class z extends tt.a{constructor(I,M,w){super(I,M,w)}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),M=this.formParts.reduce((w,H)=>{const ee=Re()(I,H.previewPath);if(ee)for(const re of H.keys)void 0!==ee[re]&&(w=(0,O.zdu)(w,`${C.xW.Data}.${this.componentId}.properties.${re}`,ee[re]));return w},this.pizzagnaService.pizzagna);this.updateFormPizzagna(M)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(M=>{const w=this.formParts.reduce((H,ee)=>{const re=ee.previewOutputPath||ee.previewPath,ge=Re()(H,re),Oe=dt()(M,ee.keys),Ye=Object.assign(Object.assign({},ge),Oe);return(0,O.zdu)(H,re,Ye)},this.getPreview());this.updatePreview(w)})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var k=a(42911),J=a(52382),_e=a(64509),fe=a.n(_e),he=a(68675),Pe=a(94813);let Ze=(()=>{class z extends tt.a{constructor(I,M,w){super(I,M,w)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var I,M,w,H;const ee=null===(I=this.getPreview())||void 0===I?void 0:I.table,re=null===(M=null==ee?void 0:ee.properties)||void 0===M?void 0:M.dataFields,ge=null===(H=null===(w=null==ee?void 0:ee.properties)||void 0===w?void 0:w.configuration)||void 0===H?void 0:H.columns;let Oe=this.pizzagnaService.pizzagna;Oe=(0,O.zdu)(Oe,`${C.xW.Data}.columns.properties.columns`,null!=ge?ge:[]),Oe=(0,O.zdu)(Oe,`${C.xW.Data}.columns.properties.dataFields`,re),this.updateFormPizzagna(Oe)}toPreview(I){const M=I.contains("columnsOutput")?I.get("columnsOutput"):I.get("columns");if(!M)throw new Error("FormControl is not defined!");M.valueChanges.pipe((0,S.R)(this.destroy$),(0,se.x)(fe())).subscribe(w=>{setTimeout(()=>{const re=this.getPreview();this.updatePreview((0,O.zdu)(re,"table.properties.configuration.columns",w))});let ee=this.pizzagnaService.pizzagna;setTimeout(()=>{var re,ge,Oe,Ye,It;ee=(0,O.zdu)(ee,`${C.xW.Structure}.columns.properties.template`,null===(re=this.pizzagnaService.pizzagna[C.xW.Structure].columns.properties)||void 0===re?void 0:re.template),ee=(0,O.zdu)(ee,`${C.xW.Data}.filters.properties.columns`,w),ee=(0,O.zdu)(ee,`${C.xW.Structure}.presentation.properties.nodes`,[...null!==(It=null===(Ye=null===(Oe=null===(ge=null==ee?void 0:ee.structure)||void 0===ge?void 0:ge.presentation)||void 0===Oe?void 0:Oe.properties)||void 0===Ye?void 0:Ye.nodes)&&void 0!==It?It:[]]),this.updateFormPizzagna(ee)})}),this.subscribeToColumnsValueChange()}subscribeToColumnsValueChange(){var I;null===(I=this.component.form.get("columnsOutput"))||void 0===I||I.valueChanges.pipe((0,he.O)(this.component.form.get("columnsOutput").value),(0,te.h)(M=>M.length>0),(0,V.b)(()=>this.handleWidthValidation()),(0,Xe.U)(M=>this.filterColumnsWithoutSpecifiedWidth(M)),(0,Xe.U)(M=>this.handleColumnsWithoutSpecifiedWidth(M)),function Ce(z,Z){return(0,se.x)((I,M)=>Z?Z(I[z],M[z]):I[z]===M[z])}("id"),(0,Pe.j)("id"),(0,S.R)(this.destroy$)).subscribe(M=>this.setWidthMessages(M))}filterColumnsWithoutSpecifiedWidth(I){return I.filter(M=>M.isActive&&!M.width)}handleColumnsWithoutSpecifiedWidth(I){switch(I.length){case 0:{const M=this.component.form.get("columns").controls.filter(H=>Re()(H,`value.properties[${H.value.id}/description].isActive`));if(me()(M))return{id:void 0,label:void 0};const w=M[M.length-1];return console.warn(`Cannot set width for all columns. Resetting "${w.value.label}" width.`),w.patchValue({width:null},{emitEvent:!1}),w.value}case 1:return I[0];default:return{id:void 0,label:void 0}}}handleWidthValidation(){this.component.form.get("columns").controls.forEach(I=>{var M;const H=I.get(`properties.${I.value.id}/description`);if(!H)return;const ee=null===(M=H.get("isActive"))||void 0===M?void 0:M.value,re=H.get("width");ee?(null==re||re.setValidators([J.kI.min(62)]),null==re||re.markAllAsTouched(),null==re||re.updateValueAndValidity({emitEvent:!1})):(null==re||re.clearValidators(),null==re||re.updateValueAndValidity({emitEvent:!1}))})}setWidthMessages(I){var M;if(!this.pizzagnaService.pizzagna)return;const w="isWidthMessageDisplayed",{pizzagna:H}=this.pizzagnaService;(null===(M=H.data.columns.properties)||void 0===M?void 0:M.columns).forEach(re=>this.pizzagnaService.setProperty(`${C.xW.Data}.${re.id}/description.properties.${w}`,!1)),I&&this.pizzagnaService.setProperty(`${C.xW.Data}.${I}/description.properties.${w}`,!0)}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})(),Be=(()=>{class z extends tt.a{constructor(I,M,w){super(I,M,w)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var I,M,w,H,ee;let re=this.pizzagnaService.pizzagna;const ge=null===(I=this.getPreview())||void 0===I?void 0:I.table,Oe=null===(w=null===(M=null==ge?void 0:ge.properties)||void 0===M?void 0:M.configuration)||void 0===w?void 0:w.columns,Ye=null===(ee=null===(H=null==ge?void 0:ge.properties)||void 0===H?void 0:H.configuration)||void 0===ee?void 0:ee.sorterConfiguration;re=(0,O.zdu)(re,`${C.xW.Data}.filters.properties.columns`,Oe),re=(0,O.zdu)(re,`${C.xW.Data}.filters.properties.sorterConfiguration`,Ye),this.updateFormPizzagna(re)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(M=>{let w=this.getPreview();w=(0,O.zdu)(w,"table.properties.configuration.sorterConfiguration",M.sorterConfiguration),this.updatePreview(w),this.buildForm()})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})(),Le=(()=>{class z extends tt.a{constructor(I,M,w,H){super(I,M,w),this.timeframeService=H}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){let I=this.pizzagnaService.pizzagna;const M=this.getPreview(),w=Object.keys(this.timeframeService.currentPresets).map(Oe=>({id:Oe,name:this.timeframeService.currentPresets[Oe].name})),H=`${C.xW.Data}.timeseriesMetadata.properties`;I=(0,O.zdu)(I,`${H}.timeSpans`,w);const ee=Re()(M,"timeframeSelection.properties.timeframe.selectedPresetId","last7Days"),re=w.find(Oe=>Oe.id===ee);re&&(I=(0,O.zdu)(I,`${H}.startingTimespan`,re));const ge=Re()(M,"chart.properties.configuration");ge&&(I=(0,O.zdu)(I,`${H}.legendPlacement`,ge.legendPlacement),I=(0,O.zdu)(I,`${H}.leftAxisLabel`,ge.leftAxisLabel),I=(0,O.zdu)(I,`${H}.preset`,ge.preset)),this.updateFormPizzagna(I)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(M=>{let w=this.getPreview();const H=Re()(M,"startingTimespan.id");H&&(w=(0,O.zdu)(w,"timeframeSelection.properties.timeframe.selectedPresetId",H));const ee="chart.properties.configuration";w=(0,O.zdu)(w,`${ee}.legendPlacement`,Re()(M,"legendPlacement","")),w=(0,O.zdu)(w,`${ee}.leftAxisLabel`,Re()(M,"leftAxisLabel","")),w=(0,O.zdu)(w,`${ee}.preset`,Re()(M,"preset","")),this.updatePreview(w)})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p),d.LFG(O.hYR))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var We=a(41294);let qe=(()=>{class z extends tt.a{constructor(I,M,w){super(I,M,w),this.previewSeriesPath=`chart.providers.${C.Mu.Adapter}.properties.series`}get previewComponentId(){return this.componentId.split("/")[0]}buildForm(){const M=Re()(this.getPreview(),this.previewSeriesPath,[]).find(ee=>ee.id===this.previewComponentId),H=(0,O.zdu)(this.pizzagnaService.pizzagna,`${C.xW.Data}.${this.componentId}.properties`,{selectedSeriesId:M&&M.selectedSeriesId});this.updateFormPizzagna(H)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(M=>{const w=M.id,H=this.getPreview(),ee=Re()(H,this.previewSeriesPath,[]),re=ee.findIndex(ge=>ge.id===this.previewComponentId);if(re>-1){const ge=[...ee];ge[re]=Object.assign(Object.assign({},ge[re]),{selectedSeriesId:w});const Oe=(0,O.zdu)(H,`${this.previewSeriesPath}`,ge);this.updatePreview(Oe)}})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var we=a(27463),Nt=a(29242),it=a(47243),De=a(99567),$t=a(63776),Fe=a(294);let jt=(()=>{class z{constructor(I){this.logger=I,this.staticProviders={},this.setProviders({[N.tc]:{provide:lt.q,deps:[C.nY,d.R0b,de.g]},[N.GN]:{provide:Fe.q,deps:[C.nY,[new d.FiY,C.Bc],[new d.FiY,$t.I],Nt.o,R.p]},[N.bZ]:{provide:e.i,deps:[C.nY,[new d.FiY,C.Fk],R.p]},[N.l5]:{provide:ye.Y,deps:[C.nY,[new d.FiY,C.Fk],R.p,O.zCP]},[N.R9]:{provide:bt.f,deps:[C.nY,[new d.FiY,C.Fk],R.p]},[N.u1]:{provide:q,deps:[C.nY,[new d.FiY,C.Fk],R.p,r.JJ]},[N.mf]:{provide:L,deps:[C.nY,[new d.FiY,C.Fk],R.p]},[N.tS]:{provide:A,deps:[[new d.FiY,C.Fk],R.p,b.Z]},[N.j4]:{provide:we.l,useClass:k.c,deps:[C.nY,Ne.m,R.p]},[N.dz]:{provide:we.l,useClass:c.M,deps:[C.nY,Ne.m,R.p]},[N.ns]:{provide:we.l,useClass:_.l,deps:[C.nY,Ne.m,R.p]},[N.YN]:{provide:we.l,useClass:Y,deps:[C.nY,Ne.m,R.p]},[N.VX]:{provide:we.l,useClass:E,deps:[C.nY,Ne.m,R.p]},[N.Es]:{provide:we.l,useClass:m,deps:[C.nY,Ne.m,R.p]},[N.Gq]:{provide:we.l,useClass:qe,deps:[C.nY,Ne.m,R.p,O.hYR]},[N.dZ]:{provide:we.l,useClass:Le,deps:[C.nY,Ne.m,R.p,O.hYR]},[N.Ip]:{provide:we.l,useClass:We.w,deps:[C.nY,Ne.m,R.p]},[N.n5]:{provide:we.l,useClass:Ze,deps:[C.nY,Ne.m,R.p]},[N.LU]:{provide:we.l,useClass:Be,deps:[C.nY,Ne.m,R.p]},[N.IG]:{provide:ct,deps:[C.nY,R.p]},[N.Cz]:{provide:Ee,deps:[C.nY,R.p]},[N.C]:{provide:je,deps:[C.nY,R.p]},[N.$u]:{provide:j,deps:[C.nY,R.p]},[N.DJ]:{provide:G.O,deps:[C.nY,"windowObject",O.mQy,De.v]},[N.F]:{provide:D,deps:[C.nY]},[N.Vx]:{provide:O.zCP,deps:[]},[N.m_]:{provide:at,deps:[R.p]},[N.Hp]:{provide:C.m4,useExisting:it.C,deps:[R.p]},[N.s6]:{provide:C.m4,useExisting:it.YX,deps:[R.p]},[N.rf]:{provide:C.m4,useExisting:it.UA,deps:[R.p]},[N.Xh]:{provide:Ot.q,deps:[C.nY,[new d.FiY,xt.e]]}})}setProviders(I){this.staticProviders=Object.assign({},this.staticProviders,I)}getProvider(I){const M=this.staticProviders[I];return M||(this.logger.warn("No provider registered for id",I),this.logger.warn("Known providers:",Object.keys(this.staticProviders).join(", "))),M}getProviderInstance(I,M){return d.zs3.create({providers:[I],parent:M}).get(C.Fk)}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(O.mQy))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})()},21366:(oe,B,a)=>{"use strict";a.d(B,{k:()=>S});var r=a(61135),d=a(54004),O=a(30652),e=a(5e3);let S=(()=>{class R{constructor(C,p){this.logger=C,this.className=p,this.state$=new r.X({}),this.stateChanged$=this.state$.asObservable().pipe((0,d.U)(()=>this.getItems())),this._isEmpty=!0}get stateVersion(){return this._stateVersion}get isEmpty(){return this._isEmpty}addItems(C,p={overrideExisting:!0}){const v=this.state$.value;C.forEach(g=>{!v[this.getItemKey(g)]||p.overrideExisting?v[this.getItemKey(g)]=Object.assign({},g):this.logger.warn(`Logger - ${this.className}: item with ${this.getItemKey(g)}\n                    is already registered. Skipping.`)}),this.state$.next(v),C.length>0&&this.updateStateFlags(!1)}getItem(C){return this.state$.value[C]}getItems(){return Object.values(this.state$.value)}reset(){this.state$.next({}),this.updateStateFlags(!0)}ngOnDestroy(){this.state$.complete()}updateStateFlags(C){this._isEmpty=C,this._stateVersion=(0,O.VjN)()}}return R.\u0275fac=function(C){e.$Z()},R.\u0275dir=e.lG2({type:R}),R})()},47243:(oe,B,a)=>{"use strict";a.d(B,{C:()=>S,UA:()=>N,YX:()=>R,qy:()=>C});var r=a(21366),d=a(5e3),O=a(30652);class e extends r.k{constructor(){super(...arguments),this.formattersStateChanged$=this.stateChanged$}addFormatters(v,g={overrideExisting:!0}){super.addItems(v,g)}getFormatters(){return super.getItems()}getItemKey(v){return v.componentType}}let S=(()=>{class p extends e{constructor(g){super(g,"TableFormatterRegistryService")}}return p.\u0275fac=function(g){return new(g||p)(d.LFG(O.mQy))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),R=(()=>{class p extends e{constructor(g){super(g,"KpiFormattersRegistryService")}}return p.\u0275fac=function(g){return new(g||p)(d.LFG(O.mQy))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),N=(()=>{class p extends e{constructor(g){super(g,"ProportionalDonutContentFormattersRegistryService")}}return p.\u0275fac=function(g){return new(g||p)(d.LFG(O.mQy))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),C=(()=>{class p extends e{constructor(g){super(g,"ProportionalLegendFormattersRegistryService")}}return p.\u0275fac=function(g){return new(g||p)(d.LFG(O.mQy))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},53450:(oe,B,a)=>{"use strict";a.d(B,{$u:()=>Xe,C:()=>Re,Cz:()=>_t,DJ:()=>rt,EC:()=>h,Ef:()=>C,Es:()=>ze,F:()=>st,GN:()=>le,Gq:()=>je,Hp:()=>gt,IG:()=>ct,Ip:()=>j,LU:()=>me,M:()=>D,MO:()=>p,N9:()=>W,QD:()=>A,R1:()=>T,R9:()=>K,RG:()=>S,VX:()=>Ge,Vx:()=>pt,XM:()=>e,Xh:()=>ye,Xi:()=>L,YN:()=>Ee,b1:()=>P,bZ:()=>U,dZ:()=>V,df:()=>R,dz:()=>te,j4:()=>ce,j7:()=>v,kV:()=>y,l5:()=>Ie,m_:()=>ut,mf:()=>ne,n5:()=>ie,ns:()=>se,pV:()=>g,re:()=>G,rf:()=>lt,s6:()=>at,tS:()=>ae,tc:()=>x,u1:()=>q,xZ:()=>b,y4:()=>N});var r=a(61135),d=a(4707),O=a(30652);const e="/",S=new O.JRy("REFRESH"),R=new O.JRy("SCROLL_NEXT_PAGE"),N=new O.JRy("WIDGET_REMOVE"),C=new O.JRy("WIDGET_EDIT"),p=new O.JRy("WIDGET_CREATE"),v=new O.JRy("WIDGET_READY"),g=new O.JRy("WIDGET_RESIZE"),L=new O.JRy("WIDGET_POSITION_CHANGE"),y=new O.JRy("WIDGET_SEARCH",()=>new r.X({payload:""})),D=new O.JRy("SET_PROPERTY_VALUE"),G=new O.JRy("SET_TIMEFRAME"),b=new O.JRy("PREVIEW_EVENT"),A=new O.JRy("DATA_SOURCE_BUSY"),W=new O.JRy("DASHBOARD_EDIT_MODE",()=>new d.t(1)),P=new O.JRy("INTERACTION"),T=new O.JRy("DATA_SOURCE_INVOKED"),h=new O.JRy("DRILLDOWN"),x="NOVA_DATASOURCE_INTERVAL_REFRESHER",U="NOVA_DATASOURCE_ADAPTER",K="NOVA_TIMESERIES_DATASOURCE_ADAPTER",q="NOVA_KPI_DATASOURCE_ADAPTER",ne="NOVA_DRILLDOWN_DATASOURCE_ADAPTER",ae="NOVA_KPI_COLOR_PRIORITIZER",ce="NOVA_TITLE_AND_DESCRIPTION_CONVERTER",te="NOVA_PROPORTIONAL_WIDGET_CHART_OPTIONS_CONVERTER",se="NOVA_KPI_TILES_CONVERTER",V="NOVA_TIMESERIES_METADATA_CONVERTER",j="NOVA_TIMESERIES_SERIES_CONVERTER",le="NOVA_DASHBOARD_EVENT_PROXY",ie="NOVA_TABLE_COLUMNS_CONVERTER",me="NOVA_TABLE_FILTERS_CONVERTER",Ie="NOVA_TABLE_DATASOURCE_ADAPTER",Ge="NOVA_GENERIC_CONVERTER",ze="NOVA_GENERIC_ARRAY_CONVERTER",Ee="NOVA_KPI_SECTION_CONVERTER",je="NOVA_TIMESERIES_TILE_INDICATOR_DATA_CONVERTER",ct="NOVA_LOADING_ADAPTER",_t="NOVA_STATUS_CONTENT_FALLBACK_ADAPTER",Re="NOVA_KPI_STATUS_CONTENT_FALLBACK_ADAPTER",Xe="NOVA_KPI_SCALE_SYNC_BROKER",rt="NOVA_URL_INTERACTION_HANDLER",st="NOVA_EVENT_BUS_DEBUGGER",ut="NOVA_PIZZAGNA_BROADCASTER",pt="NOVA_VIRTUAL_VIEWPORT_MANAGER",gt="NOVA_TABLE_FORMATTERS_REGISTRY",at="NOVA_KPI_FORMATTERS_REGISTRY",lt="NOVA_PROPORTIONAL_CONTENT_FORMATTERS_REGISTRY",ye="NOVA_CONFIGURATOR_DATA_SOURCE_MANAGER"},99567:(oe,B,a)=>{"use strict";a.d(B,{v:()=>O});var r=a(5e3),d=a(30652);let O=(()=>{class e{constructor(R){this.logger=R}template(R,N){const C=new RegExp(/\$\{([a-zA-Z0-9.]*)\}/g);return R.replace(C,(p,v)=>{var g;try{return null!==(g=this.evaluate(v.split("."),N))&&void 0!==g?g:""}catch(L){return this.logger.error(L),""}})}evaluate(R,N){return R.reduce((C,p)=>C[p],N)}}return e.\u0275fac=function(R){return new(R||e)(r.LFG(d.mQy))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},63776:(oe,B,a)=>{"use strict";a.d(B,{I:()=>d});var r=a(5e3);let d=(()=>{class O{updateWidget(S){this.widget=S}getWidget(){return this.widget}}return O.\u0275fac=function(S){return new(S||O)},O.\u0275prov=r.Yz7({token:O,factory:O.\u0275fac}),O})()},294:(oe,B,a)=>{"use strict";a.d(B,{q:()=>L});var r=a(12498),d=a.n(r),O=a(30836),e=a.n(O),S=a(77579),R=a(82722),N=a(42339),C=a(25878),p=a(5e3),v=a(63776),g=a(29242);let L=(()=>{class y{constructor(G,b,A,W,P){this.pizzagnaBus=G,this.dashboardBus=b,this.widgetConfigurationService=A,this.eventRegistry=W,this.pizzagnaService=P,this.upstreamSubscriptions={},this.downstreamSubscriptions={},this.destroy$=new S.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(G){this.component=G}updateConfiguration(G){this.providerKey=G.providerKey,this.upstreams=G.upstreams,this.downstreams=G.downstreams,this.upstreams&&this.registerUpstreamSubscriptions(...this.upstreams),this.downstreams&&this.registerDownstreamSubscriptions(...this.downstreams)}addUpstream(G){this.addStream(G,"upstreams")}addDownstream(G){this.addStream(G,"downstreams")}addStream(G,b){const A=e()((this[b]||[]).concat(G.id));this[b]=A,this.component&&this.pizzagnaService.setProperty({componentId:this.component.componentId,pizzagnaKey:C.xW.Data,providerKey:this.providerKey,propertyPath:[b]},A)}registerUpstreamSubscriptions(...G){!this.dashboardBus||this.registerSubscriptions(G,this.upstreamSubscriptions,this.pizzagnaBus,(b,A)=>{const W=this.widgetConfigurationService.getWidget().id;this.dashboardBus.getStream(b).next(Object.assign({},A,{widgetId:W}))})}registerDownstreamSubscriptions(...G){!this.dashboardBus||this.registerSubscriptions(G,this.downstreamSubscriptions,this.dashboardBus,(b,A)=>{const W=this.widgetConfigurationService.getWidget().id;(void 0===A.widgetId||W===A.widgetId)&&this.pizzagnaBus.getStream(b).next(A)})}registerSubscriptions(G=[],b,A,W){const P=G?d()(G,T=>T):null;for(const T of Object.keys(b))(!P||!P[T])&&(b[T].unsubscribe(),delete b[T]);for(const T of Object.keys(null!=P?P:{}).filter(h=>!b[h])){const h=this.eventRegistry.getEvent(T);b[T]=A.getStream(h).pipe((0,R.R)(this.destroy$)).subscribe(x=>{W(h,x)})}}}return y.\u0275fac=function(G){return new(G||y)(p.LFG(C.nY),p.LFG(C.Bc,8),p.LFG(v.I,8),p.LFG(g.o),p.LFG(N.p))},y.\u0275prov=p.Yz7({token:y,factory:y.\u0275fac}),y})()},32656:(oe,B,a)=>{"use strict";a.d(B,{x:()=>N});var r=a(69754),d=a.n(r),O=a(34793),e=a.n(O),S=a(25878),R=a(5e3);let N=(()=>{class C{constructor(){this.widgetTypes={}}registerWidgetType(v,g,L){let y=this.widgetTypes[v];y||(y=[],this.widgetTypes[v]=y),y.length<g&&(y.length=g),y[g-1]=L}getWidgetType(v,g){const L=this.widgetTypes[v];if(!L||0===L.length)throw new Error("Type '"+v+"' not found in the registry. Available types: "+Object.keys(this.widgetTypes).join(", "));if(void 0!==g&&(g<=0||L.length<g))throw new Error("Version "+g+" for widget type '"+v+"' not registered. Max available version is "+L.length);return L[(void 0===g?L.length:g)-1]}mergeWithWidgetType(v){const g=this.getWidgetType(v.type,v.version);return Object.assign(Object.assign({},v),{pizzagna:d()(v.pizzagna,g.widget)})}setNode(v,g,L,y){var D,G;const W=`${g}.${S.xW.Structure}.${(null===(G=null===(D=v.paths)||void 0===D?void 0:D[g])||void 0===G?void 0:G[L])||L}`;e()(v,W,y)}}return C.\u0275fac=function(v){return new(v||C)},C.\u0275prov=R.Yz7({token:C,factory:C.\u0275fac}),C})()},25878:(oe,B,a)=>{"use strict";a.d(B,{AC:()=>p,B5:()=>N,Bc:()=>O,Fk:()=>e,Mu:()=>C,Nc:()=>L,WE:()=>y,m4:()=>S,nY:()=>d,ni:()=>v,xW:()=>g});var r=a(5e3);const d=new r.OlP("PIZZAGNA_EVENT_BUS"),O=new r.OlP("DASHBOARD_EVENT_BUS"),e=new r.OlP("DATA_SOURCE"),S=new r.OlP("FORMATTERS_REGISTRY"),N=(new r.OlP("TEST_REGISTRY"),new r.OlP("HEADER_LINK_PROVIDER"));var C=(()=>{return(D=C||(C={})).DataSource="dataSource",D.Adapter="adapter",D.Converter="converter",D.Broadcaster="broadcaster",D.Refresher="refresher",D.EventProxy="eventProxy",D.LoadingAdapter="loadingAdapter",D.ContentFallbackAdapter="contentFallbackAdapter",D.InteractionHandler="interactionHandler",D.EventBusDebugger="eventBusDebugger",D.KpiColorPrioritizer="kpiColorPrioritizer",D.FormattersRegistry="formattersRegistry",D.DataSourceManager="dataSourceManager",C;var D})(),p=(()=>{return(D=p||(p={})).Root="root",D.DataSourceConfigComponentType="dataSourceConfigComponentType",D.TileDescriptionConfigComponentType="tileDescriptionConfigComponentType",D.DataSourceProviders="dataSourceProviders",D.Formatters="formatters",D.TileDescriptionBackgroundColors="tileDescriptionBackgroundColors",D.TileBackgroundColorRulesBackgroundColors="tileBackgroundColorRulesBackgroundColors",p;var D})(),v=(()=>{return(D=v||(v={})).Interactivity="interactivity",D.DisableTableColumnGeneration="disableTableColumnGeneration",v;var D})(),g=(()=>{return(D=g||(g={})).Structure="structure",D.Configuration="configuration",D.Data="data",g;var D})(),L=(()=>{return(D=L||(L={})).CRITICAL="critical",D.WARNING="warning",D.DEFAULT="default",L;var D})(),y=(()=>{return(D=y||(y={})).Unknown="0",D.Ok="200",D.Forbidden="403",D.NotFound="404",y;var D})()},55413:(oe,B,a)=>{"use strict";a.d(B,{w:()=>r});var r=(()=>{return(d=r||(r={})).None="None",d.Right="Right",d.Bottom="Bottom",r;var d})()},50793:(oe,B,a)=>{"use strict";a.d(B,{X:()=>e});var r=a(16134),d=a(61621);const e=[{componentType:a(14366).a.lateLoadKey,label:$localize`No Formatter`,dataTypes:{value:null}},{componentType:d.s.lateLoadKey,label:$localize`Link`,configurationComponent:"LinkConfiguratorComponent",dataTypes:{value:"label",link:"link"}},{componentType:r.C.lateLoadKey,label:$localize`Icon`,dataTypes:{value:"string"}}]},45388:(oe,B,a)=>{"use strict";a.d(B,{hiK:()=>Ti.h,p3D:()=>Je.p,Fk3:()=>h.Fk,ay7:()=>Ue.ay,PFv:()=>Ue.PF,vXf:()=>Mi,tFi:()=>Bl,XMI:()=>T.XM,wz0:()=>kl,NlZ:()=>Wl,pPd:()=>od,MXM:()=>L.M,cY_:()=>ro,dsi:()=>Yi,vHB:()=>Hi,O5k:()=>Oi,TAb:()=>Ii,gIB:()=>Ft,B:()=>b,lc0:()=>Pi,Ksf:()=>y,PIV:()=>mt,AOA:()=>bi,B5u:()=>h.B5,WEY:()=>h.WE,Cg1:()=>vi.C,ZhR:()=>fe.Z,ufE:()=>j,Klf:()=>Xt,woB:()=>Fe.w,s9y:()=>Wt.s,vB5:()=>lt,fp5:()=>Ot,mf:()=>T.mf,VXI:()=>T.VX,tSO:()=>T.tS,u1$:()=>T.u1,$uq:()=>T.$u,j4g:()=>T.j4,DJm:()=>T.DJ,Qpk:()=>Uo,Pi:()=>td,nYw:()=>h.nY,ntI:()=>Ei,xW5:()=>h.xW,khc:()=>Ce,UAh:()=>_e.UA,qy4:()=>_e.qy,EMX:()=>De,CNH:()=>E.C,aDR:()=>Mt.a,g4s:()=>ii.g,PEA:()=>kt,aAT:()=>Ee,Car:()=>_e.C,CKZ:()=>$e,D9N:()=>ot,Usc:()=>ft,Q$d:()=>Qe,MOJ:()=>T.MO,zer:()=>Tt,CyH:()=>Rt,niB:()=>h.ni,ACc:()=>h.AC,Muk:()=>h.Mu,$Ie:()=>wo,jFY:()=>ke,xTe:()=>J.x,GE5:()=>id,Amp:()=>Kt,j5E:()=>nt,LtV:()=>Qt,O9d:()=>Ct});var r=a(69808),d=a(30652),O=a(92120),e=a(5e3);let S=(()=>{class o{constructor(t){this.changeDetector=t,this.defaultClasses="d-flex flex-column justify-content-center w-100 p-3",this.elementClass=""}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`}}return o.lateLoadKey="WidgetErrorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-error"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{image:"image",title:"title",description:"description",elementClass:"elementClass"},decls:6,vars:3,consts:[[3,"image"],[1,"widget-error__title"],[1,"d-flex","justify-content-center","text-center"]],template:function(t,i){1&t&&(e._UZ(0,"nui-image",0),e.TgZ(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._uU(5),e.qZA()),2&t&&(e.Q6J("image",i.image),e.xp6(3),e.Oqu(i.title),e.xp6(2),e.Oqu(i.description))},directives:[d.cuP],styles:[".widget-error__title[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center;margin-top:20px;margin-bottom:10px}"]}),o})(),N=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[r.ez,d.sF0],r.ez]}),o})();var C=a(8083),p=a(52382),v=a(33748),g=a(23913),L=a(34575),y=(()=>{return(o=y||(y={}))[o.URL=0]="URL",o[o.HTML=1]="HTML",y;var o})(),D=a(22313);const G=["anchor"];let b=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.document=i,this.domSanitizer=n,this.sanitized=!0,this.elementClass=""}ngOnInit(){this.validateAndApplyEmbeddedContent()}ngOnChanges(t){t.customEmbeddedContent&&!t.customEmbeddedContent.firstChange&&this.validateAndApplyEmbeddedContent()}validateAndApplyEmbeddedContent(){const t=this.sanitized&&this.sanitizeContext(this.mode===y.URL?e.q3G.URL:e.q3G.HTML);if(this.anchor.nativeElement.innerHTML="",this.mode===y.URL){const i=this.document.createElement("iframe");i.src=this.sanitized?t:this.customEmbeddedContent,i.width="100%",i.height="100%",this.anchor.nativeElement.appendChild(i)}else this.anchor.nativeElement.innerHTML=this.sanitized?t:this.customEmbeddedContent}sanitizeContext(t){var i;return this.domSanitizer.sanitize(t,null===(i=this.customEmbeddedContent)||void 0===i?void 0:i.trim())}}return o.lateLoadKey="EmbeddedContentComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(r.K0),e.Y36(D.H7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-embedded-content"]],viewQuery:function(t,i){if(1&t&&e.Gf(G,7),2&t){let n;e.iGM(n=e.CRH())&&(i.anchor=n.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{mode:"mode",customEmbeddedContent:"customEmbeddedContent",sanitized:"sanitized",elementClass:"elementClass"},features:[e.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["anchor",""]],template:function(t,i){1&t&&e._UZ(0,"div",0,1)},encapsulation:2,changeDetection:0}),o})();var A=a(33816),W=a.n(A);function P(o,l){const{dataFieldIds:t}=o.properties||{};let i;return i=t?Object.keys(t).reduce((n,s)=>(n[s]=l[t[s]],n),{}):{value:l.value},i}var T=a(53450),h=a(25878),x=a(47969),U=a(47429);function K(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"a",4),e.GkF(2,5),e.qZA(),e.BQk()),2&o){const t=e.oxw(),i=e.MAs(4);e.xp6(1),e.Q6J("href",t.widgetData.link,e.LSH),e.xp6(1),e.Q6J("ngTemplateOutlet",i)}}function q(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().onInteraction()}),e.GkF(2,5),e.qZA(),e.BQk()}if(2&o){e.oxw();const t=e.MAs(4);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}function ne(o,l){}function ae(o,l){if(1&o){const t=e.EpF();e.ynx(0,15,16),e.TgZ(2,"div",17)(3,"span",18),e.YNc(4,ne,0,0,"ng-template",19),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.qZA()(),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw(2);let n,s;e.Q6J("componentType",null==i.configuration||null==i.configuration.formatters||null==i.configuration.formatters.Value||null==i.configuration.formatters.Value.formatter?null:i.configuration.formatters.Value.formatter.componentType)("properties",i.formattersProperties.Value),e.xp6(3),e.Q6J("ngClass","IconFormatterComponent"===(null==i.configuration||null==i.configuration.formatters||null==i.configuration.formatters.Value||null==i.configuration.formatters.Value.formatter?null:i.configuration.formatters.Value.formatter.componentType)?"without-filter":"")("useZoom",!1)("scaleIN$",null==(n=i.getScaleBroker("value"))?null:n.out$)("scaleOUT$",null==(s=i.getScaleBroker("value"))?null:s.in$),e.xp6(1),e.Q6J("cdkPortalOutlet",t.portal)}}const ce=function(o){return{"background-color":o}},te=function(o){return{color:o}};function se(o,l){if(1&o&&(e._UZ(0,"div",7),e.TgZ(1,"div",8)(2,"div",9)(3,"div",10)(4,"span",11),e._uU(5),e.qZA()(),e.YNc(6,ae,5,7,"ng-container",12),e.TgZ(7,"div",13)(8,"span",14),e._uU(9),e.qZA()()()()),2&o){const t=e.oxw(),i=e.MAs(6);let n,s,u,f;e.ekj("nui-kpi-indicator--interactive",t.interactive),e.Q6J("ngStyle",e.VKq(18,ce,t.backgroundColor||(null==t.widgetData?null:t.widgetData.backgroundColor))),e.xp6(1),e.Q6J("ngStyle",e.VKq(20,te,(null==t.widgetData?null:t.widgetData.textColor)||t.backgroundColor||(null==t.widgetData?null:t.widgetData.backgroundColor)||t.defaultColor)),e.xp6(2),e.Q6J("title",null==t.widgetData?null:t.widgetData.label),e.xp6(1),e.Q6J("useZoom",!1)("minScale",.5)("scaleIN$",null==(n=t.getScaleBroker("label"))?null:n.out$)("scaleOUT$",null==(s=t.getScaleBroker("label"))?null:s.in$),e.xp6(1),e.Oqu(null==t.widgetData?null:t.widgetData.label),e.xp6(1),e.Q6J("ngIf",null==t.configuration||null==t.configuration.formatters?null:t.configuration.formatters.Value)("ngIfElse",i),e.xp6(1),e.Q6J("title",null==t.widgetData?null:t.widgetData.units),e.xp6(1),e.Q6J("useZoom",!1)("scaleIN$",null==(u=t.getScaleBroker("units"))?null:u.out$)("scaleOUT$",null==(f=t.getScaleBroker("units"))?null:f.in$)("minScale",.5),e.xp6(1),e.Oqu(null==t.widgetData?null:t.widgetData.units)}}function V(o,l){if(1&o&&(e.TgZ(0,"div",20)(1,"span",21),e._uU(2),e.qZA()()),2&o){const t=e.oxw();let i,n;e.Udp("font-size",null==t.widgetData?null:t.widgetData.fontSize),e.Q6J("title",null==t.widgetData?null:t.widgetData.value),e.xp6(1),e.Q6J("useZoom",!1)("scaleIN$",null==(i=t.getScaleBroker("value"))?null:i.out$)("scaleOUT$",null==(n=t.getScaleBroker("value"))?null:n.in$),e.xp6(1),e.hij(" ",null==t.widgetData?null:t.widgetData.value,"")}}let j=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.dataSource=i,this.eventBus=n,this.busy=!1,this.elementClass="",this.defaultColor="var(--nui-color-bg-secondary)"}get interactive(){var t,i,n,s,u;return((null===(t=this.configuration)||void 0===t?void 0:t.interactive)||(null===(s=null===(n=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===n?void 0:n.getFeatureConfig(h.ni.Interactivity))||void 0===s?void 0:s.enabled))&&!W()(null===(u=this.widgetData)||void 0===u?void 0:u.value)||!1}onInteraction(){!this.interactive||this.eventBus.getStream(T.b1).next({payload:{data:this.widgetData}})}getScaleBroker(t){if(this.syncValuesBroker)return this.syncValuesBroker.find(i=>i.id===t)}ngOnChanges(t){var i;if(t.configuration){const n=t.configuration.currentValue.formatters;n&&(this.formattersProperties=this.getFormatterProperties(n))}t.widgetData&&(null===(i=this.configuration)||void 0===i?void 0:i.formatters)&&(this.formattersProperties=this.getFormatterProperties(this.configuration.formatters))}getFormatterProperties(t){return Object.keys(t).reduce((s,u)=>{var f;const F=null===(f=t[u])||void 0===f?void 0:f.formatter;return F&&(s[u]={data:P(F,this.widgetData)}),s},{})}}return o.lateLoadKey="KpiComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(h.Fk,8),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-kpi"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",backgroundColor:"backgroundColor",syncValuesBroker:"syncValuesBroker",configuration:"configuration",busy:"busy"},features:[e.TTD],decls:7,vars:3,consts:[["nui-busy","",1,"w-100","h-100",3,"busy"],[4,"ngIf"],["kpiContent",""],["kpiValueRaw",""],[1,"nui-kpi-indicator",3,"href"],[3,"ngTemplateOutlet"],[1,"nui-kpi-indicator",3,"click"],[1,"nui-kpi-indicator__background",3,"ngStyle"],[1,"nui-kpi-indicator__text",3,"ngStyle"],[1,"nui-kpi-indicator__zoom-container"],[1,"nui-kpi-indicator__description",3,"title"],["nuiZoomContent","",3,"useZoom","minScale","scaleIN$","scaleOUT$"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties",4,"ngIf","ngIfElse"],[1,"nui-kpi-indicator__units",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$","minScale"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[1,"nui-kpi-indicator__value"],["nuiZoomContent","",3,"ngClass","useZoom","scaleIN$","scaleOUT$"],[3,"cdkPortalOutlet","attached"],[1,"nui-kpi-indicator__value",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,K,3,2,"ng-container",1),e.YNc(2,q,3,1,"ng-container",1),e.qZA(),e.YNc(3,se,10,22,"ng-template",null,2,e.W1O),e.YNc(5,V,3,7,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("busy",i.busy),e.xp6(1),e.Q6J("ngIf",null==i.widgetData?null:i.widgetData.link),e.xp6(1),e.Q6J("ngIf",!(null!=i.widgetData&&i.widgetData.link)))},directives:[d.ERI,r.O5,r.tP,r.PC,d.mEK,x.$,r.mk,U.Pl],styles:[".nui-kpi-indicator[_ngcontent-%COMP%]{position:relative;display:block;height:100%;width:100%}.nui-kpi-indicator__background[_ngcontent-%COMP%]{height:100%;width:100%;background-color:var(--nui-color-bg-secondary,#fafafa);color:var(--nui-color-text-default,#111)}.nui-kpi-indicator__text[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;pointer-events:none}.nui-kpi-indicator__text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}.nui-kpi-indicator__value[_ngcontent-%COMP%]{font-size:54px;font-weight:600;margin:auto 0;min-width:100%;white-space:nowrap;display:flex;align-items:center;justify-content:center;height:100%;min-height:5px;max-height:200px}.nui-kpi-indicator__value[_ngcontent-%COMP%] > span.without-filter[_ngcontent-%COMP%]{filter:unset}.nui-kpi-indicator__units[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-bottom:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__units[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__description[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-top:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__description[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__zoom-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:30% 40% 30%;width:100%;height:100%}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]{cursor:pointer}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]:hover{filter:brightness(90%)}"],changeDetection:0}),o})();var le=a(42339),ie=a(77579),me=a(22783);let Ie=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.pizzagnaService=i,this.logger=n,this.destroyed$=new ie.x}ngOnChanges(t){(t.nodes||t.template)&&this.updateNodeConfigs({changesNodes:t.nodes,changesTemplate:t.template})}ngDoCheck(){this.checkNodeConfigs()&&(this.updateNodeConfigs(),this.changeDetector.detectChanges())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}trackByFn(t,i){return i.id}checkNodeConfigs(){const t=this.getNodes();if(!this.nodeComponentsConfigs||t.length!==this.nodeComponentsConfigs.length)return!0;for(let i=0;i<t.length;i++)if(this.pizzagnaService.getComponent(t[i])!==this.nodeComponentsConfigs[i])return!0;return!1}updateNodeComponentConfigs(){const t=this.getNodes();this.nodeComponentsConfigs=t&&t.map(i=>{const n=this.pizzagnaService.getComponent(i);if(void 0===n)throw new Error("No component with id '"+i+"' was defined in the configuration.");return n})}updateNodeConfigs(t){this.nodeConfigs=(0,me.n)(this.nodeConfigs,this.getTemplateChangeForNodes(t),this.getNodeComponentsConfigs())}getNodeComponentsConfigs(){const t={currentValue:void 0,previousValue:this.nodeComponentsConfigs?[...this.nodeComponentsConfigs]:void 0};return this.updateNodeComponentConfigs(),t.currentValue=this.nodeComponentsConfigs,t}getTemplateChangeForNodes(t){const{changesNodes:i,changesTemplate:n}=t||{},s=u=>{var f;return u&&(null===(f=this.getNodes())||void 0===f?void 0:f.map(()=>u))};return{currentValue:s(n?n.currentValue:this.template),previousValue:i?this.template:s(n?n.previousValue:this.template)}}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.sBO),e.LFG(le.p),e.LFG(d.mQy))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function Ge(o,l){}function ze(o,l){if(1&o){const t=e.EpF();e.ynx(0)(1,1,2),e.YNc(3,Ge,0,0,"ng-template",3),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk()()}if(2&o){const t=l.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let Ee=(()=>{class o extends Ie{constructor(t,i,n){super(t,i,n),this.nodes=[],this.direction="column",this.elementClass="",this.defaultClassNames="h-100 w-100 d-flex"}ngOnInit(){this.classNames=`${this.defaultClassNames} flex-${this.direction} ${this.elementClass}`}ngOnDestroy(){super.ngOnDestroy()}getNodes(){return this.nodes}}return o.lateLoadKey="StackComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-stack"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{nodes:"nodes",direction:"direction",elementClass:"elementClass"},features:[e.qOj],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,ze,4,5,"ng-container",0),2&t&&e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn)},directives:[r.sg,x.$,U.Pl],encapsulation:2}),o})();const je=["gridItemsContainer"];function ct(o,l){}function _t(o,l){if(1&o){const t=e.EpF();e.ynx(0)(1,3,4),e.YNc(3,ct,0,0,"ng-template",5),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk()()}if(2&o){const t=l.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("properties",t.properties)("providers",t.providers),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}const Re=function(o){return{"prioritize-rows":o}};let Xe=(()=>{class o extends Ie{constructor(t,i,n,s){super(t,i,n),this.ngZone=s,this.nodes=[],this.direction="column",this.prioritizeGridRows=!1}ngAfterViewInit(){this.handleGridFlowOnResize()}ngOnDestroy(){var t;null===(t=this.tilesResizeObserver)||void 0===t||t.disconnect(),super.ngOnDestroy()}getNodes(){return this.nodes}handleGridFlowOnResize(){this.tilesResizeObserver=new ResizeObserver(()=>this.onResize()),this.ngZone.runOutsideAngular(()=>{this.tilesResizeObserver.observe(this.gridItemsContainer.nativeElement)})}onResize(){var t;if((null===(t=this.nodes)||void 0===t?void 0:t.length)<2)return;const i=this.gridItemsContainer.nativeElement.getBoundingClientRect(),{height:n,width:s}=i,u=n/s,f=rt(this.nodes.length);return u-.05>f&&!this.prioritizeGridRows?(this.prioritizeGridRows=!0,void this.changeDetector.detectChanges()):u+.05<f&&this.prioritizeGridRows?(this.prioritizeGridRows=!1,void this.changeDetector.detectChanges()):void 0}}return o.lateLoadKey="TilesComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy),e.Y36(e.R0b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-tiles"]],viewQuery:function(t,i){if(1&t&&e.Gf(je,7),2&t){let n;e.iGM(n=e.CRH())&&(i.gridItemsContainer=n.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{nodes:"nodes",direction:"direction"},features:[e.qOj],decls:3,vars:5,consts:[[1,"nui-grid-layout",3,"ngClass"],["gridItemsContainer",""],[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,_t,4,5,"ng-container",2),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(3,Re,i.prioritizeGridRows)),e.xp6(2),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn))},directives:[r.mk,r.sg,x.$,U.Pl],styles:[".nui-grid-layout[_ngcontent-%COMP%]{display:grid;height:100%;grid-gap:10px;gap:10px;grid-template-columns:repeat(auto-fit,minmax(94.8px,1fr));grid-template-rows:repeat(auto-fit,minmax(15px,1fr));line-height:1.2}.nui-grid-layout.prioritize-rows[_ngcontent-%COMP%]{grid-auto-flow:column;grid-template-columns:minmax(1px,1fr)}.mobile[_nghost-%COMP%], .mobile   [_nghost-%COMP%]{min-height:160px}"]}),o})();const rt=o=>.25*o+.7;function st(o,l){if(1&o&&(e.TgZ(0,"div",6),e._UZ(1,"nui-icon",7),e.TgZ(2,"span",8),e._uU(3),e.qZA()()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("icon",t.key),e.xp6(1),e.Q6J("title",t.value),e.xp6(1),e.Oqu(t.value)}}function ut(o,l){1&o&&e._UZ(0,"nui-icon",9)}const pt=function(o,l){return{"widget-medium":o,"widget-small":l}};let lt=(()=>{class o{constructor(t){this.changeDetector=t,this.navigated=new e.vpe}set widgetWidth(t){this.isMedium=t<=600&&t>480,this.isSmall=t<=480}onButtonClick(){this.canNavigate&&this.navigated.emit(this)}}return o.lateLoadKey="ListGroupItemComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-list-group-item"]],hostAttrs:[1,"w-100"],inputs:{id:"id",label:"label",statuses:"statuses",canNavigate:"canNavigate",widgetWidth:"widgetWidth"},outputs:{navigated:"navigated"},decls:7,vars:8,consts:[[1,"list-group-item",3,"ngClass","click"],[1,"list-group-item__label",3,"title"],[1,"list-group-item__statuses"],[1,"statuses"],["class","status-column",4,"ngFor","ngForOf"],["icon","caret-right",4,"ngIf"],[1,"status-column"],[1,"mr-2",3,"icon"],[1,"status-column__label",3,"title"],["icon","caret-right"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onButtonClick()}),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,st,4,3,"div",4),e.qZA(),e.YNc(6,ut,1,0,"nui-icon",5),e.qZA()()),2&t&&(e.Q6J("ngClass",e.WLB(5,pt,i.isMedium,i.isSmall)),e.xp6(1),e.Q6J("title",i.label),e.xp6(1),e.Oqu(i.label),e.xp6(3),e.Q6J("ngForOf",i.statuses),e.xp6(1),e.Q6J("ngIf",i.canNavigate))},directives:[r.mk,r.sg,d.oJW,r.O5],styles:[".list-group-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.list-group-item__label[_ngcontent-%COMP%]{width:25%;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item__statuses[_ngcontent-%COMP%]{width:75%;display:flex;align-items:center}.list-group-item[_ngcontent-%COMP%]   .status-column[_ngcontent-%COMP%]{display:flex;width:75px;min-width:75px;max-width:100%;justify-content:flex-start;align-items:center;padding-right:10px}.list-group-item[_ngcontent-%COMP%]   .status-column__label[_ngcontent-%COMP%]{margin-left:5px;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]{justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%], .widget-medium[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]{justify-content:flex-end}.widget-small[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%], .widget-small[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{justify-content:space-between}"],changeDetection:0}),o})();var de=a(82722);function ye(o,l){if(1&o&&e._UZ(0,"nui-icon",9),2&o){const t=e.oxw();e.Q6J("icon",t.icon)("status",t.status)}}function bt(o,l){if(1&o&&e._uU(0),2&o){const t=e.oxw();e.Oqu(t.status)}}function xt(o,l){1&o&&e._UZ(0,"nui-icon",10)}let Ot=(()=>{class o{constructor(t,i){this.changeDetector=t,this.eventBus=i,this.navigated=new e.vpe,this.searchTerm="",this.destroy$=new ie.x}onButtonClick(){this.canNavigate&&this.navigated.emit(this)}ngOnInit(){this.eventBus.getStream(T.kV).pipe((0,de.R)(this.destroy$)).subscribe(t=>{var i;this.searchTerm=null!==(i=t.payload)&&void 0!==i?i:"",this.changeDetector.markForCheck()})}}return o.lateLoadKey="ListLeafItemComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-list-leaf-item"]],hostAttrs:[1,"w-100"],inputs:{icon:"icon",status:"status",detailedUrl:"detailedUrl",label:"label",canNavigate:"canNavigate",url:"url"},outputs:{navigated:"navigated"},decls:12,vars:14,consts:[[1,"nui-list-leaf-item",3,"click"],[1,"nui-list-leaf-item__info-container"],[1,"nui-list-leaf-item__icon-container"],["class","mr-1",3,"icon","status",4,"ngIf","ngIfElse"],[1,"nui-list-leaf-item__description"],[1,"nui-text-ellipsis",3,"ngClass","innerHTML"],[1,"nui-text-secondary","nui-text-ellipsis",3,"innerHTML"],["statusTpl",""],["icon","caret-right",4,"ngIf"],[1,"mr-1",3,"icon","status"],["icon","caret-right"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onButtonClick()}),e.TgZ(1,"div",1)(2,"div",2),e.YNc(3,ye,1,2,"nui-icon",3),e.qZA(),e.TgZ(4,"div",4),e._UZ(5,"a",5),e.ALo(6,"nuiHighlight"),e._UZ(7,"div",6),e.ALo(8,"nuiHighlight"),e.qZA(),e.YNc(9,bt,1,1,"ng-template",null,7,e.W1O),e.qZA(),e.YNc(11,xt,1,0,"nui-icon",8),e.qZA()),2&t){const n=e.MAs(10);e.xp6(3),e.Q6J("ngIf",i.icon)("ngIfElse",n),e.xp6(2),e.Q6J("ngClass",i.url?"":"not-active")("innerHTML",e.xi3(6,8,i.label,i.searchTerm),e.oJD),e.uIk("target",i.url?"_blank":null)("href",i.url||null,e.LSH),e.xp6(2),e.Q6J("innerHTML",e.xi3(8,11,i.detailedUrl,i.searchTerm),e.oJD),e.xp6(4),e.Q6J("ngIf",i.canNavigate)}},directives:[r.O5,d.oJW,r.mk],pipes:[d.SgB],styles:[".nui-list-leaf-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nui-list-leaf-item__info-container[_ngcontent-%COMP%]{display:flex;height:40px}.nui-list-leaf-item__icon-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:30px}.nui-list-leaf-item__description[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr 1fr;grid-template-columns:1fr;max-width:100%}a.not-active[_ngcontent-%COMP%]{text-decoration:none;color:#111}"],changeDetection:0}),o})();function Lt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"button",2),e.NdJ("click",function(){return e.CHM(t),e.oxw().onBack()}),e.qZA(),e.TgZ(2,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().onHome()}),e.qZA(),e.TgZ(3,"div",4),e._uU(4),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("isRepeat",!0)("disabled",!(null!=t.navBarConfig&&null!=t.navBarConfig.buttons&&null!=t.navBarConfig.buttons.back&&t.navBarConfig.buttons.back.disabled)),e.xp6(1),e.Q6J("isRepeat",!0),e.xp6(2),e.Oqu(null==t.navBarConfig?null:t.navBarConfig.label)}}let dt=(()=>{class o{constructor(t,i){this.changeDetector=t,this.eventBus=i,this.navigated=new e.vpe}onBack(){var t,i,n;this.navBarConfig&&this.eventBus.getStream(T.EC).next({payload:{back:null===(n=null===(i=null===(t=this.navBarConfig)||void 0===t?void 0:t.buttons)||void 0===i?void 0:i.back)||void 0===n?void 0:n.disabled}})}onHome(){this.eventBus.getStream(T.EC).next({payload:{reset:!0}})}}return o.lateLoadKey="ListNavigationBarComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-navigation-bar"]],inputs:{navBarConfig:"navBarConfig"},outputs:{navigated:"navigated"},decls:1,vars:1,consts:[["class","list-nav-bar",4,"ngIf"],[1,"list-nav-bar"],["nui-button","","type","button","displayStyle","action","icon","arrow-left",3,"isRepeat","disabled","click"],["nui-button","","type","button","displayStyle","action","icon","overview",3,"isRepeat","click"],[1,"list-nav-bar__label"]],template:function(t,i){1&t&&e.YNc(0,Lt,5,4,"div",0),2&t&&e.Q6J("ngIf",i.navBarConfig&&!(null!=i.navBarConfig&&i.navBarConfig.isRoot))},directives:[r.O5,d.r0F],styles:[".list-nav-bar[_ngcontent-%COMP%]{width:100%;margin:2px 0;padding:0 15px;display:flex;align-items:center}.list-nav-bar__label[_ngcontent-%COMP%]{padding-left:5px;color:#1119}"],changeDetection:0}),o})();function tt(o,l){}const Ne=function(){return["navigated"]};function Y(o,l){if(1&o){const t=e.EpF();e.ynx(0,2,3),e.NdJ("output",function(){const s=e.CHM(t).item;return e.oxw().onListItemEvent(s)}),e.YNc(2,tt,0,0,"ng-template",4),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=l.item,i=e.MAs(1),n=e.oxw();e.Q6J("componentId",n.configuration.componentType)("componentType",n.configuration.componentType)("properties",n.getPropsFor(t))("outputs",e.DdM(5,Ne)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let c=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.zone=i,this.host=n,this.eventBus=s,this.itemFormatterProps=new Map,this.destroy$=new ie.x}ngOnInit(){this.initResizeObserver()}ngOnChanges(t){var i;(null===(i=t.data)||void 0===i?void 0:i.currentValue)&&t.data.currentValue.forEach(n=>this.itemFormatterProps.set(n,this.calcItemProps(n)))}onListItemEvent(t){this.eventBus.getStream(T.EC).next({payload:t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.itemFormatterProps.clear()}getPropsFor(t){return Object.assign(Object.assign({},this.itemFormatterProps.get(t)),{widgetWidth:this.widgetWidth})}calcItemProps(t){return this.configuration?Object.assign(Object.assign({},P(this.configuration,t)),this.configuration.itemProperties):t}initResizeObserver(){const t=new d.Pa2(this.host,this.zone);t.debounceTime=10,t.ngAfterViewInit(),t.containerResize.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.widgetWidth=this.host.nativeElement.offsetWidth})}}return o.lateLoadKey="ListWidgetComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-list-widget"]],hostAttrs:[2,"overflow","scroll"],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{data:"data",configuration:"configuration",elementClass:"elementClass"},features:[e.TTD],decls:3,vars:2,consts:[[3,"itemsSource","repeatItemTemplateRef"],["repeatItemTemplate",""],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){if(1&t&&(e._UZ(0,"nui-repeat",0),e.YNc(1,Y,3,6,"ng-template",null,1,e.W1O)),2&t){const n=e.MAs(2);e.Q6J("itemsSource",i.data)("repeatItemTemplateRef",n)}},directives:[d.$N6,x.$,U.Pl],styles:[""]}),o})();var m=a(92474),E=a(98864),k=a(294),J=a(32656),_e=a(47243),fe=a(60343),he=a(21366);let Ce=(()=>{class o extends he.k{constructor(t){super(t,"ProportionalContentAggregatorsRegistryService")}getItemKey(t){return t.aggregatorType}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.mQy))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Pe(o,l){}function Ze(o,l){if(1&o){const t=e.EpF();e.ynx(0,1,2),e.YNc(2,Pe,0,0,"ng-template",3),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",null==i.contentFormatter?null:i.contentFormatter.componentType)("properties",i.contentFormatterProperties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let Be=(()=>{class o{constructor(t,i,n,s){this.aggregatorRegistry=t,this.formatterRegistry=i,this.changeDetector=n,this.logger=s,this.destroy$=new ie.x}ngOnChanges(t){if(t.donutConfig){const i=t.donutConfig.currentValue,{formatter:n,aggregator:s}=i;(null==s?void 0:s.aggregatorType)&&(this.updateAggregatorDefinition(s),this.updateAggregatedValue()),(null==n?void 0:n.componentType)&&(this.contentFormatter=n,this.updateFormatterDefinition(n),this.updateFormatterProperties())}t.widgetData&&(this.updateAggregatedValue(),this.updateFormatterProperties()),t.chartAssist&&this.subscribeToChartAssist()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getFormatterProperties(t){var i;if(t)return Object.assign(Object.assign({},null===(i=this.contentFormatterDefinition)||void 0===i?void 0:i.properties),{data:P(t,{value:this.aggregatedValue})})}updateAggregatorDefinition(t){const i=this.aggregatorRegistry.getItem(t.aggregatorType);i?this.contentAggregatorDefinition=i:this.logger.warn(`No aggregator with key ${t.aggregatorType} found in registry.`)}updateFormatterDefinition(t){const i=this.formatterRegistry.getItem(t.componentType);i?this.contentFormatterDefinition=i:this.logger.warn(`No aggregator with key ${t.componentType} found in registry.`)}updateAggregatedValue(){var t;if(!this.widgetData||!this.contentAggregatorDefinition)return void this.logger.warn(`Can't aggregate value. Aggregator key: ${null===(t=this.contentAggregatorDefinition)||void 0===t?void 0:t.aggregatorType}. Data: ${this.widgetData}`);const i=this.getAggregatorProperties();this.aggregatedValue=this.contentAggregatorDefinition.fn(this.widgetData,Object.assign(Object.assign({},i),{activeMetricId:this.emphasizedSeriesId||i.activeMetricId})).toString()}updateFormatterProperties(){this.contentFormatterProperties=this.getFormatterProperties(this.contentFormatter)}getAggregatorProperties(){var t,i,n;return Object.assign(Object.assign({},null===(t=this.contentAggregatorDefinition)||void 0===t?void 0:t.properties),null===(n=null===(i=this.donutConfig)||void 0===i?void 0:i.aggregator)||void 0===n?void 0:n.properties)}subscribeToChartAssist(){var t,i,n;null===(t=this.chartAssistSubscription)||void 0===t||t.unsubscribe(),this.chartAssistSubscription=null===(n=null===(i=this.chartAssist)||void 0===i?void 0:i.chartAssistSubject)||void 0===n?void 0:n.pipe((0,de.R)(this.destroy$)).subscribe(s=>{var u;this.emphasizedSeriesId=null===(u=s.payload)||void 0===u?void 0:u.seriesId,this.updateAggregatedValue(),this.updateFormatterProperties(),this.changeDetector.detectChanges()})}}return o.lateLoadKey="ProportionalDonutContentComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(Ce),e.Y36(_e.UA),e.Y36(e.sBO),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-proportional-donut-content"]],inputs:{widgetData:"widgetData",donutConfig:"donutConfig",chartAssist:"chartAssist"},features:[e.TTD],decls:1,vars:1,consts:[["nuiComponentPortal","",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,Ze,3,3,"ng-container",0),2&t&&e.Q6J("ngIf",null==i.contentFormatter?null:i.contentFormatter.componentType)},directives:[r.O5,x.$,U.Pl],styles:[""],changeDetection:0}),o})();var Le=a(64509),We=a.n(Le),qe=a(50772),we=a.n(qe);let it=(()=>{class o{constructor(t){this.unitConversionService=t,this.transform=(i,n="generic",s=1e6)=>{const u="string"==typeof i?parseFloat(i):i;if(void 0===u||isNaN(u)||u<s)return(null==i?void 0:i.toString())||"";const f=this.unitConversionService.convert(u,"bytes"===n?d.Qln.Bytes:d.Qln.Standard,1);return this.unitConversionService.getFullDisplay(f,n)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.CrH,16))},o.\u0275pipe=e.Yjl({name:"nuiDashboardUnitConversion",type:o,pure:!0}),o})();var De=(()=>{return(o=De||(De={})).DonutChart="DonutChart",o.PieChart="PieChart",o.VerticalBarChart="VerticalBarChart",o.HorizontalBarChart="HorizontalBarChart",De;var o})();let $t=(()=>{class o{static buildChartSeries(t,i,n,s){return(t||[]).map(f=>Object.assign(Object.assign({},f),{accessors:i,renderer:n,scales:s}))}static getChartAttributes(t,i,n){const s=o.getChartTools(t),u={grid:s.gridFunction(),accessors:s.accessorFunction(i,n),renderer:s.rendererFunction(),scales:s.scaleFunction()};return s.preprocessor&&(u.preprocessor=s.preprocessor),u}static getChartTools(t){const i=u=>{const f=new g.UDz(u);return f.series.color=(F,$)=>{var Q;return null!==(Q=$.color)&&void 0!==Q?Q:u.get(F)},f};function n(u,f){const F=(0,g.Q6e)(this.config,u,f);return F.series.color=($,Q)=>{var X;return null!==(X=Q.color)&&void 0!==X?X:null==u?void 0:u.get($)},F.data.value=$=>Number.isFinite($)?$:$.value,F}return{[De.DonutChart]:{preprocessor:g.fy$,gridFunction:g.Y6Q,rendererFunction:()=>new g.E8N,accessorFunction:i,scaleFunction:g._N$},[De.PieChart]:{preprocessor:g.fy$,gridFunction:g.Y6Q,rendererFunction:()=>new g.bOg,accessorFunction:i,scaleFunction:g._N$},[De.HorizontalBarChart]:{config:{horizontal:!0},gridFunction(){return(0,g.skL)(this.config)},rendererFunction:()=>new g.Z7w({highlightStrategy:new g.TrQ("y")}),accessorFunction:n,scaleFunction(){return(0,g.CQI)(this.config)}},[De.VerticalBarChart]:{config:{horizontal:!1},gridFunction(){return(0,g.skL)(this.config)},rendererFunction:()=>new g.Z7w({highlightStrategy:new g.TrQ("x")}),accessorFunction:n,scaleFunction(){return(0,g.CQI)(this.config)}}}[t]}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var Fe=a(55413);const jt=["gridContainer"];function z(o,l){}function Z(o,l){if(1&o){const t=e.EpF();e.ynx(0)(1,12,13),e.YNc(3,z,0,0,"ng-template",14),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk()()}if(2&o){const t=e.MAs(2),i=e.oxw(3);e.xp6(1),e.Q6J("componentType",(null==i.contentFormatter?null:i.contentFormatter.componentType)||"DonutContentRawFormatterComponent")("properties",i.contentFormatterProperties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function I(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"nui-proportional-donut-content",15),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("widgetData",t.widgetData)("donutConfig",null==t.configuration||null==t.configuration.chartOptions?null:t.configuration.chartOptions.donutContentConfig)("chartAssist",t.chartAssist)}}function M(o,l){if(1&o&&(e.TgZ(0,"nui-chart-donut-content",8)(1,"div",9)(2,"div",10),e.YNc(3,Z,4,3,"ng-container",11),e.YNc(4,I,2,3,"ng-container",11),e.qZA()()()),2&o){const t=e.oxw(2);e.Q6J("plugin",t.donutContentPlugin),e.xp6(2),e.Q6J("useZoom",!1),e.xp6(1),e.Q6J("ngIf",!(null!=t.configuration&&null!=t.configuration.chartOptions&&t.configuration.chartOptions.donutContentConfig)),e.xp6(1),e.Q6J("ngIf",null==t.configuration||null==t.configuration.chartOptions?null:t.configuration.chartOptions.donutContentConfig)}}function w(o,l){if(1&o&&(e.TgZ(0,"div",5),e._UZ(1,"nui-chart",6),e.YNc(2,M,5,4,"nui-chart-donut-content",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("chart",t.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",t.donutContentPlugin)}}function H(o,l){}const ee=function(o){return{data:o}};function re(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",22),e.ynx(2,12,23),e.YNc(4,H,0,0,"ng-template",14),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(3).attached(n)}),e.BQk(),e.qZA()()}if(2&o){const t=e.MAs(3),i=e.oxw().index,n=e.oxw(2);e.xp6(2),e.Q6J("componentType",n.legendFormatter.componentType)("properties",e.VKq(3,ee,n.widgetData[i])),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function ge(o,l){if(1&o&&e._UZ(0,"nui-icon",29),2&o){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("icon",i.seriesToIconMap[t.id])}}const Oe=function(o){return{"nui-text-link-small link":o}};function Ye(o,l){if(1&o&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Oe,i.interactive)),e.xp6(1),e.hij(" ",t.name," ")}}function It(o,l){if(1&o&&(e.TgZ(0,"a",31),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.Q6J("href",t.link,e.LSH)("title",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function qt(o,l){if(1&o&&(e._UZ(0,"nui-rich-legend-tile",24),e.ALo(1,"nuiDashboardUnitConversion"),e.YNc(2,ge,1,1,"nui-icon",25),e.TgZ(3,"div",26),e.YNc(4,Ye,2,4,"div",27),e.YNc(5,It,2,3,"a",28),e.qZA()),2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("value",e.lcZ(1,7,i.computeLegendTileValue(t.data[0])))("unitLabel",i.legendUnitLabel)("color",i.chartAssist.palette.textColors.get(t.id))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",i.seriesToIconMap&&i.seriesToIconMap[t.id]),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link)}}function ei(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-legend-series",19),e.NdJ("isSelectedChange",function(n){const u=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(u.id,n)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).onInteraction(s)}),e.YNc(1,re,5,5,"div",20),e.YNc(2,qt,6,9,"ng-template",null,21,e.W1O),e.qZA()}if(2&o){const t=l.$implicit,i=e.MAs(3),n=e.oxw(2);e.ekj("nui-proportional-widget__legend--interactive",n.interactive),e.Q6J("ngClass",(n.prioritizedGridRows.right||n.prioritizedGridRows.bottom)&&"description-min-width--unset")("isSelected",!n.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==n.chartAssist.renderStatesIndex[t.id]?null:n.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("ngIf",n.legendFormatter&&n.legendFormatter.componentType)("ngIfElse",i)}}const ko=function(o){return[o]};function Zo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"nui-legend",17),e.NdJ("mouseleave",function(){return e.CHM(t),e.oxw().chartAssist.resetVisibleSeries()}),e.YNc(2,ei,4,7,"nui-legend-series",18),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(5,ko,t.legendShouldBeAlignedRight()?"scrollable":"legend-bottom")),e.xp6(1),e.Q6J("interactive",!1)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}function Vo(o,l){1&o&&(e.TgZ(0,"div",32),e._UZ(1,"nui-image",33),e.qZA())}const Jo=function(o,l,t){return{"prioritize-rows__right":o,"prioritize-rows__bottom":l,"empty-grid":t}};let ti=(()=>{class o{constructor(t,i,n,s,u,f,F){this.changeDetector=t,this.ngZone=i,this.kvDiffers=n,this.eventBus=s,this.dataSource=u,this.logger=f,this.prioritizedGridRows={right:!1,bottom:!1},this.chartPalette=new g.syg((0,g.GUR)()),this.differ=this.kvDiffers.find(this.prioritizedGridRows).create(),this.unitConversionPipe=new it(F)}get interactive(){var t,i,n,s;return(null===(t=this.configuration)||void 0===t?void 0:t.interactive)||(null===(s=null===(n=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===n?void 0:n.getFeatureConfig(h.ni.Interactivity))||void 0===s?void 0:s.enabled)||!1}computeLegendTileValue(t){var i,n;return null===(n=null===(i=this.accessors.data)||void 0===i?void 0:i.value)||void 0===n?void 0:n.call(i,t,0,null,null)}ngOnChanges(t){var i,n,s,u;const f=null===(n=null===(i=t.configuration)||void 0===i?void 0:i.currentValue)||void 0===n?void 0:n.chartColors,F=null===(u=null===(s=t.configuration)||void 0===s?void 0:s.previousValue)||void 0===u?void 0:u.chartColors;if((t.widgetData||!We()(f,F))&&this.updateChartColors(),t.configuration){const $=t.configuration.currentValue.chartOptions.type,Q=t.configuration.previousValue&&t.configuration.previousValue.chartOptions.type;$&&$!==Q&&(this.buildChart($),this.widgetData&&this.updateChart()),this.legendFormatter=this.configuration.chartOptions.legendFormatter,this.contentFormatter=this.configuration.chartOptions.contentFormatter,this.chartFormatterComponentType=this.configuration.chartOptions.chartFormatterComponentType,this.getContentFormatterProperties(),this.changeDetector.markForCheck()}t.widgetData&&this.chartAssist&&(this.updateChart(),this.getContentFormatterProperties(),this.changeDetector.markForCheck())}ngAfterViewInit(){this.handleGridFlowOnResize()}ngOnDestroy(){var t,i;null===(t=this.proportionalWidgetResizeObserver)||void 0===t||t.disconnect(),null===(i=this.chartTypeSubscription$)||void 0===i||i.unsubscribe()}getContentFormatterProperties(){var t;this.contentFormatterProperties={data:this.widgetData,config:this.configuration,chartAssist:this.chartAssist,properties:null===(t=this.contentFormatter)||void 0===t?void 0:t.properties}}isDonutChart(){return this.configuration.chartOptions.type===De.DonutChart}isRadialChart(){return-1!==[De.DonutChart,De.PieChart].indexOf(this.configuration.chartOptions.type)}hasLegend(){return this.configuration.chartOptions.legendPlacement!==Fe.w.None}legendShouldBeAlignedRight(){return this.configuration.chartOptions.legendPlacement===Fe.w.Right}onInteraction(t){!this.interactive||this.eventBus.getStream(T.b1).next({payload:{data:t}})}buildChart(t){var i,n;this.donutContentPlugin=null;const{grid:s,accessors:u,renderer:f,scales:F,preprocessor:$}=$t.getChartAttributes(t,null===(i=this.chartPalette)||void 0===i?void 0:i.standardColors);this.chartAssist=new g.doR(new g.kL2(s),$,this.chartPalette),this.renderer=f,this.accessors=u,this.scales=F,this.isDonutChart()&&(this.donutContentPlugin=new g.iM,this.chartAssist.chart.addPlugin(this.donutContentPlugin)),this.configuration.chartOptions.type===De.HorizontalBarChart?(this.scales.x.formatters.tick=Q=>this.unitConversionPipe.transform(Q),this.applyTickLabelMaxWidths()):this.configuration.chartOptions.type===De.VerticalBarChart&&(this.scales.y.formatters.tick=Q=>this.unitConversionPipe.transform(Q)),null===(n=this.chartTypeSubscription$)||void 0===n||n.unsubscribe(),this.chartTypeSubscription$=this.chartAssist.chart.getEventBus().getStream(g.q7O).subscribe(Q=>{const X=this.widgetData.find(ue=>ue.id===Q.data.seriesId);this.onInteraction(X)})}handleGridFlowOnResize(){this.proportionalWidgetResizeObserver=new ResizeObserver(()=>this.onResize()),this.ngZone.runOutsideAngular(()=>{this.proportionalWidgetResizeObserver.observe(this.gridContainer.nativeElement)})}applyTickLabelMaxWidths(){var t,i,n,s,u,f;const F=this.chartAssist.chart.getGrid().config().axis;F.left.tickLabel.maxWidth=null!==(n=null===(i=null===(t=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===t?void 0:t.maxWidth)||void 0===i?void 0:i.left)&&void 0!==n?n:o.TICK_LABEL_MAX_WIDTH,F.right.tickLabel.maxWidth=null!==(f=null===(u=null===(s=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===s?void 0:s.maxWidth)||void 0===u?void 0:u.right)&&void 0!==f?f:o.TICK_LABEL_MAX_WIDTH}onResize(){if(!this.isContainerInNoSwitchLayoutInterval()){switch(this.configuration.chartOptions.legendPlacement){case Fe.w.Bottom:this.prioritizedGridRows.bottom=this.containerHasRowLayoutWidth();break;case Fe.w.Right:this.prioritizedGridRows.right=this.containerHasRowLayoutWidth()}this.differ.diff(this.prioritizedGridRows)&&this.changeDetector.detectChanges()}}isContainerInNoSwitchLayoutInterval(){const t=this.gridContainer.nativeElement.getBoundingClientRect().width;return t>o.MAX_ROW_LAYOUT_SIZE-o.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2&&t<o.MAX_ROW_LAYOUT_SIZE+o.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2}containerHasRowLayoutWidth(){return this.gridContainer.nativeElement.getBoundingClientRect().width<o.MAX_ROW_LAYOUT_SIZE}updateChart(){this.chartAssist.update($t.buildChartSeries(this.widgetData,this.accessors,this.renderer,this.scales))}updateChartColors(){var t,i;let n;const s=null===(t=this.widgetData)||void 0===t?void 0:t.map(f=>f.color),u=this.configuration.chartColors;n=!this.configuration.prioritizeWidgetColors&&we()(s)?this.getDataDriverColorProvider(this.widgetData):u?this.getConfigurationColorProvider(u):(0,g.GUR)(),this.chartPalette=new g.syg(n),this.buildChart(null===(i=this.configuration)||void 0===i?void 0:i.chartOptions.type),this.chartAssist&&(this.chartAssist.palette=this.chartPalette,this.updateChart())}getDataDriverColorProvider(t){let i;if((null==t?void 0:t.map(s=>s.color).filter(s=>!!s)).length===t.length){const s=t.reduce((u,f)=>(u[f.id]=f.color,u),{});i=new g.oki(s)}else{const s=t.filter(u=>u.color);this.logger.warn(`Not all series have colors set, setting default pallette. Current series color config: ${JSON.stringify(s)}`),i=(0,g.GUR)()}return i}getConfigurationColorProvider(t){var i;let n;return this.configuration.prioritizeWidgetColors&&this.widgetData&&(this.widgetData=this.widgetData.map(s=>{const u=Object.assign({},s);return u.color&&delete u.color,u})),Array.isArray(t)?n=new g.jpW(t):Object.keys(t).length===(null===(i=this.widgetData)||void 0===i?void 0:i.length)?n=new g.oki(t):(this.logger.warn(`Not all series have colors set, setting default pallette. Current series color config: ${JSON.stringify(t)}`),n=(0,g.GUR)()),n}}return o.lateLoadKey="ProportionalWidgetComponent",o.NO_SWITCH_LAYOUT_INTERVAL_SIZE=20,o.MAX_ROW_LAYOUT_SIZE=360,o.TICK_LABEL_MAX_WIDTH=75,o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(e.aQg),e.Y36(h.nY),e.Y36(h.Fk),e.Y36(d.mQy),e.Y36(d.CrH))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-proportional-widget"]],viewQuery:function(t,i){if(1&t&&e.Gf(jt,7),2&t){let n;e.iGM(n=e.CRH())&&(i.gridContainer=n.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",elementClass:"elementClass",seriesToIconMap:"seriesToIconMap"},features:[e.TTD],decls:5,vars:8,consts:[[1,"w-100","nui-chart-layout","flex-grow-1","p-3",3,"ngClass"],["gridContainer",""],["class","d-flex chart has-overlay",4,"ngIf"],["class","w-100 d-flex legend",3,"ngClass",4,"ngIf"],["class","mb-3 mt-3 d-flex align-items-center justify-content-center",4,"ngIf"],[1,"d-flex","chart","has-overlay"],[1,"w-100",3,"chart"],["class","nui-proportional-widget__chart-donut-content",3,"plugin",4,"ngIf"],[1,"nui-proportional-widget__chart-donut-content",3,"plugin"],[1,"h-100","w-100","d-flex","justify-content-center","align-items-center","text-center"],["nuiZoomContent","",1,"d-inline-block",3,"useZoom"],[4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal2","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"widgetData","donutConfig","chartAssist"],[1,"w-100","d-flex","legend",3,"ngClass"],[1,"w-100","m-auto",3,"interactive","orientation","mouseleave"],["class","proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","nui-proportional-widget__legend--interactive","isSelectedChange","mouseenter","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","click"],[4,"ngIf","ngIfElse"],["legendDefaultTile",""],["description",""],["componentPortal","nuiComponentPortal"],[3,"value","unitLabel","color","backgroundColor"],["legendTransclusion","","class","align-items-center",3,"icon",4,"ngIf"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["legendTransclusion","",1,"align-items-center",3,"icon"],[1,"description","description-primary",3,"ngClass"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"mb-3","mt-3","d-flex","align-items-center","justify-content-center"],["image","no-data-to-show"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,w,3,2,"div",2),e.YNc(3,Zo,3,7,"div",3),e.YNc(4,Vo,2,0,"div",4),e.qZA()),2&t&&(e.Q6J("ngClass",e.kEZ(4,Jo,i.prioritizedGridRows.right,i.prioritizedGridRows.bottom,!(i.widgetData&&i.widgetData.length>0&&i.chartAssist))),e.xp6(2),e.Q6J("ngIf",i.widgetData&&i.widgetData.length>0&&i.chartAssist),e.xp6(1),e.Q6J("ngIf",i.hasLegend()&&i.chartAssist),e.xp6(1),e.Q6J("ngIf",!i.widgetData||0===i.widgetData.length||!i.chartAssist))},directives:[r.mk,r.O5,g.xH4,g.kwD,d.mEK,x.$,U.Pl,Be,g.FVX,r.sg,g.kJo,g.wHi,d.oJW,d.cuP],pipes:[it],styles:['.nui-proportional-widget__chart-donut-content[_ngcontent-%COMP%]{position:absolute}.nui-proportional-widget__legend--interactive[_ngcontent-%COMP%]{cursor:pointer!important}.has-overlay[_ngcontent-%COMP%]{overflow:auto}.nui-chart-layout[_ngcontent-%COMP%]{grid-template:"axis-label-left    axis-label-right    ." 0fr "chart              chart               legend" minmax(60%,auto) "axis-label-bottom  axis-label-bottom   ." 0fr "legend-bottom      legend-bottom       ." minmax(auto,min-content) / 1fr 1fr auto}.nui-chart-layout[_ngcontent-%COMP%]   .legend-bottom[_ngcontent-%COMP%]{overflow:auto;align-self:auto;padding-left:0}.prioritize-rows__right[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%], .prioritize-rows__bottom[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%]{max-width:unset;width:100%}.prioritize-rows[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{justify-self:start}.prioritize-rows__right[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend      legend       ." 40%}.prioritize-rows__bottom[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend-bottom      legend-bottom      ." 40%}.empty-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:1fr}.proportional-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}']}),o})();var ii=a(61455);let Li=(()=>{class o{constructor(){this.enabled=!0,this.delay=500}onHostMouseenter(){!this.enabled||(this.timeout=setTimeout(()=>{this.mousePresentSubject.next(!0)},this.delay))}onHostClick(){!this.enabled||this.mousePresentSubject.next(!0)}onHostMouseleave(){!this.enabled||(clearTimeout(this.timeout),this.mousePresentSubject.next(!1))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.lG2({type:o,selectors:[["","nuiDelayedMousePresenceDetection",""]],hostBindings:function(t,i){1&t&&e.NdJ("mouseenter",function(){return i.onHostMouseenter()})("click",function(){return i.onHostClick()})("mouseleave",function(){return i.onHostMouseleave()})},inputs:{enabled:["nuiDelayedMousePresenceDetection","enabled"],mousePresentSubject:"mousePresentSubject",delay:"delay"}}),o})();var Yo=a(8817),Gt=a.n(Yo),Ho=a(95835),Ko=a.n(Ho),Gi=a(61135),At=a(56451),wi=a(39646),et=a(18505),Ut=a(39300),ht=a(54004),oi=a(95698),$i=a(78372);let Ui=(()=>{class o{constructor(){this.searchDebounceTime=500}initWidget(t){this.widget=t,this.initSearch()}initSearch(){var t,i;this.defineSearch();const n=null===(i=null===(t=this.widget.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.featuresChanged;n&&n.pipe((0,de.R)(this.widget.onDestroy$)).subscribe(()=>{this.defineSearch()})}registerSearch(){this.widget.dataSource&&this.widget.dataSource.registerComponent({search:{componentInstance:{getFilters:()=>({type:"search",value:this.widget.searchValue})}}})}deregisterSearch(){var t,i;this.widget.dataSource&&(null===(i=(t=this.widget.dataSource).deregisterComponent)||void 0===i||i.call(t,"search"))}defineSearch(){var t,i;const n=null===(t=this.widget.configuration)||void 0===t?void 0:t.searchConfiguration,s=null===(i=this.widget.dataSource.features)||void 0===i?void 0:i.getFeatureConfig("search");this.widget.isSearchEnabled=!(!(null==n?void 0:n.enabled)||!(null==s?void 0:s.enabled)),this.widget.isSearchEnabled?(this.widget.searchValue=(null==n?void 0:n.searchTerm)||"",this.registerSearch(),this.searchDebounceTime=W()(null==n?void 0:n.searchDebounce)?this.searchDebounceTime:null==n?void 0:n.searchDebounce,this.watchSearchTerm()):this.deregisterSearch()}watchSearchTerm(){this.widget.searchTerm$.pipe((0,$i.b)(this.searchDebounceTime),(0,de.R)(this.widget.onDestroy$)).subscribe(()=>{this.widget.pizzagnaService.setProperty({pizzagnaKey:h.xW.Configuration,componentId:this.widget.componentId,propertyPath:["configuration.searchConfiguration.searchTerm"]},this.widget.searchValue),this.widget.eventBus.getStream(T.RG).next({})})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),zi=(()=>{class o{constructor(){this.visibleItems=[]}initWidget(t){this.widget=t}initVirtualScroll(){this.widget.hasVirtualScroll?this.registerVirtualScroll():this.deregisterVirtualScroll()}registerVirtualScroll(){this.widget.dataSource&&this.widget.dataSource.registerComponent({[(0,d.$0I)("virtualScroll")]:{componentInstance:this.widget.viewportManager}})}deregisterVirtualScroll(){var t,i;this.widget.dataSource&&(null===(i=(t=this.widget.dataSource).deregisterComponent)||void 0===i||i.call(t,(0,d.$0I)("virtualScroll")))}subscribeToVirtualScroll(){!this.widget.vscrollViewport||((0,At.T)(this.widget.vscrollViewport.renderedRangeStream,this.widget.tableUpdate$.pipe((0,ht.U)(()=>{var t;return null===(t=this.widget.vscrollViewport)||void 0===t?void 0:t.getRenderedRange()}))).pipe((0,et.b)(t=>{this.visibleItems=this.widget.tableData.slice(null==t?void 0:t.start,null==t?void 0:t.end),this.widget.changeDetector.detectChanges()}),(0,de.R)(this.widget.onDestroy$)).subscribe(),this.widget.viewportManager.setViewport(this.widget.vscrollViewport).observeNextPage$({pageSize:this.widget.range,emitFirstPage:!0}).pipe((0,Ut.h)(t=>{var i,n;return t.end>=(null!==(n=null===(i=this.widget.vscrollViewport)||void 0===i?void 0:i.getDataLength())&&void 0!==n?n:0)}),(0,et.b)(t=>this.widget.zone.run(()=>{this.widget.dataSource.page=t.end/(t.end-t.start),this.widget.eventBus.getStream(T.df).next({}),this.widget.changeDetector.detectChanges()})),(0,de.R)(this.widget.onDestroy$)).subscribe())}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var Qo=a(63776);const Xo=["widgetTable"];function jo(o,l){1&o&&(e.TgZ(0,"div",10),e._UZ(1,"nui-image",11),e.qZA())}function qo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"nui-search",13),e.NdJ("inputChange",function(n){return e.CHM(t),e.oxw().onSearchInputChanged(n)})("cancel",function(n){return e.CHM(t),e.oxw().onSearchInputChanged(n)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("value",t.searchValue)}}function en(o,l){if(1&o&&(e.TgZ(0,"th",17),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,i=e.oxw();e.Udp("width",i.columnsWidthMap.get(t.id),"px")("max-width",i.columnsWidthMap.get(t.id),"px")("min-width",i.columnsWidthMap.get(t.id),"px"),e.Q6J("isColumnSortingDisabled",!t.sortable)("title",t.label)("tooltipText",i.headerTooltipsEnabled?t.label:void 0)("alignment",i.getColumnAlignment(t)),e.xp6(1),e.hij(" ",t.label," ")}}function tn(o,l){}function on(o,l){if(1&o){const t=e.EpF();e.ynx(0,20,21),e.YNc(2,tn,0,0,"ng-template",22),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw().$implicit,n=e.oxw().$implicit;e.Q6J("componentType",null==n.formatter?null:n.formatter.componentType)("properties",i[n.id]),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function nn(o,l){if(1&o&&(e.TgZ(0,"td",18),e.YNc(1,on,3,3,"ng-container",19),e.qZA()),2&o){const t=l.$implicit,i=e.oxw().$implicit,n=e.oxw();e.Udp("width",n.columnsWidthMap.get(i.id),"px")("max-width",n.columnsWidthMap.get(i.id),"px")("min-width",n.columnsWidthMap.get(i.id),"px"),e.Q6J("alignment",n.getColumnAlignment(i)),e.xp6(1),e.Q6J("ngIf",t[i.id]&&i.formatter)}}function rn(o,l){1&o&&(e.ynx(0,14),e.YNc(1,en,2,11,"th",15),e.ynx(2),e.YNc(3,nn,2,8,"td",16),e.BQk()()),2&o&&e.s9C("nuiColumnDef",l.$implicit.id)}function sn(o,l){1&o&&e._UZ(0,"tr",23)}function an(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr",24),e.NdJ("click",function(n){const u=e.CHM(t).$implicit;return e.oxw().onInteraction(u,n)}),e.qZA()}if(2&o){const t=e.oxw();e.uIk("role",t.interactive?"button":"")}}const ln=function(o){return{"virtual-scroll-disabled":o}};let ni=(()=>{class o{constructor(t,i,n,s,u,f,F,$,Q,X,ue,Te){this.eventBus=t,this.dataSource=i,this.widgetConfigurationService=n,this.changeDetector=s,this.pizzagnaService=u,this.viewportManager=f,this.zone=F,this.el=$,this.logger=Q,this.searchAddon=X,this.virtualScrollAddon=ue,this.formattersRegistryService=Te,this.indentFromTop=70,this.sortable=!0,this.delayedMousePresenceDetectionEnabled=!0,this.tableData=[],this.columns=[],this.columnsWidthMap=new Map,this.hasVirtualScroll=!0,this.isSearchEnabled=!1,this.searchTerm$=new ie.x,this.onDestroy$=new ie.x,this.tableUpdate$=new ie.x,this.mousePresent$=new Gi.X(!1),this.rowHeight=24,this._scrollBuffer=0,this.totalPages=0,this.lastPageFetched=0,this.sortableSet={},this.defaultColumnAlignment="left",this.idle=!1,this.isBusy=this.lastPageFetched!==this.totalPages}set range(t){this._range=t}get range(){return this.getTableScrollRange()}get headerTooltipsEnabled(){var t;return null===(t=this.configuration.headerTooltipsEnabled)||void 0===t||t}set scrollBuffer(t){if(t>100||t<0)throw new Error("Invalid scroll buffer provided. Required range 1..100");this._scrollBuffer=t}get interactive(){var t,i,n,s,u,f;return null!==(f=null!==(i=null===(t=this.configuration)||void 0===t?void 0:t.interactive)&&void 0!==i?i:null===(u=null===(s=null===(n=this.dataSource)||void 0===n?void 0:n.features)||void 0===s?void 0:s.getFeatureConfig(h.ni.Interactivity))||void 0===u?void 0:u.enabled)&&void 0!==f&&f}ngOnChanges(t){var i,n,s,u;if(t.dataFields&&(null===(i=this.dataFields)||void 0===i?void 0:i.length)&&this.setSortableSet(),(t.widgetData||t.configuration||t.dataFields)&&(this.updateTable(),null===(n=this.vscrollViewport)||void 0===n||n.checkViewportSize()),t.configuration){this.isSortByUpdated(t.configuration)&&(null===(s=t.configuration.currentValue.sortable)||void 0===s||s)&&this.onSortOrderChanged({direction:t.configuration.currentValue.sorterConfiguration.descendantSorting?d.aQE.descending:d.aQE.ascending,sortBy:t.configuration.currentValue.sorterConfiguration.sortBy});const f=Gt()(t,"configuration.currentValue.hasVirtualScroll",!0);this.hasVirtualScroll!==f&&(this.hasVirtualScroll=f,this.virtualScrollAddon.initVirtualScroll())}t.totalItems&&(this.totalPages=Math.floor((null!==(u=this.totalItems)&&void 0!==u?u:0)/this.range))}ngOnInit(){this.dataSource&&(this.setSortFilter(),this.registerSorter(),this.virtualScrollAddon.initWidget(this))}ngAfterViewInit(){var t;if(!this.dataSource)return;null===(t=this.dataSource.busy)||void 0===t||t.pipe((0,et.b)(n=>this.isBusy=n),(0,de.R)(this.onDestroy$)).subscribe(),this.virtualScrollAddon.initVirtualScroll(),this.searchAddon.initWidget(this);const i=this.eventBus.getStream(T.pV).pipe((0,Ut.h)(n=>{var s,u;return(null===(u=null===(s=n.payload)||void 0===s?void 0:s.widgetId)||void 0===u?void 0:u.toString())===this.widgetConfigurationService.getWidget().id}),(0,ht.U)(n=>{var s,u;return null!==(u=null===(s=n.payload)||void 0===s?void 0:s.height)&&void 0!==u?u:0}));i.pipe((0,de.R)(this.onDestroy$)).subscribe(n=>{var s;this.tableContainerHeight=n-this.indentFromTop,null===(s=this.vscrollViewport)||void 0===s||s.checkViewportSize(),this.changeDetector.detectChanges()}),setTimeout(()=>{(0,At.T)((0,wi.of)(this.range*this.rowHeight),i,(0,wi.of)(this.el.nativeElement.getBoundingClientRect().height)).pipe((0,Ut.h)(n=>!!n),(0,oi.q)(1),(0,et.b)(n=>{this.tableWidgetHeight=n,this.virtualScrollAddon.subscribeToVirtualScroll(),this.eventBus.getStream(T.j7).next({})})).subscribe()})}ngOnDestroy(){var t;this.onDestroy$.next(),this.onDestroy$.complete(),this.tableUpdate$.complete(),null===(t=this.searchTerm$)||void 0===t||t.complete(),this.pizzagnaService.setProperty({componentId:"bodyContent",propertyPath:["fallbackKey"],pizzagnaKey:h.xW.Data},void 0)}shouldDisplayTable(){var t;const i=this.columns.length>0,n=(null===(t=this.tableData)||void 0===t?void 0:t.length)>0;return this.isSearchEnabled||this.hasVirtualScroll&&(this.isBusy||this.idle)?i:i&&n}dataTrackBy(t,i){return i?i.id:t}columnTrackBy(t,i){return i.id}updateColumns(t){this.headers=t.columns.filter(s=>s.isActive).map(s=>s.id);const i=t.columns.every(s=>Boolean(s.width)),n=t.columns.map((s,u,f)=>{var F,$,Q,X;return this.columnsWidthMap.set(s.id,s.width),i&&this.columnsWidthMap.set(f[f.length-1].id,void 0),Object.assign(Object.assign({},s),{sortable:null===(X=this.sortableSet[null===(Q=null===($=null===(F=null==s?void 0:s.formatter)||void 0===F?void 0:F.properties)||void 0===$?void 0:$.dataFieldIds)||void 0===Q?void 0:Q.value])||void 0===X||X})});n.length>0&&i&&this.logger.warn("Cannot set width for all columns. Resetting last column width."),this.columns.length!==n.length?this.columns=[...n]:this.columns.forEach((s,u)=>{Object.assign(s,n[u],{})})}mapTableData(t,i,n){return n&&0!==n.length?t.map(s=>{const u=i.reduce((f,F)=>{var $,Q,X;const ue=null===(Q=null===($=F.formatter)||void 0===$?void 0:$.properties)||void 0===Q?void 0:Q.dataFieldIds;if(!ue)return f;const Te=Object.keys(ue).reduce((pe,xe)=>(pe[xe]=s[ue[xe]],pe),{});return f[F.id]=Object.assign({data:Te},Ko()(null===(X=F.formatter)||void 0===X?void 0:X.properties,"dataFieldIds")),f},{});return u.__record=s,u}):(this.logger.warn("There are no data fields defined, so table data cannot be displayed."),[])}onSortOrderChanged(t){var i,n;this.sortedColumn=t;const s=this.columns.find($=>$.id===t.sortBy);if(!s)return;const u=null===(n=null===(i=s.formatter)||void 0===i?void 0:i.properties)||void 0===n?void 0:n.dataFieldIds,f=null==u?void 0:u.value;if(!f)return;const F={sortBy:f,direction:t.direction};We()(F,this.sortFilter)||(this.sortFilter=F,this.flushTableData(),this.eventBus.getStream(T.RG).next({}))}onInteraction(t,i){this.interactive&&(i.target.closest((this.configuration.interactionIgnoredSelectors||d.hrM).join(","))||this.eventBus.getStream(T.b1).next({payload:{data:t.__record}}))}onSearchInputChanged(t){this.searchValue=t,this.searchTerm$.next("")}getColumnAlignment(t){var i,n,s;return!(null===(i=null==t?void 0:t.formatter)||void 0===i?void 0:i.componentType)||this.formattersRegistryService.isEmpty?this.defaultColumnAlignment:((null===(n=this.formatters)||void 0===n?void 0:n.version)!==this.formattersRegistryService.stateVersion&&(this.formatters={items:this.formattersRegistryService.getItems().reduce((u,f)=>Object.assign(Object.assign({},u),{[f.componentType]:f}),{}),version:this.formattersRegistryService.stateVersion}),(null===(s=this.formatters.items[t.formatter.componentType])||void 0===s?void 0:s.alignment)||this.defaultColumnAlignment)}setSortFilter(){var t,i,n,s,u,f,F;if(this.configuration){const $=null===(t=this.configuration.sorterConfiguration)||void 0===t?void 0:t.sortBy,Q=null===(f=null===(u=null===(s=null===(n=null===(i=this.configuration.columns)||void 0===i?void 0:i.find(X=>X.id===$))||void 0===n?void 0:n.formatter)||void 0===s?void 0:s.properties)||void 0===u?void 0:u.dataFieldIds)||void 0===f?void 0:f.value;this.sortFilter={direction:(null===(F=this.configuration.sorterConfiguration)||void 0===F?void 0:F.descendantSorting)?d.aQE.descending:d.aQE.ascending,sortBy:Q}}}isSortByUpdated(t){var i;const n=null===(i=t.previousValue)||void 0===i?void 0:i.sorterConfiguration,s=t.currentValue.sorterConfiguration,u=null==n?void 0:n.sortBy,f=null==s?void 0:s.sortBy;return f?!(u===f&&s.descendantSorting===n.descendantSorting):Boolean(u)}updateTable(){this.widgetData&&this.dataFields&&this.configuration.columns&&(this.updateColumns(this.configuration),this.idle=!1,this.tableData=this.mapTableData(this.widgetData,this.configuration.columns,this.dataFields),this.tableUpdate$.next(),this.changeDetector.detectChanges())}registerSorter(){this.dataSource.registerComponent({sorter:{componentInstance:{getFilters:()=>({type:"sorter",value:this.sortFilter})}}})}setSortableSet(){this.sortableSet={},this.dataFields.forEach(t=>{var i;this.sortableSet[t.id]=null===(i=t.sortable)||void 0===i||i})}flushTableData(){this.idle=!0,this.tableData=[]}getTableScrollRange(){var t;const n=(null!==(t=this._scrollBuffer)&&void 0!==t?t:0)/100+1;return this._range?Math.floor(this._range*n):Math.floor(this.tableWidgetHeight/this.rowHeight*2*n)}}return o.lateLoadKey="TableWidgetComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(Qo.I,8),e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.zCP),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(d.mQy),e.Y36(Ui),e.Y36(zi),e.Y36(_e.C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-widget"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Xo,5),e.Gf(C.N7,5),e.Gf(d.xhB,5,e.SBq)),2&t){let n;e.iGM(n=e.CRH())&&(i.table=n.first),e.iGM(n=e.CRH())&&(i.vscrollViewport=n.first),e.iGM(n=e.CRH())&&(i.tableRows=n)}},hostVars:4,hostBindings:function(t,i){2&t&&(e.Tol(i.elementClass),e.ekj("table-widget-fullwidth",!0))},inputs:{widgetData:"widgetData",componentId:"componentId",configuration:"configuration",dataFields:"dataFields",totalItems:"totalItems",indentFromTop:"indentFromTop",sortable:"sortable",delayedMousePresenceDetectionEnabled:"delayedMousePresenceDetectionEnabled",range:"range",elementClass:"elementClass"},features:[e._Bn([Ui,zi]),e.TTD],decls:11,vars:24,consts:[["class","h-100 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"nui-table-widget","d-flex","flex-column",3,"ngClass"],["class","mr-2 mb-2 flex-row",4,"ngIf"],[1,"flex-row","h-100","nui-table-widget-container",3,"nuiDelayedMousePresenceDetection","delay","mousePresentSubject"],["tableStickyHeader","",1,"calc-height",2,"height","calc(100% - 2px)",3,"itemSize","ngClass"],["nui-table","",1,"nui-table-widget__main",3,"reorderable","sortable","totalItems","dataSource","sortedColumn","trackBy","sortOrderChanged"],["widgetTable",""],[3,"nuiColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["nui-header-row","",4,"nuiHeaderRowDef"],["nuiRowDef","","cdkVirtualFor","",3,"nuiRowDefColumns","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"h-100","d-flex","justify-content-center","align-items-center"],["image","no-data-to-show"],[1,"mr-2","mb-2","flex-row"],[1,"unlimited-width","d-flex","justify-content-end","flex-grow-1",3,"value","inputChange","cancel"],[3,"nuiColumnDef"],["nui-header-cell","",3,"isColumnSortingDisabled","width","max-width","min-width","title","tooltipText","alignment",4,"nuiHeaderCellDef"],["nui-cell","",3,"width","max-width","min-width","alignment",4,"nuiCellDef"],["nui-header-cell","",3,"isColumnSortingDisabled","title","tooltipText","alignment"],["nui-cell","",3,"alignment"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["nui-header-row",""],["nui-row","","density","tiny",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,jo,2,0,"div",0),e.TgZ(1,"div",1),e.YNc(2,qo,2,1,"div",2),e.TgZ(3,"div",3)(4,"cdk-virtual-scroll-viewport",4),e.ALo(5,"async"),e.TgZ(6,"table",5,6),e.NdJ("sortOrderChanged",function(s){return i.onSortOrderChanged(s)}),e.YNc(8,rn,4,1,"ng-container",7),e.YNc(9,sn,1,0,"tr",8),e.YNc(10,an,1,1,"ng-template",9),e.qZA()()()()),2&t&&(e.Q6J("ngIf",!i.shouldDisplayTable()),e.xp6(1),e.Q6J("ngClass",i.shouldDisplayTable()?"h-100":"invisible"),e.xp6(1),e.Q6J("ngIf",i.isSearchEnabled),e.xp6(1),e.Q6J("nuiDelayedMousePresenceDetection",i.delayedMousePresenceDetectionEnabled)("delay",i.configuration.scrollActivationDelayMs)("mousePresentSubject",i.mousePresent$),e.xp6(1),e.Q6J("itemSize",i.rowHeight)("ngClass",e.VKq(22,ln,!1===e.lcZ(5,20,i.mousePresent$)&&i.delayedMousePresenceDetectionEnabled)),e.xp6(2),e.Q6J("reorderable",null==i.configuration?null:i.configuration.reorderable)("sortable",i.sortable)("totalItems",i.totalItems)("dataSource",i.virtualScrollAddon.visibleItems)("sortedColumn",i.sortedColumn)("trackBy",i.dataTrackBy),e.xp6(2),e.Q6J("ngForOf",i.columns)("ngForTrackBy",i.columnTrackBy),e.xp6(1),e.Q6J("nuiHeaderRowDef",i.headers),e.xp6(1),e.Q6J("nuiRowDefColumns",i.headers)("cdkVirtualForOf",i.tableData)("cdkVirtualForTrackBy",i.dataTrackBy))},directives:[r.O5,d.cuP,r.mk,d.gSk,Li,C.N7,d.Fpu,C.xd,d.ac$,r.sg,d.yNF,d.Go6,d.Asp,d.wCL,d.tNH,x.$,U.Pl,d.Pu4,d.ue9,d.l6o,C.x0,d.xhB],pipes:[r.Ov],styles:[".nui-table-widget[_ngcontent-%COMP%]{overflow:auto;width:100%}.nui-table-widget[_ngcontent-%COMP%]   .display-contents[_ngcontent-%COMP%]{display:contents}.nui-table-widget__main[_ngcontent-%COMP%]{flex:1 1 auto}.nui-table-widget__paginator[_ngcontent-%COMP%]{margin-top:10px}.nui-table-widget__overflow[_ngcontent-%COMP%]{overflow-y:auto}.nui-table-widget[_ngcontent-%COMP%]   .nui-table-widget-container[_ngcontent-%COMP%]   .virtual-scroll-disabled.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{overflow:hidden!important}.mobile[_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%], .mobile   [_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%]{min-height:200px}.table-widget-fullwidth[_nghost-%COMP%]{width:calc(100% - 10px)}.invisible[_ngcontent-%COMP%]{height:0}@-moz-document url-prefix(){.nui-table-widget-container{margin-right:10px}}"],changeDetection:0}),o})();var Bi=a(69769),ri=a(15439),Ve=a.n(ri);let dn=(()=>{class o{convertToSerializable(t){return{startDatetime:t.startDatetime.format(),endDatetime:t.endDatetime.format(),selectedPresetId:t.selectedPresetId,title:t.title}}convertFromSerializable(t){return{startDatetime:Ve()(t.startDatetime,Ve().defaultFormat),endDatetime:Ve()(t.endDatetime,Ve().defaultFormat),selectedPresetId:t.selectedPresetId,title:t.title}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),si=(()=>{class o{constructor(t,i,n,s,u,f,F){this.pizzagnaService=t,this.timeframeService=i,this.tfSerialization=n,this.history=s,this.dataSource=u,this.eventBus=f,this.changeDetector=F,this.currentTimeframe=this.timeframeService.getTimeframeByPresetId("last7Days")}ngOnChanges(t){if(t.timeframe){let i=this.tfSerialization.convertFromSerializable(this.timeframe);i=this.timeframeService.reconcileTimeframe(i),i.selectedPresetId&&(i=this.timeframeService.getTimeframeByPresetId(i.selectedPresetId)),this.currentTimeframe=i,t.timeframe.isFirstChange()||this.eventBus.getStream(T.RG).next({})}t.minDate&&(this.minDateAsMoment=Ve()(this.minDate,Ve().defaultFormat)),t.maxDate&&(this.maxDateAsMoment=Ve()(this.maxDate,Ve().defaultFormat))}ngOnInit(){this.history.restart(this.currentTimeframe),this.eventBus.getStream(T.re).subscribe(t=>{if(!t.payload)throw new Error("Unable to set timeframe. Event payload is undefined");this.onTimeframeChange(this.history.save(this.tfSerialization.convertFromSerializable(t.payload)))}),this.dataSource&&this.dataSource.registerComponent({timeframe:{componentInstance:{getFilters:()=>({type:"timeframe",value:this.timeframeService.reconcileTimeframe(this.currentTimeframe)})}}})}onTimeframeChange(t){const i=this.timeframeService.reconcileTimeframe(t);i.selectedPresetId=i.selectedPresetId||"",this.timeframeService.isEqual(i,this.currentTimeframe)||this.pizzagnaService.setProperty({pizzagnaKey:h.xW.Data,componentId:this.componentId,propertyPath:["timeframe"]},this.tfSerialization.convertToSerializable(i))}}return o.lateLoadKey="TimeframeSelectionComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(le.p),e.Y36(d.hYR),e.Y36(dn),e.Y36(d.vpR),e.Y36(h.Fk,8),e.Y36(h.nY),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-timeframe-selection"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{componentId:"componentId",minDate:"minDate",maxDate:"maxDate",timeframe:"timeframe"},features:[e._Bn([d.vpR]),e.TTD],decls:6,vars:8,consts:[[3,"minDate","maxDate","timeFrame","historyIndex","timeFrameChange","undo","clear"],["icon","calendar",1,"pr-3"],["timeFrameSelection","",3,"presets"]],template:function(t,i){1&t&&(e.TgZ(0,"nui-time-frame-bar",0),e.NdJ("timeFrameChange",function(s){return i.onTimeframeChange(i.history.restart(s))})("undo",function(){return i.onTimeframeChange(i.history.undo())})("clear",function(){return i.onTimeframeChange(i.history.restart())}),e._UZ(1,"nui-icon",1),e._uU(2),e.ALo(3,"timeFrame"),e.TgZ(4,"nui-quick-picker",2),e._UZ(5,"nui-time-frame-picker"),e.qZA()()),2&t&&(e.Q6J("minDate",i.minDateAsMoment)("maxDate",i.maxDateAsMoment)("timeFrame",i.currentTimeframe)("historyIndex",i.history.index),e.xp6(2),e.hij(" ",e.lcZ(3,6,i.currentTimeframe)," "),e.xp6(2),e.Q6J("presets",i.timeframeService.currentPresets))},directives:[d.y0H,d.oJW,d.mtp,d.xlZ],pipes:[d.aEp],styles:["[_nghost-%COMP%]{border-top:1px solid;border-top-color:var(--nui-color-line-default,#d9d9d9);border-bottom:1px solid;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),o})();var yt=(()=>{return(o=yt||(yt={})).DataPoints="dataPoints",o.Series="series",o.Values="values",yt;var o})(),ot=(()=>{return(o=ot||(ot={})).Time="time",o.TimeInterval="timeInterval",o.Linear="linear",ot;var o})(),$e=(()=>{return(o=$e||($e={})).Line="line",o.StackedArea="stackedArea",o.StackedPercentageArea="stackedPercentageArea",o.StackedBar="stackedBar",o.StatusBar="statusBar",$e;var o})();let vt=(()=>{class o{constructor(t){this.unitConversionService=t,this.unitConversionPipe=new it(this.unitConversionService)}getScale(t,i){let n;switch(t.type){case ot.Time:n=new g.FBd;break;case ot.Linear:n=new g.f$s,n.formatters.tick=s=>this.unitConversionPipe.transform(s,i,d.Qln.Standard);break;case ot.TimeInterval:n=new g.lTH((0,ri.duration)(1,"hour"))}return this.updateConfiguration(n,t),n}updateConfiguration(t,i){var n;if(i.type===ot.TimeInterval&&t instanceof g.lTH){const s=null===(n=i.properties)||void 0===n?void 0:n.interval;if("number"==typeof s){if(s<=0)throw new Error("Interval value must be greater than zero.");t.interval((0,ri.duration)(s,"seconds"))}}}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.CrH))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),Wi=(()=>{class o{constructor(t,i){this.timeseriesScalesService=t,this.dataSource=i,this.widgetData={},this.configuration={},this.scales={},this.destroy$=new ie.x,this.buildChart$=new ie.x,this.resetChart=!1,this.chartBuilt=!1,this.buildChart$.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.chartBuilt=!0})}get seriesInteractive(){var t,i,n,s;return"series"===(null===(t=this.configuration)||void 0===t?void 0:t.interaction)||(null===(s=null===(n=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===n?void 0:n.getFeatureConfig(h.ni.Interactivity))||void 0===s?void 0:s.enabled)||!1}ngOnChanges(t){var i,n,s,u,f,F;let $=!1,Q=!1;if(t.configuration){const X=t.configuration.currentValue,ue=t.configuration.previousValue;if((null==X?void 0:X.preset)!==(null==ue?void 0:ue.preset)&&(Q=!0),(null==X?void 0:X.scales)!==(null==ue?void 0:ue.scales))for(const Te of Object.keys(null==X?void 0:X.scales)){const pe=null===(i=null==X?void 0:X.scales)||void 0===i?void 0:i[Te],xe=null===(n=null==ue?void 0:ue.scales)||void 0===n?void 0:n[Te];(null==pe?void 0:pe.type)===(null==xe?void 0:xe.type)&&this.scales[Te]?(null==pe?void 0:pe.properties)!==(null==xe?void 0:xe.properties)&&(this.timeseriesScalesService.updateConfiguration(this.scales[Te],pe),$=!0):(this.scales[Te]=this.timeseriesScalesService.getScale(pe,X.units),$=!0)}}(Q||!this.chartBuilt)&&this.buildChart(),t.widgetData&&!t.widgetData.isFirstChange()&&(0===(null===(u=null===(s=this.widgetData)||void 0===s?void 0:s.series)||void 0===u?void 0:u.length)&&(this.resetChart=!0),this.widgetData&&this.widgetData.series&&(this.resetChart&&(null===(F=null===(f=this.widgetData)||void 0===f?void 0:f.series)||void 0===F?void 0:F.length)>0&&(this.resetChart=!1,this.buildChart()),$=!0)),$&&this.updateChartData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.buildChart$.complete()}}return o.\u0275fac=function(t){e.$Z()},o.\u0275dir=e.lG2({type:o,inputs:{widgetData:"widgetData",configuration:"configuration"},features:[e.TTD]}),o})();function cn(o,l){1&o&&e._UZ(0,"nui-icon",12),2&o&&e.Q6J("icon",l.$implicit)}function _n(o,l){if(1&o&&(e.TgZ(0,"div",6)(1,"nui-legend",7)(2,"nui-legend-series",8)(3,"div",9),e._UZ(4,"div",10),e.YNc(5,cn,1,1,"nui-icon",11),e.qZA()()()()),2&o){const t=l.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("active",i.chartAssist.isLegendActive),e.xp6(1),e.Q6J("descriptionPrimary",t.legendDescriptionPrimary)("descriptionSecondary",t.legendDescriptionSecondary),e.xp6(2),e.Udp("background-color",i.getDataPointData(t,"color")),e.xp6(1),e.Q6J("ngIf",i.getDataPointData(t,"icon"))}}function un(o,l){if(1&o&&(e.TgZ(0,"div",3),e._UZ(1,"nui-chart",4),e.YNc(2,_n,6,6,"div",5),e.qZA()),2&o){const t=l.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("chart",t.chart)("nuiChartCollectionId",i.collectionId),e.xp6(1),e.Q6J("ngIf",(null==t.chartSeriesSet?null:t.chartSeriesSet.length)>0&&t.chartSeriesSet[0])}}function pn(o,l){if(1&o&&(e.TgZ(0,"div",1),e.YNc(1,un,3,3,"div",2),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.chartAssist.sparks)("ngForTrackBy",t.chartAssist.trackByFn)}}let ai=(()=>{class o extends Wi{constructor(t,i,n,s,u){super(n,i),this.iconService=t,this.timeseriesScalesService=n,this.changeDetector=s,this.eventBus=u,this.collectionId=(0,d.VjN)("timeseries-status-charts"),this.chartUpdate$=new ie.x}ngOnInit(){}getDataPointData(t,i){var n;const s=null===(n=this.chartAssist.highlightedDataPoints[t.id])||void 0===n?void 0:n.data;return s?s[i]:t.data.length>0?t.data[t.data.length-1][i]:void 0}buildChart(){this.buildChart$.next(),this.chartAssist=new g.ruA,this.accessors=(0,g.s_I)(this.chartAssist.palette.standardColors),this.accessors.data.color=(i,n,s,u)=>void 0===i.color?"var(--nui-color-semantic-unknown)":i.color,this.accessors.data.thickness=i=>void 0===i.thick||i.thick?g.Z7w.THICK:g.Z7w.THIN,this.accessors.data.marker=i=>i.icon?this.iconService.getIconResized(this.iconService.getIconData(i.icon).code,8):void 0,this.renderer=new g.Z7w({highlightStrategy:new g.Pkp("x"),pointerEvents:!1}),this.scales.y=new g.jS7,this.scales.y.fixDomain(g.s1E.STATUS_DOMAIN)}updateChartData(){var t,i;this.chartUpdate$.next();const n=this.widgetData.series.map(s=>Object.assign(Object.assign({},s),{data:this.transformData(s.data,this.scales.x instanceof g.lTH),accessors:this.accessors,renderer:this.renderer,scales:this.scales}));this.chartAssist.update(n),this.configuration.enableZoom&&(this.chartAssist.sparks.forEach(s=>{var u,f;(null===(u=null==s?void 0:s.chart)||void 0===u?void 0:u.hasPlugin(g.Rbc))||null===(f=null==s?void 0:s.chart)||void 0===f||f.addPlugin(new g.Rbc({enableExternalEvents:!0}))}),null===(t=this.chartAssist.sparks[0].chart)||void 0===t||t.getEventBus().getStream(g.bdF).pipe((0,de.R)((0,At.T)(this.chartUpdate$,null===(i=this.chartAssist.sparks[0].chart)||void 0===i?void 0:i.eventBus.getStream(g.wu_),this.buildChart$))).subscribe(s=>{const u=s.data,f=u[Object.keys(u)[0]];this.eventBus.getStream(T.re).next({payload:{startDatetime:f[0],endDatetime:f[1],selectedPresetId:void 0}})}))}transformData(t,i){const n=[];return t.forEach((s,u)=>{(i||t.length-1!==u)&&n.push({start:s.x,end:i?s.x:t[u+1].x,status:s.y,color:s.color,thick:s.thick,icon:s.icon})}),n}}return o.lateLoadKey="StatusChartComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(d.C6t),e.Y36(h.Fk,8),e.Y36(vt),e.Y36(e.sBO),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-status-bar-chart"]],features:[e.qOj],decls:1,vars:1,consts:[["class","p-3 status-bar-chart",4,"ngIf"],[1,"p-3","status-bar-chart"],["class","d-flex",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex"],[1,"d-flex","flex-grow-1",3,"chart","nuiChartCollectionId"],["class","d-flex flex-column pl-2",4,"ngIf"],[1,"d-flex","flex-column","pl-2"],[1,"status-bar-chart__legend",3,"active"],[3,"descriptionPrimary","descriptionSecondary"],[1,"status-bar-chart__legend__tile","d-flex","justify-content-center","align-items-center"],[1,"w-100","h-100","status-bar-chart__legend__tile__background"],["class","status-bar-chart__legend__tile__icon",3,"icon",4,"ngIf"],[1,"status-bar-chart__legend__tile__icon",3,"icon"]],template:function(t,i){1&t&&e.YNc(0,pn,2,2,"div",0),2&t&&e.Q6J("ngIf",i.chartAssist)},directives:[r.O5,r.sg,g.xH4,g.VMb,g.FVX,g.kJo,d.oJW],styles:[".status-bar-chart__legend__tile[_ngcontent-%COMP%]{width:60px;position:relative}.status-bar-chart__legend__tile__background[_ngcontent-%COMP%]{position:absolute;opacity:.4}.status-bar-chart__legend__tile__icon[_ngcontent-%COMP%]{position:absolute}"]}),o})(),zt=(()=>{class o extends Wi{constructor(t,i,n,s){super(n,i),this.eventBus=t,this.timeseriesScalesService=n,this.changeDetector=s,this.valueAccessorKey="y",this.collectionId=""}mapSeriesSet(t,i){return t.map(n=>Object.assign(Object.assign({},n),{scales:i,renderer:this.renderer,accessors:this.accessors}))}hasLegend(){return this.configuration.legendPlacement&&this.configuration.legendPlacement!==Fe.w.None}legendShouldBeAlignedRight(){return this.configuration.legendPlacement===Fe.w.Right}onPrimaryDescClick(t,i){!this.seriesInteractive||(t.stopPropagation(),this.eventBus.getStream(T.b1).next({payload:{data:i,interactionType:yt.Series}}))}updateChartData(){this.chartAssist.update(this.mapSeriesSet(this.widgetData.series,this.scales))}buildChart(){var t;this.buildChart$.next();const i=this.configuration.chartColors&&(null===(t=this.configuration.chartColors)||void 0===t?void 0:t.length)>0?new g.jpW(this.configuration.chartColors):(0,g.GUR)(),n=new g.syg(i);this.accessors=this.createAccessors(n.standardColors),this.chartAssist=this.createChartAssist(n);const s=this.chartAssist.chart;this.configuration.enableZoom&&s.addPlugin(new g.Rbc),s.getEventBus().getStream(g.bdF).pipe((0,de.R)((0,At.T)(this.destroy$,this.buildChart$))).subscribe(u=>{const f=u.data,F=f[Object.keys(f)[0]];this.eventBus.getStream(T.re).next({payload:{startDatetime:F[0],endDatetime:F[1],selectedPresetId:void 0}})}),this.setupInteraction()}setupInteraction(){this.chartAssist.chart.getEventBus().getStream(g.C1c).pipe((0,de.R)((0,At.T)(this.destroy$,this.buildChart$))).subscribe(t=>{const i=t.data;i.interactionType===g.s_5.Click&&this.eventBus.getStream(T.b1).next({payload:{data:i.dataPoints,interactionType:yt.DataPoints}})}),this.chartAssist.chart.getEventBus().getStream(g.hkV).pipe((0,de.R)((0,At.T)(this.destroy$,this.buildChart$))).subscribe(t=>{const i=t.data;i.interactionType===g.s_5.Click&&this.eventBus.getStream(T.b1).next({payload:{data:i.values,interactionType:yt.Values}})})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(h.nY),e.LFG(h.Fk,8),e.LFG(vt),e.LFG(e.sBO))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const gn=function(o){return{"nui-text-link-small link":o}};function hn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(n,s)}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,gn,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function mn(o,l){if(1&o&&(e.TgZ(0,"a",17),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function fn(o,l){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Tn(o,l){if(1&o&&(e.TgZ(0,"a",19),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Cn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-legend-series",8),e.NdJ("isSelectedChange",function(n){const u=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(u.id,n)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",9),e._UZ(2,"nui-chart-marker",10),e.qZA(),e.TgZ(3,"div",11),e.YNc(4,hn,2,4,"div",12),e.YNc(5,mn,2,3,"a",13),e.YNc(6,fn,2,2,"div",14),e.YNc(7,Tn,2,3,"a",15),e.qZA()()}if(2&o){const t=l.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const On=function(o){return[o]};function In(o,l){if(1&o&&(e.TgZ(0,"div",5)(1,"nui-legend",6),e.YNc(2,Cn,8,12,"nui-legend-series",7),e.qZA()()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,On,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let li=(()=>{class o extends zt{constructor(t,i,n,s){super(t,i,n,s),this.renderer=new g.Med}createAccessors(t){return new g.qxh(t)}createChartAssist(t){const i=new g.c_e;i.axis.left.fit=!0;const n=new g.kL2(new g.Be5(i));return new g.doR(n,null,t)}}return o.lateLoadKey="LineChartComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(vt),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-line-chart"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._UZ(5,"nui-chart",3),e.qZA(),e.YNc(6,In,3,8,"div",4),e.qZA()),2&t&&(e.xp6(3),e.Oqu(i.configuration.leftAxisLabel),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[g.xH4,g.VMb,r.O5,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}"]}),o})();const vn=function(o){return{"nui-text-link-small link":o}};function En(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(n,s)}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,vn,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Sn(o,l){if(1&o&&(e.TgZ(0,"a",17),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Rn(o,l){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Nn(o,l){if(1&o&&(e.TgZ(0,"a",19),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function An(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-legend-series",8),e.NdJ("isSelectedChange",function(n){const u=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(u.id,n)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",9),e._UZ(2,"nui-chart-marker",10),e.qZA(),e.TgZ(3,"div",11),e.YNc(4,En,2,4,"div",12),e.YNc(5,Sn,2,3,"a",13),e.YNc(6,Rn,2,2,"div",14),e.YNc(7,Nn,2,3,"a",15),e.qZA()()}if(2&o){const t=l.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const yn=function(o){return[o]};function Mn(o,l){if(1&o&&(e.TgZ(0,"div",5)(1,"nui-legend",6),e.YNc(2,An,8,12,"nui-legend-series",7),e.qZA()()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,yn,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let di=(()=>{class o extends zt{constructor(t,i,n,s){super(t,i,n,s),this.renderer=new g.QtU,this.valueAccessorKey="y1"}createAccessors(t){return(0,g.mIe)(t)}createChartAssist(t){const i=(0,g.nuZ)();i.config().axis.left.fit=!0;const n=new g.kL2(i);return new g.doR(n,g.aCj,t)}}return o.lateLoadKey="StackedAreaChartComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(vt),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-stacked-area-chart"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._UZ(5,"nui-chart",3),e.qZA(),e.YNc(6,Mn,3,8,"div",4),e.qZA()),2&t&&(e.xp6(3),e.Oqu(i.configuration.leftAxisLabel),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[g.xH4,g.VMb,r.O5,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}"]}),o})();const Pn=function(o){return{"nui-text-link-small link":o}};function Dn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(n,s)}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Pn,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Fn(o,l){if(1&o&&(e.TgZ(0,"a",17),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function bn(o,l){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function xn(o,l){if(1&o&&(e.TgZ(0,"a",19),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Ln(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-legend-series",8),e.NdJ("isSelectedChange",function(n){const u=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(u.id,n)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",9),e._UZ(2,"nui-chart-marker",10),e.qZA(),e.TgZ(3,"div",11),e.YNc(4,Dn,2,4,"div",12),e.YNc(5,Fn,2,3,"a",13),e.YNc(6,bn,2,2,"div",14),e.YNc(7,xn,2,3,"a",15),e.qZA()()}if(2&o){const t=l.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const Gn=function(o){return[o]};function wn(o,l){if(1&o&&(e.TgZ(0,"div",5)(1,"nui-legend",6),e.YNc(2,Ln,8,12,"nui-legend-series",7),e.qZA()()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,Gn,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let ci=(()=>{class o extends zt{constructor(t,i,n,s){super(t,i,n,s),this.valueAccessorKey="value",this.renderer=new g.Z7w({highlightStrategy:new g.Pkp("x"),pointerEvents:!1})}mapSeriesSet(t,i){return this.accessors.data.thickness=i.x instanceof g.lTH?void 0:()=>5,super.mapSeriesSet(t,i)}createAccessors(t){const i=(0,g.Q6e)({horizontal:!1},t);return i.data.category=n=>n.x,i.data.value=n=>n.y,i}createChartAssist(t){const i=new g.kL2((0,g.skL)());return i.addPlugin(new g.$fK),new g.doR(i,g.knu,t)}}return o.lateLoadKey="StackedBarChartComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(vt),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-stacked-bar-chart"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._UZ(5,"nui-chart",3),e.qZA(),e.YNc(6,wn,3,8,"div",4),e.qZA()),2&t&&(e.xp6(3),e.Oqu(i.configuration.leftAxisLabel),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[g.xH4,g.VMb,r.O5,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}"]}),o})();const $n=function(o){return{"nui-text-link-small link":o}};function Un(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(n,s)}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,$n,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function zn(o,l){if(1&o&&(e.TgZ(0,"a",17),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Bn(o,l){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Wn(o,l){if(1&o&&(e.TgZ(0,"a",19),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function kn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-legend-series",8),e.NdJ("isSelectedChange",function(n){const u=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(u.id,n)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",9),e._UZ(2,"nui-chart-marker",10),e.qZA(),e.TgZ(3,"div",11),e.YNc(4,Un,2,4,"div",12),e.YNc(5,zn,2,3,"a",13),e.YNc(6,Bn,2,2,"div",14),e.YNc(7,Wn,2,3,"a",15),e.qZA()()}if(2&o){const t=l.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const Zn=function(o){return[o]};function Vn(o,l){if(1&o&&(e.TgZ(0,"div",5)(1,"nui-legend",6),e.YNc(2,kn,8,12,"nui-legend-series",7),e.qZA()()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,Zn,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let _i=(()=>{class o extends zt{constructor(t,i,n,s){super(t,i,n,s),this.renderer=new g.QtU,this.valueAccessorKey="y1"}createAccessors(t){return(0,g.mIe)(t)}createChartAssist(t){const i=(0,g.nuZ)();i.config().axis.left.fit=!0;const n=new g.kL2(i);return new g.doR(n,g.HAP,t)}}return o.lateLoadKey="StackedPercentageAreaChartComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(vt),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-stacked-percentage-area-chart"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._UZ(5,"nui-chart",3),e.qZA(),e.YNc(6,Vn,3,8,"div",4),e.qZA()),2&t&&(e.xp6(3),e.Oqu(i.configuration.leftAxisLabel),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[g.xH4,g.VMb,r.O5,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}"]}),o})(),ki=(()=>{class o{constructor(){this.presets={[$e.Line]:{componentType:li.lateLoadKey},[$e.StackedArea]:{componentType:di.lateLoadKey},[$e.StackedPercentageArea]:{componentType:_i.lateLoadKey},[$e.StackedBar]:{componentType:ci.lateLoadKey},[$e.StatusBar]:{componentType:ai.lateLoadKey}}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Jn(o,l){}const Yn=function(o,l,t){return{widgetData:o,configuration:l,collectionId:t}};function Hn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.ynx(1,3,4),e.YNc(3,Jn,0,0,"ng-template",5),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk(),e.qZA()}if(2&o){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentType",i.chartPreset.componentType)("properties",e.kEZ(3,Yn,i.widgetData,i.configuration,i.collectionId||(null==i.configuration?null:i.configuration.collectionId))),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function Kn(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"nui-image",6),e.qZA())}let ui=(()=>{class o{constructor(t,i){this.timeseriesChartPresetService=t,this.changeDetector=i,this.elementClass=""}ngOnChanges(t){var i,n;if(t.configuration){const s=t.configuration.currentValue,u=t.configuration.previousValue;(null==s?void 0:s.preset)!==(null==u?void 0:u.preset)&&(this.chartPreset=this.timeseriesChartPresetService.presets[null!==(n=null===(i=this.configuration)||void 0===i?void 0:i.preset)&&void 0!==n?n:$e.Line])}}shouldShowChart(){var t,i,n;return(null!==(n=null===(i=null===(t=this.widgetData)||void 0===t?void 0:t.series)||void 0===i?void 0:i.length)&&void 0!==n?n:0)>0}}return o.lateLoadKey="TimeseriesWidgetComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(ki),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-timeseries-widget"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",collectionId:"collectionId",elementClass:"elementClass"},features:[e.TTD],decls:2,vars:2,consts:[["class","h-100",4,"ngIf"],[4,"ngIf"],[1,"h-100"],["nuiComponentPortal","","componentId","timeseriesWidgetChart",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["image","no-data-to-show"]],template:function(t,i){1&t&&(e.YNc(0,Hn,4,7,"div",0),e.YNc(1,Kn,2,0,"div",1)),2&t&&(e.Q6J("ngIf",i.shouldShowChart()),e.xp6(1),e.Q6J("ngIf",!i.shouldShowChart()))},directives:[r.O5,x.$,U.Pl,d.cuP],encapsulation:2}),o})();function Qn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-search",1),e.NdJ("inputChange",function(n){return e.CHM(t),e.oxw().onSearchInputChanged(n)})("cancel",function(n){return e.CHM(t),e.oxw().onSearch(n)})("search",function(n){return e.CHM(t),e.oxw().onSearch(n)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("value",t.searchValue)}}let pi=(()=>{class o{constructor(t,i){this.dataSource=t,this.eventBus=i,this.enabled=!1,this.searchTerm$=new ie.x,this.destroy$=new ie.x}ngOnInit(){var t,i,n,s;(null===(n=null===(i=null===(t=this.dataSource.features)||void 0===t?void 0:t.getSupportedFeatures())||void 0===i?void 0:i.search)||void 0===n?void 0:n.enabled)&&(this.enabled=!0),this.registerFilters(),this.handleSearchTermSubscription(null===(s=this.configuration)||void 0===s?void 0:s.searchOnKeyUp)}ngOnChanges(t){t.configuration&&this.handleSearchTermSubscription(t.configuration.currentValue.searchOnKeyUp)}onSearchInputChanged(t){var i,n;(null===(n=null===(i=this.configuration)||void 0===i?void 0:i.searchOnKeyUp)||void 0===n?void 0:n.enabled)&&(this.searchValue=t,this.searchTerm$.next(t))}onSearch(t){this.searchValue=t,this.searchTerm$.next(t)}ngOnDestroy(){this.eventBus.getStream(T.kV).next({payload:""}),this.destroy$.next(),this.destroy$.complete()}registerFilters(){var t;null===(t=this.dataSource)||void 0===t||t.registerComponent({search:{componentInstance:{getFilters:()=>({value:this.searchValue})}}})}handleSearchTermSubscription(t){var i;null===(i=this.searchTermSubscription)||void 0===i||i.unsubscribe(),this.searchTermSubscription=this.searchTerm$.pipe((0,de.R)(this.destroy$),(0,$i.b)((null==t?void 0:t.debounceTime)||o.defaultSearchDebounce)).subscribe(n=>{this.eventBus.getStream(T.RG).next({}),this.eventBus.getStream(T.kV).next({payload:n})})}}return o.lateLoadKey="WidgetSearchComponent",o.defaultSearchDebounce=500,o.\u0275fac=function(t){return new(t||o)(e.Y36(h.Fk,8),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-search"]],hostVars:4,hostBindings:function(t,i){2&t&&e.ekj("default",i.enabled)("invisible",!i.enabled)},inputs:{configuration:"configuration",searchValue:"searchValue"},features:[e.TTD],decls:1,vars:1,consts:[["class","unlimited-width",3,"value","inputChange","cancel","search",4,"ngIf"],[1,"unlimited-width",3,"value","inputChange","cancel","search"]],template:function(t,i){1&t&&e.YNc(0,Qn,1,1,"nui-search",0),2&t&&e.Q6J("ngIf",i.enabled)},directives:[r.O5,d.gSk],styles:[".default[_nghost-%COMP%]{padding:5px 10px}.invisible[_nghost-%COMP%]{height:0}"],changeDetection:0}),o})();var He=(()=>{return(o=He||(He={})).ErrorUnknown="errorUnknown",o.ErrorForbidden="errorForbidden",o.ErrorNotFound="errorNotFound",He;var o})();function Xn(o,l){}function jn(o,l){}function qn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",5),e.ynx(1,1,2),e.YNc(3,jn,0,0,"ng-template",3),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk(),e.qZA()}if(2&o){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentId",i.nodeConfigs[1].id)("componentType",i.nodeConfigs[1].componentType)("providers",i.nodeConfigs[1].providers)("properties",i.nodeConfigs[1].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}const er=function(o,l){return{"d-none":o,"d-flex":l}};let gi=(()=>{class o extends Ie{constructor(t,i,n){super(t,i,n),this.elementClass="",this.defaultClasses="w-100"}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`}ngOnDestroy(){super.ngOnDestroy()}getNodes(){return this.fallbackKey?[this.primaryContent,this.fallbackMap&&this.fallbackMap[this.fallbackKey]||He.ErrorUnknown]:[this.primaryContent]}}return o.lateLoadKey="WidgetBodyContentComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-body-content"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{componentId:"componentId",primaryContent:"primaryContent",fallbackKey:"fallbackKey",fallbackMap:"fallbackMap",elementClass:"elementClass"},features:[e.qOj],decls:5,vars:10,consts:[[1,"h-100",3,"ngClass"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["class","d-flex h-100",4,"ngIf"],[1,"d-flex","h-100"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",0),e.ynx(1,1,2),e.YNc(3,Xn,0,0,"ng-template",3),e.NdJ("attached",function(u){return e.CHM(n),e.MAs(2).attached(u)}),e.BQk(),e.qZA(),e.YNc(4,qn,4,5,"div",4)}if(2&t){const n=e.MAs(2);e.Q6J("ngClass",e.WLB(7,er,i.fallbackKey,!i.fallbackKey)),e.xp6(1),e.Q6J("componentId",i.nodeConfigs[0].id)("componentType",i.nodeConfigs[0].componentType)("providers",i.nodeConfigs[0].providers)("properties",i.nodeConfigs[0].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",n.portal),e.xp6(1),e.Q6J("ngIf",i.fallbackKey)}},directives:[r.mk,x.$,U.Pl,r.O5],encapsulation:2}),o})();function tr(o,l){1&o&&e._UZ(0,"nui-preview-overlay")}function ir(o,l){}let hi=(()=>{class o extends Ie{constructor(t,i,n,s){super(i,n,s),this.eventBus=t,this.editMode=!1,this.elementClass="",this.defaultClasses="d-flex h-100 w-100",this.getNodes=()=>[this.content]}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`,this.eventBus.getStream(T.N9).pipe((0,de.R)(this.destroyed$)).subscribe(t=>{this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["editMode"]},!!t.payload)})}ngOnDestroy(){super.ngOnDestroy()}}return o.lateLoadKey="WidgetBodyComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-body"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{componentId:"componentId",editMode:"editMode",content:"content",elementClass:"elementClass"},features:[e.qOj],decls:4,vars:6,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){if(1&t){const n=e.EpF();e.YNc(0,tr,1,0,"nui-preview-overlay",0),e.ynx(1,1,2),e.YNc(3,ir,0,0,"ng-template",3),e.NdJ("attached",function(u){return e.CHM(n),e.MAs(2).attached(u)}),e.BQk()}if(2&t){const n=e.MAs(2);e.Q6J("ngIf",i.editMode),e.xp6(1),e.Q6J("componentId",i.nodeConfigs[0].id)("componentType",i.nodeConfigs[0].componentType)("providers",i.nodeConfigs[0].providers)("properties",i.nodeConfigs[0].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",n.portal)}},directives:[r.O5,O.b,x.$,U.Pl],styles:["[_nghost-%COMP%]{position:relative}"]}),o})();var Et=a(41777);const or=["widgetHeaderCustomElement"];function nr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleCollapsed()}),e._UZ(1,"span",19),e.qZA()}}function rr(o,l){1&o&&(e.TgZ(0,"div",20),e._UZ(1,"nui-icon",21),e.qZA())}function sr(o,l){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.Q6J("title",t.title),e.xp6(1),e.hij(" ",t.title," ")}}function ar(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"a",23),e.NdJ("click",function(n){return e.CHM(t),e.oxw().prepareLink(n)})("mouseenter",function(n){return e.CHM(t),e.oxw().prepareLink(n)})("mousedown",function(n){return n.stopPropagation(),n.preventDefault()}),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("href",t.url,e.LSH)("nuiTooltip",t.linkTooltip),e.xp6(1),e.Oqu(t.title)}}function lr(o,l){if(1&o&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.Q6J("title",t.subtitle),e.xp6(1),e.hij(" ",t.subtitle," ")}}function dr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(n){return e.CHM(t),e.oxw().prepareLink(n)})("mouseenter",function(n){return e.CHM(t),e.oxw().prepareLink(n)})("mousedown",function(n){return n.stopPropagation(),n.preventDefault()}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("href",t.url,e.LSH)("nuiTooltip",t.linkTooltip)}}function cr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().onEditWidget()}),e.qZA()}}function _r(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleCollapsed()}),e.qZA()}}function ur(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-menu-action",30),e.NdJ("actionDone",function(){return e.CHM(t),e.oxw(2).onReloadData()}),e._UZ(1,"nui-icon",31),e.TgZ(2,"span"),e.SDv(3,32),e.qZA()()}}function pr(o,l){if(1&o&&(e.TgZ(0,"nui-menu",28),e.YNc(1,ur,4,0,"nui-menu-action",29),e.qZA()),2&o){const t=e.oxw();e.Q6J("appendToBody",!0),e.xp6(1),e.Q6J("ngIf",t.reloadable)}}function gr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-popup",33)(1,"span",34),e._UZ(2,"button",35),e.qZA(),e.TgZ(3,"div",36)(4,"nui-menu-action",37),e.NdJ("actionDone",function(){return e.CHM(t),e.oxw().removeWidget()}),e.SDv(5,38),e.qZA()()()}2&o&&e.Q6J("appendToBody",!0)}function hr(o,l){1&o&&e._UZ(0,"div",39)}const mr=["*"];let mi=(()=>{class o{constructor(t,i,n,s,u){this.eventBus=t,this.pizzagnaService=i,this.changeDetector=n,this.eventProxy=s,this.linkProvider=u,this.editMode=!0,this.editable=!0,this.removable=!0,this.collapsible=!1,this.reloadable=!0,this.hideMenu=!1,this.collapsed=!1,this.onDestroy$=new ie.x,this.linkTooltip=$localize`Explore this data`}get hostClass(){return!0}get state(){return this.collapsed&&this.collapsible?"collapsed":"expanded"}ngOnInit(){this.collapsible&&this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["isCollapsed"]},!0),this.eventProxy&&(this.eventProxy.addUpstream(T.Ef),this.eventProxy.addUpstream(T.y4),this.eventProxy.addDownstream(T.N9)),this.eventBus.getStream(T.N9).pipe((0,de.R)(this.onDestroy$)).subscribe(t=>{this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["collapsed"]},!t.payload),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["editMode"]},!!t.payload)})}ngAfterViewInit(){setTimeout(()=>{this.withCustomElement=0!==this.widgetHeaderCustomElement.nativeElement.childNodes.length})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}removeWidget(){this.eventBus.getStream(T.y4).next({})}toggleCollapsed(){this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["collapsed"]},!this.collapsed)}onEditWidget(){this.eventBus.getStream(T.Ef).next({})}onReloadData(){if(!this.reloadable)throw new Error("The widget is not reloadable, so it can't be reloaded manually.");this.eventBus.getStream(T.RG).next({})}prepareLink(t){const i=t.target;if(i&&this.linkProvider){const n=this.linkProvider.getLink(this.url);n&&i.setAttribute("href",n)}return!0}}return o.lateLoadKey="WidgetHeaderComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(le.p),e.Y36(e.sBO),e.Y36(k.q,8),e.Y36(h.B5,8))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-header"]],viewQuery:function(t,i){if(1&t&&e.Gf(or,5),2&t){let n;e.iGM(n=e.CRH())&&(i.widgetHeaderCustomElement=n.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.ekj("nui-widget-header",i.hostClass)},inputs:{componentId:"componentId",editMode:"editMode",editable:"editable",removable:"removable",collapsible:"collapsible",reloadable:"reloadable",title:"title",subtitle:"subtitle",hideMenu:"hideMenu",url:"url",collapsed:"collapsed"},ngContentSelectors:mr,decls:19,vars:20,consts:function(){let l,t,i,n;return l=$localize`:␟8028b4b4a38e861642d3d465f1fd0e08ea5bdcd0␟8529558445404824560:Edit widget`,t=$localize`:␟aefc550c9735e4112bc884389f77c619007acb8e␟9121781503543370614:Reload data`,i=$localize`:␟6d4f27e8085712e506aaaee1704b3e0455d15652␟8500807759101015900:Remove widget`,n=$localize`:␟0f0e6eea7e5a63ccfd2d07117d5560cb89936c2c␟495801405190883151:Remove Widget`,[[1,"nui-widget__header"],[1,"nui-widget__header__container"],["class","collapse-container",3,"click",4,"ngIf"],[1,"nui-widget__header__content"],["class","nui-widget__header__content-drag-icon nui-dashboard__widget--drag-handle",4,"ngIf"],[1,"nui-widget__header__content-custom-element"],["widgetHeaderCustomElement",""],[1,"nui-widget__header__content-title-container","nui-dashboard__widget--drag-handle"],["class","nui-text-widget nui-widget__header__content-title",3,"title",4,"ngIf"],[4,"ngIf"],["class","nui-text-hint nui-widget__header__content-help-hint",3,"title",4,"ngIf"],[1,"nui-widget__header__content-actions"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown",4,"ngIf"],["class","nui-widget-header__action-edit","nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",l,3,"click",4,"ngIf"],["class","nui-widget-header__action-toggle-collapsed","nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",3,"click",4,"ngIf"],["class","nui-widget__header__content-actions__menu","icon","menu","displayStyle","action",3,"appendToBody",4,"ngIf"],["class","nui-widget-header__action-remove",3,"appendToBody",4,"ngIf"],["class","collapse-spacer",4,"ngIf"],[1,"collapse-container",3,"click"],[1,"collapse-container__line"],[1,"nui-widget__header__content-drag-icon","nui-dashboard__widget--drag-handle"],["icon","drag","iconColor","gray"],[1,"nui-text-widget","nui-widget__header__content-title",3,"title"],[1,"nui-text-widget","nui-widget__header__content-title",3,"href","nuiTooltip","click","mouseenter","mousedown"],[1,"nui-text-hint","nui-widget__header__content-help-hint",3,"title"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown"],["nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",l,1,"nui-widget-header__action-edit",3,"click"],["nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",1,"nui-widget-header__action-toggle-collapsed",3,"click"],["icon","menu","displayStyle","action",1,"nui-widget__header__content-actions__menu",3,"appendToBody"],[3,"actionDone",4,"ngIf"],[3,"actionDone"],["icon","reload"],t,[1,"nui-widget-header__action-remove",3,"appendToBody"],["nuiTooltip",i],["nui-button","","nuiPopupToggle","","type","button","icon","remove","iconColor","red","displayStyle","action"],["popupAreaContent","",1,"nui-menu"],["type","destructive",3,"actionDone"],n,[1,"collapse-spacer"]]},template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,nr,2,0,"div",2),e.TgZ(3,"div",3),e.YNc(4,rr,2,0,"div",4),e.TgZ(5,"div",5,6),e.Hsn(7),e.qZA(),e.TgZ(8,"div",7),e.YNc(9,sr,2,2,"div",8),e.YNc(10,ar,3,3,"div",9),e.YNc(11,lr,2,2,"div",10),e.qZA(),e.TgZ(12,"div",11),e.YNc(13,dr,1,2,"a",12),e.YNc(14,cr,1,0,"button",13),e.YNc(15,_r,1,0,"button",14),e.YNc(16,pr,2,2,"nui-menu",15),e.YNc(17,gr,6,1,"nui-popup",16),e.qZA()()(),e.YNc(18,hr,1,0,"div",17),e.qZA()),2&t&&(e.xp6(1),e.ekj("nui-widget__header__container--collapsible",i.collapsible)("nui-widget__header__container--collapsed",i.collapsible&&i.collapsed)("nui-widget__header__container--expanded",i.collapsible&&!i.collapsed),e.Q6J("@expandedState",i.state),e.xp6(1),e.Q6J("ngIf",i.collapsed&&i.collapsible),e.xp6(2),e.Q6J("ngIf",i.editMode),e.xp6(4),e.ekj("nui-widget__header__content-title-with-additional-content",i.withCustomElement||i.editMode),e.xp6(1),e.Q6J("ngIf",!i.url||i.editMode),e.xp6(1),e.Q6J("ngIf",i.url&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.subtitle),e.xp6(2),e.Q6J("ngIf",i.url&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.editable&&i.editMode),e.xp6(1),e.Q6J("ngIf",i.collapsible&&!i.editMode),e.xp6(1),e.Q6J("ngIf",!i.hideMenu&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.removable&&i.editMode),e.xp6(1),e.Q6J("ngIf",i.collapsible))},directives:[r.O5,d.oJW,d.i9q,d.r0F,d.Mnp,d.VDk,d.RXH,d.btB],styles:[".nui-widget__header[_ngcontent-%COMP%]{display:flex;position:relative}.nui-widget__header[_ngcontent-%COMP%]   .collapse-spacer[_ngcontent-%COMP%]{margin-bottom:15px}.nui-widget__header__container[_ngcontent-%COMP%]{z-index:500;width:100%}.nui-widget__header__container--collapsible[_ngcontent-%COMP%]{width:100%}.nui-widget__header__container--collapsed[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container__line[_ngcontent-%COMP%]{width:16px;height:1px;background:var(--nui-color-line-active,#0079aa);margin:5px 0;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{align-items:flex-start;display:flex;opacity:1}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-drag-icon[_ngcontent-%COMP%]{align-items:center;cursor:move;display:flex;height:30px;justify-content:center;margin:5px;width:30px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title[_ngcontent-%COMP%]{display:block;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-container[_ngcontent-%COMP%]{flex:1;min-width:0;padding:10px 0 5px 10px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-with-additional-content[_ngcontent-%COMP%]{padding-left:0}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-help-hint[_ngcontent-%COMP%]{max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-actions[_ngcontent-%COMP%]{display:flex;padding:5px 10px 0 5px}"],data:{animation:[(0,Et.X$)("expandedState",[(0,Et.SB)("expanded",(0,Et.oB)({height:"*"})),(0,Et.SB)("collapsed",(0,Et.oB)({height:"11px"})),(0,Et.eR)("expanded <=> collapsed",[(0,Et.jt)("350ms ease-in-out")])])]}}),o})();a(43046);var Ke=a(53737);let Zi=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[U.eL,N],U.eL]}),o})();const Tr=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred ","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgrey","#d3d3d3"],["lightgreen","#90ee90"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370d8"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#d87093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]);let Vi=(()=>{class o{RGBToHexRGBToHex(t){const i=t.indexOf(",")>-1?",":" ",n=t.substr(4).split(")")[0].split(i);let s=(+n[0]).toString(16),u=(+n[1]).toString(16),f=(+n[2]).toString(16);return 1===s.length&&(s="0"+s),1===u.length&&(u="0"+u),1===f.length&&(f="0"+f),"#"+s+u+f}isHEX(t){return/^#[0-9A-F]{6}$/i.test(t)||/^#([0-9A-F]{3}){1,2}$/i.test(t)}colorKeywordsToHex(t){const i=Tr.get(t);return W()(i)?"":i}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var Cr=a(91314);function Or(o,l){if(1&o&&e._UZ(0,"div",10),2&o){const t=e.oxw().$implicit,i=e.oxw();e.ekj("black-tick",i.isBlackTick||(null==t?null:t.color)===i.defaultColor)}}function Ir(o,l){if(1&o&&(e.TgZ(0,"div",4)(1,"nui-select-v2-option",5,6)(3,"div",7)(4,"div",8),e.YNc(5,Or,1,2,"div",9),e.qZA()()()()),2&o){const t=l.$implicit,i=e.MAs(2),n=e.oxw();e.xp6(1),e.Q6J("value",null==t?null:t.color)("displayValueContext",t),e.xp6(2),e.ekj("color-picker-option--selected",null==i?null:i.selected),e.uIk("title",null==t?null:t.label),e.xp6(1),e.Q6J("ngStyle",n.setStyles(null==t?null:t.color)),e.xp6(1),e.Q6J("ngIf",null==i?null:i.selected)}}function vr(o,l){if(1&o&&(e.TgZ(0,"div",11)(1,"div",12),e._UZ(2,"div",13),e.qZA(),e.TgZ(3,"div",14),e._UZ(4,"nui-icon",15),e.qZA()()),2&o){const t=l.$implicit,i=l.open,n=e.oxw();e.xp6(1),e.uIk("title",null==t?null:t.label),e.xp6(1),e.Q6J("ngStyle",n.setStyles(null==t?null:t.color)),e.xp6(2),e.Udp("transform",i?"rotate(180deg)":"")}}let fi=(()=>{class o{constructor(t,i,n){this.changeDetection=t,this.colorService=i,this.cdkOverlay=n,this.defaultColor="var(--nui-color-bg-secondary)",this.overlayUtilities=new d.KcF,this.destroy$=new ie.x,this.setStyles=s=>({"background-color":s||this.defaultColor})}ngOnChanges(t){t.colors&&(this.colors=t.colors.currentValue),t.colorPalette&&(this.colorPalette=t.colorPalette.currentValue)}ngAfterViewInit(){var t;this.value&&(null===(t=this.select)||void 0===t||t.writeValue(this.value),this.isBlackTick=this.determineBlackTick(this.value.toString())),this.palette=this.colorPalette||this.colors.map(s=>({color:s})),this.initOverlayUtilities(),this.select.valueSelected.pipe((0,et.b)(s=>this.writeValue(s)),(0,et.b)(s=>this.onChange(s)),(0,de.R)(this.destroy$)).subscribe(s=>{s&&(this.isBlackTick=this.determineBlackTick(s.toString()))});const i=(0,d.gpG)(),n=this.cdkOverlay.position().flexibleConnectedTo(this.select.elRef.nativeElement).withPush(!1).withViewportMargin(0).withPositions([i["bottom-right"],i["bottom-left"],i["top-right"],i["top-left"]]);this.overlayConfig={maxWidth:this.cols?30*this.cols+20+"px":"260px",positionStrategy:n}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onChange(t){}_onTouched(){}writeValue(t){var i;this.value=t,null===(i=this.select)||void 0===i||i.writeValue(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this._onTouched=t}determineBlackTick(t){let i="#fff";return i=this.colorService.isHEX(t)?t:(0,g.ruO)(t)||this.colorService.RGBToHexRGBToHex(t)||this.colorService.colorKeywordsToHex(t),"#fff"===this.getContrastOnBgColor(i)}initOverlayUtilities(){const t=this.select.dropdown;this.selectResizeObserver=this.overlayUtilities.setPopupComponent(this.select.dropdown).getResizeObserver({updateSize:!1}),t.show$.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.overlayUtilities.syncWidth(),this.selectResizeObserver.observe(this.select.elRef.nativeElement)}),t.hide$.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.selectResizeObserver.unobserve(this.select.elRef.nativeElement)})}getContrastOnBgColor(t){return t?parseInt(t.replace("#",""),16)>8388607.5?"#fff":"#000":""}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Vi),e.Y36(Cr.aV))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-color-picker"]],viewQuery:function(t,i){if(1&t&&e.Gf(d.j_n,5),2&t){let n;e.iGM(n=e.CRH())&&(i.select=n.first)}},inputs:{colors:"colors",colorPalette:"colorPalette",cols:"cols"},features:[e._Bn([{provide:d.MDN,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:p.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},Vi]),e.TTD],decls:5,vars:4,consts:[[1,"color-picker-select",3,"overlayConfig","syncWidth","displayValueTemplate"],[1,"color-picker-container"],["class","d-inline-flex flex-wrap box",4,"ngFor","ngForOf"],["colorSelectTemplate",""],[1,"d-inline-flex","flex-wrap","box"],[1,"w-100","h-100","reset-box-sizes",3,"value","displayValueContext"],["option",""],[1,"color-picker-option"],[1,"color-picker-option__color-box",3,"ngStyle"],["class","color-picker-option__glyph",3,"black-tick",4,"ngIf"],[1,"color-picker-option__glyph"],[1,"color-picker-input"],[1,"color-picker-input__box"],[1,"color-picker-input__color-box",3,"ngStyle"],[1,"color-picker-input__toggle"],["icon","caret-down"]],template:function(t,i){if(1&t&&(e.TgZ(0,"nui-select-v2",0)(1,"div",1),e.YNc(2,Ir,6,7,"div",2),e.qZA()(),e.YNc(3,vr,5,4,"ng-template",null,3,e.W1O)),2&t){const n=e.MAs(4);e.Q6J("overlayConfig",i.overlayConfig)("syncWidth",!1)("displayValueTemplate",n),e.xp6(2),e.Q6J("ngForOf",i.palette)}},directives:[d.j_n,r.sg,d.rLF,r.PC,r.O5,d.oJW],styles:[".box[_ngcontent-%COMP%]{width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]{padding:5px 10px}.color-picker-select[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;min-width:unset;cursor:pointer}.color-picker-input[_ngcontent-%COMP%]{display:flex}.color-picker-input__box[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.color-picker-input__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);width:17px;height:17px;flex-grow:1;margin:0 10px}.color-picker-input__toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);width:30px;height:30px}.color-picker-option[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.color-picker-option__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);padding:1px 0 0 1px}.color-picker-option--selected[_ngcontent-%COMP%]{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.color-picker-option--selected[_ngcontent-%COMP%]:focus{outline:none}.color-picker-option__glyph[_ngcontent-%COMP%]{width:100%;height:100%;background-size:12px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMjAgMjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAgMjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS54dWktY2hlY2tib3gtZ2x5cGh7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDozO3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1saW5lY2FwOnJvdW5kO30KPC9zdHlsZT4KPHBvbHlsaW5lIGNsYXNzPSJ4dWktY2hlY2tib3gtZ2x5cGgiIHBvaW50cz0iMTcsNCA4LDE1IDMsOSAiLz4KPC9zdmc+);background-repeat:no-repeat}.color-picker-option__glyph.black-tick[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}"],changeDetection:0}),o})();var Ji=a(69155);let Bt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-drop-area"]],decls:0,vars:0,template:function(t,i){},styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;border:3px solid;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:var(--nui-color-busy-default,rgba(0, 196, 210, .2))}"]}),o})();function Rr(o,l){}const Nr=function(){return["formReady"]};function Ar(o,l){if(1&o){const t=e.EpF();e.ynx(0)(1,1,2),e.NdJ("output",function(n){const u=e.CHM(t).$implicit;return e.oxw().onEvent(u.id,n)}),e.YNc(3,Rr,0,0,"ng-template",3),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk()()}if(2&o){const t=l.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties)("outputs",e.DdM(6,Nr)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let mt=(()=>{class o extends Ie{constructor(t,i,n,s,u){super(t,i,n),this.formDirective=s,this.eventBus=u,this.elementClass=""}ngOnInit(){this.form=this.formDirective.form}ngOnChanges(t){super.ngOnChanges(t)}onEvent(t,i){"formReady"===i.id&&this.addFormGroup(t,i.payload)}addFormGroup(t,i){this.form.addControl(t,i)}getNodes(){return this.nodes}}return o.lateLoadKey="FormStackComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy),e.Y36(p.sg),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-form-stack"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{nodes:"nodes"},features:[e._Bn([],[{provide:p.gN,useExisting:p.sg}]),e.qOj,e.TTD],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,Ar,4,7,"ng-container",0),2&t&&e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn)},directives:[r.sg,x.$,U.Pl],encapsulation:2}),o})();var Ti=a(40801),yr=(a(1892),a(87686));a(29614);let Yi=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.formBuilder=i,this.logger=n,this.formReady=new e.vpe}ngOnChanges(t){var i,n;this.form||this.initForm(),this.contentFormatterProperties?Object.keys(this.contentFormatterProperties).forEach(s=>{var u,f;null===(f=null===(u=this.form)||void 0===u?void 0:u.get(s))||void 0===f||f.setValue(this.contentFormatterProperties[s])}):null===(n=null===(i=this.form)||void 0===i?void 0:i.get("currentMetric"))||void 0===n||n.patchValue(this.properMetric)}ngOnInit(){this.initForm()}initForm(){this.form=this.formBuilder.group({currentMetric:[this.properMetric,p.kI.required]}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}get currentMetric(){return this.form.get("currentMetric")}get properMetric(){var t,i,n,s;const u=null===(t=this.contentFormatterProperties)||void 0===t?void 0:t.currentMetric;return(null===(i=this.dsOutput)||void 0===i?void 0:i.result.find(F=>F.id===u))?u:null===(s=null===(n=this.dsOutput)||void 0===n?void 0:n.result[0])||void 0===s?void 0:s.id}addCustomFormControls(t){}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.sBO),e.LFG(p.qu),e.LFG(d.mQy))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function Mr(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",7),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}let Hi=(()=>{class o extends Yi{constructor(t,i,n,s){super(t,i,n),this.pizzagnaService=s}}return o.lateLoadKey="DonutContentPercentageConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy),e.Y36(le.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-donut-content-configurator"]],features:[e.qOj],decls:7,vars:3,consts:function(){let l,t;return l=$localize`:␟447ffd4cbfd3d8c3ca8dd216c0a82ecadc24a7de␟4196232656388343089:Metrics`,t=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup"],[1,"mt-4"],["caption",l,1,"mb-3",3,"control"],["formControlName","currentMetric"],[3,"value",4,"ngFor","ngForOf"],["for","required"],t,[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nui-form-field",2)(3,"nui-select-v2",3),e.YNc(4,Mr,2,2,"nui-select-v2-option",4),e.qZA(),e.TgZ(5,"nui-validation-message",5),e.SDv(6,6),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("control",i.currentMetric),e.xp6(2),e.Q6J("ngForOf",null==i.dsOutput?null:i.dsOutput.result))},directives:[p.JL,p.sg,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE],encapsulation:2}),o})();var Pr=a(10912),Ci=a.n(Pr);let Oi=(()=>{class o{constructor(t){this.changeDetector=t,this.destroy$=new ie.x}ngOnChanges(t){var i;t.data&&(this.sum=Ci()(this.data,n=>n.data[0])),t.properties&&(this.currentMetricData=(null===(i=this.data.find(n=>{var s;return n.id===(null===(s=this.properties)||void 0===s?void 0:s.currentMetric)}))||void 0===i?void 0:i.data[0])||this.data[0].data[0]),this.getProperContentValue()}ngOnInit(){this.chartAssist.chartAssistSubject.pipe((0,et.b)(t=>this.emphasizedSeriesData=this.data.find(i=>i.id===t.payload.seriesId)),(0,et.b)(()=>this.getProperContentValue()),(0,de.R)(this.destroy$)).subscribe()}getProperSeriesData(){var t;return this.emphasizedSeriesData?null===(t=this.emphasizedSeriesData)||void 0===t?void 0:t.data[0]:this.currentMetricData}getProperContentValue(){this.chartContent=(this.getProperSeriesData()/this.sum*100).toFixed(2)+"%"}}return o.lateLoadKey="DonutContentPercentageFormatterComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],inputs:{data:"data",chartAssist:"chartAssist",properties:"properties"},features:[e.TTD],decls:4,vars:1,consts:[[1,"nui-text-page"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"div",0),e._uU(3),e.qZA()(),e.BQk()),2&t&&(e.xp6(3),e.hij(" ",i.chartContent," "))},encapsulation:2}),o})();function Dr(o,l){if(1&o&&e._UZ(0,"nui-icon",5),2&o){const t=e.oxw();e.Q6J("icon",null==t.config?null:t.config.chartDonutContentIcon)}}function Fr(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(e.xi3(2,1,t.sum,"1.0-3"))}}function br(o,l){if(1&o&&e._uU(0),2&o){const t=e.oxw();e.Oqu(t.convertedValue)}}function xr(o,l){if(1&o&&(e.TgZ(0,"div",6),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.config?null:t.config.chartDonutContentLabel," ")}}let Ki=(()=>{class o{constructor(t,i){this.changeDetector=t,this.conversionThreshold=1e6,this.unitConversionPipe=new it(i)}ngOnChanges(){this.sum=Ci()(this.data,t=>t.data[0]),this.convertedValue=this.unitConversionPipe.transform(this.sum)}}return o.lateLoadKey="DonutContentRawFormatterComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(d.CrH))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],inputs:{data:"data",config:"config"},features:[e.TTD],decls:7,vars:4,consts:[["iconSize","medium",3,"icon",4,"ngIf"],[1,"nui-text-page"],[4,"ngIf","ngIfElse"],["convertedValueDisplay",""],["class","nui-text-secondary",4,"ngIf"],["iconSize","medium",3,"icon"],[1,"nui-text-secondary"]],template:function(t,i){if(1&t&&(e.ynx(0),e.YNc(1,Dr,1,1,"nui-icon",0),e.TgZ(2,"div",1),e.YNc(3,Fr,3,4,"span",2),e.YNc(4,br,1,1,"ng-template",null,3,e.W1O),e.qZA(),e.YNc(6,xr,2,1,"div",4),e.BQk()),2&t){const n=e.MAs(5);e.xp6(1),e.Q6J("ngIf",null==i.config?null:i.config.chartDonutContentIcon),e.xp6(2),e.Q6J("ngIf",i.sum<i.conversionThreshold)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",null==i.config?null:i.config.chartDonutContentLabel)}},directives:[r.O5,d.oJW],pipes:[r.JJ],encapsulation:2}),o})(),Ii=(()=>{class o{constructor(t){this.changeDetector=t}ngOnChanges(){this.sum=Ci()(this.data,t=>t.data[0])}}return o.lateLoadKey="DonutContentSumFormatterComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],inputs:{data:"data"},features:[e.TTD],decls:3,vars:1,consts:[[1,"nui-text-page"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0),e._uU(2),e.qZA(),e.BQk()),2&t&&(e.xp6(2),e.Oqu(i.sum))},encapsulation:2}),o})();var vi=a(16134),Wt=a(61621),Mt=a(14366);let Ei=(()=>{class o extends Mt.a{}return o.lateLoadKey="PercentageFormatterComponent",o.\u0275fac=function(){let l;return function(i){return(l||(l=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:1,template:function(t,i){1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t&&(e.xp6(1),e.hij(" ",null==i.data?null:i.data.value,"% "))},encapsulation:2}),o})();var Lr=a(51467),Gr=a.n(Lr),wr=a(73943),$r=a.n(wr);const Ur=[{power:1,prefix:"",label:""},{power:3,prefix:"k",label:"kilo"},{power:6,prefix:"M",label:"mega"},{power:9,prefix:"G",label:"giga"},{power:12,prefix:"T",label:"tera"},{power:15,prefix:"P",label:"peta"},{power:18,prefix:"E",label:"exa"},{power:21,prefix:"Z",label:"zetta"},{power:24,prefix:"Y",label:"yotta"}],zr=[{power:-24,prefix:"y",label:"yocto"},{power:-21,prefix:"z",label:"zepto"},{power:-18,prefix:"a",label:"atto"},{power:-15,prefix:"f",label:"femto"},{power:-12,prefix:"p",label:"pico"},{power:-9,prefix:"n",label:"nano"},{power:-6,prefix:"\xb5",label:"micro"},{power:-3,prefix:"m",label:"milli"},{power:1,prefix:"",label:""}];let kt=(()=>{class o{constructor(t){this.changeDetector=t,this.value="0"}ngOnChanges(t){if(t.data){const{value:i}=t.data.currentValue;i&&this.processSiUnitsValue($r()(i))}}processSiUnitsValue(t){const i=this.getTransformPrefix(Gr()(t));this.value=this.getTransformedValue(t,i),this.modifier=null==i?void 0:i.prefix}getTransformedValue(t,i){if(!i)return t;const n=1!==i.power?+t*Math.pow(10,-i.power):+t;return(Math.round(10*n)/10).toString()}getTransformPrefix(t){var i;const n=Math.abs(t);if(Number.isNaN(n))return;const s=(null===(i=this.data)||void 0===i?void 0:i.shiftPoint)||o.SHIFT_POINT_DEFAULT;if(n>=1){const F=Math.round(n).toString().length;return[...Ur].reverse().find(Q=>F>=Q.power+1+s)}{const u=Qi(n);return[...zr].reverse().find(F=>u<=Math.abs(F.power)+1+s)}}}return o.lateLoadKey="SiUnitsFormatterComponent",o.SHIFT_POINT_DEFAULT=0,o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{data:"data",elementClass:"elementClass"},features:[e.TTD],decls:6,vars:2,consts:[[1,"d-flex","flex-nowrap"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.BQk()),2&t&&(e.xp6(3),e.Oqu(i.value),e.xp6(2),e.hij(" ",i.modifier,""))},encapsulation:2}),o})();function Qi(o,l=1){const t=Math.abs(o);if(t>=1)return 1;const i=l+1;return t*Math.pow(10,i)>1?i:Qi(t,i)}function Br(o,l){if(1&o&&(e.TgZ(0,"div")(1,"a",6),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("href",null==t.data?null:t.data.link,e.LSH)("title",t.data.name),e.xp6(1),e.hij(" ",t.data.name," ")}}function Wr(o,l){if(1&o&&(e.TgZ(0,"span",7),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.Udp("font-size",11,"px"),e.xp6(1),e.Oqu(t.data.name)}}function kr(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"div",1)(2,"span",2),e._uU(3),e.qZA(),e._UZ(4,"nui-icon",3),e.YNc(5,Br,3,3,"div",4),e.YNc(6,Wr,2,3,"ng-template",null,5,e.W1O),e.qZA(),e.BQk()),2&o){const t=e.MAs(7),i=e.oxw();e.xp6(3),e.Oqu(i.data.data),e.xp6(1),e.Q6J("icon",i.data.icon),e.xp6(1),e.Q6J("ngIf",null==i.data?null:i.data.link)("ngIfElse",t)}}let Si=(()=>{class o{constructor(t){this.changeDetector=t,this.isValid=!1}ngOnChanges(){this.isValid=!!(this.data&&this.data.icon&&this.data.name&&this.data.data)}}return o.lateLoadKey="StatusWithIconFormatterComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],inputs:{data:"data"},features:[e.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nui-text-label","align-items-center","status-icon-formatter"],[1,"nui-text-ellipsis","text-right","pl-3"],[1,"nui-icon","nui-icon-line-height","mx-2",3,"icon"],[4,"ngIf","ngIfElse"],["noLink",""],["rel","noopener noreferrer",1,"nui-text-link-small","nui-text-ellipsis","link",3,"href","title","click"],[1,"nui-text-ellipsis"]],template:function(t,i){1&t&&e.YNc(0,kr,8,4,"ng-container",0),2&t&&e.Q6J("ngIf",i.isValid)},directives:[r.O5,d.oJW],styles:[".status-icon-formatter[_ngcontent-%COMP%]{display:grid;grid-template-columns:50px auto minmax(114px,1fr)}"]}),o})();var Xi=a(85822),Ri=a(68675);let Ni=(()=>{class o{constructor(){this.defaultHeaderPrefix=$localize`Value`}transform(t,i,n=this.defaultHeaderPrefix){return`${n} ${i+1}${t?" - ":""}${t||""}`}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"nuiWidgetConfiguratorSectionHeader",type:o,pure:!0}),o})();var Zr=a(21503),ji=a.n(Zr);let Ai=(()=>{class o{transform(t,i,n){if(!W()(t)){if(ji()(t)){if(!i)return t;const u=[...t];return u.push(i),u}return Object.assign({},t,{[void 0===n?"undefined":n]:i})}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"nuiAddData",type:o,pure:!0}),o})();function Vr(o,l){if(1&o&&e._UZ(0,"nui-drop-area",9),2&o){const t=e.oxw(2);e.Udp("height",t.height,"px")}}function Jr(o,l){1&o&&(e.ynx(0),e.TgZ(1,"div",12),e._UZ(2,"nui-icon",13),e.qZA(),e.BQk())}function Yr(o,l){if(1&o&&(e.YNc(0,Jr,3,0,"ng-container",10),e.TgZ(1,"span",11),e.ALo(2,"nuiWidgetConfiguratorSectionHeader"),e._uU(3),e.ALo(4,"nuiWidgetConfiguratorSectionHeader"),e.qZA()),2&o){const t=e.oxw(),i=t.$implicit,n=t.index,s=e.oxw();e.Q6J("ngIf",s.moveButtons),e.xp6(1),e.Q6J("title",e.Dn7(2,3,s.headerMap.get(i.id),n,s.headerPrefix)),e.xp6(2),e.hij(" ",e.Dn7(4,7,s.headerMap.get(i.id),n,s.headerPrefix)," ")}}function Hr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),s=n.$implicit,u=n.index,f=e.oxw();return f.removeItem(f.getItemForNode(s),u)}),e.qZA()()}if(2&o){const t=e.oxw().index;e.xp6(1),e.MGl("id","kpi-widget-remove-btn-",t,"")}}function Kr(o,l){}const Qr=function(){return["formReady","formDestroy"]};function Xr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("cdkDragStarted",function(n){return e.CHM(t),e.oxw().cdkDragStarted(n)}),e.YNc(1,Vr,1,2,"nui-drop-area",3),e.YNc(2,Yr,5,11,"ng-template",null,4,e.W1O),e.YNc(4,Hr,2,1,"ng-template",null,5,e.W1O),e.ynx(6,6,7),e.NdJ("output",function(n){const u=e.CHM(t).$implicit;return e.oxw().onEvent(u.id,n)}),e.ALo(8,"nuiAddData"),e.ALo(9,"nuiAddData"),e.YNc(10,Kr,0,0,"ng-template",8),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(7).attached(n)}),e.BQk(),e.qZA()}if(2&o){const t=l.$implicit,i=e.MAs(3),n=e.MAs(5),s=e.MAs(7);e.xp6(6),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",e.Dn7(8,6,e.Dn7(9,10,t.properties,i,"headerTextTemplate"),n,"headerButtonsTemplate"))("outputs",e.DdM(14,Qr)),e.xp6(4),e.Q6J("cdkPortalOutlet",s.portal)}}let Zt=(()=>{class o extends Ie{constructor(t,i,n,s){super(t,i,n),this.formBuilder=s,this.items=[],this.moveButtons=!0,this.formReady=new e.vpe,this.itemsChange=new e.vpe,this.headerMap=new Map}getItemForNode(t){return this.items.find(i=>i.id===t.id)}getNodes(){return this.nodes}ngOnInit(){this.form=this.formBuilder.array([],p.kI.required),this.formReady.emit(this.form)}onEvent(t,i){const n=this.items.find(u=>u.id===t),s=this.items.findIndex(u=>u.id===t);"formReady"===i.id&&n&&this.onFormReady(n,i.payload,s),"formDestroy"===i.id&&this.onFormDestroy(i.payload)}onFormReady(t,i,n){const s=this.formBuilder.group({id:[t.id],componentType:[t.componentType],properties:i});this.form.setControl(n,s),setTimeout(()=>{var u;const f=null===(u=i.get(`${t.id}/description`))||void 0===u?void 0:u.get("label");null==f||f.valueChanges.pipe((0,Ri.O)(f.value),(0,de.R)(this.destroyed$)).subscribe(F=>{this.headerMap.set(t.id,F||""),this.changeDetector.markForCheck()})})}onFormDestroy(t){setTimeout(()=>{let i=0;for(;i<this.form.length&&this.form.at(i).get("properties")!==t;i++);this.form.removeAt(i),this.form.patchValue(this.form.value,{emitEvent:!0})})}trackBy(t,i){return i.id}removeItem(t,i){if(!t)throw new Error("Unable to remove undefined item from pizzagna");this.itemsChange.emit(this.items.filter(n=>n!==t)),this.items.splice(i,1),this.nodes.splice(i,1),this.pizzagnaService.removeComponents(t.id)}moveItem(t,i){const n=[...this.items],s=n.splice(t,1);n.splice(i,0,...s);const u=[...this.nodes],f=u.splice(t,1);u.splice(i,0,...f),this.nodes=[...u],this.moveFormValues(t,i),this.itemsChange.emit(n),setTimeout(()=>{this.form.setValue(this.form.value,{emitEvent:!0})})}drop(t){this.moveItem(t.previousIndex,t.currentIndex)}cdkDragStarted(t){this.height=t.source.element.nativeElement.offsetHeight}moveFormValues(t,i){const n=this.form.at(t);this.form.removeAt(t),this.form.insert(i,n)}ngOnDestroy(){super.ngOnDestroy()}}return o.lateLoadKey="ItemsDynamicComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy),e.Y36(p.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-items-dynamic"]],inputs:{items:"items",moveButtons:"moveButtons",nodes:"nodes",headerPrefix:"headerPrefix"},outputs:{formReady:"formReady",itemsChange:"itemsChange"},features:[e.qOj],decls:2,vars:3,consts:[["cdkDropList","",1,"nui-items-dynamic",3,"formGroup","cdkDropListDropped"],["cdkDrag","","class","nui-items-dynamic__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"nui-items-dynamic__node-item",3,"cdkDragStarted"],["class","nui-items-dynamic__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-items-dynamic__drop-area"],[4,"ngIf"],[1,"nui-items-dynamic__header-text",3,"title"],["cdkDragHandle","",1,"nui-items-dynamic__drag-handler"],["icon","drag"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),e.YNc(1,Xr,11,15,"div",1),e.qZA()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackBy))},directives:[Ke.Wj,p.JL,p.sg,r.sg,Ke.Zt,Ke.Hk,Bt,r.O5,Ke.Bh,d.oJW,d.r0F,x.$,U.Pl],pipes:[Ni,Ai],styles:[".nui-items-dynamic__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-items-dynamic__drag-handler{cursor:move;display:flex}.nui-items-dynamic__node-item{background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-items-dynamic__node-item .widget-configurator-section{margin:0}.nui-items-dynamic__drop-area{margin:15px}.kpi-indicators-configuration__color-preview{width:16px;height:16px;margin-right:15px;border-radius:3px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),o})(),qi=(()=>{class o{}return o.lateLoadKey="PreviewPlaceholderComponent",o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-preview-placeholder"]],decls:6,vars:0,consts:function(){let l,t;return l=$localize`:␟2dddb51ea396d77c6eae240cec72bcac05cbd28b␟7484658843094717966:This is a preview of your widget`,t=$localize`:␟fd2e41589bd70eddf4486b814980d2891ec182f9␟3997823842478388980: As you make configuration changes, this area will update to match. To get started, select a widget type on the configuration panel.
`,[l,t]},template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"b"),e.SDv(2,0),e.qZA(),e._uU(3,"."),e.qZA(),e.TgZ(4,"div"),e.SDv(5,1),e.qZA())},styles:["[_nghost-%COMP%]{max-width:300px;padding:0 10px;margin:auto}"]}),o})();var jr=a(90733),qr=a.n(jr),es=a(45122),eo=a(61842),to=a(10628);function ts(o,l){}const is=function(){return["widgetSelected"]};function os(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",6),e.ynx(1,7,8),e.NdJ("output",function(n){return e.CHM(t),e.oxw().onSelect(n.payload)}),e.YNc(3,ts,0,0,"ng-template",9),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk(),e.qZA()}if(2&o){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentType",i.cloneSelectionComponentType)("outputs",e.DdM(3,is)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function ns(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"nui-pizzagna",11,12),e.NdJ("pizzagnaChange",function(n){return e.CHM(t),e.oxw().formPizzagna=n}),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("pizzagna",t.formPizzagna)}}let io=(()=>{class o{constructor(t,i,n,s,u){this.changeDetector=t,this.configurator=i,this.previewService=n,this.formBuilder=s,this.widgetTypesService=u,this.navigationControl=new Gi.X({busyState:{busy:!1},allowStepChange:!0}),this.destroy$=new ie.x,this.resetForm$=new ie.x,this.busy=!1,this.isFormDisplayed=!1,this.resetForm()}ngOnInit(){this.previewService.previewChanged.pipe((0,de.R)(this.destroy$)).subscribe(t=>{this.onPreviewPizzagnaUpdate(t)}),this.configurator.submitError.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.toggleBusy()})}ngAfterViewInit(){this.changeDetector.markForCheck()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.resetForm$.complete()}onPreviewPizzagnaUpdate(t){var i;if(!this.isFormDisplayed)return;const n=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(i=this.configurator.previewWidget)||void 0===i?void 0:i.pizzagna),{[h.xW.Configuration]:t})});this.configurator.updateWidget(n)}canFinish(){var t,i,n,s;return!!(null===(i=null===(t=this.widgetTemplate)||void 0===t?void 0:t.pizzagna)||void 0===i?void 0:i.configuration)&&!(null===(s=null===(n=this.widgetTemplate)||void 0===n?void 0:n.metadata)||void 0===s?void 0:s.needsConfiguration)}onFinish(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1});this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}onStepNavigated(t){this.isFormDisplayed=1===t.currentStepIndex,0===t.currentStepIndex&&1===t.previousStepIndex?(this.formPizzagna=void 0,this.resetForm(),this.onSelect(this.widgetTemplate)):1===t.currentStepIndex&&(this.formPizzagna=this.widgetTypesService.getWidgetType(this.widgetTemplate.type,this.widgetTemplate.version).configurator,this.previewService.preview=this.widgetTemplate.pizzagna[h.xW.Configuration])}onSelect(t){var i;this.widgetTemplate=t;const n=Object.assign(Object.assign({},t),{id:(null===(i=this.configurator.previewWidget)||void 0===i?void 0:i.id)||null});this.configurator.updateWidget(null),setTimeout(()=>{this.configurator.updateWidget(qr()(n))})}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}resetForm(){this.resetForm$.next(),this.form=this.formBuilder.group({}),this.form.statusChanges.pipe((0,de.R)(this.resetForm$),(0,de.R)(this.destroy$)).subscribe(()=>{this.changeDetector.markForCheck()})}}return o.lateLoadKey="WidgetClonerComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Ji.n),e.Y36(es.m),e.Y36(p.qu),e.Y36(J.x))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-cloner"]],hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",cloneSelectionComponentType:"cloneSelectionComponentType"},decls:8,vars:7,consts:function(){let l,t,i;return l=$localize`:␟a638e97aa8422948b3e628089bbc9e0cd89e0087␟696117927395958397:Creating Widget`,t=$localize`:␟1af9862ac515933a9a72e92970c3e92bda63f6e8␟8076137290276236439:Create Widget`,i=$localize`:␟072d4d4ec83a5a97345a1c13b90c213b47326d09␟6673660887182833564:Customize`,[["configuratorTitle",l,3,"disableCloseButton","close"],["finishText",t,3,"hideHeader","canProceed","canFinish","navigationControl","finish","cancel","stepNavigated"],["nextText",i,3,"stepTemplate"],[3,"stepTemplate"],["step1",""],["step2",""],[1,"p-4","h-100"],["nuiComponentPortal","",3,"componentType","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"formGroup"],[3,"pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-configurator-heading",0),e.NdJ("close",function(){return i.onCancel()}),e.qZA(),e.TgZ(1,"nui-dashwiz",1),e.NdJ("finish",function(){return i.onFinish()})("cancel",function(){return i.onCancel()})("stepNavigated",function(s){return i.onStepNavigated(s)}),e._UZ(2,"nui-dashwiz-step",2)(3,"nui-dashwiz-step",3),e.qZA(),e.YNc(4,os,4,4,"ng-template",null,4,e.W1O),e.YNc(6,ns,3,2,"ng-template",null,5,e.W1O)),2&t){const n=e.MAs(5),s=e.MAs(7);e.Q6J("disableCloseButton",i.busy),e.xp6(1),e.Q6J("hideHeader",!0)("canProceed",!!i.widgetTemplate)("canFinish",i.canFinish())("navigationControl",i.navigationControl),e.xp6(1),e.Q6J("stepTemplate",n),e.xp6(1),e.Q6J("stepTemplate",s)}},directives:[Xi.Q,eo.i,to.u,x.$,U.Pl,p.JL,p.sg,yr.R],encapsulation:2,changeDetection:0}),o})();var rs=a(71536);function ss(o,l){1&o&&e.GkF(0)}function as(o,l){1&o&&e.GkF(0)}function ls(o,l){if(1&o&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.Q6J("title",t.headerText),e.xp6(1),e.hij(" ",t.headerText," ")}}function ds(o,l){}const cs=function(){return["formReady"]};function _s(o,l){if(1&o){const t=e.EpF();e.ynx(0)(1,6,7),e.NdJ("output",function(n){const u=e.CHM(t).$implicit;return e.oxw().onEvent(u.id,n)}),e.YNc(3,ds,0,0,"ng-template",8),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk()()}if(2&o){const t=l.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties)("outputs",e.DdM(6,cs)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}const us=[[["","headerText",""]],[["","headerButtons",""]],"*"],ps=["[headerText]","[headerButtons]","*"];let ke=(()=>{class o extends Ie{constructor(t,i,n,s){super(t,i,n),this.formBuilder=s,this.nodes=[],this.headerText="",this.formReady=new e.vpe,this.formDestroy=new e.vpe}getNodes(){return this.nodes}ngOnInit(){this.form=this.formBuilder.group({})}onEvent(t,i){"formReady"===i.id&&this.addFormGroup(t,i.payload),Object.keys(this.form.controls).length===this.getNodes().length&&this.formReady.emit(this.form)}addFormGroup(t,i){this.form.addControl(t,i)}ngOnDestroy(){this.formDestroy.emit(this.form),super.ngOnDestroy()}}return o.lateLoadKey="WidgetConfiguratorSectionComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy),e.Y36(p.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-configurator-section"]],hostAttrs:[1,"nui-widget-configurator-section"],inputs:{headerTextTemplate:"headerTextTemplate",headerButtonsTemplate:"headerButtonsTemplate",nodes:"nodes",headerText:"headerText"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.qOj],ngContentSelectors:ps,decls:9,vars:5,consts:[[1,"widget-configurator-section"],[1,"widget-configurator-section__header","d-flex","justify-content-between","align-items-center"],[4,"ngTemplateOutlet"],["headerText","","class","widget-configurator-section__header-text",3,"title",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["headerText","",1,"widget-configurator-section__header-text",3,"title"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&(e.F$t(us),e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,ss,1,0,"ng-container",2),e.YNc(3,as,1,0,"ng-container",2),e.YNc(4,ls,2,2,"div",3),e.Hsn(5),e.Hsn(6,1),e.qZA(),e.YNc(7,_s,4,7,"ng-container",4),e.Hsn(8,2),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngTemplateOutlet",i.headerTextTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",i.headerButtonsTemplate),e.xp6(1),e.Q6J("ngIf",i.headerText),e.xp6(3),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn))},directives:[r.tP,r.O5,r.sg,x.$,U.Pl],styles:[".widget-configurator-section{margin:15px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9)}.widget-configurator-section__header{padding:15px 5px 15px 15px;height:40px;font-size:16px;font-weight:600;background-color:var(--nui-color-bg-table_header,#f0f0f0);color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6))}.widget-configurator-section__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),o})();var Ae=a(19837),gs=a(64406),hs=a(21617);const fs=[$localize`Blue`,$localize`Blue Light`,$localize`Blue Dark`,$localize`Pink`,$localize`Pink Light`,$localize`Pink Dark`,$localize`Sea Green`,$localize`Sea Green Light`,$localize`Sea Green Dark`,$localize`Violet`,$localize`Violet Light`,$localize`Violet Dark`,$localize`Lime Green`,$localize`Lime Green Light`,$localize`Lime Green Dark`,$localize`Orange`,$localize`Orange Light`,$localize`Orange Dark`,$localize`Ultramarine`,$localize`Ultramarine Light`,$localize`Ultramarine Dark`,$localize`Bordeaux`,$localize`Bordeaux Light`,$localize`Bordeaux Dark`,$localize`Ochroid`,$localize`Ochroid Light`,$localize`Ochroid Dark`,$localize`Anthracite`,$localize`Anthracite Light`,$localize`Anthracite Dark`],Ts=[$localize`Down`,$localize`Down Light`,$localize`Critical`,$localize`Critical Light`,$localize`Warning`,$localize`Warning Light`,$localize`Unknown`,$localize`Unknown Light`,$localize`Ok`,$localize`Ok Light`,$localize`Info`,$localize`Info Light`],oo=a.n(hs)()([...g.wlb,...g.Sj$],[...fs,...Ts]),yi="var(--nui-color-bg-secondary)",Mi=[...g.wlb,...g.Sj$].map(o=>({color:o,label:oo[o]}));var Me=a(16193),be=a(15838);function Cs(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",27),e._uU(1),e.qZA()),2&o){const t=l.$implicit,i=e.oxw(2);e.Q6J("value",t.key),e.xp6(1),e.hij(" ",i.getLabel(t.key)," ")}}function Os(o,l){if(1&o&&e._UZ(0,"nui-drop-area"),2&o){const t=e.oxw(2);e.Udp("height",t.height,"px")}}function Is(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",14),e.NdJ("cdkDragStarted",function(n){return e.CHM(t),e.oxw().cdkDragStarted(n)}),e.TgZ(2,"div",15),e._UZ(3,"nui-icon",16),e.qZA(),e.TgZ(4,"div",17)(5,"nui-form-field",18)(6,"nui-select-v2",19),e.YNc(7,Cs,2,2,"nui-select-v2-option",20),e.ALo(8,"keyvalue"),e.qZA()(),e.TgZ(9,"nui-form-field",21),e._UZ(10,"nui-textbox",22),e.qZA(),e.TgZ(11,"nui-form-field",23),e._UZ(12,"nui-color-picker",24),e.qZA()(),e.TgZ(13,"button",25),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().removeRule(s)}),e.qZA(),e.YNc(14,Os,1,2,"nui-drop-area",26),e.qZA(),e.BQk()}if(2&o){const t=l.$implicit,i=e.oxw();e.xp6(1),e.Q6J("formGroup",t),e.xp6(4),e.Q6J("control",t.get("comparisonType")),e.xp6(1),e.Q6J("formControl",t.get("comparisonType")),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,7,i.availableComparators)),e.xp6(2),e.Q6J("control",t.get("value")),e.xp6(2),e.Q6J("control",t.get("color")),e.xp6(1),e.Q6J("colorPalette",i.palette)}}let no=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.formBuilder=i,this.formReady=new e.vpe,this.destroy$=new ie.x,this.availableComparators=n.getComparators()}ngOnInit(){var t;this.palette=[{color:yi,label:$localize`Default color`}].concat(this.backgroundColors),this.formLocal=this.initDefaultRulesGroup(),this.form=this.formBuilder.group({rules:[[]]}),null===(t=this.formLocal.get("rules"))||void 0===t||t.value.valueChanges.pipe((0,et.b)(i=>{var n;return null===(n=this.form.get("rules"))||void 0===n?void 0:n.patchValue([...i])}),(0,de.R)(this.destroy$)).subscribe(),this.formReady.emit(this.form)}ngOnChanges(t){var i,n;t.rules&&((null===(n=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===n?void 0:n.value).setValue([]),this.rules&&ji()(this.rules)&&this.rules.forEach(s=>{var u;(null===(u=this.formLocal.get("rules"))||void 0===u?void 0:u.value).push(this.formBuilder.group({comparisonType:[s.comparisonType,[p.kI.required]],value:[s.value,[p.kI.required]],color:[s.color]}))}))}getColorRulesSubtitle(){var t,i,n,s;return 0===(null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).controls.length?$localize`No color rules`:$localize`${(null===(s=null===(n=this.formLocal)||void 0===n?void 0:n.get("rules"))||void 0===s?void 0:s.value).controls.length} color rules`}getLabel(t){var i;return(null===(i=this.availableComparators[t])||void 0===i?void 0:i.label)||"Custom Comparator"}removeRule(t){var i,n;(null===(n=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===n?void 0:n.value).removeAt(t)}addRule(){var t,i;(null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).push(this.formBuilder.group({comparisonType:[">",[p.kI.required]],value:[0,[p.kI.required]],color:[yi]}))}drop(t){this.move(t.currentIndex,t.previousIndex)}cdkDragStarted(t){this.height=t.source.element.nativeElement.offsetHeight}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initDefaultRulesGroup(){return this.formBuilder.group({rules:[this.formBuilder.array([],p.kI.required)]})}move(t,i){var n,s;const u=null===(s=null===(n=this.formLocal)||void 0===n?void 0:n.get("rules"))||void 0===s?void 0:s.value,f=t>i?1:-1;if(!u)return;const F=u.at(i);for(let $=i;$*f<t*f;$+=f){const Q=u.at($+f);u.setControl($,Q)}u.setControl(t,F)}}return o.lateLoadKey="BackgroundColorRulesConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(fe.Z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-background-color-rules-configuration"]],inputs:{rules:"rules",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:15,consts:function(){let l,t,i;return l=$localize`:␟3b53b67118a64c409177ae5a41f5978d0e5a95bd␟4898023314284497772:Background color rules`,t=$localize`:␟9c8318d49f867d23436872f260ebf9263e9d0120␟2303161252907317626: Add new rule `,i=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"kpi-color-rules-configuration__accordion-content"],[1,"mb-4"],[1,"mb-3"],["cdkDropList","",3,"cdkDropListDropped"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],t,["cdkDrag","",1,"kpi-color-rule","d-flex","pt-3",3,"formGroup","cdkDragStarted"],[1,"kpi-color-rule__control","justify-content-center","d-flex"],["icon","drag","cdkDragHandle","",1,"kpi-color-rule__drag","align-items-center"],[1,"d-flex","flex-grow-1","flex-wrap"],[1,"mr-3","mb-3","flex-grow-1",3,"control"],["placeholder",i,2,"min-width","220px",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"mr-3","mb-3",2,"max-width","100px",3,"control"],["formControlName","value"],[1,"mr-3","mb-3",3,"control"],["formControlName","color",3,"colorPalette"],["nui-button","","icon","delete","displayStyle","action","type","button",1,"kpi-color-rule__control",3,"click"],[3,"height",4,"cdkDragPlaceholder"],[3,"value"]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"p",9),e._uU(15," We can automatically change the background color when the value meets certain conditions. "),e.qZA(),e.TgZ(16,"div",10),e.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),e.YNc(17,Is,15,9,"ng-container",11),e.qZA(),e.TgZ(18,"button",12),e.NdJ("click",function(){return i.addRule()}),e.SDv(19,13),e.qZA()()()()),2&t){let n;e.Q6J("formGroup",i.formLocal)("state",e.lcZ(1,6,e.lcZ(2,8,i.formLocal))),e.xp6(4),e.Q6J("icon",e.lcZ(5,10,e.xi3(6,12,i.formLocal,"color"))),e.xp6(6),e.Q6J("title",i.getColorRulesSubtitle()),e.xp6(1),e.hij(" ",i.getColorRulesSubtitle()," "),e.xp6(6),e.Q6J("ngForOf",null==(n=i.formLocal.get("rules"))?null:n.value.controls)}},directives:[Ae.J,p.JL,p.sg,d.oJW,Ke.Wj,r.sg,Ke.Zt,Ke.Bh,d.hgI,d.j_n,p.JJ,p.oH,d.rLF,d.XHW,p.u,fi,d.r0F,Ke.Hk,Bt],pipes:[r.Ov,Me.F,be.d,r.Nd],styles:[".kpi-color-rules-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-color-rules-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-color-rules-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-color-rules-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:10px}.kpi-color-rules-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}.kpi-color-rule[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-content,#fff)}.kpi-color-rule__drag[_ngcontent-%COMP%]{cursor:move}.kpi-color-rule__control[_ngcontent-%COMP%]{min-width:30px;height:30px}"],changeDetection:0}),o})();var Ue=a(81466),Es=a(34235),Vt=a.n(Es);function Ss(o,l){1&o&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,3),e.qZA()()),2&o&&e.Q6J("allowDismiss",!1)}function Rs(o,l){if(1&o&&(e.TgZ(0,"nui-message",4)(1,"b"),e.SDv(2,5),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.Q6J("allowDismiss",!1),e.xp6(3),e.hij(" ",t.dataSourceError.message||t.dataSourceError.type," ")}}let St=(()=>{class o{constructor(t){this.changeDetector=t,this.errorState=new e.vpe,this.onDestroy$=new ie.x,this.dataSourceClear$=new ie.x}ngOnChanges(t){t.dataSource&&this.onDataSourceChanged()}onDataSourceChanged(){var t,i,n;this.dataSourceClear$.next(),null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.busy)||void 0===i||i.pipe((0,de.R)(this.dataSourceClear$)).subscribe(s=>{this.busy=s,this.changeDetector.markForCheck()}),null===(n=this.dataSource)||void 0===n||n.outputsSubject.pipe((0,de.R)(this.dataSourceClear$)).subscribe(s=>{this.data=Vt()(null==s?void 0:s.result)?s:null==s?void 0:s.result,this.dataSourceError=null==s?void 0:s.error,this.errorState.emit(!!this.dataSourceError),this.changeDetector.markForCheck()})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete(),this.dataSourceClear$.next(),this.dataSourceClear$.complete()}}return o.lateLoadKey="DataSourceErrorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-data-source-error"]],inputs:{dataSource:"dataSource"},outputs:{errorState:"errorState"},features:[e.TTD],decls:3,vars:2,consts:function(){let l,t;return l=$localize`:␟7471accb59033b8bee2f7d6907d8deefcfe7d5de␟8643306703234832815:Select a data source`,t=$localize`:␟c399afe21627dcfed1a9865c0e084fac997896c2␟4016661485141937765:Something went wrong with the data source: `,[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],l,["type","critical",1,"mt-4","d-block",3,"allowDismiss"],t]},template:function(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,Ss,3,1,"nui-message",0),e.YNc(2,Rs,4,2,"nui-message",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!i.dataSource),e.xp6(1),e.Q6J("ngIf",i.dataSourceError))},directives:[r.O5,d.qqZ],encapsulation:2,changeDetection:0}),o})();var Je=a(32148);function Ns(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("title",null==t?null:t.label)("value",t),e.xp6(1),e.hij(" ",t.label," ")}}function As(o,l){}const ys=function(){return["errorState"]},Ms=function(o){return{dataSource:o}};let ro=(()=>{class o{constructor(t,i,n,s,u,f,F){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.providerRegistryService=s,this.eventBus=u,this.injector=f,this.logger=F,this.dataSourceProviders=[],this.errorComponent=St.lateLoadKey,this.formReady=new e.vpe,this.hasDataSourceError=!1,this.dataFieldIds=new ie.x}ngOnInit(){var t;this.form=this.formBuilder.group({providerId:[this.providerId||"",[p.kI.required]],properties:[this.properties||{}],dataSource:[null,[p.kI.required]]}),this.form.setValidators([()=>this.hasDataSourceError?{dataSourceError:!0}:null]),null===(t=this.form.get("dataSource"))||void 0===t||t.valueChanges.subscribe(i=>{var n,s;null===(n=this.form.get("providerId"))||void 0===n||n.setValue(null==i?void 0:i.providerId),(null==i?void 0:i.properties)&&(null===(s=this.form.get("properties"))||void 0===s||s.setValue(null==i?void 0:i.properties))}),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,u,f,F,$,Q,X;if(t.providerId&&!t.providerId.isFirstChange()||t.properties&&!t.properties.isFirstChange()){const ue=null===(i=t.providerId)||void 0===i?void 0:i.previousValue,Te=null===(n=t.properties)||void 0===n?void 0:n.previousValue;if(ue!==this.providerId||Te!==this.properties){const pe=this.dataSourceProviders.find(xe=>{var ve,wt;return xe.providerId===this.providerId&&We()(null!==(ve=xe.properties)&&void 0!==ve?ve:{},null!==(wt=this.properties)&&void 0!==wt?wt:{})});pe?(null===(Q=null===($=this.form)||void 0===$?void 0:$.get("dataSource"))||void 0===Q||Q.setValue(pe),this.invokeDataSource(pe)):(null===(u=null===(s=this.form)||void 0===s?void 0:s.get("providerId"))||void 0===u||u.setValue(this.providerId),null===(F=null===(f=this.form)||void 0===f?void 0:f.get("properties"))||void 0===F||F.setValue(this.properties),this.invokeDataSource({properties:this.properties,providerId:this.providerId}))}}if(t.dataSourceProviders&&!t.dataSourceProviders.isFirstChange()&&1===this.dataSourceProviders.length){const ue=this.dataSourceProviders[0];null===(X=this.form.get("dataSource"))||void 0===X||X.setValue(ue),this.invokeDataSource(ue)}}ngAfterViewInit(){var t;if(this.dataSourceProviders&&1===this.dataSourceProviders.length){const i=this.dataSourceProviders[0];null===(t=this.form.get("dataSource"))||void 0===t||t.setValue(i),this.invokeDataSource(i)}}onDataSourceSelected(t){this.eventBus.next(Ue.ay,{}),this.invokeDataSource(t)}invokeDataSource(t){var i;if(!t.providerId)return;const n=this.providerRegistryService.getProvider(t.providerId);if(n){this.dataSource=this.providerRegistryService.getProviderInstance(n,this.injector),this.eventBus.next(Ue.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,oi.q)(1)).subscribe(u=>{this.eventBus.next(Ue.PF,{payload:u}),this.dataFieldIds.next(Object.keys(u.result||u))});const s=this.dataSource;(null==s?void 0:s.updateConfiguration)&&s.updateConfiguration(null!==(i=t.properties)&&void 0!==i?i:{}),setTimeout(()=>{this.dataSource.applyFilters()})}else this.logger.warn("No provider found for id:",t.providerId)}onErrorState(t){this.hasDataSourceError=t,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}return o.lateLoadKey="DataSourceConfigurationV2Component",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(E.C),e.Y36(h.nY),e.Y36(e.zs3),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",properties:"properties",providerId:"providerId",errorComponent:"errorComponent"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:28,consts:function(){let l,t;return l=$localize`:␟1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0␟1107354728956440783:Data Source`,t=$localize`:␟87aabb92d16c162e46a9ef3703445351a3e41739␟6527825109146827187:Select data source`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],[3,"control"],["placeholder",t,"formControlName","dataSource",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-select-v2",9),e.NdJ("valueSelected",function(u){return i.onDataSourceSelected(u)}),e.ALo(15,"async"),e.YNc(16,Ns,2,3,"nui-select-v2-option",10),e.qZA()(),e.ynx(17,11,12),e.NdJ("output",function(u){return i.onErrorState(u.payload)}),e.YNc(19,As,0,0,"ng-template",13),e.NdJ("attached",function(u){return e.CHM(n),e.MAs(18).attached(u)}),e.BQk(),e.qZA()()}if(2&t){const n=e.MAs(18);let s,u,f;e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"database"))),e.xp6(6),e.Q6J("title",null==(s=i.form.get("dataSource"))||null==s.value?null:s.value.label),e.xp6(1),e.hij(" ",null==(u=i.form.get("dataSource"))||null==u.value?null:u.value.label," "),e.xp6(2),e.Q6J("control",i.form.get("dataSource")),e.xp6(1),e.Q6J("title",null==(f=i.form.get("dataSource"))||null==f.value?null:f.value.label)("popupViewportMargin",e.lcZ(15,23,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.dataSourceProviders),e.xp6(1),e.Q6J("componentId",i.errorComponent)("componentType",i.errorComponent)("outputs",e.DdM(25,ys))("properties",e.VKq(26,Ms,i.dataSource)),e.xp6(2),e.Q6J("cdkPortalOutlet",n.portal)}},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,x.$,U.Pl],pipes:[r.Ov,Me.F,be.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Ps(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("title",t)("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ds(o,l){}const Fs=function(){return["errorState"]},bs=function(o){return{dataSource:o}};let Pt=(()=>{class o{constructor(t,i,n,s,u,f,F){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.providerRegistryService=s,this.eventBus=u,this.injector=f,this.logger=F,this.dataSourceProviders=[],this.errorComponent=St.lateLoadKey,this.formReady=new e.vpe,this.hasDataSourceError=!1,this.dsOutput=new ie.x,this.dataFieldIds=new ie.x}ngOnInit(){this.form=this.formBuilder.group({providerId:[this.providerId||"",[p.kI.required]],properties:this.formBuilder.group(this.properties||{})}),this.form.setValidators([()=>this.hasDataSourceError?{dataSourceError:!0}:null]),this.formReady.emit(this.form)}ngOnChanges(t){var i;t.providerId&&!t.providerId.isFirstChange()&&t.providerId.previousValue!==this.providerId&&(null===(i=this.form.get("providerId"))||void 0===i||i.setValue(this.providerId),this.invokeDataSource(this.providerId))}onDataSourceChange(t){this.eventBus.next(Ue.ay,{}),this.invokeDataSource(t)}invokeDataSource(t){if(!t)return;const i=this.providerRegistryService.getProvider(t);i?(this.dataSource=this.providerRegistryService.getProviderInstance(i,this.injector),this.eventBus.next(Ue.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,oi.q)(1)).subscribe(n=>{this.eventBus.next(Ue.PF,{payload:n}),this.dsOutput.next(n);const s=(null==n?void 0:n.result)||n;s&&this.dataFieldIds.next(Object.keys(s))}),setTimeout(()=>{this.dataSource.applyFilters()})):this.logger.warn("No provider found for id:",t)}onErrorState(t){this.hasDataSourceError=t,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}return o.lateLoadKey="DataSourceConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(E.C),e.Y36(h.nY),e.Y36(e.zs3),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",errorComponent:"errorComponent",properties:"properties",providerId:"providerId"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:28,consts:function(){let l,t,i;return l=$localize`:␟1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0␟1107354728956440783:Data Source`,t=$localize`:␟7f3bce5049b2c517378a6624460b84d2da9ce332␟7245698475792706694:Select Data Source`,i=$localize`:␟18c18c5d61f92ef5c3caa37df00fc514fef3d90c␟4806513497858020797:Data Sources`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],["caption",t,3,"control"],["placeholder",i,"formControlName","providerId",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-select-v2",9),e.NdJ("valueSelected",function(u){return i.onDataSourceChange(u)}),e.ALo(15,"async"),e.YNc(16,Ps,2,3,"nui-select-v2-option",10),e.qZA()(),e.ynx(17,11,12),e.NdJ("output",function(u){return i.onErrorState(u.payload)}),e.YNc(19,Ds,0,0,"ng-template",13),e.NdJ("attached",function(u){return e.CHM(n),e.MAs(18).attached(u)}),e.BQk(),e.qZA()()}if(2&t){const n=e.MAs(18);let s,u,f;e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"database"))),e.xp6(6),e.Q6J("title",null==(s=i.form.get("providerId"))?null:s.value),e.xp6(1),e.hij(" ",null==(u=i.form.get("providerId"))?null:u.value," "),e.xp6(2),e.Q6J("control",i.form.get("providerId")),e.xp6(1),e.Q6J("title",null==(f=i.form.get("providerId"))?null:f.value)("popupViewportMargin",e.lcZ(15,23,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.dataSourceProviders),e.xp6(1),e.Q6J("componentId",i.errorComponent)("componentType",i.errorComponent)("outputs",e.DdM(25,Fs))("properties",e.VKq(26,bs,i.dataSource)),e.xp6(2),e.Q6J("cdkPortalOutlet",n.portal)}},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,x.$,U.Pl],pipes:[r.Ov,Me.F,be.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function xs(o,l){1&o&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,3),e.qZA()()),2&o&&e.Q6J("allowDismiss",!1)}function Ls(o,l){1&o&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,4),e.qZA()()),2&o&&e.Q6J("allowDismiss",!1)}function Gs(o,l){if(1&o&&(e.TgZ(0,"nui-message",5)(1,"b"),e.SDv(2,6),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.Q6J("allowDismiss",!1),e.xp6(3),e.hij(" ",t.dataSourceError.message||t.dataSourceError.type," ")}}let so=(()=>{class o extends St{constructor(t){super(t),this.changeDetector=t}ngOnDestroy(){super.ngOnDestroy()}}return o.lateLoadKey="TableDataSourceErrorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-data-source-error"]],features:[e.qOj],decls:4,vars:3,consts:function(){let l,t,i;return l=$localize`:␟f4720e7c5bf93bfef522f919823f31793a4a09fb␟3836782658203534481:Data source needs to be configured`,t=$localize`:␟7471accb59033b8bee2f7d6907d8deefcfe7d5de␟8643306703234832815:Select a data source`,i=$localize`:␟c399afe21627dcfed1a9865c0e084fac997896c2␟4016661485141937765:Something went wrong with the data source: `,[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],l,t,["type","critical",1,"mt-4","d-block",3,"allowDismiss"],i]},template:function(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,xs,3,1,"nui-message",0),e.YNc(2,Ls,3,1,"nui-message",0),e.YNc(3,Gs,4,2,"nui-message",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.dataSource&&!(null!=i.data&&i.data.dataFields.length)&&!i.dataSourceError&&!i.busy),e.xp6(1),e.Q6J("ngIf",!i.dataSource),e.xp6(1),e.Q6J("ngIf",i.dataSourceError))},directives:[r.O5,d.qqZ],encapsulation:2,changeDetection:0}),o})();function ws(o,l){}let Pi=(()=>{class o{constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.mode=y.URL,this.formReady=new e.vpe,this.destroy$=new ie.x,this.form=this.formBuilder.group({mode:[this.mode],urlCustomContent:[""],htmlCustomContent:[""],customEmbeddedContent:[""]}),this.modes=[{value:y.URL,displayValue:$localize`Show the contents of a specific URL`},{value:y.HTML,displayValue:$localize`Show the exact HTML I supply below`}]}get urlCustomContent(){return this.form.get("urlCustomContent")}get htmlCustomContent(){return this.form.get("htmlCustomContent")}get modeValue(){return this.form.get("mode")}get customEmbeddedContentValue(){return this.form.get("customEmbeddedContent")}ngOnInit(){this.initializeForm(),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s;t.customEmbeddedContent&&(this.mode===y.URL?null===(i=this.urlCustomContent)||void 0===i||i.setValue(this.customEmbeddedContent):this.mode===y.HTML&&(null===(n=this.htmlCustomContent)||void 0===n||n.setValue(this.customEmbeddedContent))),t.mode&&(null===(s=this.modeValue)||void 0===s||s.setValue(t.mode.currentValue))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){var t,i,n;null===(t=this.modeValue)||void 0===t||t.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(s=>{var u,f,F,$,Q,X,ue,Te;s===y.URL?(null===(u=this.customEmbeddedContentValue)||void 0===u||u.setValue(null===(f=this.form.get("urlCustomContent"))||void 0===f?void 0:f.value),null===(F=this.htmlCustomContent)||void 0===F||F.disable(),null===($=this.urlCustomContent)||void 0===$||$.enable()):s===y.HTML&&(null===(Q=this.customEmbeddedContentValue)||void 0===Q||Q.setValue(null===(X=this.form.get("htmlCustomContent"))||void 0===X?void 0:X.value),null===(ue=this.urlCustomContent)||void 0===ue||ue.disable(),null===(Te=this.htmlCustomContent)||void 0===Te||Te.enable())}),null===(i=this.urlCustomContent)||void 0===i||i.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(s=>{var u;null===(u=this.customEmbeddedContentValue)||void 0===u||u.setValue(s)}),null===(n=this.htmlCustomContent)||void 0===n||n.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(s=>{var u;null===(u=this.customEmbeddedContentValue)||void 0===u||u.setValue(s)})}}return o.lateLoadKey="EmbeddedContentConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-embedded-content-configuration"]],inputs:{mode:"mode",messageComponent:"messageComponent",customEmbeddedContent:"customEmbeddedContent"},outputs:{formReady:"formReady"},features:[e.TTD],decls:26,vars:23,consts:function(){let l,t;return l=$localize`:␟d18bb86a09ed7c63d7d00a1dad418e5328f59406␟5492801901920760741:Embedded Content`,t=$localize`:␟6a175ac244e51f9c713f8829e3ba9192f6728ba2␟9012225804233265629:What do you want to show in the widget?`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],l,[1,"nui-text-secondary"],[1,"embedded-configurator-section__accordion-content"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["caption",t,3,"control"],["formControlName","mode","name","mode","required","",3,"value","valueChange"],[3,"value"],[3,"control"],["formControlName","urlCustomContent"],["formControlName","htmlCustomContent","rows","7",1,"textarea-scrollable"]]},template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11," Show the specific HTML I supply "),e.qZA()()(),e.TgZ(12,"div",7),e.ynx(13,8,9),e.YNc(15,ws,0,0,"ng-template",10),e.NdJ("attached",function(u){return e.CHM(n),e.MAs(14).attached(u)}),e.BQk(),e.TgZ(16,"nui-form-field",11)(17,"nui-radio-group",12),e.NdJ("valueChange",function(u){return i.mode=u}),e.TgZ(18,"nui-radio",13),e._uU(19),e.qZA(),e.TgZ(20,"nui-form-field",14),e._UZ(21,"nui-textbox",15),e.qZA(),e.TgZ(22,"nui-radio",13),e._uU(23),e.qZA(),e.TgZ(24,"nui-form-field",14),e._UZ(25,"nui-textbox",16),e.qZA()()()()()}if(2&t){const n=e.MAs(14);e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"tag"))),e.xp6(9),e.Q6J("componentType",i.messageComponent.componentType)("properties",i.messageComponent.properties),e.xp6(2),e.Q6J("cdkPortalOutlet",n.portal),e.xp6(1),e.Q6J("control",i.form.get("mode")),e.xp6(1),e.Q6J("value",i.mode),e.xp6(1),e.Q6J("value",i.modes[0].value),e.xp6(1),e.hij(" ",i.modes[0].displayValue," "),e.xp6(1),e.Q6J("control",i.form.get("urlCustomContent")),e.xp6(2),e.Q6J("value",i.modes[1].value),e.xp6(1),e.hij(" ",i.modes[1].displayValue," "),e.xp6(1),e.Q6J("control",i.form.get("htmlCustomContent"))}},directives:[Ae.J,p.JL,p.sg,d.oJW,x.$,U.Pl,d.hgI,d.wTj,p.JJ,p.u,p.Q7,d.UKb,d.XHW],pipes:[r.Ov,Me.F,be.d],styles:[".embedded-configurator-section__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function $s(o,l){if(1&o&&(e.tHW(0,1,1),e._UZ(1,"a",3),e.N_p()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("href",t.link.href,e.LSH)("target",t.link.target),e.pQV(t.link.text),e.QtT(0)}}let ao=(()=>{class o{constructor(t){this.changeDetector=t}}return o.lateLoadKey="InfoMessageConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-info-message-configuration"]],inputs:{emphasizeText:"emphasizeText",generalText:"generalText",link:"link",allowDismiss:"allowDismiss"},decls:4,vars:4,consts:function(){let l;return l=$localize`:␟a533c3d45bdc55cc7b8fce70d448ffafc70b0f5b␟4231249583296268212:${"\ufffd#2\ufffd"}:START_BOLD_TEXT: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_LINK:${"\ufffd0:1\ufffd"}:INTERPOLATION_2:${"\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd"}:CLOSE_LINK:`,[["type","info",3,"allowDismiss"],l,[3,"href","target",4,"ngIf"],[3,"href","target"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-message",0),e.tHW(1,1),e._UZ(2,"b"),e.YNc(3,$s,2,3,"a",2),e.N_p(),e.qZA()),2&t&&(e.Q6J("allowDismiss",i.allowDismiss),e.xp6(3),e.Q6J("ngIf",i.link),e.pQV(i.emphasizeText)(i.generalText),e.QtT(1))},directives:[d.qqZ,r.O5],encapsulation:2,changeDetection:0}),o})();var lo=a(39841);function Us(o,l){if(1&o&&(e.TgZ(0,"div",14)(1,"nui-form-field",15),e._UZ(2,"nui-textbox",16),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("control",t.form.get("units"))}}let co=(()=>{class o{constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.defaultColor={label:$localize`Default color`,color:yi},this.label="",this.backgroundColor=this.defaultColor.color,this.units="",this.formReady=new e.vpe}ngOnInit(){this.backgroundColors=[...this.backgroundColors],this.backgroundColors.unshift(this.defaultColor),this.form=this.formBuilder.group({label:[this.label,[p.kI.required]],backgroundColor:[this.backgroundColor,[p.kI.required]]}),this.configurableUnits&&this.form.addControl("units",this.formBuilder.control(this.units));const t=this.form.get("label"),i=null==t?void 0:t.valueChanges.pipe((0,Ri.O)(t.value)),n=this.form.get("backgroundColor"),s=null==n?void 0:n.valueChanges.pipe((0,Ri.O)(null==n?void 0:n.value));this.subtitle$=(0,lo.a)([null==i?void 0:i.pipe((0,ht.U)(u=>u||$localize`no label`)),null==s?void 0:s.pipe((0,ht.U)(u=>oo[u]||$localize`Default Color`))]).pipe((0,ht.U)(u=>u.join(", "))),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s;t.label&&(null===(i=this.form)||void 0===i||i.patchValue({label:t.label.currentValue})),t.backgroundColor&&(null===(n=this.form)||void 0===n||n.patchValue({backgroundColor:t.backgroundColor.currentValue})),t.units&&(null===(s=this.form)||void 0===s||s.patchValue({units:t.units.currentValue}))}}return o.lateLoadKey="KpiDescriptionConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-kpi-description-configuration"]],inputs:{componentId:"componentId",configurableUnits:"configurableUnits",label:"label",backgroundColor:"backgroundColor",units:"units",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[e.TTD],decls:21,vars:22,consts:function(){let l,t,i,n,s,u;return l=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`,n=$localize`:␟e088252c0e2ede83d27a24702b1f77c90cee60b7␟3468485835384597147:Background Color`,s=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,u=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"kpi-description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"form-group",3,"control"],["formControlName","label","placeholder",i],["caption",n,1,"form-group",3,"control"],["formControlName","backgroundColor",1,"kpi-description-configuration__accordion-content__color-picker",3,"colorPalette"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",s,1,"form-group",3,"control"],["formControlName","units","placeholder",u]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e.ALo(11,"async"),e._uU(12),e.ALo(13,"async"),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",8)(16,"nui-form-field",9),e._UZ(17,"nui-textbox",10),e.qZA()(),e.TgZ(18,"nui-form-field",11),e._UZ(19,"nui-color-picker",12),e.qZA(),e.YNc(20,Us,3,1,"div",13),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,9,e.lcZ(2,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,13,e.xi3(6,15,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",e.lcZ(11,18,i.subtitle$)),e.xp6(2),e.hij(" ",e.lcZ(13,20,i.subtitle$)," "),e.xp6(4),e.Q6J("control",i.form.get("label")),e.xp6(2),e.Q6J("control",i.form.get("backgroundColor")),e.xp6(1),e.Q6J("colorPalette",i.backgroundColors),e.xp6(1),e.Q6J("ngIf",i.configurableUnits))},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.XHW,p.JJ,p.u,fi,r.O5],pipes:[r.Ov,Me.F,be.d],styles:[".kpi-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-description-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-description-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-description-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:10px}.kpi-description-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}"],changeDetection:0}),o})();var zs=a(25032),Se=(()=>{return(o=Se||(Se={})).Second="second",o.Minute="minute",o.Hour="hour",Se;var o})();const _o={[Se.Second]:1e3,[Se.Minute]:6e4,[Se.Hour]:36e5},Bs={[Se.Hour]:$localize`:hours unit (long):hours`,[Se.Minute]:$localize`:minutes unit (long):minutes`,[Se.Second]:$localize`:seconds unit (long):seconds`},Jt={[Se.Hour]:$localize`:hours unit (short):h`,[Se.Minute]:$localize`:minutes unit (short):min`,[Se.Second]:$localize`:seconds unit (short):sec`};function Dt(o,l){return _o[o]/_o[l]}function Ws(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",7),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.label," ")}}let Di=(()=>{class o{constructor(t,i){this.fb=t,this.cd=i,this.possibleUnits=[Se.Second,Se.Minute,Se.Hour],this.unitItems=[],this.displayedUnitItems=[],this.currentUnit=null,this.valueChangeFix=zs.Z,this.destroy$=new ie.x}ngOnInit(){this.generateUnitItems(),this.filterUnitItems(),this.createForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getNumberMin(){if(!this.unitControl.value||null==this.minSeconds)return;const t=Dt(Se.Second,this.unitControl.value.id);return Math.ceil(this.minSeconds*t)}getNumberMax(){if(!this.unitControl.value||null==this.maxSeconds)return;const t=Dt(Se.Second,this.unitControl.value.id);return Math.floor(this.maxSeconds*t)}writeValue(t){if(isFinite(t)&&this.isRangeValid()&&this.unitControl.value){const i=Dt(Se.Second,this.unitControl.value.id);this.numberControl.setValue(t*i)}else this.numberControl.setValue(null);this.cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){}setDisabledState(t){t?(this.numberControl.disable({emitEvent:!1}),this.unitControl.disable({emitEvent:!1})):(this.numberControl.enable({emitEvent:!1}),this.unitControl.enable({emitEvent:!1})),this.cd.markForCheck()}resetUnits(){this.unitControl.setValue(this.displayedUnitItems[0])}generateUnitItems(){this.possibleUnits.forEach((t,i)=>{this.unitItems[i]={id:t,label:Bs[t]}})}filterUnitItems(){this.displayedUnitItems=this.unitItems.filter(t=>{let i=!1;if(null!=this.maxSeconds){const n=Dt(Se.Second,t.id);i=Math.floor(this.maxSeconds*n)<=0}return!i})}createForm(){this.form=this.fb.group({number:[1,[p.kI.required]],unit:this.displayedUnitItems[0]}),this.numberControl=this.form.get("number"),this.unitControl=this.form.get("unit"),this.unitControl.value&&(this.currentUnit=this.unitControl.value.id),this.form.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.updateError(),this.emitValueChange()})}updateError(){this.isNumberValid()?this.numberControl.setErrors(null):this.numberControl.setErrors({invalidNumber:!0})}emitValueChange(){const t=this.numberControl.value,i=this.unitControl.value;if(null==t||null==i)return void(this.onChange&&this.onChange(null));const n=Dt(i.id,Se.Second);this.onChange&&this.onChange(t*n)}isRangeValid(){return this.minSeconds<=this.maxSeconds||null==this.maxSeconds}isNumberValid(){const t=this.numberControl.value;return!(t<this.minSeconds||t%1!=0)&&(!(t*Dt(this.unitControl.value.id,Se.Second)>this.maxSeconds)&&this.isRangeValid())}getNumberValidationMessage(){const t={min:this.getNumberMin(),max:this.getNumberMax(),whole:!0};return this.getLocalizedNumberValidationMessage(t)}getLocalizedNumberValidationMessage(t){const{min:i,max:n,whole:s}=t,u=s?$localize`a whole number`:$localize`a number`;return null!=i&&null!=n?i===n?$localize`Must be ${u} equal to ${i}`:$localize`Must be ${u} between ${i} and ${n}`:null==i&&null!=n?$localize`Must be ${u} not larger than ${n}`:null!=i&&null==n?$localize`Must be ${u} not smaller than ${i}`:$localize`Must be ${u}`}validate(){var t;return(null===(t=this.form.get("number"))||void 0===t?void 0:t.errors)||null}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-refresh-rate-configurator"]],inputs:{minSeconds:"minSeconds",maxSeconds:"maxSeconds"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}])],decls:8,vars:6,consts:[[1,"d-flex","flex-column",3,"formGroup"],[1,"d-flex","flex-row"],["formControlName","number","customBoxWidth","90px",3,"minValue","maxValue","valueChange"],["formControlName","unit",1,"ml-3"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["for","invalidNumber"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"nui-textbox-number",2),e.NdJ("valueChange",function(){return i.valueChangeFix()}),e.qZA(),e.TgZ(3,"nui-select-v2",3),e.YNc(4,Ws,2,2,"nui-select-v2-option",4),e.qZA()(),e.TgZ(5,"nui-form-field",5)(6,"nui-validation-message",6),e._uU(7),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("minValue",i.minSeconds)("maxValue",i.maxSeconds),e.xp6(2),e.Q6J("ngForOf",i.displayedUnitItems),e.xp6(1),e.Q6J("control",i.form.get("number")),e.xp6(2),e.hij(" ",i.getNumberValidationMessage()," "))},directives:[p._Y,p.JL,p.sg,d.I5I,p.JJ,p.u,d.j_n,r.sg,d.rLF,d.hgI,d.CfE],encapsulation:2,changeDetection:0}),o})();function ks(o,l){if(1&o&&(e.TgZ(0,"div",15),e.SDv(1,16),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.pQV(t.getDurationLabel(t.refresherSettings.refreshRateSeconds)),e.QtT(1)}}let uo=(()=>{class o{constructor(t,i,n,s,u){this.changeDetector=t,this.formBuilder=i,this.logger=n,this.refresherSettings=s,this.cd=u,this.minSeconds=1,this.maxSeconds=86400,this.overrideDefaultSettingsCaption=$localize`Custom refresh rate`,this.overrideDefaultSettings=!0,this.formReady=new e.vpe,this.destroyed$=new ie.x,this.resetInterval=()=>{var f;this.refreshRateComp.resetUnits(),null===(f=this.form.get("interval"))||void 0===f||f.setValue(this.interval||this.minSeconds)}}ngOnInit(){var t;this.form=this.formBuilder.group({enabled:[!0,[p.kI.required]],overrideDefaultSettings:[this.overrideDefaultSettings,[p.kI.required]],interval:[null!==(t=this.interval)&&void 0!==t?t:0,[p.kI.required]]}),this.form.statusChanges.pipe((0,de.R)(this.destroyed$)).subscribe(()=>{this.form.markAllAsTouched(),this.cd.detectChanges()}),(0,lo.a)([this.form.controls.enabled.valueChanges,this.form.controls.overrideDefaultSettings.valueChanges]).pipe((0,Ut.h)(i=>i.some(n=>!n)),(0,et.b)(this.resetInterval),(0,de.R)(this.destroyed$)).subscribe(),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,u,f,F;t.enabled&&(null===(n=null===(i=this.form)||void 0===i?void 0:i.get("enabled"))||void 0===n||n.patchValue(this.enabled)),t.interval&&(null===(u=null===(s=this.form)||void 0===s?void 0:s.get("interval"))||void 0===u||u.patchValue(this.interval)),t.overrideDefaultSettings&&(null===(F=null===(f=this.form)||void 0===f?void 0:f.get("overrideDefaultSettings"))||void 0===F||F.patchValue(this.overrideDefaultSettings))}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getHeaderSubtitle(){var t,i,n;let s="";return(null===(t=this.form.get("enabled"))||void 0===t?void 0:t.value)?(s+=$localize`Enabled`,s+=", ",(null===(i=this.form.get("overrideDefaultSettings"))||void 0===i?void 0:i.value)?s+=this.getDurationLabel(null===(n=this.form.get("interval"))||void 0===n?void 0:n.value):s+=$localize`Use default value`+" ("+this.getDurationLabel(this.refresherSettings.refreshRateSeconds)+")"):s+=$localize`Disabled`,s}getDurationLabel(t){let i=t,n="";const s=Math.floor(i/3600);i%=3600;const u=Math.floor(i/60),f=i%60;return s>0&&(n+=s+" "+Jt[Se.Hour]+" "),u>0&&(n+=u+" "+Jt[Se.Minute]+" "),f>0&&(n+=f+" "+Jt[Se.Second]+" "),n=n.trim(),""===n?"0 "+Jt[Se.Second]:n}}return o.lateLoadKey="RefresherConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy),e.Y36(ii.g),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-refresher-configuration"]],viewQuery:function(t,i){if(1&t&&e.Gf(Di,5),2&t){let n;e.iGM(n=e.CRH())&&(i.refreshRateComp=n.first)}},inputs:{enabled:"enabled",interval:"interval",minSeconds:"minSeconds",maxSeconds:"maxSeconds",overrideDefaultSettingsCaption:"overrideDefaultSettingsCaption",overrideDefaultSettings:"overrideDefaultSettings"},outputs:{formReady:"formReady"},features:[e.TTD],decls:26,vars:25,consts:function(){let l,t,i;return l=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`,t=$localize`:␟913ac9d5354818a43028659e12bb79cc3a8d19e3␟2148212086281974142:Refresh widget periodically`,i=$localize`:␟094103d9c7a2be810d7fc6a1935e14695f19925f␟4443005292001830097: By default, the widget will refresh every ${"\ufffd0\ufffd"}:INTERPOLATION:. `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"d-flex","flex-column","nui-refresher-configuration__accordion-content"],[3,"control"],["formControlName","enabled"],t,[1,"mt-4"],["formControlName","overrideDefaultSettings"],["class","nui-help-hint",4,"ngIf"],["formControlName","interval",3,"minSeconds","maxSeconds"],[1,"nui-help-hint"],i]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div")(14,"nui-form-field",8)(15,"nui-switch",9),e.SDv(16,10),e.qZA()()(),e.TgZ(17,"div")(18,"div",11)(19,"nui-form-field",8)(20,"nui-switch",12),e._uU(21),e.YNc(22,ks,2,1,"div",13),e.qZA()()(),e.TgZ(23,"div",11)(24,"nui-form-field",8),e._UZ(25,"nui-refresh-rate-configurator",14),e.qZA()()()()()),2&t){let n,s,u;e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"reset"))),e.xp6(6),e.Q6J("title",i.getHeaderSubtitle()),e.xp6(1),e.hij(" ",i.getHeaderSubtitle()," "),e.xp6(3),e.Q6J("control",i.form.get("enabled")),e.xp6(3),e.ekj("hidden",!(null!=(n=i.form.get("enabled"))&&n.value)),e.xp6(2),e.Q6J("control",i.form.get("overrideDefaultSettings")),e.xp6(2),e.hij("",i.overrideDefaultSettingsCaption," "),e.xp6(1),e.Q6J("ngIf",!(null!=(s=i.form.get("overrideDefaultSettings"))&&s.value)),e.xp6(1),e.ekj("hidden",!(null!=(u=i.form.get("overrideDefaultSettings"))&&u.value)),e.xp6(1),e.Q6J("control",i.form.get("interval")),e.xp6(1),e.Q6J("minSeconds",i.minSeconds)("maxSeconds",i.maxSeconds)}},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.qUD,p.JJ,p.u,r.O5,Di],pipes:[r.Ov,Me.F,be.d],styles:[".nui-refresher-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),o})();var Zs=a(45588),Vs=a.n(Zs);const Js=o=>{const l=o.get("criticalThresholdValue"),t=o.get("warningThresholdValue"),i=o.get("reversedThresholds"),n=o.get("showThresholds");if(!l)throw new Error("criticalThresholdValue formControl is not defined");if((0,d.fS1)(l,"min","max"),!t)throw new Error("warningThresholdValue formControl is not defined");if((0,d.fS1)(t,"min","max"),null==n?void 0:n.value){if(W()(t.value))return null;if(null==i?void 0:i.value){if(l.value>=t.value)return t.setErrors({min:!0}),l.setErrors({max:!0}),{thresholds:!0}}else if(l.value<=t.value)return t.setErrors({max:!0}),l.setErrors({min:!0}),{thresholds:!0}}return null};function Ys(o,l){if(1&o&&(e.TgZ(0,"nui-radio",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.displayValue," ")}}function Hs(o,l){if(1&o&&(e.TgZ(0,"div",15)(1,"div",16)(2,"nui-form-field",17),e._UZ(3,"nui-textbox-number",18),e.TgZ(4,"nui-validation-message",11),e.SDv(5,19),e.qZA(),e.TgZ(6,"nui-validation-message",20),e.SDv(7,21),e.qZA(),e.TgZ(8,"nui-validation-message",22),e.SDv(9,23),e.qZA()()(),e.TgZ(10,"div",16)(11,"nui-form-field",24),e._UZ(12,"nui-textbox-number",25),e.TgZ(13,"nui-validation-message",11),e.SDv(14,26),e.qZA(),e.TgZ(15,"nui-validation-message",20),e.SDv(16,27),e.qZA(),e.TgZ(17,"nui-validation-message",22),e.SDv(18,28),e.qZA()()(),e.TgZ(19,"nui-form-field",29),e._UZ(20,"nui-checkbox",30),e.TgZ(21,"nui-validation-message",11),e.SDv(22,31),e.qZA()()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("control",t.form.get("warningThresholdValue")),e.xp6(9),e.Q6J("control",t.form.get("criticalThresholdValue")),e.xp6(8),e.Q6J("control",t.form.get("reversedThresholds"))("showOptionalText",!1)}}let po=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.formBuilder=i,this.logger=n,this.cd=s,this.formReady=new e.vpe,this.thresholdOptions=[{value:!1,displayValue:$localize`Never show critical or warning states for this KPI`},{value:!0,displayValue:$localize`Set custom thresholds for this widget`}],this.destroy$=new ie.x}ngOnInit(){this.validateRadioButtonsGroupValue(),this.form=this.formBuilder.group({criticalThresholdValue:[this.criticalThresholdValue||0,[p.kI.required]],warningThresholdValue:[this.warningThresholdValue||0],showThresholds:[this.showThresholds||!1,[p.kI.required]],reversedThresholds:[this.reversedThresholds||!1]},{validators:Js}),this.handleWarningThreshold(this.warningThresholdValue),this.form.statusChanges.pipe((0,de.R)(this.destroy$)).subscribe(t=>{this.form.markAllAsTouched(),this.cd.detectChanges()}),this.formReady.emit(this.form)}ngOnChanges(t){var i;const n=["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"];if(t){for(const s of Object.keys(t))if(Vs()(n,s)){const u=t[s].currentValue;u&&(null===(i=this.form)||void 0===i||i.patchValue({[s]:u}))}t.showThresholds&&setTimeout(()=>this.validateRadioButtonsGroupValue())}t.warningThresholdValue&&this.handleWarningThreshold(t.warningThresholdValue.currentValue)}getThresholdsSubtitle(t){return t?$localize`Custom thresholds`:$localize`No thresholds`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}validateRadioButtonsGroupValue(){this.radioButtonGroupValue=this.showThresholds}handleWarningThreshold(t){var i;const n=null===(i=this.form)||void 0===i?void 0:i.get("warningThresholdValue");W()(t)&&(null==n||n.setValue(null))}}return o.lateLoadKey="ThresholdsConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-thresholds-configuration"]],inputs:{criticalThresholdValue:"criticalThresholdValue",warningThresholdValue:"warningThresholdValue",showThresholds:"showThresholds",reversedThresholds:"reversedThresholds"},outputs:{formReady:"formReady"},features:[e.TTD],decls:19,vars:18,consts:function(){let l,t,i,n,s,u,f,F,$,Q,X,ue,Te,pe,xe;return l=$localize`:␟784fdd6b2dc26499eca6e15094b55f0b1c1e1b7a␟8815471757829352344:Thresholds`,t=$localize`:␟6875687abe0982b513f60d230d71b9cc2d9eef3e␟9007062817247777645:How do you want to set warning/critical thresholds?`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,n=$localize`:␟5dda34ec4b693f2b13afdf28a4e5f00062f4c896␟4003830139037367407:Warning value`,s=$localize`:␟cae671d9eb277eadfd7752518814d3f852369cc9␟6643132921042050963:Never show the warning state`,u=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,f=$localize`:␟19d6eb371557c8ab18db5332a2e1955f18c2f16d␟3184669981998118637: Warning threshold should be greater than critical threshold `,F=$localize`:␟6c62f1e33dd914743cb977df6baba31779d7aed6␟1030183925045576042: Warning threshold should be lower than critical threshold `,$=$localize`:␟f8baa78544aa27624d43d59e5a225216aff1042f␟6033897450960508846:Critical value`,Q=$localize`:␟9b66a7e6fdeb05f4c1ffdc78ea8f4a7a2fb64d79␟7643729389671069649:Set critical value`,X=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,ue=$localize`:␟540b9b0f637cc0605bc00ccc586a3eab73aabcfc␟4465977748799047247: Critical threshold should be greater than warning threshold `,Te=$localize`:␟2efae84e117a2639681a8e5c0e4ce4eee42af17d␟9156849514888688496: Critical threshold should be lower than warning threshold `,pe=$localize`:␟18bcbeb2b14e6064ec6fe9276db140a4e800da3c␟5716867848923884165:Warning and critical when below threshold values`,xe=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"kpi-thresholds-configuration__accordion-content"],["caption",t,3,"control"],["formControlName","showThresholds","name","showThresholds","required","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],i,["class","mt-4",4,"ngIf"],[3,"value"],[1,"mt-4"],[1,"mb-4"],["caption",n,3,"control"],["formControlName","warningThresholdValue","placeholder",s],u,["for","min"],f,["for","max"],F,["caption",$,3,"control"],["formControlName","criticalThresholdValue","placeholder",Q],X,ue,Te,["caption",pe,3,"control","showOptionalText"],["formControlName","reversedThresholds","required",""],xe]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-radio-group",9),e.YNc(15,Ys,2,2,"nui-radio",10),e.qZA(),e.TgZ(16,"nui-validation-message",11),e.SDv(17,12),e.qZA()(),e.YNc(18,Hs,23,4,"div",13),e.qZA()()),2&t){let n,s,u;e.Q6J("formGroup",i.form)("state",e.lcZ(1,9,e.lcZ(2,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,13,e.xi3(6,15,i.form,"thresholds"))),e.xp6(6),e.Q6J("title",i.getThresholdsSubtitle(null==(n=i.form.get("showThresholds"))?null:n.value)),e.xp6(1),e.hij(" ",i.getThresholdsSubtitle(null==(s=i.form.get("showThresholds"))?null:s.value)," "),e.xp6(2),e.Q6J("control",i.form.get("showThresholds")),e.xp6(1),e.Q6J("value",i.radioButtonGroupValue),e.xp6(1),e.Q6J("ngForOf",i.thresholdOptions),e.xp6(3),e.Q6J("ngIf",null==(u=i.form.get("showThresholds"))?null:u.value)}},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.wTj,p.JJ,p.u,p.Q7,r.sg,d.UKb,d.CfE,r.O5,d.I5I,d.bK4],pipes:[r.Ov,Me.F,be.d],styles:[".kpi-thresholds-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Ks(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Qs(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Xs(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}let go=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.eventBus=s,this.legendPlacements=[],this.timeSpans=[],this.availableChartTypes=[{label:$localize`Line`,value:$e.Line},{label:$localize`Stacked area`,value:$e.StackedArea},{label:$localize`Stacked % area`,value:$e.StackedPercentageArea},{label:$localize`Bar`,value:$e.StackedBar},{label:$localize`Status`,value:$e.StatusBar}],this.formReady=new e.vpe,this.destroy$=new ie.x,this.form=this.formBuilder.group({leftAxisLabel:[""],startingTimespan:[null,p.kI.required],legendPlacement:[Fe.w.None,[p.kI.required]],preset:[$e.Line,[p.kI.required]]})}ngOnInit(){var t;null===(t=this.form.get("startingTimespan"))||void 0===t||t.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(i=>{setTimeout(()=>{this.eventBus.next(T.xZ,{payload:{id:T.RG}})})}),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,u;const f=this.form.get("startingTimespan");t.leftAxisLabel&&(null===(i=this.form.get("leftAxisLabel"))||void 0===i||i.setValue(this.leftAxisLabel,{emitEvent:!1})),t.startingTimespan&&(null==f||f.setValue(this.startingTimespan,{emitEvent:!1})),t.legendPlacement&&(null===(n=this.form.get("legendPlacement"))||void 0===n||n.setValue(this.legendPlacement,{emitEvent:!1})),t.preset&&(null===(s=this.form.get("preset"))||void 0===s||s.setValue(this.preset,{emitEvent:!1})),t.timeSpans&&!(null==f?void 0:f.value)&&(null===(u=this.timeSpans)||void 0===u?void 0:u.length)>0&&(null==f||f.setValue(this.timeSpans[0]))}getSecondaryText(){const t=this.form.controls.startingTimespan.value;return`${t&&t.name||$localize`No timespan`}, ${this.form.controls.legendPlacement.value||$localize`No legend`}, ${this.form.controls.leftAxisLabel.value||$localize`No y-axis label`}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.lateLoadKey="TimeseriesMetadataConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-timeseries-metadata-configuration"]],inputs:{legendPlacements:"legendPlacements",timeSpans:"timeSpans",startingTimespan:"startingTimespan",legendPlacement:"legendPlacement",leftAxisLabel:"leftAxisLabel",preset:"preset",availableChartTypes:"availableChartTypes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:40,vars:37,consts:function(){let l,t,i,n,s,u,f,F,$,Q,X,ue,Te;return l=$localize`:␟82fac4002b38b13e6e76cab565857c651740e8d4␟7635587638460371959:Timeseries metadata`,t=$localize`:␟7c1e198b83571c6f6d6774bbf5e8ef469b8ed3f8␟83369046626581484:Starting timespan`,i=$localize`:␟cea52b8401042ba9c3aac1cd5a7507d754f0d809␟4391839922437157830:Starting Timespan`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟a9e3fc4b717bf285f084fc443a97f4c08b345203␟2498436426359230001:Chart legend`,u=$localize`:␟8137d4a0a1b9974f796c96ea5b70f4ec4304af97␟9008417256629743113:Select Legend Orientation`,f=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,F=$localize`:␟20f8b383236e858a2369abf573aa3a662a61dc2c␟7603862017185374134:Chart y-axis label`,$=$localize`:␟da1b3b8ad86495e008972fe0f8dfca60c9c60ac5␟5670370419656051485:Set chart y-axis label`,Q=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,X=$localize`:␟d4821e6eaad5b45a36e2873de2a6e0075c4b7621␟8983610989099122824:Chart type`,ue=$localize`:␟d4821e6eaad5b45a36e2873de2a6e0075c4b7621␟8983610989099122824:Chart type`,Te=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"timeseries-metadata-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","startingTimespan",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],n,["caption",s,3,"control"],["placeholder",u,"formControlName","legendPlacement",3,"popupViewportMargin"],f,["caption",F,3,"control"],["formControlName","leftAxisLabel","placeholder",$],Q,["caption",X,3,"control"],["placeholder",ue,"formControlName","preset",3,"popupViewportMargin"],Te,[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.ALo(7,"async"),e.ALo(8,"nuiFormHeaderIconPipe"),e.TgZ(9,"div",3)(10,"span",4),e.SDv(11,5),e.qZA(),e.TgZ(12,"div",6),e._uU(13),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",8)(16,"nui-form-field",9)(17,"nui-select-v2",10),e.ALo(18,"async"),e.YNc(19,Ks,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(20,"nui-validation-message",12),e.SDv(21,13),e.qZA()()(),e.TgZ(22,"div",8)(23,"nui-form-field",14)(24,"nui-select-v2",15),e.ALo(25,"async"),e.YNc(26,Qs,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(27,"nui-validation-message",12),e.SDv(28,16),e.qZA()()(),e.TgZ(29,"div",8)(30,"nui-form-field",17),e._UZ(31,"nui-textbox",18),e.TgZ(32,"nui-validation-message",12),e.SDv(33,19),e.qZA()()(),e.TgZ(34,"nui-form-field",20)(35,"nui-select-v2",21),e.ALo(36,"async"),e.YNc(37,Xs,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(38,"nui-validation-message",12),e.SDv(39,22),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"edit")))("iconColor",e.lcZ(7,25,e.Dn7(8,27,i.form,"gray",""))),e.xp6(8),e.Q6J("title",i.getSecondaryText()),e.xp6(1),e.hij(" ",i.getSecondaryText()," "),e.xp6(3),e.Q6J("control",i.form.controls.startingTimespan),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(18,31,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.timeSpans),e.xp6(4),e.Q6J("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(25,33,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendPlacements),e.xp6(4),e.Q6J("control",i.form.controls.leftAxisLabel),e.xp6(4),e.Q6J("control",i.form.controls.preset),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(36,35,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.availableChartTypes))},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE,d.XHW],pipes:[r.Ov,Me.F,be.d],styles:[".timeseries-metadata-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),o})(),ft=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.formBuilder=i,this.logger=n,this.formReady=new e.vpe,this.form=this.formBuilder.group({title:["",p.kI.required],subtitle:[""],url:[""],description:[""],collapsible:[!1],collapsed:[!0]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,u,f;t.title&&(null===(i=this.form.get("title"))||void 0===i||i.setValue(this.title)),t.url&&(null===(n=this.form.get("url"))||void 0===n||n.setValue(this.url)),t.subtitle&&(null===(s=this.form.get("subtitle"))||void 0===s||s.setValue(this.subtitle)),t.description&&(null===(u=this.form.get("description"))||void 0===u||u.setValue(this.description)),t.collapsible&&(null===(f=this.form.get("collapsible"))||void 0===f||f.setValue(this.collapsible))}getSecondaryText(){return`${this.form.controls.title.value||$localize`No title`}, ${this.form.controls.subtitle.value||$localize`no subtitle`}`}}return o.lateLoadKey="TitleAndDescriptionConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-title-and-description-configuration"]],inputs:{title:"title",url:"url",subtitle:"subtitle",description:"description",collapsible:"collapsible"},outputs:{formReady:"formReady"},features:[e.TTD],decls:31,vars:20,consts:function(){let l,t,i,n,s,u,f,F,$,Q,X,ue,Te;return l=$localize`:␟c1f3e3c0c4876967ade530f67b0696f7c1f5aa76␟6274813085792990828:Title and Description`,t=$localize`:␟f75e29ac7734f16cad4d02017646720be3030367␟1720994052291036243:Widget title`,i=$localize`:␟eb94f6289d261b9d7b1288cf92c4099023695dd9␟2301126677959299103:Set widget title`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟d2b3deab155463fe2b5ac59000b6e3aa7771afc8␟2073684406211180788:Widget subtitle`,u=$localize`:␟b6d324cd44176b6e2bfe2ff16bbc7e7ee1c412fc␟8934433387734849172:Do not show a subtitle`,f=$localize`:␟cb04bfea86b30d40d2d30630c957bf3fd2e50b83␟9207103926988831681:Widget link URL`,F=$localize`:␟02773997819c014e0f299deb7cb8e054003850e1␟3668070782949850100:Do not link to another page`,$=$localize`:␟ab83c23bd6135460422e95fca32b4ec38ddff9e6␟3861388441030158101:Widget description`,Q=$localize`:␟2f50115d11fc3e29acafe6f99228c2304cffb722␟3301579533722588311:This won't be shown on the widget, but can be helpful for
                          other users who want to re-use this widget on their own dashboards`,X=$localize`:␟37b56526e384f843a15323dc730b484a97b4c968␟3830487495946043372:No description`,ue=$localize`:␟9de5a44cd2d54fe77e5c12131ab7a21792ce91df␟5450302501374652801:Hide widget header`,Te=$localize`:␟6570353e3fb49053e2327cb92f257eab8ccdd274␟5369485165489692848:Collapsible`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"title-and-description-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["id","kpi-widget-title","formControlName","title","placeholder",i],["for","required"],n,["caption",s,3,"control"],["id","kpi-widget-subtitle","formControlName","subtitle","placeholder",u],["caption",f,3,"control"],["id","kpi-widget-url","formControlName","url","placeholder",F],["caption",$,"hint",Q,3,"control"],["formControlName","description","placeholder",X],["caption",ue,3,"showOptionalText","control"],["formControlName","collapsible"],Te]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9),e._UZ(15,"nui-textbox",10),e.TgZ(16,"nui-validation-message",11),e.SDv(17,12),e.qZA()()(),e.TgZ(18,"div",8)(19,"nui-form-field",13),e._UZ(20,"nui-textbox",14),e.qZA()(),e.TgZ(21,"div",8)(22,"nui-form-field",15),e._UZ(23,"nui-textbox",16),e.qZA()(),e.TgZ(24,"div",8)(25,"nui-form-field",17),e._UZ(26,"nui-textbox",18),e.qZA()(),e.TgZ(27,"div")(28,"nui-form-field",19)(29,"nui-checkbox",20),e.SDv(30,21),e.qZA()()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,11,e.lcZ(2,13,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,15,e.xi3(6,17,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.getSecondaryText()),e.xp6(1),e.hij(" ",i.getSecondaryText()," "),e.xp6(3),e.Q6J("control",i.form.get("title")),e.xp6(5),e.Q6J("control",i.form.get("subtitle")),e.xp6(3),e.Q6J("control",i.form.get("url")),e.xp6(3),e.Q6J("control",i.form.get("description")),e.xp6(3),e.Q6J("showOptionalText",!1)("control",i.form.get("collapsible")))},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.XHW,p.JJ,p.u,d.CfE,d.bK4],pipes:[r.Ov,Me.F,be.d],styles:[".title-and-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function js(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function qs(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ea(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ta(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ia(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let ho=(()=>{class o{constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.formReady=new e.vpe,this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group({icon:"",status:"",detailedUrl:"",label:"",url:""})})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){t.dataFieldIds&&this.getFieldMappingsControl.setValue(t.dataFieldIds.currentValue)}get getFieldMappingsControl(){return this.form.get("dataFieldIds")}}return o.lateLoadKey="EntityFormattingComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-entity-formatting-configuration"]],inputs:{mappingKeys:"mappingKeys",dataFieldIds:"dataFieldIds"},outputs:{formReady:"formReady"},features:[e.TTD],decls:46,vars:17,consts:function(){let l,t,i,n,s,u,f,F,$,Q,X;return l=$localize`:␟38ddd26fc749a9c493e70c642d321c868c47f178␟5252376970414591923:Entity formatting`,t=$localize`:␟14688213d67b2f0e553d66f8255281db245502fb␟3074987902485823708:Icon`,i=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,n=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,s=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,u=$localize`:␟06ae2001bf7ffd3cbe977e0c4ce0951f660ca197␟4936125302941310356:Details URL`,f=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,F=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,$=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,Q=$localize`:␟ec044db4c57a4750f8bec4371dc39e94f2e26d46␟994779223497739731:Label URL`,X=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,["title","Show status icon",1,"nui-text-secondary"],["formGroupName","dataFieldIds",1,"entity-formatting__accordion-content"],[1,"mb-3"],t,[1,"d-flex","flex-grow-1"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",i,"formControlName","icon"],[3,"value",4,"ngFor","ngForOf"],n,["placeholder",s,"formControlName","status"],u,["placeholder",f,"formControlName","detailedUrl"],F,["placeholder",$,"formControlName","label"],Q,["placeholder",X,"formControlName","url"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.TgZ(5,"div",3)(6,"span",4),e.SDv(7,5),e.qZA(),e.TgZ(8,"div",6),e._uU(9," Show status icon "),e.qZA()()(),e.TgZ(10,"div",7)(11,"div",8)(12,"label",4),e.SDv(13,9),e.qZA(),e.TgZ(14,"div",10)(15,"nui-form-field",11)(16,"nui-select-v2",12),e.YNc(17,js,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(18,"div",8)(19,"label",4),e.SDv(20,14),e.qZA(),e.TgZ(21,"div",10)(22,"nui-form-field",11)(23,"nui-select-v2",15),e.YNc(24,qs,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(25,"div",8)(26,"label",4),e.SDv(27,16),e.qZA(),e.TgZ(28,"div",10)(29,"nui-form-field",11)(30,"nui-select-v2",17),e.YNc(31,ea,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(32,"div",8)(33,"label",4),e.SDv(34,18),e.qZA(),e.TgZ(35,"div",10)(36,"nui-form-field",11)(37,"nui-select-v2",19),e.YNc(38,ta,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(39,"div",8)(40,"label",4),e.SDv(41,20),e.qZA(),e.TgZ(42,"div",10)(43,"nui-form-field",11)(44,"nui-select-v2",21),e.YNc(45,ia,2,2,"nui-select-v2-option",13),e.qZA()()()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,13,e.lcZ(2,15,i.form))),e.xp6(4),e.Q6J("icon","tag"),e.xp6(11),e.Q6J("control",i.getFieldMappingsControl.get("icon")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("status")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("detailedUrl")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("label")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("url")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys))},directives:[Ae.J,p.JL,p.sg,d.oJW,p.x0,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF],pipes:[r.Ov,Me.F],styles:[".entity-formatting__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),o})();var oa=a(18680),mo=a.n(oa);function na(o,l){1&o&&(e.TgZ(0,"label",18),e.SDv(1,19),e.qZA())}function ra(o,l){1&o&&(e.TgZ(0,"label",20),e.SDv(1,21),e.qZA())}function sa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function aa(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,na,2,0,"label",10),e.YNc(2,ra,2,0,"label",11),e.TgZ(3,"div",12)(4,"nui-form-field",13)(5,"nui-select-v2",14),e.YNc(6,sa,2,2,"nui-select-v2-option",15),e.qZA()(),e.TgZ(7,"div",16)(8,"button",17),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().removeRule(s)}),e.qZA()()(),e.BQk()}if(2&o){const t=l.$implicit,i=l.index,n=e.oxw();e.xp6(1),e.Q6J("ngIf",0!==i),e.xp6(1),e.Q6J("ngIf",0===i),e.xp6(2),e.Q6J("control",t),e.xp6(1),e.Q6J("formControlName",i),e.xp6(1),e.Q6J("ngForOf",n.selectData[i])}}function la(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().addGrouping()}),e.SDv(1,24),e.qZA()}}let fo=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.formBuilder=i,this.eventBus=n,this.formReady=new e.vpe,this.form=this.formBuilder.group({groups:[],groupBy:this.formBuilder.array([]),drillstate:[void 0]}),this.destroy$=new ie.x}get getGroupByControl(){return this.form.get("groupBy")}get getDrillStateControl(){return this.form.get("drillstate")}get getGroupsControl(){return this.form.get("groups")}ngOnInit(){this.eventBus.getStream(Ue.gg).pipe((0,de.R)(this.destroy$)).subscribe(t=>this.onDataSourceCreated(t)),this.getGroupByControl.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(()=>this.fillGroupsOptions()),this.fillGroupsOptions(),this.formReady.emit(this.form)}ngOnChanges(t){t.groups&&this.getGroupsControl.setValue(t.groups.currentValue),t.groupBy&&!t.groupBy.firstChange&&(this.getGroupByControl.clear(),this.groupBy.forEach(i=>this.getGroupByControl.push(this.createControl(i))),this.fillGroupsOptions())}createControl(t){return this.formBuilder.control(t||"",p.kI.required)}addGrouping(){const t=this.createControl();this.getGroupByControl.push(t),this.fillGroupsOptions(),t.setValue(this.selectData[this.getGroupByControl.controls.length-1][0])}removeRule(t){this.getGroupByControl.removeAt(t),this.fillGroupsOptions()}isAddRestricted(){return this.selectData.some(t=>1===t.length)}getSubtitle(){var t;const i=this.getGroupByControl.controls.map((n,s)=>`${0===s?"By":"then"} ${n.value}`).join(", ");return 0===(null===(t=this.getGroupByControl)||void 0===t?void 0:t.value.length)?$localize`No groups`:$localize`${i}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onDataSourceCreated(t){var i,n,s;null===(s=null===(n=null===(i=null==t?void 0:t.payload)||void 0===i?void 0:i.dataFieldsConfig)||void 0===n?void 0:n.dataFields$)||void 0===s||s.pipe((0,de.R)(this.destroy$)).subscribe(u=>{var f;if(u){const F=u.map(Q=>Q.id);(mo()(this.groups,F).length||!(null===(f=this.groups)||void 0===f?void 0:f.length))&&(this.groups=F,this.getGroupsControl.setValue(F),this.getGroupByControl.clear(),this.getDrillStateControl.setValue([]),this.fillGroupsOptions())}})}fillGroupsOptions(){this.selectData=[];const t=this.getGroupByControl.value;this.getGroupByControl.controls.forEach((i,n)=>{this.selectData[n]=[];const s=mo()(this.groups,t);t[n]&&this.selectData[n].push(t[n]),this.selectData[n]=[...this.selectData[n],...s]})}}return o.lateLoadKey="DrilldownConfiguratorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-grouping-configuration"]],inputs:{groups:"groups",groupBy:"groupBy"},outputs:{formReady:"formReady"},features:[e.TTD],decls:13,vars:11,consts:function(){let l,t,i,n,s;return l=$localize`:␟8658ad3b268c50fe2c1106dfb7bccdaa2e4290b2␟877780134171662191:Grouping`,t=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,i=$localize`:␟e2feaa48e92bd996631d6a90911db46fe38cd1a3␟4620310062886462675:Then`,n=$localize`:␟788a575e9f2466abeee0e51ab8f77e9cf19243de␟3653048554215358825:Group by`,s=$localize`:␟b8c2733945af01b52afbf8d2c9993bd9abda4c94␟3960498895552401303: Add another level `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],["formArrayName","groupBy",1,"grouping-configuration__accordion-content"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click",4,"ngIf"],["class","d-flex nui-text-secondary mb-1",4,"ngIf"],["class","d-flex nui-text-panel mb-2",4,"ngIf"],[1,"d-flex","flex-row","flex-grow-1","mb-4"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",t,3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"justify-content-center"],["nui-button","","icon","delete","displayStyle","action","type","button",3,"click"],[1,"d-flex","nui-text-secondary","mb-1"],i,[1,"d-flex","nui-text-panel","mb-2"],n,[3,"value"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],s]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.TgZ(5,"div",3)(6,"span",4),e.SDv(7,5),e.qZA(),e.TgZ(8,"div",6),e._uU(9),e.qZA()()(),e.TgZ(10,"div",7),e.YNc(11,aa,9,5,"ng-container",8),e.YNc(12,la,2,0,"button",9),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,7,e.lcZ(2,9,i.form))),e.xp6(4),e.Q6J("icon","tag"),e.xp6(4),e.Q6J("title",i.getSubtitle()),e.xp6(1),e.hij(" ",i.getSubtitle()," "),e.xp6(2),e.Q6J("ngForOf",i.getGroupByControl.controls),e.xp6(1),e.Q6J("ngIf",!i.isAddRestricted()))},directives:[Ae.J,p.JL,p.sg,d.oJW,p.CE,r.sg,r.O5,d.hgI,d.j_n,p.JJ,p.u,d.rLF,d.r0F],pipes:[r.Ov,Me.F],styles:[".grouping-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function da(o,l){1&o&&(e.TgZ(0,"div",4)(1,"nui-message",5),e.tHW(2,6),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("allowDismiss",!1))}let To=(()=>{class o{constructor(t,i,n,s){this.pizzagnaService=t,this.changeDetector=i,this.formBuilder=n,this.eventBus=s,this.tiles=[],this.formReady=new e.vpe}ngOnChanges(t){}onFormReady(t){this.form=this.formBuilder.group({tiles:t}),this.emptyItems$=this.form.valueChanges.pipe((0,ht.U)(i=>0===i.tiles.length)),this.formReady.emit(this.form)}onItemsChange(t){const n=t.map(u=>u.id);this.pizzagnaService.createComponentsFromTemplate("tiles",n),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["tiles"]},t)}addTile(){this.onItemsChange([...this.tiles,{id:(0,d.VjN)("kpi"),componentType:j.lateLoadKey}])}}return o.lateLoadKey="KpiTilesConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(le.p),e.Y36(e.sBO),e.Y36(p.qu),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-kpi-tiles-configuration-component"]],inputs:{componentId:"componentId",tiles:"tiles",nodes:"nodes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:5,vars:5,consts:function(){let l,t;return l=$localize`:␟79e4ae6fc9c1cd1ee331414b873fb40154ad1e95␟5306337511240259794: Add new value
`,t=$localize`:␟7ca16fec6555e99e64e1cbd41a9ce7a4f4cae2fd␟4636957726236815999:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one value must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","kpi-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],l,[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],t]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(s){return i.onItemsChange(s)})("formReady",function(s){return i.onFormReady(s)}),e.qZA(),e.YNc(1,da,4,1,"div",1),e.ALo(2,"async"),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.addTile()}),e.SDv(4,3),e.qZA()),2&t&&(e.Q6J("items",i.tiles)("nodes",i.nodes),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,i.emptyItems$)&&i.form.touched))},directives:[Zt,r.O5,d.qqZ,d.r0F],pipes:[r.Ov],encapsulation:2,changeDetection:0}),o})();const ca=["metricsSelect"];function _a(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",9),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function ua(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div")(2,"nui-form-field",2)(3,"nui-select-v2",3,4)(5,"nui-overlay-item",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().unsetMetric()}),e._uU(6,"Unset"),e.qZA(),e.YNc(7,_a,2,3,"nui-select-v2-option",6),e.qZA(),e.TgZ(8,"nui-validation-message",7),e.SDv(9,8),e.qZA()()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.form.controls.activeMetricId),e.xp6(5),e.Q6J("ngForOf",t.metrics)}}let Yt=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.formBuilder=i,this.logger=n,this.formReady=new e.vpe,this.form=this.formBuilder.group({activeMetricId:[]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i;t.activeMetricId&&(null===(i=this.form.get("activeMetricId"))||void 0===i||i.setValue(t.activeMetricId.currentValue),this.metrics.find(s=>s.id===t.activeMetricId.currentValue)||this.logger.warn(`AggregatorMetricSelectorConfigurationComponent: No metric found for id: ${t.activeMetricId.currentValue}`))}unsetMetric(){this.form.controls.activeMetricId.reset(),this.meticsSelect.hideDropdown()}}return o.lateLoadKey="AggregatorMetricSelectorConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-aggregator-configurator"]],viewQuery:function(t,i){if(1&t&&e.Gf(ca,5),2&t){let n;e.iGM(n=e.CRH())&&(i.meticsSelect=n.first)}},inputs:{metrics:"metrics",activeMetricId:"activeMetricId"},outputs:{formReady:"formReady"},features:[e.TTD],decls:1,vars:1,consts:function(){let l,t,i;return l=$localize`:␟f43d8212e6ffbc04ea0190118e7f893824ec2686␟8120854355855055890:Default Metric`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["caption",l,1,"mb-3",3,"control"],["formControlName","activeMetricId","placeholder",t],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,ua,10,3,"div",0),2&t&&e.Q6J("ngIf",i.form)},directives:[r.O5,p.JL,p.sg,d.hgI,d.j_n,p.JJ,p.u,d.A4p,r.sg,d.rLF,d.CfE],encapsulation:2,changeDetection:0}),o})();function pa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function ga(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function ha(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"nui-form-field",3)(3,"nui-select-v2",4,5)(5,"nui-overlay-item",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().unsetMetric()}),e._uU(6,"Unset"),e.qZA(),e.YNc(7,pa,2,3,"nui-select-v2-option",7),e.qZA(),e.TgZ(8,"nui-validation-message",8),e.SDv(9,9),e.qZA()()(),e.TgZ(10,"div",2)(11,"nui-form-field",10)(12,"nui-select-v2",11),e.YNc(13,ga,2,3,"nui-select-v2-option",7),e.qZA(),e.TgZ(14,"nui-validation-message",8),e.SDv(15,12),e.qZA()()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.form.controls.activeMetricId),e.xp6(5),e.Q6J("ngForOf",t.metrics),e.xp6(4),e.Q6J("control",t.form.controls.chartSeriesDataFieldId),e.xp6(2),e.Q6J("ngForOf",t.chartSeriesDataFields)}}const ma={id:"data[0]",label:"data",dataType:null};let Co=(()=>{class o extends Yt{constructor(t,i,n,s){super(t,i,n),this.eventBus=s,this.chartSeriesDataFields=[ma],this.form=this.formBuilder.group({activeMetricId:[],chartSeriesDataFieldId:[]}),this.destroy$=new ie.x,this.eventBus.getStream(Ue.gg).pipe((0,de.R)(this.destroy$)).subscribe(u=>{var f,F;const $=u.payload;$&&(null===(F=null===(f=$.dataFieldsConfig)||void 0===f?void 0:f.chartSeriesDataFields$)||void 0===F||F.pipe((0,de.R)(this.destroy$)).subscribe(Q=>this.chartSeriesDataFields=Q))})}ngOnChanges(t){var i;super.ngOnChanges(t),t.chartSeriesDataFieldId&&(null===(i=this.form.get("chartSeriesDataFieldId"))||void 0===i||i.setValue(t.chartSeriesDataFieldId.currentValue))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.lateLoadKey="FieldMapperAggregatorConfiguratorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-field-mapper-aggregator-configurator"]],inputs:{chartSeriesDataFieldId:"chartSeriesDataFieldId"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:function(){let l,t,i,n,s,u;return l=$localize`:␟f43d8212e6ffbc04ea0190118e7f893824ec2686␟8120854355855055890:Default Metric`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,n=$localize`:␟8e67f0d2aff5ba1a2d509b591efa53a4d2076369␟5258061076548910132:Chart Series Data Field`,s=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,u=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"mb-4"],["caption",l,1,"mb-4",3,"control"],["formControlName","activeMetricId","placeholder",t],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,["caption",n,1,"mb-4",3,"control"],["formControlName","chartSeriesDataFieldId","placeholder",s],u,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,ha,16,5,"div",0),2&t&&e.Q6J("ngIf",i.form)},directives:[r.O5,p.JL,p.sg,d.hgI,d.j_n,p.JJ,p.u,d.A4p,r.sg,d.rLF,d.CfE],encapsulation:2,changeDetection:0}),o})();function fa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Ta(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Ca(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}let Oo=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.formReady=new e.vpe,this.form=this.formBuilder.group({type:[void 0,p.kI.required],legendPlacement:[void 0],legendFormatter:this.formBuilder.group({componentType:[void 0]})}),this.chartTypeChanged$=new ie.x,this.destroy$=new ie.x,this.legendFormatters=s.getItems(),this.form.controls.type.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(u=>this.chartTypeChanged$.next(u))}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i;t.type&&this.form.controls.type.setValue(t.type.currentValue),t.legendPlacement&&this.form.controls.legendPlacement.setValue(t.legendPlacement.currentValue),t.legendFormatter&&(null===(i=this.form.get("legendFormatter.componentType"))||void 0===i||i.setValue(t.legendFormatter.currentValue.componentType))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.chartTypeChanged$.complete()}get chartTitle(){var t;const i=null===(t=this.form.get("type"))||void 0===t?void 0:t.value,n=this.chartTypes.find(s=>s.id===i);return null==n?void 0:n.label}get legendFormatterControl(){return this.form.get("legendFormatter.componentType")}}return o.lateLoadKey="ProportionalChartOptionsEditorV2Component",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(_e.qy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-proportional-chart-options-editor-v2-component"]],inputs:{type:"type",legendPlacement:"legendPlacement",legendFormatter:"legendFormatter",chartTypes:"chartTypes",legendPlacementOptions:"legendPlacementOptions"},outputs:{formReady:"formReady"},features:[e.TTD],decls:35,vars:31,consts:function(){let l,t,i,n,s,u,f,F;return l=$localize`:␟f3ecd72a8d0f15303a8f7f61c278783962a6d00c␟4926288099895660391:Chart Options`,t=$localize`:␟f2102c0b996b067ab2a46c7743fe5931fa47f16d␟7337152278540773645:Chart Type`,i=$localize`:␟35a0bc25979ae578aea9594e8c587200628713e1␟5551943712413491013:Select chart type`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`,u=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,f=$localize`:␟7f0b920b08ab06e490eff4f718ef3fecc87a719b␟5989769742900149410:Legend format`,F=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","type",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],n,["caption",s,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],u,["formGroupName","legendFormatter"],["caption",f,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],F,[3,"displayValueContext","value"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.ALo(16,"async"),e.YNc(17,fa,2,3,"nui-select-v2-option",11),e.qZA(),e.TgZ(18,"nui-validation-message",12),e.SDv(19,13),e.qZA()()(),e.TgZ(20,"div",8)(21,"nui-form-field",14)(22,"nui-select-v2",15),e.ALo(23,"async"),e.YNc(24,Ta,2,2,"nui-select-v2-option",16),e.qZA(),e.TgZ(25,"nui-validation-message",12),e.SDv(26,17),e.qZA()()(),e.TgZ(27,"div",8),e.ynx(28,18),e.TgZ(29,"nui-form-field",19)(30,"nui-select-v2",20),e.ALo(31,"async"),e.YNc(32,Ca,2,2,"nui-select-v2-option",16),e.qZA(),e.TgZ(33,"nui-validation-message",12),e.SDv(34,21),e.qZA()(),e.BQk(),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"widget_pie-chart"))),e.xp6(6),e.Q6J("title",i.chartTitle),e.xp6(1),e.hij(" ",i.chartTitle," "),e.xp6(3),e.Q6J("control",i.form.controls.type),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(16,25,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartTypes),e.xp6(4),e.Q6J("showOptionalText",!1)("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(23,27,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendPlacementOptions),e.xp6(5),e.Q6J("showOptionalText",!1)("control",i.legendFormatterControl),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(31,29,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendFormatters))},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE,p.x0],pipes:[r.Ov,Me.F,be.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Oa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Ia(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function va(o,l){}const Ea=function(){return["formReady"]};function Sa(o,l){if(1&o){const t=e.EpF();e.ynx(0,27,28),e.NdJ("output",function(n){return e.CHM(t),e.oxw(2).onFormReady(n.payload)}),e.YNc(2,va,0,0,"ng-template",29),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentId",i.getConfigurationComponent())("componentType",i.getConfigurationComponent())("properties",i.configurationComponentProperties)("outputs",e.DdM(5,Ea)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function Ra(o,l){if(1&o&&(e.ynx(0,23),e.TgZ(1,"nui-form-field",24)(2,"nui-select-v2",20),e.ALo(3,"async"),e.YNc(4,Ia,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(5,"nui-validation-message",12),e.SDv(6,25),e.qZA()(),e.YNc(7,Sa,3,6,"ng-container",26),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("showOptionalText",!1)("control",t.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(3,5,t.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",t.contentFormatters),e.xp6(3),e.Q6J("ngIf",!!t.getConfigurationComponent())}}function Na(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Aa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}const ya={[De.DonutChart]:$localize`Donut`,[De.PieChart]:$localize`Pie`,[De.VerticalBarChart]:$localize`Vertical Bar`,[De.HorizontalBarChart]:$localize`Horizontal Bar`};let Io=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.legendPlacement=Fe.w.None,this.formReady=new e.vpe,this.chartTypeNamesMap=ya,this.legendFormatters=[],this.contentFormatters=[],this.formatterHasConfigurationComponent=!1,this.currentConfigurationComponent="",this.chartFormatters=[],this.cachedChartOptionsViewModels=[],this.rawFormatter={componentType:"",label:$localize`Raw`,dataTypes:{value:null}}}get chartTypeSelectViewModels(){var t,i,n;return(!this.cachedChartOptionsViewModels||this.cachedChartOptionsViewModels.length!==(null===(i=null===(t=this.chartOptions)||void 0===t?void 0:t.chartTypes)||void 0===i?void 0:i.length))&&(this.cachedChartOptionsViewModels=((null===(n=this.chartOptions)||void 0===n?void 0:n.chartTypes)||[]).map(s=>({label:this.chartTypeNamesMap[s],value:s}))),this.cachedChartOptionsViewModels}get chartTitle(){return this.chartTypeNamesMap[this.form.controls.type.value]}getConfigurationComponent(){var t;return(null===(t=this.getCurrentFormatterDefinition())||void 0===t?void 0:t.configurationComponent)||""}getConfigurationComponentProperties(){this.configurationComponentProperties={contentFormatterProperties:this.contentFormatterProperties,contentFormatterDefinition:this.getCurrentFormatterDefinition(),dsOutput:this.dsOutput}}getCurrentFormatterDefinition(){var t;const i=null===(t=this.form.get("contentFormatter.componentType"))||void 0===t?void 0:t.value;return this.contentFormatters.find(n=>n.componentType===i)}ngOnInit(){this.form=this.formBuilder.group({type:[this.chartType||"",p.kI.required],legendPlacement:this.legendPlacement,legendFormatter:this.formBuilder.group({componentType:this.legendFormatterComponentType||this.rawFormatter.componentType}),contentFormatter:this.formBuilder.group({componentType:this.contentFormatterComponentType})}),this.legendFormatters=[this.rawFormatter,...this.chartOptions.legendFormatters||[]],this.contentFormatters=[...this.chartOptions.contentFormatters||[]],this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,u;t.chartType&&!t.chartType.isFirstChange()&&(null===(i=this.form.get("type"))||void 0===i||i.setValue(t.chartType.currentValue)),t.legendPlacement&&!t.legendPlacement.isFirstChange()&&(null===(n=this.form.get("legendPlacement"))||void 0===n||n.setValue(t.legendPlacement.currentValue)),t.legendFormatterComponentType&&!t.legendFormatterComponentType.isFirstChange()&&(null===(s=this.form.get("legendFormatter").get("componentType"))||void 0===s||s.setValue(this.legendFormatterComponentType)),t.contentFormatterComponentType&&!t.contentFormatterComponentType.isFirstChange()&&(null===(u=this.form.get("contentFormatter").get("componentType"))||void 0===u||u.setValue(this.contentFormatterComponentType)),this.form&&this.getConfigurationComponentProperties()}onFormReady(t){this.form.get("contentFormatter").setControl("properties",t)}}return o.lateLoadKey="ProportionalChartOptionsEditorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-proportional-chart-options-editor-component"]],inputs:{chartOptions:"chartOptions",chartType:"chartType",legendPlacement:"legendPlacement",legendFormatterComponentType:"legendFormatterComponentType",contentFormatterComponentType:"contentFormatterComponentType",contentFormatterProperties:"contentFormatterProperties",dsOutput:"dsOutput"},outputs:{formReady:"formReady"},features:[e.TTD],decls:36,vars:32,consts:function(){let l,t,i,n,s,u,f,F,$,Q;return l=$localize`:␟f3ecd72a8d0f15303a8f7f61c278783962a6d00c␟4926288099895660391:Chart Options`,t=$localize`:␟f2102c0b996b067ab2a46c7743fe5931fa47f16d␟7337152278540773645:Chart Type`,i=$localize`:␟35a0bc25979ae578aea9594e8c587200628713e1␟5551943712413491013:Select chart type`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`,u=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,f=$localize`:␟7f0b920b08ab06e490eff4f718ef3fecc87a719b␟5989769742900149410:Legend format`,F=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,$=$localize`:␟7aad3a4ab45c0132aefc2da9c78cde45d3593850␟4108378864701615700:Content format`,Q=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["formControlName","type","placeholder",i,3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],n,["formGroupName","contentFormatter",4,"ngIf"],["caption",s,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],u,["formGroupName","legendFormatter"],["caption",f,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],F,[3,"value"],["formGroupName","contentFormatter"],["caption",$,1,"mb-4",3,"showOptionalText","control"],Q,["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output",4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.ALo(16,"async"),e.YNc(17,Oa,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(18,"nui-validation-message",12),e.SDv(19,13),e.qZA()()(),e.TgZ(20,"div",8),e.YNc(21,Ra,8,7,"ng-container",14),e.qZA(),e.TgZ(22,"div",8)(23,"nui-form-field",15)(24,"nui-select-v2",16),e.ALo(25,"async"),e.YNc(26,Na,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(27,"nui-validation-message",12),e.SDv(28,17),e.qZA()()(),e.ynx(29,18),e.TgZ(30,"nui-form-field",19)(31,"nui-select-v2",20),e.ALo(32,"async"),e.YNc(33,Aa,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(34,"nui-validation-message",12),e.SDv(35,21),e.qZA()(),e.BQk(),e.qZA()()),2&t){let n;e.Q6J("formGroup",i.form)("state",e.lcZ(1,17,e.lcZ(2,19,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,21,e.xi3(6,23,i.form,"widget_pie-chart"))),e.xp6(6),e.Q6J("title",i.chartTitle),e.xp6(1),e.hij(" ",i.chartTitle," "),e.xp6(3),e.Q6J("control",i.form.controls.type),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(16,26,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartTypeSelectViewModels),e.xp6(4),e.Q6J("ngIf","DonutChart"===(null==(n=i.form.get("type"))?null:n.value)),e.xp6(2),e.Q6J("showOptionalText",!1)("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(25,28,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartOptions.legendPlacementOptions),e.xp6(4),e.Q6J("showOptionalText",!1)("control",i.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(32,30,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendFormatters)}},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE,r.O5,p.x0,x.$,U.Pl],pipes:[r.Ov,Me.F,be.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Ma(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.aggregatorType),e.xp6(1),e.hij(" ",t.label," ")}}function Pa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function Da(o,l){}const vo=function(){return["formReady"]};function Fa(o,l){if(1&o){const t=e.EpF();e.ynx(0,19,20),e.NdJ("output",function(n){return e.CHM(t),e.oxw(2).onFormReady("aggregator",n.payload)}),e.YNc(2,Da,0,0,"ng-template",21),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentType",null==i.currentAggregatorDefinition?null:i.currentAggregatorDefinition.configurationComponent)("properties",i.aggregatorConfiguratorProps)("outputs",e.DdM(4,vo)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function ba(o,l){}function xa(o,l){if(1&o){const t=e.EpF();e.ynx(0,19,20),e.NdJ("output",function(n){return e.CHM(t),e.oxw(2).onFormReady("formatter",n.payload)}),e.YNc(2,ba,0,0,"ng-template",21),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentType",null==i.currentFormatterDefinition?null:i.currentFormatterDefinition.configurationComponent)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,vo)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function La(o,l){if(1&o&&(e.ynx(0,1),e.TgZ(1,"nui-widget-editor-accordion",2),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",3),e._UZ(5,"nui-icon",4),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",5)(9,"span",6),e.SDv(10,7),e.qZA(),e.TgZ(11,"div",8),e._uU(12),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"nui-form-field",11)(16,"nui-select-v2",12),e.YNc(17,Ma,2,3,"nui-select-v2-option",13),e.qZA()()(),e.TgZ(18,"div",14)(19,"nui-form-field",15)(20,"nui-select-v2",16),e.YNc(21,Pa,2,3,"nui-select-v2-option",13),e.qZA()()(),e.YNc(22,Fa,3,5,"ng-container",17),e.YNc(23,xa,3,5,"ng-container",17),e.qZA()(),e.BQk()),2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("state",e.lcZ(2,11,e.lcZ(3,13,t.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,15,e.xi3(7,17,t.form,"customize"))),e.xp6(6),e.Q6J("title",t.subtitleText),e.xp6(1),e.hij(" ",t.subtitleText," "),e.xp6(3),e.Q6J("control",t.form.get("aggregator.aggregatorType")),e.xp6(2),e.Q6J("ngForOf",t.aggregators),e.xp6(2),e.Q6J("control",t.form.get("formatter.componentType")),e.xp6(2),e.Q6J("ngForOf",t.formatters),e.xp6(1),e.Q6J("ngIf",null==t.currentAggregatorDefinition?null:t.currentAggregatorDefinition.configurationComponent),e.xp6(1),e.Q6J("ngIf",null==t.currentFormatterDefinition?null:t.currentFormatterDefinition.configurationComponent)}}let Eo=(()=>{class o{constructor(t,i,n,s,u){this.formBuilder=t,this.changeDetector=i,this.eventBus=n,this.contentFormattersRegistry=s,this.aggregatorRegistry=u,this.formReady=new e.vpe,this.shown=!0,this.form=this.formBuilder.group({formatter:this.formBuilder.group({componentType:[void 0],properties:[]}),aggregator:this.formBuilder.group({aggregatorType:[void 0],properties:[]})}),this.dataFields=[],this.destroy$=new ie.x}ngOnInit(){this.watchFormChanges(),this.setFromRegistry(),this.eventBus.getStream(Ue.gg).pipe((0,de.R)(this.destroy$)).subscribe(t=>{var i;const n=t.payload;n&&(null===(i=n.dataFieldsConfig)||void 0===i||i.dataFields$.pipe((0,de.R)(this.destroy$)).subscribe(s=>{this.dataFields=s,this.updateAggregatorConfiguratorProps()}))}),this.formReady.emit(this.form)}ngOnChanges(t){var i,n;t.formatter&&(null===(i=this.form.get("formatter"))||void 0===i||i.patchValue(Object.assign({},t.formatter.currentValue))),t.aggregator&&(null===(n=this.form.get("aggregator"))||void 0===n||n.patchValue(Object.assign({},t.aggregator.currentValue))),t.chartType&&(this.shown=t.chartType.currentValue===De.DonutChart)}ngOnDestroy(){this.destroy$.complete()}onFormReady(t,i){this.form.get(t).setControl("properties",i)}get subtitleText(){var t,i;return`${null===(t=this.currentAggregatorDefinition)||void 0===t?void 0:t.label}, ${null===(i=this.currentFormatterDefinition)||void 0===i?void 0:i.label}`}setFromRegistry(){var t,i;this.formatters=this.contentFormattersRegistry.getItems(),this.aggregators=this.aggregatorRegistry.getItems();let n=this.formatters.find(u=>{var f;return u.componentType===(null===(f=this.formatter)||void 0===f?void 0:f.componentType)});n||(n=this.formatters[0]),null===(t=this.form.get("formatter.componentType"))||void 0===t||t.setValue(n.componentType);let s=this.aggregators.find(u=>{var f;return u.aggregatorType===(null===(f=this.aggregator)||void 0===f?void 0:f.aggregatorType)});s||(s=this.aggregators[0]),null===(i=this.form.get("aggregator.aggregatorType"))||void 0===i||i.setValue(s.aggregatorType)}watchFormChanges(){var t,i;null===(t=this.form.get("aggregator.aggregatorType"))||void 0===t||t.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(n=>{this.currentAggregatorDefinition=this.aggregators.find(s=>s.aggregatorType===n),this.updateAggregatorConfiguratorProps()}),null===(i=this.form.get("formatter.componentType"))||void 0===i||i.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(n=>{this.currentFormatterDefinition=this.formatters.find(s=>s.componentType===n),this.updateAggregatorConfiguratorProps()})}updateAggregatorConfiguratorProps(){var t,i;this.aggregatorConfiguratorProps=Object.assign(Object.assign(Object.assign({},null===(t=this.currentAggregatorDefinition)||void 0===t?void 0:t.properties),null===(i=this.aggregator)||void 0===i?void 0:i.properties),{metrics:this.dataFields})}}return o.lateLoadKey="DonutContentConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(h.nY),e.Y36(_e.UA),e.Y36(Ce))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-donut-content-configuration"]],inputs:{chartType:"chartType",formatter:"formatter",aggregator:"aggregator"},outputs:{formReady:"formReady"},features:[e.TTD],decls:1,vars:1,consts:function(){let l,t,i,n,s;return l=$localize`:␟c488fe848f6a00cefad87ff595b384e4e0f7ff1d␟2010665105219070274:Donut Content Configuration`,t=$localize`:␟87181c5142c58c027d97ac0f37b9c6bb78b624cd␟6056551297792932760:Aggregate`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,n=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,s=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"donut-content-configuration__accordion-content"],["formGroupName","aggregator",1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","aggregatorType"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["formGroupName","formatter",1,"mb-4"],["caption",n,3,"control"],["placeholder",s,"formControlName","componentType"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&e.YNc(0,La,24,20,"ng-container",0),2&t&&e.Q6J("ngIf",i.shown)},directives:[r.O5,p.JL,p.sg,Ae.J,d.oJW,p.x0,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,x.$,U.Pl],pipes:[r.Ov,Me.F,be.d],styles:[".donut-content-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Fi(o,l){const t=o.markAsTouched;o.markAsTouched=()=>{t.apply(o,arguments),l()}}function Ga(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"nui-form-field",20)(3,"nui-textbox-number",21),e.NdJ("valueChange",function(){return e.CHM(t),e.oxw(2).stub()}),e.qZA(),e.TgZ(4,"nui-validation-message",22),e.SDv(5,23),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("control",t.form.controls.width),e.xp6(2),e.Q6J("show",t.form.controls.width.invalid)}}function wa(o,l){1&o&&(e.TgZ(0,"div",19)(1,"nui-message",24),e.tHW(2,25),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function $a(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Ga,6,2,"ng-container",17),e.YNc(2,wa,4,1,"div",18),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isWidthMessageDisplayedForThisColumn()),e.xp6(1),e.Q6J("ngIf",t.isWidthMessageDisplayedForThisColumn())}}let So=(()=>{class o{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.isWidthMessageDisplayed=!1,this.destroy$=new ie.x,this.form=this.formBuilder.group({label:["",[p.kI.required]],isActive:!0,width:void 0}),this.form.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(n=>{var s;null===(s=this.changeFn)||void 0===s||s.call(this,n)})}registerOnChange(t){this.changeFn=t}registerOnTouched(t){}setDisabledState(t){t?this.form.disable():this.form.enable()}validate(t){return this.form.valid?null:{nestedForm:!0}}writeValue(t){this.form.patchValue({label:t.label,isActive:t.isActive,width:t.width},{emitEvent:!1}),this.changeDetector.markForCheck()}ngOnInit(){Fi(this.formControl,()=>{this.form.markAllAsTouched()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}stub(){}isWidthMessageDisplayedForThisColumn(){return this.isWidthMessageDisplayed&&"number"!=typeof this.form.controls.width.value}}return o.lateLoadKey="DescriptionConfigurationV2Component",o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-description-configuration-v2"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}])],decls:23,vars:17,consts:function(){let l,t,i,n,s,u,f,F;return l=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,n=$localize`:␟49e97f1ac4309fd5992a9520d74fa732c4a77481␟5413084173448405143:Show this column`,s=$localize`:␟6b3f02f1feab94e0f0a6823f49a009fa7be7dfa9␟8419094197651631948:Column width (px)`,u=$localize`:␟455a91268699c6879146b5fe44595de6628e6d32␟4319439665214681027:Auto width`,f=$localize`:␟356aa3e61db78cca0742edfab898c6bf0c8051a6␟3835988025416576743: Minimum width of the column is 62px `,F=$localize`:␟8e3d3c0a38f0221dc5901334290180f5705a0fbf␟2546138047162560558:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:All columns cannot have fixed width.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"mb-3",3,"control"],["formControlName","label"],["for","required"],i,[3,"control"],["formControlName","isActive"],n,[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",s,1,"mb-3",3,"control"],["placeholder",u,"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],f,["type","info",3,"allowDismiss"],F]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10),e._UZ(16,"nui-textbox",11),e.TgZ(17,"nui-validation-message",12),e.SDv(18,13),e.qZA()()(),e.TgZ(19,"nui-form-field",14)(20,"nui-checkbox",15),e.SDv(21,16),e.qZA()(),e.YNc(22,$a,3,2,"ng-container",17),e.qZA()(),e.BQk()),2&t){let n;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,8,e.lcZ(3,10,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,12,e.xi3(7,14,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.form.controls.label.value),e.xp6(1),e.hij(" ",i.form.controls.label.value," "),e.xp6(3),e.Q6J("control",i.form.controls.label),e.xp6(4),e.Q6J("control",i.form.controls.isActive),e.xp6(3),e.Q6J("ngIf",null==(n=i.form.get("isActive"))?null:n.value)}},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.XHW,p.JJ,p.u,d.CfE,d.bK4,r.O5,d.I5I,d.qqZ],pipes:[r.Ov,Me.F,be.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();var Ro=a(50793);function Ua(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function za(o,l){}const Ba=function(){return["formReady"]};function Wa(o,l){if(1&o){const t=e.EpF();e.ynx(0,15,16),e.NdJ("output",function(n){return e.CHM(t),e.oxw().onFormReady(n.payload)}),e.YNc(2,za,0,0,"ng-template",17),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",i.formatterConfigurator)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,Ba)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let No=(()=>{class o{constructor(t,i,n,s,u,f){var F,$,Q;this.formBuilder=t,this.changeDetector=i,this.configuratorHeading=n,this.eventBus=s,this.formattersRegistryCommon=u,this.tableFormattersRegistryService=f,this._dataFields=[],this.onDestroy$=new ie.x,this.providedFormatters=[],this._formatters=[],this.propertiesFormReady=new ie.x,this.subscribeToFormattersRegistry(),this.form=this.formBuilder.group({componentType:this.formBuilder.control(null===($=null===(F=this.providedFormatters)||void 0===F?void 0:F[0])||void 0===$?void 0:$.componentType,p.kI.required),properties:this.formBuilder.control({},()=>{var X;return(null===(X=this.propertiesForm)||void 0===X?void 0:X.invalid)?{properties:!0}:null})}),null===(Q=this.form.get("componentType"))||void 0===Q||Q.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe(()=>this.createFormatterConfigurator()),this.form.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe(()=>{this.updateSubtitle(),this.onValueChange(),this.changeDetector.detectChanges()}),this.eventBus.subscribeUntil(Ue.PF,this.onDestroy$,X=>{const{dataFields:ue}=Vt()(X.payload.result)?X.payload:X.payload.result||{};this.dataFields=ue})}set formatters(t){!this.tableFormattersRegistryService.isEmpty||this.handleFormattersUpdate(t)}get formatters(){return this._formatters}set dataFields(t){this._dataFields=t,this.updateAvailableFormatters()}get dataFields(){return this._dataFields}get formatter(){var t;return null===(t=this.form)||void 0===t?void 0:t.value}ngOnInit(){Fi(this.formControl,()=>{this.form.markAllAsTouched(),this.propertiesForm.markAllAsTouched()})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}ngOnChanges(t){}registerOnChange(t){this.changeFn=t}registerOnTouched(t){this.touchFn=t}setDisabledState(t){}writeValue(t){this.input=t,this.form.patchValue(t,{emitEvent:!1}),this.createFormatterConfigurator(),this.changeDetector.markForCheck()}validate(t){return!this.form.valid||this.propertiesForm&&!this.propertiesForm.valid?{error:"error"}:null}getSelectedFormatterDefinition(){var t,i;if(this.providedFormatters.length>0){const n=null===(t=this.form.get("componentType"))||void 0===t?void 0:t.value;return null!==(i=this.providedFormatters.find(s=>s.componentType===n))&&void 0!==i?i:null}return null}getSelectedDataField(){var t,i;const n=this.form.controls.properties;if(n&&this.dataFields&&this.dataFields.length>0){const s=null===(t=n.value.dataFieldIds)||void 0===t?void 0:t.value;return null!==(i=this.dataFields.find(u=>u.id===s))&&void 0!==i?i:null}return null}ngDoCheck(){if(!this.form||!this.propertiesForm)return;const t=this.form.controls.properties;this.propertiesForm.touched&&t.untouched&&(t.markAsTouched(),this.changeDetector.markForCheck()),this.propertiesForm.untouched&&t.touched&&(t.markAsUntouched(),this.changeDetector.markForCheck())}onFormReady(t){this.propertiesFormReady.next(),this.propertiesForm=t;const i=this.form.controls.properties;i.markAsPristine(),this.propertiesForm.valueChanges.pipe((0,de.R)(this.propertiesFormReady)).subscribe(()=>{i.setValue(this.propertiesForm.value),this.onValueChange()}),this.propertiesForm.patchValue(this.formatter.properties)}onValueChange(){var t;null===(t=this.changeFn)||void 0===t||t.call(this,this.form.value)}updateSubtitle(){var t,i;this.subtitleText=`${null===(t=this.getSelectedFormatterDefinition())||void 0===t?void 0:t.label}`,this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(`, ${null===(i=this.getSelectedDataField())||void 0===i?void 0:i.label}`))}createFormatterConfigurator(){var t,i,n,s;const u=this.providedFormatters.find(f=>{var F;return f.componentType===(null===(F=this.form.get("componentType"))||void 0===F?void 0:F.value)});this.formatterConfigurator=u?null!==(t=u.configurationComponent)&&void 0!==t?t:"ValueSelectorComponent":null,(null==u?void 0:u.componentType)!==(null===(i=this.formatter)||void 0===i?void 0:i.componentType)&&(null===(s=null===(n=this.formatter)||void 0===n?void 0:n.properties)||void 0===s?void 0:s.dataFieldIds)&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:u}}updateAvailableFormatters(){var t;if(!(null===(t=this._dataFields)||void 0===t?void 0:t.length)||!this.providedFormatters.length)return;const i={null:!0};this._dataFields.forEach(n=>i[n.dataType]=!0),this._formatters=this.providedFormatters.filter(n=>(n.dataTypes.value instanceof Array?n.dataTypes.value:[n.dataTypes.value]).some(u=>i[u])),this.form&&this.createFormatterConfigurator()}subscribeToFormattersRegistry(){this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,de.R)(this.onDestroy$)).subscribe(t=>{this.handleFormattersUpdate(t)})}handleFormattersUpdate(t){t!==this.providedFormatters&&(this.providedFormatters=(null==t?void 0:t.length)>0?t:Ro.X,this.updateAvailableFormatters())}get formattersRegistry(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}}return o.lateLoadKey="PresentationConfigurationV2Component",o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(Je.p),e.Y36(h.nY),e.Y36(h.m4,8),e.Y36(_e.C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-presentation-configuration-v2"]],inputs:{formatters:"formatters",dataFieldIds:"dataFieldIds",formControl:"formControl"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}],[{provide:p.gN,useExisting:p.sg}]),e.TTD],decls:20,vars:20,consts:function(){let l,t,i;return l=$localize`:␟3c991a92a6b04b4f5a42f0b72befa96a8d2e809c␟5065098939944125110:Property and formatting`,t=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10)(16,"nui-select-v2",11),e.ALo(17,"async"),e.YNc(18,Ua,2,3,"nui-select-v2-option",12),e.qZA()()(),e.YNc(19,Wa,3,5,"ng-container",13),e.qZA()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form,"customize"))),e.xp6(6),e.Q6J("title",i.subtitleText),e.xp6(1),e.hij(" ",i.subtitleText," "),e.xp6(3),e.Q6J("control",i.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(17,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.formatters),e.xp6(1),e.Q6J("ngIf",i.formatterConfigurator))},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,r.O5,x.$,U.Pl],pipes:[r.Ov,Me.F,be.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})(),Ao=(()=>{class o{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.destroy$=new ie.x,this.isWidthMessageDisplayed=!1,this.form=this.formBuilder.group({description:this.formBuilder.control({}),presentation:this.formBuilder.control({})}),this.form.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(n=>{var s;const u=Object.assign(Object.assign({id:null===(s=this.input)||void 0===s?void 0:s.id},n.description),{formatter:n.presentation});this.changeFn(u)})}ngOnInit(){Fi(this.formControl,()=>{this.form.markAllAsTouched()})}registerOnChange(t){this.changeFn=t}registerOnTouched(t){}setDisabledState(t){}validate(t){return this.form.valid?null:{error:"error"}}writeValue(t){this.input=t,this.form.setValue({presentation:(null==t?void 0:t.formatter)||{},description:t},{emitEvent:!1}),this.changeDetector.markForCheck()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.lateLoadKey="TableColumnConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-column-configuration"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}])],decls:3,vars:4,consts:[[3,"formGroup"],[3,"formControl","isWidthMessageDisplayed"],[3,"formControl"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"nui-description-configuration-v2",1)(2,"nui-presentation-configuration-v2",2),e.qZA()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("formControl",i.form.controls.description)("isWidthMessageDisplayed",i.isWidthMessageDisplayed),e.xp6(1),e.Q6J("formControl",i.form.controls.presentation))},directives:[p.JL,p.sg,So,p.JJ,p.oH,No],encapsulation:2}),o})();var ka=a(90377),yo=a.n(ka),Za=a(61874);function Va(o,l){if(1&o&&e._UZ(0,"nui-drop-area",16),2&o){const t=e.oxw(3);e.Udp("height",t.draggedItemHeight,"px")}}function Ja(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"div",17),e._UZ(2,"nui-icon",18),e.qZA(),e.BQk(),e.TgZ(3,"span",19),e.ALo(4,"nuiWidgetConfiguratorSectionHeader"),e._uU(5),e.ALo(6,"nuiWidgetConfiguratorSectionHeader"),e.qZA()),2&o){const t=e.oxw(),i=t.$implicit,n=t.index,s=e.oxw(2);e.xp6(3),e.Q6J("title",e.Dn7(4,2,null==i?null:i.value.label,n,s.columnLabel)),e.xp6(2),e.hij(" ",e.Dn7(6,6,null==i?null:i.value.label,n,s.columnLabel)," ")}}function Ya(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index;return e.oxw(2).removeItem(n)}),e.qZA()()}if(2&o){const t=e.oxw().index;e.xp6(1),e.MGl("id","table-widget-remove-column-btn-",t,"")}}function Ha(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",10),e.NdJ("cdkDragStarted",function(n){return e.CHM(t),e.oxw(2).cdkDragStarted(n)}),e.YNc(1,Va,1,2,"nui-drop-area",11),e.YNc(2,Ja,7,10,"ng-template",null,12,e.W1O),e.YNc(4,Ya,2,1,"ng-template",null,13,e.W1O),e.TgZ(6,"nui-widget-configurator-section",14),e._UZ(7,"nui-table-column-configuration",15),e.qZA()()}if(2&o){const t=l.$implicit,i=e.MAs(3),n=e.MAs(5),s=e.oxw(2);e.xp6(6),e.Q6J("headerTextTemplate",i)("headerButtonsTemplate",n),e.xp6(1),e.Q6J("formControl",t)("isWidthMessageDisplayed",s.isWidthMessageDisplayed)}}function Ka(o,l){1&o&&(e.TgZ(0,"div",22)(1,"nui-message",23)(2,"b"),e.SDv(3,24),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function Qa(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("cdkDropListDropped",function(n){return e.CHM(t),e.oxw().drop(n)}),e.TgZ(1,"div",3),e.YNc(2,Ha,8,4,"div",4),e.YNc(3,Ka,4,1,"div",5),e.ALo(4,"async"),e.TgZ(5,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().addColumn()}),e.SDv(6,7),e.qZA(),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().onResetColumns()}),e.SDv(8,9),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngForOf",t.columnForms)("ngForTrackBy",t.trackBy),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,4,t.emptyColumns$)&&t.form.touched)}}let Mo=(()=>{class o{constructor(t,i,n,s,u,f,F){this.formBuilder=t,this.changeDetector=i,this.dialogService=n,this.pizzagnaService=s,this.dataSourceManager=u,this.tableFormatterRegistry=f,this.eventBus=F,this.columns=[],this.formReady=new e.vpe,this.dataSourceFields=[],this.isWidthMessageDisplayed=!1,this.columnLabel=$localize`Column`,this.onDestroy$=new ie.x,this.form=this.formBuilder.group({columns:this.formBuilder.array([])}),this.form.controls.columns.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe($=>{this.isWidthMessageDisplayed=this.getWidthMessageDisplayed($),this.changeDetector.markForCheck()}),this.eventBus.subscribeUntil(Ue.gg,this.onDestroy$,$=>{!$.payload||(this.dataSource=$.payload,this.changeDetector.markForCheck())}),this.eventBus.subscribeUntil(Ue.PF,this.onDestroy$,$=>{var Q,X,ue,Te;if(null===(Q=$.payload)||void 0===Q?void 0:Q.error)return;const{dataFields:pe}=Vt()($.payload.result)?$.payload:$.payload.result||{};this.dataSourceFields=null!=pe?pe:[];const xe=null===(Te=null===(ue=null===(X=this.dataSource)||void 0===X?void 0:X.features)||void 0===ue?void 0:ue.getFeatureConfig(h.ni.DisableTableColumnGeneration))||void 0===Te?void 0:Te.enabled,ve=this.mergeColumns(this.dataSourceFields,this.getColumns());(null==ve?void 0:ve.length)||xe?this.updateColumns(ve):xe||this.resetColumns(!1),this.changeDetector.markForCheck()}),u.error$.pipe((0,de.R)(this.onDestroy$)).subscribe($=>{this.dataSourceError=$,this.changeDetector.markForCheck()})}get columnForms(){return this.form.controls.columns.controls}ngOnInit(){var t,i,n;if(this.formReady.emit(this.form),this.template&&!(null===(t=this.tableFormatterRegistry.getItems())||void 0===t?void 0:t.length)){const s=null===(n=null===(i=this.template)||void 0===i?void 0:i[1].properties)||void 0===n?void 0:n.formatters;this.tableFormatterRegistry.addItems(s)}}ngOnChanges(t){t.columns&&this.updateColumns(this.columns,!1)}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}getColumns(){return this.form.controls.columns.value}updateColumns(t,i=!0){const n=this.form.controls.columns;n.controls=t.map(s=>{const u=new p.NI(s);u.setParent(n);const f=n.controls.find(F=>F.value.id===s.id);return f&&(u.markAsTouched=f.markAsTouched),u}),n.updateValueAndValidity({emitEvent:i}),this.changeDetector.markForCheck()}trackBy(t,i){var n;return null===(n=null==i?void 0:i.value)||void 0===n?void 0:n.id}addColumn(){this.form.controls.columns.push(new p.NI({id:(0,d.VjN)("column"),label:"",isActive:!0,formatter:{}}))}onResetColumns(){var t;this.resetColumns(!!(null===(t=this.getColumns())||void 0===t?void 0:t.length))}resetColumns(t){const i=()=>{var n;const s=null===(n=this.dataSourceFields)||void 0===n?void 0:n.map(u=>({id:(0,d.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:u.id}}},isActive:!0,label:u.label,width:void 0,sortable:u.sortable}));this.updateColumns(s)};t?this.dialogService.confirm({title:$localize`Are you sure?`,message:$localize`Resetting the columns will revert them to their default configurations. Do you wish to proceed?`,confirmText:$localize`Reset Columns`}).result.then(s=>{s&&i()},()=>{}):i()}mergeColumns(t,i){const n=t.map(s=>s.id);return i.filter(s=>{var u,f,F,$;return!!(null===(f=null===(u=s.formatter)||void 0===u?void 0:u.properties)||void 0===f?void 0:f.dataFieldIds)&&yo()(null===($=null===(F=s.formatter)||void 0===F?void 0:F.properties)||void 0===$?void 0:$.dataFieldIds).some(Q=>n.includes(Q))})}getWidthMessageDisplayed(t){let i=0;for(const n of t)if("number"!=typeof n.width&&i++,i>1)return!1;return!0}moveItem(t,i){const n=this.form.controls.columns,s=n.at(t);n.removeAt(t),n.insert(i,s),this.changeDetector.detectChanges()}removeItem(t){this.form.controls.columns.removeAt(t),this.changeDetector.detectChanges()}drop(t){this.moveItem(t.previousIndex,t.currentIndex)}cdkDragStarted(t){this.draggedItemHeight=t.source.element.nativeElement.offsetHeight}}return o.lateLoadKey="TableColumnsConfigurationV2Component",o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(d.xAy),e.Y36(le.p),e.Y36(Za.q),e.Y36(_e.C),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",componentId:"componentId",template:"template"},outputs:{formReady:"formReady"},features:[e.TTD],decls:2,vars:1,consts:function(){let l,t,i;return l=$localize`:␟5d48cb2ef826d59b1522d72e9909067bbffc0cd8␟4528805165676686479: Add new column `,t=$localize`:␟35328f1fffd2017d6248e5e862bef9e325aca7e9␟5405644315909491800: Reset columns `,i=$localize`:␟de46acf5ee4d137a30dbc57e48aef06379e6e500␟8256146955477966251:At least one column must be added.`,[[1,"nui-table-columns-configuration"],["cdkDropList","",3,"formGroup","cdkDropListDropped",4,"ngIf"],["cdkDropList","",3,"formGroup","cdkDropListDropped"],["formArrayName","columns"],["cdkDrag","","class","nui-table-columns-configuration__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],l,["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],t,["cdkDrag","",1,"nui-table-columns-configuration__node-item",3,"cdkDragStarted"],["class","nui-table-columns-configuration__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],[1,"no-margin",3,"headerTextTemplate","headerButtonsTemplate"],[3,"formControl","isWidthMessageDisplayed"],[1,"nui-table-columns-configuration__drop-area"],["cdkDragHandle","",1,"nui-table-columns-configuration__drag-handler"],["icon","drag"],[1,"nui-table-columns-configuration__header-text",3,"title"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],i]},template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Qa,9,6,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!i.dataSourceError&&i.dataSourceFields.length))},directives:[r.O5,Ke.Wj,p.JL,p.sg,p.CE,r.sg,Ke.Zt,Ke.Hk,Bt,Ke.Bh,d.oJW,d.r0F,ke,Ao,p.JJ,p.oH,d.qqZ],pipes:[Ni,r.Ov],styles:[".nui-table-columns-configuration__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-table-columns-configuration__drag-handler{cursor:move;display:flex}.nui-table-columns-configuration__node-item{background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-table-columns-configuration__node-item .widget-configurator-section{margin:0}.nui-table-columns-configuration__drop-area{margin:15px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),o})();function Xa(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"nui-form-field",20)(3,"nui-textbox-number",21),e.NdJ("valueChange",function(){return e.CHM(t),e.oxw(2).stub()}),e.qZA(),e.TgZ(4,"nui-validation-message",22),e.SDv(5,23),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("control",t.form.controls.width),e.xp6(2),e.Q6J("show",t.form.controls.width.invalid)}}function ja(o,l){1&o&&(e.TgZ(0,"nui-message",24),e.tHW(1,25),e._UZ(2,"b"),e.N_p(),e.qZA()),2&o&&e.Q6J("allowDismiss",!1)}function qa(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Xa,6,2,"ng-container",17),e.YNc(2,ja,3,1,"nui-message",18),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isWidthMessageDisplayed),e.xp6(1),e.Q6J("ngIf",t.isWidthMessageDisplayed)}}let el=(()=>{class o{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.formReady=new e.vpe,this.formDestroy=new e.vpe}ngOnInit(){var t;this.form=this.formBuilder.group({label:[this.label||null,[p.kI.required]],isActive:null===(t=this.isActive)||void 0===t||t,width:this.width||void 0}),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s;t.label&&(null===(i=this.form)||void 0===i||i.patchValue({label:t.label.currentValue})),t.isActive&&(null===(n=this.form)||void 0===n||n.patchValue({isActive:t.isActive.currentValue})),t.width&&(null===(s=this.form)||void 0===s||s.patchValue({width:t.width.currentValue}))}stub(){}ngOnDestroy(){this.formDestroy.emit(this.form)}}return o.lateLoadKey="DescriptionConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label",isActive:"isActive",width:"width",isWidthMessageDisplayed:"isWidthMessageDisplayed"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:23,vars:17,consts:function(){let l,t,i,n,s,u,f,F;return l=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,n=$localize`:␟49e97f1ac4309fd5992a9520d74fa732c4a77481␟5413084173448405143:Show this column`,s=$localize`:␟6b3f02f1feab94e0f0a6823f49a009fa7be7dfa9␟8419094197651631948:Column width (px)`,u=$localize`:␟455a91268699c6879146b5fe44595de6628e6d32␟4319439665214681027:Auto width`,f=$localize`:␟356aa3e61db78cca0742edfab898c6bf0c8051a6␟3835988025416576743: Minimum width of the column is 62px `,F=$localize`:␟ed094d9c3b5f802e6adca32349fb4756bfad4786␟5991148749044556035:${"\ufffd#2\ufffd"}:START_BOLD_TEXT:All columns can not have fixed width.${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"mb-3",3,"control"],["formControlName","label"],["for","required"],i,[3,"control"],["formControlName","isActive"],n,[4,"ngIf"],["type","info",3,"allowDismiss",4,"ngIf"],[1,"mt-4"],["caption",s,1,"mb-3",3,"control"],["placeholder",u,"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],f,["type","info",3,"allowDismiss"],F]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10),e._UZ(16,"nui-textbox",11),e.TgZ(17,"nui-validation-message",12),e.SDv(18,13),e.qZA()()(),e.TgZ(19,"nui-form-field",14)(20,"nui-checkbox",15),e.SDv(21,16),e.qZA()(),e.YNc(22,qa,3,2,"ng-container",17),e.qZA()(),e.BQk()),2&t){let n;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,8,e.lcZ(3,10,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,12,e.xi3(7,14,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.form.controls.label.value),e.xp6(1),e.hij(" ",i.form.controls.label.value," "),e.xp6(3),e.Q6J("control",i.form.controls.label),e.xp6(4),e.Q6J("control",i.form.controls.isActive),e.xp6(3),e.Q6J("ngIf",null==(n=i.form.get("isActive"))?null:n.value)}},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.XHW,p.JJ,p.u,d.CfE,d.bK4,r.O5,d.I5I,d.qqZ],pipes:[r.Ov,Me.F,be.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})(),bi=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.logger=s,this.formReady=new e.vpe,this.dropdownItems={}}ngOnChanges(t){t.formatterDefinition&&(this.mapDropdownItems(),this.initForm()),t.dataFields&&this.mapDropdownItems(),t.formatter&&this.updateForm()}mapDropdownItems(){this.dataFields?this.dropdownItems=Object.keys(this.formatterDefinition.dataTypes).reduce((t,i)=>{const n=this.formatterDefinition.dataTypes[i];return t[i]=n?this.dataFields.filter(s=>"string"==typeof n?s.dataType===n:n.includes(s.dataType)):this.dataFields,t},{}):this.logger.error("There are no dataFields defined for formatter:",this.formatterDefinition)}get dataFieldIds(){return this.form.get("dataFieldIds")}initForm(){const i=Object.keys(this.formatterDefinition.dataTypes||{}).reduce((n,s)=>{var u,f,F,$;return n[s]=[null!==($=null===(F=null===(f=null===(u=this.formatter)||void 0===u?void 0:u.properties)||void 0===f?void 0:f.dataFieldIds)||void 0===F?void 0:F[s])&&void 0!==$?$:null,p.kI.required],n},{});this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group(i)}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}updateForm(){var t;this.form.patchValue(null!==(t=this.formatter.properties)&&void 0!==t?t:{},{onlySelf:!1,emitEvent:!1})}addCustomFormControls(t){}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.sBO),e.LFG(Je.p),e.LFG(p.qu),e.LFG(d.mQy))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function tl(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function il(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}let ol=(()=>{class o extends bi{constructor(t,i,n,s){super(t,i,n,s)}initForm(){this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group({link:[null,p.kI.required],value:[null,p.kI.required]}),targetSelf:[!1]}),this.formReady.emit(this.form)}}return o.lateLoadKey="LinkConfiguratorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-link-configurator"]],features:[e.qOj],decls:17,vars:6,consts:function(){let l,t,i,n,s;return l=$localize`:label field caption| the entity field to be selected for the
                    html label property␟0b86bb6b0b2a82f208239974d253b86395143503␟7152588193113320722:Label`,t=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,i=$localize`:url field caption| the entity field to be selected for the
                    url html property␟ab9389f13cf14de62c26ae2d6d29351d72d8ca9e␟8752860715344063998:URL`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:form field caption|switch configuring whether formatted link
                should open in new window/tab␟21e975dab4148f3f1b43017b9df1312910d25a21␟1433694158029413710:Open in the same window`,[[3,"formGroup"],["formGroupName","dataFieldIds"],[1,"mb-4"],["caption",l,1,"mb-3",3,"control"],["formControlName","value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],t,["caption",i,1,"mb-3",3,"control"],["formControlName","link"],n,["caption",s,1,"mb-3",3,"control"],["id","nui-switch-target","formControlName","targetSelf"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"nui-form-field",3)(4,"nui-select-v2",4),e.YNc(5,tl,2,2,"nui-select-v2-option",5),e.qZA(),e.TgZ(6,"nui-validation-message",6),e.SDv(7,7),e.qZA()()(),e.TgZ(8,"div")(9,"nui-form-field",8)(10,"nui-select-v2",9),e.YNc(11,il,2,2,"nui-select-v2-option",5),e.qZA(),e.TgZ(12,"nui-validation-message",6),e.SDv(13,10),e.qZA()()()(),e.TgZ(14,"div")(15,"nui-form-field",11),e._UZ(16,"nui-switch",12),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.dataFieldIds.controls.value),e.xp6(2),e.Q6J("ngForOf",i.dropdownItems.value),e.xp6(4),e.Q6J("control",i.dataFieldIds.controls.link),e.xp6(2),e.Q6J("ngForOf",i.dropdownItems.link),e.xp6(4),e.Q6J("control",i.form.controls.targetSelf))},directives:[p.JL,p.sg,p.x0,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE,d.qUD],encapsulation:2}),o})();function nl(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",8),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function rl(o,l){if(1&o&&(e.TgZ(0,"div",1)(1,"div",2)(2,"nui-form-field",3)(3,"nui-select-v2",4),e.ALo(4,"async"),e.YNc(5,nl,2,3,"nui-select-v2-option",5),e.qZA(),e.TgZ(6,"nui-validation-message",6),e.SDv(7,7),e.qZA()()()()),2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.dataFieldIds.controls.value),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(4,4,t.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",t.dropdownItems.value)}}let sl=(()=>{class o extends bi{constructor(t,i,n,s){super(t,i,n,s)}}return o.lateLoadKey="ValueSelectorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-value-selector"]],features:[e.qOj],decls:1,vars:1,consts:function(){let l,t,i;return l=$localize`:␟5049e204c14c648691ac775a64fb504467aeb549␟6555318547274416232:Value`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["formGroupName","dataFieldIds"],["caption",l,1,"mb-3",3,"control"],["formControlName","value","placeholder",t,3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,rl,8,6,"div",0),2&t&&e.Q6J("ngIf",i.form)},directives:[r.O5,p.JL,p.sg,p.x0,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE],pipes:[r.Ov],encapsulation:2}),o})();var al=a(27501),ll=a.n(al);function dl(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function cl(o,l){}const _l=function(){return["formReady"]};function ul(o,l){if(1&o){const t=e.EpF();e.ynx(0,15,16),e.NdJ("output",function(n){return e.CHM(t),e.oxw().onFormReady(n.payload)}),e.YNc(2,cl,0,0,"ng-template",17),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",i.formatterConfigurator)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,_l)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let Po=(()=>{class o{constructor(t,i,n,s,u){this.formBuilder=t,this.changeDetector=i,this.configuratorHeading=n,this.formattersRegistryCommon=s,this.tableFormattersRegistryService=u,this._providedFormatters=[],this._formatters=[],this._dataFields=[],this.formReady=new e.vpe,this.formDestroy=new e.vpe,this.formatterForm=this.formBuilder.group({}),this.formatterFormGroupName="formatter",this.onDestroy$=new ie.x,this.subscribeToFormattersRegistry()}set formatters(t){!this.tableFormattersRegistryService.isEmpty||this.handleFormattersUpdate(t)}get formatters(){return this._formatters}set dataFields(t){this._dataFields=t,this.updateAvailableFormatters()}get dataFields(){return this._dataFields}ngOnInit(){var t;this.formatterForm=this.formBuilder.group({componentType:[this.formatter&&this.formatter.componentType||this._providedFormatters&&this._providedFormatters.length>0&&this._providedFormatters[0].componentType,[p.kI.required]]}),this.form=this.formBuilder.group({[this.formatterFormGroupName]:this.formatterForm}),null===(t=this.formatterForm.get("componentType"))||void 0===t||t.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe(()=>this.createFormatterConfigurator()),this.createFormatterConfigurator(),this.formReady.emit(this.form),this.formatterForm.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe(()=>{this.updateSubtitle(),this.changeDetector.detectChanges()})}ngAfterViewInit(){}ngOnChanges(t){var i;if(t.dataFieldIds){const{currentValue:n,previousValue:s}=t.dataFieldIds;if(n&&n!==s){const u=n.map(f=>({id:f,label:ll()(f)}));this.dataFields=u,this.updateSubtitle()}}t.formatter&&(null===(i=this.form)||void 0===i||i.patchValue({[this.formatterFormGroupName]:t.formatter.currentValue},{emitEvent:!1}),this.updateSubtitle()),t.dataFields&&0===t.dataFields.previousValue.length&&this.formatterForm&&this.updateSubtitle()}getSelectedFormatterDefinition(){var t,i;if(this._providedFormatters.length>0){const n=null===(t=this.formatterForm.get("componentType"))||void 0===t?void 0:t.value;return null!==(i=this._providedFormatters.find(s=>s.componentType===n))&&void 0!==i?i:null}return null}getSelectedDataField(){var t,i;const n=this.formatterForm.controls.properties;if(n&&this.dataFields&&this.dataFields.length>0){const s=null===(t=n.get("dataFieldIds"))||void 0===t?void 0:t.value.value;return null!==(i=this.dataFields.find(u=>u.id===s))&&void 0!==i?i:null}return null}onFormReady(t){this.form.get(this.formatterFormGroupName).setControl("properties",t)}updateSubtitle(){var t,i;this.subtitleText=`${null===(t=this.getSelectedFormatterDefinition())||void 0===t?void 0:t.label}`,this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(`, ${null===(i=this.getSelectedDataField())||void 0===i?void 0:i.label}`))}createFormatterConfigurator(){var t,i,n,s;const u=this._providedFormatters.find(f=>{var F;return f.componentType===(null===(F=this.formatterForm.get("componentType"))||void 0===F?void 0:F.value)});this.formatterConfigurator=u?null!==(t=u.configurationComponent)&&void 0!==t?t:"ValueSelectorComponent":null,(null==u?void 0:u.componentType)!==(null===(i=this.formatter)||void 0===i?void 0:i.componentType)&&(null===(s=null===(n=this.formatter)||void 0===n?void 0:n.properties)||void 0===s?void 0:s.dataFieldIds)&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:u}}updateAvailableFormatters(){if(!this._dataFields.length||!this._providedFormatters.length)return;const t={null:!0};this._dataFields.forEach(i=>t[i.dataType]=!0),this._formatters=this._providedFormatters.filter(i=>(i.dataTypes.value instanceof Array?i.dataTypes.value:[i.dataTypes.value]).some(s=>t[s])),this.formatterForm&&this.createFormatterConfigurator()}subscribeToFormattersRegistry(){this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,et.b)(this.handleFormattersUpdate.bind(this)),(0,de.R)(this.onDestroy$)).subscribe()}handleFormattersUpdate(t){t!==this._providedFormatters&&(this._providedFormatters=t,this.updateAvailableFormatters())}get formattersRegistry(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}ngOnDestroy(){this.formDestroy.emit(this.form),this.onDestroy$.next(),this.onDestroy$.complete()}}return o.lateLoadKey="PresentationConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(Je.p),e.Y36(h.m4,8),e.Y36(_e.C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-column-presentation-configuration"]],inputs:{formatter:"formatter",formatters:"formatters",dataFieldIds:"dataFieldIds",dataFields:"dataFields"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e._Bn([],[{provide:p.gN,useExisting:p.sg}]),e.TTD],decls:20,vars:20,consts:function(){let l,t,i;return l=$localize`:␟3c991a92a6b04b4f5a42f0b72befa96a8d2e809c␟5065098939944125110:Property and formatting`,t=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10)(16,"nui-select-v2",11),e.ALo(17,"async"),e.YNc(18,dl,2,3,"nui-select-v2-option",12),e.qZA()()(),e.YNc(19,ul,3,5,"ng-container",13),e.qZA()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.formatterForm),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form,"customize"))),e.xp6(6),e.Q6J("title",i.subtitleText),e.xp6(1),e.hij(" ",i.subtitleText," "),e.xp6(3),e.Q6J("control",i.formatterForm.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(17,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.formatters),e.xp6(1),e.Q6J("ngIf",i.formatterConfigurator))},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,r.O5,x.$,U.Pl],pipes:[r.Ov,Me.F,be.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function pl(o,l){1&o&&(e.TgZ(0,"div",6)(1,"nui-message",7),e.tHW(2,8),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("allowDismiss",!1))}let gl=(()=>{class o{constructor(t,i,n,s,u){this.formBuilder=t,this.changeDetector=i,this.dialogService=n,this.pizzagnaService=s,this.eventBus=u,this.columns=[],this.formatters=[],this.dataFields=[],this.formReady=new e.vpe,this.onDestroy$=new ie.x,this.lastValidDataFields=[],this.eventBus.subscribeUntil(Ue.gg,this.onDestroy$,f=>{!f.payload||(this.dataSource=f.payload)}),this.eventBus.subscribeUntil(Ue.PF,this.onDestroy$,f=>{var F;const{dataFields:$}=Vt()(f.payload.result)?f.payload:f.payload.result||{};if($){let Q=this.pizzagnaService.pizzagna;Q=(0,d.zdu)(Q,`${h.xW.Data}.columns.properties.dataFields`,$);const ue=(null===(F=this.pizzagnaService.pizzagna[h.xW.Structure].columns.properties)||void 0===F?void 0:F.template).findIndex(ve=>"presentation"===ve.id);Q=(0,d.zdu)(Q,`${h.xW.Structure}.columns.properties.template[${ue}].properties.dataFields`,$),Q=Gt()(this.pizzagnaService.pizzagna,`${h.xW.Data}.columns.properties.columns`).map(ve=>ve.id).reduce((ve,wt)=>(0,d.zdu)(ve,`${h.xW.Data}.${wt}/presentation.properties.dataFields`,$),Q),this.pizzagnaService.updatePizzagna(Q),this.eventBus.getStream(T.M).next({payload:{path:"",value:Q}})}})}ngOnInit(){}ngOnChanges(t){var i,n,s;if(t.dataFields&&t.dataFields.currentValue){this.lastValidDataFields=t.dataFields.currentValue;const u=null===(s=null===(n=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===n?void 0:n.getFeatureConfig(h.ni.DisableTableColumnGeneration))||void 0===s?void 0:s.enabled,f=this.mergeColumns(t.dataFields.currentValue,this.columns);(null==f?void 0:f.length)||u?this.onItemsChange(f):u||this.resetColumns(!1),setTimeout(()=>this.changeDetector.markForCheck())}if(t.columns){const u=this.columns.map(f=>({id:f.id,children:{[`${f.id}/description`]:Object.assign({},f),[`${f.id}/presentation`]:Object.assign({},f)}}));this.pizzagnaService.createComponentsFromTemplateWithProperties("columns",u),setTimeout(()=>{var f,F,$;null===(f=this.form.get("columns"))||void 0===f||f.setValue([...null!==($=null===(F=this.form.get("columns"))||void 0===F?void 0:F.value)&&void 0!==$?$:[]])})}}onFormReady(t){var i;this.form=this.formBuilder.group({columns:t,columnsOutput:{}}),this.emptyColumns$=this.form.valueChanges.pipe((0,ht.U)(n=>0===n.columns.length)),this.formReady.emit(this.form),null===(i=this.form.get("columns"))||void 0===i||i.valueChanges.subscribe(n=>{var s;const u=n.map(f=>{var F,$;let Q={id:f.id};for(const X of Object.keys(f.properties))Q=Object.assign(Object.assign({},Q),f.properties[X]);return Q.sortable=null===($=null===(F=this.lastValidDataFields)||void 0===F?void 0:F.find(X=>{var ue,Te,pe;return X.id===(null===(pe=null===(Te=null===(ue=Q.formatter)||void 0===ue?void 0:ue.properties)||void 0===Te?void 0:Te.dataFieldIds)||void 0===pe?void 0:pe.value)}))||void 0===$?void 0:$.sortable,Q});null===(s=this.form.get("columnsOutput"))||void 0===s||s.setValue(u)})}onItemsChange(t){const n=t.map(u=>u.id);this.pizzagnaService.createComponentsFromTemplate("columns",n),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["columns"]},t)}addColumn(){this.onItemsChange([...this.columns,{id:(0,d.VjN)("column"),label:"",formatter:void 0}])}onResetColumns(){var t;this.resetColumns(!!(null===(t=this.columns)||void 0===t?void 0:t.length))}resetColumns(t){const i=()=>{const n=this.lastValidDataFields.map(s=>({id:(0,d.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:s.id}}},isActive:!0,label:s.label,width:void 0,sortable:s.sortable}));this.onItemsChange(n)};t?this.dialogService.confirm({title:$localize`Are you sure?`,message:$localize`Resetting the columns will revert them to their default configurations. Do you wish to proceed?`,confirmText:$localize`Reset Columns`}).result.then(s=>{s&&i()},()=>{}):i()}mergeColumns(t,i){const n=t.map(s=>s.id);return i.filter(s=>{var u,f,F,$;return!!(null===(f=null===(u=s.formatter)||void 0===u?void 0:u.properties)||void 0===f?void 0:f.dataFieldIds)&&yo()(null===($=null===(F=s.formatter)||void 0===F?void 0:F.properties)||void 0===$?void 0:$.dataFieldIds).some(Q=>n.includes(Q))})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return o.lateLoadKey="TableColumnsConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(d.xAy),e.Y36(le.p),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",formatters:"formatters",componentId:"componentId",dataFields:"dataFields",nodes:"nodes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:7,vars:5,consts:function(){let l,t,i,n;return l=$localize`:␟e3c2715ed7f11ed4ac89f4153d8557f182a6918e␟763982378603811482:Column`,t=$localize`:␟71b3b6b8f687cdb01eafe73ac62da2e1e5b87af9␟5086057767318144098: Add new column
`,i=$localize`:␟74cee6ce69c809bb4e67d7cc9e16478a67f9e58d␟4978445162559740484: Reset columns
`,n=$localize`:␟67705586cab07e9ae4f2a9822320fa14e7fb60a7␟8157770720263764419:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one column must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[["headerPrefix",l,3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],t,["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],i,[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],n]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(s){return i.onItemsChange(s)})("formReady",function(s){return i.onFormReady(s)}),e.qZA(),e.YNc(1,pl,4,1,"div",1),e.ALo(2,"async"),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.addColumn()}),e.SDv(4,3),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.onResetColumns()}),e.SDv(6,5),e.qZA()),2&t&&(e.Q6J("items",i.columns)("nodes",i.nodes),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,i.emptyColumns$)&&i.form.touched))},directives:[Zt,r.O5,d.qqZ,d.r0F],pipes:[r.Ov],encapsulation:2,changeDetection:0}),o})();function hl(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function ml(o,l){1&o&&(e.TgZ(0,"nui-message",19),e.tHW(1,20),e._UZ(2,"b"),e.N_p(),e.qZA()),2&o&&e.Q6J("allowDismiss",!1)}let Do=(()=>{class o{constructor(t,i,n){this.formBuilder=t,this.configuratorHeading=i,this.changeDetector=n,this.columns=[],this.formReady=new e.vpe,this.sortableColumns=[],this.onDestroy$=new ie.x}ngOnInit(){this.form=this.formBuilder.group({sorterConfiguration:this.formBuilder.group({sortBy:Gt()(this.sorterConfiguration,"sortBy",""),descendantSorting:Gt()(this.sorterConfiguration,"descendantSorting",!1)})}),this.form.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe(t=>{this.setAccordionSubtitleValues(t)}),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,u;const f=null===(i=this.form.get("sorterConfiguration"))||void 0===i?void 0:i.get("sortBy"),F=null===(n=this.form.get("sorterConfiguration"))||void 0===n?void 0:n.get("descendantSorting");if(t.sorterConfiguration){const $=this.sortableColumns.find(Q=>{var X;return Q.id===(null===(X=this.sorterConfiguration)||void 0===X?void 0:X.sortBy)});null==f||f.setValue(null==$?void 0:$.id,{emitEvent:!1}),null==F||F.setValue(null===(s=this.sorterConfiguration)||void 0===s?void 0:s.descendantSorting,{emitEvent:!1})}if(t.columns){this.sortableColumns=this.columns.filter(Q=>{var X;return!!Q.formatter&&(null===(X=Q.sortable)||void 0===X||X)});const $=this.sortableColumns.find(Q=>{var X;return Q.id===(null===(X=this.sorterConfiguration)||void 0===X?void 0:X.sortBy)});null==f||f.setValue(null==$?void 0:$.id,{emitEvent:!1}),null==F||F.setValue(null===(u=this.sorterConfiguration)||void 0===u?void 0:u.descendantSorting,{emitEvent:!1}),0===this.sortableColumns.length?(null==f||f.disable(),null==F||F.disable()):(null==f||f.enable(),null==F||F.enable())}this.changeDetector.detectChanges()}setAccordionSubtitleValues(t){var i,n;if(t.sorterConfiguration){const s=null===(i=this.columns)||void 0===i?void 0:i.find(f=>f.id===t.sorterConfiguration.sortBy);if(!s)return this.selectedSortByValue=$localize`No sorting`,this.selectedSortOrderValue="",void(null===(n=this.form.get("sorterConfiguration"))||void 0===n||n.patchValue({sortBy:"",descendantSorting:""},{emitEvent:!1}));const u=t.sorterConfiguration.descendantSorting?$localize`Descending`:$localize`Ascending`;this.selectedSortByValue=s.label,this.selectedSortOrderValue=", "+u,this.changeDetector.detectChanges()}}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return o.lateLoadKey="TableFiltersEditorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(Je.p),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-filters-editor-component"]],inputs:{sorterConfiguration:"sorterConfiguration",columns:"columns"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:11,consts:function(){let l,t,i,n,s;return l=$localize`:␟2a63d63538326cdbebb382ee400f9c2ac4ba26eb␟2774613742044941352:Sorting`,t=$localize`:␟ec97f67072a83aaa972536b18d83179f6e4bbec9␟7699622144571229146:Sort by`,i=$localize`:␟e9d403d84c2efea04f713258598abc6dc8fab8bc␟270381191166569688:Select column`,n=$localize`:␟00c361649822cfeeb5fad8e44bf6c9b9fbcc9852␟7343210469772540594: Descending `,s=$localize`:␟73a7df661af2f227feac942adb7cec0474f2b208␟1677678378385679212:${"\ufffd#2\ufffd"}:START_BOLD_TEXT:No columns are sortable.${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["icon","widget_pie-chart",1,"align-self-start","pt-2"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"table-filters-configuration__accordion-content"],["formGroupName","sorterConfiguration",1,"d-flex","align-items-end"],["caption",t,1,"w-50",3,"control"],["placeholder",i,"formControlName","sortBy",1,"table-filters-configuration__accordion-content__sort-by-input",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],[1,"ml-2"],[3,"control"],["formControlName","descendantSorting"],n,[1,"p-5"],["type","info",3,"allowDismiss",4,"ngIf"],[3,"value"],["type","info",3,"allowDismiss"],s]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0)(1,"div",1),e._UZ(2,"nui-icon",2),e.TgZ(3,"div",3)(4,"span",4),e.SDv(5,5),e.qZA(),e.TgZ(6,"div",6),e._uU(7),e.qZA()()(),e.TgZ(8,"div",7)(9,"div",8)(10,"nui-form-field",9)(11,"nui-select-v2",10),e.ALo(12,"async"),e.YNc(13,hl,2,2,"nui-select-v2-option",11),e.qZA()(),e.TgZ(14,"div",12)(15,"nui-form-field",13)(16,"nui-checkbox",14),e.SDv(17,15),e.qZA()()()()(),e.TgZ(18,"div",16),e.YNc(19,ml,3,1,"nui-message",17),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(6),e.Q6J("title",i.selectedSortByValue+i.selectedSortOrderValue),e.xp6(1),e.AsE(" ",i.selectedSortByValue,"",i.selectedSortOrderValue," "),e.xp6(3),e.Q6J("control",i.form.controls.sortBy),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(12,9,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.sortableColumns),e.xp6(2),e.Q6J("control",i.form.controls.descendantSorting),e.xp6(4),e.Q6J("ngIf",!i.sortableColumns.length))},directives:[Ae.J,p.JL,p.sg,d.oJW,p.x0,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.bK4,r.O5,d.qqZ],pipes:[r.Ov],styles:[".table-filters-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function fl(o,l){1&o&&(e.TgZ(0,"div",3)(1,"nui-message",4),e.tHW(2,5),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function Tl(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().addSeries()}),e.SDv(1,7),e.qZA()}}let Fo=(()=>{class o{constructor(t,i,n){this.pizzagnaService=t,this.changeDetector=i,this.eventBus=n,this.series=[],this.formReady=new e.vpe,this.destroy$=new ie.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnChanges(t){t.allSeries&&!t.allSeries.isFirstChange()&&(this.createSeriesConfigComponents(this.series),setTimeout(()=>this.changeDetector.markForCheck()))}onFormReady(t){this.form=t,this.formReady.emit(t),this.emptySeries$=this.form.valueChanges.pipe((0,ht.U)(i=>0===i.length))}onItemsChange(t){this.createSeriesConfigComponents(t),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["series"]},t)}isPossibleToAddSeries(){return(this.allSeries&&this.allSeries.length)>(this.series&&this.series.length)}addSeries(){this.onItemsChange([...this.series,{id:(0,d.VjN)("series"),selectedSeriesId:null}])}createSeriesConfigComponents(t){const n=t.map(s=>s.id);this.pizzagnaService.createComponentsFromTemplate("series",n)}}return o.lateLoadKey="TimeseriesSeriesCollectionConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(le.p),e.Y36(e.sBO),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-timeseries-series-collection-configuration"]],inputs:{nodes:"nodes",componentId:"componentId",series:"series",availableSeries:"availableSeries",allSeries:"allSeries"},outputs:{formReady:"formReady"},features:[e.TTD],decls:4,vars:7,consts:function(){let l,t;return l=$localize`:␟46a7534407b391db85f57b5fd207e4288d7901c1␟4355007031052301783:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one series must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,t=$localize`:␟6231821a0315549db22f614abdf9b5e9b036a0ca␟8188707268253933960: Add new series
`,[[3,"items","nodes","moveButtons","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","type","button","class","ml-4 mb-4",3,"click",4,"ngIf"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],l,["nui-button","","icon","add","displayStyle","action","type","button",1,"ml-4","mb-4",3,"click"],t]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(s){return i.onItemsChange(s)})("formReady",function(s){return i.onFormReady(s)}),e.qZA(),e.YNc(1,fl,4,1,"div",1),e.ALo(2,"async"),e.YNc(3,Tl,2,0,"button",2)),2&t&&(e.Q6J("items",i.series)("nodes",i.nodes)("moveButtons",!1),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,5,i.emptySeries$)&&i.form.touched),e.xp6(2),e.Q6J("ngIf",i.isPossibleToAddSeries()))},directives:[Zt,r.O5,d.qqZ,d.r0F],pipes:[r.Ov],encapsulation:2,changeDetection:0}),o})(),bo=(()=>{class o{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.formReady=new e.vpe,this.formDestroy=new e.vpe}ngOnInit(){this.form=this.formBuilder.group({label:[this.label,p.kI.required]}),this.formReady.emit(this.form)}ngOnChanges(t){if(t.label){const i=t.label.currentValue;i&&this.form.patchValue({label:i})}}ngOnDestroy(){this.formDestroy.emit(this.form)}}return o.lateLoadKey="TimeseriesTileDescriptionConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:20,vars:22,consts:function(){let l,t,i,n;return l=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-description-configuration__accordion-content"],["caption",t,3,"control"],["formControlName","label","placeholder",i],["for","required"],n]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.ALo(8,"async"),e.ALo(9,"nuiFormHeaderIconPipe"),e.TgZ(10,"div",4)(11,"span",5),e.SDv(12,6),e.qZA(),e.TgZ(13,"div",7),e._uU(14),e.qZA()()(),e.TgZ(15,"div",8)(16,"nui-form-field",9),e._UZ(17,"nui-textbox",10),e.TgZ(18,"nui-validation-message",11),e.SDv(19,12),e.qZA()()()(),e.BQk()),2&t){let n,s;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,7,e.lcZ(3,9,i.form.get("label")))),e.xp6(4),e.Q6J("icon",e.lcZ(6,11,e.xi3(7,13,i.form.get("label"),"edit")))("iconColor",e.lcZ(8,16,e.Dn7(9,18,i.form.get("label"),"gray",""))),e.xp6(8),e.Q6J("title",null==(n=i.form.get("label"))?null:n.value),e.xp6(1),e.hij(" ",null==(s=i.form.get("label"))?null:s.value," "),e.xp6(2),e.Q6J("control",i.form.get("label"))}},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.XHW,p.JJ,p.u,d.CfE],pipes:[r.Ov,Me.F,be.d],styles:[".timeseries-tile-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Cl(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.description," ")}}let xo=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.pizzagnaService=s,this.formReady=new e.vpe,this.formDestroy=new e.vpe,this.destroy$=new ie.x}set selectedSeries(t){this._selectedSeries=t,t&&this.form.patchValue({id:t.id})}get selectedSeries(){return this._selectedSeries}ngOnInit(){this.form=this.formBuilder.group({id:[this.selectedSeriesId||null,[p.kI.required]]}),this.formReady.emit(this.form)}ngOnChanges(t){if(t.allSeries&&(this.selectedSeries=this.allSeries.find(i=>this.selectedSeriesId===i.id)),t.selectedSeriesId){if(!this.allSeries)return;this.selectedSeries=this.allSeries.find(i=>this.selectedSeriesId===i.id)}}onSelect(t){this.selectedSeriesId=t.id,this.selectedSeries=t,this.form.patchValue({id:t.id}),setTimeout(()=>{this.pizzagnaService.setProperty(`${h.xW.Data}.${this.componentId}.properties.selectedSeriesId`,t.id),this.changeDetector.markForCheck()})}ngOnDestroy(){this.formDestroy.emit(this.form),this.destroy$.next(),this.destroy$.complete()}}return o.lateLoadKey="TimeseriesTileIndicatorDataConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(le.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-timeseries-tile-indicator-data-configuration"]],inputs:{componentId:"componentId",selectedSeriesId:"selectedSeriesId",allSeries:"allSeries",availableSeries:"availableSeries"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:21,vars:23,consts:function(){let l,t,i,n;return l=$localize`:␟f39271d40a9c081425a980174610625a267d18f7␟8676967573592446270:Indicator data`,t=$localize`:␟c5efb3039d96058120ee5d8148ceeb972d8d4e1f␟3385528249572340947:Series data`,i=$localize`:␟c5efb3039d96058120ee5d8148ceeb972d8d4e1f␟3385528249572340947:Series data`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-data-configuration__accordion-content"],["caption",t,3,"control"],["placeholder",i,3,"value","popupViewportMargin","valueSelected"],[3,"value",4,"ngFor","ngForOf"],["for","required"],n,[3,"value"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.NdJ("valueSelected",function(s){return i.onSelect(s)}),e.ALo(16,"async"),e.YNc(17,Cl,2,2,"nui-select-v2-option",11),e.ALo(18,"nuiAddData"),e.qZA(),e.TgZ(19,"nui-validation-message",12),e.SDv(20,13),e.qZA()()()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form.get("id")))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form.get("id"),"database"))),e.xp6(6),e.Q6J("title",null==i.selectedSeries?null:i.selectedSeries.description),e.xp6(1),e.hij(" ",null==i.selectedSeries?null:i.selectedSeries.description," "),e.xp6(2),e.Q6J("control",i.form.get("id")),e.xp6(1),e.Q6J("value",i.selectedSeries)("popupViewportMargin",e.lcZ(16,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",e.xi3(18,20,i.availableSeries,i.selectedSeries)))},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.j_n,r.sg,d.rLF,d.CfE],pipes:[r.Ov,Me.F,be.d,Ai],styles:[".timeseries-tile-data-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();var Ol=a(4235),Lo=(a(73193),a(42971));let vl=(()=>{class o{static getTextColor(t){return new g.kJ9(new g.jpW([t]),{light:"white",dark:"black"}).get(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var Go=a(94526);let wo=(()=>{class o{constructor(t,i){this.configuratorService=t,this.componentPortalService=i}open(t){if(!t.portalBundle){const i={portal:this.componentPortalService.createComponentPortal(io,null),attached:n=>{n.instance.cloneSelectionComponentType=t.widgetSelectionComponentType}};t.portalBundle=i}return this.configuratorService.open(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Lo.J),e.LFG(Go.$))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var El=a(67517);a(75675),a(41294),a(42911),a(27463),a(60167);const $o=[Ji.n,mt,Ol.P,Pt,ro,St,To,Pi,ao,Io,Oo,Do,go,Fo,gl,Mo,Ao,so,Oi,Hi,Ii,Ki,vi.C,kt,ol,sl,Wt.s,qi,Si,Mt.a,Ei,co,po,ft,ke,gs.b,io,el,So,Po,No,bo,xo,uo,no,fo,ho,Eo,Yt,Co];let Uo=(()=>{class o{constructor(t){for(const i of $o.filter(n=>n.lateLoadKey))t.registerByLateLoadKey(i)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Ti.h))},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Lo.J,Je.p,rs.e,El.s,wo,vl,ki,vt],imports:[[C.Cl,N,p.UX,v.IX,Ke._t,U.eL,d.Gsl,Zi,d.Ts3,d.r$w,d.cnx,d.F__,d.ILf,d.YMY,d.C6o,d.Az_,d.s2z,d.qAs,d.CUE,d.LRI,d.uCA,d.Ld5,d.CND,d.a51,d.cJ5,d.gkT,d.grO,d.bGb,d.a$t,d.ZuS,d.sF0]]}),o})();a(16041),a(44994);const Nl={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:mt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]}},presentation:{id:"presentation",componentType:ke.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:ft.lateLoadKey,providers:{converter:{providerId:T.j4}}},dataAndCalculations:{id:"dataAndCalculations",componentType:ke.lateLoadKey,properties:{headerText:$localize`Data and calculations`,nodes:["dataSource","grouping","entityFormatting"]}},dataSource:{id:"dataSource",componentType:Pt.lateLoadKey,properties:{dataSourceProviders:[]},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId"]}]}}}},grouping:{id:"grouping",componentType:fo.lateLoadKey,properties:{groups:[],groupBy:[]},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:`listWidget.providers.${h.Mu.Adapter}.properties`,keys:["groupBy","drillstate","groups"]}]}}}},entityFormatting:{id:"entityFormatting",componentType:ho.lateLoadKey,properties:{mappingKeys:["icon_status","capital","name","icon","url"],dataFieldIds:{icon:"icon",status:"icon_status",detailedUrl:"capital",label:"name",url:"url"}},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:`listWidget.providers.${h.Mu.Adapter}.properties.componentsConfig.leaf.properties`,keys:["dataFieldIds"]}]}}}}}},Tt={id:"header",componentType:mi.lateLoadKey,properties:{editMode:!1}},Rt={id:"loading",componentType:m.N.lateLoadKey,providers:{[h.Mu.LoadingAdapter]:{providerId:T.IG}}},Qe={id:"body",componentType:hi.lateLoadKey,properties:{content:"bodyContent"}},Al={[h.WE.Unknown]:He.ErrorUnknown,[h.WE.Forbidden]:He.ErrorForbidden,[h.WE.NotFound]:He.ErrorNotFound},yl={[He.ErrorUnknown]:{id:He.ErrorUnknown,componentType:S.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`Whoops, something went wrong`,description:$localize`There was an unexpected error.`}},[He.ErrorForbidden]:{id:He.ErrorForbidden,componentType:S.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`403 - Forbidden`,description:$localize`The requested action was forbidden.`}},[He.ErrorNotFound]:{id:He.ErrorNotFound,componentType:S.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`404 - Not Found`,description:$localize`The requested resource could not be found.`}}};function Ct(o,l=T.Cz,t=Al,i=yl){return Object.assign({bodyContent:{id:"bodyContent",componentType:gi.lateLoadKey,properties:{primaryContent:o,fallbackMap:t},providers:{[h.Mu.ContentFallbackAdapter]:{providerId:l}}}},i)}const Ft={providerId:T.GN};function nt(o=!1,l=0){return{providerId:T.tc,properties:{enabled:o,interval:l}}}const Ml={[h.xW.Structure]:Object.assign(Object.assign(Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,properties:{nodes:["header","loading","search","body"]},providers:{[h.Mu.EventProxy]:Ft}},header:Tt,loading:Rt,body:Object.assign(Object.assign({},Qe),{properties:Object.assign(Object.assign({},Qe.properties),{elementClass:"overflow-auto"})})},Ct("listWidget")),{search:{id:"search",componentType:pi.lateLoadKey}}),Ct("mainContent")),{mainContent:{id:"mainContent",componentType:Ee.lateLoadKey,properties:{nodes:["navigationBar","listWidget"]}},navigationBar:{id:"navigationBar",componentType:dt.lateLoadKey},listWidget:{id:"listWidget",componentType:c.lateLoadKey,providers:{},properties:{elementClass:"w-100 p-3"}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM},header:{properties:{title:$localize`Empty Custom Widget`}}}},Pl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:Ml,configurator:Nl},Dl={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:mt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","customConfig"]}},presentation:{id:"presentation",componentType:ke.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:ft.lateLoadKey,providers:{converter:{providerId:T.j4}}},customConfig:{id:"customConfig",componentType:ke.lateLoadKey,properties:{headerText:$localize`Custom Widget Configuration`,nodes:["embeddedContentSelection"]}},embeddedContentSelection:{id:"embeddedContentSelection",componentType:Pi.lateLoadKey,properties:{messageComponent:{componentType:ao.lateLoadKey,properties:{emphasizeText:"Some content may not work as expected.",generalText:"Web pages embedded in a widget may not be able to open popup windows or may experience formatting problems.\n                                    If you supply your own HTML, dangerous content like scripts will be removed.",link:{href:"https://www.solarwinds.com/",target:"_blank",text:"Learn more about best practices for the HTML widget"},allowDismiss:!0}}},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"mainContent.properties",keys:["customEmbeddedContent","mode","messageComponent","sanitized"]}]}}}}}},Fl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,providers:{[h.Mu.Refresher]:nt(),[h.Mu.EventProxy]:Ft},properties:{nodes:["header","loading","body"]}},header:Tt,loading:Rt,body:Qe},Ct("mainContent")),{mainContent:{id:"mainContent",componentType:b.lateLoadKey,properties:{elementClass:"d-flex w-100 justify-content-center"}}}),[h.xW.Configuration]:{header:{properties:{title:$localize`Empty Embedded Content Widget`}}}},bl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM}},widget:Fl,configurator:Dl},Ht={id:"refresher",componentType:uo.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:`${T.XM}.providers.refresher.properties`,keys:["enabled","interval","overrideDefaultSettings"]}]}}},properties:{overrideDefaultSettings:!1}},xl=[{componentType:Mt.a.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:kt.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null}},{componentType:vi.C.lateLoadKey,label:$localize`Icon`,dataTypes:{value:null}}],Ll={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:mt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","tiles"]},providers:{[h.Mu.FormattersRegistry]:{providerId:T.s6}}},presentation:{id:"presentation",componentType:ke.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","refresher"]}},titleAndDescription:{id:"titleAndDescription",componentType:ft.lateLoadKey,providers:{converter:{providerId:T.j4}}},refresher:Ht,tiles:{id:"tiles",componentType:To.lateLoadKey,properties:{template:[{id:"description",componentType:co.lateLoadKey,properties:{configurableUnits:!0,backgroundColors:[...Mi]},providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"properties.widgetData",keys:["label","backgroundColor","units"]}]}}}},{id:"dataSource",componentType:Pt.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:St.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"providers.dataSource",keys:["providerId","properties"]},{previewPath:"providers.adapter.properties.dataSource",keys:["properties"]}]}},[h.Mu.Broadcaster]:{providerId:T.m_,properties:{configs:[{trackOn:"component",key:"dataFieldIds",paths:["data.{parentComponentId}/formatting.properties.dataFieldIds"]}]}}}},{id:"thresholds",componentType:po.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"providers.adapter.properties.thresholds",keys:["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"]}]}}}},{id:"backgroundColorRules",componentType:no.lateLoadKey,properties:{backgroundColors:[...Mi]},providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"providers.kpiColorPrioritizer.properties",keys:["rules"]}]}}}},{id:"formatting",componentType:Po.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"properties.configuration.formatters.Value",keys:["formatter"]}]}}},properties:{formatter:{componentType:Mt.a.lateLoadKey,properties:{dataFieldIds:{value:"value"}}}}}]},providers:{[h.Mu.Converter]:{providerId:T.ns}}}}},Gl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,providers:{[h.Mu.Refresher]:nt(),[h.Mu.EventProxy]:Ft},properties:{nodes:["header","loading","body"]}},header:Tt,loading:Rt,body:Object.assign(Object.assign({},Qe),{properties:Object.assign(Object.assign({},Qe.properties),{elementClass:"overflow-hidden"})})},Ct("tiles",T.C)),{tiles:{id:"tiles",componentType:Xe.lateLoadKey,properties:{elementClass:"flex-grow-1 pt-2 px-3 pb-3 w-100",template:{componentType:j.lateLoadKey,providers:{[h.Mu.KpiColorPrioritizer]:{providerId:T.tS,properties:{}},[h.Mu.Adapter]:{providerId:T.u1,properties:{propertyPath:"widgetData"}}},properties:{elementClass:"flex-grow-1"}}}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:nt(!1,60)}},header:{properties:{title:$localize`Empty KPI Widget`}}}},zo="tiles.properties.template[0]",Bo="tiles.properties.template[1]",$l={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:`${Bo}.componentType`,[h.AC.TileDescriptionConfigComponentType]:`${zo}.componentType`,[h.AC.DataSourceProviders]:`${Bo}.properties.dataSourceProviders`,[h.AC.TileDescriptionBackgroundColors]:`${zo}.properties.backgroundColors`,[h.AC.TileBackgroundColorRulesBackgroundColors]:"tiles.properties.template[3].properties.backgroundColors"}},widget:Gl,configurator:Ll},Ul={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM}},widget:{[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,properties:{nodes:["header","body"]}},header:Tt,body:Qe,bodyContent:{id:"bodyContent",componentType:qi.lateLoadKey}},[h.xW.Configuration]:{header:{properties:{title:$localize`New Widget`}}}}},xi=(o,l)=>{const t=(null==l?void 0:l.chartSeriesDataFieldId)||"data[0]";let i=o[0];return(null==l?void 0:l.activeMetricId)&&(i=o.find(n=>n.id===(null==l?void 0:l.activeMetricId)),i||console.warn(`No metric with id: ${null==l?void 0:l.activeMetricId} found. Taking first available.`)),Gt()(i,t)};xi.aggregatorType="fieldMapper";var zl=a(7154),Wo=a.n(zl);const Kt=(o,l)=>{var t;const i=o.map(Q=>Q.data[0]),{activeMetricId:n,base100:s}=l||{},u=Wo()(i);let f=i[0];n&&(f=null===(t=o.find(Q=>Q.id===n))||void 0===t?void 0:t.data[0],f||console.warn(`No metric with id: ${n} found. Taking first available.`));const F=f/u;let $=s?100*F:F;return $=Math.round(100*$)/100,$.toString()};Kt.aggregatorType="percentageAggregator";const Qt=(o,l)=>{const{activeMetricId:t}=l||{};if(t){const i=o.find(n=>n.id===t);if(i)return i.data[0]}return Wo()(o.map(i=>i.data[0])).toString()};Qt.aggregatorType="sumAggregator";const Bl=[{componentType:"",label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:Si.lateLoadKey,label:$localize`Status With Icon`,dataTypes:{value:null}},{componentType:Wt.s.lateLoadKey,label:$localize`Link`,dataTypes:{value:null}}],Wl=[{componentType:Mt.a.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:kt.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:Ei.lateLoadKey,label:$localize`Percentage Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}}],kl=[{aggregatorType:Qt.aggregatorType,label:"Sum Aggregator",fn:Qt,configurationComponent:Yt.lateLoadKey},{aggregatorType:Kt.aggregatorType,label:"Percentage Aggregator",fn:Kt,properties:{base100:!0},configurationComponent:Yt.lateLoadKey},{aggregatorType:xi.aggregatorType,label:"Field Mapper Aggregator",fn:xi,configurationComponent:Co.lateLoadKey}],Zl={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:mt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]},providers:{[h.Mu.FormattersRegistry]:{providerId:T.rf}}},presentation:{id:"presentation",componentType:ke.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor"]}},titleAndDescription:{id:"titleAndDescription",componentType:ft.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.j4}}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:Io.lateLoadKey,properties:{chartOptions:{chartTypes:["PieChart","DonutChart","VerticalBarChart","HorizontalBarChart"],legendPlacementOptions:[{id:Fe.w.None,label:$localize`None`},{id:Fe.w.Right,label:$localize`Right`},{id:Fe.w.Bottom,label:$localize`Bottom`}],contentFormatters:[{componentType:Ki.lateLoadKey,label:$localize`Raw`},{componentType:Ii.lateLoadKey,label:$localize`Sum`},{componentType:Oi.lateLoadKey,label:$localize`Percentage`,configurationComponent:"DonutContentPercentageConfigurationComponent"}],legendFormatters:[{componentType:Si.lateLoadKey,label:$localize`Status With Icon`},{componentType:Wt.s.lateLoadKey,label:$localize`Link`}]}},providers:{[h.Mu.Converter]:{providerId:T.dz}}},refresher:Ht,dataAndCalculations:{id:"dataAndCalculations",componentType:ke.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:Pt.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:St.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"chart.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}},[h.Mu.Broadcaster]:{providerId:T.m_,properties:{configs:[{trackOn:"component",key:"dsOutput",paths:["data.chartOptionsEditor.properties.dsOutput"]}]}}}}}},Vl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,properties:{nodes:["header","loading","body"]},providers:{[h.Mu.Refresher]:nt(),[h.Mu.EventProxy]:Ft}},header:Tt,loading:Rt,body:Object.assign(Object.assign({},Qe),{properties:Object.assign(Object.assign({},Qe.properties),{elementClass:"overflow-auto"})})},Ct("chart")),{chart:{id:"chart",componentType:ti.lateLoadKey,providers:{[h.Mu.Adapter]:{providerId:T.bZ,properties:{componentId:"chart",propertyPath:"widgetData"}}},properties:{elementClass:"d-flex flex-grow-1 justify-content-center overflow-auto"}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:nt(!1,60)}},header:{properties:{title:$localize`Empty Proportional Widget`}}}},Jl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:"dataSource.componentType",[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[h.AC.Formatters]:"chartOptionsEditor.properties.chartOptions.contentFormatters"}},widget:Vl,configurator:Zl},Yl={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:mt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","columns"]},providers:{[h.Mu.FormattersRegistry]:{providerId:T.Hp},[h.Mu.DataSourceManager]:{providerId:T.Xh}}},presentation:{id:"presentation",componentType:ke.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","filters"]}},titleAndDescription:{id:"titleAndDescription",componentType:ft.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.j4}}},filters:{id:"filters",componentType:Do.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.LU}}},refresher:Ht,dataAndCalculations:{id:"dataAndCalculations",componentType:ke.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:Pt.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:so.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"table.providers.dataSource",keys:["providerId","properties"]},{previewPath:"table.providers.adapter.properties.dataSource",keys:["properties"]}]}}}},columns:{id:"columns",componentType:Mo.lateLoadKey,properties:{template:[{},{properties:{formatters:Ro.X}}]},providers:{[h.Mu.Converter]:{providerId:T.n5}}}}},Hl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,providers:{[h.Mu.Refresher]:nt(),[h.Mu.EventProxy]:{providerId:T.GN,properties:{downstreams:[T.pV.id]}}},properties:{nodes:["header","loading","body"]}},header:Tt,loading:Rt,body:Object.assign(Object.assign({},Qe),{properties:Object.assign(Object.assign({},Qe.properties),{elementClass:"overflow-auto"})})},Ct("table")),{table:{id:"table",componentType:ni.lateLoadKey,providers:{[h.Mu.Adapter]:{providerId:T.l5,properties:{componentId:"table",dataPath:"widgetData",dataFieldsPath:"dataFields",totalItemsPath:"totalItems"}},virtualViewportManager:{providerId:T.Vx}},properties:{elementClass:"flex-grow-1 mx-3 mb-3 mt-2",delayedMousePresenceDetectionEnabled:!0,configuration:{columns:[],scrollActivationDelayMs:500,headerTooltipsEnabled:!0}}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:nt(!1,60)}},header:{properties:{title:$localize`Empty Table Widget`}}}},Kl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:"dataSource.componentType",[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[h.AC.Formatters]:"columns.properties.template[1].properties.formatters"}},widget:Hl,configurator:Yl},Ql={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:mt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","series"]}},presentation:{id:"presentation",componentType:ke.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","timeseriesMetadata"]}},titleAndDescription:{id:"titleAndDescription",componentType:ft.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.j4}}},timeseriesMetadata:{id:"timeseriesMetadata",componentType:go.lateLoadKey,properties:{legendPlacements:[{id:Fe.w.None,label:$localize`None`},{id:Fe.w.Right,label:$localize`Right`},{id:Fe.w.Bottom,label:$localize`Bottom`}]},providers:{[h.Mu.Converter]:{providerId:T.dZ}}},refresher:Ht,dataAndCalculations:{id:"dataAndCalculations",componentType:ke.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:Pt.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:St.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}}}},series:{id:"series",componentType:Fo.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.Ip}},properties:{template:[{id:"description",componentType:bo.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.Es,properties:{formParts:[{previewPath:"chart.providers.adapter.properties.series",keys:["label"]}]}}}},{id:"indicatorData",componentType:xo.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.Gq}}}]}}}},Xl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,providers:{[h.Mu.Refresher]:nt(),[h.Mu.EventProxy]:Ft},properties:{nodes:["header","loading","body"]}},header:Tt,loading:Rt,body:Object.assign(Object.assign({},Qe),{properties:Object.assign(Object.assign({},Qe.properties),{elementClass:"overflow-auto"})})},Ct("mainContent")),{mainContent:{id:"mainContent",componentType:Ee.lateLoadKey,properties:{nodes:["timeframeSelection","chart"]}},timeframeSelection:{id:"timeframeSelection",componentType:si.lateLoadKey},chart:{id:"chart",componentType:ui.lateLoadKey,properties:{elementClass:"d-flex flex-column justify-content-center h-100 overflow-auto",configuration:{preset:$e.Line,scales:{y:{type:ot.Linear},x:{type:ot.Time}}}},providers:{[h.Mu.Adapter]:{providerId:T.R9,properties:{componentId:"chart",propertyPath:"widgetData",series:[]}}}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:nt(!1,60)}},header:{properties:{title:$localize`Empty Timeseries Widget`}}}},jl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:"dataSource.componentType",[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:Xl,configurator:Ql};var ql=a(29242);const ed=[b,j,li,m.N,ti,Ee,di,ci,_i,ai,ni,Bi.q,Xe,si,ui,hi,gi,mi,S,c,Ot,lt,dt,pi,Be];let td=(()=>{class o{constructor(t,i,n,s){t.registerWidgetType("kpi",1,$l),t.registerWidgetType("table",1,Kl),t.registerWidgetType("proportional",1,Jl),t.registerWidgetType("timeseries",1,jl),t.registerWidgetType("previewPlaceholder",1,Ul),t.registerWidgetType("embedded-content",1,bl),t.registerWidgetType("drilldown",1,Pl);for(const u of ed.filter(f=>f.lateLoadKey))i.registerByLateLoadKey(u);n.registerEvent(T.RG),n.registerEvent(T.y4),n.registerEvent(T.j7),n.registerEvent(T.Ef),n.registerEvent(T.MO),n.registerEvent(T.pV),n.registerEvent(T.Xi),n.registerEvent(T.M),n.registerEvent(T.re),n.registerEvent(T.xZ),n.registerEvent(T.N9),n.registerEvent(Ue.PF),n.registerEvent(T.QD),s.addItems(xl)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(J.x),e.LFG(Ti.h),e.LFG(ql.o),e.LFG(_e.YX))},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Go.$,J.x,r.JJ,ii.g],imports:[[N,v.IX,d.Gsl,d.Az_,g.$y4,Uo,d.Ts3,d.sF0,d.r$w,Zi,d.cnx,d.BSv,d.hvO,d.l70,C.Cl,d.JhO,p.UX,d.ILf,d.VSN,d.a$t,d.lam,d.ZuS,d.w0o]]}),o})();var Xt=(()=>((Xt||(Xt={})).Value="Value",Xt))();function id(o,l,t){const i=l;return t.forEach((n,s)=>{if(0===n.data.length)return;let u=-1,f=-1;const F=l[s].data;F.length>0?(u=n.data.findIndex(X=>Ve()(X.x).isSame(F[0].x)),f=n.data.findIndex(X=>Ve()(X.x).isSame(F[F.length-1].x))):(u=n.data.findIndex(X=>Ve()(X.x).isAfter(o.startDatetime)),f=n.data.findIndex(X=>Ve()(X.x).isAfter(o.endDatetime))-1);const $=Ve()(o.startDatetime);(0===F.length||!$.isSame(F[0].x))&&$.isBetween(n.data[0].x,n.data[n.data.length-1].x)&&i[s].data.unshift(Object.assign(Object.assign({},n.data[u-1]),{x:o.startDatetime.toDate()}));const Q=Ve()(o.endDatetime);(0===F.length||!Q.isSame(F[F.length-1].x))&&Q.isBetween(n.data[0].x,n.data[n.data.length-1].x)&&i[s].data.push(Object.assign(Object.assign({},n.data[f]),{x:o.endDatetime.toDate()}))}),i}a(97674),a(26365),a(10948),a(42296),a(50271),a(38046);const od={presentation:{id:"presentation",componentType:ke.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor","donutContentConfiguration"]}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:Oo.lateLoadKey,properties:{chartTypes:[{id:"PieChart",label:$localize`Pie`},{id:"DonutChart",label:$localize`Donut`},{id:"VerticalBarChart",label:$localize`Vertical Bar`},{id:"HorizontalBarChart",label:$localize`Horizontal Bar`}],legendPlacementOptions:[{id:Fe.w.None,label:$localize`None`},{id:Fe.w.Right,label:$localize`Right`},{id:Fe.w.Bottom,label:$localize`Bottom`}]},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions",keys:["type","legendPlacement","legendFormatter"]}]}},[h.Mu.Broadcaster]:{providerId:T.m_,properties:{configs:[{trackOn:"component",key:"chartTypeChanged$",paths:["data.donutContentConfiguration.properties.chartType"]}]}}}},donutContentConfiguration:{id:"donutContentConfiguration",componentType:Eo.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions.donutContentConfig",keys:["formatter","aggregator"]}]}}}}}},84493:oe=>{oe.exports=function B(a,r){for(var d,O=-1,e=a.length;++O<e;){var S=r(a[O]);void 0!==S&&(d=void 0===d?S:d+S)}return d}},94133:(oe,B,a)=>{var r=a(42664),d=a(50686),O=a(80707);oe.exports=function e(S,R,N){var C=S.length;if(C<2)return C?O(S[0]):[];for(var p=-1,v=Array(C);++p<C;)for(var g=S[p],L=-1;++L<C;)L!=p&&(v[p]=r(v[p]||g,S[L],R,N));return O(d(v,1),R,N)}},38645:oe=>{oe.exports=function B(a,r,d){for(var O=-1,e=a.length,S=r.length,R={};++O<e;)d(R,a[O],O<S?r[O]:void 0);return R}},18680:(oe,B,a)=>{var r=a(42664),d=a(50686),O=a(23269),e=a(21330),S=O(function(R,N){return e(R)?r(R,d(N,1,e,!0)):[]});oe.exports=S},7154:(oe,B,a)=>{var r=a(84493),d=a(32608);oe.exports=function O(e){return e&&e.length?r(e,d):0}},10912:(oe,B,a)=>{var r=a(96517),d=a(84493);oe.exports=function O(e,S){return e&&e.length?d(e,r(S,2)):0}},68921:(oe,B,a)=>{var r=a(50686),d=a(23269),O=a(80707),e=a(21330),S=d(function(R){return O(r(R,1,e,!0))});oe.exports=S},19574:(oe,B,a)=>{var r=a(69779),d=a(23269),O=a(94133),e=a(21330),S=d(function(R){return O(r(R,e))});oe.exports=S},21617:(oe,B,a)=>{var r=a(89719),d=a(38645);oe.exports=function O(e,S){return d(e||[],S||[],r)}},33748:(oe,B,a)=>{"use strict";a.d(B,{IM:()=>Lt,IX:()=>Ne,KY:()=>T,RU:()=>h,sm:()=>te,tQ:()=>P});var r=a(5e3),d=a(77579),O=a(78372),e=a(82722),S=a(63900),R=a(5963),N=a(69808);function C(Y,_){if(1&Y&&r._UZ(0,"div",3),2&Y){const c=_.index,m=r.oxw();r.Q6J("ngStyle",m.gridRenderer.getGridColumnStyle(c))}}function p(Y,_){if(1&Y&&r._UZ(0,"div",4),2&Y){const c=_.index,m=r.oxw();r.Q6J("ngStyle",m.gridRenderer.getGridRowStyle(c))}}const v=["*"];function g(Y,_){if(1&Y){const c=r.EpF();r.TgZ(0,"div",8),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function L(Y,_){if(1&Y){const c=r.EpF();r.TgZ(0,"div",9),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function y(Y,_){if(1&Y){const c=r.EpF();r.TgZ(0,"div",10),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function D(Y,_){if(1&Y){const c=r.EpF();r.TgZ(0,"div",11),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function G(Y,_){if(1&Y){const c=r.EpF();r.TgZ(0,"div",12),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function b(Y,_){if(1&Y){const c=r.EpF();r.TgZ(0,"div",13),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function A(Y,_){if(1&Y){const c=r.EpF();r.TgZ(0,"div",14),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function W(Y,_){if(1&Y){const c=r.EpF();r.TgZ(0,"div",15),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}var P=(()=>{return(Y=P||(P={})).Fit="fit",Y.ScrollVertical="scrollVertical",Y.ScrollHorizontal="scrollHorizontal",Y.Fixed="fixed",Y.VerticalFixed="verticalFixed",Y.HorizontalFixed="horizontalFixed",P;var Y})(),T=(()=>{return(Y=T||(T={})).Always="always",Y.OnDragAndResize="onDrag&Resize",Y.None="none",T;var Y})(),h=(()=>{return(Y=h||(h={})).None="none",Y.CompactUp="compactUp",Y.CompactLeft="compactLeft",Y.CompactUpAndLeft="compactUp&Left",Y.CompactLeftAndUp="compactLeft&Up",Y.CompactRight="compactRight",Y.CompactUpAndRight="compactUp&Right",Y.CompactRightAndUp="compactRight&Up",Y.CompactDown="compactDown",Y.CompactDownAndLeft="compactDown&Left",Y.CompactLeftAndDown="compactLeft&Down",Y.CompactDownAndRight="compactDown&Right",Y.CompactRightAndDown="compactRight&Down",h;var Y})(),x=(()=>{return(Y=x||(x={})).LTR="ltr",Y.RTL="rtl",x;var Y})();class U{constructor(_){this.gridster=_}destroy(){this.gridster=null}checkCompact(){this.gridster.$options.compactType!==h.None&&(this.gridster.$options.compactType===h.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===h.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===h.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===h.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===h.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===h.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===h.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===h.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===h.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===h.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===h.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===h.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(_){this.gridster.$options.compactType!==h.None&&(this.gridster.$options.compactType===h.CompactUp?this.moveTillCollision(_,"y",-1):this.gridster.$options.compactType===h.CompactLeft?this.moveTillCollision(_,"x",-1):this.gridster.$options.compactType===h.CompactUpAndLeft?(this.moveTillCollision(_,"y",-1),this.moveTillCollision(_,"x",-1)):this.gridster.$options.compactType===h.CompactLeftAndUp?(this.moveTillCollision(_,"x",-1),this.moveTillCollision(_,"y",-1)):this.gridster.$options.compactType===h.CompactUpAndRight?(this.moveTillCollision(_,"y",-1),this.moveTillCollision(_,"x",1)):this.gridster.$options.compactType===h.CompactDown?this.moveTillCollision(_,"y",1):this.gridster.$options.compactType===h.CompactDownAndLeft?(this.moveTillCollision(_,"y",1),this.moveTillCollision(_,"x",-1)):this.gridster.$options.compactType===h.CompactLeftAndDown?(this.moveTillCollision(_,"x",-1),this.moveTillCollision(_,"y",1)):this.gridster.$options.compactType===h.CompactDownAndRight?(this.moveTillCollision(_,"y",1),this.moveTillCollision(_,"x",1)):this.gridster.$options.compactType===h.CompactRightAndDown&&(this.moveTillCollision(_,"x",1),this.moveTillCollision(_,"y",1)))}checkCompactMovement(_,c){let m=!1;this.gridster.grid.forEach(E=>{!1!==E.$item.compactEnabled&&this.moveTillCollision(E.$item,_,c)&&(m=!0,E.item[_]=E.$item[_],E.itemChanged())}),m&&this.checkCompact()}moveTillCollision(_,c,m){return _[c]+=m,this.gridster.checkCollision(_)?(_[c]-=m,!1):(this.moveTillCollision(_,c,m),!0)}}const K={gridType:P.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:h.None,mobileBreakpoint:640,useBodyForBreakpoint:!1,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:T.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,enableBoundaryControl:!1,disableAutoPositionOnConflict:!1,dirType:x.LTR};class q{static merge(_,c,m){for(const E in c)void 0!==c[E]&&m.hasOwnProperty(E)&&(_[E]="object"==typeof c[E]?q.merge(_[E],c[E],m[E]):c[E]);return _}static checkTouchEvent(_){void 0===_.clientX&&_.touches&&(_.touches&&_.touches.length?(_.clientX=_.touches[0].clientX,_.clientY=_.touches[0].clientY):_.changedTouches&&_.changedTouches.length&&(_.clientX=_.changedTouches[0].clientX,_.clientY=_.changedTouches[0].clientY))}static checkContentClassForEvent(_,c){if(_.$options.draggable.ignoreContent){if(!q.checkDragHandleClass(c.target,c.currentTarget,_.$options.draggable.dragHandleClass,_.$options.draggable.ignoreContentClass))return!0}else if(q.checkContentClass(c.target,c.currentTarget,_.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(_,c){return q.checkContentClass(c.target,c.currentTarget,_.$options.draggable.ignoreContentClass)||q.checkContentClass(c.target,c.currentTarget,_.$options.draggable.dragHandleClass)}static checkDragHandleClass(_,c,m,E){if(!_||_===c)return!1;if(_.hasAttribute("class")){const k=_.getAttribute("class").split(" ");if(k.indexOf(m)>-1)return!0;if(k.indexOf(E)>-1)return!1}return q.checkDragHandleClass(_.parentNode,c,m,E)}static checkContentClass(_,c,m){return!(!_||_===c)&&(!!(_.hasAttribute("class")&&_.getAttribute("class").split(" ").indexOf(m)>-1)||q.checkContentClass(_.parentNode,c,m))}static compareItems(_,c){return _.y>c.y?-1:_.y<c.y?1:_.x>c.x?-1:1}}class ne{constructor(_){this.gridster=_,this.emptyCellClickCb=c=>{if(!this.gridster||this.gridster.movingItem||q.checkContentClassForEmptyCellClickEvent(this.gridster,c))return;const m=this.getValidItemFromEvent(c);!m||(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(c,m),this.gridster.cdRef.markForCheck())},this.emptyCellContextMenuCb=c=>{if(this.gridster.movingItem||q.checkContentClassForEmptyCellClickEvent(this.gridster,c))return;c.preventDefault(),c.stopPropagation();const m=this.getValidItemFromEvent(c);!m||(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(c,m),this.gridster.cdRef.markForCheck())},this.emptyCellDragDrop=c=>{const m=this.getValidItemFromEvent(c);!m||(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(c,m),this.gridster.cdRef.markForCheck())},this.emptyCellDragOver=c=>{c.preventDefault(),c.stopPropagation();const m=this.getValidItemFromEvent(c);m?(c.dataTransfer&&(c.dataTransfer.dropEffect="move"),this.gridster.movingItem=m):(c.dataTransfer&&(c.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()},this.emptyCellMouseDown=c=>{if(q.checkContentClassForEmptyCellClickEvent(this.gridster,c))return;c.preventDefault(),c.stopPropagation();const m=this.getValidItemFromEvent(c);!m||1!==c.buttons&&!(c instanceof TouchEvent)||(this.initialItem=m,this.gridster.movingItem=m,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.removeWindowMousemoveListenerFn=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove),this.removeWindowTouchmoveListenerFn=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove)}),this.removeWindowMouseupListenerFn=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp),this.removeWindowTouchendListenerFn=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp))},this.emptyCellMouseMove=c=>{c.preventDefault(),c.stopPropagation();const m=this.getValidItemFromEvent(c,this.initialItem);!m||(this.gridster.movingItem=m,this.gridster.previewStyle())},this.emptyCellMouseUp=c=>{this.removeWindowMousemoveListenerFn(),this.removeWindowTouchmoveListenerFn(),this.removeWindowMouseupListenerFn(),this.removeWindowTouchendListenerFn();const m=this.getValidItemFromEvent(c,this.initialItem);m&&(this.gridster.movingItem=m),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(c,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()}}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),this.gridster.movingItem=null,this.initialItem=this.gridster=null,this.removeDocumentDragendListenerFn&&(this.removeDocumentDragendListenerFn(),this.removeDocumentDragendListenerFn=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.removeEmptyCellClickListenerFn&&this.gridster.options.emptyCellClickCallback?(this.removeEmptyCellClickListenerFn=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb),this.removeEmptyCellTouchendListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb)):!this.gridster.$options.enableEmptyCellClick&&this.removeEmptyCellClickListenerFn&&this.removeEmptyCellTouchendListenerFn&&(this.removeEmptyCellClickListenerFn(),this.removeEmptyCellTouchendListenerFn(),this.removeEmptyCellClickListenerFn=null,this.removeEmptyCellTouchendListenerFn=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.removeEmptyCellContextMenuListenerFn&&this.gridster.options.emptyCellContextMenuCallback?this.removeEmptyCellContextMenuListenerFn=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb):!this.gridster.$options.enableEmptyCellContextMenu&&this.removeEmptyCellContextMenuListenerFn&&(this.removeEmptyCellContextMenuListenerFn(),this.removeEmptyCellContextMenuListenerFn=null),this.gridster.$options.enableEmptyCellDrop&&!this.removeEmptyCellDropListenerFn&&this.gridster.options.emptyCellDropCallback?(this.removeEmptyCellDropListenerFn=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop),this.gridster.zone.runOutsideAngular(()=>{this.removeEmptyCellDragoverListenerFn=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver)}),this.removeDocumentDragendListenerFn=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.removeEmptyCellDropListenerFn&&this.removeEmptyCellDragoverListenerFn&&this.removeDocumentDragendListenerFn&&(this.removeEmptyCellDropListenerFn(),this.removeEmptyCellDragoverListenerFn(),this.removeDocumentDragendListenerFn(),this.removeEmptyCellDragoverListenerFn=null,this.removeEmptyCellDropListenerFn=null,this.removeDocumentDragendListenerFn=null),this.gridster.$options.enableEmptyCellDrag&&!this.removeEmptyCellMousedownListenerFn&&this.gridster.options.emptyCellDragCallback?(this.removeEmptyCellMousedownListenerFn=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown),this.removeEmptyCellTouchstartListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown)):!this.gridster.$options.enableEmptyCellDrag&&this.removeEmptyCellMousedownListenerFn&&this.removeEmptyCellTouchstartListenerFn&&(this.removeEmptyCellMousedownListenerFn(),this.removeEmptyCellTouchstartListenerFn(),this.removeEmptyCellMousedownListenerFn=null,this.removeEmptyCellTouchstartListenerFn=null)}getPixelsX(_,c){const m=this.gridster.options.scale;return m?(_.clientX-c.left)/m+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():_.clientX+this.gridster.el.scrollLeft-c.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(_,c){const m=this.gridster.options.scale;return m?(_.clientY-c.top)/m+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():_.clientY+this.gridster.el.scrollTop-c.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(_,c){_.preventDefault(),_.stopPropagation(),q.checkTouchEvent(_);const m=this.gridster.el.getBoundingClientRect(),E=this.getPixelsX(_,m),k=this.getPixelsY(_,m),J={x:this.gridster.pixelsToPositionX(E,Math.floor,!0),y:this.gridster.pixelsToPositionY(k,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(c&&(J.cols=Math.min(Math.abs(c.x-J.x)+1,this.gridster.$options.emptyCellDragMaxCols),J.rows=Math.min(Math.abs(c.y-J.y)+1,this.gridster.$options.emptyCellDragMaxRows),c.x<J.x?J.x=c.x:c.x-J.x>this.gridster.$options.emptyCellDragMaxCols-1&&(J.x=this.gridster.movingItem?this.gridster.movingItem.x:0),c.y<J.y?J.y=c.y:c.y-J.y>this.gridster.$options.emptyCellDragMaxRows-1&&(J.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(J))return J}}class ae{constructor(_){this.gridster=_}destroy(){this.gridster=null}updateItem(_,c,m){if(this.gridster.mobile)this.clearCellPosition(m,_),m.setStyle(_,"height",this.gridster.$options.keepFixedHeightInMobile?(c.rows-1)*this.gridster.$options.margin+c.rows*this.gridster.$options.fixedRowHeight+"px":c.rows*this.gridster.curWidth/c.cols+"px"),m.setStyle(_,"width",this.gridster.$options.keepFixedWidthInMobile?this.gridster.$options.fixedColWidth+"px":""),m.setStyle(_,"margin-bottom",this.gridster.$options.margin+"px"),m.setStyle(_,x.LTR?"margin-right":"margin-left","");else{const E=Math.round(this.gridster.curColWidth*c.x),k=Math.round(this.gridster.curRowHeight*c.y),J=this.gridster.curColWidth*c.cols-this.gridster.$options.margin,_e=this.gridster.curRowHeight*c.rows-this.gridster.$options.margin;this.setCellPosition(m,_,E,k),m.setStyle(_,"width",J+"px"),m.setStyle(_,"height",_e+"px");let fe=null,he=null;this.gridster.$options.outerMargin&&(this.gridster.rows===c.rows+c.y&&(fe=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===c.cols+c.x&&(he=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),m.setStyle(_,"margin-bottom",fe),m.setStyle(_,x.LTR?"margin-right":"margin-left",he)}}updateGridster(){let _="",c="",m="",E="";if(this.gridster.$options.gridType===P.Fit)_=P.Fit,c=P.ScrollVertical,m=P.ScrollHorizontal,E=P.Fixed;else if(this.gridster.$options.gridType===P.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,_=P.ScrollVertical,c=P.Fit,m=P.ScrollHorizontal,E=P.Fixed;else if(this.gridster.$options.gridType===P.ScrollHorizontal){const k=this.gridster.$options.rowHeightRatio;this.gridster.curColWidth=this.gridster.curRowHeight*(k>=1?k:k+1),_=P.ScrollHorizontal,c=P.Fit,m=P.ScrollVertical,E=P.Fixed}else this.gridster.$options.gridType===P.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),_=P.Fixed,c=P.Fit,m=P.ScrollVertical,E=P.ScrollHorizontal):this.gridster.$options.gridType===P.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),_=P.ScrollVertical,c=P.Fit,m=P.ScrollHorizontal,E=P.Fixed):this.gridster.$options.gridType===P.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),_=P.ScrollHorizontal,c=P.Fit,m=P.ScrollVertical,E=P.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==P.Fit?this.gridster.renderer.removeClass(this.gridster.el,_):this.gridster.renderer.addClass(this.gridster.el,_),this.gridster.renderer.removeClass(this.gridster.el,c),this.gridster.renderer.removeClass(this.gridster.el,m),this.gridster.renderer.removeClass(this.gridster.el,E)}getGridColumnStyle(_){return Object.assign(Object.assign({},this.getLeftPosition(this.gridster.curColWidth*_)),{width:this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}getGridRowStyle(_){return Object.assign(Object.assign({},this.getTopPosition(this.gridster.curRowHeight*_)),{width:this.gridster.gridColumns.length*this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}getLeftPosition(_){const c=this.gridster.$options.dirType===x.RTL?-_:_;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+c+"px)"}:{left:this.getLeftMargin()+c+"px"}}getTopPosition(_){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+_+"px)"}:{top:this.getTopMargin()+_+"px"}}clearCellPosition(_,c){this.gridster.$options.useTransformPositioning?_.setStyle(c,"transform",""):(_.setStyle(c,"top",""),_.setStyle(c,"left",""))}setCellPosition(_,c,m,E){const k=this.gridster.$options.dirType===x.RTL?-m:m;this.gridster.$options.useTransformPositioning?_.setStyle(c,"transform","translate3d("+k+"px, "+E+"px, 0)"):(_.setStyle(c,"left",this.getLeftMargin()+k+"px"),_.setStyle(c,"top",this.getTopMargin()+E+"px"))}getLeftMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}let V,j,ie,me,Ie,Ge,ze,Ee,je,ce=(()=>{class Y{constructor(c,m){this.renderer=m,this.el=c.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(c=>this.previewStyle(c))}ngOnDestroy(){this.sub.unsubscribe()}previewStyle(c){c?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,c,this.renderer)):this.renderer.setStyle(this.el,"display","")}}return Y.\u0275fac=function(c){return new(c||Y)(r.Y36(r.SBq),r.Y36(r.Qsj))},Y.\u0275cmp=r.Xpm({type:Y,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},decls:0,vars:0,template:function(c,m){},styles:["gridster-preview{position:absolute;display:none;background:rgba(0,0,0,.15)}\n"],encapsulation:2}),Y})(),te=(()=>{class Y{constructor(c,m,E,k){this.renderer=m,this.cdRef=E,this.zone=k,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.previewStyle$=new r.vpe,this.calculateLayout$=new d.x,this.resize$=new d.x,this.destroy$=new d.x,this.optionsChanged=()=>{this.setOptions();let _e,J=this.grid.length-1;for(;J>=0;J--)_e=this.grid[J],_e.updateOptions();this.calculateLayout()},this.onResize=()=>{this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())},this.getNextPossiblePosition=(J,_e={})=>{-1===J.cols&&(J.cols=this.$options.defaultItemCols),-1===J.rows&&(J.rows=this.$options.defaultItemRows),this.setGridDimensions();let he,fe=_e.y||0;for(;fe<this.rows;fe++)for(J.y=fe,he=_e.x||0;he<this.columns;he++)if(J.x=he,!this.checkCollision(J))return!0;const Ce=this.$options.maxRows>=this.rows+J.rows;return this.rows<=this.columns&&Ce||!(this.$options.maxCols>=this.columns+J.cols)?!!Ce&&(J.y=this.rows,J.x=0,!0):(J.x=this.columns,J.y=0,!0)},this.getFirstPossiblePosition=J=>{const _e=Object.assign({},J);return this.getNextPossiblePosition(_e),_e},this.getLastPossiblePosition=J=>{let _e={y:0,x:0};_e=this.grid.reduce((he,Ce)=>{const Pe={y:Ce.$item.y+Ce.$item.rows-1,x:Ce.$item.x+Ce.$item.cols-1};return 1===q.compareItems(he,Pe)?Pe:he},_e);const fe=Object.assign({},J);return this.getNextPossiblePosition(fe,_e),fe},this.el=c.nativeElement,this.$options=JSON.parse(JSON.stringify(K)),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new ne(this),this.compact=new U(this),this.gridRenderer=new ae(this)}static checkCollisionTwoItemsForSwaping(c,m){return c.x+(1===c.cols?0:1)<m.x+m.cols&&c.x+c.cols>m.x+(1===m.cols?0:1)&&c.y+(1===c.rows?0:1)<m.y+m.rows&&c.y+c.rows>m.y+(1===m.rows?0:1)}checkCollisionTwoItems(c,m){if(!(c.x<m.x+m.cols&&c.x+c.cols>m.x&&c.y<m.y+m.rows&&c.y+c.rows>m.y))return!1;if(!this.$options.allowMultiLayer)return!0;const k=this.$options.defaultLayerIndex;return(void 0===c.layerIndex?k:c.layerIndex)===(void 0===m.layerIndex?k:m.layerIndex)}ngOnInit(){this.options.initCallback&&this.options.initCallback(this),this.calculateLayout$.pipe((0,O.b)(0),(0,e.R)(this.destroy$)).subscribe(()=>this.calculateLayout()),this.resize$.pipe((0,S.w)(()=>(0,R.H)(100)),(0,e.R)(this.destroy$)).subscribe(()=>this.resize())}ngOnChanges(c){c.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged,resize:this.onResize,getNextPossiblePosition:this.getNextPossiblePosition,getFirstPossiblePosition:this.getFirstPossiblePosition,getLastPossiblePosition:this.getLastPossiblePosition,getItemComponent:m=>this.getItemComponent(m)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}resize(){let c,m;"fit"!==this.$options.gridType||this.mobile?(m=this.el.clientWidth,c=this.el.clientHeight):(m=this.el.offsetWidth,c=this.el.offsetHeight),(m!==this.curWidth||c!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=q.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize),this.emptyCell.updateOptions()}ngOnDestroy(){this.destroy$.next(),this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),this.emptyCell=null,this.compact.destroy(),this.compact=null}checkIfToResize(){const c=this.el.clientWidth,m=this.el.offsetWidth,E=this.el.scrollWidth,k=this.el.clientHeight,J=this.el.offsetHeight,_e=this.el.scrollHeight;return!(c<m&&_e>J&&_e-J<m-c||k<J&&E>m&&E-m<J-k)}checkIfMobile(){return this.$options.useBodyForBreakpoint?this.$options.mobileBreakpoint>document.body.clientWidth:this.$options.mobileBreakpoint>this.curWidth}setGridSize(){const c=this.el;let m,E;this.$options.setGridSize||this.$options.gridType===P.Fit&&!this.mobile?(m=c.offsetWidth,E=c.offsetHeight):(m=c.clientWidth,E=c.clientHeight),this.curWidth=m,this.curHeight=E}setGridDimensions(){this.setGridSize(),!this.mobile&&this.checkIfMobile()?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&!this.checkIfMobile()&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let k,c=this.$options.minRows,m=this.$options.minCols,E=this.grid.length-1;for(;E>=0;E--)k=this.grid[E],k.notPlaced||(c=Math.max(c,k.$item.y+k.$item.rows),m=Math.max(m,k.$item.x+k.$item.cols));c+=this.$options.addEmptyRowsCount,(this.columns!==m||this.rows!==c)&&(this.columns=m,this.rows=c,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let E=-this.$options.margin;null!==this.$options.outerMarginLeft?(E+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(E+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(E+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(E+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-E)/this.columns;let k=-this.$options.margin;null!==this.$options.outerMarginTop?(k+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(k+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?(k+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(k+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-k)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let m,c=this.grid.length-1;for(;c>=0;c--)m=this.grid[c],m.setSize(),m.drag.toggle(),m.resize.toggle();this.resize$.next()}updateGrid(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):("none"===this.$options.displayGrid||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=Y.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=Y.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(c){void 0===c.$item.cols&&(c.$item.cols=this.$options.defaultItemCols,c.item.cols=c.$item.cols,c.itemChanged()),void 0===c.$item.rows&&(c.$item.rows=this.$options.defaultItemRows,c.item.rows=c.$item.rows,c.itemChanged()),-1===c.$item.x||-1===c.$item.y?this.autoPositionItem(c):this.checkCollision(c.$item)&&(this.$options.disableWarnings||(c.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(c.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?c.notPlaced=!0:this.autoPositionItem(c)),this.grid.push(c),this.calculateLayout$.next()}removeItem(c){this.grid.splice(this.grid.indexOf(c),1),this.calculateLayout$.next(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(c.item,c)}checkCollision(c){let m=!1;if(this.options.itemValidateCallback&&(m=!this.options.itemValidateCallback(c)),!m&&this.checkGridCollision(c)&&(m=!0),!m){const E=this.findItemWithItem(c);E&&(m=E)}return m}checkGridCollision(c){const Le=c.cols*c.rows;return!(c.y>-1&&c.x>-1&&c.cols+c.x<=this.$options.maxCols&&c.rows+c.y<=this.$options.maxRows&&c.cols<=(void 0===c.maxItemCols?this.$options.maxItemCols:c.maxItemCols)&&c.cols>=(void 0===c.minItemCols?this.$options.minItemCols:c.minItemCols)&&c.rows<=(void 0===c.maxItemRows?this.$options.maxItemRows:c.maxItemRows)&&c.rows>=(void 0===c.minItemRows?this.$options.minItemRows:c.minItemRows)&&(void 0===c.minItemArea?this.$options.minItemArea:c.minItemArea)<=Le&&(void 0===c.maxItemArea?this.$options.maxItemArea:c.maxItemArea)>=Le)}findItemWithItem(c){let E,m=0;for(;m<this.grid.length;m++)if(E=this.grid[m],E.$item!==c&&this.checkCollisionTwoItems(E.$item,c))return E;return!1}findItemsWithItem(c){const m=[];let k,E=0;for(;E<this.grid.length;E++)k=this.grid[E],k.$item!==c&&this.checkCollisionTwoItems(k.$item,c)&&m.push(k);return m}autoPositionItem(c){this.getNextPossiblePosition(c.$item)?(c.notPlaced=!1,c.item.x=c.$item.x,c.item.y=c.$item.y,c.itemChanged()):(c.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(c.item,["cols","rows","x","y"])))}pixelsToPositionX(c,m,E){const k=m(c/this.curColWidth);return E?k:Math.max(k,0)}pixelsToPositionY(c,m,E){const k=m(c/this.curRowHeight);return E?k:Math.max(k,0)}positionXToPixels(c){return c*this.curColWidth}positionYToPixels(c){return c*this.curRowHeight}getItemComponent(c){return this.grid.find(m=>m.item===c)}checkCollisionForSwaping(c){let m=!1;if(this.options.itemValidateCallback&&(m=!this.options.itemValidateCallback(c)),!m&&this.checkGridCollision(c)&&(m=!0),!m){const E=this.findItemWithItemForSwapping(c);E&&(m=E)}return m}findItemWithItemForSwapping(c){let E,m=this.grid.length-1;for(;m>-1;m--)if(E=this.grid[m],E.$item!==c&&Y.checkCollisionTwoItemsForSwaping(E.$item,c))return E;return!1}previewStyle(c=!1){this.movingItem?(this.compact&&c&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}static getNewArrayLength(c,m,E){const k=Math.max(c,Math.floor(m/E));return k<0?0:Number.isFinite(k)?Math.floor(k):0}}return Y.\u0275fac=function(c){return new(c||Y)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.sBO),r.Y36(r.R0b))},Y.\u0275cmp=r.Xpm({type:Y,selectors:[["gridster"]],inputs:{options:"options"},features:[r.TTD],ngContentSelectors:v,decls:4,vars:4,consts:[["class","gridster-column",3,"ngStyle",4,"ngFor","ngForOf"],["class","gridster-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"],[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"]],template:function(c,m){1&c&&(r.F$t(),r.YNc(0,C,1,1,"div",0),r.YNc(1,p,1,1,"div",1),r.Hsn(2),r._UZ(3,"gridster-preview",2)),2&c&&(r.Q6J("ngForOf",m.gridColumns),r.xp6(1),r.Q6J("ngForOf",m.gridRows),r.xp6(2),r.Q6J("gridRenderer",m.gridRenderer)("previewStyle$",m.previewStyle$))},directives:[ce,N.sg,N.PC],styles:["gridster{position:relative;box-sizing:border-box;background:grey;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}\n"],encapsulation:2}),Y})();class se{constructor(_){this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=_,this.gridster=_.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(_,c){if(this.gridster.$options.pushItems&&!c){this.pushedItemsOrder=[],this.iteration=0;const m=this.push(this.gridsterItem,_);return m||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],m}return!1}restoreTempItems(){let _=this.pushedItemsTemp.length-1;for(;_>-1;_--)this.removeFromTempPushed(this.pushedItemsTemp[_])}restoreItems(){let _=0;const c=this.pushedItems.length;let m;for(;_<c;_++)m=this.pushedItems[_],m.$item.x=m.item.x||0,m.$item.y=m.item.y||0,m.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let _=0;const c=this.pushedItems.length;let m;for(;_<c;_++)m=this.pushedItems[_],m.checkItemChanges(m.$item,m.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let _=this.pushedItems.length-1,c=!1;for(;_>-1;_--)this.checkPushedItem(this.pushedItems[_],_)&&(c=!0);c&&this.checkPushBack()}push(_,c){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(_.$item)||""===c)return!1;const m=this.gridster.findItemsWithItem(_.$item),E=c===this.fromNorth||c===this.fromWest;m.sort((he,Ce)=>E?Ce.$item.y-he.$item.y||Ce.$item.x-he.$item.x:he.$item.y-Ce.$item.y||he.$item.x-Ce.$item.x);let J,k=0,_e=!0;const fe=[];for(;k<m.length;k++){if(J=m[k],J===this.gridsterItem)continue;if(!J.canBeDragged()){_e=!1;break}const he=this.pushedItemsTemp.indexOf(J);if(he>-1&&this.pushedItemsTempPath[he].length>10){_e=!1;break}if(this.tryPattern[c][0].call(this,J,_))this.pushedItemsOrder.push(J),fe.push(J);else if(this.tryPattern[c][1].call(this,J,_))this.pushedItemsOrder.push(J),fe.push(J);else if(this.tryPattern[c][2].call(this,J,_))this.pushedItemsOrder.push(J),fe.push(J);else{if(!this.tryPattern[c][3].call(this,J,_)){_e=!1;break}this.pushedItemsOrder.push(J),fe.push(J)}}if(!_e&&(k=this.pushedItemsOrder.lastIndexOf(fe[0]),k>-1)){let he=this.pushedItemsOrder.length-1;for(;he>=k;he--)J=this.pushedItemsOrder[he],this.pushedItemsOrder.pop(),this.removeFromTempPushed(J),this.removeFromPushedItem(J)}return this.iteration++,_e}trySouth(_,c){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(_),_.$item.y=c.$item.y+c.$item.rows,this.push(_,this.fromNorth)?(_.setSize(),this.addToPushed(_),!0):(this.removeFromTempPushed(_),!1))}tryNorth(_,c){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(_),_.$item.y=c.$item.y-_.$item.rows,this.push(_,this.fromSouth)?(_.setSize(),this.addToPushed(_),!0):(this.removeFromTempPushed(_),!1))}tryEast(_,c){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(_),_.$item.x=c.$item.x+c.$item.cols,this.push(_,this.fromWest)?(_.setSize(),this.addToPushed(_),!0):(this.removeFromTempPushed(_),!1))}tryWest(_,c){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(_),_.$item.x=c.$item.x-_.$item.cols,this.push(_,this.fromEast)?(_.setSize(),this.addToPushed(_),!0):(this.removeFromTempPushed(_),!1))}addToTempPushed(_){let c=this.pushedItemsTemp.indexOf(_);-1===c&&(c=this.pushedItemsTemp.push(_)-1,this.pushedItemsTempPath[c]=[]),this.pushedItemsTempPath[c].push({x:_.$item.x,y:_.$item.y})}removeFromTempPushed(_){const c=this.pushedItemsTemp.indexOf(_),m=this.pushedItemsTempPath[c].pop();!m||(_.$item.x=m.x,_.$item.y=m.y,_.setSize(),this.pushedItemsTempPath[c].length||(this.pushedItemsTemp.splice(c,1),this.pushedItemsTempPath.splice(c,1)))}addToPushed(_){if(this.pushedItems.indexOf(_)<0)this.pushedItems.push(_),this.pushedItemsPath.push([{x:_.item.x||0,y:_.item.y||0},{x:_.$item.x,y:_.$item.y}]);else{const c=this.pushedItems.indexOf(_);this.pushedItemsPath[c].push({x:_.$item.x,y:_.$item.y})}}removeFromPushed(_){_>-1&&(this.pushedItems.splice(_,1),this.pushedItemsPath.splice(_,1))}removeFromPushedItem(_){const c=this.pushedItems.indexOf(_);c>-1&&(this.pushedItemsPath[c].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(c,1),this.pushedItemsPath.splice(c,1)))}checkPushedItem(_,c){const m=this.pushedItemsPath[c];let k,J,_e,E=m.length-2,fe=!1;for(;E>-1;E--)k=m[E],J=_.$item.x,_e=_.$item.y,_.$item.x=k.x,_.$item.y=k.y,this.gridster.findItemWithItem(_.$item)?(_.$item.x=J,_.$item.y=_e):(_.setSize(),m.splice(E+1,m.length-E-1),fe=!0);return m.length<2&&this.removeFromPushed(c),fe}}function ct(Y,_,c,m,E,k,J,_e,fe,he){V=Y.$options.scrollSensitivity,j=Y.$options.scrollSpeed,ie=Y.el,me=fe,Ie=he;const Ce=ie.offsetWidth,Ze=ie.scrollLeft,Be=ie.scrollTop,Le=c-Be,We=ie.offsetHeight+Be-c-E,{clientX:qe,clientY:we}=k;if(!Y.$options.disableScrollVertical)if(J.clientY<we&&We<V){if(at(),me&&Ie&&!Ie.south||je)return;je=_t(1,_e,J)}else if(J.clientY>we&&Be>0&&Le<V){if(gt(),me&&Ie&&!Ie.north||Ee)return;Ee=_t(-1,_e,J)}else J.clientY!==we&&st();const it=_-Ze;if(!Y.$options.disableScrollHorizontal)if(J.clientX<qe&&Ze+Ce-_-m<=V){if(pt(),me&&Ie&&!Ie.east||Ge)return;Ge=Re(1,_e,J)}else if(J.clientX>qe&&Ze>0&&it<V){if(ut(),me&&Ie&&!Ie.west||ze)return;ze=Re(-1,_e,J)}else J.clientX!==qe&&rt()}function _t(Y,_,c){let m=c.clientY;return window.setInterval(()=>{(!ie||-1===Y&&ie.scrollTop-j<0)&&st(),ie.scrollTop+=Y*j,m+=Y*j,_({clientX:c.clientX,clientY:m})},50)}function Re(Y,_,c){let m=c.clientX;return window.setInterval(()=>{(!ie||-1===Y&&ie.scrollLeft-j<0)&&rt(),ie.scrollLeft+=Y*j,m+=Y*j,_({clientX:m,clientY:c.clientY})},50)}function Xe(){rt(),st(),ie=null}function rt(){ut(),pt()}function st(){at(),gt()}function ut(){Ge&&(clearInterval(Ge),Ge=0)}function pt(){ze&&(clearInterval(ze),ze=0)}function gt(){je&&(clearInterval(je),je=0)}function at(){Ee&&(clearInterval(Ee),Ee=0)}class lt{constructor(_){this.gridsterItem=_,this.gridster=_.gridster}destroy(){this.gridster=this.gridsterItem=this.swapedItem=null}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){const _=this.swapedItem.$item.x,c=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=_,this.swapedItem.$item.y=c):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(_){let c;if(c=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(_.$item):this.gridster.checkCollision(_.$item),c&&!0!==c&&c.canBeDragged()){const m=c,E=m.$item.x,k=m.$item.y,J=_.$item.x,_e=_.$item.y,fe=J-E,he=_e-k;m.$item.x=_.item.x-fe,m.$item.y=_.item.y-he,_.$item.x=m.item.x+fe,_.$item.y=m.item.y+he,this.gridster.checkCollision(m.$item)||this.gridster.checkCollision(_.$item)?(_.$item.x=J,_.$item.y=_e,m.$item.x=E,m.$item.y=k):(m.setSize(),this.swapedItem=m,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}var ye=(()=>{return(Y=ye||(ye={})).UP="UP",Y.DOWN="DOWN",Y.LEFT="LEFT",Y.RIGHT="RIGHT",ye;var Y})();class bt{constructor(_,c,m){this.zone=m,this.collision=!1,this.dragMove=E=>{E.stopPropagation(),E.preventDefault(),q.checkTouchEvent(E);let k=this.getDirections(E);this.gridster.options.enableBoundaryControl&&(k.includes(ye.UP)&&this.gridsterItem.el.getBoundingClientRect().top<=this.gridster.el.getBoundingClientRect().top+this.margin&&(k=k.filter(J=>J!=ye.UP),E=new MouseEvent(E.type,{clientX:E.clientX,clientY:this.lastMouse.clientY})),k.includes(ye.LEFT)&&this.gridsterItem.el.getBoundingClientRect().left<=this.gridster.el.getBoundingClientRect().left+this.margin&&(k=k.filter(J=>J!=ye.LEFT),E=new MouseEvent(E.type,{clientX:this.lastMouse.clientX,clientY:E.clientY})),k.includes(ye.RIGHT)&&this.gridsterItem.el.getBoundingClientRect().right>=this.gridster.el.getBoundingClientRect().right-this.margin&&(k=k.filter(J=>J!=ye.RIGHT),E=new MouseEvent(E.type,{clientX:this.lastMouse.clientX,clientY:E.clientY})),k.includes(ye.DOWN)&&this.gridsterItem.el.getBoundingClientRect().bottom>=this.gridster.el.getBoundingClientRect().bottom-this.margin&&(k=k.filter(J=>J!=ye.DOWN),E=new MouseEvent(E.type,{clientX:E.clientX,clientY:this.lastMouse.clientY}))),k.length&&(this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,ct(this.gridster,this.left,this.top,this.width,this.height,E,this.lastMouse,this.calculateItemPositionFromMousePosition),this.calculateItemPositionFromMousePosition(E))},this.calculateItemPositionFromMousePosition=E=>{this.gridster.options.scale?this.calculateItemPositionWithScale(E,this.gridster.options.scale):this.calculateItemPositionWithoutScale(E),this.calculateItemPosition(),this.lastMouse.clientX=E.clientX,this.lastMouse.clientY=E.clientY,this.zone.run(()=>{this.gridster.updateGrid()})},this.dragStop=E=>{E.stopPropagation(),E.preventDefault(),Xe(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,E)).then(this.makeDrag,this.cancelDrag):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})},this.cancelDrag=()=>{this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)},this.makeDrag=()=>{this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&!0!==this.collision&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)},this.dragStartDelay=E=>{if(E.target.classList.contains("gridster-item-resizable-handler")||q.checkContentClassForEvent(this.gridster,E))return;if(q.checkTouchEvent(E),!this.gridster.$options.draggable.delayStart)return void this.dragStart(E);const J=setTimeout(()=>{this.dragStart(E),Le()},this.gridster.$options.draggable.delayStart),_e=this.gridsterItem.renderer.listen("document","mouseup",Le),fe=this.gridsterItem.renderer.listen("document","mouseleave",Le),he=this.gridsterItem.renderer.listen("window","blur",Le),Ce=this.gridsterItem.renderer.listen("document","touchmove",function Be(We){q.checkTouchEvent(We),(Math.abs(We.clientX-E.clientX)>9||Math.abs(We.clientY-E.clientY)>9)&&Le()}),Pe=this.gridsterItem.renderer.listen("document","touchend",Le),Ze=this.gridsterItem.renderer.listen("document","touchcancel",Le);function Le(){clearTimeout(J),he(),_e(),fe(),Ce(),Pe(),Ze()}},this.gridsterItem=_,this.gridster=c,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),this.gridsterItem=this.gridster=this.collision=null,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(_){_.which&&1!==_.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,_),_.stopPropagation(),_.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=_.clientX,this.originalClientY=_.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.diffLeft=this.gridster.$options.dirType===x.RTL?_.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:_.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=_.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new se(this.gridsterItem),this.swap=new lt(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}calculateItemPositionWithScale(_,c){this.left=this.gridster.$options.dirType===x.RTL?this.gridster.el.scrollWidth-this.originalClientX+(_.clientX-this.originalClientX)/c+this.diffLeft:this.originalClientX+(_.clientX-this.originalClientX)/c+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(_.clientY-this.originalClientY)/c+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(_){this.left=this.gridster.$options.dirType===x.RTL?this.gridster.el.scrollWidth-_.clientX+this.diffLeft:_.clientX+this.offsetLeft-this.diffLeft,this.top=_.clientY+this.offsetTop-this.diffTop}calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){const _=this.path[this.path.length-1];let c="";_.x<this.gridsterItem.$item.x?c=this.push.fromWest:_.x>this.gridsterItem.$item.x?c=this.push.fromEast:_.y<this.gridsterItem.$item.y?c=this.push.fromNorth:_.y>this.gridsterItem.$item.y&&(c=this.push.fromSouth),this.push.pushItems(c,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}this.gridster.previewStyle(!0)}toggle(){const _=this.gridsterItem.canBeDragged();!this.enabled&&_?(this.enabled=!this.enabled,this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartDelay),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartDelay)):this.enabled&&!_&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}getDirections(_){const c=[];return this.lastMouse.clientY>_.clientY&&c.push(ye.UP),this.lastMouse.clientY<_.clientY&&c.push(ye.DOWN),this.lastMouse.clientX<_.clientX&&c.push(ye.RIGHT),this.lastMouse.clientX>_.clientX&&c.push(ye.LEFT),c}}class xt{constructor(_){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=_,this.gridster=_.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(_){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,_)}restoreItems(){let _=0;const c=this.pushedItems.length;let m;for(;_<c;_++)m=this.pushedItems[_],m.$item.x=m.item.x||0,m.$item.y=m.item.y||0,m.$item.cols=m.item.cols||1,m.$item.row=m.item.row||1,m.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let _=0;const c=this.pushedItems.length;let m;for(;_<c;_++)m=this.pushedItems[_],m.checkItemChanges(m.$item,m.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let _=this.pushedItems.length-1,c=!1;for(;_>-1;_--)this.checkPushedItem(this.pushedItems[_],_)&&(c=!0);c&&this.checkPushBack()}push(_,c){const m=this.gridster.checkCollision(_.$item);if(m&&!0!==m&&m!==this.gridsterItem&&m.canBeResized()){if(this.tryPattern[c].call(this,m,_,c))return!0}else if(!1===m)return!0;return!1}trySouth(_,c,m){const E=_.$item.y,k=_.$item.rows;return _.$item.y=c.$item.y+c.$item.rows,_.$item.rows=k+E-_.$item.y,this.gridster.checkCollisionTwoItems(_.$item,c.$item)||this.gridster.checkGridCollision(_.$item)?(_.$item.y=E,_.$item.rows=k,!1):(_.setSize(),this.addToPushed(_),this.push(c,m),!0)}tryNorth(_,c,m){const E=_.$item.rows;return _.$item.rows=c.$item.y-_.$item.y,this.gridster.checkCollisionTwoItems(_.$item,c.$item)||this.gridster.checkGridCollision(_.$item)?(_.$item.rows=E,!1):(_.setSize(),this.addToPushed(_),this.push(c,m),!0)}tryEast(_,c,m){const E=_.$item.x,k=_.$item.cols;return _.$item.x=c.$item.x+c.$item.cols,_.$item.cols=k+E-_.$item.x,this.gridster.checkCollisionTwoItems(_.$item,c.$item)||this.gridster.checkGridCollision(_.$item)?(_.$item.x=E,_.$item.cols=k,!1):(_.setSize(),this.addToPushed(_),this.push(c,m),!0)}tryWest(_,c,m){const E=_.$item.cols;return _.$item.cols=c.$item.x-_.$item.x,this.gridster.checkCollisionTwoItems(_.$item,c.$item)||this.gridster.checkGridCollision(_.$item)?(_.$item.cols=E,!1):(_.setSize(),this.addToPushed(_),this.push(c,m),!0)}addToPushed(_){if(this.pushedItems.indexOf(_)<0)this.pushedItems.push(_),this.pushedItemsPath.push([{x:_.item.x||0,y:_.item.y||0,cols:_.item.cols||0,rows:_.item.rows||0},{x:_.$item.x,y:_.$item.y,cols:_.$item.cols,rows:_.$item.rows}]);else{const c=this.pushedItems.indexOf(_);this.pushedItemsPath[c].push({x:_.$item.x,y:_.$item.y,cols:_.$item.cols,rows:_.$item.rows})}}removeFromPushed(_){_>-1&&(this.pushedItems.splice(_,1),this.pushedItemsPath.splice(_,1))}checkPushedItem(_,c){const m=this.pushedItemsPath[c];let k,J,_e,fe,he,E=m.length-2;for(;E>-1;E--)k=m[E],J=_.$item.x,_e=_.$item.y,fe=_.$item.cols,he=_.$item.rows,_.$item.x=k.x,_.$item.y=k.y,_.$item.cols=k.cols,_.$item.rows=k.rows,this.gridster.findItemWithItem(_.$item)?(_.$item.x=J,_.$item.y=_e,_.$item.cols=fe,_.$item.rows=he):(_.setSize(),m.splice(E+1,m.length-1-E));return m.length<2&&(this.removeFromPushed(c),!0)}}class Ot{constructor(_,c,m){this.zone=m,this.directionFunction=null,this.dragMove=E=>{if(null===this.directionFunction)throw new Error("The `directionFunction` has not been set before calling `dragMove`.");E.stopPropagation(),E.preventDefault(),q.checkTouchEvent(E),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,ct(this.gridster,this.left,this.top,this.width,this.height,E,this.lastMouse,this.directionFunction,!0,this.resizeEventScrollType);const k=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(E.clientX-this.originalClientX)/k,clientY:this.originalClientY+(E.clientY-this.originalClientY)/k}),this.lastMouse.clientX=E.clientX,this.lastMouse.clientY=E.clientY,this.zone.run(()=>{this.gridster.updateGrid()})},this.dragStop=E=>{E.stopPropagation(),E.preventDefault(),Xe(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,E)).then(this.makeResize,this.cancelResize):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})},this.cancelResize=()=>{this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null},this.makeResize=()=>{this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null},this.handleNorth=E=>{if(this.top=E.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight,this.top=this.bottom-this.minHeight),this.newPosition=this.gridster.pixelsToPositionY(this.top+this.margin,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)},this.handleWest=E=>{if(this.left=(this.gridster.$options.dirType===x.RTL?this.originalClientX+(this.originalClientX-E.clientX):E.clientX)+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width&&(this.width=this.minWidth,this.left=this.right-this.minWidth),this.newPosition=this.gridster.pixelsToPositionX(this.left+this.margin,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)},this.handleSouth=E=>{if(this.height=E.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.newPosition=this.gridster.pixelsToPositionY(this.bottom,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.rows=this.itemBackup[3],void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)},this.handleEast=E=>{if(this.width=(this.gridster.$options.dirType===x.RTL?this.originalClientX+(this.originalClientX-E.clientX):E.clientX)+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.newPosition=this.gridster.pixelsToPositionX(this.right,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.cols=this.itemBackup[2],void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)},this.handleNorthWest=E=>{this.handleNorth(E),this.handleWest(E)},this.handleNorthEast=E=>{this.handleNorth(E),this.handleEast(E)},this.handleSouthWest=E=>{this.handleSouth(E),this.handleWest(E)},this.handleSouthEast=E=>{this.handleSouth(E),this.handleEast(E)},this.gridsterItem=_,this.gridster=c,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={west:!1,east:!1,north:!1,south:!1}}destroy(){var _;null===(_=this.gridster)||void 0===_||_.previewStyle(),this.gridster=this.gridsterItem=null}dragStart(_){if(_.which&&1!==_.which)return;this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,_),_.stopPropagation(),_.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=_.clientX,this.lastMouse.clientY=_.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=_.clientX,this.originalClientY=_.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=_.clientX+this.offsetLeft-this.left,this.diffRight=_.clientX+this.offsetLeft-this.right,this.diffTop=_.clientY+this.offsetTop-this.top,this.diffBottom=_.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new se(this.gridsterItem),this.pushResize=new xt(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid();const{classList:c}=_.target;c.contains("handle-n")?(this.resizeEventScrollType.north=!0,this.directionFunction=this.handleNorth):c.contains("handle-w")?this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):c.contains("handle-s")?(this.resizeEventScrollType.south=!0,this.directionFunction=this.handleSouth):c.contains("handle-e")?this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):c.contains("handle-nw")?this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):c.contains("handle-ne")?this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):c.contains("handle-sw")?this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):c.contains("handle-se")&&(this.gridster.$options.dirType===x.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast))}toggle(){this.resizeEnabled=this.gridsterItem.canBeResized()}dragStartDelay(_){if(q.checkTouchEvent(_),!this.gridster.$options.resizable.delayStart)return void this.dragStart(_);const c=setTimeout(()=>{this.dragStart(_),Ce()},this.gridster.$options.resizable.delayStart),{cancelMouse:m,cancelMouseLeave:E,cancelOnBlur:k,cancelTouchMove:J,cancelTouchEnd:_e,cancelTouchCancel:fe}=this.zone.runOutsideAngular(()=>({cancelMouse:this.gridsterItem.renderer.listen("document","mouseup",Ce),cancelMouseLeave:this.gridsterItem.renderer.listen("document","mouseleave",Ce),cancelOnBlur:this.gridsterItem.renderer.listen("window","blur",Ce),cancelTouchMove:this.gridsterItem.renderer.listen("document","touchmove",he),cancelTouchEnd:this.gridsterItem.renderer.listen("document","touchend",Ce),cancelTouchCancel:this.gridsterItem.renderer.listen("document","touchcancel",Ce)}));function he(Pe){q.checkTouchEvent(Pe),(Math.abs(Pe.clientX-_.clientX)>9||Math.abs(Pe.clientY-_.clientY)>9)&&Ce()}function Ce(){clearTimeout(c),k(),m(),E(),J(),_e(),fe()}}setItemTop(_){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,_)}setItemLeft(_){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,_,this.top)}setItemHeight(_){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",_+"px")}setItemWidth(_){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",_+"px")}}let Lt=(()=>{class Y{constructor(c,m,E,k){this.renderer=E,this.zone=k,this.itemInit=new r.vpe,this.itemChange=new r.vpe,this.itemResize=new r.vpe,this.el=c.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=m,this.drag=new bt(this,m,this.zone),this.resize=new Ot(this,m,this.zone)}get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(c){c.item&&(this.updateOptions(),this.init||this.gridster.calculateLayout$.next()),c.item&&c.item.previousValue&&this.setSize()}updateOptions(){this.$item=q.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0})}ngOnDestroy(){this.gridster.removeItem(this),this.drag.destroy(),this.resize.destroy(),this.gridster=this.drag=this.resize=null}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){const m=this.$item.x*this.gridster.curColWidth,E=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,k=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=this.$item.y*this.gridster.curRowHeight,this.left=m,!this.init&&E>0&&k>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(E!==this.width||k!==this.height)&&(this.width=E,this.height=k,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(c,m){c.rows===m.rows&&c.cols===m.cols&&c.x===m.x&&c.y===m.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=m.x||0,this.$item.y=m.y||0,this.$item.cols=m.cols||1,this.$item.rows=m.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayout$.next(),this.itemChanged()))}canBeDragged(){const c=this.gridster.$options.draggable.enabled;return!this.gridster.mobile&&c&&(void 0===this.$item.dragEnabled?c:this.$item.dragEnabled)}canBeResized(){const c=this.gridster.$options.resizable.enabled;return!this.gridster.mobile&&c&&(void 0===this.$item.resizeEnabled?c:this.$item.resizeEnabled)}bringToFront(c){if(c&&c<=0)return;const m=this.getLayerIndex(),E=this.gridster.$options.maxLayerIndex;if(m<E){const k=c?m+c:E;this.item.layerIndex=this.$item.layerIndex=k>E?E:k}}sendToBack(c){if(c&&c<=0)return;const m=this.getLayerIndex();if(m>0){const E=c?m-c:0;this.item.layerIndex=this.$item.layerIndex=E<0?0:E}}getLayerIndex(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}}return Y.\u0275fac=function(c){return new(c||Y)(r.Y36(r.SBq),r.Y36(te),r.Y36(r.Qsj),r.Y36(r.R0b))},Y.\u0275cmp=r.Xpm({type:Y,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(c,m){2&c&&r.Udp("z-index",m.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},features:[r.TTD],ngContentSelectors:v,decls:9,vars:8,consts:[["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(c,m){1&c&&(r.F$t(),r.Hsn(0),r.YNc(1,g,1,0,"div",0),r.YNc(2,L,1,0,"div",1),r.YNc(3,y,1,0,"div",2),r.YNc(4,D,1,0,"div",3),r.YNc(5,G,1,0,"div",4),r.YNc(6,b,1,0,"div",5),r.YNc(7,A,1,0,"div",6),r.YNc(8,W,1,0,"div",7)),2&c&&(r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.s&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.e&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.n&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.w&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.se&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.ne&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.sw&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.nw&&m.resize.resizeEnabled))},directives:[N.O5],styles:["gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:white;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}\n"],encapsulation:2}),Y})(),Ne=(()=>{class Y{}return Y.\u0275fac=function(c){return new(c||Y)},Y.\u0275mod=r.oAB({type:Y}),Y.\u0275inj=r.cJS({imports:[[N.ez]]}),Y})()}}]);