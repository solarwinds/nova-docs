"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[88],{96088:(Q,O,s)=>{s.r(O),s.d(O,{TableWidgetPrototypeModule:()=>K});var v=s(69808),m=s(40520),W=s(11420),l=s(30652),e=s(49018),P=s(27790),c=s(35898),p=s(47794),S=s(68052),_=s(51454),E=s(37990),y=s(51933),h=s(18631),u=s(22767),B=s(12498),$=s.n(B),b=s(77579),I=s(95698),A=s(82722),t=s(5e3),X=s(90733),M=s.n(X),Y=s(34793),w=s.n(Y),z=s(15439),f=s.n(z);const x={widget1:{cols:5,rows:6,y:0,x:0},widget2:{cols:7,rows:6,y:0,x:5},widget3:{cols:6,rows:6,y:6,x:0},widget4:{cols:6,rows:6,y:6,x:6},widget5:{cols:7,rows:6,y:12,x:5},widget6:{cols:5,rows:6,y:12,x:0},widget7:{cols:6,rows:6,y:18,x:0},widget8:{cols:6,rows:6,y:18,x:6}},C=[{id:"widget1",type:"table",pizzagna:{[e.xW5.Configuration]:{[e.XMI]:{providers:{[e.Muk.InteractionHandler]:{providerId:e.DJm}}},header:{properties:{title:"Table Widget!",subtitle:"Basic table widget",collapsible:!0}},table:{providers:{[e.Muk.DataSource]:{providerId:h.n.providerId}},properties:{configuration:{interactive:!0,columns:[{id:"column1",label:"No.",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Status",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"status"}}}}],sorterConfiguration:{descendantSorting:!1,sortBy:"column1"},hasVirtualScroll:!0,searchConfiguration:{enabled:!0}}}}}}},{id:"widget2",type:"proportional",pizzagna:{[e.xW5.Configuration]:{[e.XMI]:{providers:{[e.Muk.InteractionHandler]:{providerId:e.DJm,properties:{url:"${data.link}"}}}},header:{properties:{title:"Proportional Widget!",subtitle:"Proportional widget with legend formatters"}},chart:{providers:{[e.Muk.DataSource]:{providerId:p.Q.providerId},[e.Muk.Adapter]:{properties:{[e.Muk.DataSource]:{properties:{isEuropeOnly:!1}}}}},properties:{configuration:{interactive:!0,chartDonutContentLabel:"Some label",chartDonutContentIcon:"printer",chartOptions:{type:e.EMX.VerticalBarChart,legendPlacement:e.woB.Right},chartColors:["var(--nui-color-chart-eight)","var(--nui-color-chart-nine)","var(--nui-color-chart-ten)"]}}}}}},{id:"widget3",type:"timeseries",pizzagna:{[e.xW5.Configuration]:{[e.XMI]:{providers:{[e.Muk.DataSource]:{providerId:u.wi.providerId},[e.Muk.InteractionHandler]:{providerId:e.DJm}}},header:{properties:{title:"Timeseries Widget!",subtitle:"Basic timeseries widget"}},chart:{providers:{[e.Muk.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:e.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",chartColors:["var(--nui-color-chart-eight)","var(--nui-color-chart-nine)","var(--nui-color-chart-ten)"]}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},minDate:f()().subtract(10,"days").format(),maxDate:f()().format()}}}}},{id:"widget4",type:"table",pizzagna:{[e.xW5.Configuration]:{[e.XMI]:{providers:{[e.Muk.InteractionHandler]:{providerId:e.DJm}}},header:{properties:{title:"Table Widget!",subtitle:"Basic table widget",collapsible:!0}},table:{providers:{[e.Muk.DataSource]:{providerId:h.n.providerId}},properties:{configuration:{interactive:!0,columns:[{id:"column1",label:"No.",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Status",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"status"}}}}],sorterConfiguration:{descendantSorting:!1,sortBy:"column1"},hasVirtualScroll:!0,searchConfiguration:{enabled:!0}}}}}}},{id:"widget5",type:"proportional",pizzagna:{[e.xW5.Configuration]:{[e.XMI]:{providers:{[e.Muk.InteractionHandler]:{providerId:e.DJm,properties:{url:"${data.link}"}}}},header:{properties:{title:"Proportional Widget!",subtitle:"Proportional widget with legend formatters"}},chart:{providers:{[e.Muk.DataSource]:{providerId:p.Q.providerId},[e.Muk.Adapter]:{properties:{[e.Muk.DataSource]:{properties:{isEuropeOnly:!1}}}}},properties:{configuration:{interactive:!0,chartDonutContentLabel:"Some label",chartDonutContentIcon:"printer",chartOptions:{type:e.EMX.VerticalBarChart,legendPlacement:e.woB.Right},chartColors:["var(--nui-color-chart-eight)","var(--nui-color-chart-nine)","var(--nui-color-chart-ten)"]}}}}}},{id:"widget6",type:"table",pizzagna:{[e.xW5.Configuration]:{[e.XMI]:{providers:{[e.Muk.InteractionHandler]:{providerId:e.DJm}}},header:{properties:{title:"Table Widget!",subtitle:"Basic table widget",collapsible:!0}},table:{providers:{[e.Muk.DataSource]:{providerId:h.n.providerId}},properties:{configuration:{interactive:!0,columns:[{id:"column1",label:"No.",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Status",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"status"}}}}],sorterConfiguration:{descendantSorting:!1,sortBy:"column1"},hasVirtualScroll:!0,searchConfiguration:{enabled:!0}}}}}}},{id:"widget7",type:"timeseries",pizzagna:{[e.xW5.Configuration]:{[e.XMI]:{providers:{[e.Muk.DataSource]:{providerId:u.wi.providerId},[e.Muk.InteractionHandler]:{providerId:e.DJm}}},header:{properties:{title:"Timeseries Widget!",subtitle:"Basic timeseries widget"}},chart:{providers:{[e.Muk.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:e.woB.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",chartColors:["var(--nui-color-chart-eight)","var(--nui-color-chart-nine)","var(--nui-color-chart-ten)"]}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},minDate:f()().subtract(10,"days").format(),maxDate:f()().format()}}}}},{id:"widget8",type:"table",pizzagna:{[e.xW5.Configuration]:{[e.XMI]:{providers:{[e.Muk.InteractionHandler]:{providerId:e.DJm}}},header:{properties:{title:"Table Widget!",subtitle:"Basic table widget",collapsible:!0}},table:{providers:{[e.Muk.DataSource]:{providerId:h.n.providerId}},properties:{configuration:{interactive:!0,columns:[{id:"column1",label:"No.",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Status",isActive:!0,formatter:{componentType:e.aDR.lateLoadKey,properties:{dataFieldIds:{value:"status"}}}}],sorterConfiguration:{descendantSorting:!1,sortBy:"column1"},hasVirtualScroll:!0,searchConfiguration:{enabled:!0}}}}}}}];function F(r,d){if(1&r&&(t.TgZ(0,"div",3)(1,"div",4),t._uU(2),t.qZA()()),2&r){const i=d.item;t.xp6(2),t.hij(" ",i.title," ")}}let N=(()=>{class r{constructor(i){this.widgetTypesService=i,this.widgetSelected=new t.vpe,this.widgetItems=[]}ngOnInit(){const i=new v.rS;this.widgetItems=C.map(o=>({title:i.transform(o.type),widget:this.widgetTypesService.mergeWithWidgetType(o)})),C.forEach(o=>{this.addUnconfiguredWidgetWithConfigLayer(o)})}addUnconfiguredWidget(i){const o=(new v.rS).transform(i);this.widgetItems.push({title:`Unconfigured ${o}`,widget:{id:`unconfigured${o}`,type:i,metadata:{needsConfiguration:!0},pizzagna:M()(this.widgetTypesService.getWidgetType(i).widget)}}),w()(this.widgetItems[this.widgetItems.length-1].widget.pizzagna,`${e.xW5.Structure}.header.properties.title`,`Unconfigured ${o}`)}addUnconfiguredWidgetWithConfigLayer(i){const o=(new v.rS).transform(i.type);this.widgetItems.push({title:`Unconfigured ${o} With Config Layer`,widget:Object.assign(Object.assign({},M()(this.widgetTypesService.mergeWithWidgetType(i))),{id:`unconfiguredWithConfigLayer${o}`,metadata:{needsConfiguration:!0}})}),w()(this.widgetItems[this.widgetItems.length-1].widget.pizzagna,`${e.xW5.Configuration}.header.properties.title`,`Unconfigured ${o} With Config Layer`)}onSelect(i){this.widgetSelected.emit(i[0].widget),this.widgetSelection=i}}return r.lateLoadKey="AcmeCloneSelectionComponent",r.\u0275fac=function(i){return new(i||r)(t.Y36(e.xTe))},r.\u0275cmp=t.Xpm({type:r,selectors:[["acme-clone-selection"]],outputs:{widgetSelected:"widgetSelected"},decls:4,vars:3,consts:[[1,"nui-widget-cloner"],["selectionMode","singleWithRequiredSelection",3,"itemsSource","selection","repeatItemTemplateRef","selectionChange"],["widgetClonerItem",""],[1,"nui-widget-cloner__item","d-flex","pt-2","pb-2","align-items-center"],[1,"text-info","ml-3"]],template:function(i,o){if(1&i&&(t.TgZ(0,"div",0)(1,"nui-repeat",1),t.NdJ("selectionChange",function(a){return o.onSelect(a)}),t.qZA()(),t.YNc(2,F,3,1,"ng-template",null,2,t.W1O)),2&i){const n=t.MAs(3);t.xp6(1),t.Q6J("itemsSource",o.widgetItems)("selection",o.widgetSelection)("repeatItemTemplateRef",n)}},directives:[l.$N6],styles:[".nui-widget-cloner__item[_ngcontent-%COMP%]{height:60px}"]}),r})();function G(r,d){if(1&r&&(t.TgZ(0,"div",3)(1,"div",4),t._uU(2),t.qZA()()),2&r){const i=d.item;t.xp6(2),t.hij(" ",i.title," ")}}let k=(()=>{class r extends N{constructor(i){super(i)}ngOnInit(){const i=new v.rS;this.widgetItems=C.map(o=>({title:i.transform(o.type),widget:this.widgetTypesService.mergeWithWidgetType(o)}))}}return r.lateLoadKey="AcmeCloneSelectionComponent",r.\u0275fac=function(i){return new(i||r)(t.Y36(e.xTe))},r.\u0275cmp=t.Xpm({type:r,selectors:[["acme-clone-selection"]],features:[t.qOj],decls:4,vars:3,consts:[[1,"nui-widget-cloner"],["selectionMode","singleWithRequiredSelection",3,"itemsSource","selection","repeatItemTemplateRef","selectionChange"],["widgetClonerItem",""],[1,"nui-widget-cloner__item","d-flex","pt-2","pb-2","align-items-center"],[1,"text-info","ml-3"]],template:function(i,o){if(1&i&&(t.TgZ(0,"div",0)(1,"nui-repeat",1),t.NdJ("selectionChange",function(a){return o.onSelect(a)}),t.qZA()(),t.YNc(2,G,3,1,"ng-template",null,2,t.W1O)),2&i){const n=t.MAs(3);t.xp6(1),t.Q6J("itemsSource",o.widgetItems)("selection",o.widgetSelection)("repeatItemTemplateRef",n)}},directives:[l.$N6],styles:[".nui-widget-cloner__item[_ngcontent-%COMP%]{height:60px}"]}),r})(),D=(()=>{class r{constructor(i){this.toastService=i,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=(o,n)=>{const a=new b.x;return setTimeout(()=>{if(this.allowSubmit)a.next(o);else{const g=$localize`Submit failed.`;this.toastService.error({title:g}),a.error(g)}},1e3),a.asObservable()},this.tryRemove=o=>{const n=new b.x;return setTimeout(()=>{if(this.allowRemoval)n.next(o);else{const a=$localize`Widget removal failed.`;this.toastService.error({title:a}),n.error(a)}},200),n.asObservable()},this.toastService.setConfig({timeOut:2e3})}}return r.\u0275fac=function(i){return new(i||r)(t.LFG(l.klp))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();var J=s(34575),Z=s(44994);const H=[{path:"",component:(()=>{class r{constructor(i,o,n,a){this.providerRegistry=i,this.submitHandler=o,this.widgetTypesService=n,this.widgetClonerService=a,this.dashboard={positions:{},widgets:{}},this.gridsterConfig={minCols:12,maxCols:12,minRows:12},this.editMode=!1,this.destroy$=new b.x,this.providerRegistry.setProviders({[c.i.providerId]:{provide:e.Fk3,useClass:c.i,deps:[m.eN]},[c.L2.providerId]:{provide:e.Fk3,useClass:c.L2,deps:[m.eN]},[c.sR.providerId]:{provide:e.Fk3,useClass:c.sR,deps:[]},[p.Q.providerId]:{provide:e.Fk3,useClass:p.Q,deps:[m.eN]},[p.s.providerId]:{provide:e.Fk3,useClass:p.s,deps:[]},[S.g.providerId]:{provide:e.Fk3,useClass:S.g,deps:[l.mQy,m.eN]},[_.W.providerId]:{provide:e.Fk3,useClass:_.W,deps:[l.mQy]},[E.t.providerId]:{provide:e.Fk3,useClass:E.t,deps:[l.mQy]},[h.n.providerId]:{provide:e.Fk3,useClass:h.n,deps:[l.oDG]},[u.wi.providerId]:{provide:e.Fk3,useClass:u.wi,deps:[m.eN]},[u.u2.providerId]:{provide:e.Fk3,useClass:u.u2,deps:[]},[y.a.providerId]:{provide:e.Fk3,useClass:y.a,deps:[l.mQy,m.eN]}})}ngOnInit(){var i,o;null===(o=null===(i=this.widgetTypesService.getWidgetType("table").configurator)||void 0===i?void 0:i[e.xW5.Structure].presentation.properties)||void 0===o||o.nodes.push("refresher");const n=C.map(g=>this.widgetTypesService.mergeWithWidgetType(g)),a=$()(n,g=>g.id);this.dashboard={positions:x,widgets:a}}onDsErrorSwitch(i){p.Q.mockError=i,c.i.mockError=i,c.L2.mockError=i,S.g.mockError=i,u.wi.mockError=i}onShowButtonSwitch(i,o){for(const n of Object.keys(this.dashboard.widgets))this.dashboard=(0,l.zdu)(this.dashboard,`widgets.${n}.pizzagna.configuration.header.properties.${o}`,i)}ngAfterViewInit(){this.dashboardComponent.eventBus.subscribeUntil(e.MOJ,this.destroy$,i=>{this.widgetClonerService.open({widget:this.dashboard.widgets[i.widgetId],dashboardComponent:this.dashboardComponent,trySubmit:this.submitHandler.trySubmit,widgetSelectionComponentType:k}).pipe((0,I.q)(1),(0,A.R)(this.destroy$)).subscribe()})}onCloneWidget(){this.widgetClonerService.open({dashboardComponent:this.dashboardComponent,trySubmit:this.submitHandler.trySubmit,widgetSelectionComponentType:N}).pipe((0,I.q)(1),(0,A.R)(this.destroy$)).subscribe()}onEditWithCloner(){this.dashboardComponent.eventBus.next(e.MOJ,{widgetId:C[0].id})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return r.\u0275fac=function(i){return new(i||r)(t.Y36(e.CNH),t.Y36(D),t.Y36(e.xTe),t.Y36(e.$Ie))},r.\u0275cmp=t.Xpm({type:r,selectors:[["acme-dashboard"]],viewQuery:function(i,o){if(1&i&&t.Gf(e.MXM,7),2&i){let n;t.iGM(n=t.CRH())&&(o.dashboardComponent=n.first)}},features:[t._Bn([D])],decls:19,vars:9,consts:function(){let d,i,o,n,a,g,R,L;return d=$localize`:␟489801ff09de9b4a6ca8b6e05a475fa1ca00d98e␟5813529530812520031: Create Widget Clone
`,i=$localize`:␟d8e9c9957a5d6ebe7749aab0e18dcb5d944b2ef9␟7916291516675251750: Simulate edit with cloner
`,o=$localize`:␟5cab2718f1d3c09ccb1fca4886710430f59bf7c0␟81810662047948365: Edit mode `,n=$localize`:␟db70aaa4da7a9f7c0fa3a218907f9fa354a19038␟5855643886473775120: Allow Submit `,a=$localize`:␟d289dfdc6c4e23b49a96db083f95f1087ed1400a␟3687117978364204872: Allow Removal `,g=$localize`:␟3299af3b186d7701f4c0626e41eba58af8382723␟4106211393112768148: Show Edit Button `,R=$localize`:␟30251ad3dcd7facd3a222d48fb2ba02f8503c52c␟8096484277280346189: Show Remove Button `,L=$localize`:␟c355f0feb3f72b3594e6e975456cd0a2dac1d929␟870224976565315483: Data Source Error `,[["type","button","nui-button","",1,"mb-3","ml-4",3,"click"],d,i,[1,"w-100",2,"height","725px"],[3,"nuiWidgetEditor","dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"],[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"value","valueChange"],o,n,a,g,R,[1,"ml-3",3,"valueChange"],L]},template:function(i,o){1&i&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.onCloneWidget()}),t.SDv(1,1),t.qZA(),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.onEditWithCloner()}),t.SDv(3,2),t.qZA(),t.TgZ(4,"div",3)(5,"nui-dashboard",4),t.NdJ("dashboardChange",function(a){return o.dashboard=a})("gridsterConfigChange",function(a){return o.gridsterConfig=a}),t.qZA()(),t.TgZ(6,"div",5)(7,"nui-switch",6),t.NdJ("valueChange",function(a){return o.editMode=a}),t.SDv(8,7),t.qZA(),t.TgZ(9,"nui-switch",6),t.NdJ("valueChange",function(a){return o.submitHandler.allowSubmit=a}),t.SDv(10,8),t.qZA(),t.TgZ(11,"nui-switch",6),t.NdJ("valueChange",function(a){return o.submitHandler.allowRemoval=a}),t.SDv(12,9),t.qZA(),t.TgZ(13,"nui-switch",6),t.NdJ("valueChange",function(a){return o.onShowButtonSwitch(a,"editable")}),t.SDv(14,10),t.qZA(),t.TgZ(15,"nui-switch",6),t.NdJ("valueChange",function(a){return o.onShowButtonSwitch(a,"removable")}),t.SDv(16,11),t.qZA(),t.TgZ(17,"nui-switch",12),t.NdJ("valueChange",function(a){return o.onDsErrorSwitch(a)}),t.SDv(18,13),t.qZA()()),2&i&&(t.xp6(5),t.Q6J("nuiWidgetEditor",o.submitHandler)("dashboard",o.dashboard)("gridsterConfig",o.gridsterConfig)("editMode",o.editMode),t.xp6(2),t.Q6J("value",o.editMode),t.xp6(2),t.Q6J("value",o.submitHandler.allowSubmit),t.xp6(2),t.Q6J("value",o.submitHandler.allowRemoval),t.xp6(2),t.Q6J("value",!0),t.xp6(2),t.Q6J("value",!0))},directives:[l.r0F,J.M,Z.t,l.qUD],styles:[".nui-theme-switcher-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;padding:10px;background-color:var(--nui-color-bg-light,#fff)}"]}),r})(),data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}}];let K=(()=>{class r{constructor(i,o){this.widgetTypesService=i,this.componentRegistry=o,this.setupDataSourceProviders(),this.setupCustomProportionalWidgetDSConfig()}setupCustomProportionalWidgetDSConfig(){var i;const o=this.widgetTypesService.getWidgetType("proportional",1);null===(i=o.widget.structure[e.XMI].providers)||void 0===i||delete i.refresher,this.widgetTypesService.setNode(o,"configurator",e.ACc.DataSourceConfigComponentType,P.b.lateLoadKey),this.componentRegistry.registerByLateLoadKey(P.b)}setupDataSourceProviders(){this.setDataSourceProviders("table",[S.g.providerId,_.W.providerId,E.t.providerId,h.n.providerId,y.a.providerId]);const i=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(i,"configurator",e.ACc.DataSourceConfigComponentType,e.cY_.lateLoadKey),this.setDataSourceProviders("kpi",[{providerId:c.i.providerId,label:"Acme KPI Data Source 1"},{providerId:c.L2.providerId,label:"Acme KPI Data Source 2",properties:{numberFormat:"1.1-1"}},{providerId:c.sR.providerId,label:"Acme KPI Data Source 3"}]),this.setDataSourceProviders("proportional",[p.Q.providerId,p.s.providerId]),this.setDataSourceProviders("timeseries",[u.wi.providerId,u.u2.providerId])}setDataSourceProviders(i,o){const n=this.widgetTypesService.getWidgetType(i,1);this.widgetTypesService.setNode(n,"configurator",e.ACc.DataSourceProviders,o)}}return r.\u0275fac=function(i){return new(i||r)(t.LFG(e.xTe),t.LFG(e.hiK))},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[e.CNH],imports:[[v.ez,m.JF,e.Pi,l.Gsl,l.Az_,l.vvu,l.cJ5,l.Ts3,l.sF0,l.ZuS,W.Bz.forChild(H)]]}),r})()}}]);