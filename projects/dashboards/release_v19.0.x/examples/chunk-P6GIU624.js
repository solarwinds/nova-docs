import{a as J,j as Q}from"./chunk-PPQN6QZA.js";import{a as U}from"./chunk-MD6F45Z7.js";import{a as Z}from"./chunk-SBSX6PXY.js";import{A as G,Ja as X,c as z,ea as g,ha as w,ia as V,ka as K,ma as B}from"./chunk-573U3PX6.js";import{Xc as L,oc as F,we as l}from"./chunk-PMWUHOKA.js";import{C as o,f as j}from"./chunk-YHLZAVJ5.js";import{Ba as m,Bc as N,Ca as y,Db as M,Ec as T,Fa as A,Fc as v,Gc as R,Ib as E,U as h,Ub as C,Xc as H,bc as p,cc as s,hc as D,i as d,ka as c,mc as P,pa as f,qc as k,rb as b,rc as u,xb as _}from"./chunk-MCPF2SEG.js";import{i as a}from"./chunk-VBFW7A5V.js";function Y(t,q){if(t&1){let e=D();p(0,"button",6),k("click",function(){m(e);let r=u();return y(r.reInitializeDashboard())}),N(1," Restore Widget "),s()}}function $(t,q){if(t&1){let e=D();p(0,"nui-dashboard",7),R("dashboardChange",function(r){m(e);let n=u();return v(n.dashboard,r)||(n.dashboard=r),y(r)})("gridsterConfigChange",function(r){m(e);let n=u();return v(n.gridsterConfig,r)||(n.gridsterConfig=r),y(r)}),s()}if(t&2){let e=u();T("dashboard",e.dashboard)("gridsterConfig",e.gridsterConfig),C("editMode",e.editMode)}}var x=(()=>{class t extends l{static{this.providerId="AverageRatingKpiDataSource"}constructor(e){super(),this.http=e,this.busy=new d(!1)}getFilteredData(){return a(this,null,function*(){return this.busy.next(!0),new Promise(e=>{this.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(h(()=>this.busy.next(!1))).subscribe({next:i=>{e({result:{value:i.volumeInfo.averageRating}})},error:i=>{e({result:null,error:{type:i.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(i){return new(i||t)(f(o))}}static{this.\u0275prov=c({token:t,factory:t.\u0275fac})}}return t})(),S=(()=>{class t extends l{constructor(){super(...arguments),this.busy=new d(!1)}static{this.providerId="ErrorUnknownDataSource"}getFilteredData(){return a(this,null,function*(){this.busy.next(!0);let e={result:null,error:{type:B.Unknown}};return this.busy.next(!1),e})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=A(t)))(r||t)}})()}static{this.\u0275prov=c({token:t,factory:t.\u0275fac})}}return t})(),W=(()=>{class t extends l{static{this.providerId="ErrorForbiddenDataSource"}constructor(e){super(),this.http=e,this.busy=new d(!1)}getFilteredData(){return a(this,null,function*(){return this.busy.next(!0),new Promise(e=>{this.http.get("http://www.mocky.io/v2/5ecc724a3200000f0023614a?mocky-delay=4000ms").pipe(h(()=>this.busy.next(!1))).subscribe({error:i=>{e({result:null,error:{type:i.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(i){return new(i||t)(f(o))}}static{this.\u0275prov=c({token:t,factory:t.\u0275fac})}}return t})(),O=(()=>{class t extends l{static{this.providerId="ErrorNotFoundDataSource"}constructor(e){super(),this.http=e,this.busy=new d(!1)}getFilteredData(){return a(this,null,function*(){return this.busy.next(!0),new Promise(e=>{this.http.get("http://www.mocky.io/v2/5ec6bfd93200007800d75100?mocky-delay=1000ms").pipe(h(()=>this.busy.next(!1))).subscribe({error:i=>{e({result:null,error:{type:i.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(i){return new(i||t)(f(o))}}static{this.\u0275prov=c({token:t,factory:t.\u0275fac})}}return t})(),fe=(()=>{class t{constructor(e,i,r){this.widgetTypesService=e,this.providerRegistry=i,this.changeDetectorRef=r,this.gridsterConfig={},this.editMode=!1}ngOnInit(){let e=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(e,"configurator",V.DataSourceProviders,[S.providerId,W.providerId,O.providerId,x.providerId]),this.providerRegistry.setProviders({[S.providerId]:{provide:g,useClass:S,deps:[o]},[W.providerId]:{provide:g,useClass:W,deps:[o]},[O.providerId]:{provide:g,useClass:O,deps:[o]},[x.providerId]:{provide:g,useClass:x,deps:[o]}}),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){let e=ee,i={[e.id]:this.widgetTypesService.mergeWithWidgetType(e)},r={[e.id]:{cols:4,rows:6,y:0,x:0}};this.dashboard={positions:r,widgets:i}}static{this.\u0275fac=function(i){return new(i||t)(_(U),_(X),_(H))}}static{this.\u0275cmp=M({type:t,selectors:[["widget-error-handling"]],standalone:!1,decls:6,vars:3,consts:()=>{let e;return e=$localize`:␟5fa31edac506213950b479159e840b300d749592␟3766035158759769347: Edit Mode `,[e,[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"valueChange","value"],["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboardChange","gridsterConfigChange","dashboard","gridsterConfig","editMode"]]},template:function(i,r){i&1&&(p(0,"div",1)(1,"nui-switch",2),R("valueChange",function(I){return v(r.editMode,I)||(r.editMode=I),I}),P(2,0),s(),E(3,Y,2,0,"button",3),s(),p(4,"div",4),E(5,$,1,3,"nui-dashboard",5),s()),i&2&&(b(),T("value",r.editMode),b(2),C("ngIf",!(r.dashboard!=null&&r.dashboard.widgets.widget1)),b(2),C("ngIf",r.dashboard))},dependencies:[j,F,J,Q,L],styles:[".dashboard[_ngcontent-%COMP%]{height:400px}"]})}}return t})(),ee={id:"widget1",type:"kpi",pizzagna:{[K.Configuration]:{[z]:{providers:{[w.Refresher]:{properties:{interval:60*10,enabled:!0}}}},header:{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}},tiles:{properties:{nodes:["kpi1"]}},kpi1:{id:"kpi1",componentType:Z.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating"}},providers:{[w.DataSource]:{providerId:S.providerId},[w.Adapter]:{providerId:G,properties:{componentId:"kpi1",propertyPath:"widgetData"}}}}}}};export{x as a,S as b,W as c,O as d,fe as e};
