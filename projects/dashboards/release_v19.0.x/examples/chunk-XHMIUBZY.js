import{a as j,j as F}from"./chunk-PPQN6QZA.js";import{a as z}from"./chunk-MD6F45Z7.js";import{b as X}from"./chunk-AZWDHRVR.js";import{a as U}from"./chunk-SBSX6PXY.js";import{A as B,C as N,Ja as V,ea as L,ha as _,ia as m,ka as G}from"./chunk-573U3PX6.js";import{Xc as M,oc as x,we as A}from"./chunk-PMWUHOKA.js";import{C,f as K}from"./chunk-YHLZAVJ5.js";import{Ba as d,Bc as k,Ca as p,Db as W,Ec as u,Fc as h,Gc as S,Ib as y,U as E,Ub as g,Xc as O,bc as a,cc as n,hc as v,i as w,ka as D,mc as P,pa as I,qc as R,rb as l,rc as s,xb as c}from"./chunk-MCPF2SEG.js";import{i as T}from"./chunk-VBFW7A5V.js";function J(o,H){if(o&1){let e=v();a(0,"button",6),R("click",function(){d(e);let t=s();return p(t.reInitializeDashboard())}),k(1," Restore Widget "),n()}}function Y(o,H){if(o&1){let e=v();a(0,"nui-dashboard",7),S("dashboardChange",function(t){d(e);let r=s();return h(r.dashboard,t)||(r.dashboard=t),p(t)})("gridsterConfigChange",function(t){d(e);let r=s();return h(r.gridsterConfig,t)||(r.gridsterConfig=t),p(t)}),n()}if(o&2){let e=s();u("dashboard",e.dashboard),g("editMode",e.editMode),u("gridsterConfig",e.gridsterConfig)}}var f=(()=>{class o extends A{static{this.providerId="AverageRatingKpiDataSource"}constructor(e){super(),this.http=e,this.busy=new w(!1)}getFilteredData(){return T(this,null,function*(){return this.busy.next(!0),new Promise(e=>{this.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(E(()=>this.busy.next(!1))).subscribe({next:i=>{e({result:{value:i.volumeInfo.averageRating}})},error:i=>{e({result:null,error:{type:i.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}static{this.\u0275fac=function(i){return new(i||o)(I(C))}}static{this.\u0275prov=D({token:o,factory:o.\u0275fac})}}return o})(),ce=(()=>{class o{constructor(e,i,t){this.widgetTypesService=e,this.providerRegistry=i,this.changeDetectorRef=t,this.gridsterConfig={},this.editMode=!1}ngOnInit(){this.setupDashboard(),this.setupDefaultColorStructure(),this.setupCustomPalletteDescription(),this.setupCustomPalletteRules(),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}setupCustomPalletteDescription(){let e=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(e,"configurator",m.TileDescriptionBackgroundColors,[{color:"var(--nui-color-chart-one)",label:"Blue"},{color:"var(--nui-color-chart-one-light)",label:"Blue Light"},{color:"var(--nui-color-chart-one-dark)",label:"Blue Dark"}])}setupCustomPalletteRules(){let e=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(e,"configurator",m.TileBackgroundColorRulesBackgroundColors,[{color:"red",label:"Native Red"},...X])}setupDefaultColorStructure(){let e=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(e,"widget","tiles.properties.template.properties.widgetData.backgroundColor","red")}setupDashboard(){let e=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(e,"configurator",m.DataSourceProviders,[f.providerId]),this.providerRegistry.setProviders({[f.providerId]:{provide:L,useClass:f,deps:[C]}})}initializeDashboard(){let e=Q,i={[e.id]:this.widgetTypesService.mergeWithWidgetType(e)},t={[e.id]:{cols:4,rows:6,y:0,x:0}};this.dashboard={positions:t,widgets:i}}static{this.\u0275fac=function(i){return new(i||o)(c(z),c(V),c(O))}}static{this.\u0275cmp=W({type:o,selectors:[["kpi-widget-background-color-example"]],standalone:!1,decls:6,vars:3,consts:()=>{let e;return e=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[e,[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"valueChange","value"],["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboardChange","gridsterConfigChange","dashboard","editMode","gridsterConfig"]]},template:function(i,t){i&1&&(a(0,"div",1)(1,"nui-switch",2),S("valueChange",function(b){return h(t.editMode,b)||(t.editMode=b),b}),P(2,0),n(),y(3,J,2,0,"button",3),n(),a(4,"div",4),y(5,Y,1,3,"nui-dashboard",5),n()),i&2&&(l(),u("value",t.editMode),l(2),g("ngIf",!(t.dashboard!=null&&t.dashboard.widgets.kpiWidgetId)),l(2),g("ngIf",t.dashboard))},dependencies:[x,K,j,F,M],styles:[".dashboard[_ngcontent-%COMP%]{height:400px}"]})}}return o})(),Q={id:"kpiWidgetId",type:"kpi",pizzagna:{[G.Configuration]:{header:{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}},tiles:{properties:{nodes:["kpi1"]}},kpi1:{id:"kpi1",componentType:U.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating",backgroundColor:"var(--nui-color-chart-one)"}},providers:{[_.DataSource]:{providerId:f.providerId},[_.Adapter]:{providerId:B,properties:{componentId:"kpi1",propertyPath:"widgetData"}},[_.KpiColorPrioritizer]:{providerId:N,properties:{rules:[{comparisonType:">",value:2,color:"var(--nui-color-chart-four)"}]}}}}}}};export{f as a,ce as b};
