import{a as I,b}from"./chunk-Z3474HRJ.js";import{a as y,b as A,c as C,d as D,e as T,f as a,g as P,h as g,i as v}from"./chunk-UVOPQ27U.js";import{a as G}from"./chunk-EDQ5AQLD.js";import"./chunk-TWGF5P3J.js";import{g as h}from"./chunk-PAQQYLV4.js";import{a as M,j as ve,k as fe}from"./chunk-PPQN6QZA.js";import{a as E}from"./chunk-MD6F45Z7.js";import"./chunk-LVFB3RKU.js";import"./chunk-SPPZFYNP.js";import"./chunk-GDLY3HLX.js";import"./chunk-KJJ6TWPM.js";import"./chunk-LA47LHC2.js";import"./chunk-4HXDNOXI.js";import"./chunk-5ELJRXLQ.js";import"./chunk-TGKM7UGT.js";import{b as f,c as m}from"./chunk-IYRXTWZX.js";import"./chunk-ZXV5URGJ.js";import"./chunk-BC67S2GR.js";import"./chunk-OGZVPW3S.js";import"./chunk-4GVDWU57.js";import"./chunk-OZALKHRQ.js";import"./chunk-AZWDHRVR.js";import"./chunk-EWX2S4QW.js";import"./chunk-SE5ZEHMX.js";import"./chunk-RDGFC72M.js";import"./chunk-LZOJVJPM.js";import"./chunk-NZJJPQMD.js";import"./chunk-3J5U6KSS.js";import"./chunk-K6DXWVOP.js";import"./chunk-SBSX6PXY.js";import"./chunk-ZKE5BQF3.js";import"./chunk-KJCSOJ3W.js";import"./chunk-LTNK7SWM.js";import"./chunk-5RQCZS6F.js";import"./chunk-7ZQISLLB.js";import"./chunk-LZEECJLY.js";import"./chunk-OPPBYCVB.js";import"./chunk-NVJ4XKOU.js";import"./chunk-JOEIBHEU.js";import"./chunk-POOVCM3L.js";import"./chunk-EU2T5UE6.js";import{Aa as c,Ja as R,Ka as ge,V as Z,b as Ce,c as d,ea as p,ha as i,ia as j,ka as l}from"./chunk-573U3PX6.js";import"./chunk-URWUMSY2.js";import"./chunk-GDYE5MCV.js";import{Ac as ie,Dc as te,Dd as ce,Gc as oe,Hc as se,Jd as me,Kd as ue,Pc as ae,Xc as de,kc as L,md as pe,od as ne,xd as le}from"./chunk-PMWUHOKA.js";import{N as re,r as ee}from"./chunk-YHLZAVJ5.js";import{Db as Q,Eb as V,Ec as B,Fc as _,Gc as k,Hc as J,Ub as U,bc as O,cc as W,h as z,ka as K,la as H,mc as X,pa as S,rb as N,xb as w,xc as Y,yc as $,zc as q}from"./chunk-MCPF2SEG.js";import{a as Ae}from"./chunk-CUY44B7R.js";import{g as F}from"./chunk-VBFW7A5V.js";var be=F(Ce());var x=(()=>{class o{constructor(t){this.toastService=t,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=(e,r)=>{let n=new z;return setTimeout(()=>{if(this.allowSubmit)e.id||(e.id=te("acme")),n.next(e);else{let s=$localize`Submit failed.`;this.toastService.error({title:s}),n.error(s)}},1e3),n.asObservable()},this.tryRemove=e=>{let r=new z;return setTimeout(()=>{if(this.allowRemoval)r.next(e);else{let n=$localize`Widget removal failed.`;this.toastService.error({title:n}),r.error(n)}},200),r.asObservable()},this.toastService.setConfig({timeOut:2e3})}static{this.\u0275fac=function(e){return new(e||o)(S(ue))}}static{this.\u0275prov=K({token:o,factory:o.\u0275fac})}}return o})();var u=F(Ae());var he={widget1:{cols:6,rows:6,y:0,x:0},"widget1-interval":{cols:6,rows:6,y:0,x:6},widget2:{cols:6,rows:6,y:6,x:0},"widget2-interval":{cols:6,rows:6,y:6,x:6},widget3:{cols:6,rows:6,y:12,x:0},"widget3-interval":{cols:6,rows:6,y:12,x:6},widget4:{cols:6,rows:6,y:18,x:0},"widget4-interval":{cols:6,rows:6,y:18,x:6},widget5:{cols:6,rows:6,y:24,x:0},"widget5-interval":{cols:6,rows:6,y:24,x:6}},Ie=[{id:"widget1",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId},[i.InteractionHandler]:{providerId:Z,properties:{url:"${data.link}"}}}},header:{properties:{title:"Line chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{interaction:"series",legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.Line}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget1-interval",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId},[i.InteractionHandler]:{providerId:Z,properties:{url:"${data.link}"}}}},header:{properties:{title:"Line chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.Line,scales:{x:{type:f.TimeInterval,properties:{interval:24*60*60}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget2",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Area chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedArea}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget2-interval",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Area chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedArea,scales:{x:{type:f.TimeInterval,properties:{interval:24*60*60}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget3",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Stacked percentage area",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedPercentageArea}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget3-interval",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Stacked percentage area",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedPercentageArea,scales:{x:{type:f.TimeInterval,properties:{interval:24*60*60}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget4",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Bar chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedBar,scales:{}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget4-interval",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:a.providerId}}},header:{properties:{title:"Bar chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StackedBar,scales:{x:{type:f.TimeInterval,properties:{interval:24*60*60}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget5",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:g.providerId}}},header:{properties:{title:"Status chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StatusBar}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}},{id:"widget5-interval",type:"timeseries",pizzagna:{[l.Configuration]:{[d]:{providers:{[i.DataSource]:{providerId:v.providerId}}},header:{properties:{title:"Status chart",subtitle:"Basic timeseries widget"}},chart:{providers:{[i.Adapter]:{properties:{series:[{id:"series-1",label:"Average GPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:c.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",preset:m.StatusBar,scales:{x:{type:f.TimeInterval,properties:{interval:24*60*60}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,u.default)().format()}}}}}];var ye=(()=>{class o{constructor(t,e,r){this.submitHandler=t,this.providerRegistry=e,this.widgetTypesService=r,this.gridsterConfig={},this.editMode=!1,this.providerRegistry.setProviders({[I.providerId]:{provide:p,useClass:I,deps:[]},[b.providerId]:{provide:p,useClass:b,deps:[]},[y.providerId]:{provide:p,useClass:y,deps:[]},[A.providerId]:{provide:p,useClass:A,deps:[]},[C.providerId]:{provide:p,useClass:C,deps:[L]},[D.providerId]:{provide:p,useClass:D,deps:[L]},[T.providerId]:{provide:p,useClass:T,deps:[L]},[h.providerId]:{provide:p,useClass:h,deps:[ie]},[a.providerId]:{provide:p,useClass:a,deps:[]},[P.providerId]:{provide:p,useClass:P,deps:[]},[g.providerId]:{provide:p,useClass:g,deps:[]},[v.providerId]:{provide:p,useClass:v,deps:[]}})}ngOnInit(){let t=Ie.map(r=>this.widgetTypesService.mergeWithWidgetType(r)),e=(0,be.default)(t,r=>r.id);this.dashboard={positions:he,widgets:e}}static{this.\u0275fac=function(e){return new(e||o)(w(x),w(R),w(E))}}static{this.\u0275cmp=Q({type:o,selectors:[["acme-dashboard"]],viewQuery:function(e,r){if(e&1&&Y(M,7),e&2){let n;$(n=q())&&(r.dashboardComponent=n.first)}},standalone:!1,features:[J([x])],decls:5,vars:5,consts:()=>{let t;return t=$localize`:␟5cab2718f1d3c09ccb1fca4886710430f59bf7c0␟81810662047948365: Edit mode `,[t,[1,"w-100",2,"height","800px"],[3,"dashboardChange","gridsterConfigChange","nuiWidgetEditor","dashboard","gridsterConfig","editMode"],[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"valueChange","value"]]},template:function(e,r){e&1&&(O(0,"div",1)(1,"nui-dashboard",2),k("dashboardChange",function(s){return _(r.dashboard,s)||(r.dashboard=s),s})("gridsterConfigChange",function(s){return _(r.gridsterConfig,s)||(r.gridsterConfig=s),s}),W()(),O(2,"div",3)(3,"nui-switch",4),k("valueChange",function(s){return _(r.editMode,s)||(r.editMode=s),s}),X(4,0),W()()),e&2&&(N(),U("nuiWidgetEditor",r.submitHandler),B("dashboard",r.dashboard)("gridsterConfig",r.gridsterConfig),U("editMode",r.editMode),N(2),B("value",r.editMode))},dependencies:[M,ve,de],encapsulation:2})}}return o})();var we=[{path:"",component:ye,data:{srlc:{hideIndicator:!0}}}],cr=(()=>{class o{constructor(t,e){this.widgetTypesService=t,this.componentRegistry=e,this.setupDataSourceProviders(),this.setupCustomProportionalWidgetDSConfig()}setupCustomProportionalWidgetDSConfig(){let t=this.widgetTypesService.getWidgetType("proportional",1);delete t.widget.structure[d].providers?.refresher,this.widgetTypesService.setNode(t,"configurator",j.DataSourceConfigComponentType,G.lateLoadKey),this.componentRegistry.registerByLateLoadKey(G)}setupDataSourceProviders(){this.setDataSourceProviders("table",[C.providerId,D.providerId,T.providerId,h.providerId]),this.setDataSourceProviders("kpi",[I.providerId,b.providerId]),this.setDataSourceProviders("proportional",[y.providerId,A.providerId]),this.setDataSourceProviders("timeseries",[a.providerId,P.providerId,g.providerId,v.providerId])}setDataSourceProviders(t,e){let r=this.widgetTypesService.getWidgetType(t,1);this.widgetTypesService.setNode(r,"configurator",j.DataSourceProviders,e)}static{this.\u0275fac=function(e){return new(e||o)(S(E),S(ge))}}static{this.\u0275mod=V({type:o})}static{this.\u0275inj=H({providers:[R],imports:[ee,fe,ce,se,me,ae,le,pe,ne,oe,re.forChild(we)]})}}return o})();export{cr as TimeseriesWidgetPrototypeModule};
