import{a as h,b as p,c as v}from"./chunk-KAXFODOT.js";import{a as m,b as S}from"./chunk-4F3HMPIL.js";import{e as F}from"./chunk-OPV2UPWR.js";import{a as l,b as f}from"./chunk-CB4KJ3HT.js";import{a as n,b as c}from"./chunk-P6TTTZ3Y.js";import{a as de,b as ne}from"./chunk-FSXUZGMJ.js";import{a as ie,j as se,k as ae}from"./chunk-BOWRRSH7.js";import{a as D}from"./chunk-DSXQJ4TK.js";import"./chunk-6I7TS44Z.js";import"./chunk-JUPZGZRS.js";import"./chunk-SLNDOZHT.js";import"./chunk-YY44VW3L.js";import"./chunk-NL2BUAZT.js";import"./chunk-4HXDNOXI.js";import"./chunk-GRQ3I6DU.js";import"./chunk-3QXM5HIB.js";import"./chunk-IYRXTWZX.js";import"./chunk-DEDEN4HO.js";import"./chunk-TYDDX3UK.js";import"./chunk-O3DO7PNI.js";import"./chunk-QDQWUCTR.js";import"./chunk-OZALKHRQ.js";import"./chunk-LSEPWJWS.js";import"./chunk-BSCOJC4I.js";import"./chunk-6TGUIKVK.js";import"./chunk-6HGUVHUP.js";import"./chunk-EOKHLKUH.js";import"./chunk-RQK7FOMM.js";import"./chunk-VD3OFWQW.js";import"./chunk-OAMKFNWH.js";import{a as K}from"./chunk-GWI475V7.js";import"./chunk-ZKE5BQF3.js";import"./chunk-FTFNVH5I.js";import{a as oe}from"./chunk-LTNK7SWM.js";import{a as R}from"./chunk-S3VNX4WV.js";import"./chunk-VZCEKN5H.js";import"./chunk-SFCHEBF7.js";import{a as N}from"./chunk-FXUCT5LQ.js";import"./chunk-JKHVMMKR.js";import"./chunk-ICNLH3VO.js";import"./chunk-KONGOWXB.js";import"./chunk-7W7EWBQD.js";import{A as L,Aa as z,Ja as I,b as he,c as C,ca as k,ea as a,ha as d,ia as te,ka as g}from"./chunk-UW6LU7NQ.js";import"./chunk-URWUMSY2.js";import"./chunk-SXG7KMJ2.js";import{Ac as E,Dd as Y,Gc as J,Hc as Q,Kd as $,od as X,se as ee,te as re}from"./chunk-VVYJCL6H.js";import{N as q}from"./chunk-N5H4HNSX.js";import{Cb as V,Db as x,Dc as M,Ec as w,Fc as W,Gc as G,Tb as y,ac as _,bc as Z,h as A,ka as j,la as U,pa as b,pc as H,qb as B,wb as u}from"./chunk-7LLRMBML.js";import"./chunk-CUY44B7R.js";import{a as T,b as O,g as ge}from"./chunk-VBFW7A5V.js";var ce=ge(he());var P=(()=>{class o{constructor(t){this.toastService=t,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=(r,e)=>{let s=new A;return setTimeout(()=>{if(this.allowSubmit)s.next(r);else{let i=$localize`Submit failed.`;this.toastService.error({title:i}),s.error(i)}},1e3),s.asObservable()},this.tryRemove=r=>{let e=new A;return setTimeout(()=>{if(this.allowRemoval)e.next(r);else{let s=$localize`Widget removal failed.`;this.toastService.error({title:s}),e.error(s)}},200),e.asObservable()},this.toastService.setConfig({timeOut:2e3})}static{this.\u0275fac=function(r){return new(r||o)(b($))}}static{this.\u0275prov=j({token:o,factory:o.\u0275fac})}}return o})();var le={widget1:{cols:6,rows:6,y:0,x:0},widget2:{cols:6,rows:6,y:0,x:6},widget3:{cols:7,rows:6,y:6,x:0},widget4:{cols:5,rows:6,y:6,x:7}},me=[{id:"widget1",type:"kpi",pizzagna:{[g.Configuration]:{header:{properties:{title:"KPI Widget!",subtitle:"A bunch of number boxes"}},tiles:{properties:{nodes:["kpi1","kpi2"]}},kpi1:{id:"kpi1",componentType:K.lateLoadKey,providers:{[d.DataSource]:{providerId:n.providerId},[d.Adapter]:{providerId:L,properties:{componentId:"kpi1",propertyPath:"widgetData",thresholds:{showThresholds:!0,warningThresholdValue:5,criticalThresholdValue:8}}}},properties:{elementClass:"flex-grow-1",widgetData:{id:"totalStorage",value:0,label:"Total storage"}}},kpi2:{id:"kpi2",componentType:K.lateLoadKey,providers:{[d.DataSource]:{providerId:c.providerId},[d.Adapter]:{providerId:L,properties:{componentId:"kpi2",propertyPath:"widgetData",thresholds:{warningThresholdValue:120,criticalThresholdValue:150}}}},properties:{elementClass:"flex-grow-1",widgetData:{id:"downloadSpeed",value:0,label:"Download speed"}}}}}},{id:"widget2",type:"proportional",pizzagna:{[g.Configuration]:{header:{properties:{title:"Proportional Widget!",subtitle:"Proportional widget with legend formatters"}},chart:{providers:{[d.DataSource]:{providerId:p.providerId}},properties:{configuration:{chartOptions:{type:oe.PieChart,legendPlacement:z.Right,legendFormatter:{componentType:R.lateLoadKey}}}}}}}},{id:"widget3",type:"timeseries",pizzagna:{[g.Configuration]:{[C]:{providers:{[d.DataSource]:{providerId:m.providerId}}},header:{properties:{title:"Timeseries Widget!",subtitle:"Basic timeseries widget"}},chart:{providers:{[d.Adapter]:{properties:{series:[{id:"series-1",label:"Average CPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"},{id:"series-3",label:"Average CPU Load",selectedSeriesId:"series-3"}]}}},properties:{configuration:{legendPlacement:z.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)"}}},timeframeSelection:{properties:{timeframe:{startDatetime:F().subtract(7,"day").format(),endDatetime:F().format(),selectedPresetId:null}}}}}},{id:"widget4",type:"table",pizzagna:{[g.Configuration]:{header:{properties:{title:"Table Widget!",subtitle:"Basic table widget"}},table:{providers:{[d.DataSource]:{providerId:l.providerId}},properties:{configuration:{columns:[{id:"column1",label:"No",isActive:!0,formatter:{componentType:N.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:N.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Location",isActive:!0,formatter:{componentType:R.lateLoadKey,properties:{dataFieldIds:{value:"firstUrlLabel",link:"firstUrl"}}}}],sorterConfiguration:{descendantSorting:!0,sortBy:"column1"},hasVirtualScroll:!0}}}}}}];var ue=(()=>{class o{constructor(t,r,e,s){this.providerRegistry=t,this.submitHandler=r,this.themeSwitcherService=e,this.widgetTypesService=s,this.dashboard={positions:{},widgets:{}},this.gridsterConfig={minCols:12,maxCols:12,minRows:12},this.editMode=!1,this.dsError=!1,this.providerRegistry.setProviders({[n.providerId]:{provide:a,useClass:n,deps:[]},[c.providerId]:{provide:a,useClass:c,deps:[]},[h.providerId]:{provide:a,useClass:h,deps:[]},[p.providerId]:{provide:a,useClass:p,deps:[]},[v.providerId]:{provide:a,useClass:v,deps:[]},[l.providerId]:{provide:a,useClass:l,deps:[E,k]},[f.providerId]:{provide:a,useClass:f,deps:[E,k]},[m.providerId]:{provide:a,useClass:m,deps:[]},[S.providerId]:{provide:a,useClass:S,deps:[]}})}ngOnInit(){let t=me.map(e=>O(T({},e),{pizzagna:T(T({},this.widgetTypesService.getWidgetType(e.type,e.version).widget),e.pizzagna)})),r=(0,ce.default)(t,e=>e.id);this.dashboard={positions:le,widgets:r}}onDsErrorChange(t){n.mockError=t,m.mockError=t,l.mockError=t,p.mockError=t}static{this.\u0275fac=function(r){return new(r||o)(u(I),u(P),u(ee),u(D))}}static{this.\u0275cmp=V({type:o,selectors:[["acme-dashboard"]],standalone:!1,features:[G([P])],decls:3,vars:6,consts:[[3,"editModeChange","dsErrorChange","editMode","dsError"],[1,"dashboard"],[3,"dashboardChange","gridsterConfigChange","nuiWidgetEditor","dashboard","gridsterConfig","editMode"]],template:function(r,e){r&1&&(_(0,"dashboard-test-harness",0),W("editModeChange",function(i){return w(e.editMode,i)||(e.editMode=i),i}),H("dsErrorChange",function(i){return e.onDsErrorChange(i)}),_(1,"div",1)(2,"nui-dashboard",2),W("dashboardChange",function(i){return w(e.dashboard,i)||(e.dashboard=i),i})("gridsterConfigChange",function(i){return w(e.gridsterConfig,i)||(e.gridsterConfig=i),i}),Z()()()),r&2&&(M("editMode",e.editMode),y("dsError",e.dsError),B(2),y("nuiWidgetEditor",e.submitHandler),M("dashboard",e.dashboard)("gridsterConfig",e.gridsterConfig),y("editMode",e.editMode))},dependencies:[de,ie,se],styles:[".dashboard[_ngcontent-%COMP%]{height:725px;width:1000px}"]})}}return o})();var Te=[{path:"",component:ue,data:{srlc:{hideIndicator:!0}}}],er=(()=>{class o{constructor(t){this.widgetTypesService=t;let r=this.widgetTypesService.getWidgetType("proportional",1);delete r.widget.structure[C].providers?.refresher,this.setDataSourceProviders("table",[l.providerId,f.providerId]),this.setDataSourceProviders("kpi",[n.providerId,c.providerId]),this.setDataSourceProviders("proportional",[h.providerId,p.providerId,v.providerId]),this.setDataSourceProviders("timeseries",[m.providerId,S.providerId])}setDataSourceProviders(t,r){let e=this.widgetTypesService.getWidgetType(t,1);this.widgetTypesService.setNode(e,"configurator",te.DataSourceProviders,r)}static{this.\u0275fac=function(r){return new(r||o)(b(D))}}static{this.\u0275mod=x({type:o})}static{this.\u0275inj=U({providers:[I],imports:[ne,ae,Y,Q,re,X,J,q.forChild(Te)]})}}return o})();export{er as OverviewModule};
