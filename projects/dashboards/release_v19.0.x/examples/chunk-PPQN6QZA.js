import{a as oe,b as Kr,d as Zr,e as Qr,f as hs}from"./chunk-MD6F45Z7.js";import{a as An,b as Xn,c as us,d as gs}from"./chunk-LVFB3RKU.js";import{a as fs}from"./chunk-SPPZFYNP.js";import{a as Jr}from"./chunk-GDLY3HLX.js";import{a as Mn,b as Yn,d as Kn,e as Zn,f as qn,g as Qn,h as Jn,i as es,j as _s}from"./chunk-KJJ6TWPM.js";import{a as en,b as Cs}from"./chunk-LA47LHC2.js";import{a as kn,b as ts,c as is,d as os,e as Ts}from"./chunk-5ELJRXLQ.js";import{a as tn,b as on,c as rn,d as nn,e as sn,f as an,g as ln,h as dn,i as pn,j as Is}from"./chunk-TGKM7UGT.js";import{a as ji,b as Yi,c as rs}from"./chunk-ZXV5URGJ.js";import{a as jr,b as Yr,c as un,d as as}from"./chunk-BC67S2GR.js";import{a as zn,b as Dn,c as ls}from"./chunk-OGZVPW3S.js";import{a as Vr,b as ds}from"./chunk-4GVDWU57.js";import{a as gn,c as bn,d as Fn,e as Gn,f as Bn,g as Ki,h as ps}from"./chunk-AZWDHRVR.js";import{a as jn}from"./chunk-EWX2S4QW.js";import{a as On}from"./chunk-SE5ZEHMX.js";import{a as En,b as Ci}from"./chunk-RDGFC72M.js";import{a as fn,b as Rn}from"./chunk-LZOJVJPM.js";import{a as ms}from"./chunk-NZJJPQMD.js";import{a as Xr}from"./chunk-3J5U6KSS.js";import{a as Ui,b as Vi,c as hi,d as _i,e as mn,f as cn,g as hn,h as ns,j as ss}from"./chunk-K6DXWVOP.js";import{a as Hr}from"./chunk-SBSX6PXY.js";import{a as Cn,b as Tn,c as In,d as vn,e as wn,f as Un,g as Vn,h as Hn,n as cs}from"./chunk-KJCSOJ3W.js";import{a as qr}from"./chunk-LTNK7SWM.js";import{a as Sn}from"./chunk-5RQCZS6F.js";import{a as Nn}from"./chunk-LZEECJLY.js";import{a as yn}from"./chunk-OPPBYCVB.js";import{a as $n,b as Ln}from"./chunk-NVJ4XKOU.js";import{H as yr,a as za,u as Or,v as Sr}from"./chunk-JOEIBHEU.js";import{a as he,b as Ii,c as Pn}from"./chunk-POOVCM3L.js";import{a as _n,b as xn,c as Ti,d as je,e as Me,f as ze,g as De,h as Wn}from"./chunk-EU2T5UE6.js";import{Aa as gi,Ba as Lr,Ea as Ar,Fa as Gr,Ga as kr,Ha as Wr,Ja as Br,Ka as fi,La as Ur,Ma as mt,N as Hi,Na as Pe,W as br,c as M,ca as Ne,d as vr,da as Xi,g as si,h as ai,ha as ci,i as Nr,ia as y,j as wr,ja as Pr,k as li,ka as H,l as di,m as Er,n as at,na as ui,o as Rr,oa as Mr,p as pi,pa as zr,q as xr,qa as Xe,r as mi,ra as lt,sa as Dr,ta as dt,va as Fr,wa as $r,ya as pt}from"./chunk-573U3PX6.js";import{Ad as rr,Ba as V,C as Ra,Cd as nr,D as Fo,Da as Xt,Dc as St,Dd as ri,Ed as sr,Fc as ko,Fd as ar,Gc as qt,Hc as Qt,Hd as lr,Ia as jt,Id as ce,J as $o,Ja as Lo,Jc as Wo,Jd as dr,Kc as Bo,Lc as Uo,Ma as Yt,Mc as Jt,Nc as Vo,Nd as pr,Od as mr,Pc as st,Pd as cr,Qc as Ho,Qd as hr,Ra as Ao,Sd as ur,Ud as ni,Vd as gr,Xc as Xo,Z as xa,Zb as Kt,_c as _e,cd as jo,eb as ba,ee as fr,fb as Pa,gd as Yo,hd as be,i as Do,jd as Ko,kc as Z,kd as Zo,ke as _r,ld as Ce,le as Cr,ma as de,mb as fe,md as qo,me as Tr,nb as Ot,nc as He,nd as ei,ne as Ir,oa as pe,oc as nt,od as Qo,pa as J,pd as ti,qd as Jo,rd as er,sd as tr,uc as Go,ue as Te,va as ee,wa as Ve,wd as ir,xc as Zt,xd as ii,ya as me,yd as oi,zd as or}from"./chunk-PMWUHOKA.js";import{H as Mo,L as zo,d as Ue,e as Q,f as U,j as Ht,k as xo,l as ge,p as bo,q as Po,r as Bi}from"./chunk-YHLZAVJ5.js";import{$b as ki,Aa as k,Ac as W,Ba as _,Bc as P,Ca as C,Cc as We,Db as O,Dc as X,E as go,Eb as Re,Ec as Bt,Fb as At,Fc as Ut,Gb as So,Gc as Vt,H as fo,Ha as $t,Hb as rt,Hc as Be,Ib as f,Ic as Le,Jc as Je,K as Ft,Kc as Eo,La as I,M as _o,Ma as Li,Nc as Ro,O as Co,Oc as E,Pa as qe,Pc as B,Qc as ae,Sb as yo,Sc as ve,Tb as Gt,Ub as a,Vb as vo,Wb as Qe,Xc as N,Zb as $e,_b as Gi,ac as Wi,bc as d,ca as Ze,cc as m,da as A,dc as S,e as Mt,ec as Y,fc as K,gc as No,h as L,hc as v,i as ot,ka as le,kc as kt,la as Ee,lc as Wt,mb as Ai,mc as G,nb as To,o as zt,pa as b,qc as T,r as Dt,rb as l,rc as u,sc as Tt,tc as It,ub as Lt,vb as Io,w as uo,wb as Ct,wc as wo,xb as c,xc as xe,yc as Se,zb as Oo,zc as ye}from"./chunk-MCPF2SEG.js";import{a as Ma}from"./chunk-CUY44B7R.js";import{a as D,b as j,g as ie}from"./chunk-VBFW7A5V.js";var ys=["*"];function Da(r,o){if(r&1&&S(0,"div",0),r&2){let e=o.$index,t=u();a("ngStyle",t.gridRenderer.getGridColumnStyle(e))}}function Fa(r,o){if(r&1&&S(0,"div",1),r&2){let e=o.$index,t=u();a("ngStyle",t.gridRenderer.getGridRowStyle(e))}}function $a(r,o){if(r&1){let e=v();d(0,"div",8),T("mousedown",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))})("touchstart",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))}),m()}}function La(r,o){if(r&1){let e=v();d(0,"div",9),T("mousedown",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))})("touchstart",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))}),m()}}function Aa(r,o){if(r&1){let e=v();d(0,"div",10),T("mousedown",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))})("touchstart",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))}),m()}}function Ga(r,o){if(r&1){let e=v();d(0,"div",11),T("mousedown",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))})("touchstart",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))}),m()}}function ka(r,o){if(r&1){let e=v();d(0,"div",12),T("mousedown",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))})("touchstart",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))}),m()}}function Wa(r,o){if(r&1){let e=v();d(0,"div",13),T("mousedown",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))})("touchstart",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))}),m()}}function Ba(r,o){if(r&1){let e=v();d(0,"div",14),T("mousedown",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))})("touchstart",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))}),m()}}function Ua(r,o){if(r&1){let e=v();d(0,"div",15),T("mousedown",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))})("touchstart",function(i){_(e);let n=u();return C(n.resize.dragStartDelay(i))}),m()}}var w=function(r){return r.Fit="fit",r.ScrollVertical="scrollVertical",r.ScrollHorizontal="scrollHorizontal",r.Fixed="fixed",r.VerticalFixed="verticalFixed",r.HorizontalFixed="horizontalFixed",r}(w||{}),Si=function(r){return r.Always="always",r.OnDragAndResize="onDrag&Resize",r.None="none",r}(Si||{}),F=function(r){return r.None="none",r.CompactUp="compactUp",r.CompactLeft="compactLeft",r.CompactUpAndLeft="compactUp&Left",r.CompactLeftAndUp="compactLeft&Up",r.CompactRight="compactRight",r.CompactUpAndRight="compactUp&Right",r.CompactRightAndUp="compactRight&Up",r.CompactDown="compactDown",r.CompactDownAndLeft="compactDown&Left",r.CompactLeftAndDown="compactLeft&Down",r.CompactDownAndRight="compactDown&Right",r.CompactRightAndDown="compactRight&Down",r}(F||{}),te=function(r){return r.LTR="ltr",r.RTL="rtl",r}(te||{}),Zi=class{gridster;constructor(o){this.gridster=o}destroy(){this.gridster=null}checkCompact(){this.gridster.$options.compactType!==F.None&&(this.gridster.$options.compactType===F.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===F.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===F.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===F.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===F.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===F.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===F.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===F.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===F.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===F.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===F.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===F.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(o){this.gridster.$options.compactType!==F.None&&(this.gridster.$options.compactType===F.CompactUp?this.moveTillCollision(o,"y",-1):this.gridster.$options.compactType===F.CompactLeft?this.moveTillCollision(o,"x",-1):this.gridster.$options.compactType===F.CompactUpAndLeft?(this.moveTillCollision(o,"y",-1),this.moveTillCollision(o,"x",-1)):this.gridster.$options.compactType===F.CompactLeftAndUp?(this.moveTillCollision(o,"x",-1),this.moveTillCollision(o,"y",-1)):this.gridster.$options.compactType===F.CompactUpAndRight?(this.moveTillCollision(o,"y",-1),this.moveTillCollision(o,"x",1)):this.gridster.$options.compactType===F.CompactDown?this.moveTillCollision(o,"y",1):this.gridster.$options.compactType===F.CompactDownAndLeft?(this.moveTillCollision(o,"y",1),this.moveTillCollision(o,"x",-1)):this.gridster.$options.compactType===F.CompactLeftAndDown?(this.moveTillCollision(o,"x",-1),this.moveTillCollision(o,"y",1)):this.gridster.$options.compactType===F.CompactDownAndRight?(this.moveTillCollision(o,"y",1),this.moveTillCollision(o,"x",1)):this.gridster.$options.compactType===F.CompactRightAndDown&&(this.moveTillCollision(o,"x",1),this.moveTillCollision(o,"y",1)))}checkCompactMovement(o,e){let t=!1;this.gridster.grid.forEach(i=>{i.$item.compactEnabled!==!1&&this.moveTillCollision(i.$item,o,e)&&(t=!0,i.item[o]=i.$item[o],i.itemChanged())}),t&&this.checkCompact()}moveTillCollision(o,e,t){return o[e]+=t,this.gridster.checkCollision(o)?(o[e]-=t,!1):(this.moveTillCollision(o,e,t),!0)}},Va={gridType:w.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:F.None,mobileBreakpoint:640,useBodyForBreakpoint:!1,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:Si.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,enableBoundaryControl:!1,disableAutoPositionOnConflict:!1,dirType:te.LTR},re=class r{static merge(o,e,t){for(let i in e)e[i]!==void 0&&t.hasOwnProperty(i)&&(typeof e[i]=="object"?(i in o||(o[i]={}),o[i]=r.merge(o[i],e[i],t[i])):o[i]=e[i]);return o}static checkTouchEvent(o){o.clientX===void 0&&o.touches&&(o.touches&&o.touches.length?(o.clientX=o.touches[0].clientX,o.clientY=o.touches[0].clientY):o.changedTouches&&o.changedTouches.length&&(o.clientX=o.changedTouches[0].clientX,o.clientY=o.changedTouches[0].clientY))}static checkContentClassForEvent(o,e){if(o.$options.draggable.ignoreContent){if(!r.checkDragHandleClass(e.target,e.currentTarget,o.$options.draggable.dragHandleClass,o.$options.draggable.ignoreContentClass))return!0}else if(r.checkContentClass(e.target,e.currentTarget,o.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(o,e){return r.checkContentClass(e.target,e.currentTarget,o.$options.draggable.ignoreContentClass)||r.checkContentClass(e.target,e.currentTarget,o.$options.draggable.dragHandleClass)}static checkDragHandleClass(o,e,t,i){if(!o||o===e)return!1;if(o.hasAttribute("class")){let n=o.getAttribute("class").split(" ");if(n.indexOf(t)>-1)return!0;if(n.indexOf(i)>-1)return!1}return r.checkDragHandleClass(o.parentNode,e,t,i)}static checkContentClass(o,e,t){return!o||o===e?!1:o.hasAttribute("class")&&o.getAttribute("class").split(" ").indexOf(t)>-1?!0:r.checkContentClass(o.parentNode,e,t)}static compareItems(o,e){return o.y>e.y?-1:o.y<e.y?1:o.x>e.x?-1:1}},qi=class{gridster;initialItem;removeEmptyCellClickListenerFn;removeEmptyCellTouchendListenerFn;removeEmptyCellContextMenuListenerFn;removeEmptyCellDropListenerFn;removeEmptyCellMousedownListenerFn;removeEmptyCellTouchstartListenerFn;removeWindowMousemoveListenerFn;removeWindowTouchmoveListenerFn;removeWindowMouseupListenerFn;removeWindowTouchendListenerFn;removeEmptyCellDragoverListenerFn;removeDocumentDragendListenerFn;constructor(o){this.gridster=o}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),this.gridster.movingItem=null,this.initialItem=this.gridster=null,this.removeDocumentDragendListenerFn&&(this.removeDocumentDragendListenerFn(),this.removeDocumentDragendListenerFn=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.removeEmptyCellClickListenerFn&&this.gridster.options.emptyCellClickCallback?(this.removeEmptyCellClickListenerFn=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb),this.removeEmptyCellTouchendListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb)):!this.gridster.$options.enableEmptyCellClick&&this.removeEmptyCellClickListenerFn&&this.removeEmptyCellTouchendListenerFn&&(this.removeEmptyCellClickListenerFn(),this.removeEmptyCellTouchendListenerFn(),this.removeEmptyCellClickListenerFn=null,this.removeEmptyCellTouchendListenerFn=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.removeEmptyCellContextMenuListenerFn&&this.gridster.options.emptyCellContextMenuCallback?this.removeEmptyCellContextMenuListenerFn=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb):!this.gridster.$options.enableEmptyCellContextMenu&&this.removeEmptyCellContextMenuListenerFn&&(this.removeEmptyCellContextMenuListenerFn(),this.removeEmptyCellContextMenuListenerFn=null),this.gridster.$options.enableEmptyCellDrop&&!this.removeEmptyCellDropListenerFn&&this.gridster.options.emptyCellDropCallback?(this.removeEmptyCellDropListenerFn=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop),this.gridster.zone.runOutsideAngular(()=>{this.removeEmptyCellDragoverListenerFn=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver)}),this.removeDocumentDragendListenerFn=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.removeEmptyCellDropListenerFn&&this.removeEmptyCellDragoverListenerFn&&this.removeDocumentDragendListenerFn&&(this.removeEmptyCellDropListenerFn(),this.removeEmptyCellDragoverListenerFn(),this.removeDocumentDragendListenerFn(),this.removeEmptyCellDragoverListenerFn=null,this.removeEmptyCellDropListenerFn=null,this.removeDocumentDragendListenerFn=null),this.gridster.$options.enableEmptyCellDrag&&!this.removeEmptyCellMousedownListenerFn&&this.gridster.options.emptyCellDragCallback?(this.removeEmptyCellMousedownListenerFn=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown),this.removeEmptyCellTouchstartListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown)):!this.gridster.$options.enableEmptyCellDrag&&this.removeEmptyCellMousedownListenerFn&&this.removeEmptyCellTouchstartListenerFn&&(this.removeEmptyCellMousedownListenerFn(),this.removeEmptyCellTouchstartListenerFn(),this.removeEmptyCellMousedownListenerFn=null,this.removeEmptyCellTouchstartListenerFn=null)}emptyCellClickCb=o=>{if(!this.gridster||this.gridster.movingItem||re.checkContentClassForEmptyCellClickEvent(this.gridster,o))return;let e=this.getValidItemFromEvent(o);e&&(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(o,e),this.gridster.cdRef.markForCheck())};emptyCellContextMenuCb=o=>{if(this.gridster.movingItem||re.checkContentClassForEmptyCellClickEvent(this.gridster,o))return;o.preventDefault(),o.stopPropagation();let e=this.getValidItemFromEvent(o);e&&(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(o,e),this.gridster.cdRef.markForCheck())};emptyCellDragDrop=o=>{let e=this.getValidItemFromEvent(o);e&&(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(o,e),this.gridster.cdRef.markForCheck())};emptyCellDragOver=o=>{o.preventDefault(),o.stopPropagation();let e=this.getValidItemFromEvent(o);e?(o.dataTransfer&&(o.dataTransfer.dropEffect="move"),this.gridster.movingItem=e):(o.dataTransfer&&(o.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()};emptyCellMouseDown=o=>{if(re.checkContentClassForEmptyCellClickEvent(this.gridster,o))return;o.preventDefault(),o.stopPropagation();let e=this.getValidItemFromEvent(o);!e||o.buttons!==1&&!(o instanceof TouchEvent)||(this.initialItem=e,this.gridster.movingItem=e,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.removeWindowMousemoveListenerFn=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove),this.removeWindowTouchmoveListenerFn=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove)}),this.removeWindowMouseupListenerFn=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp),this.removeWindowTouchendListenerFn=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp))};emptyCellMouseMove=o=>{o.preventDefault(),o.stopPropagation();let e=this.getValidItemFromEvent(o,this.initialItem);e&&(this.gridster.movingItem=e,this.gridster.previewStyle())};emptyCellMouseUp=o=>{this.removeWindowMousemoveListenerFn(),this.removeWindowTouchmoveListenerFn(),this.removeWindowMouseupListenerFn(),this.removeWindowTouchendListenerFn();let e=this.getValidItemFromEvent(o,this.initialItem);e&&(this.gridster.movingItem=e),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(o,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()};getPixelsX(o,e){let t=this.gridster.options.scale;return t?(o.clientX-e.left)/t+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():o.clientX+this.gridster.el.scrollLeft-e.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(o,e){let t=this.gridster.options.scale;return t?(o.clientY-e.top)/t+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():o.clientY+this.gridster.el.scrollTop-e.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(o,e){o.preventDefault(),o.stopPropagation(),re.checkTouchEvent(o);let t=this.gridster.el.getBoundingClientRect(),i=this.getPixelsX(o,t),n=this.getPixelsY(o,t),s={x:this.gridster.pixelsToPositionX(i,Math.floor,!0),y:this.gridster.pixelsToPositionY(n,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(e&&(s.cols=Math.min(Math.abs(e.x-s.x)+1,this.gridster.$options.emptyCellDragMaxCols),s.rows=Math.min(Math.abs(e.y-s.y)+1,this.gridster.$options.emptyCellDragMaxRows),e.x<s.x?s.x=e.x:e.x-s.x>this.gridster.$options.emptyCellDragMaxCols-1&&(s.x=this.gridster.movingItem?this.gridster.movingItem.x:0),e.y<s.y?s.y=e.y:e.y-s.y>this.gridster.$options.emptyCellDragMaxRows-1&&(s.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),!(!this.gridster.$options.enableOccupiedCellDrop&&this.gridster.checkCollision(s)))return s}},Qi=class{gridster;lastGridColumnStyles={};lastGridRowStyles={};constructor(o){this.gridster=o}destroy(){this.gridster=null}updateItem(o,e,t){if(this.gridster.mobile)this.clearCellPosition(t,o),this.gridster.$options.keepFixedHeightInMobile?t.setStyle(o,"height",(e.rows-1)*this.gridster.$options.margin+e.rows*this.gridster.$options.fixedRowHeight+"px"):t.setStyle(o,"height",e.rows*this.gridster.curWidth/e.cols+"px"),this.gridster.$options.keepFixedWidthInMobile?t.setStyle(o,"width",this.gridster.$options.fixedColWidth+"px"):t.setStyle(o,"width",""),t.setStyle(o,"margin-bottom",this.gridster.$options.margin+"px"),t.setStyle(o,te.LTR?"margin-right":"margin-left","");else{let i=Math.round(this.gridster.curColWidth*e.x),n=Math.round(this.gridster.curRowHeight*e.y),s=this.gridster.curColWidth*e.cols-this.gridster.$options.margin,p=this.gridster.curRowHeight*e.rows-this.gridster.$options.margin;this.setCellPosition(t,o,i,n),t.setStyle(o,"width",s+"px"),t.setStyle(o,"height",p+"px");let g=null,h=null;this.gridster.$options.outerMargin&&(this.gridster.rows===e.rows+e.y&&(this.gridster.$options.outerMarginBottom!==null?g=this.gridster.$options.outerMarginBottom+"px":g=this.gridster.$options.margin+"px"),this.gridster.columns===e.cols+e.x&&(this.gridster.$options.outerMarginBottom!==null?h=this.gridster.$options.outerMarginRight+"px":h=this.gridster.$options.margin+"px")),t.setStyle(o,"margin-bottom",g),t.setStyle(o,te.LTR?"margin-right":"margin-left",h)}}updateGridster(){let o="",e="",t="",i="";if(this.gridster.$options.gridType===w.Fit)o=w.Fit,e=w.ScrollVertical,t=w.ScrollHorizontal,i=w.Fixed;else if(this.gridster.$options.gridType===w.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,o=w.ScrollVertical,e=w.Fit,t=w.ScrollHorizontal,i=w.Fixed;else if(this.gridster.$options.gridType===w.ScrollHorizontal){let n=this.gridster.$options.rowHeightRatio,s=n>=1?n:n+1;this.gridster.curColWidth=this.gridster.curRowHeight*s,o=w.ScrollHorizontal,e=w.Fit,t=w.ScrollVertical,i=w.Fixed}else this.gridster.$options.gridType===w.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),o=w.Fixed,e=w.Fit,t=w.ScrollVertical,i=w.ScrollHorizontal):this.gridster.$options.gridType===w.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),o=w.ScrollVertical,e=w.Fit,t=w.ScrollHorizontal,i=w.Fixed):this.gridster.$options.gridType===w.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),o=w.ScrollHorizontal,e=w.Fit,t=w.ScrollVertical,i=w.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==w.Fit?this.gridster.renderer.removeClass(this.gridster.el,o):this.gridster.renderer.addClass(this.gridster.el,o),this.gridster.renderer.removeClass(this.gridster.el,e),this.gridster.renderer.removeClass(this.gridster.el,t),this.gridster.renderer.removeClass(this.gridster.el,i)}getGridColumnStyle(o){let e={left:this.gridster.curColWidth*o,width:this.gridster.curColWidth-this.gridster.$options.margin,height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};e.style=j(D({},this.getLeftPosition(e.left)),{width:e.width+"px",height:e.height+"px"});let t=this.lastGridColumnStyles[o];return t&&t.left===e.left&&t.width===e.width&&t.height===e.height?t.style:(this.lastGridColumnStyles[o]=e,e.style)}getGridRowStyle(o){let e={top:this.gridster.curRowHeight*o,width:this.gridster.gridColumns.length*this.gridster.curColWidth+this.gridster.$options.margin,height:this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};e.style=j(D({},this.getTopPosition(e.top)),{width:e.width+"px",height:e.height+"px"});let t=this.lastGridRowStyles[o];return t&&t.top===e.top&&t.width===e.width&&t.height===e.height?t.style:(this.lastGridRowStyles[o]=e,e.style)}getLeftPosition(o){let e=this.gridster.$options.dirType===te.RTL?-o:o;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+e+"px)"}:{left:this.getLeftMargin()+e+"px"}}getTopPosition(o){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+o+"px)"}:{top:this.getTopMargin()+o+"px"}}clearCellPosition(o,e){this.gridster.$options.useTransformPositioning?o.setStyle(e,"transform",""):(o.setStyle(e,"top",""),o.setStyle(e,"left",""))}setCellPosition(o,e,t,i){let n=this.gridster.$options.dirType===te.RTL?-t:t;if(this.gridster.$options.useTransformPositioning){let s="translate3d("+n+"px, "+i+"px, 0)";o.setStyle(e,"transform",s)}else o.setStyle(e,"left",this.getLeftMargin()+n+"px"),o.setStyle(e,"top",this.getTopMargin()+i+"px")}getLeftMargin(){return this.gridster.$options.outerMargin?this.gridster.$options.outerMarginLeft!==null?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?this.gridster.$options.outerMarginTop!==null?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}},Ha=(()=>{class r{renderer;previewStyle$;gridRenderer;el;sub;constructor(e,t){this.renderer=t,this.el=e.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(e=>this.previewStyle(e))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}previewStyle(e){e?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,e,this.renderer)):this.renderer.setStyle(this.el,"display","")}static \u0275fac=function(t){return new(t||r)(c(qe),c(Ct))};static \u0275cmp=O({type:r,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},decls:0,vars:0,template:function(t,i){},styles:[`gridster-preview{position:absolute;display:none;background:#00000026}
`],encapsulation:2})}return r})(),xt=(()=>{class r{renderer;cdRef;zone;options;movingItem;el;$options;mobile;curWidth;curHeight;grid;columns=0;rows=0;curColWidth;curRowHeight;gridColumns=[];gridRows=[];windowResize;dragInProgress;emptyCell;compact;gridRenderer;previewStyle$=new I;calculateLayout$=new L;resize$=new L;destroy$=new L;constructor(e,t,i,n){this.renderer=t,this.cdRef=i,this.zone=n,this.el=e.nativeElement,this.$options=JSON.parse(JSON.stringify(Va)),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new qi(this),this.compact=new Zi(this),this.gridRenderer=new Qi(this)}static checkCollisionTwoItemsForSwaping(e,t){let i=e.cols===1?0:1,n=t.cols===1?0:1,s=e.rows===1?0:1,p=t.rows===1?0:1;return e.x+i<t.x+t.cols&&e.x+e.cols>t.x+n&&e.y+s<t.y+t.rows&&e.y+e.rows>t.y+p}checkCollisionTwoItems(e,t){if(!(e.x<t.x+t.cols&&e.x+e.cols>t.x&&e.y<t.y+t.rows&&e.y+e.rows>t.y))return!1;if(!this.$options.allowMultiLayer)return!0;let n=this.$options.defaultLayerIndex,s=e.layerIndex===void 0?n:e.layerIndex,p=t.layerIndex===void 0?n:t.layerIndex;return s===p}ngOnInit(){this.options.initCallback&&this.options.initCallback(this),this.calculateLayout$.pipe(_o(0),A(this.destroy$)).subscribe(()=>this.calculateLayout()),this.resize$.pipe(Ze(()=>go(100)),A(this.destroy$)).subscribe(()=>this.resize())}ngOnChanges(e){e.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged,resize:this.onResize,getNextPossiblePosition:this.getNextPossiblePosition,getFirstPossiblePosition:this.getFirstPossiblePosition,getLastPossiblePosition:this.getLastPossiblePosition,getItemComponent:t=>this.getItemComponent(t)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}resize(){let e,t;this.$options.gridType==="fit"&&!this.mobile?(t=this.el.offsetWidth,e=this.el.offsetHeight):(t=this.el.clientWidth,e=this.el.clientHeight),(t!==this.curWidth||e!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=re.merge(this.$options,this.options,this.$options),!this.$options.disableWindowResize&&!this.windowResize?this.windowResize=this.renderer.listen("window","resize",this.onResize):this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null),this.emptyCell.updateOptions()}optionsChanged=()=>{this.setOptions();let e=this.grid.length-1,t;for(;e>=0;e--)t=this.grid[e],t.updateOptions();this.calculateLayout()};ngOnDestroy(){this.destroy$.next(),this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),this.emptyCell=null,this.compact.destroy(),this.compact=null}onResize=()=>{this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())};checkIfToResize(){let e=this.el.clientWidth,t=this.el.offsetWidth,i=this.el.scrollWidth,n=this.el.clientHeight,s=this.el.offsetHeight,p=this.el.scrollHeight,g=e<t&&p>s&&p-s<t-e,h=n<s&&i>t&&i-t<s-n;return g?!1:!h}checkIfMobile(){return this.$options.useBodyForBreakpoint?this.$options.mobileBreakpoint>document.body.clientWidth:this.$options.mobileBreakpoint>this.curWidth}setGridSize(){let e=this.el,t,i;this.$options.setGridSize||this.$options.gridType===w.Fit&&!this.mobile?(t=e.offsetWidth,i=e.offsetHeight):(t=e.clientWidth,i=e.clientHeight),this.curWidth=t,this.curHeight=i}setGridDimensions(){this.setGridSize(),!this.mobile&&this.checkIfMobile()?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&!this.checkIfMobile()&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let e=this.$options.minRows,t=this.$options.minCols,i=this.grid.length-1,n;for(;i>=0;i--)n=this.grid[i],n.notPlaced||(e=Math.max(e,n.$item.y+n.$item.rows),t=Math.max(t,n.$item.x+n.$item.cols));e+=this.$options.addEmptyRowsCount,(this.columns!==t||this.rows!==e)&&(this.columns=t,this.rows=e,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let i=-this.$options.margin;this.$options.outerMarginLeft!==null?(i+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(i+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),this.$options.outerMarginRight!==null?(i+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(i+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-i)/this.columns;let n=-this.$options.margin;this.$options.outerMarginTop!==null?(n+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(n+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),this.$options.outerMarginBottom!==null?(n+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(n+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-n)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let e=this.grid.length-1,t;for(;e>=0;e--)t=this.grid[e],t.setSize(),t.drag.toggle(),t.resize.toggle();this.resize$.next()}updateGrid(){this.$options.displayGrid==="always"&&!this.mobile?this.renderer.addClass(this.el,"display-grid"):this.$options.displayGrid==="onDrag&Resize"&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):(this.$options.displayGrid==="none"||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=r.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=r.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(e){e.$item.cols===void 0&&(e.$item.cols=this.$options.defaultItemCols,e.item.cols=e.$item.cols,e.itemChanged()),e.$item.rows===void 0&&(e.$item.rows=this.$options.defaultItemRows,e.item.rows=e.$item.rows,e.itemChanged()),e.$item.x===-1||e.$item.y===-1?this.autoPositionItem(e):this.checkCollision(e.$item)&&(this.$options.disableWarnings||(e.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(e.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?e.notPlaced=!0:this.autoPositionItem(e)),this.grid.push(e),this.calculateLayout$.next()}removeItem(e){this.grid.splice(this.grid.indexOf(e),1),this.calculateLayout$.next(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(e.item,e)}checkCollision(e){let t=!1;if(this.options.itemValidateCallback&&(t=!this.options.itemValidateCallback(e)),!t&&this.checkGridCollision(e)&&(t=!0),!t){let i=this.findItemWithItem(e);i&&(t=i)}return t}checkGridCollision(e){let t=e.y>-1&&e.x>-1,i=e.cols+e.x<=this.$options.maxCols,n=e.rows+e.y<=this.$options.maxRows,s=e.maxItemCols===void 0?this.$options.maxItemCols:e.maxItemCols,p=e.minItemCols===void 0?this.$options.minItemCols:e.minItemCols,g=e.maxItemRows===void 0?this.$options.maxItemRows:e.maxItemRows,h=e.minItemRows===void 0?this.$options.minItemRows:e.minItemRows,z=e.cols<=s&&e.cols>=p,x=e.rows<=g&&e.rows>=h,$=e.minItemArea===void 0?this.$options.minItemArea:e.minItemArea,se=e.maxItemArea===void 0?this.$options.maxItemArea:e.maxItemArea,ke=e.cols*e.rows,Oe=$<=ke,Fe=se>=ke;return!(t&&i&&n&&z&&x&&Oe&&Fe)}findItemWithItem(e){let t=0,i;for(;t<this.grid.length;t++)if(i=this.grid[t],i.$item!==e&&this.checkCollisionTwoItems(i.$item,e))return i;return!1}findItemsWithItem(e){let t=[],i=0,n;for(;i<this.grid.length;i++)n=this.grid[i],n.$item!==e&&this.checkCollisionTwoItems(n.$item,e)&&t.push(n);return t}autoPositionItem(e){this.getNextPossiblePosition(e.$item)?(e.notPlaced=!1,e.item.x=e.$item.x,e.item.y=e.$item.y,e.itemChanged()):(e.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(e.item,["cols","rows","x","y"])))}getNextPossiblePosition=(e,t={})=>{e.cols===-1&&(e.cols=this.$options.defaultItemCols),e.rows===-1&&(e.rows=this.$options.defaultItemRows),this.setGridDimensions();let i=t.y||0,n;for(;i<this.rows;i++)for(e.y=i,n=t.x||0;n<this.columns;n++)if(e.x=n,!this.checkCollision(e))return!0;let s=this.$options.maxRows>=this.rows+e.rows,p=this.$options.maxCols>=this.columns+e.cols;return!(this.rows<=this.columns&&s)&&p?(e.x=this.columns,e.y=0,!0):s?(e.y=this.rows,e.x=0,!0):!1};getFirstPossiblePosition=e=>{let t=Object.assign({},e);return this.getNextPossiblePosition(t),t};getLastPossiblePosition=e=>{let t={y:0,x:0};t=this.grid.reduce((n,s)=>{let p={y:s.$item.y+s.$item.rows-1,x:s.$item.x+s.$item.cols-1};return re.compareItems(n,p)===1?p:n},t);let i=Object.assign({},e);return this.getNextPossiblePosition(i,t),i};pixelsToPositionX(e,t,i){let n=t(e/this.curColWidth);return i?n:Math.max(n,0)}pixelsToPositionY(e,t,i){let n=t(e/this.curRowHeight);return i?n:Math.max(n,0)}positionXToPixels(e){return e*this.curColWidth}positionYToPixels(e){return e*this.curRowHeight}getItemComponent(e){return this.grid.find(t=>t.item===e)}checkCollisionForSwaping(e){let t=!1;if(this.options.itemValidateCallback&&(t=!this.options.itemValidateCallback(e)),!t&&this.checkGridCollision(e)&&(t=!0),!t){let i=this.findItemWithItemForSwapping(e);i&&(t=i)}return t}findItemWithItemForSwapping(e){let t=this.grid.length-1,i;for(;t>-1;t--)if(i=this.grid[t],i.$item!==e&&r.checkCollisionTwoItemsForSwaping(i.$item,e))return i;return!1}previewStyle(e=!1){this.movingItem?(this.compact&&e&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}static getNewArrayLength(e,t,i){let n=Math.max(e,Math.floor(t/i));return n<0?0:Number.isFinite(n)?Math.floor(n):0}static \u0275fac=function(t){return new(t||r)(c(qe),c(Ct),c(N),c(Li))};static \u0275cmp=O({type:r,selectors:[["gridster"]],inputs:{options:"options"},features:[k],ngContentSelectors:ys,decls:6,vars:2,consts:[[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"]],template:function(t,i){t&1&&(Tt(),ki(0,Da,1,1,"div",0,Gi),ki(2,Fa,1,1,"div",1,Gi),It(4),S(5,"gridster-preview",2)),t&2&&(Wi(i.gridColumns),l(2),Wi(i.gridRows),l(3),a("gridRenderer",i.gridRenderer)("previewStyle$",i.previewStyle$))},dependencies:[Ht,Ha],styles:[`gridster{position:relative;box-sizing:border-box;background:gray;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}
`],encapsulation:2})}return r})(),Oi=class{fromSouth;fromNorth;fromEast;fromWest;pushedItems;pushedItemsTemp;pushedItemsTempPath;pushedItemsPath;gridsterItem;gridster;pushedItemsOrder;tryPattern;iteration=0;constructor(o){this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=o,this.gridster=o.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(o,e){if(this.gridster.$options.pushItems&&!e){this.pushedItemsOrder=[],this.iteration=0;let t=this.push(this.gridsterItem,o);return t||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],t}else return!1}restoreTempItems(){let o=this.pushedItemsTemp.length-1;for(;o>-1;o--)this.removeFromTempPushed(this.pushedItemsTemp[o])}restoreItems(){let o=0,e=this.pushedItems.length,t;for(;o<e;o++)t=this.pushedItems[o],t.$item.x=t.item.x||0,t.$item.y=t.item.y||0,t.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let o=0,e=this.pushedItems.length,t;for(;o<e;o++)t=this.pushedItems[o],t.checkItemChanges(t.$item,t.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let o=this.pushedItems.length-1,e=!1;for(;o>-1;o--)this.checkPushedItem(this.pushedItems[o],o)&&(e=!0);e&&this.checkPushBack()}push(o,e){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(o.$item)||e==="")return!1;let t=this.gridster.findItemsWithItem(o.$item),i=e===this.fromNorth||e===this.fromWest;t.sort((h,z)=>i?z.$item.y-h.$item.y||z.$item.x-h.$item.x:h.$item.y-z.$item.y||h.$item.x-z.$item.x);let n=0,s,p=!0,g=[];for(;n<t.length;n++){if(s=t[n],s===this.gridsterItem)continue;if(!s.canBeDragged()){p=!1;break}let h=this.pushedItemsTemp.indexOf(s);if(h>-1&&this.pushedItemsTempPath[h].length>10){p=!1;break}if(this.tryPattern[e][0].call(this,s,o))this.pushedItemsOrder.push(s),g.push(s);else if(this.tryPattern[e][1].call(this,s,o))this.pushedItemsOrder.push(s),g.push(s);else if(this.tryPattern[e][2].call(this,s,o))this.pushedItemsOrder.push(s),g.push(s);else if(this.tryPattern[e][3].call(this,s,o))this.pushedItemsOrder.push(s),g.push(s);else{p=!1;break}}if(!p&&(n=this.pushedItemsOrder.lastIndexOf(g[0]),n>-1)){let h=this.pushedItemsOrder.length-1;for(;h>=n;h--)s=this.pushedItemsOrder[h],this.pushedItemsOrder.pop(),this.removeFromTempPushed(s),this.removeFromPushedItem(s)}return this.iteration++,p}trySouth(o,e){return this.gridster.$options.pushDirections.south?(this.addToTempPushed(o),o.$item.y=e.$item.y+e.$item.rows,this.push(o,this.fromNorth)?(o.setSize(),this.addToPushed(o),!0):(this.removeFromTempPushed(o),!1)):!1}tryNorth(o,e){return this.gridster.$options.pushDirections.north?(this.addToTempPushed(o),o.$item.y=e.$item.y-o.$item.rows,this.push(o,this.fromSouth)?(o.setSize(),this.addToPushed(o),!0):(this.removeFromTempPushed(o),!1)):!1}tryEast(o,e){return this.gridster.$options.pushDirections.east?(this.addToTempPushed(o),o.$item.x=e.$item.x+e.$item.cols,this.push(o,this.fromWest)?(o.setSize(),this.addToPushed(o),!0):(this.removeFromTempPushed(o),!1)):!1}tryWest(o,e){return this.gridster.$options.pushDirections.west?(this.addToTempPushed(o),o.$item.x=e.$item.x-o.$item.cols,this.push(o,this.fromEast)?(o.setSize(),this.addToPushed(o),!0):(this.removeFromTempPushed(o),!1)):!1}addToTempPushed(o){let e=this.pushedItemsTemp.indexOf(o);e===-1&&(e=this.pushedItemsTemp.push(o)-1,this.pushedItemsTempPath[e]=[]),this.pushedItemsTempPath[e].push({x:o.$item.x,y:o.$item.y})}removeFromTempPushed(o){let e=this.pushedItemsTemp.indexOf(o),t=this.pushedItemsTempPath[e].pop();t&&(o.$item.x=t.x,o.$item.y=t.y,o.setSize(),this.pushedItemsTempPath[e].length||(this.pushedItemsTemp.splice(e,1),this.pushedItemsTempPath.splice(e,1)))}addToPushed(o){if(this.pushedItems.indexOf(o)<0)this.pushedItems.push(o),this.pushedItemsPath.push([{x:o.item.x||0,y:o.item.y||0},{x:o.$item.x,y:o.$item.y}]);else{let e=this.pushedItems.indexOf(o);this.pushedItemsPath[e].push({x:o.$item.x,y:o.$item.y})}}removeFromPushed(o){o>-1&&(this.pushedItems.splice(o,1),this.pushedItemsPath.splice(o,1))}removeFromPushedItem(o){let e=this.pushedItems.indexOf(o);e>-1&&(this.pushedItemsPath[e].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(e,1),this.pushedItemsPath.splice(e,1)))}checkPushedItem(o,e){let t=this.pushedItemsPath[e],i=t.length-2,n,s,p,g=!1;for(;i>-1;i--)n=t[i],s=o.$item.x,p=o.$item.y,o.$item.x=n.x,o.$item.y=n.y,this.gridster.findItemWithItem(o.$item)?(o.$item.x=s,o.$item.y=p):(o.setSize(),t.splice(i+1,t.length-i-1),g=!0);return t.length<2&&this.removeFromPushed(e),g}},yt,et,vs=50,Ie,vt,Ae,Nt,wt,Et,Rt;function Ns(r,o,e,t,i,n,s,p,g,h){yt=r.$options.scrollSensitivity,et=r.$options.scrollSpeed,Ie=r.el,vt=g,Ae=h;let z=Ie.offsetWidth,x=Ie.offsetHeight,$=Ie.scrollLeft,se=Ie.scrollTop,ke=e-se,Oe=x+se-e-i,{clientX:Fe,clientY:$i}=n;if(!r.$options.disableScrollVertical)if(s.clientY<$i&&Oe<yt){if(bs(),vt&&Ae&&!Ae.south||Rt)return;Rt=Os(1,p,s)}else if(s.clientY>$i&&se>0&&ke<yt){if(xs(),vt&&Ae&&!Ae.north||Et)return;Et=Os(-1,p,s)}else s.clientY!==$i&&ro();let wa=$+z-o-t,Ea=o-$;if(!r.$options.disableScrollHorizontal)if(s.clientX<Fe&&wa<=yt){if(Rs(),vt&&Ae&&!Ae.east||Nt)return;Nt=Ss(1,p,s)}else if(s.clientX>Fe&&$>0&&Ea<yt){if(Es(),vt&&Ae&&!Ae.west||wt)return;wt=Ss(-1,p,s)}else s.clientX!==Fe&&oo()}function Os(r,o,e){let t=e.clientY;return window.setInterval(()=>{(!Ie||r===-1&&Ie.scrollTop-et<0)&&ro(),Ie.scrollTop+=r*et,t+=r*et,o({clientX:e.clientX,clientY:t})},vs)}function Ss(r,o,e){let t=e.clientX;return window.setInterval(()=>{(!Ie||r===-1&&Ie.scrollLeft-et<0)&&oo(),Ie.scrollLeft+=r*et,t+=r*et,o({clientX:t,clientY:e.clientY})},vs)}function ws(){oo(),ro(),Ie=null}function oo(){Es(),Rs()}function ro(){bs(),xs()}function Es(){Nt&&(clearInterval(Nt),Nt=0)}function Rs(){wt&&(clearInterval(wt),wt=0)}function xs(){Rt&&(clearInterval(Rt),Rt=0)}function bs(){Et&&(clearInterval(Et),Et=0)}var Ji=class{swapedItem;gridsterItem;gridster;constructor(o){this.gridsterItem=o,this.gridster=o.gridster}destroy(){this.gridster=this.gridsterItem=this.swapedItem=null}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){let o=this.swapedItem.$item.x,e=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=o,this.swapedItem.$item.y=e):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(o){let e;if(this.gridster.$options.swapWhileDragging?e=this.gridster.checkCollisionForSwaping(o.$item):e=this.gridster.checkCollision(o.$item),e&&e!==!0&&e.canBeDragged()){let t=e,i=t.$item.x,n=t.$item.y,s=o.$item.x,p=o.$item.y,g=s-i,h=p-n;t.$item.x=o.item.x-g,t.$item.y=o.item.y-h,o.$item.x=t.item.x+g,o.$item.y=t.item.y+h,this.gridster.checkCollision(t.$item)||this.gridster.checkCollision(o.$item)?(o.$item.x=s,o.$item.y=p,t.$item.x=i,t.$item.y=n):(t.setSize(),this.swapedItem=t,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}},Xa="gridster-item-resizable-handler",ue=function(r){return r.UP="UP",r.DOWN="DOWN",r.LEFT="LEFT",r.RIGHT="RIGHT",r}(ue||{}),eo=class{zone;gridsterItem;gridster;lastMouse;offsetLeft;offsetTop;margin;outerMarginTop;outerMarginRight;outerMarginBottom;outerMarginLeft;diffTop;diffLeft;originalClientX;originalClientY;top;left;height;width;positionX;positionY;positionXBackup;positionYBackup;enabled;mousemove;mouseup;mouseleave;cancelOnBlur;touchmove;touchend;touchcancel;mousedown;touchstart;push;swap;path;collision=!1;constructor(o,e,t){this.zone=t,this.gridsterItem=o,this.gridster=e,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),this.gridsterItem=this.gridster=this.collision=null,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(o){o.which&&o.which!==1||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,o),o.stopPropagation(),o.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=o.clientX,this.originalClientY=o.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.gridster.$options.dirType===te.RTL?this.diffLeft=o.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:this.diffLeft=o.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=o.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new Oi(this.gridsterItem),this.swap=new Ji(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}dragMove=o=>{o.stopPropagation(),o.preventDefault(),re.checkTouchEvent(o);let e=this.getDirections(o);this.gridster.options.enableBoundaryControl&&(e.includes(ue.UP)&&this.gridsterItem.el.getBoundingClientRect().top<this.gridster.el.getBoundingClientRect().top+(this.outerMarginTop??this.margin)&&(e=e.filter(t=>t!=ue.UP),o=new MouseEvent(o.type,{clientX:o.clientX,clientY:this.lastMouse.clientY})),e.includes(ue.LEFT)&&this.gridsterItem.el.getBoundingClientRect().left<this.gridster.el.getBoundingClientRect().left+(this.outerMarginLeft??this.margin)&&(e=e.filter(t=>t!=ue.LEFT),o=new MouseEvent(o.type,{clientX:this.lastMouse.clientX,clientY:o.clientY})),e.includes(ue.RIGHT)&&this.gridsterItem.el.getBoundingClientRect().right>this.gridster.el.getBoundingClientRect().right-(this.outerMarginRight??this.margin)&&(e=e.filter(t=>t!=ue.RIGHT),o=new MouseEvent(o.type,{clientX:this.lastMouse.clientX,clientY:o.clientY})),e.includes(ue.DOWN)&&this.gridsterItem.el.getBoundingClientRect().bottom>this.gridster.el.getBoundingClientRect().bottom-(this.outerMarginBottom??this.margin)&&(e=e.filter(t=>t!=ue.DOWN),o=new MouseEvent(o.type,{clientX:o.clientX,clientY:this.lastMouse.clientY}))),e.length&&(this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,Ns(this.gridster,this.left,this.top,this.width,this.height,o,this.lastMouse,this.calculateItemPositionFromMousePosition),this.calculateItemPositionFromMousePosition(o))};calculateItemPositionFromMousePosition=o=>{this.gridster.options.scale?this.calculateItemPositionWithScale(o,this.gridster.options.scale):this.calculateItemPositionWithoutScale(o),this.calculateItemPosition(),this.lastMouse.clientX=o.clientX,this.lastMouse.clientY=o.clientY,this.zone.run(()=>{this.gridster.updateGrid()})};calculateItemPositionWithScale(o,e){this.gridster.$options.dirType===te.RTL?this.left=this.gridster.el.scrollWidth-this.originalClientX+(o.clientX-this.originalClientX)/e+this.diffLeft:this.left=this.originalClientX+(o.clientX-this.originalClientX)/e+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(o.clientY-this.originalClientY)/e+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(o){this.gridster.$options.dirType===te.RTL?this.left=this.gridster.el.scrollWidth-o.clientX+this.diffLeft:this.left=o.clientX+this.offsetLeft-this.diffLeft,this.top=o.clientY+this.offsetTop-this.diffTop}dragStop=o=>{o.stopPropagation(),o.preventDefault(),ws(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,o)).then(this.makeDrag,this.cancelDrag):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})};cancelDrag=()=>{this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)};makeDrag=()=>{this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&this.collision!==!0&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)};calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){let o=this.path[this.path.length-1],e="";o.x<this.gridsterItem.$item.x?e=this.push.fromWest:o.x>this.gridsterItem.$item.x?e=this.push.fromEast:o.y<this.gridsterItem.$item.y?e=this.push.fromNorth:o.y>this.gridsterItem.$item.y&&(e=this.push.fromSouth),this.push.pushItems(e,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&this.collision!==!0&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}else this.collision=!1;this.gridster.previewStyle(!0)}toggle(){let o=this.gridsterItem.canBeDragged();!this.enabled&&o?(this.enabled=!this.enabled,this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartDelay),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartDelay)):this.enabled&&!o&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}dragStartDelay=o=>{if(o.target.classList.contains(Xa)||re.checkContentClassForEvent(this.gridster,o))return;if(re.checkTouchEvent(o),!this.gridster.$options.draggable.delayStart){this.dragStart(o);return}let t=setTimeout(()=>{this.dragStart(o),x()},this.gridster.$options.draggable.delayStart),i=this.gridsterItem.renderer.listen("document","mouseup",x),n=this.gridsterItem.renderer.listen("document","mouseleave",x),s=this.gridsterItem.renderer.listen("window","blur",x),p=this.gridsterItem.renderer.listen("document","touchmove",z),g=this.gridsterItem.renderer.listen("document","touchend",x),h=this.gridsterItem.renderer.listen("document","touchcancel",x);function z($){re.checkTouchEvent($),(Math.abs($.clientX-o.clientX)>9||Math.abs($.clientY-o.clientY)>9)&&x()}function x(){clearTimeout(t),s(),i(),n(),p(),g(),h()}};getDirections(o){let e=[];return this.lastMouse.clientX===0&&this.lastMouse.clientY===0&&(this.lastMouse.clientY=o.clientY,this.lastMouse.clientX=o.clientX),this.lastMouse.clientY>o.clientY&&e.push(ue.UP),this.lastMouse.clientY<o.clientY&&e.push(ue.DOWN),this.lastMouse.clientX<o.clientX&&e.push(ue.RIGHT),this.lastMouse.clientX>o.clientX&&e.push(ue.LEFT),e}},to=class{fromSouth;fromNorth;fromEast;fromWest;pushedItems;pushedItemsPath;gridsterItem;gridster;tryPattern;constructor(o){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=o,this.gridster=o.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(o){return this.gridster.$options.pushResizeItems?this.push(this.gridsterItem,o):!1}restoreItems(){let o=0,e=this.pushedItems.length,t;for(;o<e;o++)t=this.pushedItems[o],t.$item.x=t.item.x||0,t.$item.y=t.item.y||0,t.$item.cols=t.item.cols||1,t.$item.row=t.item.row||1,t.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let o=0,e=this.pushedItems.length,t;for(;o<e;o++)t=this.pushedItems[o],t.checkItemChanges(t.$item,t.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let o=this.pushedItems.length-1,e=!1;for(;o>-1;o--)this.checkPushedItem(this.pushedItems[o],o)&&(e=!0);e&&this.checkPushBack()}push(o,e){let t=this.gridster.checkCollision(o.$item);if(t&&t!==!0&&t!==this.gridsterItem&&t.canBeResized()){if(this.tryPattern[e].call(this,t,o,e))return!0}else if(t===!1)return!0;return!1}trySouth(o,e,t){let i=o.$item.y,n=o.$item.rows;return o.$item.y=e.$item.y+e.$item.rows,o.$item.rows=n+i-o.$item.y,!this.gridster.checkCollisionTwoItems(o.$item,e.$item)&&!this.gridster.checkGridCollision(o.$item)?(o.setSize(),this.addToPushed(o),this.push(e,t),!0):(o.$item.y=i,o.$item.rows=n,!1)}tryNorth(o,e,t){let i=o.$item.rows;return o.$item.rows=e.$item.y-o.$item.y,!this.gridster.checkCollisionTwoItems(o.$item,e.$item)&&!this.gridster.checkGridCollision(o.$item)?(o.setSize(),this.addToPushed(o),this.push(e,t),!0):(o.$item.rows=i,!1)}tryEast(o,e,t){let i=o.$item.x,n=o.$item.cols;return o.$item.x=e.$item.x+e.$item.cols,o.$item.cols=n+i-o.$item.x,!this.gridster.checkCollisionTwoItems(o.$item,e.$item)&&!this.gridster.checkGridCollision(o.$item)?(o.setSize(),this.addToPushed(o),this.push(e,t),!0):(o.$item.x=i,o.$item.cols=n,!1)}tryWest(o,e,t){let i=o.$item.cols;return o.$item.cols=e.$item.x-o.$item.x,!this.gridster.checkCollisionTwoItems(o.$item,e.$item)&&!this.gridster.checkGridCollision(o.$item)?(o.setSize(),this.addToPushed(o),this.push(e,t),!0):(o.$item.cols=i,!1)}addToPushed(o){if(this.pushedItems.indexOf(o)<0)this.pushedItems.push(o),this.pushedItemsPath.push([{x:o.item.x||0,y:o.item.y||0,cols:o.item.cols||0,rows:o.item.rows||0},{x:o.$item.x,y:o.$item.y,cols:o.$item.cols,rows:o.$item.rows}]);else{let e=this.pushedItems.indexOf(o);this.pushedItemsPath[e].push({x:o.$item.x,y:o.$item.y,cols:o.$item.cols,rows:o.$item.rows})}}removeFromPushed(o){o>-1&&(this.pushedItems.splice(o,1),this.pushedItemsPath.splice(o,1))}checkPushedItem(o,e){let t=this.pushedItemsPath[e],i=t.length-2,n,s,p,g,h;for(;i>-1;i--)n=t[i],s=o.$item.x,p=o.$item.y,g=o.$item.cols,h=o.$item.rows,o.$item.x=n.x,o.$item.y=n.y,o.$item.cols=n.cols,o.$item.rows=n.rows,this.gridster.findItemWithItem(o.$item)?(o.$item.x=s,o.$item.y=p,o.$item.cols=g,o.$item.rows=h):(o.setSize(),t.splice(i+1,t.length-1-i));return t.length<2?(this.removeFromPushed(e),!0):!1}},io=class{zone;gridsterItem;gridster;lastMouse;itemBackup;resizeEventScrollType;directionFunction=null;resizeEnabled;resizableHandles;mousemove;mouseup;mouseleave;cancelOnBlur;touchmove;touchend;touchcancel;push;pushResize;minHeight;minWidth;offsetTop;offsetLeft;diffTop;diffLeft;diffRight;diffBottom;margin;outerMarginTop;outerMarginRight;outerMarginBottom;outerMarginLeft;originalClientX;originalClientY;top;left;bottom;right;width;height;newPosition;constructor(o,e,t){this.zone=t,this.gridsterItem=o,this.gridster=e,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={west:!1,east:!1,north:!1,south:!1}}destroy(){this.gridster?.previewStyle(),this.gridster=this.gridsterItem=null}dragStart(o){if(o.which&&o.which!==1)return;this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,o),o.stopPropagation(),o.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=o.clientX,this.lastMouse.clientY=o.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=o.clientX,this.originalClientY=o.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=o.clientX+this.offsetLeft-this.left,this.diffRight=o.clientX+this.offsetLeft-this.right,this.diffTop=o.clientY+this.offsetTop-this.top,this.diffBottom=o.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new Oi(this.gridsterItem),this.pushResize=new to(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid();let{classList:e}=o.target;e.contains("handle-n")?(this.resizeEventScrollType.north=!0,this.directionFunction=this.handleNorth):e.contains("handle-w")?this.gridster.$options.dirType===te.RTL?(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):e.contains("handle-s")?(this.resizeEventScrollType.south=!0,this.directionFunction=this.handleSouth):e.contains("handle-e")?this.gridster.$options.dirType===te.RTL?(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):e.contains("handle-nw")?this.gridster.$options.dirType===te.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):e.contains("handle-ne")?this.gridster.$options.dirType===te.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):e.contains("handle-sw")?this.gridster.$options.dirType===te.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):e.contains("handle-se")&&(this.gridster.$options.dirType===te.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast))}dragMove=o=>{if(this.directionFunction===null)throw new Error("The `directionFunction` has not been set before calling `dragMove`.");o.stopPropagation(),o.preventDefault(),re.checkTouchEvent(o),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,Ns(this.gridster,this.left,this.top,this.width,this.height,o,this.lastMouse,this.directionFunction,!0,this.resizeEventScrollType);let e=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(o.clientX-this.originalClientX)/e,clientY:this.originalClientY+(o.clientY-this.originalClientY)/e}),this.lastMouse.clientX=o.clientX,this.lastMouse.clientY=o.clientY,this.zone.run(()=>{this.gridster.updateGrid()})};dragStop=o=>{o.stopPropagation(),o.preventDefault(),ws(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,o)).then(this.makeResize,this.cancelResize):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})};cancelResize=()=>{this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null};makeResize=()=>{this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null};handleNorth=o=>{this.top=o.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height?(this.height=this.minHeight,this.top=this.bottom-this.minHeight):this.gridster.options.enableBoundaryControl&&(this.top=Math.max(0,this.top),this.height=this.bottom-this.top);let e=this.gridster.options.pushItems?this.margin:0;if(this.newPosition=this.gridster.pixelsToPositionY(this.top+e,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.top=this.gridster.positionYToPixels(this.gridsterItem.$item.y),this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)};handleWest=o=>{let e=this.gridster.$options.dirType===te.RTL?this.originalClientX+(this.originalClientX-o.clientX):o.clientX;this.left=e+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width?(this.width=this.minWidth,this.left=this.right-this.minWidth):this.gridster.options.enableBoundaryControl&&(this.left=Math.max(0,this.left),this.width=this.right-this.left);let t=this.gridster.options.pushItems?this.margin:0;if(this.newPosition=this.gridster.pixelsToPositionX(this.left+t,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.left=this.gridster.positionXToPixels(this.gridsterItem.$item.x),this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)};handleSouth=o=>{if(this.height=o.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.gridster.options.enableBoundaryControl){let t=this.outerMarginBottom??this.margin,i=this.gridster.el.getBoundingClientRect();this.bottom=Math.min(this.bottom,i.bottom-i.top-2*t),this.height=this.bottom-this.top}let e=this.gridster.options.pushItems?0:this.margin;if(this.newPosition=this.gridster.pixelsToPositionY(this.bottom+e,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)};handleEast=o=>{let e=this.gridster.$options.dirType===te.RTL?this.originalClientX+(this.originalClientX-o.clientX):o.clientX;if(this.width=e+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.gridster.options.enableBoundaryControl){let i=this.outerMarginRight??this.margin,n=this.gridster.el.getBoundingClientRect();this.right=Math.min(this.right,n.right-n.left-2*i),this.width=this.right-this.left}let t=this.gridster.options.pushItems?0:this.margin;if(this.newPosition=this.gridster.pixelsToPositionX(this.right+t,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)};handleNorthWest=o=>{this.handleNorth(o),this.handleWest(o)};handleNorthEast=o=>{this.handleNorth(o),this.handleEast(o)};handleSouthWest=o=>{this.handleSouth(o),this.handleWest(o)};handleSouthEast=o=>{this.handleSouth(o),this.handleEast(o)};toggle(){this.resizeEnabled=this.gridsterItem.canBeResized(),this.resizableHandles=this.gridsterItem.getResizableHandles()}dragStartDelay(o){if(re.checkTouchEvent(o),!this.gridster.$options.resizable.delayStart){this.dragStart(o);return}let e=setTimeout(()=>{this.dragStart(o),z()},this.gridster.$options.resizable.delayStart),{cancelMouse:t,cancelMouseLeave:i,cancelOnBlur:n,cancelTouchMove:s,cancelTouchEnd:p,cancelTouchCancel:g}=this.zone.runOutsideAngular(()=>{let x=this.gridsterItem.renderer.listen("document","mouseup",z),$=this.gridsterItem.renderer.listen("document","mouseleave",z),se=this.gridsterItem.renderer.listen("window","blur",z),ke=this.gridsterItem.renderer.listen("document","touchmove",h),Oe=this.gridsterItem.renderer.listen("document","touchend",z),Fe=this.gridsterItem.renderer.listen("document","touchcancel",z);return{cancelMouse:x,cancelMouseLeave:$,cancelOnBlur:se,cancelTouchMove:ke,cancelTouchEnd:Oe,cancelTouchCancel:Fe}});function h(x){re.checkTouchEvent(x),(Math.abs(x.clientX-o.clientX)>9||Math.abs(x.clientY-o.clientY)>9)&&z()}function z(){clearTimeout(e),n(),t(),i(),s(),p(),g()}}setItemTop(o){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,o)}setItemLeft(o){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,o,this.top)}setItemHeight(o){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",o+"px")}setItemWidth(o){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",o+"px")}},ct=(()=>{class r{renderer;zone;item;itemInit=new I;itemChange=new I;itemResize=new I;$item;el;gridster;top;left;width;height;drag;resize;notPlaced;init;get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}constructor(e,t,i,n){this.renderer=i,this.zone=n,this.el=e.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=t,this.drag=new eo(this,t,this.zone),this.resize=new io(this,t,this.zone)}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(e){e.item&&(this.updateOptions(),this.init||this.gridster.calculateLayout$.next()),e.item&&e.item.previousValue&&this.setSize()}updateOptions(){this.$item=re.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0,resizableHandles:{s:void 0,e:void 0,n:void 0,w:void 0,se:void 0,ne:void 0,sw:void 0,nw:void 0}})}ngOnDestroy(){this.gridster.removeItem(this),this.drag.destroy(),this.resize.destroy(),this.gridster=this.drag=this.resize=null}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){let e=this.$item.y*this.gridster.curRowHeight,t=this.$item.x*this.gridster.curColWidth,i=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,n=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=e,this.left=t,!this.init&&i>0&&n>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(i!==this.width||n!==this.height)&&(this.width=i,this.height=n,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(e,t){e.rows===t.rows&&e.cols===t.cols&&e.x===t.x&&e.y===t.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=t.x||0,this.$item.y=t.y||0,this.$item.cols=t.cols||1,this.$item.rows=t.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayout$.next(),this.itemChanged()))}canBeDragged(){let e=this.gridster.$options.draggable.enabled,t=this.$item.dragEnabled===void 0?e:this.$item.dragEnabled;return!this.gridster.mobile&&e&&t}canBeResized(){let e=this.gridster.$options.resizable.enabled,t=this.$item.resizeEnabled===void 0?e:this.$item.resizeEnabled;return!this.gridster.mobile&&e&&t}getResizableHandles(){let e=this.gridster.$options.resizable.handles,t=this.$item.resizableHandles;return t===void 0?e:D(D({},e),t)}bringToFront(e){if(e&&e<=0)return;let t=this.getLayerIndex(),i=this.gridster.$options.maxLayerIndex;if(t<i){let n=e?t+e:i;this.item.layerIndex=this.$item.layerIndex=n>i?i:n}}sendToBack(e){if(e&&e<=0)return;let t=this.getLayerIndex();if(t>0){let i=e?t-e:0;this.item.layerIndex=this.$item.layerIndex=i<0?0:i}}getLayerIndex(){return this.item.layerIndex!==void 0?this.item.layerIndex:this.gridster.$options.defaultLayerIndex!==void 0?this.gridster.$options.defaultLayerIndex:0}static \u0275fac=function(t){return new(t||r)(c(qe),c(xt),c(Ct),c(Li))};static \u0275cmp=O({type:r,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(t,i){t&2&&vo("z-index",i.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},features:[k],ngContentSelectors:ys,decls:9,vars:8,consts:[[1,"gridster-item-resizable-handler","handle-s"],[1,"gridster-item-resizable-handler","handle-e"],[1,"gridster-item-resizable-handler","handle-n"],[1,"gridster-item-resizable-handler","handle-w"],[1,"gridster-item-resizable-handler","handle-se"],[1,"gridster-item-resizable-handler","handle-ne"],[1,"gridster-item-resizable-handler","handle-sw"],[1,"gridster-item-resizable-handler","handle-nw"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(t,i){t&1&&(Tt(),It(0),f(1,$a,1,0,"div",0)(2,La,1,0,"div",1)(3,Aa,1,0,"div",2)(4,Ga,1,0,"div",3)(5,ka,1,0,"div",4)(6,Wa,1,0,"div",5)(7,Ba,1,0,"div",6)(8,Ua,1,0,"div",7)),t&2&&(l(),$e(i.resize.resizableHandles!=null&&i.resize.resizableHandles.s&&i.resize.resizeEnabled?1:-1),l(),$e(i.resize.resizableHandles!=null&&i.resize.resizableHandles.e&&i.resize.resizeEnabled?2:-1),l(),$e(i.resize.resizableHandles!=null&&i.resize.resizableHandles.n&&i.resize.resizeEnabled?3:-1),l(),$e(i.resize.resizableHandles!=null&&i.resize.resizableHandles.w&&i.resize.resizeEnabled?4:-1),l(),$e(i.resize.resizableHandles!=null&&i.resize.resizableHandles.se&&i.resize.resizeEnabled?5:-1),l(),$e(i.resize.resizableHandles!=null&&i.resize.resizableHandles.ne&&i.resize.resizeEnabled?6:-1),l(),$e(i.resize.resizableHandles!=null&&i.resize.resizableHandles.sw&&i.resize.resizeEnabled?7:-1),l(),$e(i.resize.resizableHandles!=null&&i.resize.resizableHandles.nw&&i.resize.resizeEnabled?8:-1))},styles:[`gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:#fff;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}
`],encapsulation:2})}return r})();var yi=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Re({type:r});static \u0275inj=Ee({})}return r})();var zs=ie(za());var Ms={displayGrid:Si.None,gridType:w.VerticalFixed,compactType:F.CompactUp,margin:15,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,mobileBreakpoint:640,minCols:12,maxCols:12,minRows:12,fixedRowHeight:44,minItemArea:1,defaultItemCols:6,defaultItemRows:6,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,scrollSensitivity:10,scrollSpeed:20,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{enabled:!1,ignoreContent:!0,dragHandleClass:"nui-dashboard__widget--drag-handle"},resizable:{enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0}},swap:!1,pushItems:!0,pushResizeItems:!0,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1};var no=(()=>{class r{constructor(e){this.gridsterItem=e}ngOnChanges(e){e.nuiGridsterItemWidgetId&&(this.gridsterItem.widgetId=this.nuiGridsterItemWidgetId)}static{this.\u0275fac=function(t){return new(t||r)(c(ct,3))}}static{this.\u0275dir=At({type:r,selectors:[["","nuiGridsterItemWidgetId",""]],inputs:{nuiGridsterItemWidgetId:"nuiGridsterItemWidgetId"},standalone:!1,features:[k]})}}return r})();function Ka(r,o){}function Za(r,o){if(r&1){let e=v();Y(0)(1,2,0),T("output",function(i){_(e);let n=u();return C(n.onOutput(i))}),f(3,Ka,0,0,"ng-template",3),T("attached",function(i){_(e);let n=W(2);return C(n.attached(i))}),K()()}if(r&2){let e=W(2),t=u();l(),a("componentId",t.rootNode)("componentType",t.pizza[t.rootNode]==null?null:t.pizza[t.rootNode].componentType)("properties",t.pizza[t.rootNode]==null?null:t.pizza[t.rootNode].properties)("providers",t.pizza[t.rootNode]==null?null:t.pizza[t.rootNode].providers)("outputs",t.outputs),l(2),a("cdkPortalOutlet",e.portal)}}var Ye=(()=>{class r{get pizzagna(){return this._pizzagnaBuffer||this._pizzagna}set pizzagna(e){this._pizzagna=e,this._pizzagnaBuffer=null}constructor(e,t,i){this.pizzagnaService=e,this.logger=t,this.eventBus=i,this.rootNode=M,this.pizzagnaChange=new I,this.output=new I,i.getStream(at).subscribe(n=>{let s=Te(this.pizzagna,n.payload.path,n.payload.value);this._pizzagnaBuffer=s,this.pizzagnaChange.emit(s)})}ngOnChanges(e){if(e.pizzagna){let t=e.pizzagna.previousValue;this.pizzagnaService.updatePizzagna(this.pizzagna),this.pizza=this.mergePizzagnaIntoPizza(this.pizza,t,this.pizzagna),this.pizza&&!this.pizza[this.rootNode]&&this.logger.warn("Pizzagna doesn't contain root node '"+this.rootNode+"'. Pizzagna = ",this.pizzagna),this.pizzagnaService.updateComponents(this.pizza)}}onOutput(e){this.output.emit(e)}mergePizzagnaIntoPizza(e,t,i){return Mr(e,this.getLayerChanges(t,i,H.Structure),this.getLayerChanges(t,i,H.Configuration),this.getLayerChanges(t,i,H.Data))}getLayerChanges(e,t,i){return{previousValue:this.getLayerSafe(e,i),currentValue:this.getLayerSafe(t,i)}}getLayerSafe(e,t){return e&&e[t]}static{this.\u0275fac=function(t){return new(t||r)(c(Xe),c(Z),c(Ne))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-pizzagna"]],inputs:{rootNode:"rootNode",pizzagna:"pizzagna",outputs:"outputs"},outputs:{pizzagnaChange:"pizzagnaChange",output:"output"},standalone:!1,features:[Be([Xe,zr,{provide:Ne,useClass:Zt}]),k],decls:1,vars:1,consts:[["componentPortal","nuiComponentPortal"],[4,"ngIf"],["nuiComponentPortal","",3,"output","componentId","componentType","properties","providers","outputs"],[3,"attached","cdkPortalOutlet"]],template:function(t,i){t&1&&f(0,Za,4,6,"ng-container",1),t&2&&a("ngIf",i.pizza&&i.pizza[i.rootNode])},dependencies:[fe,U,Pe],encapsulation:2})}}return r})();var so=(()=>{class r{constructor(e,t){this.widgetConfigurationService=e,this.widgetTypesService=t,this.widgetChange=new I,this.rootNode=M}ngOnChanges(e){if(e.widget){let t=this.widget.type;if((e.widget.previousValue&&e.widget.previousValue.type)!==t){let n=this.widgetTypesService.getWidgetType(t,this.widget.version);this.rootNode=n?.paths?.widget?.root||M}this.widgetConfigurationService.updateWidget(this.widget)}}onPizzagnaChange(e){this.widgetChange.emit(j(D({},this.widget),{pizzagna:e}))}static{this.\u0275fac=function(t){return new(t||r)(c(ui),c(oe))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-widget"]],hostAttrs:[1,"nui-widget"],inputs:{widget:"widget"},outputs:{widgetChange:"widgetChange"},standalone:!1,features:[Be([ui]),k],decls:1,vars:2,consts:[[3,"pizzagnaChange","rootNode","pizzagna"]],template:function(t,i){t&1&&(d(0,"nui-pizzagna",0),T("pizzagnaChange",function(s){return i.onPizzagnaChange(s)}),m()),t&2&&a("rootNode",i.rootNode)("pizzagna",i.widget.pizzagna)},dependencies:[Ye],encapsulation:2})}}return r})();function Qa(r,o){if(r&1){let e=v();d(0,"nui-widget",5),T("widgetChange",function(i){_(e);let n=u(2);return C(n.onWidgetChange(i))}),m()}if(r&2){let e=u().$implicit;a("widget",e.value),Gt("widget-id",e.key)("widget-type",e.value.type)("widget-guid",e.value.uniqueKey)}}function Ja(r,o){if(r&1&&(d(0,"gridster-item",3),f(1,Qa,1,4,"nui-widget",4),m()),r&2){let e=o.$implicit,t=u(),i=W(4);a("item",t.dashboard.positions[e.key])("nuiGridsterItemWidgetId",e.key),l(),a("ngIf",t.shouldWidgetRender(e.key))("ngIfElse",i)}}function el(r,o){r&1&&(d(0,"div",6),S(1,"nui-loading",7),m()),r&2&&(l(),a("active",!0))}var ao=(()=>{class r{get dashboard(){return this.dashboardBuffer||this._dashboard}set dashboard(e){this._dashboard=e,this.dashboardBuffer=null}get hostClass(){return!0}constructor(e){this.eventBus=e,this.editMode=!1,this.gridsterConfigChange=new I,this.dashboardChange=new I,this.gridsterItemsVisibilityMap={},this.orderWidgets=(t,i)=>{let n=this.dashboard.positions[t.key],s=this.dashboard.positions[i.key];return n.y-s.y||n.x-s.x},this.trackByFn=(t,i)=>i.key,this.updateWidgetPosition=(t,i)=>{let n=String(i.widgetId),s=Te(this.dashboard,"positions."+n,t);this.dashboardChange.emit(s),this.eventBus.getStream(di).next({widgetId:n,payload:t})},this.emitWidgetResize=(t,i)=>{let n=i.widgetId;this.eventBus.getStream(li).next({widgetId:n,payload:{widgetId:n,height:i.height,width:i.width}})}}ngAfterViewInit(){setTimeout(()=>this.calculateWidgetsVisibility())}onGridsterScroll(){this.calculateWidgetsVisibility()}ngOnChanges(e){if(e.gridsterConfig){if(e.gridsterConfig.isFirstChange()){let t=(0,zs.default)(this.gridsterConfig||{},Ms);this.hookEvent(t,"itemChangeCallback",this.updateWidgetPosition),this.hookEvent(t,"itemResizeCallback",this.emitWidgetResize),this.gridsterConfigChange.emit(t)}this.gridsterConfig?.api&&this.gridsterConfig.api.optionsChanged?.()}if(e.editMode){if(!this.gridsterConfig.resizable)throw new Error("Gridster's resizable prop is undefined");if(this.gridsterConfig.resizable.enabled=this.editMode,!this.gridsterConfig.draggable)throw new Error("Gridster's draggable prop is undefined");this.gridsterConfig.draggable.enabled=this.editMode,this.gridsterConfigChange.emit(Object.assign({},this.gridsterConfig)),this.eventBus.getStream(mi).next({payload:this.editMode})}}onWidgetChange(e){this.dashboard.widgets[e.id]&&this.updateWidget(e)}updateWidget(e){let t=this.dashboard;if(!this.dashboard.positions[e.id]&&this.gridsterConfig?.api){let i=this.gridsterConfig.api.getFirstPossiblePosition?.({x:0,y:0,rows:this.gridsterConfig?.defaultItemRows,cols:this.gridsterConfig?.defaultItemCols});t=Te(t,`positions.${e.id}`,i)}t=Te(t,`widgets.${e.id}`,e),this.dashboardBuffer=t,this.dashboardChange.emit(t)}removeWidget(e,t=!0){let i=this.dashboard;if(!i.widgets[e])return;let n=Object.assign({},i.widgets);if(delete n[e],i=Te(i,"widgets",n),t){let s=Object.assign({},i.positions);delete s[e],i=Te(i,"positions",s)}this.dashboardChange.emit(i)}shouldWidgetRender(e){return this.belowFoldLazyLoadingConfig?.enabled?this.gridsterItemsVisibilityMap[e]:!0}hookEvent(e,t,i){let n=e[t];e[t]=(s,p)=>{i(s,p),n&&n(s,p)}}calculateWidgetsVisibility(){if(!this.belowFoldLazyLoadingConfig?.enabled)return;let e=this.gridster.el.getBoundingClientRect();this.gridsterItemsVisibilityMap=this.gridsterItems.reduce((t,i)=>{let{el:n}=i,s=i.widgetId;if(!this.belowFoldLazyLoadingConfig.configuration?.reloadWidgetsOnScroll&&t[s])return t;let p=n.getBoundingClientRect(),g=()=>p.top>e.top&&p.top<e.bottom||p.bottom>e.top&&p.bottom<e.bottom,h=()=>p.left>e.left&&p.left<e.right||p.right>e.left&&p.right<e.right,z=g()&&h();return t[s]=z,t},this.gridsterItemsVisibilityMap)}static{this.\u0275fac=function(t){return new(t||r)(c(Xi))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-dashboard"]],viewQuery:function(t,i){if(t&1&&(xe(xt,5),xe(ct,5)),t&2){let n;Se(n=ye())&&(i.gridster=n.first),Se(n=ye())&&(i.gridsterItems=n)}},hostVars:2,hostBindings:function(t,i){t&2&&Qe("nui-dashboard",i.hostClass)},inputs:{gridsterConfig:"gridsterConfig",dashboard:"dashboard",editMode:"editMode",belowFoldLazyLoadingConfig:"belowFoldLazyLoadingConfig"},outputs:{gridsterConfigChange:"gridsterConfigChange",dashboardChange:"dashboardChange"},standalone:!1,features:[Be([{provide:Xi,useClass:Zt}]),k],decls:5,vars:6,consts:[["emptyWidgetTpl",""],[1,"nui-dashboard__gridster",3,"scroll","options"],["class","nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId"],["class","w-100 h-100 d-block",3,"widget","widgetChange",4,"ngIf","ngIfElse"],[1,"w-100","h-100","d-block",3,"widgetChange","widget"],[1,"w-100","h-100","d-block"],[3,"active"]],template:function(t,i){if(t&1){let n=v();d(0,"gridster",1),T("scroll",function(){return _(n),C(i.onGridsterScroll())}),f(1,Ja,2,4,"gridster-item",2),E(2,"keyvalue"),m(),f(3,el,2,1,"ng-template",null,0,ve)}t&2&&(a("options",i.gridsterConfig),l(),a("ngForOf",ae(2,3,i.dashboard.widgets,i.orderWidgets))("ngForTrackBy",i.trackByFn))},dependencies:[Q,U,xt,ct,no,hi,so,bo],styles:[`.nui-dashboard__gridster{background-color:var(--nui-color-bg-workspace,#f0f0f0)}.nui-dashboard__gridster .gridster-preview{border-width:4px;border-style:solid;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.nui-dashboard__gridster .gridster-preview:before{background-color:var(--nui-color-selected-contrast,#00c4d2);border-radius:50%;content:"";display:block;height:40px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:40px;z-index:1}.nui-dashboard__gridster .gridster-preview:after{color:var(--nui-color-icon-light,#fff);content:"+";display:block;font-size:19px;font-weight:700;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);z-index:2}.nui-dashboard__gridster-item{box-shadow:0 0 5px #999;box-shadow:0 0 var(--nui-space-xs, 5px) var(--nui-color-line-dark, #999999);background-color:var(--nui-color-bg-light,#fff)}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler{border-bottom-color:#00c4d2;border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);margin:0;z-index:2000}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler.handle-se{border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);right:2px;bottom:2px}.mobile .nui-dashboard__gridster-item.nui-dashboard__gridster-item{height:auto!important}
`],encapsulation:2})}}return r})();var il=(r,o)=>({"widget-medium":r,"widget-small":o});function ol(r,o){if(r&1&&(d(0,"div",6),S(1,"nui-icon",7),d(2,"span",8),P(3),m()()),r&2){let e=o.$implicit;l(),a("icon",e.key),l(),a("title",e.value),l(),We(e.value)}}function rl(r,o){r&1&&S(0,"nui-icon",9)}var nl=600,Ds=480,Fs=(()=>{class r{static{this.lateLoadKey="ListGroupItemComponent"}set widgetWidth(e){this.isMedium=e<=nl&&e>Ds,this.isSmall=e<=Ds}constructor(e){this.changeDetector=e,this.navigated=new I}onButtonClick(){this.canNavigate&&this.navigated.emit(this)}static{this.\u0275fac=function(t){return new(t||r)(c(N))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-list-group-item"]],hostAttrs:[1,"w-100"],inputs:{id:"id",label:"label",statuses:"statuses",canNavigate:"canNavigate",widgetWidth:"widgetWidth"},outputs:{navigated:"navigated"},standalone:!1,decls:7,vars:8,consts:[[1,"list-group-item",3,"click","ngClass"],[1,"list-group-item__label",3,"title"],[1,"list-group-item__statuses"],[1,"statuses"],["class","status-column",4,"ngFor","ngForOf"],["icon","caret-right",4,"ngIf"],[1,"status-column"],[1,"mr-2",3,"icon"],[1,"status-column__label",3,"title"],["icon","caret-right"]],template:function(t,i){t&1&&(d(0,"div",0),T("click",function(){return i.onButtonClick()}),d(1,"div",1),P(2),m(),d(3,"div",2)(4,"div",3),f(5,ol,4,3,"div",4),m(),f(6,rl,1,0,"nui-icon",5),m()()),t&2&&(a("ngClass",Eo(5,il,i.isMedium,i.isSmall)),l(),a("title",i.label),l(),We(i.label),l(3),a("ngForOf",i.statuses),l(),a("ngIf",i.canNavigate))},dependencies:[Ue,Q,U,He],styles:[".list-group-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.list-group-item__label[_ngcontent-%COMP%]{width:25%;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item__statuses[_ngcontent-%COMP%]{width:75%;display:flex;align-items:center}.list-group-item[_ngcontent-%COMP%]   .status-column[_ngcontent-%COMP%]{display:flex;width:75px;min-width:75px;max-width:100%;justify-content:flex-start;align-items:center;padding-right:10px}.list-group-item[_ngcontent-%COMP%]   .status-column__label[_ngcontent-%COMP%]{margin-left:5px;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]{justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%], .widget-medium[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]{justify-content:flex-end}.widget-small[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%], .widget-small[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{justify-content:space-between}"],changeDetection:0})}}return r})();function sl(r,o){if(r&1&&S(0,"nui-icon",9),r&2){let e=u();a("icon",e.icon)("status",e.status)}}function al(r,o){if(r&1&&P(0),r&2){let e=u();We(e.status)}}function ll(r,o){r&1&&S(0,"nui-icon",10)}var $s=(()=>{class r{static{this.lateLoadKey="ListLeafItemComponent"}onButtonClick(){this.canNavigate&&this.navigated.emit(this)}constructor(e,t){this.changeDetector=e,this.eventBus=t,this.navigated=new I,this.searchTerm="",this.destroy$=new L}ngOnInit(){this.eventBus.getStream(Er).pipe(A(this.destroy$)).subscribe(e=>{this.searchTerm=e.payload??"",this.changeDetector.markForCheck()})}static{this.\u0275fac=function(t){return new(t||r)(c(N),c(Ne))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-list-leaf-item"]],hostAttrs:[1,"w-100"],inputs:{icon:"icon",status:"status",detailedUrl:"detailedUrl",label:"label",canNavigate:"canNavigate",url:"url"},outputs:{navigated:"navigated"},standalone:!1,decls:12,vars:14,consts:[["statusTpl",""],[1,"nui-list-leaf-item",3,"click"],[1,"nui-list-leaf-item__info-container"],[1,"nui-list-leaf-item__icon-container"],["class","mr-1",3,"icon","status",4,"ngIf","ngIfElse"],[1,"nui-list-leaf-item__description"],[1,"nui-text-ellipsis",3,"ngClass","innerHTML"],[1,"nui-text-secondary","nui-text-ellipsis",3,"innerHTML"],["icon","caret-right",4,"ngIf"],[1,"mr-1",3,"icon","status"],["icon","caret-right"]],template:function(t,i){if(t&1){let n=v();d(0,"div",1),T("click",function(){return _(n),C(i.onButtonClick())}),d(1,"div",2)(2,"div",3),f(3,sl,1,2,"nui-icon",4),m(),d(4,"div",5),S(5,"a",6),E(6,"nuiHighlight"),S(7,"div",7),E(8,"nuiHighlight"),m(),f(9,al,1,1,"ng-template",null,0,ve),m(),f(11,ll,1,0,"nui-icon",8),m()}if(t&2){let n=W(10);l(3),a("ngIf",i.icon)("ngIfElse",n),l(2),a("ngClass",i.url?"":"not-active")("innerHTML",ae(6,8,i.label,i.searchTerm),Ai),Gt("target",i.url?"_blank":null)("href",i.url||null,To),l(2),a("innerHTML",ae(8,11,i.detailedUrl,i.searchTerm),Ai),l(4),a("ngIf",i.canNavigate)}},dependencies:[Ue,U,He,Go],styles:[".nui-list-leaf-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nui-list-leaf-item__info-container[_ngcontent-%COMP%]{display:flex;height:40px}.nui-list-leaf-item__icon-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:30px}.nui-list-leaf-item__description[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr 1fr;grid-template-columns:1fr;max-width:100%}a.not-active[_ngcontent-%COMP%]{text-decoration:none;color:#111}"],changeDetection:0})}}return r})();var Ls=(()=>{class r{constructor(e,t,i){this.changeDetector=e,this.formBuilder=t,this.logger=i,this.formReady=new I}ngOnChanges(e){this.form||this.initForm(),this.contentFormatterProperties?Object.keys(this.contentFormatterProperties).forEach(t=>{this.form?.get(t)?.setValue(this.contentFormatterProperties[t])}):this.form?.get("currentMetric")?.patchValue(this.properMetric)}ngOnInit(){this.initForm()}initForm(){this.form=this.formBuilder.group({currentMetric:[this.properMetric,de.required]}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}get currentMetric(){return this.form.get("currentMetric")}get properMetric(){let e=this.contentFormatterProperties?.currentMetric;return this.dsOutput?.result.find(i=>i.id===e)?e:this.dsOutput?.result[0]?.id}addCustomFormControls(e){}static{this.\u0275fac=function(t){return new(t||r)(b(N),b(V),b(Z))}}static{this.\u0275prov=le({token:r,factory:r.\u0275fac})}}return r})();var ut=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=Re({type:r})}static{this.\u0275inj=Ee({imports:[Bi,st,Bi]})}}return r})();var wi=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=Re({type:r})}static{this.\u0275inj=Ee({imports:[Ot,ut,Ot]})}}return r})();function pl(r,o){if(r&1&&(d(0,"nui-select-v2-option",7),P(1),m()),r&2){let e=o.$implicit;a("value",e==null?null:e.id),l(),X(" ",e==null?null:e.name," ")}}var As=(()=>{class r extends Ls{static{this.lateLoadKey="DonutContentPercentageConfigurationComponent"}constructor(e,t,i,n){super(e,t,i),this.pizzagnaService=n}static{this.\u0275fac=function(t){return new(t||r)(c(N),c(V),c(Z),c(Xe))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-donut-content-configurator"]],standalone:!1,features:[rt],decls:7,vars:3,consts:()=>{let e;e=$localize`:447ffd4cbfd3d8c3ca8dd216c0a82ecadc24a7de4196232656388343089:Metrics`;let t;return t=$localize`:b17406f843dc33feb81478ae8273dc1aae06bbf62244196281006156184: This field is required `,[t,[3,"formGroup"],[1,"mt-4"],["caption",e,1,"mb-3",3,"control"],["formControlName","currentMetric"],[3,"value",4,"ngFor","ngForOf"],["for","required"],[3,"value"]]},template:function(t,i){t&1&&(d(0,"div",1)(1,"div",2)(2,"nui-form-field",3)(3,"nui-select-v2",4),f(4,pl,2,2,"nui-select-v2-option",5),m(),d(5,"nui-validation-message",6),G(6,0),m()()()()),t&2&&(a("formGroup",i.form),l(2),a("control",i.currentMetric),l(2),a("ngForOf",i.dsOutput==null?null:i.dsOutput.result))},dependencies:[Q,pe,J,ee,me,ce,Ce,_e,be],encapsulation:2})}}return r})();var ks=ie(Ra());var ml=()=>["errorState"],cl=r=>({dataSource:r});function hl(r,o){if(r&1&&(d(0,"nui-select-v2-option",9),P(1),m()),r&2){let e=o.$implicit;a("title",e==null?null:e.label)("value",e),l(),X(" ",e.label," ")}}function ul(r,o){}var Ws=(()=>{class r{static{this.lateLoadKey="DataSourceConfigurationV2Component"}constructor(e,t,i,n,s,p,g){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.providerRegistryService=n,this.eventBus=s,this.injector=p,this.logger=g,this.dataSourceProviders=[],this.errorComponent=Ii.lateLoadKey,this.formReady=new I,this.hasDataSourceError=!1,this.dataFieldIds=new L}ngOnInit(){this.form=this.formBuilder.group({providerId:[this.providerId||"",[de.required]],properties:[this.properties||{}],dataSource:[null,[de.required]]}),this.form.setValidators([()=>this.hasDataSourceError?{dataSourceError:!0}:null]),this.form.get("dataSource")?.valueChanges.subscribe(e=>{this.form.get("providerId")?.setValue(e?.providerId),e?.properties&&this.form.get("properties")?.setValue(e?.properties)}),this.formReady.emit(this.form)}ngOnChanges(e){if(e.providerId&&!e.providerId.isFirstChange()||e.properties&&!e.properties.isFirstChange()){let t=e.providerId?.previousValue,i=e.properties?.previousValue;if(t!==this.providerId||i!==this.properties){let n=this.dataSourceProviders.find(s=>s.providerId===this.providerId&&(0,ks.default)(s.properties??{},this.properties??{}));n?(this.form?.get("dataSource")?.setValue(n),this.invokeDataSource(n)):(this.form?.get("providerId")?.setValue(this.providerId),this.form?.get("properties")?.setValue(this.properties),this.invokeDataSource({properties:this.properties,providerId:this.providerId}))}}if(e.dataSourceProviders&&!e.dataSourceProviders.isFirstChange()&&this.dataSourceProviders.length===1){let t=this.dataSourceProviders[0];this.form.get("dataSource")?.setValue(t),this.invokeDataSource(t)}}ngAfterViewInit(){if(this.dataSourceProviders&&this.dataSourceProviders.length===1){let e=this.dataSourceProviders[0];this.form.get("dataSource")?.setValue(e),this.invokeDataSource(e)}}onDataSourceSelected(e){this.eventBus.next(Dr,{}),this.invokeDataSource(e)}invokeDataSource(e){if(!e.providerId)return;let t=this.providerRegistryService.getProvider(e.providerId);if(t){this.dataSource=this.providerRegistryService.getProviderInstance(t,this.injector),this.eventBus.next(dt,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe(Co(1)).subscribe(n=>{this.eventBus.next(lt,{payload:n}),this.dataFieldIds.next(Object.keys(n.result||n))});let i=this.dataSource;i?.updateConfiguration&&i.updateConfiguration(e.properties??{}),setTimeout(()=>{this.dataSource.applyFilters()})}else this.logger.warn("No provider found for id:",e.providerId)}onErrorState(e){this.hasDataSourceError=e,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}static{this.\u0275fac=function(t){return new(t||r)(c(N),c(he),c(V),c(Br),c(Ne),c($t),c(Z))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",properties:"properties",providerId:"providerId",errorComponent:"errorComponent"},outputs:{formReady:"formReady"},standalone:!1,features:[k],decls:14,vars:27,consts:()=>{let e;return e=$localize`:87aabb92d16c162e46a9ef3703445351a3e417396527825109146827187:Select data source`,[["componentPortal","nuiComponentPortal"],[3,"formGroup","state"],["headerTitle","Data Source",3,"headerIcon","subtitle"],[1,"datasource-configuration__accordion-content"],[3,"control"],["placeholder",e,"formControlName","dataSource",1,"datasource-configuration__accordion-content__datasource-input",3,"valueSelected","title","popupViewportMargin"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"output","componentId","componentType","outputs","properties"],[3,"attached","cdkPortalOutlet"],[3,"title","value"]]},template:function(t,i){if(t&1){let n=v();d(0,"nui-widget-editor-accordion",1),E(1,"nuiWidgetEditorAccordionFormState"),E(2,"async"),S(3,"nui-widget-editor-accordion-header",2),E(4,"nuiFormHeaderIconPipe"),E(5,"async"),d(6,"div",3)(7,"nui-form-field",4)(8,"nui-select-v2",5),E(9,"async"),T("valueSelected",function(p){return _(n),C(i.onDataSourceSelected(p))}),f(10,hl,2,3,"nui-select-v2-option",6),m()(),Y(11,7,0),T("output",function(p){return _(n),C(i.onErrorState(p.payload))}),f(13,ul,0,0,"ng-template",8),T("attached",function(p){_(n);let g=W(12);return C(g.attached(p))}),K(),m()()}if(t&2){let n,s,p=W(12);a("formGroup",i.form)("state",B(2,15,B(1,13,i.form))),l(3),a("headerIcon",B(5,20,ae(4,17,i.form,"database")))("subtitle",(n=i.form.get("dataSource"))==null||n.value==null?null:n.value.label),l(4),a("control",i.form.get("dataSource")),l(),a("title",(s=i.form.get("dataSource"))==null||s.value==null?null:s.value.label)("popupViewportMargin",B(9,22,i.configuratorHeading.height$)),l(2),a("ngForOf",i.dataSourceProviders),l(),a("componentId",i.errorComponent)("componentType",i.errorComponent)("outputs",Le(24,ml))("properties",Je(25,cl,i.dataSource)),l(2),a("cdkPortalOutlet",p.portal)}},dependencies:[Q,pe,J,ee,me,fe,Pe,ce,Ce,_e,Me,je,ge,ze,De],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0})}}return r})();var Ei=(()=>{class r{constructor(e,t,i,n){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.logger=n,this.formReady=new I,this.dropdownItems={}}ngOnChanges(e){e.formatterDefinition&&(this.mapDropdownItems(),this.initForm()),e.dataFields&&this.mapDropdownItems(),e.formatter&&this.updateForm()}mapDropdownItems(){if(!this.dataFields){this.logger.error("There are no dataFields defined for formatter:",this.formatterDefinition);return}this.dropdownItems=Object.keys(this.formatterDefinition.dataTypes).reduce((e,t)=>{let i=this.formatterDefinition.dataTypes[t];return e[t]=i?this.dataFields.filter(n=>typeof i=="string"?n.dataType===i:i.includes(n.dataType)):this.dataFields,e},{})}get dataFieldIds(){return this.form.get("dataFieldIds")}initForm(){let e=this.formatterDefinition.dataTypes||{},t=Object.keys(e).reduce((i,n)=>(i[n]=[this.formatter?.properties?.dataFieldIds?.[n]??null,de.required],i),{});this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group(t)}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}updateForm(){this.form.patchValue(this.formatter.properties??{},{onlySelf:!1,emitEvent:!1})}addCustomFormControls(e){}static{this.\u0275fac=function(t){return new(t||r)(b(N),b(he),b(V),b(Z))}}static{this.\u0275prov=le({token:r,factory:r.\u0275fac})}}return r})();var co=ie(Kt()),Us=ie(Do());var Ri=(()=>{class r{constructor(e){this.widgetTypesService=e}transform(e,t="widget"){return e?.type?this.widgetTypesService.getWidgetType(e.type,e.version).paths?.[t]?.root:null}static{this.\u0275fac=function(t){return new(t||r)(c(oe,16))}}static{this.\u0275pipe=So({name:"nuiPizzagnaRoot",type:r,pure:!0,standalone:!1})}}return r})();var fl=["previewPizzagnaComponent"];function _l(r,o){if(r&1){let e=v();d(0,"nui-pizzagna",9,0),E(2,"nuiPizzagnaRoot"),T("pizzagnaChange",function(i){_(e);let n=u();return C(n.onPizzagnaChange(i))}),m()}if(r&2){let e=u();a("rootNode",ae(2,2,e.previewWidget,"widget"))("pizzagna",e.previewWidget==null?null:e.previewWidget.pizzagna)}}var Ke=(()=>{class r{static{this.lateLoadKey="ConfiguratorComponent"}constructor(e,t){this.widgetTypesService=e,this.changeDetector=t,this.result=new I,this.formPortalAttached=new I,this.submitError=new L,this.destroy$=new L}ngOnInit(){this.previewWidget||(this.previewWidget={id:null,type:"previewPlaceholder",pizzagna:this.widgetTypesService.getWidgetType("previewPlaceholder").widget})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getPreview(){return this.previewPizzagnaComponent}handleSubmitError(){this.submitError.next()}onFormPortalAttached(e){this.formPortalAttached.emit(e)}updateWidget(e){this.previewWidget=e,this.changeDetector.markForCheck()}formCancel(){this.result.next(null)}formSubmit(){this.result.next(this.previewWidget)}onPizzagnaChange(e){this.previewWidget&&(this.previewWidget.pizzagna=e)}static{this.\u0275fac=function(t){return new(t||r)(c(oe),c(N))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-configurator"]],viewQuery:function(t,i){if(t&1&&xe(fl,5),t&2){let n;Se(n=ye())&&(i.previewPizzagnaComponent=n.first)}},hostAttrs:[1,"nui-configurator"],inputs:{formPortal:"formPortal",previewWidget:"previewWidget"},outputs:{result:"result",formPortalAttached:"formPortalAttached"},standalone:!1,features:[Be([pt,{provide:Ho,useValue:".nui-dashwiz-step--active .configurator-scrollable"}])],decls:9,vars:4,consts:[["previewPizzagnaComponent",""],[1,"nui-configurator__backdrop"],[1,"nui-configurator__content"],["orientation","right","paneSize","30vw","paneMinSize","20vw","paneMaxSize","80vw","isResizable","true",1,"h-100",3,"headerPadding","sidePaneBodyPadding"],[1,"nui-configurator__preview","d-flex","align-items-center","justify-content-center"],[1,"nui-configurator__preview-area"],["class","flex-grow-1 w-100",3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],["nuiPanelEmbeddedBody","",1,"nui-configurator__body"],[3,"attached","cdkPortalOutlet"],[1,"flex-grow-1","w-100",3,"pizzagnaChange","rootNode","pizzagna"]],template:function(t,i){t&1&&(S(0,"div",1),d(1,"div",2)(2,"nui-panel",3)(3,"div",4)(4,"div",5),S(5,"nui-preview-overlay"),f(6,_l,3,5,"nui-pizzagna",6),m()(),d(7,"div",7),Y(8,8),T("attached",function(s){return i.onFormPortalAttached(s)}),K(),m()()()),t&2&&(l(2),a("headerPadding",!1)("sidePaneBodyPadding",!1),l(4),a("ngIf",i.previewWidget==null?null:i.previewWidget.pizzagna),l(2),a("cdkPortalOutlet",i.formPortal))},dependencies:[U,Ui,fe,Ye,mr,Ri],styles:[".nui-configurator__backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1040;background-color:var(--nui-color-overlay-modal,rgba(17, 17, 17, .5));opacity:.5;filter:alpha(opacity=50)}.nui-configurator__content[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1040}.nui-configurator__heading[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #d9d9d9}.nui-configurator__body[_ngcontent-%COMP%]{overflow-anchor:none;height:100vh}.nui-configurator__preview[_ngcontent-%COMP%]{height:100vh}.nui-configurator__preview-area[_ngcontent-%COMP%]{display:flex;width:80%;position:relative;background-color:var(--nui-color-bg-content_popover,#fff);border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);margin:auto;min-height:40vh;max-height:80vh;overflow:hidden}"]})}}return r})();var gt=(()=>{class r{constructor(e,t,i,n,s,p,g){this.componentFactoryResolver=e,this.widgetTypesService=t,this.injector=i,this.appRef=n,this.logger=s,this.router=g,this.close$=new L,this.handleSubmit=(h,z)=>x=>x.pipe(this.trySubmit(z,h),this.updateDashboard(h.dashboardComponent)),this.trySubmit=(h,z)=>x=>x.pipe(Ze($=>$&&(0,Us.default)(h)?h($,z).pipe(Ft(se=>(this.logger.error(se),this.componentRef.instance.handleSubmitError(),zt))):Dt($))),this.updateDashboard=h=>z=>new Mt(x=>z.subscribe($=>{if($){$.id=$.id||St();let se;h.dashboard.widgets[$.id]?se=j(D({},$),{pizzagna:j(D({},this.widgetTypesService.getWidgetType($.type,$.version).widget),{configuration:$.pizzagna.configuration})}):se=$,h.removeWidget(se.id,!1),setTimeout(()=>{h.updateWidget(se)})}this.close(),x.next()})),this.renderer=p.createRenderer(null,null)}open(e){let t={dashboardComponent:e.dashboardComponent,previewPizzagnaComponent:e.previewPizzagnaComponent,widget:(0,co.default)(e.widget)};this.componentRef=this.appendComponentToBody();let i=this.componentRef.instance;return i.formPortal=e.portalBundle.portal,i.previewWidget=(0,co.default)(e.widget),e.portalBundle?.attached&&i.formPortalAttached.pipe(A(this.close$)).subscribe(n=>{e?.portalBundle?.attached&&e?.portalBundle?.attached(n)}),i.changeDetector.detectChanges(),i.result.asObservable().pipe(this.handleSubmit(t,e.trySubmit))}close(){this.renderer&&(this.close$.next(),this.renderer.removeChild(document.body,this.componentRef.hostView.rootNodes[0]),this.appRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.renderer.removeStyle(document.body,"overflow"))}appendComponentToBody(){let t=this.componentFactoryResolver.resolveComponentFactory(Ke).create(this.injector);return this.appRef.attachView(t.hostView),this.renderer.appendChild(document.body,t.hostView.rootNodes[0]),this.renderer.setStyle(document.body,"overflow","hidden"),this.router&&this.router.events.pipe(fo(i=>i instanceof Mo),A(this.close$)).subscribe(()=>this.close()),t}static{this.\u0275fac=function(t){return new(t||r)(b(Lt),b(oe),b($t),b(yo),b(Z),b(Io),b(zo,8))}}static{this.\u0275prov=le({token:r,factory:r.\u0275fac})}}return r})();var Zs=ie(Kt());var ho=ie(Pa()),js=ie(ba()),tt=ie(Fo());var Cl=r=>({"nui-dashwiz-step--active":r});function Tl(r,o){r&1&&No(0)}var Ge=(()=>{class r{constructor(){this.hidden=!1,this.spinnerSize=jo.Large,this.enter=new I,this.valid=new I,this.exit=new I,this.next=new I,this.busyConfig={busy:!1},this.visited=!1,this.active=!1,this.complete=!1,this.icon="step",this.iconColor="",this.enterStep=e=>{this.enter.emit(e)},this.exitStep=e=>{this.exit.emit(e)},this.nextStep=e=>{this.next.emit(e)},this.applyEnteringStep=()=>{this.active=!0,this.icon="step-active",this.iconColor="black"},this.applyExitingStep=()=>{this.active=!1,this.visited=!0,this.icon="step-complete",this.iconColor=""}}ngOnInit(){this.nextText=this.nextText||$localize`Next`}ngOnChanges(e){e.stepControl&&this.valid.emit(this.stepControl)}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=O({type:r,selectors:[["nui-dashwiz-step"]],inputs:{stepTemplate:"stepTemplate",stepControl:"stepControl",title:"title",nextText:"nextText",hidden:"hidden",disabled:"disabled",spinnerSize:"spinnerSize"},outputs:{enter:"enter",valid:"valid",exit:"exit",next:"next"},standalone:!1,features:[k],decls:4,vars:9,consts:[["nui-busy","",1,"nui-dashwiz-step","animated","h-100",3,"ngClass","busy"],["cdkScrollable","",1,"h-100","overflow-auto","configurator-scrollable"],[4,"ngTemplateOutlet"],[3,"percent","allowCancel","message","size"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1),f(2,Tl,1,0,"ng-container",2),m(),S(3,"nui-spinner",3),m()),t&2&&(a("ngClass",Je(7,Cl,i.active))("busy",i.busyConfig.busy),l(2),a("ngTemplateOutlet",i.stepTemplate),l(),a("percent",i.busyConfig.percent)("allowCancel",i.busyConfig.allowCancel)("message",i.busyConfig.message)("size",i.spinnerSize))},dependencies:[Lo,Ue,xo,nr,Jo],styles:[".nui-dashwiz-step[_ngcontent-%COMP%]{display:none}.nui-dashwiz-step--active[_ngcontent-%COMP%]{display:block}"]})}}return r})();function Il(r,o){if(r&1){let e=v();d(0,"button",7),T("click",function(){_(e);let i=u();return C(i.onBack())}),d(1,"span"),G(2,1),m()()}if(r&2){let e=u();a("disabled",e.busy)}}function Ol(r,o){if(r&1){let e=v();d(0,"button",8),T("click",function(){_(e);let i=u();return C(i.onNext())}),d(1,"span"),P(2),m()()}if(r&2){let e=u();a("displayStyle",e.canFinish?"default":"primary")("disabled",e.busy),l(2),We(e.nextText)}}function Sl(r,o){if(r&1){let e=v();d(0,"button",9),T("click",function(){_(e);let i=u();return C(i.onFinish())}),d(1,"span"),P(2),m()()}if(r&2){let e=u();a("isBusy",e.busy)("disabled",e.busy),l(2),We(e.finishText)}}var xi=(()=>{class r{static{this.lateLoadKey="DashwizButtonsComponent"}constructor(e){this.changeDetector=e,this.busy=!1,this.canFinish=!1,this.canProceed=!1,this.isFirstStepActive=!1,this.isLastStepActive=!1,this.cancel=new I,this.next=new I,this.back=new I,this.finish=new I}onCancel(){this.cancel.emit()}onNext(){this.next.emit()}onBack(){this.back.emit()}onFinish(){this.finish.emit()}static{this.\u0275fac=function(t){return new(t||r)(c(N))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-dashwiz-buttons"]],inputs:{busy:"busy",canFinish:"canFinish",canProceed:"canProceed",isFirstStepActive:"isFirstStepActive",isLastStepActive:"isLastStepActive",nextText:"nextText",finishText:"finishText"},outputs:{cancel:"cancel",next:"next",back:"back",finish:"finish"},standalone:!1,decls:7,vars:4,consts:()=>{let e;e=$localize`:d7b35c384aecd25a516200d6921836374613dfe72159130950882492111:Cancel`;let t;return t=$localize`:cda31dbd724cf5f4fa7a4274d9120651490c8a8c8890553633144307762:Back`,[e,t,[1,"d-flex","justify-content-end","p-4"],["nui-button","","type","button",1,"nui-dashwiz-buttons__cancel-button",3,"click","disabled"],["class","ml-3 nui-dashwiz-buttons__back-button","nui-button","","icon","caret-left","type","button",3,"disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__next-button","nui-button","","type","button",3,"displayStyle","disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__finish-button","nui-button","","type","button","displayStyle","primary",3,"isBusy","disabled","click",4,"ngIf"],["nui-button","","icon","caret-left","type","button",1,"ml-3","nui-dashwiz-buttons__back-button",3,"click","disabled"],["nui-button","","type","button",1,"ml-3","nui-dashwiz-buttons__next-button",3,"click","displayStyle","disabled"],["nui-button","","type","button","displayStyle","primary",1,"ml-3","nui-dashwiz-buttons__finish-button",3,"click","isBusy","disabled"]]},template:function(t,i){t&1&&(d(0,"div",2)(1,"button",3),T("click",function(){return i.onCancel()}),d(2,"span"),G(3,0),m()(),f(4,Il,3,1,"button",4)(5,Ol,3,3,"button",5)(6,Sl,3,3,"button",6),m()),t&2&&(l(),a("disabled",i.busy),l(3),a("ngIf",!i.isFirstStepActive),l(),a("ngIf",!i.isLastStepActive&&i.canProceed),l(),a("ngIf",i.canFinish||i.isLastStepActive))},dependencies:[U,nt],encapsulation:2})}}return r})();var vl=["container"],Nl=["stepTitle"],wl=["*"],El=()=>["cancel","next","back","finish"],Rl=(r,o,e,t,i,n)=>({"nui-dashwiz__header-step--first":r,"nui-dashwiz__header-step--last":o,"nui-dashwiz__header-step--visited":e,"nui-dashwiz__header-step--disabled":t,"nui-dashwiz__header-step--active":i,"nui-dashwiz__header-step--complete":n}),Xs=r=>({"min-width.px":r});function xl(r,o){if(r&1&&(d(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"span",19)(5,"span",20,2),P(7),m(),d(8,"div",21)(9,"div",22),S(10,"div",23),m(),S(11,"nui-icon",24),d(12,"div",25),S(13,"div",23),m()()()()()()()),r&2){let e=u().$implicit,t=u(3);l(7),X(" ",e.title," "),l(3),a("ngStyle",Je(5,Xs,t.stepLineWidth)),l(),a("icon",e.icon)("iconColor",e.iconColor),l(2),a("ngStyle",Je(7,Xs,t.stepLineWidth))}}function bl(r,o){if(r&1){let e=v();d(0,"li",13),T("click",function(){let i=_(e).$implicit,n=u(3);return C(n.selectStep(i))}),f(1,xl,14,9,"div",14),m()}if(r&2){let e=o.$implicit,t=o.first,i=o.last,n=u(3);a("ngClass",Ro(2,Rl,t,i,e.visited,e.disabled||!e.visited||n.currentStep.busyConfig.busy,e.active,e.complete)),l(),a("ngIf",!e.hidden)}}function Pl(r,o){if(r&1&&(d(0,"ul",11),f(1,bl,2,9,"li",12),m()),r&2){let e=u(2);l(),a("ngForOf",e.steps)}}function Ml(r,o){if(r&1&&(d(0,"div",9),f(1,Pl,2,1,"ul",10),m()),r&2){let e=u();Qe("nui-dashwiz__header--lines-stretched",e.stretchStepLines),l(),a("ngIf",e.steps)}}function zl(r,o){}function Dl(r,o){}var ft=(()=>{class r{static{this.placeholderFinishText="Action"}constructor(e,t,i,n,s){this.changeDetector=e,this.componentFactoryResolver=t,this.logger=i,this.dashwizService=n,this.scrollDispatcher=s,this.hideHeader=!1,this.canProceed=!1,this.canFinish=!1,this.finishText=r.placeholderFinishText,this.stretchStepLines=!1,this.stepNavigated=new I,this.cancel=new I,this.finish=new I,this.next=new I,this.back=new I,this.navigationControl=new ot({busyState:{busy:!1},allowStepChange:!0}),this.stepLineWidth=65,this.scrolled=!1,this.previousStepIndex=0,this.onBack=()=>{if(!(0,tt.default)(this.stepIndex)){let p=this.arraySteps[this.stepIndex-1];(p.hidden||p.disabled)&&(p=(0,ho.default)(this.arraySteps.slice(0).reverse(),g=>!g.hidden,(0,js.default)(this.arraySteps.slice(0).reverse(),this.arraySteps[this.stepIndex])+1)),this.selectStep(p),this.back.emit()}},this.onNext=()=>{let p=this.arraySteps[this.stepIndex+1];this.handleStepControl(this.currentStep),this.currentStep.nextStep({currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.currentStep,previousStepIndex:this.stepIndex}),(p.hidden||p.disabled&&!(0,tt.default)(p.stepControl))&&(p=(0,ho.default)(this.arraySteps,g=>!g.hidden,this.stepIndex+1)),((0,tt.default)(this.currentStep.stepControl)||this.currentStep.stepControl)&&(this.currentStep.complete=!0),p.disabled&&!p.visited&&(this.currentStep.complete=!1),this.selectStep(p),this.next.emit()},this.onFinish=()=>{this.finish.emit()},this.onCancel=()=>{this.cancel.emit(this.steps.toArray().filter(p=>p.complete).length!==0)},this.buttonPortalActionMap={cancel:this.onCancel,next:this.onNext,back:this.onBack,finish:this.onFinish},n&&(n.component=this)}ngOnInit(){this.scrollDispatcher.scrolled().subscribe(e=>{let t=e?.getElementRef()?.nativeElement;t?.classList?.contains("configurator-scrollable")&&(this.scrolled=!!t?.scrollTop)}),this.buttonComponentTypes=this.buttonComponentTypes||[xi.lateLoadKey],this.finishText===r.placeholderFinishText&&this.logger.warn(`DashwizComponent input "finishText" is using placeholder text
"${r.placeholderFinishText}". A value should be specified.`)}ngDoCheck(){this.currentStep&&(this.buttonProperties={busy:this.currentStep.busyConfig.busy,canProceed:this.canProceed,canFinish:this.canFinish,isLastStepActive:this.steps.last.active,isFirstStepActive:this.steps.first.active,nextText:this.currentStep.nextText,finishText:this.finishText})}ngAfterContentInit(){let e=this.steps.filter(t=>t.active);this.arraySteps=this.steps.toArray(),e.length===0&&(this.currentStep=this.steps.first,this.selectStep(this.currentStep),this.changeDetector.detectChanges()),this.steps.toArray().forEach(t=>{t.valid.subscribe(i=>{(0,tt.default)(i)||this.handleStepControl(t)})}),this.navigationControl.subscribe(t=>{this.currentStep.busyConfig=t.busyState,t.allowStepChange&&!(0,tt.default)(this.futureStep)&&this.currentStep!==this.futureStep&&(this.enterAnotherStep(),this.futureStep=void 0)})}ngAfterViewChecked(){this.stretchStepLines&&(this.stepLineWidth=Math.round(this.getLargestLabelWidth()/2),this.changeDetector.detectChanges())}ngOnDestroy(){this.steps.toArray().forEach(e=>e.valid.unsubscribe()),this.navigationControl.unsubscribe(),this.dashwizService.component=void 0}addStepDynamic(e,t){let i=this.componentFactoryResolver.resolveComponentFactory(Ge),n=this.dynamicStep.createComponent(i),s=n.instance;return s.stepTemplate=e.stepTemplate,this.arraySteps.splice(t,0,n.instance),this.steps.reset(this.arraySteps),n.instance}disableStep(e){let t=this.arraySteps.indexOf(e),i=this.arraySteps[t];i.disabled=!0,this.changeDetector.detectChanges()}enableStep(e){let t=this.arraySteps.indexOf(e),i=this.arraySteps[t];i.disabled=!1,this.changeDetector.detectChanges()}hideStep(e){let t=this.arraySteps.indexOf(e),i=this.arraySteps[t];i.hidden=!0}showStep(e){let t=this.arraySteps.indexOf(e),i=this.arraySteps[t];i.hidden=!1}goToStep(e){this.selectStep(this.arraySteps[e])}selectStep(e){e.disabled||(this.futureStep=e,this.currentStep.exitStep({currentStepIndex:this.arraySteps.indexOf(this.futureStep),currentStep:this.futureStep,previousStep:this.arraySteps[this.stepIndex],previousStepIndex:this.stepIndex}),this.navigationControl.value.allowStepChange&&this.enterAnotherStep())}enterAnotherStep(){this.currentStep.applyExitingStep(),this.futureStep?.enterStep(),this.futureStep&&(this.currentStep=this.futureStep),this.currentStep.applyEnteringStep(),this.stepIndex=this.arraySteps.indexOf(this.currentStep),this.stepNavigatedEvent={currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.arraySteps[this.previousStepIndex],previousStepIndex:this.previousStepIndex},this.stepNavigated.emit(this.stepNavigatedEvent),this.previousStepIndex=this.stepIndex}onButtonPortalOutput(e){this.buttonPortalActionMap[e.id]?.()}disableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(e=>{e.disabled=!0})}enableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(e=>{e.disabled=!1})}handleStepControl(e){(0,tt.default)(e.stepControl)||(e.stepControl?this.enableFollowingSteps():this.disableFollowingSteps())}getLargestLabelWidth(){let e=this.stepTitles.map(t=>t.nativeElement.offsetWidth);return Math.round(Math.max(...e))}static{this.\u0275fac=function(t){return new(t||r)(c(N),c(Lt),c(Z),c($r),c(jt))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-dashwiz"]],contentQueries:function(t,i,n){if(t&1&&wo(n,Ge,4),t&2){let s;Se(s=ye())&&(i.steps=s)}},viewQuery:function(t,i){if(t&1&&(xe(vl,5,Oo),xe(Nl,5)),t&2){let n;Se(n=ye())&&(i.dynamicStep=n.first),Se(n=ye())&&(i.stepTitles=n)}},hostAttrs:[1,"flex-grow-1","overflow-auto"],inputs:{hideHeader:"hideHeader",canProceed:"canProceed",canFinish:"canFinish",finishText:"finishText",stretchStepLines:"stretchStepLines",buttonComponentTypes:"buttonComponentTypes",navigationControl:"navigationControl"},outputs:{stepNavigated:"stepNavigated",cancel:"cancel",finish:"finish",next:"next",back:"back"},standalone:!1,ngContentSelectors:wl,decls:10,vars:8,consts:[["container",""],["componentPortal","nuiComponentPortal"],["stepTitle",""],[1,"nui-dashwiz","d-flex","flex-column","h-100"],["class","nui-dashwiz__header",3,"nui-dashwiz__header--lines-stretched",4,"ngIf"],[1,"flex-grow-1","overflow-auto"],[1,"nui-dashwiz__footer"],["nuiComponentPortal","","componentId","dashwizButtons",3,"output","componentType","properties","outputs"],[3,"attached","cdkPortalOutlet"],[1,"nui-dashwiz__header"],["class","nui-dashwiz__header-steps",4,"ngIf"],[1,"nui-dashwiz__header-steps"],["class","nui-dashwiz__header-step",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nui-dashwiz__header-step",3,"click","ngClass"],["class","nui-dashwiz__header-step-container",4,"ngIf"],[1,"nui-dashwiz__header-step-container"],[1,"nui-dashwiz__header-step-row"],[1,"nui-dashwiz__header-step-col"],[1,"nui-dashwiz__header-step-content"],[1,"nui-dashwiz__header-step-link"],[1,"nui-dashwiz__header-step-title"],[1,"nui-dashwiz__header-step-link-container"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-right"],[1,"nui-dashwiz__header-step-line",3,"ngStyle"],[3,"icon","iconColor"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-left"]],template:function(t,i){if(t&1){let n=v();Tt(),d(0,"div",3),f(1,Ml,2,3,"div",4),d(2,"div",5),It(3),f(4,zl,0,0,"ng-template",null,0,ve),m(),d(6,"div",6),Y(7,7,1),T("output",function(p){return _(n),C(i.onButtonPortalOutput(p))}),f(9,Dl,0,0,"ng-template",8),T("attached",function(p){_(n);let g=W(8);return C(g.attached(p))}),K(),m()()}if(t&2){let n=W(8);l(),a("ngIf",!i.hideHeader),l(5),Qe("shadow",i.scrolled),l(),a("componentType",i.buttonComponentTypes.length===1?i.buttonComponentTypes[0]:i.buttonComponentTypes[i.stepIndex])("properties",i.buttonProperties)("outputs",Le(7,El)),l(2),a("cdkPortalOutlet",n.portal)}},dependencies:[Ue,Q,U,Ht,fe,Pe,He],styles:[".nui-dashwiz__header[_ngcontent-%COMP%]{padding:10px 15px;background-color:var(--nui-color-bg-secondary,#fafafa);border-bottom:1px solid #d9d9d9;border-bottom:1px solid var(--nui-color-line-default, #d9d9d9);overflow:hidden;text-align:center;display:flex;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.nui-dashwiz__header-steps[_ngcontent-%COMP%]{margin-bottom:0;white-space:nowrap;display:inline-flex}.nui-dashwiz__header-step[_ngcontent-%COMP%]{line-height:normal;display:inline-flex;cursor:pointer}.nui-dashwiz__header-step--disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:default}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--first[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%], .nui-dashwiz__header-step--last[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%]{border-color:transparent;opacity:0}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]{cursor:default}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-bg-dark,#111)}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{text-decoration:none}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step-container[_ngcontent-%COMP%]{display:inline-table;width:100%}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]{display:none}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0}.nui-dashwiz__header-step-row[_ngcontent-%COMP%]{display:table-row}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-default,#d9d9d9)}.nui-dashwiz__header-step-col-right[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{margin-right:-1px}.nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-bottom:solid 2px;height:2px}.nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6));transition:color .3s}.nui-dashwiz__header-step-link-container[_ngcontent-%COMP%]{display:flex;align-content:baseline;justify-content:center;align-items:center}.nui-dashwiz__header-step-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;text-overflow:ellipsis;vertical-align:middle;display:inline-block;max-width:140px;margin:0 0 5px;text-decoration:inherit}.nui-dashwiz__header.nui-dashwiz__header--lines-stretched[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{max-width:unset}.nui-dashwiz__footer[_ngcontent-%COMP%]{z-index:1080;background-color:var(--nui-color-bg-content,#fff);border-top:solid 1px var(--nui-color-line-default, #d9d9d9);transition:box-shadow .3s ease-in-out}.nui-dashwiz__footer.shadow[_ngcontent-%COMP%]{box-shadow:0 0 5px 0 var(--nui-shadow-color-stronger, rgba(17, 17, 17, .6))}"]})}}return r})();var _t=(()=>{class r{constructor(e,t){this.el=e,this.heading=t,this.disableCloseButton=!1,this.close=new I}ngOnChanges(){this.heading.height$.next(+getComputedStyle(this.el.nativeElement).height.slice(0,-2))}static{this.\u0275fac=function(t){return new(t||r)(c(qe),c(he))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-configurator-heading"]],inputs:{configuratorTitle:"configuratorTitle",disableCloseButton:"disableCloseButton"},outputs:{close:"close"},standalone:!1,features:[k],decls:4,vars:3,consts:[[1,"configurator-heading","d-flex","justify-content-between","align-items-center","p-4"],[1,"nui-text-panel","nui-text-ellipsis",3,"title"],["nui-button","","type","button","displayStyle","action","icon","close",3,"click","disabled"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"span",1),P(2),m(),d(3,"button",2),T("click",function(){return i.close.emit()}),m()()),t&2&&(l(),a("title",i.configuratorTitle),l(),X(" ",i.configuratorTitle," "),l(),a("disabled",i.disableCloseButton))},dependencies:[nt],styles:["[_nghost-%COMP%]{z-index:1080;background-color:var(--nui-color-bg-content,#fff)}[_nghost-%COMP%]   .configurator-heading[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]})}}return r})();var $l=()=>["widgetSelected"];function Ll(r,o){}function Al(r,o){if(r&1){let e=v();d(0,"div",8),Y(1,9,2),T("output",function(i){_(e);let n=u();return C(n.onSelect(i.payload))}),f(3,Ll,0,0,"ng-template",10),T("attached",function(i){_(e);let n=W(2);return C(n.attached(i))}),K(),m()}if(r&2){let e=W(2),t=u();l(),a("componentType",t.cloneSelectionComponentType)("outputs",Le(3,$l)),l(2),a("cdkPortalOutlet",e.portal)}}function Gl(r,o){if(r&1){let e=v();d(0,"div",11)(1,"nui-pizzagna",12,3),Vt("pizzagnaChange",function(i){_(e);let n=u();return Ut(n.formPizzagna,i)||(n.formPizzagna=i),C(i)}),m()()}if(r&2){let e=u();a("formGroup",e.form),l(),Bt("pizzagna",e.formPizzagna)}}var bi=(()=>{class r{static{this.lateLoadKey="WidgetClonerComponent"}constructor(e,t,i,n,s,p){this.changeDetector=e,this.configurator=t,this.previewService=i,this.formBuilder=n,this.widgetTypesService=s,this.scrollDispatcher=p,this.navigationControl=new ot({busyState:{busy:!1},allowStepChange:!0}),this.busy=!1,this.scrolled=!1,this.isFormDisplayed=!1,this.destroy$=new L,this.resetForm$=new L,this.resetForm()}ngOnInit(){this.previewService.previewChanged.pipe(A(this.destroy$)).subscribe(e=>{this.onPreviewPizzagnaUpdate(e)}),this.configurator.submitError.pipe(A(this.destroy$)).subscribe(()=>{this.toggleBusy()})}ngAfterViewInit(){this.changeDetector.markForCheck(),this.scrollDispatcher.scrolled().subscribe(e=>{let t=e?.getElementRef()?.nativeElement;t?.classList?.contains("configurator-scrollable")&&(this.scrolled=!!t?.scrollTop,this.changeDetector.detectChanges())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.resetForm$.complete()}onPreviewPizzagnaUpdate(e){if(!this.isFormDisplayed)return;let t=j(D({},this.configurator.previewWidget),{pizzagna:j(D({},this.configurator.previewWidget?.pizzagna),{[H.Configuration]:e})});this.configurator.updateWidget(t)}canFinish(){return!!this.widgetTemplate?.pizzagna?.configuration&&!this.widgetTemplate?.metadata?.needsConfiguration}onFinish(){if(this.form.invalid){this.form.markAllAsTouched(),this.form.patchValue(this.form.value),this.form.updateValueAndValidity({onlySelf:!1});return}this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}onStepNavigated(e){this.isFormDisplayed=e.currentStepIndex===1,e.currentStepIndex===0&&e.previousStepIndex===1?(this.formPizzagna=void 0,this.resetForm(),this.onSelect(this.widgetTemplate)):e.currentStepIndex===1&&(this.formPizzagna=this.widgetTypesService.getWidgetType(this.widgetTemplate.type,this.widgetTemplate.version).configurator,this.previewService.preview=this.widgetTemplate.pizzagna[H.Configuration])}onSelect(e){this.widgetTemplate=e;let t=j(D({},e),{id:this.configurator.previewWidget?.id||null});this.configurator.updateWidget(null),setTimeout(()=>{this.configurator.updateWidget((0,Zs.default)(t)),this.changeDetector.detectChanges()})}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}resetForm(){this.resetForm$.next(),this.form=this.formBuilder.group({}),this.form.statusChanges.pipe(A(this.resetForm$),A(this.destroy$)).subscribe(()=>{this.changeDetector.markForCheck()})}static{this.\u0275fac=function(t){return new(t||r)(c(N),c(Ke),c(pt),c(V),c(oe),c(jt))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-widget-cloner"]],hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",cloneSelectionComponentType:"cloneSelectionComponentType"},standalone:!1,decls:8,vars:9,consts:()=>{let e;e=$localize`:a638e97aa8422948b3e628089bbc9e0cd89e0087696117927395958397:Creating Widget`;let t;t=$localize`:1af9862ac515933a9a72e92970c3e92bda63f6e88076137290276236439:Create Widget`;let i;return i=$localize`:072d4d4ec83a5a97345a1c13b90c213b47326d096673660887182833564:Customize`,[["step1",""],["step2",""],["componentPortal","nuiComponentPortal"],["formPizzagnaComponent",""],["configuratorTitle",e,1,"header",3,"close","disableCloseButton"],["finishText",t,3,"finish","cancel","stepNavigated","hideHeader","canProceed","canFinish","navigationControl"],["nextText",i,3,"stepTemplate"],[3,"stepTemplate"],[1,"p-4","h-100"],["nuiComponentPortal","",3,"output","componentType","outputs"],[3,"attached","cdkPortalOutlet"],[3,"formGroup"],[3,"pizzagnaChange","pizzagna"]]},template:function(t,i){if(t&1){let n=v();d(0,"nui-configurator-heading",4),T("close",function(){return _(n),C(i.onCancel())}),m(),d(1,"nui-dashwiz",5),T("finish",function(){return _(n),C(i.onFinish())})("cancel",function(){return _(n),C(i.onCancel())})("stepNavigated",function(p){return _(n),C(i.onStepNavigated(p))}),S(2,"nui-dashwiz-step",6)(3,"nui-dashwiz-step",7),m(),f(4,Al,4,4,"ng-template",null,0,ve)(6,Gl,3,2,"ng-template",null,1,ve)}if(t&2){let n=W(5),s=W(7);Qe("shadow",i.scrolled),a("disableCloseButton",i.busy),l(),a("hideHeader",!0)("canProceed",!!i.widgetTemplate)("canFinish",i.canFinish())("navigationControl",i.navigationControl),l(),a("stepTemplate",n),l(),a("stepTemplate",s)}},dependencies:[J,ee,fe,Ye,Pe,ft,Ge,_t],styles:[".header[_ngcontent-%COMP%]{transition:box-shadow .3s ease-in-out}.header.shadow[_ngcontent-%COMP%]{box-shadow:0 0 5px 0 var(--nui-shadow-color-stronger, rgba(17, 17, 17, .6))}"],changeDetection:0})}}return r})();var qs=(()=>{class r{constructor(e,t){this.configuratorService=e,this.componentPortalService=t}open(e){if(!e.portalBundle){let t={portal:this.componentPortalService.createComponentPortal(bi,null),attached:i=>{i.instance.cloneSelectionComponentType=e.widgetSelectionComponentType,i.instance.changeDetector?.detectChanges(),setTimeout(()=>{this.ref=i})}};e.portalBundle=t}return e.previewPizzagnaComponent=()=>this.ref.instance.configurator.getPreview(),this.configuratorService.open(e)}static{this.\u0275fac=function(t){return new(t||r)(b(gt),b(mt))}}static{this.\u0275prov=le({token:r,factory:r.\u0275fac})}}return r})();var Pi=(()=>{class r{static{this.lateLoadKey="PreviewPlaceholderComponent"}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=O({type:r,selectors:[["nui-preview-placeholder"]],standalone:!1,decls:6,vars:0,consts:()=>{let e;e=$localize`:2dddb51ea396d77c6eae240cec72bcac05cbd28b7484658843094717966:This is a preview of your widget`;let t;return t=$localize`:fd2e41589bd70eddf4486b814980d2891ec182f93997823842478388980: As you make configuration changes, this area will update to match. To get started, select a widget type on the configuration panel.
`,[e,t]},template:function(t,i){t&1&&(d(0,"div")(1,"b"),G(2,0),m(),P(3,"."),m(),d(4,"div"),G(5,1),m())},styles:["[_nghost-%COMP%]{max-width:300px;padding:0 10px;margin:auto}"]})}}return r})();var Qs=ie($o());var Wl=["formPizzagnaComponent"];function Bl(r,o){if(r&1){let e=v();d(0,"nui-pizzagna",7,1),Vt("pizzagnaChange",function(i){_(e);let n=u(2);return Ut(n.formPizzagna,i)||(n.formPizzagna=i),C(i)}),m()}if(r&2){let e=u(2);a("rootNode",e.formRoot),Bt("pizzagna",e.formPizzagna)}}function Ul(r,o){if(r&1&&(d(0,"div",5),f(1,Bl,2,2,"nui-pizzagna",6),m()),r&2){let e=u();a("formGroup",e.form),l(),a("ngIf",e.formPizzagna)}}var Mi=(()=>{class r{static{this.lateLoadKey="WidgetEditorComponent"}static{this.TITLE_PATH="header.properties.title"}set formPizzagnaComponent(e){e?.eventBus?.getStream(pi).pipe(A(this.destroy$)).subscribe(t=>{let i=t.payload;i&&i.id&&this.configurator?.previewPizzagnaComponent?.eventBus?.getStream(i.id).next(i.payload)}),this._formPizzagnaComponent=e}constructor(e,t,i,n){this.changeDetector=e,this.formBuilder=t,this.previewService=i,this.configurator=n,this.navigationControl=new ot({busyState:{busy:!1},allowStepChange:!0}),this.busy=!1,this.destroy$=new L,this.form=this.formBuilder.group({})}ngOnInit(){this.previewService.preview=this.configurator.previewWidget?.pizzagna[H.Configuration],this.previewService.previewChanged.pipe(A(this.destroy$)).subscribe(e=>{this.onPreviewPizzagnaUpdate(e),this.changeDetector.detectChanges()}),this.configurator.submitError.pipe(A(this.destroy$)).subscribe(()=>{this.toggleBusy()}),this.changeDetector.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewPizzagnaUpdate(e){let t=j(D({},this.configurator.previewWidget),{pizzagna:j(D({},this.configurator.previewWidget?.pizzagna),{[H.Configuration]:e})});this.configurator.updateWidget(t);let i=(0,Qs.default)(e,r.TITLE_PATH,"");this.configuratorTitle=$localize`Editing ${i}`}onFinish(){if(this.form.invalid){this.form.markAllAsTouched(),this.form.patchValue(this.form.value),this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0});return}this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}static{this.\u0275fac=function(t){return new(t||r)(c(N),c(V),c(pt),c(Ke))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-widget-editor"]],viewQuery:function(t,i){if(t&1&&xe(Wl,5),t&2){let n;Se(n=ye())&&(i.formPizzagnaComponent=n.first)}},hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",formRoot:"formRoot"},standalone:!1,decls:5,vars:5,consts:()=>{let e;return e=$localize`:afa960379d26eb20fd22e6e10537c1c5ec74c5d14319441956121197474:Save Changes`,[["step1",""],["formPizzagnaComponent",""],[3,"close","configuratorTitle","disableCloseButton"],["finishText",e,3,"finish","cancel","hideHeader","navigationControl"],[3,"stepTemplate"],[3,"formGroup"],[3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],[3,"pizzagnaChange","rootNode","pizzagna"]]},template:function(t,i){if(t&1){let n=v();d(0,"nui-configurator-heading",2),T("close",function(){return _(n),C(i.onCancel())}),m(),d(1,"nui-dashwiz",3),T("finish",function(){return _(n),C(i.onFinish())})("cancel",function(){return _(n),C(i.onCancel())}),S(2,"nui-dashwiz-step",4),m(),f(3,Ul,2,2,"ng-template",null,0,ve)}if(t&2){let n=W(4);a("configuratorTitle",i.configuratorTitle)("disableCloseButton",i.busy),l(),a("hideHeader",!0)("navigationControl",i.navigationControl),l(),a("stepTemplate",n)}},dependencies:[U,J,ee,Ye,ft,Ge,_t],encapsulation:2,changeDetection:0})}}return r})();function Vl(r,o){if(r&1&&(d(0,"nui-select-v2-option",17),P(1),m()),r&2){let e=o.$implicit;a("displayValueContext",e.label)("value",e.id),l(),X(" ",e.label," ")}}function Hl(r,o){if(r&1&&(d(0,"nui-select-v2-option",18),P(1),m()),r&2){let e=o.$implicit;a("value",e.id),l(),X(" ",e.label," ")}}function Xl(r,o){if(r&1&&(d(0,"nui-select-v2-option",18),P(1),m()),r&2){let e=o.$implicit;a("value",e.componentType),l(),X(" ",e.label," ")}}var zi=(()=>{class r{static{this.lateLoadKey="ProportionalChartOptionsEditorV2Component"}constructor(e,t,i,n){this.changeDetector=e,this.configuratorHeading=t,this.formBuilder=i,this.formReady=new I,this.form=this.formBuilder.group({type:[void 0,de.required],legendPlacement:[void 0],legendFormatter:this.formBuilder.group({componentType:[void 0]})}),this.chartTypeChanged$=new L,this.destroy$=new L,this.legendFormatters=n.getItems(),this.form.controls.type.valueChanges.pipe(A(this.destroy$)).subscribe(s=>this.chartTypeChanged$.next(s))}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(e){e.type&&this.form.controls.type.setValue(e.type.currentValue),e.legendPlacement&&this.form.controls.legendPlacement.setValue(e.legendPlacement.currentValue),e.legendFormatter&&this.form.get("legendFormatter.componentType")?.setValue(e.legendFormatter.currentValue.componentType)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.chartTypeChanged$.complete()}get chartTitle(){let e=this.form.get("type")?.value;return this.chartTypes.find(i=>i.id===e)?.label}get legendFormatterControl(){return this.form.get("legendFormatter.componentType")}static{this.\u0275fac=function(t){return new(t||r)(c(N),c(he),c(V),c(Wr))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-proportional-chart-options-editor-v2-component"]],inputs:{type:"type",legendPlacement:"legendPlacement",legendFormatter:"legendFormatter",chartTypes:"chartTypes",legendPlacementOptions:"legendPlacementOptions"},outputs:{formReady:"formReady"},standalone:!1,features:[k],decls:29,vars:30,consts:()=>{let e;e=$localize`:f2102c0b996b067ab2a46c7743fe5931fa47f16d7337152278540773645:Chart Type`;let t;t=$localize`:35a0bc25979ae578aea9594e8c587200628713e15551943712413491013:Select chart type`;let i;i=$localize`:5c5419db944ed6a96f9515a2ac0ee390ec8cf3b57297822327994766046:Legend`;let n;n=$localize`:7f0b920b08ab06e490eff4f718ef3fecc87a719b5989769742900149410:Legend format`;let s;s=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `;let p;p=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `;let g;return g=$localize`:c9a9da14b0f8c677efa737185f1232f8537bd2a63224868488156254475: This field is required `,[s,p,g,[3,"formGroup","state"],["headerTitle","Chart Options",3,"headerIcon","subtitle"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",e,3,"control"],["placeholder",t,"formControlName","type",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],["caption",i,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","legendFormatter"],["caption",n,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value"],[3,"value"]]},template:function(t,i){t&1&&(d(0,"nui-widget-editor-accordion",3),E(1,"nuiWidgetEditorAccordionFormState"),E(2,"async"),S(3,"nui-widget-editor-accordion-header",4),E(4,"nuiFormHeaderIconPipe"),E(5,"async"),d(6,"div",5)(7,"div",6)(8,"nui-form-field",7)(9,"nui-select-v2",8),E(10,"async"),f(11,Vl,2,3,"nui-select-v2-option",9),m(),d(12,"nui-validation-message",10),G(13,0),m()()(),d(14,"div",6)(15,"nui-form-field",11)(16,"nui-select-v2",12),E(17,"async"),f(18,Hl,2,2,"nui-select-v2-option",13),m(),d(19,"nui-validation-message",10),G(20,1),m()()(),d(21,"div",6),Y(22,14),d(23,"nui-form-field",15)(24,"nui-select-v2",16),E(25,"async"),f(26,Xl,2,2,"nui-select-v2-option",13),m(),d(27,"nui-validation-message",10),G(28,2),m()(),K(),m()()()),t&2&&(a("formGroup",i.form)("state",B(2,17,B(1,15,i.form))),l(3),a("headerIcon",B(5,22,ae(4,19,i.form,"widget_pie-chart")))("subtitle",i.chartTitle),l(5),a("control",i.form.controls.type),l(),a("popupViewportMargin",B(10,24,i.configuratorHeading.height$)),l(2),a("ngForOf",i.chartTypes),l(4),a("showOptionalText",!1)("control",i.form.controls.legendPlacement),l(),a("popupViewportMargin",B(17,26,i.configuratorHeading.height$)),l(2),a("ngForOf",i.legendPlacementOptions),l(5),a("showOptionalText",!1)("control",i.legendFormatterControl),l(),a("popupViewportMargin",B(25,28,i.configuratorHeading.height$)),l(2),a("ngForOf",i.legendFormatters))},dependencies:[Q,pe,J,ee,me,Ve,ce,Ce,_e,be,Me,je,ge,ze,De],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0})}}return r})();var ea=()=>["formReady"];function jl(r,o){if(r&1&&(d(0,"nui-select-v2-option",19),P(1),m()),r&2){let e=o.$implicit;a("displayValueContext",e.label)("value",e.aggregatorType),l(),X(" ",e.label," ")}}function Yl(r,o){if(r&1&&(d(0,"nui-select-v2-option",19),P(1),m()),r&2){let e=o.$implicit;a("displayValueContext",e.label)("value",e.componentType),l(),X(" ",e.label," ")}}function Kl(r,o){}function Zl(r,o){if(r&1){let e=v();Y(0,20,0),T("output",function(i){_(e);let n=u(2);return C(n.onFormReady("aggregator",i.payload))}),f(2,Kl,0,0,"ng-template",21),T("attached",function(i){_(e);let n=W(1);return C(n.attached(i))}),K()}if(r&2){let e=W(1),t=u(2);a("componentType",t.currentAggregatorDefinition==null?null:t.currentAggregatorDefinition.configurationComponent)("properties",t.aggregatorConfiguratorProps)("outputs",Le(4,ea)),l(2),a("cdkPortalOutlet",e.portal)}}function ql(r,o){}function Ql(r,o){if(r&1){let e=v();Y(0,20,0),T("output",function(i){_(e);let n=u(2);return C(n.onFormReady("formatter",i.payload))}),f(2,ql,0,0,"ng-template",21),T("attached",function(i){_(e);let n=W(1);return C(n.attached(i))}),K()}if(r&2){let e=W(1),t=u(2);a("componentType",t.currentFormatterDefinition==null?null:t.currentFormatterDefinition.configurationComponent)("properties",t.formatterConfiguratorProps)("outputs",Le(4,ea)),l(2),a("cdkPortalOutlet",e.portal)}}function Jl(r,o){if(r&1&&(Y(0,3),d(1,"nui-widget-editor-accordion",4),E(2,"nuiWidgetEditorAccordionFormState"),E(3,"async"),d(4,"div",5),S(5,"nui-icon",6),E(6,"nuiFormHeaderIconPipe"),E(7,"async"),d(8,"div",7)(9,"span",8),G(10,1),m(),d(11,"div",9),P(12),m()()(),d(13,"div",10)(14,"div",11)(15,"nui-form-field",12)(16,"nui-select-v2",13),f(17,jl,2,3,"nui-select-v2-option",14),m()()(),d(18,"div",15)(19,"nui-form-field",16)(20,"nui-select-v2",17),f(21,Yl,2,3,"nui-select-v2-option",14),m()()(),f(22,Zl,3,5,"ng-container",18)(23,Ql,3,5,"ng-container",18),m()(),K()),r&2){let e=u();a("formGroup",e.form),l(),a("state",B(3,13,B(2,11,e.form))),l(4),a("icon",B(7,18,ae(6,15,e.form,"customize"))),l(6),a("title",e.subtitleText),l(),X(" ",e.subtitleText," "),l(3),a("control",e.form.get("aggregator.aggregatorType")),l(2),a("ngForOf",e.aggregators),l(2),a("control",e.form.get("formatter.componentType")),l(2),a("ngForOf",e.formatters),l(),a("ngIf",e.currentAggregatorDefinition==null?null:e.currentAggregatorDefinition.configurationComponent),l(),a("ngIf",e.currentFormatterDefinition==null?null:e.currentFormatterDefinition.configurationComponent)}}var Di=(()=>{class r{static{this.lateLoadKey="DonutContentConfigurationComponent"}constructor(e,t,i,n,s){this.formBuilder=e,this.changeDetector=t,this.eventBus=i,this.contentFormattersRegistry=n,this.aggregatorRegistry=s,this.formReady=new I,this.shown=!0,this.form=this.formBuilder.group({formatter:this.formBuilder.group({componentType:[""],properties:[]}),aggregator:this.formBuilder.group({aggregatorType:[""],properties:[]})}),this.dataFields=[],this.destroy$=new L}ngOnInit(){this.watchFormChanges(),this.setFromRegistry(),this.eventBus.getStream(dt).pipe(A(this.destroy$)).subscribe(e=>{let t=e.payload;t&&t.dataFieldsConfig?.dataFields$.pipe(A(this.destroy$)).subscribe(i=>{this.dataFields=i,this.updateAggregatorConfiguratorProps()})}),this.formReady.emit(this.form)}ngOnChanges(e){if(e.formatter&&this.form.get("formatter")?.patchValue(D({},e.formatter.currentValue)),e.aggregator&&this.form.get("aggregator")?.patchValue(D({},e.aggregator.currentValue)),e.chartType){let t=e.chartType.currentValue;this.shown=t===qr.DonutChart}}ngOnDestroy(){this.destroy$.complete()}onFormReady(e,t){this.form.get(e).setControl("properties",t)}get subtitleText(){return`${this.currentAggregatorDefinition?.label}, ${this.currentFormatterDefinition?.label}`}setFromRegistry(){this.formatters=this.contentFormattersRegistry.getItems(),this.aggregators=this.aggregatorRegistry.getItems();let e=this.formatters.find(i=>i.componentType===this.formatter?.componentType);e||(e=this.formatters[0]),this.form.get("formatter.componentType")?.setValue(e.componentType);let t=this.aggregators.find(i=>i.aggregatorType===this.aggregator?.aggregatorType);t||(t=this.aggregators[0]),this.form.get("aggregator.aggregatorType")?.setValue(t.aggregatorType)}watchFormChanges(){this.form.get("aggregator.aggregatorType")?.valueChanges.pipe(A(this.destroy$)).subscribe(e=>{this.currentAggregatorDefinition=this.aggregators.find(({aggregatorType:t})=>t===e),this.updateAggregatorConfiguratorProps()}),this.form.get("formatter.componentType")?.valueChanges.pipe(A(this.destroy$)).subscribe(e=>{this.currentFormatterDefinition=this.formatters.find(({componentType:t})=>t===e),this.updateAggregatorConfiguratorProps()})}updateAggregatorConfiguratorProps(){this.aggregatorConfiguratorProps=j(D(D({},this.currentAggregatorDefinition?.properties),this.aggregator?.properties),{metrics:this.dataFields})}static{this.\u0275fac=function(t){return new(t||r)(c(V),c(N),c(Ne),c(kr),c(Kr))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-donut-content-configuration"]],inputs:{chartType:"chartType",formatter:"formatter",aggregator:"aggregator"},outputs:{formReady:"formReady"},standalone:!1,features:[k],decls:1,vars:1,consts:()=>{let e;e=$localize`:87181c5142c58c027d97ac0f37b9c6bb78b624cd6056551297792932760:Aggregate`;let t;t=$localize`:408b4f352f2fec5727e6df77cb926194384bbba0736196504450716827:Select Format`;let i;i=$localize`:7722a92a1fc887570b4f4d8a7bb916f067f320287513076467032912668:Format`;let n;n=$localize`:408b4f352f2fec5727e6df77cb926194384bbba0736196504450716827:Select Format`;let s;return s=$localize`:c488fe848f6a00cefad87ff595b384e4e0f7ff1d2010665105219070274:Donut Content Configuration`,[["componentPortal","nuiComponentPortal"],s,[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],[1,"nui-text-secondary",3,"title"],[1,"donut-content-configuration__accordion-content"],["formGroupName","aggregator",1,"mb-4"],["caption",e,3,"control"],["placeholder",t,"formControlName","aggregatorType"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["formGroupName","formatter",1,"mb-4"],["caption",i,3,"control"],["placeholder",n,"formControlName","componentType"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"output","componentType","properties","outputs"],[3,"attached","cdkPortalOutlet"]]},template:function(t,i){t&1&&f(0,Jl,24,20,"ng-container",2),t&2&&a("ngIf",i.shown)},dependencies:[Q,U,pe,J,ee,me,Ve,fe,Pe,He,ce,Ce,_e,Me,ge,ze,De],styles:[".donut-content-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0})}}return r})();function ed(r,o){if(r&1){let e=v();Y(0),d(1,"div",16)(2,"nui-form-field",17)(3,"nui-textbox-number",18),T("valueChange",function(){_(e);let i=u(2);return C(i.stub())}),m(),d(4,"nui-validation-message",19),G(5,2),m()()(),K()}if(r&2){let e=u(2);l(2),a("control",e.form.controls.width),l(2),a("show",e.form.controls.width.invalid)}}function td(r,o){r&1&&(d(0,"nui-message",20),kt(1,3),S(2,"b"),Wt(),m()),r&2&&a("allowDismiss",!1)}function id(r,o){if(r&1&&(Y(0),f(1,ed,6,2,"ng-container",14)(2,td,3,1,"nui-message",15),K()),r&2){let e=u();l(),a("ngIf",!e.isWidthMessageDisplayed),l(),a("ngIf",e.isWidthMessageDisplayed)}}var ta=(()=>{class r{static{this.lateLoadKey="DescriptionConfigurationComponent"}constructor(e,t){this.formBuilder=e,this.changeDetector=t,this.formReady=new I,this.formDestroy=new I}ngOnInit(){this.form=this.formBuilder.group({label:[this.label||null,[de.required]],isActive:this.isActive??!0,width:this.width||void 0}),this.formReady.emit(this.form)}ngOnChanges(e){e.label&&this.form?.patchValue({label:e.label.currentValue}),e.isActive&&this.form?.patchValue({isActive:e.isActive.currentValue}),e.width&&this.form?.patchValue({width:e.width.currentValue})}stub(){}ngOnDestroy(){this.formDestroy.emit(this.form)}static{this.\u0275fac=function(t){return new(t||r)(c(V),c(N))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label",isActive:"isActive",width:"width",isWidthMessageDisplayed:"isWidthMessageDisplayed"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},standalone:!1,features:[k],decls:17,vars:16,consts:()=>{let e;e=$localize`:863226cffd5b66a6fee9810a9282a5006d6ef5764077520913910941990:Label`;let t;t=$localize`:c9a9da14b0f8c677efa737185f1232f8537bd2a63224868488156254475: This field is required `;let i;i=$localize`:49e97f1ac4309fd5992a9520d74fa732c4a774815413084173448405143:Show this column`;let n;n=$localize`:6b3f02f1feab94e0f0a6823f49a009fa7be7dfa98419094197651631948:Column width (px)`;let s;s=$localize`:455a91268699c6879146b5fe44595de6628e6d324319439665214681027:Auto width`;let p;p=$localize`:356aa3e61db78cca0742edfab898c6bf0c8051a63835988025416576743: Minimum width of the column is 62px `;let g;return g=$localize`:ed094d9c3b5f802e6adca32349fb4756bfad47865991148749044556035:${"\uFFFD#2\uFFFD"}:START_BOLD_TEXT:All columns can not have fixed width.${"\uFFFD/#2\uFFFD"}:CLOSE_BOLD_TEXT:`,[t,i,p,g,[3,"formGroup"],[3,"state"],["headerTitle","Description",3,"headerIcon","subtitle"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",e,1,"mb-3",3,"control"],["formControlName","label"],["for","required"],[3,"control"],["formControlName","isActive"],[4,"ngIf"],["type","info",3,"allowDismiss",4,"ngIf"],[1,"mt-4"],["caption",n,1,"mb-3",3,"control"],["placeholder",s,"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],["type","info",3,"allowDismiss"]]},template:function(t,i){if(t&1&&(Y(0,4),d(1,"nui-widget-editor-accordion",5),E(2,"nuiWidgetEditorAccordionFormState"),E(3,"async"),S(4,"nui-widget-editor-accordion-header",6),E(5,"nuiFormHeaderIconPipe"),E(6,"async"),d(7,"div",7)(8,"div",8)(9,"nui-form-field",9),S(10,"nui-textbox",10),d(11,"nui-validation-message",11),G(12,0),m()()(),d(13,"nui-form-field",12)(14,"nui-checkbox",13),G(15,1),m()(),f(16,id,3,2,"ng-container",14),m()(),K()),t&2){let n;a("formGroup",i.form),l(),a("state",B(3,9,B(2,7,i.form))),l(3),a("headerIcon",B(6,14,ae(5,11,i.form,"widget_list")))("subtitle",i.form.controls.label.value),l(5),a("control",i.form.controls.label),l(4),a("control",i.form.controls.isActive),l(3),a("ngIf",(n=i.form.get("isActive"))==null?null:n.value)}},dependencies:[U,pe,J,ee,me,er,tr,ce,Wo,be,Jt,Me,je,ge,ze,De],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0})}}return r})();function od(r,o){if(r&1&&(d(0,"nui-select-v2-option",13),P(1),m()),r&2){let e=o.$implicit;a("value",e.id),l(),X(" ",e.label," ")}}function rd(r,o){if(r&1&&(d(0,"nui-select-v2-option",13),P(1),m()),r&2){let e=o.$implicit;a("value",e.id),l(),X(" ",e.label," ")}}var ia=(()=>{class r extends Ei{static{this.lateLoadKey="LinkConfiguratorComponent"}constructor(e,t,i,n){super(e,t,i,n)}initForm(){let e={link:[null,de.required],value:[null,de.required]};this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group(e),targetSelf:[!1]}),this.formReady.emit(this.form)}static{this.\u0275fac=function(t){return new(t||r)(c(N),c(he),c(V),c(Z))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-link-configurator"]],standalone:!1,features:[rt],decls:17,vars:6,consts:()=>{let e;e=$localize`:label field caption| the entity field to be selected for the
                    html label property0b86bb6b0b2a82f208239974d253b863951435037152588193113320722:Label`;let t;t=$localize`:url field caption| the entity field to be selected for the
                    url html propertyab9389f13cf14de62c26ae2d6d29351d72d8ca9e8752860715344063998:URL`;let i;i=$localize`:form field caption|switch configuring whether formatted link
                should open in new window/tab21e975dab4148f3f1b43017b9df1312910d25a211433694158029413710:Open in the same window`;let n;n=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `;let s;return s=$localize`:8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c8999046125839025839: This field is required `,[n,s,[3,"formGroup"],["formGroupName","dataFieldIds"],[1,"mb-4"],["caption",e,1,"mb-3",3,"control"],["formControlName","value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],["caption",t,1,"mb-3",3,"control"],["formControlName","link"],["caption",i,1,"mb-3",3,"control"],["id","nui-switch-target","formControlName","targetSelf"],[3,"value"]]},template:function(t,i){t&1&&(d(0,"div",2)(1,"div",3)(2,"div",4)(3,"nui-form-field",5)(4,"nui-select-v2",6),f(5,od,2,2,"nui-select-v2-option",7),m(),d(6,"nui-validation-message",8),G(7,0),m()()(),d(8,"div")(9,"nui-form-field",9)(10,"nui-select-v2",10),f(11,rd,2,2,"nui-select-v2-option",7),m(),d(12,"nui-validation-message",8),G(13,1),m()()()(),d(14,"div")(15,"nui-form-field",11),S(16,"nui-switch",12),m()()()),t&2&&(a("formGroup",i.form),l(3),a("control",i.dataFieldIds.controls.value),l(2),a("ngForOf",i.dropdownItems.value),l(4),a("control",i.dataFieldIds.controls.link),l(2),a("ngForOf",i.dropdownItems.link),l(4),a("control",i.form.controls.targetSelf))},dependencies:[Q,pe,J,ee,me,Ve,ce,Ce,_e,be,Xo],encapsulation:2})}}return r})();function nd(r,o){if(r&1&&(d(0,"nui-select-v2-option",8),P(1),m()),r&2){let e=o.$implicit;a("displayValueContext",e.label)("value",e.id),l(),X(" ",e.label," ")}}function sd(r,o){if(r&1&&(d(0,"div",2)(1,"div",3)(2,"nui-form-field",4)(3,"nui-select-v2",5),E(4,"async"),f(5,nd,2,3,"nui-select-v2-option",6),m(),d(6,"nui-validation-message",7),G(7,0),m()()()()),r&2){let e=u();a("formGroup",e.form),l(2),a("control",e.dataFieldIds.controls.value),l(),a("popupViewportMargin",B(4,4,e.configuratorHeading.height$)),l(2),a("ngForOf",e.dropdownItems.value)}}var oa=(()=>{class r extends Ei{static{this.lateLoadKey="ValueSelectorComponent"}constructor(e,t,i,n){super(e,t,i,n)}static{this.\u0275fac=function(t){return new(t||r)(c(N),c(he),c(V),c(Z))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-value-selector"]],standalone:!1,features:[rt],decls:1,vars:1,consts:()=>{let e;e=$localize`:5049e204c14c648691ac775a64fb504467aeb5496555318547274416232:Value`;let t;t=$localize`:25b479494f612322c149610b9b2e3cd4c782c3134594093405818643397:Select Value`;let i;return i=$localize`:b17406f843dc33feb81478ae8273dc1aae06bbf62244196281006156184: This field is required `,[i,[3,"formGroup",4,"ngIf"],[3,"formGroup"],["formGroupName","dataFieldIds"],["caption",e,1,"mb-3",3,"control"],["formControlName","value","placeholder",t,3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],[3,"displayValueContext","value"]]},template:function(t,i){t&1&&f(0,sd,8,6,"div",1),t&2&&a("ngIf",i.form)},dependencies:[Q,U,pe,J,ee,me,Ve,ce,Ce,_e,be,ge],encapsulation:2})}}return r})();var ra=ie($o()),na=ie(Fo()),sa=ie(xa());function ad(r,o){r&1&&(d(0,"div",7)(1,"nui-message",8),kt(2,2),S(3,"b"),Wt(),m()()),r&2&&(l(),a("allowDismiss",!1))}var aa=(()=>{class r{static{this.lateLoadKey="TableColumnsConfigurationComponent"}constructor(e,t,i,n,s){this.formBuilder=e,this.changeDetector=t,this.dialogService=i,this.pizzagnaService=n,this.eventBus=s,this.columns=[],this.formatters=[],this.dataFields=[],this.formReady=new I,this.onDestroy$=new L,this.lastValidDataFields=[],this.eventBus.subscribeUntil(dt,this.onDestroy$,p=>{p.payload&&(this.dataSource=p.payload)}),this.eventBus.subscribeUntil(lt,this.onDestroy$,p=>{let{dataFields:g}=(0,na.default)(p.payload.result)?p.payload:p.payload.result||{};if(g){let h=this.pizzagnaService.pizzagna;h=Te(h,`${H.Data}.columns.properties.dataFields`,g);let x=(this.pizzagnaService.pizzagna[H.Structure].columns.properties?.template).findIndex(Oe=>Oe.id==="presentation"),$=`${H.Structure}.columns.properties.template[${x}].properties.dataFields`;h=Te(h,$,g),h=(0,ra.default)(this.pizzagnaService.pizzagna,`${H.Data}.columns.properties.columns`).map(Oe=>Oe.id).reduce((Oe,Fe)=>Te(Oe,`${H.Data}.${Fe}/presentation.properties.dataFields`,g),h),this.pizzagnaService.updatePizzagna(h),this.eventBus.getStream(at).next({payload:{path:"",value:h}})}})}ngOnInit(){}ngOnChanges(e){if(e.dataFields&&e.dataFields.currentValue){this.lastValidDataFields=e.dataFields.currentValue;let t=this.dataSource?.features?.getFeatureConfig(Pr.DisableTableColumnGeneration)?.enabled,i=this.mergeColumns(e.dataFields.currentValue,this.columns);i?.length||t?this.onItemsChange(i):t||this.resetColumns(!1),setTimeout(()=>this.changeDetector.markForCheck())}if(e.columns){let t=this.columns.map(i=>({id:i.id,children:{[`${i.id}/description`]:D({},i),[`${i.id}/presentation`]:D({},i)}}));this.pizzagnaService.createComponentsFromTemplateWithProperties("columns",t),setTimeout(()=>{this.form.get("columns")?.setValue([...this.form.get("columns")?.value??[]])})}}onFormReady(e){this.form=this.formBuilder.group({columns:e,columnsOutput:{}}),this.emptyColumns$=this.form.valueChanges.pipe(uo(t=>t.columns.length===0)),this.formReady.emit(this.form),this.form.get("columns")?.valueChanges.subscribe(t=>{let i=t.map(n=>{let s={id:n.id};for(let p of Object.keys(n.properties))s=D(D({},s),n.properties[p]);return s.sortable=this.lastValidDataFields?.find(p=>p.id===s.formatter?.properties?.dataFieldIds?.value)?.sortable,s});this.form.get("columnsOutput")?.setValue(i)})}onItemsChange(e){let t="columns",i=e.map(s=>s.id);this.pizzagnaService.createComponentsFromTemplate(t,i);let n={componentId:this.componentId,pizzagnaKey:H.Data,propertyPath:["columns"]};this.pizzagnaService.setProperty(n,e)}addColumn(){this.onItemsChange([...this.columns,{id:St("column"),label:"",formatter:void 0}])}onResetColumns(){this.resetColumns(!!this.columns?.length)}resetColumns(e){let t=()=>{let i=this.lastValidDataFields.map(n=>({id:St("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:n.id}}},isActive:!0,label:n.label,width:void 0,sortable:n.sortable}));this.onItemsChange(i)};e?this.dialogService.confirm({title:$localize`Are you sure?`,message:$localize`Resetting the columns will revert them to their default configurations. Do you wish to proceed?`,confirmText:$localize`Reset Columns`}).result.then(n=>{n&&t()},()=>{}):t()}mergeColumns(e,t){let i=e.map(n=>n.id);return t.filter(n=>n.formatter?.properties?.dataFieldIds?(0,sa.default)(n.formatter?.properties?.dataFieldIds).some(s=>i.includes(s)):!1)}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}static{this.\u0275fac=function(t){return new(t||r)(c(V),c(N),c(sr),c(Xe),c(Ne))}}static{this.\u0275cmp=O({type:r,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",formatters:"formatters",componentId:"componentId",dataFields:"dataFields",nodes:"nodes"},outputs:{formReady:"formReady"},standalone:!1,features:[k],decls:7,vars:5,consts:()=>{let e;e=$localize`:e3c2715ed7f11ed4ac89f4153d8557f182a6918e763982378603811482:Column`;let t;t=$localize`:71b3b6b8f687cdb01eafe73ac62da2e1e5b87af95086057767318144098: Add new column
`;let i;i=$localize`:74cee6ce69c809bb4e67d7cc9e16478a67f9e58d4978445162559740484: Reset columns
`;let n;return n=$localize`:67705586cab07e9ae4f2a9822320fa14e7fb60a78157770720263764419:${"\uFFFD#3\uFFFD"}:START_BOLD_TEXT:At least one column must be added.${"\uFFFD/#3\uFFFD"}:CLOSE_BOLD_TEXT:`,[t,i,n,["headerPrefix",e,3,"itemsChange","formReady","items","nodes"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"]]},template:function(t,i){t&1&&(d(0,"nui-items-dynamic",3),T("itemsChange",function(s){return i.onItemsChange(s)})("formReady",function(s){return i.onFormReady(s)}),m(),f(1,ad,4,1,"div",4),E(2,"async"),d(3,"button",5),T("click",function(){return i.addColumn()}),G(4,0),m(),d(5,"button",6),T("click",function(){return i.onResetColumns()}),G(6,1),m()),t&2&&(a("items",i.columns)("nodes",i.nodes),l(),a("ngIf",B(2,3,i.emptyColumns$)&&i.form.touched))},dependencies:[U,nt,Jt,Ci,ge],encapsulation:2,changeDetection:0})}}return r})();var la=(()=>{class r{static getTextColor(e){return new Sr(new Or([e]),{light:"white",dark:"black"}).get(e)}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275prov=le({token:r,factory:r.\u0275fac})}}return r})();var da=ie(Kt());var Fi=(()=>{class r{constructor(e,t){this.configuratorService=e,this.componentPortalService=t}open(e){if(!e.portalBundle){let i={portal:this.componentPortalService.createComponentPortal(Mi,null),attached:n=>{let s=n.instance;s.formPizzagna=e.formPizzagna,s.formRoot=e.paths?.root,s.changeDetector.markForCheck(),setTimeout(()=>{this.ref=n})}};e.portalBundle=i}let t=(0,da.default)(e.widget);return delete t.pizzagna[H.Data],e.widget=t,e.previewPizzagnaComponent=()=>this.ref.instance.configurator.getPreview(),this.configuratorService.open(e)}static{this.\u0275fac=function(t){return new(t||r)(b(gt),b(mt))}}static{this.\u0275prov=le({token:r,factory:r.\u0275fac})}}return r})();var pa=[Ke,_n,xi,Pn,Ws,Ii,Bn,Xn,zn,Dn,Hn,zi,Qn,es,kn,ts,aa,qn,Zn,Mn,Cn,As,In,Tn,On,Nn,ia,oa,Sn,Pi,wn,yn,vn,Fn,An,Gn,Wn,Ti,Mi,bi,ta,Yn,jn,Kn,is,os,Ln,bn,Yi,ji,Di,Un,Vn],l_=[...pa,ft,Ge,Me,je,Ci,gn,_t,$n,En,Ri,ze,Rn,De,fn],ma=(()=>{class r{constructor(e){for(let t of pa.filter(i=>i.lateLoadKey))e.registerByLateLoadKey(t)}static{this.\u0275fac=function(t){return new(t||r)(b(fi))}}static{this.\u0275mod=Re({type:r})}static{this.\u0275inj=Ee({providers:[gt,he,xn,Fi,qs,la,dn,on,Jn],imports:[Yt,ut,Xt,yi,Ao,Ot,ri,wi,qt,ti,ei,ar,oi,or,dr,Qt,Ko,qo,ir,Bo,Tr,lr,cr,Uo,Qo,Vo,Ir,gr,ni,ii,st]})}}return r})();var ua=ie(Kt());var ca=ie(Do());var ha=(()=>{class r{constructor(e){this.logger=e,this.updateDashboard=t=>i=>new Mt(n=>i.subscribe(s=>{s&&t.removeWidget(s),n.next()}))}handleRemove(e,t,i,n){return this.tryRemove(n,t,i).pipe(this.updateDashboard(e))}tryRemove(e,t,i){return(0,ca.default)(e)?e(t,i).pipe(Ft(n=>(this.logger.error(n),zt))):Dt(t)}static{this.\u0275fac=function(t){return new(t||r)(b(Z))}}static{this.\u0275prov=le({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var md=(()=>{class r{constructor(e,t,i,n){this.dashboardComponent=e,this.widgetEditorService=t,this.widgetRemovalService=i,this.widgetTypesService=n,this.destroy$=new L}ngOnInit(){this.dashboardComponent.eventBus.getStream(ai).pipe(Ze(e=>{let t=this.dashboardComponent.dashboard.widgets[e.widgetId],i=this.widgetTypesService.getWidgetType(t.type,t.version),n={dashboardComponent:this.dashboardComponent,formPizzagna:i.configurator,paths:i.paths.configurator,widget:t,trySubmit:this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.trySubmit};return this.widgetEditorService.open(n)}),A(this.destroy$)).subscribe(),this.dashboardComponent.eventBus.getStream(si).pipe(Ze(e=>{if(!e.widgetId)throw new Error("event has to have widgetId");let t=e.widgetId,i=this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.tryRemove,n={dashboardComponent:this.dashboardComponent,widget:(0,ua.default)(this.dashboardComponent.dashboard.widgets[t])};return this.widgetRemovalService.handleRemove(this.dashboardComponent,t,n,i)}),A(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||r)(c(ao,3),c(Fi),c(ha),c(oe))}}static{this.\u0275dir=At({type:r,selectors:[["","nuiWidgetEditor",""]],inputs:{dashboardPersistenceHandler:[0,"nuiWidgetEditor","dashboardPersistenceHandler"]},standalone:!1})}}return r})();var ga={paths:{widget:{[y.Root]:M},configurator:{[y.Root]:M,[y.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:as,configurator:rs};var fa={paths:{widget:{[y.Root]:M},configurator:{[y.Root]:M}},widget:ds,configurator:ls};var _a="tiles.properties.template[0]",Ca="tiles.properties.template[1]",cd="tiles.properties.template[3]",Ta={paths:{widget:{[y.Root]:M},configurator:{[y.Root]:M,[y.DataSourceConfigComponentType]:`${Ca}.componentType`,[y.TileDescriptionConfigComponentType]:`${_a}.componentType`,[y.DataSourceProviders]:`${Ca}.properties.dataSourceProviders`,[y.TileDescriptionBackgroundColors]:`${_a}.properties.backgroundColors`,[y.TileBackgroundColorRulesBackgroundColors]:`${cd}.properties.backgroundColors`}},widget:ms,configurator:ps};var Ia={paths:{widget:{[y.Root]:M},configurator:{[y.Root]:M}},widget:{[H.Structure]:{[M]:{id:M,componentType:_i.lateLoadKey,properties:{nodes:["header","body"]}},header:ns,body:ss,bodyContent:{id:"bodyContent",componentType:Pi.lateLoadKey}},[H.Configuration]:{header:{properties:{title:$localize`New Widget`}}}}};var Oa={paths:{widget:{[y.Root]:M},configurator:{[y.Root]:M,[y.DataSourceConfigComponentType]:"dataSource.componentType",[y.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[y.Formatters]:"chartOptionsEditor.properties.chartOptions.contentFormatters"}},widget:hs,configurator:cs};var hd="tiles.properties.template[0]",Sa="tiles.properties.template[1]",ya={paths:{widget:{[y.Root]:M},configurator:{[y.Root]:M,[y.DataSourceConfigComponentType]:`${Sa}.componentType`,[y.TileDescriptionConfigComponentType]:`${hd}.componentType`,[y.DataSourceProviders]:`${Sa}.properties.dataSourceProviders`}},widget:fs,configurator:gs};var va={paths:{widget:{[y.Root]:M},configurator:{[y.Root]:M,[y.DataSourceConfigComponentType]:"dataSource.componentType",[y.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[y.Formatters]:"columns.properties.template[1].properties.formatters"}},widget:Cs,configurator:_s};var Na={paths:{widget:{[y.Root]:M},configurator:{[y.Root]:M,[y.DataSourceConfigComponentType]:"dataSource.componentType",[y.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:Is,configurator:Ts};var ud=[Vr,Hr,Jr,nn,hi,Qr,_i,sn,an,ln,rn,en,Ur,Xr,tn,pn,mn,cn,hn,Vi,Yr,$s,Fs,jr,un,Zr],y0=(()=>{class r{constructor(e,t,i,n,s){e.registerWidgetType("kpi",1,Ta),e.registerWidgetType("risk-score",1,ya),e.registerWidgetType("table",1,va),e.registerWidgetType("proportional",1,Oa),e.registerWidgetType("timeseries",1,Na),e.registerWidgetType("previewPlaceholder",1,Ia),e.registerWidgetType("embedded-content",1,fa),e.registerWidgetType("drilldown",1,ga);for(let p of ud.filter(g=>g.lateLoadKey))t.registerByLateLoadKey(p);i.registerEvent(vr),i.registerEvent(si),i.registerEvent(wr),i.registerEvent(ai),i.registerEvent(Nr),i.registerEvent(li),i.registerEvent(di),i.registerEvent(at),i.registerEvent(Rr),i.registerEvent(pi),i.registerEvent(mi),i.registerEvent(lt),i.registerEvent(xr),n.addItems(Ki),s.addItems(us)}static{this.\u0275fac=function(t){return new(t||r)(b(oe),b(fi),b(Lr),b(Ar),b(Gr))}}static{this.\u0275mod=Re({type:r})}static{this.\u0275inj=Ee({providers:[mt,oe,Po,Fr],imports:[ut,yi,ri,Qt,yr,ma,qt,st,ti,wi,ei,hr,fr,Cr,Yt,_r,Xt,oi,Yo,ni,ko,ii,ur,rr,Zo,pr]})}}return r})();var it=ie(Ma());function N0(r,o,e){let t=o;return e.forEach((i,n)=>{if(i.data.length===0)return;let s=-1,p=-1,g=o[n].data;g.length>0?(s=i.data.findIndex(x=>(0,it.default)(x.x).isSame(g[0].x)),p=i.data.findIndex(x=>(0,it.default)(x.x).isSame(g[g.length-1].x))):(s=i.data.findIndex(x=>(0,it.default)(x.x).isAfter(r.startDatetime)),p=i.data.findIndex(x=>(0,it.default)(x.x).isAfter(r.endDatetime))-1);let h=(0,it.default)(r.startDatetime);(g.length===0||!h.isSame(g[0].x))&&h.isBetween(i.data[0].x,i.data[i.data.length-1].x)&&t[n].data.unshift(j(D({},i.data[s-1]),{x:r.startDatetime.toDate()}));let z=(0,it.default)(r.endDatetime);(g.length===0||!z.isSame(g[g.length-1].x))&&z.isBetween(i.data[0].x,i.data[i.data.length-1].x)&&t[n].data.push(j(D({},i.data[p]),{x:r.endDatetime.toDate()}))}),t}var D0={presentation:{id:"presentation",componentType:Ti.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor","donutContentConfiguration"]}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:zi.lateLoadKey,properties:{chartTypes:[{id:"PieChart",label:$localize`Pie`},{id:"DonutChart",label:$localize`Donut`},{id:"VerticalBarChart",label:$localize`Vertical Bar`},{id:"HorizontalBarChart",label:$localize`Horizontal Bar`}],legendPlacementOptions:[{id:gi.None,label:$localize`None`},{id:gi.Right,label:$localize`Right`},{id:gi.Bottom,label:$localize`Bottom`}]},providers:{[ci.Converter]:{providerId:Hi,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions",keys:["type","legendPlacement","legendFormatter"]}]}},[ci.Broadcaster]:{providerId:br,properties:{configs:[{trackOn:"component",key:"chartTypeChanged$",paths:["data.donutContentConfiguration.properties.chartType"]}]}}}},donutContentConfiguration:{id:"donutContentConfiguration",componentType:Di.lateLoadKey,providers:{[ci.Converter]:{providerId:Hi,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions.donutContentConfig",keys:["formatter","aggregator"]}]}}}}};var gd=function(r){return r.Value="Value",r}(gd||{});export{ao as a,Fs as b,$s as c,Ls as d,As as e,Ws as f,Ei as g,qs as h,ma as i,md as j,y0 as k,gd as l,N0 as m,D0 as n};
