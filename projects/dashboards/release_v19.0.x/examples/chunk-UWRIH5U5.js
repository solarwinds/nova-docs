import{a as $,j as et,m as at}from"./chunk-BOWRRSH7.js";import{a as J}from"./chunk-DSXQJ4TK.js";import{b as tt,c as L}from"./chunk-IYRXTWZX.js";import{y as u}from"./chunk-ICNLH3VO.js";import{Aa as k,Ja as Q,b as nt,c as A,ea as N,ha as m,ia as q,ka as O}from"./chunk-UW6LU7NQ.js";import{Xc as H,oc as Y,we as B}from"./chunk-VVYJCL6H.js";import{f as K}from"./chunk-N5H4HNSX.js";import{Aa as g,Ac as j,Ba as b,Cb as G,Dc as f,Ea as U,Ec as S,Fc as R,Hb as M,Tb as h,Wc as Z,ac as l,bc as y,gc as P,i as v,ka as W,lc as X,pc as V,qb as D,qc as p,wb as x}from"./chunk-7LLRMBML.js";import{a as ot}from"./chunk-CUY44B7R.js";import{a as T,b as w,g as F,i as I}from"./chunk-VBFW7A5V.js";var it=F(nt()),c=F(ot());function dt(i,d){if(i&1){let a=P();l(0,"button",6),V("click",function(){g(a);let r=p();return b(r.reInitializeDashboard())}),j(1," Restore Widget "),y()}}function ct(i,d){if(i&1){let a=P();l(0,"nui-dashboard",7),R("dashboardChange",function(r){g(a);let o=p();return S(o.dashboard,r)||(o.dashboard=r),b(r)})("gridsterConfigChange",function(r){g(a);let o=p();return S(o.gridsterConfig,r)||(o.gridsterConfig=r),b(r)}),y()}if(i&2){let a=p();f("dashboard",a.dashboard),h("editMode",a.editMode),f("gridsterConfig",a.gridsterConfig)}}var _=(()=>{class i extends B{constructor(){super(...arguments),this.busy=new v(!1)}static{this.providerId="TimeseriesStatusContinuousDataSource"}getFilteredData(a){return I(this,null,function*(){let s=yt(),r=s;this.busy.next(!0);let o=a.timeframe?.value;return o&&(r=r.map(n=>({id:n.id,name:n.name,description:n.description,data:n.data.filter(E=>rt(E.x,o.startDatetime,o.endDatetime))})),r=at(o,r,s)),this.busy.next(!1),{result:{series:r}}})}static{this.\u0275fac=(()=>{let a;return function(r){return(a||(a=U(i)))(r||i)}})()}static{this.\u0275prov=W({token:i,factory:i.\u0275fac})}}return i})(),C=(()=>{class i extends B{constructor(){super(...arguments),this.busy=new v(!1)}static{this.providerId="TimeseriesStatusIntervalDataSource"}getFilteredData(a){return I(this,null,function*(){let r=ut();this.busy.next(!0);let o=a.timeframe?.value;return o&&(r=r.map(n=>({id:n.id,name:n.name,description:n.description,data:n.data.filter(E=>rt(E.x,o.startDatetime,o.endDatetime))}))),this.busy.next(!1),{result:{series:r}}})}static{this.\u0275fac=(()=>{let a;return function(r){return(a||(a=U(i)))(r||i)}})()}static{this.\u0275prov=W({token:i,factory:i.\u0275fac})}}return i})();function rt(i,d,a){let s=(0,c.default)(i);return s.isBetween(d,a)||s.isSame(d)||s.isSame(a)}var Tt=(()=>{class i{constructor(a,s,r){this.widgetTypesService=a,this.providerRegistry=s,this.changeDetectorRef=r,this.gridsterConfig={},this.editMode=!1}ngOnInit(){let a=this.widgetTypesService.getWidgetType("timeseries",1);this.widgetTypesService.setNode(a,"configurator",q.DataSourceProviders,[_.providerId,C.providerId]),this.providerRegistry.setProviders({[_.providerId]:{provide:N,useClass:_,deps:[]},[C.providerId]:{provide:N,useClass:C,deps:[]}}),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){let a=z.map(r=>this.widgetTypesService.mergeWithWidgetType(r)),s=(0,it.default)(a,r=>r.id);this.dashboard={positions:lt,widgets:s}}static{this.\u0275fac=function(s){return new(s||i)(x(J),x(Q),x(Z))}}static{this.\u0275cmp=G({type:i,selectors:[["timeseries-widget-status-bar-example"]],standalone:!1,decls:6,vars:3,consts:()=>{let a;return a=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[a,[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"valueChange","value"],["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboardChange","gridsterConfigChange","dashboard","editMode","gridsterConfig"]]},template:function(s,r){s&1&&(l(0,"div",1)(1,"nui-switch",2),R("valueChange",function(n){return S(r.editMode,n)||(r.editMode=n),n}),X(2,0),y(),M(3,dt,2,0,"button",3),y(),l(4,"div",4),M(5,ct,1,3,"nui-dashboard",5),y()),s&2&&(D(),f("value",r.editMode),D(2),h("ngIf",!(r.dashboard!=null&&r.dashboard.widgets.timeseriesWidgetId)),D(2),h("ngIf",r.dashboard))},dependencies:[Y,K,H,$,et],styles:[".dashboard[_ngcontent-%COMP%]{height:485px}"]})}}return i})(),z=[{id:"statusChartWidgetId",type:"timeseries",pizzagna:{[O.Configuration]:{[A]:{providers:{[m.DataSource]:{providerId:_.providerId}}},header:{properties:{title:"Status Bar Chart with Continuous (Non-Interval) Scale",subtitle:"Basic Timeseries Widget"}},chart:{providers:{[m.Adapter]:{properties:{series:[{id:"series-1",label:"Node Status",selectedSeriesId:"series-1"},{id:"series-2",label:"Node Status",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:k.Right,enableZoom:!0,preset:L.StatusBar}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,c.default)().format()}}}}},{id:"statusIntervalChartWidgetId",type:"timeseries",pizzagna:{[O.Configuration]:{[A]:{providers:{[m.DataSource]:{providerId:C.providerId}}},header:{properties:{title:"Status Bar Chart with Interval Scale",subtitle:"Basic Timeseries Widget"}},chart:{providers:{[m.Adapter]:{properties:{series:[{id:"series-1",label:"Node Status",selectedSeriesId:"series-1"},{id:"series-2",label:"Node Status",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:k.Right,enableZoom:!0,preset:L.StatusBar,scales:{x:{type:tt.TimeInterval,properties:{interval:24*60*60}}}}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},maxDate:(0,c.default)().format()}}}}}],e=()=>(0,c.default)().startOf("day"),yt=()=>{let i=[{id:"series-1",name:"Node Status",description:"lastchance.demo.lab",data:[{x:e().subtract(20,"day").toDate(),y:t.Warning},{x:e().subtract(19,"day").toDate(),y:t.Down},{x:e().subtract(17,"day").toDate(),y:t.Critical},{x:e().subtract(16,"day").toDate(),y:t.Warning},{x:e().subtract(15,"day").toDate(),y:t.Down},{x:e().subtract(14,"day").toDate(),y:t.Critical},{x:e().subtract(12,"day").toDate(),y:t.Unknown},{x:e().subtract(10,"day").toDate(),y:t.Up},{x:e().subtract(9,"day").toDate(),y:t.Critical},{x:e().subtract(6,"day").toDate(),y:t.Up},{x:e().subtract(3,"day").toDate(),y:t.Warning},{x:e().subtract(2,"day").toDate(),y:t.Critical},{x:e().subtract(1,"day").toDate(),y:t.Up},{x:(0,c.default)().toDate(),y:t.Up}]},{id:"series-2",name:"Node Status",description:"newhope.demo.lab",data:[{x:e().subtract(19,"day").toDate(),y:t.Critical},{x:e().subtract(18,"day").toDate(),y:t.Unknown},{x:e().subtract(17,"day").toDate(),y:t.Warning},{x:e().subtract(15,"day").toDate(),y:t.Down},{x:e().subtract(8,"day").toDate(),y:t.Critical},{x:e().subtract(7,"day").toDate(),y:t.Down},{x:e().subtract(6,"day").toDate(),y:t.Up},{x:e().subtract(5,"day").toDate(),y:t.Critical},{x:e().subtract(4,"day").toDate(),y:t.Up},{x:e().subtract(3,"day").toDate(),y:t.Warning},{x:e().subtract(2,"day").toDate(),y:t.Up},{x:e().subtract(1,"day").toDate(),y:t.Down},{x:(0,c.default)().toDate(),y:t.Down}]}];for(let d of i)d.data=d.data.map((a,s)=>w(T({},a),{color:st[a.y],thick:a.y!==t.Up,icon:"status_"+a.y}));return i},ut=()=>{let i=[{id:"series-1",name:"Node Status",description:"lastchance.demo.lab",data:[{x:e().subtract(20,"day").toDate(),y:t.Up},{x:e().subtract(19,"day").toDate(),y:t.Critical},{x:e().subtract(18,"day").toDate(),y:t.Warning},{x:e().subtract(17,"day").toDate(),y:t.Down},{x:e().subtract(16,"day").toDate(),y:t.Critical},{x:e().subtract(15,"day").toDate(),y:t.Down},{x:e().subtract(14,"day").toDate(),y:t.Up},{x:e().subtract(13,"day").toDate(),y:t.Warning},{x:e().subtract(12,"day").toDate(),y:t.Up},{x:e().subtract(11,"day").toDate(),y:t.Critical},{x:e().subtract(10,"day").toDate(),y:t.Up},{x:e().subtract(9,"day").toDate(),y:t.Down},{x:e().subtract(8,"day").toDate(),y:t.Critical},{x:e().subtract(7,"day").toDate(),y:t.Warning},{x:e().subtract(6,"day").toDate(),y:t.Down},{x:e().subtract(5,"day").toDate(),y:t.Critical},{x:e().subtract(4,"day").toDate(),y:t.Down},{x:e().subtract(3,"day").toDate(),y:t.Up},{x:e().subtract(2,"day").toDate(),y:t.Warning},{x:e().subtract(1,"day").toDate(),y:t.Critical},{x:e().toDate(),y:t.Up}]},{id:"series-2",name:"Node Status",description:"newhope.demo.lab",data:[{x:e().subtract(20,"day").toDate(),y:t.Up},{x:e().subtract(19,"day").toDate(),y:t.Up},{x:e().subtract(18,"day").toDate(),y:t.Down},{x:e().subtract(17,"day").toDate(),y:t.Critical},{x:e().subtract(16,"day").toDate(),y:t.Down},{x:e().subtract(15,"day").toDate(),y:t.Up},{x:e().subtract(14,"day").toDate(),y:t.Critical},{x:e().subtract(13,"day").toDate(),y:t.Up},{x:e().subtract(12,"day").toDate(),y:t.Critical},{x:e().subtract(11,"day").toDate(),y:t.Warning},{x:e().subtract(10,"day").toDate(),y:t.Up},{x:e().subtract(9,"day").toDate(),y:t.Down},{x:e().subtract(8,"day").toDate(),y:t.Up},{x:e().subtract(7,"day").toDate(),y:t.Down},{x:e().subtract(6,"day").toDate(),y:t.Critical},{x:e().subtract(5,"day").toDate(),y:t.Down},{x:e().subtract(4,"day").toDate(),y:t.Up},{x:e().subtract(3,"day").toDate(),y:t.Critical},{x:e().subtract(2,"day").toDate(),y:t.Up},{x:e().subtract(1,"day").toDate(),y:t.Warning},{x:e().toDate(),y:t.Critical}]}];for(let d of i)d.data=d.data.map((a,s)=>w(T({},a),{color:st[a.y],thick:a.y!==t.Up,icon:"status_"+a.y}));return i},t=function(i){return i.Unknown="unknown",i.Up="up",i.Warning="warning",i.Down="down",i.Critical="critical",i}(t||{}),st={[t.Unknown]:u[6],[t.Up]:u[8],[t.Warning]:u[4],[t.Down]:u[0],[t.Critical]:u[2]},lt={[z[0].id]:{cols:12,rows:4,y:0,x:0},[z[1].id]:{cols:12,rows:4,y:4,x:0}};export{_ as a,C as b,Tt as c,e as d,yt as e,ut as f};
