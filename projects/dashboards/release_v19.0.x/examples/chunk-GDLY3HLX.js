import{a as q}from"./chunk-ZKE5BQF3.js";import{ca as H,ea as G,ja as W,s as K}from"./chunk-573U3PX6.js";import{Cd as L,Ec as z,Rd as A,h as X}from"./chunk-PMWUHOKA.js";import{f as F,j as U,k as j}from"./chunk-YHLZAVJ5.js";import{Aa as b,Ac as k,Ba as O,Bc as C,Ca as T,Cc as y,Db as I,Ib as _,Jc as R,Sc as V,Ub as a,Vb as B,Wb as M,Xb as $,Xc as Z,bc as l,cc as s,dc as f,ec as h,fc as w,gc as v,hc as E,nb as P,qc as N,rb as o,rc as p,xb as g}from"./chunk-MCPF2SEG.js";import{g as Q}from"./chunk-VBFW7A5V.js";var J=Q(X());var Y=n=>({color:n});function ee(n,x){if(n&1&&(h(0),l(1,"a",3),v(2,4),s(),w()),n&2){let t=p(),i=k(4);o(),a("href",t.widgetData.link,P),o(),a("ngTemplateOutlet",i)}}function te(n,x){if(n&1){let t=E();h(0),l(1,"div",5),N("click",function(){O(t);let r=p();return T(r.onInteraction())}),v(2,4),s(),w()}if(n&2){p();let t=k(4);o(2),a("ngTemplateOutlet",t)}}function ie(n,x){if(n&1&&(f(0,"div",6),l(1,"div",7)(2,"div",8)(3,"div",9)(4,"span",10),C(5),s()(),l(6,"div",11),f(7,"nui-risk-score",12),s(),l(8,"div",13)(9,"div",14)(10,"p"),C(11),s()()()()()),n&2){let t,i,r,d,c,u,m,D,S,e=p();M("nui-risk-score-tile-indicator--interactive",e.interactive),o(),a("ngStyle",R(25,Y,(e.widgetData==null?null:e.widgetData.textColor)||e.defaultColor)),o(2),a("title",e.widgetData==null?null:e.widgetData.label),o(),a("useZoom",!1)("minScale",.5)("scaleIN$",(t=e.getScaleBroker("label"))==null?null:t.out$)("scaleOUT$",(i=e.getScaleBroker("label"))==null?null:i.in$),o(),y(e.widgetData==null?null:e.widgetData.label),o(),B("font-size",e.widgetData==null?null:e.widgetData.fontSize),a("title",e.widgetData==null?null:e.widgetData.value),o(),a("useZoom",!1)("scaleIN$",(r=e.getScaleBroker("value"))==null?null:r.out$)("scaleOUT$",(d=e.getScaleBroker("value"))==null?null:d.in$)("level",e.widgetData==null?null:e.widgetData.value)("minLevel",(c=e.widgetData==null?null:e.widgetData.minValue)!==null&&c!==void 0?c:0)("maxLevel",(u=e.widgetData==null?null:e.widgetData.maxValue)!==null&&u!==void 0?u:10)("title",(m=e.widgetData==null?null:e.widgetData.useStaticLabel)!==null&&m!==void 0&&m?e.widgetData==null?null:e.widgetData.staticLabel:e.widgetData==null?null:e.widgetData.value),o(),a("title",e.widgetData==null?null:e.widgetData.description),o(),a("useZoom",!1)("minScale",.7)("scaleIN$",(D=e.getScaleBroker("description"))==null?null:D.out$)("scaleOUT$",(S=e.getScaleBroker("description"))==null?null:S.in$),o(2),y(e.widgetData==null?null:e.widgetData.description)}}var ce=(()=>{class n{static{this.lateLoadKey="RiskScoreTileComponent"}get interactive(){return(this.configuration?.interactive||this.dataSource?.features?.getFeatureConfig(W.Interactivity)?.enabled)&&!(0,J.default)(this.widgetData?.value)||!1}constructor(t,i,r){this.changeDetector=t,this.dataSource=i,this.eventBus=r,this.busy=!1,this.elementClass="",this.defaultColor="var(--nui-color-bg-secondary)"}onInteraction(){this.interactive&&this.eventBus.getStream(K).next({payload:{data:this.widgetData}})}getScaleBroker(t){if(this.syncValuesBroker)return this.syncValuesBroker.find(i=>i.id===t)}ngOnChanges(t){if(t.configuration){let i=t.configuration.currentValue.formatters;i&&(this.formattersProperties=this.getFormatterProperties(i))}t.widgetData&&this.configuration?.formatters&&(this.formattersProperties=this.getFormatterProperties(this.configuration.formatters))}getFormatterProperties(t){return Object.keys(t).reduce((d,c)=>{let u=t[c]?.formatter;return u&&(d[c]={data:q(u,this.widgetData)}),d},{})}static{this.\u0275fac=function(i){return new(i||n)(g(Z),g(G,8),g(H))}}static{this.\u0275cmp=I({type:n,selectors:[["nui-risk-score-tile"]],hostVars:2,hostBindings:function(i,r){i&2&&$(r.elementClass)},inputs:{widgetData:"widgetData",syncValuesBroker:"syncValuesBroker",configuration:"configuration",busy:"busy"},standalone:!1,features:[b],decls:5,vars:3,consts:[["riskScoreContent",""],["nui-busy","",1,"w-100","h-100",3,"busy"],[4,"ngIf"],[1,"nui-risk-score-tile-indicator",3,"href"],[3,"ngTemplateOutlet"],[1,"nui-risk-score-tile-indicator",3,"click"],[1,"nui-risk-score-tile-indicator__background"],[1,"nui-risk-score-tile-indicator__text",3,"ngStyle"],[1,"nui-risk-score-tile-indicator__zoom-container"],[1,"nui-risk-score-tile-indicator__label",3,"title"],["nuiZoomContent","",3,"useZoom","minScale","scaleIN$","scaleOUT$"],[1,"nui-risk-score-tile-indicator__value",3,"title"],["nuiZoomContent","",1,"nui-risk-score-tile-indicator__score",3,"useZoom","scaleIN$","scaleOUT$","level","minLevel","maxLevel","title"],[1,"nui-risk-score-tile-indicator__description",3,"title"],["nuiZoomContent","",1,"nui-risk-score-tile-indicator__description__text",3,"useZoom","minScale","scaleIN$","scaleOUT$"]],template:function(i,r){i&1&&(l(0,"div",1),_(1,ee,3,2,"ng-container",2)(2,te,3,1,"ng-container",2),s(),_(3,ie,12,27,"ng-template",null,0,V)),i&2&&(a("busy",r.busy),o(),a("ngIf",r.widgetData==null?null:r.widgetData.link),o(),a("ngIf",!(r.widgetData!=null&&r.widgetData.link)))},dependencies:[F,j,U,L,z,A],styles:[".nui-risk-score-tile-indicator[_ngcontent-%COMP%]{position:relative;display:block;height:100%;width:100%;overflow:hidden}.nui-risk-score-tile-indicator__background[_ngcontent-%COMP%]{height:100%;width:100%;background-color:var(--nui-color-bg-secondary,#fafafa);color:var(--nui-color-text-default,#111)}.nui-risk-score-tile-indicator__text[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;pointer-events:none}.nui-risk-score-tile-indicator__text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}.nui-risk-score-tile-indicator__value[_ngcontent-%COMP%]{font-size:36px;font-weight:600;margin:auto 20px;min-width:calc(100% - 40px);white-space:nowrap;display:flex;align-items:center;justify-content:center;height:100%;min-height:5px;max-height:200px}.nui-risk-score-tile-indicator__score[_ngcontent-%COMP%]{min-width:100%}.nui-risk-score-tile-indicator__label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-top:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-risk-score-tile-indicator__label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;-o-text-overflow:ellipsis;text-overflow:ellipsis}.nui-risk-score-tile-indicator__description[_ngcontent-%COMP%]{font-size:13.5px;font-weight:400;min-width:0;margin-bottom:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px;color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6))}.nui-risk-score-tile-indicator__description__text[_ngcontent-%COMP%]{white-space:wrap;word-wrap:break-word;word-break:keep-all;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:4;white-space:pre-wrap}.nui-risk-score-tile-indicator__zoom-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:30% 40% 30%;width:100%;height:100%}.nui-risk-score-tile-indicator--interactive[_ngcontent-%COMP%]{cursor:pointer}.nui-risk-score-tile-indicator--interactive[_ngcontent-%COMP%]:hover{filter:brightness(90%)}"],changeDetection:0})}}return n})();export{ce as a};
