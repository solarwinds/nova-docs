import{a as Mo}from"./chunk-EWX2S4QW.js";import{a as Ro}from"./chunk-SE5ZEHMX.js";import{b as vo}from"./chunk-RDGFC72M.js";import{a as No}from"./chunk-LZOJVJPM.js";import{a as ho}from"./chunk-SBSX6PXY.js";import{a as Eo}from"./chunk-LZEECJLY.js";import{a as he}from"./chunk-OPPBYCVB.js";import{c as Fo}from"./chunk-NVJ4XKOU.js";import{t as uo,x as Te,y as ge}from"./chunk-JOEIBHEU.js";import{b as Go,c as Ao}from"./chunk-POOVCM3L.js";import{a as So,c as bo,d as re,e as X,f as j,g as q,h as yo}from"./chunk-EU2T5UE6.js";import{D as fo,F as mo,P as W,W as Oo,Z as Co,c as Ie,ca as To,ha as E,ka as ie,qa as go,ua as Io}from"./chunk-573U3PX6.js";import{$c as ao,Ba as M,Dc as to,Ic as io,Id as V,Jc as ro,Mc as no,Na as Ze,Oa as Ye,Pa as Je,Qa as Qe,Rc as lo,_ as et,_c as oe,h as Oe,hd as so,ja as Xe,kc as oo,ld as K,ma as I,nc as z,o as Qo,oa as w,oc as ee,pa as x,qb as eo,rd as te,sd as co,tb as ot,td as _o,ua as je,ud as po,va as B,ve as Ce,ya as H,za as qe}from"./chunk-PMWUHOKA.js";import{e as $,f as A,j as Ve,l as y,p as We}from"./chunk-YHLZAVJ5.js";import{Aa as S,Ac as me,Ba as _e,Bc as F,Ca as pe,Db as R,Dc as U,Hc as ze,Ib as C,La as b,Oc as u,Pc as m,Qc as k,Sc as Ke,Tb as ue,Ub as l,Vb as Q,Wb as fe,Xc as h,ba as ce,bc as n,cc as s,da as v,dc as p,ec as De,fa as Z,fc as Ue,h as L,hc as ke,ja as de,ka as Le,kc as $e,lc as we,mc as O,qc as G,rb as a,rc as T,w as D,x as Pe,xb as _,xc as xe,yc as Be,zc as He}from"./chunk-MCPF2SEG.js";import{f as Fe,g as P}from"./chunk-VBFW7A5V.js";var Lo=Fe((St,Po)=>{function tt(i,d,e){for(var o=-1,t=i.length,r=d.length,c={};++o<t;){var f=o<r?d[o]:void 0;e(c,i[o],f)}return c}Po.exports=tt});var Uo=Fe((Rt,Do)=>{var it=ot(),rt=Lo();function nt(i,d){return rt(i||[],d||[],it)}Do.exports=nt});var Ko=P(Qo());var ko=P(Uo());var lt=[$localize`Blue`,$localize`Blue Light`,$localize`Blue Dark`,$localize`Pink`,$localize`Pink Light`,$localize`Pink Dark`,$localize`Sea Green`,$localize`Sea Green Light`,$localize`Sea Green Dark`,$localize`Violet`,$localize`Violet Light`,$localize`Violet Dark`,$localize`Lime Green`,$localize`Lime Green Light`,$localize`Lime Green Dark`,$localize`Orange`,$localize`Orange Light`,$localize`Orange Dark`,$localize`Ultramarine`,$localize`Ultramarine Light`,$localize`Ultramarine Dark`,$localize`Bordeaux`,$localize`Bordeaux Light`,$localize`Bordeaux Dark`,$localize`Ochroid`,$localize`Ochroid Light`,$localize`Ochroid Dark`,$localize`Anthracite`,$localize`Anthracite Light`,$localize`Anthracite Dark`],at=[$localize`Down`,$localize`Down Light`,$localize`Critical`,$localize`Critical Light`,$localize`Warning`,$localize`Warning Light`,$localize`Unknown`,$localize`Unknown Light`,$localize`Ok`,$localize`Ok Light`,$localize`Info`,$localize`Info Light`,$localize`Disabled`,$localize`Not Applicable`],Ne=(0,ko.default)([...Te,...ge],[...lt,...at]),Y="var(--nui-color-bg-secondary)",Se=[...Te,...ge].map(i=>({color:i,label:Ne[i]}));var wo=P(Oe());var $o=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred ","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgrey","#d3d3d3"],["lightgreen","#90ee90"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370d8"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#d87093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]);var ne=(()=>{class i{RGBToHexRGBToHex(e){let o=e.indexOf(",")>-1?",":" ",t=e.substr(4).split(")")[0].split(o),r=(+t[0]).toString(16),c=(+t[1]).toString(16),f=(+t[2]).toString(16);return r.length===1&&(r="0"+r),c.length===1&&(c="0"+c),f.length===1&&(f="0"+f),"#"+r+c+f}isHEX(e){return/^#[0-9A-F]{6}$/i.test(e)||/^#([0-9A-F]{3}){1,2}$/i.test(e)}colorKeywordsToHex(e){let o=$o.get(e);return(0,wo.default)(o)?"":o}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275prov=Le({token:i,factory:i.\u0275fac})}}return i})();function ct(i,d){if(i&1&&p(0,"div",10),i&2){let e=T().$implicit,o=T();fe("black-tick",o.isBlackTick||(e==null?null:e.color)===o.defaultColor)}}function dt(i,d){if(i&1&&(n(0,"div",5)(1,"nui-select-v2-option",6,1)(3,"div",7)(4,"div",8),C(5,ct,1,2,"div",9),s()()()()),i&2){let e=d.$implicit,o=me(2),t=T();a(),l("value",e==null?null:e.color)("displayValueContext",e),a(2),fe("color-picker-option--selected",o==null?null:o.selected),ue("title",e==null?null:e.label),a(),l("ngStyle",t.setStyles(e==null?null:e.color)),a(),l("ngIf",o==null?null:o.selected)}}function _t(i,d){if(i&1&&(n(0,"div",11)(1,"div",12),p(2,"div",13),s(),n(3,"div",14),p(4,"nui-icon",15),s()()),i&2){let e=d.$implicit,o=d.open,t=T();a(),ue("title",e==null?null:e.label),a(),l("ngStyle",t.setStyles(e==null?null:e.color)),a(2),Q("transform",o?"rotate(180deg)":"")}}var pt=20,ut=30,se=(()=>{class i{constructor(e,o,t){this.changeDetection=e,this.colorService=o,this.cdkOverlay=t,this.defaultColor="var(--nui-color-bg-secondary)",this.overlayUtilities=new ao,this.destroy$=new L,this.setStyles=r=>({"background-color":r||this.defaultColor})}ngOnChanges(e){e.colors&&(this.colors=e.colors.currentValue),e.colorPalette&&(this.colorPalette=e.colorPalette.currentValue)}ngAfterViewInit(){this.value&&(this.select?.writeValue(this.value),this.isBlackTick=this.determineBlackTick(this.value.toString())),this.palette=this.colorPalette||this.colors.map(t=>({color:t})),this.initOverlayUtilities(),this.select.valueSelected.pipe(Z(t=>this.writeValue(t)),Z(t=>this.onChange(t)),v(this.destroy$)).subscribe(t=>{t&&(this.isBlackTick=this.determineBlackTick(t.toString()))});let e=lo(),o=this.cdkOverlay.position().flexibleConnectedTo(this.select.elRef.nativeElement).withPush(!1).withViewportMargin(0).withPositions([e["bottom-right"],e["bottom-left"],e["top-right"],e["top-left"]]);this.overlayConfig={maxWidth:this.cols?this.cols*ut+pt+"px":"260px",positionStrategy:o}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onChange(e){}_onTouched(){}writeValue(e){this.value=e,this.select?.writeValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this._onTouched=e}determineBlackTick(e){let o="#fff";return this.colorService.isHEX(e)?o=e:o=uo(e)||this.colorService.RGBToHexRGBToHex(e)||this.colorService.colorKeywordsToHex(e),this.getContrastOnBgColor(o)==="#fff"}initOverlayUtilities(){let e=this.select.dropdown,o={updateSize:!1};this.selectResizeObserver=this.overlayUtilities.setPopupComponent(this.select.dropdown).getResizeObserver(o),e.show$.pipe(v(this.destroy$)).subscribe(()=>{this.overlayUtilities.syncWidth(),this.selectResizeObserver.observe(this.select.elRef.nativeElement)}),e.hide$.pipe(v(this.destroy$)).subscribe(()=>{this.selectResizeObserver.unobserve(this.select.elRef.nativeElement)})}getContrastOnBgColor(e){return e?parseInt(e.replace("#",""),16)>16777215/2?"#fff":"#000":""}static{this.\u0275fac=function(o){return new(o||i)(_(h),_(ne),_(eo))}}static{this.\u0275cmp=R({type:i,selectors:[["nui-color-picker"]],viewQuery:function(o,t){if(o&1&&xe(K,5),o&2){let r;Be(r=He())&&(t.select=r.first)}},inputs:{colors:"colors",colorPalette:"colorPalette",cols:"cols"},standalone:!1,features:[ze([{provide:io,useExisting:de(()=>i),multi:!0},{provide:Xe,useExisting:de(()=>i),multi:!0},ne]),S],decls:5,vars:4,consts:[["colorSelectTemplate",""],["option",""],[1,"color-picker-select",3,"overlayConfig","syncWidth","displayValueTemplate"],[1,"color-picker-container"],["class","d-inline-flex flex-wrap box",4,"ngFor","ngForOf"],[1,"d-inline-flex","flex-wrap","box"],[1,"w-100","h-100","reset-box-sizes",3,"value","displayValueContext"],[1,"color-picker-option"],[1,"color-picker-option__color-box",3,"ngStyle"],["class","color-picker-option__glyph",3,"black-tick",4,"ngIf"],[1,"color-picker-option__glyph"],[1,"color-picker-input"],[1,"color-picker-input__box"],[1,"color-picker-input__color-box",3,"ngStyle"],[1,"color-picker-input__toggle"],["icon","caret-down"]],template:function(o,t){if(o&1&&(n(0,"nui-select-v2",2)(1,"div",3),C(2,dt,6,7,"div",4),s()(),C(3,_t,5,4,"ng-template",null,0,Ke)),o&2){let r=me(4);l("overlayConfig",t.overlayConfig)("syncWidth",!1)("displayValueTemplate",r),a(2),l("ngForOf",t.palette)}},dependencies:[$,A,Ve,z,K,oe],styles:[".box[_ngcontent-%COMP%]{width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]{padding:5px 10px}.color-picker-select[_ngcontent-%COMP%]{width:fit-content;min-width:unset;cursor:pointer}.color-picker-input[_ngcontent-%COMP%]{display:flex}.color-picker-input__box[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.color-picker-input__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);width:17px;height:17px;flex-grow:1;margin:0 10px}.color-picker-input__toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);width:30px;height:30px}.color-picker-option[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.color-picker-option__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);padding:1px 0 0 1px}.color-picker-option--selected[_ngcontent-%COMP%]{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.color-picker-option--selected[_ngcontent-%COMP%]:focus{outline:none}.color-picker-option__glyph[_ngcontent-%COMP%]{width:100%;height:100%;background-size:12px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMjAgMjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAgMjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS54dWktY2hlY2tib3gtZ2x5cGh7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDozO3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1saW5lY2FwOnJvdW5kO30KPC9zdHlsZT4KPHBvbHlsaW5lIGNsYXNzPSJ4dWktY2hlY2tib3gtZ2x5cGgiIHBvaW50cz0iMTcsNCA4LDE1IDMsOSAiLz4KPC9zdmc+);background-repeat:no-repeat}.color-picker-option__glyph.black-tick[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}"],changeDetection:0})}}return i})();function mt(i,d){if(i&1&&(n(0,"nui-select-v2-option",22),F(1),s()),i&2){let e=d.$implicit,o=T(2);l("value",e.key),a(),U(" ",o.getLabel(e.key)," ")}}function Ot(i,d){if(i&1&&p(0,"nui-drop-area"),i&2){let e=T(2);Q("height",e.height,"px")}}function Ct(i,d){if(i&1){let e=ke();De(0),n(1,"div",9),G("cdkDragStarted",function(t){_e(e);let r=T();return pe(r.cdkDragStarted(t))}),n(2,"div",10),p(3,"nui-icon",11),s(),n(4,"div",12)(5,"nui-form-field",13)(6,"nui-select-v2",14),C(7,mt,2,2,"nui-select-v2-option",15),u(8,"keyvalue"),s()(),n(9,"nui-form-field",16),p(10,"nui-textbox",17),s(),n(11,"nui-form-field",18),p(12,"nui-color-picker",19),s()(),n(13,"button",20),G("click",function(){let t=_e(e).index,r=T();return pe(r.removeRule(t))}),s(),C(14,Ot,1,2,"nui-drop-area",21),s(),Ue()}if(i&2){let e=d.$implicit,o=T();a(),l("formGroup",e),a(4),l("control",e.get("comparisonType")),a(),l("formControl",e.get("comparisonType")),a(),l("ngForOf",m(8,7,o.availableComparators)),a(2),l("control",e.get("value")),a(2),l("control",e.get("color")),a(),l("colorPalette",o.palette)}}var Tt="Custom Comparator",Vo=(()=>{class i{static{this.lateLoadKey="BackgroundColorRulesConfigurationComponent"}constructor(e,o,t){this.changeDetector=e,this.formBuilder=o,this.formReady=new b,this.destroy$=new L,this.availableComparators=t.getComparators()}ngOnInit(){this.palette=[{color:Y,label:$localize`Default color`}].concat(this.backgroundColors),this.formLocal=this.initDefaultRulesGroup(),this.form=this.formBuilder.group({rules:[[]]}),this.formLocal.get("rules")?.value.valueChanges.pipe(Z(e=>this.form.get("rules")?.patchValue([...e])),v(this.destroy$)).subscribe(),this.formReady.emit(this.form)}ngOnChanges(e){e.rules&&((this.formLocal?.get("rules")?.value).setValue([]),this.rules&&(0,Ko.default)(this.rules)&&this.rules.forEach(o=>{(this.formLocal.get("rules")?.value).push(this.formBuilder.group({comparisonType:[o.comparisonType,[I.required]],value:[o.value,[I.required]],color:[o.color]}))}))}getColorRulesSubtitle(){return(this.formLocal?.get("rules")?.value).controls.length===0?$localize`No color rules`:$localize`${(this.formLocal?.get("rules")?.value).controls.length} color rules`}getLabel(e){return this.availableComparators[e]?.label||Tt}removeRule(e){(this.formLocal?.get("rules")?.value).removeAt(e)}addRule(){(this.formLocal?.get("rules")?.value).push(this.formBuilder.group({comparisonType:[">",[I.required]],value:[0,[I.required]],color:[Y]}))}drop(e){this.move(e.currentIndex,e.previousIndex)}cdkDragStarted(e){this.height=e.source.element.nativeElement.offsetHeight}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initDefaultRulesGroup(){return this.formBuilder.group({rules:[this.formBuilder.array([],I.required)]})}move(e,o){let t=this.formLocal?.get("rules")?.value,r=e>o?1:-1;if(!t)return;let c=t.at(o);for(let f=o;f*r<e*r;f=f+r){let N=t.at(f+r);t.setControl(f,N)}t.setControl(e,c)}static{this.\u0275fac=function(o){return new(o||i)(_(h),_(M),_(Io))}}static{this.\u0275cmp=R({type:i,selectors:[["nui-background-color-rules-configuration"]],inputs:{rules:"rules",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},standalone:!1,features:[S],decls:14,vars:14,consts:()=>{let e;e=$localize`:␟9c8318d49f867d23436872f260ebf9263e9d0120␟2303161252907317626: Add new rule `;let o;return o=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[e,[3,"formGroup","state"],["headerTitle","Background color rules",3,"headerIcon","subtitle"],[1,"kpi-color-rules-configuration__accordion-content"],[1,"mb-4"],[1,"mb-3"],["cdkDropList","",3,"cdkDropListDropped"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],["cdkDrag","",1,"kpi-color-rule","d-flex","pt-3",3,"cdkDragStarted","formGroup"],[1,"kpi-color-rule__control","justify-content-center","d-flex"],["icon","drag","cdkDragHandle","",1,"kpi-color-rule__drag","align-items-center"],[1,"d-flex","flex-grow-1","flex-wrap"],[1,"mr-3","mb-3","flex-grow-1",3,"control"],["placeholder",o,2,"min-width","220px",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"mr-3","mb-3",2,"max-width","100px",3,"control"],["formControlName","value"],[1,"mr-3","mb-3",3,"control"],["formControlName","color",3,"colorPalette"],["nui-button","","icon","delete","displayStyle","action","type","button",1,"kpi-color-rule__control",3,"click"],[3,"height",4,"cdkDragPlaceholder"],[3,"value"]]},template:function(o,t){if(o&1&&(n(0,"nui-widget-editor-accordion",1),u(1,"nuiWidgetEditorAccordionFormState"),u(2,"async"),p(3,"nui-widget-editor-accordion-header",2),u(4,"nuiFormHeaderIconPipe"),u(5,"async"),n(6,"div",3)(7,"div",4)(8,"p",5),F(9," We can automatically change the background color when the value meets certain conditions. "),s(),n(10,"div",6),G("cdkDropListDropped",function(c){return t.drop(c)}),C(11,Ct,15,9,"ng-container",7),s(),n(12,"button",8),G("click",function(){return t.addRule()}),O(13,0),s()()()()),o&2){let r;l("formGroup",t.formLocal)("state",m(2,7,m(1,5,t.formLocal))),a(3),l("headerIcon",m(5,12,k(4,9,t.formLocal,"color")))("subtitle",t.getColorRulesSubtitle()),a(8),l("ngForOf",(r=t.formLocal.get("rules"))==null?null:r.value.controls)}},dependencies:[$,w,x,je,B,H,Je,Ye,Ze,Qe,z,te,V,ee,K,oe,X,re,se,No,y,We,j,q],styles:[".kpi-color-rules-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-color-rules-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-color-rules-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-color-rules-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:10px}.kpi-color-rules-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}.kpi-color-rule[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-content,#fff)}.kpi-color-rule__drag[_ngcontent-%COMP%]{cursor:move}.kpi-color-rule__control[_ngcontent-%COMP%]{min-width:30px;height:30px}"],changeDetection:0})}}return i})();function gt(i,d){if(i&1&&(n(0,"div",14)(1,"nui-form-field",15),p(2,"nui-textbox",16),s()()),i&2){let e=T();a(),l("control",e.form.get("units"))}}var Wo=(()=>{class i{static{this.lateLoadKey="KpiDescriptionConfigurationComponent"}constructor(e,o){this.changeDetector=e,this.formBuilder=o,this.defaultColor={label:$localize`Default color`,color:Y},this.label="",this.backgroundColor=this.defaultColor.color,this.units="",this.formReady=new b}ngOnInit(){this.backgroundColors=[...this.backgroundColors],this.backgroundColors.unshift(this.defaultColor),this.form=this.formBuilder.group({label:[this.label,[I.required]],backgroundColor:[this.backgroundColor,[I.required]]}),this.configurableUnits&&this.form.addControl("units",this.formBuilder.control(this.units));let e=this.form.get("label"),o=e?.valueChanges.pipe(ce(e.value)),t=this.form.get("backgroundColor"),r=t?.valueChanges.pipe(ce(t?.value));this.subtitle$=Pe([o?.pipe(D(c=>c||$localize`no label`)),r?.pipe(D(c=>Ne[c]||$localize`Default Color`))]).pipe(D(c=>c.join(", "))),this.formReady.emit(this.form)}ngOnChanges(e){e.label&&this.form?.patchValue({label:e.label.currentValue}),e.backgroundColor&&this.form?.patchValue({backgroundColor:e.backgroundColor.currentValue}),e.units&&this.form?.patchValue({units:e.units.currentValue})}static{this.\u0275fac=function(o){return new(o||i)(_(h),_(M))}}static{this.\u0275cmp=R({type:i,selectors:[["nui-kpi-description-configuration"]],inputs:{componentId:"componentId",configurableUnits:"configurableUnits",label:"label",backgroundColor:"backgroundColor",units:"units",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},standalone:!1,features:[S],decls:21,vars:22,consts:()=>{let e;e=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`;let o;o=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`;let t;t=$localize`:␟e088252c0e2ede83d27a24702b1f77c90cee60b7␟3468485835384597147:Background Color`;let r;r=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`;let c;c=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`;let f;return f=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,[r,[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],[1,"nui-text-secondary",3,"title"],[1,"kpi-description-configuration__accordion-content"],[1,"mb-4"],["caption",e,1,"form-group",3,"control"],["formControlName","label","placeholder",o],["caption",t,1,"form-group",3,"control"],["formControlName","backgroundColor",1,"kpi-description-configuration__accordion-content__color-picker",3,"colorPalette"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",c,1,"form-group",3,"control"],["formControlName","units","placeholder",f]]},template:function(o,t){o&1&&(n(0,"nui-widget-editor-accordion",1),u(1,"nuiWidgetEditorAccordionFormState"),u(2,"async"),n(3,"div",2),p(4,"nui-icon",3),u(5,"nuiFormHeaderIconPipe"),u(6,"async"),n(7,"div",4)(8,"span",5),O(9,0),s(),n(10,"div",6),u(11,"async"),F(12),u(13,"async"),s()()(),n(14,"div",7)(15,"div",8)(16,"nui-form-field",9),p(17,"nui-textbox",10),s()(),n(18,"nui-form-field",11),p(19,"nui-color-picker",12),s(),C(20,gt,3,1,"div",13),s()()),o&2&&(l("formGroup",t.form)("state",m(2,11,m(1,9,t.form))),a(4),l("icon",m(6,16,k(5,13,t.form,"widget_list"))),a(6),l("title",m(11,18,t.subtitle$)),a(2),U(" ",m(13,20,t.subtitle$)," "),a(4),l("control",t.form.get("label")),a(2),l("control",t.form.get("backgroundColor")),a(),l("colorPalette",t.backgroundColors),a(),l("ngIf",t.configurableUnits))},dependencies:[A,w,x,B,H,z,te,V,X,se,y,j,q],styles:[".kpi-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-description-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-description-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-description-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:10px}.kpi-description-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}"],changeDetection:0})}}return i})();var qo=P(et()),Zo=P(Oe());var Xo=P(Oe());var jo=i=>{let d=i.get("criticalThresholdValue"),e=i.get("warningThresholdValue"),o=i.get("reversedThresholds"),t=i.get("showThresholds");if(!d)throw new Error("criticalThresholdValue formControl is not defined");if(Ce(d,"min","max"),!e)throw new Error("warningThresholdValue formControl is not defined");if(Ce(e,"min","max"),t?.value){if((0,Xo.default)(e.value))return null;if(o?.value){if(d.value>=e.value)return e.setErrors({min:!0}),d.setErrors({max:!0}),{thresholds:!0}}else if(d.value<=e.value)return e.setErrors({max:!0}),d.setErrors({min:!0}),{thresholds:!0}}return null};function It(i,d){if(i&1&&(n(0,"nui-radio",17),F(1),s()),i&2){let e=d.$implicit;l("value",e.value),a(),U(" ",e.displayValue," ")}}function ht(i,d){if(i&1&&(n(0,"div",18)(1,"div",19)(2,"nui-form-field",20),p(3,"nui-textbox-number",21),n(4,"nui-validation-message",15),O(5,1),s(),n(6,"nui-validation-message",22),O(7,2),s(),n(8,"nui-validation-message",23),O(9,3),s()()(),n(10,"div",19)(11,"nui-form-field",24),p(12,"nui-textbox-number",25),n(13,"nui-validation-message",15),O(14,4),s(),n(15,"nui-validation-message",22),O(16,5),s(),n(17,"nui-validation-message",23),O(18,6),s()()(),n(19,"div",19)(20,"nui-form-field",26)(21,"nui-checkbox",27)(22,"span",28),O(23,7),s()(),n(24,"nui-validation-message",15),O(25,8),s()()()()),i&2){let e=T();a(2),l("control",e.form.get("warningThresholdValue")),a(9),l("control",e.form.get("criticalThresholdValue")),a(9),l("control",e.form.get("reversedThresholds"))("showOptionalText",!1)}}var Yo=(()=>{class i{static{this.lateLoadKey="ThresholdsConfigurationComponent"}constructor(e,o,t,r){this.changeDetector=e,this.formBuilder=o,this.logger=t,this.cd=r,this.formReady=new b,this.thresholdOptions=[{value:!1,displayValue:$localize`Never show critical or warning states for this KPI`},{value:!0,displayValue:$localize`Set custom thresholds for this widget`}],this.destroy$=new L}ngOnInit(){this.validateRadioButtonsGroupValue(),this.form=this.formBuilder.group({criticalThresholdValue:[this.criticalThresholdValue||0,[I.required]],warningThresholdValue:[this.warningThresholdValue||0],showThresholds:[this.showThresholds||!1,[I.required]],reversedThresholds:[this.reversedThresholds||!1]},{validators:jo}),this.handleWarningThreshold(this.warningThresholdValue),this.form.statusChanges.pipe(v(this.destroy$)).subscribe(e=>{this.form.markAllAsTouched(),this.cd.detectChanges()}),this.formReady.emit(this.form)}ngOnChanges(e){let o=["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"];if(e){for(let t of Object.keys(e))if((0,qo.default)(o,t)){let r=e[t].currentValue;r&&this.form?.patchValue({[t]:r})}e.showThresholds&&setTimeout(()=>this.validateRadioButtonsGroupValue())}e.warningThresholdValue&&this.handleWarningThreshold(e.warningThresholdValue.currentValue)}getThresholdsSubtitle(e){return e?$localize`Custom thresholds`:$localize`No thresholds`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}validateRadioButtonsGroupValue(){this.radioButtonGroupValue=this.showThresholds}handleWarningThreshold(e){let o=this.form?.get("warningThresholdValue");(0,Zo.default)(e)&&o?.setValue(null)}static{this.\u0275fac=function(o){return new(o||i)(_(h),_(M),_(oo),_(h))}}static{this.\u0275cmp=R({type:i,selectors:[["nui-thresholds-configuration"]],inputs:{criticalThresholdValue:"criticalThresholdValue",warningThresholdValue:"warningThresholdValue",showThresholds:"showThresholds",reversedThresholds:"reversedThresholds"},outputs:{formReady:"formReady"},standalone:!1,features:[S],decls:13,vars:17,consts:()=>{let e;e=$localize`:␟6875687abe0982b513f60d230d71b9cc2d9eef3e␟9007062817247777645:How do you want to set warning/critical thresholds?`;let o;o=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `;let t;t=$localize`:␟5dda34ec4b693f2b13afdf28a4e5f00062f4c896␟4003830139037367407:Warning value`;let r;r=$localize`:␟cae671d9eb277eadfd7752518814d3f852369cc9␟6643132921042050963:Never show the warning state`;let c;c=$localize`:␟f8baa78544aa27624d43d59e5a225216aff1042f␟6033897450960508846:Critical value`;let f;f=$localize`:␟9b66a7e6fdeb05f4c1ffdc78ea8f4a7a2fb64d79␟7643729389671069649:Set critical value`;let N;N=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `;let Ee;Ee=$localize`:␟19d6eb371557c8ab18db5332a2e1955f18c2f16d␟3184669981998118637: Warning threshold should be greater than critical threshold `;let ve;ve=$localize`:␟6c62f1e33dd914743cb977df6baba31779d7aed6␟1030183925045576042: Warning threshold should be lower than critical threshold `;let be;be=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `;let Ge;Ge=$localize`:␟540b9b0f637cc0605bc00ccc586a3eab73aabcfc␟4465977748799047247: Critical threshold should be greater than warning threshold `;let Ae;Ae=$localize`:␟2efae84e117a2639681a8e5c0e4ce4eee42af17d␟9156849514888688496: Critical threshold should be lower than warning threshold `;let ye;ye=$localize`:␟842bc14d26f868781aba3faa5f2d1285f83400d3␟2899388226116431193:Warning and critical when below threshold values`;let Me;return Me=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,[o,N,Ee,ve,be,Ge,Ae,ye,Me,[3,"formGroup","state"],["headerTitle","Thresholds",3,"headerIcon","subtitle"],[1,"kpi-thresholds-configuration__accordion-content"],["caption",e,3,"control"],["formControlName","showThresholds","name","showThresholds","required","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],["class","mt-4",4,"ngIf"],[3,"value"],[1,"mt-4"],[1,"mb-4"],["caption",t,3,"control"],["formControlName","warningThresholdValue","placeholder",r],["for","min"],["for","max"],["caption",c,3,"control"],["formControlName","criticalThresholdValue","placeholder",f],[3,"control","showOptionalText"],["formControlName","reversedThresholds","required",""],[1,"nui-text-label"]]},template:function(o,t){if(o&1&&(n(0,"nui-widget-editor-accordion",9),u(1,"nuiWidgetEditorAccordionFormState"),u(2,"async"),p(3,"nui-widget-editor-accordion-header",10),u(4,"nuiFormHeaderIconPipe"),u(5,"async"),n(6,"div",11)(7,"nui-form-field",12)(8,"nui-radio-group",13),C(9,It,2,2,"nui-radio",14),s(),n(10,"nui-validation-message",15),O(11,0),s()(),C(12,ht,26,4,"div",16),s()()),o&2){let r,c;l("formGroup",t.form)("state",m(2,10,m(1,8,t.form))),a(3),l("headerIcon",m(5,15,k(4,12,t.form,"thresholds")))("subtitle",t.getThresholdsSubtitle((r=t.form.get("showThresholds"))==null?null:r.value)),a(4),l("control",t.form.get("showThresholds")),a(),l("value",t.radioButtonGroupValue),a(),l("ngForOf",t.thresholdOptions),a(3),l("ngIf",(c=t.form.get("showThresholds"))==null?null:c.value)}},dependencies:[$,A,w,x,qe,B,H,co,V,po,_o,ro,so,X,re,y,j,q],styles:[".kpi-thresholds-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0})}}return i})();function Nt(i,d){i&1&&(n(0,"div",5)(1,"nui-message",6),$e(2,1),p(3,"b"),we(),s()()),i&2&&(a(),l("allowDismiss",!1))}var Jo=(()=>{class i{static{this.lateLoadKey="KpiTilesConfigurationComponent"}constructor(e,o,t,r){this.pizzagnaService=e,this.changeDetector=o,this.formBuilder=t,this.eventBus=r,this.tiles=[],this.formReady=new b}ngOnChanges(e){}onFormReady(e){this.form=this.formBuilder.group({tiles:e}),this.emptyItems$=this.form.valueChanges.pipe(D(o=>o.tiles.length===0)),this.formReady.emit(this.form)}onItemsChange(e){let o="tiles",t=e.map(c=>c.id);this.pizzagnaService.createComponentsFromTemplate(o,t);let r={componentId:this.componentId,pizzagnaKey:ie.Data,propertyPath:["tiles"]};this.pizzagnaService.setProperty(r,e)}addTile(){this.onItemsChange([...this.tiles,{id:to("kpi"),componentType:ho.lateLoadKey}])}static{this.\u0275fac=function(o){return new(o||i)(_(go),_(h),_(M),_(To))}}static{this.\u0275cmp=R({type:i,selectors:[["nui-kpi-tiles-configuration-component"]],inputs:{componentId:"componentId",tiles:"tiles",nodes:"nodes"},outputs:{formReady:"formReady"},standalone:!1,features:[S],decls:5,vars:5,consts:()=>{let e;e=$localize`:␟79e4ae6fc9c1cd1ee331414b873fb40154ad1e95␟5306337511240259794: Add new value
`;let o;return o=$localize`:␟7ca16fec6555e99e64e1cbd41a9ce7a4f4cae2fd␟4636957726236815999:${"\uFFFD#3\uFFFD"}:START_BOLD_TEXT:At least one value must be added.${"\uFFFD/#3\uFFFD"}:CLOSE_BOLD_TEXT:`,[e,o,[3,"itemsChange","formReady","items","nodes"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","kpi-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"]]},template:function(o,t){o&1&&(n(0,"nui-items-dynamic",2),G("itemsChange",function(c){return t.onItemsChange(c)})("formReady",function(c){return t.onFormReady(c)}),s(),C(1,Nt,4,1,"div",3),u(2,"async"),n(3,"button",4),G("click",function(){return t.addTile()}),O(4,0),s()),o&2&&(l("items",t.tiles)("nodes",t.nodes),a(),l("ngIf",m(2,3,t.emptyItems$)&&t.form.touched))},dependencies:[A,ee,no,vo,y],encapsulation:2,changeDetection:0})}}return i})();var _r=[{componentType:he.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:Eo.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null}},{componentType:Ro.lateLoadKey,label:$localize`Icon`,dataTypes:{value:null}}],pr={[ie.Structure]:{[Ie]:{id:Ie,componentType:So.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","tiles"]},providers:{[E.FormattersRegistry]:{providerId:Co}}},presentation:{id:"presentation",componentType:bo.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","refresher"]}},titleAndDescription:{id:"titleAndDescription",componentType:yo.lateLoadKey,providers:{converter:{providerId:fo}}},refresher:Fo,tiles:{id:"tiles",componentType:Jo.lateLoadKey,properties:{template:[{id:"description",componentType:Wo.lateLoadKey,properties:{configurableUnits:!0,backgroundColors:[...Se]},providers:{[E.Converter]:{providerId:W,properties:{formParts:[{previewPath:"properties.widgetData",keys:["label","backgroundColor","units"]}]}}}},{id:"dataSource",componentType:Ao.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Go.lateLoadKey},providers:{[E.Converter]:{providerId:W,properties:{formParts:[{previewPath:"providers.dataSource",keys:["providerId","properties"]},{previewPath:"providers.adapter.properties.dataSource",keys:["properties"]}]}},[E.Broadcaster]:{providerId:Oo,properties:{configs:[{trackOn:"component",key:"dataFieldIds",paths:["data.{parentComponentId}/formatting.properties.dataFieldIds"]}]}}}},{id:"thresholds",componentType:Yo.lateLoadKey,providers:{[E.Converter]:{providerId:W,properties:{formParts:[{previewPath:"providers.adapter.properties.thresholds",keys:["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"]}]}}}},{id:"backgroundColorRules",componentType:Vo.lateLoadKey,properties:{backgroundColors:[...Se]},providers:{[E.Converter]:{providerId:W,properties:{formParts:[{previewPath:"providers.kpiColorPrioritizer.properties",keys:["rules"]}]}}}},{id:"formatting",componentType:Mo.lateLoadKey,providers:{[E.Converter]:{providerId:W,properties:{formParts:[{previewPath:"properties.configuration.formatters.Value",keys:["formatter"]}]}}},properties:{formatter:{componentType:he.lateLoadKey,properties:{dataFieldIds:{value:"value"}}}}}]},providers:{[E.Converter]:{providerId:mo}}}}};export{se as a,Se as b,Vo as c,Wo as d,Yo as e,Jo as f,_r as g,pr as h};
