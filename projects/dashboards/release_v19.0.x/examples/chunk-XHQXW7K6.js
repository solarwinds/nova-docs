import{a as j,j as X}from"./chunk-PPQN6QZA.js";import{a as k}from"./chunk-MD6F45Z7.js";import{Ja as $,V,c as F,ea as z,ha as E,ia as G}from"./chunk-573U3PX6.js";import{Xc as L,jc as H,oc as P,we as O}from"./chunk-PMWUHOKA.js";import{f as N}from"./chunk-YHLZAVJ5.js";import{Ba as c,Bc as R,Ca as p,Db as A,Ec as h,Fc as _,Gc as v,Ib as T,Ub as u,Xc as B,bc as s,cc as d,fa as D,hc as C,i as y,mc as x,q as I,qc as M,rb as g,rc as l,v as S,w as W,xb as m}from"./chunk-MCPF2SEG.js";import{g as K,i as f}from"./chunk-VBFW7A5V.js";var U=K(H());function Y(r,w){if(r&1){let e=C();s(0,"button",6),M("click",function(){c(e);let t=l();return p(t.reInitializeDashboard())}),R(1," Restore Widget "),d()}}function Z(r,w){if(r&1){let e=C();s(0,"nui-dashboard",7),v("dashboardChange",function(t){c(e);let a=l();return _(a.dashboard,t)||(a.dashboard=t),p(t)})("gridsterConfigChange",function(t){c(e);let a=l();return _(a.gridsterConfig,t)||(a.gridsterConfig=t),p(t)}),d()}if(r&2){let e=l();h("dashboard",e.dashboard),u("editMode",e.editMode),h("gridsterConfig",e.gridsterConfig)}}var q="https://api.punkapi.com/v2/beers",b=(()=>{class r extends O{constructor(){super(...arguments),this.cache=[],this.busy=new y(!1),this.dataFields=[{id:"id",label:"No",dataType:"number",sortable:!0},{id:"name",label:"Name",dataType:"string",sortable:!0},{id:"tagline",label:"Tagline",dataType:"string",sortable:!0},{id:"first_brewed",label:"First Brewed",dataType:"string",sortable:!0},{id:"description",label:"Description",dataType:"string",sortable:!1},{id:"brewers_tips",label:"Brewer's Tips",dataType:"string",sortable:!1}]}static{this.providerId="MockBeerDataSource"}getFilteredData(e){return f(this,null,function*(){let i=e.virtualScroll?.value?.start??0,t=e.virtualScroll?.value?.end??0;return i===0&&(this.cache=[]),S(I(this.fetch(i,t)).pipe(D(a=>{a&&(this.cache=this.sortData(this.cache.concat(a.brewInfo),e),this.dataSubject.next(this.cache))}),W(()=>({repeat:{itemsSource:this.cache},dataFields:this.dataFields}))))})}fetch(e,i){return f(this,null,function*(){let t=i-e,a=i/t||0,o=yield(yield fetch(`${q}/?page=${a}&per_page=${t}`)).json();if(console.log("\u{1F4D8} table-widget-interactive-example.component: 85# -> response:",o),!!Array.isArray(o))return{brewInfo:o.map(n=>({id:n.id,name:n.name,tagline:n.tagline,first_brewed:n.first_brewed,description:n.description,brewers_tips:n.brewers_tips})),total:o.length}})}sortData(e,i){return(0,U.default)(e,i.sorter?.value?.sortBy,i.sorter?.value?.direction)}}return r})(),me=(()=>{class r{constructor(e,i,t){this.widgetTypesService=e,this.providerRegistry=i,this.changeDetectorRef=t,this.gridsterConfig={},this.editMode=!1}ngOnInit(){let e=this.widgetTypesService.getWidgetType("table",1);this.widgetTypesService.setNode(e,"configurator",G.DataSourceProviders,[b.providerId]),this.providerRegistry.setProviders({[b.providerId]:{provide:z,useClass:b,deps:[]}}),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){let e=Q,i={[e.id]:this.widgetTypesService.mergeWithWidgetType(e)},t={[e.id]:{cols:12,rows:6,y:0,x:0}};this.dashboard={positions:t,widgets:i}}static{this.\u0275fac=function(i){return new(i||r)(m(k),m($),m(B))}}static{this.\u0275cmp=A({type:r,selectors:[["table-widget-interactive-example"]],standalone:!1,decls:6,vars:3,consts:()=>{let e;return e=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[e,[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"valueChange","value"],["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboardChange","gridsterConfigChange","dashboard","editMode","gridsterConfig"]]},template:function(i,t){i&1&&(s(0,"div",1)(1,"nui-switch",2),v("valueChange",function(o){return _(t.editMode,o)||(t.editMode=o),o}),x(2,0),d(),T(3,Y,2,0,"button",3),d(),s(4,"div",4),T(5,Z,1,3,"nui-dashboard",5),d()),i&2&&(g(),h("value",t.editMode),g(2),u("ngIf",!(t.dashboard!=null&&t.dashboard.widgets.tableWidgetId)),g(2),u("ngIf",t.dashboard))},dependencies:[P,N,L,j,X],styles:[".dashboard[_ngcontent-%COMP%]{height:400px}"]})}}return r})(),J=[{id:"column1",label:$localize`Beer Name`,isActive:!0,width:185,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"name"}}}},{id:"column2",label:$localize`Tagline`,isActive:!0,width:250,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"tagline"}}}},{id:"column3",label:$localize`First Brewed`,isActive:!0,width:100,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"first_brewed"}}}},{id:"column4",label:$localize`Description`,isActive:!0,formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:"description"}}}}],Q={id:"tableWidgetId",type:"table",pizzagna:{configuration:{[F]:{providers:{[E.InteractionHandler]:{providerId:V,properties:{url:"${'https://untappd.com/search?q='+data.name}",newWindow:!0}}}},header:{properties:{title:"Stupendous Suds",subtitle:"Try These Brilliant Brews"}},table:{providers:{[E.DataSource]:{providerId:b.providerId}},properties:{configuration:{interactive:!0,columns:J,sortable:!0,sorterConfiguration:{descendantSorting:!1,sortBy:""},hasVirtualScroll:!0}}}}}};export{q as a,b,me as c,Q as d};
