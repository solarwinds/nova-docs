"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[143],{24143:(R,f,l)=>{l.r(f),l.d(f,{default:()=>$});var _=l(75883),c=l(72536),i=l(47977),N=l(45431),t=l(94650),T=l(61135),v=l(36895),E=l(34575),w=l(44994);function M(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.reInitializeDashboard())}),t._uU(1," Restore Widget "),t.qZA()}}function x(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"nui-dashboard",7),t.NdJ("dashboardChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.dashboard=s)})("gridsterConfigChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.gridsterConfig=s)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("dashboard",e.dashboard)("editMode",e.editMode)("gridsterConfig",e.gridsterConfig)}}let y=(()=>{class o extends c.LvN{constructor(){super(...arguments),this.busy=new T.X(!1)}getFilteredData(){return function(o,r,e,n){return new(e||(e=Promise))(function(a,p){function g(d){try{m(n.next(d))}catch(h){p(h)}}function u(d){try{m(n.throw(d))}catch(h){p(h)}}function m(d){d.done?a(d.value):function s(a){return a instanceof e?a:new e(function(p){p(a)})}(d.value).then(g,u)}m((n=n.apply(o,r||[])).next())})}(this,void 0,void 0,function*(){return this.busy.next(!0),new Promise(e=>{setTimeout(()=>{this.outputsSubject.next({result:[{id:"Brno",name:"Brno",data:[Math.round(1e5*Math.random())],icon:"status_down",link:"https://en.wikipedia.org/wiki/Brno",value:"Brno",color:"var(--nui-color-chart-one)"},{id:"kyiv",name:"Kyiv",data:[Math.round(1e5*Math.random())],icon:"status_critical",link:"https://en.wikipedia.org/wiki/Kyiv",value:"Kyiv",color:"var(--nui-color-chart-two)"},{id:"austin",name:"Austin",data:[Math.round(1e5*Math.random())],icon:"status_warning",link:"https://en.wikipedia.org/wiki/Austin",value:"Austin",color:"var(--nui-color-chart-three)"},{id:"lisbon",name:"Lisbon",data:[Math.round(1e5*Math.random())],icon:"status_unknown",link:"https://en.wikipedia.org/wiki/Lisbon",value:"Lisbon",color:"var(--nui-color-chart-four)"},{id:"sydney",name:"Sydney",data:[Math.round(1e5*Math.random())],icon:"status_up",link:"https://en.wikipedia.org/wiki/Sydney",value:"Sydney",color:"var(--nui-color-chart-five)"},{id:"nur-sultan",name:"Nur-Sultan",data:[Math.round(1e5*Math.random())],icon:"status_unmanaged",link:"https://en.wikipedia.org/wiki/Nur-Sultan",value:"Nur-Sultan",color:"var(--nui-color-chart-six)"}].sort((o,r)=>o.data[0]-r.data[0])}),this.busy.next(!1)},300)})})}ngOnDestroy(){this.outputsSubject.complete()}}return o.providerId="BeerReviewCountsByCityMockDataSource",o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),S=(()=>{class o{constructor(e,n,s){this.widgetTypesService=e,this.providerRegistry=n,this.changeDetectorRef=s,this.gridsterConfig={},this.editMode=!1}ngOnInit(){const e=this.widgetTypesService.getWidgetType("proportional",1);this.widgetTypesService.setNode(e,"configurator",i.ACc.DataSourceProviders,[y.providerId]),this.providerRegistry.setProviders({[y.providerId]:{provide:i.Fk3,useClass:y,deps:[]}}),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){const e={[O.id]:this.widgetTypesService.mergeWithWidgetType(O)};this.dashboard={positions:{[O.id]:{cols:5,rows:6,y:0,x:0}},widgets:e}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.xTe),t.Y36(i.CNH),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["proportional-widget-example"]],decls:6,vars:3,consts:function(){let r;return r=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"value","valueChange"],r,["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange"]]},template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"nui-switch",1),t.NdJ("valueChange",function(a){return n.editMode=a}),t.SDv(2,2),t.qZA(),t.YNc(3,M,2,0,"button",3),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,x,1,3,"nui-dashboard",5),t.qZA()),2&e&&(t.xp6(1),t.Q6J("value",n.editMode),t.xp6(2),t.Q6J("ngIf",!(null!=n.dashboard&&n.dashboard.widgets.proportionalWidgetId)),t.xp6(2),t.Q6J("ngIf",n.dashboard))},dependencies:[c.r0F,v.O5,E.M,w.t,c.qUD],styles:[".dashboard[_ngcontent-%COMP%]{height:400px}"]}),o})();const O={id:"proportionalWidgetId",type:"proportional",pizzagna:{[i.xW5.Configuration]:{[i.XMI]:{providers:{[i.Muk.Refresher]:{properties:{interval:600,enabled:!0}}}},header:{properties:{title:"Beer Review Tally by City",subtitle:"These People Love Beer"}},chart:{providers:{[i.Muk.DataSource]:{providerId:y.providerId}},properties:{configuration:{chartOptions:{type:i.EMX.DonutChart,legendPlacement:i.woB.Right},chartColors:{Brno:"var(--nui-color-chart-five)",kyiv:"var(--nui-color-chart-six)",austin:"var(--nui-color-chart-seven)",lisbon:"var(--nui-color-chart-eight)",sydney:"var(--nui-color-chart-nine)","nur-sultan":"var(--nui-color-chart-ten)"},prioritizeWidgetColors:!1}}}}}};var U=l(12498),L=l.n(U);function k(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.reInitializeDashboard())}),t._uU(1," Restore Widget "),t.qZA()}}function B(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"nui-dashboard",7),t.NdJ("dashboardChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.dashboard=s)})("gridsterConfigChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.gridsterConfig=s)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("dashboard",e.dashboard)("editMode",e.editMode)("gridsterConfig",e.gridsterConfig)}}let C=(()=>{class o extends c.LvN{constructor(){super(...arguments),this.busy=new T.X(!1)}getFilteredData(){return function(o,r,e,n){return new(e||(e=Promise))(function(a,p){function g(d){try{m(n.next(d))}catch(h){p(h)}}function u(d){try{m(n.throw(d))}catch(h){p(h)}}function m(d){d.done?a(d.value):function s(a){return a instanceof e?a:new e(function(p){p(a)})}(d.value).then(g,u)}m((n=n.apply(o,r||[])).next())})}(this,void 0,void 0,function*(){return this.busy.next(!0),new Promise(e=>{setTimeout(()=>{this.outputsSubject.next({result:[{id:"Brno",name:"Brno",data:[Math.round(1e5*Math.random())],icon:"status_down",link:"https://en.wikipedia.org/wiki/Brno",value:"Brno",color:"var(--nui-color-chart-one)"},{id:"kyiv",name:"Kyiv",data:[Math.round(1e5*Math.random())],icon:"status_critical",link:"https://en.wikipedia.org/wiki/Kyiv",value:"Kyiv",color:"var(--nui-color-chart-two)"},{id:"austin",name:"Austin",data:[Math.round(1e5*Math.random())],icon:"status_warning",value:"Austin",color:"var(--nui-color-chart-three)"},{id:"lisbon",name:"Lisbon",data:[Math.round(1e5*Math.random())],icon:"status_unknown",link:"https://en.wikipedia.org/wiki/Lisbon",value:"Lisbon",color:"var(--nui-color-chart-four)"},{id:"sydney",name:"Sydney",data:[Math.round(1e5*Math.random())],icon:"status_up",value:"Sydney",color:"var(--nui-color-chart-five)"},{id:"nur-sultan",name:"Nur-Sultan",data:[Math.round(1e5*Math.random())],icon:"status_unmanaged",value:"Nur-Sultan",color:"var(--nui-color-chart-six)"}].sort((o,r)=>o.data[0]-r.data[0])}),this.busy.next(!1)},300)})})}ngOnDestroy(){this.outputsSubject.complete()}}return o.providerId="ReviewCountsByCityMockDataSource",o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),P=(()=>{class o{constructor(e,n,s){this.widgetTypesService=e,this.providerRegistry=n,this.changeDetectorRef=s,this.gridsterConfig={},this.editMode=!1}ngOnInit(){const e=this.widgetTypesService.getWidgetType("proportional",1);this.widgetTypesService.setNode(e,"configurator",i.ACc.DataSourceProviders,[C.providerId]),this.providerRegistry.setProviders({[C.providerId]:{provide:i.Fk3,useClass:C,deps:[]}}),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){const e=I.map(a=>this.widgetTypesService.mergeWithWidgetType(a)),n=L()(e,a=>a.id);this.dashboard={positions:{[I[0].id]:{cols:6,rows:6,y:0,x:0},[I[1].id]:{cols:6,rows:6,y:0,x:6}},widgets:n}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.xTe),t.Y36(i.CNH),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["proportional-widget-interactive-example"]],decls:6,vars:3,consts:function(){let r;return r=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"value","valueChange"],r,["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange"]]},template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"nui-switch",1),t.NdJ("valueChange",function(a){return n.editMode=a}),t.SDv(2,2),t.qZA(),t.YNc(3,k,2,0,"button",3),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,B,1,3,"nui-dashboard",5),t.qZA()),2&e&&(t.xp6(1),t.Q6J("value",n.editMode),t.xp6(2),t.Q6J("ngIf",!(null!=n.dashboard&&n.dashboard.widgets.proportionalWidgetId)),t.xp6(2),t.Q6J("ngIf",n.dashboard))},dependencies:[c.r0F,v.O5,E.M,w.t,c.qUD],styles:[".dashboard[_ngcontent-%COMP%]{height:375px}"]}),o})();const I=[{id:"widget1",type:"proportional",pizzagna:{[i.xW5.Configuration]:{[i.XMI]:{providers:{[i.Muk.InteractionHandler]:{providerId:i.DJm,properties:{url:"${data.link || 'https://en.wikipedia.org/wiki/'+data.id}"}}}},header:{properties:{title:"Proportional Widget",subtitle:"With interaction handler"}},chart:{providers:{[i.Muk.DataSource]:{providerId:C.providerId}},properties:{configuration:{interactive:!0,chartOptions:{type:i.EMX.VerticalBarChart,legendPlacement:i.woB.Bottom},prioritizeWidgetColors:!1}}}}}},{id:"widget2",type:"proportional",pizzagna:{[i.xW5.Configuration]:{header:{properties:{title:"Proportional Widget",subtitle:"Without interaction handler"}},chart:{providers:{[i.Muk.DataSource]:{providerId:C.providerId}},properties:{configuration:{interactive:!1,chartOptions:{type:i.EMX.HorizontalBarChart,legendPlacement:i.woB.Bottom},prioritizeWidgetColors:!1}}}}}}];let G=(()=>{class o{constructor(){this.proportionalWidgetFileText=l(96063).Z,this.proportionalConfiguratorFileText=l(93483).Z}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["nui-proportional-docs"]],decls:72,vars:3,consts:[["type","info",3,"allowDismiss"],["filenamePrefix","proportional-widget-example","exampleTitle","Proportional Widget"],["href","../injectables/UrlInteractionHandler.html","target","_blank"],["href","../interfaces/IProportionalWidgetData.html","target","_blank"],["filenamePrefix","proportional-widget-interactive-example","exampleTitle","Interactive Proportional Widget"],["language","typescript"],["href","../interfaces/IProportionalWidgetConfig.html","target","_blank"]],template:function(e,n){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Proportional Widget"),t.qZA(),t.TgZ(2,"p"),t._uU(3," The general use-case for a proportional widget is to visualize at a glance how one data point compares to others in relation to the sum of all related data points. In other words, it can be used to show proportional data as a series of slices that make up a whole. The supported visualization modes include pie chart, donut chart, and bar chart in either horizontal or vertical orientation.\n"),t.qZA(),t.TgZ(4,"p"),t._uU(5,' An example use-case might be if we have some categories of data such as node statuses. Some of the nodes may have a status of "on" while the rest of them have a status of "off". This data can be fed into the proportional widget to let a user see at a glance how many of the nodes are "on" in relation to the ones that are "off" and in relation to the total number of nodes. The following example displays the number of Solarians who have reviewed beers by city. The data is completely made up and makes no sense, but it\'s all in good fun.\n'),t.qZA(),t.TgZ(6,"nui-message",0),t._uU(7," For details on how to instantiate a proportional widget, take a look at the inline comments under the source expander of the following example.\n"),t.qZA(),t.TgZ(8,"nui-example-wrapper",1),t._UZ(9,"proportional-widget-example"),t.qZA(),t.TgZ(10,"h3"),t._uU(11,"Interaction Handling"),t.qZA(),t.TgZ(12,"p"),t._uU(13," In the example below the first chart is using the "),t.TgZ(14,"code")(15,"a",2),t._uU(16,"UrlInteractionHandler"),t.qZA()(),t._uU(17," to handle interactions that occur on the legend when the chart is set to interactive. The second chart shows how individual series can be interactive when the series data, that conform to "),t.TgZ(18,"code")(19,"a",3),t._uU(20,"IProportionalWidgetData"),t.qZA()(),t._uU(21," interface, and provide value for:\n"),t.qZA(),t.TgZ(22,"ul")(23,"li")(24,"code"),t._uU(25,"link"),t.qZA(),t._uU(26,": string used for the legends label link."),t.qZA()(),t.TgZ(27,"p"),t._uU(28," Look at the inline comments in the source expander to see how the "),t.TgZ(29,"code")(30,"a",2),t._uU(31,"UrlInteractionHandler"),t.qZA()(),t._uU(32," is configured.\n"),t.qZA(),t.TgZ(33,"nui-example-wrapper",4),t._UZ(34,"proportional-widget-interactive-example"),t.qZA(),t.TgZ(35,"h2"),t._uU(36,"Widget Schema"),t.qZA(),t.TgZ(37,"p"),t._uU(38," The code listings below are the source files for the proportional widget definition with inline comments describing the parts that compose the standard proportional widget type. It includes the widget's definition as well as its corresponding configurator form for defining how to configure (create/edit) the widget.\n"),t.qZA(),t.TgZ(39,"h2"),t._uU(40,"Widget"),t.qZA(),t.TgZ(41,"p"),t._uU(42," This part shows the actual widget definition. It includes, among other things, the components and providers that compose the widget itself.\n"),t.qZA(),t.TgZ(43,"nui-example-code",5),t._uU(44),t.qZA(),t.TgZ(45,"h2"),t._uU(46,"Configurator"),t.qZA(),t.TgZ(47,"p"),t._uU(48," This part shows the form that's used for configuring (creating/editing) the widget.\n"),t.qZA(),t.TgZ(49,"nui-example-code",5),t._uU(50),t.qZA(),t.TgZ(51,"h2"),t._uU(52,"Additional Features"),t.qZA(),t.TgZ(53,"ul")(54,"li"),t._uU(55," Define custom colors for the chart by assigning a string array of css color variables, color keywords, or RGB hex values to the "),t.TgZ(56,"code"),t._uU(57,"chartColors"),t.qZA(),t._uU(58," property on the widget's "),t.TgZ(59,"code"),t._uU(60,"configuration"),t.qZA(),t._uU(61," input ("),t.TgZ(62,"code")(63,"a",6),t._uU(64,"IProportionalWidgetConfig"),t.qZA()(),t._uU(65,"). Also, you can use data-driven approach for setting the colors - just put the "),t.TgZ(66,"code"),t._uU(67,"color"),t.qZA(),t._uU(68," property in the widget data series. You can use "),t.TgZ(69,"code"),t._uU(70,"prioritizeWidgetColors"),t.qZA(),t._uU(71," property if you want for widget colors to override data colors. For all that, take a look at the example under the source code expander above. "),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("allowDismiss",!1),t.xp6(38),t.Oqu(n.proportionalWidgetFileText),t.xp6(6),t.Oqu(n.proportionalConfiguratorFileText))},dependencies:[c.hD2,c.i10,c.qqZ,S,P],encapsulation:2}),o})();function H(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.reInitializeDashboard())}),t._uU(1," Restore Widget "),t.qZA()}}function K(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"nui-dashboard",7),t.NdJ("dashboardChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.dashboard=s)})("gridsterConfigChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.gridsterConfig=s)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("dashboard",e.dashboard)("editMode",e.editMode)("gridsterConfig",e.gridsterConfig)}}let A=(()=>{class o extends c.LvN{constructor(){super(...arguments),this.busy=new T.X(!1),this.dataFields=[{id:"Brno",label:"Brno",dataType:null},{id:"kyiv",label:"Kyiv",dataType:null},{id:"austin",label:"Austin",dataType:null},{id:"lisbon",label:"Lisbon",dataType:null},{id:"sydney",label:"Sydney",dataType:null},{id:"nur-sultan",label:"Nur-Sultan",dataType:null}],this.chartSeriesDataFields=[{id:"data[0]",label:"data",dataType:null},{id:"customDonutContent",label:"Custom Donut Content",dataType:null}],this.dataFieldsConfig={dataFields$:new T.X(this.dataFields),chartSeriesDataFields$:new T.X(this.chartSeriesDataFields)}}getFilteredData(){return function(o,r,e,n){return new(e||(e=Promise))(function(a,p){function g(d){try{m(n.next(d))}catch(h){p(h)}}function u(d){try{m(n.throw(d))}catch(h){p(h)}}function m(d){d.done?a(d.value):function s(a){return a instanceof e?a:new e(function(p){p(a)})}(d.value).then(g,u)}m((n=n.apply(o,r||[])).next())})}(this,void 0,void 0,function*(){return this.busy.next(!0),new Promise(e=>{setTimeout(()=>{this.outputsSubject.next({result:[{id:"Brno",name:"Brno",data:[Math.round(1e6*Math.random())],icon:"status_down",link:"https://en.wikipedia.org/wiki/Brno",value:"Brno",customDonutContent:"Custom Brno"},{id:"kyiv",name:"Kyiv",data:[Math.round(1e6*Math.random())],icon:"status_critical",link:"https://en.wikipedia.org/wiki/Kyiv",value:"Kyiv",customDonutContent:"Custom Kyiv"},{id:"austin",name:"Austin",data:[Math.round(1e6*Math.random())],icon:"status_warning",link:"https://en.wikipedia.org/wiki/Austin",value:"Austin",customDonutContent:"Custom Austin"},{id:"lisbon",name:"Lisbon",data:[Math.round(1e6*Math.random())],icon:"status_unknown",link:"https://en.wikipedia.org/wiki/Lisbon",value:"Lisbon",customDonutContent:"Custom Lisbon"},{id:"sydney",name:"Sydney",data:[Math.round(1e6*Math.random())],icon:"status_up",link:"https://en.wikipedia.org/wiki/Sydney",value:"Sydney",customDonutContent:"Custom Sydney"},{id:"nur-sultan",name:"Nur-Sultan",data:[Math.round(1e6*Math.random())],icon:"status_unmanaged",link:"https://en.wikipedia.org/wiki/Nur-Sultan",value:"Nur-Sultan",customDonutContent:"Custom Nur-Sultan"}].sort((o,r)=>o.data[0]-r.data[0])}),this.busy.next(!1)},300)})})}ngOnDestroy(){this.outputsSubject.complete()}}return o.providerId="BeerReviewCountsByCityMockDataSource",o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),D=(()=>{class o{constructor(e,n,s,a,p,g){this.widgetTypesService=e,this.providerRegistry=n,this.changeDetectorRef=g,this.gridsterConfig={},this.editMode=!1,a.addItems(i.tFi),s.addItems(i.NlZ),p.addItems(i.wz0)}ngOnInit(){const e=this.widgetTypesService.getWidgetType("proportional",1);this.widgetTypesService.setNode(e,"configurator",i.ACc.DataSourceProviders,[A.providerId]),this.setupConfigurator(),this.providerRegistry.setProviders({[A.providerId]:{provide:i.Fk3,useClass:A,deps:[]}}),this.initializeDashboard()}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}initializeDashboard(){const e={[b.id]:this.widgetTypesService.mergeWithWidgetType(b)};this.dashboard={positions:{[b.id]:{cols:6,rows:6,y:0,x:0}},widgets:e}}setupConfigurator(){var e,n,s,a,p,g;const u=this.widgetTypesService.getWidgetType("proportional",1);null===(n=null===(e=u.configurator)||void 0===e?void 0:e.structure)||void 0===n||delete n.presentation,null===(a=null===(s=u.configurator)||void 0===s?void 0:s.structure)||void 0===a||delete a.chartOptionsEditor,null===(g=null===(p=u.configurator)||void 0===p?void 0:p.structure)||void 0===g||delete g.donutContentConfiguration,this.widgetTypesService.setNode(u,"configurator","presentation",i.pPd.presentation),this.widgetTypesService.setNode(u,"configurator","chartOptionsEditor",i.pPd.chartOptionsEditor),this.widgetTypesService.setNode(u,"configurator","donutContentConfiguration",i.pPd.donutContentConfiguration)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.xTe),t.Y36(i.CNH),t.Y36(i.UAh),t.Y36(i.qy4),t.Y36(i.khc),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["proportional-widget-donut-content-formatters-example"]],decls:6,vars:3,consts:function(){let r;return r=$localize`:␟18d630a3c524dbab6dc528571782a939a7bc95b1␟861097914887003123: Edit Mode `,[[1,"mb-2","d-flex","align-items-center"],[1,"ml-3","py-2",3,"value","valueChange"],r,["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboard","editMode","gridsterConfig","dashboardChange","gridsterConfigChange"]]},template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"nui-switch",1),t.NdJ("valueChange",function(a){return n.editMode=a}),t.SDv(2,2),t.qZA(),t.YNc(3,H,2,0,"button",3),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,K,1,3,"nui-dashboard",5),t.qZA()),2&e&&(t.xp6(1),t.Q6J("value",n.editMode),t.xp6(2),t.Q6J("ngIf",!(null!=n.dashboard&&n.dashboard.widgets.proportionalWidgetId)),t.xp6(2),t.Q6J("ngIf",n.dashboard))},dependencies:[c.r0F,v.O5,E.M,w.t,c.qUD],styles:[".dashboard[_ngcontent-%COMP%]{height:370px}"]}),o})();const b={id:"proportionalWidgetId",type:"proportional",pizzagna:{[i.xW5.Configuration]:{[i.XMI]:{providers:{}},header:{properties:{title:"Beer Review Tally by City",subtitle:"These People Love Beer"}},chart:{providers:{[i.Muk.DataSource]:{providerId:A.providerId}},properties:{configuration:{chartOptions:{type:i.EMX.DonutChart,legendPlacement:i.woB.Right,donutContentConfig:{formatter:{componentType:i.PEA.lateLoadKey},aggregator:{aggregatorType:i.LtV.aggregatorType,properties:{}}}}}}}}}},Y=[{path:"",component:G,data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}},{path:"example",component:S,data:{srlc:{hideIndicator:!0}}},{path:"donut-content-formatters",component:(()=>{class o{constructor(){this.dataSourceDataFieldsConfig="\npublic dataFieldsConfig: IProportionalDataFieldsConfig = {\n    dataFields$: new BehaviorSubject<IDataField[]>(this.dataFields),\n    chartSeriesDataFields$: new BehaviorSubject<IDataField[]>(this.chartSeriesDataFields),\n};\n    ",this.widgetConfigSlice='\n"properties": {\n    "configuration": {\n        "chartOptions": {\n            donutContentConfig: {\n                formatter: {\n                    componentType: SiUnitsFormatterComponent.lateLoadKey,\n                },\n                aggregator: {\n                    aggregatorType: sumAggregator.aggregatorType,\n                },\n            },\n        }\n    }\n}\n\n    '}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["nui-proportional-donut-content-docs"]],decls:128,vars:2,consts:[["filenamePrefix","proportional-donut-content-formatters-example","exampleTitle","Proportional Widget with Donut Content"],["href","../additional-documentation/anatomy/data-sources.html","target","_blank"],["href","../../interfaces/IProportionalDataFieldsConfig.html","target","_blank"],["language","typescript"],["href","../../interfaces/IDonutContentConfig.html","target","_blank"]],template:function(e,n){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Proportional Widget Donut Chart Content Configuration"),t.qZA(),t.TgZ(2,"p"),t._uU(3,"Donut Content configuration consists of two basic logic elements:"),t.qZA(),t.TgZ(4,"ul")(5,"li")(6,"code"),t._uU(7,"aggregator"),t.qZA(),t._uU(8," - an element that is responsible for processing ALL the metrics in chart and return a single value. For example, "),t.TgZ(9,"code"),t._uU(10,"percentageAggregator"),t.qZA(),t._uU(11," - processes all the metrics and takes a percentage of a certain metric (configurable). "),t.qZA(),t.TgZ(12,"li")(13,"code"),t._uU(14,"formatter"),t.qZA(),t._uU(15," - an element that changes the representation of a single value. In terms of the proportional donut content, processes the output of an "),t.TgZ(16,"code"),t._uU(17,"aggregator"),t.qZA(),t._uU(18,". "),t.qZA()(),t.TgZ(19,"h3"),t._uU(20,"Default aggregators available"),t.qZA(),t.TgZ(21,"ul")(22,"li")(23,"strong"),t._uU(24,"Sum Aggregator"),t.qZA(),t._uU(25," - Gets the sum of all the metrics in the chart. "),t.TgZ(26,"code"),t._uU(27,"aggregatorType: sumAggregator"),t.qZA()(),t.TgZ(28,"li")(29,"strong"),t._uU(30,"Percentage Aggregator"),t.qZA(),t._uU(31," - Gets the percentage of a specified metric among the other metrics. "),t.TgZ(32,"code"),t._uU(33,"aggregatorType: percentageAggregator"),t.qZA()(),t.TgZ(34,"li")(35,"strong"),t._uU(36,"Field Mapper"),t.qZA(),t._uU(37," - Allows to map chart series fields to be displayed in the donut center. For example, if you want to display some value in the series data, you can use field mapper to get the value from the chart series. Check the configuration section in the example for more details. "),t.TgZ(38,"code"),t._uU(39,"aggregatorType: fieldMapper"),t.qZA(),t._uU(40,". "),t.qZA()(),t.TgZ(41,"h3"),t._uU(42,"Default formatters available"),t.qZA(),t.TgZ(43,"ul")(44,"li")(45,"strong"),t._uU(46,"Raw Formatter"),t.qZA(),t._uU(47," - displays the value as it. "),t.TgZ(48,"code"),t._uU(49,"componentType: RawFormatterComponent"),t.qZA()(),t.TgZ(50,"li")(51,"strong"),t._uU(52,"Percentage Formatter"),t.qZA(),t._uU(53," - displays the value and the "),t.TgZ(54,"code"),t._uU(55,"%"),t.qZA(),t._uU(56," sign. "),t.TgZ(57,"code"),t._uU(58,"componentType: PercentageFormatterComponent"),t.qZA()(),t.TgZ(59,"li")(60,"strong"),t._uU(61,"Si Units Formatter"),t.qZA(),t._uU(62," - displays the "),t.TgZ(63,"code"),t._uU(64,"number"),t.qZA(),t._uU(65," value using SI system prefixes (k, M, G etc.). For example, "),t.TgZ(66,"code"),t._uU(67,"123456789"),t.qZA(),t._uU(68," value will be displayed as "),t.TgZ(69,"code"),t._uU(70,"123.5 M"),t.qZA(),t._uU(71,". "),t.TgZ(72,"code"),t._uU(73,"componentType: SiUnitsFormatterComponent"),t.qZA()()(),t.TgZ(74,"nui-example-wrapper",0),t._UZ(75,"proportional-widget-donut-content-formatters-example"),t.qZA(),t.TgZ(76,"h2"),t._uU(77,"DataSource setup"),t.qZA(),t.TgZ(78,"p"),t._uU(79," Before proceeding, to the widget configuration it's necessary to setup the dataSource first. It's necessary for the correct work of the configurator.\n"),t.qZA(),t.TgZ(80,"p"),t._uU(81," DataSource should describe its "),t.TgZ(82,"code"),t._uU(83,"dataFields"),t.qZA(),t._uU(84,", so be sure to check the "),t.TgZ(85,"a",1),t._uU(86,"DataSource Documentation"),t.qZA(),t._uU(87," before proceeding. Moreover, for the Donut Content configuration it's necessary that "),t.TgZ(88,"code"),t._uU(89,"dataFieldsConfig"),t.qZA(),t._uU(90," to implement the "),t.TgZ(91,"a",2),t._uU(92,"IProportionalDataFieldsConfig"),t.qZA(),t._uU(93," interface, as follows:\n"),t.qZA(),t.TgZ(94,"nui-example-code",3),t._uU(95),t.qZA(),t.TgZ(96,"p"),t._uU(97,"Check the code under the source expander for more details."),t.qZA(),t.TgZ(98,"h2"),t._uU(99,"Widget Configuration"),t.qZA(),t.TgZ(100,"p"),t._uU(101," To configure the donut content you need to set "),t.TgZ(102,"a",4),t._uU(103,"donutContentConfig"),t.qZA(),t._uU(104," in "),t.TgZ(105,"code"),t._uU(106,"donutContentConfig"),t.qZA(),t._uU(107," in the "),t.TgZ(108,"code"),t._uU(109,"chartOptions"),t.qZA(),t._uU(110," section. Following config example shows the config for setting Sum aggregation with Si Units Formatter applied to it.\n"),t.qZA(),t.TgZ(111,"p")(112,"strong"),t._uU(113,"Note: "),t.qZA(),t._uU(114," please be aware that this config has top priority over\n"),t.qZA(),t.TgZ(115,"nui-example-code",3),t._uU(116),t.qZA(),t.TgZ(117,"h3"),t._uU(118,"Setting up the Configurator"),t.qZA(),t.TgZ(119,"p"),t._uU(120," Having such a configuration, involves having a different configurator section configuration, otherwise the default configuration section "),t.TgZ(121,"strong"),t._uU(122,"won't work!"),t.qZA()(),t.TgZ(123,"p"),t._uU(124," To setup the Configurator, please check the "),t.TgZ(125,"strong"),t._uU(126,"setupConfigurator"),t.qZA(),t._uU(127," dashboard method implementation. You can find the sources under the dashboard source expander.\n"),t.qZA()),2&e&&(t.xp6(95),t.hij(" ",n.dataSourceDataFieldsConfig,"\n"),t.xp6(21),t.hij(" ",n.widgetConfigSlice,"\n"))},dependencies:[c.hD2,c.i10,D],encapsulation:2}),o})(),data:{srlc:{hideIndicator:!0}}},{path:"donut-content-formatters-example",component:D,data:{srlc:{hideIndicator:!0}}},{path:"proportional-widget-interactive-example",component:P,data:{srlc:{hideIndicator:!0}}}];let $=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[{provide:c.V3$,useValue:(0,N.S)("proportional")}],imports:[_.Bz.forChild(Y),c.Az_,c.vvu,i.Pi,c.gkT,c.cJ5]}),o})()},93483:(R,f,l)=>{l.d(f,{Z:()=>_});const _='// \xa9 2022 SolarWinds Worldwide, LLC. All rights reserved.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n//  of this software and associated documentation files (the "Software"), to\n//  deal in the Software without restriction, including without limitation the\n//  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n//  sell copies of the Software, and to permit persons to whom the Software is\n//  furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n//  all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n//  THE SOFTWARE.\n\n/* eslint-disable max-len */\nimport { IBroadcasterConfig } from "../../components/providers/types";\nimport { IFormatterDefinition } from "../../components/types";\nimport { FormStackComponent } from "../../configurator/components/form-stack/form-stack.component";\nimport { DonutContentPercentageFormatterComponent } from "../../configurator/components/formatters/donut-content-percentage-formatter/donut-content-percentage-formatter.component";\nimport { DonutContentRawFormatterComponent } from "../../configurator/components/formatters/donut-content-raw-formatter/donut-content-raw-formatter.component";\nimport { DonutContentSumFormatterComponent } from "../../configurator/components/formatters/donut-content-sum-formatter/donut-content-sum-formatter.component";\nimport { LinkFormatterComponent } from "../../configurator/components/formatters/link-formatter/link-formatter.component";\nimport { PercentageFormatterComponent } from "../../configurator/components/formatters/percentage-formatter/percentage-formatter.component";\nimport { RawFormatterComponent } from "../../configurator/components/formatters/raw-formatter/raw-formatter.component";\nimport { SiUnitsFormatterComponent } from "../../configurator/components/formatters/si-units-formatter/si-units-formatter.component";\nimport { StatusWithIconFormatterComponent } from "../../configurator/components/formatters/status-with-icon-formatter/status-with-icon-formatter.component";\nimport { WidgetConfiguratorSectionComponent } from "../../configurator/components/widget-configurator-section/widget-configurator-section.component";\nimport { DataSourceConfigurationComponent } from "../../configurator/components/widgets/configurator-items/data-source-configuration/data-source-configuration.component";\nimport { DataSourceErrorComponent } from "../../configurator/components/widgets/configurator-items/data-source-error/data-source-error.component";\nimport { TitleAndDescriptionConfigurationComponent } from "../../configurator/components/widgets/configurator-items/title-and-description-configuration/title-and-description-configuration.component";\nimport { AggregatorMetricSelectorConfigurationComponent } from "../../configurator/components/widgets/proportional/aggregators-configurators/aggregator-configurator/aggregator-configurator.component";\nimport { FieldMapperAggregatorConfiguratorComponent } from "../../configurator/components/widgets/proportional/aggregators-configurators/field-mapper-aggregator-configurator/field-mapper-aggregator-configurator.component";\nimport { ProportionalChartOptionsEditorComponent } from "../../configurator/components/widgets/proportional/chart-options-editor/proportional-chart-options-editor.component";\nimport { fieldMapper } from "../../functions/proportional-aggregators/field-mapper";\nimport {\n    IPercentageAggregatorProperties,\n    percentageAggregator,\n} from "../../functions/proportional-aggregators/percentage-aggregator";\nimport { sumAggregator } from "../../functions/proportional-aggregators/sum-aggregator";\nimport { IProportionalDonutContentAggregatorDefinition } from "../../functions/proportional-aggregators/types";\nimport {\n    DEFAULT_PIZZAGNA_ROOT,\n    NOVA_GENERIC_CONVERTER,\n    NOVA_PIZZAGNA_BROADCASTER,\n    NOVA_PROPORTIONAL_CONTENT_FORMATTERS_REGISTRY,\n    NOVA_PROPORTIONAL_WIDGET_CHART_OPTIONS_CONVERTER,\n    NOVA_TITLE_AND_DESCRIPTION_CONVERTER,\n} from "../../services/types";\nimport { PizzagnaLayer, WellKnownProviders } from "../../types";\nimport { LegendPlacement } from "../../widget-types/common/widget/legend";\nimport { REFRESHER_CONFIGURATOR } from "../common/configurator/components";\n/* eslint-enable max-len */\n\nexport const DEFAULT_LEGEND_FORMATTERS: IFormatterDefinition[] = [\n    {\n        componentType: "",\n        label: $localize`Raw Formatter`,\n        dataTypes: {\n            // @ts-ignore\n            value: null,\n        },\n    },\n    {\n        componentType: StatusWithIconFormatterComponent.lateLoadKey,\n        label: $localize`Status With Icon`,\n        dataTypes: {\n            // @ts-ignore\n            value: null,\n        },\n    },\n    {\n        componentType: LinkFormatterComponent.lateLoadKey,\n        label: $localize`Link`,\n        dataTypes: {\n            // @ts-ignore\n            value: null,\n        },\n    },\n];\nexport const DEFAULT_PROPORTIONAL_CONTENT_FORMATTERS: IFormatterDefinition[] = [\n    {\n        componentType: RawFormatterComponent.lateLoadKey,\n        label: $localize`Raw Formatter`,\n        dataTypes: {\n            // @ts-ignore\n            value: null,\n        },\n        properties: {\n            elementClass: "nui-text-page",\n        },\n    },\n    {\n        componentType: SiUnitsFormatterComponent.lateLoadKey,\n        label: $localize`Si Units Formatter`,\n        dataTypes: {\n            // @ts-ignore\n            value: null,\n        },\n        properties: {\n            elementClass: "nui-text-page",\n        },\n    },\n    {\n        componentType: PercentageFormatterComponent.lateLoadKey,\n        label: $localize`Percentage Formatter`,\n        dataTypes: {\n            // @ts-ignore\n            value: null,\n        },\n        properties: {\n            elementClass: "nui-text-page",\n        },\n    },\n];\n\nexport const DEFAULT_PROPORTIONAL_CONTENT_AGGREGATORS: IProportionalDonutContentAggregatorDefinition[] =\n    [\n        {\n            aggregatorType: sumAggregator.aggregatorType,\n            label: "Sum Aggregator",\n            fn: sumAggregator,\n            configurationComponent:\n                AggregatorMetricSelectorConfigurationComponent.lateLoadKey,\n        },\n        {\n            aggregatorType: percentageAggregator.aggregatorType,\n            label: "Percentage Aggregator",\n            fn: percentageAggregator,\n            properties: {\n                base100: true,\n            } as IPercentageAggregatorProperties,\n            configurationComponent:\n                AggregatorMetricSelectorConfigurationComponent.lateLoadKey,\n        },\n        {\n            aggregatorType: fieldMapper.aggregatorType,\n            label: "Field Mapper Aggregator",\n            fn: fieldMapper,\n            configurationComponent:\n                FieldMapperAggregatorConfiguratorComponent.lateLoadKey,\n        },\n    ];\n\nexport const proportionalConfigurator = {\n    [PizzagnaLayer.Structure]: {\n        [DEFAULT_PIZZAGNA_ROOT]: {\n            id: DEFAULT_PIZZAGNA_ROOT,\n            // base layout of the configurator - all form components referenced herein will be stacked in a column\n            componentType: FormStackComponent.lateLoadKey,\n            properties: {\n                elementClass: "flex-grow-1 overflow-auto nui-scroll-shadows",\n                // references to other components laid out in this form\n                nodes: ["presentation", "dataAndCalculations"],\n            },\n            providers: {\n                [WellKnownProviders.FormattersRegistry]: {\n                    providerId: NOVA_PROPORTIONAL_CONTENT_FORMATTERS_REGISTRY,\n                },\n            },\n        },\n        // /presentation\n        presentation: {\n            id: "presentation",\n            componentType: WidgetConfiguratorSectionComponent.lateLoadKey,\n            properties: {\n                headerText: "Presentation",\n                nodes: ["titleAndDescription", "chartOptionsEditor"],\n            },\n        },\n        // /presentation/titleAndDescription\n        titleAndDescription: {\n            id: "titleAndDescription",\n            componentType:\n                TitleAndDescriptionConfigurationComponent.lateLoadKey,\n            providers: {\n                [WellKnownProviders.Converter]: {\n                    providerId: NOVA_TITLE_AND_DESCRIPTION_CONVERTER,\n                },\n            },\n        },\n        // /presentation/chartOptionsEditor\n        chartOptionsEditor: {\n            id: "chartOptionsEditor",\n            componentType: ProportionalChartOptionsEditorComponent.lateLoadKey,\n            properties: {\n                chartOptions: {\n                    chartTypes: [\n                        "PieChart",\n                        "DonutChart",\n                        "VerticalBarChart",\n                        "HorizontalBarChart",\n                    ],\n                    legendPlacementOptions: [\n                        {\n                            id: LegendPlacement.None,\n                            label: $localize`None`,\n                        },\n                        {\n                            id: LegendPlacement.Right,\n                            label: $localize`Right`,\n                        },\n                        {\n                            id: LegendPlacement.Bottom,\n                            label: $localize`Bottom`,\n                        },\n                    ],\n                    contentFormatters: [\n                        {\n                            componentType:\n                                DonutContentRawFormatterComponent.lateLoadKey,\n                            label: $localize`Raw`,\n                        },\n                        {\n                            componentType:\n                                DonutContentSumFormatterComponent.lateLoadKey,\n                            label: $localize`Sum`,\n                        },\n                        {\n                            componentType:\n                                DonutContentPercentageFormatterComponent.lateLoadKey,\n                            label: $localize`Percentage`,\n                            configurationComponent:\n                                "DonutContentPercentageConfigurationComponent",\n                        },\n                    ] as IFormatterDefinition[],\n                    legendFormatters: [\n                        {\n                            componentType:\n                                StatusWithIconFormatterComponent.lateLoadKey,\n                            label: $localize`Status With Icon`,\n                        },\n                        {\n                            componentType: LinkFormatterComponent.lateLoadKey,\n                            label: $localize`Link`,\n                        },\n                    ] as IFormatterDefinition[],\n                },\n            },\n            providers: {\n                // converter transforms the chart options data between the widget and the form\n                [WellKnownProviders.Converter]: {\n                    providerId:\n                        NOVA_PROPORTIONAL_WIDGET_CHART_OPTIONS_CONVERTER,\n                },\n            },\n        },\n        refresher: REFRESHER_CONFIGURATOR,\n        // /dataAndCalculations\n        dataAndCalculations: {\n            id: "dataAndCalculations",\n            componentType: WidgetConfiguratorSectionComponent.lateLoadKey,\n            properties: {\n                headerText: $localize`Data and Calculations`,\n                nodes: ["dataSource"],\n            },\n        },\n        // /dataAndCalculations/dataSource\n        dataSource: {\n            id: "dataSource",\n            componentType: DataSourceConfigurationComponent.lateLoadKey,\n            properties: {\n                // for the DataSourceConfigurationComponent, this defines the list of data sources to pick from\n                dataSourceProviders: [] as string[],\n                errorComponent: DataSourceErrorComponent.lateLoadKey,\n            },\n            providers: {\n                // converter transforms the data source metadata between the widget and the form\n                [WellKnownProviders.Converter]: {\n                    providerId: NOVA_GENERIC_CONVERTER,\n                    properties: {\n                        formParts: [\n                            {\n                                // this component updates the \'providerId\' of the \'dataSource\'\n                                previewPath: "chart.providers.dataSource",\n                                // TODO: Remove \'properties\' key in v10 - NUI-5831\n                                keys: ["providerId", "properties"],\n                            },\n                            {\n                                // this component updates the \'properties\' of the \'dataSource\' via an adapter\n                                previewPath:\n                                    "chart.providers.adapter.properties.dataSource",\n                                keys: ["properties"],\n                            },\n                        ],\n                    },\n                },\n                [WellKnownProviders.Broadcaster]: {\n                    providerId: NOVA_PIZZAGNA_BROADCASTER,\n                    properties: {\n                        configs: [\n                            {\n                                trackOn: "component",\n                                key: "dsOutput",\n                                paths: [\n                                    "data.chartOptionsEditor.properties.dsOutput",\n                                ],\n                            },\n                        ] as IBroadcasterConfig[],\n                    },\n                },\n            },\n        },\n    },\n};\n'},96063:(R,f,l)=>{l.d(f,{Z:()=>_});const _='// \xa9 2022 SolarWinds Worldwide, LLC. All rights reserved.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n//  of this software and associated documentation files (the "Software"), to\n//  deal in the Software without restriction, including without limitation the\n//  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n//  sell copies of the Software, and to permit persons to whom the Software is\n//  furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n//  all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n//  THE SOFTWARE.\n\nimport { StackComponent } from "../../components/layouts/stack/stack.component";\nimport { ProportionalWidgetComponent } from "../../components/proportional-widget/proportional-widget.component";\nimport {\n    DEFAULT_PIZZAGNA_ROOT,\n    NOVA_DATASOURCE_ADAPTER,\n} from "../../services/types";\nimport { PizzagnaLayer, WellKnownProviders } from "../../types";\nimport {\n    widgetBodyContentNodes,\n    WIDGET_BODY,\n    WIDGET_HEADER,\n    WIDGET_LOADING,\n} from "../common/widget/components";\nimport { EVENT_PROXY, refresher } from "../common/widget/providers";\n\nexport const proportionalWidget = {\n    [PizzagnaLayer.Structure]: {\n        [DEFAULT_PIZZAGNA_ROOT]: {\n            id: DEFAULT_PIZZAGNA_ROOT,\n            // base layout of the widget - all components referenced herein will be stacked in a column\n            componentType: StackComponent.lateLoadKey,\n            properties: {\n                // these values reference other components in this structure\n                nodes: ["header", "loading", "body"],\n            },\n            providers: {\n                // When enabled, this provider emits the REFRESH event on the pizzagna event bus every X seconds\n                [WellKnownProviders.Refresher]: refresher(),\n                // event proxy manages the transmission of events between widget and dashboard\n                [WellKnownProviders.EventProxy]: EVENT_PROXY,\n            },\n        },\n        // widget header\n        header: WIDGET_HEADER,\n        // this is the loading bar below the header\n        loading: WIDGET_LOADING,\n        // widget body\n        body: {\n            ...WIDGET_BODY,\n            properties: {\n                ...WIDGET_BODY.properties,\n                elementClass: "overflow-auto",\n            },\n        },\n\n        // retrieving the definitions for the body content nodes. the argument corresponds to the main content node key\n        ...widgetBodyContentNodes("chart"),\n\n        // a component that manages layout and behavior of the proportional chart\n        chart: {\n            id: "chart",\n            componentType: ProportionalWidgetComponent.lateLoadKey,\n            providers: {\n                [WellKnownProviders.Adapter]: {\n                    providerId: NOVA_DATASOURCE_ADAPTER,\n                    properties: {\n                        componentId: "chart",\n                        propertyPath: "widgetData",\n                    },\n                },\n            },\n            properties: {\n                elementClass:\n                    "d-flex flex-grow-1 justify-content-center overflow-auto",\n            },\n        },\n    },\n    [PizzagnaLayer.Configuration]: {\n        [DEFAULT_PIZZAGNA_ROOT]: {\n            id: DEFAULT_PIZZAGNA_ROOT,\n            providers: {\n                // default refresher configuration\n                [WellKnownProviders.Refresher]: refresher(false, 60),\n            },\n        },\n        // default header configuration\n        header: {\n            properties: {\n                title: $localize`Empty Proportional Widget`,\n            },\n        },\n    },\n};\n'}}]);