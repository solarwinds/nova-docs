"use strict";(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[55],{61055:(z,O,r)=>{r.r(O),r.d(O,{default:()=>q});var C=r(36895),p=r(80529),d=r(90433),R=r(75883),s=r(72536),u=r(47977),b=r(45431),e=r(94650),v=r(39841),S=r(61135),Z=r(68675),N=r(54004),A=r(28746),y=r(19837),w=r(57878),x=r(16193),L=r(15838),F=r(34575),P=r(44994),I=function(o,i,t,n){return new(t||(t=Promise))(function(c,l){function g(_){try{h(n.next(_))}catch(m){l(m)}}function K(_){try{h(n.throw(_))}catch(m){l(m)}}function h(_){_.done?c(_.value):function a(c){return c instanceof t?c:new t(function(l){l(c)})}(_.value).then(g,K)}h((n=n.apply(o,i||[])).next())})};function D(o,i){if(1&o&&(e.TgZ(0,"div",12)(1,"nui-form-field",13),e._UZ(2,"nui-textbox",14),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("control",t.form.get("units"))}}function G(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.reInitializeDashboard())}),e._uU(1," Restore Widget "),e.qZA()}}function X(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"nui-dashboard",7),e.NdJ("dashboardChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.dashboard=a)})("gridsterConfigChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.gridsterConfig=a)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("dashboard",t.dashboard)("gridsterConfig",t.gridsterConfig)("editMode",t.editMode)}}const E=".dashboard[_ngcontent-%COMP%]{height:800px}.kpi-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-description-configuration__custom-content-container[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-dark,#111);border-radius:3px}.kpi-description-configuration__custom-content-header[_ngcontent-%COMP%], .kpi-description-configuration__custom-content[_ngcontent-%COMP%]{color:var(--nui-color-text-light,#fff)}";let U=(()=>{class o{constructor(t,n){this.changeDetector=t,this.formBuilder=n,this.label="",this.units="",this.formReady=new e.vpe}ngOnInit(){this.form=this.formBuilder.group({label:[this.label,[d.kI.required]]}),this.configurableUnits&&this.form.addControl("units",this.formBuilder.control(this.units));const t=this.form.get("label"),n=t?.valueChanges.pipe((0,Z.O)(t?.value));this.subtitle$=(0,v.a)([n?.pipe((0,N.U)(a=>a||$localize`no label`))]).pipe((0,N.U)(a=>a.join(", "))),this.formReady.emit(this.form)}ngOnChanges(t){t.label&&this.form.patchValue({label:t.label.currentValue}),t.units&&this.form.patchValue({units:t.units.currentValue})}}return o.lateLoadKey="CustomKpiDescriptionConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(d.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["custom-kpi-description-configuration"]],inputs:{componentId:"componentId",configurableUnits:"configurableUnits",label:"label",units:"units"},outputs:{formReady:"formReady"},features:[e.TTD],decls:17,vars:17,consts:function(){let i,t,n,a,c,l;return i=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,t=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`,n=$localize`:␟4e94d0a3c7c08c9c5ddc4a0011e528b0fcbd355d␟6528105433405779207: Custom Content `,a=$localize`:␟1a0285a47862b78b82cc3a7330db968210e50cc0␟6053005409778889415: The default version of this configurator section displays a background color selector here. `,c=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,l=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,[[3,"formGroup","state"],["headerTitle","Description",3,"subtitle","headerIcon"],[1,"kpi-description-configuration__accordion-content"],[1,"mb-4"],["caption",i,1,"form-group",3,"control"],["formControlName","label","placeholder",t],[1,"my-4","pt-1","px-3","pb-3","kpi-description-configuration__custom-content-container"],[1,"kpi-description-configuration__custom-content-header"],n,[1,"kpi-description-configuration__custom-content"],a,["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",c,1,"form-group",3,"control"],["formControlName","units","placeholder",l]]},template:function(t,n){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e._UZ(3,"nui-widget-editor-accordion-header",1),e.ALo(4,"async"),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",2)(8,"div",3)(9,"nui-form-field",4),e._UZ(10,"nui-textbox",5),e.qZA()(),e.TgZ(11,"div",6)(12,"h5",7),e.SDv(13,8),e.qZA(),e.TgZ(14,"div",9),e.SDv(15,10),e.qZA()(),e.YNc(16,D,3,1,"div",11),e.qZA()()),2&t&&(e.Q6J("formGroup",n.form)("state",e.lcZ(1,6,e.lcZ(2,8,n.form))),e.xp6(3),e.Q6J("subtitle",e.lcZ(4,10,n.subtitle$))("headerIcon",e.lcZ(5,12,e.xi3(6,14,n.form,"widget_list"))),e.xp6(6),e.Q6J("control",n.form.get("label")),e.xp6(7),e.Q6J("ngIf",n.configurableUnits))},dependencies:[C.O5,d.JJ,d.JL,d.sg,d.u,y.J,w.z,s.hgI,s.XHW,C.Ov,x.F,L.d],styles:[E],changeDetection:0}),o})(),T=(()=>{class o extends s.LvN{constructor(t){super(),this.http=t,this.busy=new S.X(!1)}getFilteredData(){return I(this,void 0,void 0,function*(){return this.busy.next(!0),new Promise(t=>{this.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe((0,A.x)(()=>this.busy.next(!1))).subscribe({next:n=>{t({result:{value:n.volumeInfo.averageRating}})},error:n=>{t({result:null,error:{type:n.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}}return o.providerId="AverageRatingKpiDataSource",o.\u0275fac=function(t){return new(t||o)(e.LFG(p.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),f=(()=>{class o extends s.LvN{constructor(t){super(),this.http=t,this.busy=new S.X(!1)}getFilteredData(){return I(this,void 0,void 0,function*(){return this.busy.next(!0),new Promise(t=>{this.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe((0,A.x)(()=>this.busy.next(!1))).subscribe({next:n=>{t({result:{value:n.volumeInfo.ratingsCount}})},error:n=>{t({result:null,error:{type:n.status}})}})})})}ngOnDestroy(){this.outputsSubject.complete()}}return o.providerId="RatingsCountKpiDataSource",o.\u0275fac=function(t){return new(t||o)(e.LFG(p.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),M=(()=>{class o{constructor(t,n,a,c){this.widgetTypesService=t,this.providerRegistry=n,this.componentRegistry=a,this.changeDetectorRef=c,this.gridsterConfig={},this.editMode=!1}ngOnInit(){const t=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(t,"configurator",u.ACc.TileDescriptionConfigComponentType,U.lateLoadKey),this.componentRegistry.registerByLateLoadKey(U),this.widgetTypesService.setNode(t,"configurator",u.ACc.DataSourceProviders,[T.providerId,f.providerId]),this.providerRegistry.setProviders({[T.providerId]:{provide:u.Fk3,useClass:T,deps:[p.eN]},[f.providerId]:{provide:u.Fk3,useClass:f,deps:[p.eN]}}),this.initializeDashboard()}initializeDashboard(){const t=$,n={[t.id]:this.widgetTypesService.mergeWithWidgetType(t)};this.dashboard={positions:{[t.id]:{cols:4,rows:6,y:0,x:0}},widgets:n}}reInitializeDashboard(){this.dashboard=void 0,this.changeDetectorRef.detectChanges(),this.initializeDashboard()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.xTe),e.Y36(u.CNH),e.Y36(u.hiK),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["custom-configurator-section-example"]],decls:6,vars:3,consts:function(){let i;return i=$localize`:␟5fa31edac506213950b479159e840b300d749592␟3766035158759769347: Edit Mode `,[[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"value","valueChange"],i,["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange",4,"ngIf"],["type","button","displayStyle","action","nui-button","",3,"click"],["nuiWidgetEditor","",3,"dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"nui-switch",1),e.NdJ("valueChange",function(c){return n.editMode=c}),e.SDv(2,2),e.qZA(),e.YNc(3,G,2,0,"button",3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,X,1,3,"nui-dashboard",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("value",n.editMode),e.xp6(2),e.Q6J("ngIf",!(null!=n.dashboard&&n.dashboard.widgets.widget1)),e.xp6(2),e.Q6J("ngIf",n.dashboard))},dependencies:[C.O5,F.M,P.t,s.qUD,s.r0F],styles:[E]}),o})();const $={id:"widget1",type:"kpi",pizzagna:{[u.xW5.Configuration]:{[u.XMI]:{providers:{[u.Muk.Refresher]:{properties:{interval:600,enabled:!0}}}},header:{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}},tiles:{properties:{nodes:["kpi1"]}},kpi1:{id:"kpi1",componentType:u.ufE.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating"}},providers:{[u.Muk.DataSource]:{providerId:T.providerId},[u.Muk.Adapter]:{providerId:u.u1$,properties:{componentId:"kpi1",propertyPath:"widgetData"}}}}}}},k=[{path:"",component:(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["custom-configurator-section-docs"]],decls:113,vars:2,consts:[["href","../additional-documentation/tutorials/customization/widget.html","target","_parent"],["href","../classes/WidgetTypesService.html","target","_blank"],["href","../injectables/ComponentRegistryService.html","target","_blank"],["href","../additional-documentation/getting-started.html","target","_parent"],["href","../components/KpiDescriptionConfigurationComponent.html","target","_blank"],["href","../modules/NuiDashboardConfiguratorModule.html","target","_blank"],["href","https://angular.io/api/forms/ReactiveFormsModule","target","_blank"],["type","info",3,"allowDismiss"],["href","../injectables/ConfiguratorHeadingService.html","target","_blank"],["filenamePrefix","custom-configurator-section","exampleTitle","Custom Configurator Section"]],template:function(t,n){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Implementing a Custom Configurator Section"),e.qZA(),e.TgZ(2,"p"),e._uU(3," While developing a dashboard, you may find yourself wanting to give users the ability to configure a widget behavior or layout that's not configurable out of the box. For example, you may want to provide a product-specific way for users to configure a data source. The first step to achieving something like this is to replace an existing widget configurator (editor) section with your own implementation. In this tutorial, we'll do our best to give you an understanding of what's needed to accomplish this first step.\n"),e.qZA(),e.TgZ(4,"p"),e._uU(5," For now, we'll keep things simple and create a custom version of the KPI description configuration component to replace the background color selector with some static text content. This will serve mainly as a proof-of-concept for the configurator side. In a later tutorial, we'll create a "),e.TgZ(6,"a",0),e._uU(7,"custom widget"),e.qZA(),e._uU(8," that can actually be configured via a custom configurator section. And, in another tutorial beyond that, we'll go over the small amount of additional wiring required to give users the ability to change the configuration of a data source.\n"),e.qZA(),e.TgZ(9,"h2"),e._uU(10,"Fundamental Concepts"),e.qZA(),e.TgZ(11,"ul")(12,"li")(13,"code")(14,"a",1),e._uU(15,"WidgetTypesService"),e.qZA()()(),e.TgZ(16,"li")(17,"code")(18,"a",2),e._uU(19,"ComponentRegistryService"),e.qZA()()(),e.TgZ(20,"li"),e._uU(21,"Custom configurator section component"),e.qZA()(),e.TgZ(22,"h2"),e._uU(23,"Basic Steps"),e.qZA(),e.TgZ(24,"ol")(25,"li"),e._uU(26," Follow the instructions "),e.TgZ(27,"a",3),e._uU(28,"here"),e.qZA(),e._uU(29," to set up your environment for dashboard development. "),e.qZA(),e.TgZ(30,"li"),e._uU(31," Follow the instructions from previous tutorials to get a basic dashboard up and running. "),e.qZA(),e.TgZ(32,"li"),e._uU(33," Create a component that will be used to replace an existing framework-provided configurator section. In this tutorial, we'll replace the existing "),e.TgZ(34,"code")(35,"a",4),e._uU(36,"KpiDescriptionConfigurationComponent"),e.qZA()(),e._uU(37," with a custom one. Our version will insert custom content where there would normally be a tile color selection dropdown. "),e.qZA(),e.TgZ(38,"li"),e._uU(39," Ensure that the following modules are included in the imports of the custom configurator section component's parent module: "),e.TgZ(40,"code")(41,"a",5),e._uU(42,"NuiDashboardConfiguratorModule"),e.qZA()(),e._uU(43,", "),e.TgZ(44,"code"),e._uU(45,"NuiFormFieldModule"),e.qZA(),e._uU(46,", "),e.TgZ(47,"code"),e._uU(48,"NuiTextboxModule"),e.qZA(),e._uU(49,", "),e.TgZ(50,"code"),e._uU(51,"NuiIconModule"),e.qZA(),e._uU(52,", and Angular's "),e.TgZ(53,"code")(54,"a",6),e._uU(55,"ReactiveFormsModule"),e.qZA()(),e._uU(56,". "),e.qZA(),e.TgZ(57,"li"),e._uU(58," Add the custom configurator section component class name to the declarations of the module in which it's implemented. In this example, the class name is "),e.TgZ(59,"code"),e._uU(60,"CustomKpiDescriptionConfigurationComponent"),e.qZA()(),e.TgZ(61,"li"),e._uU(62," Prepare the dashboard framework to use our custom configurator section by doing the following: "),e.TgZ(63,"ol")(64,"li"),e._uU(65," Use the "),e.TgZ(66,"code")(67,"a",1),e._uU(68,"WidgetTypesService"),e.qZA()(),e._uU(69," to replace the existing configurator section component with our custom one. "),e.qZA(),e.TgZ(70,"li"),e._uU(71," Register the custom configurator section component using the "),e.TgZ(72,"code")(73,"a",2),e._uU(74,"ComponentRegistryService"),e.qZA()(),e._uU(75," to make it available for late load by the dashboard framework. "),e.qZA()(),e.TgZ(76,"nui-message",7)(77,"strong"),e._uU(78,"Note:"),e.qZA(),e._uU(79," In this tutorial, the above two steps are performed in the component's "),e.TgZ(80,"code"),e._uU(81,"ngOnInit"),e.qZA(),e._uU(82,". But, in a real-world app, widget type modifications and component registrations like this may make more sense in a parent module's constructor. Moving framework initialization procedures such as these to a higher level in an app's hierarchy ensures that multiple dashboard instances within a common parent module have access to the same modifications. "),e.qZA()(),e.TgZ(83,"li"),e._uU(84," At this point you should be able to open the widget editor using the Edit button in the menu at the top-right corner of the widget. Once the editor is open, expand the KPI tile's Description section. The custom component we created should now be displayed in that section of the editor. "),e.qZA(),e.TgZ(85,"li"),e._uU(86," In case you have custom content, like formatters etc., and you use "),e.TgZ(87,"code"),e._uU(88,"nui-select-v2"),e.qZA(),e._uU(89," and "),e.TgZ(90,"code"),e._uU(91,"nui-combobox-v2"),e.qZA(),e._uU(92," components, it is possible that in case of large lists the component overlay may go beyond the configurator heading due to its high z-index. To fix this, use the "),e.TgZ(93,"code"),e._uU(94,"nui-select-v2"),e.qZA(),e._uU(95," and "),e.TgZ(96,"code"),e._uU(97,"nui-combobox-v2"),e.qZA(),e._uU(98," components input "),e.TgZ(99,"code"),e._uU(100,"popupViewportMargin"),e.qZA(),e._uU(101," and pass the height of the configurator heading into it. You can get the height of the configurator heading by simply injecting the "),e.TgZ(102,"code")(103,"a",8),e._uU(104,"ConfiguratorHeadingService"),e.qZA()(),e._uU(105," and use its "),e.TgZ(106,"code"),e._uU(107,"height$"),e.qZA(),e._uU(108," observable and async pipe to instantly get the current height of the configurator heading. "),e.qZA()(),e.TgZ(109,"nui-message",7),e._uU(110," For more detailed information about implementing a custom configurator section, take a look at the inline comments under the source expander of the following example.\n"),e.qZA(),e.TgZ(111,"nui-example-wrapper",9),e._UZ(112,"custom-configurator-section-example"),e.qZA()),2&t&&(e.xp6(76),e.Q6J("allowDismiss",!1),e.xp6(33),e.Q6J("allowDismiss",!1))},dependencies:[s.hD2,s.qqZ,M],encapsulation:2}),o})(),data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}},{path:"example",component:M,data:{srlc:{hideIndicator:!0}}}];let q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:s.V3$,useValue:(0,b.S)("configurator-section")}],imports:[C.ez,d.UX,p.JF,u.Pi,u.Qpk,s.vvu,s.C6o,s.Ts3,s.gkT,s.cJ5,s.YMY,s.Az_,R.Bz.forChild(k)]}),o})()}}]);