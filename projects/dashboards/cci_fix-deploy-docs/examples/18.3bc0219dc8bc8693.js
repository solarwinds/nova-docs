(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[18],{92120:(ne,B,l)=>{"use strict";l.d(B,{b:()=>d});var r=l(5e3);let d=(()=>{class O{}return O.lateLoadKey="PreviewOverlayComponent",O.\u0275fac=function(S){return new(S||O)},O.\u0275cmp=r.Xpm({type:O,selectors:[["nui-preview-overlay"]],decls:2,vars:0,consts:function(){let e;return e=$localize`:␟5c3a86dc3add2a84bd6fe948cb6fe0c451fcce21␟7864955898524965693: This is a non-interactive widget preview `,[[1,"nui-text-label","content"],e]},template:function(S,R){1&S&&(r.TgZ(0,"div",0),r.SDv(1,1),r.qZA())},styles:["[_nghost-%COMP%]{opacity:0;transition-property:opacity;transition-duration:.5s;position:absolute;z-index:1060;background-color:var(--nui-color-bg-content_popover,#fff);height:100%;width:100%}[_nghost-%COMP%]:hover{opacity:.96}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:center;align-items:center;position:absolute;top:0;right:2px;bottom:2px;left:2px;cursor:not-allowed}"]}),O})()},34575:(ne,B,l)=>{"use strict";l.d(B,{M:()=>b});var r=l(5e3),d=l(33748),O=l(69754),e=l.n(O),S=l(30652),R=l(53450),N=l(25878);const C={displayGrid:d.KY.None,gridType:d.tQ.VerticalFixed,compactType:d.RU.CompactUp,margin:15,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,mobileBreakpoint:640,minCols:12,maxCols:12,minRows:12,fixedRowHeight:44,minItemArea:1,defaultItemCols:6,defaultItemRows:6,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,scrollSensitivity:10,scrollSpeed:20,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{enabled:!1,ignoreContent:!0,dragHandleClass:"nui-dashboard__widget--drag-handle"},resizable:{enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0}},swap:!1,pushItems:!0,pushResizeItems:!0,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1};var p=l(69808),v=l(16041),g=l(43046),G=l(92474);function y(A,W){if(1&A){const D=r.EpF();r.TgZ(0,"nui-widget",5),r.NdJ("widgetChange",function(h){return r.CHM(D),r.oxw(2).onWidgetChange(h)}),r.qZA()}if(2&A){const D=r.oxw().$implicit;r.Q6J("widget",D.value),r.uIk("widget-id",D.key)("widget-type",D.value.type)}}function F(A,W){if(1&A&&(r.TgZ(0,"gridster-item",3),r.YNc(1,y,1,3,"nui-widget",4),r.qZA()),2&A){const D=W.$implicit,T=r.oxw(),h=r.MAs(4);r.Q6J("item",T.dashboard.positions[D.key])("nuiGridsterItemWidgetId",D.key),r.xp6(1),r.Q6J("ngIf",T.shouldWidgetRender(D.key))("ngIfElse",h)}}function w(A,W){1&A&&(r.TgZ(0,"div",6),r._UZ(1,"nui-loading",7),r.qZA()),2&A&&(r.xp6(1),r.Q6J("active",!0))}let b=(()=>{class A{constructor(D){this.eventBus=D,this.editMode=!1,this.gridsterConfigChange=new r.vpe,this.dashboardChange=new r.vpe,this.gridsterItemsVisibilityMap={},this.orderWidgets=(T,h)=>{const L=this.dashboard.positions[T.key],U=this.dashboard.positions[h.key];return L.y-U.y||L.x-U.x},this.trackByFn=(T,h)=>h.key,this.updateWidgetPosition=(T,h)=>{const L=String(h.widgetId),U=(0,S.zdu)(this.dashboard,"positions."+L,T);this.dashboardChange.emit(U),this.eventBus.getStream(R.Xi).next({widgetId:L,payload:T})},this.emitWidgetResize=(T,h)=>{const L=h.widgetId;this.eventBus.getStream(R.pV).next({widgetId:L,payload:{widgetId:L,height:h.height,width:h.width}})}}get dashboard(){return this.dashboardBuffer||this._dashboard}set dashboard(D){this._dashboard=D,this.dashboardBuffer=null}get hostClass(){return!0}ngAfterViewInit(){setTimeout(()=>this.calculateWidgetsVisibility())}onGridsterScroll(){this.calculateWidgetsVisibility()}ngOnChanges(D){var T,h,L;if(D.gridsterConfig){if(D.gridsterConfig.isFirstChange()){const U=e()(this.gridsterConfig||{},C);this.hookEvent(U,"itemChangeCallback",this.updateWidgetPosition),this.hookEvent(U,"itemResizeCallback",this.emitWidgetResize),this.gridsterConfigChange.emit(U)}(null===(T=this.gridsterConfig)||void 0===T?void 0:T.api)&&(null===(L=(h=this.gridsterConfig.api).optionsChanged)||void 0===L||L.call(h))}if(D.editMode){if(!this.gridsterConfig.resizable)throw new Error("Gridster's resizable prop is undefined");if(this.gridsterConfig.resizable.enabled=this.editMode,!this.gridsterConfig.draggable)throw new Error("Gridster's draggable prop is undefined");this.gridsterConfig.draggable.enabled=this.editMode,this.gridsterConfigChange.emit(Object.assign({},this.gridsterConfig)),this.eventBus.getStream(R.N9).next({payload:this.editMode})}}onWidgetChange(D){!this.dashboard.widgets[D.id]||this.updateWidget(D)}updateWidget(D){var T,h,L,U,X;let q=this.dashboard;if(!this.dashboard.positions[D.id]&&(null===(T=this.gridsterConfig)||void 0===T?void 0:T.api)){const oe=null===(L=(h=this.gridsterConfig.api).getFirstPossiblePosition)||void 0===L?void 0:L.call(h,{x:0,y:0,rows:null===(U=this.gridsterConfig)||void 0===U?void 0:U.defaultItemRows,cols:null===(X=this.gridsterConfig)||void 0===X?void 0:X.defaultItemCols});q=(0,S.zdu)(q,`positions.${D.id}`,oe)}q=(0,S.zdu)(q,`widgets.${D.id}`,D),this.dashboardBuffer=q,this.dashboardChange.emit(q)}removeWidget(D,T=!0){let h=this.dashboard;if(!h.widgets[D])return;const L=Object.assign({},h.widgets);if(delete L[D],h=(0,S.zdu)(h,"widgets",L),T){const U=Object.assign({},h.positions);delete U[D],h=(0,S.zdu)(h,"positions",U)}this.dashboardChange.emit(h)}shouldWidgetRender(D){var T;return!(null===(T=this.belowFoldLazyLoadingConfig)||void 0===T?void 0:T.enabled)||this.gridsterItemsVisibilityMap[D]}hookEvent(D,T,h){const L=D[T];D[T]=(U,X)=>{h(U,X),L&&L(U,X)}}calculateWidgetsVisibility(){var D;if(!(null===(D=this.belowFoldLazyLoadingConfig)||void 0===D?void 0:D.enabled))return;const T=this.gridster.el.getBoundingClientRect();this.gridsterItemsVisibilityMap=this.gridsterItems.reduce((h,L)=>{var U;const{el:X}=L,q=L.widgetId;if(!(null===(U=this.belowFoldLazyLoadingConfig.configuration)||void 0===U?void 0:U.reloadWidgetsOnScroll)&&h[q])return h;const oe=X.getBoundingClientRect();return h[q]=(oe.top>T.top&&oe.top<T.bottom||oe.bottom>T.top&&oe.bottom<T.bottom)&&(oe.left>T.left&&oe.left<T.right||oe.right>T.left&&oe.right<T.right),h},this.gridsterItemsVisibilityMap)}}return A.\u0275fac=function(D){return new(D||A)(r.Y36(N.Bc))},A.\u0275cmp=r.Xpm({type:A,selectors:[["nui-dashboard"]],viewQuery:function(D,T){if(1&D&&(r.Gf(d.sm,5),r.Gf(d.IM,5)),2&D){let h;r.iGM(h=r.CRH())&&(T.gridster=h.first),r.iGM(h=r.CRH())&&(T.gridsterItems=h)}},hostVars:2,hostBindings:function(D,T){2&D&&r.ekj("nui-dashboard",T.hostClass)},inputs:{gridsterConfig:"gridsterConfig",dashboard:"dashboard",editMode:"editMode",belowFoldLazyLoadingConfig:"belowFoldLazyLoadingConfig"},outputs:{gridsterConfigChange:"gridsterConfigChange",dashboardChange:"dashboardChange"},features:[r._Bn([{provide:N.Bc,useClass:S.Ndp}]),r.TTD],decls:5,vars:6,consts:[[1,"nui-dashboard__gridster",3,"options","scroll"],["class","nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId",4,"ngFor","ngForOf","ngForTrackBy"],["emptyWidgetTpl",""],[1,"nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId"],["class","w-100 h-100 d-block",3,"widget","widgetChange",4,"ngIf","ngIfElse"],[1,"w-100","h-100","d-block",3,"widget","widgetChange"],[1,"w-100","h-100","d-block"],[3,"active"]],template:function(D,T){1&D&&(r.TgZ(0,"gridster",0),r.NdJ("scroll",function(){return T.onGridsterScroll()}),r.YNc(1,F,2,4,"gridster-item",1),r.ALo(2,"keyvalue"),r.qZA(),r.YNc(3,w,2,1,"ng-template",null,2,r.W1O)),2&D&&(r.Q6J("options",T.gridsterConfig),r.xp6(1),r.Q6J("ngForOf",r.xi3(2,3,T.dashboard.widgets,T.orderWidgets))("ngForTrackBy",T.trackByFn))},directives:[d.sm,p.sg,d.IM,v.K,p.O5,g.B,G.N],pipes:[p.Nd],styles:['.nui-dashboard__gridster{background-color:var(--nui-color-bg-workspace,#f0f0f0)}.nui-dashboard__gridster .gridster-preview{border-width:4px;border-style:solid;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.nui-dashboard__gridster .gridster-preview:before{background-color:var(--nui-color-selected-contrast,#00c4d2);border-radius:50%;content:"";display:block;height:40px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:40px;z-index:1}.nui-dashboard__gridster .gridster-preview:after{color:var(--nui-color-icon-light,#fff);content:"+";display:block;font-size:19px;font-weight:700;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);z-index:2}.nui-dashboard__gridster-item{box-shadow:0 0 5px #999;box-shadow:0 0 var(--nui-space-xs, 5px) var(--nui-color-line-dark, #999999);background-color:var(--nui-color-bg-light,#fff)}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler{border-bottom-color:#00c4d2;border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);margin:0;z-index:2000}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler.handle-se{border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);right:2px;bottom:2px}.mobile .nui-dashboard__gridster-item.nui-dashboard__gridster-item{height:auto!important}\n'],encapsulation:2}),A})()},92474:(ne,B,l)=>{"use strict";l.d(B,{N:()=>e});var r=l(41777),d=l(5e3),O=l(30652);let e=(()=>{class S{constructor(N){this.changeDetector=N,this.active=!1}}return S.lateLoadKey="LoadingComponent",S.\u0275fac=function(N){return new(N||S)(d.Y36(d.sBO))},S.\u0275cmp=d.Xpm({type:S,selectors:[["nui-loading"]],inputs:{active:"active"},decls:1,vars:2,consts:[["compactMode","true",3,"show"]],template:function(N,C){1&N&&(d.TgZ(0,"nui-progress",0),d.NdJ("@animate.start",function(v){return v.element.style.display="block"})("@animate.done",function(v){return v.element.style.display=v.toState?"block":"none"}),d.qZA()),2&N&&d.Q6J("@animate",C.active)("show",!0)},directives:[O.t15],styles:["[_nghost-%COMP%]{height:5px;flex-shrink:0}"],data:{animation:[(0,r.X$)("animate",[(0,r.SB)("true",(0,r.oB)({opacity:1})),(0,r.SB)("false",(0,r.oB)({opacity:0})),(0,r.eR)("false <=> true",(0,r.jt)(500))])]}}),S})()},26365:(ne,B,l)=>{"use strict";l.d(B,{i:()=>v});var r=l(34235),d=l.n(r),O=l(77579),e=l(82722),S=l(81466),R=l(42339),N=l(53450),C=l(25878),p=l(5e3);let v=(()=>{class g{constructor(y,F,w){this.eventBus=y,this.dataSource=F,this.pizzagnaService=w,this.destroy$=new O.x,this.dataSource&&(this.setupRefreshListener(),this.dataSource.outputsSubject.pipe((0,e.R)(this.destroy$)).subscribe(b=>this.handleDataSourceUpdate(b)),this.dataSource.busy&&this.dataSource.busy.pipe((0,e.R)(this.destroy$)).subscribe(b=>{this.eventBus.getStream(N.QD).next({payload:{componentId:this.componentId,busy:b}})}))}setupRefreshListener(){this.eventBus.getStream(N.RG).pipe((0,e.R)(this.destroy$)).subscribe(()=>this.handleRefresh())}handleRefresh(){this.eventBus.getStream(N.R1).next({}),this.dataSource.applyFilters()}handleDataSourceUpdate(y){this.lastValue=d()(null==y?void 0:y.result)?y:null==y?void 0:y.result,this.updateOutput(this.lastValue),this.eventBus.getStream(S.PF).next({payload:Object.assign({componentId:this.componentId},y)})}ngOnDestroy(){this.updateOutput(void 0);const y={payload:{componentId:this.componentId}};this.eventBus.getStream(S.yX).next(y);const F={payload:{componentId:this.componentId,busy:!1}};this.eventBus.getStream(N.QD).next(F),this.destroy$.next(),this.destroy$.complete()}updateConfiguration(y){y.componentId&&(this.componentId=y.componentId),this.updateAdapterProperties(y),this.updateDataSourceProperties(y),void 0!==this.lastValue&&this.updateOutput(this.lastValue)}updateAdapterProperties(y){this.propertyPath=y.propertyPath}updateDataSourceProperties(y){var F,w;const b=null===(F=null==y?void 0:y.dataSource)||void 0===F?void 0:F.properties;if(this.dataSourceConfiguration!==b){this.dataSourceConfiguration=b;const A=this.dataSource;(null==A?void 0:A.updateConfiguration)&&A.updateConfiguration(null===(w=y.dataSource)||void 0===w?void 0:w.properties),this.eventBus.getStream(N.RG).next({})}void 0===this.dataSourceConfiguration&&void 0===b&&setTimeout(()=>this.eventBus.getStream(N.RG).next({}))}updateOutput(y){this.pizzagnaService.setProperty({pizzagnaKey:C.xW.Data,componentId:this.componentId,propertyPath:[this.propertyPath]},this.processOutput(y))}processOutput(y){return y}}return g.\u0275fac=function(y){return new(y||g)(p.LFG(C.nY),p.LFG(C.Fk,8),p.LFG(R.p))},g.\u0275prov=p.Yz7({token:g,factory:g.\u0275fac}),g})()},50271:(ne,B,l)=>{"use strict";l.d(B,{I:()=>e});var r=l(53450),d=l(25878),O=l(5e3);let e=(()=>{class S{constructor(N){this.eventBus=N,this.initializeSubscriptions()}updateConfiguration(N){this.properties=N}initializeSubscriptions(){this.eventBus.getStream(r.b1).subscribe(N=>{var C,p,v;(!(null===(C=this.properties)||void 0===C?void 0:C.interactionType)||(null===(p=this.properties)||void 0===p?void 0:p.interactionType)===(null===(v=N.payload)||void 0===v?void 0:v.interactionType))&&this.handleInteraction(N.payload)})}}return S.\u0275fac=function(N){return new(N||S)(O.LFG(d.nY))},S.\u0275prov=O.Yz7({token:S,factory:S.\u0275fac}),S})()},38046:(ne,B,l)=>{"use strict";l.d(B,{O:()=>N});var r=l(25878),d=l(50271),O=l(5e3),e=l(30652),S=l(99567);Window;let N=(()=>{class C extends d.I{constructor(v,g,G,y){super(v),this.window=g,this.logger=G,this.urlInteractionService=y}handleInteraction(v){var g;if(!(null===(g=this.properties)||void 0===g?void 0:g.url))return void this.logger.warn("The target url has not been defined.");const G=this.urlInteractionService.template(this.properties.url,{data:v.data});!G||(this.properties.newWindow?this.window.open(G):this.window.location.href=G)}}return C.\u0275fac=function(v){return new(v||C)(O.LFG(r.nY),O.LFG("windowObject"),O.LFG(e.mQy),O.LFG(S.v))},C.\u0275prov=O.Yz7({token:C,factory:C.\u0275fac}),C})()},61455:(ne,B,l)=>{"use strict";l.d(B,{g:()=>e});var r=l(61135),d=l(92221),O=l(5e3);let e=(()=>{class S{constructor(){this._refreshRateSeconds=d.Q,this.refreshRateSeconds$=new r.X(this.refreshRateSeconds)}get refreshRateSeconds(){return this._refreshRateSeconds}set refreshRateSeconds(N){this._refreshRateSeconds=N,this.refreshRateSeconds$.next(this._refreshRateSeconds)}}return S.\u0275fac=function(N){return new(N||S)},S.\u0275prov=O.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},97674:(ne,B,l)=>{"use strict";l.d(B,{q:()=>C});var r=l(77579),d=l(82722),O=l(53450),e=l(25878),S=l(92221),R=l(5e3),N=l(61455);let C=(()=>{class p{constructor(g,G,y){this.eventBus=g,this.ngZone=G,this.refresherSettings=y,this.enabled=!0,this.overrideDefaultSettings=!0,this.interval=S.Q,this.eventDef=O.RG,this.destroy$=new r.x,this.refresherSettings.refreshRateSeconds$.pipe((0,d.R)(this.destroy$)).subscribe(F=>{this.overrideDefaultSettings||this.initializeInterval()})}updateConfiguration(g){var G,y,F,w;this.interval=null!==(G=g.interval)&&void 0!==G?G:S.Q,this.enabled=null===(y=g.enabled)||void 0===y||y,this.overrideDefaultSettings=null===(F=g.overrideDefaultSettings)||void 0===F||F,this.eventDef=null!==(w=g.event)&&void 0!==w?w:O.RG,this.initializeInterval()}ngOnDestroy(){this.clearInterval(),this.destroy$.next(),this.destroy$.complete()}initializeInterval(){this.clearInterval(),!(void 0===this.interval||this.getInterval()<=0||!1===this.enabled)&&this.ngZone.runOutsideAngular(()=>{this.intervalRef=setInterval(()=>{this.ngZone.run(()=>{this.performAction()})},1e3*this.getInterval())})}performAction(){this.eventBus.getStream(this.eventDef).next({})}getInterval(){return this.overrideDefaultSettings?this.interval:this.refresherSettings.refreshRateSeconds}clearInterval(){void 0!==this.intervalRef&&(clearInterval(this.intervalRef),this.intervalRef=void 0)}}return p.\u0275fac=function(g){return new(g||p)(R.LFG(e.nY),R.LFG(R.R0b),R.LFG(N.g))},p.\u0275prov=R.Yz7({token:p,factory:p.\u0275fac}),p})()},42296:(ne,B,l)=>{"use strict";l.d(B,{Y:()=>q});var r=l(5e3),d=l(68306),O=l(38421);const{isArray:e}=Array;var R=l(60515),N=l(25403),C=l(63269);var v=l(56451),g=l(63900),G=l(68675),y=l(18505),F=l(54004),w=l(78372),b=l(82722),A=l(30652),W=l(42339),D=l(53450),T=l(25878),h=l(26365),X=function(oe,ae){return function(_e,te){ae(_e,te,oe)}};let q=class extends h.i{constructor(ae,_e,te,se){super(ae,_e,te),this.virtualViewport=se}setupRefreshListener(){const ae=function p(...oe){const ae=(0,C.jO)(oe),_e=function S(oe){return 1===oe.length&&e(oe[0])?oe[0]:oe}(oe);return _e.length?new d.y(te=>{let se=_e.map(()=>[]),J=_e.map(()=>!1);te.add(()=>{se=J=null});for(let j=0;!te.closed&&j<_e.length;j++)(0,O.Xf)(_e[j]).subscribe((0,N.x)(te,le=>{if(se[j].push(le),se.every(ie=>ie.length)){const ie=se.map(fe=>fe.shift());te.next(ae?ae(...ie):ie),se.some((fe,ve)=>!fe.length&&J[ve])&&te.complete()}},()=>{J[j]=!0,!se[j].length&&te.complete()}));return()=>{se=J=null}}):R.E}(this.eventBus.getStream(D.j7),this.eventBus.getStream(D.RG)).pipe((0,g.w)(()=>this.eventBus.getStream(D.RG).pipe((0,G.O)(void 0))),(0,y.b)(()=>this.virtualViewport.reset({emitFirstPage:!1})),(0,F.U)(()=>{}));(0,v.T)(ae,this.eventBus.getStream(D.df)).pipe((0,w.b)(10),(0,y.b)(()=>this.handleRefresh()),(0,b.R)(this.destroy$)).subscribe()}updateAdapterProperties(ae){this.dataPath=ae.dataPath,this.dataFieldsPath=ae.dataFieldsPath,this.totalItemsPath=ae.totalItemsPath}updateOutput(ae){var _e,te;const se=null===(_e=null==ae?void 0:ae.paginator)||void 0===_e?void 0:_e.total,J=null===(te=null==ae?void 0:ae.repeat)||void 0===te?void 0:te.itemsSource,j=null==ae?void 0:ae.dataFields;this.pizzagnaService.setProperty({pizzagnaKey:T.xW.Data,componentId:this.componentId,propertyPath:[this.totalItemsPath]},se),this.pizzagnaService.setProperty({pizzagnaKey:T.xW.Data,componentId:this.componentId,propertyPath:[this.dataPath]},J),this.pizzagnaService.setProperty({pizzagnaKey:T.xW.Data,componentId:this.componentId,propertyPath:[this.dataFieldsPath]},j)}};q=function(oe,ae,_e,te){var j,se=arguments.length,J=se<3?ae:null===te?te=Object.getOwnPropertyDescriptor(ae,_e):te;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)J=Reflect.decorate(oe,ae,_e,te);else for(var le=oe.length-1;le>=0;le--)(j=oe[le])&&(J=(se<3?j(J):se>3?j(ae,_e,J):j(ae,_e))||J);return se>3&&J&&Object.defineProperty(ae,_e,J),J}([X(0,(0,r.tBr)(T.nY)),X(1,(0,r.tBr)(T.Fk)),X(3,(0,r.FiY)()),function(oe,ae){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",ae)}(0,[A.Ndp,Object,W.p,A.zCP])],q)},10948:(ne,B,l)=>{"use strict";l.d(B,{f:()=>g});var r=l(5e3),d=l(11094),O=l.n(d),e=l(30652),S=l(42339),R=l(25878),N=l(26365),v=function(G,y){return function(F,w){y(F,w,G)}};let g=class extends N.i{constructor(y,F,w){super(y,F,w),this.seriesIndex=[]}updateConfiguration(y){this.seriesIndex=O()(y.series),super.updateConfiguration(y)}processOutput(y){return y&&Object.assign(Object.assign({},y),{series:this.buildSeriesSet(null==y?void 0:y.series)})}buildSeriesSet(y){return y?y.filter(F=>this.seriesIndex.find(w=>w.selectedSeriesId===F.id)).map(F=>{var w;return{id:F.id,data:F.data,link:F.link,secondaryLink:F.secondaryLink,legendDescriptionPrimary:null===(w=this.seriesIndex.find(b=>b.selectedSeriesId===F.id))||void 0===w?void 0:w.label,legendDescriptionSecondary:F.description}}):[]}};g=function(G,y,F,w){var W,b=arguments.length,A=b<3?y:null===w?w=Object.getOwnPropertyDescriptor(y,F):w;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(G,y,F,w);else for(var D=G.length-1;D>=0;D--)(W=G[D])&&(A=(b<3?W(A):b>3?W(y,F,A):W(y,F))||A);return b>3&&A&&Object.defineProperty(y,F,A),A}([v(0,(0,r.tBr)(R.nY)),v(1,(0,r.tBr)(R.Fk)),function(G,y){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",y)}(0,[e.Ndp,Object,S.p])],g)},92221:(ne,B,l)=>{"use strict";l.d(B,{Q:()=>r});const r=300},69769:(ne,B,l)=>{"use strict";l.d(B,{q:()=>d});var r=l(5e3);let d=(()=>{class O{}return O.lateLoadKey="TemplateLoadErrorComponent",O.\u0275fac=function(S){return new(S||O)},O.\u0275cmp=r.Xpm({type:O,selectors:[["ng-component"]],decls:3,vars:0,template:function(S,R){1&S&&(r.TgZ(0,"code")(1,"pre"),r._uU(2,"Template load error!"),r.qZA()())},encapsulation:2}),O})()},43046:(ne,B,l)=>{"use strict";l.d(B,{B:()=>R});var r=l(5e3),d=l(53450),O=l(63776),e=l(32656),S=l(87686);let R=(()=>{class N{constructor(p,v){this.widgetConfigurationService=p,this.widgetTypesService=v,this.widgetChange=new r.vpe,this.rootNode=d.XM}ngOnChanges(p){var v,g;if(p.widget){const G=this.widget.type;if((p.widget.previousValue&&p.widget.previousValue.type)!==G){const F=this.widgetTypesService.getWidgetType(G,this.widget.version);this.rootNode=(null===(g=null===(v=null==F?void 0:F.paths)||void 0===v?void 0:v.widget)||void 0===g?void 0:g.root)||d.XM}this.widgetConfigurationService.updateWidget(this.widget)}}onPizzagnaChange(p){this.widgetChange.emit(Object.assign(Object.assign({},this.widget),{pizzagna:p}))}}return N.\u0275fac=function(p){return new(p||N)(r.Y36(O.I),r.Y36(e.x))},N.\u0275cmp=r.Xpm({type:N,selectors:[["nui-widget"]],hostAttrs:[1,"nui-widget"],inputs:{widget:"widget"},outputs:{widgetChange:"widgetChange"},features:[r._Bn([O.I]),r.TTD],decls:1,vars:2,consts:[[3,"rootNode","pizzagna","pizzagnaChange"]],template:function(p,v){1&p&&(r.TgZ(0,"nui-pizzagna",0),r.NdJ("pizzagnaChange",function(G){return v.onPizzagnaChange(G)}),r.qZA()),2&p&&r.Q6J("rootNode",v.rootNode)("pizzagna",v.widget.pizzagna)},directives:[S.R],styles:[""]}),N})()},69155:(ne,B,l)=>{"use strict";l.d(B,{n:()=>y});var r=l(5e3),d=l(77579),O=l(30652),e=l(87686),S=l(32656),R=l(45122),N=l(92120),C=l(69808),p=l(47429),v=l(73193);const g=["previewPizzagnaComponent"];function G(F,w){if(1&F){const b=r.EpF();r.TgZ(0,"nui-pizzagna",8,9),r.NdJ("pizzagnaChange",function(W){return r.CHM(b),r.oxw().onPizzagnaChange(W)}),r.ALo(2,"nuiPizzagnaRoot"),r.qZA()}if(2&F){const b=r.oxw();r.Q6J("rootNode",r.xi3(2,2,b.previewWidget,"widget"))("pizzagna",null==b.previewWidget?null:b.previewWidget.pizzagna)}}let y=(()=>{class F{constructor(b,A){this.widgetTypesService=b,this.changeDetector=A,this.result=new r.vpe,this.formPortalAttached=new r.vpe,this.submitError=new d.x,this.destroy$=new d.x}ngOnInit(){this.previewWidget||(this.previewWidget={id:null,type:"previewPlaceholder",pizzagna:this.widgetTypesService.getWidgetType("previewPlaceholder").widget})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleSubmitError(){this.submitError.next()}onFormPortalAttached(b){this.formPortalAttached.emit(b)}updateWidget(b){this.previewWidget=b,this.changeDetector.markForCheck()}formCancel(){this.result.next(null)}formSubmit(){this.result.next(this.previewWidget)}onPizzagnaChange(b){this.previewWidget&&(this.previewWidget.pizzagna=b)}}return F.lateLoadKey="ConfiguratorComponent",F.\u0275fac=function(b){return new(b||F)(r.Y36(S.x),r.Y36(r.sBO))},F.\u0275cmp=r.Xpm({type:F,selectors:[["nui-configurator"]],viewQuery:function(b,A){if(1&b&&r.Gf(g,7),2&b){let W;r.iGM(W=r.CRH())&&(A.previewPizzagnaComponent=W.first)}},hostAttrs:[1,"nui-configurator"],inputs:{formPortal:"formPortal",previewWidget:"previewWidget"},outputs:{result:"result",formPortalAttached:"formPortalAttached"},features:[r._Bn([R.m,{provide:O.nse,useValue:".nui-dashwiz-step--active .configurator-scrollable"}])],decls:9,vars:4,consts:[[1,"nui-configurator__backdrop"],[1,"nui-configurator__content"],["orientation","right","paneSize","30vw","paneMinSize","20vw","paneMaxSize","80vw","isResizable","true",1,"h-100",3,"headerPadding","sidePaneBodyPadding"],[1,"nui-configurator__preview","d-flex","align-items-center","justify-content-center"],[1,"nui-configurator__preview-area"],["class","flex-grow-1 w-100",3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],["nuiPanelEmbeddedBody","",1,"nui-configurator__body"],[3,"cdkPortalOutlet","attached"],[1,"flex-grow-1","w-100",3,"rootNode","pizzagna","pizzagnaChange"],["previewPizzagnaComponent",""]],template:function(b,A){1&b&&(r._UZ(0,"div",0),r.TgZ(1,"div",1)(2,"nui-panel",2)(3,"div",3)(4,"div",4),r._UZ(5,"nui-preview-overlay"),r.YNc(6,G,3,5,"nui-pizzagna",5),r.qZA()(),r.TgZ(7,"div",6),r.ynx(8,7),r.NdJ("attached",function(D){return A.onFormPortalAttached(D)}),r.BQk(),r.qZA()()()),2&b&&(r.xp6(2),r.Q6J("headerPadding",!1)("sidePaneBodyPadding",!1),r.xp6(4),r.Q6J("ngIf",null==A.previewWidget?null:A.previewWidget.pizzagna),r.xp6(2),r.Q6J("cdkPortalOutlet",A.formPortal))},directives:[O.yXm,N.b,C.O5,e.R,p.Pl],pipes:[v.l],styles:[".nui-configurator__backdrop[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:var(--nui-color-overlay-modal,rgba(17, 17, 17, .5));opacity:.5;filter:alpha(opacity=50)}.nui-configurator__content[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040}.nui-configurator__heading[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #d9d9d9}.nui-configurator__body[_ngcontent-%COMP%]{overflow-anchor:none;height:100vh}.nui-configurator__preview[_ngcontent-%COMP%]{height:100vh}.nui-configurator__preview-area[_ngcontent-%COMP%]{display:flex;width:80%;position:relative;background-color:var(--nui-color-bg-content_popover,#fff);border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);margin:auto;min-height:40vh;max-height:80vh;overflow:hidden}"]}),F})()},16134:(ne,B,l)=>{"use strict";l.d(B,{C:()=>N});var r=l(5e3),d=l(30652),O=l(69808);function e(C,p){if(1&C&&r._UZ(0,"nui-icon",4),2&C){const v=r.oxw(2);r.Q6J("icon",null==v.data?null:v.data.value)}}function S(C,p){if(1&C&&(r.TgZ(0,"div",2),r.YNc(1,e,1,1,"nui-icon",3),r.qZA()),2&C){const v=r.oxw(),g=r.MAs(2);r.xp6(1),r.Q6J("ngIf",v.iconFound)("ngIfElse",g)}}function R(C,p){1&C&&r._UZ(0,"nui-icon",5)}let N=(()=>{class C{constructor(v,g){this.changeDetector=v,this.iconService=g,this.isValid=!1,this.iconFound=!0}ngOnChanges(){var v,g;this.isValid=!!(null===(v=this.data)||void 0===v?void 0:v.value),this.iconFound=!!this.iconService.getIconData(null===(g=this.data)||void 0===g?void 0:g.value)}}return C.lateLoadKey="IconFormatterComponent",C.\u0275fac=function(v){return new(v||C)(r.Y36(r.sBO),r.Y36(d.C6t))},C.\u0275cmp=r.Xpm({type:C,selectors:[["ng-component"]],inputs:{data:"data"},features:[r.TTD],decls:3,vars:1,consts:function(){let p;return p=$localize`:␟8cf3dbb8fe1e2fa079d4c2167cd4c81cdcfe89c2␟7731831112083433420:Unknown icon`,[["class","d-flex align-items-center justify-content-center",4,"ngIf"],["iconNotFound",""],[1,"d-flex","align-items-center","justify-content-center"],[3,"icon",4,"ngIf","ngIfElse"],[3,"icon"],["title",p,"iconColor","disabled-gray","icon","help"]]},template:function(v,g){1&v&&(r.YNc(0,S,2,2,"div",0),r.YNc(1,R,1,0,"ng-template",null,1,r.W1O)),2&v&&r.Q6J("ngIf",g.isValid)},directives:[O.O5,d.oJW],encapsulation:2}),C})()},61621:(ne,B,l)=>{"use strict";l.d(B,{s:()=>e});var r=l(5e3),d=l(69808);function O(S,R){if(1&S&&(r.TgZ(0,"a",2),r._uU(1),r.qZA()),2&S){const N=r.oxw();r.Q6J("href",null==N.data?null:N.data.link,r.LSH)("target",N.targetSelf?"_self":"_blank"),r.xp6(1),r.hij(" ",null==N.data?null:N.data.value," ")}}let e=(()=>{class S{constructor(N){this.changeDetector=N,this.isValid=!1}ngOnChanges(N){this.isValid=Boolean(this.data&&this.data.value&&this.data.link)}}return S.lateLoadKey="LinkFormatterComponent",S.\u0275fac=function(N){return new(N||S)(r.Y36(r.sBO))},S.\u0275cmp=r.Xpm({type:S,selectors:[["ng-component"]],inputs:{data:"data",targetSelf:"targetSelf"},features:[r.TTD],decls:2,vars:1,consts:[[1,"link-formatter-container"],["class","nui-text-ellipsis",3,"href","target",4,"ngIf"],[1,"nui-text-ellipsis",3,"href","target"]],template:function(N,C){1&N&&(r.TgZ(0,"div",0),r.YNc(1,O,2,3,"a",1),r.qZA()),2&N&&(r.xp6(1),r.Q6J("ngIf",C.isValid))},directives:[d.O5],styles:[".link-formatter-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}"]}),S})()},14366:(ne,B,l)=>{"use strict";l.d(B,{a:()=>d});var r=l(5e3);let d=(()=>{class O{constructor(S){this.changeDetector=S}}return O.lateLoadKey="RawFormatterComponent",O.\u0275fac=function(S){return new(S||O)(r.Y36(r.sBO))},O.\u0275cmp=r.Xpm({type:O,selectors:[["ng-component"]],hostVars:2,hostBindings:function(S,R){2&S&&r.Tol(R.elementClass)},inputs:{data:"data",elementClass:"elementClass"},decls:2,vars:1,template:function(S,R){1&S&&(r.ynx(0),r._uU(1),r.BQk()),2&S&&(r.xp6(1),r.Oqu(null==R.data?null:R.data.value))},encapsulation:2}),O})()},85822:(ne,B,l)=>{"use strict";l.d(B,{Q:()=>e});var r=l(5e3),d=l(32148),O=l(30652);let e=(()=>{class S{constructor(N,C){this.el=N,this.heading=C,this.disableCloseButton=!1,this.close=new r.vpe}ngOnChanges(){this.heading.height$.next(+getComputedStyle(this.el.nativeElement).height.slice(0,-2))}}return S.\u0275fac=function(N){return new(N||S)(r.Y36(r.SBq),r.Y36(d.p))},S.\u0275cmp=r.Xpm({type:S,selectors:[["nui-configurator-heading"]],inputs:{configuratorTitle:"configuratorTitle",disableCloseButton:"disableCloseButton"},outputs:{close:"close"},features:[r.TTD],decls:4,vars:3,consts:[[1,"configurator-heading","d-flex","justify-content-between","align-items-center","p-4"],[1,"nui-text-panel","nui-text-ellipsis",3,"title"],["nui-button","","type","button","displayStyle","action","icon","close",3,"disabled","click"]],template:function(N,C){1&N&&(r.TgZ(0,"div",0)(1,"span",1),r._uU(2),r.qZA(),r.TgZ(3,"button",2),r.NdJ("click",function(){return C.close.emit()}),r.qZA()()),2&N&&(r.xp6(1),r.Q6J("title",C.configuratorTitle),r.xp6(1),r.hij(" ",C.configuratorTitle," "),r.xp6(1),r.Q6J("disabled",C.disableCloseButton))},directives:[O.r0F],styles:["[_nghost-%COMP%]{z-index:1080;background-color:var(--nui-color-bg-content,#fff)}[_nghost-%COMP%]   .configurator-heading[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),S})()},71536:(ne,B,l)=>{"use strict";l.d(B,{e:()=>O});var r=l(95698),d=l(5e3);let O=(()=>{class e{constructor(){this.accordions=[]}registerAccordion(R){this.accordions.push({instance:R,openSubscription:R.openSubject.subscribe(()=>{this.closeAllAccordions(),R.open=!0}),destroySubscription:R.destroySubject.pipe((0,r.q)(1)).subscribe(()=>{this.removeAccordion(R)})})}closeAllAccordions(){this.accordions.forEach(R=>{R.instance.closeAccordion()})}removeAccordion(R){const N=this.accordions.findIndex(C=>C.instance===R);this.accordions[N].openSubscription.unsubscribe(),this.accordions.splice(N,1)}}return e.\u0275fac=function(R){return new(R||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},19837:(ne,B,l)=>{"use strict";l.d(B,{J:()=>v});var r=l(77579),d=l(25878),O=l(5e3),e=l(71536),S=l(30652),R=l(69808);function N(g,G){if(1&g&&O._UZ(0,"nui-icon",4),2&g){const y=O.oxw();O.Q6J("icon",y.open?"triangle-down":"triangle-left")}}const C=[[["","accordionHeader",""]],"*"],p=["[accordionHeader]","*"];let v=(()=>{class g{constructor(y,F){this.accordionCoordinator=y,this.cd=F,this.showOpenStateIcon=!0,this.state=d.Nc.DEFAULT,this.open=!1,this.openSubject=new r.x,this.destroySubject=new r.x}ngOnInit(){this.accordionCoordinator.registerAccordion(this)}openChange(y){y?this.openSubject.next():this.closeAccordion()}closeAccordion(){this.cd.markForCheck(),this.open=!1}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete()}}return g.\u0275fac=function(y){return new(y||g)(O.Y36(e.e),O.Y36(O.sBO))},g.\u0275cmp=O.Xpm({type:g,selectors:[["nui-widget-editor-accordion"]],inputs:{showOpenStateIcon:"showOpenStateIcon",state:"state"},ngContentSelectors:p,decls:6,vars:6,consts:[[1,"nui-widget-editor-accordion"],[3,"open","openChange"],["nuiExpanderHeader","",1,"d-flex","align-items-start"],["class","nui-widget-editor-accordion__edit-icon",3,"icon",4,"ngIf"],[1,"nui-widget-editor-accordion__edit-icon",3,"icon"]],template:function(y,F){1&y&&(O.F$t(C),O.TgZ(0,"div",0)(1,"nui-expander",1),O.NdJ("openChange",function(b){return F.openChange(b)}),O.TgZ(2,"div",2),O.Hsn(3),O.YNc(4,N,1,1,"nui-icon",3),O.qZA(),O.Hsn(5,1),O.qZA()()),2&y&&(O.xp6(1),O.Q6J("open",F.open),O.xp6(1),O.ekj("error-state","critical"===F.state)("warning-state","warning"===F.state),O.xp6(2),O.Q6J("ngIf",F.showOpenStateIcon))},directives:[S.Fxv,R.O5,S.oJW],styles:[".nui-widget-editor-accordion nui-form-field:last-child .nui-form-field{margin-bottom:0}.nui-widget-editor-accordion__edit-icon{padding:10px;margin-left:auto;margin-right:5px}.nui-widget-editor-accordion .nui-expander--expanded{padding-bottom:0}.nui-widget-editor-accordion .nui-expander__header-icon{display:none}.nui-widget-editor-accordion .nui-expander__header .error-state{background-color:var(--nui-color-semantic-critical-bg,#fceae6)}.nui-widget-editor-accordion .nui-expander__header .warning-state{background-color:var(--nui-color-semantic-warning-bg,#fff9e6)}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader]{border-top:1px solid;border-top-color:var(--nui-color-line-default,#d9d9d9);min-height:50px}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]{overflow:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div{overflow-x:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div .nui-text-secondary{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget-editor-accordion .nui-expander__body{margin:0;padding:0;border-left:none}\n"],encapsulation:2,changeDetection:0}),g})()},64406:(ne,B,l)=>{"use strict";l.d(B,{b:()=>T});var r=l(8817),d=l.n(r),O=l(61135),e=l(77579),S=l(82722),R=l(87686),N=l(53450),C=l(25878),p=l(69155),v=l(5e3),g=l(52382),G=l(45122),y=l(85822),F=l(61842),w=l(10628),b=l(69808);const A=["formPizzagnaComponent"];function W(h,L){if(1&h){const U=v.EpF();v.TgZ(0,"nui-pizzagna",6,7),v.NdJ("pizzagnaChange",function(q){return v.CHM(U),v.oxw(2).formPizzagna=q}),v.qZA()}if(2&h){const U=v.oxw(2);v.Q6J("rootNode",U.formRoot)("pizzagna",U.formPizzagna)}}function D(h,L){if(1&h&&(v.TgZ(0,"div",4),v.YNc(1,W,2,2,"nui-pizzagna",5),v.qZA()),2&h){const U=v.oxw();v.Q6J("formGroup",U.form),v.xp6(1),v.Q6J("ngIf",U.formPizzagna)}}let T=(()=>{class h{constructor(U,X,q,oe){this.changeDetector=U,this.formBuilder=X,this.previewService=q,this.configurator=oe,this.navigationControl=new O.X({busyState:{busy:!1},allowStepChange:!0}),this.busy=!1,this.destroy$=new e.x,this.form=this.formBuilder.group({})}set formPizzagnaComponent(U){var X;null===(X=null==U?void 0:U.eventBus)||void 0===X||X.getStream(N.xZ).pipe((0,S.R)(this.destroy$)).subscribe(q=>{var oe,ae,_e;const te=q.payload;te&&te.id&&(null===(_e=null===(ae=null===(oe=this.configurator)||void 0===oe?void 0:oe.previewPizzagnaComponent)||void 0===ae?void 0:ae.eventBus)||void 0===_e||_e.getStream(te.id).next(te.payload))}),this._formPizzagnaComponent=U}ngOnInit(){var U;this.previewService.preview=null===(U=this.configurator.previewWidget)||void 0===U?void 0:U.pizzagna[C.xW.Configuration],this.previewService.previewChanged.pipe((0,S.R)(this.destroy$)).subscribe(X=>{this.onPreviewPizzagnaUpdate(X),this.changeDetector.detectChanges()}),this.configurator.submitError.pipe((0,S.R)(this.destroy$)).subscribe(()=>{this.toggleBusy()}),this.changeDetector.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewPizzagnaUpdate(U){var X;const q=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(X=this.configurator.previewWidget)||void 0===X?void 0:X.pizzagna),{[C.xW.Configuration]:U})});this.configurator.updateWidget(q);const oe=d()(U,h.TITLE_PATH,"");this.configuratorTitle=$localize`Editing ${oe}`}onFinish(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0});this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}}return h.lateLoadKey="WidgetEditorComponent",h.TITLE_PATH="header.properties.title",h.\u0275fac=function(U){return new(U||h)(v.Y36(v.sBO),v.Y36(g.qu),v.Y36(G.m),v.Y36(p.n))},h.\u0275cmp=v.Xpm({type:h,selectors:[["nui-widget-editor"]],viewQuery:function(U,X){if(1&U&&v.Gf(A,5),2&U){let q;v.iGM(q=v.CRH())&&(X.formPizzagnaComponent=q.first)}},hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",formRoot:"formRoot"},decls:5,vars:5,consts:function(){let L;return L=$localize`:␟afa960379d26eb20fd22e6e10537c1c5ec74c5d1␟4319441956121197474:Save Changes`,[[3,"configuratorTitle","disableCloseButton","close"],["finishText",L,3,"hideHeader","navigationControl","finish","cancel"],[3,"stepTemplate"],["step1",""],[3,"formGroup"],[3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],[3,"rootNode","pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(U,X){if(1&U&&(v.TgZ(0,"nui-configurator-heading",0),v.NdJ("close",function(){return X.onCancel()}),v.qZA(),v.TgZ(1,"nui-dashwiz",1),v.NdJ("finish",function(){return X.onFinish()})("cancel",function(){return X.onCancel()}),v._UZ(2,"nui-dashwiz-step",2),v.qZA(),v.YNc(3,D,2,2,"ng-template",null,3,v.W1O)),2&U){const q=v.MAs(4);v.Q6J("configuratorTitle",X.configuratorTitle)("disableCloseButton",X.busy),v.xp6(1),v.Q6J("hideHeader",!0)("navigationControl",X.navigationControl),v.xp6(1),v.Q6J("stepTemplate",q)}},directives:[y.Q,F.i,w.u,g.JL,g.sg,b.O5,R.R],encapsulation:2,changeDetection:0}),h})()},10628:(ne,B,l)=>{"use strict";l.d(B,{u:()=>N});var r=l(5e3),d=l(30652),O=l(69808),e=l(8083);function S(C,p){1&C&&r.GkF(0)}const R=function(C){return{"nui-dashwiz-step--active":C}};let N=(()=>{class C{constructor(){this.hidden=!1,this.spinnerSize=d.Eye.Large,this.enter=new r.vpe,this.valid=new r.vpe,this.exit=new r.vpe,this.next=new r.vpe,this.busyConfig={busy:!1},this.visited=!1,this.active=!1,this.complete=!1,this.icon="step",this.iconColor="",this.enterStep=v=>{this.enter.emit(v)},this.exitStep=v=>{this.exit.emit(v)},this.nextStep=v=>{this.next.emit(v)},this.applyEnteringStep=()=>{this.active=!0,this.icon="step-active",this.iconColor="black"},this.applyExitingStep=()=>{this.active=!1,this.visited=!0,this.icon="step-complete",this.iconColor=""}}ngOnInit(){this.nextText=this.nextText||$localize`Next`}ngOnChanges(v){v.stepControl&&this.valid.emit(this.stepControl)}}return C.\u0275fac=function(v){return new(v||C)},C.\u0275cmp=r.Xpm({type:C,selectors:[["nui-dashwiz-step"]],inputs:{stepTemplate:"stepTemplate",stepControl:"stepControl",title:"title",nextText:"nextText",hidden:"hidden",disabled:"disabled",spinnerSize:"spinnerSize"},outputs:{enter:"enter",valid:"valid",exit:"exit",next:"next"},features:[r.TTD],decls:4,vars:9,consts:[["nui-busy","",1,"nui-dashwiz-step","animated","h-100",3,"ngClass","busy"],["cdkScrollable","",1,"h-100","overflow-auto","nui-scroll-shadows","configurator-scrollable"],[4,"ngTemplateOutlet"],[3,"percent","allowCancel","message","size"]],template:function(v,g){1&v&&(r.TgZ(0,"div",0)(1,"div",1),r.YNc(2,S,1,0,"ng-container",2),r.qZA(),r._UZ(3,"nui-spinner",3),r.qZA()),2&v&&(r.Q6J("ngClass",r.VKq(7,R,g.active))("busy",g.busyConfig.busy),r.xp6(2),r.Q6J("ngTemplateOutlet",g.stepTemplate),r.xp6(1),r.Q6J("percent",g.busyConfig.percent)("allowCancel",g.busyConfig.allowCancel)("message",g.busyConfig.message)("size",g.spinnerSize))},directives:[d.ERI,O.mk,e.PQ,O.tP,d.ORR],styles:[".nui-dashwiz-step[_ngcontent-%COMP%]{display:none}.nui-dashwiz-step--active[_ngcontent-%COMP%]{display:block}"]}),C})()},4235:(ne,B,l)=>{"use strict";l.d(B,{P:()=>N});var r=l(5e3),d=l(30652),O=l(69808);function e(C,p){if(1&C){const v=r.EpF();r.TgZ(0,"button",6),r.NdJ("click",function(){return r.CHM(v),r.oxw().onBack()}),r.TgZ(1,"span"),r.SDv(2,7),r.qZA()()}if(2&C){const v=r.oxw();r.Q6J("disabled",v.busy)}}function S(C,p){if(1&C){const v=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",function(){return r.CHM(v),r.oxw().onNext()}),r.TgZ(1,"span"),r._uU(2),r.qZA()()}if(2&C){const v=r.oxw();r.Q6J("displayStyle",v.canFinish?"default":"primary")("disabled",v.busy),r.xp6(2),r.Oqu(v.nextText)}}function R(C,p){if(1&C){const v=r.EpF();r.TgZ(0,"button",9),r.NdJ("click",function(){return r.CHM(v),r.oxw().onFinish()}),r.TgZ(1,"span"),r._uU(2),r.qZA()()}if(2&C){const v=r.oxw();r.Q6J("isBusy",v.busy)("disabled",v.busy),r.xp6(2),r.Oqu(v.finishText)}}let N=(()=>{class C{constructor(v){this.changeDetector=v,this.busy=!1,this.canFinish=!1,this.canProceed=!1,this.isFirstStepActive=!1,this.isLastStepActive=!1,this.cancel=new r.vpe,this.next=new r.vpe,this.back=new r.vpe,this.finish=new r.vpe}onCancel(){this.cancel.emit()}onNext(){this.next.emit()}onBack(){this.back.emit()}onFinish(){this.finish.emit()}}return C.lateLoadKey="DashwizButtonsComponent",C.\u0275fac=function(v){return new(v||C)(r.Y36(r.sBO))},C.\u0275cmp=r.Xpm({type:C,selectors:[["nui-dashwiz-buttons"]],inputs:{busy:"busy",canFinish:"canFinish",canProceed:"canProceed",isFirstStepActive:"isFirstStepActive",isLastStepActive:"isLastStepActive",nextText:"nextText",finishText:"finishText"},outputs:{cancel:"cancel",next:"next",back:"back",finish:"finish"},decls:7,vars:4,consts:function(){let p,v;return p=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,v=$localize`:␟cda31dbd724cf5f4fa7a4274d9120651490c8a8c␟8890553633144307762:Back`,[[1,"d-flex","justify-content-end","p-4"],["nui-button","","type","button",1,"nui-dashwiz-buttons__cancel-button",3,"disabled","click"],p,["class","ml-3 nui-dashwiz-buttons__back-button","nui-button","","icon","caret-left","type","button",3,"disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__next-button","nui-button","","type","button",3,"displayStyle","disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__finish-button","nui-button","","type","button","displayStyle","primary",3,"isBusy","disabled","click",4,"ngIf"],["nui-button","","icon","caret-left","type","button",1,"ml-3","nui-dashwiz-buttons__back-button",3,"disabled","click"],v,["nui-button","","type","button",1,"ml-3","nui-dashwiz-buttons__next-button",3,"displayStyle","disabled","click"],["nui-button","","type","button","displayStyle","primary",1,"ml-3","nui-dashwiz-buttons__finish-button",3,"isBusy","disabled","click"]]},template:function(v,g){1&v&&(r.TgZ(0,"div",0)(1,"button",1),r.NdJ("click",function(){return g.onCancel()}),r.TgZ(2,"span"),r.SDv(3,2),r.qZA()(),r.YNc(4,e,3,1,"button",3),r.YNc(5,S,3,3,"button",4),r.YNc(6,R,3,3,"button",5),r.qZA()),2&v&&(r.xp6(1),r.Q6J("disabled",g.busy),r.xp6(3),r.Q6J("ngIf",!g.isFirstStepActive),r.xp6(1),r.Q6J("ngIf",!g.isLastStepActive&&g.canProceed),r.xp6(1),r.Q6J("ngIf",g.canFinish||g.isLastStepActive))},directives:[d.r0F,O.O5],encapsulation:2}),C})()},61842:(ne,B,l)=>{"use strict";l.d(B,{i:()=>_e});var r=l(5e3),d=l(62516),O=l.n(d),e=l(36397),S=l.n(e),R=l(34235),N=l.n(R),C=l(61135),p=l(10628),v=l(4235),g=l(30652),G=l(59551),y=l(69808),F=l(47969),w=l(47429);const b=["container"],A=["stepTitle"],W=function(te){return{"min-width.px":te}};function D(te,se){if(1&te&&(r.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"span",18)(5,"span",19,20),r._uU(7),r.qZA(),r.TgZ(8,"div",21)(9,"div",22),r._UZ(10,"div",23),r.qZA(),r._UZ(11,"nui-icon",24),r.TgZ(12,"div",25),r._UZ(13,"div",23),r.qZA()()()()()()()),2&te){const J=r.oxw().$implicit,j=r.oxw(3);r.xp6(7),r.hij(" ",J.title,""),r.xp6(3),r.Q6J("ngStyle",r.VKq(5,W,j.stepLineWidth)),r.xp6(1),r.Q6J("icon",J.icon)("iconColor",J.iconColor),r.xp6(2),r.Q6J("ngStyle",r.VKq(7,W,j.stepLineWidth))}}const T=function(te,se,J,j,le,ie){return{"nui-dashwiz__header-step--first":te,"nui-dashwiz__header-step--last":se,"nui-dashwiz__header-step--visited":J,"nui-dashwiz__header-step--disabled":j,"nui-dashwiz__header-step--active":le,"nui-dashwiz__header-step--complete":ie}};function h(te,se){if(1&te){const J=r.EpF();r.TgZ(0,"li",12),r.NdJ("click",function(){const ie=r.CHM(J).$implicit;return r.oxw(3).selectStep(ie)}),r.YNc(1,D,14,9,"div",13),r.qZA()}if(2&te){const J=se.$implicit,j=se.first,le=se.last,ie=r.oxw(3);r.Q6J("ngClass",r.HTZ(2,T,j,le,J.visited,J.disabled||!J.visited||ie.currentStep.busyConfig.busy,J.active,J.complete)),r.xp6(1),r.Q6J("ngIf",!J.hidden)}}function L(te,se){if(1&te&&(r.TgZ(0,"ul",10),r.YNc(1,h,2,9,"li",11),r.qZA()),2&te){const J=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",J.steps)}}function U(te,se){if(1&te&&(r.TgZ(0,"div",8),r.YNc(1,L,2,1,"ul",9),r.qZA()),2&te){const J=r.oxw();r.ekj("nui-dashwiz__header--lines-stretched",J.stretchStepLines),r.xp6(1),r.Q6J("ngIf",J.steps)}}function X(te,se){}function q(te,se){}const oe=function(){return["cancel","next","back","finish"]},ae=["*"];let _e=(()=>{class te{constructor(J,j,le,ie){this.changeDetector=J,this.componentFactoryResolver=j,this.logger=le,this.dashwizService=ie,this.hideHeader=!1,this.canProceed=!1,this.canFinish=!1,this.finishText=te.placeholderFinishText,this.stretchStepLines=!1,this.stepNavigated=new r.vpe,this.cancel=new r.vpe,this.finish=new r.vpe,this.next=new r.vpe,this.back=new r.vpe,this.navigationControl=new C.X({busyState:{busy:!1},allowStepChange:!0}),this.stepLineWidth=65,this.previousStepIndex=0,this.onBack=()=>{if(!N()(this.stepIndex)){let fe=this.arraySteps[this.stepIndex-1];(fe.hidden||fe.disabled)&&(fe=O()(this.arraySteps.slice(0).reverse(),ve=>!ve.hidden,S()(this.arraySteps.slice(0).reverse(),this.arraySteps[this.stepIndex])+1)),this.selectStep(fe),this.back.emit()}},this.onNext=()=>{let fe=this.arraySteps[this.stepIndex+1];this.handleStepControl(this.currentStep),this.currentStep.nextStep({currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.currentStep,previousStepIndex:this.stepIndex}),(fe.hidden||fe.disabled&&!N()(fe.stepControl))&&(fe=O()(this.arraySteps,ve=>!ve.hidden,this.stepIndex+1)),(N()(this.currentStep.stepControl)||this.currentStep.stepControl)&&(this.currentStep.complete=!0),fe.disabled&&!fe.visited&&(this.currentStep.complete=!1),this.selectStep(fe),this.next.emit()},this.onFinish=()=>{this.finish.emit()},this.onCancel=()=>{this.cancel.emit(0!==this.steps.toArray().filter(fe=>fe.complete).length)},this.buttonPortalActionMap={cancel:this.onCancel,next:this.onNext,back:this.onBack,finish:this.onFinish},ie&&(ie.component=this)}ngOnInit(){this.buttonComponentTypes=this.buttonComponentTypes||[v.P.lateLoadKey],this.finishText===te.placeholderFinishText&&this.logger.warn(`DashwizComponent input "finishText" is using placeholder text\n"${te.placeholderFinishText}". A value should be specified.`)}ngDoCheck(){this.currentStep&&(this.buttonProperties={busy:this.currentStep.busyConfig.busy,canProceed:this.canProceed,canFinish:this.canFinish,isLastStepActive:this.steps.last.active,isFirstStepActive:this.steps.first.active,nextText:this.currentStep.nextText,finishText:this.finishText})}ngAfterContentInit(){const J=this.steps.filter(j=>j.active);this.arraySteps=this.steps.toArray(),0===J.length&&(this.currentStep=this.steps.first,this.selectStep(this.currentStep),this.changeDetector.detectChanges()),this.steps.toArray().forEach(j=>{j.valid.subscribe(le=>{N()(le)||this.handleStepControl(j)})}),this.navigationControl.subscribe(j=>{this.currentStep.busyConfig=j.busyState,j.allowStepChange&&!N()(this.futureStep)&&this.currentStep!==this.futureStep&&(this.enterAnotherStep(),this.futureStep=void 0)})}ngAfterViewChecked(){this.stretchStepLines&&(this.stepLineWidth=Math.round(this.getLargestLabelWidth()/2),this.changeDetector.detectChanges())}ngOnDestroy(){this.steps.toArray().forEach(J=>J.valid.unsubscribe()),this.navigationControl.unsubscribe(),this.dashwizService.component=void 0}addStepDynamic(J,j){const le=this.componentFactoryResolver.resolveComponentFactory(p.u),ie=this.dynamicStep.createComponent(le);return ie.instance.stepTemplate=J.stepTemplate,this.arraySteps.splice(j,0,ie.instance),this.steps.reset(this.arraySteps),ie.instance}disableStep(J){const j=this.arraySteps.indexOf(J);this.arraySteps[j].disabled=!0,this.changeDetector.detectChanges()}enableStep(J){const j=this.arraySteps.indexOf(J);this.arraySteps[j].disabled=!1,this.changeDetector.detectChanges()}hideStep(J){const j=this.arraySteps.indexOf(J);this.arraySteps[j].hidden=!0}showStep(J){const j=this.arraySteps.indexOf(J);this.arraySteps[j].hidden=!1}goToStep(J){this.selectStep(this.arraySteps[J])}selectStep(J){J.disabled||(this.futureStep=J,this.currentStep.exitStep({currentStepIndex:this.arraySteps.indexOf(this.futureStep),currentStep:this.futureStep,previousStep:this.arraySteps[this.stepIndex],previousStepIndex:this.stepIndex}),this.navigationControl.value.allowStepChange&&this.enterAnotherStep())}enterAnotherStep(){var J;this.currentStep.applyExitingStep(),null===(J=this.futureStep)||void 0===J||J.enterStep(),this.futureStep&&(this.currentStep=this.futureStep),this.currentStep.applyEnteringStep(),this.stepIndex=this.arraySteps.indexOf(this.currentStep),this.stepNavigatedEvent={currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.arraySteps[this.previousStepIndex],previousStepIndex:this.previousStepIndex},this.stepNavigated.emit(this.stepNavigatedEvent),this.previousStepIndex=this.stepIndex}onButtonPortalOutput(J){var j,le;null===(le=(j=this.buttonPortalActionMap)[J.id])||void 0===le||le.call(j)}disableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(J=>{J.disabled=!0})}enableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(J=>{J.disabled=!1})}handleStepControl(J){N()(J.stepControl)||(J.stepControl?this.enableFollowingSteps():this.disableFollowingSteps())}getLargestLabelWidth(){const J=this.stepTitles.map(j=>j.nativeElement.offsetWidth);return Math.round(Math.max(...J))}}return te.placeholderFinishText="Action",te.\u0275fac=function(J){return new(J||te)(r.Y36(r.sBO),r.Y36(r._Vd),r.Y36(g.mQy),r.Y36(G.e))},te.\u0275cmp=r.Xpm({type:te,selectors:[["nui-dashwiz"]],contentQueries:function(J,j,le){if(1&J&&r.Suo(le,p.u,4),2&J){let ie;r.iGM(ie=r.CRH())&&(j.steps=ie)}},viewQuery:function(J,j){if(1&J&&(r.Gf(b,5,r.s_b),r.Gf(A,5)),2&J){let le;r.iGM(le=r.CRH())&&(j.dynamicStep=le.first),r.iGM(le=r.CRH())&&(j.stepTitles=le)}},hostAttrs:[1,"flex-grow-1","overflow-auto"],inputs:{hideHeader:"hideHeader",canProceed:"canProceed",canFinish:"canFinish",finishText:"finishText",stretchStepLines:"stretchStepLines",buttonComponentTypes:"buttonComponentTypes",navigationControl:"navigationControl"},outputs:{stepNavigated:"stepNavigated",cancel:"cancel",finish:"finish",next:"next",back:"back"},ngContentSelectors:ae,decls:10,vars:6,consts:[[1,"nui-dashwiz","d-flex","flex-column","h-100"],["class","nui-dashwiz__header",3,"nui-dashwiz__header--lines-stretched",4,"ngIf"],[1,"nui-scroll-shadows","flex-grow-1","overflow-auto"],["container",""],[1,"nui-dashwiz__footer"],["nuiComponentPortal","","componentId","dashwizButtons",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-dashwiz__header"],["class","nui-dashwiz__header-steps",4,"ngIf"],[1,"nui-dashwiz__header-steps"],["class","nui-dashwiz__header-step",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nui-dashwiz__header-step",3,"ngClass","click"],["class","nui-dashwiz__header-step-container",4,"ngIf"],[1,"nui-dashwiz__header-step-container"],[1,"nui-dashwiz__header-step-row"],[1,"nui-dashwiz__header-step-col"],[1,"nui-dashwiz__header-step-content"],[1,"nui-dashwiz__header-step-link"],[1,"nui-dashwiz__header-step-title"],["stepTitle",""],[1,"nui-dashwiz__header-step-link-container"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-right"],[1,"nui-dashwiz__header-step-line",3,"ngStyle"],[3,"icon","iconColor"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-left"]],template:function(J,j){if(1&J){const le=r.EpF();r.F$t(),r.TgZ(0,"div",0),r.YNc(1,U,2,3,"div",1),r.TgZ(2,"div",2),r.Hsn(3),r.YNc(4,X,0,0,"ng-template",null,3,r.W1O),r.qZA(),r.TgZ(6,"div",4),r.ynx(7,5,6),r.NdJ("output",function(fe){return j.onButtonPortalOutput(fe)}),r.YNc(9,q,0,0,"ng-template",7),r.NdJ("attached",function(fe){return r.CHM(le),r.MAs(8).attached(fe)}),r.BQk(),r.qZA()()}if(2&J){const le=r.MAs(8);r.xp6(1),r.Q6J("ngIf",!j.hideHeader),r.xp6(6),r.Q6J("componentType",1===j.buttonComponentTypes.length?j.buttonComponentTypes[0]:j.buttonComponentTypes[j.stepIndex])("properties",j.buttonProperties)("outputs",r.DdM(5,oe)),r.xp6(2),r.Q6J("cdkPortalOutlet",le.portal)}},directives:[y.O5,y.sg,y.mk,y.PC,g.oJW,F.$,w.Pl],styles:[".nui-dashwiz__header[_ngcontent-%COMP%]{padding:10px 15px;background-color:var(--nui-color-bg-secondary,#fafafa);border-bottom:1px solid #d9d9d9;border-bottom:1px solid var(--nui-color-line-default, #d9d9d9);overflow:hidden;text-align:center;display:flex;justify-content:center;-webkit-user-select:none;-o-user-select:none;user-select:none}.nui-dashwiz__header-steps[_ngcontent-%COMP%]{margin-bottom:0;white-space:nowrap;display:inline-flex}.nui-dashwiz__header-step[_ngcontent-%COMP%]{line-height:normal;display:inline-flex;cursor:pointer}.nui-dashwiz__header-step--disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:default}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--first[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%], .nui-dashwiz__header-step--last[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%]{border-color:transparent;opacity:0}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]{cursor:default}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-bg-dark,#111)}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{text-decoration:none}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step-container[_ngcontent-%COMP%]{display:inline-table;width:100%}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]{display:none}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0}.nui-dashwiz__header-step-row[_ngcontent-%COMP%]{display:table-row}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-default,#d9d9d9)}.nui-dashwiz__header-step-col-right[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{margin-right:-1px}.nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-bottom:solid 2px;height:2px}.nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6));transition:color .3s}.nui-dashwiz__header-step-link-container[_ngcontent-%COMP%]{display:flex;align-content:baseline;justify-content:center;align-items:center}.nui-dashwiz__header-step-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis;vertical-align:middle;display:inline-block;max-width:140px;margin:0 0 5px;text-decoration:inherit}.nui-dashwiz__header.nui-dashwiz__header--lines-stretched[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{max-width:unset}.nui-dashwiz__footer[_ngcontent-%COMP%]{z-index:1080;background-color:var(--nui-color-bg-content,#fff);border-top:solid 1px var(--nui-color-line-default, #d9d9d9)}"]}),te})()},59551:(ne,B,l)=>{"use strict";l.d(B,{e:()=>d});var r=l(5e3);let d=(()=>{class O{constructor(){}}return O.\u0275fac=function(S){return new(S||O)},O.\u0275prov=r.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},37716:(ne,B,l)=>{"use strict";l.d(B,{F:()=>d});var r=l(52382);function d(O){if(O.valid||O.untouched)return!1;if(O instanceof r.cw)for(const e of Object.keys(O.controls))if(d(O.controls[e]))return!0;if(O instanceof r.Oe)for(let e=0;e<O.length;e++)if(d(O.at(e)))return!0;return(O.touched||O.dirty)&&!!O.errors}},73193:(ne,B,l)=>{"use strict";l.d(B,{l:()=>O});var r=l(32656),d=l(5e3);let O=(()=>{class e{constructor(R){this.widgetTypesService=R}transform(R,N="widget"){var C,p;return(null==R?void 0:R.type)?null===(p=null===(C=this.widgetTypesService.getWidgetType(R.type,R.version).paths)||void 0===C?void 0:C[N])||void 0===p?void 0:p.root:null}}return e.\u0275fac=function(R){return new(R||e)(d.Y36(r.x,16))},e.\u0275pipe=d.Yjl({name:"nuiPizzagnaRoot",type:e,pure:!0}),e})()},16193:(ne,B,l)=>{"use strict";l.d(B,{F:()=>g});var r=l(39841),d=l(54482),O=l(25403),e=l(25032),R=l(68675),N=l(54004),C=l(25878),p=l(37716),v=l(5e3);let g=(()=>{class G{transform(F){if(!F)throw new Error("Provided form is undefined");return(0,r.a)([F.statusChanges,F.valueChanges]).pipe((0,R.O)(null),(0,N.U)(()=>(0,p.F)(F)?C.Nc.CRITICAL:C.Nc.DEFAULT),function S(G,y){return(0,d.e)((F,w)=>{const b=new Set;F.subscribe((0,O.x)(w,A=>{const W=G?G(A):A;b.has(W)||(b.add(W),w.next(A))})),null==y||y.subscribe((0,O.x)(w,()=>b.clear(),e.Z))})}())}}return G.\u0275fac=function(F){return new(F||G)},G.\u0275pipe=v.Yjl({name:"nuiWidgetEditorAccordionFormState",type:G,pure:!1}),G})()},15838:(ne,B,l)=>{"use strict";l.d(B,{d:()=>R});var r=l(39841),d=l(68675),O=l(54004),e=l(37716),S=l(5e3);let R=(()=>{class N{transform(p,v,g=N.ERROR_ICON_DEFAULT){if(!p)throw new Error("Provided form is undefined");return(0,r.a)([p.statusChanges,p.valueChanges]).pipe((0,d.O)(null),(0,O.U)(()=>(0,e.F)(p)?g:v))}}return N.ERROR_ICON_DEFAULT="status_critical",N.\u0275fac=function(p){return new(p||N)},N.\u0275pipe=S.Yjl({name:"nuiFormHeaderIconPipe",type:N,pure:!1}),N})()},61874:(ne,B,l)=>{"use strict";l.d(B,{q:()=>v});var r=l(34235),d=l.n(r),O=l(77579),e=l(61135),S=l(82722),R=l(25878),N=l(81466),C=l(5e3),p=l(59551);let v=(()=>{class g{constructor(y,F){this.eventBus=y,this.dashwizService=F,this.onDestroy$=new O.x,this.dataSourceCreated$=new O.x,this.error$=new O.x,this.busy$=new e.X(!1),this.dataSourceFields$=new e.X([]),this.eventBus.subscribeUntil(N.gg,this.onDestroy$,w=>{!w.payload||this.onDataSourceCreated(w.payload)}),this.eventBus.subscribeUntil(N.PF,this.onDestroy$,w=>{var b;if(null===(b=w.payload)||void 0===b?void 0:b.error)this.error$.next(w.payload.error);else{this.error$.next(null);const A=d()(w.payload.result)?w.payload:w.payload.result||{};(null==A?void 0:A.dataFields)&&this.dataSourceFields$.next(A.dataFields)}})}onDataSourceCreated(y){var F;this.dataSource=y,this.dataSourceCreated$.next(),null===(F=this.dataSource.busy)||void 0===F||F.pipe((0,S.R)(this.dataSourceCreated$)).subscribe(w=>{var b,A;null===(A=null===(b=this.dashwizService)||void 0===b?void 0:b.component)||void 0===A||A.navigationControl.next({busyState:{busy:w},allowStepChange:!w}),this.busy$.next(w)})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return g.\u0275fac=function(y){return new(y||g)(C.LFG(R.nY),C.LFG(p.e))},g.\u0275prov=C.Yz7({token:g,factory:g.\u0275fac}),g})()},32148:(ne,B,l)=>{"use strict";l.d(B,{p:()=>O});var r=l(61135),d=l(5e3);let O=(()=>{class e{constructor(){this.height$=new r.X(0)}}return e.\u0275fac=function(R){return new(R||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},42971:(ne,B,l)=>{"use strict";l.d(B,{J:()=>W});var r=l(11420),d=l(90733),O=l.n(d),e=l(75946),S=l.n(e),R=l(77579),N=l(60515),C=l(39646),p=l(68306),v=l(63900),g=l(70262),G=l(82722),y=l(39300),F=l(30652),w=l(32656),b=l(69155),A=l(5e3);let W=(()=>{class D{constructor(h,L,U,X,q,oe,ae){this.componentFactoryResolver=h,this.widgetTypesService=L,this.injector=U,this.appRef=X,this.logger=q,this.router=ae,this.close$=new R.x,this.handleSubmit=(_e,te)=>se=>se.pipe(this.trySubmit(te,_e),this.updateDashboard(_e.dashboardComponent)),this.trySubmit=(_e,te)=>se=>se.pipe((0,v.w)(J=>J&&S()(_e)?_e(J,te).pipe((0,g.K)(j=>(this.logger.error(j),this.componentRef.instance.handleSubmitError(),N.E))):(0,C.of)(J))),this.updateDashboard=_e=>te=>new p.y(se=>te.subscribe(J=>{if(J){let j;J.id=J.id||(0,F.VjN)(),j=_e.dashboard.widgets[J.id]?Object.assign(Object.assign({},J),{pizzagna:Object.assign(Object.assign({},this.widgetTypesService.getWidgetType(J.type,J.version).widget),{configuration:J.pizzagna.configuration})}):J,_e.removeWidget(j.id,!1),setTimeout(()=>{_e.updateWidget(j)})}this.close(),se.next()})),this.renderer=oe.createRenderer(null,null)}open(h){var L;const U={dashboardComponent:h.dashboardComponent,widget:O()(h.widget)};this.componentRef=this.appendComponentToBody();const X=this.componentRef.instance;return X.formPortal=h.portalBundle.portal,X.previewWidget=O()(h.widget),(null===(L=h.portalBundle)||void 0===L?void 0:L.attached)&&X.formPortalAttached.pipe((0,G.R)(this.close$)).subscribe(h.portalBundle.attached),X.changeDetector.detectChanges(),X.result.asObservable().pipe(this.handleSubmit(U,h.trySubmit))}close(){!this.renderer||(this.close$.next(),this.renderer.removeChild(document.body,this.componentRef.hostView.rootNodes[0]),this.appRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.renderer.removeStyle(document.body,"overflow"))}appendComponentToBody(){const L=this.componentFactoryResolver.resolveComponentFactory(b.n).create(this.injector);return this.appRef.attachView(L.hostView),this.renderer.appendChild(document.body,L.hostView.rootNodes[0]),this.renderer.setStyle(document.body,"overflow","hidden"),this.router&&this.router.events.pipe((0,y.h)(U=>U instanceof r.m2),(0,G.R)(this.close$)).subscribe(()=>this.close()),L}}return D.\u0275fac=function(h){return new(h||D)(A.LFG(A._Vd),A.LFG(w.x),A.LFG(A.zs3),A.LFG(A.z2F),A.LFG(F.mQy),A.LFG(A.FYo),A.LFG(r.F0,8))},D.\u0275prov=A.Yz7({token:D,factory:D.\u0275fac}),D})()},36216:(ne,B,l)=>{"use strict";l.d(B,{a:()=>N});var r=l(77579),d=l(42339),O=l(53450),e=l(25878),S=l(5e3),R=l(45122);let N=(()=>{class C{constructor(v,g,G){this.eventBus=v,this.previewService=g,this.pizzagnaService=G,this.destroy$=new r.x}ngAfterViewInit(){this.buildForm(),this.toPreview(this.component.form)}setComponent(v,g){this.component=v,this.componentId=g}getPreview(){return this.previewService.preview}updatePreview(v){this.previewService.preview=v}updateFormPizzagna(v){this.pizzagnaService.updatePizzagna(v),this.eventBus.getStream(O.M).next({payload:{path:"",value:v}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return C.\u0275fac=function(v){return new(v||C)(S.LFG(e.nY),S.LFG(R.m),S.LFG(d.p))},C.\u0275prov=S.Yz7({token:C,factory:C.\u0275fac}),C})()},75675:(ne,B,l)=>{"use strict";l.d(B,{l:()=>F});var r=l(18680),d=l.n(r),O=l(12498),e=l.n(O),S=l(95835),R=l.n(S),N=l(82722),C=l(30652),p=l(42339),v=l(25878),g=l(36216),G=l(5e3),y=l(45122);let F=(()=>{class w extends g.a{constructor(A,W,D){super(A,W,D),this.shouldReadForm=!1}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var A,W,D;const T=this.getPreview(),h=(null===(D=null===(W=null===(A=null==T?void 0:T.tiles)||void 0===A?void 0:A.properties)||void 0===W?void 0:W.nodes)||void 0===D?void 0:D.map(X=>({id:X,componentType:T[X].componentType})))||[],L=null==h?void 0:h.map(X=>X.id);this.pizzagnaService.createComponentsFromTemplate("tiles",L);let U=this.pizzagnaService.pizzagna;U=(0,C.zdu)(U,`${v.xW.Data}.tiles.properties.tiles`,h),setTimeout(()=>this.shouldReadForm=!0),this.updateFormPizzagna(U)}toPreview(A){var W;null===(W=A.get("tiles"))||void 0===W||W.valueChanges.pipe((0,N.R)(this.destroy$)).subscribe(D=>{var T,h;if(!this.shouldReadForm)return;let L=this.getPreview();const U=(D||[]).map(oe=>oe.id),X=d()(null===(h=null===(T=null==L?void 0:L.tiles)||void 0===T?void 0:T.properties)||void 0===h?void 0:h.nodes,U);X.length&&(L=R()(L,X));const q=e()(D,oe=>oe.id);L=(0,C.zdu)(L,"tiles.properties.nodes",U);for(const oe of U){const ae=q[oe];if(ae&&!L[ae.id]){const _e=this.getTileConfiguration(ae.id,ae.componentType);L=(0,C.zdu)(L,ae.id,_e)}}this.updatePreview(L)})}getTileConfiguration(A,W){return{id:A,providers:{dataSource:{providerId:void 0}}}}}return w.\u0275fac=function(A){return new(A||w)(G.LFG(v.nY),G.LFG(y.m),G.LFG(p.p))},w.\u0275prov=G.Yz7({token:w,factory:w.\u0275fac}),w})()},60167:(ne,B,l)=>{"use strict";l.d(B,{M:()=>p});var r=l(82722),d=l(30652),O=l(42339),e=l(25878),S=l(55413),R=l(36216),N=l(5e3),C=l(45122);let p=(()=>{class v extends R.a{constructor(G,y,F){super(G,y,F),this.PROPERTIES_PATH=`${e.xW.Configuration}.chartOptionsEditor.properties`}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var G,y,F,w,b,A,W,D,T,h,L;const U=null===(F=null===(y=null===(G=this.getPreview().chart)||void 0===G?void 0:G.properties)||void 0===y?void 0:y.configuration)||void 0===F?void 0:F.chartOptions;let X=this.pizzagnaService.pizzagna;X=(0,d.zdu)(X,`${this.PROPERTIES_PATH}.chartType`,null!==(w=null==U?void 0:U.type)&&void 0!==w?w:void 0),X=(0,d.zdu)(X,`${this.PROPERTIES_PATH}.legendPlacement`,null!==(b=null==U?void 0:U.legendPlacement)&&void 0!==b?b:S.w.None),X=(0,d.zdu)(X,`${this.PROPERTIES_PATH}.legendFormatterComponentType`,null!==(W=null===(A=null==U?void 0:U.legendFormatter)||void 0===A?void 0:A.componentType)&&void 0!==W?W:""),X=(0,d.zdu)(X,`${this.PROPERTIES_PATH}.contentFormatterComponentType`,null!==(T=null===(D=null==U?void 0:U.contentFormatter)||void 0===D?void 0:D.componentType)&&void 0!==T?T:"DonutContentRawFormatterComponent"),X=(0,d.zdu)(X,`${this.PROPERTIES_PATH}.contentFormatterProperties`,null!==(L=null===(h=null==U?void 0:U.contentFormatter)||void 0===h?void 0:h.properties)&&void 0!==L?L:""),this.updateFormPizzagna(X)}toPreview(G){G.valueChanges.pipe((0,r.R)(this.destroy$)).subscribe(y=>{const F=(0,d.zdu)(this.getPreview(),"chart.properties.configuration.chartOptions",y);this.updatePreview(F)})}}return v.\u0275fac=function(G){return new(G||v)(N.LFG(e.nY),N.LFG(C.m),N.LFG(O.p))},v.\u0275prov=N.Yz7({token:v,factory:v.\u0275fac}),v})()},42911:(ne,B,l)=>{"use strict";l.d(B,{c:()=>C});var r=l(82722),d=l(30652),O=l(42339),e=l(25878),S=l(36216),R=l(5e3),N=l(45122);class C extends S.a{constructor(v,g,G){super(v,g,G)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var v,g;let G=this.pizzagnaService.pizzagna;const y=null===(g=null===(v=this.getPreview())||void 0===v?void 0:v.header)||void 0===g?void 0:g.properties;G=(0,d.zdu)(G,`${C.PROPERTIES_PATH}.title`,null==y?void 0:y.title),G=(0,d.zdu)(G,`${C.PROPERTIES_PATH}.subtitle`,null==y?void 0:y.subtitle),G=(0,d.zdu)(G,`${C.PROPERTIES_PATH}.url`,null==y?void 0:y.url),G=(0,d.zdu)(G,`${C.PROPERTIES_PATH}.description`,null==y?void 0:y.description),G=(0,d.zdu)(G,`${C.PROPERTIES_PATH}.collapsible`,null==y?void 0:y.collapsible),this.updateFormPizzagna(G)}toPreview(v){v.valueChanges.pipe((0,r.R)(this.destroy$)).subscribe(g=>{const G=(0,d.zdu)(this.getPreview(),"header.properties",g);this.updatePreview(G)})}}C.PROPERTIES_PATH=`${e.xW.Configuration}.titleAndDescription.properties`,C.\u0275fac=function(v){return new(v||C)(R.LFG(e.nY),R.LFG(N.m),R.LFG(O.p))},C.\u0275prov=R.Yz7({token:C,factory:C.\u0275fac})},41294:(ne,B,l)=>{"use strict";l.d(B,{w:()=>h});var r=l(8817),d=l.n(r),O=l(71973),e=l.n(O),S=l(64509),R=l.n(S),N=l(34235),C=l.n(N),p=l(77579),v=l(39841),g=l(82722),G=l(54004),y=l(71884),F=l(30652),w=l(42339),b=l(25878),A=l(81466),W=l(36216),D=l(5e3),T=l(45122);let h=(()=>{class L extends W.a{constructor(X,q,oe){super(X,q,oe),this.indicatorDataKey="indicatorData",this.previewSeriesPath=`providers.${b.Mu.Adapter}.properties.series`,this.formSeriesComponentPath=`${b.xW.Data}.series.properties`,this.dataSourceSeries$=new p.x,this.selectedSeriesIds$=new p.x,this.shouldReadForm=!1,this.subscribeToAvailableDataFieldsChange(),this.eventBus.subscribeUntil(A.ay,this.destroy$,ae=>{const _e=`${b.xW.Structure}.series.properties.nodes`,te=d()(this.pizzagnaService.pizzagna,_e);this.pizzagnaService.removeComponents(te);let se=this.pizzagnaService.pizzagna;se=(0,F.zdu)(se,_e,[]),se=(0,F.zdu)(se,`${this.formSeriesComponentPath}.series`,[]),this.updateFormPizzagna(se)}),this.eventBus.subscribeUntil(A.PF,this.destroy$,ae=>{var _e;const{series:te}=C()(ae.payload.result)?ae.payload:ae.payload.result||{};if(te){this.dataSourceSeries$.next(te);let se=this.pizzagnaService.pizzagna;se=(0,F.zdu)(se,`${this.formSeriesComponentPath}.allSeries`,te);const j=(null===(_e=this.pizzagnaService.pizzagna[b.xW.Structure][this.component.componentId].properties)||void 0===_e?void 0:_e.template).findIndex(we=>we.id===this.indicatorDataKey);se=(0,F.zdu)(se,`${b.xW.Structure}.series.properties.template[${j}].properties.allSeries`,te),se=d()(this.getPreview(),`chart.${this.previewSeriesPath}`,[]).reduce((we,ze)=>(0,F.zdu)(we,`${b.xW.Data}.${ze.id}/${this.indicatorDataKey}.properties.allSeries`,te),se),this.updateFormPizzagna(se);const fe=`${this.formSeriesComponentPath}.series`,ve=d()(this.pizzagnaService.pizzagna,fe);if(e()(ve)){this.shouldReadForm=!1;const we=te.map(Ee=>({id:Ee.id,selectedSeriesId:Ee.id,label:Ee.name})),ze=(0,F.zdu)(this.getPreview(),`chart.${this.previewSeriesPath}`,we);this.updatePreview(ze),this.buildForm(),setTimeout(()=>{this.updateAvailableSeries([]),this.shouldReadForm=!0})}}})}buildForm(){const X=this.getPreview(),q=d()(X,`chart.${this.previewSeriesPath}`,[]),oe=q.map(se=>({id:se.id,selectedSeriesId:se.selectedSeriesId})),ae=q.map(se=>se.id);this.pizzagnaService.createComponentsFromTemplate("series",ae);const te=(0,F.zdu)(this.pizzagnaService.pizzagna,`${this.formSeriesComponentPath}.series`,oe);this.updateFormPizzagna(te),this.selectedSeriesIds$.next(oe.map(se=>se.selectedSeriesId)),setTimeout(()=>this.shouldReadForm=!0)}toPreview(X){X.valueChanges.pipe((0,g.R)(this.destroy$)).subscribe(q=>{if(!this.shouldReadForm)return;const oe=this.getPreview(),{chart:ae}=oe,_e=d()(ae,this.previewSeriesPath,[]),te=q.map(j=>Object.assign({id:j.id,selectedSeriesId:j.selectedSeriesId},_e.find(le=>le.id===j.id))),se=(0,F.zdu)(oe,`chart.${this.previewSeriesPath}`,te);this.updatePreview(se);const J=q.map(j=>d()(j,`properties[${j.id}/indicatorData].id`)).filter(j=>!e()(j));this.selectedSeriesIds$.next(J)})}ngOnDestroy(){this.dataSourceSeries$.complete(),this.selectedSeriesIds$.complete(),super.ngOnDestroy()}updateAvailableSeries(X){var q;if(!this.pizzagnaService.pizzagna)return;let oe=this.pizzagnaService.pizzagna;oe=(0,F.zdu)(oe,`${this.formSeriesComponentPath}.availableSeries`,X);const _e=(null===(q=this.pizzagnaService.pizzagna[b.xW.Structure][this.component.componentId].properties)||void 0===q?void 0:q.template).findIndex(J=>J.id===this.indicatorDataKey);oe=(0,F.zdu)(oe,`${b.xW.Structure}.series.properties.template[${_e}].properties.availableSeries`,X),oe=d()(this.pizzagnaService.pizzagna,`${b.xW.Structure}.series.properties.nodes`).reduce((J,j)=>(0,F.zdu)(J,`${b.xW.Data}.${j}/${this.indicatorDataKey}.properties.availableSeries`,X),oe),this.updateFormPizzagna(oe)}subscribeToAvailableDataFieldsChange(){(0,v.a)([this.dataSourceSeries$,this.selectedSeriesIds$]).pipe((0,g.R)(this.destroy$),(0,G.U)(([X,q])=>X.filter(oe=>!q.find(ae=>ae===oe.id))),(0,y.x)(R())).subscribe(this.updateAvailableSeries.bind(this))}}return L.\u0275fac=function(X){return new(X||L)(D.LFG(b.nY),D.LFG(T.m),D.LFG(w.p))},L.\u0275prov=D.Yz7({token:L,factory:L.\u0275fac}),L})()},27463:(ne,B,l)=>{"use strict";l.d(B,{l:()=>d});const d=new(l(5e3).OlP)("CONFIGURATOR_CONVERTER")},45122:(ne,B,l)=>{"use strict";l.d(B,{m:()=>O});var r=l(77579),d=l(5e3);let O=(()=>{class e{constructor(){this.previewChanged=new r.x}get preview(){return this._preview}set preview(R){this._preview=R,this.previewChanged.next(R)}}return e.\u0275fac=function(R){return new(R||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},67517:(ne,B,l)=>{"use strict";l.d(B,{s:()=>C});var r=l(90733),d=l.n(r),O=l(25878),e=l(64406),S=l(42971),R=l(5e3),N=l(94526);let C=(()=>{class p{constructor(g,G){this.configuratorService=g,this.componentPortalService=G}open(g){if(!g.portalBundle){const y={portal:this.componentPortalService.createComponentPortal(e.b,null),attached:F=>{var w;const b=F.instance;b.formPizzagna=g.formPizzagna,b.formRoot=null===(w=g.paths)||void 0===w?void 0:w.root,b.changeDetector.markForCheck()}};g.portalBundle=y}const G=d()(g.widget);return delete G.pizzagna[O.xW.Data],g.widget=G,this.configuratorService.open(g)}}return p.\u0275fac=function(g){return new(g||p)(R.LFG(S.J),R.LFG(N.$))},p.\u0275prov=R.Yz7({token:p,factory:p.\u0275fac}),p})()},81466:(ne,B,l)=>{"use strict";l.d(B,{PF:()=>e,ay:()=>R,gg:()=>N,yX:()=>S});var r=l(4707),d=l(61135),O=l(30652);const e=new O.JRy("DATA_SOURCE_OUTPUT",()=>new r.t(1)),S=new O.JRy("DATA_SOURCE_DESTROYED"),R=new O.JRy("DATA_SOURCE_CHANGE"),N=new O.JRy("DATA_SOURCE_CREATED",()=>new d.X({payload:void 0}))},16041:(ne,B,l)=>{"use strict";l.d(B,{K:()=>O});var r=l(5e3),d=l(33748);let O=(()=>{class e{constructor(R){this.gridsterItem=R}ngOnChanges(R){R.nuiGridsterItemWidgetId&&(this.gridsterItem.widgetId=this.nuiGridsterItemWidgetId)}}return e.\u0275fac=function(R){return new(R||e)(r.Y36(d.IM,3))},e.\u0275dir=r.lG2({type:e,selectors:[["","nuiGridsterItemWidgetId",""]],inputs:{nuiGridsterItemWidgetId:"nuiGridsterItemWidgetId"},features:[r.TTD]}),e})()},44994:(ne,B,l)=>{"use strict";l.d(B,{t:()=>D});var r=l(90733),d=l.n(r),O=l(77579),e=l(63900),S=l(82722),R=l(34575),N=l(67517),C=l(53450),p=l(75946),v=l.n(p),g=l(68306),G=l(60515),y=l(39646),F=l(70262),w=l(5e3),b=l(30652);let A=(()=>{class T{constructor(L){this.logger=L,this.updateDashboard=U=>X=>new g.y(q=>X.subscribe(oe=>{oe&&U.removeWidget(oe),q.next()}))}handleRemove(L,U,X,q){return this.tryRemove(q,U,X).pipe(this.updateDashboard(L))}tryRemove(L,U,X){return v()(L)?L(U,X).pipe((0,F.K)(q=>(this.logger.error(q),G.E))):(0,y.of)(U)}}return T.\u0275fac=function(L){return new(L||T)(w.LFG(b.mQy))},T.\u0275prov=w.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();var W=l(32656);let D=(()=>{class T{constructor(L,U,X,q){this.dashboardComponent=L,this.widgetEditorService=U,this.widgetRemovalService=X,this.widgetTypesService=q,this.destroy$=new O.x}ngOnInit(){this.dashboardComponent.eventBus.getStream(C.Ef).pipe((0,e.w)(L=>{const U=this.dashboardComponent.dashboard.widgets[L.widgetId],X=this.widgetTypesService.getWidgetType(U.type,U.version);return this.widgetEditorService.open({dashboardComponent:this.dashboardComponent,formPizzagna:X.configurator,paths:X.paths.configurator,widget:U,trySubmit:this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.trySubmit})}),(0,S.R)(this.destroy$)).subscribe(),this.dashboardComponent.eventBus.getStream(C.y4).pipe((0,e.w)(L=>{if(!L.widgetId)throw new Error("event has to have widgetId");const U=L.widgetId,X=this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.tryRemove,q={dashboardComponent:this.dashboardComponent,widget:d()(this.dashboardComponent.dashboard.widgets[U])};return this.widgetRemovalService.handleRemove(this.dashboardComponent,U,q,X)}),(0,S.R)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return T.\u0275fac=function(L){return new(L||T)(w.Y36(R.M,3),w.Y36(N.s),w.Y36(A),w.Y36(W.x))},T.\u0275dir=w.lG2({type:T,selectors:[["","nuiWidgetEditor",""]],inputs:{dashboardPersistenceHandler:["nuiWidgetEditor","dashboardPersistenceHandler"]}}),T})()},22783:(ne,B,l)=>{"use strict";l.d(B,{n:()=>N});var r=l(21503),d=l.n(r),O=l(50772),e=l.n(O),S=l(68921),R=l.n(S);function N(v,...g){const G=g.filter(b=>void 0!==b.previousValue||void 0!==b.currentValue);if(!e()(G,b=>b.currentValue!==b.previousValue))return v;if(1===G.length)return G[0].currentValue;const y=function p(v){for(const g of v){const G=typeof g.currentValue;if("undefined"!==G&&null!=g.currentValue)return d()(g.currentValue)?"object"==typeof g.currentValue[0]?"object[]":"array":g.currentValue.constructor!==Object?"advanced":G}return"undefined"}(G);return["object","object[]"].includes(y)?R()(...G.map(b=>"object"==typeof b.currentValue?Object.keys(b.currentValue||{}):[])).reduce((b,A)=>{const W=null==v||void 0===v[A]?void 0:v[A],D=G.map(T=>({previousValue:void 0===T.previousValue||null==T.previousValue?void 0:T.previousValue[A],currentValue:void 0===T.currentValue||null==T.currentValue?void 0:T.currentValue[A]}));return b[A]=N(W,...D),b},"object[]"===y?[]:{}):function C(v){for(let g=v.length-1;g>=0;g--){const G=v[g].currentValue;if(void 0!==G)return G}}(G)}},87686:(ne,B,l)=>{"use strict";l.d(B,{R:()=>y});var r=l(5e3),d=l(30652),O=l(22783),e=l(53450),S=l(25878),R=l(1892),N=l(42339),C=l(69808),p=l(47969),v=l(47429);function g(F,w){}function G(F,w){if(1&F){const b=r.EpF();r.ynx(0)(1,1,2),r.NdJ("output",function(W){return r.CHM(b),r.oxw().onOutput(W)}),r.YNc(3,g,0,0,"ng-template",3),r.NdJ("attached",function(W){return r.CHM(b),r.MAs(2).attached(W)}),r.BQk()()}if(2&F){const b=r.MAs(2),A=r.oxw();r.xp6(1),r.Q6J("componentId",A.rootNode)("componentType",null==A.pizza[A.rootNode]?null:A.pizza[A.rootNode].componentType)("properties",null==A.pizza[A.rootNode]?null:A.pizza[A.rootNode].properties)("providers",null==A.pizza[A.rootNode]?null:A.pizza[A.rootNode].providers)("outputs",A.outputs),r.xp6(2),r.Q6J("cdkPortalOutlet",b.portal)}}let y=(()=>{class F{constructor(b,A,W){this.pizzagnaService=b,this.logger=A,this.eventBus=W,this.rootNode=e.XM,this.pizzagnaChange=new r.vpe,this.output=new r.vpe,W.getStream(e.M).subscribe(D=>{const T=(0,d.zdu)(this.pizzagna,D.payload.path,D.payload.value);this._pizzagnaBuffer=T,this.pizzagnaChange.emit(T)})}get pizzagna(){return this._pizzagnaBuffer||this._pizzagna}set pizzagna(b){this._pizzagna=b,this._pizzagnaBuffer=null}ngOnChanges(b){if(b.pizzagna){const A=b.pizzagna.previousValue;this.pizzagnaService.updatePizzagna(this.pizzagna),this.pizza=this.mergePizzagnaIntoPizza(this.pizza,A,this.pizzagna),this.pizza&&!this.pizza[this.rootNode]&&this.logger.warn("Pizzagna doesn't contain root node '"+this.rootNode+"'. Pizzagna = ",this.pizzagna),this.pizzagnaService.updateComponents(this.pizza)}}onOutput(b){this.output.emit(b)}mergePizzagnaIntoPizza(b,A,W){return(0,O.n)(b,this.getLayerChanges(A,W,S.xW.Structure),this.getLayerChanges(A,W,S.xW.Configuration),this.getLayerChanges(A,W,S.xW.Data))}getLayerChanges(b,A,W){return{previousValue:this.getLayerSafe(b,W),currentValue:this.getLayerSafe(A,W)}}getLayerSafe(b,A){return b&&b[A]}}return F.\u0275fac=function(b){return new(b||F)(r.Y36(N.p),r.Y36(d.mQy),r.Y36(S.nY))},F.\u0275cmp=r.Xpm({type:F,selectors:[["nui-pizzagna"]],inputs:{rootNode:"rootNode",pizzagna:"pizzagna",outputs:"outputs"},outputs:{pizzagnaChange:"pizzagnaChange",output:"output"},features:[r._Bn([N.p,R.v,{provide:S.nY,useClass:d.Ndp}]),r.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(b,A){1&b&&r.YNc(0,G,4,6,"ng-container",0),2&b&&r.Q6J("ngIf",A.pizza&&A.pizza[A.rootNode])},directives:[C.O5,p.$,v.Pl],encapsulation:2}),F})()},47969:(ne,B,l)=>{"use strict";l.d(B,{$:()=>F});var r=l(5e3),d=l(21503),O=l.n(d),e=l(90377),S=l.n(e),R=l(19574),N=l.n(R),C=l(4707),p=l(77579),v=l(82722),g=l(98864),G=l(30652),y=l(94526);let F=(()=>{class w{constructor(A,W,D,T,h){this.injector=A,this.logger=W,this.portalService=D,this.renderer=T,this.providerRegistry=h,this.output=new r.vpe,this.propertiesChanges=new C.t,this.providerInstances={},this.destroy$=new p.x}ngOnInit(){this.logger.debug("Portal created:",this.componentId),this.recreatePortal()}ngAfterViewInit(){Object.keys(this.providerInstances).forEach(A=>{const W=this.providerInstances[A];W.ngAfterViewInit&&W.ngAfterViewInit()})}ngOnChanges(A){let W=!1;const D=A.providers;D&&!D.isFirstChange()&&(this.checkForProviderChanges(D)?(this.logger.debug("Portal recreated (provider change):",this.componentId),this.recreatePortal(),W=!0):this.updateProviderConfigurations(D)),A.componentType&&!A.componentType.isFirstChange()&&!W&&(this.logger.debug("Portal recreated (component change):",this.componentId),this.recreatePortal()),A.properties&&this.propertiesChanges.next(A.properties)}ngOnDestroy(){this.logger.debug("Portal destroyed:",this.componentId),this.destroyProviders(),this.destroy$.next(),this.destroy$.complete()}attached(A){this.component=A.instance,this.renderer.listen(A.location.nativeElement,"click",W=>{(W.ctrlKey||W.metaKey)&&W.shiftKey&&0===W.button&&(console.log("==================== PIZZAGNA DUMP ========================="),console.log("componentId:",this.componentId),console.log("component:",this.component),console.log("componentType:",this.componentType),console.log("properties:",this.properties),console.log("providers:",this.providers),console.log("providerInstances:",this.providerInstances),console.log("============================================================"))});for(const W of Object.keys(this.providerInstances)){const D=this.providerInstances[W];D.setComponent&&D.setComponent(this.component,this.componentId),D.setProviders&&D.setProviders(this.providerInstances,this.componentId)}this.subscribeToOutputs(),this.changesSubscription=this.propertiesChanges.pipe((0,v.R)(this.destroy$)).subscribe(W=>this.applyPropertiesChange(W))}recreatePortal(){this.changesSubscription&&(this.changesSubscription.unsubscribe(),this.changesSubscription=void 0,this.propertiesChanges=new C.t);let A=this.injector;if(this.destroyProviders(),this.providers&&(A=this.updateProviders(A)),this.portal=this.portalService.createComponentPortal(this.componentType,A),this.properties)for(const W of Object.keys(this.properties))this.propertiesChanges.next(new r.WD2(void 0,this.properties,!0))}updateProviders(A){const W=Object.keys(this.providers),D=W.reduce((h,L)=>(this.providers[L].providerId&&(h[L]=this.providerRegistry.getProvider(this.providers[L].providerId)),h),{}),T=this.portalService.createInjector({injector:A,providers:S()(D)});this.providerInstances=W.reduce((h,L)=>{const U=D[L],X=this.providers[L];if(U){const q=T.get(U.provide,null,null),oe=O()(q)?q.find(ae=>ae instanceof U.useClass):q;if(!oe)throw new Error("Provider '"+L+"' does not exist.");oe.updateConfiguration&&X.properties&&oe.updateConfiguration(Object.assign({providerKey:L},X.properties||{})),oe.providerKey=L,h[L]=oe}else X.providerId&&this.logger.error("There's no registered provider for id",L);return h},this.providerInstances);for(const h of Object.keys(this.providerInstances)){const L=this.providerInstances[h];L.ngOnInit&&L.ngOnInit()}return T}updateProviderConfigurations(A){for(const W of Object.keys(this.providers)){if(!this.providers[W].providerId)return;const D=this.providerInstances[W];if(!D)throw new Error("Provider '"+W+"' does not exist.");const T=A.previousValue[W],h=A.currentValue[W],U=h&&h.properties;(T&&T.properties)!==U&&D.updateConfiguration&&D.updateConfiguration(Object.assign({providerKey:W},U))}}subscribeToOutputs(){if(this.outputs)for(const A of this.outputs.filter(W=>this.component[W]instanceof r.vpe))this.component[A].pipe((0,v.R)(this.destroy$)).subscribe(W=>{this.output.emit({id:A,payload:W})})}checkForProviderChanges(A){const W=A.previousValue?Object.keys(A.previousValue):[],D=A.currentValue?Object.keys(A.currentValue):[];if(W.length!==D.length||N()(W,D).length>0)return!0;const T=Object.keys(A.previousValue).map(L=>A.previousValue[L].providerId),h=Object.keys(A.currentValue).map(L=>A.currentValue[L].providerId);return N()(T,h).length>0}destroyProviders(){if(this.providerInstances)for(const A of Object.keys(this.providerInstances)){const W=this.providerInstances[A];W.ngOnDestroy&&W.ngOnDestroy(),delete this.providerInstances[A]}}applyPropertiesChange(A){let W=A.currentValue;if(!W)return;W=Object.assign(Object.assign({},W),{componentId:this.componentId});const D={};let T=!1;for(const h of Object.keys(W)){const L=this.component[h];W[h]!==L&&(T=!0,this.component[h]=W[h],this.component.ngOnChanges&&(D[h]=new r.WD2(L,W[h],A.isFirstChange())))}if(T){this.component.ngOnChanges&&this.component.ngOnChanges(D);const h=this.component.changeDetector;h?h.markForCheck():this.logger.warn(`Property 'changeDetector' is missing on component '${this.componentType}', so dynamic refresh of given component might not work.`)}}}return w.\u0275fac=function(A){return new(A||w)(r.Y36(r.zs3),r.Y36(G.mQy),r.Y36(y.$),r.Y36(r.Qsj),r.Y36(g.C))},w.\u0275dir=r.lG2({type:w,selectors:[["","nuiComponentPortal",""]],inputs:{componentId:"componentId",componentType:"componentType",properties:"properties",providers:"providers",outputs:"outputs"},outputs:{output:"output"},exportAs:["nuiComponentPortal"],features:[r.TTD]}),w})()},29614:(ne,B,l)=>{"use strict";l.d(B,{Z:()=>d});var r=l(25878);function d(O){return O.providerKey?[O.pizzagnaKey||r.xW.Data,O.componentId,"providers",O.providerKey,"properties",...O.propertyPath].join("."):[O.pizzagnaKey||r.xW.Data,O.componentId,"properties",...O.propertyPath].join(".")}},94526:(ne,B,l)=>{"use strict";l.d(B,{$:()=>R});var r=l(47429),d=l(5e3),O=l(69769),e=l(40801),S=l(30652);let R=(()=>{class N{constructor(p,v){this.componentRegistry=p,this.logger=v}createComponentPortal(p,v){let g;return g="string"==typeof p?this.componentRegistry.getComponentType(p):p,g||(this.logger.error(`Cannot Find Component Type ${p}`),g=O.q),new r.C5(g,null,v)}createInjector(p){return d.zs3.create({providers:p.providers||[],parent:p.injector,name:"Component Injector"})}}return N.\u0275fac=function(p){return new(p||N)(d.LFG(e.h),d.LFG(S.mQy))},N.\u0275prov=d.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})()},40801:(ne,B,l)=>{"use strict";l.d(B,{h:()=>O});var r=l(5e3),d=l(30652);let O=(()=>{class e{constructor(R){this.logger=R,this.components={}}registerByLateLoadKey(R){this.registerComponentType(R.lateLoadKey,R)}registerComponentType(R,N){this.components[R]=N}getComponentType(R){const N=this.components[R];return N||this.logger.warn("Component '"+R+"' not defined. Available components: "+JSON.stringify(Object.keys(this.components))),N}}return e.\u0275fac=function(R){return new(R||e)(r.LFG(d.mQy))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1892:(ne,B,l)=>{"use strict";l.d(B,{v:()=>S});var r=l(30652),d=l(25878),O=l(5e3);let S=(()=>{class R{getPizzagnaUpdatedWithComponents(C,p,v){var g;const y=null===(g=C[d.xW.Structure][p].properties)||void 0===g?void 0:g.template;return this.getPizzagnaWithChildren(C,v,y,p)}getPizzagnaWithChildren(C,p,v,g){let y=p.map(F=>({id:F,componentType:"WidgetConfiguratorSectionComponent"})).reduce((F,w)=>this.updateChildPizzagna(F,v,w),C);return y=this.getPizzagnaWithNodesSet(y,g,p),y}updateChildPizzagna(C,p,v){let g=(0,r.zdu)(C,`${d.xW.Structure}.${v.id}`,v);const G=p.map(F=>Object.assign(Object.assign({},F),{id:`${v.id}/${F.id}`}));g=G.reduce((F,w)=>(0,r.zdu)(F,`${d.xW.Structure}.${w.id}`,w),g);const y=G.map(F=>F.id);return g=this.getPizzagnaWithNodesSet(g,v.id,y),g}getPizzagnaWithNodesSet(C,p,v){return(0,r.zdu)(C,`${d.xW.Structure}.${p}.properties.nodes`,v)}}return R.\u0275fac=function(C){return new(C||R)},R.\u0275prov=O.Yz7({token:R,factory:R.\u0275fac}),R})()},42339:(ne,B,l)=>{"use strict";l.d(B,{p:()=>G});var r=l(21503),d=l.n(r),O=l(95835),e=l.n(O),S=l(4707),R=l(30652),N=l(53450),C=l(25878),p=l(29614),v=l(1892),g=l(5e3);let G=(()=>{class y{constructor(w,b){this.eventBus=w,this.dynamicComponentCreator=b,this.pizzaChanged=new S.t(1)}updatePizzagna(w){this.pizzagna=w}updateComponents(w){this.components=w,this.pizzaChanged.next(w)}getComponent(w){const b=this.components[w];if(!b)throw new Error("Component '"+w+"' is not defined!");return b}setProperty(w,b){const A="string"==typeof w?w:(0,p.Z)(w);this.eventBus.getStream(N.M).next({payload:{path:A,value:b}})}createComponentsFromTemplateWithProperties(w,b){const A=b.map(D=>D.id);let W=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,w,A);for(const D of b)for(const T of Object.keys(D.children))W=(0,R.zdu)(W,`${C.xW.Data}.${T}.properties`,D.children[T]);this.updatePizzagna(W),this.eventBus.getStream(N.M).next({payload:{path:"",value:W}})}createComponentsFromTemplate(w,b){const A=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,w,b);this.updatePizzagna(A),this.eventBus.getStream(N.M).next({payload:{path:"",value:A}})}removeComponents(w){d()(w)?w.forEach(b=>this.removeComponent(b)):this.removeComponent(w)}removeComponent(w){var b;const A=Object.assign({},this.pizzagna),D=[w,...null===(b=this.pizzagna[C.xW.Structure][w].properties)||void 0===b?void 0:b.nodes],T=[C.xW.Structure,C.xW.Configuration,C.xW.Data];for(const h of T)if(A[h])for(const L of D)A[h]=e()(A[h],L);this.eventBus.getStream(N.M).next({payload:{path:"",value:A}}),this.updatePizzagna(A)}}return y.\u0275fac=function(w){return new(w||y)(g.LFG(C.nY),g.LFG(v.v))},y.\u0275prov=g.Yz7({token:y,factory:y.\u0275fac}),y})()},29242:(ne,B,l)=>{"use strict";l.d(B,{o:()=>d});var r=l(5e3);let d=(()=>{class O{constructor(){this.events={}}registerEvent(S){this.events[S.id]=S}getEvent(S){const R=this.events[S];if(!R)throw new Error("Event with id '"+S+"' is not registered. Registered events are: "+JSON.stringify(Object.keys(this.events)));return R}}return O.\u0275fac=function(S){return new(S||O)},O.\u0275prov=r.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},60343:(ne,B,l)=>{"use strict";l.d(B,{Z:()=>O});var r=l(5e3);const d={">":{comparatorFn:(e,S)=>e>S,label:"Value is greater than"},"<":{comparatorFn:(e,S)=>e<S,label:"Value is less than"},">=":{comparatorFn:(e,S)=>e>=S,label:"Value is greater, or equal to"},"<=":{comparatorFn:(e,S)=>e<=S,label:"Value is less than, or equal to"},"==":{comparatorFn:(e,S)=>e==S,label:"Value is exactly"}};let O=(()=>{class e{constructor(){this.comparators=Object.assign({},d)}registerComparators(R){this.comparators=Object.assign(Object.assign({},this.comparators),R)}clearComparators(){this.comparators={}}getComparators(){return this.comparators}}return e.\u0275fac=function(R){return new(R||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},98864:(ne,B,l)=>{"use strict";l.d(B,{C:()=>qt});var r=l(69808),d=l(5e3),O=l(30652),e=l(26365),S=l(82722),R=l(42339),N=l(53450),C=l(25878),g=function(z,Z){return function(I,P){Z(I,P,z)}};let G=class extends e.i{constructor(Z,I,P){super(Z,I,P),this.dataSource=I,this.drillstate=[],this.eventBus.getStream(N.EC).pipe((0,S.R)(this.destroy$)).subscribe($=>{var Q;(null===(Q=this.dataSource.busy)||void 0===Q?void 0:Q.value)||this.onDrilldown($)}),this.registerFilters()}updateAdapterProperties(Z){this.dataPath=Z.dataPath,this.drillstate=Z.drillstate||this.drillstate,this.groupBy=Z.groupBy,this.componentsConfig=Z.componentsConfig,this.navigationBarId=Z.navigationBarId}updateOutput(Z){const I=this.getWidgetInput(Z,this.drillstate.length!==this.groupBy.length);if(this.pizzagnaService.setProperty(`${C.xW.Data}.${this.componentId}.properties`,I),this.navigationBarId){const Q=`${C.xW.Data}.${this.navigationBarId}.properties.navBarConfig.isRoot`,ee=`${C.xW.Data}.${this.navigationBarId}.properties.navBarConfig.buttons.back.disabled`;this.pizzagnaService.setProperty(`${C.xW.Data}.${this.navigationBarId}.properties.navBarConfig.label`,this.drillstate[this.drillstate.length-1]),this.pizzagnaService.setProperty(ee,!!this.drillstate.length),this.pizzagnaService.setProperty(Q,!this.drillstate.length)}}getWidgetInput(Z,I){return{[this.dataPath]:Z,configuration:this.componentsConfig[I?"group":"leaf"]}}onDrilldown(Z){const{payload:I}=Z;return I.reset?(this.drillstate=[],void this.eventBus.next(N.RG,{})):I.back?(this.drillstate.length=this.drillstate.length-1,void this.eventBus.next(N.RG,{})):(this.drillstate.push(I.id),void this.eventBus.next(N.RG,{}))}registerFilters(){this.dataSource.registerComponent({group:{componentInstance:{getFilters:()=>({value:this.groupBy})}},drillstate:{componentInstance:{getFilters:()=>({value:this.drillstate})}}})}};G=function(z,Z,I,P){var ee,$=arguments.length,Q=$<3?Z:null===P?P=Object.getOwnPropertyDescriptor(Z,I):P;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(z,Z,I,P);else for(var re=z.length-1;re>=0;re--)(ee=z[re])&&(Q=($<3?ee(Q):$>3?ee(Z,I,Q):ee(Z,I))||Q);return $>3&&Q&&Object.defineProperty(Z,I,Q),Q}([g(0,(0,d.tBr)(C.nY)),g(1,(0,d.tBr)(C.Fk)),function(z,Z){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Z)}(0,[O.Ndp,Object,R.p])],G);var y=l(77579);let F=(()=>{class z{constructor(I){this.eventBus=I,this.destroy$=new y.x,I.streamAdded.pipe((0,S.R)(this.destroy$)).subscribe(P=>{I.getStream({id:P}).pipe((0,S.R)(this.destroy$)).subscribe($=>{console.log(`${$.id}: `,$.payload)})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var w=l(38046),b=l(60343);let A=(()=>{class z{constructor(I,P,$){this.dataSource=I,this.pizzagnaService=P,this.destroy$=new y.x,this.propertyPath="backgroundColor",this.comparators=$.getComparators()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateConfiguration(I){(null==I?void 0:I.rules)&&(this.rules=null==I?void 0:I.rules,this.subscribeToDataChanges(),this.checkColorConditions())}setComponent(I,P){this.subscribeToDataChanges(),this.componentId=P}subscribeToDataChanges(){var I;!this.dataSource||(null===(I=this.dsSubscription$)||void 0===I||I.unsubscribe(),this.dsSubscription$=this.dataSource.outputsSubject.pipe((0,S.R)(this.destroy$)).subscribe(P=>{var $;this.latestValueFromDS=(null===($=P.result)||void 0===$?void 0:$.value)||this.latestValueFromDS,this.checkColorConditions()}))}checkColorConditions(){var I,P;if(!this.rules)return;if(0===this.rules.length)return this.setColor(void 0),void(null===(I=this.dsSubscription$)||void 0===I||I.unsubscribe());let $;const Q=this.rules&&[...this.rules].reverse();for(const ee of Q)if(null===(P=this.comparators[ee.comparisonType])||void 0===P?void 0:P.comparatorFn(this.latestValueFromDS,ee.value)){$=ee.color;break}this.setColor($)}setColor(I){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:[this.propertyPath]},I)}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.Fk,8),d.LFG(R.p),d.LFG(b.Z))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var W=l(33816),D=l.n(W),T=(()=>{return(z=T||(T={})).Warning="var(--nui-color-semantic-warning)",z.Critical="var(--nui-color-semantic-critical)",T;var z})(),X=function(z,Z){return function(I,P){Z(I,P,z)}};let q=class extends e.i{constructor(Z,I,P,$){super(Z,I,P),this.numberPipe=$}updateConfiguration(Z){this.thresholds=Z.thresholds,super.updateConfiguration(Z)}processOutput(Z){const I=this.processThresholds(Z);return this.processNumberFormat(I)}setComponent(Z,I){I&&(this.componentId=I)}getThresholdColor(Z,I,P){const $=this.getThresholdChecks(Z,I,Z.reversedThresholds);return $.warningCheck?T.Warning:$.criticalCheck?T.Critical:P}getThresholdChecks(Z,I,P){const $=Z.warningThresholdValue,Q=Z.criticalThresholdValue,ee=!D()($)&&I.value<=$&&I.value>Q,re=I.value<=Q,he=!D()($)&&I.value>=$&&I.value<Q;return{warningCheck:P?ee:he,criticalCheck:P?re:I.value>=Q}}processThresholds(Z){var I;if(!Z||!(null===(I=this.thresholds)||void 0===I?void 0:I.showThresholds)||"number"!=typeof Z.value)return Z;const P=this.getThresholdColor(this.thresholds,Z,Z.backgroundColor);return Object.assign(Object.assign({},Z),{backgroundColor:P})}processNumberFormat(Z){if("number"!=typeof(null==Z?void 0:Z.value)||!(null==Z?void 0:Z.numberFormat))return Z;const I=this.numberPipe.transform(Z.value,Z.numberFormat);return Object.assign(Object.assign({},Z),{value:I})}};q=function(z,Z,I,P){var ee,$=arguments.length,Q=$<3?Z:null===P?P=Object.getOwnPropertyDescriptor(Z,I):P;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Q=Reflect.decorate(z,Z,I,P);else for(var re=z.length-1;re>=0;re--)(ee=z[re])&&(Q=($<3?ee(Q):$>3?ee(Z,I,Q):ee(Z,I))||Q);return $>3&&Q&&Object.defineProperty(Z,I,Q),Q}([X(0,(0,d.tBr)(C.nY)),X(1,(0,d.FiY)()),X(1,(0,d.tBr)(C.Fk)),function(z,Z){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",Z)}(0,[O.Ndp,Object,R.p,r.JJ])],q);var oe=l(21503),ae=l.n(oe),_e=l(61135),te=l(39300),se=l(71884),J=l(18505);let j=(()=>{class z{constructor(I,P){this.eventBus=I,this.pizzagnaService=P,this.brokers=[],this.builder=new le(this.brokers),this.destroySubscriptions$=new y.x,this.getMin=$=>Math.min(...$),this.getMax=$=>Math.max(...$),this.valuesObject=this.builder.valuesObject}updateConfiguration(I){this.properties=I,this.componentId&&this.createPropertiesAndSubscribeToBrokers()}configure(){return this.builder}getBrokers(){return this.brokers}subscribeToBrokers(){this.destroy(),this.brokers.forEach(I=>{I.in$.pipe((0,te.h)(P=>!!I.in$.observers.length),(0,se.x)(),(0,J.b)(P=>this.configureValueModel(P)),(0,J.b)(P=>this.processAndEmitSyncedValue(P,I)),(0,S.R)(this.destroySubscriptions$)).subscribe()})}setComponent(I,P){this.componentId=P,this.updateConfiguration(this.properties)}destroy(){this.destroySubscriptions$.next(),this.destroySubscriptions$.complete()}processAndEmitSyncedValue(I,P){let $=this.getMin;(null==P?void 0:P.type)&&($="min"===P.type?this.getMin:this.getMax);const Q=this.valuesObject[P.id].filter(ee=>ee.targetID&&ee.targetValue).map(ee=>ee.targetValue);P.out$.next(Object.assign(Object.assign({},I),{targetValue:$([...Q])}))}configureValueModel(I){const P=this.valuesObject[I.id].filter($=>$.targetID===I.targetID);P.length?P[0].targetValue=I.targetValue:this.valuesObject[I.id].push({targetID:I.targetID,targetValue:I.targetValue})}createPropertiesAndSubscribeToBrokers(){var I,P;this.tileNodes=null===(I=this.pizzagnaService.getComponent(this.componentId).properties)||void 0===I?void 0:I.nodes;const{scaleSyncConfig:$}=this.properties;(null===(P=this.tileNodes)||void 0===P?void 0:P.length)&&(this.tileNodes.forEach((Q,ee)=>{this.pizzagnaService.setProperty({componentId:Q,pizzagnaKey:C.xW.Data,propertyPath:["syncValuesBroker"]},this.getBrokers())}),$&&ae()($)&&($.forEach(Q=>this.configure().addBroker({id:Q.id,type:null==Q?void 0:Q.type})),this.subscribeToBrokers()))}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();class le{constructor(Z){this.brokers=Z,this.valuesObject={}}addBroker(Z){const I={id:Z.id,targetID:"",targetValue:1};return this.valuesObject[Z.id]=new Array,this.brokers.push(Object.assign(Object.assign({},Z),this.getDefaultBrokerObject(I,I))),this}getDefaultBrokerObject(Z,I){return{in$:new _e.X(Z),out$:new _e.X(I)}}}var ie=l(71973),fe=l.n(ie),ve=l(30836),we=l.n(ve),ze=l(81466);let Ee=(()=>{class z{constructor(I,P){this.eventBus=I,this.pizzagnaService=P,this.destroy$=new y.x,this.eventBus.getStream(ze.PF).pipe((0,S.R)(this.destroy$)).subscribe($=>{this.handleDataSourceOutput($)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(I,P){this.componentId=P}handleDataSourceOutput(I){var P,$,Q,ee;this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:C.xW.Data},void 0!==(null===($=null===(P=I.payload)||void 0===P?void 0:P.error)||void 0===$?void 0:$.type)?null===(ee=null===(Q=I.payload)||void 0===Q?void 0:Q.error)||void 0===ee?void 0:ee.type.toString():void 0)}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})(),et=(()=>{class z extends Ee{constructor(I,P){super(I,P),this.multipleErrorFallbackKey=C.WE.Unknown,this.errorMap={},this.eventBus.getStream(ze.yX).pipe((0,S.R)(this.destroy$)).subscribe($=>{this.handleDataSourceDestroyed($)})}updateConfiguration(I){I.multipleErrorFallbackKey&&(this.multipleErrorFallbackKey=I.multipleErrorFallbackKey)}handleDataSourceOutput(I){this.errorMap=this.updateErrorMap(I),this.setFallbackKeyProperty()}handleDataSourceDestroyed(I){var P;(null===(P=I.payload)||void 0===P?void 0:P.componentId)&&delete this.errorMap[I.payload.componentId],this.setFallbackKeyProperty()}setFallbackKeyProperty(){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:C.xW.Data},this.getFallbackKey())}getFallbackKey(){if(fe()(this.errorMap))return;const I=we()(Object.values(this.errorMap));return 1===I.length?I[0]:this.multipleErrorFallbackKey}updateErrorMap(I){var P,$,Q,ee;const re=this.errorMap,he=void 0!==(null===($=null===(P=I.payload)||void 0===P?void 0:P.error)||void 0===$?void 0:$.type)?null===(ee=null===(Q=I.payload)||void 0===Q?void 0:Q.error)||void 0===ee?void 0:ee.type.toString():void 0;return he?he&&(re[I.payload.componentId]=he):delete re[I.payload.componentId],re}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})(),ut=(()=>{class z{constructor(I,P){this.eventBus=I,this.pizzagnaService=P,this.loadingMap={},this.destroy$=new y.x,this.eventBus.getStream(N.QD).pipe((0,S.R)(this.destroy$)).subscribe(({payload:$})=>{(null==$?void 0:$.componentId)&&((null==$?void 0:$.busy)?this.loadingMap[$.componentId]=!0:delete this.loadingMap[$.componentId]),this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["active"],pizzagnaKey:C.xW.Data},!fe()(this.loadingMap))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(I,P){this.componentId=P}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var pt=l(8817),Re=l.n(pt),je=l(54004);const at=/\{.*?\}/g,gt=/\{|\}/g;function ht(z,Z){const I=z.match(at);if(!I)return z;let P=z;for(const $ of I){const Q=mt($);Z[Q]?P=P.replace($,Z[Q]):console.warn(`There's no ${$} key found in the data: ${Z}`)}return P}const mt=z=>z.replace(gt,"");let lt=(()=>{class z{constructor(I){this.pizzagnaService=I,this.defaultTrackOn="pizzagna",this.subscriptions=[]}setComponent(I,P){this.component=I,this.componentId=P,this.parentComponentId=function st(z){const Z=z.split("/");return(null==Z?void 0:Z.length)>1?Z[Z.length-2]:z}(P),this.initChangeSubscriptions()}updateConfiguration(I){this.configs=null==I?void 0:I.configs}initChangeSubscriptions(){for(const I of this.configs){const P=this.getObservableFor(I);if(!P)return void console.warn("no observable found on 'PizzagnaBroadcasterService', for part: ",I);const $=P.subscribe(Q=>{for(const ee of I.paths){const re=ht(ee,this);this.pizzagnaService.setProperty(re,Q)}});this.subscriptions.push($)}}getObservableFor(I){return"component"===(I.trackOn||this.defaultTrackOn)?this.getComponentObservableFor(I):this.getPizzagnaObservableFor(I)}getPizzagnaObservableFor(I){return this.pizzagnaService.pizzaChanged.pipe((0,je.U)(P=>Re()(P,I.key)),(0,se.x)())}getComponentObservableFor(I){const P=Re()(this.component,I.key);return null==P?void 0:P.pipe((0,se.x)())}ngOnDestroy(){for(const I of this.subscriptions)I.unsubscribe()}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var dt=l(97674),de=l(61455),ye=l(42296),Lt=l(10948),Gt=l(59551),vt=l(61874),wt=l(16372),ct=l.n(wt),nt=l(36216),Ne=l(45122);let H=(()=>{class z extends nt.a{constructor(I,P,$){super(I,P,$)}get previewComponentId(){return this.componentId.split("/")[0]}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),P=this.formParts.reduce(($,Q)=>{const ee=`${this.previewComponentId}.${Q.previewPath}`,re=Re()(I,ee);if(re)for(const he of Q.keys)void 0!==re[he]&&($=(0,O.zdu)($,`${C.xW.Data}.${this.componentId}.properties.${he}`,re[he]));return $},this.pizzagnaService.pizzagna);this.updateFormPizzagna(P)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(P=>{const $=this.formParts.reduce((Q,ee)=>{let re=ee.previewOutputPath||ee.previewPath;re=`${this.previewComponentId}.${re}`;const he=Re()(Q,re),Ie=ct()(P,ee.keys),He=Object.assign(Object.assign({},he),Ie);return(0,O.zdu)(Q,`${re}`,He)},this.getPreview());this.updatePreview($)})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var u=l(75675),c=l(60167);let m=(()=>{class z extends nt.a{constructor(I,P,$){super(I,P,$)}get previewComponentId(){return this.componentId.split("/")[0]}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),P=this.formParts.reduce(($,Q)=>{const ee=Re()(I,Q.previewPath),re=null==ee?void 0:ee.find(Ie=>Ie.id===this.previewComponentId),he=ct()(re,Q.keys);return(0,O.zdu)($,`${C.xW.Data}.${this.componentId}.properties`,he)},this.pizzagnaService.pizzagna);this.updateFormPizzagna(P)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(P=>{const $=this.formParts.reduce((Q,ee)=>{const re=ee.previewOutputPath||ee.previewPath,he=Re()(Q,re),Ie=he.findIndex(ti=>ti.id===this.previewComponentId),He=he[Ie],Et=ct()(P,ee.keys),ei=Object.assign(Object.assign({},He),Et);return(0,O.zdu)(Q,`${re}[${Ie}]`,ei)},this.getPreview());this.updatePreview($)})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})(),E=(()=>{class z extends nt.a{constructor(I,P,$){super(I,P,$)}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),P=this.formParts.reduce(($,Q)=>{const ee=Re()(I,Q.previewPath);if(ee)for(const re of Q.keys)void 0!==ee[re]&&($=(0,O.zdu)($,`${C.xW.Data}.${this.componentId}.properties.${re}`,ee[re]));return $},this.pizzagnaService.pizzagna);this.updateFormPizzagna(P)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(P=>{const $=this.formParts.reduce((Q,ee)=>{const re=ee.previewOutputPath||ee.previewPath,he=Re()(Q,re),Ie=ct()(P,ee.keys),He=Object.assign(Object.assign({},he),Ie);return(0,O.zdu)(Q,re,He)},this.getPreview());this.updatePreview($)})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var k=l(42911),Y=l(52382),ue=l(64509),Te=l.n(ue),me=l(68675),Pe=l(94813);let Ve=(()=>{class z extends nt.a{constructor(I,P,$){super(I,P,$)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var I,P,$,Q;const ee=null===(I=this.getPreview())||void 0===I?void 0:I.table,re=null===(P=null==ee?void 0:ee.properties)||void 0===P?void 0:P.dataFields,he=null===(Q=null===($=null==ee?void 0:ee.properties)||void 0===$?void 0:$.configuration)||void 0===Q?void 0:Q.columns;let Ie=this.pizzagnaService.pizzagna;Ie=(0,O.zdu)(Ie,`${C.xW.Data}.columns.properties.columns`,null!=he?he:[]),Ie=(0,O.zdu)(Ie,`${C.xW.Data}.columns.properties.dataFields`,re),this.updateFormPizzagna(Ie)}toPreview(I){const P=I.contains("columnsOutput")?I.get("columnsOutput"):I.get("columns");if(!P)throw new Error("FormControl is not defined!");P.valueChanges.pipe((0,S.R)(this.destroy$),(0,se.x)(Te())).subscribe($=>{setTimeout(()=>{const re=this.getPreview();this.updatePreview((0,O.zdu)(re,"table.properties.configuration.columns",$))});let ee=this.pizzagnaService.pizzagna;setTimeout(()=>{var re,he,Ie,He,Et;ee=(0,O.zdu)(ee,`${C.xW.Structure}.columns.properties.template`,null===(re=this.pizzagnaService.pizzagna[C.xW.Structure].columns.properties)||void 0===re?void 0:re.template),ee=(0,O.zdu)(ee,`${C.xW.Data}.filters.properties.columns`,$),ee=(0,O.zdu)(ee,`${C.xW.Structure}.presentation.properties.nodes`,[...null!==(Et=null===(He=null===(Ie=null===(he=null==ee?void 0:ee.structure)||void 0===he?void 0:he.presentation)||void 0===Ie?void 0:Ie.properties)||void 0===He?void 0:He.nodes)&&void 0!==Et?Et:[]]),this.updateFormPizzagna(ee)})}),this.subscribeToColumnsValueChange()}subscribeToColumnsValueChange(){var I;null===(I=this.component.form.get("columnsOutput"))||void 0===I||I.valueChanges.pipe((0,me.O)(this.component.form.get("columnsOutput").value),(0,te.h)(P=>P.length>0),(0,J.b)(()=>this.handleWidthValidation()),(0,je.U)(P=>this.filterColumnsWithoutSpecifiedWidth(P)),(0,je.U)(P=>this.handleColumnsWithoutSpecifiedWidth(P)),function Oe(z,Z){return(0,se.x)((I,P)=>Z?Z(I[z],P[z]):I[z]===P[z])}("id"),(0,Pe.j)("id"),(0,S.R)(this.destroy$)).subscribe(P=>this.setWidthMessages(P))}filterColumnsWithoutSpecifiedWidth(I){return I.filter(P=>P.isActive&&!P.width)}handleColumnsWithoutSpecifiedWidth(I){switch(I.length){case 0:{const P=this.component.form.get("columns").controls.filter(Q=>Re()(Q,`value.properties[${Q.value.id}/description].isActive`));if(fe()(P))return{id:void 0,label:void 0};const $=P[P.length-1];return console.warn(`Cannot set width for all columns. Resetting "${$.value.label}" width.`),$.patchValue({width:null},{emitEvent:!1}),$.value}case 1:return I[0];default:return{id:void 0,label:void 0}}}handleWidthValidation(){this.component.form.get("columns").controls.forEach(I=>{var P;const Q=I.get(`properties.${I.value.id}/description`);if(!Q)return;const ee=null===(P=Q.get("isActive"))||void 0===P?void 0:P.value,re=Q.get("width");ee?(null==re||re.setValidators([Y.kI.min(62)]),null==re||re.markAllAsTouched(),null==re||re.updateValueAndValidity({emitEvent:!1})):(null==re||re.clearValidators(),null==re||re.updateValueAndValidity({emitEvent:!1}))})}setWidthMessages(I){var P;if(!this.pizzagnaService.pizzagna)return;const $="isWidthMessageDisplayed",{pizzagna:Q}=this.pizzagnaService;(null===(P=Q.data.columns.properties)||void 0===P?void 0:P.columns).forEach(re=>this.pizzagnaService.setProperty(`${C.xW.Data}.${re.id}/description.properties.${$}`,!1)),I&&this.pizzagnaService.setProperty(`${C.xW.Data}.${I}/description.properties.${$}`,!0)}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})(),Be=(()=>{class z extends nt.a{constructor(I,P,$){super(I,P,$)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var I,P,$,Q,ee;let re=this.pizzagnaService.pizzagna;const he=null===(I=this.getPreview())||void 0===I?void 0:I.table,Ie=null===($=null===(P=null==he?void 0:he.properties)||void 0===P?void 0:P.configuration)||void 0===$?void 0:$.columns,He=null===(ee=null===(Q=null==he?void 0:he.properties)||void 0===Q?void 0:Q.configuration)||void 0===ee?void 0:ee.sorterConfiguration;re=(0,O.zdu)(re,`${C.xW.Data}.filters.properties.columns`,Ie),re=(0,O.zdu)(re,`${C.xW.Data}.filters.properties.sorterConfiguration`,He),this.updateFormPizzagna(re)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(P=>{let $=this.getPreview();$=(0,O.zdu)($,"table.properties.configuration.sorterConfiguration",P.sorterConfiguration),this.updatePreview($),this.buildForm()})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})(),Le=(()=>{class z extends nt.a{constructor(I,P,$,Q){super(I,P,$),this.timeframeService=Q}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){let I=this.pizzagnaService.pizzagna;const P=this.getPreview(),$=Object.keys(this.timeframeService.currentPresets).map(Ie=>({id:Ie,name:this.timeframeService.currentPresets[Ie].name})),Q=`${C.xW.Data}.timeseriesMetadata.properties`;I=(0,O.zdu)(I,`${Q}.timeSpans`,$);const ee=Re()(P,"timeframeSelection.properties.timeframe.selectedPresetId","last7Days"),re=$.find(Ie=>Ie.id===ee);re&&(I=(0,O.zdu)(I,`${Q}.startingTimespan`,re));const he=Re()(P,"chart.properties.configuration");he&&(I=(0,O.zdu)(I,`${Q}.legendPlacement`,he.legendPlacement),I=(0,O.zdu)(I,`${Q}.leftAxisLabel`,he.leftAxisLabel),I=(0,O.zdu)(I,`${Q}.preset`,he.preset)),this.updateFormPizzagna(I)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(P=>{let $=this.getPreview();const Q=Re()(P,"startingTimespan.id");Q&&($=(0,O.zdu)($,"timeframeSelection.properties.timeframe.selectedPresetId",Q));const ee="chart.properties.configuration";$=(0,O.zdu)($,`${ee}.legendPlacement`,Re()(P,"legendPlacement","")),$=(0,O.zdu)($,`${ee}.leftAxisLabel`,Re()(P,"leftAxisLabel","")),$=(0,O.zdu)($,`${ee}.preset`,Re()(P,"preset","")),this.updatePreview($)})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p),d.LFG(O.hYR))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var We=l(41294);let tt=(()=>{class z extends nt.a{constructor(I,P,$){super(I,P,$),this.previewSeriesPath=`chart.providers.${C.Mu.Adapter}.properties.series`}get previewComponentId(){return this.componentId.split("/")[0]}buildForm(){const P=Re()(this.getPreview(),this.previewSeriesPath,[]).find(ee=>ee.id===this.previewComponentId),Q=(0,O.zdu)(this.pizzagnaService.pizzagna,`${C.xW.Data}.${this.componentId}.properties`,{selectedSeriesId:P&&P.selectedSeriesId});this.updateFormPizzagna(Q)}toPreview(I){I.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(P=>{const $=P.id,Q=this.getPreview(),ee=Re()(Q,this.previewSeriesPath,[]),re=ee.findIndex(he=>he.id===this.previewComponentId);if(re>-1){const he=[...ee];he[re]=Object.assign(Object.assign({},he[re]),{selectedSeriesId:$});const Ie=(0,O.zdu)(Q,`${this.previewSeriesPath}`,he);this.updatePreview(Ie)}})}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(C.nY),d.LFG(Ne.m),d.LFG(R.p))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac}),z})();var $e=l(27463),yt=l(29242),ot=l(47243),De=l(99567),Ut=l(63776),Fe=l(294);let qt=(()=>{class z{constructor(I){this.logger=I,this.staticProviders={},this.setProviders({[N.tc]:{provide:dt.q,deps:[C.nY,d.R0b,de.g]},[N.GN]:{provide:Fe.q,deps:[C.nY,[new d.FiY,C.Bc],[new d.FiY,Ut.I],yt.o,R.p]},[N.bZ]:{provide:e.i,deps:[C.nY,[new d.FiY,C.Fk],R.p]},[N.l5]:{provide:ye.Y,deps:[C.nY,[new d.FiY,C.Fk],R.p,O.zCP]},[N.R9]:{provide:Lt.f,deps:[C.nY,[new d.FiY,C.Fk],R.p]},[N.u1]:{provide:q,deps:[C.nY,[new d.FiY,C.Fk],R.p,r.JJ]},[N.mf]:{provide:G,deps:[C.nY,[new d.FiY,C.Fk],R.p]},[N.tS]:{provide:A,deps:[[new d.FiY,C.Fk],R.p,b.Z]},[N.j4]:{provide:$e.l,useClass:k.c,deps:[C.nY,Ne.m,R.p]},[N.dz]:{provide:$e.l,useClass:c.M,deps:[C.nY,Ne.m,R.p]},[N.ns]:{provide:$e.l,useClass:u.l,deps:[C.nY,Ne.m,R.p]},[N.YN]:{provide:$e.l,useClass:H,deps:[C.nY,Ne.m,R.p]},[N.VX]:{provide:$e.l,useClass:E,deps:[C.nY,Ne.m,R.p]},[N.Es]:{provide:$e.l,useClass:m,deps:[C.nY,Ne.m,R.p]},[N.Gq]:{provide:$e.l,useClass:tt,deps:[C.nY,Ne.m,R.p,O.hYR]},[N.dZ]:{provide:$e.l,useClass:Le,deps:[C.nY,Ne.m,R.p,O.hYR]},[N.Ip]:{provide:$e.l,useClass:We.w,deps:[C.nY,Ne.m,R.p]},[N.n5]:{provide:$e.l,useClass:Ve,deps:[C.nY,Ne.m,R.p]},[N.LU]:{provide:$e.l,useClass:Be,deps:[C.nY,Ne.m,R.p]},[N.IG]:{provide:ut,deps:[C.nY,R.p]},[N.Cz]:{provide:Ee,deps:[C.nY,R.p]},[N.C]:{provide:et,deps:[C.nY,R.p]},[N.$u]:{provide:j,deps:[C.nY,R.p]},[N.DJ]:{provide:w.O,deps:[C.nY,"windowObject",O.mQy,De.v]},[N.F]:{provide:F,deps:[C.nY]},[N.Vx]:{provide:O.zCP,deps:[]},[N.m_]:{provide:lt,deps:[R.p]},[N.Hp]:{provide:C.m4,useExisting:ot.C,deps:[R.p]},[N.s6]:{provide:C.m4,useExisting:ot.YX,deps:[R.p]},[N.rf]:{provide:C.m4,useExisting:ot.UA,deps:[R.p]},[N.Xh]:{provide:vt.q,deps:[C.nY,[new d.FiY,Gt.e]]}})}setProviders(I){this.staticProviders=Object.assign({},this.staticProviders,I)}getProvider(I){const P=this.staticProviders[I];return P||(this.logger.warn("No provider registered for id",I),this.logger.warn("Known providers:",Object.keys(this.staticProviders).join(", "))),P}getProviderInstance(I,P){return d.zs3.create({providers:[I],parent:P}).get(C.Fk)}}return z.\u0275fac=function(I){return new(I||z)(d.LFG(O.mQy))},z.\u0275prov=d.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})()},21366:(ne,B,l)=>{"use strict";l.d(B,{k:()=>S});var r=l(61135),d=l(54004),O=l(30652),e=l(5e3);let S=(()=>{class R{constructor(C,p){this.logger=C,this.className=p,this.state$=new r.X({}),this.stateChanged$=this.state$.asObservable().pipe((0,d.U)(()=>this.getItems())),this._isEmpty=!0}get stateVersion(){return this._stateVersion}get isEmpty(){return this._isEmpty}addItems(C,p={overrideExisting:!0}){const v=this.state$.value;C.forEach(g=>{!v[this.getItemKey(g)]||p.overrideExisting?v[this.getItemKey(g)]=Object.assign({},g):this.logger.warn(`Logger - ${this.className}: item with ${this.getItemKey(g)}\n                    is already registered. Skipping.`)}),this.state$.next(v),C.length>0&&this.updateStateFlags(!1)}getItem(C){return this.state$.value[C]}getItems(){return Object.values(this.state$.value)}reset(){this.state$.next({}),this.updateStateFlags(!0)}ngOnDestroy(){this.state$.complete()}updateStateFlags(C){this._isEmpty=C,this._stateVersion=(0,O.VjN)()}}return R.\u0275fac=function(C){e.$Z()},R.\u0275dir=e.lG2({type:R}),R})()},47243:(ne,B,l)=>{"use strict";l.d(B,{C:()=>S,UA:()=>N,YX:()=>R,qy:()=>C});var r=l(21366),d=l(5e3),O=l(30652);class e extends r.k{constructor(){super(...arguments),this.formattersStateChanged$=this.stateChanged$}addFormatters(v,g={overrideExisting:!0}){super.addItems(v,g)}getFormatters(){return super.getItems()}getItemKey(v){return v.componentType}}let S=(()=>{class p extends e{constructor(g){super(g,"TableFormatterRegistryService")}}return p.\u0275fac=function(g){return new(g||p)(d.LFG(O.mQy))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),R=(()=>{class p extends e{constructor(g){super(g,"KpiFormattersRegistryService")}}return p.\u0275fac=function(g){return new(g||p)(d.LFG(O.mQy))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),N=(()=>{class p extends e{constructor(g){super(g,"ProportionalDonutContentFormattersRegistryService")}}return p.\u0275fac=function(g){return new(g||p)(d.LFG(O.mQy))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),C=(()=>{class p extends e{constructor(g){super(g,"ProportionalLegendFormattersRegistryService")}}return p.\u0275fac=function(g){return new(g||p)(d.LFG(O.mQy))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},53450:(ne,B,l)=>{"use strict";l.d(B,{$u:()=>je,C:()=>Re,Cz:()=>pt,DJ:()=>st,EC:()=>h,Ef:()=>C,Es:()=>ze,F:()=>at,GN:()=>le,Gq:()=>et,Hp:()=>mt,IG:()=>ut,Ip:()=>j,LU:()=>fe,M:()=>F,MO:()=>p,N9:()=>W,QD:()=>A,R1:()=>T,R9:()=>X,RG:()=>S,VX:()=>we,Vx:()=>ht,XM:()=>e,Xh:()=>ye,Xi:()=>G,YN:()=>Ee,b1:()=>D,bZ:()=>U,dZ:()=>J,df:()=>R,dz:()=>te,j4:()=>_e,j7:()=>v,kV:()=>y,l5:()=>ve,m_:()=>gt,mf:()=>oe,n5:()=>ie,ns:()=>se,pV:()=>g,re:()=>w,rf:()=>dt,s6:()=>lt,tS:()=>ae,tc:()=>L,u1:()=>q,xZ:()=>b,y4:()=>N});var r=l(61135),d=l(4707),O=l(30652);const e="/",S=new O.JRy("REFRESH"),R=new O.JRy("SCROLL_NEXT_PAGE"),N=new O.JRy("WIDGET_REMOVE"),C=new O.JRy("WIDGET_EDIT"),p=new O.JRy("WIDGET_CREATE"),v=new O.JRy("WIDGET_READY"),g=new O.JRy("WIDGET_RESIZE"),G=new O.JRy("WIDGET_POSITION_CHANGE"),y=new O.JRy("WIDGET_SEARCH",()=>new r.X({payload:""})),F=new O.JRy("SET_PROPERTY_VALUE"),w=new O.JRy("SET_TIMEFRAME"),b=new O.JRy("PREVIEW_EVENT"),A=new O.JRy("DATA_SOURCE_BUSY"),W=new O.JRy("DASHBOARD_EDIT_MODE",()=>new d.t(1)),D=new O.JRy("INTERACTION"),T=new O.JRy("DATA_SOURCE_INVOKED"),h=new O.JRy("DRILLDOWN"),L="NOVA_DATASOURCE_INTERVAL_REFRESHER",U="NOVA_DATASOURCE_ADAPTER",X="NOVA_TIMESERIES_DATASOURCE_ADAPTER",q="NOVA_KPI_DATASOURCE_ADAPTER",oe="NOVA_DRILLDOWN_DATASOURCE_ADAPTER",ae="NOVA_KPI_COLOR_PRIORITIZER",_e="NOVA_TITLE_AND_DESCRIPTION_CONVERTER",te="NOVA_PROPORTIONAL_WIDGET_CHART_OPTIONS_CONVERTER",se="NOVA_KPI_TILES_CONVERTER",J="NOVA_TIMESERIES_METADATA_CONVERTER",j="NOVA_TIMESERIES_SERIES_CONVERTER",le="NOVA_DASHBOARD_EVENT_PROXY",ie="NOVA_TABLE_COLUMNS_CONVERTER",fe="NOVA_TABLE_FILTERS_CONVERTER",ve="NOVA_TABLE_DATASOURCE_ADAPTER",we="NOVA_GENERIC_CONVERTER",ze="NOVA_GENERIC_ARRAY_CONVERTER",Ee="NOVA_KPI_SECTION_CONVERTER",et="NOVA_TIMESERIES_TILE_INDICATOR_DATA_CONVERTER",ut="NOVA_LOADING_ADAPTER",pt="NOVA_STATUS_CONTENT_FALLBACK_ADAPTER",Re="NOVA_KPI_STATUS_CONTENT_FALLBACK_ADAPTER",je="NOVA_KPI_SCALE_SYNC_BROKER",st="NOVA_URL_INTERACTION_HANDLER",at="NOVA_EVENT_BUS_DEBUGGER",gt="NOVA_PIZZAGNA_BROADCASTER",ht="NOVA_VIRTUAL_VIEWPORT_MANAGER",mt="NOVA_TABLE_FORMATTERS_REGISTRY",lt="NOVA_KPI_FORMATTERS_REGISTRY",dt="NOVA_PROPORTIONAL_CONTENT_FORMATTERS_REGISTRY",ye="NOVA_CONFIGURATOR_DATA_SOURCE_MANAGER"},99567:(ne,B,l)=>{"use strict";l.d(B,{v:()=>O});var r=l(5e3),d=l(30652);let O=(()=>{class e{constructor(R){this.logger=R}template(R,N){const C=new RegExp(/\$\{([a-zA-Z0-9.]*)\}/g);return R.replace(C,(p,v)=>{var g;try{return null!==(g=this.evaluate(v.split("."),N))&&void 0!==g?g:""}catch(G){return this.logger.error(G),""}})}evaluate(R,N){return R.reduce((C,p)=>C[p],N)}}return e.\u0275fac=function(R){return new(R||e)(r.LFG(d.mQy))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},63776:(ne,B,l)=>{"use strict";l.d(B,{I:()=>d});var r=l(5e3);let d=(()=>{class O{updateWidget(S){this.widget=S}getWidget(){return this.widget}}return O.\u0275fac=function(S){return new(S||O)},O.\u0275prov=r.Yz7({token:O,factory:O.\u0275fac}),O})()},294:(ne,B,l)=>{"use strict";l.d(B,{q:()=>G});var r=l(12498),d=l.n(r),O=l(30836),e=l.n(O),S=l(77579),R=l(82722),N=l(42339),C=l(25878),p=l(5e3),v=l(63776),g=l(29242);let G=(()=>{class y{constructor(w,b,A,W,D){this.pizzagnaBus=w,this.dashboardBus=b,this.widgetConfigurationService=A,this.eventRegistry=W,this.pizzagnaService=D,this.upstreamSubscriptions={},this.downstreamSubscriptions={},this.destroy$=new S.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(w){this.component=w}updateConfiguration(w){this.providerKey=w.providerKey,this.upstreams=w.upstreams,this.downstreams=w.downstreams,this.upstreams&&this.registerUpstreamSubscriptions(...this.upstreams),this.downstreams&&this.registerDownstreamSubscriptions(...this.downstreams)}addUpstream(w){this.addStream(w,"upstreams")}addDownstream(w){this.addStream(w,"downstreams")}addStream(w,b){const A=e()((this[b]||[]).concat(w.id));this[b]=A,this.component&&this.pizzagnaService.setProperty({componentId:this.component.componentId,pizzagnaKey:C.xW.Data,providerKey:this.providerKey,propertyPath:[b]},A)}registerUpstreamSubscriptions(...w){!this.dashboardBus||this.registerSubscriptions(w,this.upstreamSubscriptions,this.pizzagnaBus,(b,A)=>{const W=this.widgetConfigurationService.getWidget().id;this.dashboardBus.getStream(b).next(Object.assign({},A,{widgetId:W}))})}registerDownstreamSubscriptions(...w){!this.dashboardBus||this.registerSubscriptions(w,this.downstreamSubscriptions,this.dashboardBus,(b,A)=>{const W=this.widgetConfigurationService.getWidget().id;(void 0===A.widgetId||W===A.widgetId)&&this.pizzagnaBus.getStream(b).next(A)})}registerSubscriptions(w=[],b,A,W){const D=w?d()(w,T=>T):null;for(const T of Object.keys(b))(!D||!D[T])&&(b[T].unsubscribe(),delete b[T]);for(const T of Object.keys(null!=D?D:{}).filter(h=>!b[h])){const h=this.eventRegistry.getEvent(T);b[T]=A.getStream(h).pipe((0,R.R)(this.destroy$)).subscribe(L=>{W(h,L)})}}}return y.\u0275fac=function(w){return new(w||y)(p.LFG(C.nY),p.LFG(C.Bc,8),p.LFG(v.I,8),p.LFG(g.o),p.LFG(N.p))},y.\u0275prov=p.Yz7({token:y,factory:y.\u0275fac}),y})()},32656:(ne,B,l)=>{"use strict";l.d(B,{x:()=>N});var r=l(69754),d=l.n(r),O=l(34793),e=l.n(O),S=l(25878),R=l(5e3);let N=(()=>{class C{constructor(){this.widgetTypes={}}registerWidgetType(v,g,G){let y=this.widgetTypes[v];y||(y=[],this.widgetTypes[v]=y),y.length<g&&(y.length=g),y[g-1]=G}getWidgetType(v,g){const G=this.widgetTypes[v];if(!G||0===G.length)throw new Error("Type '"+v+"' not found in the registry. Available types: "+Object.keys(this.widgetTypes).join(", "));if(void 0!==g&&(g<=0||G.length<g))throw new Error("Version "+g+" for widget type '"+v+"' not registered. Max available version is "+G.length);return G[(void 0===g?G.length:g)-1]}mergeWithWidgetType(v){const g=this.getWidgetType(v.type,v.version);return Object.assign(Object.assign({},v),{pizzagna:d()(v.pizzagna,g.widget)})}setNode(v,g,G,y){var F,w;const W=`${g}.${S.xW.Structure}.${(null===(w=null===(F=v.paths)||void 0===F?void 0:F[g])||void 0===w?void 0:w[G])||G}`;e()(v,W,y)}}return C.\u0275fac=function(v){return new(v||C)},C.\u0275prov=R.Yz7({token:C,factory:C.\u0275fac}),C})()},25878:(ne,B,l)=>{"use strict";l.d(B,{AC:()=>p,B5:()=>N,Bc:()=>O,Fk:()=>e,Mu:()=>C,Nc:()=>G,WE:()=>y,m4:()=>S,nY:()=>d,ni:()=>v,xW:()=>g});var r=l(5e3);const d=new r.OlP("PIZZAGNA_EVENT_BUS"),O=new r.OlP("DASHBOARD_EVENT_BUS"),e=new r.OlP("DATA_SOURCE"),S=new r.OlP("FORMATTERS_REGISTRY"),N=(new r.OlP("TEST_REGISTRY"),new r.OlP("HEADER_LINK_PROVIDER"));var C=(()=>{return(F=C||(C={})).DataSource="dataSource",F.Adapter="adapter",F.Converter="converter",F.Broadcaster="broadcaster",F.Refresher="refresher",F.EventProxy="eventProxy",F.LoadingAdapter="loadingAdapter",F.ContentFallbackAdapter="contentFallbackAdapter",F.InteractionHandler="interactionHandler",F.EventBusDebugger="eventBusDebugger",F.KpiColorPrioritizer="kpiColorPrioritizer",F.FormattersRegistry="formattersRegistry",F.DataSourceManager="dataSourceManager",C;var F})(),p=(()=>{return(F=p||(p={})).Root="root",F.DataSourceConfigComponentType="dataSourceConfigComponentType",F.TileDescriptionConfigComponentType="tileDescriptionConfigComponentType",F.DataSourceProviders="dataSourceProviders",F.Formatters="formatters",F.TileDescriptionBackgroundColors="tileDescriptionBackgroundColors",F.TileBackgroundColorRulesBackgroundColors="tileBackgroundColorRulesBackgroundColors",p;var F})(),v=(()=>{return(F=v||(v={})).Interactivity="interactivity",F.DisableTableColumnGeneration="disableTableColumnGeneration",v;var F})(),g=(()=>{return(F=g||(g={})).Structure="structure",F.Configuration="configuration",F.Data="data",g;var F})(),G=(()=>{return(F=G||(G={})).CRITICAL="critical",F.WARNING="warning",F.DEFAULT="default",G;var F})(),y=(()=>{return(F=y||(y={})).Unknown="0",F.Ok="200",F.Forbidden="403",F.NotFound="404",y;var F})()},55413:(ne,B,l)=>{"use strict";l.d(B,{w:()=>r});var r=(()=>{return(d=r||(r={})).None="None",d.Right="Right",d.Bottom="Bottom",r;var d})()},50793:(ne,B,l)=>{"use strict";l.d(B,{X:()=>e});var r=l(16134),d=l(61621);const e=[{componentType:l(14366).a.lateLoadKey,label:$localize`No Formatter`,dataTypes:{value:null}},{componentType:d.s.lateLoadKey,label:$localize`Link`,configurationComponent:"LinkConfiguratorComponent",dataTypes:{value:"label",link:"link"}},{componentType:r.C.lateLoadKey,label:$localize`Icon`,dataTypes:{value:"string"}}]},49018:(ne,B,l)=>{"use strict";l.d(B,{hiK:()=>Ci.h,p3D:()=>Je.p,Fk3:()=>h.Fk,ay7:()=>Ue.ay,PFv:()=>Ue.PF,vXf:()=>Pi,tFi:()=>Kl,XMI:()=>T.XM,wz0:()=>Xl,NlZ:()=>Ql,pPd:()=>_d,MXM:()=>G.M,cY_:()=>an,dsi:()=>Hi,vHB:()=>Ki,O5k:()=>Ii,TAb:()=>vi,gIB:()=>xt,B:()=>b,lc0:()=>Di,Ksf:()=>y,PIV:()=>Tt,AOA:()=>xi,B5u:()=>h.B5,WEY:()=>h.WE,Cg1:()=>Ei.C,ZhR:()=>Te.Z,ufE:()=>j,Klf:()=>jt,woB:()=>Fe.w,s9y:()=>kt.s,vB5:()=>dt,fp5:()=>vt,mf:()=>T.mf,VXI:()=>T.VX,tSO:()=>T.tS,u1$:()=>T.u1,$uq:()=>T.$u,j4g:()=>T.j4,DJm:()=>T.DJ,Qpk:()=>zn,Pi:()=>dd,nYw:()=>h.nY,ntI:()=>Si,xW5:()=>h.xW,khc:()=>Oe,UAh:()=>ue.UA,qy4:()=>ue.qy,EMX:()=>De,CNH:()=>E.C,aDR:()=>Dt.a,g4s:()=>ni.g,PEA:()=>Zt,aAT:()=>Ee,Car:()=>ue.C,CKZ:()=>be,D9N:()=>qe,Usc:()=>Ct,Q$d:()=>Xe,MOJ:()=>T.MO,zer:()=>Ot,CyH:()=>At,niB:()=>h.ni,ACc:()=>h.AC,Muk:()=>h.Mu,$Ie:()=>$n,jFY:()=>Ze,xTe:()=>Y.x,GE5:()=>cd,Amp:()=>Qt,j5E:()=>rt,LtV:()=>Xt,O9d:()=>It});var r=l(69808),d=l(30652),O=l(92120),e=l(5e3);let S=(()=>{class n{constructor(t){this.changeDetector=t,this.defaultClasses="d-flex flex-column justify-content-center w-100 p-3",this.elementClass=""}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`}}return n.lateLoadKey="WidgetErrorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-error"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{image:"image",title:"title",description:"description",elementClass:"elementClass"},decls:6,vars:3,consts:[[3,"image"],[1,"widget-error__title"],[1,"d-flex","justify-content-center","text-center"]],template:function(t,i){1&t&&(e._UZ(0,"nui-image",0),e.TgZ(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._uU(5),e.qZA()),2&t&&(e.Q6J("image",i.image),e.xp6(3),e.Oqu(i.title),e.xp6(2),e.Oqu(i.description))},directives:[d.cuP],styles:[".widget-error__title[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center;margin-top:20px;margin-bottom:10px}"]}),n})(),N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.ez,d.sF0],r.ez]}),n})();var C=l(8083),p=l(52382),v=l(33748),g=l(23913),G=l(34575),y=(()=>{return(n=y||(y={}))[n.URL=0]="URL",n[n.HTML=1]="HTML",y;var n})(),F=l(22313);const w=["anchor"];let b=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.document=i,this.domSanitizer=o,this.sanitized=!0,this.elementClass=""}ngOnInit(){this.validateAndApplyEmbeddedContent()}ngOnChanges(t){t.customEmbeddedContent&&!t.customEmbeddedContent.firstChange&&this.validateAndApplyEmbeddedContent()}validateAndApplyEmbeddedContent(){const t=this.sanitized&&this.sanitizeContext(this.mode===y.URL?e.q3G.URL:e.q3G.HTML);if(this.anchor.nativeElement.innerHTML="",this.mode===y.URL){const i=this.document.createElement("iframe");i.src=this.sanitized?t:this.customEmbeddedContent,i.width="100%",i.height="100%",this.anchor.nativeElement.appendChild(i)}else this.anchor.nativeElement.innerHTML=this.sanitized?t:this.customEmbeddedContent}sanitizeContext(t){var i;return this.domSanitizer.sanitize(t,null===(i=this.customEmbeddedContent)||void 0===i?void 0:i.trim())}}return n.lateLoadKey="EmbeddedContentComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(r.K0),e.Y36(F.H7))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-embedded-content"]],viewQuery:function(t,i){if(1&t&&e.Gf(w,7),2&t){let o;e.iGM(o=e.CRH())&&(i.anchor=o.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{mode:"mode",customEmbeddedContent:"customEmbeddedContent",sanitized:"sanitized",elementClass:"elementClass"},features:[e.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["anchor",""]],template:function(t,i){1&t&&e._UZ(0,"div",0,1)},encapsulation:2,changeDetection:0}),n})();var A=l(33816),W=l.n(A);function D(n,a){const{dataFieldIds:t}=n.properties||{};let i;return i=t?Object.keys(t).reduce((o,s)=>(o[s]=a[t[s]],o),{}):{value:a.value},i}var T=l(53450),h=l(25878),L=l(47969),U=l(47429);function X(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"a",4),e.GkF(2,5),e.qZA(),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(4);e.xp6(1),e.Q6J("href",t.widgetData.link,e.LSH),e.xp6(1),e.Q6J("ngTemplateOutlet",i)}}function q(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().onInteraction()}),e.GkF(2,5),e.qZA(),e.BQk()}if(2&n){e.oxw();const t=e.MAs(4);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}function oe(n,a){}function ae(n,a){if(1&n){const t=e.EpF();e.ynx(0,15,16),e.TgZ(2,"div",17)(3,"span",18),e.YNc(4,oe,0,0,"ng-template",19),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(1).attached(o)}),e.qZA()(),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw(2);let o,s;e.Q6J("componentType",null==i.configuration||null==i.configuration.formatters||null==i.configuration.formatters.Value||null==i.configuration.formatters.Value.formatter?null:i.configuration.formatters.Value.formatter.componentType)("properties",i.formattersProperties.Value),e.xp6(3),e.Q6J("ngClass","IconFormatterComponent"===(null==i.configuration||null==i.configuration.formatters||null==i.configuration.formatters.Value||null==i.configuration.formatters.Value.formatter?null:i.configuration.formatters.Value.formatter.componentType)?"without-filter":"")("useZoom",!1)("scaleIN$",null==(o=i.getScaleBroker("value"))?null:o.out$)("scaleOUT$",null==(s=i.getScaleBroker("value"))?null:s.in$),e.xp6(1),e.Q6J("cdkPortalOutlet",t.portal)}}const _e=function(n){return{"background-color":n}},te=function(n){return{color:n}};function se(n,a){if(1&n&&(e._UZ(0,"div",7),e.TgZ(1,"div",8)(2,"div",9)(3,"div",10)(4,"span",11),e._uU(5),e.qZA()(),e.YNc(6,ae,5,7,"ng-container",12),e.TgZ(7,"div",13)(8,"span",14),e._uU(9),e.qZA()()()()),2&n){const t=e.oxw(),i=e.MAs(6);let o,s,_,f;e.ekj("nui-kpi-indicator--interactive",t.interactive),e.Q6J("ngStyle",e.VKq(18,_e,t.backgroundColor||(null==t.widgetData?null:t.widgetData.backgroundColor))),e.xp6(1),e.Q6J("ngStyle",e.VKq(20,te,(null==t.widgetData?null:t.widgetData.textColor)||t.backgroundColor||(null==t.widgetData?null:t.widgetData.backgroundColor)||t.defaultColor)),e.xp6(2),e.Q6J("title",null==t.widgetData?null:t.widgetData.label),e.xp6(1),e.Q6J("useZoom",!1)("minScale",.5)("scaleIN$",null==(o=t.getScaleBroker("label"))?null:o.out$)("scaleOUT$",null==(s=t.getScaleBroker("label"))?null:s.in$),e.xp6(1),e.Oqu(null==t.widgetData?null:t.widgetData.label),e.xp6(1),e.Q6J("ngIf",null==t.configuration||null==t.configuration.formatters?null:t.configuration.formatters.Value)("ngIfElse",i),e.xp6(1),e.Q6J("title",null==t.widgetData?null:t.widgetData.units),e.xp6(1),e.Q6J("useZoom",!1)("scaleIN$",null==(_=t.getScaleBroker("units"))?null:_.out$)("scaleOUT$",null==(f=t.getScaleBroker("units"))?null:f.in$)("minScale",.5),e.xp6(1),e.Oqu(null==t.widgetData?null:t.widgetData.units)}}function J(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"span",21),e._uU(2),e.qZA()()),2&n){const t=e.oxw();let i,o;e.Udp("font-size",null==t.widgetData?null:t.widgetData.fontSize),e.Q6J("title",null==t.widgetData?null:t.widgetData.value),e.xp6(1),e.Q6J("useZoom",!1)("scaleIN$",null==(i=t.getScaleBroker("value"))?null:i.out$)("scaleOUT$",null==(o=t.getScaleBroker("value"))?null:o.in$),e.xp6(1),e.hij(" ",null==t.widgetData?null:t.widgetData.value,"")}}let j=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.dataSource=i,this.eventBus=o,this.busy=!1,this.elementClass="",this.defaultColor="var(--nui-color-bg-secondary)"}get interactive(){var t,i,o,s,_;return((null===(t=this.configuration)||void 0===t?void 0:t.interactive)||(null===(s=null===(o=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===o?void 0:o.getFeatureConfig(h.ni.Interactivity))||void 0===s?void 0:s.enabled))&&!W()(null===(_=this.widgetData)||void 0===_?void 0:_.value)||!1}onInteraction(){!this.interactive||this.eventBus.getStream(T.b1).next({payload:{data:this.widgetData}})}getScaleBroker(t){if(this.syncValuesBroker)return this.syncValuesBroker.find(i=>i.id===t)}ngOnChanges(t){var i;if(t.configuration){const o=t.configuration.currentValue.formatters;o&&(this.formattersProperties=this.getFormatterProperties(o))}t.widgetData&&(null===(i=this.configuration)||void 0===i?void 0:i.formatters)&&(this.formattersProperties=this.getFormatterProperties(this.configuration.formatters))}getFormatterProperties(t){return Object.keys(t).reduce((s,_)=>{var f;const M=null===(f=t[_])||void 0===f?void 0:f.formatter;return M&&(s[_]={data:D(M,this.widgetData)}),s},{})}}return n.lateLoadKey="KpiComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(h.Fk,8),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-kpi"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",backgroundColor:"backgroundColor",syncValuesBroker:"syncValuesBroker",configuration:"configuration",busy:"busy"},features:[e.TTD],decls:7,vars:3,consts:[["nui-busy","",1,"w-100","h-100",3,"busy"],[4,"ngIf"],["kpiContent",""],["kpiValueRaw",""],[1,"nui-kpi-indicator",3,"href"],[3,"ngTemplateOutlet"],[1,"nui-kpi-indicator",3,"click"],[1,"nui-kpi-indicator__background",3,"ngStyle"],[1,"nui-kpi-indicator__text",3,"ngStyle"],[1,"nui-kpi-indicator__zoom-container"],[1,"nui-kpi-indicator__description",3,"title"],["nuiZoomContent","",3,"useZoom","minScale","scaleIN$","scaleOUT$"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties",4,"ngIf","ngIfElse"],[1,"nui-kpi-indicator__units",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$","minScale"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[1,"nui-kpi-indicator__value"],["nuiZoomContent","",3,"ngClass","useZoom","scaleIN$","scaleOUT$"],[3,"cdkPortalOutlet","attached"],[1,"nui-kpi-indicator__value",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,X,3,2,"ng-container",1),e.YNc(2,q,3,1,"ng-container",1),e.qZA(),e.YNc(3,se,10,22,"ng-template",null,2,e.W1O),e.YNc(5,J,3,7,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("busy",i.busy),e.xp6(1),e.Q6J("ngIf",null==i.widgetData?null:i.widgetData.link),e.xp6(1),e.Q6J("ngIf",!(null!=i.widgetData&&i.widgetData.link)))},directives:[d.ERI,r.O5,r.tP,r.PC,d.mEK,L.$,r.mk,U.Pl],styles:[".nui-kpi-indicator[_ngcontent-%COMP%]{position:relative;display:block;height:100%;width:100%}.nui-kpi-indicator__background[_ngcontent-%COMP%]{height:100%;width:100%;background-color:var(--nui-color-bg-secondary,#fafafa);color:var(--nui-color-text-default,#111)}.nui-kpi-indicator__text[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;pointer-events:none}.nui-kpi-indicator__text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}.nui-kpi-indicator__value[_ngcontent-%COMP%]{font-size:54px;font-weight:600;margin:auto 0;min-width:100%;white-space:nowrap;display:flex;align-items:center;justify-content:center;height:100%;min-height:5px;max-height:200px}.nui-kpi-indicator__value[_ngcontent-%COMP%] > span.without-filter[_ngcontent-%COMP%]{filter:unset}.nui-kpi-indicator__units[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-bottom:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__units[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__description[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-top:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__description[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__zoom-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:30% 40% 30%;width:100%;height:100%}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]{cursor:pointer}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]:hover{filter:brightness(90%)}"],changeDetection:0}),n})();var le=l(42339),ie=l(77579),fe=l(22783);let ve=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.pizzagnaService=i,this.logger=o,this.destroyed$=new ie.x}ngOnChanges(t){(t.nodes||t.template)&&this.updateNodeConfigs({changesNodes:t.nodes,changesTemplate:t.template})}ngDoCheck(){this.checkNodeConfigs()&&(this.updateNodeConfigs(),this.changeDetector.detectChanges())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}trackByFn(t,i){return i.id}checkNodeConfigs(){const t=this.getNodes();if(!this.nodeComponentsConfigs||t.length!==this.nodeComponentsConfigs.length)return!0;for(let i=0;i<t.length;i++)if(this.pizzagnaService.getComponent(t[i])!==this.nodeComponentsConfigs[i])return!0;return!1}updateNodeComponentConfigs(){const t=this.getNodes();this.nodeComponentsConfigs=t&&t.map(i=>{const o=this.pizzagnaService.getComponent(i);if(void 0===o)throw new Error("No component with id '"+i+"' was defined in the configuration.");return o})}updateNodeConfigs(t){this.nodeConfigs=(0,fe.n)(this.nodeConfigs,this.getTemplateChangeForNodes(t),this.getNodeComponentsConfigs())}getNodeComponentsConfigs(){const t={currentValue:void 0,previousValue:this.nodeComponentsConfigs?[...this.nodeComponentsConfigs]:void 0};return this.updateNodeComponentConfigs(),t.currentValue=this.nodeComponentsConfigs,t}getTemplateChangeForNodes(t){const{changesNodes:i,changesTemplate:o}=t||{},s=_=>{var f;return _&&(null===(f=this.getNodes())||void 0===f?void 0:f.map(()=>_))};return{currentValue:s(o?o.currentValue:this.template),previousValue:i?this.template:s(o?o.previousValue:this.template)}}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.sBO),e.LFG(le.p),e.LFG(d.mQy))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function we(n,a){}function ze(n,a){if(1&n){const t=e.EpF();e.ynx(0)(1,1,2),e.YNc(3,we,0,0,"ng-template",3),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(2).attached(o)}),e.BQk()()}if(2&n){const t=a.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let Ee=(()=>{class n extends ve{constructor(t,i,o){super(t,i,o),this.nodes=[],this.direction="column",this.elementClass="",this.defaultClassNames="h-100 w-100 d-flex"}ngOnInit(){this.classNames=`${this.defaultClassNames} flex-${this.direction} ${this.elementClass}`}ngOnDestroy(){super.ngOnDestroy()}getNodes(){return this.nodes}}return n.lateLoadKey="StackComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-stack"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{nodes:"nodes",direction:"direction",elementClass:"elementClass"},features:[e.qOj],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,ze,4,5,"ng-container",0),2&t&&e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn)},directives:[r.sg,L.$,U.Pl],encapsulation:2}),n})();const et=["gridItemsContainer"];function ut(n,a){}function pt(n,a){if(1&n){const t=e.EpF();e.ynx(0)(1,3,4),e.YNc(3,ut,0,0,"ng-template",5),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(2).attached(o)}),e.BQk()()}if(2&n){const t=a.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("properties",t.properties)("providers",t.providers),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}const Re=function(n){return{"prioritize-rows":n}};let je=(()=>{class n extends ve{constructor(t,i,o,s){super(t,i,o),this.ngZone=s,this.nodes=[],this.direction="column",this.prioritizeGridRows=!1}ngAfterViewInit(){this.handleGridFlowOnResize()}ngOnDestroy(){var t;null===(t=this.tilesResizeObserver)||void 0===t||t.disconnect(),super.ngOnDestroy()}getNodes(){return this.nodes}handleGridFlowOnResize(){this.tilesResizeObserver=new ResizeObserver(()=>this.onResize()),this.ngZone.runOutsideAngular(()=>{this.tilesResizeObserver.observe(this.gridItemsContainer.nativeElement)})}onResize(){var t;if((null===(t=this.nodes)||void 0===t?void 0:t.length)<2)return;const i=this.gridItemsContainer.nativeElement.getBoundingClientRect(),{height:o,width:s}=i,_=o/s,f=st(this.nodes.length);return _-.05>f&&!this.prioritizeGridRows?(this.prioritizeGridRows=!0,void this.changeDetector.detectChanges()):_+.05<f&&this.prioritizeGridRows?(this.prioritizeGridRows=!1,void this.changeDetector.detectChanges()):void 0}}return n.lateLoadKey="TilesComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-tiles"]],viewQuery:function(t,i){if(1&t&&e.Gf(et,7),2&t){let o;e.iGM(o=e.CRH())&&(i.gridItemsContainer=o.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{nodes:"nodes",direction:"direction"},features:[e.qOj],decls:3,vars:5,consts:[[1,"nui-grid-layout",3,"ngClass"],["gridItemsContainer",""],[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,pt,4,5,"ng-container",2),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(3,Re,i.prioritizeGridRows)),e.xp6(2),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn))},directives:[r.mk,r.sg,L.$,U.Pl],styles:[".nui-grid-layout[_ngcontent-%COMP%]{display:grid;height:100%;grid-gap:10px;gap:10px;grid-template-columns:repeat(auto-fit,minmax(94.8px,1fr));grid-template-rows:repeat(auto-fit,minmax(15px,1fr));line-height:1.2}.nui-grid-layout.prioritize-rows[_ngcontent-%COMP%]{grid-auto-flow:column;grid-template-columns:minmax(1px,1fr)}.mobile[_nghost-%COMP%], .mobile   [_nghost-%COMP%]{min-height:160px}"]}),n})();const st=n=>.25*n+.7;function at(n,a){if(1&n&&(e.TgZ(0,"div",6),e._UZ(1,"nui-icon",7),e.TgZ(2,"span",8),e._uU(3),e.qZA()()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("icon",t.key),e.xp6(1),e.Q6J("title",t.value),e.xp6(1),e.Oqu(t.value)}}function gt(n,a){1&n&&e._UZ(0,"nui-icon",9)}const ht=function(n,a){return{"widget-medium":n,"widget-small":a}};let dt=(()=>{class n{constructor(t){this.changeDetector=t,this.navigated=new e.vpe}set widgetWidth(t){this.isMedium=t<=600&&t>480,this.isSmall=t<=480}onButtonClick(){this.canNavigate&&this.navigated.emit(this)}}return n.lateLoadKey="ListGroupItemComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-list-group-item"]],hostAttrs:[1,"w-100"],inputs:{id:"id",label:"label",statuses:"statuses",canNavigate:"canNavigate",widgetWidth:"widgetWidth"},outputs:{navigated:"navigated"},decls:7,vars:8,consts:[[1,"list-group-item",3,"ngClass","click"],[1,"list-group-item__label",3,"title"],[1,"list-group-item__statuses"],[1,"statuses"],["class","status-column",4,"ngFor","ngForOf"],["icon","caret-right",4,"ngIf"],[1,"status-column"],[1,"mr-2",3,"icon"],[1,"status-column__label",3,"title"],["icon","caret-right"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onButtonClick()}),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,at,4,3,"div",4),e.qZA(),e.YNc(6,gt,1,0,"nui-icon",5),e.qZA()()),2&t&&(e.Q6J("ngClass",e.WLB(5,ht,i.isMedium,i.isSmall)),e.xp6(1),e.Q6J("title",i.label),e.xp6(1),e.Oqu(i.label),e.xp6(3),e.Q6J("ngForOf",i.statuses),e.xp6(1),e.Q6J("ngIf",i.canNavigate))},directives:[r.mk,r.sg,d.oJW,r.O5],styles:[".list-group-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.list-group-item__label[_ngcontent-%COMP%]{width:25%;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item__statuses[_ngcontent-%COMP%]{width:75%;display:flex;align-items:center}.list-group-item[_ngcontent-%COMP%]   .status-column[_ngcontent-%COMP%]{display:flex;width:75px;min-width:75px;max-width:100%;justify-content:flex-start;align-items:center;padding-right:10px}.list-group-item[_ngcontent-%COMP%]   .status-column__label[_ngcontent-%COMP%]{margin-left:5px;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]{justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%], .widget-medium[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]{justify-content:flex-end}.widget-small[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%], .widget-small[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{justify-content:space-between}"],changeDetection:0}),n})();var de=l(82722);function ye(n,a){if(1&n&&e._UZ(0,"nui-icon",9),2&n){const t=e.oxw();e.Q6J("icon",t.icon)("status",t.status)}}function Lt(n,a){if(1&n&&e._uU(0),2&n){const t=e.oxw();e.Oqu(t.status)}}function Gt(n,a){1&n&&e._UZ(0,"nui-icon",10)}let vt=(()=>{class n{constructor(t,i){this.changeDetector=t,this.eventBus=i,this.navigated=new e.vpe,this.searchTerm="",this.destroy$=new ie.x}onButtonClick(){this.canNavigate&&this.navigated.emit(this)}ngOnInit(){this.eventBus.getStream(T.kV).pipe((0,de.R)(this.destroy$)).subscribe(t=>{var i;this.searchTerm=null!==(i=t.payload)&&void 0!==i?i:"",this.changeDetector.markForCheck()})}}return n.lateLoadKey="ListLeafItemComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-list-leaf-item"]],hostAttrs:[1,"w-100"],inputs:{icon:"icon",status:"status",detailedUrl:"detailedUrl",label:"label",canNavigate:"canNavigate",url:"url"},outputs:{navigated:"navigated"},decls:12,vars:14,consts:[[1,"nui-list-leaf-item",3,"click"],[1,"nui-list-leaf-item__info-container"],[1,"nui-list-leaf-item__icon-container"],["class","mr-1",3,"icon","status",4,"ngIf","ngIfElse"],[1,"nui-list-leaf-item__description"],[1,"nui-text-ellipsis",3,"ngClass","innerHTML"],[1,"nui-text-secondary","nui-text-ellipsis",3,"innerHTML"],["statusTpl",""],["icon","caret-right",4,"ngIf"],[1,"mr-1",3,"icon","status"],["icon","caret-right"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onButtonClick()}),e.TgZ(1,"div",1)(2,"div",2),e.YNc(3,ye,1,2,"nui-icon",3),e.qZA(),e.TgZ(4,"div",4),e._UZ(5,"a",5),e.ALo(6,"nuiHighlight"),e._UZ(7,"div",6),e.ALo(8,"nuiHighlight"),e.qZA(),e.YNc(9,Lt,1,1,"ng-template",null,7,e.W1O),e.qZA(),e.YNc(11,Gt,1,0,"nui-icon",8),e.qZA()),2&t){const o=e.MAs(10);e.xp6(3),e.Q6J("ngIf",i.icon)("ngIfElse",o),e.xp6(2),e.Q6J("ngClass",i.url?"":"not-active")("innerHTML",e.xi3(6,8,i.label,i.searchTerm),e.oJD),e.uIk("target",i.url?"_blank":null)("href",i.url||null,e.LSH),e.xp6(2),e.Q6J("innerHTML",e.xi3(8,11,i.detailedUrl,i.searchTerm),e.oJD),e.xp6(4),e.Q6J("ngIf",i.canNavigate)}},directives:[r.O5,d.oJW,r.mk],pipes:[d.SgB],styles:[".nui-list-leaf-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nui-list-leaf-item__info-container[_ngcontent-%COMP%]{display:flex;height:40px}.nui-list-leaf-item__icon-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:30px}.nui-list-leaf-item__description[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr 1fr;grid-template-columns:1fr;max-width:100%}a.not-active[_ngcontent-%COMP%]{text-decoration:none;color:#111}"],changeDetection:0}),n})();function wt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"button",2),e.NdJ("click",function(){return e.CHM(t),e.oxw().onBack()}),e.qZA(),e.TgZ(2,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().onHome()}),e.qZA(),e.TgZ(3,"div",4),e._uU(4),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("isRepeat",!0)("disabled",!(null!=t.navBarConfig&&null!=t.navBarConfig.buttons&&null!=t.navBarConfig.buttons.back&&t.navBarConfig.buttons.back.disabled)),e.xp6(1),e.Q6J("isRepeat",!0),e.xp6(2),e.Oqu(null==t.navBarConfig?null:t.navBarConfig.label)}}let ct=(()=>{class n{constructor(t,i){this.changeDetector=t,this.eventBus=i,this.navigated=new e.vpe}onBack(){var t,i,o;this.navBarConfig&&this.eventBus.getStream(T.EC).next({payload:{back:null===(o=null===(i=null===(t=this.navBarConfig)||void 0===t?void 0:t.buttons)||void 0===i?void 0:i.back)||void 0===o?void 0:o.disabled}})}onHome(){this.eventBus.getStream(T.EC).next({payload:{reset:!0}})}}return n.lateLoadKey="ListNavigationBarComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-navigation-bar"]],inputs:{navBarConfig:"navBarConfig"},outputs:{navigated:"navigated"},decls:1,vars:1,consts:[["class","list-nav-bar",4,"ngIf"],[1,"list-nav-bar"],["nui-button","","type","button","displayStyle","action","icon","arrow-left",3,"isRepeat","disabled","click"],["nui-button","","type","button","displayStyle","action","icon","overview",3,"isRepeat","click"],[1,"list-nav-bar__label"]],template:function(t,i){1&t&&e.YNc(0,wt,5,4,"div",0),2&t&&e.Q6J("ngIf",i.navBarConfig&&!(null!=i.navBarConfig&&i.navBarConfig.isRoot))},directives:[r.O5,d.r0F],styles:[".list-nav-bar[_ngcontent-%COMP%]{width:100%;margin:2px 0;padding:0 15px;display:flex;align-items:center}.list-nav-bar__label[_ngcontent-%COMP%]{padding-left:5px;color:#1119}"],changeDetection:0}),n})();function nt(n,a){}const Ne=function(){return["navigated"]};function H(n,a){if(1&n){const t=e.EpF();e.ynx(0,2,3),e.NdJ("output",function(){const s=e.CHM(t).item;return e.oxw().onListItemEvent(s)}),e.YNc(2,nt,0,0,"ng-template",4),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(1).attached(o)}),e.BQk()}if(2&n){const t=a.item,i=e.MAs(1),o=e.oxw();e.Q6J("componentId",o.configuration.componentType)("componentType",o.configuration.componentType)("properties",o.getPropsFor(t))("outputs",e.DdM(5,Ne)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let c=(()=>{class n{constructor(t,i,o,s){this.changeDetector=t,this.zone=i,this.host=o,this.eventBus=s,this.itemFormatterProps=new Map,this.destroy$=new ie.x}ngOnInit(){this.initResizeObserver()}ngOnChanges(t){var i;(null===(i=t.data)||void 0===i?void 0:i.currentValue)&&t.data.currentValue.forEach(o=>this.itemFormatterProps.set(o,this.calcItemProps(o)))}onListItemEvent(t){this.eventBus.getStream(T.EC).next({payload:t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.itemFormatterProps.clear()}getPropsFor(t){return Object.assign(Object.assign({},this.itemFormatterProps.get(t)),{widgetWidth:this.widgetWidth})}calcItemProps(t){return this.configuration?Object.assign(Object.assign({},D(this.configuration,t)),this.configuration.itemProperties):t}initResizeObserver(){const t=new d.Pa2(this.host,this.zone);t.debounceTime=10,t.ngAfterViewInit(),t.containerResize.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.widgetWidth=this.host.nativeElement.offsetWidth})}}return n.lateLoadKey="ListWidgetComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-list-widget"]],hostAttrs:[2,"overflow","scroll"],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{data:"data",configuration:"configuration",elementClass:"elementClass"},features:[e.TTD],decls:3,vars:2,consts:[[3,"itemsSource","repeatItemTemplateRef"],["repeatItemTemplate",""],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){if(1&t&&(e._UZ(0,"nui-repeat",0),e.YNc(1,H,3,6,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("itemsSource",i.data)("repeatItemTemplateRef",o)}},directives:[d.$N6,L.$,U.Pl],styles:[""]}),n})();var m=l(92474),E=l(98864),k=l(294),Y=l(32656),ue=l(47243),Te=l(60343),me=l(21366);let Oe=(()=>{class n extends me.k{constructor(t){super(t,"ProportionalContentAggregatorsRegistryService")}getItemKey(t){return t.aggregatorType}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(d.mQy))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Pe(n,a){}function Ve(n,a){if(1&n){const t=e.EpF();e.ynx(0,1,2),e.YNc(2,Pe,0,0,"ng-template",3),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(1).attached(o)}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",null==i.contentFormatter?null:i.contentFormatter.componentType)("properties",i.contentFormatterProperties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let Be=(()=>{class n{constructor(t,i,o,s){this.aggregatorRegistry=t,this.formatterRegistry=i,this.changeDetector=o,this.logger=s,this.destroy$=new ie.x}ngOnChanges(t){if(t.donutConfig){const i=t.donutConfig.currentValue,{formatter:o,aggregator:s}=i;(null==s?void 0:s.aggregatorType)&&(this.updateAggregatorDefinition(s),this.updateAggregatedValue()),(null==o?void 0:o.componentType)&&(this.contentFormatter=o,this.updateFormatterDefinition(o),this.updateFormatterProperties())}t.widgetData&&(this.updateAggregatedValue(),this.updateFormatterProperties()),t.chartAssist&&this.subscribeToChartAssist()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getFormatterProperties(t){var i;if(t)return Object.assign(Object.assign({},null===(i=this.contentFormatterDefinition)||void 0===i?void 0:i.properties),{data:D(t,{value:this.aggregatedValue})})}updateAggregatorDefinition(t){const i=this.aggregatorRegistry.getItem(t.aggregatorType);i?this.contentAggregatorDefinition=i:this.logger.warn(`No aggregator with key ${t.aggregatorType} found in registry.`)}updateFormatterDefinition(t){const i=this.formatterRegistry.getItem(t.componentType);i?this.contentFormatterDefinition=i:this.logger.warn(`No aggregator with key ${t.componentType} found in registry.`)}updateAggregatedValue(){var t;if(!this.widgetData||!this.contentAggregatorDefinition)return void this.logger.warn(`Can't aggregate value. Aggregator key: ${null===(t=this.contentAggregatorDefinition)||void 0===t?void 0:t.aggregatorType}. Data: ${this.widgetData}`);const i=this.getAggregatorProperties();this.aggregatedValue=this.contentAggregatorDefinition.fn(this.widgetData,Object.assign(Object.assign({},i),{activeMetricId:this.emphasizedSeriesId||i.activeMetricId})).toString()}updateFormatterProperties(){this.contentFormatterProperties=this.getFormatterProperties(this.contentFormatter)}getAggregatorProperties(){var t,i,o;return Object.assign(Object.assign({},null===(t=this.contentAggregatorDefinition)||void 0===t?void 0:t.properties),null===(o=null===(i=this.donutConfig)||void 0===i?void 0:i.aggregator)||void 0===o?void 0:o.properties)}subscribeToChartAssist(){var t,i,o;null===(t=this.chartAssistSubscription)||void 0===t||t.unsubscribe(),this.chartAssistSubscription=null===(o=null===(i=this.chartAssist)||void 0===i?void 0:i.chartAssistSubject)||void 0===o?void 0:o.pipe((0,de.R)(this.destroy$)).subscribe(s=>{var _;this.emphasizedSeriesId=null===(_=s.payload)||void 0===_?void 0:_.seriesId,this.updateAggregatedValue(),this.updateFormatterProperties(),this.changeDetector.detectChanges()})}}return n.lateLoadKey="ProportionalDonutContentComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(Oe),e.Y36(ue.UA),e.Y36(e.sBO),e.Y36(d.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-proportional-donut-content"]],inputs:{widgetData:"widgetData",donutConfig:"donutConfig",chartAssist:"chartAssist"},features:[e.TTD],decls:1,vars:1,consts:[["nuiComponentPortal","",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,Ve,3,3,"ng-container",0),2&t&&e.Q6J("ngIf",null==i.contentFormatter?null:i.contentFormatter.componentType)},directives:[r.O5,L.$,U.Pl],styles:[""],changeDetection:0}),n})();var Le=l(64509),We=l.n(Le),tt=l(50772),$e=l.n(tt);let ot=(()=>{class n{constructor(t){this.unitConversionService=t,this.transform=(i,o="generic",s=1e6)=>{const _="string"==typeof i?parseFloat(i):i;if(void 0===_||isNaN(_)||_<s&&"percent"!==o)return(null==i?void 0:i.toString())||"";const f=this.unitConversionService.convert(_,"bytes"===o?d.Qln.Bytes:d.Qln.Standard,1);return this.unitConversionService.getFullDisplay(f,o)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.CrH,16))},n.\u0275pipe=e.Yjl({name:"nuiDashboardUnitConversion",type:n,pure:!0}),n})();var De=(()=>{return(n=De||(De={})).DonutChart="DonutChart",n.PieChart="PieChart",n.VerticalBarChart="VerticalBarChart",n.HorizontalBarChart="HorizontalBarChart",De;var n})();let Ut=(()=>{class n{static buildChartSeries(t,i,o,s){return(t||[]).map(f=>Object.assign(Object.assign({},f),{accessors:i,renderer:o,scales:s}))}static getChartAttributes(t,i,o){const s=n.getChartTools(t),_={grid:s.gridFunction(),accessors:s.accessorFunction(i,o),renderer:s.rendererFunction(),scales:s.scaleFunction()};return s.preprocessor&&(_.preprocessor=s.preprocessor),_}static getChartTools(t){const i=_=>{const f=new g.UDz(_);return f.series.color=(M,x)=>{var K;return null!==(K=x.color)&&void 0!==K?K:_.get(M)},f};function o(_,f){const M=(0,g.Q6e)(this.config,_,f);return M.series.color=(x,K)=>{var V;return null!==(V=K.color)&&void 0!==V?V:null==_?void 0:_.get(x)},M.data.value=x=>Number.isFinite(x)?x:x.value,M}return{[De.DonutChart]:{preprocessor:g.fy$,gridFunction:g.Y6Q,rendererFunction:()=>new g.E8N,accessorFunction:i,scaleFunction:g._N$},[De.PieChart]:{preprocessor:g.fy$,gridFunction:g.Y6Q,rendererFunction:()=>new g.bOg,accessorFunction:i,scaleFunction:g._N$},[De.HorizontalBarChart]:{config:{horizontal:!0},gridFunction(){return(0,g.skL)(this.config)},rendererFunction:()=>new g.Z7w({highlightStrategy:new g.TrQ("y")}),accessorFunction:o,scaleFunction(){return(0,g.CQI)(this.config)}},[De.VerticalBarChart]:{config:{horizontal:!1},gridFunction(){return(0,g.skL)(this.config)},rendererFunction:()=>new g.Z7w({highlightStrategy:new g.TrQ("x")}),accessorFunction:o,scaleFunction(){return(0,g.CQI)(this.config)}}}[t]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Fe=l(55413);const qt=["gridContainer"];function z(n,a){}function Z(n,a){if(1&n){const t=e.EpF();e.ynx(0)(1,12,13),e.YNc(3,z,0,0,"ng-template",14),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(2).attached(o)}),e.BQk()()}if(2&n){const t=e.MAs(2),i=e.oxw(3);e.xp6(1),e.Q6J("componentType",(null==i.contentFormatter?null:i.contentFormatter.componentType)||"DonutContentRawFormatterComponent")("properties",i.contentFormatterProperties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function I(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"nui-proportional-donut-content",15),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("widgetData",t.widgetData)("donutConfig",null==t.configuration||null==t.configuration.chartOptions?null:t.configuration.chartOptions.donutContentConfig)("chartAssist",t.chartAssist)}}function P(n,a){if(1&n&&(e.TgZ(0,"nui-chart-donut-content",8)(1,"div",9)(2,"div",10),e.YNc(3,Z,4,3,"ng-container",11),e.YNc(4,I,2,3,"ng-container",11),e.qZA()()()),2&n){const t=e.oxw(2);e.Q6J("plugin",t.donutContentPlugin),e.xp6(2),e.Q6J("useZoom",!1),e.xp6(1),e.Q6J("ngIf",!(null!=t.configuration&&null!=t.configuration.chartOptions&&t.configuration.chartOptions.donutContentConfig)),e.xp6(1),e.Q6J("ngIf",null==t.configuration||null==t.configuration.chartOptions?null:t.configuration.chartOptions.donutContentConfig)}}function $(n,a){if(1&n&&(e.TgZ(0,"div",5),e._UZ(1,"nui-chart",6),e.YNc(2,P,5,4,"nui-chart-donut-content",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("chart",t.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",t.donutContentPlugin)}}function Q(n,a){}const ee=function(n){return{data:n}};function re(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",22),e.ynx(2,12,23),e.YNc(4,Q,0,0,"ng-template",14),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(3).attached(o)}),e.BQk(),e.qZA()()}if(2&n){const t=e.MAs(3),i=e.oxw().index,o=e.oxw(2);e.xp6(2),e.Q6J("componentType",o.legendFormatter.componentType)("properties",e.VKq(3,ee,o.widgetData[i])),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function he(n,a){if(1&n&&e._UZ(0,"nui-icon",29),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("icon",i.seriesToIconMap[t.id])}}const Ie=function(n){return{"nui-text-link-small link":n}};function He(n,a){if(1&n&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Ie,i.interactive)),e.xp6(1),e.hij(" ",t.name," ")}}function Et(n,a){if(1&n&&(e.TgZ(0,"a",31),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.Q6J("href",t.link,e.LSH)("title",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function ei(n,a){if(1&n&&(e._UZ(0,"nui-rich-legend-tile",24),e.ALo(1,"nuiDashboardUnitConversion"),e.YNc(2,he,1,1,"nui-icon",25),e.TgZ(3,"div",26),e.YNc(4,He,2,4,"div",27),e.YNc(5,Et,2,3,"a",28),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("value",e.lcZ(1,7,i.computeLegendTileValue(t.data[0])))("unitLabel",i.legendUnitLabel)("color",i.chartAssist.palette.textColors.get(t.id))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",i.seriesToIconMap&&i.seriesToIconMap[t.id]),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link)}}function ti(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",19),e.NdJ("isSelectedChange",function(o){const _=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(_.id,o)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).onInteraction(s)}),e.YNc(1,re,5,5,"div",20),e.YNc(2,ei,6,9,"ng-template",null,21,e.W1O),e.qZA()}if(2&n){const t=a.$implicit,i=e.MAs(3),o=e.oxw(2);e.ekj("nui-proportional-widget__legend--interactive",o.interactive),e.Q6J("ngClass",(o.prioritizedGridRows.right||o.prioritizedGridRows.bottom)&&"description-min-width--unset")("isSelected",!o.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==o.chartAssist.renderStatesIndex[t.id]?null:o.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("ngIf",o.legendFormatter&&o.legendFormatter.componentType)("ngIfElse",i)}}const Zn=function(n){return[n]};function Vn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"nui-legend",17),e.NdJ("mouseleave",function(){return e.CHM(t),e.oxw().chartAssist.resetVisibleSeries()}),e.YNc(2,ti,4,7,"nui-legend-series",18),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(5,Zn,t.legendShouldBeAlignedRight()?"scrollable":"legend-bottom")),e.xp6(1),e.Q6J("interactive",!1)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}function Jn(n,a){1&n&&(e.TgZ(0,"div",32),e._UZ(1,"nui-image",33),e.qZA())}const Yn=function(n,a,t){return{"prioritize-rows__right":n,"prioritize-rows__bottom":a,"empty-grid":t}};let ii=(()=>{class n{constructor(t,i,o,s,_,f,M){this.changeDetector=t,this.ngZone=i,this.kvDiffers=o,this.eventBus=s,this.dataSource=_,this.logger=f,this.prioritizedGridRows={right:!1,bottom:!1},this.chartPalette=new g.syg((0,g.GUR)()),this.differ=this.kvDiffers.find(this.prioritizedGridRows).create(),this.unitConversionPipe=new ot(M)}get interactive(){var t,i,o,s;return(null===(t=this.configuration)||void 0===t?void 0:t.interactive)||(null===(s=null===(o=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===o?void 0:o.getFeatureConfig(h.ni.Interactivity))||void 0===s?void 0:s.enabled)||!1}computeLegendTileValue(t){var i,o;return null===(o=null===(i=this.accessors.data)||void 0===i?void 0:i.value)||void 0===o?void 0:o.call(i,t,0,null,null)}ngOnChanges(t){var i,o,s,_;const f=null===(o=null===(i=t.configuration)||void 0===i?void 0:i.currentValue)||void 0===o?void 0:o.chartColors,M=null===(_=null===(s=t.configuration)||void 0===s?void 0:s.previousValue)||void 0===_?void 0:_.chartColors;if((t.widgetData||!We()(f,M))&&this.updateChartColors(),t.configuration){const x=t.configuration.currentValue.chartOptions.type,K=t.configuration.previousValue&&t.configuration.previousValue.chartOptions.type;x&&x!==K&&(this.buildChart(x),this.widgetData&&this.updateChart()),this.legendFormatter=this.configuration.chartOptions.legendFormatter,this.contentFormatter=this.configuration.chartOptions.contentFormatter,this.chartFormatterComponentType=this.configuration.chartOptions.chartFormatterComponentType,this.getContentFormatterProperties(),this.changeDetector.markForCheck()}t.widgetData&&this.chartAssist&&(this.updateChart(),this.getContentFormatterProperties(),this.changeDetector.markForCheck())}ngAfterViewInit(){this.handleGridFlowOnResize()}ngOnDestroy(){var t,i;null===(t=this.proportionalWidgetResizeObserver)||void 0===t||t.disconnect(),null===(i=this.chartTypeSubscription$)||void 0===i||i.unsubscribe()}getContentFormatterProperties(){var t;this.contentFormatterProperties={data:this.widgetData,config:this.configuration,chartAssist:this.chartAssist,properties:null===(t=this.contentFormatter)||void 0===t?void 0:t.properties}}isDonutChart(){return this.configuration.chartOptions.type===De.DonutChart}isRadialChart(){return-1!==[De.DonutChart,De.PieChart].indexOf(this.configuration.chartOptions.type)}hasLegend(){return this.configuration.chartOptions.legendPlacement!==Fe.w.None}legendShouldBeAlignedRight(){return this.configuration.chartOptions.legendPlacement===Fe.w.Right}onInteraction(t){!this.interactive||this.eventBus.getStream(T.b1).next({payload:{data:t}})}buildChart(t){var i,o;this.donutContentPlugin=null;const{grid:s,accessors:_,renderer:f,scales:M,preprocessor:x}=Ut.getChartAttributes(t,null===(i=this.chartPalette)||void 0===i?void 0:i.standardColors);this.chartAssist=new g.doR(new g.kL2(s),x,this.chartPalette),this.renderer=f,this.accessors=_,this.scales=M,this.isDonutChart()&&(this.donutContentPlugin=new g.iM,this.chartAssist.chart.addPlugin(this.donutContentPlugin)),this.configuration.chartOptions.type===De.HorizontalBarChart?(this.scales.x.formatters.tick=K=>this.unitConversionPipe.transform(K),this.applyTickLabelMaxWidths()):this.configuration.chartOptions.type===De.VerticalBarChart&&(this.scales.y.formatters.tick=K=>this.unitConversionPipe.transform(K)),null===(o=this.chartTypeSubscription$)||void 0===o||o.unsubscribe(),this.chartTypeSubscription$=this.chartAssist.chart.getEventBus().getStream(g.q7O).subscribe(K=>{const V=this.widgetData.find(ce=>ce.id===K.data.seriesId);this.onInteraction(V)})}handleGridFlowOnResize(){this.proportionalWidgetResizeObserver=new ResizeObserver(()=>this.onResize()),this.ngZone.runOutsideAngular(()=>{this.proportionalWidgetResizeObserver.observe(this.gridContainer.nativeElement)})}applyTickLabelMaxWidths(){var t,i,o,s,_,f;const M=this.chartAssist.chart.getGrid().config().axis;M.left.tickLabel.maxWidth=null!==(o=null===(i=null===(t=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===t?void 0:t.maxWidth)||void 0===i?void 0:i.left)&&void 0!==o?o:n.TICK_LABEL_MAX_WIDTH,M.right.tickLabel.maxWidth=null!==(f=null===(_=null===(s=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===s?void 0:s.maxWidth)||void 0===_?void 0:_.right)&&void 0!==f?f:n.TICK_LABEL_MAX_WIDTH}onResize(){if(!this.isContainerInNoSwitchLayoutInterval()){switch(this.configuration.chartOptions.legendPlacement){case Fe.w.Bottom:this.prioritizedGridRows.bottom=this.containerHasRowLayoutWidth();break;case Fe.w.Right:this.prioritizedGridRows.right=this.containerHasRowLayoutWidth()}this.differ.diff(this.prioritizedGridRows)&&this.changeDetector.detectChanges()}}isContainerInNoSwitchLayoutInterval(){const t=this.gridContainer.nativeElement.getBoundingClientRect().width;return t>n.MAX_ROW_LAYOUT_SIZE-n.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2&&t<n.MAX_ROW_LAYOUT_SIZE+n.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2}containerHasRowLayoutWidth(){return this.gridContainer.nativeElement.getBoundingClientRect().width<n.MAX_ROW_LAYOUT_SIZE}updateChart(){this.chartAssist.update(Ut.buildChartSeries(this.widgetData,this.accessors,this.renderer,this.scales))}updateChartColors(){var t,i;let o;const s=null===(t=this.widgetData)||void 0===t?void 0:t.map(f=>f.color),_=this.configuration.chartColors;o=!this.configuration.prioritizeWidgetColors&&$e()(s)?this.getDataDriverColorProvider(this.widgetData):_?this.getConfigurationColorProvider(_):(0,g.GUR)(),this.chartPalette=new g.syg(o),this.buildChart(null===(i=this.configuration)||void 0===i?void 0:i.chartOptions.type),this.chartAssist&&(this.chartAssist.palette=this.chartPalette,this.updateChart())}getDataDriverColorProvider(t){let i;if((null==t?void 0:t.map(s=>s.color).filter(s=>!!s)).length===t.length){const s=t.reduce((_,f)=>(_[f.id]=f.color,_),{});i=new g.oki(s)}else{const s=t.filter(_=>_.color);this.logger.warn(`Not all series have colors set, setting default pallette. Current series color config: ${JSON.stringify(s)}`),i=(0,g.GUR)()}return i}getConfigurationColorProvider(t){var i;let o;return this.configuration.prioritizeWidgetColors&&this.widgetData&&(this.widgetData=this.widgetData.map(s=>{const _=Object.assign({},s);return _.color&&delete _.color,_})),Array.isArray(t)?o=new g.jpW(t):Object.keys(t).length===(null===(i=this.widgetData)||void 0===i?void 0:i.length)?o=new g.oki(t):(this.logger.warn(`Not all series have colors set, setting default pallette. Current series color config: ${JSON.stringify(t)}`),o=(0,g.GUR)()),o}}return n.lateLoadKey="ProportionalWidgetComponent",n.NO_SWITCH_LAYOUT_INTERVAL_SIZE=20,n.MAX_ROW_LAYOUT_SIZE=360,n.TICK_LABEL_MAX_WIDTH=75,n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(e.aQg),e.Y36(h.nY),e.Y36(h.Fk),e.Y36(d.mQy),e.Y36(d.CrH))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-proportional-widget"]],viewQuery:function(t,i){if(1&t&&e.Gf(qt,7),2&t){let o;e.iGM(o=e.CRH())&&(i.gridContainer=o.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",elementClass:"elementClass",seriesToIconMap:"seriesToIconMap"},features:[e.TTD],decls:5,vars:8,consts:[[1,"w-100","nui-chart-layout","flex-grow-1","p-3",3,"ngClass"],["gridContainer",""],["class","d-flex chart has-overlay",4,"ngIf"],["class","w-100 d-flex legend",3,"ngClass",4,"ngIf"],["class","mb-3 mt-3 d-flex align-items-center justify-content-center",4,"ngIf"],[1,"d-flex","chart","has-overlay"],[1,"w-100",3,"chart"],["class","nui-proportional-widget__chart-donut-content",3,"plugin",4,"ngIf"],[1,"nui-proportional-widget__chart-donut-content",3,"plugin"],[1,"h-100","w-100","d-flex","justify-content-center","align-items-center","text-center"],["nuiZoomContent","",1,"d-inline-block",3,"useZoom"],[4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal2","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"widgetData","donutConfig","chartAssist"],[1,"w-100","d-flex","legend",3,"ngClass"],[1,"w-100","m-auto",3,"interactive","orientation","mouseleave"],["class","proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","nui-proportional-widget__legend--interactive","isSelectedChange","mouseenter","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","click"],[4,"ngIf","ngIfElse"],["legendDefaultTile",""],["description",""],["componentPortal","nuiComponentPortal"],[3,"value","unitLabel","color","backgroundColor"],["legendTransclusion","","class","align-items-center",3,"icon",4,"ngIf"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["legendTransclusion","",1,"align-items-center",3,"icon"],[1,"description","description-primary",3,"ngClass"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"mb-3","mt-3","d-flex","align-items-center","justify-content-center"],["image","no-data-to-show"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,$,3,2,"div",2),e.YNc(3,Vn,3,7,"div",3),e.YNc(4,Jn,2,0,"div",4),e.qZA()),2&t&&(e.Q6J("ngClass",e.kEZ(4,Yn,i.prioritizedGridRows.right,i.prioritizedGridRows.bottom,!(i.widgetData&&i.widgetData.length>0&&i.chartAssist))),e.xp6(2),e.Q6J("ngIf",i.widgetData&&i.widgetData.length>0&&i.chartAssist),e.xp6(1),e.Q6J("ngIf",i.hasLegend()&&i.chartAssist),e.xp6(1),e.Q6J("ngIf",!i.widgetData||0===i.widgetData.length||!i.chartAssist))},directives:[r.mk,r.O5,g.xH4,g.kwD,d.mEK,L.$,U.Pl,Be,g.FVX,r.sg,g.kJo,g.wHi,d.oJW,d.cuP],pipes:[ot],styles:['.nui-proportional-widget__chart-donut-content[_ngcontent-%COMP%]{position:absolute}.nui-proportional-widget__legend--interactive[_ngcontent-%COMP%]{cursor:pointer!important}.has-overlay[_ngcontent-%COMP%]{overflow:auto}.nui-chart-layout[_ngcontent-%COMP%]{grid-template:"axis-label-left    axis-label-right    ." 0fr "chart              chart               legend" minmax(60%,auto) "axis-label-bottom  axis-label-bottom   ." 0fr "legend-bottom      legend-bottom       ." minmax(auto,min-content) / 1fr 1fr auto}.nui-chart-layout[_ngcontent-%COMP%]   .legend-bottom[_ngcontent-%COMP%]{overflow:auto;align-self:auto;padding-left:0}.prioritize-rows__right[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%], .prioritize-rows__bottom[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%]{max-width:unset;width:100%}.prioritize-rows[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{justify-self:start}.prioritize-rows__right[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend      legend       ." 40%}.prioritize-rows__bottom[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend-bottom      legend-bottom      ." 40%}.empty-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:1fr}.proportional-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}']}),n})();var ni=l(61455);let Gi=(()=>{class n{constructor(){this.enabled=!0,this.delay=500}onHostMouseenter(){!this.enabled||(this.timeout=setTimeout(()=>{this.mousePresentSubject.next(!0)},this.delay))}onHostClick(){!this.enabled||this.mousePresentSubject.next(!0)}onHostMouseleave(){!this.enabled||(clearTimeout(this.timeout),this.mousePresentSubject.next(!1))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","nuiDelayedMousePresenceDetection",""]],hostBindings:function(t,i){1&t&&e.NdJ("mouseenter",function(){return i.onHostMouseenter()})("click",function(){return i.onHostClick()})("mouseleave",function(){return i.onHostMouseleave()})},inputs:{enabled:["nuiDelayedMousePresenceDetection","enabled"],mousePresentSubject:"mousePresentSubject",delay:"delay"}}),n})();var Hn=l(8817),$t=l.n(Hn),Kn=l(95835),Qn=l.n(Kn),wi=l(61135),Mt=l(56451),$i=l(39646),it=l(18505),zt=l(39300),ft=l(54004),oi=l(95698),Ui=l(78372);let zi=(()=>{class n{constructor(){this.searchDebounceTime=500}initWidget(t){this.widget=t,this.initSearch()}initSearch(){var t,i;this.defineSearch();const o=null===(i=null===(t=this.widget.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.featuresChanged;o&&o.pipe((0,de.R)(this.widget.onDestroy$)).subscribe(()=>{this.defineSearch()})}registerSearch(){this.widget.dataSource&&this.widget.dataSource.registerComponent({search:{componentInstance:{getFilters:()=>({type:"search",value:this.widget.searchValue})}}})}deregisterSearch(){var t,i;this.widget.dataSource&&(null===(i=(t=this.widget.dataSource).deregisterComponent)||void 0===i||i.call(t,"search"))}defineSearch(){var t,i;const o=null===(t=this.widget.configuration)||void 0===t?void 0:t.searchConfiguration,s=null===(i=this.widget.dataSource.features)||void 0===i?void 0:i.getFeatureConfig("search");this.widget.isSearchEnabled=!(!(null==o?void 0:o.enabled)||!(null==s?void 0:s.enabled)),this.widget.isSearchEnabled?(this.widget.searchValue=(null==o?void 0:o.searchTerm)||"",this.registerSearch(),this.searchDebounceTime=W()(null==o?void 0:o.searchDebounce)?this.searchDebounceTime:null==o?void 0:o.searchDebounce,this.watchSearchTerm()):this.deregisterSearch()}watchSearchTerm(){this.widget.searchTerm$.pipe((0,Ui.b)(this.searchDebounceTime),(0,de.R)(this.widget.onDestroy$)).subscribe(()=>{this.widget.pizzagnaService.setProperty({pizzagnaKey:h.xW.Configuration,componentId:this.widget.componentId,propertyPath:["configuration.searchConfiguration.searchTerm"]},this.widget.searchValue),this.widget.eventBus.getStream(T.RG).next({})})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Bi=(()=>{class n{constructor(){this.visibleItems=[]}initWidget(t){this.widget=t}initVirtualScroll(){this.widget.hasVirtualScroll?this.registerVirtualScroll():this.deregisterVirtualScroll()}registerVirtualScroll(){this.widget.dataSource&&this.widget.dataSource.registerComponent({[(0,d.$0I)("virtualScroll")]:{componentInstance:this.widget.viewportManager}})}deregisterVirtualScroll(){var t,i;this.widget.dataSource&&(null===(i=(t=this.widget.dataSource).deregisterComponent)||void 0===i||i.call(t,(0,d.$0I)("virtualScroll")))}subscribeToVirtualScroll(){!this.widget.vscrollViewport||((0,Mt.T)(this.widget.vscrollViewport.renderedRangeStream,this.widget.tableUpdate$.pipe((0,ft.U)(()=>{var t;return null===(t=this.widget.vscrollViewport)||void 0===t?void 0:t.getRenderedRange()}))).pipe((0,it.b)(t=>{this.visibleItems=this.widget.tableData.slice(null==t?void 0:t.start,null==t?void 0:t.end),this.widget.changeDetector.detectChanges()}),(0,de.R)(this.widget.onDestroy$)).subscribe(),this.widget.viewportManager.setViewport(this.widget.vscrollViewport).observeNextPage$({pageSize:this.widget.range,emitFirstPage:!0}).pipe((0,zt.h)(t=>{var i,o;return t.end>=(null!==(o=null===(i=this.widget.vscrollViewport)||void 0===i?void 0:i.getDataLength())&&void 0!==o?o:0)}),(0,it.b)(t=>this.widget.zone.run(()=>{this.widget.dataSource.page=t.end/(t.end-t.start),this.widget.eventBus.getStream(T.df).next({}),this.widget.changeDetector.detectChanges()})),(0,de.R)(this.widget.onDestroy$)).subscribe())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Xn=l(63776);const jn=["widgetTable"];function qn(n,a){1&n&&(e.TgZ(0,"div",10),e._UZ(1,"nui-image",11),e.qZA())}function eo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"nui-search",13),e.NdJ("inputChange",function(o){return e.CHM(t),e.oxw().onSearchInputChanged(o)})("cancel",function(o){return e.CHM(t),e.oxw().onSearchInputChanged(o)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("value",t.searchValue)}}function to(n,a){if(1&n&&(e.TgZ(0,"th",17),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.Udp("width",i.columnsWidthMap.get(t.id),"px")("max-width",i.columnsWidthMap.get(t.id),"px")("min-width",i.columnsWidthMap.get(t.id),"px"),e.Q6J("isColumnSortingDisabled",!t.sortable)("title",t.label)("tooltipText",i.headerTooltipsEnabled?t.label:void 0)("alignment",i.getColumnAlignment(t)),e.xp6(1),e.hij(" ",t.label," ")}}function io(n,a){}function no(n,a){if(1&n){const t=e.EpF();e.ynx(0,20,21),e.YNc(2,io,0,0,"ng-template",22),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(1).attached(o)}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw().$implicit,o=e.oxw().$implicit;e.Q6J("componentType",null==o.formatter?null:o.formatter.componentType)("properties",i[o.id]),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function oo(n,a){if(1&n&&(e.TgZ(0,"td",18),e.YNc(1,no,3,3,"ng-container",19),e.qZA()),2&n){const t=a.$implicit,i=e.oxw().$implicit,o=e.oxw();e.Udp("width",o.columnsWidthMap.get(i.id),"px")("max-width",o.columnsWidthMap.get(i.id),"px")("min-width",o.columnsWidthMap.get(i.id),"px"),e.Q6J("alignment",o.getColumnAlignment(i)),e.xp6(1),e.Q6J("ngIf",t[i.id]&&i.formatter)}}function ro(n,a){1&n&&(e.ynx(0,14),e.YNc(1,to,2,11,"th",15),e.ynx(2),e.YNc(3,oo,2,8,"td",16),e.BQk()()),2&n&&e.s9C("nuiColumnDef",a.$implicit.id)}function so(n,a){1&n&&e._UZ(0,"tr",23)}function ao(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr",24),e.NdJ("click",function(o){const _=e.CHM(t).$implicit;return e.oxw().onInteraction(_,o)}),e.qZA()}if(2&n){const t=e.oxw();e.uIk("role",t.interactive?"button":"")}}const lo=function(n){return{"virtual-scroll-disabled":n}};let ri=(()=>{class n{constructor(t,i,o,s,_,f,M,x,K,V,ce,ge){this.eventBus=t,this.dataSource=i,this.widgetConfigurationService=o,this.changeDetector=s,this.pizzagnaService=_,this.viewportManager=f,this.zone=M,this.el=x,this.logger=K,this.searchAddon=V,this.virtualScrollAddon=ce,this.formattersRegistryService=ge,this.indentFromTop=70,this.sortable=!0,this.delayedMousePresenceDetectionEnabled=!0,this.tableData=[],this.columns=[],this.columnsWidthMap=new Map,this.hasVirtualScroll=!0,this.isSearchEnabled=!1,this.searchTerm$=new ie.x,this.onDestroy$=new ie.x,this.tableUpdate$=new ie.x,this.mousePresent$=new wi.X(!1),this.rowHeight=24,this._scrollBuffer=0,this.totalPages=0,this.lastPageFetched=0,this.sortableSet={},this.defaultColumnAlignment="left",this.idle=!1,this.isBusy=this.lastPageFetched!==this.totalPages}set range(t){this._range=t}get range(){return this.getTableScrollRange()}get headerTooltipsEnabled(){var t;return null===(t=this.configuration.headerTooltipsEnabled)||void 0===t||t}set scrollBuffer(t){if(t>100||t<0)throw new Error("Invalid scroll buffer provided. Required range 1..100");this._scrollBuffer=t}get interactive(){var t,i,o,s,_,f;return null!==(f=null!==(i=null===(t=this.configuration)||void 0===t?void 0:t.interactive)&&void 0!==i?i:null===(_=null===(s=null===(o=this.dataSource)||void 0===o?void 0:o.features)||void 0===s?void 0:s.getFeatureConfig(h.ni.Interactivity))||void 0===_?void 0:_.enabled)&&void 0!==f&&f}ngOnChanges(t){var i,o,s,_;if(t.dataFields&&(null===(i=this.dataFields)||void 0===i?void 0:i.length)&&this.setSortableSet(),(t.widgetData||t.configuration||t.dataFields)&&(this.updateTable(),null===(o=this.vscrollViewport)||void 0===o||o.checkViewportSize()),t.configuration){this.isSortByUpdated(t.configuration)&&(null===(s=t.configuration.currentValue.sortable)||void 0===s||s)&&this.onSortOrderChanged({direction:t.configuration.currentValue.sorterConfiguration.descendantSorting?d.aQE.descending:d.aQE.ascending,sortBy:t.configuration.currentValue.sorterConfiguration.sortBy});const f=$t()(t,"configuration.currentValue.hasVirtualScroll",!0);this.hasVirtualScroll!==f&&(this.hasVirtualScroll=f,this.virtualScrollAddon.initVirtualScroll())}t.totalItems&&(this.totalPages=Math.floor((null!==(_=this.totalItems)&&void 0!==_?_:0)/this.range))}ngOnInit(){this.dataSource&&(this.setSortFilter(),this.registerSorter(),this.virtualScrollAddon.initWidget(this))}ngAfterViewInit(){var t;if(!this.dataSource)return;null===(t=this.dataSource.busy)||void 0===t||t.pipe((0,it.b)(o=>this.isBusy=o),(0,de.R)(this.onDestroy$)).subscribe(),this.virtualScrollAddon.initVirtualScroll(),this.searchAddon.initWidget(this);const i=this.eventBus.getStream(T.pV).pipe((0,zt.h)(o=>{var s,_;return(null===(_=null===(s=o.payload)||void 0===s?void 0:s.widgetId)||void 0===_?void 0:_.toString())===this.widgetConfigurationService.getWidget().id}),(0,ft.U)(o=>{var s,_;return null!==(_=null===(s=o.payload)||void 0===s?void 0:s.height)&&void 0!==_?_:0}));i.pipe((0,de.R)(this.onDestroy$)).subscribe(o=>{var s;this.tableContainerHeight=o-this.indentFromTop,null===(s=this.vscrollViewport)||void 0===s||s.checkViewportSize(),this.changeDetector.detectChanges()}),setTimeout(()=>{(0,Mt.T)((0,$i.of)(this.range*this.rowHeight),i,(0,$i.of)(this.el.nativeElement.getBoundingClientRect().height)).pipe((0,zt.h)(o=>!!o),(0,oi.q)(1),(0,it.b)(o=>{this.tableWidgetHeight=o,this.virtualScrollAddon.subscribeToVirtualScroll(),this.eventBus.getStream(T.j7).next({})})).subscribe()})}ngOnDestroy(){var t;this.onDestroy$.next(),this.onDestroy$.complete(),this.tableUpdate$.complete(),null===(t=this.searchTerm$)||void 0===t||t.complete(),this.pizzagnaService.setProperty({componentId:"bodyContent",propertyPath:["fallbackKey"],pizzagnaKey:h.xW.Data},void 0)}shouldDisplayTable(){var t;const i=this.columns.length>0,o=(null===(t=this.tableData)||void 0===t?void 0:t.length)>0;return this.isSearchEnabled||this.hasVirtualScroll&&(this.isBusy||this.idle)?i:i&&o}dataTrackBy(t,i){return i?i.id:t}columnTrackBy(t,i){return i.id}updateColumns(t){this.headers=t.columns.filter(s=>s.isActive).map(s=>s.id);const i=t.columns.every(s=>Boolean(s.width)),o=t.columns.map((s,_,f)=>{var M,x,K,V;return this.columnsWidthMap.set(s.id,s.width),i&&this.columnsWidthMap.set(f[f.length-1].id,void 0),Object.assign(Object.assign({},s),{sortable:null===(V=this.sortableSet[null===(K=null===(x=null===(M=null==s?void 0:s.formatter)||void 0===M?void 0:M.properties)||void 0===x?void 0:x.dataFieldIds)||void 0===K?void 0:K.value])||void 0===V||V})});o.length>0&&i&&this.logger.warn("Cannot set width for all columns. Resetting last column width."),this.columns.length!==o.length?this.columns=[...o]:this.columns.forEach((s,_)=>{Object.assign(s,o[_],{})})}mapTableData(t,i,o){return o&&0!==o.length?t.map(s=>{const _=i.reduce((f,M)=>{var x,K,V;const ce=null===(K=null===(x=M.formatter)||void 0===x?void 0:x.properties)||void 0===K?void 0:K.dataFieldIds;if(!ce)return f;const ge=Object.keys(ce).reduce((pe,Ye)=>(pe[Ye]=s[ce[Ye]],pe),{});return f[M.id]=Object.assign({data:ge},Qn()(null===(V=M.formatter)||void 0===V?void 0:V.properties,"dataFieldIds")),f},{});return _.__record=s,_}):(this.logger.warn("There are no data fields defined, so table data cannot be displayed."),[])}onSortOrderChanged(t){var i,o;this.sortedColumn=t;const s=this.columns.find(x=>x.id===t.sortBy);if(!s)return;const _=null===(o=null===(i=s.formatter)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.dataFieldIds,f=null==_?void 0:_.value;if(!f)return;const M={sortBy:f,direction:t.direction};We()(M,this.sortFilter)||(this.sortFilter=M,this.flushTableData(),this.eventBus.getStream(T.RG).next({}))}onInteraction(t,i){this.interactive&&(i.target.closest((this.configuration.interactionIgnoredSelectors||d.hrM).join(","))||this.eventBus.getStream(T.b1).next({payload:{data:t.__record}}))}onSearchInputChanged(t){this.searchValue=t,this.searchTerm$.next("")}getColumnAlignment(t){var i,o,s;return!(null===(i=null==t?void 0:t.formatter)||void 0===i?void 0:i.componentType)||this.formattersRegistryService.isEmpty?this.defaultColumnAlignment:((null===(o=this.formatters)||void 0===o?void 0:o.version)!==this.formattersRegistryService.stateVersion&&(this.formatters={items:this.formattersRegistryService.getItems().reduce((_,f)=>Object.assign(Object.assign({},_),{[f.componentType]:f}),{}),version:this.formattersRegistryService.stateVersion}),(null===(s=this.formatters.items[t.formatter.componentType])||void 0===s?void 0:s.alignment)||this.defaultColumnAlignment)}setSortFilter(){var t,i,o,s,_,f,M;if(this.configuration){const x=null===(t=this.configuration.sorterConfiguration)||void 0===t?void 0:t.sortBy,K=null===(f=null===(_=null===(s=null===(o=null===(i=this.configuration.columns)||void 0===i?void 0:i.find(V=>V.id===x))||void 0===o?void 0:o.formatter)||void 0===s?void 0:s.properties)||void 0===_?void 0:_.dataFieldIds)||void 0===f?void 0:f.value;this.sortFilter={direction:(null===(M=this.configuration.sorterConfiguration)||void 0===M?void 0:M.descendantSorting)?d.aQE.descending:d.aQE.ascending,sortBy:K}}}isSortByUpdated(t){var i;const o=null===(i=t.previousValue)||void 0===i?void 0:i.sorterConfiguration,s=t.currentValue.sorterConfiguration,_=null==o?void 0:o.sortBy,f=null==s?void 0:s.sortBy;return f?!(_===f&&s.descendantSorting===o.descendantSorting):Boolean(_)}updateTable(){this.widgetData&&this.dataFields&&this.configuration.columns&&(this.updateColumns(this.configuration),this.idle=!1,this.tableData=this.mapTableData(this.widgetData,this.configuration.columns,this.dataFields),this.tableUpdate$.next(),this.changeDetector.detectChanges())}registerSorter(){this.dataSource.registerComponent({sorter:{componentInstance:{getFilters:()=>({type:"sorter",value:this.sortFilter})}}})}setSortableSet(){this.sortableSet={},this.dataFields.forEach(t=>{var i;this.sortableSet[t.id]=null===(i=t.sortable)||void 0===i||i})}flushTableData(){this.idle=!0,this.tableData=[]}getTableScrollRange(){var t;const o=(null!==(t=this._scrollBuffer)&&void 0!==t?t:0)/100+1;return this._range?Math.floor(this._range*o):Math.floor(this.tableWidgetHeight/this.rowHeight*2*o)}}return n.lateLoadKey="TableWidgetComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(Xn.I,8),e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.zCP),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(d.mQy),e.Y36(zi),e.Y36(Bi),e.Y36(ue.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-widget"]],viewQuery:function(t,i){if(1&t&&(e.Gf(jn,5),e.Gf(C.N7,5),e.Gf(d.xhB,5,e.SBq)),2&t){let o;e.iGM(o=e.CRH())&&(i.table=o.first),e.iGM(o=e.CRH())&&(i.vscrollViewport=o.first),e.iGM(o=e.CRH())&&(i.tableRows=o)}},hostVars:4,hostBindings:function(t,i){2&t&&(e.Tol(i.elementClass),e.ekj("table-widget-fullwidth",!0))},inputs:{widgetData:"widgetData",componentId:"componentId",configuration:"configuration",dataFields:"dataFields",totalItems:"totalItems",indentFromTop:"indentFromTop",sortable:"sortable",delayedMousePresenceDetectionEnabled:"delayedMousePresenceDetectionEnabled",range:"range",elementClass:"elementClass"},features:[e._Bn([zi,Bi]),e.TTD],decls:11,vars:24,consts:[["class","h-100 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"nui-table-widget","d-flex","flex-column",3,"ngClass"],["class","mr-2 mb-2 flex-row",4,"ngIf"],[1,"flex-row","h-100","nui-table-widget-container",3,"nuiDelayedMousePresenceDetection","delay","mousePresentSubject"],["tableStickyHeader","",1,"calc-height",2,"height","calc(100% - 2px)",3,"itemSize","ngClass"],["nui-table","",1,"nui-table-widget__main",3,"reorderable","sortable","totalItems","dataSource","sortedColumn","trackBy","sortOrderChanged"],["widgetTable",""],[3,"nuiColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["nui-header-row","",4,"nuiHeaderRowDef"],["nuiRowDef","","cdkVirtualFor","",3,"nuiRowDefColumns","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"h-100","d-flex","justify-content-center","align-items-center"],["image","no-data-to-show"],[1,"mr-2","mb-2","flex-row"],[1,"unlimited-width","d-flex","justify-content-end","flex-grow-1",3,"value","inputChange","cancel"],[3,"nuiColumnDef"],["nui-header-cell","",3,"isColumnSortingDisabled","width","max-width","min-width","title","tooltipText","alignment",4,"nuiHeaderCellDef"],["nui-cell","",3,"width","max-width","min-width","alignment",4,"nuiCellDef"],["nui-header-cell","",3,"isColumnSortingDisabled","title","tooltipText","alignment"],["nui-cell","",3,"alignment"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["nui-header-row",""],["nui-row","","density","tiny",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,qn,2,0,"div",0),e.TgZ(1,"div",1),e.YNc(2,eo,2,1,"div",2),e.TgZ(3,"div",3)(4,"cdk-virtual-scroll-viewport",4),e.ALo(5,"async"),e.TgZ(6,"table",5,6),e.NdJ("sortOrderChanged",function(s){return i.onSortOrderChanged(s)}),e.YNc(8,ro,4,1,"ng-container",7),e.YNc(9,so,1,0,"tr",8),e.YNc(10,ao,1,1,"ng-template",9),e.qZA()()()()),2&t&&(e.Q6J("ngIf",!i.shouldDisplayTable()),e.xp6(1),e.Q6J("ngClass",i.shouldDisplayTable()?"h-100":"invisible"),e.xp6(1),e.Q6J("ngIf",i.isSearchEnabled),e.xp6(1),e.Q6J("nuiDelayedMousePresenceDetection",i.delayedMousePresenceDetectionEnabled)("delay",i.configuration.scrollActivationDelayMs)("mousePresentSubject",i.mousePresent$),e.xp6(1),e.Q6J("itemSize",i.rowHeight)("ngClass",e.VKq(22,lo,!1===e.lcZ(5,20,i.mousePresent$)&&i.delayedMousePresenceDetectionEnabled)),e.xp6(2),e.Q6J("reorderable",null==i.configuration?null:i.configuration.reorderable)("sortable",i.sortable)("totalItems",i.totalItems)("dataSource",i.virtualScrollAddon.visibleItems)("sortedColumn",i.sortedColumn)("trackBy",i.dataTrackBy),e.xp6(2),e.Q6J("ngForOf",i.columns)("ngForTrackBy",i.columnTrackBy),e.xp6(1),e.Q6J("nuiHeaderRowDef",i.headers),e.xp6(1),e.Q6J("nuiRowDefColumns",i.headers)("cdkVirtualForOf",i.tableData)("cdkVirtualForTrackBy",i.dataTrackBy))},directives:[r.O5,d.cuP,r.mk,d.gSk,Gi,C.N7,d.Fpu,C.xd,d.ac$,r.sg,d.yNF,d.Go6,d.Asp,d.wCL,d.tNH,L.$,U.Pl,d.Pu4,d.ue9,d.l6o,C.x0,d.xhB],pipes:[r.Ov],styles:[".nui-table-widget[_ngcontent-%COMP%]{overflow:auto;width:100%}.nui-table-widget[_ngcontent-%COMP%]   .display-contents[_ngcontent-%COMP%]{display:contents}.nui-table-widget__main[_ngcontent-%COMP%]{flex:1 1 auto}.nui-table-widget__paginator[_ngcontent-%COMP%]{margin-top:10px}.nui-table-widget__overflow[_ngcontent-%COMP%]{overflow-y:auto}.nui-table-widget[_ngcontent-%COMP%]   .nui-table-widget-container[_ngcontent-%COMP%]   .virtual-scroll-disabled.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{overflow:hidden!important}.mobile[_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%], .mobile   [_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%]{min-height:200px}.table-widget-fullwidth[_nghost-%COMP%]{width:calc(100% - 10px)}.invisible[_ngcontent-%COMP%]{height:0}@-moz-document url-prefix(){.nui-table-widget-container{margin-right:10px}}"],changeDetection:0}),n})();var Wi=l(69769),si=l(15439),ke=l.n(si);let co=(()=>{class n{convertToSerializable(t){return{startDatetime:t.startDatetime.format(),endDatetime:t.endDatetime.format(),selectedPresetId:t.selectedPresetId,title:t.title}}convertFromSerializable(t){return{startDatetime:ke()(t.startDatetime,ke().defaultFormat),endDatetime:ke()(t.endDatetime,ke().defaultFormat),selectedPresetId:t.selectedPresetId,title:t.title}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ai=(()=>{class n{constructor(t,i,o,s,_,f,M){this.pizzagnaService=t,this.timeframeService=i,this.tfSerialization=o,this.history=s,this.dataSource=_,this.eventBus=f,this.changeDetector=M,this.currentTimeframe=this.timeframeService.getTimeframeByPresetId("last7Days")}ngOnChanges(t){if(t.timeframe){let i=this.tfSerialization.convertFromSerializable(this.timeframe);i=this.timeframeService.reconcileTimeframe(i),i.selectedPresetId&&(i=this.timeframeService.getTimeframeByPresetId(i.selectedPresetId)),this.currentTimeframe=i,t.timeframe.isFirstChange()||this.eventBus.getStream(T.RG).next({})}t.minDate&&(this.minDateAsMoment=ke()(this.minDate,ke().defaultFormat)),t.maxDate&&(this.maxDateAsMoment=ke()(this.maxDate,ke().defaultFormat))}ngOnInit(){this.history.restart(this.currentTimeframe),this.eventBus.getStream(T.re).subscribe(t=>{if(!t.payload)throw new Error("Unable to set timeframe. Event payload is undefined");this.onTimeframeChange(this.history.save(this.tfSerialization.convertFromSerializable(t.payload)))}),this.dataSource&&this.dataSource.registerComponent({timeframe:{componentInstance:{getFilters:()=>({type:"timeframe",value:this.timeframeService.reconcileTimeframe(this.currentTimeframe)})}}})}onTimeframeChange(t){const i=this.timeframeService.reconcileTimeframe(t);i.selectedPresetId=i.selectedPresetId||"",this.timeframeService.isEqual(i,this.currentTimeframe)||this.pizzagnaService.setProperty({pizzagnaKey:h.xW.Data,componentId:this.componentId,propertyPath:["timeframe"]},this.tfSerialization.convertToSerializable(i))}}return n.lateLoadKey="TimeframeSelectionComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(le.p),e.Y36(d.hYR),e.Y36(co),e.Y36(d.vpR),e.Y36(h.Fk,8),e.Y36(h.nY),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-timeframe-selection"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{componentId:"componentId",minDate:"minDate",maxDate:"maxDate",timeframe:"timeframe"},features:[e._Bn([d.vpR]),e.TTD],decls:6,vars:8,consts:[[3,"minDate","maxDate","timeFrame","historyIndex","timeFrameChange","undo","clear"],["icon","calendar",1,"pr-3"],["timeFrameSelection","",3,"presets"]],template:function(t,i){1&t&&(e.TgZ(0,"nui-time-frame-bar",0),e.NdJ("timeFrameChange",function(s){return i.onTimeframeChange(i.history.restart(s))})("undo",function(){return i.onTimeframeChange(i.history.undo())})("clear",function(){return i.onTimeframeChange(i.history.restart())}),e._UZ(1,"nui-icon",1),e._uU(2),e.ALo(3,"timeFrame"),e.TgZ(4,"nui-quick-picker",2),e._UZ(5,"nui-time-frame-picker"),e.qZA()()),2&t&&(e.Q6J("minDate",i.minDateAsMoment)("maxDate",i.maxDateAsMoment)("timeFrame",i.currentTimeframe)("historyIndex",i.history.index),e.xp6(2),e.hij(" ",e.lcZ(3,6,i.currentTimeframe)," "),e.xp6(2),e.Q6J("presets",i.timeframeService.currentPresets))},directives:[d.y0H,d.oJW,d.mtp,d.xlZ],pipes:[d.aEp],styles:["[_nghost-%COMP%]{border-top:1px solid;border-top-color:var(--nui-color-line-default,#d9d9d9);border-bottom:1px solid;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),n})();var Pt=(()=>{return(n=Pt||(Pt={})).DataPoints="dataPoints",n.Series="series",n.Values="values",Pt;var n})(),qe=(()=>{return(n=qe||(qe={})).Time="time",n.TimeInterval="timeInterval",n.Linear="linear",qe;var n})(),be=(()=>{return(n=be||(be={})).Line="line",n.StackedArea="stackedArea",n.StackedPercentageArea="stackedPercentageArea",n.StackedBar="stackedBar",n.StatusBar="statusBar",be;var n})();const _o={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"},po=n=>{const t=((n,a)=>new Intl.DateTimeFormat(ke().locale(),a).format(n))(n,_o).split(",");if(2!==t.length)throw new Error("Invalid timeseries date time format.");return`${t[0]} ${t[1]}`};let St=(()=>{class n{constructor(t){this.unitConversionService=t,this.unitConversionPipe=new ot(this.unitConversionService)}getScale(t,i,o){let s;switch(t.type){case qe.Time:s=new g.FBd,s.isTimeseriesScale=!0,s.formatters.title=po;break;case qe.Linear:s=new g.f$s,s.isTimeseriesScale=!0,s.formatters.tick=(_,f)=>{var M,x;return this.unitConversionPipe.transform(_,null!==(x=null===(M=t.properties)||void 0===M?void 0:M.axisUnits)&&void 0!==x?x:i,d.Qln.Standard)};break;case qe.TimeInterval:s=new g.lTH((0,si.duration)(1,"hour"))}return this.updateConfiguration(s,t,o),s}updateConfiguration(t,i,o){var s,_,f,M,x,K;switch(i.type){case qe.Time:{const V=null===(s=i.properties)||void 0===s?void 0:s.timeInterval;(null==V?void 0:V.startDatetime)&&(null==V?void 0:V.endDatetime)&&t.fixDomain([V.startDatetime,V.endDatetime]);break}case qe.TimeInterval:{const V=null===(_=i.properties)||void 0===_?void 0:_.interval;if("number"==typeof V){if(V<=0)throw new Error("Interval value must be greater than zero.");t instanceof g.lTH&&t.interval((0,si.duration)(V,"seconds"))}break}case qe.Linear:if((null===(f=i.properties)||void 0===f?void 0:f.axisUnits)&&(t.scaleUnits=i.properties.axisUnits),(null==o?void 0:o.preset)===be.StatusBar||(null==o?void 0:o.preset)===be.StackedArea)return;if("percent"===(null===(M=i.properties)||void 0===M?void 0:M.axisUnits)&&t.setFixDomainValues&&t.setFixDomainValues([0,25,50,75,100]),"percent"!==(null===(x=i.properties)||void 0===x?void 0:x.axisUnits)&&(null===(K=i.properties)||void 0===K?void 0:K.domain)&&t.setFixDomainValues){const V=(null==o?void 0:o.preset)===be.StackedBar?this.getStackedBarScaleDomain(i.properties.domain):this.getLineScaleDomain(i.properties.domain);t.setFixDomainValues(V)}}}getStackedBarScaleDomain({min:t,max:i}){(0===i||i%4>0)&&(i=i+4-i%4);const o=Math.floor((i-t)/4);return[t,t+o,t+2*o,i-o,i]}getLineScaleDomain({min:t,max:i}){if(t>i){const _=t;t=i,i=_}Math.abs((i-t)/((i+t)/2))<.5&&(t-=.5*Math.abs(t),i+=.5*Math.abs(i)),0===t&&0===i&&(t=-1,i=1),Math.abs(i-t)<.04&&(i+=.04);const s=(i-t)/4;return[t,t+s,t+2*s,i-s,i]}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(d.CrH))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),ki=(()=>{class n{constructor(t,i){this.timeseriesScalesService=t,this.dataSource=i,this.widgetData={},this.configuration={},this.scales={},this.destroy$=new ie.x,this.buildChart$=new ie.x,this.resetChart=!1,this.chartBuilt=!1,this.buildChart$.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.chartBuilt=!0})}get seriesInteractive(){var t,i,o,s;return"series"===(null===(t=this.configuration)||void 0===t?void 0:t.interaction)||(null===(s=null===(o=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===o?void 0:o.getFeatureConfig(h.ni.Interactivity))||void 0===s?void 0:s.enabled)||!1}ngOnChanges(t){var i,o,s,_,f,M,x,K;let V=!1,ce=!1;if(t.configuration){const ge=t.configuration.currentValue,pe=t.configuration.previousValue;if((null==ge?void 0:ge.preset)!==(null==pe?void 0:pe.preset)&&(ce=!0),(null==ge?void 0:ge.scales)!==(null==pe?void 0:pe.scales)){const Ye=Object.keys(null==ge?void 0:ge.scales);for(const Ce of Ye){const Ge=null===(i=null==ge?void 0:ge.scales)||void 0===i?void 0:i[Ce],_t=null===(o=null==pe?void 0:pe.scales)||void 0===o?void 0:o[Ce];!Ge||((null==Ge?void 0:Ge.type)!==(null==_t?void 0:_t.type)||(null===(s=null==Ge?void 0:Ge.properties)||void 0===s?void 0:s.axisUnits)!==(null===(_=null==_t?void 0:_t.properties)||void 0===_?void 0:_.axisUnits)?(this.scales[Ce]=this.timeseriesScalesService.getScale(Ge,ge.units,this.configuration),V=!0):(null==Ge?void 0:Ge.properties)!==(null==_t?void 0:_t.properties)&&(this.timeseriesScalesService.updateConfiguration(this.scales[Ce],Ge,this.configuration),V=!0))}}}(ce||!this.chartBuilt)&&this.buildChart(),t.widgetData&&!t.widgetData.isFirstChange()&&(0===(null===(M=null===(f=this.widgetData)||void 0===f?void 0:f.series)||void 0===M?void 0:M.length)&&(this.resetChart=!0),this.widgetData&&this.widgetData.series&&(this.resetChart&&(null===(K=null===(x=this.widgetData)||void 0===x?void 0:x.series)||void 0===K?void 0:K.length)>0&&(this.resetChart=!1,this.buildChart()),V=!0)),V&&this.updateChartData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.buildChart$.complete()}}return n.\u0275fac=function(t){e.$Z()},n.\u0275dir=e.lG2({type:n,inputs:{widgetData:"widgetData",configuration:"configuration"},features:[e.TTD]}),n})();function go(n,a){1&n&&e._UZ(0,"nui-icon",12),2&n&&e.Q6J("icon",a.$implicit)}function ho(n,a){if(1&n&&(e.TgZ(0,"div",6)(1,"nui-legend",7)(2,"nui-legend-series",8)(3,"div",9),e._UZ(4,"div",10),e.YNc(5,go,1,1,"nui-icon",11),e.qZA()()()()),2&n){const t=a.$implicit,i=e.oxw(3);e.ekj("layout-fixed-legend",null==i.configuration.gridConfig?null:i.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("active",i.chartAssist.isLegendActive),e.xp6(1),e.Q6J("descriptionPrimary",t.legendDescriptionPrimary)("descriptionSecondary",t.legendDescriptionSecondary),e.xp6(2),e.Udp("background-color",i.getDataPointData(t,"color")),e.xp6(1),e.Q6J("ngIf",i.getDataPointData(t,"icon"))}}function mo(n,a){if(1&n&&(e.TgZ(0,"div",3),e._UZ(1,"nui-chart",4),e.YNc(2,ho,6,8,"div",5),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("chart",t.chart)("nuiChartCollectionId",i.collectionId),e.xp6(1),e.Q6J("ngIf",(null==t.chartSeriesSet?null:t.chartSeriesSet.length)>0&&t.chartSeriesSet[0])}}function fo(n,a){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,mo,3,3,"div",2),e.qZA()),2&n){const t=e.oxw();e.ekj("layout-fixed",null==t.configuration.gridConfig?null:t.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.sparks)("ngForTrackBy",t.chartAssist.trackByFn)}}let li=(()=>{class n extends ki{constructor(t,i,o,s,_){super(o,i),this.iconService=t,this.timeseriesScalesService=o,this.changeDetector=s,this.eventBus=_,this.collectionId=(0,d.VjN)("timeseries-status-charts"),this.chartUpdate$=new ie.x}ngOnInit(){}getDataPointData(t,i){var o;const s=null===(o=this.chartAssist.highlightedDataPoints[t.id])||void 0===o?void 0:o.data;return s?s[i]:t.data.length>0?t.data[t.data.length-1][i]:void 0}buildChart(){this.buildChart$.next(),this.chartAssist=new g.ruA,this.accessors=(0,g.s_I)(this.chartAssist.palette.standardColors),this.accessors.data.color=(i,o,s,_)=>void 0===i.color?"var(--nui-color-semantic-unknown)":i.color,this.accessors.data.thickness=i=>void 0===i.thick||i.thick?g.Z7w.THICK:g.Z7w.THIN,this.accessors.data.marker=i=>i.icon?this.iconService.getIconResized(this.iconService.getIconData(i.icon).code,8):void 0,this.renderer=new g.Z7w({highlightStrategy:new g.Pkp("x"),pointerEvents:!1}),this.setGridConfigFromConfiguration(this.chartAssist.gridConfig),this.setGridConfigFromConfiguration(this.chartAssist.lastGridConfig),this.scales.y=new g.jS7,this.scales.y.fixDomain(g.s1E.STATUS_DOMAIN),this.scales.y.isTimeseriesScale=!0,this.scales.yRight&&(this.scales.yRight=this.scales.y)}updateChartData(){var t,i,o,s,_,f;const{gridConfig:M,lastGridConfig:x}=this.chartAssist;M.axis.bottom.visible=!(null===(t=this.configuration)||void 0===t?void 0:t.hasAdjacentChart),x.axis.bottom.visible=!(null===(i=this.configuration)||void 0===i?void 0:i.hasAdjacentChart),M.borders.bottom.className=(null===(o=this.configuration)||void 0===o?void 0:o.hasAdjacentChart)?"nui-chart-border":"nui-chart-border nui-chart-border--thick",x.borders.bottom.className=(null===(s=this.configuration)||void 0===s?void 0:s.hasAdjacentChart)?"nui-chart-border":"nui-chart-border nui-chart-border--thick",this.chartUpdate$.next();const K=this.widgetData.series.map(V=>Object.assign(Object.assign({},V),{data:this.transformData(V.data,this.scales.x instanceof g.lTH),accessors:this.accessors,renderer:this.renderer,scales:this.scales}));this.chartAssist.update(K),this.configuration.enableZoom&&(this.chartAssist.sparks.forEach(V=>{var ce,ge;(null===(ce=null==V?void 0:V.chart)||void 0===ce?void 0:ce.hasPlugin(g.Rbc))||null===(ge=null==V?void 0:V.chart)||void 0===ge||ge.addPlugin(new g.Rbc({enableExternalEvents:!0}))}),null===(_=this.chartAssist.sparks[0].chart)||void 0===_||_.getEventBus().getStream(g.bdF).pipe((0,de.R)((0,Mt.T)(this.chartUpdate$,null===(f=this.chartAssist.sparks[0].chart)||void 0===f?void 0:f.eventBus.getStream(g.wu_),this.buildChart$))).subscribe(V=>{const ce=V.data,ge=ce[Object.keys(ce)[0]];this.eventBus.getStream(T.re).next({payload:{startDatetime:ge[0],endDatetime:ge[1],selectedPresetId:void 0}})}))}transformData(t,i){const o=[];return t.forEach((s,_)=>{(i||t.length-1!==_)&&o.push({start:s.x,end:i?s.x:t[_+1].x,status:s.y,color:s.color,thick:s.thick,icon:s.icon})}),o}setGridConfigFromConfiguration(t){var i,o,s;const _=this.configuration;(null===(i=_.gridConfig)||void 0===i?void 0:i.xAxisTicksCount)&&(t.axis.bottom.approximateTicks=_.gridConfig.xAxisTicksCount),t.dimension.marginLocked&&(null===(o=_.gridConfig)||void 0===o?void 0:o.sideMarginLocked)&&(t.dimension.marginLocked.left=!0,t.dimension.marginLocked.right=!0),(null===(s=_.gridConfig)||void 0===s?void 0:s.sideMargin)&&(t.dimension.margin.left=_.gridConfig.sideMargin,t.dimension.margin.right=_.gridConfig.sideMargin)}}return n.lateLoadKey="StatusChartComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(d.C6t),e.Y36(h.Fk,8),e.Y36(St),e.Y36(e.sBO),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-status-bar-chart"]],features:[e.qOj],decls:1,vars:1,consts:[["class","status-bar-chart",3,"layout-fixed",4,"ngIf"],[1,"status-bar-chart"],["class","d-flex",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex"],[1,"d-flex","flex-grow-1",3,"chart","nuiChartCollectionId"],["class","d-flex flex-column pl-2",3,"layout-fixed-legend",4,"ngIf"],[1,"d-flex","flex-column","pl-2"],[1,"status-bar-chart__legend",3,"active"],[3,"descriptionPrimary","descriptionSecondary"],[1,"status-bar-chart__legend__tile","d-flex","justify-content-center","align-items-center"],[1,"w-100","h-100","status-bar-chart__legend__tile__background"],["class","status-bar-chart__legend__tile__icon",3,"icon",4,"ngIf"],[1,"status-bar-chart__legend__tile__icon",3,"icon"]],template:function(t,i){1&t&&e.YNc(0,fo,2,4,"div",0),2&t&&e.Q6J("ngIf",i.chartAssist)},directives:[r.O5,r.sg,g.xH4,g.VMb,g.FVX,g.kJo,d.oJW],styles:[".status-bar-chart__legend__tile[_ngcontent-%COMP%]{width:60px;position:relative}.status-bar-chart__legend__tile__background[_ngcontent-%COMP%]{position:absolute;opacity:.4}.status-bar-chart__legend__tile__icon[_ngcontent-%COMP%]{position:absolute}.layout-fixed-legend[_ngcontent-%COMP%]{max-width:250px;min-width:250px;padding-left:8px!important}.layout-fixed-legend[_ngcontent-%COMP%]   nui-legend[_ngcontent-%COMP%]{margin:0!important;width:100%}"]}),n})(),Bt=(()=>{class n extends ki{constructor(t,i,o,s){super(o,i),this.eventBus=t,this.timeseriesScalesService=o,this.changeDetector=s,this.valueAccessorKey="y",this.collectionId=""}mapSeriesSet(t,i){const o=[i.y];return i.yRight&&o.push(i.yRight),t.map((s,_)=>{var f;let M=o.find(x=>x.scaleUnits===s.metricUnits);return M||(M=null!==(f=o.find(x=>"generic"===x.scaleUnits))&&void 0!==f?f:i.y),Object.assign(Object.assign({},s),{scales:{x:i.x,y:M},renderer:this.renderer,accessors:this.accessors})})}hasLegend(){return this.configuration.legendPlacement&&this.configuration.legendPlacement!==Fe.w.None}legendShouldBeAlignedRight(){return this.configuration.legendPlacement===Fe.w.Right}onPrimaryDescClick(t,i){!this.seriesInteractive||(t.stopPropagation(),this.eventBus.getStream(T.b1).next({payload:{data:i,interactionType:Pt.Series}}))}updateChartData(){var t,i,o,s;const _=this.chartAssist.chart.getGrid();(null===(t=this.scales.y)||void 0===t?void 0:t.id)&&(_.leftScaleId=this.scales.y.id),this.scales.yRight&&1===this.widgetData.series.length||this.scales.y&&this.scales.yRight&&this.scales.y.scaleUnits===this.scales.yRight.scaleUnits?(this.scales.yRight=this.scales.y,_.rightScaleId=this.scales.y.id):(null===(i=this.scales.yRight)||void 0===i?void 0:i.id)&&(_.rightScaleId=this.scales.yRight.id);const f=_.config();f.axis.bottom.visible=!(null===(o=this.configuration)||void 0===o?void 0:o.hasAdjacentChart),f.borders.bottom.visible=!(null===(s=this.configuration)||void 0===s?void 0:s.hasAdjacentChart),this.chartAssist.update(this.mapSeriesSet(this.widgetData.series,this.scales))}buildChart(){var t,i,o,s;this.buildChart$.next();const _=this.configuration.chartColors&&(null===(t=this.configuration.chartColors)||void 0===t?void 0:t.length)>0?new g.jpW(this.configuration.chartColors):(0,g.GUR)(),f=new g.syg(_);this.accessors=this.createAccessors(f.standardColors),this.chartAssist=this.createChartAssist(f);const M=this.chartAssist.chart,x=M.getGrid().config();(null===(i=this.configuration.gridConfig)||void 0===i?void 0:i.xAxisTicksCount)&&(x.axis.bottom.approximateTicks=this.configuration.gridConfig.xAxisTicksCount),x.dimension.marginLocked&&(null===(o=this.configuration.gridConfig)||void 0===o?void 0:o.sideMarginLocked)&&(x.dimension.marginLocked.left=!0,x.dimension.marginLocked.right=!0),(null===(s=this.configuration.gridConfig)||void 0===s?void 0:s.sideMargin)&&(x.dimension.margin.left=this.configuration.gridConfig.sideMargin,x.dimension.margin.right=this.configuration.gridConfig.sideMargin),this.configuration.enableZoom&&M.addPlugin(new g.Rbc),M.getEventBus().getStream(g.bdF).pipe((0,de.R)((0,Mt.T)(this.destroy$,this.buildChart$))).subscribe(K=>{const V=K.data,ce=V[Object.keys(V)[0]];this.eventBus.getStream(T.re).next({payload:{startDatetime:ce[0],endDatetime:ce[1],selectedPresetId:void 0}})}),this.setupInteraction()}setupInteraction(){this.chartAssist.chart.getEventBus().getStream(g.C1c).pipe((0,de.R)((0,Mt.T)(this.destroy$,this.buildChart$))).subscribe(t=>{const i=t.data;i.interactionType===g.s_5.Click&&this.eventBus.getStream(T.b1).next({payload:{data:i.dataPoints,interactionType:Pt.DataPoints}})}),this.chartAssist.chart.getEventBus().getStream(g.hkV).pipe((0,de.R)((0,Mt.T)(this.destroy$,this.buildChart$))).subscribe(t=>{const i=t.data;i.interactionType===g.s_5.Click&&this.eventBus.getStream(T.b1).next({payload:{data:i.values,interactionType:Pt.Values}})})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(h.nY),e.LFG(h.Fk,8),e.LFG(St),e.LFG(e.sBO))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function To(n,a){if(1&n&&(e.TgZ(0,"div",5)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.configuration.leftAxisLabel)}}const Co=function(n){return{"nui-text-link-small link":n}};function Oo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(o,s)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Co,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Io(n,a){if(1&n&&(e.TgZ(0,"a",18),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function vo(n,a){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Eo(n,a){if(1&n&&(e.TgZ(0,"a",20),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function So(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",9),e.NdJ("isSelectedChange",function(o){const _=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(_.id,o)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",10),e._UZ(2,"nui-chart-marker",11),e.qZA(),e.TgZ(3,"div",12),e.YNc(4,Oo,2,4,"div",13),e.YNc(5,Io,2,3,"a",14),e.YNc(6,vo,2,2,"div",15),e.YNc(7,Eo,2,3,"a",16),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const Ro=function(n){return[n]};function No(n,a){if(1&n&&(e.TgZ(0,"div",6)(1,"nui-legend",7),e.YNc(2,So,8,12,"nui-legend-series",8),e.qZA()()),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,Ro,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let di=(()=>{class n extends Bt{constructor(t,i,o,s){super(t,i,o,s),this.renderer=new g.Med}createAccessors(t){return new g.qxh(t)}createChartAssist(t){const i=new g.c_e;i.axis.left.fit=!0;const o=new g.kL2(new g.Be5(i));return new g.doR(o,null,t)}}return n.lateLoadKey="LineChartComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(St),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-line-chart"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"nui-chart-layout","h-100"],["class","axis-label-left nui-text-small",4,"ngIf"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"axis-label-left","nui-text-small"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,To,3,1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"nui-chart",3),e.qZA(),e.YNc(4,No,3,8,"div",4),e.qZA()),2&t&&(e.ekj("layout-fixed",null==i.configuration.gridConfig?null:i.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("ngIf",!(null!=i.configuration.gridConfig&&i.configuration.gridConfig.hideYAxisLabel)),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[r.O5,g.xH4,g.VMb,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{max-width:250px;min-width:250px;padding-left:8px!important}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   nui-legend[_ngcontent-%COMP%]{margin:0!important;width:100%}"]}),n})();function Ao(n,a){if(1&n&&(e.TgZ(0,"div",5)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.configuration.leftAxisLabel)}}const yo=function(n){return{"nui-text-link-small link":n}};function Mo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(o,s)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,yo,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Po(n,a){if(1&n&&(e.TgZ(0,"a",18),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Do(n,a){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Fo(n,a){if(1&n&&(e.TgZ(0,"a",20),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function bo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",9),e.NdJ("isSelectedChange",function(o){const _=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(_.id,o)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",10),e._UZ(2,"nui-chart-marker",11),e.qZA(),e.TgZ(3,"div",12),e.YNc(4,Mo,2,4,"div",13),e.YNc(5,Po,2,3,"a",14),e.YNc(6,Do,2,2,"div",15),e.YNc(7,Fo,2,3,"a",16),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const xo=function(n){return[n]};function Lo(n,a){if(1&n&&(e.TgZ(0,"div",6)(1,"nui-legend",7),e.YNc(2,bo,8,12,"nui-legend-series",8),e.qZA()()),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,xo,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let ci=(()=>{class n extends Bt{constructor(t,i,o,s){super(t,i,o,s),this.renderer=new g.QtU,this.valueAccessorKey="y1"}createAccessors(t){return(0,g.mIe)(t)}createChartAssist(t){var i;const o=(0,g.nuZ)(),s=o.config();s.axis.left.fit=!0;const _=new g.kL2(o);return(null===(i=this.configuration.gridConfig)||void 0===i?void 0:i.hideYAxisTicksLabels)&&(s.axis.left.visible=!1,s.axis.right.visible=!1),new g.doR(_,g.aCj,t)}}return n.lateLoadKey="StackedAreaChartComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(St),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-stacked-area-chart"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"nui-chart-layout","h-100"],["class","axis-label-left nui-text-small",4,"ngIf"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"axis-label-left","nui-text-small"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ao,3,1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"nui-chart",3),e.qZA(),e.YNc(4,Lo,3,8,"div",4),e.qZA()),2&t&&(e.ekj("layout-fixed",null==i.configuration.gridConfig?null:i.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("ngIf",!(null!=i.configuration.gridConfig&&i.configuration.gridConfig.hideYAxisLabel)),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[r.O5,g.xH4,g.VMb,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{max-width:250px;min-width:250px;padding-left:8px!important}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   nui-legend[_ngcontent-%COMP%]{margin:0!important;width:100%}"]}),n})();function Go(n,a){if(1&n&&(e.TgZ(0,"div",5)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.configuration.leftAxisLabel)}}const wo=function(n){return{"nui-text-link-small link":n}};function $o(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(o,s)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,wo,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Uo(n,a){if(1&n&&(e.TgZ(0,"a",18),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function zo(n,a){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Bo(n,a){if(1&n&&(e.TgZ(0,"a",20),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Wo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",9),e.NdJ("isSelectedChange",function(o){const _=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(_.id,o)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",10),e._UZ(2,"nui-chart-marker",11),e.qZA(),e.TgZ(3,"div",12),e.YNc(4,$o,2,4,"div",13),e.YNc(5,Uo,2,3,"a",14),e.YNc(6,zo,2,2,"div",15),e.YNc(7,Bo,2,3,"a",16),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const ko=function(n){return[n]};function Zo(n,a){if(1&n&&(e.TgZ(0,"div",6)(1,"nui-legend",7),e.YNc(2,Wo,8,12,"nui-legend-series",8),e.qZA()()),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,ko,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let _i=(()=>{class n extends Bt{constructor(t,i,o,s){super(t,i,o,s),this.valueAccessorKey="value",this.renderer=new g.Z7w({highlightStrategy:new g.Pkp("x"),pointerEvents:!1})}mapSeriesSet(t,i){return this.accessors.data.thickness=i.x instanceof g.lTH?void 0:()=>5,super.mapSeriesSet(t,i)}createAccessors(t){const i=(0,g.Q6e)({horizontal:!1},t);return i.data.category=o=>o.x,i.data.value=o=>o.y,i}createChartAssist(t){const i=new g.kL2((0,g.skL)());return i.addPlugin(new g.koE),i.addPlugin(new g.$fK),new g.doR(i,g.knu,t)}}return n.lateLoadKey="StackedBarChartComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(St),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-stacked-bar-chart"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"nui-chart-layout","h-100"],["class","axis-label-left nui-text-small",4,"ngIf"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"axis-label-left","nui-text-small"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Go,3,1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"nui-chart",3),e.qZA(),e.YNc(4,Zo,3,8,"div",4),e.qZA()),2&t&&(e.ekj("layout-fixed",null==i.configuration.gridConfig?null:i.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("ngIf",!(null!=i.configuration.gridConfig&&i.configuration.gridConfig.hideYAxisLabel)),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[r.O5,g.xH4,g.VMb,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{max-width:250px;min-width:250px;padding-left:8px!important}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   nui-legend[_ngcontent-%COMP%]{margin:0!important;width:100%}"]}),n})();function Vo(n,a){if(1&n&&(e.TgZ(0,"div",5)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.configuration.leftAxisLabel)}}const Jo=function(n){return{"nui-text-link-small link":n}};function Yo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(o,s)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Jo,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Ho(n,a){if(1&n&&(e.TgZ(0,"a",18),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Ko(n,a){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Qo(n,a){if(1&n&&(e.TgZ(0,"a",20),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Xo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nui-legend-series",9),e.NdJ("isSelectedChange",function(o){const _=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(_.id,o)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",10),e._UZ(2,"nui-chart-marker",11),e.qZA(),e.TgZ(3,"div",12),e.YNc(4,Yo,2,4,"div",13),e.YNc(5,Ho,2,3,"a",14),e.YNc(6,Ko,2,2,"div",15),e.YNc(7,Qo,2,3,"a",16),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const jo=function(n){return[n]};function qo(n,a){if(1&n&&(e.TgZ(0,"div",6)(1,"nui-legend",7),e.YNc(2,Xo,8,12,"nui-legend-series",8),e.qZA()()),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,jo,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let ui=(()=>{class n extends Bt{constructor(t,i,o,s){super(t,i,o,s),this.renderer=new g.QtU,this.valueAccessorKey="y1"}createAccessors(t){return(0,g.mIe)(t)}createChartAssist(t){const i=(0,g.nuZ)();i.config().axis.left.fit=!0;const o=new g.kL2(i);return new g.doR(o,g.HAP,t)}}return n.lateLoadKey="StackedPercentageAreaChartComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(St),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-stacked-percentage-area-chart"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"nui-chart-layout","h-100"],["class","axis-label-left nui-text-small",4,"ngIf"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"axis-label-left","nui-text-small"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Vo,3,1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"nui-chart",3),e.qZA(),e.YNc(4,qo,3,8,"div",4),e.qZA()),2&t&&(e.ekj("layout-fixed",null==i.configuration.gridConfig?null:i.configuration.gridConfig.fixedLayout),e.xp6(1),e.Q6J("ngIf",!(null!=i.configuration.gridConfig&&i.configuration.gridConfig.hideYAxisLabel)),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[r.O5,g.xH4,g.VMb,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{max-width:250px;min-width:250px;padding-left:8px!important}.layout-fixed[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   nui-legend[_ngcontent-%COMP%]{margin:0!important;width:100%}"]}),n})(),Zi=(()=>{class n{constructor(){this.presets={[be.Line]:{componentType:di.lateLoadKey},[be.StackedArea]:{componentType:ci.lateLoadKey},[be.StackedPercentageArea]:{componentType:ui.lateLoadKey},[be.StackedBar]:{componentType:_i.lateLoadKey},[be.StatusBar]:{componentType:li.lateLoadKey}}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function er(n,a){}const tr=function(n,a,t){return{widgetData:n,configuration:a,collectionId:t}};function ir(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.ynx(1,3,4),e.YNc(3,er,0,0,"ng-template",5),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(2).attached(o)}),e.BQk(),e.qZA()}if(2&n){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentType",i.chartPreset.componentType)("properties",e.kEZ(3,tr,i.widgetData,i.configuration,i.collectionId||(null==i.configuration?null:i.configuration.collectionId))),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function nr(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"nui-image",6),e.qZA())}let pi=(()=>{class n{constructor(t,i){this.timeseriesChartPresetService=t,this.changeDetector=i,this.elementClass=""}ngOnChanges(t){var i,o;if(t.configuration){const s=t.configuration.currentValue,_=t.configuration.previousValue;(null==s?void 0:s.preset)!==(null==_?void 0:_.preset)&&(this.chartPreset=this.timeseriesChartPresetService.presets[null!==(o=null===(i=this.configuration)||void 0===i?void 0:i.preset)&&void 0!==o?o:be.Line])}}shouldShowChart(){var t,i,o;return(null!==(o=null===(i=null===(t=this.widgetData)||void 0===t?void 0:t.series)||void 0===i?void 0:i.length)&&void 0!==o?o:0)>0}}return n.lateLoadKey="TimeseriesWidgetComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(Zi),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-timeseries-widget"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",collectionId:"collectionId",elementClass:"elementClass"},features:[e.TTD],decls:2,vars:2,consts:[["class","h-100 timeseries-widget-content",4,"ngIf"],[4,"ngIf"],[1,"h-100","timeseries-widget-content"],["nuiComponentPortal","","componentId","timeseriesWidgetChart",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["image","no-data-to-show"]],template:function(t,i){1&t&&(e.YNc(0,ir,4,7,"div",0),e.YNc(1,nr,2,0,"div",1)),2&t&&(e.Q6J("ngIf",i.shouldShowChart()),e.xp6(1),e.Q6J("ngIf",!i.shouldShowChart()))},directives:[r.O5,L.$,U.Pl,d.cuP],styles:[".timeseries-widget-content[_ngcontent-%COMP%]{padding:10px}"]}),n})();function or(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nui-search",1),e.NdJ("inputChange",function(o){return e.CHM(t),e.oxw().onSearchInputChanged(o)})("cancel",function(o){return e.CHM(t),e.oxw().onSearch(o)})("search",function(o){return e.CHM(t),e.oxw().onSearch(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("value",t.searchValue)}}let gi=(()=>{class n{constructor(t,i){this.dataSource=t,this.eventBus=i,this.enabled=!1,this.searchTerm$=new ie.x,this.destroy$=new ie.x}ngOnInit(){var t,i,o,s;(null===(o=null===(i=null===(t=this.dataSource.features)||void 0===t?void 0:t.getSupportedFeatures())||void 0===i?void 0:i.search)||void 0===o?void 0:o.enabled)&&(this.enabled=!0),this.registerFilters(),this.handleSearchTermSubscription(null===(s=this.configuration)||void 0===s?void 0:s.searchOnKeyUp)}ngOnChanges(t){t.configuration&&this.handleSearchTermSubscription(t.configuration.currentValue.searchOnKeyUp)}onSearchInputChanged(t){var i,o;(null===(o=null===(i=this.configuration)||void 0===i?void 0:i.searchOnKeyUp)||void 0===o?void 0:o.enabled)&&(this.searchValue=t,this.searchTerm$.next(t))}onSearch(t){this.searchValue=t,this.searchTerm$.next(t)}ngOnDestroy(){this.eventBus.getStream(T.kV).next({payload:""}),this.destroy$.next(),this.destroy$.complete()}registerFilters(){var t;null===(t=this.dataSource)||void 0===t||t.registerComponent({search:{componentInstance:{getFilters:()=>({value:this.searchValue})}}})}handleSearchTermSubscription(t){var i;null===(i=this.searchTermSubscription)||void 0===i||i.unsubscribe(),this.searchTermSubscription=this.searchTerm$.pipe((0,de.R)(this.destroy$),(0,Ui.b)((null==t?void 0:t.debounceTime)||n.defaultSearchDebounce)).subscribe(o=>{this.eventBus.getStream(T.RG).next({}),this.eventBus.getStream(T.kV).next({payload:o})})}}return n.lateLoadKey="WidgetSearchComponent",n.defaultSearchDebounce=500,n.\u0275fac=function(t){return new(t||n)(e.Y36(h.Fk,8),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-search"]],hostVars:4,hostBindings:function(t,i){2&t&&e.ekj("default",i.enabled)("invisible",!i.enabled)},inputs:{configuration:"configuration",searchValue:"searchValue"},features:[e.TTD],decls:1,vars:1,consts:[["class","unlimited-width",3,"value","inputChange","cancel","search",4,"ngIf"],[1,"unlimited-width",3,"value","inputChange","cancel","search"]],template:function(t,i){1&t&&e.YNc(0,or,1,1,"nui-search",0),2&t&&e.Q6J("ngIf",i.enabled)},directives:[r.O5,d.gSk],styles:[".default[_nghost-%COMP%]{padding:5px 10px}.invisible[_nghost-%COMP%]{height:0}"],changeDetection:0}),n})();var Ke=(()=>{return(n=Ke||(Ke={})).ErrorUnknown="errorUnknown",n.ErrorForbidden="errorForbidden",n.ErrorNotFound="errorNotFound",Ke;var n})();function rr(n,a){}function sr(n,a){}function ar(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",5),e.ynx(1,1,2),e.YNc(3,sr,0,0,"ng-template",3),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(2).attached(o)}),e.BQk(),e.qZA()}if(2&n){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentId",i.nodeConfigs[1].id)("componentType",i.nodeConfigs[1].componentType)("providers",i.nodeConfigs[1].providers)("properties",i.nodeConfigs[1].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}const lr=function(n,a){return{"d-none":n,"d-flex":a}};let hi=(()=>{class n extends ve{constructor(t,i,o){super(t,i,o),this.elementClass="",this.defaultClasses="w-100"}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`}ngOnDestroy(){super.ngOnDestroy()}getNodes(){return this.fallbackKey?[this.primaryContent,this.fallbackMap&&this.fallbackMap[this.fallbackKey]||Ke.ErrorUnknown]:[this.primaryContent]}}return n.lateLoadKey="WidgetBodyContentComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-body-content"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{componentId:"componentId",primaryContent:"primaryContent",fallbackKey:"fallbackKey",fallbackMap:"fallbackMap",elementClass:"elementClass"},features:[e.qOj],decls:5,vars:10,consts:[[1,"h-100",3,"ngClass"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["class","d-flex h-100",4,"ngIf"],[1,"d-flex","h-100"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e.ynx(1,1,2),e.YNc(3,rr,0,0,"ng-template",3),e.NdJ("attached",function(_){return e.CHM(o),e.MAs(2).attached(_)}),e.BQk(),e.qZA(),e.YNc(4,ar,4,5,"div",4)}if(2&t){const o=e.MAs(2);e.Q6J("ngClass",e.WLB(7,lr,i.fallbackKey,!i.fallbackKey)),e.xp6(1),e.Q6J("componentId",i.nodeConfigs[0].id)("componentType",i.nodeConfigs[0].componentType)("providers",i.nodeConfigs[0].providers)("properties",i.nodeConfigs[0].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",o.portal),e.xp6(1),e.Q6J("ngIf",i.fallbackKey)}},directives:[r.mk,L.$,U.Pl,r.O5],encapsulation:2}),n})();function dr(n,a){1&n&&e._UZ(0,"nui-preview-overlay")}function cr(n,a){}let mi=(()=>{class n extends ve{constructor(t,i,o,s){super(i,o,s),this.eventBus=t,this.editMode=!1,this.elementClass="",this.defaultClasses="d-flex h-100 w-100",this.getNodes=()=>[this.content]}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`,this.eventBus.getStream(T.N9).pipe((0,de.R)(this.destroyed$)).subscribe(t=>{this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["editMode"]},!!t.payload)})}ngOnDestroy(){super.ngOnDestroy()}}return n.lateLoadKey="WidgetBodyComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(h.nY),e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-body"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{componentId:"componentId",editMode:"editMode",content:"content",elementClass:"elementClass"},features:[e.qOj],decls:4,vars:6,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){if(1&t){const o=e.EpF();e.YNc(0,dr,1,0,"nui-preview-overlay",0),e.ynx(1,1,2),e.YNc(3,cr,0,0,"ng-template",3),e.NdJ("attached",function(_){return e.CHM(o),e.MAs(2).attached(_)}),e.BQk()}if(2&t){const o=e.MAs(2);e.Q6J("ngIf",i.editMode),e.xp6(1),e.Q6J("componentId",i.nodeConfigs[0].id)("componentType",i.nodeConfigs[0].componentType)("providers",i.nodeConfigs[0].providers)("properties",i.nodeConfigs[0].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",o.portal)}},directives:[r.O5,O.b,L.$,U.Pl],styles:["[_nghost-%COMP%]{position:relative}"]}),n})();var Rt=l(41777);const _r=["widgetHeaderCustomElement"];function ur(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleCollapsed()}),e._UZ(1,"span",19),e.qZA()}}function pr(n,a){1&n&&(e.TgZ(0,"div",20),e._UZ(1,"nui-icon",21),e.qZA())}function gr(n,a){if(1&n&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Q6J("title",t.title),e.xp6(1),e.hij(" ",t.title," ")}}function hr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"a",23),e.NdJ("click",function(o){return e.CHM(t),e.oxw().prepareLink(o)})("mouseenter",function(o){return e.CHM(t),e.oxw().prepareLink(o)})("mousedown",function(o){return o.stopPropagation(),o.preventDefault()}),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("href",t.url,e.LSH)("nuiTooltip",t.linkTooltip),e.xp6(1),e.Oqu(t.title)}}function mr(n,a){if(1&n&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Q6J("title",t.subtitle),e.xp6(1),e.hij(" ",t.subtitle," ")}}function fr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(o){return e.CHM(t),e.oxw().prepareLink(o)})("mouseenter",function(o){return e.CHM(t),e.oxw().prepareLink(o)})("mousedown",function(o){return o.stopPropagation(),o.preventDefault()}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("href",t.url,e.LSH)("nuiTooltip",t.linkTooltip)}}function Tr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().onEditWidget()}),e.qZA()}}function Cr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleCollapsed()}),e.qZA()}}function Or(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nui-menu-action",30),e.NdJ("actionDone",function(){return e.CHM(t),e.oxw(2).onReloadData()}),e._UZ(1,"nui-icon",31),e.TgZ(2,"span"),e.SDv(3,32),e.qZA()()}}function Ir(n,a){if(1&n&&(e.TgZ(0,"nui-menu",28),e.YNc(1,Or,4,0,"nui-menu-action",29),e.qZA()),2&n){const t=e.oxw();e.Q6J("appendToBody",!0),e.xp6(1),e.Q6J("ngIf",t.reloadable)}}function vr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nui-popup",33)(1,"span",34),e._UZ(2,"button",35),e.qZA(),e.TgZ(3,"div",36)(4,"nui-menu-action",37),e.NdJ("actionDone",function(){return e.CHM(t),e.oxw().removeWidget()}),e.SDv(5,38),e.qZA()()()}2&n&&e.Q6J("appendToBody",!0)}function Er(n,a){1&n&&e._UZ(0,"div",39)}const Sr=["*"];let fi=(()=>{class n{constructor(t,i,o,s,_){this.eventBus=t,this.pizzagnaService=i,this.changeDetector=o,this.eventProxy=s,this.linkProvider=_,this.editMode=!0,this.editable=!0,this.removable=!0,this.collapsible=!1,this.reloadable=!0,this.hideMenu=!1,this.collapsed=!1,this.onDestroy$=new ie.x,this.linkTooltip=$localize`Explore this data`}get hostClass(){return!0}get state(){return this.collapsed&&this.collapsible?"collapsed":"expanded"}ngOnInit(){this.collapsible&&this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["isCollapsed"]},!0),this.eventProxy&&(this.eventProxy.addUpstream(T.Ef),this.eventProxy.addUpstream(T.y4),this.eventProxy.addDownstream(T.N9)),this.eventBus.getStream(T.N9).pipe((0,de.R)(this.onDestroy$)).subscribe(t=>{this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["collapsed"]},!t.payload),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["editMode"]},!!t.payload)})}ngAfterViewInit(){setTimeout(()=>{this.withCustomElement=0!==this.widgetHeaderCustomElement.nativeElement.childNodes.length})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}removeWidget(){this.eventBus.getStream(T.y4).next({})}toggleCollapsed(){this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["collapsed"]},!this.collapsed)}onEditWidget(){this.eventBus.getStream(T.Ef).next({})}onReloadData(){if(!this.reloadable)throw new Error("The widget is not reloadable, so it can't be reloaded manually.");this.eventBus.getStream(T.RG).next({})}prepareLink(t){const i=t.target;if(i&&this.linkProvider){const o=this.linkProvider.getLink(this.url);o&&i.setAttribute("href",o)}return!0}}return n.lateLoadKey="WidgetHeaderComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(h.nY),e.Y36(le.p),e.Y36(e.sBO),e.Y36(k.q,8),e.Y36(h.B5,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-header"]],viewQuery:function(t,i){if(1&t&&e.Gf(_r,5),2&t){let o;e.iGM(o=e.CRH())&&(i.widgetHeaderCustomElement=o.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.ekj("nui-widget-header",i.hostClass)},inputs:{componentId:"componentId",editMode:"editMode",editable:"editable",removable:"removable",collapsible:"collapsible",reloadable:"reloadable",title:"title",subtitle:"subtitle",hideMenu:"hideMenu",url:"url",collapsed:"collapsed"},ngContentSelectors:Sr,decls:19,vars:20,consts:function(){let a,t,i,o;return a=$localize`:␟8028b4b4a38e861642d3d465f1fd0e08ea5bdcd0␟8529558445404824560:Edit widget`,t=$localize`:␟aefc550c9735e4112bc884389f77c619007acb8e␟9121781503543370614:Reload data`,i=$localize`:␟6d4f27e8085712e506aaaee1704b3e0455d15652␟8500807759101015900:Remove widget`,o=$localize`:␟0f0e6eea7e5a63ccfd2d07117d5560cb89936c2c␟495801405190883151:Remove Widget`,[[1,"nui-widget__header"],[1,"nui-widget__header__container"],["class","collapse-container",3,"click",4,"ngIf"],[1,"nui-widget__header__content"],["class","nui-widget__header__content-drag-icon nui-dashboard__widget--drag-handle",4,"ngIf"],[1,"nui-widget__header__content-custom-element"],["widgetHeaderCustomElement",""],[1,"nui-widget__header__content-title-container","nui-dashboard__widget--drag-handle"],["class","nui-text-widget nui-widget__header__content-title",3,"title",4,"ngIf"],[4,"ngIf"],["class","nui-text-hint nui-widget__header__content-help-hint",3,"title",4,"ngIf"],[1,"nui-widget__header__content-actions"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown",4,"ngIf"],["class","nui-widget-header__action-edit","nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",a,3,"click",4,"ngIf"],["class","nui-widget-header__action-toggle-collapsed","nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",3,"click",4,"ngIf"],["class","nui-widget__header__content-actions__menu","icon","menu","displayStyle","action",3,"appendToBody",4,"ngIf"],["class","nui-widget-header__action-remove",3,"appendToBody",4,"ngIf"],["class","collapse-spacer",4,"ngIf"],[1,"collapse-container",3,"click"],[1,"collapse-container__line"],[1,"nui-widget__header__content-drag-icon","nui-dashboard__widget--drag-handle"],["icon","drag","iconColor","gray"],[1,"nui-text-widget","nui-widget__header__content-title",3,"title"],[1,"nui-text-widget","nui-widget__header__content-title",3,"href","nuiTooltip","click","mouseenter","mousedown"],[1,"nui-text-hint","nui-widget__header__content-help-hint",3,"title"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown"],["nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",a,1,"nui-widget-header__action-edit",3,"click"],["nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",1,"nui-widget-header__action-toggle-collapsed",3,"click"],["icon","menu","displayStyle","action",1,"nui-widget__header__content-actions__menu",3,"appendToBody"],[3,"actionDone",4,"ngIf"],[3,"actionDone"],["icon","reload"],t,[1,"nui-widget-header__action-remove",3,"appendToBody"],["nuiTooltip",i],["nui-button","","nuiPopupToggle","","type","button","icon","remove","iconColor","red","displayStyle","action"],["popupAreaContent","",1,"nui-menu"],["type","destructive",3,"actionDone"],o,[1,"collapse-spacer"]]},template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,ur,2,0,"div",2),e.TgZ(3,"div",3),e.YNc(4,pr,2,0,"div",4),e.TgZ(5,"div",5,6),e.Hsn(7),e.qZA(),e.TgZ(8,"div",7),e.YNc(9,gr,2,2,"div",8),e.YNc(10,hr,3,3,"div",9),e.YNc(11,mr,2,2,"div",10),e.qZA(),e.TgZ(12,"div",11),e.YNc(13,fr,1,2,"a",12),e.YNc(14,Tr,1,0,"button",13),e.YNc(15,Cr,1,0,"button",14),e.YNc(16,Ir,2,2,"nui-menu",15),e.YNc(17,vr,6,1,"nui-popup",16),e.qZA()()(),e.YNc(18,Er,1,0,"div",17),e.qZA()),2&t&&(e.xp6(1),e.ekj("nui-widget__header__container--collapsible",i.collapsible)("nui-widget__header__container--collapsed",i.collapsible&&i.collapsed)("nui-widget__header__container--expanded",i.collapsible&&!i.collapsed),e.Q6J("@expandedState",i.state),e.xp6(1),e.Q6J("ngIf",i.collapsed&&i.collapsible),e.xp6(2),e.Q6J("ngIf",i.editMode),e.xp6(4),e.ekj("nui-widget__header__content-title-with-additional-content",i.withCustomElement||i.editMode),e.xp6(1),e.Q6J("ngIf",!i.url||i.editMode),e.xp6(1),e.Q6J("ngIf",i.url&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.subtitle),e.xp6(2),e.Q6J("ngIf",i.url&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.editable&&i.editMode),e.xp6(1),e.Q6J("ngIf",i.collapsible&&!i.editMode),e.xp6(1),e.Q6J("ngIf",!i.hideMenu&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.removable&&i.editMode),e.xp6(1),e.Q6J("ngIf",i.collapsible))},directives:[r.O5,d.oJW,d.i9q,d.r0F,d.Mnp,d.VDk,d.RXH,d.btB],styles:[".nui-widget__header[_ngcontent-%COMP%]{display:flex;position:relative}.nui-widget__header[_ngcontent-%COMP%]   .collapse-spacer[_ngcontent-%COMP%]{margin-bottom:15px}.nui-widget__header__container[_ngcontent-%COMP%]{z-index:500;width:100%}.nui-widget__header__container--collapsible[_ngcontent-%COMP%]{width:100%}.nui-widget__header__container--collapsed[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container__line[_ngcontent-%COMP%]{width:16px;height:1px;background:var(--nui-color-line-active,#0079aa);margin:5px 0;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{align-items:flex-start;display:flex;opacity:1}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-drag-icon[_ngcontent-%COMP%]{align-items:center;cursor:move;display:flex;height:30px;justify-content:center;margin:5px;width:30px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title[_ngcontent-%COMP%]{display:block;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-container[_ngcontent-%COMP%]{flex:1;min-width:0;padding:10px 0 5px 10px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-with-additional-content[_ngcontent-%COMP%]{padding-left:0}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-help-hint[_ngcontent-%COMP%]{max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-actions[_ngcontent-%COMP%]{display:flex;padding:5px 10px 0 5px}"],data:{animation:[(0,Rt.X$)("expandedState",[(0,Rt.SB)("expanded",(0,Rt.oB)({height:"*"})),(0,Rt.SB)("collapsed",(0,Rt.oB)({height:"11px"})),(0,Rt.eR)("expanded <=> collapsed",[(0,Rt.jt)("350ms ease-in-out")])])]}}),n})();l(43046);var Qe=l(53737);let Vi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[U.eL,N],U.eL]}),n})();const Nr=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred ","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgrey","#d3d3d3"],["lightgreen","#90ee90"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370d8"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#d87093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]);let Ji=(()=>{class n{RGBToHexRGBToHex(t){const i=t.indexOf(",")>-1?",":" ",o=t.substr(4).split(")")[0].split(i);let s=(+o[0]).toString(16),_=(+o[1]).toString(16),f=(+o[2]).toString(16);return 1===s.length&&(s="0"+s),1===_.length&&(_="0"+_),1===f.length&&(f="0"+f),"#"+s+_+f}isHEX(t){return/^#[0-9A-F]{6}$/i.test(t)||/^#([0-9A-F]{3}){1,2}$/i.test(t)}colorKeywordsToHex(t){const i=Nr.get(t);return W()(i)?"":i}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Ar=l(91314);function yr(n,a){if(1&n&&e._UZ(0,"div",10),2&n){const t=e.oxw().$implicit,i=e.oxw();e.ekj("black-tick",i.isBlackTick||(null==t?null:t.color)===i.defaultColor)}}function Mr(n,a){if(1&n&&(e.TgZ(0,"div",4)(1,"nui-select-v2-option",5,6)(3,"div",7)(4,"div",8),e.YNc(5,yr,1,2,"div",9),e.qZA()()()()),2&n){const t=a.$implicit,i=e.MAs(2),o=e.oxw();e.xp6(1),e.Q6J("value",null==t?null:t.color)("displayValueContext",t),e.xp6(2),e.ekj("color-picker-option--selected",null==i?null:i.selected),e.uIk("title",null==t?null:t.label),e.xp6(1),e.Q6J("ngStyle",o.setStyles(null==t?null:t.color)),e.xp6(1),e.Q6J("ngIf",null==i?null:i.selected)}}function Pr(n,a){if(1&n&&(e.TgZ(0,"div",11)(1,"div",12),e._UZ(2,"div",13),e.qZA(),e.TgZ(3,"div",14),e._UZ(4,"nui-icon",15),e.qZA()()),2&n){const t=a.$implicit,i=a.open,o=e.oxw();e.xp6(1),e.uIk("title",null==t?null:t.label),e.xp6(1),e.Q6J("ngStyle",o.setStyles(null==t?null:t.color)),e.xp6(2),e.Udp("transform",i?"rotate(180deg)":"")}}let Ti=(()=>{class n{constructor(t,i,o){this.changeDetection=t,this.colorService=i,this.cdkOverlay=o,this.defaultColor="var(--nui-color-bg-secondary)",this.overlayUtilities=new d.KcF,this.destroy$=new ie.x,this.setStyles=s=>({"background-color":s||this.defaultColor})}ngOnChanges(t){t.colors&&(this.colors=t.colors.currentValue),t.colorPalette&&(this.colorPalette=t.colorPalette.currentValue)}ngAfterViewInit(){var t;this.value&&(null===(t=this.select)||void 0===t||t.writeValue(this.value),this.isBlackTick=this.determineBlackTick(this.value.toString())),this.palette=this.colorPalette||this.colors.map(s=>({color:s})),this.initOverlayUtilities(),this.select.valueSelected.pipe((0,it.b)(s=>this.writeValue(s)),(0,it.b)(s=>this.onChange(s)),(0,de.R)(this.destroy$)).subscribe(s=>{s&&(this.isBlackTick=this.determineBlackTick(s.toString()))});const i=(0,d.gpG)(),o=this.cdkOverlay.position().flexibleConnectedTo(this.select.elRef.nativeElement).withPush(!1).withViewportMargin(0).withPositions([i["bottom-right"],i["bottom-left"],i["top-right"],i["top-left"]]);this.overlayConfig={maxWidth:this.cols?30*this.cols+20+"px":"260px",positionStrategy:o}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onChange(t){}_onTouched(){}writeValue(t){var i;this.value=t,null===(i=this.select)||void 0===i||i.writeValue(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this._onTouched=t}determineBlackTick(t){let i="#fff";return i=this.colorService.isHEX(t)?t:(0,g.ruO)(t)||this.colorService.RGBToHexRGBToHex(t)||this.colorService.colorKeywordsToHex(t),"#fff"===this.getContrastOnBgColor(i)}initOverlayUtilities(){const t=this.select.dropdown;this.selectResizeObserver=this.overlayUtilities.setPopupComponent(this.select.dropdown).getResizeObserver({updateSize:!1}),t.show$.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.overlayUtilities.syncWidth(),this.selectResizeObserver.observe(this.select.elRef.nativeElement)}),t.hide$.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.selectResizeObserver.unobserve(this.select.elRef.nativeElement)})}getContrastOnBgColor(t){return t?parseInt(t.replace("#",""),16)>8388607.5?"#fff":"#000":""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Ji),e.Y36(Ar.aV))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-color-picker"]],viewQuery:function(t,i){if(1&t&&e.Gf(d.j_n,5),2&t){let o;e.iGM(o=e.CRH())&&(i.select=o.first)}},inputs:{colors:"colors",colorPalette:"colorPalette",cols:"cols"},features:[e._Bn([{provide:d.MDN,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},Ji]),e.TTD],decls:5,vars:4,consts:[[1,"color-picker-select",3,"overlayConfig","syncWidth","displayValueTemplate"],[1,"color-picker-container"],["class","d-inline-flex flex-wrap box",4,"ngFor","ngForOf"],["colorSelectTemplate",""],[1,"d-inline-flex","flex-wrap","box"],[1,"w-100","h-100","reset-box-sizes",3,"value","displayValueContext"],["option",""],[1,"color-picker-option"],[1,"color-picker-option__color-box",3,"ngStyle"],["class","color-picker-option__glyph",3,"black-tick",4,"ngIf"],[1,"color-picker-option__glyph"],[1,"color-picker-input"],[1,"color-picker-input__box"],[1,"color-picker-input__color-box",3,"ngStyle"],[1,"color-picker-input__toggle"],["icon","caret-down"]],template:function(t,i){if(1&t&&(e.TgZ(0,"nui-select-v2",0)(1,"div",1),e.YNc(2,Mr,6,7,"div",2),e.qZA()(),e.YNc(3,Pr,5,4,"ng-template",null,3,e.W1O)),2&t){const o=e.MAs(4);e.Q6J("overlayConfig",i.overlayConfig)("syncWidth",!1)("displayValueTemplate",o),e.xp6(2),e.Q6J("ngForOf",i.palette)}},directives:[d.j_n,r.sg,d.rLF,r.PC,r.O5,d.oJW],styles:[".box[_ngcontent-%COMP%]{width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]{padding:5px 10px}.color-picker-select[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;min-width:unset;cursor:pointer}.color-picker-input[_ngcontent-%COMP%]{display:flex}.color-picker-input__box[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.color-picker-input__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);width:17px;height:17px;flex-grow:1;margin:0 10px}.color-picker-input__toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);width:30px;height:30px}.color-picker-option[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.color-picker-option__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);padding:1px 0 0 1px}.color-picker-option--selected[_ngcontent-%COMP%]{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.color-picker-option--selected[_ngcontent-%COMP%]:focus{outline:none}.color-picker-option__glyph[_ngcontent-%COMP%]{width:100%;height:100%;background-size:12px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMjAgMjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAgMjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS54dWktY2hlY2tib3gtZ2x5cGh7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDozO3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1saW5lY2FwOnJvdW5kO30KPC9zdHlsZT4KPHBvbHlsaW5lIGNsYXNzPSJ4dWktY2hlY2tib3gtZ2x5cGgiIHBvaW50cz0iMTcsNCA4LDE1IDMsOSAiLz4KPC9zdmc+);background-repeat:no-repeat}.color-picker-option__glyph.black-tick[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}"],changeDetection:0}),n})();var Yi=l(69155);let Wt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-drop-area"]],decls:0,vars:0,template:function(t,i){},styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;border:3px solid;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:var(--nui-color-busy-default,rgba(0, 196, 210, .2))}"]}),n})();function br(n,a){}const xr=function(){return["formReady"]};function Lr(n,a){if(1&n){const t=e.EpF();e.ynx(0)(1,1,2),e.NdJ("output",function(o){const _=e.CHM(t).$implicit;return e.oxw().onEvent(_.id,o)}),e.YNc(3,br,0,0,"ng-template",3),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(2).attached(o)}),e.BQk()()}if(2&n){const t=a.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties)("outputs",e.DdM(6,xr)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let Tt=(()=>{class n extends ve{constructor(t,i,o,s,_){super(t,i,o),this.formDirective=s,this.eventBus=_,this.elementClass=""}ngOnInit(){this.form=this.formDirective.form}ngOnChanges(t){super.ngOnChanges(t)}onEvent(t,i){"formReady"===i.id&&this.addFormGroup(t,i.payload)}addFormGroup(t,i){this.form.addControl(t,i)}getNodes(){return this.nodes}}return n.lateLoadKey="FormStackComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy),e.Y36(p.sg),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-form-stack"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{nodes:"nodes"},features:[e._Bn([],[{provide:p.gN,useExisting:p.sg}]),e.qOj,e.TTD],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,Lr,4,7,"ng-container",0),2&t&&e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn)},directives:[r.sg,L.$,U.Pl],encapsulation:2}),n})();var Ci=l(40801),Gr=(l(1892),l(87686));l(29614);let Hi=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.formBuilder=i,this.logger=o,this.formReady=new e.vpe}ngOnChanges(t){var i,o;this.form||this.initForm(),this.contentFormatterProperties?Object.keys(this.contentFormatterProperties).forEach(s=>{var _,f;null===(f=null===(_=this.form)||void 0===_?void 0:_.get(s))||void 0===f||f.setValue(this.contentFormatterProperties[s])}):null===(o=null===(i=this.form)||void 0===i?void 0:i.get("currentMetric"))||void 0===o||o.patchValue(this.properMetric)}ngOnInit(){this.initForm()}initForm(){this.form=this.formBuilder.group({currentMetric:[this.properMetric,p.kI.required]}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}get currentMetric(){return this.form.get("currentMetric")}get properMetric(){var t,i,o,s;const _=null===(t=this.contentFormatterProperties)||void 0===t?void 0:t.currentMetric;return(null===(i=this.dsOutput)||void 0===i?void 0:i.result.find(M=>M.id===_))?_:null===(s=null===(o=this.dsOutput)||void 0===o?void 0:o.result[0])||void 0===s?void 0:s.id}addCustomFormControls(t){}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.sBO),e.LFG(p.qu),e.LFG(d.mQy))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function wr(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",7),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}let Ki=(()=>{class n extends Hi{constructor(t,i,o,s){super(t,i,o),this.pizzagnaService=s}}return n.lateLoadKey="DonutContentPercentageConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy),e.Y36(le.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-donut-content-configurator"]],features:[e.qOj],decls:7,vars:3,consts:function(){let a,t;return a=$localize`:␟447ffd4cbfd3d8c3ca8dd216c0a82ecadc24a7de␟4196232656388343089:Metrics`,t=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup"],[1,"mt-4"],["caption",a,1,"mb-3",3,"control"],["formControlName","currentMetric"],[3,"value",4,"ngFor","ngForOf"],["for","required"],t,[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nui-form-field",2)(3,"nui-select-v2",3),e.YNc(4,wr,2,2,"nui-select-v2-option",4),e.qZA(),e.TgZ(5,"nui-validation-message",5),e.SDv(6,6),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("control",i.currentMetric),e.xp6(2),e.Q6J("ngForOf",null==i.dsOutput?null:i.dsOutput.result))},directives:[p.JL,p.sg,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE],encapsulation:2}),n})();var $r=l(10912),Oi=l.n($r);let Ii=(()=>{class n{constructor(t){this.changeDetector=t,this.destroy$=new ie.x}ngOnChanges(t){var i;t.data&&(this.sum=Oi()(this.data,o=>o.data[0])),t.properties&&(this.currentMetricData=(null===(i=this.data.find(o=>{var s;return o.id===(null===(s=this.properties)||void 0===s?void 0:s.currentMetric)}))||void 0===i?void 0:i.data[0])||this.data[0].data[0]),this.getProperContentValue()}ngOnInit(){this.chartAssist.chartAssistSubject.pipe((0,it.b)(t=>this.emphasizedSeriesData=this.data.find(i=>i.id===t.payload.seriesId)),(0,it.b)(()=>this.getProperContentValue()),(0,de.R)(this.destroy$)).subscribe()}getProperSeriesData(){var t;return this.emphasizedSeriesData?null===(t=this.emphasizedSeriesData)||void 0===t?void 0:t.data[0]:this.currentMetricData}getProperContentValue(){this.chartContent=(this.getProperSeriesData()/this.sum*100).toFixed(2)+"%"}}return n.lateLoadKey="DonutContentPercentageFormatterComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{data:"data",chartAssist:"chartAssist",properties:"properties"},features:[e.TTD],decls:4,vars:1,consts:[[1,"nui-text-page"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"div",0),e._uU(3),e.qZA()(),e.BQk()),2&t&&(e.xp6(3),e.hij(" ",i.chartContent," "))},encapsulation:2}),n})();function Ur(n,a){if(1&n&&e._UZ(0,"nui-icon",5),2&n){const t=e.oxw();e.Q6J("icon",null==t.config?null:t.config.chartDonutContentIcon)}}function zr(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.xi3(2,1,t.sum,"1.0-3"))}}function Br(n,a){if(1&n&&e._uU(0),2&n){const t=e.oxw();e.Oqu(t.convertedValue)}}function Wr(n,a){if(1&n&&(e.TgZ(0,"div",6),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.config?null:t.config.chartDonutContentLabel," ")}}let Qi=(()=>{class n{constructor(t,i){this.changeDetector=t,this.conversionThreshold=1e6,this.unitConversionPipe=new ot(i)}ngOnChanges(){this.sum=Oi()(this.data,t=>t.data[0]),this.convertedValue=this.unitConversionPipe.transform(this.sum)}}return n.lateLoadKey="DonutContentRawFormatterComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(d.CrH))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{data:"data",config:"config"},features:[e.TTD],decls:7,vars:4,consts:[["iconSize","medium",3,"icon",4,"ngIf"],[1,"nui-text-page"],[4,"ngIf","ngIfElse"],["convertedValueDisplay",""],["class","nui-text-secondary",4,"ngIf"],["iconSize","medium",3,"icon"],[1,"nui-text-secondary"]],template:function(t,i){if(1&t&&(e.ynx(0),e.YNc(1,Ur,1,1,"nui-icon",0),e.TgZ(2,"div",1),e.YNc(3,zr,3,4,"span",2),e.YNc(4,Br,1,1,"ng-template",null,3,e.W1O),e.qZA(),e.YNc(6,Wr,2,1,"div",4),e.BQk()),2&t){const o=e.MAs(5);e.xp6(1),e.Q6J("ngIf",null==i.config?null:i.config.chartDonutContentIcon),e.xp6(2),e.Q6J("ngIf",i.sum<i.conversionThreshold)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",null==i.config?null:i.config.chartDonutContentLabel)}},directives:[r.O5,d.oJW],pipes:[r.JJ],encapsulation:2}),n})(),vi=(()=>{class n{constructor(t){this.changeDetector=t}ngOnChanges(){this.sum=Oi()(this.data,t=>t.data[0])}}return n.lateLoadKey="DonutContentSumFormatterComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{data:"data"},features:[e.TTD],decls:3,vars:1,consts:[[1,"nui-text-page"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0),e._uU(2),e.qZA(),e.BQk()),2&t&&(e.xp6(2),e.Oqu(i.sum))},encapsulation:2}),n})();var Ei=l(16134),kt=l(61621),Dt=l(14366);let Si=(()=>{class n extends Dt.a{}return n.lateLoadKey="PercentageFormatterComponent",n.\u0275fac=function(){let a;return function(i){return(a||(a=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:1,template:function(t,i){1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t&&(e.xp6(1),e.hij(" ",null==i.data?null:i.data.value,"% "))},encapsulation:2}),n})();var kr=l(51467),Zr=l.n(kr),Vr=l(73943),Jr=l.n(Vr);const Yr=[{power:1,prefix:"",label:""},{power:3,prefix:"k",label:"kilo"},{power:6,prefix:"M",label:"mega"},{power:9,prefix:"G",label:"giga"},{power:12,prefix:"T",label:"tera"},{power:15,prefix:"P",label:"peta"},{power:18,prefix:"E",label:"exa"},{power:21,prefix:"Z",label:"zetta"},{power:24,prefix:"Y",label:"yotta"}],Hr=[{power:-24,prefix:"y",label:"yocto"},{power:-21,prefix:"z",label:"zepto"},{power:-18,prefix:"a",label:"atto"},{power:-15,prefix:"f",label:"femto"},{power:-12,prefix:"p",label:"pico"},{power:-9,prefix:"n",label:"nano"},{power:-6,prefix:"\xb5",label:"micro"},{power:-3,prefix:"m",label:"milli"},{power:1,prefix:"",label:""}];let Zt=(()=>{class n{constructor(t){this.changeDetector=t,this.value="0"}ngOnChanges(t){if(t.data){const{value:i}=t.data.currentValue;i&&this.processSiUnitsValue(Jr()(i))}}processSiUnitsValue(t){const i=this.getTransformPrefix(Zr()(t));this.value=this.getTransformedValue(t,i),this.modifier=null==i?void 0:i.prefix}getTransformedValue(t,i){if(!i)return t;const o=1!==i.power?+t*Math.pow(10,-i.power):+t;return(Math.round(10*o)/10).toString()}getTransformPrefix(t){var i;const o=Math.abs(t);if(Number.isNaN(o))return;const s=(null===(i=this.data)||void 0===i?void 0:i.shiftPoint)||n.SHIFT_POINT_DEFAULT;if(o>=1){const M=Math.round(o).toString().length;return[...Yr].reverse().find(K=>M>=K.power+1+s)}{const _=Xi(o);return[...Hr].reverse().find(M=>_<=Math.abs(M.power)+1+s)}}}return n.lateLoadKey="SiUnitsFormatterComponent",n.SHIFT_POINT_DEFAULT=0,n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{data:"data",elementClass:"elementClass"},features:[e.TTD],decls:6,vars:2,consts:[[1,"d-flex","flex-nowrap"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.BQk()),2&t&&(e.xp6(3),e.Oqu(i.value),e.xp6(2),e.hij(" ",i.modifier,""))},encapsulation:2}),n})();function Xi(n,a=1){const t=Math.abs(n);if(t>=1)return 1;const i=a+1;return t*Math.pow(10,i)>1?i:Xi(t,i)}function Kr(n,a){if(1&n&&(e.TgZ(0,"div")(1,"a",6),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("href",null==t.data?null:t.data.link,e.LSH)("title",t.data.name),e.xp6(1),e.hij(" ",t.data.name," ")}}function Qr(n,a){if(1&n&&(e.TgZ(0,"span",7),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Udp("font-size",11,"px"),e.xp6(1),e.Oqu(t.data.name)}}function Xr(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",1)(2,"span",2),e._uU(3),e.qZA(),e._UZ(4,"nui-icon",3),e.YNc(5,Kr,3,3,"div",4),e.YNc(6,Qr,2,3,"ng-template",null,5,e.W1O),e.qZA(),e.BQk()),2&n){const t=e.MAs(7),i=e.oxw();e.xp6(3),e.Oqu(i.data.data),e.xp6(1),e.Q6J("icon",i.data.icon),e.xp6(1),e.Q6J("ngIf",null==i.data?null:i.data.link)("ngIfElse",t)}}let Ri=(()=>{class n{constructor(t){this.changeDetector=t,this.isValid=!1}ngOnChanges(){this.isValid=!!(this.data&&this.data.icon&&this.data.name&&this.data.data)}}return n.lateLoadKey="StatusWithIconFormatterComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{data:"data"},features:[e.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nui-text-label","align-items-center","status-icon-formatter"],[1,"nui-text-ellipsis","text-right","pl-3"],[1,"nui-icon","nui-icon-line-height","mx-2",3,"icon"],[4,"ngIf","ngIfElse"],["noLink",""],["rel","noopener noreferrer",1,"nui-text-link-small","nui-text-ellipsis","link",3,"href","title","click"],[1,"nui-text-ellipsis"]],template:function(t,i){1&t&&e.YNc(0,Xr,8,4,"ng-container",0),2&t&&e.Q6J("ngIf",i.isValid)},directives:[r.O5,d.oJW],styles:[".status-icon-formatter[_ngcontent-%COMP%]{display:grid;grid-template-columns:50px auto minmax(114px,1fr)}"]}),n})();var ji=l(85822),Ni=l(68675);let Ai=(()=>{class n{constructor(){this.defaultHeaderPrefix=$localize`Value`}transform(t,i,o=this.defaultHeaderPrefix){return`${o} ${i+1}${t?" - ":""}${t||""}`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"nuiWidgetConfiguratorSectionHeader",type:n,pure:!0}),n})();var jr=l(21503),qi=l.n(jr);let yi=(()=>{class n{transform(t,i,o){if(!W()(t)){if(qi()(t)){if(!i)return t;const _=[...t];return _.push(i),_}return Object.assign({},t,{[void 0===o?"undefined":o]:i})}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"nuiAddData",type:n,pure:!0}),n})();function qr(n,a){if(1&n&&e._UZ(0,"nui-drop-area",9),2&n){const t=e.oxw(2);e.Udp("height",t.height,"px")}}function es(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",12),e._UZ(2,"nui-icon",13),e.qZA(),e.BQk())}function ts(n,a){if(1&n&&(e.YNc(0,es,3,0,"ng-container",10),e.TgZ(1,"span",11),e.ALo(2,"nuiWidgetConfiguratorSectionHeader"),e._uU(3),e.ALo(4,"nuiWidgetConfiguratorSectionHeader"),e.qZA()),2&n){const t=e.oxw(),i=t.$implicit,o=t.index,s=e.oxw();e.Q6J("ngIf",s.moveButtons),e.xp6(1),e.Q6J("title",e.Dn7(2,3,s.headerMap.get(i.id),o,s.headerPrefix)),e.xp6(2),e.hij(" ",e.Dn7(4,7,s.headerMap.get(i.id),o,s.headerPrefix)," ")}}function is(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),s=o.$implicit,_=o.index,f=e.oxw();return f.removeItem(f.getItemForNode(s),_)}),e.qZA()()}if(2&n){const t=e.oxw().index;e.xp6(1),e.MGl("id","kpi-widget-remove-btn-",t,"")}}function ns(n,a){}const os=function(){return["formReady","formDestroy"]};function rs(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("cdkDragStarted",function(o){return e.CHM(t),e.oxw().cdkDragStarted(o)}),e.YNc(1,qr,1,2,"nui-drop-area",3),e.YNc(2,ts,5,11,"ng-template",null,4,e.W1O),e.YNc(4,is,2,1,"ng-template",null,5,e.W1O),e.ynx(6,6,7),e.NdJ("output",function(o){const _=e.CHM(t).$implicit;return e.oxw().onEvent(_.id,o)}),e.ALo(8,"nuiAddData"),e.ALo(9,"nuiAddData"),e.YNc(10,ns,0,0,"ng-template",8),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(7).attached(o)}),e.BQk(),e.qZA()}if(2&n){const t=a.$implicit,i=e.MAs(3),o=e.MAs(5),s=e.MAs(7);e.xp6(6),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",e.Dn7(8,6,e.Dn7(9,10,t.properties,i,"headerTextTemplate"),o,"headerButtonsTemplate"))("outputs",e.DdM(14,os)),e.xp6(4),e.Q6J("cdkPortalOutlet",s.portal)}}let Vt=(()=>{class n extends ve{constructor(t,i,o,s){super(t,i,o),this.formBuilder=s,this.items=[],this.moveButtons=!0,this.formReady=new e.vpe,this.itemsChange=new e.vpe,this.headerMap=new Map}getItemForNode(t){return this.items.find(i=>i.id===t.id)}getNodes(){return this.nodes}ngOnInit(){this.form=this.formBuilder.array([],p.kI.required),this.formReady.emit(this.form)}onEvent(t,i){const o=this.items.find(_=>_.id===t),s=this.items.findIndex(_=>_.id===t);"formReady"===i.id&&o&&this.onFormReady(o,i.payload,s),"formDestroy"===i.id&&this.onFormDestroy(i.payload)}onFormReady(t,i,o){const s=this.formBuilder.group({id:[t.id],componentType:[t.componentType],properties:i});this.form.setControl(o,s),setTimeout(()=>{var _;const f=null===(_=i.get(`${t.id}/description`))||void 0===_?void 0:_.get("label");null==f||f.valueChanges.pipe((0,Ni.O)(f.value),(0,de.R)(this.destroyed$)).subscribe(M=>{this.headerMap.set(t.id,M||""),this.changeDetector.markForCheck()})})}onFormDestroy(t){setTimeout(()=>{let i=0;for(;i<this.form.length&&this.form.at(i).get("properties")!==t;i++);this.form.removeAt(i),this.form.patchValue(this.form.value,{emitEvent:!0})})}trackBy(t,i){return i.id}removeItem(t,i){if(!t)throw new Error("Unable to remove undefined item from pizzagna");this.itemsChange.emit(this.items.filter(o=>o!==t)),this.items.splice(i,1),this.nodes.splice(i,1),this.pizzagnaService.removeComponents(t.id)}moveItem(t,i){const o=[...this.items],s=o.splice(t,1);o.splice(i,0,...s);const _=[...this.nodes],f=_.splice(t,1);_.splice(i,0,...f),this.nodes=[..._],this.moveFormValues(t,i),this.itemsChange.emit(o),setTimeout(()=>{this.form.setValue(this.form.value,{emitEvent:!0})})}drop(t){this.moveItem(t.previousIndex,t.currentIndex)}cdkDragStarted(t){this.height=t.source.element.nativeElement.offsetHeight}moveFormValues(t,i){const o=this.form.at(t);this.form.removeAt(t),this.form.insert(i,o)}ngOnDestroy(){super.ngOnDestroy()}}return n.lateLoadKey="ItemsDynamicComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-items-dynamic"]],inputs:{items:"items",moveButtons:"moveButtons",nodes:"nodes",headerPrefix:"headerPrefix"},outputs:{formReady:"formReady",itemsChange:"itemsChange"},features:[e.qOj],decls:2,vars:3,consts:[["cdkDropList","",1,"nui-items-dynamic",3,"formGroup","cdkDropListDropped"],["cdkDrag","","class","nui-items-dynamic__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"nui-items-dynamic__node-item",3,"cdkDragStarted"],["class","nui-items-dynamic__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-items-dynamic__drop-area"],[4,"ngIf"],[1,"nui-items-dynamic__header-text",3,"title"],["cdkDragHandle","",1,"nui-items-dynamic__drag-handler"],["icon","drag"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),e.YNc(1,rs,11,15,"div",1),e.qZA()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackBy))},directives:[Qe.Wj,p.JL,p.sg,r.sg,Qe.Zt,Qe.Hk,Wt,r.O5,Qe.Bh,d.oJW,d.r0F,L.$,U.Pl],pipes:[Ai,yi],styles:[".nui-items-dynamic__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-items-dynamic__drag-handler{cursor:move;display:flex}.nui-items-dynamic__node-item{background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-items-dynamic__node-item .widget-configurator-section{margin:0}.nui-items-dynamic__drop-area{margin:15px}.kpi-indicators-configuration__color-preview{width:16px;height:16px;margin-right:15px;border-radius:3px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),n})(),en=(()=>{class n{}return n.lateLoadKey="PreviewPlaceholderComponent",n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-preview-placeholder"]],decls:6,vars:0,consts:function(){let a,t;return a=$localize`:␟2dddb51ea396d77c6eae240cec72bcac05cbd28b␟7484658843094717966:This is a preview of your widget`,t=$localize`:␟fd2e41589bd70eddf4486b814980d2891ec182f9␟3997823842478388980: As you make configuration changes, this area will update to match. To get started, select a widget type on the configuration panel.
`,[a,t]},template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"b"),e.SDv(2,0),e.qZA(),e._uU(3,"."),e.qZA(),e.TgZ(4,"div"),e.SDv(5,1),e.qZA())},styles:["[_nghost-%COMP%]{max-width:300px;padding:0 10px;margin:auto}"]}),n})();var ss=l(90733),as=l.n(ss),ls=l(45122),tn=l(61842),nn=l(10628);function ds(n,a){}const cs=function(){return["widgetSelected"]};function _s(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",6),e.ynx(1,7,8),e.NdJ("output",function(o){return e.CHM(t),e.oxw().onSelect(o.payload)}),e.YNc(3,ds,0,0,"ng-template",9),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(2).attached(o)}),e.BQk(),e.qZA()}if(2&n){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentType",i.cloneSelectionComponentType)("outputs",e.DdM(3,cs)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function us(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"nui-pizzagna",11,12),e.NdJ("pizzagnaChange",function(o){return e.CHM(t),e.oxw().formPizzagna=o}),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("pizzagna",t.formPizzagna)}}let on=(()=>{class n{constructor(t,i,o,s,_){this.changeDetector=t,this.configurator=i,this.previewService=o,this.formBuilder=s,this.widgetTypesService=_,this.navigationControl=new wi.X({busyState:{busy:!1},allowStepChange:!0}),this.destroy$=new ie.x,this.resetForm$=new ie.x,this.busy=!1,this.isFormDisplayed=!1,this.resetForm()}ngOnInit(){this.previewService.previewChanged.pipe((0,de.R)(this.destroy$)).subscribe(t=>{this.onPreviewPizzagnaUpdate(t)}),this.configurator.submitError.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.toggleBusy()})}ngAfterViewInit(){this.changeDetector.markForCheck()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.resetForm$.complete()}onPreviewPizzagnaUpdate(t){var i;if(!this.isFormDisplayed)return;const o=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(i=this.configurator.previewWidget)||void 0===i?void 0:i.pizzagna),{[h.xW.Configuration]:t})});this.configurator.updateWidget(o)}canFinish(){var t,i,o,s;return!!(null===(i=null===(t=this.widgetTemplate)||void 0===t?void 0:t.pizzagna)||void 0===i?void 0:i.configuration)&&!(null===(s=null===(o=this.widgetTemplate)||void 0===o?void 0:o.metadata)||void 0===s?void 0:s.needsConfiguration)}onFinish(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1});this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}onStepNavigated(t){this.isFormDisplayed=1===t.currentStepIndex,0===t.currentStepIndex&&1===t.previousStepIndex?(this.formPizzagna=void 0,this.resetForm(),this.onSelect(this.widgetTemplate)):1===t.currentStepIndex&&(this.formPizzagna=this.widgetTypesService.getWidgetType(this.widgetTemplate.type,this.widgetTemplate.version).configurator,this.previewService.preview=this.widgetTemplate.pizzagna[h.xW.Configuration])}onSelect(t){var i;this.widgetTemplate=t;const o=Object.assign(Object.assign({},t),{id:(null===(i=this.configurator.previewWidget)||void 0===i?void 0:i.id)||null});this.configurator.updateWidget(null),setTimeout(()=>{this.configurator.updateWidget(as()(o))})}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}resetForm(){this.resetForm$.next(),this.form=this.formBuilder.group({}),this.form.statusChanges.pipe((0,de.R)(this.resetForm$),(0,de.R)(this.destroy$)).subscribe(()=>{this.changeDetector.markForCheck()})}}return n.lateLoadKey="WidgetClonerComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Yi.n),e.Y36(ls.m),e.Y36(p.qu),e.Y36(Y.x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-cloner"]],hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",cloneSelectionComponentType:"cloneSelectionComponentType"},decls:8,vars:7,consts:function(){let a,t,i;return a=$localize`:␟a638e97aa8422948b3e628089bbc9e0cd89e0087␟696117927395958397:Creating Widget`,t=$localize`:␟1af9862ac515933a9a72e92970c3e92bda63f6e8␟8076137290276236439:Create Widget`,i=$localize`:␟072d4d4ec83a5a97345a1c13b90c213b47326d09␟6673660887182833564:Customize`,[["configuratorTitle",a,3,"disableCloseButton","close"],["finishText",t,3,"hideHeader","canProceed","canFinish","navigationControl","finish","cancel","stepNavigated"],["nextText",i,3,"stepTemplate"],[3,"stepTemplate"],["step1",""],["step2",""],[1,"p-4","h-100"],["nuiComponentPortal","",3,"componentType","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"formGroup"],[3,"pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-configurator-heading",0),e.NdJ("close",function(){return i.onCancel()}),e.qZA(),e.TgZ(1,"nui-dashwiz",1),e.NdJ("finish",function(){return i.onFinish()})("cancel",function(){return i.onCancel()})("stepNavigated",function(s){return i.onStepNavigated(s)}),e._UZ(2,"nui-dashwiz-step",2)(3,"nui-dashwiz-step",3),e.qZA(),e.YNc(4,_s,4,4,"ng-template",null,4,e.W1O),e.YNc(6,us,3,2,"ng-template",null,5,e.W1O)),2&t){const o=e.MAs(5),s=e.MAs(7);e.Q6J("disableCloseButton",i.busy),e.xp6(1),e.Q6J("hideHeader",!0)("canProceed",!!i.widgetTemplate)("canFinish",i.canFinish())("navigationControl",i.navigationControl),e.xp6(1),e.Q6J("stepTemplate",o),e.xp6(1),e.Q6J("stepTemplate",s)}},directives:[ji.Q,tn.i,nn.u,L.$,U.Pl,p.JL,p.sg,Gr.R],encapsulation:2,changeDetection:0}),n})();var ps=l(71536);function gs(n,a){1&n&&e.GkF(0)}function hs(n,a){1&n&&e.GkF(0)}function ms(n,a){if(1&n&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Q6J("title",t.headerText),e.xp6(1),e.hij(" ",t.headerText," ")}}function fs(n,a){}const Ts=function(){return["formReady"]};function Cs(n,a){if(1&n){const t=e.EpF();e.ynx(0)(1,6,7),e.NdJ("output",function(o){const _=e.CHM(t).$implicit;return e.oxw().onEvent(_.id,o)}),e.YNc(3,fs,0,0,"ng-template",8),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(2).attached(o)}),e.BQk()()}if(2&n){const t=a.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties)("outputs",e.DdM(6,Ts)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}const Os=[[["","headerText",""]],[["","headerButtons",""]],"*"],Is=["[headerText]","[headerButtons]","*"];let Ze=(()=>{class n extends ve{constructor(t,i,o,s){super(t,i,o),this.formBuilder=s,this.nodes=[],this.headerText="",this.formReady=new e.vpe,this.formDestroy=new e.vpe}getNodes(){return this.nodes}ngOnInit(){this.form=this.formBuilder.group({})}onEvent(t,i){"formReady"===i.id&&this.addFormGroup(t,i.payload),Object.keys(this.form.controls).length===this.getNodes().length&&this.formReady.emit(this.form)}addFormGroup(t,i){this.form.addControl(t,i)}ngOnDestroy(){this.formDestroy.emit(this.form),super.ngOnDestroy()}}return n.lateLoadKey="WidgetConfiguratorSectionComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(le.p),e.Y36(d.mQy),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-widget-configurator-section"]],hostAttrs:[1,"nui-widget-configurator-section"],inputs:{headerTextTemplate:"headerTextTemplate",headerButtonsTemplate:"headerButtonsTemplate",nodes:"nodes",headerText:"headerText"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.qOj],ngContentSelectors:Is,decls:9,vars:5,consts:[[1,"widget-configurator-section"],[1,"widget-configurator-section__header","d-flex","justify-content-between","align-items-center"],[4,"ngTemplateOutlet"],["headerText","","class","widget-configurator-section__header-text",3,"title",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["headerText","",1,"widget-configurator-section__header-text",3,"title"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&(e.F$t(Os),e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,gs,1,0,"ng-container",2),e.YNc(3,hs,1,0,"ng-container",2),e.YNc(4,ms,2,2,"div",3),e.Hsn(5),e.Hsn(6,1),e.qZA(),e.YNc(7,Cs,4,7,"ng-container",4),e.Hsn(8,2),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngTemplateOutlet",i.headerTextTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",i.headerButtonsTemplate),e.xp6(1),e.Q6J("ngIf",i.headerText),e.xp6(3),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn))},directives:[r.tP,r.O5,r.sg,L.$,U.Pl],styles:[".widget-configurator-section{margin:15px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9)}.widget-configurator-section__header{padding:15px 5px 15px 15px;height:40px;font-size:16px;font-weight:600;background-color:var(--nui-color-bg-table_header,#f0f0f0);color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6))}.widget-configurator-section__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();var Ae=l(19837),vs=l(64406),Es=l(21617);const Rs=[$localize`Blue`,$localize`Blue Light`,$localize`Blue Dark`,$localize`Pink`,$localize`Pink Light`,$localize`Pink Dark`,$localize`Sea Green`,$localize`Sea Green Light`,$localize`Sea Green Dark`,$localize`Violet`,$localize`Violet Light`,$localize`Violet Dark`,$localize`Lime Green`,$localize`Lime Green Light`,$localize`Lime Green Dark`,$localize`Orange`,$localize`Orange Light`,$localize`Orange Dark`,$localize`Ultramarine`,$localize`Ultramarine Light`,$localize`Ultramarine Dark`,$localize`Bordeaux`,$localize`Bordeaux Light`,$localize`Bordeaux Dark`,$localize`Ochroid`,$localize`Ochroid Light`,$localize`Ochroid Dark`,$localize`Anthracite`,$localize`Anthracite Light`,$localize`Anthracite Dark`],Ns=[$localize`Down`,$localize`Down Light`,$localize`Critical`,$localize`Critical Light`,$localize`Warning`,$localize`Warning Light`,$localize`Unknown`,$localize`Unknown Light`,$localize`Ok`,$localize`Ok Light`,$localize`Info`,$localize`Info Light`],rn=l.n(Es)()([...g.wlb,...g.Sj$],[...Rs,...Ns]),Mi="var(--nui-color-bg-secondary)",Pi=[...g.wlb,...g.Sj$].map(n=>({color:n,label:rn[n]}));var Me=l(16193),xe=l(15838);function As(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",27),e._uU(1),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(2);e.Q6J("value",t.key),e.xp6(1),e.hij(" ",i.getLabel(t.key)," ")}}function ys(n,a){if(1&n&&e._UZ(0,"nui-drop-area"),2&n){const t=e.oxw(2);e.Udp("height",t.height,"px")}}function Ms(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",14),e.NdJ("cdkDragStarted",function(o){return e.CHM(t),e.oxw().cdkDragStarted(o)}),e.TgZ(2,"div",15),e._UZ(3,"nui-icon",16),e.qZA(),e.TgZ(4,"div",17)(5,"nui-form-field",18)(6,"nui-select-v2",19),e.YNc(7,As,2,2,"nui-select-v2-option",20),e.ALo(8,"keyvalue"),e.qZA()(),e.TgZ(9,"nui-form-field",21),e._UZ(10,"nui-textbox",22),e.qZA(),e.TgZ(11,"nui-form-field",23),e._UZ(12,"nui-color-picker",24),e.qZA()(),e.TgZ(13,"button",25),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().removeRule(s)}),e.qZA(),e.YNc(14,ys,1,2,"nui-drop-area",26),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("formGroup",t),e.xp6(4),e.Q6J("control",t.get("comparisonType")),e.xp6(1),e.Q6J("formControl",t.get("comparisonType")),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,7,i.availableComparators)),e.xp6(2),e.Q6J("control",t.get("value")),e.xp6(2),e.Q6J("control",t.get("color")),e.xp6(1),e.Q6J("colorPalette",i.palette)}}let sn=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.formBuilder=i,this.formReady=new e.vpe,this.destroy$=new ie.x,this.availableComparators=o.getComparators()}ngOnInit(){var t;this.palette=[{color:Mi,label:$localize`Default color`}].concat(this.backgroundColors),this.formLocal=this.initDefaultRulesGroup(),this.form=this.formBuilder.group({rules:[[]]}),null===(t=this.formLocal.get("rules"))||void 0===t||t.value.valueChanges.pipe((0,it.b)(i=>{var o;return null===(o=this.form.get("rules"))||void 0===o?void 0:o.patchValue([...i])}),(0,de.R)(this.destroy$)).subscribe(),this.formReady.emit(this.form)}ngOnChanges(t){var i,o;t.rules&&((null===(o=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===o?void 0:o.value).setValue([]),this.rules&&qi()(this.rules)&&this.rules.forEach(s=>{var _;(null===(_=this.formLocal.get("rules"))||void 0===_?void 0:_.value).push(this.formBuilder.group({comparisonType:[s.comparisonType,[p.kI.required]],value:[s.value,[p.kI.required]],color:[s.color]}))}))}getColorRulesSubtitle(){var t,i,o,s;return 0===(null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).controls.length?$localize`No color rules`:$localize`${(null===(s=null===(o=this.formLocal)||void 0===o?void 0:o.get("rules"))||void 0===s?void 0:s.value).controls.length} color rules`}getLabel(t){var i;return(null===(i=this.availableComparators[t])||void 0===i?void 0:i.label)||"Custom Comparator"}removeRule(t){var i,o;(null===(o=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===o?void 0:o.value).removeAt(t)}addRule(){var t,i;(null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).push(this.formBuilder.group({comparisonType:[">",[p.kI.required]],value:[0,[p.kI.required]],color:[Mi]}))}drop(t){this.move(t.currentIndex,t.previousIndex)}cdkDragStarted(t){this.height=t.source.element.nativeElement.offsetHeight}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initDefaultRulesGroup(){return this.formBuilder.group({rules:[this.formBuilder.array([],p.kI.required)]})}move(t,i){var o,s;const _=null===(s=null===(o=this.formLocal)||void 0===o?void 0:o.get("rules"))||void 0===s?void 0:s.value,f=t>i?1:-1;if(!_)return;const M=_.at(i);for(let x=i;x*f<t*f;x+=f){const K=_.at(x+f);_.setControl(x,K)}_.setControl(t,M)}}return n.lateLoadKey="BackgroundColorRulesConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(Te.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-background-color-rules-configuration"]],inputs:{rules:"rules",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:15,consts:function(){let a,t,i;return a=$localize`:␟3b53b67118a64c409177ae5a41f5978d0e5a95bd␟4898023314284497772:Background color rules`,t=$localize`:␟9c8318d49f867d23436872f260ebf9263e9d0120␟2303161252907317626: Add new rule `,i=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"kpi-color-rules-configuration__accordion-content"],[1,"mb-4"],[1,"mb-3"],["cdkDropList","",3,"cdkDropListDropped"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],t,["cdkDrag","",1,"kpi-color-rule","d-flex","pt-3",3,"formGroup","cdkDragStarted"],[1,"kpi-color-rule__control","justify-content-center","d-flex"],["icon","drag","cdkDragHandle","",1,"kpi-color-rule__drag","align-items-center"],[1,"d-flex","flex-grow-1","flex-wrap"],[1,"mr-3","mb-3","flex-grow-1",3,"control"],["placeholder",i,2,"min-width","220px",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"mr-3","mb-3",2,"max-width","100px",3,"control"],["formControlName","value"],[1,"mr-3","mb-3",3,"control"],["formControlName","color",3,"colorPalette"],["nui-button","","icon","delete","displayStyle","action","type","button",1,"kpi-color-rule__control",3,"click"],[3,"height",4,"cdkDragPlaceholder"],[3,"value"]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"p",9),e._uU(15," We can automatically change the background color when the value meets certain conditions. "),e.qZA(),e.TgZ(16,"div",10),e.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),e.YNc(17,Ms,15,9,"ng-container",11),e.qZA(),e.TgZ(18,"button",12),e.NdJ("click",function(){return i.addRule()}),e.SDv(19,13),e.qZA()()()()),2&t){let o;e.Q6J("formGroup",i.formLocal)("state",e.lcZ(1,6,e.lcZ(2,8,i.formLocal))),e.xp6(4),e.Q6J("icon",e.lcZ(5,10,e.xi3(6,12,i.formLocal,"color"))),e.xp6(6),e.Q6J("title",i.getColorRulesSubtitle()),e.xp6(1),e.hij(" ",i.getColorRulesSubtitle()," "),e.xp6(6),e.Q6J("ngForOf",null==(o=i.formLocal.get("rules"))?null:o.value.controls)}},directives:[Ae.J,p.JL,p.sg,d.oJW,Qe.Wj,r.sg,Qe.Zt,Qe.Bh,d.hgI,d.j_n,p.JJ,p.oH,d.rLF,d.XHW,p.u,Ti,d.r0F,Qe.Hk,Wt],pipes:[r.Ov,Me.F,xe.d,r.Nd],styles:[".kpi-color-rules-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-color-rules-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-color-rules-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-color-rules-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:10px}.kpi-color-rules-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}.kpi-color-rule[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-content,#fff)}.kpi-color-rule__drag[_ngcontent-%COMP%]{cursor:move}.kpi-color-rule__control[_ngcontent-%COMP%]{min-width:30px;height:30px}"],changeDetection:0}),n})();var Ue=l(81466),Ds=l(34235),Jt=l.n(Ds);function Fs(n,a){1&n&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,3),e.qZA()()),2&n&&e.Q6J("allowDismiss",!1)}function bs(n,a){if(1&n&&(e.TgZ(0,"nui-message",4)(1,"b"),e.SDv(2,5),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw();e.Q6J("allowDismiss",!1),e.xp6(3),e.hij(" ",t.dataSourceError.message||t.dataSourceError.type," ")}}let Nt=(()=>{class n{constructor(t){this.changeDetector=t,this.errorState=new e.vpe,this.onDestroy$=new ie.x,this.dataSourceClear$=new ie.x}ngOnChanges(t){t.dataSource&&this.onDataSourceChanged()}onDataSourceChanged(){var t,i,o;this.dataSourceClear$.next(),null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.busy)||void 0===i||i.pipe((0,de.R)(this.dataSourceClear$)).subscribe(s=>{this.busy=s,this.changeDetector.markForCheck()}),null===(o=this.dataSource)||void 0===o||o.outputsSubject.pipe((0,de.R)(this.dataSourceClear$)).subscribe(s=>{this.data=Jt()(null==s?void 0:s.result)?s:null==s?void 0:s.result,this.dataSourceError=null==s?void 0:s.error,this.errorState.emit(!!this.dataSourceError),this.changeDetector.markForCheck()})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete(),this.dataSourceClear$.next(),this.dataSourceClear$.complete()}}return n.lateLoadKey="DataSourceErrorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-data-source-error"]],inputs:{dataSource:"dataSource"},outputs:{errorState:"errorState"},features:[e.TTD],decls:3,vars:2,consts:function(){let a,t;return a=$localize`:␟7471accb59033b8bee2f7d6907d8deefcfe7d5de␟8643306703234832815:Select a data source`,t=$localize`:␟c399afe21627dcfed1a9865c0e084fac997896c2␟4016661485141937765:Something went wrong with the data source: `,[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],a,["type","critical",1,"mt-4","d-block",3,"allowDismiss"],t]},template:function(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,Fs,3,1,"nui-message",0),e.YNc(2,bs,4,2,"nui-message",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!i.dataSource),e.xp6(1),e.Q6J("ngIf",i.dataSourceError))},directives:[r.O5,d.qqZ],encapsulation:2,changeDetection:0}),n})();var Je=l(32148);function xs(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("title",null==t?null:t.label)("value",t),e.xp6(1),e.hij(" ",t.label," ")}}function Ls(n,a){}const Gs=function(){return["errorState"]},ws=function(n){return{dataSource:n}};let an=(()=>{class n{constructor(t,i,o,s,_,f,M){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.providerRegistryService=s,this.eventBus=_,this.injector=f,this.logger=M,this.dataSourceProviders=[],this.errorComponent=Nt.lateLoadKey,this.formReady=new e.vpe,this.hasDataSourceError=!1,this.dataFieldIds=new ie.x}ngOnInit(){var t;this.form=this.formBuilder.group({providerId:[this.providerId||"",[p.kI.required]],properties:[this.properties||{}],dataSource:[null,[p.kI.required]]}),this.form.setValidators([()=>this.hasDataSourceError?{dataSourceError:!0}:null]),null===(t=this.form.get("dataSource"))||void 0===t||t.valueChanges.subscribe(i=>{var o,s;null===(o=this.form.get("providerId"))||void 0===o||o.setValue(null==i?void 0:i.providerId),(null==i?void 0:i.properties)&&(null===(s=this.form.get("properties"))||void 0===s||s.setValue(null==i?void 0:i.properties))}),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,s,_,f,M,x,K,V;if(t.providerId&&!t.providerId.isFirstChange()||t.properties&&!t.properties.isFirstChange()){const ce=null===(i=t.providerId)||void 0===i?void 0:i.previousValue,ge=null===(o=t.properties)||void 0===o?void 0:o.previousValue;if(ce!==this.providerId||ge!==this.properties){const pe=this.dataSourceProviders.find(Ye=>{var Ce,Ge;return Ye.providerId===this.providerId&&We()(null!==(Ce=Ye.properties)&&void 0!==Ce?Ce:{},null!==(Ge=this.properties)&&void 0!==Ge?Ge:{})});pe?(null===(K=null===(x=this.form)||void 0===x?void 0:x.get("dataSource"))||void 0===K||K.setValue(pe),this.invokeDataSource(pe)):(null===(_=null===(s=this.form)||void 0===s?void 0:s.get("providerId"))||void 0===_||_.setValue(this.providerId),null===(M=null===(f=this.form)||void 0===f?void 0:f.get("properties"))||void 0===M||M.setValue(this.properties),this.invokeDataSource({properties:this.properties,providerId:this.providerId}))}}if(t.dataSourceProviders&&!t.dataSourceProviders.isFirstChange()&&1===this.dataSourceProviders.length){const ce=this.dataSourceProviders[0];null===(V=this.form.get("dataSource"))||void 0===V||V.setValue(ce),this.invokeDataSource(ce)}}ngAfterViewInit(){var t;if(this.dataSourceProviders&&1===this.dataSourceProviders.length){const i=this.dataSourceProviders[0];null===(t=this.form.get("dataSource"))||void 0===t||t.setValue(i),this.invokeDataSource(i)}}onDataSourceSelected(t){this.eventBus.next(Ue.ay,{}),this.invokeDataSource(t)}invokeDataSource(t){var i;if(!t.providerId)return;const o=this.providerRegistryService.getProvider(t.providerId);if(o){this.dataSource=this.providerRegistryService.getProviderInstance(o,this.injector),this.eventBus.next(Ue.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,oi.q)(1)).subscribe(_=>{this.eventBus.next(Ue.PF,{payload:_}),this.dataFieldIds.next(Object.keys(_.result||_))});const s=this.dataSource;(null==s?void 0:s.updateConfiguration)&&s.updateConfiguration(null!==(i=t.properties)&&void 0!==i?i:{}),setTimeout(()=>{this.dataSource.applyFilters()})}else this.logger.warn("No provider found for id:",t.providerId)}onErrorState(t){this.hasDataSourceError=t,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}return n.lateLoadKey="DataSourceConfigurationV2Component",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(E.C),e.Y36(h.nY),e.Y36(e.zs3),e.Y36(d.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",properties:"properties",providerId:"providerId",errorComponent:"errorComponent"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:28,consts:function(){let a,t;return a=$localize`:␟1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0␟1107354728956440783:Data Source`,t=$localize`:␟87aabb92d16c162e46a9ef3703445351a3e41739␟6527825109146827187:Select data source`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],[3,"control"],["placeholder",t,"formControlName","dataSource",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-select-v2",9),e.NdJ("valueSelected",function(_){return i.onDataSourceSelected(_)}),e.ALo(15,"async"),e.YNc(16,xs,2,3,"nui-select-v2-option",10),e.qZA()(),e.ynx(17,11,12),e.NdJ("output",function(_){return i.onErrorState(_.payload)}),e.YNc(19,Ls,0,0,"ng-template",13),e.NdJ("attached",function(_){return e.CHM(o),e.MAs(18).attached(_)}),e.BQk(),e.qZA()()}if(2&t){const o=e.MAs(18);let s,_,f;e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"database"))),e.xp6(6),e.Q6J("title",null==(s=i.form.get("dataSource"))||null==s.value?null:s.value.label),e.xp6(1),e.hij(" ",null==(_=i.form.get("dataSource"))||null==_.value?null:_.value.label," "),e.xp6(2),e.Q6J("control",i.form.get("dataSource")),e.xp6(1),e.Q6J("title",null==(f=i.form.get("dataSource"))||null==f.value?null:f.value.label)("popupViewportMargin",e.lcZ(15,23,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.dataSourceProviders),e.xp6(1),e.Q6J("componentId",i.errorComponent)("componentType",i.errorComponent)("outputs",e.DdM(25,Gs))("properties",e.VKq(26,ws,i.dataSource)),e.xp6(2),e.Q6J("cdkPortalOutlet",o.portal)}},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,L.$,U.Pl],pipes:[r.Ov,Me.F,xe.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function $s(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("title",t)("value",t),e.xp6(1),e.hij(" ",t," ")}}function Us(n,a){}const zs=function(){return["errorState"]},Bs=function(n){return{dataSource:n}};let Ft=(()=>{class n{constructor(t,i,o,s,_,f,M){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.providerRegistryService=s,this.eventBus=_,this.injector=f,this.logger=M,this.dataSourceProviders=[],this.errorComponent=Nt.lateLoadKey,this.formReady=new e.vpe,this.hasDataSourceError=!1,this.dsOutput=new ie.x,this.dataFieldIds=new ie.x}ngOnInit(){this.form=this.formBuilder.group({providerId:[this.providerId||"",[p.kI.required]],properties:this.formBuilder.group(this.properties||{})}),this.form.setValidators([()=>this.hasDataSourceError?{dataSourceError:!0}:null]),this.formReady.emit(this.form)}ngOnChanges(t){var i;t.providerId&&!t.providerId.isFirstChange()&&t.providerId.previousValue!==this.providerId&&(null===(i=this.form.get("providerId"))||void 0===i||i.setValue(this.providerId),this.invokeDataSource(this.providerId))}onDataSourceChange(t){this.eventBus.next(Ue.ay,{}),this.invokeDataSource(t)}invokeDataSource(t){if(!t)return;const i=this.providerRegistryService.getProvider(t);i?(this.dataSource=this.providerRegistryService.getProviderInstance(i,this.injector),this.eventBus.next(Ue.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,oi.q)(1)).subscribe(o=>{this.eventBus.next(Ue.PF,{payload:o}),this.dsOutput.next(o);const s=(null==o?void 0:o.result)||o;s&&this.dataFieldIds.next(Object.keys(s))}),setTimeout(()=>{this.dataSource.applyFilters()})):this.logger.warn("No provider found for id:",t)}onErrorState(t){this.hasDataSourceError=t,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}return n.lateLoadKey="DataSourceConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(E.C),e.Y36(h.nY),e.Y36(e.zs3),e.Y36(d.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",errorComponent:"errorComponent",properties:"properties",providerId:"providerId"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:28,consts:function(){let a,t,i;return a=$localize`:␟1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0␟1107354728956440783:Data Source`,t=$localize`:␟7f3bce5049b2c517378a6624460b84d2da9ce332␟7245698475792706694:Select Data Source`,i=$localize`:␟18c18c5d61f92ef5c3caa37df00fc514fef3d90c␟4806513497858020797:Data Sources`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],["caption",t,3,"control"],["placeholder",i,"formControlName","providerId",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-select-v2",9),e.NdJ("valueSelected",function(_){return i.onDataSourceChange(_)}),e.ALo(15,"async"),e.YNc(16,$s,2,3,"nui-select-v2-option",10),e.qZA()(),e.ynx(17,11,12),e.NdJ("output",function(_){return i.onErrorState(_.payload)}),e.YNc(19,Us,0,0,"ng-template",13),e.NdJ("attached",function(_){return e.CHM(o),e.MAs(18).attached(_)}),e.BQk(),e.qZA()()}if(2&t){const o=e.MAs(18);let s,_,f;e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"database"))),e.xp6(6),e.Q6J("title",null==(s=i.form.get("providerId"))?null:s.value),e.xp6(1),e.hij(" ",null==(_=i.form.get("providerId"))?null:_.value," "),e.xp6(2),e.Q6J("control",i.form.get("providerId")),e.xp6(1),e.Q6J("title",null==(f=i.form.get("providerId"))?null:f.value)("popupViewportMargin",e.lcZ(15,23,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.dataSourceProviders),e.xp6(1),e.Q6J("componentId",i.errorComponent)("componentType",i.errorComponent)("outputs",e.DdM(25,zs))("properties",e.VKq(26,Bs,i.dataSource)),e.xp6(2),e.Q6J("cdkPortalOutlet",o.portal)}},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,L.$,U.Pl],pipes:[r.Ov,Me.F,xe.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function Ws(n,a){1&n&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,3),e.qZA()()),2&n&&e.Q6J("allowDismiss",!1)}function ks(n,a){1&n&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,4),e.qZA()()),2&n&&e.Q6J("allowDismiss",!1)}function Zs(n,a){if(1&n&&(e.TgZ(0,"nui-message",5)(1,"b"),e.SDv(2,6),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw();e.Q6J("allowDismiss",!1),e.xp6(3),e.hij(" ",t.dataSourceError.message||t.dataSourceError.type," ")}}let ln=(()=>{class n extends Nt{constructor(t){super(t),this.changeDetector=t}ngOnDestroy(){super.ngOnDestroy()}}return n.lateLoadKey="TableDataSourceErrorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-data-source-error"]],features:[e.qOj],decls:4,vars:3,consts:function(){let a,t,i;return a=$localize`:␟f4720e7c5bf93bfef522f919823f31793a4a09fb␟3836782658203534481:Data source needs to be configured`,t=$localize`:␟7471accb59033b8bee2f7d6907d8deefcfe7d5de␟8643306703234832815:Select a data source`,i=$localize`:␟c399afe21627dcfed1a9865c0e084fac997896c2␟4016661485141937765:Something went wrong with the data source: `,[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],a,t,["type","critical",1,"mt-4","d-block",3,"allowDismiss"],i]},template:function(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,Ws,3,1,"nui-message",0),e.YNc(2,ks,3,1,"nui-message",0),e.YNc(3,Zs,4,2,"nui-message",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.dataSource&&!(null!=i.data&&i.data.dataFields.length)&&!i.dataSourceError&&!i.busy),e.xp6(1),e.Q6J("ngIf",!i.dataSource),e.xp6(1),e.Q6J("ngIf",i.dataSourceError))},directives:[r.O5,d.qqZ],encapsulation:2,changeDetection:0}),n})();function Vs(n,a){}let Di=(()=>{class n{constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.mode=y.URL,this.formReady=new e.vpe,this.destroy$=new ie.x,this.form=this.formBuilder.group({mode:[this.mode],urlCustomContent:[""],htmlCustomContent:[""],customEmbeddedContent:[""]}),this.modes=[{value:y.URL,displayValue:$localize`Show the contents of a specific URL`},{value:y.HTML,displayValue:$localize`Show the exact HTML I supply below`}]}get urlCustomContent(){return this.form.get("urlCustomContent")}get htmlCustomContent(){return this.form.get("htmlCustomContent")}get modeValue(){return this.form.get("mode")}get customEmbeddedContentValue(){return this.form.get("customEmbeddedContent")}ngOnInit(){this.initializeForm(),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,s;t.customEmbeddedContent&&(this.mode===y.URL?null===(i=this.urlCustomContent)||void 0===i||i.setValue(this.customEmbeddedContent):this.mode===y.HTML&&(null===(o=this.htmlCustomContent)||void 0===o||o.setValue(this.customEmbeddedContent))),t.mode&&(null===(s=this.modeValue)||void 0===s||s.setValue(t.mode.currentValue))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){var t,i,o;null===(t=this.modeValue)||void 0===t||t.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(s=>{var _,f,M,x,K,V,ce,ge;s===y.URL?(null===(_=this.customEmbeddedContentValue)||void 0===_||_.setValue(null===(f=this.form.get("urlCustomContent"))||void 0===f?void 0:f.value),null===(M=this.htmlCustomContent)||void 0===M||M.disable(),null===(x=this.urlCustomContent)||void 0===x||x.enable()):s===y.HTML&&(null===(K=this.customEmbeddedContentValue)||void 0===K||K.setValue(null===(V=this.form.get("htmlCustomContent"))||void 0===V?void 0:V.value),null===(ce=this.urlCustomContent)||void 0===ce||ce.disable(),null===(ge=this.htmlCustomContent)||void 0===ge||ge.enable())}),null===(i=this.urlCustomContent)||void 0===i||i.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(s=>{var _;null===(_=this.customEmbeddedContentValue)||void 0===_||_.setValue(s)}),null===(o=this.htmlCustomContent)||void 0===o||o.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(s=>{var _;null===(_=this.customEmbeddedContentValue)||void 0===_||_.setValue(s)})}}return n.lateLoadKey="EmbeddedContentConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-embedded-content-configuration"]],inputs:{mode:"mode",messageComponent:"messageComponent",customEmbeddedContent:"customEmbeddedContent"},outputs:{formReady:"formReady"},features:[e.TTD],decls:26,vars:23,consts:function(){let a,t;return a=$localize`:␟d18bb86a09ed7c63d7d00a1dad418e5328f59406␟5492801901920760741:Embedded Content`,t=$localize`:␟6a175ac244e51f9c713f8829e3ba9192f6728ba2␟9012225804233265629:What do you want to show in the widget?`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],a,[1,"nui-text-secondary"],[1,"embedded-configurator-section__accordion-content"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["caption",t,3,"control"],["formControlName","mode","name","mode","required","",3,"value","valueChange"],[3,"value"],[3,"control"],["formControlName","urlCustomContent"],["formControlName","htmlCustomContent","rows","7",1,"textarea-scrollable"]]},template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11," Show the specific HTML I supply "),e.qZA()()(),e.TgZ(12,"div",7),e.ynx(13,8,9),e.YNc(15,Vs,0,0,"ng-template",10),e.NdJ("attached",function(_){return e.CHM(o),e.MAs(14).attached(_)}),e.BQk(),e.TgZ(16,"nui-form-field",11)(17,"nui-radio-group",12),e.NdJ("valueChange",function(_){return i.mode=_}),e.TgZ(18,"nui-radio",13),e._uU(19),e.qZA(),e.TgZ(20,"nui-form-field",14),e._UZ(21,"nui-textbox",15),e.qZA(),e.TgZ(22,"nui-radio",13),e._uU(23),e.qZA(),e.TgZ(24,"nui-form-field",14),e._UZ(25,"nui-textbox",16),e.qZA()()()()()}if(2&t){const o=e.MAs(14);e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"tag"))),e.xp6(9),e.Q6J("componentType",i.messageComponent.componentType)("properties",i.messageComponent.properties),e.xp6(2),e.Q6J("cdkPortalOutlet",o.portal),e.xp6(1),e.Q6J("control",i.form.get("mode")),e.xp6(1),e.Q6J("value",i.mode),e.xp6(1),e.Q6J("value",i.modes[0].value),e.xp6(1),e.hij(" ",i.modes[0].displayValue," "),e.xp6(1),e.Q6J("control",i.form.get("urlCustomContent")),e.xp6(2),e.Q6J("value",i.modes[1].value),e.xp6(1),e.hij(" ",i.modes[1].displayValue," "),e.xp6(1),e.Q6J("control",i.form.get("htmlCustomContent"))}},directives:[Ae.J,p.JL,p.sg,d.oJW,L.$,U.Pl,d.hgI,d.wTj,p.JJ,p.u,p.Q7,d.UKb,d.XHW],pipes:[r.Ov,Me.F,xe.d],styles:[".embedded-configurator-section__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function Js(n,a){if(1&n&&(e.tHW(0,1,1),e._UZ(1,"a",3),e.N_p()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("href",t.link.href,e.LSH)("target",t.link.target),e.pQV(t.link.text),e.QtT(0)}}let dn=(()=>{class n{constructor(t){this.changeDetector=t}}return n.lateLoadKey="InfoMessageConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-info-message-configuration"]],inputs:{emphasizeText:"emphasizeText",generalText:"generalText",link:"link",allowDismiss:"allowDismiss"},decls:4,vars:4,consts:function(){let a;return a=$localize`:␟a533c3d45bdc55cc7b8fce70d448ffafc70b0f5b␟4231249583296268212:${"\ufffd#2\ufffd"}:START_BOLD_TEXT: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_LINK:${"\ufffd0:1\ufffd"}:INTERPOLATION_2:${"\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd"}:CLOSE_LINK:`,[["type","info",3,"allowDismiss"],a,[3,"href","target",4,"ngIf"],[3,"href","target"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-message",0),e.tHW(1,1),e._UZ(2,"b"),e.YNc(3,Js,2,3,"a",2),e.N_p(),e.qZA()),2&t&&(e.Q6J("allowDismiss",i.allowDismiss),e.xp6(3),e.Q6J("ngIf",i.link),e.pQV(i.emphasizeText)(i.generalText),e.QtT(1))},directives:[d.qqZ,r.O5],encapsulation:2,changeDetection:0}),n})();var cn=l(39841);function Ys(n,a){if(1&n&&(e.TgZ(0,"div",14)(1,"nui-form-field",15),e._UZ(2,"nui-textbox",16),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("control",t.form.get("units"))}}let _n=(()=>{class n{constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.defaultColor={label:$localize`Default color`,color:Mi},this.label="",this.backgroundColor=this.defaultColor.color,this.units="",this.formReady=new e.vpe}ngOnInit(){this.backgroundColors=[...this.backgroundColors],this.backgroundColors.unshift(this.defaultColor),this.form=this.formBuilder.group({label:[this.label,[p.kI.required]],backgroundColor:[this.backgroundColor,[p.kI.required]]}),this.configurableUnits&&this.form.addControl("units",this.formBuilder.control(this.units));const t=this.form.get("label"),i=null==t?void 0:t.valueChanges.pipe((0,Ni.O)(t.value)),o=this.form.get("backgroundColor"),s=null==o?void 0:o.valueChanges.pipe((0,Ni.O)(null==o?void 0:o.value));this.subtitle$=(0,cn.a)([null==i?void 0:i.pipe((0,ft.U)(_=>_||$localize`no label`)),null==s?void 0:s.pipe((0,ft.U)(_=>rn[_]||$localize`Default Color`))]).pipe((0,ft.U)(_=>_.join(", "))),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,s;t.label&&(null===(i=this.form)||void 0===i||i.patchValue({label:t.label.currentValue})),t.backgroundColor&&(null===(o=this.form)||void 0===o||o.patchValue({backgroundColor:t.backgroundColor.currentValue})),t.units&&(null===(s=this.form)||void 0===s||s.patchValue({units:t.units.currentValue}))}}return n.lateLoadKey="KpiDescriptionConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-kpi-description-configuration"]],inputs:{componentId:"componentId",configurableUnits:"configurableUnits",label:"label",backgroundColor:"backgroundColor",units:"units",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[e.TTD],decls:21,vars:22,consts:function(){let a,t,i,o,s,_;return a=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`,o=$localize`:␟e088252c0e2ede83d27a24702b1f77c90cee60b7␟3468485835384597147:Background Color`,s=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,_=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"kpi-description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"form-group",3,"control"],["formControlName","label","placeholder",i],["caption",o,1,"form-group",3,"control"],["formControlName","backgroundColor",1,"kpi-description-configuration__accordion-content__color-picker",3,"colorPalette"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",s,1,"form-group",3,"control"],["formControlName","units","placeholder",_]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e.ALo(11,"async"),e._uU(12),e.ALo(13,"async"),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",8)(16,"nui-form-field",9),e._UZ(17,"nui-textbox",10),e.qZA()(),e.TgZ(18,"nui-form-field",11),e._UZ(19,"nui-color-picker",12),e.qZA(),e.YNc(20,Ys,3,1,"div",13),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,9,e.lcZ(2,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,13,e.xi3(6,15,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",e.lcZ(11,18,i.subtitle$)),e.xp6(2),e.hij(" ",e.lcZ(13,20,i.subtitle$)," "),e.xp6(4),e.Q6J("control",i.form.get("label")),e.xp6(2),e.Q6J("control",i.form.get("backgroundColor")),e.xp6(1),e.Q6J("colorPalette",i.backgroundColors),e.xp6(1),e.Q6J("ngIf",i.configurableUnits))},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.XHW,p.JJ,p.u,Ti,r.O5],pipes:[r.Ov,Me.F,xe.d],styles:[".kpi-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-description-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-description-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-description-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:10px}.kpi-description-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}"],changeDetection:0}),n})();var Hs=l(25032),Se=(()=>{return(n=Se||(Se={})).Second="second",n.Minute="minute",n.Hour="hour",Se;var n})();const un={[Se.Second]:1e3,[Se.Minute]:6e4,[Se.Hour]:36e5},Ks={[Se.Hour]:$localize`:hours unit (long):hours`,[Se.Minute]:$localize`:minutes unit (long):minutes`,[Se.Second]:$localize`:seconds unit (long):seconds`},Yt={[Se.Hour]:$localize`:hours unit (short):h`,[Se.Minute]:$localize`:minutes unit (short):min`,[Se.Second]:$localize`:seconds unit (short):sec`};function bt(n,a){return un[n]/un[a]}function Qs(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",7),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.label," ")}}let Fi=(()=>{class n{constructor(t,i){this.fb=t,this.cd=i,this.possibleUnits=[Se.Second,Se.Minute,Se.Hour],this.unitItems=[],this.displayedUnitItems=[],this.currentUnit=null,this.valueChangeFix=Hs.Z,this.destroy$=new ie.x}ngOnInit(){this.generateUnitItems(),this.filterUnitItems(),this.createForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getNumberMin(){if(!this.unitControl.value||null==this.minSeconds)return;const t=bt(Se.Second,this.unitControl.value.id);return Math.ceil(this.minSeconds*t)}getNumberMax(){if(!this.unitControl.value||null==this.maxSeconds)return;const t=bt(Se.Second,this.unitControl.value.id);return Math.floor(this.maxSeconds*t)}writeValue(t){if(isFinite(t)&&this.isRangeValid()&&this.unitControl.value){const i=bt(Se.Second,this.unitControl.value.id);this.numberControl.setValue(t*i)}else this.numberControl.setValue(null);this.cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){}setDisabledState(t){t?(this.numberControl.disable({emitEvent:!1}),this.unitControl.disable({emitEvent:!1})):(this.numberControl.enable({emitEvent:!1}),this.unitControl.enable({emitEvent:!1})),this.cd.markForCheck()}resetUnits(){this.unitControl.setValue(this.displayedUnitItems[0])}generateUnitItems(){this.possibleUnits.forEach((t,i)=>{this.unitItems[i]={id:t,label:Ks[t]}})}filterUnitItems(){this.displayedUnitItems=this.unitItems.filter(t=>{let i=!1;if(null!=this.maxSeconds){const o=bt(Se.Second,t.id);i=Math.floor(this.maxSeconds*o)<=0}return!i})}createForm(){this.form=this.fb.group({number:[1,[p.kI.required]],unit:this.displayedUnitItems[0]}),this.numberControl=this.form.get("number"),this.unitControl=this.form.get("unit"),this.unitControl.value&&(this.currentUnit=this.unitControl.value.id),this.form.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(()=>{this.updateError(),this.emitValueChange()})}updateError(){this.isNumberValid()?this.numberControl.setErrors(null):this.numberControl.setErrors({invalidNumber:!0})}emitValueChange(){const t=this.numberControl.value,i=this.unitControl.value;if(null==t||null==i)return void(this.onChange&&this.onChange(null));const o=bt(i.id,Se.Second);this.onChange&&this.onChange(t*o)}isRangeValid(){return this.minSeconds<=this.maxSeconds||null==this.maxSeconds}isNumberValid(){const t=this.numberControl.value;return!(t<this.minSeconds||t%1!=0)&&(!(t*bt(this.unitControl.value.id,Se.Second)>this.maxSeconds)&&this.isRangeValid())}getNumberValidationMessage(){const t={min:this.getNumberMin(),max:this.getNumberMax(),whole:!0};return this.getLocalizedNumberValidationMessage(t)}getLocalizedNumberValidationMessage(t){const{min:i,max:o,whole:s}=t,_=s?$localize`a whole number`:$localize`a number`;return null!=i&&null!=o?i===o?$localize`Must be ${_} equal to ${i}`:$localize`Must be ${_} between ${i} and ${o}`:null==i&&null!=o?$localize`Must be ${_} not larger than ${o}`:null!=i&&null==o?$localize`Must be ${_} not smaller than ${i}`:$localize`Must be ${_}`}validate(){var t;return(null===(t=this.form.get("number"))||void 0===t?void 0:t.errors)||null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-refresh-rate-configurator"]],inputs:{minSeconds:"minSeconds",maxSeconds:"maxSeconds"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}])],decls:8,vars:6,consts:[[1,"d-flex","flex-column",3,"formGroup"],[1,"d-flex","flex-row"],["formControlName","number","customBoxWidth","90px",3,"minValue","maxValue","valueChange"],["formControlName","unit",1,"ml-3"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["for","invalidNumber"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"nui-textbox-number",2),e.NdJ("valueChange",function(){return i.valueChangeFix()}),e.qZA(),e.TgZ(3,"nui-select-v2",3),e.YNc(4,Qs,2,2,"nui-select-v2-option",4),e.qZA()(),e.TgZ(5,"nui-form-field",5)(6,"nui-validation-message",6),e._uU(7),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("minValue",i.minSeconds)("maxValue",i.maxSeconds),e.xp6(2),e.Q6J("ngForOf",i.displayedUnitItems),e.xp6(1),e.Q6J("control",i.form.get("number")),e.xp6(2),e.hij(" ",i.getNumberValidationMessage()," "))},directives:[p._Y,p.JL,p.sg,d.I5I,p.JJ,p.u,d.j_n,r.sg,d.rLF,d.hgI,d.CfE],encapsulation:2,changeDetection:0}),n})();function Xs(n,a){if(1&n&&(e.TgZ(0,"div",15),e.SDv(1,16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.pQV(t.getDurationLabel(t.refresherSettings.refreshRateSeconds)),e.QtT(1)}}let pn=(()=>{class n{constructor(t,i,o,s,_){this.changeDetector=t,this.formBuilder=i,this.logger=o,this.refresherSettings=s,this.cd=_,this.minSeconds=1,this.maxSeconds=86400,this.overrideDefaultSettingsCaption=$localize`Custom refresh rate`,this.overrideDefaultSettings=!0,this.formReady=new e.vpe,this.destroyed$=new ie.x,this.resetInterval=()=>{var f;this.refreshRateComp.resetUnits(),null===(f=this.form.get("interval"))||void 0===f||f.setValue(this.interval||this.minSeconds)}}ngOnInit(){var t;this.form=this.formBuilder.group({enabled:[!0,[p.kI.required]],overrideDefaultSettings:[this.overrideDefaultSettings,[p.kI.required]],interval:[null!==(t=this.interval)&&void 0!==t?t:0,[p.kI.required]]}),this.form.statusChanges.pipe((0,de.R)(this.destroyed$)).subscribe(()=>{this.form.markAllAsTouched(),this.cd.detectChanges()}),(0,cn.a)([this.form.controls.enabled.valueChanges,this.form.controls.overrideDefaultSettings.valueChanges]).pipe((0,zt.h)(i=>i.some(o=>!o)),(0,it.b)(this.resetInterval),(0,de.R)(this.destroyed$)).subscribe(),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,s,_,f,M;t.enabled&&(null===(o=null===(i=this.form)||void 0===i?void 0:i.get("enabled"))||void 0===o||o.patchValue(this.enabled)),t.interval&&(null===(_=null===(s=this.form)||void 0===s?void 0:s.get("interval"))||void 0===_||_.patchValue(this.interval)),t.overrideDefaultSettings&&(null===(M=null===(f=this.form)||void 0===f?void 0:f.get("overrideDefaultSettings"))||void 0===M||M.patchValue(this.overrideDefaultSettings))}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getHeaderSubtitle(){var t,i,o;let s="";return(null===(t=this.form.get("enabled"))||void 0===t?void 0:t.value)?(s+=$localize`Enabled`,s+=", ",(null===(i=this.form.get("overrideDefaultSettings"))||void 0===i?void 0:i.value)?s+=this.getDurationLabel(null===(o=this.form.get("interval"))||void 0===o?void 0:o.value):s+=$localize`Use default value`+" ("+this.getDurationLabel(this.refresherSettings.refreshRateSeconds)+")"):s+=$localize`Disabled`,s}getDurationLabel(t){let i=t,o="";const s=Math.floor(i/3600);i%=3600;const _=Math.floor(i/60),f=i%60;return s>0&&(o+=s+" "+Yt[Se.Hour]+" "),_>0&&(o+=_+" "+Yt[Se.Minute]+" "),f>0&&(o+=f+" "+Yt[Se.Second]+" "),o=o.trim(),""===o?"0 "+Yt[Se.Second]:o}}return n.lateLoadKey="RefresherConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy),e.Y36(ni.g),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-refresher-configuration"]],viewQuery:function(t,i){if(1&t&&e.Gf(Fi,5),2&t){let o;e.iGM(o=e.CRH())&&(i.refreshRateComp=o.first)}},inputs:{enabled:"enabled",interval:"interval",minSeconds:"minSeconds",maxSeconds:"maxSeconds",overrideDefaultSettingsCaption:"overrideDefaultSettingsCaption",overrideDefaultSettings:"overrideDefaultSettings"},outputs:{formReady:"formReady"},features:[e.TTD],decls:26,vars:25,consts:function(){let a,t,i;return a=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`,t=$localize`:␟913ac9d5354818a43028659e12bb79cc3a8d19e3␟2148212086281974142:Refresh widget periodically`,i=$localize`:␟094103d9c7a2be810d7fc6a1935e14695f19925f␟4443005292001830097: By default, the widget will refresh every ${"\ufffd0\ufffd"}:INTERPOLATION:. `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"d-flex","flex-column","nui-refresher-configuration__accordion-content"],[3,"control"],["formControlName","enabled"],t,[1,"mt-4"],["formControlName","overrideDefaultSettings"],["class","nui-help-hint",4,"ngIf"],["formControlName","interval",3,"minSeconds","maxSeconds"],[1,"nui-help-hint"],i]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div")(14,"nui-form-field",8)(15,"nui-switch",9),e.SDv(16,10),e.qZA()()(),e.TgZ(17,"div")(18,"div",11)(19,"nui-form-field",8)(20,"nui-switch",12),e._uU(21),e.YNc(22,Xs,2,1,"div",13),e.qZA()()(),e.TgZ(23,"div",11)(24,"nui-form-field",8),e._UZ(25,"nui-refresh-rate-configurator",14),e.qZA()()()()()),2&t){let o,s,_;e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"reset"))),e.xp6(6),e.Q6J("title",i.getHeaderSubtitle()),e.xp6(1),e.hij(" ",i.getHeaderSubtitle()," "),e.xp6(3),e.Q6J("control",i.form.get("enabled")),e.xp6(3),e.ekj("hidden",!(null!=(o=i.form.get("enabled"))&&o.value)),e.xp6(2),e.Q6J("control",i.form.get("overrideDefaultSettings")),e.xp6(2),e.hij("",i.overrideDefaultSettingsCaption," "),e.xp6(1),e.Q6J("ngIf",!(null!=(s=i.form.get("overrideDefaultSettings"))&&s.value)),e.xp6(1),e.ekj("hidden",!(null!=(_=i.form.get("overrideDefaultSettings"))&&_.value)),e.xp6(1),e.Q6J("control",i.form.get("interval")),e.xp6(1),e.Q6J("minSeconds",i.minSeconds)("maxSeconds",i.maxSeconds)}},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.qUD,p.JJ,p.u,r.O5,Fi],pipes:[r.Ov,Me.F,xe.d],styles:[".nui-refresher-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),n})();var js=l(45588),qs=l.n(js);const ea=n=>{const a=n.get("criticalThresholdValue"),t=n.get("warningThresholdValue"),i=n.get("reversedThresholds"),o=n.get("showThresholds");if(!a)throw new Error("criticalThresholdValue formControl is not defined");if((0,d.fS1)(a,"min","max"),!t)throw new Error("warningThresholdValue formControl is not defined");if((0,d.fS1)(t,"min","max"),null==o?void 0:o.value){if(W()(t.value))return null;if(null==i?void 0:i.value){if(a.value>=t.value)return t.setErrors({min:!0}),a.setErrors({max:!0}),{thresholds:!0}}else if(a.value<=t.value)return t.setErrors({max:!0}),a.setErrors({min:!0}),{thresholds:!0}}return null};function ta(n,a){if(1&n&&(e.TgZ(0,"nui-radio",14),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.displayValue," ")}}function ia(n,a){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"nui-form-field",17),e._UZ(3,"nui-textbox-number",18),e.TgZ(4,"nui-validation-message",11),e.SDv(5,19),e.qZA(),e.TgZ(6,"nui-validation-message",20),e.SDv(7,21),e.qZA(),e.TgZ(8,"nui-validation-message",22),e.SDv(9,23),e.qZA()()(),e.TgZ(10,"div",16)(11,"nui-form-field",24),e._UZ(12,"nui-textbox-number",25),e.TgZ(13,"nui-validation-message",11),e.SDv(14,26),e.qZA(),e.TgZ(15,"nui-validation-message",20),e.SDv(16,27),e.qZA(),e.TgZ(17,"nui-validation-message",22),e.SDv(18,28),e.qZA()()(),e.TgZ(19,"nui-form-field",29),e._UZ(20,"nui-checkbox",30),e.TgZ(21,"nui-validation-message",11),e.SDv(22,31),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("control",t.form.get("warningThresholdValue")),e.xp6(9),e.Q6J("control",t.form.get("criticalThresholdValue")),e.xp6(8),e.Q6J("control",t.form.get("reversedThresholds"))("showOptionalText",!1)}}let gn=(()=>{class n{constructor(t,i,o,s){this.changeDetector=t,this.formBuilder=i,this.logger=o,this.cd=s,this.formReady=new e.vpe,this.thresholdOptions=[{value:!1,displayValue:$localize`Never show critical or warning states for this KPI`},{value:!0,displayValue:$localize`Set custom thresholds for this widget`}],this.destroy$=new ie.x}ngOnInit(){this.validateRadioButtonsGroupValue(),this.form=this.formBuilder.group({criticalThresholdValue:[this.criticalThresholdValue||0,[p.kI.required]],warningThresholdValue:[this.warningThresholdValue||0],showThresholds:[this.showThresholds||!1,[p.kI.required]],reversedThresholds:[this.reversedThresholds||!1]},{validators:ea}),this.handleWarningThreshold(this.warningThresholdValue),this.form.statusChanges.pipe((0,de.R)(this.destroy$)).subscribe(t=>{this.form.markAllAsTouched(),this.cd.detectChanges()}),this.formReady.emit(this.form)}ngOnChanges(t){var i;const o=["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"];if(t){for(const s of Object.keys(t))if(qs()(o,s)){const _=t[s].currentValue;_&&(null===(i=this.form)||void 0===i||i.patchValue({[s]:_}))}t.showThresholds&&setTimeout(()=>this.validateRadioButtonsGroupValue())}t.warningThresholdValue&&this.handleWarningThreshold(t.warningThresholdValue.currentValue)}getThresholdsSubtitle(t){return t?$localize`Custom thresholds`:$localize`No thresholds`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}validateRadioButtonsGroupValue(){this.radioButtonGroupValue=this.showThresholds}handleWarningThreshold(t){var i;const o=null===(i=this.form)||void 0===i?void 0:i.get("warningThresholdValue");W()(t)&&(null==o||o.setValue(null))}}return n.lateLoadKey="ThresholdsConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-thresholds-configuration"]],inputs:{criticalThresholdValue:"criticalThresholdValue",warningThresholdValue:"warningThresholdValue",showThresholds:"showThresholds",reversedThresholds:"reversedThresholds"},outputs:{formReady:"formReady"},features:[e.TTD],decls:19,vars:18,consts:function(){let a,t,i,o,s,_,f,M,x,K,V,ce,ge,pe,Ye;return a=$localize`:␟784fdd6b2dc26499eca6e15094b55f0b1c1e1b7a␟8815471757829352344:Thresholds`,t=$localize`:␟6875687abe0982b513f60d230d71b9cc2d9eef3e␟9007062817247777645:How do you want to set warning/critical thresholds?`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,o=$localize`:␟5dda34ec4b693f2b13afdf28a4e5f00062f4c896␟4003830139037367407:Warning value`,s=$localize`:␟cae671d9eb277eadfd7752518814d3f852369cc9␟6643132921042050963:Never show the warning state`,_=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,f=$localize`:␟19d6eb371557c8ab18db5332a2e1955f18c2f16d␟3184669981998118637: Warning threshold should be greater than critical threshold `,M=$localize`:␟6c62f1e33dd914743cb977df6baba31779d7aed6␟1030183925045576042: Warning threshold should be lower than critical threshold `,x=$localize`:␟f8baa78544aa27624d43d59e5a225216aff1042f␟6033897450960508846:Critical value`,K=$localize`:␟9b66a7e6fdeb05f4c1ffdc78ea8f4a7a2fb64d79␟7643729389671069649:Set critical value`,V=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,ce=$localize`:␟540b9b0f637cc0605bc00ccc586a3eab73aabcfc␟4465977748799047247: Critical threshold should be greater than warning threshold `,ge=$localize`:␟2efae84e117a2639681a8e5c0e4ce4eee42af17d␟9156849514888688496: Critical threshold should be lower than warning threshold `,pe=$localize`:␟18bcbeb2b14e6064ec6fe9276db140a4e800da3c␟5716867848923884165:Warning and critical when below threshold values`,Ye=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"kpi-thresholds-configuration__accordion-content"],["caption",t,3,"control"],["formControlName","showThresholds","name","showThresholds","required","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],i,["class","mt-4",4,"ngIf"],[3,"value"],[1,"mt-4"],[1,"mb-4"],["caption",o,3,"control"],["formControlName","warningThresholdValue","placeholder",s],_,["for","min"],f,["for","max"],M,["caption",x,3,"control"],["formControlName","criticalThresholdValue","placeholder",K],V,ce,ge,["caption",pe,3,"control","showOptionalText"],["formControlName","reversedThresholds","required",""],Ye]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-radio-group",9),e.YNc(15,ta,2,2,"nui-radio",10),e.qZA(),e.TgZ(16,"nui-validation-message",11),e.SDv(17,12),e.qZA()(),e.YNc(18,ia,23,4,"div",13),e.qZA()()),2&t){let o,s,_;e.Q6J("formGroup",i.form)("state",e.lcZ(1,9,e.lcZ(2,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,13,e.xi3(6,15,i.form,"thresholds"))),e.xp6(6),e.Q6J("title",i.getThresholdsSubtitle(null==(o=i.form.get("showThresholds"))?null:o.value)),e.xp6(1),e.hij(" ",i.getThresholdsSubtitle(null==(s=i.form.get("showThresholds"))?null:s.value)," "),e.xp6(2),e.Q6J("control",i.form.get("showThresholds")),e.xp6(1),e.Q6J("value",i.radioButtonGroupValue),e.xp6(1),e.Q6J("ngForOf",i.thresholdOptions),e.xp6(3),e.Q6J("ngIf",null==(_=i.form.get("showThresholds"))?null:_.value)}},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.wTj,p.JJ,p.u,p.Q7,r.sg,d.UKb,d.CfE,r.O5,d.I5I,d.bK4],pipes:[r.Ov,Me.F,xe.d],styles:[".kpi-thresholds-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function na(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function oa(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function ra(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}let hn=(()=>{class n{constructor(t,i,o,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.eventBus=s,this.legendPlacements=[],this.timeSpans=[],this.availableChartTypes=[{label:$localize`Line`,value:be.Line},{label:$localize`Stacked area`,value:be.StackedArea},{label:$localize`Stacked % area`,value:be.StackedPercentageArea},{label:$localize`Bar`,value:be.StackedBar},{label:$localize`Status`,value:be.StatusBar}],this.formReady=new e.vpe,this.destroy$=new ie.x,this.form=this.formBuilder.group({leftAxisLabel:[""],startingTimespan:[null,p.kI.required],legendPlacement:[Fe.w.None,[p.kI.required]],preset:[be.Line,[p.kI.required]]})}ngOnInit(){var t;null===(t=this.form.get("startingTimespan"))||void 0===t||t.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(i=>{setTimeout(()=>{this.eventBus.next(T.xZ,{payload:{id:T.RG}})})}),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,s,_;const f=this.form.get("startingTimespan");t.leftAxisLabel&&(null===(i=this.form.get("leftAxisLabel"))||void 0===i||i.setValue(this.leftAxisLabel,{emitEvent:!1})),t.startingTimespan&&(null==f||f.setValue(this.startingTimespan,{emitEvent:!1})),t.legendPlacement&&(null===(o=this.form.get("legendPlacement"))||void 0===o||o.setValue(this.legendPlacement,{emitEvent:!1})),t.preset&&(null===(s=this.form.get("preset"))||void 0===s||s.setValue(this.preset,{emitEvent:!1})),t.timeSpans&&!(null==f?void 0:f.value)&&(null===(_=this.timeSpans)||void 0===_?void 0:_.length)>0&&(null==f||f.setValue(this.timeSpans[0]))}getSecondaryText(){const t=this.form.controls.startingTimespan.value;return`${t&&t.name||$localize`No timespan`}, ${this.form.controls.legendPlacement.value||$localize`No legend`}, ${this.form.controls.leftAxisLabel.value||$localize`No y-axis label`}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.lateLoadKey="TimeseriesMetadataConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-timeseries-metadata-configuration"]],inputs:{legendPlacements:"legendPlacements",timeSpans:"timeSpans",startingTimespan:"startingTimespan",legendPlacement:"legendPlacement",leftAxisLabel:"leftAxisLabel",preset:"preset",availableChartTypes:"availableChartTypes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:40,vars:37,consts:function(){let a,t,i,o,s,_,f,M,x,K,V,ce,ge;return a=$localize`:␟82fac4002b38b13e6e76cab565857c651740e8d4␟7635587638460371959:Timeseries metadata`,t=$localize`:␟7c1e198b83571c6f6d6774bbf5e8ef469b8ed3f8␟83369046626581484:Starting timespan`,i=$localize`:␟cea52b8401042ba9c3aac1cd5a7507d754f0d809␟4391839922437157830:Starting Timespan`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟a9e3fc4b717bf285f084fc443a97f4c08b345203␟2498436426359230001:Chart legend`,_=$localize`:␟8137d4a0a1b9974f796c96ea5b70f4ec4304af97␟9008417256629743113:Select Legend Orientation`,f=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,M=$localize`:␟20f8b383236e858a2369abf573aa3a662a61dc2c␟7603862017185374134:Chart y-axis label`,x=$localize`:␟da1b3b8ad86495e008972fe0f8dfca60c9c60ac5␟5670370419656051485:Set chart y-axis label`,K=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,V=$localize`:␟d4821e6eaad5b45a36e2873de2a6e0075c4b7621␟8983610989099122824:Chart type`,ce=$localize`:␟d4821e6eaad5b45a36e2873de2a6e0075c4b7621␟8983610989099122824:Chart type`,ge=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"timeseries-metadata-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","startingTimespan",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],o,["caption",s,3,"control"],["placeholder",_,"formControlName","legendPlacement",3,"popupViewportMargin"],f,["caption",M,3,"control"],["formControlName","leftAxisLabel","placeholder",x],K,["caption",V,3,"control"],["placeholder",ce,"formControlName","preset",3,"popupViewportMargin"],ge,[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.ALo(7,"async"),e.ALo(8,"nuiFormHeaderIconPipe"),e.TgZ(9,"div",3)(10,"span",4),e.SDv(11,5),e.qZA(),e.TgZ(12,"div",6),e._uU(13),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",8)(16,"nui-form-field",9)(17,"nui-select-v2",10),e.ALo(18,"async"),e.YNc(19,na,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(20,"nui-validation-message",12),e.SDv(21,13),e.qZA()()(),e.TgZ(22,"div",8)(23,"nui-form-field",14)(24,"nui-select-v2",15),e.ALo(25,"async"),e.YNc(26,oa,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(27,"nui-validation-message",12),e.SDv(28,16),e.qZA()()(),e.TgZ(29,"div",8)(30,"nui-form-field",17),e._UZ(31,"nui-textbox",18),e.TgZ(32,"nui-validation-message",12),e.SDv(33,19),e.qZA()()(),e.TgZ(34,"nui-form-field",20)(35,"nui-select-v2",21),e.ALo(36,"async"),e.YNc(37,ra,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(38,"nui-validation-message",12),e.SDv(39,22),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"edit")))("iconColor",e.lcZ(7,25,e.Dn7(8,27,i.form,"gray",""))),e.xp6(8),e.Q6J("title",i.getSecondaryText()),e.xp6(1),e.hij(" ",i.getSecondaryText()," "),e.xp6(3),e.Q6J("control",i.form.controls.startingTimespan),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(18,31,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.timeSpans),e.xp6(4),e.Q6J("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(25,33,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendPlacements),e.xp6(4),e.Q6J("control",i.form.controls.leftAxisLabel),e.xp6(4),e.Q6J("control",i.form.controls.preset),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(36,35,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.availableChartTypes))},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE,d.XHW],pipes:[r.Ov,Me.F,xe.d],styles:[".timeseries-metadata-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),n})(),Ct=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.formBuilder=i,this.logger=o,this.formReady=new e.vpe,this.form=this.formBuilder.group({title:["",p.kI.required],subtitle:[""],url:[""],description:[""],collapsible:[!1],collapsed:[!0]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i,o,s,_,f;t.title&&(null===(i=this.form.get("title"))||void 0===i||i.setValue(this.title)),t.url&&(null===(o=this.form.get("url"))||void 0===o||o.setValue(this.url)),t.subtitle&&(null===(s=this.form.get("subtitle"))||void 0===s||s.setValue(this.subtitle)),t.description&&(null===(_=this.form.get("description"))||void 0===_||_.setValue(this.description)),t.collapsible&&(null===(f=this.form.get("collapsible"))||void 0===f||f.setValue(this.collapsible))}getSecondaryText(){return`${this.form.controls.title.value||$localize`No title`}, ${this.form.controls.subtitle.value||$localize`no subtitle`}`}}return n.lateLoadKey="TitleAndDescriptionConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-title-and-description-configuration"]],inputs:{title:"title",url:"url",subtitle:"subtitle",description:"description",collapsible:"collapsible"},outputs:{formReady:"formReady"},features:[e.TTD],decls:31,vars:20,consts:function(){let a,t,i,o,s,_,f,M,x,K,V,ce,ge;return a=$localize`:␟c1f3e3c0c4876967ade530f67b0696f7c1f5aa76␟6274813085792990828:Title and Description`,t=$localize`:␟f75e29ac7734f16cad4d02017646720be3030367␟1720994052291036243:Widget title`,i=$localize`:␟eb94f6289d261b9d7b1288cf92c4099023695dd9␟2301126677959299103:Set widget title`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟d2b3deab155463fe2b5ac59000b6e3aa7771afc8␟2073684406211180788:Widget subtitle`,_=$localize`:␟b6d324cd44176b6e2bfe2ff16bbc7e7ee1c412fc␟8934433387734849172:Do not show a subtitle`,f=$localize`:␟cb04bfea86b30d40d2d30630c957bf3fd2e50b83␟9207103926988831681:Widget link URL`,M=$localize`:␟02773997819c014e0f299deb7cb8e054003850e1␟3668070782949850100:Do not link to another page`,x=$localize`:␟ab83c23bd6135460422e95fca32b4ec38ddff9e6␟3861388441030158101:Widget description`,K=$localize`:␟2f50115d11fc3e29acafe6f99228c2304cffb722␟3301579533722588311:This won't be shown on the widget, but can be helpful for
                          other users who want to re-use this widget on their own dashboards`,V=$localize`:␟37b56526e384f843a15323dc730b484a97b4c968␟3830487495946043372:No description`,ce=$localize`:␟9de5a44cd2d54fe77e5c12131ab7a21792ce91df␟5450302501374652801:Hide widget header`,ge=$localize`:␟6570353e3fb49053e2327cb92f257eab8ccdd274␟5369485165489692848:Collapsible`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"title-and-description-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["id","kpi-widget-title","formControlName","title","placeholder",i],["for","required"],o,["caption",s,3,"control"],["id","kpi-widget-subtitle","formControlName","subtitle","placeholder",_],["caption",f,3,"control"],["id","kpi-widget-url","formControlName","url","placeholder",M],["caption",x,"hint",K,3,"control"],["formControlName","description","placeholder",V],["caption",ce,3,"showOptionalText","control"],["formControlName","collapsible"],ge]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9),e._UZ(15,"nui-textbox",10),e.TgZ(16,"nui-validation-message",11),e.SDv(17,12),e.qZA()()(),e.TgZ(18,"div",8)(19,"nui-form-field",13),e._UZ(20,"nui-textbox",14),e.qZA()(),e.TgZ(21,"div",8)(22,"nui-form-field",15),e._UZ(23,"nui-textbox",16),e.qZA()(),e.TgZ(24,"div",8)(25,"nui-form-field",17),e._UZ(26,"nui-textbox",18),e.qZA()(),e.TgZ(27,"div")(28,"nui-form-field",19)(29,"nui-checkbox",20),e.SDv(30,21),e.qZA()()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,11,e.lcZ(2,13,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,15,e.xi3(6,17,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.getSecondaryText()),e.xp6(1),e.hij(" ",i.getSecondaryText()," "),e.xp6(3),e.Q6J("control",i.form.get("title")),e.xp6(5),e.Q6J("control",i.form.get("subtitle")),e.xp6(3),e.Q6J("control",i.form.get("url")),e.xp6(3),e.Q6J("control",i.form.get("description")),e.xp6(3),e.Q6J("showOptionalText",!1)("control",i.form.get("collapsible")))},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.XHW,p.JJ,p.u,d.CfE,d.bK4],pipes:[r.Ov,Me.F,xe.d],styles:[".title-and-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function sa(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function aa(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function la(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function da(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ca(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let mn=(()=>{class n{constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.formReady=new e.vpe,this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group({icon:"",status:"",detailedUrl:"",label:"",url:""})})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){t.dataFieldIds&&this.getFieldMappingsControl.setValue(t.dataFieldIds.currentValue)}get getFieldMappingsControl(){return this.form.get("dataFieldIds")}}return n.lateLoadKey="EntityFormattingComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-entity-formatting-configuration"]],inputs:{mappingKeys:"mappingKeys",dataFieldIds:"dataFieldIds"},outputs:{formReady:"formReady"},features:[e.TTD],decls:46,vars:17,consts:function(){let a,t,i,o,s,_,f,M,x,K,V;return a=$localize`:␟38ddd26fc749a9c493e70c642d321c868c47f178␟5252376970414591923:Entity formatting`,t=$localize`:␟14688213d67b2f0e553d66f8255281db245502fb␟3074987902485823708:Icon`,i=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,o=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,s=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,_=$localize`:␟06ae2001bf7ffd3cbe977e0c4ce0951f660ca197␟4936125302941310356:Details URL`,f=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,M=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,x=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,K=$localize`:␟ec044db4c57a4750f8bec4371dc39e94f2e26d46␟994779223497739731:Label URL`,V=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,["title","Show status icon",1,"nui-text-secondary"],["formGroupName","dataFieldIds",1,"entity-formatting__accordion-content"],[1,"mb-3"],t,[1,"d-flex","flex-grow-1"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",i,"formControlName","icon"],[3,"value",4,"ngFor","ngForOf"],o,["placeholder",s,"formControlName","status"],_,["placeholder",f,"formControlName","detailedUrl"],M,["placeholder",x,"formControlName","label"],K,["placeholder",V,"formControlName","url"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.TgZ(5,"div",3)(6,"span",4),e.SDv(7,5),e.qZA(),e.TgZ(8,"div",6),e._uU(9," Show status icon "),e.qZA()()(),e.TgZ(10,"div",7)(11,"div",8)(12,"label",4),e.SDv(13,9),e.qZA(),e.TgZ(14,"div",10)(15,"nui-form-field",11)(16,"nui-select-v2",12),e.YNc(17,sa,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(18,"div",8)(19,"label",4),e.SDv(20,14),e.qZA(),e.TgZ(21,"div",10)(22,"nui-form-field",11)(23,"nui-select-v2",15),e.YNc(24,aa,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(25,"div",8)(26,"label",4),e.SDv(27,16),e.qZA(),e.TgZ(28,"div",10)(29,"nui-form-field",11)(30,"nui-select-v2",17),e.YNc(31,la,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(32,"div",8)(33,"label",4),e.SDv(34,18),e.qZA(),e.TgZ(35,"div",10)(36,"nui-form-field",11)(37,"nui-select-v2",19),e.YNc(38,da,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(39,"div",8)(40,"label",4),e.SDv(41,20),e.qZA(),e.TgZ(42,"div",10)(43,"nui-form-field",11)(44,"nui-select-v2",21),e.YNc(45,ca,2,2,"nui-select-v2-option",13),e.qZA()()()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,13,e.lcZ(2,15,i.form))),e.xp6(4),e.Q6J("icon","tag"),e.xp6(11),e.Q6J("control",i.getFieldMappingsControl.get("icon")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("status")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("detailedUrl")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("label")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("url")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys))},directives:[Ae.J,p.JL,p.sg,d.oJW,p.x0,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF],pipes:[r.Ov,Me.F],styles:[".entity-formatting__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),n})();var _a=l(18680),fn=l.n(_a);function ua(n,a){1&n&&(e.TgZ(0,"label",18),e.SDv(1,19),e.qZA())}function pa(n,a){1&n&&(e.TgZ(0,"label",20),e.SDv(1,21),e.qZA())}function ga(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ha(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,ua,2,0,"label",10),e.YNc(2,pa,2,0,"label",11),e.TgZ(3,"div",12)(4,"nui-form-field",13)(5,"nui-select-v2",14),e.YNc(6,ga,2,2,"nui-select-v2-option",15),e.qZA()(),e.TgZ(7,"div",16)(8,"button",17),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().removeRule(s)}),e.qZA()()(),e.BQk()}if(2&n){const t=a.$implicit,i=a.index,o=e.oxw();e.xp6(1),e.Q6J("ngIf",0!==i),e.xp6(1),e.Q6J("ngIf",0===i),e.xp6(2),e.Q6J("control",t),e.xp6(1),e.Q6J("formControlName",i),e.xp6(1),e.Q6J("ngForOf",o.selectData[i])}}function ma(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().addGrouping()}),e.SDv(1,24),e.qZA()}}let Tn=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.formBuilder=i,this.eventBus=o,this.formReady=new e.vpe,this.form=this.formBuilder.group({groups:[],groupBy:this.formBuilder.array([]),drillstate:[void 0]}),this.destroy$=new ie.x}get getGroupByControl(){return this.form.get("groupBy")}get getDrillStateControl(){return this.form.get("drillstate")}get getGroupsControl(){return this.form.get("groups")}ngOnInit(){this.eventBus.getStream(Ue.gg).pipe((0,de.R)(this.destroy$)).subscribe(t=>this.onDataSourceCreated(t)),this.getGroupByControl.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(()=>this.fillGroupsOptions()),this.fillGroupsOptions(),this.formReady.emit(this.form)}ngOnChanges(t){t.groups&&this.getGroupsControl.setValue(t.groups.currentValue),t.groupBy&&!t.groupBy.firstChange&&(this.getGroupByControl.clear(),this.groupBy.forEach(i=>this.getGroupByControl.push(this.createControl(i))),this.fillGroupsOptions())}createControl(t){return this.formBuilder.control(t||"",p.kI.required)}addGrouping(){const t=this.createControl();this.getGroupByControl.push(t),this.fillGroupsOptions(),t.setValue(this.selectData[this.getGroupByControl.controls.length-1][0])}removeRule(t){this.getGroupByControl.removeAt(t),this.fillGroupsOptions()}isAddRestricted(){return this.selectData.some(t=>1===t.length)}getSubtitle(){var t;const i=this.getGroupByControl.controls.map((o,s)=>`${0===s?"By":"then"} ${o.value}`).join(", ");return 0===(null===(t=this.getGroupByControl)||void 0===t?void 0:t.value.length)?$localize`No groups`:$localize`${i}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onDataSourceCreated(t){var i,o,s;null===(s=null===(o=null===(i=null==t?void 0:t.payload)||void 0===i?void 0:i.dataFieldsConfig)||void 0===o?void 0:o.dataFields$)||void 0===s||s.pipe((0,de.R)(this.destroy$)).subscribe(_=>{var f;if(_){const M=_.map(K=>K.id);(fn()(this.groups,M).length||!(null===(f=this.groups)||void 0===f?void 0:f.length))&&(this.groups=M,this.getGroupsControl.setValue(M),this.getGroupByControl.clear(),this.getDrillStateControl.setValue([]),this.fillGroupsOptions())}})}fillGroupsOptions(){this.selectData=[];const t=this.getGroupByControl.value;this.getGroupByControl.controls.forEach((i,o)=>{this.selectData[o]=[];const s=fn()(this.groups,t);t[o]&&this.selectData[o].push(t[o]),this.selectData[o]=[...this.selectData[o],...s]})}}return n.lateLoadKey="DrilldownConfiguratorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-grouping-configuration"]],inputs:{groups:"groups",groupBy:"groupBy"},outputs:{formReady:"formReady"},features:[e.TTD],decls:13,vars:11,consts:function(){let a,t,i,o,s;return a=$localize`:␟8658ad3b268c50fe2c1106dfb7bccdaa2e4290b2␟877780134171662191:Grouping`,t=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,i=$localize`:␟e2feaa48e92bd996631d6a90911db46fe38cd1a3␟4620310062886462675:Then`,o=$localize`:␟788a575e9f2466abeee0e51ab8f77e9cf19243de␟3653048554215358825:Group by`,s=$localize`:␟b8c2733945af01b52afbf8d2c9993bd9abda4c94␟3960498895552401303: Add another level `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],["formArrayName","groupBy",1,"grouping-configuration__accordion-content"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click",4,"ngIf"],["class","d-flex nui-text-secondary mb-1",4,"ngIf"],["class","d-flex nui-text-panel mb-2",4,"ngIf"],[1,"d-flex","flex-row","flex-grow-1","mb-4"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",t,3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"justify-content-center"],["nui-button","","icon","delete","displayStyle","action","type","button",3,"click"],[1,"d-flex","nui-text-secondary","mb-1"],i,[1,"d-flex","nui-text-panel","mb-2"],o,[3,"value"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],s]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.TgZ(5,"div",3)(6,"span",4),e.SDv(7,5),e.qZA(),e.TgZ(8,"div",6),e._uU(9),e.qZA()()(),e.TgZ(10,"div",7),e.YNc(11,ha,9,5,"ng-container",8),e.YNc(12,ma,2,0,"button",9),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,7,e.lcZ(2,9,i.form))),e.xp6(4),e.Q6J("icon","tag"),e.xp6(4),e.Q6J("title",i.getSubtitle()),e.xp6(1),e.hij(" ",i.getSubtitle()," "),e.xp6(2),e.Q6J("ngForOf",i.getGroupByControl.controls),e.xp6(1),e.Q6J("ngIf",!i.isAddRestricted()))},directives:[Ae.J,p.JL,p.sg,d.oJW,p.CE,r.sg,r.O5,d.hgI,d.j_n,p.JJ,p.u,d.rLF,d.r0F],pipes:[r.Ov,Me.F],styles:[".grouping-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function fa(n,a){1&n&&(e.TgZ(0,"div",4)(1,"nui-message",5),e.tHW(2,6),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("allowDismiss",!1))}let Cn=(()=>{class n{constructor(t,i,o,s){this.pizzagnaService=t,this.changeDetector=i,this.formBuilder=o,this.eventBus=s,this.tiles=[],this.formReady=new e.vpe}ngOnChanges(t){}onFormReady(t){this.form=this.formBuilder.group({tiles:t}),this.emptyItems$=this.form.valueChanges.pipe((0,ft.U)(i=>0===i.tiles.length)),this.formReady.emit(this.form)}onItemsChange(t){const o=t.map(_=>_.id);this.pizzagnaService.createComponentsFromTemplate("tiles",o),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["tiles"]},t)}addTile(){this.onItemsChange([...this.tiles,{id:(0,d.VjN)("kpi"),componentType:j.lateLoadKey}])}}return n.lateLoadKey="KpiTilesConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(le.p),e.Y36(e.sBO),e.Y36(p.qu),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-kpi-tiles-configuration-component"]],inputs:{componentId:"componentId",tiles:"tiles",nodes:"nodes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:5,vars:5,consts:function(){let a,t;return a=$localize`:␟79e4ae6fc9c1cd1ee331414b873fb40154ad1e95␟5306337511240259794: Add new value
`,t=$localize`:␟7ca16fec6555e99e64e1cbd41a9ce7a4f4cae2fd␟4636957726236815999:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one value must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","kpi-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],a,[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],t]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(s){return i.onItemsChange(s)})("formReady",function(s){return i.onFormReady(s)}),e.qZA(),e.YNc(1,fa,4,1,"div",1),e.ALo(2,"async"),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.addTile()}),e.SDv(4,3),e.qZA()),2&t&&(e.Q6J("items",i.tiles)("nodes",i.nodes),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,i.emptyItems$)&&i.form.touched))},directives:[Vt,r.O5,d.qqZ,d.r0F],pipes:[r.Ov],encapsulation:2,changeDetection:0}),n})();const Ta=["metricsSelect"];function Ca(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",9),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Oa(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div")(2,"nui-form-field",2)(3,"nui-select-v2",3,4)(5,"nui-overlay-item",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().unsetMetric()}),e._uU(6,"Unset"),e.qZA(),e.YNc(7,Ca,2,3,"nui-select-v2-option",6),e.qZA(),e.TgZ(8,"nui-validation-message",7),e.SDv(9,8),e.qZA()()()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.form.controls.activeMetricId),e.xp6(5),e.Q6J("ngForOf",t.metrics)}}let Ht=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.formBuilder=i,this.logger=o,this.formReady=new e.vpe,this.form=this.formBuilder.group({activeMetricId:[]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i;t.activeMetricId&&(null===(i=this.form.get("activeMetricId"))||void 0===i||i.setValue(t.activeMetricId.currentValue),this.metrics.find(s=>s.id===t.activeMetricId.currentValue)||this.logger.warn(`AggregatorMetricSelectorConfigurationComponent: No metric found for id: ${t.activeMetricId.currentValue}`))}unsetMetric(){this.form.controls.activeMetricId.reset(),this.meticsSelect.hideDropdown()}}return n.lateLoadKey="AggregatorMetricSelectorConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-aggregator-configurator"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ta,5),2&t){let o;e.iGM(o=e.CRH())&&(i.meticsSelect=o.first)}},inputs:{metrics:"metrics",activeMetricId:"activeMetricId"},outputs:{formReady:"formReady"},features:[e.TTD],decls:1,vars:1,consts:function(){let a,t,i;return a=$localize`:␟f43d8212e6ffbc04ea0190118e7f893824ec2686␟8120854355855055890:Default Metric`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["caption",a,1,"mb-3",3,"control"],["formControlName","activeMetricId","placeholder",t],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,Oa,10,3,"div",0),2&t&&e.Q6J("ngIf",i.form)},directives:[r.O5,p.JL,p.sg,d.hgI,d.j_n,p.JJ,p.u,d.A4p,r.sg,d.rLF,d.CfE],encapsulation:2,changeDetection:0}),n})();function Ia(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function va(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Ea(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"nui-form-field",3)(3,"nui-select-v2",4,5)(5,"nui-overlay-item",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().unsetMetric()}),e._uU(6,"Unset"),e.qZA(),e.YNc(7,Ia,2,3,"nui-select-v2-option",7),e.qZA(),e.TgZ(8,"nui-validation-message",8),e.SDv(9,9),e.qZA()()(),e.TgZ(10,"div",2)(11,"nui-form-field",10)(12,"nui-select-v2",11),e.YNc(13,va,2,3,"nui-select-v2-option",7),e.qZA(),e.TgZ(14,"nui-validation-message",8),e.SDv(15,12),e.qZA()()()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.form.controls.activeMetricId),e.xp6(5),e.Q6J("ngForOf",t.metrics),e.xp6(4),e.Q6J("control",t.form.controls.chartSeriesDataFieldId),e.xp6(2),e.Q6J("ngForOf",t.chartSeriesDataFields)}}const Sa={id:"data[0]",label:"data",dataType:null};let On=(()=>{class n extends Ht{constructor(t,i,o,s){super(t,i,o),this.eventBus=s,this.chartSeriesDataFields=[Sa],this.form=this.formBuilder.group({activeMetricId:[],chartSeriesDataFieldId:[]}),this.destroy$=new ie.x,this.eventBus.getStream(Ue.gg).pipe((0,de.R)(this.destroy$)).subscribe(_=>{var f,M;const x=_.payload;x&&(null===(M=null===(f=x.dataFieldsConfig)||void 0===f?void 0:f.chartSeriesDataFields$)||void 0===M||M.pipe((0,de.R)(this.destroy$)).subscribe(K=>this.chartSeriesDataFields=K))})}ngOnChanges(t){var i;super.ngOnChanges(t),t.chartSeriesDataFieldId&&(null===(i=this.form.get("chartSeriesDataFieldId"))||void 0===i||i.setValue(t.chartSeriesDataFieldId.currentValue))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.lateLoadKey="FieldMapperAggregatorConfiguratorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(p.qu),e.Y36(d.mQy),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-field-mapper-aggregator-configurator"]],inputs:{chartSeriesDataFieldId:"chartSeriesDataFieldId"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:function(){let a,t,i,o,s,_;return a=$localize`:␟f43d8212e6ffbc04ea0190118e7f893824ec2686␟8120854355855055890:Default Metric`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,o=$localize`:␟8e67f0d2aff5ba1a2d509b591efa53a4d2076369␟5258061076548910132:Chart Series Data Field`,s=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,_=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"mb-4"],["caption",a,1,"mb-4",3,"control"],["formControlName","activeMetricId","placeholder",t],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,["caption",o,1,"mb-4",3,"control"],["formControlName","chartSeriesDataFieldId","placeholder",s],_,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,Ea,16,5,"div",0),2&t&&e.Q6J("ngIf",i.form)},directives:[r.O5,p.JL,p.sg,d.hgI,d.j_n,p.JJ,p.u,d.A4p,r.sg,d.rLF,d.CfE],encapsulation:2,changeDetection:0}),n})();function Ra(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Na(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Aa(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}let In=(()=>{class n{constructor(t,i,o,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.formReady=new e.vpe,this.form=this.formBuilder.group({type:[void 0,p.kI.required],legendPlacement:[void 0],legendFormatter:this.formBuilder.group({componentType:[void 0]})}),this.chartTypeChanged$=new ie.x,this.destroy$=new ie.x,this.legendFormatters=s.getItems(),this.form.controls.type.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(_=>this.chartTypeChanged$.next(_))}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i;t.type&&this.form.controls.type.setValue(t.type.currentValue),t.legendPlacement&&this.form.controls.legendPlacement.setValue(t.legendPlacement.currentValue),t.legendFormatter&&(null===(i=this.form.get("legendFormatter.componentType"))||void 0===i||i.setValue(t.legendFormatter.currentValue.componentType))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.chartTypeChanged$.complete()}get chartTitle(){var t;const i=null===(t=this.form.get("type"))||void 0===t?void 0:t.value,o=this.chartTypes.find(s=>s.id===i);return null==o?void 0:o.label}get legendFormatterControl(){return this.form.get("legendFormatter.componentType")}}return n.lateLoadKey="ProportionalChartOptionsEditorV2Component",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(ue.qy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-proportional-chart-options-editor-v2-component"]],inputs:{type:"type",legendPlacement:"legendPlacement",legendFormatter:"legendFormatter",chartTypes:"chartTypes",legendPlacementOptions:"legendPlacementOptions"},outputs:{formReady:"formReady"},features:[e.TTD],decls:35,vars:31,consts:function(){let a,t,i,o,s,_,f,M;return a=$localize`:␟f3ecd72a8d0f15303a8f7f61c278783962a6d00c␟4926288099895660391:Chart Options`,t=$localize`:␟f2102c0b996b067ab2a46c7743fe5931fa47f16d␟7337152278540773645:Chart Type`,i=$localize`:␟35a0bc25979ae578aea9594e8c587200628713e1␟5551943712413491013:Select chart type`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`,_=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,f=$localize`:␟7f0b920b08ab06e490eff4f718ef3fecc87a719b␟5989769742900149410:Legend format`,M=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","type",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],o,["caption",s,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],_,["formGroupName","legendFormatter"],["caption",f,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],M,[3,"displayValueContext","value"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.ALo(16,"async"),e.YNc(17,Ra,2,3,"nui-select-v2-option",11),e.qZA(),e.TgZ(18,"nui-validation-message",12),e.SDv(19,13),e.qZA()()(),e.TgZ(20,"div",8)(21,"nui-form-field",14)(22,"nui-select-v2",15),e.ALo(23,"async"),e.YNc(24,Na,2,2,"nui-select-v2-option",16),e.qZA(),e.TgZ(25,"nui-validation-message",12),e.SDv(26,17),e.qZA()()(),e.TgZ(27,"div",8),e.ynx(28,18),e.TgZ(29,"nui-form-field",19)(30,"nui-select-v2",20),e.ALo(31,"async"),e.YNc(32,Aa,2,2,"nui-select-v2-option",16),e.qZA(),e.TgZ(33,"nui-validation-message",12),e.SDv(34,21),e.qZA()(),e.BQk(),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"widget_pie-chart"))),e.xp6(6),e.Q6J("title",i.chartTitle),e.xp6(1),e.hij(" ",i.chartTitle," "),e.xp6(3),e.Q6J("control",i.form.controls.type),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(16,25,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartTypes),e.xp6(4),e.Q6J("showOptionalText",!1)("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(23,27,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendPlacementOptions),e.xp6(5),e.Q6J("showOptionalText",!1)("control",i.legendFormatterControl),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(31,29,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendFormatters))},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE,p.x0],pipes:[r.Ov,Me.F,xe.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function ya(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Ma(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function Pa(n,a){}const Da=function(){return["formReady"]};function Fa(n,a){if(1&n){const t=e.EpF();e.ynx(0,27,28),e.NdJ("output",function(o){return e.CHM(t),e.oxw(2).onFormReady(o.payload)}),e.YNc(2,Pa,0,0,"ng-template",29),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(1).attached(o)}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentId",i.getConfigurationComponent())("componentType",i.getConfigurationComponent())("properties",i.configurationComponentProperties)("outputs",e.DdM(5,Da)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function ba(n,a){if(1&n&&(e.ynx(0,23),e.TgZ(1,"nui-form-field",24)(2,"nui-select-v2",20),e.ALo(3,"async"),e.YNc(4,Ma,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(5,"nui-validation-message",12),e.SDv(6,25),e.qZA()(),e.YNc(7,Fa,3,6,"ng-container",26),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("showOptionalText",!1)("control",t.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(3,5,t.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",t.contentFormatters),e.xp6(3),e.Q6J("ngIf",!!t.getConfigurationComponent())}}function xa(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function La(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}const Ga={[De.DonutChart]:$localize`Donut`,[De.PieChart]:$localize`Pie`,[De.VerticalBarChart]:$localize`Vertical Bar`,[De.HorizontalBarChart]:$localize`Horizontal Bar`};let vn=(()=>{class n{constructor(t,i,o){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.legendPlacement=Fe.w.None,this.formReady=new e.vpe,this.chartTypeNamesMap=Ga,this.legendFormatters=[],this.contentFormatters=[],this.formatterHasConfigurationComponent=!1,this.currentConfigurationComponent="",this.chartFormatters=[],this.cachedChartOptionsViewModels=[],this.rawFormatter={componentType:"",label:$localize`Raw`,dataTypes:{value:null}}}get chartTypeSelectViewModels(){var t,i,o;return(!this.cachedChartOptionsViewModels||this.cachedChartOptionsViewModels.length!==(null===(i=null===(t=this.chartOptions)||void 0===t?void 0:t.chartTypes)||void 0===i?void 0:i.length))&&(this.cachedChartOptionsViewModels=((null===(o=this.chartOptions)||void 0===o?void 0:o.chartTypes)||[]).map(s=>({label:this.chartTypeNamesMap[s],value:s}))),this.cachedChartOptionsViewModels}get chartTitle(){return this.chartTypeNamesMap[this.form.controls.type.value]}getConfigurationComponent(){var t;return(null===(t=this.getCurrentFormatterDefinition())||void 0===t?void 0:t.configurationComponent)||""}getConfigurationComponentProperties(){this.configurationComponentProperties={contentFormatterProperties:this.contentFormatterProperties,contentFormatterDefinition:this.getCurrentFormatterDefinition(),dsOutput:this.dsOutput}}getCurrentFormatterDefinition(){var t;const i=null===(t=this.form.get("contentFormatter.componentType"))||void 0===t?void 0:t.value;return this.contentFormatters.find(o=>o.componentType===i)}ngOnInit(){this.form=this.formBuilder.group({type:[this.chartType||"",p.kI.required],legendPlacement:this.legendPlacement,legendFormatter:this.formBuilder.group({componentType:this.legendFormatterComponentType||this.rawFormatter.componentType}),contentFormatter:this.formBuilder.group({componentType:this.contentFormatterComponentType})}),this.legendFormatters=[this.rawFormatter,...this.chartOptions.legendFormatters||[]],this.contentFormatters=[...this.chartOptions.contentFormatters||[]],this.formReady.emit(this.form)}ngOnChanges(t){var i,o,s,_;t.chartType&&!t.chartType.isFirstChange()&&(null===(i=this.form.get("type"))||void 0===i||i.setValue(t.chartType.currentValue)),t.legendPlacement&&!t.legendPlacement.isFirstChange()&&(null===(o=this.form.get("legendPlacement"))||void 0===o||o.setValue(t.legendPlacement.currentValue)),t.legendFormatterComponentType&&!t.legendFormatterComponentType.isFirstChange()&&(null===(s=this.form.get("legendFormatter").get("componentType"))||void 0===s||s.setValue(this.legendFormatterComponentType)),t.contentFormatterComponentType&&!t.contentFormatterComponentType.isFirstChange()&&(null===(_=this.form.get("contentFormatter").get("componentType"))||void 0===_||_.setValue(this.contentFormatterComponentType)),this.form&&this.getConfigurationComponentProperties()}onFormReady(t){this.form.get("contentFormatter").setControl("properties",t)}}return n.lateLoadKey="ProportionalChartOptionsEditorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-proportional-chart-options-editor-component"]],inputs:{chartOptions:"chartOptions",chartType:"chartType",legendPlacement:"legendPlacement",legendFormatterComponentType:"legendFormatterComponentType",contentFormatterComponentType:"contentFormatterComponentType",contentFormatterProperties:"contentFormatterProperties",dsOutput:"dsOutput"},outputs:{formReady:"formReady"},features:[e.TTD],decls:36,vars:32,consts:function(){let a,t,i,o,s,_,f,M,x,K;return a=$localize`:␟f3ecd72a8d0f15303a8f7f61c278783962a6d00c␟4926288099895660391:Chart Options`,t=$localize`:␟f2102c0b996b067ab2a46c7743fe5931fa47f16d␟7337152278540773645:Chart Type`,i=$localize`:␟35a0bc25979ae578aea9594e8c587200628713e1␟5551943712413491013:Select chart type`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`,_=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,f=$localize`:␟7f0b920b08ab06e490eff4f718ef3fecc87a719b␟5989769742900149410:Legend format`,M=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,x=$localize`:␟7aad3a4ab45c0132aefc2da9c78cde45d3593850␟4108378864701615700:Content format`,K=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["formControlName","type","placeholder",i,3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],o,["formGroupName","contentFormatter",4,"ngIf"],["caption",s,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],_,["formGroupName","legendFormatter"],["caption",f,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],M,[3,"value"],["formGroupName","contentFormatter"],["caption",x,1,"mb-4",3,"showOptionalText","control"],K,["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output",4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.ALo(16,"async"),e.YNc(17,ya,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(18,"nui-validation-message",12),e.SDv(19,13),e.qZA()()(),e.TgZ(20,"div",8),e.YNc(21,ba,8,7,"ng-container",14),e.qZA(),e.TgZ(22,"div",8)(23,"nui-form-field",15)(24,"nui-select-v2",16),e.ALo(25,"async"),e.YNc(26,xa,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(27,"nui-validation-message",12),e.SDv(28,17),e.qZA()()(),e.ynx(29,18),e.TgZ(30,"nui-form-field",19)(31,"nui-select-v2",20),e.ALo(32,"async"),e.YNc(33,La,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(34,"nui-validation-message",12),e.SDv(35,21),e.qZA()(),e.BQk(),e.qZA()()),2&t){let o;e.Q6J("formGroup",i.form)("state",e.lcZ(1,17,e.lcZ(2,19,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,21,e.xi3(6,23,i.form,"widget_pie-chart"))),e.xp6(6),e.Q6J("title",i.chartTitle),e.xp6(1),e.hij(" ",i.chartTitle," "),e.xp6(3),e.Q6J("control",i.form.controls.type),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(16,26,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartTypeSelectViewModels),e.xp6(4),e.Q6J("ngIf","DonutChart"===(null==(o=i.form.get("type"))?null:o.value)),e.xp6(2),e.Q6J("showOptionalText",!1)("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(25,28,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartOptions.legendPlacementOptions),e.xp6(4),e.Q6J("showOptionalText",!1)("control",i.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(32,30,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendFormatters)}},directives:[Ae.J,p.JL,p.sg,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE,r.O5,p.x0,L.$,U.Pl],pipes:[r.Ov,Me.F,xe.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function wa(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("displayValueContext",t.label)("value",t.aggregatorType),e.xp6(1),e.hij(" ",t.label," ")}}function $a(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function Ua(n,a){}const En=function(){return["formReady"]};function za(n,a){if(1&n){const t=e.EpF();e.ynx(0,19,20),e.NdJ("output",function(o){return e.CHM(t),e.oxw(2).onFormReady("aggregator",o.payload)}),e.YNc(2,Ua,0,0,"ng-template",21),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(1).attached(o)}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentType",null==i.currentAggregatorDefinition?null:i.currentAggregatorDefinition.configurationComponent)("properties",i.aggregatorConfiguratorProps)("outputs",e.DdM(4,En)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function Ba(n,a){}function Wa(n,a){if(1&n){const t=e.EpF();e.ynx(0,19,20),e.NdJ("output",function(o){return e.CHM(t),e.oxw(2).onFormReady("formatter",o.payload)}),e.YNc(2,Ba,0,0,"ng-template",21),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(1).attached(o)}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentType",null==i.currentFormatterDefinition?null:i.currentFormatterDefinition.configurationComponent)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,En)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function ka(n,a){if(1&n&&(e.ynx(0,1),e.TgZ(1,"nui-widget-editor-accordion",2),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",3),e._UZ(5,"nui-icon",4),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",5)(9,"span",6),e.SDv(10,7),e.qZA(),e.TgZ(11,"div",8),e._uU(12),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"nui-form-field",11)(16,"nui-select-v2",12),e.YNc(17,wa,2,3,"nui-select-v2-option",13),e.qZA()()(),e.TgZ(18,"div",14)(19,"nui-form-field",15)(20,"nui-select-v2",16),e.YNc(21,$a,2,3,"nui-select-v2-option",13),e.qZA()()(),e.YNc(22,za,3,5,"ng-container",17),e.YNc(23,Wa,3,5,"ng-container",17),e.qZA()(),e.BQk()),2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("state",e.lcZ(2,11,e.lcZ(3,13,t.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,15,e.xi3(7,17,t.form,"customize"))),e.xp6(6),e.Q6J("title",t.subtitleText),e.xp6(1),e.hij(" ",t.subtitleText," "),e.xp6(3),e.Q6J("control",t.form.get("aggregator.aggregatorType")),e.xp6(2),e.Q6J("ngForOf",t.aggregators),e.xp6(2),e.Q6J("control",t.form.get("formatter.componentType")),e.xp6(2),e.Q6J("ngForOf",t.formatters),e.xp6(1),e.Q6J("ngIf",null==t.currentAggregatorDefinition?null:t.currentAggregatorDefinition.configurationComponent),e.xp6(1),e.Q6J("ngIf",null==t.currentFormatterDefinition?null:t.currentFormatterDefinition.configurationComponent)}}let Sn=(()=>{class n{constructor(t,i,o,s,_){this.formBuilder=t,this.changeDetector=i,this.eventBus=o,this.contentFormattersRegistry=s,this.aggregatorRegistry=_,this.formReady=new e.vpe,this.shown=!0,this.form=this.formBuilder.group({formatter:this.formBuilder.group({componentType:[void 0],properties:[]}),aggregator:this.formBuilder.group({aggregatorType:[void 0],properties:[]})}),this.dataFields=[],this.destroy$=new ie.x}ngOnInit(){this.watchFormChanges(),this.setFromRegistry(),this.eventBus.getStream(Ue.gg).pipe((0,de.R)(this.destroy$)).subscribe(t=>{var i;const o=t.payload;o&&(null===(i=o.dataFieldsConfig)||void 0===i||i.dataFields$.pipe((0,de.R)(this.destroy$)).subscribe(s=>{this.dataFields=s,this.updateAggregatorConfiguratorProps()}))}),this.formReady.emit(this.form)}ngOnChanges(t){var i,o;t.formatter&&(null===(i=this.form.get("formatter"))||void 0===i||i.patchValue(Object.assign({},t.formatter.currentValue))),t.aggregator&&(null===(o=this.form.get("aggregator"))||void 0===o||o.patchValue(Object.assign({},t.aggregator.currentValue))),t.chartType&&(this.shown=t.chartType.currentValue===De.DonutChart)}ngOnDestroy(){this.destroy$.complete()}onFormReady(t,i){this.form.get(t).setControl("properties",i)}get subtitleText(){var t,i;return`${null===(t=this.currentAggregatorDefinition)||void 0===t?void 0:t.label}, ${null===(i=this.currentFormatterDefinition)||void 0===i?void 0:i.label}`}setFromRegistry(){var t,i;this.formatters=this.contentFormattersRegistry.getItems(),this.aggregators=this.aggregatorRegistry.getItems();let o=this.formatters.find(_=>{var f;return _.componentType===(null===(f=this.formatter)||void 0===f?void 0:f.componentType)});o||(o=this.formatters[0]),null===(t=this.form.get("formatter.componentType"))||void 0===t||t.setValue(o.componentType);let s=this.aggregators.find(_=>{var f;return _.aggregatorType===(null===(f=this.aggregator)||void 0===f?void 0:f.aggregatorType)});s||(s=this.aggregators[0]),null===(i=this.form.get("aggregator.aggregatorType"))||void 0===i||i.setValue(s.aggregatorType)}watchFormChanges(){var t,i;null===(t=this.form.get("aggregator.aggregatorType"))||void 0===t||t.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(o=>{this.currentAggregatorDefinition=this.aggregators.find(s=>s.aggregatorType===o),this.updateAggregatorConfiguratorProps()}),null===(i=this.form.get("formatter.componentType"))||void 0===i||i.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(o=>{this.currentFormatterDefinition=this.formatters.find(s=>s.componentType===o),this.updateAggregatorConfiguratorProps()})}updateAggregatorConfiguratorProps(){var t,i;this.aggregatorConfiguratorProps=Object.assign(Object.assign(Object.assign({},null===(t=this.currentAggregatorDefinition)||void 0===t?void 0:t.properties),null===(i=this.aggregator)||void 0===i?void 0:i.properties),{metrics:this.dataFields})}}return n.lateLoadKey="DonutContentConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(h.nY),e.Y36(ue.UA),e.Y36(Oe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-donut-content-configuration"]],inputs:{chartType:"chartType",formatter:"formatter",aggregator:"aggregator"},outputs:{formReady:"formReady"},features:[e.TTD],decls:1,vars:1,consts:function(){let a,t,i,o,s;return a=$localize`:␟c488fe848f6a00cefad87ff595b384e4e0f7ff1d␟2010665105219070274:Donut Content Configuration`,t=$localize`:␟87181c5142c58c027d97ac0f37b9c6bb78b624cd␟6056551297792932760:Aggregate`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,o=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,s=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"donut-content-configuration__accordion-content"],["formGroupName","aggregator",1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","aggregatorType"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["formGroupName","formatter",1,"mb-4"],["caption",o,3,"control"],["placeholder",s,"formControlName","componentType"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&e.YNc(0,ka,24,20,"ng-container",0),2&t&&e.Q6J("ngIf",i.shown)},directives:[r.O5,p.JL,p.sg,Ae.J,d.oJW,p.x0,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,L.$,U.Pl],pipes:[r.Ov,Me.F,xe.d],styles:[".donut-content-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function bi(n,a){const t=n.markAsTouched;n.markAsTouched=()=>{t.apply(n,arguments),a()}}function Za(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"nui-form-field",20)(3,"nui-textbox-number",21),e.NdJ("valueChange",function(){return e.CHM(t),e.oxw(2).stub()}),e.qZA(),e.TgZ(4,"nui-validation-message",22),e.SDv(5,23),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("control",t.form.controls.width),e.xp6(2),e.Q6J("show",t.form.controls.width.invalid)}}function Va(n,a){1&n&&(e.TgZ(0,"div",19)(1,"nui-message",24),e.tHW(2,25),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function Ja(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Za,6,2,"ng-container",17),e.YNc(2,Va,4,1,"div",18),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isWidthMessageDisplayedForThisColumn()),e.xp6(1),e.Q6J("ngIf",t.isWidthMessageDisplayedForThisColumn())}}let Rn=(()=>{class n{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.isWidthMessageDisplayed=!1,this.destroy$=new ie.x,this.form=this.formBuilder.group({label:["",[p.kI.required]],isActive:!0,width:void 0}),this.form.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(o=>{var s;null===(s=this.changeFn)||void 0===s||s.call(this,o)})}registerOnChange(t){this.changeFn=t}registerOnTouched(t){}setDisabledState(t){t?this.form.disable():this.form.enable()}validate(t){return this.form.valid?null:{nestedForm:!0}}writeValue(t){this.form.patchValue({label:t.label,isActive:t.isActive,width:t.width},{emitEvent:!1}),this.changeDetector.markForCheck()}ngOnInit(){bi(this.formControl,()=>{this.form.markAllAsTouched()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}stub(){}isWidthMessageDisplayedForThisColumn(){return this.isWidthMessageDisplayed&&"number"!=typeof this.form.controls.width.value}}return n.lateLoadKey="DescriptionConfigurationV2Component",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-description-configuration-v2"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}])],decls:23,vars:17,consts:function(){let a,t,i,o,s,_,f,M;return a=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,o=$localize`:␟49e97f1ac4309fd5992a9520d74fa732c4a77481␟5413084173448405143:Show this column`,s=$localize`:␟6b3f02f1feab94e0f0a6823f49a009fa7be7dfa9␟8419094197651631948:Column width (px)`,_=$localize`:␟455a91268699c6879146b5fe44595de6628e6d32␟4319439665214681027:Auto width`,f=$localize`:␟356aa3e61db78cca0742edfab898c6bf0c8051a6␟3835988025416576743: Minimum width of the column is 62px `,M=$localize`:␟8e3d3c0a38f0221dc5901334290180f5705a0fbf␟2546138047162560558:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:All columns cannot have fixed width.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"mb-3",3,"control"],["formControlName","label"],["for","required"],i,[3,"control"],["formControlName","isActive"],o,[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",s,1,"mb-3",3,"control"],["placeholder",_,"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],f,["type","info",3,"allowDismiss"],M]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10),e._UZ(16,"nui-textbox",11),e.TgZ(17,"nui-validation-message",12),e.SDv(18,13),e.qZA()()(),e.TgZ(19,"nui-form-field",14)(20,"nui-checkbox",15),e.SDv(21,16),e.qZA()(),e.YNc(22,Ja,3,2,"ng-container",17),e.qZA()(),e.BQk()),2&t){let o;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,8,e.lcZ(3,10,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,12,e.xi3(7,14,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.form.controls.label.value),e.xp6(1),e.hij(" ",i.form.controls.label.value," "),e.xp6(3),e.Q6J("control",i.form.controls.label),e.xp6(4),e.Q6J("control",i.form.controls.isActive),e.xp6(3),e.Q6J("ngIf",null==(o=i.form.get("isActive"))?null:o.value)}},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.XHW,p.JJ,p.u,d.CfE,d.bK4,r.O5,d.I5I,d.qqZ],pipes:[r.Ov,Me.F,xe.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();var Nn=l(50793);function Ya(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function Ha(n,a){}const Ka=function(){return["formReady"]};function Qa(n,a){if(1&n){const t=e.EpF();e.ynx(0,15,16),e.NdJ("output",function(o){return e.CHM(t),e.oxw().onFormReady(o.payload)}),e.YNc(2,Ha,0,0,"ng-template",17),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(1).attached(o)}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",i.formatterConfigurator)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,Ka)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let An=(()=>{class n{constructor(t,i,o,s,_,f){var M,x,K;this.formBuilder=t,this.changeDetector=i,this.configuratorHeading=o,this.eventBus=s,this.formattersRegistryCommon=_,this.tableFormattersRegistryService=f,this._dataFields=[],this.onDestroy$=new ie.x,this.providedFormatters=[],this._formatters=[],this.propertiesFormReady=new ie.x,this.subscribeToFormattersRegistry(),this.form=this.formBuilder.group({componentType:this.formBuilder.control(null===(x=null===(M=this.providedFormatters)||void 0===M?void 0:M[0])||void 0===x?void 0:x.componentType,p.kI.required),properties:this.formBuilder.control({},()=>{var V;return(null===(V=this.propertiesForm)||void 0===V?void 0:V.invalid)?{properties:!0}:null})}),null===(K=this.form.get("componentType"))||void 0===K||K.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe(()=>this.createFormatterConfigurator()),this.form.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe(()=>{this.updateSubtitle(),this.onValueChange(),this.changeDetector.detectChanges()}),this.eventBus.subscribeUntil(Ue.PF,this.onDestroy$,V=>{const{dataFields:ce}=Jt()(V.payload.result)?V.payload:V.payload.result||{};this.dataFields=ce})}set formatters(t){!this.tableFormattersRegistryService.isEmpty||this.handleFormattersUpdate(t)}get formatters(){return this._formatters}set dataFields(t){this._dataFields=t,this.updateAvailableFormatters()}get dataFields(){return this._dataFields}get formatter(){var t;return null===(t=this.form)||void 0===t?void 0:t.value}ngOnInit(){bi(this.formControl,()=>{this.form.markAllAsTouched(),this.propertiesForm.markAllAsTouched()})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}ngOnChanges(t){}registerOnChange(t){this.changeFn=t}registerOnTouched(t){this.touchFn=t}setDisabledState(t){}writeValue(t){this.input=t,this.form.patchValue(t,{emitEvent:!1}),this.createFormatterConfigurator(),this.changeDetector.markForCheck()}validate(t){return!this.form.valid||this.propertiesForm&&!this.propertiesForm.valid?{error:"error"}:null}getSelectedFormatterDefinition(){var t,i;if(this.providedFormatters.length>0){const o=null===(t=this.form.get("componentType"))||void 0===t?void 0:t.value;return null!==(i=this.providedFormatters.find(s=>s.componentType===o))&&void 0!==i?i:null}return null}getSelectedDataField(){var t,i;const o=this.form.controls.properties;if(o&&this.dataFields&&this.dataFields.length>0){const s=null===(t=o.value.dataFieldIds)||void 0===t?void 0:t.value;return null!==(i=this.dataFields.find(_=>_.id===s))&&void 0!==i?i:null}return null}ngDoCheck(){if(!this.form||!this.propertiesForm)return;const t=this.form.controls.properties;this.propertiesForm.touched&&t.untouched&&(t.markAsTouched(),this.changeDetector.markForCheck()),this.propertiesForm.untouched&&t.touched&&(t.markAsUntouched(),this.changeDetector.markForCheck())}onFormReady(t){this.propertiesFormReady.next(),this.propertiesForm=t;const i=this.form.controls.properties;i.markAsPristine(),this.propertiesForm.valueChanges.pipe((0,de.R)(this.propertiesFormReady)).subscribe(()=>{i.setValue(this.propertiesForm.value),this.onValueChange()}),this.propertiesForm.patchValue(this.formatter.properties)}onValueChange(){var t;null===(t=this.changeFn)||void 0===t||t.call(this,this.form.value)}updateSubtitle(){var t,i;this.subtitleText=`${null===(t=this.getSelectedFormatterDefinition())||void 0===t?void 0:t.label}`,this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(`, ${null===(i=this.getSelectedDataField())||void 0===i?void 0:i.label}`))}createFormatterConfigurator(){var t,i,o,s;const _=this.providedFormatters.find(f=>{var M;return f.componentType===(null===(M=this.form.get("componentType"))||void 0===M?void 0:M.value)});this.formatterConfigurator=_?null!==(t=_.configurationComponent)&&void 0!==t?t:"ValueSelectorComponent":null,(null==_?void 0:_.componentType)!==(null===(i=this.formatter)||void 0===i?void 0:i.componentType)&&(null===(s=null===(o=this.formatter)||void 0===o?void 0:o.properties)||void 0===s?void 0:s.dataFieldIds)&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:_}}updateAvailableFormatters(){var t;if(!(null===(t=this._dataFields)||void 0===t?void 0:t.length)||!this.providedFormatters.length)return;const i={null:!0};this._dataFields.forEach(o=>i[o.dataType]=!0),this._formatters=this.providedFormatters.filter(o=>(o.dataTypes.value instanceof Array?o.dataTypes.value:[o.dataTypes.value]).some(_=>i[_])),this.form&&this.createFormatterConfigurator()}subscribeToFormattersRegistry(){this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,de.R)(this.onDestroy$)).subscribe(t=>{this.handleFormattersUpdate(t)})}handleFormattersUpdate(t){t!==this.providedFormatters&&(this.providedFormatters=(null==t?void 0:t.length)>0?t:Nn.X,this.updateAvailableFormatters())}get formattersRegistry(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}}return n.lateLoadKey="PresentationConfigurationV2Component",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(Je.p),e.Y36(h.nY),e.Y36(h.m4,8),e.Y36(ue.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-presentation-configuration-v2"]],inputs:{formatters:"formatters",dataFieldIds:"dataFieldIds",formControl:"formControl"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}],[{provide:p.gN,useExisting:p.sg}]),e.TTD],decls:20,vars:20,consts:function(){let a,t,i;return a=$localize`:␟3c991a92a6b04b4f5a42f0b72befa96a8d2e809c␟5065098939944125110:Property and formatting`,t=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10)(16,"nui-select-v2",11),e.ALo(17,"async"),e.YNc(18,Ya,2,3,"nui-select-v2-option",12),e.qZA()()(),e.YNc(19,Qa,3,5,"ng-container",13),e.qZA()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form,"customize"))),e.xp6(6),e.Q6J("title",i.subtitleText),e.xp6(1),e.hij(" ",i.subtitleText," "),e.xp6(3),e.Q6J("control",i.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(17,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.formatters),e.xp6(1),e.Q6J("ngIf",i.formatterConfigurator))},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,r.O5,L.$,U.Pl],pipes:[r.Ov,Me.F,xe.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})(),yn=(()=>{class n{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.destroy$=new ie.x,this.isWidthMessageDisplayed=!1,this.form=this.formBuilder.group({description:this.formBuilder.control({}),presentation:this.formBuilder.control({})}),this.form.valueChanges.pipe((0,de.R)(this.destroy$)).subscribe(o=>{var s;const _=Object.assign(Object.assign({id:null===(s=this.input)||void 0===s?void 0:s.id},o.description),{formatter:o.presentation});this.changeFn(_)})}ngOnInit(){bi(this.formControl,()=>{this.form.markAllAsTouched()})}registerOnChange(t){this.changeFn=t}registerOnTouched(t){}setDisabledState(t){}validate(t){return this.form.valid?null:{error:"error"}}writeValue(t){this.input=t,this.form.setValue({presentation:(null==t?void 0:t.formatter)||{},description:t},{emitEvent:!1}),this.changeDetector.markForCheck()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.lateLoadKey="TableColumnConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-column-configuration"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:p.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}])],decls:3,vars:4,consts:[[3,"formGroup"],[3,"formControl","isWidthMessageDisplayed"],[3,"formControl"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"nui-description-configuration-v2",1)(2,"nui-presentation-configuration-v2",2),e.qZA()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("formControl",i.form.controls.description)("isWidthMessageDisplayed",i.isWidthMessageDisplayed),e.xp6(1),e.Q6J("formControl",i.form.controls.presentation))},directives:[p.JL,p.sg,Rn,p.JJ,p.oH,An],encapsulation:2}),n})();var Xa=l(90377),Mn=l.n(Xa),ja=l(61874);function qa(n,a){if(1&n&&e._UZ(0,"nui-drop-area",16),2&n){const t=e.oxw(3);e.Udp("height",t.draggedItemHeight,"px")}}function el(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",17),e._UZ(2,"nui-icon",18),e.qZA(),e.BQk(),e.TgZ(3,"span",19),e.ALo(4,"nuiWidgetConfiguratorSectionHeader"),e._uU(5),e.ALo(6,"nuiWidgetConfiguratorSectionHeader"),e.qZA()),2&n){const t=e.oxw(),i=t.$implicit,o=t.index,s=e.oxw(2);e.xp6(3),e.Q6J("title",e.Dn7(4,2,null==i?null:i.value.label,o,s.columnLabel)),e.xp6(2),e.hij(" ",e.Dn7(6,6,null==i?null:i.value.label,o,s.columnLabel)," ")}}function tl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index;return e.oxw(2).removeItem(o)}),e.qZA()()}if(2&n){const t=e.oxw().index;e.xp6(1),e.MGl("id","table-widget-remove-column-btn-",t,"")}}function il(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.NdJ("cdkDragStarted",function(o){return e.CHM(t),e.oxw(2).cdkDragStarted(o)}),e.YNc(1,qa,1,2,"nui-drop-area",11),e.YNc(2,el,7,10,"ng-template",null,12,e.W1O),e.YNc(4,tl,2,1,"ng-template",null,13,e.W1O),e.TgZ(6,"nui-widget-configurator-section",14),e._UZ(7,"nui-table-column-configuration",15),e.qZA()()}if(2&n){const t=a.$implicit,i=e.MAs(3),o=e.MAs(5),s=e.oxw(2);e.xp6(6),e.Q6J("headerTextTemplate",i)("headerButtonsTemplate",o),e.xp6(1),e.Q6J("formControl",t)("isWidthMessageDisplayed",s.isWidthMessageDisplayed)}}function nl(n,a){1&n&&(e.TgZ(0,"div",22)(1,"nui-message",23)(2,"b"),e.SDv(3,24),e.qZA()()()),2&n&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function ol(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("cdkDropListDropped",function(o){return e.CHM(t),e.oxw().drop(o)}),e.TgZ(1,"div",3),e.YNc(2,il,8,4,"div",4),e.YNc(3,nl,4,1,"div",5),e.ALo(4,"async"),e.TgZ(5,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().addColumn()}),e.SDv(6,7),e.qZA(),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().onResetColumns()}),e.SDv(8,9),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngForOf",t.columnForms)("ngForTrackBy",t.trackBy),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,4,t.emptyColumns$)&&t.form.touched)}}let Pn=(()=>{class n{constructor(t,i,o,s,_,f,M){this.formBuilder=t,this.changeDetector=i,this.dialogService=o,this.pizzagnaService=s,this.dataSourceManager=_,this.tableFormatterRegistry=f,this.eventBus=M,this.columns=[],this.formReady=new e.vpe,this.dataSourceFields=[],this.isWidthMessageDisplayed=!1,this.columnLabel=$localize`Column`,this.onDestroy$=new ie.x,this.form=this.formBuilder.group({columns:this.formBuilder.array([])}),this.form.controls.columns.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe(x=>{this.isWidthMessageDisplayed=this.getWidthMessageDisplayed(x),this.changeDetector.markForCheck()}),this.eventBus.subscribeUntil(Ue.gg,this.onDestroy$,x=>{!x.payload||(this.dataSource=x.payload,this.changeDetector.markForCheck())}),this.eventBus.subscribeUntil(Ue.PF,this.onDestroy$,x=>{var K,V,ce,ge;if(null===(K=x.payload)||void 0===K?void 0:K.error)return;const{dataFields:pe}=Jt()(x.payload.result)?x.payload:x.payload.result||{};this.dataSourceFields=null!=pe?pe:[];const Ye=null===(ge=null===(ce=null===(V=this.dataSource)||void 0===V?void 0:V.features)||void 0===ce?void 0:ce.getFeatureConfig(h.ni.DisableTableColumnGeneration))||void 0===ge?void 0:ge.enabled,Ce=this.mergeColumns(this.dataSourceFields,this.getColumns());(null==Ce?void 0:Ce.length)||Ye?this.updateColumns(Ce):Ye||this.resetColumns(!1),this.changeDetector.markForCheck()}),_.error$.pipe((0,de.R)(this.onDestroy$)).subscribe(x=>{this.dataSourceError=x,this.changeDetector.markForCheck()})}get columnForms(){return this.form.controls.columns.controls}ngOnInit(){var t,i,o;if(this.formReady.emit(this.form),this.template&&!(null===(t=this.tableFormatterRegistry.getItems())||void 0===t?void 0:t.length)){const s=null===(o=null===(i=this.template)||void 0===i?void 0:i[1].properties)||void 0===o?void 0:o.formatters;this.tableFormatterRegistry.addItems(s)}}ngOnChanges(t){t.columns&&this.updateColumns(this.columns,!1)}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}getColumns(){return this.form.controls.columns.value}updateColumns(t,i=!0){const o=this.form.controls.columns;o.controls=t.map(s=>{const _=new p.NI(s);_.setParent(o);const f=o.controls.find(M=>M.value.id===s.id);return f&&(_.markAsTouched=f.markAsTouched),_}),o.updateValueAndValidity({emitEvent:i}),this.changeDetector.markForCheck()}trackBy(t,i){var o;return null===(o=null==i?void 0:i.value)||void 0===o?void 0:o.id}addColumn(){this.form.controls.columns.push(new p.NI({id:(0,d.VjN)("column"),label:"",isActive:!0,formatter:{}}))}onResetColumns(){var t;this.resetColumns(!!(null===(t=this.getColumns())||void 0===t?void 0:t.length))}resetColumns(t){const i=()=>{var o;const s=null===(o=this.dataSourceFields)||void 0===o?void 0:o.map(_=>({id:(0,d.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:_.id}}},isActive:!0,label:_.label,width:void 0,sortable:_.sortable}));this.updateColumns(s)};t?this.dialogService.confirm({title:$localize`Are you sure?`,message:$localize`Resetting the columns will revert them to their default configurations. Do you wish to proceed?`,confirmText:$localize`Reset Columns`}).result.then(s=>{s&&i()},()=>{}):i()}mergeColumns(t,i){const o=t.map(s=>s.id);return i.filter(s=>{var _,f,M,x;return!!(null===(f=null===(_=s.formatter)||void 0===_?void 0:_.properties)||void 0===f?void 0:f.dataFieldIds)&&Mn()(null===(x=null===(M=s.formatter)||void 0===M?void 0:M.properties)||void 0===x?void 0:x.dataFieldIds).some(K=>o.includes(K))})}getWidthMessageDisplayed(t){let i=0;for(const o of t)if("number"!=typeof o.width&&i++,i>1)return!1;return!0}moveItem(t,i){const o=this.form.controls.columns,s=o.at(t);o.removeAt(t),o.insert(i,s),this.changeDetector.detectChanges()}removeItem(t){this.form.controls.columns.removeAt(t),this.changeDetector.detectChanges()}drop(t){this.moveItem(t.previousIndex,t.currentIndex)}cdkDragStarted(t){this.draggedItemHeight=t.source.element.nativeElement.offsetHeight}}return n.lateLoadKey="TableColumnsConfigurationV2Component",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(d.xAy),e.Y36(le.p),e.Y36(ja.q),e.Y36(ue.C),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",componentId:"componentId",template:"template"},outputs:{formReady:"formReady"},features:[e.TTD],decls:2,vars:1,consts:function(){let a,t,i;return a=$localize`:␟5d48cb2ef826d59b1522d72e9909067bbffc0cd8␟4528805165676686479: Add new column `,t=$localize`:␟35328f1fffd2017d6248e5e862bef9e325aca7e9␟5405644315909491800: Reset columns `,i=$localize`:␟de46acf5ee4d137a30dbc57e48aef06379e6e500␟8256146955477966251:At least one column must be added.`,[[1,"nui-table-columns-configuration"],["cdkDropList","",3,"formGroup","cdkDropListDropped",4,"ngIf"],["cdkDropList","",3,"formGroup","cdkDropListDropped"],["formArrayName","columns"],["cdkDrag","","class","nui-table-columns-configuration__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],a,["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],t,["cdkDrag","",1,"nui-table-columns-configuration__node-item",3,"cdkDragStarted"],["class","nui-table-columns-configuration__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],[1,"no-margin",3,"headerTextTemplate","headerButtonsTemplate"],[3,"formControl","isWidthMessageDisplayed"],[1,"nui-table-columns-configuration__drop-area"],["cdkDragHandle","",1,"nui-table-columns-configuration__drag-handler"],["icon","drag"],[1,"nui-table-columns-configuration__header-text",3,"title"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],i]},template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ol,9,6,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!i.dataSourceError&&i.dataSourceFields.length))},directives:[r.O5,Qe.Wj,p.JL,p.sg,p.CE,r.sg,Qe.Zt,Qe.Hk,Wt,Qe.Bh,d.oJW,d.r0F,Ze,yn,p.JJ,p.oH,d.qqZ],pipes:[Ai,r.Ov],styles:[".nui-table-columns-configuration__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-table-columns-configuration__drag-handler{cursor:move;display:flex}.nui-table-columns-configuration__node-item{background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-table-columns-configuration__node-item .widget-configurator-section{margin:0}.nui-table-columns-configuration__drop-area{margin:15px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),n})();function rl(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"nui-form-field",20)(3,"nui-textbox-number",21),e.NdJ("valueChange",function(){return e.CHM(t),e.oxw(2).stub()}),e.qZA(),e.TgZ(4,"nui-validation-message",22),e.SDv(5,23),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("control",t.form.controls.width),e.xp6(2),e.Q6J("show",t.form.controls.width.invalid)}}function sl(n,a){1&n&&(e.TgZ(0,"nui-message",24),e.tHW(1,25),e._UZ(2,"b"),e.N_p(),e.qZA()),2&n&&e.Q6J("allowDismiss",!1)}function al(n,a){if(1&n&&(e.ynx(0),e.YNc(1,rl,6,2,"ng-container",17),e.YNc(2,sl,3,1,"nui-message",18),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isWidthMessageDisplayed),e.xp6(1),e.Q6J("ngIf",t.isWidthMessageDisplayed)}}let ll=(()=>{class n{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.formReady=new e.vpe,this.formDestroy=new e.vpe}ngOnInit(){var t;this.form=this.formBuilder.group({label:[this.label||null,[p.kI.required]],isActive:null===(t=this.isActive)||void 0===t||t,width:this.width||void 0}),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,s;t.label&&(null===(i=this.form)||void 0===i||i.patchValue({label:t.label.currentValue})),t.isActive&&(null===(o=this.form)||void 0===o||o.patchValue({isActive:t.isActive.currentValue})),t.width&&(null===(s=this.form)||void 0===s||s.patchValue({width:t.width.currentValue}))}stub(){}ngOnDestroy(){this.formDestroy.emit(this.form)}}return n.lateLoadKey="DescriptionConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label",isActive:"isActive",width:"width",isWidthMessageDisplayed:"isWidthMessageDisplayed"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:23,vars:17,consts:function(){let a,t,i,o,s,_,f,M;return a=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,o=$localize`:␟49e97f1ac4309fd5992a9520d74fa732c4a77481␟5413084173448405143:Show this column`,s=$localize`:␟6b3f02f1feab94e0f0a6823f49a009fa7be7dfa9␟8419094197651631948:Column width (px)`,_=$localize`:␟455a91268699c6879146b5fe44595de6628e6d32␟4319439665214681027:Auto width`,f=$localize`:␟356aa3e61db78cca0742edfab898c6bf0c8051a6␟3835988025416576743: Minimum width of the column is 62px `,M=$localize`:␟ed094d9c3b5f802e6adca32349fb4756bfad4786␟5991148749044556035:${"\ufffd#2\ufffd"}:START_BOLD_TEXT:All columns can not have fixed width.${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"mb-3",3,"control"],["formControlName","label"],["for","required"],i,[3,"control"],["formControlName","isActive"],o,[4,"ngIf"],["type","info",3,"allowDismiss",4,"ngIf"],[1,"mt-4"],["caption",s,1,"mb-3",3,"control"],["placeholder",_,"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],f,["type","info",3,"allowDismiss"],M]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10),e._UZ(16,"nui-textbox",11),e.TgZ(17,"nui-validation-message",12),e.SDv(18,13),e.qZA()()(),e.TgZ(19,"nui-form-field",14)(20,"nui-checkbox",15),e.SDv(21,16),e.qZA()(),e.YNc(22,al,3,2,"ng-container",17),e.qZA()(),e.BQk()),2&t){let o;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,8,e.lcZ(3,10,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,12,e.xi3(7,14,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.form.controls.label.value),e.xp6(1),e.hij(" ",i.form.controls.label.value," "),e.xp6(3),e.Q6J("control",i.form.controls.label),e.xp6(4),e.Q6J("control",i.form.controls.isActive),e.xp6(3),e.Q6J("ngIf",null==(o=i.form.get("isActive"))?null:o.value)}},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.XHW,p.JJ,p.u,d.CfE,d.bK4,r.O5,d.I5I,d.qqZ],pipes:[r.Ov,Me.F,xe.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})(),xi=(()=>{class n{constructor(t,i,o,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.logger=s,this.formReady=new e.vpe,this.dropdownItems={}}ngOnChanges(t){t.formatterDefinition&&(this.mapDropdownItems(),this.initForm()),t.dataFields&&this.mapDropdownItems(),t.formatter&&this.updateForm()}mapDropdownItems(){this.dataFields?this.dropdownItems=Object.keys(this.formatterDefinition.dataTypes).reduce((t,i)=>{const o=this.formatterDefinition.dataTypes[i];return t[i]=o?this.dataFields.filter(s=>"string"==typeof o?s.dataType===o:o.includes(s.dataType)):this.dataFields,t},{}):this.logger.error("There are no dataFields defined for formatter:",this.formatterDefinition)}get dataFieldIds(){return this.form.get("dataFieldIds")}initForm(){const i=Object.keys(this.formatterDefinition.dataTypes||{}).reduce((o,s)=>{var _,f,M,x;return o[s]=[null!==(x=null===(M=null===(f=null===(_=this.formatter)||void 0===_?void 0:_.properties)||void 0===f?void 0:f.dataFieldIds)||void 0===M?void 0:M[s])&&void 0!==x?x:null,p.kI.required],o},{});this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group(i)}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}updateForm(){var t;this.form.patchValue(null!==(t=this.formatter.properties)&&void 0!==t?t:{},{onlySelf:!1,emitEvent:!1})}addCustomFormControls(t){}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.sBO),e.LFG(Je.p),e.LFG(p.qu),e.LFG(d.mQy))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function dl(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function cl(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}let _l=(()=>{class n extends xi{constructor(t,i,o,s){super(t,i,o,s)}initForm(){this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group({link:[null,p.kI.required],value:[null,p.kI.required]}),targetSelf:[!1]}),this.formReady.emit(this.form)}}return n.lateLoadKey="LinkConfiguratorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(d.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-link-configurator"]],features:[e.qOj],decls:17,vars:6,consts:function(){let a,t,i,o,s;return a=$localize`:label field caption| the entity field to be selected for the
                    html label property␟0b86bb6b0b2a82f208239974d253b86395143503␟7152588193113320722:Label`,t=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,i=$localize`:url field caption| the entity field to be selected for the
                    url html property␟ab9389f13cf14de62c26ae2d6d29351d72d8ca9e␟8752860715344063998:URL`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:form field caption|switch configuring whether formatted link
                should open in new window/tab␟21e975dab4148f3f1b43017b9df1312910d25a21␟1433694158029413710:Open in the same window`,[[3,"formGroup"],["formGroupName","dataFieldIds"],[1,"mb-4"],["caption",a,1,"mb-3",3,"control"],["formControlName","value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],t,["caption",i,1,"mb-3",3,"control"],["formControlName","link"],o,["caption",s,1,"mb-3",3,"control"],["id","nui-switch-target","formControlName","targetSelf"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"nui-form-field",3)(4,"nui-select-v2",4),e.YNc(5,dl,2,2,"nui-select-v2-option",5),e.qZA(),e.TgZ(6,"nui-validation-message",6),e.SDv(7,7),e.qZA()()(),e.TgZ(8,"div")(9,"nui-form-field",8)(10,"nui-select-v2",9),e.YNc(11,cl,2,2,"nui-select-v2-option",5),e.qZA(),e.TgZ(12,"nui-validation-message",6),e.SDv(13,10),e.qZA()()()(),e.TgZ(14,"div")(15,"nui-form-field",11),e._UZ(16,"nui-switch",12),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.dataFieldIds.controls.value),e.xp6(2),e.Q6J("ngForOf",i.dropdownItems.value),e.xp6(4),e.Q6J("control",i.dataFieldIds.controls.link),e.xp6(2),e.Q6J("ngForOf",i.dropdownItems.link),e.xp6(4),e.Q6J("control",i.form.controls.targetSelf))},directives:[p.JL,p.sg,p.x0,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE,d.qUD],encapsulation:2}),n})();function ul(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",8),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function pl(n,a){if(1&n&&(e.TgZ(0,"div",1)(1,"div",2)(2,"nui-form-field",3)(3,"nui-select-v2",4),e.ALo(4,"async"),e.YNc(5,ul,2,3,"nui-select-v2-option",5),e.qZA(),e.TgZ(6,"nui-validation-message",6),e.SDv(7,7),e.qZA()()()()),2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.dataFieldIds.controls.value),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(4,4,t.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",t.dropdownItems.value)}}let gl=(()=>{class n extends xi{constructor(t,i,o,s){super(t,i,o,s)}}return n.lateLoadKey="ValueSelectorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(d.mQy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-value-selector"]],features:[e.qOj],decls:1,vars:1,consts:function(){let a,t,i;return a=$localize`:␟5049e204c14c648691ac775a64fb504467aeb549␟6555318547274416232:Value`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["formGroupName","dataFieldIds"],["caption",a,1,"mb-3",3,"control"],["formControlName","value","placeholder",t,3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,pl,8,6,"div",0),2&t&&e.Q6J("ngIf",i.form)},directives:[r.O5,p.JL,p.sg,p.x0,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.CfE],pipes:[r.Ov],encapsulation:2}),n})();var hl=l(27501),ml=l.n(hl);function fl(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function Tl(n,a){}const Cl=function(){return["formReady"]};function Ol(n,a){if(1&n){const t=e.EpF();e.ynx(0,15,16),e.NdJ("output",function(o){return e.CHM(t),e.oxw().onFormReady(o.payload)}),e.YNc(2,Tl,0,0,"ng-template",17),e.NdJ("attached",function(o){return e.CHM(t),e.MAs(1).attached(o)}),e.BQk()}if(2&n){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",i.formatterConfigurator)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,Cl)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let Dn=(()=>{class n{constructor(t,i,o,s,_){this.formBuilder=t,this.changeDetector=i,this.configuratorHeading=o,this.formattersRegistryCommon=s,this.tableFormattersRegistryService=_,this._providedFormatters=[],this._formatters=[],this._dataFields=[],this.formReady=new e.vpe,this.formDestroy=new e.vpe,this.formatterForm=this.formBuilder.group({}),this.formatterFormGroupName="formatter",this.onDestroy$=new ie.x,this.subscribeToFormattersRegistry()}set formatters(t){!this.tableFormattersRegistryService.isEmpty||this.handleFormattersUpdate(t)}get formatters(){return this._formatters}set dataFields(t){this._dataFields=t,this.updateAvailableFormatters()}get dataFields(){return this._dataFields}ngOnInit(){var t;this.formatterForm=this.formBuilder.group({componentType:[this.formatter&&this.formatter.componentType||this._providedFormatters&&this._providedFormatters.length>0&&this._providedFormatters[0].componentType,[p.kI.required]]}),this.form=this.formBuilder.group({[this.formatterFormGroupName]:this.formatterForm}),null===(t=this.formatterForm.get("componentType"))||void 0===t||t.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe(()=>this.createFormatterConfigurator()),this.createFormatterConfigurator(),this.formReady.emit(this.form),this.formatterForm.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe(()=>{this.updateSubtitle(),this.changeDetector.detectChanges()})}ngAfterViewInit(){}ngOnChanges(t){var i;if(t.dataFieldIds){const{currentValue:o,previousValue:s}=t.dataFieldIds;if(o&&o!==s){const _=o.map(f=>({id:f,label:ml()(f)}));this.dataFields=_,this.updateSubtitle()}}t.formatter&&(null===(i=this.form)||void 0===i||i.patchValue({[this.formatterFormGroupName]:t.formatter.currentValue},{emitEvent:!1}),this.updateSubtitle()),t.dataFields&&0===t.dataFields.previousValue.length&&this.formatterForm&&this.updateSubtitle()}getSelectedFormatterDefinition(){var t,i;if(this._providedFormatters.length>0){const o=null===(t=this.formatterForm.get("componentType"))||void 0===t?void 0:t.value;return null!==(i=this._providedFormatters.find(s=>s.componentType===o))&&void 0!==i?i:null}return null}getSelectedDataField(){var t,i;const o=this.formatterForm.controls.properties;if(o&&this.dataFields&&this.dataFields.length>0){const s=null===(t=o.get("dataFieldIds"))||void 0===t?void 0:t.value.value;return null!==(i=this.dataFields.find(_=>_.id===s))&&void 0!==i?i:null}return null}onFormReady(t){this.form.get(this.formatterFormGroupName).setControl("properties",t)}updateSubtitle(){var t,i;this.subtitleText=`${null===(t=this.getSelectedFormatterDefinition())||void 0===t?void 0:t.label}`,this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(`, ${null===(i=this.getSelectedDataField())||void 0===i?void 0:i.label}`))}createFormatterConfigurator(){var t,i,o,s;const _=this._providedFormatters.find(f=>{var M;return f.componentType===(null===(M=this.formatterForm.get("componentType"))||void 0===M?void 0:M.value)});this.formatterConfigurator=_?null!==(t=_.configurationComponent)&&void 0!==t?t:"ValueSelectorComponent":null,(null==_?void 0:_.componentType)!==(null===(i=this.formatter)||void 0===i?void 0:i.componentType)&&(null===(s=null===(o=this.formatter)||void 0===o?void 0:o.properties)||void 0===s?void 0:s.dataFieldIds)&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:_}}updateAvailableFormatters(){if(!this._dataFields.length||!this._providedFormatters.length)return;const t={null:!0};this._dataFields.forEach(i=>t[i.dataType]=!0),this._formatters=this._providedFormatters.filter(i=>(i.dataTypes.value instanceof Array?i.dataTypes.value:[i.dataTypes.value]).some(s=>t[s])),this.formatterForm&&this.createFormatterConfigurator()}subscribeToFormattersRegistry(){this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,it.b)(this.handleFormattersUpdate.bind(this)),(0,de.R)(this.onDestroy$)).subscribe()}handleFormattersUpdate(t){t!==this._providedFormatters&&(this._providedFormatters=t,this.updateAvailableFormatters())}get formattersRegistry(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}ngOnDestroy(){this.formDestroy.emit(this.form),this.onDestroy$.next(),this.onDestroy$.complete()}}return n.lateLoadKey="PresentationConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(Je.p),e.Y36(h.m4,8),e.Y36(ue.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-column-presentation-configuration"]],inputs:{formatter:"formatter",formatters:"formatters",dataFieldIds:"dataFieldIds",dataFields:"dataFields"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e._Bn([],[{provide:p.gN,useExisting:p.sg}]),e.TTD],decls:20,vars:20,consts:function(){let a,t,i;return a=$localize`:␟3c991a92a6b04b4f5a42f0b72befa96a8d2e809c␟5065098939944125110:Property and formatting`,t=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10)(16,"nui-select-v2",11),e.ALo(17,"async"),e.YNc(18,fl,2,3,"nui-select-v2-option",12),e.qZA()()(),e.YNc(19,Ol,3,5,"ng-container",13),e.qZA()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.formatterForm),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form,"customize"))),e.xp6(6),e.Q6J("title",i.subtitleText),e.xp6(1),e.hij(" ",i.subtitleText," "),e.xp6(3),e.Q6J("control",i.formatterForm.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(17,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.formatters),e.xp6(1),e.Q6J("ngIf",i.formatterConfigurator))},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,r.O5,L.$,U.Pl],pipes:[r.Ov,Me.F,xe.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function Il(n,a){1&n&&(e.TgZ(0,"div",6)(1,"nui-message",7),e.tHW(2,8),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("allowDismiss",!1))}let vl=(()=>{class n{constructor(t,i,o,s,_){this.formBuilder=t,this.changeDetector=i,this.dialogService=o,this.pizzagnaService=s,this.eventBus=_,this.columns=[],this.formatters=[],this.dataFields=[],this.formReady=new e.vpe,this.onDestroy$=new ie.x,this.lastValidDataFields=[],this.eventBus.subscribeUntil(Ue.gg,this.onDestroy$,f=>{!f.payload||(this.dataSource=f.payload)}),this.eventBus.subscribeUntil(Ue.PF,this.onDestroy$,f=>{var M;const{dataFields:x}=Jt()(f.payload.result)?f.payload:f.payload.result||{};if(x){let K=this.pizzagnaService.pizzagna;K=(0,d.zdu)(K,`${h.xW.Data}.columns.properties.dataFields`,x);const ce=(null===(M=this.pizzagnaService.pizzagna[h.xW.Structure].columns.properties)||void 0===M?void 0:M.template).findIndex(Ce=>"presentation"===Ce.id);K=(0,d.zdu)(K,`${h.xW.Structure}.columns.properties.template[${ce}].properties.dataFields`,x),K=$t()(this.pizzagnaService.pizzagna,`${h.xW.Data}.columns.properties.columns`).map(Ce=>Ce.id).reduce((Ce,Ge)=>(0,d.zdu)(Ce,`${h.xW.Data}.${Ge}/presentation.properties.dataFields`,x),K),this.pizzagnaService.updatePizzagna(K),this.eventBus.getStream(T.M).next({payload:{path:"",value:K}})}})}ngOnInit(){}ngOnChanges(t){var i,o,s;if(t.dataFields&&t.dataFields.currentValue){this.lastValidDataFields=t.dataFields.currentValue;const _=null===(s=null===(o=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===o?void 0:o.getFeatureConfig(h.ni.DisableTableColumnGeneration))||void 0===s?void 0:s.enabled,f=this.mergeColumns(t.dataFields.currentValue,this.columns);(null==f?void 0:f.length)||_?this.onItemsChange(f):_||this.resetColumns(!1),setTimeout(()=>this.changeDetector.markForCheck())}if(t.columns){const _=this.columns.map(f=>({id:f.id,children:{[`${f.id}/description`]:Object.assign({},f),[`${f.id}/presentation`]:Object.assign({},f)}}));this.pizzagnaService.createComponentsFromTemplateWithProperties("columns",_),setTimeout(()=>{var f,M,x;null===(f=this.form.get("columns"))||void 0===f||f.setValue([...null!==(x=null===(M=this.form.get("columns"))||void 0===M?void 0:M.value)&&void 0!==x?x:[]])})}}onFormReady(t){var i;this.form=this.formBuilder.group({columns:t,columnsOutput:{}}),this.emptyColumns$=this.form.valueChanges.pipe((0,ft.U)(o=>0===o.columns.length)),this.formReady.emit(this.form),null===(i=this.form.get("columns"))||void 0===i||i.valueChanges.subscribe(o=>{var s;const _=o.map(f=>{var M,x;let K={id:f.id};for(const V of Object.keys(f.properties))K=Object.assign(Object.assign({},K),f.properties[V]);return K.sortable=null===(x=null===(M=this.lastValidDataFields)||void 0===M?void 0:M.find(V=>{var ce,ge,pe;return V.id===(null===(pe=null===(ge=null===(ce=K.formatter)||void 0===ce?void 0:ce.properties)||void 0===ge?void 0:ge.dataFieldIds)||void 0===pe?void 0:pe.value)}))||void 0===x?void 0:x.sortable,K});null===(s=this.form.get("columnsOutput"))||void 0===s||s.setValue(_)})}onItemsChange(t){const o=t.map(_=>_.id);this.pizzagnaService.createComponentsFromTemplate("columns",o),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["columns"]},t)}addColumn(){this.onItemsChange([...this.columns,{id:(0,d.VjN)("column"),label:"",formatter:void 0}])}onResetColumns(){var t;this.resetColumns(!!(null===(t=this.columns)||void 0===t?void 0:t.length))}resetColumns(t){const i=()=>{const o=this.lastValidDataFields.map(s=>({id:(0,d.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:s.id}}},isActive:!0,label:s.label,width:void 0,sortable:s.sortable}));this.onItemsChange(o)};t?this.dialogService.confirm({title:$localize`Are you sure?`,message:$localize`Resetting the columns will revert them to their default configurations. Do you wish to proceed?`,confirmText:$localize`Reset Columns`}).result.then(s=>{s&&i()},()=>{}):i()}mergeColumns(t,i){const o=t.map(s=>s.id);return i.filter(s=>{var _,f,M,x;return!!(null===(f=null===(_=s.formatter)||void 0===_?void 0:_.properties)||void 0===f?void 0:f.dataFieldIds)&&Mn()(null===(x=null===(M=s.formatter)||void 0===M?void 0:M.properties)||void 0===x?void 0:x.dataFieldIds).some(K=>o.includes(K))})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return n.lateLoadKey="TableColumnsConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(d.xAy),e.Y36(le.p),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",formatters:"formatters",componentId:"componentId",dataFields:"dataFields",nodes:"nodes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:7,vars:5,consts:function(){let a,t,i,o;return a=$localize`:␟e3c2715ed7f11ed4ac89f4153d8557f182a6918e␟763982378603811482:Column`,t=$localize`:␟71b3b6b8f687cdb01eafe73ac62da2e1e5b87af9␟5086057767318144098: Add new column
`,i=$localize`:␟74cee6ce69c809bb4e67d7cc9e16478a67f9e58d␟4978445162559740484: Reset columns
`,o=$localize`:␟67705586cab07e9ae4f2a9822320fa14e7fb60a7␟8157770720263764419:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one column must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[["headerPrefix",a,3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],t,["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],i,[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],o]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(s){return i.onItemsChange(s)})("formReady",function(s){return i.onFormReady(s)}),e.qZA(),e.YNc(1,Il,4,1,"div",1),e.ALo(2,"async"),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.addColumn()}),e.SDv(4,3),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.onResetColumns()}),e.SDv(6,5),e.qZA()),2&t&&(e.Q6J("items",i.columns)("nodes",i.nodes),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,i.emptyColumns$)&&i.form.touched))},directives:[Vt,r.O5,d.qqZ,d.r0F],pipes:[r.Ov],encapsulation:2,changeDetection:0}),n})();function El(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Sl(n,a){1&n&&(e.TgZ(0,"nui-message",19),e.tHW(1,20),e._UZ(2,"b"),e.N_p(),e.qZA()),2&n&&e.Q6J("allowDismiss",!1)}let Fn=(()=>{class n{constructor(t,i,o){this.formBuilder=t,this.configuratorHeading=i,this.changeDetector=o,this.columns=[],this.formReady=new e.vpe,this.sortableColumns=[],this.onDestroy$=new ie.x}ngOnInit(){this.form=this.formBuilder.group({sorterConfiguration:this.formBuilder.group({sortBy:$t()(this.sorterConfiguration,"sortBy",""),descendantSorting:$t()(this.sorterConfiguration,"descendantSorting",!1)})}),this.form.valueChanges.pipe((0,de.R)(this.onDestroy$)).subscribe(t=>{this.setAccordionSubtitleValues(t)}),this.formReady.emit(this.form)}ngOnChanges(t){var i,o,s,_;const f=null===(i=this.form.get("sorterConfiguration"))||void 0===i?void 0:i.get("sortBy"),M=null===(o=this.form.get("sorterConfiguration"))||void 0===o?void 0:o.get("descendantSorting");if(t.sorterConfiguration){const x=this.sortableColumns.find(K=>{var V;return K.id===(null===(V=this.sorterConfiguration)||void 0===V?void 0:V.sortBy)});null==f||f.setValue(null==x?void 0:x.id,{emitEvent:!1}),null==M||M.setValue(null===(s=this.sorterConfiguration)||void 0===s?void 0:s.descendantSorting,{emitEvent:!1})}if(t.columns){this.sortableColumns=this.columns.filter(K=>{var V;return!!K.formatter&&(null===(V=K.sortable)||void 0===V||V)});const x=this.sortableColumns.find(K=>{var V;return K.id===(null===(V=this.sorterConfiguration)||void 0===V?void 0:V.sortBy)});null==f||f.setValue(null==x?void 0:x.id,{emitEvent:!1}),null==M||M.setValue(null===(_=this.sorterConfiguration)||void 0===_?void 0:_.descendantSorting,{emitEvent:!1}),0===this.sortableColumns.length?(null==f||f.disable(),null==M||M.disable()):(null==f||f.enable(),null==M||M.enable())}this.changeDetector.detectChanges()}setAccordionSubtitleValues(t){var i,o;if(t.sorterConfiguration){const s=null===(i=this.columns)||void 0===i?void 0:i.find(f=>f.id===t.sorterConfiguration.sortBy);if(!s)return this.selectedSortByValue=$localize`No sorting`,this.selectedSortOrderValue="",void(null===(o=this.form.get("sorterConfiguration"))||void 0===o||o.patchValue({sortBy:"",descendantSorting:""},{emitEvent:!1}));const _=t.sorterConfiguration.descendantSorting?$localize`Descending`:$localize`Ascending`;this.selectedSortByValue=s.label,this.selectedSortOrderValue=", "+_,this.changeDetector.detectChanges()}}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return n.lateLoadKey="TableFiltersEditorComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(Je.p),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-filters-editor-component"]],inputs:{sorterConfiguration:"sorterConfiguration",columns:"columns"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:11,consts:function(){let a,t,i,o,s;return a=$localize`:␟2a63d63538326cdbebb382ee400f9c2ac4ba26eb␟2774613742044941352:Sorting`,t=$localize`:␟ec97f67072a83aaa972536b18d83179f6e4bbec9␟7699622144571229146:Sort by`,i=$localize`:␟e9d403d84c2efea04f713258598abc6dc8fab8bc␟270381191166569688:Select column`,o=$localize`:␟00c361649822cfeeb5fad8e44bf6c9b9fbcc9852␟7343210469772540594: Descending `,s=$localize`:␟73a7df661af2f227feac942adb7cec0474f2b208␟1677678378385679212:${"\ufffd#2\ufffd"}:START_BOLD_TEXT:No columns are sortable.${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["icon","widget_pie-chart",1,"align-self-start","pt-2"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"table-filters-configuration__accordion-content"],["formGroupName","sorterConfiguration",1,"d-flex","align-items-end"],["caption",t,1,"w-50",3,"control"],["placeholder",i,"formControlName","sortBy",1,"table-filters-configuration__accordion-content__sort-by-input",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],[1,"ml-2"],[3,"control"],["formControlName","descendantSorting"],o,[1,"p-5"],["type","info",3,"allowDismiss",4,"ngIf"],[3,"value"],["type","info",3,"allowDismiss"],s]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0)(1,"div",1),e._UZ(2,"nui-icon",2),e.TgZ(3,"div",3)(4,"span",4),e.SDv(5,5),e.qZA(),e.TgZ(6,"div",6),e._uU(7),e.qZA()()(),e.TgZ(8,"div",7)(9,"div",8)(10,"nui-form-field",9)(11,"nui-select-v2",10),e.ALo(12,"async"),e.YNc(13,El,2,2,"nui-select-v2-option",11),e.qZA()(),e.TgZ(14,"div",12)(15,"nui-form-field",13)(16,"nui-checkbox",14),e.SDv(17,15),e.qZA()()()()(),e.TgZ(18,"div",16),e.YNc(19,Sl,3,1,"nui-message",17),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(6),e.Q6J("title",i.selectedSortByValue+i.selectedSortOrderValue),e.xp6(1),e.AsE(" ",i.selectedSortByValue,"",i.selectedSortOrderValue," "),e.xp6(3),e.Q6J("control",i.form.controls.sortBy),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(12,9,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.sortableColumns),e.xp6(2),e.Q6J("control",i.form.controls.descendantSorting),e.xp6(4),e.Q6J("ngIf",!i.sortableColumns.length))},directives:[Ae.J,p.JL,p.sg,d.oJW,p.x0,d.hgI,d.j_n,p.JJ,p.u,r.sg,d.rLF,d.bK4,r.O5,d.qqZ],pipes:[r.Ov],styles:[".table-filters-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function Rl(n,a){1&n&&(e.TgZ(0,"div",3)(1,"nui-message",4),e.tHW(2,5),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function Nl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().addSeries()}),e.SDv(1,7),e.qZA()}}let bn=(()=>{class n{constructor(t,i,o){this.pizzagnaService=t,this.changeDetector=i,this.eventBus=o,this.series=[],this.formReady=new e.vpe,this.destroy$=new ie.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnChanges(t){t.allSeries&&!t.allSeries.isFirstChange()&&(this.createSeriesConfigComponents(this.series),setTimeout(()=>this.changeDetector.markForCheck()))}onFormReady(t){this.form=t,this.formReady.emit(t),this.emptySeries$=this.form.valueChanges.pipe((0,ft.U)(i=>0===i.length))}onItemsChange(t){this.createSeriesConfigComponents(t),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["series"]},t)}isPossibleToAddSeries(){return(this.allSeries&&this.allSeries.length)>(this.series&&this.series.length)}addSeries(){this.onItemsChange([...this.series,{id:(0,d.VjN)("series"),selectedSeriesId:null}])}createSeriesConfigComponents(t){const o=t.map(s=>s.id);this.pizzagnaService.createComponentsFromTemplate("series",o)}}return n.lateLoadKey="TimeseriesSeriesCollectionConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(le.p),e.Y36(e.sBO),e.Y36(h.nY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-timeseries-series-collection-configuration"]],inputs:{nodes:"nodes",componentId:"componentId",series:"series",availableSeries:"availableSeries",allSeries:"allSeries"},outputs:{formReady:"formReady"},features:[e.TTD],decls:4,vars:7,consts:function(){let a,t;return a=$localize`:␟46a7534407b391db85f57b5fd207e4288d7901c1␟4355007031052301783:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one series must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,t=$localize`:␟6231821a0315549db22f614abdf9b5e9b036a0ca␟8188707268253933960: Add new series
`,[[3,"items","nodes","moveButtons","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","type","button","class","ml-4 mb-4",3,"click",4,"ngIf"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],a,["nui-button","","icon","add","displayStyle","action","type","button",1,"ml-4","mb-4",3,"click"],t]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(s){return i.onItemsChange(s)})("formReady",function(s){return i.onFormReady(s)}),e.qZA(),e.YNc(1,Rl,4,1,"div",1),e.ALo(2,"async"),e.YNc(3,Nl,2,0,"button",2)),2&t&&(e.Q6J("items",i.series)("nodes",i.nodes)("moveButtons",!1),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,5,i.emptySeries$)&&i.form.touched),e.xp6(2),e.Q6J("ngIf",i.isPossibleToAddSeries()))},directives:[Vt,r.O5,d.qqZ,d.r0F],pipes:[r.Ov],encapsulation:2,changeDetection:0}),n})(),xn=(()=>{class n{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.formReady=new e.vpe,this.formDestroy=new e.vpe}ngOnInit(){this.form=this.formBuilder.group({label:[this.label,p.kI.required]}),this.formReady.emit(this.form)}ngOnChanges(t){if(t.label){const i=t.label.currentValue;i&&this.form.patchValue({label:i})}}ngOnDestroy(){this.formDestroy.emit(this.form)}}return n.lateLoadKey="TimeseriesTileDescriptionConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:20,vars:22,consts:function(){let a,t,i,o;return a=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-description-configuration__accordion-content"],["caption",t,3,"control"],["formControlName","label","placeholder",i],["for","required"],o]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.ALo(8,"async"),e.ALo(9,"nuiFormHeaderIconPipe"),e.TgZ(10,"div",4)(11,"span",5),e.SDv(12,6),e.qZA(),e.TgZ(13,"div",7),e._uU(14),e.qZA()()(),e.TgZ(15,"div",8)(16,"nui-form-field",9),e._UZ(17,"nui-textbox",10),e.TgZ(18,"nui-validation-message",11),e.SDv(19,12),e.qZA()()()(),e.BQk()),2&t){let o,s;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,7,e.lcZ(3,9,i.form.get("label")))),e.xp6(4),e.Q6J("icon",e.lcZ(6,11,e.xi3(7,13,i.form.get("label"),"edit")))("iconColor",e.lcZ(8,16,e.Dn7(9,18,i.form.get("label"),"gray",""))),e.xp6(8),e.Q6J("title",null==(o=i.form.get("label"))?null:o.value),e.xp6(1),e.hij(" ",null==(s=i.form.get("label"))?null:s.value," "),e.xp6(2),e.Q6J("control",i.form.get("label"))}},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.XHW,p.JJ,p.u,d.CfE],pipes:[r.Ov,Me.F,xe.d],styles:[".timeseries-tile-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();function Al(n,a){if(1&n&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.description," ")}}let Ln=(()=>{class n{constructor(t,i,o,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=o,this.pizzagnaService=s,this.formReady=new e.vpe,this.formDestroy=new e.vpe,this.destroy$=new ie.x}set selectedSeries(t){this._selectedSeries=t,t&&this.form.patchValue({id:t.id})}get selectedSeries(){return this._selectedSeries}ngOnInit(){this.form=this.formBuilder.group({id:[this.selectedSeriesId||null,[p.kI.required]]}),this.formReady.emit(this.form)}ngOnChanges(t){if(t.allSeries&&(this.selectedSeries=this.allSeries.find(i=>this.selectedSeriesId===i.id)),t.selectedSeriesId){if(!this.allSeries)return;this.selectedSeries=this.allSeries.find(i=>this.selectedSeriesId===i.id)}}onSelect(t){this.selectedSeriesId=t.id,this.selectedSeries=t,this.form.patchValue({id:t.id}),setTimeout(()=>{this.pizzagnaService.setProperty(`${h.xW.Data}.${this.componentId}.properties.selectedSeriesId`,t.id),this.changeDetector.markForCheck()})}ngOnDestroy(){this.formDestroy.emit(this.form),this.destroy$.next(),this.destroy$.complete()}}return n.lateLoadKey="TimeseriesTileIndicatorDataConfigurationComponent",n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Je.p),e.Y36(p.qu),e.Y36(le.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nui-timeseries-tile-indicator-data-configuration"]],inputs:{componentId:"componentId",selectedSeriesId:"selectedSeriesId",allSeries:"allSeries",availableSeries:"availableSeries"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:21,vars:23,consts:function(){let a,t,i,o;return a=$localize`:␟f39271d40a9c081425a980174610625a267d18f7␟8676967573592446270:Indicator data`,t=$localize`:␟c5efb3039d96058120ee5d8148ceeb972d8d4e1f␟3385528249572340947:Series data`,i=$localize`:␟c5efb3039d96058120ee5d8148ceeb972d8d4e1f␟3385528249572340947:Series data`,o=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],a,[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-data-configuration__accordion-content"],["caption",t,3,"control"],["placeholder",i,3,"value","popupViewportMargin","valueSelected"],[3,"value",4,"ngFor","ngForOf"],["for","required"],o,[3,"value"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.NdJ("valueSelected",function(s){return i.onSelect(s)}),e.ALo(16,"async"),e.YNc(17,Al,2,2,"nui-select-v2-option",11),e.ALo(18,"nuiAddData"),e.qZA(),e.TgZ(19,"nui-validation-message",12),e.SDv(20,13),e.qZA()()()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form.get("id")))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form.get("id"),"database"))),e.xp6(6),e.Q6J("title",null==i.selectedSeries?null:i.selectedSeries.description),e.xp6(1),e.hij(" ",null==i.selectedSeries?null:i.selectedSeries.description," "),e.xp6(2),e.Q6J("control",i.form.get("id")),e.xp6(1),e.Q6J("value",i.selectedSeries)("popupViewportMargin",e.lcZ(16,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",e.xi3(18,20,i.availableSeries,i.selectedSeries)))},directives:[p.JL,p.sg,Ae.J,d.oJW,d.hgI,d.j_n,r.sg,d.rLF,d.CfE],pipes:[r.Ov,Me.F,xe.d,yi],styles:[".timeseries-tile-data-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),n})();var yl=l(4235),Gn=(l(73193),l(42971));let Pl=(()=>{class n{static getTextColor(t){return new g.kJ9(new g.jpW([t]),{light:"white",dark:"black"}).get(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var wn=l(94526);let $n=(()=>{class n{constructor(t,i){this.configuratorService=t,this.componentPortalService=i}open(t){if(!t.portalBundle){const i={portal:this.componentPortalService.createComponentPortal(on,null),attached:o=>{o.instance.cloneSelectionComponentType=t.widgetSelectionComponentType}};t.portalBundle=i}return this.configuratorService.open(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Gn.J),e.LFG(wn.$))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Dl=l(67517);l(75675),l(41294),l(42911),l(27463),l(60167);const Un=[Yi.n,Tt,yl.P,Ft,an,Nt,Cn,Di,dn,vn,In,Fn,hn,bn,vl,Pn,yn,ln,Ii,Ki,vi,Qi,Ei.C,Zt,_l,gl,kt.s,en,Ri,Dt.a,Si,_n,gn,Ct,Ze,vs.b,on,ll,Rn,Dn,An,xn,Ln,pn,sn,Tn,mn,Sn,Ht,On];let zn=(()=>{class n{constructor(t){for(const i of Un.filter(o=>o.lateLoadKey))t.registerByLateLoadKey(i)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Ci.h))},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[Gn.J,Je.p,ps.e,Dl.s,$n,Pl,Zi,St],imports:[[C.Cl,N,p.UX,v.IX,Qe._t,U.eL,d.Gsl,Vi,d.Ts3,d.r$w,d.cnx,d.F__,d.ILf,d.YMY,d.C6o,d.Az_,d.s2z,d.qAs,d.CUE,d.LRI,d.uCA,d.Ld5,d.CND,d.a51,d.cJ5,d.gkT,d.grO,d.bGb,d.a$t,d.ZuS,d.sF0]]}),n})();l(16041),l(44994);const xl={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:Tt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]}},presentation:{id:"presentation",componentType:Ze.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:Ct.lateLoadKey,providers:{converter:{providerId:T.j4}}},dataAndCalculations:{id:"dataAndCalculations",componentType:Ze.lateLoadKey,properties:{headerText:$localize`Data and calculations`,nodes:["dataSource","grouping","entityFormatting"]}},dataSource:{id:"dataSource",componentType:Ft.lateLoadKey,properties:{dataSourceProviders:[]},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId"]}]}}}},grouping:{id:"grouping",componentType:Tn.lateLoadKey,properties:{groups:[],groupBy:[]},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:`listWidget.providers.${h.Mu.Adapter}.properties`,keys:["groupBy","drillstate","groups"]}]}}}},entityFormatting:{id:"entityFormatting",componentType:mn.lateLoadKey,properties:{mappingKeys:["icon_status","capital","name","icon","url"],dataFieldIds:{icon:"icon",status:"icon_status",detailedUrl:"capital",label:"name",url:"url"}},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:`listWidget.providers.${h.Mu.Adapter}.properties.componentsConfig.leaf.properties`,keys:["dataFieldIds"]}]}}}}}},Ot={id:"header",componentType:fi.lateLoadKey,properties:{editMode:!1}},At={id:"loading",componentType:m.N.lateLoadKey,providers:{[h.Mu.LoadingAdapter]:{providerId:T.IG}}},Xe={id:"body",componentType:mi.lateLoadKey,properties:{content:"bodyContent"}},Ll={[h.WE.Unknown]:Ke.ErrorUnknown,[h.WE.Forbidden]:Ke.ErrorForbidden,[h.WE.NotFound]:Ke.ErrorNotFound},Gl={[Ke.ErrorUnknown]:{id:Ke.ErrorUnknown,componentType:S.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`Whoops, something went wrong`,description:$localize`There was an unexpected error.`}},[Ke.ErrorForbidden]:{id:Ke.ErrorForbidden,componentType:S.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`403 - Forbidden`,description:$localize`The requested action was forbidden.`}},[Ke.ErrorNotFound]:{id:Ke.ErrorNotFound,componentType:S.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`404 - Not Found`,description:$localize`The requested resource could not be found.`}}};function It(n,a=T.Cz,t=Ll,i=Gl){return Object.assign({bodyContent:{id:"bodyContent",componentType:hi.lateLoadKey,properties:{primaryContent:n,fallbackMap:t},providers:{[h.Mu.ContentFallbackAdapter]:{providerId:a}}}},i)}const xt={providerId:T.GN};function rt(n=!1,a=0){return{providerId:T.tc,properties:{enabled:n,interval:a}}}const wl={[h.xW.Structure]:Object.assign(Object.assign(Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,properties:{nodes:["header","loading","search","body"]},providers:{[h.Mu.EventProxy]:xt}},header:Ot,loading:At,body:Object.assign(Object.assign({},Xe),{properties:Object.assign(Object.assign({},Xe.properties),{elementClass:"overflow-auto"})})},It("listWidget")),{search:{id:"search",componentType:gi.lateLoadKey}}),It("mainContent")),{mainContent:{id:"mainContent",componentType:Ee.lateLoadKey,properties:{nodes:["navigationBar","listWidget"]}},navigationBar:{id:"navigationBar",componentType:ct.lateLoadKey},listWidget:{id:"listWidget",componentType:c.lateLoadKey,providers:{},properties:{elementClass:"w-100 p-3"}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM},header:{properties:{title:$localize`Empty Custom Widget`}}}},$l={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:wl,configurator:xl},Ul={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:Tt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","customConfig"]}},presentation:{id:"presentation",componentType:Ze.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:Ct.lateLoadKey,providers:{converter:{providerId:T.j4}}},customConfig:{id:"customConfig",componentType:Ze.lateLoadKey,properties:{headerText:$localize`Custom Widget Configuration`,nodes:["embeddedContentSelection"]}},embeddedContentSelection:{id:"embeddedContentSelection",componentType:Di.lateLoadKey,properties:{messageComponent:{componentType:dn.lateLoadKey,properties:{emphasizeText:"Some content may not work as expected.",generalText:"Web pages embedded in a widget may not be able to open popup windows or may experience formatting problems.\n                                    If you supply your own HTML, dangerous content like scripts will be removed.",link:{href:"https://www.solarwinds.com/",target:"_blank",text:"Learn more about best practices for the HTML widget"},allowDismiss:!0}}},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"mainContent.properties",keys:["customEmbeddedContent","mode","messageComponent","sanitized"]}]}}}}}},zl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,providers:{[h.Mu.Refresher]:rt(),[h.Mu.EventProxy]:xt},properties:{nodes:["header","loading","body"]}},header:Ot,loading:At,body:Xe},It("mainContent")),{mainContent:{id:"mainContent",componentType:b.lateLoadKey,properties:{elementClass:"d-flex w-100 justify-content-center"}}}),[h.xW.Configuration]:{header:{properties:{title:$localize`Empty Embedded Content Widget`}}}},Bl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM}},widget:zl,configurator:Ul},Kt={id:"refresher",componentType:pn.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:`${T.XM}.providers.refresher.properties`,keys:["enabled","interval","overrideDefaultSettings"]}]}}},properties:{overrideDefaultSettings:!1}},Wl=[{componentType:Dt.a.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:Zt.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null}},{componentType:Ei.C.lateLoadKey,label:$localize`Icon`,dataTypes:{value:null}}],kl={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:Tt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","tiles"]},providers:{[h.Mu.FormattersRegistry]:{providerId:T.s6}}},presentation:{id:"presentation",componentType:Ze.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","refresher"]}},titleAndDescription:{id:"titleAndDescription",componentType:Ct.lateLoadKey,providers:{converter:{providerId:T.j4}}},refresher:Kt,tiles:{id:"tiles",componentType:Cn.lateLoadKey,properties:{template:[{id:"description",componentType:_n.lateLoadKey,properties:{configurableUnits:!0,backgroundColors:[...Pi]},providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"properties.widgetData",keys:["label","backgroundColor","units"]}]}}}},{id:"dataSource",componentType:Ft.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Nt.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"providers.dataSource",keys:["providerId","properties"]},{previewPath:"providers.adapter.properties.dataSource",keys:["properties"]}]}},[h.Mu.Broadcaster]:{providerId:T.m_,properties:{configs:[{trackOn:"component",key:"dataFieldIds",paths:["data.{parentComponentId}/formatting.properties.dataFieldIds"]}]}}}},{id:"thresholds",componentType:gn.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"providers.adapter.properties.thresholds",keys:["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"]}]}}}},{id:"backgroundColorRules",componentType:sn.lateLoadKey,properties:{backgroundColors:[...Pi]},providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"providers.kpiColorPrioritizer.properties",keys:["rules"]}]}}}},{id:"formatting",componentType:Dn.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"properties.configuration.formatters.Value",keys:["formatter"]}]}}},properties:{formatter:{componentType:Dt.a.lateLoadKey,properties:{dataFieldIds:{value:"value"}}}}}]},providers:{[h.Mu.Converter]:{providerId:T.ns}}}}},Zl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,providers:{[h.Mu.Refresher]:rt(),[h.Mu.EventProxy]:xt},properties:{nodes:["header","loading","body"]}},header:Ot,loading:At,body:Object.assign(Object.assign({},Xe),{properties:Object.assign(Object.assign({},Xe.properties),{elementClass:"overflow-hidden"})})},It("tiles",T.C)),{tiles:{id:"tiles",componentType:je.lateLoadKey,properties:{elementClass:"flex-grow-1 pt-2 px-3 pb-3 w-100",template:{componentType:j.lateLoadKey,providers:{[h.Mu.KpiColorPrioritizer]:{providerId:T.tS,properties:{}},[h.Mu.Adapter]:{providerId:T.u1,properties:{propertyPath:"widgetData"}}},properties:{elementClass:"flex-grow-1"}}}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:rt(!1,60)}},header:{properties:{title:$localize`Empty KPI Widget`}}}},Bn="tiles.properties.template[0]",Wn="tiles.properties.template[1]",Jl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:`${Wn}.componentType`,[h.AC.TileDescriptionConfigComponentType]:`${Bn}.componentType`,[h.AC.DataSourceProviders]:`${Wn}.properties.dataSourceProviders`,[h.AC.TileDescriptionBackgroundColors]:`${Bn}.properties.backgroundColors`,[h.AC.TileBackgroundColorRulesBackgroundColors]:"tiles.properties.template[3].properties.backgroundColors"}},widget:Zl,configurator:kl},Yl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM}},widget:{[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,properties:{nodes:["header","body"]}},header:Ot,body:Xe,bodyContent:{id:"bodyContent",componentType:en.lateLoadKey}},[h.xW.Configuration]:{header:{properties:{title:$localize`New Widget`}}}}},Li=(n,a)=>{const t=(null==a?void 0:a.chartSeriesDataFieldId)||"data[0]";let i=n[0];return(null==a?void 0:a.activeMetricId)&&(i=n.find(o=>o.id===(null==a?void 0:a.activeMetricId)),i||console.warn(`No metric with id: ${null==a?void 0:a.activeMetricId} found. Taking first available.`)),$t()(i,t)};Li.aggregatorType="fieldMapper";var Hl=l(7154),kn=l.n(Hl);const Qt=(n,a)=>{var t;const i=n.map(K=>K.data[0]),{activeMetricId:o,base100:s}=a||{},_=kn()(i);let f=i[0];o&&(f=null===(t=n.find(K=>K.id===o))||void 0===t?void 0:t.data[0],f||console.warn(`No metric with id: ${o} found. Taking first available.`));const M=f/_;let x=s?100*M:M;return x=Math.round(100*x)/100,x.toString()};Qt.aggregatorType="percentageAggregator";const Xt=(n,a)=>{const{activeMetricId:t}=a||{};if(t){const i=n.find(o=>o.id===t);if(i)return i.data[0]}return kn()(n.map(i=>i.data[0])).toString()};Xt.aggregatorType="sumAggregator";const Kl=[{componentType:"",label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:Ri.lateLoadKey,label:$localize`Status With Icon`,dataTypes:{value:null}},{componentType:kt.s.lateLoadKey,label:$localize`Link`,dataTypes:{value:null}}],Ql=[{componentType:Dt.a.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:Zt.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:Si.lateLoadKey,label:$localize`Percentage Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}}],Xl=[{aggregatorType:Xt.aggregatorType,label:"Sum Aggregator",fn:Xt,configurationComponent:Ht.lateLoadKey},{aggregatorType:Qt.aggregatorType,label:"Percentage Aggregator",fn:Qt,properties:{base100:!0},configurationComponent:Ht.lateLoadKey},{aggregatorType:Li.aggregatorType,label:"Field Mapper Aggregator",fn:Li,configurationComponent:On.lateLoadKey}],jl={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:Tt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]},providers:{[h.Mu.FormattersRegistry]:{providerId:T.rf}}},presentation:{id:"presentation",componentType:Ze.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor"]}},titleAndDescription:{id:"titleAndDescription",componentType:Ct.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.j4}}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:vn.lateLoadKey,properties:{chartOptions:{chartTypes:["PieChart","DonutChart","VerticalBarChart","HorizontalBarChart"],legendPlacementOptions:[{id:Fe.w.None,label:$localize`None`},{id:Fe.w.Right,label:$localize`Right`},{id:Fe.w.Bottom,label:$localize`Bottom`}],contentFormatters:[{componentType:Qi.lateLoadKey,label:$localize`Raw`},{componentType:vi.lateLoadKey,label:$localize`Sum`},{componentType:Ii.lateLoadKey,label:$localize`Percentage`,configurationComponent:"DonutContentPercentageConfigurationComponent"}],legendFormatters:[{componentType:Ri.lateLoadKey,label:$localize`Status With Icon`},{componentType:kt.s.lateLoadKey,label:$localize`Link`}]}},providers:{[h.Mu.Converter]:{providerId:T.dz}}},refresher:Kt,dataAndCalculations:{id:"dataAndCalculations",componentType:Ze.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:Ft.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Nt.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"chart.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}},[h.Mu.Broadcaster]:{providerId:T.m_,properties:{configs:[{trackOn:"component",key:"dsOutput",paths:["data.chartOptionsEditor.properties.dsOutput"]}]}}}}}},ql={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,properties:{nodes:["header","loading","body"]},providers:{[h.Mu.Refresher]:rt(),[h.Mu.EventProxy]:xt}},header:Ot,loading:At,body:Object.assign(Object.assign({},Xe),{properties:Object.assign(Object.assign({},Xe.properties),{elementClass:"overflow-auto"})})},It("chart")),{chart:{id:"chart",componentType:ii.lateLoadKey,providers:{[h.Mu.Adapter]:{providerId:T.bZ,properties:{componentId:"chart",propertyPath:"widgetData"}}},properties:{elementClass:"d-flex flex-grow-1 justify-content-center overflow-auto"}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:rt(!1,60)}},header:{properties:{title:$localize`Empty Proportional Widget`}}}},ed={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:"dataSource.componentType",[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[h.AC.Formatters]:"chartOptionsEditor.properties.chartOptions.contentFormatters"}},widget:ql,configurator:jl},td={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:Tt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","columns"]},providers:{[h.Mu.FormattersRegistry]:{providerId:T.Hp},[h.Mu.DataSourceManager]:{providerId:T.Xh}}},presentation:{id:"presentation",componentType:Ze.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","filters"]}},titleAndDescription:{id:"titleAndDescription",componentType:Ct.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.j4}}},filters:{id:"filters",componentType:Fn.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.LU}}},refresher:Kt,dataAndCalculations:{id:"dataAndCalculations",componentType:Ze.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:Ft.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:ln.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"table.providers.dataSource",keys:["providerId","properties"]},{previewPath:"table.providers.adapter.properties.dataSource",keys:["properties"]}]}}}},columns:{id:"columns",componentType:Pn.lateLoadKey,properties:{template:[{},{properties:{formatters:Nn.X}}]},providers:{[h.Mu.Converter]:{providerId:T.n5}}}}},id={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,providers:{[h.Mu.Refresher]:rt(),[h.Mu.EventProxy]:{providerId:T.GN,properties:{downstreams:[T.pV.id]}}},properties:{nodes:["header","loading","body"]}},header:Ot,loading:At,body:Object.assign(Object.assign({},Xe),{properties:Object.assign(Object.assign({},Xe.properties),{elementClass:"overflow-auto"})})},It("table")),{table:{id:"table",componentType:ri.lateLoadKey,providers:{[h.Mu.Adapter]:{providerId:T.l5,properties:{componentId:"table",dataPath:"widgetData",dataFieldsPath:"dataFields",totalItemsPath:"totalItems"}},virtualViewportManager:{providerId:T.Vx}},properties:{elementClass:"flex-grow-1 mx-3 mb-3 mt-2",delayedMousePresenceDetectionEnabled:!0,configuration:{columns:[],scrollActivationDelayMs:500,headerTooltipsEnabled:!0}}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:rt(!1,60)}},header:{properties:{title:$localize`Empty Table Widget`}}}},nd={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:"dataSource.componentType",[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[h.AC.Formatters]:"columns.properties.template[1].properties.formatters"}},widget:id,configurator:td},od={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:Tt.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","series"]}},presentation:{id:"presentation",componentType:Ze.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","timeseriesMetadata"]}},titleAndDescription:{id:"titleAndDescription",componentType:Ct.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.j4}}},timeseriesMetadata:{id:"timeseriesMetadata",componentType:hn.lateLoadKey,properties:{legendPlacements:[{id:Fe.w.None,label:$localize`None`},{id:Fe.w.Right,label:$localize`Right`},{id:Fe.w.Bottom,label:$localize`Bottom`}]},providers:{[h.Mu.Converter]:{providerId:T.dZ}}},refresher:Kt,dataAndCalculations:{id:"dataAndCalculations",componentType:Ze.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:Ft.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Nt.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}}}},series:{id:"series",componentType:bn.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.Ip}},properties:{template:[{id:"description",componentType:xn.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.Es,properties:{formParts:[{previewPath:"chart.providers.adapter.properties.series",keys:["label"]}]}}}},{id:"indicatorData",componentType:Ln.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.Gq}}}]}}}},rd={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Ee.lateLoadKey,providers:{[h.Mu.Refresher]:rt(),[h.Mu.EventProxy]:xt},properties:{nodes:["header","loading","body"]}},header:Ot,loading:At,body:Object.assign(Object.assign({},Xe),{properties:Object.assign(Object.assign({},Xe.properties),{elementClass:"overflow-auto"})})},It("mainContent")),{mainContent:{id:"mainContent",componentType:Ee.lateLoadKey,properties:{nodes:["timeframeSelection","chart"]}},timeframeSelection:{id:"timeframeSelection",componentType:ai.lateLoadKey},chart:{id:"chart",componentType:pi.lateLoadKey,properties:{elementClass:"d-flex flex-column justify-content-center h-100 overflow-auto",configuration:{preset:be.Line,scales:{y:{type:qe.Linear},x:{type:qe.Time}}}},providers:{[h.Mu.Adapter]:{providerId:T.R9,properties:{componentId:"chart",propertyPath:"widgetData",series:[]}}}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:rt(!1,60)}},header:{properties:{title:$localize`Empty Timeseries Widget`}}}},sd={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:"dataSource.componentType",[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:rd,configurator:od};var ad=l(29242);const ld=[b,j,di,m.N,ii,Ee,ci,_i,ui,li,ri,Wi.q,je,ai,pi,mi,hi,fi,S,c,vt,dt,ct,gi,Be];let dd=(()=>{class n{constructor(t,i,o,s){t.registerWidgetType("kpi",1,Jl),t.registerWidgetType("table",1,nd),t.registerWidgetType("proportional",1,ed),t.registerWidgetType("timeseries",1,sd),t.registerWidgetType("previewPlaceholder",1,Yl),t.registerWidgetType("embedded-content",1,Bl),t.registerWidgetType("drilldown",1,$l);for(const _ of ld.filter(f=>f.lateLoadKey))i.registerByLateLoadKey(_);o.registerEvent(T.RG),o.registerEvent(T.y4),o.registerEvent(T.j7),o.registerEvent(T.Ef),o.registerEvent(T.MO),o.registerEvent(T.pV),o.registerEvent(T.Xi),o.registerEvent(T.M),o.registerEvent(T.re),o.registerEvent(T.xZ),o.registerEvent(T.N9),o.registerEvent(Ue.PF),o.registerEvent(T.QD),s.addItems(Wl)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Y.x),e.LFG(Ci.h),e.LFG(ad.o),e.LFG(ue.YX))},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[wn.$,Y.x,r.JJ,ni.g],imports:[[N,v.IX,d.Gsl,d.Az_,g.$y4,zn,d.Ts3,d.sF0,d.r$w,Vi,d.cnx,d.BSv,d.hvO,d.l70,C.Cl,d.JhO,p.UX,d.ILf,d.VSN,d.a$t,d.lam,d.ZuS,d.w0o]]}),n})();var jt=(()=>((jt||(jt={})).Value="Value",jt))();function cd(n,a,t){const i=a;return t.forEach((o,s)=>{if(0===o.data.length)return;let _=-1,f=-1;const M=a[s].data;M.length>0?(_=o.data.findIndex(V=>ke()(V.x).isSame(M[0].x)),f=o.data.findIndex(V=>ke()(V.x).isSame(M[M.length-1].x))):(_=o.data.findIndex(V=>ke()(V.x).isAfter(n.startDatetime)),f=o.data.findIndex(V=>ke()(V.x).isAfter(n.endDatetime))-1);const x=ke()(n.startDatetime);(0===M.length||!x.isSame(M[0].x))&&x.isBetween(o.data[0].x,o.data[o.data.length-1].x)&&i[s].data.unshift(Object.assign(Object.assign({},o.data[_-1]),{x:n.startDatetime.toDate()}));const K=ke()(n.endDatetime);(0===M.length||!K.isSame(M[M.length-1].x))&&K.isBetween(o.data[0].x,o.data[o.data.length-1].x)&&i[s].data.push(Object.assign(Object.assign({},o.data[f]),{x:n.endDatetime.toDate()}))}),i}l(97674),l(26365),l(10948),l(42296),l(50271),l(38046);const _d={presentation:{id:"presentation",componentType:Ze.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor","donutContentConfiguration"]}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:In.lateLoadKey,properties:{chartTypes:[{id:"PieChart",label:$localize`Pie`},{id:"DonutChart",label:$localize`Donut`},{id:"VerticalBarChart",label:$localize`Vertical Bar`},{id:"HorizontalBarChart",label:$localize`Horizontal Bar`}],legendPlacementOptions:[{id:Fe.w.None,label:$localize`None`},{id:Fe.w.Right,label:$localize`Right`},{id:Fe.w.Bottom,label:$localize`Bottom`}]},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions",keys:["type","legendPlacement","legendFormatter"]}]}},[h.Mu.Broadcaster]:{providerId:T.m_,properties:{configs:[{trackOn:"component",key:"chartTypeChanged$",paths:["data.donutContentConfiguration.properties.chartType"]}]}}}},donutContentConfiguration:{id:"donutContentConfiguration",componentType:Sn.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions.donutContentConfig",keys:["formatter","aggregator"]}]}}}}}},84493:ne=>{ne.exports=function B(l,r){for(var d,O=-1,e=l.length;++O<e;){var S=r(l[O]);void 0!==S&&(d=void 0===d?S:d+S)}return d}},94133:(ne,B,l)=>{var r=l(42664),d=l(50686),O=l(80707);ne.exports=function e(S,R,N){var C=S.length;if(C<2)return C?O(S[0]):[];for(var p=-1,v=Array(C);++p<C;)for(var g=S[p],G=-1;++G<C;)G!=p&&(v[p]=r(v[p]||g,S[G],R,N));return O(d(v,1),R,N)}},38645:ne=>{ne.exports=function B(l,r,d){for(var O=-1,e=l.length,S=r.length,R={};++O<e;)d(R,l[O],O<S?r[O]:void 0);return R}},18680:(ne,B,l)=>{var r=l(42664),d=l(50686),O=l(23269),e=l(21330),S=O(function(R,N){return e(R)?r(R,d(N,1,e,!0)):[]});ne.exports=S},7154:(ne,B,l)=>{var r=l(84493),d=l(32608);ne.exports=function O(e){return e&&e.length?r(e,d):0}},10912:(ne,B,l)=>{var r=l(96517),d=l(84493);ne.exports=function O(e,S){return e&&e.length?d(e,r(S,2)):0}},68921:(ne,B,l)=>{var r=l(50686),d=l(23269),O=l(80707),e=l(21330),S=d(function(R){return O(r(R,1,e,!0))});ne.exports=S},19574:(ne,B,l)=>{var r=l(69779),d=l(23269),O=l(94133),e=l(21330),S=d(function(R){return O(r(R,e))});ne.exports=S},21617:(ne,B,l)=>{var r=l(89719),d=l(38645);ne.exports=function O(e,S){return d(e||[],S||[],r)}},33748:(ne,B,l)=>{"use strict";l.d(B,{IM:()=>wt,IX:()=>Ne,KY:()=>T,RU:()=>h,sm:()=>te,tQ:()=>D});var r=l(5e3),d=l(77579),O=l(78372),e=l(82722),S=l(63900),R=l(5963),N=l(69808);function C(H,u){if(1&H&&r._UZ(0,"div",3),2&H){const c=u.index,m=r.oxw();r.Q6J("ngStyle",m.gridRenderer.getGridColumnStyle(c))}}function p(H,u){if(1&H&&r._UZ(0,"div",4),2&H){const c=u.index,m=r.oxw();r.Q6J("ngStyle",m.gridRenderer.getGridRowStyle(c))}}const v=["*"];function g(H,u){if(1&H){const c=r.EpF();r.TgZ(0,"div",8),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function G(H,u){if(1&H){const c=r.EpF();r.TgZ(0,"div",9),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function y(H,u){if(1&H){const c=r.EpF();r.TgZ(0,"div",10),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function F(H,u){if(1&H){const c=r.EpF();r.TgZ(0,"div",11),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function w(H,u){if(1&H){const c=r.EpF();r.TgZ(0,"div",12),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function b(H,u){if(1&H){const c=r.EpF();r.TgZ(0,"div",13),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function A(H,u){if(1&H){const c=r.EpF();r.TgZ(0,"div",14),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function W(H,u){if(1&H){const c=r.EpF();r.TgZ(0,"div",15),r.NdJ("mousedown",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(c),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}var D=(()=>{return(H=D||(D={})).Fit="fit",H.ScrollVertical="scrollVertical",H.ScrollHorizontal="scrollHorizontal",H.Fixed="fixed",H.VerticalFixed="verticalFixed",H.HorizontalFixed="horizontalFixed",D;var H})(),T=(()=>{return(H=T||(T={})).Always="always",H.OnDragAndResize="onDrag&Resize",H.None="none",T;var H})(),h=(()=>{return(H=h||(h={})).None="none",H.CompactUp="compactUp",H.CompactLeft="compactLeft",H.CompactUpAndLeft="compactUp&Left",H.CompactLeftAndUp="compactLeft&Up",H.CompactRight="compactRight",H.CompactUpAndRight="compactUp&Right",H.CompactRightAndUp="compactRight&Up",H.CompactDown="compactDown",H.CompactDownAndLeft="compactDown&Left",H.CompactLeftAndDown="compactLeft&Down",H.CompactDownAndRight="compactDown&Right",H.CompactRightAndDown="compactRight&Down",h;var H})(),L=(()=>{return(H=L||(L={})).LTR="ltr",H.RTL="rtl",L;var H})();class U{constructor(u){this.gridster=u}destroy(){this.gridster=null}checkCompact(){this.gridster.$options.compactType!==h.None&&(this.gridster.$options.compactType===h.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===h.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===h.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===h.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===h.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===h.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===h.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===h.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===h.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===h.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===h.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===h.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(u){this.gridster.$options.compactType!==h.None&&(this.gridster.$options.compactType===h.CompactUp?this.moveTillCollision(u,"y",-1):this.gridster.$options.compactType===h.CompactLeft?this.moveTillCollision(u,"x",-1):this.gridster.$options.compactType===h.CompactUpAndLeft?(this.moveTillCollision(u,"y",-1),this.moveTillCollision(u,"x",-1)):this.gridster.$options.compactType===h.CompactLeftAndUp?(this.moveTillCollision(u,"x",-1),this.moveTillCollision(u,"y",-1)):this.gridster.$options.compactType===h.CompactUpAndRight?(this.moveTillCollision(u,"y",-1),this.moveTillCollision(u,"x",1)):this.gridster.$options.compactType===h.CompactDown?this.moveTillCollision(u,"y",1):this.gridster.$options.compactType===h.CompactDownAndLeft?(this.moveTillCollision(u,"y",1),this.moveTillCollision(u,"x",-1)):this.gridster.$options.compactType===h.CompactLeftAndDown?(this.moveTillCollision(u,"x",-1),this.moveTillCollision(u,"y",1)):this.gridster.$options.compactType===h.CompactDownAndRight?(this.moveTillCollision(u,"y",1),this.moveTillCollision(u,"x",1)):this.gridster.$options.compactType===h.CompactRightAndDown&&(this.moveTillCollision(u,"x",1),this.moveTillCollision(u,"y",1)))}checkCompactMovement(u,c){let m=!1;this.gridster.grid.forEach(E=>{!1!==E.$item.compactEnabled&&this.moveTillCollision(E.$item,u,c)&&(m=!0,E.item[u]=E.$item[u],E.itemChanged())}),m&&this.checkCompact()}moveTillCollision(u,c,m){return u[c]+=m,this.gridster.checkCollision(u)?(u[c]-=m,!1):(this.moveTillCollision(u,c,m),!0)}}const X={gridType:D.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:h.None,mobileBreakpoint:640,useBodyForBreakpoint:!1,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:T.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,enableBoundaryControl:!1,disableAutoPositionOnConflict:!1,dirType:L.LTR};class q{static merge(u,c,m){for(const E in c)void 0!==c[E]&&m.hasOwnProperty(E)&&(u[E]="object"==typeof c[E]?q.merge(u[E],c[E],m[E]):c[E]);return u}static checkTouchEvent(u){void 0===u.clientX&&u.touches&&(u.touches&&u.touches.length?(u.clientX=u.touches[0].clientX,u.clientY=u.touches[0].clientY):u.changedTouches&&u.changedTouches.length&&(u.clientX=u.changedTouches[0].clientX,u.clientY=u.changedTouches[0].clientY))}static checkContentClassForEvent(u,c){if(u.$options.draggable.ignoreContent){if(!q.checkDragHandleClass(c.target,c.currentTarget,u.$options.draggable.dragHandleClass,u.$options.draggable.ignoreContentClass))return!0}else if(q.checkContentClass(c.target,c.currentTarget,u.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(u,c){return q.checkContentClass(c.target,c.currentTarget,u.$options.draggable.ignoreContentClass)||q.checkContentClass(c.target,c.currentTarget,u.$options.draggable.dragHandleClass)}static checkDragHandleClass(u,c,m,E){if(!u||u===c)return!1;if(u.hasAttribute("class")){const k=u.getAttribute("class").split(" ");if(k.indexOf(m)>-1)return!0;if(k.indexOf(E)>-1)return!1}return q.checkDragHandleClass(u.parentNode,c,m,E)}static checkContentClass(u,c,m){return!(!u||u===c)&&(!!(u.hasAttribute("class")&&u.getAttribute("class").split(" ").indexOf(m)>-1)||q.checkContentClass(u.parentNode,c,m))}static compareItems(u,c){return u.y>c.y?-1:u.y<c.y?1:u.x>c.x?-1:1}}class oe{constructor(u){this.gridster=u,this.emptyCellClickCb=c=>{if(!this.gridster||this.gridster.movingItem||q.checkContentClassForEmptyCellClickEvent(this.gridster,c))return;const m=this.getValidItemFromEvent(c);!m||(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(c,m),this.gridster.cdRef.markForCheck())},this.emptyCellContextMenuCb=c=>{if(this.gridster.movingItem||q.checkContentClassForEmptyCellClickEvent(this.gridster,c))return;c.preventDefault(),c.stopPropagation();const m=this.getValidItemFromEvent(c);!m||(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(c,m),this.gridster.cdRef.markForCheck())},this.emptyCellDragDrop=c=>{const m=this.getValidItemFromEvent(c);!m||(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(c,m),this.gridster.cdRef.markForCheck())},this.emptyCellDragOver=c=>{c.preventDefault(),c.stopPropagation();const m=this.getValidItemFromEvent(c);m?(c.dataTransfer&&(c.dataTransfer.dropEffect="move"),this.gridster.movingItem=m):(c.dataTransfer&&(c.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()},this.emptyCellMouseDown=c=>{if(q.checkContentClassForEmptyCellClickEvent(this.gridster,c))return;c.preventDefault(),c.stopPropagation();const m=this.getValidItemFromEvent(c);!m||1!==c.buttons&&!(c instanceof TouchEvent)||(this.initialItem=m,this.gridster.movingItem=m,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.removeWindowMousemoveListenerFn=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove),this.removeWindowTouchmoveListenerFn=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove)}),this.removeWindowMouseupListenerFn=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp),this.removeWindowTouchendListenerFn=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp))},this.emptyCellMouseMove=c=>{c.preventDefault(),c.stopPropagation();const m=this.getValidItemFromEvent(c,this.initialItem);!m||(this.gridster.movingItem=m,this.gridster.previewStyle())},this.emptyCellMouseUp=c=>{this.removeWindowMousemoveListenerFn(),this.removeWindowTouchmoveListenerFn(),this.removeWindowMouseupListenerFn(),this.removeWindowTouchendListenerFn();const m=this.getValidItemFromEvent(c,this.initialItem);m&&(this.gridster.movingItem=m),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(c,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()}}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),this.gridster.movingItem=null,this.initialItem=this.gridster=null,this.removeDocumentDragendListenerFn&&(this.removeDocumentDragendListenerFn(),this.removeDocumentDragendListenerFn=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.removeEmptyCellClickListenerFn&&this.gridster.options.emptyCellClickCallback?(this.removeEmptyCellClickListenerFn=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb),this.removeEmptyCellTouchendListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb)):!this.gridster.$options.enableEmptyCellClick&&this.removeEmptyCellClickListenerFn&&this.removeEmptyCellTouchendListenerFn&&(this.removeEmptyCellClickListenerFn(),this.removeEmptyCellTouchendListenerFn(),this.removeEmptyCellClickListenerFn=null,this.removeEmptyCellTouchendListenerFn=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.removeEmptyCellContextMenuListenerFn&&this.gridster.options.emptyCellContextMenuCallback?this.removeEmptyCellContextMenuListenerFn=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb):!this.gridster.$options.enableEmptyCellContextMenu&&this.removeEmptyCellContextMenuListenerFn&&(this.removeEmptyCellContextMenuListenerFn(),this.removeEmptyCellContextMenuListenerFn=null),this.gridster.$options.enableEmptyCellDrop&&!this.removeEmptyCellDropListenerFn&&this.gridster.options.emptyCellDropCallback?(this.removeEmptyCellDropListenerFn=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop),this.gridster.zone.runOutsideAngular(()=>{this.removeEmptyCellDragoverListenerFn=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver)}),this.removeDocumentDragendListenerFn=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.removeEmptyCellDropListenerFn&&this.removeEmptyCellDragoverListenerFn&&this.removeDocumentDragendListenerFn&&(this.removeEmptyCellDropListenerFn(),this.removeEmptyCellDragoverListenerFn(),this.removeDocumentDragendListenerFn(),this.removeEmptyCellDragoverListenerFn=null,this.removeEmptyCellDropListenerFn=null,this.removeDocumentDragendListenerFn=null),this.gridster.$options.enableEmptyCellDrag&&!this.removeEmptyCellMousedownListenerFn&&this.gridster.options.emptyCellDragCallback?(this.removeEmptyCellMousedownListenerFn=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown),this.removeEmptyCellTouchstartListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown)):!this.gridster.$options.enableEmptyCellDrag&&this.removeEmptyCellMousedownListenerFn&&this.removeEmptyCellTouchstartListenerFn&&(this.removeEmptyCellMousedownListenerFn(),this.removeEmptyCellTouchstartListenerFn(),this.removeEmptyCellMousedownListenerFn=null,this.removeEmptyCellTouchstartListenerFn=null)}getPixelsX(u,c){const m=this.gridster.options.scale;return m?(u.clientX-c.left)/m+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():u.clientX+this.gridster.el.scrollLeft-c.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(u,c){const m=this.gridster.options.scale;return m?(u.clientY-c.top)/m+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():u.clientY+this.gridster.el.scrollTop-c.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(u,c){u.preventDefault(),u.stopPropagation(),q.checkTouchEvent(u);const m=this.gridster.el.getBoundingClientRect(),E=this.getPixelsX(u,m),k=this.getPixelsY(u,m),Y={x:this.gridster.pixelsToPositionX(E,Math.floor,!0),y:this.gridster.pixelsToPositionY(k,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(c&&(Y.cols=Math.min(Math.abs(c.x-Y.x)+1,this.gridster.$options.emptyCellDragMaxCols),Y.rows=Math.min(Math.abs(c.y-Y.y)+1,this.gridster.$options.emptyCellDragMaxRows),c.x<Y.x?Y.x=c.x:c.x-Y.x>this.gridster.$options.emptyCellDragMaxCols-1&&(Y.x=this.gridster.movingItem?this.gridster.movingItem.x:0),c.y<Y.y?Y.y=c.y:c.y-Y.y>this.gridster.$options.emptyCellDragMaxRows-1&&(Y.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(Y))return Y}}class ae{constructor(u){this.gridster=u}destroy(){this.gridster=null}updateItem(u,c,m){if(this.gridster.mobile)this.clearCellPosition(m,u),m.setStyle(u,"height",this.gridster.$options.keepFixedHeightInMobile?(c.rows-1)*this.gridster.$options.margin+c.rows*this.gridster.$options.fixedRowHeight+"px":c.rows*this.gridster.curWidth/c.cols+"px"),m.setStyle(u,"width",this.gridster.$options.keepFixedWidthInMobile?this.gridster.$options.fixedColWidth+"px":""),m.setStyle(u,"margin-bottom",this.gridster.$options.margin+"px"),m.setStyle(u,L.LTR?"margin-right":"margin-left","");else{const E=Math.round(this.gridster.curColWidth*c.x),k=Math.round(this.gridster.curRowHeight*c.y),Y=this.gridster.curColWidth*c.cols-this.gridster.$options.margin,ue=this.gridster.curRowHeight*c.rows-this.gridster.$options.margin;this.setCellPosition(m,u,E,k),m.setStyle(u,"width",Y+"px"),m.setStyle(u,"height",ue+"px");let Te=null,me=null;this.gridster.$options.outerMargin&&(this.gridster.rows===c.rows+c.y&&(Te=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===c.cols+c.x&&(me=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),m.setStyle(u,"margin-bottom",Te),m.setStyle(u,L.LTR?"margin-right":"margin-left",me)}}updateGridster(){let u="",c="",m="",E="";if(this.gridster.$options.gridType===D.Fit)u=D.Fit,c=D.ScrollVertical,m=D.ScrollHorizontal,E=D.Fixed;else if(this.gridster.$options.gridType===D.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,u=D.ScrollVertical,c=D.Fit,m=D.ScrollHorizontal,E=D.Fixed;else if(this.gridster.$options.gridType===D.ScrollHorizontal){const k=this.gridster.$options.rowHeightRatio;this.gridster.curColWidth=this.gridster.curRowHeight*(k>=1?k:k+1),u=D.ScrollHorizontal,c=D.Fit,m=D.ScrollVertical,E=D.Fixed}else this.gridster.$options.gridType===D.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),u=D.Fixed,c=D.Fit,m=D.ScrollVertical,E=D.ScrollHorizontal):this.gridster.$options.gridType===D.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),u=D.ScrollVertical,c=D.Fit,m=D.ScrollHorizontal,E=D.Fixed):this.gridster.$options.gridType===D.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),u=D.ScrollHorizontal,c=D.Fit,m=D.ScrollVertical,E=D.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==D.Fit?this.gridster.renderer.removeClass(this.gridster.el,u):this.gridster.renderer.addClass(this.gridster.el,u),this.gridster.renderer.removeClass(this.gridster.el,c),this.gridster.renderer.removeClass(this.gridster.el,m),this.gridster.renderer.removeClass(this.gridster.el,E)}getGridColumnStyle(u){return Object.assign(Object.assign({},this.getLeftPosition(this.gridster.curColWidth*u)),{width:this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}getGridRowStyle(u){return Object.assign(Object.assign({},this.getTopPosition(this.gridster.curRowHeight*u)),{width:this.gridster.gridColumns.length*this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}getLeftPosition(u){const c=this.gridster.$options.dirType===L.RTL?-u:u;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+c+"px)"}:{left:this.getLeftMargin()+c+"px"}}getTopPosition(u){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+u+"px)"}:{top:this.getTopMargin()+u+"px"}}clearCellPosition(u,c){this.gridster.$options.useTransformPositioning?u.setStyle(c,"transform",""):(u.setStyle(c,"top",""),u.setStyle(c,"left",""))}setCellPosition(u,c,m,E){const k=this.gridster.$options.dirType===L.RTL?-m:m;this.gridster.$options.useTransformPositioning?u.setStyle(c,"transform","translate3d("+k+"px, "+E+"px, 0)"):(u.setStyle(c,"left",this.getLeftMargin()+k+"px"),u.setStyle(c,"top",this.getTopMargin()+E+"px"))}getLeftMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}let J,j,ie,fe,ve,we,ze,Ee,et,_e=(()=>{class H{constructor(c,m){this.renderer=m,this.el=c.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(c=>this.previewStyle(c))}ngOnDestroy(){this.sub.unsubscribe()}previewStyle(c){c?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,c,this.renderer)):this.renderer.setStyle(this.el,"display","")}}return H.\u0275fac=function(c){return new(c||H)(r.Y36(r.SBq),r.Y36(r.Qsj))},H.\u0275cmp=r.Xpm({type:H,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},decls:0,vars:0,template:function(c,m){},styles:["gridster-preview{position:absolute;display:none;background:rgba(0,0,0,.15)}\n"],encapsulation:2}),H})(),te=(()=>{class H{constructor(c,m,E,k){this.renderer=m,this.cdRef=E,this.zone=k,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.previewStyle$=new r.vpe,this.calculateLayout$=new d.x,this.resize$=new d.x,this.destroy$=new d.x,this.optionsChanged=()=>{this.setOptions();let ue,Y=this.grid.length-1;for(;Y>=0;Y--)ue=this.grid[Y],ue.updateOptions();this.calculateLayout()},this.onResize=()=>{this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())},this.getNextPossiblePosition=(Y,ue={})=>{-1===Y.cols&&(Y.cols=this.$options.defaultItemCols),-1===Y.rows&&(Y.rows=this.$options.defaultItemRows),this.setGridDimensions();let me,Te=ue.y||0;for(;Te<this.rows;Te++)for(Y.y=Te,me=ue.x||0;me<this.columns;me++)if(Y.x=me,!this.checkCollision(Y))return!0;const Oe=this.$options.maxRows>=this.rows+Y.rows;return this.rows<=this.columns&&Oe||!(this.$options.maxCols>=this.columns+Y.cols)?!!Oe&&(Y.y=this.rows,Y.x=0,!0):(Y.x=this.columns,Y.y=0,!0)},this.getFirstPossiblePosition=Y=>{const ue=Object.assign({},Y);return this.getNextPossiblePosition(ue),ue},this.getLastPossiblePosition=Y=>{let ue={y:0,x:0};ue=this.grid.reduce((me,Oe)=>{const Pe={y:Oe.$item.y+Oe.$item.rows-1,x:Oe.$item.x+Oe.$item.cols-1};return 1===q.compareItems(me,Pe)?Pe:me},ue);const Te=Object.assign({},Y);return this.getNextPossiblePosition(Te,ue),Te},this.el=c.nativeElement,this.$options=JSON.parse(JSON.stringify(X)),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new oe(this),this.compact=new U(this),this.gridRenderer=new ae(this)}static checkCollisionTwoItemsForSwaping(c,m){return c.x+(1===c.cols?0:1)<m.x+m.cols&&c.x+c.cols>m.x+(1===m.cols?0:1)&&c.y+(1===c.rows?0:1)<m.y+m.rows&&c.y+c.rows>m.y+(1===m.rows?0:1)}checkCollisionTwoItems(c,m){if(!(c.x<m.x+m.cols&&c.x+c.cols>m.x&&c.y<m.y+m.rows&&c.y+c.rows>m.y))return!1;if(!this.$options.allowMultiLayer)return!0;const k=this.$options.defaultLayerIndex;return(void 0===c.layerIndex?k:c.layerIndex)===(void 0===m.layerIndex?k:m.layerIndex)}ngOnInit(){this.options.initCallback&&this.options.initCallback(this),this.calculateLayout$.pipe((0,O.b)(0),(0,e.R)(this.destroy$)).subscribe(()=>this.calculateLayout()),this.resize$.pipe((0,S.w)(()=>(0,R.H)(100)),(0,e.R)(this.destroy$)).subscribe(()=>this.resize())}ngOnChanges(c){c.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged,resize:this.onResize,getNextPossiblePosition:this.getNextPossiblePosition,getFirstPossiblePosition:this.getFirstPossiblePosition,getLastPossiblePosition:this.getLastPossiblePosition,getItemComponent:m=>this.getItemComponent(m)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}resize(){let c,m;"fit"!==this.$options.gridType||this.mobile?(m=this.el.clientWidth,c=this.el.clientHeight):(m=this.el.offsetWidth,c=this.el.offsetHeight),(m!==this.curWidth||c!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=q.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize),this.emptyCell.updateOptions()}ngOnDestroy(){this.destroy$.next(),this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),this.emptyCell=null,this.compact.destroy(),this.compact=null}checkIfToResize(){const c=this.el.clientWidth,m=this.el.offsetWidth,E=this.el.scrollWidth,k=this.el.clientHeight,Y=this.el.offsetHeight,ue=this.el.scrollHeight;return!(c<m&&ue>Y&&ue-Y<m-c||k<Y&&E>m&&E-m<Y-k)}checkIfMobile(){return this.$options.useBodyForBreakpoint?this.$options.mobileBreakpoint>document.body.clientWidth:this.$options.mobileBreakpoint>this.curWidth}setGridSize(){const c=this.el;let m,E;this.$options.setGridSize||this.$options.gridType===D.Fit&&!this.mobile?(m=c.offsetWidth,E=c.offsetHeight):(m=c.clientWidth,E=c.clientHeight),this.curWidth=m,this.curHeight=E}setGridDimensions(){this.setGridSize(),!this.mobile&&this.checkIfMobile()?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&!this.checkIfMobile()&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let k,c=this.$options.minRows,m=this.$options.minCols,E=this.grid.length-1;for(;E>=0;E--)k=this.grid[E],k.notPlaced||(c=Math.max(c,k.$item.y+k.$item.rows),m=Math.max(m,k.$item.x+k.$item.cols));c+=this.$options.addEmptyRowsCount,(this.columns!==m||this.rows!==c)&&(this.columns=m,this.rows=c,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let E=-this.$options.margin;null!==this.$options.outerMarginLeft?(E+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(E+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(E+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(E+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-E)/this.columns;let k=-this.$options.margin;null!==this.$options.outerMarginTop?(k+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(k+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?(k+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(k+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-k)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let m,c=this.grid.length-1;for(;c>=0;c--)m=this.grid[c],m.setSize(),m.drag.toggle(),m.resize.toggle();this.resize$.next()}updateGrid(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):("none"===this.$options.displayGrid||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=H.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=H.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(c){void 0===c.$item.cols&&(c.$item.cols=this.$options.defaultItemCols,c.item.cols=c.$item.cols,c.itemChanged()),void 0===c.$item.rows&&(c.$item.rows=this.$options.defaultItemRows,c.item.rows=c.$item.rows,c.itemChanged()),-1===c.$item.x||-1===c.$item.y?this.autoPositionItem(c):this.checkCollision(c.$item)&&(this.$options.disableWarnings||(c.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(c.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?c.notPlaced=!0:this.autoPositionItem(c)),this.grid.push(c),this.calculateLayout$.next()}removeItem(c){this.grid.splice(this.grid.indexOf(c),1),this.calculateLayout$.next(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(c.item,c)}checkCollision(c){let m=!1;if(this.options.itemValidateCallback&&(m=!this.options.itemValidateCallback(c)),!m&&this.checkGridCollision(c)&&(m=!0),!m){const E=this.findItemWithItem(c);E&&(m=E)}return m}checkGridCollision(c){const Le=c.cols*c.rows;return!(c.y>-1&&c.x>-1&&c.cols+c.x<=this.$options.maxCols&&c.rows+c.y<=this.$options.maxRows&&c.cols<=(void 0===c.maxItemCols?this.$options.maxItemCols:c.maxItemCols)&&c.cols>=(void 0===c.minItemCols?this.$options.minItemCols:c.minItemCols)&&c.rows<=(void 0===c.maxItemRows?this.$options.maxItemRows:c.maxItemRows)&&c.rows>=(void 0===c.minItemRows?this.$options.minItemRows:c.minItemRows)&&(void 0===c.minItemArea?this.$options.minItemArea:c.minItemArea)<=Le&&(void 0===c.maxItemArea?this.$options.maxItemArea:c.maxItemArea)>=Le)}findItemWithItem(c){let E,m=0;for(;m<this.grid.length;m++)if(E=this.grid[m],E.$item!==c&&this.checkCollisionTwoItems(E.$item,c))return E;return!1}findItemsWithItem(c){const m=[];let k,E=0;for(;E<this.grid.length;E++)k=this.grid[E],k.$item!==c&&this.checkCollisionTwoItems(k.$item,c)&&m.push(k);return m}autoPositionItem(c){this.getNextPossiblePosition(c.$item)?(c.notPlaced=!1,c.item.x=c.$item.x,c.item.y=c.$item.y,c.itemChanged()):(c.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(c.item,["cols","rows","x","y"])))}pixelsToPositionX(c,m,E){const k=m(c/this.curColWidth);return E?k:Math.max(k,0)}pixelsToPositionY(c,m,E){const k=m(c/this.curRowHeight);return E?k:Math.max(k,0)}positionXToPixels(c){return c*this.curColWidth}positionYToPixels(c){return c*this.curRowHeight}getItemComponent(c){return this.grid.find(m=>m.item===c)}checkCollisionForSwaping(c){let m=!1;if(this.options.itemValidateCallback&&(m=!this.options.itemValidateCallback(c)),!m&&this.checkGridCollision(c)&&(m=!0),!m){const E=this.findItemWithItemForSwapping(c);E&&(m=E)}return m}findItemWithItemForSwapping(c){let E,m=this.grid.length-1;for(;m>-1;m--)if(E=this.grid[m],E.$item!==c&&H.checkCollisionTwoItemsForSwaping(E.$item,c))return E;return!1}previewStyle(c=!1){this.movingItem?(this.compact&&c&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}static getNewArrayLength(c,m,E){const k=Math.max(c,Math.floor(m/E));return k<0?0:Number.isFinite(k)?Math.floor(k):0}}return H.\u0275fac=function(c){return new(c||H)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.sBO),r.Y36(r.R0b))},H.\u0275cmp=r.Xpm({type:H,selectors:[["gridster"]],inputs:{options:"options"},features:[r.TTD],ngContentSelectors:v,decls:4,vars:4,consts:[["class","gridster-column",3,"ngStyle",4,"ngFor","ngForOf"],["class","gridster-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"],[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"]],template:function(c,m){1&c&&(r.F$t(),r.YNc(0,C,1,1,"div",0),r.YNc(1,p,1,1,"div",1),r.Hsn(2),r._UZ(3,"gridster-preview",2)),2&c&&(r.Q6J("ngForOf",m.gridColumns),r.xp6(1),r.Q6J("ngForOf",m.gridRows),r.xp6(2),r.Q6J("gridRenderer",m.gridRenderer)("previewStyle$",m.previewStyle$))},directives:[_e,N.sg,N.PC],styles:["gridster{position:relative;box-sizing:border-box;background:grey;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}\n"],encapsulation:2}),H})();class se{constructor(u){this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=u,this.gridster=u.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(u,c){if(this.gridster.$options.pushItems&&!c){this.pushedItemsOrder=[],this.iteration=0;const m=this.push(this.gridsterItem,u);return m||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],m}return!1}restoreTempItems(){let u=this.pushedItemsTemp.length-1;for(;u>-1;u--)this.removeFromTempPushed(this.pushedItemsTemp[u])}restoreItems(){let u=0;const c=this.pushedItems.length;let m;for(;u<c;u++)m=this.pushedItems[u],m.$item.x=m.item.x||0,m.$item.y=m.item.y||0,m.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let u=0;const c=this.pushedItems.length;let m;for(;u<c;u++)m=this.pushedItems[u],m.checkItemChanges(m.$item,m.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let u=this.pushedItems.length-1,c=!1;for(;u>-1;u--)this.checkPushedItem(this.pushedItems[u],u)&&(c=!0);c&&this.checkPushBack()}push(u,c){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(u.$item)||""===c)return!1;const m=this.gridster.findItemsWithItem(u.$item),E=c===this.fromNorth||c===this.fromWest;m.sort((me,Oe)=>E?Oe.$item.y-me.$item.y||Oe.$item.x-me.$item.x:me.$item.y-Oe.$item.y||me.$item.x-Oe.$item.x);let Y,k=0,ue=!0;const Te=[];for(;k<m.length;k++){if(Y=m[k],Y===this.gridsterItem)continue;if(!Y.canBeDragged()){ue=!1;break}const me=this.pushedItemsTemp.indexOf(Y);if(me>-1&&this.pushedItemsTempPath[me].length>10){ue=!1;break}if(this.tryPattern[c][0].call(this,Y,u))this.pushedItemsOrder.push(Y),Te.push(Y);else if(this.tryPattern[c][1].call(this,Y,u))this.pushedItemsOrder.push(Y),Te.push(Y);else if(this.tryPattern[c][2].call(this,Y,u))this.pushedItemsOrder.push(Y),Te.push(Y);else{if(!this.tryPattern[c][3].call(this,Y,u)){ue=!1;break}this.pushedItemsOrder.push(Y),Te.push(Y)}}if(!ue&&(k=this.pushedItemsOrder.lastIndexOf(Te[0]),k>-1)){let me=this.pushedItemsOrder.length-1;for(;me>=k;me--)Y=this.pushedItemsOrder[me],this.pushedItemsOrder.pop(),this.removeFromTempPushed(Y),this.removeFromPushedItem(Y)}return this.iteration++,ue}trySouth(u,c){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(u),u.$item.y=c.$item.y+c.$item.rows,this.push(u,this.fromNorth)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}tryNorth(u,c){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(u),u.$item.y=c.$item.y-u.$item.rows,this.push(u,this.fromSouth)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}tryEast(u,c){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(u),u.$item.x=c.$item.x+c.$item.cols,this.push(u,this.fromWest)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}tryWest(u,c){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(u),u.$item.x=c.$item.x-u.$item.cols,this.push(u,this.fromEast)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}addToTempPushed(u){let c=this.pushedItemsTemp.indexOf(u);-1===c&&(c=this.pushedItemsTemp.push(u)-1,this.pushedItemsTempPath[c]=[]),this.pushedItemsTempPath[c].push({x:u.$item.x,y:u.$item.y})}removeFromTempPushed(u){const c=this.pushedItemsTemp.indexOf(u),m=this.pushedItemsTempPath[c].pop();!m||(u.$item.x=m.x,u.$item.y=m.y,u.setSize(),this.pushedItemsTempPath[c].length||(this.pushedItemsTemp.splice(c,1),this.pushedItemsTempPath.splice(c,1)))}addToPushed(u){if(this.pushedItems.indexOf(u)<0)this.pushedItems.push(u),this.pushedItemsPath.push([{x:u.item.x||0,y:u.item.y||0},{x:u.$item.x,y:u.$item.y}]);else{const c=this.pushedItems.indexOf(u);this.pushedItemsPath[c].push({x:u.$item.x,y:u.$item.y})}}removeFromPushed(u){u>-1&&(this.pushedItems.splice(u,1),this.pushedItemsPath.splice(u,1))}removeFromPushedItem(u){const c=this.pushedItems.indexOf(u);c>-1&&(this.pushedItemsPath[c].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(c,1),this.pushedItemsPath.splice(c,1)))}checkPushedItem(u,c){const m=this.pushedItemsPath[c];let k,Y,ue,E=m.length-2,Te=!1;for(;E>-1;E--)k=m[E],Y=u.$item.x,ue=u.$item.y,u.$item.x=k.x,u.$item.y=k.y,this.gridster.findItemWithItem(u.$item)?(u.$item.x=Y,u.$item.y=ue):(u.setSize(),m.splice(E+1,m.length-E-1),Te=!0);return m.length<2&&this.removeFromPushed(c),Te}}function ut(H,u,c,m,E,k,Y,ue,Te,me){J=H.$options.scrollSensitivity,j=H.$options.scrollSpeed,ie=H.el,fe=Te,ve=me;const Oe=ie.offsetWidth,Ve=ie.scrollLeft,Be=ie.scrollTop,Le=c-Be,We=ie.offsetHeight+Be-c-E,{clientX:tt,clientY:$e}=k;if(!H.$options.disableScrollVertical)if(Y.clientY<$e&&We<J){if(lt(),fe&&ve&&!ve.south||et)return;et=pt(1,ue,Y)}else if(Y.clientY>$e&&Be>0&&Le<J){if(mt(),fe&&ve&&!ve.north||Ee)return;Ee=pt(-1,ue,Y)}else Y.clientY!==$e&&at();const ot=u-Ve;if(!H.$options.disableScrollHorizontal)if(Y.clientX<tt&&Ve+Oe-u-m<=J){if(ht(),fe&&ve&&!ve.east||we)return;we=Re(1,ue,Y)}else if(Y.clientX>tt&&Ve>0&&ot<J){if(gt(),fe&&ve&&!ve.west||ze)return;ze=Re(-1,ue,Y)}else Y.clientX!==tt&&st()}function pt(H,u,c){let m=c.clientY;return window.setInterval(()=>{(!ie||-1===H&&ie.scrollTop-j<0)&&at(),ie.scrollTop+=H*j,m+=H*j,u({clientX:c.clientX,clientY:m})},50)}function Re(H,u,c){let m=c.clientX;return window.setInterval(()=>{(!ie||-1===H&&ie.scrollLeft-j<0)&&st(),ie.scrollLeft+=H*j,m+=H*j,u({clientX:m,clientY:c.clientY})},50)}function je(){st(),at(),ie=null}function st(){gt(),ht()}function at(){lt(),mt()}function gt(){we&&(clearInterval(we),we=0)}function ht(){ze&&(clearInterval(ze),ze=0)}function mt(){et&&(clearInterval(et),et=0)}function lt(){Ee&&(clearInterval(Ee),Ee=0)}class dt{constructor(u){this.gridsterItem=u,this.gridster=u.gridster}destroy(){this.gridster=this.gridsterItem=this.swapedItem=null}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){const u=this.swapedItem.$item.x,c=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=u,this.swapedItem.$item.y=c):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(u){let c;if(c=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(u.$item):this.gridster.checkCollision(u.$item),c&&!0!==c&&c.canBeDragged()){const m=c,E=m.$item.x,k=m.$item.y,Y=u.$item.x,ue=u.$item.y,Te=Y-E,me=ue-k;m.$item.x=u.item.x-Te,m.$item.y=u.item.y-me,u.$item.x=m.item.x+Te,u.$item.y=m.item.y+me,this.gridster.checkCollision(m.$item)||this.gridster.checkCollision(u.$item)?(u.$item.x=Y,u.$item.y=ue,m.$item.x=E,m.$item.y=k):(m.setSize(),this.swapedItem=m,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}var ye=(()=>{return(H=ye||(ye={})).UP="UP",H.DOWN="DOWN",H.LEFT="LEFT",H.RIGHT="RIGHT",ye;var H})();class Lt{constructor(u,c,m){this.zone=m,this.collision=!1,this.dragMove=E=>{E.stopPropagation(),E.preventDefault(),q.checkTouchEvent(E);let k=this.getDirections(E);this.gridster.options.enableBoundaryControl&&(k.includes(ye.UP)&&this.gridsterItem.el.getBoundingClientRect().top<=this.gridster.el.getBoundingClientRect().top+this.margin&&(k=k.filter(Y=>Y!=ye.UP),E=new MouseEvent(E.type,{clientX:E.clientX,clientY:this.lastMouse.clientY})),k.includes(ye.LEFT)&&this.gridsterItem.el.getBoundingClientRect().left<=this.gridster.el.getBoundingClientRect().left+this.margin&&(k=k.filter(Y=>Y!=ye.LEFT),E=new MouseEvent(E.type,{clientX:this.lastMouse.clientX,clientY:E.clientY})),k.includes(ye.RIGHT)&&this.gridsterItem.el.getBoundingClientRect().right>=this.gridster.el.getBoundingClientRect().right-this.margin&&(k=k.filter(Y=>Y!=ye.RIGHT),E=new MouseEvent(E.type,{clientX:this.lastMouse.clientX,clientY:E.clientY})),k.includes(ye.DOWN)&&this.gridsterItem.el.getBoundingClientRect().bottom>=this.gridster.el.getBoundingClientRect().bottom-this.margin&&(k=k.filter(Y=>Y!=ye.DOWN),E=new MouseEvent(E.type,{clientX:E.clientX,clientY:this.lastMouse.clientY}))),k.length&&(this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,ut(this.gridster,this.left,this.top,this.width,this.height,E,this.lastMouse,this.calculateItemPositionFromMousePosition),this.calculateItemPositionFromMousePosition(E))},this.calculateItemPositionFromMousePosition=E=>{this.gridster.options.scale?this.calculateItemPositionWithScale(E,this.gridster.options.scale):this.calculateItemPositionWithoutScale(E),this.calculateItemPosition(),this.lastMouse.clientX=E.clientX,this.lastMouse.clientY=E.clientY,this.zone.run(()=>{this.gridster.updateGrid()})},this.dragStop=E=>{E.stopPropagation(),E.preventDefault(),je(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,E)).then(this.makeDrag,this.cancelDrag):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})},this.cancelDrag=()=>{this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)},this.makeDrag=()=>{this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&!0!==this.collision&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)},this.dragStartDelay=E=>{if(E.target.classList.contains("gridster-item-resizable-handler")||q.checkContentClassForEvent(this.gridster,E))return;if(q.checkTouchEvent(E),!this.gridster.$options.draggable.delayStart)return void this.dragStart(E);const Y=setTimeout(()=>{this.dragStart(E),Le()},this.gridster.$options.draggable.delayStart),ue=this.gridsterItem.renderer.listen("document","mouseup",Le),Te=this.gridsterItem.renderer.listen("document","mouseleave",Le),me=this.gridsterItem.renderer.listen("window","blur",Le),Oe=this.gridsterItem.renderer.listen("document","touchmove",function Be(We){q.checkTouchEvent(We),(Math.abs(We.clientX-E.clientX)>9||Math.abs(We.clientY-E.clientY)>9)&&Le()}),Pe=this.gridsterItem.renderer.listen("document","touchend",Le),Ve=this.gridsterItem.renderer.listen("document","touchcancel",Le);function Le(){clearTimeout(Y),me(),ue(),Te(),Oe(),Pe(),Ve()}},this.gridsterItem=u,this.gridster=c,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),this.gridsterItem=this.gridster=this.collision=null,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(u){u.which&&1!==u.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,u),u.stopPropagation(),u.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=u.clientX,this.originalClientY=u.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.diffLeft=this.gridster.$options.dirType===L.RTL?u.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:u.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=u.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new se(this.gridsterItem),this.swap=new dt(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}calculateItemPositionWithScale(u,c){this.left=this.gridster.$options.dirType===L.RTL?this.gridster.el.scrollWidth-this.originalClientX+(u.clientX-this.originalClientX)/c+this.diffLeft:this.originalClientX+(u.clientX-this.originalClientX)/c+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(u.clientY-this.originalClientY)/c+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(u){this.left=this.gridster.$options.dirType===L.RTL?this.gridster.el.scrollWidth-u.clientX+this.diffLeft:u.clientX+this.offsetLeft-this.diffLeft,this.top=u.clientY+this.offsetTop-this.diffTop}calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){const u=this.path[this.path.length-1];let c="";u.x<this.gridsterItem.$item.x?c=this.push.fromWest:u.x>this.gridsterItem.$item.x?c=this.push.fromEast:u.y<this.gridsterItem.$item.y?c=this.push.fromNorth:u.y>this.gridsterItem.$item.y&&(c=this.push.fromSouth),this.push.pushItems(c,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}this.gridster.previewStyle(!0)}toggle(){const u=this.gridsterItem.canBeDragged();!this.enabled&&u?(this.enabled=!this.enabled,this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartDelay),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartDelay)):this.enabled&&!u&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}getDirections(u){const c=[];return this.lastMouse.clientY>u.clientY&&c.push(ye.UP),this.lastMouse.clientY<u.clientY&&c.push(ye.DOWN),this.lastMouse.clientX<u.clientX&&c.push(ye.RIGHT),this.lastMouse.clientX>u.clientX&&c.push(ye.LEFT),c}}class Gt{constructor(u){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=u,this.gridster=u.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(u){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,u)}restoreItems(){let u=0;const c=this.pushedItems.length;let m;for(;u<c;u++)m=this.pushedItems[u],m.$item.x=m.item.x||0,m.$item.y=m.item.y||0,m.$item.cols=m.item.cols||1,m.$item.row=m.item.row||1,m.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let u=0;const c=this.pushedItems.length;let m;for(;u<c;u++)m=this.pushedItems[u],m.checkItemChanges(m.$item,m.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let u=this.pushedItems.length-1,c=!1;for(;u>-1;u--)this.checkPushedItem(this.pushedItems[u],u)&&(c=!0);c&&this.checkPushBack()}push(u,c){const m=this.gridster.checkCollision(u.$item);if(m&&!0!==m&&m!==this.gridsterItem&&m.canBeResized()){if(this.tryPattern[c].call(this,m,u,c))return!0}else if(!1===m)return!0;return!1}trySouth(u,c,m){const E=u.$item.y,k=u.$item.rows;return u.$item.y=c.$item.y+c.$item.rows,u.$item.rows=k+E-u.$item.y,this.gridster.checkCollisionTwoItems(u.$item,c.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.y=E,u.$item.rows=k,!1):(u.setSize(),this.addToPushed(u),this.push(c,m),!0)}tryNorth(u,c,m){const E=u.$item.rows;return u.$item.rows=c.$item.y-u.$item.y,this.gridster.checkCollisionTwoItems(u.$item,c.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.rows=E,!1):(u.setSize(),this.addToPushed(u),this.push(c,m),!0)}tryEast(u,c,m){const E=u.$item.x,k=u.$item.cols;return u.$item.x=c.$item.x+c.$item.cols,u.$item.cols=k+E-u.$item.x,this.gridster.checkCollisionTwoItems(u.$item,c.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.x=E,u.$item.cols=k,!1):(u.setSize(),this.addToPushed(u),this.push(c,m),!0)}tryWest(u,c,m){const E=u.$item.cols;return u.$item.cols=c.$item.x-u.$item.x,this.gridster.checkCollisionTwoItems(u.$item,c.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.cols=E,!1):(u.setSize(),this.addToPushed(u),this.push(c,m),!0)}addToPushed(u){if(this.pushedItems.indexOf(u)<0)this.pushedItems.push(u),this.pushedItemsPath.push([{x:u.item.x||0,y:u.item.y||0,cols:u.item.cols||0,rows:u.item.rows||0},{x:u.$item.x,y:u.$item.y,cols:u.$item.cols,rows:u.$item.rows}]);else{const c=this.pushedItems.indexOf(u);this.pushedItemsPath[c].push({x:u.$item.x,y:u.$item.y,cols:u.$item.cols,rows:u.$item.rows})}}removeFromPushed(u){u>-1&&(this.pushedItems.splice(u,1),this.pushedItemsPath.splice(u,1))}checkPushedItem(u,c){const m=this.pushedItemsPath[c];let k,Y,ue,Te,me,E=m.length-2;for(;E>-1;E--)k=m[E],Y=u.$item.x,ue=u.$item.y,Te=u.$item.cols,me=u.$item.rows,u.$item.x=k.x,u.$item.y=k.y,u.$item.cols=k.cols,u.$item.rows=k.rows,this.gridster.findItemWithItem(u.$item)?(u.$item.x=Y,u.$item.y=ue,u.$item.cols=Te,u.$item.rows=me):(u.setSize(),m.splice(E+1,m.length-1-E));return m.length<2&&(this.removeFromPushed(c),!0)}}class vt{constructor(u,c,m){this.zone=m,this.directionFunction=null,this.dragMove=E=>{if(null===this.directionFunction)throw new Error("The `directionFunction` has not been set before calling `dragMove`.");E.stopPropagation(),E.preventDefault(),q.checkTouchEvent(E),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,ut(this.gridster,this.left,this.top,this.width,this.height,E,this.lastMouse,this.directionFunction,!0,this.resizeEventScrollType);const k=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(E.clientX-this.originalClientX)/k,clientY:this.originalClientY+(E.clientY-this.originalClientY)/k}),this.lastMouse.clientX=E.clientX,this.lastMouse.clientY=E.clientY,this.zone.run(()=>{this.gridster.updateGrid()})},this.dragStop=E=>{E.stopPropagation(),E.preventDefault(),je(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,E)).then(this.makeResize,this.cancelResize):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})},this.cancelResize=()=>{this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null},this.makeResize=()=>{this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null},this.handleNorth=E=>{if(this.top=E.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight,this.top=this.bottom-this.minHeight),this.newPosition=this.gridster.pixelsToPositionY(this.top+this.margin,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)},this.handleWest=E=>{if(this.left=(this.gridster.$options.dirType===L.RTL?this.originalClientX+(this.originalClientX-E.clientX):E.clientX)+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width&&(this.width=this.minWidth,this.left=this.right-this.minWidth),this.newPosition=this.gridster.pixelsToPositionX(this.left+this.margin,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)},this.handleSouth=E=>{if(this.height=E.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.newPosition=this.gridster.pixelsToPositionY(this.bottom,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.rows=this.itemBackup[3],void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)},this.handleEast=E=>{if(this.width=(this.gridster.$options.dirType===L.RTL?this.originalClientX+(this.originalClientX-E.clientX):E.clientX)+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.newPosition=this.gridster.pixelsToPositionX(this.right,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.cols=this.itemBackup[2],void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)},this.handleNorthWest=E=>{this.handleNorth(E),this.handleWest(E)},this.handleNorthEast=E=>{this.handleNorth(E),this.handleEast(E)},this.handleSouthWest=E=>{this.handleSouth(E),this.handleWest(E)},this.handleSouthEast=E=>{this.handleSouth(E),this.handleEast(E)},this.gridsterItem=u,this.gridster=c,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={west:!1,east:!1,north:!1,south:!1}}destroy(){var u;null===(u=this.gridster)||void 0===u||u.previewStyle(),this.gridster=this.gridsterItem=null}dragStart(u){if(u.which&&1!==u.which)return;this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,u),u.stopPropagation(),u.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=u.clientX,this.lastMouse.clientY=u.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=u.clientX,this.originalClientY=u.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=u.clientX+this.offsetLeft-this.left,this.diffRight=u.clientX+this.offsetLeft-this.right,this.diffTop=u.clientY+this.offsetTop-this.top,this.diffBottom=u.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new se(this.gridsterItem),this.pushResize=new Gt(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid();const{classList:c}=u.target;c.contains("handle-n")?(this.resizeEventScrollType.north=!0,this.directionFunction=this.handleNorth):c.contains("handle-w")?this.gridster.$options.dirType===L.RTL?(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):c.contains("handle-s")?(this.resizeEventScrollType.south=!0,this.directionFunction=this.handleSouth):c.contains("handle-e")?this.gridster.$options.dirType===L.RTL?(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):c.contains("handle-nw")?this.gridster.$options.dirType===L.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):c.contains("handle-ne")?this.gridster.$options.dirType===L.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):c.contains("handle-sw")?this.gridster.$options.dirType===L.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):c.contains("handle-se")&&(this.gridster.$options.dirType===L.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast))}toggle(){this.resizeEnabled=this.gridsterItem.canBeResized()}dragStartDelay(u){if(q.checkTouchEvent(u),!this.gridster.$options.resizable.delayStart)return void this.dragStart(u);const c=setTimeout(()=>{this.dragStart(u),Oe()},this.gridster.$options.resizable.delayStart),{cancelMouse:m,cancelMouseLeave:E,cancelOnBlur:k,cancelTouchMove:Y,cancelTouchEnd:ue,cancelTouchCancel:Te}=this.zone.runOutsideAngular(()=>({cancelMouse:this.gridsterItem.renderer.listen("document","mouseup",Oe),cancelMouseLeave:this.gridsterItem.renderer.listen("document","mouseleave",Oe),cancelOnBlur:this.gridsterItem.renderer.listen("window","blur",Oe),cancelTouchMove:this.gridsterItem.renderer.listen("document","touchmove",me),cancelTouchEnd:this.gridsterItem.renderer.listen("document","touchend",Oe),cancelTouchCancel:this.gridsterItem.renderer.listen("document","touchcancel",Oe)}));function me(Pe){q.checkTouchEvent(Pe),(Math.abs(Pe.clientX-u.clientX)>9||Math.abs(Pe.clientY-u.clientY)>9)&&Oe()}function Oe(){clearTimeout(c),k(),m(),E(),Y(),ue(),Te()}}setItemTop(u){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,u)}setItemLeft(u){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,u,this.top)}setItemHeight(u){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",u+"px")}setItemWidth(u){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",u+"px")}}let wt=(()=>{class H{constructor(c,m,E,k){this.renderer=E,this.zone=k,this.itemInit=new r.vpe,this.itemChange=new r.vpe,this.itemResize=new r.vpe,this.el=c.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=m,this.drag=new Lt(this,m,this.zone),this.resize=new vt(this,m,this.zone)}get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(c){c.item&&(this.updateOptions(),this.init||this.gridster.calculateLayout$.next()),c.item&&c.item.previousValue&&this.setSize()}updateOptions(){this.$item=q.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0})}ngOnDestroy(){this.gridster.removeItem(this),this.drag.destroy(),this.resize.destroy(),this.gridster=this.drag=this.resize=null}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){const m=this.$item.x*this.gridster.curColWidth,E=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,k=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=this.$item.y*this.gridster.curRowHeight,this.left=m,!this.init&&E>0&&k>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(E!==this.width||k!==this.height)&&(this.width=E,this.height=k,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(c,m){c.rows===m.rows&&c.cols===m.cols&&c.x===m.x&&c.y===m.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=m.x||0,this.$item.y=m.y||0,this.$item.cols=m.cols||1,this.$item.rows=m.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayout$.next(),this.itemChanged()))}canBeDragged(){const c=this.gridster.$options.draggable.enabled;return!this.gridster.mobile&&c&&(void 0===this.$item.dragEnabled?c:this.$item.dragEnabled)}canBeResized(){const c=this.gridster.$options.resizable.enabled;return!this.gridster.mobile&&c&&(void 0===this.$item.resizeEnabled?c:this.$item.resizeEnabled)}bringToFront(c){if(c&&c<=0)return;const m=this.getLayerIndex(),E=this.gridster.$options.maxLayerIndex;if(m<E){const k=c?m+c:E;this.item.layerIndex=this.$item.layerIndex=k>E?E:k}}sendToBack(c){if(c&&c<=0)return;const m=this.getLayerIndex();if(m>0){const E=c?m-c:0;this.item.layerIndex=this.$item.layerIndex=E<0?0:E}}getLayerIndex(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}}return H.\u0275fac=function(c){return new(c||H)(r.Y36(r.SBq),r.Y36(te),r.Y36(r.Qsj),r.Y36(r.R0b))},H.\u0275cmp=r.Xpm({type:H,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(c,m){2&c&&r.Udp("z-index",m.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},features:[r.TTD],ngContentSelectors:v,decls:9,vars:8,consts:[["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(c,m){1&c&&(r.F$t(),r.Hsn(0),r.YNc(1,g,1,0,"div",0),r.YNc(2,G,1,0,"div",1),r.YNc(3,y,1,0,"div",2),r.YNc(4,F,1,0,"div",3),r.YNc(5,w,1,0,"div",4),r.YNc(6,b,1,0,"div",5),r.YNc(7,A,1,0,"div",6),r.YNc(8,W,1,0,"div",7)),2&c&&(r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.s&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.e&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.n&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.w&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.se&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.ne&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.sw&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.nw&&m.resize.resizeEnabled))},directives:[N.O5],styles:["gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:white;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}\n"],encapsulation:2}),H})(),Ne=(()=>{class H{}return H.\u0275fac=function(c){return new(c||H)},H.\u0275mod=r.oAB({type:H}),H.\u0275inj=r.cJS({imports:[[N.ez]]}),H})()}}]);