(self.webpackChunkexamples=self.webpackChunkexamples||[]).push([[388],{92120:(ee,U,a)=>{"use strict";a.d(U,{b:()=>d});var r=a(5e3);let d=(()=>{class C{}return C.lateLoadKey="PreviewOverlayComponent",C.\u0275fac=function(S){return new(S||C)},C.\u0275cmp=r.Xpm({type:C,selectors:[["nui-preview-overlay"]],decls:2,vars:0,consts:function(){let e;return e=$localize`:␟5c3a86dc3add2a84bd6fe948cb6fe0c451fcce21␟7864955898524965693: This is a non-interactive widget preview `,[[1,"nui-text-label","content"],e]},template:function(S,N){1&S&&(r.TgZ(0,"div",0),r.SDv(1,1),r.qZA())},styles:["[_nghost-%COMP%]{opacity:0;transition-property:opacity;transition-duration:.5s;position:absolute;z-index:1060;background-color:var(--nui-color-bg-content_popover,#fff);height:100%;width:100%}[_nghost-%COMP%]:hover{opacity:.96}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:center;align-items:center;position:absolute;top:0;right:2px;bottom:2px;left:2px;cursor:not-allowed}"]}),C})()},34575:(ee,U,a)=>{"use strict";a.d(U,{M:()=>x});var r=a(5e3),d=a(33748),C=a(69754),e=a.n(C),S=a(30652),N=a(53450),R=a(25878);const v={displayGrid:d.KY.None,gridType:d.tQ.VerticalFixed,compactType:d.RU.CompactUp,margin:15,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,mobileBreakpoint:640,minCols:12,maxCols:12,minRows:12,fixedRowHeight:44,minItemArea:1,defaultItemCols:6,defaultItemRows:6,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,scrollSensitivity:10,scrollSpeed:20,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{enabled:!1,ignoreContent:!0,dragHandleClass:"nui-dashboard__widget--drag-handle"},resizable:{enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0}},swap:!1,pushItems:!0,pushResizeItems:!0,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1};var c=a(69808),O=a(16041),g=a(43046),L=a(92474);function M(A,z){if(1&A){const P=r.EpF();r.TgZ(0,"nui-widget",5),r.NdJ("widgetChange",function(h){return r.CHM(P),r.oxw(2).onWidgetChange(h)}),r.qZA()}if(2&A){const P=r.oxw().$implicit;r.Q6J("widget",P.value),r.uIk("widget-id",P.key)("widget-type",P.value.type)}}function F(A,z){if(1&A&&(r.TgZ(0,"gridster-item",3),r.YNc(1,M,1,3,"nui-widget",4),r.qZA()),2&A){const P=z.$implicit,T=r.oxw(),h=r.MAs(4);r.Q6J("item",T.dashboard.positions[P.key])("nuiGridsterItemWidgetId",P.key),r.xp6(1),r.Q6J("ngIf",T.shouldWidgetRender(P.key))("ngIfElse",h)}}function G(A,z){1&A&&(r.TgZ(0,"div",6),r._UZ(1,"nui-loading",7),r.qZA()),2&A&&(r.xp6(1),r.Q6J("active",!0))}let x=(()=>{class A{constructor(P){this.eventBus=P,this.editMode=!1,this.gridsterConfigChange=new r.vpe,this.dashboardChange=new r.vpe,this.gridsterItemsVisibilityMap={},this.orderWidgets=(T,h)=>{const b=this.dashboard.positions[T.key],w=this.dashboard.positions[h.key];return b.y-w.y||b.x-w.x},this.trackByFn=(T,h)=>h.key,this.updateWidgetPosition=(T,h)=>{const b=String(h.widgetId),w=(0,S.zdu)(this.dashboard,"positions."+b,T);this.dashboardChange.emit(w),this.eventBus.getStream(N.Xi).next({widgetId:b,payload:T})},this.emitWidgetResize=(T,h)=>{const b=h.widgetId;this.eventBus.getStream(N.pV).next({widgetId:b,payload:{widgetId:b,height:h.height,width:h.width}})}}get dashboard(){return this.dashboardBuffer||this._dashboard}set dashboard(P){this._dashboard=P,this.dashboardBuffer=null}get hostClass(){return!0}ngAfterViewInit(){setTimeout(()=>this.calculateWidgetsVisibility())}onGridsterScroll(){this.calculateWidgetsVisibility()}ngOnChanges(P){var T,h,b;if(P.gridsterConfig){if(P.gridsterConfig.isFirstChange()){const w=e()(this.gridsterConfig||{},v);this.hookEvent(w,"itemChangeCallback",this.updateWidgetPosition),this.hookEvent(w,"itemResizeCallback",this.emitWidgetResize),this.gridsterConfigChange.emit(w)}(null===(T=this.gridsterConfig)||void 0===T?void 0:T.api)&&(null===(b=(h=this.gridsterConfig.api).optionsChanged)||void 0===b||b.call(h))}if(P.editMode){if(!this.gridsterConfig.resizable)throw new Error("Gridster's resizable prop is undefined");if(this.gridsterConfig.resizable.enabled=this.editMode,!this.gridsterConfig.draggable)throw new Error("Gridster's draggable prop is undefined");this.gridsterConfig.draggable.enabled=this.editMode,this.gridsterConfigChange.emit(Object.assign({},this.gridsterConfig)),this.eventBus.getStream(N.N9).next({payload:this.editMode})}}onWidgetChange(P){!this.dashboard.widgets[P.id]||this.updateWidget(P)}updateWidget(P){var T,h,b,w,H;let Z=this.dashboard;if(!this.dashboard.positions[P.id]&&(null===(T=this.gridsterConfig)||void 0===T?void 0:T.api)){const oe=null===(b=(h=this.gridsterConfig.api).getFirstPossiblePosition)||void 0===b?void 0:b.call(h,{x:0,y:0,rows:null===(w=this.gridsterConfig)||void 0===w?void 0:w.defaultItemRows,cols:null===(H=this.gridsterConfig)||void 0===H?void 0:H.defaultItemCols});Z=(0,S.zdu)(Z,`positions.${P.id}`,oe)}Z=(0,S.zdu)(Z,`widgets.${P.id}`,P),this.dashboardBuffer=Z,this.dashboardChange.emit(Z)}removeWidget(P,T=!0){let h=this.dashboard;if(!h.widgets[P])return;const b=Object.assign({},h.widgets);if(delete b[P],h=(0,S.zdu)(h,"widgets",b),T){const w=Object.assign({},h.positions);delete w[P],h=(0,S.zdu)(h,"positions",w)}this.dashboardChange.emit(h)}shouldWidgetRender(P){var T;return!(null===(T=this.belowFoldLazyLoadingConfig)||void 0===T?void 0:T.enabled)||this.gridsterItemsVisibilityMap[P]}hookEvent(P,T,h){const b=P[T];P[T]=(w,H)=>{h(w,H),b&&b(w,H)}}calculateWidgetsVisibility(){var P;if(!(null===(P=this.belowFoldLazyLoadingConfig)||void 0===P?void 0:P.enabled))return;const T=this.gridster.el.getBoundingClientRect();this.gridsterItemsVisibilityMap=this.gridsterItems.reduce((h,b)=>{var w;const{el:H}=b,Z=b.widgetId;if(!(null===(w=this.belowFoldLazyLoadingConfig.configuration)||void 0===w?void 0:w.reloadWidgetsOnScroll)&&h[Z])return h;const oe=H.getBoundingClientRect();return h[Z]=(oe.top>T.top&&oe.top<T.bottom||oe.bottom>T.top&&oe.bottom<T.bottom)&&(oe.left>T.left&&oe.left<T.right||oe.right>T.left&&oe.right<T.right),h},this.gridsterItemsVisibilityMap)}}return A.\u0275fac=function(P){return new(P||A)(r.Y36(R.Bc))},A.\u0275cmp=r.Xpm({type:A,selectors:[["nui-dashboard"]],viewQuery:function(P,T){if(1&P&&(r.Gf(d.sm,5),r.Gf(d.IM,5)),2&P){let h;r.iGM(h=r.CRH())&&(T.gridster=h.first),r.iGM(h=r.CRH())&&(T.gridsterItems=h)}},hostVars:2,hostBindings:function(P,T){2&P&&r.ekj("nui-dashboard",T.hostClass)},inputs:{gridsterConfig:"gridsterConfig",dashboard:"dashboard",editMode:"editMode",belowFoldLazyLoadingConfig:"belowFoldLazyLoadingConfig"},outputs:{gridsterConfigChange:"gridsterConfigChange",dashboardChange:"dashboardChange"},features:[r._Bn([{provide:R.Bc,useClass:S.Ndp}]),r.TTD],decls:5,vars:6,consts:[[1,"nui-dashboard__gridster",3,"options","scroll"],["class","nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId",4,"ngFor","ngForOf","ngForTrackBy"],["emptyWidgetTpl",""],[1,"nui-dashboard__gridster-item",3,"item","nuiGridsterItemWidgetId"],["class","w-100 h-100 d-block",3,"widget","widgetChange",4,"ngIf","ngIfElse"],[1,"w-100","h-100","d-block",3,"widget","widgetChange"],[1,"w-100","h-100","d-block"],[3,"active"]],template:function(P,T){1&P&&(r.TgZ(0,"gridster",0),r.NdJ("scroll",function(){return T.onGridsterScroll()}),r.YNc(1,F,2,4,"gridster-item",1),r.ALo(2,"keyvalue"),r.qZA(),r.YNc(3,G,2,1,"ng-template",null,2,r.W1O)),2&P&&(r.Q6J("options",T.gridsterConfig),r.xp6(1),r.Q6J("ngForOf",r.xi3(2,3,T.dashboard.widgets,T.orderWidgets))("ngForTrackBy",T.trackByFn))},directives:[d.sm,c.sg,d.IM,O.K,c.O5,g.B,L.N],pipes:[c.Nd],styles:['.nui-dashboard__gridster{background-color:var(--nui-color-bg-workspace,#f0f0f0)}.nui-dashboard__gridster .gridster-preview{border-width:4px;border-style:solid;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.nui-dashboard__gridster .gridster-preview:before{background-color:var(--nui-color-selected-contrast,#00c4d2);border-radius:50%;content:"";display:block;height:40px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:40px;z-index:1}.nui-dashboard__gridster .gridster-preview:after{color:var(--nui-color-icon-light,#fff);content:"+";display:block;font-size:19px;font-weight:700;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);z-index:2}.nui-dashboard__gridster-item{box-shadow:0 0 5px #999;box-shadow:0 0 var(--nui-space-xs, 5px) var(--nui-color-line-dark, #999999);background-color:var(--nui-color-bg-light,#fff)}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler{border-bottom-color:#00c4d2;border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);margin:0;z-index:2000}.nui-dashboard__gridster-item:hover .gridster-item-resizable-handler.handle-se{border-bottom-color:var(--nui-color-selected-contrast,#00c4d2);right:2px;bottom:2px}.mobile .nui-dashboard__gridster-item.nui-dashboard__gridster-item{height:auto!important}\n'],encapsulation:2}),A})()},92474:(ee,U,a)=>{"use strict";a.d(U,{N:()=>e});var r=a(41777),d=a(5e3),C=a(30652);let e=(()=>{class S{constructor(R){this.changeDetector=R,this.active=!1}}return S.lateLoadKey="LoadingComponent",S.\u0275fac=function(R){return new(R||S)(d.Y36(d.sBO))},S.\u0275cmp=d.Xpm({type:S,selectors:[["nui-loading"]],inputs:{active:"active"},decls:1,vars:2,consts:[["compactMode","true",3,"show"]],template:function(R,v){1&R&&(d.TgZ(0,"nui-progress",0),d.NdJ("@animate.start",function(O){return O.element.style.display="block"})("@animate.done",function(O){return O.element.style.display=O.toState?"block":"none"}),d.qZA()),2&R&&d.Q6J("@animate",v.active)("show",!0)},directives:[C.t15],styles:["[_nghost-%COMP%]{height:5px;flex-shrink:0}"],data:{animation:[(0,r.X$)("animate",[(0,r.SB)("true",(0,r.oB)({opacity:1})),(0,r.SB)("false",(0,r.oB)({opacity:0})),(0,r.eR)("false <=> true",(0,r.jt)(500))])]}}),S})()},26365:(ee,U,a)=>{"use strict";a.d(U,{i:()=>O});var r=a(34235),d=a.n(r),C=a(77579),e=a(82722),S=a(81466),N=a(42339),R=a(53450),v=a(25878),c=a(5e3);let O=(()=>{class g{constructor(M,F,G){this.eventBus=M,this.dataSource=F,this.pizzagnaService=G,this.destroy$=new C.x,this.dataSource&&(this.setupRefreshListener(),this.dataSource.outputsSubject.pipe((0,e.R)(this.destroy$)).subscribe(x=>this.handleDataSourceUpdate(x)),this.dataSource.busy&&this.dataSource.busy.pipe((0,e.R)(this.destroy$)).subscribe(x=>{this.eventBus.getStream(R.QD).next({payload:{componentId:this.componentId,busy:x}})}))}setupRefreshListener(){this.eventBus.getStream(R.RG).pipe((0,e.R)(this.destroy$)).subscribe(()=>this.handleRefresh())}handleRefresh(){this.eventBus.getStream(R.R1).next({}),this.dataSource.applyFilters()}handleDataSourceUpdate(M){this.lastValue=d()(null==M?void 0:M.result)?M:null==M?void 0:M.result,this.updateOutput(this.lastValue),this.eventBus.getStream(S.PF).next({payload:Object.assign({componentId:this.componentId},M)})}ngOnDestroy(){this.updateOutput(void 0);const M={payload:{componentId:this.componentId}};this.eventBus.getStream(S.yX).next(M);const F={payload:{componentId:this.componentId,busy:!1}};this.eventBus.getStream(R.QD).next(F),this.destroy$.next(),this.destroy$.complete()}updateConfiguration(M){M.componentId&&(this.componentId=M.componentId),this.updateAdapterProperties(M),this.updateDataSourceProperties(M),void 0!==this.lastValue&&this.updateOutput(this.lastValue)}updateAdapterProperties(M){this.propertyPath=M.propertyPath}updateDataSourceProperties(M){var F,G;const x=null===(F=null==M?void 0:M.dataSource)||void 0===F?void 0:F.properties;if(this.dataSourceConfiguration!==x){this.dataSourceConfiguration=x;const A=this.dataSource;(null==A?void 0:A.updateConfiguration)&&A.updateConfiguration(null===(G=M.dataSource)||void 0===G?void 0:G.properties),this.eventBus.getStream(R.RG).next({})}void 0===this.dataSourceConfiguration&&void 0===x&&setTimeout(()=>this.eventBus.getStream(R.RG).next({}))}updateOutput(M){this.pizzagnaService.setProperty({pizzagnaKey:v.xW.Data,componentId:this.componentId,propertyPath:[this.propertyPath]},this.processOutput(M))}processOutput(M){return M}}return g.\u0275fac=function(M){return new(M||g)(c.LFG(v.nY),c.LFG(v.Fk,8),c.LFG(N.p))},g.\u0275prov=c.Yz7({token:g,factory:g.\u0275fac}),g})()},50271:(ee,U,a)=>{"use strict";a.d(U,{I:()=>e});var r=a(53450),d=a(25878),C=a(5e3);let e=(()=>{class S{constructor(R){this.eventBus=R,this.initializeSubscriptions()}updateConfiguration(R){this.properties=R}initializeSubscriptions(){this.eventBus.getStream(r.b1).subscribe(R=>{var v,c,O;(!(null===(v=this.properties)||void 0===v?void 0:v.interactionType)||(null===(c=this.properties)||void 0===c?void 0:c.interactionType)===(null===(O=R.payload)||void 0===O?void 0:O.interactionType))&&this.handleInteraction(R.payload)})}}return S.\u0275fac=function(R){return new(R||S)(C.LFG(d.nY))},S.\u0275prov=C.Yz7({token:S,factory:S.\u0275fac}),S})()},38046:(ee,U,a)=>{"use strict";a.d(U,{O:()=>R});var r=a(25878),d=a(50271),C=a(5e3),e=a(30652),S=a(99567);Window;let R=(()=>{class v extends d.I{constructor(O,g,L,M){super(O),this.window=g,this.logger=L,this.urlInteractionService=M}handleInteraction(O){var g;if(!(null===(g=this.properties)||void 0===g?void 0:g.url))return void this.logger.warn("The target url has not been defined.");const L=this.urlInteractionService.template(this.properties.url,{data:O.data});!L||(this.properties.newWindow?this.window.open(L):this.window.location.href=L)}}return v.\u0275fac=function(O){return new(O||v)(C.LFG(r.nY),C.LFG("windowObject"),C.LFG(e.mQy),C.LFG(S.v))},v.\u0275prov=C.Yz7({token:v,factory:v.\u0275fac}),v})()},61455:(ee,U,a)=>{"use strict";a.d(U,{g:()=>e});var r=a(61135),d=a(92221),C=a(5e3);let e=(()=>{class S{constructor(){this._refreshRateSeconds=d.Q,this.refreshRateSeconds$=new r.X(this.refreshRateSeconds)}get refreshRateSeconds(){return this._refreshRateSeconds}set refreshRateSeconds(R){this._refreshRateSeconds=R,this.refreshRateSeconds$.next(this._refreshRateSeconds)}}return S.\u0275fac=function(R){return new(R||S)},S.\u0275prov=C.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},97674:(ee,U,a)=>{"use strict";a.d(U,{q:()=>v});var r=a(77579),d=a(82722),C=a(53450),e=a(25878),S=a(92221),N=a(5e3),R=a(61455);let v=(()=>{class c{constructor(g,L,M){this.eventBus=g,this.ngZone=L,this.refresherSettings=M,this.enabled=!0,this.overrideDefaultSettings=!0,this.interval=S.Q,this.eventDef=C.RG,this.destroy$=new r.x,this.refresherSettings.refreshRateSeconds$.pipe((0,d.R)(this.destroy$)).subscribe(F=>{this.overrideDefaultSettings||this.initializeInterval()})}updateConfiguration(g){var L,M,F,G;this.interval=null!==(L=g.interval)&&void 0!==L?L:S.Q,this.enabled=null===(M=g.enabled)||void 0===M||M,this.overrideDefaultSettings=null===(F=g.overrideDefaultSettings)||void 0===F||F,this.eventDef=null!==(G=g.event)&&void 0!==G?G:C.RG,this.initializeInterval()}ngOnDestroy(){this.clearInterval(),this.destroy$.next(),this.destroy$.complete()}initializeInterval(){this.clearInterval(),!(void 0===this.interval||this.getInterval()<=0||!1===this.enabled)&&this.ngZone.runOutsideAngular(()=>{this.intervalRef=setInterval(()=>{this.ngZone.run(()=>{this.performAction()})},1e3*this.getInterval())})}performAction(){this.eventBus.getStream(this.eventDef).next({})}getInterval(){return this.overrideDefaultSettings?this.interval:this.refresherSettings.refreshRateSeconds}clearInterval(){void 0!==this.intervalRef&&(clearInterval(this.intervalRef),this.intervalRef=void 0)}}return c.\u0275fac=function(g){return new(g||c)(N.LFG(e.nY),N.LFG(N.R0b),N.LFG(R.g))},c.\u0275prov=N.Yz7({token:c,factory:c.\u0275fac}),c})()},42296:(ee,U,a)=>{"use strict";a.d(U,{Y:()=>w});var r=a(70655),d=a(5e3),C=a(68306),e=a(38421);const{isArray:S}=Array;var R=a(60515),v=a(25403),c=a(63269);var g=a(56451),L=a(63900),M=a(68675),F=a(18505),G=a(54004),x=a(78372),A=a(82722),z=a(30652),P=a(42339),T=a(53450),h=a(25878),b=a(26365);let w=class extends b.i{constructor(Z,oe,pe,ue){super(Z,oe,pe),this.virtualViewport=ue}setupRefreshListener(){const Z=function O(...H){const Z=(0,c.jO)(H),oe=function N(H){return 1===H.length&&S(H[0])?H[0]:H}(H);return oe.length?new C.y(pe=>{let ue=oe.map(()=>[]),ne=oe.map(()=>!1);pe.add(()=>{ue=ne=null});for(let ae=0;!pe.closed&&ae<oe.length;ae++)(0,e.Xf)(oe[ae]).subscribe((0,v.x)(pe,K=>{if(ue[ae].push(K),ue.every(q=>q.length)){const q=ue.map(se=>se.shift());pe.next(Z?Z(...q):q),ue.some((se,te)=>!se.length&&ne[te])&&pe.complete()}},()=>{ne[ae]=!0,!ue[ae].length&&pe.complete()}));return()=>{ue=ne=null}}):R.E}(this.eventBus.getStream(T.j7),this.eventBus.getStream(T.RG)).pipe((0,L.w)(()=>this.eventBus.getStream(T.RG).pipe((0,M.O)(void 0))),(0,F.b)(()=>this.virtualViewport.reset({emitFirstPage:!1})),(0,G.U)(()=>{}));(0,g.T)(Z,this.eventBus.getStream(T.df)).pipe((0,x.b)(10),(0,F.b)(()=>this.handleRefresh()),(0,A.R)(this.destroy$)).subscribe()}updateAdapterProperties(Z){this.dataPath=Z.dataPath,this.dataFieldsPath=Z.dataFieldsPath,this.totalItemsPath=Z.totalItemsPath}updateOutput(Z){var oe,pe;const ue=null===(oe=null==Z?void 0:Z.paginator)||void 0===oe?void 0:oe.total,ne=null===(pe=null==Z?void 0:Z.repeat)||void 0===pe?void 0:pe.itemsSource,ae=null==Z?void 0:Z.dataFields;this.pizzagnaService.setProperty({pizzagnaKey:h.xW.Data,componentId:this.componentId,propertyPath:[this.totalItemsPath]},ue),this.pizzagnaService.setProperty({pizzagnaKey:h.xW.Data,componentId:this.componentId,propertyPath:[this.dataPath]},ne),this.pizzagnaService.setProperty({pizzagnaKey:h.xW.Data,componentId:this.componentId,propertyPath:[this.dataFieldsPath]},ae)}};w=(0,r.gn)([(0,r.fM)(0,(0,d.tBr)(h.nY)),(0,r.fM)(1,(0,d.tBr)(h.Fk)),(0,r.fM)(3,(0,d.FiY)()),(0,r.w6)("design:paramtypes",[z.Ndp,Object,P.p,z.zCP])],w)},10948:(ee,U,a)=>{"use strict";a.d(U,{f:()=>c});var r=a(70655),d=a(5e3),C=a(11094),e=a.n(C),S=a(30652),N=a(42339),R=a(25878),v=a(26365);let c=class extends v.i{constructor(g,L,M){super(g,L,M),this.seriesIndex=[]}updateConfiguration(g){this.seriesIndex=e()(g.series),super.updateConfiguration(g)}processOutput(g){return g&&Object.assign(Object.assign({},g),{series:this.buildSeriesSet(null==g?void 0:g.series)})}buildSeriesSet(g){return g?g.filter(L=>this.seriesIndex.find(M=>M.selectedSeriesId===L.id)).map(L=>{var M;return{id:L.id,data:L.data,link:L.link,secondaryLink:L.secondaryLink,legendDescriptionPrimary:null===(M=this.seriesIndex.find(F=>F.selectedSeriesId===L.id))||void 0===M?void 0:M.label,legendDescriptionSecondary:L.description}}):[]}};c=(0,r.gn)([(0,r.fM)(0,(0,d.tBr)(R.nY)),(0,r.fM)(1,(0,d.tBr)(R.Fk)),(0,r.w6)("design:paramtypes",[S.Ndp,Object,N.p])],c)},92221:(ee,U,a)=>{"use strict";a.d(U,{Q:()=>r});const r=300},69769:(ee,U,a)=>{"use strict";a.d(U,{q:()=>d});var r=a(5e3);let d=(()=>{class C{}return C.lateLoadKey="TemplateLoadErrorComponent",C.\u0275fac=function(S){return new(S||C)},C.\u0275cmp=r.Xpm({type:C,selectors:[["ng-component"]],decls:3,vars:0,template:function(S,N){1&S&&(r.TgZ(0,"code")(1,"pre"),r._uU(2,"Template load error!"),r.qZA()())},encapsulation:2}),C})()},43046:(ee,U,a)=>{"use strict";a.d(U,{B:()=>N});var r=a(5e3),d=a(53450),C=a(63776),e=a(32656),S=a(87686);let N=(()=>{class R{constructor(c,O){this.widgetConfigurationService=c,this.widgetTypesService=O,this.widgetChange=new r.vpe,this.rootNode=d.XM}ngOnChanges(c){var O,g;if(c.widget){const L=this.widget.type;if((c.widget.previousValue&&c.widget.previousValue.type)!==L){const F=this.widgetTypesService.getWidgetType(L,this.widget.version);this.rootNode=(null===(g=null===(O=null==F?void 0:F.paths)||void 0===O?void 0:O.widget)||void 0===g?void 0:g.root)||d.XM}this.widgetConfigurationService.updateWidget(this.widget)}}onPizzagnaChange(c){this.widgetChange.emit(Object.assign(Object.assign({},this.widget),{pizzagna:c}))}}return R.\u0275fac=function(c){return new(c||R)(r.Y36(C.I),r.Y36(e.x))},R.\u0275cmp=r.Xpm({type:R,selectors:[["nui-widget"]],hostAttrs:[1,"nui-widget"],inputs:{widget:"widget"},outputs:{widgetChange:"widgetChange"},features:[r._Bn([C.I]),r.TTD],decls:1,vars:2,consts:[[3,"rootNode","pizzagna","pizzagnaChange"]],template:function(c,O){1&c&&(r.TgZ(0,"nui-pizzagna",0),r.NdJ("pizzagnaChange",function(L){return O.onPizzagnaChange(L)}),r.qZA()),2&c&&r.Q6J("rootNode",O.rootNode)("pizzagna",O.widget.pizzagna)},directives:[S.R],styles:[""]}),R})()},69155:(ee,U,a)=>{"use strict";a.d(U,{n:()=>M});var r=a(5e3),d=a(77579),C=a(30652),e=a(87686),S=a(32656),N=a(45122),R=a(92120),v=a(69808),c=a(47429),O=a(73193);const g=["previewPizzagnaComponent"];function L(F,G){if(1&F){const x=r.EpF();r.TgZ(0,"nui-pizzagna",8,9),r.NdJ("pizzagnaChange",function(z){return r.CHM(x),r.oxw().onPizzagnaChange(z)}),r.ALo(2,"nuiPizzagnaRoot"),r.qZA()}if(2&F){const x=r.oxw();r.Q6J("rootNode",r.xi3(2,2,x.previewWidget,"widget"))("pizzagna",null==x.previewWidget?null:x.previewWidget.pizzagna)}}let M=(()=>{class F{constructor(x,A){this.widgetTypesService=x,this.changeDetector=A,this.result=new r.vpe,this.formPortalAttached=new r.vpe,this.submitError=new d.x,this.destroy$=new d.x}ngOnInit(){this.previewWidget||(this.previewWidget={id:null,type:"previewPlaceholder",pizzagna:this.widgetTypesService.getWidgetType("previewPlaceholder").widget})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleSubmitError(){this.submitError.next()}onFormPortalAttached(x){this.formPortalAttached.emit(x)}updateWidget(x){this.previewWidget=x,this.changeDetector.markForCheck()}formCancel(){this.result.next(null)}formSubmit(){this.result.next(this.previewWidget)}onPizzagnaChange(x){this.previewWidget&&(this.previewWidget.pizzagna=x)}}return F.lateLoadKey="ConfiguratorComponent",F.\u0275fac=function(x){return new(x||F)(r.Y36(S.x),r.Y36(r.sBO))},F.\u0275cmp=r.Xpm({type:F,selectors:[["nui-configurator"]],viewQuery:function(x,A){if(1&x&&r.Gf(g,7),2&x){let z;r.iGM(z=r.CRH())&&(A.previewPizzagnaComponent=z.first)}},hostAttrs:[1,"nui-configurator"],inputs:{formPortal:"formPortal",previewWidget:"previewWidget"},outputs:{result:"result",formPortalAttached:"formPortalAttached"},features:[r._Bn([N.m,{provide:C.nse,useValue:".nui-dashwiz-step--active .configurator-scrollable"}])],decls:9,vars:4,consts:[[1,"nui-configurator__backdrop"],[1,"nui-configurator__content"],["orientation","right","paneSize","30vw","paneMinSize","20vw","paneMaxSize","80vw","isResizable","true",1,"h-100",3,"headerPadding","sidePaneBodyPadding"],[1,"nui-configurator__preview","d-flex","align-items-center","justify-content-center"],[1,"nui-configurator__preview-area"],["class","flex-grow-1 w-100",3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],["nuiPanelEmbeddedBody","",1,"nui-configurator__body"],[3,"cdkPortalOutlet","attached"],[1,"flex-grow-1","w-100",3,"rootNode","pizzagna","pizzagnaChange"],["previewPizzagnaComponent",""]],template:function(x,A){1&x&&(r._UZ(0,"div",0),r.TgZ(1,"div",1)(2,"nui-panel",2)(3,"div",3)(4,"div",4),r._UZ(5,"nui-preview-overlay"),r.YNc(6,L,3,5,"nui-pizzagna",5),r.qZA()(),r.TgZ(7,"div",6),r.ynx(8,7),r.NdJ("attached",function(P){return A.onFormPortalAttached(P)}),r.BQk(),r.qZA()()()),2&x&&(r.xp6(2),r.Q6J("headerPadding",!1)("sidePaneBodyPadding",!1),r.xp6(4),r.Q6J("ngIf",null==A.previewWidget?null:A.previewWidget.pizzagna),r.xp6(2),r.Q6J("cdkPortalOutlet",A.formPortal))},directives:[C.yXm,R.b,v.O5,e.R,c.Pl],pipes:[O.l],styles:[".nui-configurator__backdrop[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:var(--nui-color-overlay-modal,rgba(17, 17, 17, .5));opacity:.5;filter:alpha(opacity=50)}.nui-configurator__content[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040}.nui-configurator__heading[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #d9d9d9}.nui-configurator__body[_ngcontent-%COMP%]{overflow-anchor:none;height:100vh}.nui-configurator__preview[_ngcontent-%COMP%]{height:100vh}.nui-configurator__preview-area[_ngcontent-%COMP%]{display:flex;width:80%;position:relative;background-color:var(--nui-color-bg-content_popover,#fff);border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);margin:auto;min-height:40vh;max-height:80vh;overflow:hidden}"]}),F})()},16134:(ee,U,a)=>{"use strict";a.d(U,{C:()=>R});var r=a(5e3),d=a(30652),C=a(69808);function e(v,c){if(1&v&&r._UZ(0,"nui-icon",4),2&v){const O=r.oxw(2);r.Q6J("icon",null==O.data?null:O.data.value)}}function S(v,c){if(1&v&&(r.TgZ(0,"div",2),r.YNc(1,e,1,1,"nui-icon",3),r.qZA()),2&v){const O=r.oxw(),g=r.MAs(2);r.xp6(1),r.Q6J("ngIf",O.iconFound)("ngIfElse",g)}}function N(v,c){1&v&&r._UZ(0,"nui-icon",5)}let R=(()=>{class v{constructor(O,g){this.changeDetector=O,this.iconService=g,this.isValid=!1,this.iconFound=!0}ngOnChanges(){var O,g;this.isValid=!!(null===(O=this.data)||void 0===O?void 0:O.value),this.iconFound=!!this.iconService.getIconData(null===(g=this.data)||void 0===g?void 0:g.value)}}return v.lateLoadKey="IconFormatterComponent",v.\u0275fac=function(O){return new(O||v)(r.Y36(r.sBO),r.Y36(d.C6t))},v.\u0275cmp=r.Xpm({type:v,selectors:[["ng-component"]],inputs:{data:"data"},features:[r.TTD],decls:3,vars:1,consts:function(){let c;return c=$localize`:␟8cf3dbb8fe1e2fa079d4c2167cd4c81cdcfe89c2␟7731831112083433420:Unknown icon`,[["class","d-flex align-items-center justify-content-center",4,"ngIf"],["iconNotFound",""],[1,"d-flex","align-items-center","justify-content-center"],[3,"icon",4,"ngIf","ngIfElse"],[3,"icon"],["title",c,"iconColor","disabled-gray","icon","help"]]},template:function(O,g){1&O&&(r.YNc(0,S,2,2,"div",0),r.YNc(1,N,1,0,"ng-template",null,1,r.W1O)),2&O&&r.Q6J("ngIf",g.isValid)},directives:[C.O5,d.oJW],encapsulation:2}),v})()},61621:(ee,U,a)=>{"use strict";a.d(U,{s:()=>e});var r=a(5e3),d=a(69808);function C(S,N){if(1&S&&(r.TgZ(0,"a",2),r._uU(1),r.qZA()),2&S){const R=r.oxw();r.Q6J("href",null==R.data?null:R.data.link,r.LSH)("target",R.targetSelf?"_self":"_blank"),r.xp6(1),r.hij(" ",null==R.data?null:R.data.value," ")}}let e=(()=>{class S{constructor(R){this.changeDetector=R,this.isValid=!1}ngOnChanges(R){this.isValid=Boolean(this.data&&this.data.value&&this.data.link)}}return S.lateLoadKey="LinkFormatterComponent",S.\u0275fac=function(R){return new(R||S)(r.Y36(r.sBO))},S.\u0275cmp=r.Xpm({type:S,selectors:[["ng-component"]],inputs:{data:"data",targetSelf:"targetSelf"},features:[r.TTD],decls:2,vars:1,consts:[[1,"link-formatter-container"],["class","nui-text-ellipsis",3,"href","target",4,"ngIf"],[1,"nui-text-ellipsis",3,"href","target"]],template:function(R,v){1&R&&(r.TgZ(0,"div",0),r.YNc(1,C,2,3,"a",1),r.qZA()),2&R&&(r.xp6(1),r.Q6J("ngIf",v.isValid))},directives:[d.O5],styles:[".link-formatter-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}"]}),S})()},14366:(ee,U,a)=>{"use strict";a.d(U,{a:()=>d});var r=a(5e3);let d=(()=>{class C{constructor(S){this.changeDetector=S}}return C.lateLoadKey="RawFormatterComponent",C.\u0275fac=function(S){return new(S||C)(r.Y36(r.sBO))},C.\u0275cmp=r.Xpm({type:C,selectors:[["ng-component"]],hostVars:2,hostBindings:function(S,N){2&S&&r.Tol(N.elementClass)},inputs:{data:"data",elementClass:"elementClass"},decls:2,vars:1,template:function(S,N){1&S&&(r.ynx(0),r._uU(1),r.BQk()),2&S&&(r.xp6(1),r.Oqu(null==N.data?null:N.data.value))},encapsulation:2}),C})()},85822:(ee,U,a)=>{"use strict";a.d(U,{Q:()=>e});var r=a(5e3),d=a(32148),C=a(30652);let e=(()=>{class S{constructor(R,v){this.el=R,this.heading=v,this.disableCloseButton=!1,this.close=new r.vpe}ngOnChanges(){this.heading.height$.next(+getComputedStyle(this.el.nativeElement).height.slice(0,-2))}}return S.\u0275fac=function(R){return new(R||S)(r.Y36(r.SBq),r.Y36(d.p))},S.\u0275cmp=r.Xpm({type:S,selectors:[["nui-configurator-heading"]],inputs:{configuratorTitle:"configuratorTitle",disableCloseButton:"disableCloseButton"},outputs:{close:"close"},features:[r.TTD],decls:4,vars:3,consts:[[1,"configurator-heading","d-flex","justify-content-between","align-items-center","p-4"],[1,"nui-text-panel","nui-text-ellipsis",3,"title"],["nui-button","","type","button","displayStyle","action","icon","close",3,"disabled","click"]],template:function(R,v){1&R&&(r.TgZ(0,"div",0)(1,"span",1),r._uU(2),r.qZA(),r.TgZ(3,"button",2),r.NdJ("click",function(){return v.close.emit()}),r.qZA()()),2&R&&(r.xp6(1),r.Q6J("title",v.configuratorTitle),r.xp6(1),r.hij(" ",v.configuratorTitle," "),r.xp6(1),r.Q6J("disabled",v.disableCloseButton))},directives:[C.r0F],styles:["[_nghost-%COMP%]{z-index:1080;background-color:var(--nui-color-bg-content,#fff)}[_nghost-%COMP%]   .configurator-heading[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),S})()},71536:(ee,U,a)=>{"use strict";a.d(U,{e:()=>C});var r=a(95698),d=a(5e3);let C=(()=>{class e{constructor(){this.accordions=[]}registerAccordion(N){this.accordions.push({instance:N,openSubscription:N.openSubject.subscribe(()=>{this.closeAllAccordions(),N.open=!0}),destroySubscription:N.destroySubject.pipe((0,r.q)(1)).subscribe(()=>{this.removeAccordion(N)})})}closeAllAccordions(){this.accordions.forEach(N=>{N.instance.closeAccordion()})}removeAccordion(N){const R=this.accordions.findIndex(v=>v.instance===N);this.accordions[R].openSubscription.unsubscribe(),this.accordions.splice(R,1)}}return e.\u0275fac=function(N){return new(N||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},19837:(ee,U,a)=>{"use strict";a.d(U,{J:()=>O});var r=a(77579),d=a(25878),C=a(5e3),e=a(71536),S=a(30652),N=a(69808);function R(g,L){if(1&g&&C._UZ(0,"nui-icon",4),2&g){const M=C.oxw();C.Q6J("icon",M.open?"triangle-down":"triangle-left")}}const v=[[["","accordionHeader",""]],"*"],c=["[accordionHeader]","*"];let O=(()=>{class g{constructor(M,F){this.accordionCoordinator=M,this.cd=F,this.showOpenStateIcon=!0,this.state=d.Nc.DEFAULT,this.open=!1,this.openSubject=new r.x,this.destroySubject=new r.x}ngOnInit(){this.accordionCoordinator.registerAccordion(this)}openChange(M){M?this.openSubject.next():this.closeAccordion()}closeAccordion(){this.cd.markForCheck(),this.open=!1}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete()}}return g.\u0275fac=function(M){return new(M||g)(C.Y36(e.e),C.Y36(C.sBO))},g.\u0275cmp=C.Xpm({type:g,selectors:[["nui-widget-editor-accordion"]],inputs:{showOpenStateIcon:"showOpenStateIcon",state:"state"},ngContentSelectors:c,decls:6,vars:6,consts:[[1,"nui-widget-editor-accordion"],[3,"open","openChange"],["nuiExpanderHeader","",1,"d-flex","align-items-start"],["class","nui-widget-editor-accordion__edit-icon",3,"icon",4,"ngIf"],[1,"nui-widget-editor-accordion__edit-icon",3,"icon"]],template:function(M,F){1&M&&(C.F$t(v),C.TgZ(0,"div",0)(1,"nui-expander",1),C.NdJ("openChange",function(x){return F.openChange(x)}),C.TgZ(2,"div",2),C.Hsn(3),C.YNc(4,R,1,1,"nui-icon",3),C.qZA(),C.Hsn(5,1),C.qZA()()),2&M&&(C.xp6(1),C.Q6J("open",F.open),C.xp6(1),C.ekj("error-state","critical"===F.state)("warning-state","warning"===F.state),C.xp6(2),C.Q6J("ngIf",F.showOpenStateIcon))},directives:[S.Fxv,N.O5,S.oJW],styles:[".nui-widget-editor-accordion nui-form-field:last-child .nui-form-field{margin-bottom:0}.nui-widget-editor-accordion__edit-icon{padding:10px;margin-left:auto;margin-right:5px}.nui-widget-editor-accordion .nui-expander--expanded{padding-bottom:0}.nui-widget-editor-accordion .nui-expander__header-icon{display:none}.nui-widget-editor-accordion .nui-expander__header .error-state{background-color:var(--nui-color-semantic-critical-bg,#fceae6)}.nui-widget-editor-accordion .nui-expander__header .warning-state{background-color:var(--nui-color-semantic-warning-bg,#fff9e6)}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader]{border-top:1px solid;border-top-color:var(--nui-color-line-default,#d9d9d9);min-height:50px}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]{overflow:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div{overflow-x:hidden}.nui-widget-editor-accordion .nui-expander__header [nuiexpanderheader] [accordionheader]>div .nui-text-secondary{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget-editor-accordion .nui-expander__body{margin:0;padding:0;border-left:none}\n"],encapsulation:2,changeDetection:0}),g})()},64406:(ee,U,a)=>{"use strict";a.d(U,{b:()=>T});var r=a(8817),d=a.n(r),C=a(61135),e=a(77579),S=a(82722),N=a(87686),R=a(53450),v=a(25878),c=a(69155),O=a(5e3),g=a(52382),L=a(45122),M=a(85822),F=a(61842),G=a(10628),x=a(69808);const A=["formPizzagnaComponent"];function z(h,b){if(1&h){const w=O.EpF();O.TgZ(0,"nui-pizzagna",6,7),O.NdJ("pizzagnaChange",function(Z){return O.CHM(w),O.oxw(2).formPizzagna=Z}),O.qZA()}if(2&h){const w=O.oxw(2);O.Q6J("rootNode",w.formRoot)("pizzagna",w.formPizzagna)}}function P(h,b){if(1&h&&(O.TgZ(0,"div",4),O.YNc(1,z,2,2,"nui-pizzagna",5),O.qZA()),2&h){const w=O.oxw();O.Q6J("formGroup",w.form),O.xp6(1),O.Q6J("ngIf",w.formPizzagna)}}let T=(()=>{class h{constructor(w,H,Z,oe){this.changeDetector=w,this.formBuilder=H,this.previewService=Z,this.configurator=oe,this.navigationControl=new C.X({busyState:{busy:!1},allowStepChange:!0}),this.busy=!1,this.destroy$=new e.x,this.form=this.formBuilder.group({})}set formPizzagnaComponent(w){var H;null===(H=null==w?void 0:w.eventBus)||void 0===H||H.getStream(R.xZ).pipe((0,S.R)(this.destroy$)).subscribe(Z=>{var oe,pe,ue;const ne=Z.payload;ne&&ne.id&&(null===(ue=null===(pe=null===(oe=this.configurator)||void 0===oe?void 0:oe.previewPizzagnaComponent)||void 0===pe?void 0:pe.eventBus)||void 0===ue||ue.getStream(ne.id).next(ne.payload))}),this._formPizzagnaComponent=w}ngOnInit(){var w;this.previewService.preview=null===(w=this.configurator.previewWidget)||void 0===w?void 0:w.pizzagna[v.xW.Configuration],this.previewService.previewChanged.pipe((0,S.R)(this.destroy$)).subscribe(H=>{this.onPreviewPizzagnaUpdate(H),this.changeDetector.detectChanges()}),this.configurator.submitError.pipe((0,S.R)(this.destroy$)).subscribe(()=>{this.toggleBusy()}),this.changeDetector.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreviewPizzagnaUpdate(w){var H;const Z=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(H=this.configurator.previewWidget)||void 0===H?void 0:H.pizzagna),{[v.xW.Configuration]:w})});this.configurator.updateWidget(Z);const oe=d()(w,h.TITLE_PATH,"");this.configuratorTitle=$localize`Editing ${oe}`}onFinish(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0});this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}}return h.lateLoadKey="WidgetEditorComponent",h.TITLE_PATH="header.properties.title",h.\u0275fac=function(w){return new(w||h)(O.Y36(O.sBO),O.Y36(g.qu),O.Y36(L.m),O.Y36(c.n))},h.\u0275cmp=O.Xpm({type:h,selectors:[["nui-widget-editor"]],viewQuery:function(w,H){if(1&w&&O.Gf(A,5),2&w){let Z;O.iGM(Z=O.CRH())&&(H.formPizzagnaComponent=Z.first)}},hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",formRoot:"formRoot"},decls:5,vars:5,consts:function(){let b;return b=$localize`:␟afa960379d26eb20fd22e6e10537c1c5ec74c5d1␟4319441956121197474:Save Changes`,[[3,"configuratorTitle","disableCloseButton","close"],["finishText",b,3,"hideHeader","navigationControl","finish","cancel"],[3,"stepTemplate"],["step1",""],[3,"formGroup"],[3,"rootNode","pizzagna","pizzagnaChange",4,"ngIf"],[3,"rootNode","pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(w,H){if(1&w&&(O.TgZ(0,"nui-configurator-heading",0),O.NdJ("close",function(){return H.onCancel()}),O.qZA(),O.TgZ(1,"nui-dashwiz",1),O.NdJ("finish",function(){return H.onFinish()})("cancel",function(){return H.onCancel()}),O._UZ(2,"nui-dashwiz-step",2),O.qZA(),O.YNc(3,P,2,2,"ng-template",null,3,O.W1O)),2&w){const Z=O.MAs(4);O.Q6J("configuratorTitle",H.configuratorTitle)("disableCloseButton",H.busy),O.xp6(1),O.Q6J("hideHeader",!0)("navigationControl",H.navigationControl),O.xp6(1),O.Q6J("stepTemplate",Z)}},directives:[M.Q,F.i,G.u,g.JL,g.sg,x.O5,N.R],encapsulation:2,changeDetection:0}),h})()},10628:(ee,U,a)=>{"use strict";a.d(U,{u:()=>R});var r=a(5e3),d=a(30652),C=a(69808),e=a(8083);function S(v,c){1&v&&r.GkF(0)}const N=function(v){return{"nui-dashwiz-step--active":v}};let R=(()=>{class v{constructor(){this.hidden=!1,this.spinnerSize=d.Eye.Large,this.enter=new r.vpe,this.valid=new r.vpe,this.exit=new r.vpe,this.next=new r.vpe,this.busyConfig={busy:!1},this.visited=!1,this.active=!1,this.complete=!1,this.icon="step",this.iconColor="",this.enterStep=O=>{this.enter.emit(O)},this.exitStep=O=>{this.exit.emit(O)},this.nextStep=O=>{this.next.emit(O)},this.applyEnteringStep=()=>{this.active=!0,this.icon="step-active",this.iconColor="black"},this.applyExitingStep=()=>{this.active=!1,this.visited=!0,this.icon="step-complete",this.iconColor=""}}ngOnInit(){this.nextText=this.nextText||$localize`Next`}ngOnChanges(O){O.stepControl&&this.valid.emit(this.stepControl)}}return v.\u0275fac=function(O){return new(O||v)},v.\u0275cmp=r.Xpm({type:v,selectors:[["nui-dashwiz-step"]],inputs:{stepTemplate:"stepTemplate",stepControl:"stepControl",title:"title",nextText:"nextText",hidden:"hidden",disabled:"disabled",spinnerSize:"spinnerSize"},outputs:{enter:"enter",valid:"valid",exit:"exit",next:"next"},features:[r.TTD],decls:4,vars:9,consts:[["nui-busy","",1,"nui-dashwiz-step","animated","h-100",3,"ngClass","busy"],["cdkScrollable","",1,"h-100","overflow-auto","nui-scroll-shadows","configurator-scrollable"],[4,"ngTemplateOutlet"],[3,"percent","allowCancel","message","size"]],template:function(O,g){1&O&&(r.TgZ(0,"div",0)(1,"div",1),r.YNc(2,S,1,0,"ng-container",2),r.qZA(),r._UZ(3,"nui-spinner",3),r.qZA()),2&O&&(r.Q6J("ngClass",r.VKq(7,N,g.active))("busy",g.busyConfig.busy),r.xp6(2),r.Q6J("ngTemplateOutlet",g.stepTemplate),r.xp6(1),r.Q6J("percent",g.busyConfig.percent)("allowCancel",g.busyConfig.allowCancel)("message",g.busyConfig.message)("size",g.spinnerSize))},directives:[d.ERI,C.mk,e.PQ,C.tP,d.ORR],styles:[".nui-dashwiz-step[_ngcontent-%COMP%]{display:none}.nui-dashwiz-step--active[_ngcontent-%COMP%]{display:block}"]}),v})()},4235:(ee,U,a)=>{"use strict";a.d(U,{P:()=>R});var r=a(5e3),d=a(30652),C=a(69808);function e(v,c){if(1&v){const O=r.EpF();r.TgZ(0,"button",6),r.NdJ("click",function(){return r.CHM(O),r.oxw().onBack()}),r.TgZ(1,"span"),r.SDv(2,7),r.qZA()()}if(2&v){const O=r.oxw();r.Q6J("disabled",O.busy)}}function S(v,c){if(1&v){const O=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",function(){return r.CHM(O),r.oxw().onNext()}),r.TgZ(1,"span"),r._uU(2),r.qZA()()}if(2&v){const O=r.oxw();r.Q6J("displayStyle",O.canFinish?"default":"primary")("disabled",O.busy),r.xp6(2),r.Oqu(O.nextText)}}function N(v,c){if(1&v){const O=r.EpF();r.TgZ(0,"button",9),r.NdJ("click",function(){return r.CHM(O),r.oxw().onFinish()}),r.TgZ(1,"span"),r._uU(2),r.qZA()()}if(2&v){const O=r.oxw();r.Q6J("isBusy",O.busy)("disabled",O.busy),r.xp6(2),r.Oqu(O.finishText)}}let R=(()=>{class v{constructor(O){this.changeDetector=O,this.busy=!1,this.canFinish=!1,this.canProceed=!1,this.isFirstStepActive=!1,this.isLastStepActive=!1,this.cancel=new r.vpe,this.next=new r.vpe,this.back=new r.vpe,this.finish=new r.vpe}onCancel(){this.cancel.emit()}onNext(){this.next.emit()}onBack(){this.back.emit()}onFinish(){this.finish.emit()}}return v.lateLoadKey="DashwizButtonsComponent",v.\u0275fac=function(O){return new(O||v)(r.Y36(r.sBO))},v.\u0275cmp=r.Xpm({type:v,selectors:[["nui-dashwiz-buttons"]],inputs:{busy:"busy",canFinish:"canFinish",canProceed:"canProceed",isFirstStepActive:"isFirstStepActive",isLastStepActive:"isLastStepActive",nextText:"nextText",finishText:"finishText"},outputs:{cancel:"cancel",next:"next",back:"back",finish:"finish"},decls:7,vars:4,consts:function(){let c,O;return c=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,O=$localize`:␟cda31dbd724cf5f4fa7a4274d9120651490c8a8c␟8890553633144307762:Back`,[[1,"d-flex","justify-content-end","p-4"],["nui-button","","type","button",1,"nui-dashwiz-buttons__cancel-button",3,"disabled","click"],c,["class","ml-3 nui-dashwiz-buttons__back-button","nui-button","","icon","caret-left","type","button",3,"disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__next-button","nui-button","","type","button",3,"displayStyle","disabled","click",4,"ngIf"],["class","ml-3 nui-dashwiz-buttons__finish-button","nui-button","","type","button","displayStyle","primary",3,"isBusy","disabled","click",4,"ngIf"],["nui-button","","icon","caret-left","type","button",1,"ml-3","nui-dashwiz-buttons__back-button",3,"disabled","click"],O,["nui-button","","type","button",1,"ml-3","nui-dashwiz-buttons__next-button",3,"displayStyle","disabled","click"],["nui-button","","type","button","displayStyle","primary",1,"ml-3","nui-dashwiz-buttons__finish-button",3,"isBusy","disabled","click"]]},template:function(O,g){1&O&&(r.TgZ(0,"div",0)(1,"button",1),r.NdJ("click",function(){return g.onCancel()}),r.TgZ(2,"span"),r.SDv(3,2),r.qZA()(),r.YNc(4,e,3,1,"button",3),r.YNc(5,S,3,3,"button",4),r.YNc(6,N,3,3,"button",5),r.qZA()),2&O&&(r.xp6(1),r.Q6J("disabled",g.busy),r.xp6(3),r.Q6J("ngIf",!g.isFirstStepActive),r.xp6(1),r.Q6J("ngIf",!g.isLastStepActive&&g.canProceed),r.xp6(1),r.Q6J("ngIf",g.canFinish||g.isLastStepActive))},directives:[d.r0F,C.O5],encapsulation:2}),v})()},61842:(ee,U,a)=>{"use strict";a.d(U,{i:()=>ue});var r=a(5e3),d=a(62516),C=a.n(d),e=a(36397),S=a.n(e),N=a(34235),R=a.n(N),v=a(61135),c=a(10628),O=a(4235),g=a(30652),L=a(59551),M=a(69808),F=a(47969),G=a(47429);const x=["container"],A=["stepTitle"],z=function(ne){return{"min-width.px":ne}};function P(ne,ae){if(1&ne&&(r.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"span",18)(5,"span",19,20),r._uU(7),r.qZA(),r.TgZ(8,"div",21)(9,"div",22),r._UZ(10,"div",23),r.qZA(),r._UZ(11,"nui-icon",24),r.TgZ(12,"div",25),r._UZ(13,"div",23),r.qZA()()()()()()()),2&ne){const K=r.oxw().$implicit,q=r.oxw(3);r.xp6(7),r.hij(" ",K.title,""),r.xp6(3),r.Q6J("ngStyle",r.VKq(5,z,q.stepLineWidth)),r.xp6(1),r.Q6J("icon",K.icon)("iconColor",K.iconColor),r.xp6(2),r.Q6J("ngStyle",r.VKq(7,z,q.stepLineWidth))}}const T=function(ne,ae,K,q,se,te){return{"nui-dashwiz__header-step--first":ne,"nui-dashwiz__header-step--last":ae,"nui-dashwiz__header-step--visited":K,"nui-dashwiz__header-step--disabled":q,"nui-dashwiz__header-step--active":se,"nui-dashwiz__header-step--complete":te}};function h(ne,ae){if(1&ne){const K=r.EpF();r.TgZ(0,"li",12),r.NdJ("click",function(){const te=r.CHM(K).$implicit;return r.oxw(3).selectStep(te)}),r.YNc(1,P,14,9,"div",13),r.qZA()}if(2&ne){const K=ae.$implicit,q=ae.first,se=ae.last,te=r.oxw(3);r.Q6J("ngClass",r.HTZ(2,T,q,se,K.visited,K.disabled||!K.visited||te.currentStep.busyConfig.busy,K.active,K.complete)),r.xp6(1),r.Q6J("ngIf",!K.hidden)}}function b(ne,ae){if(1&ne&&(r.TgZ(0,"ul",10),r.YNc(1,h,2,9,"li",11),r.qZA()),2&ne){const K=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",K.steps)}}function w(ne,ae){if(1&ne&&(r.TgZ(0,"div",8),r.YNc(1,b,2,1,"ul",9),r.qZA()),2&ne){const K=r.oxw();r.ekj("nui-dashwiz__header--lines-stretched",K.stretchStepLines),r.xp6(1),r.Q6J("ngIf",K.steps)}}function H(ne,ae){}function Z(ne,ae){}const oe=function(){return["cancel","next","back","finish"]},pe=["*"];let ue=(()=>{class ne{constructor(K,q,se,te){this.changeDetector=K,this.componentFactoryResolver=q,this.logger=se,this.dashwizService=te,this.hideHeader=!1,this.canProceed=!1,this.canFinish=!1,this.finishText=ne.placeholderFinishText,this.stretchStepLines=!1,this.stepNavigated=new r.vpe,this.cancel=new r.vpe,this.finish=new r.vpe,this.next=new r.vpe,this.back=new r.vpe,this.navigationControl=new v.X({busyState:{busy:!1},allowStepChange:!0}),this.stepLineWidth=65,this.previousStepIndex=0,this.onBack=()=>{if(!R()(this.stepIndex)){let fe=this.arraySteps[this.stepIndex-1];(fe.hidden||fe.disabled)&&(fe=C()(this.arraySteps.slice(0).reverse(),Ee=>!Ee.hidden,S()(this.arraySteps.slice(0).reverse(),this.arraySteps[this.stepIndex])+1)),this.selectStep(fe),this.back.emit()}},this.onNext=()=>{let fe=this.arraySteps[this.stepIndex+1];this.handleStepControl(this.currentStep),this.currentStep.nextStep({currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.currentStep,previousStepIndex:this.stepIndex}),(fe.hidden||fe.disabled&&!R()(fe.stepControl))&&(fe=C()(this.arraySteps,Ee=>!Ee.hidden,this.stepIndex+1)),(R()(this.currentStep.stepControl)||this.currentStep.stepControl)&&(this.currentStep.complete=!0),fe.disabled&&!fe.visited&&(this.currentStep.complete=!1),this.selectStep(fe),this.next.emit()},this.onFinish=()=>{this.finish.emit()},this.onCancel=()=>{this.cancel.emit(0!==this.steps.toArray().filter(fe=>fe.complete).length)},this.buttonPortalActionMap={cancel:this.onCancel,next:this.onNext,back:this.onBack,finish:this.onFinish},te&&(te.component=this)}ngOnInit(){this.buttonComponentTypes=this.buttonComponentTypes||[O.P.lateLoadKey],this.finishText===ne.placeholderFinishText&&this.logger.warn(`DashwizComponent input "finishText" is using placeholder text\n"${ne.placeholderFinishText}". A value should be specified.`)}ngDoCheck(){this.currentStep&&(this.buttonProperties={busy:this.currentStep.busyConfig.busy,canProceed:this.canProceed,canFinish:this.canFinish,isLastStepActive:this.steps.last.active,isFirstStepActive:this.steps.first.active,nextText:this.currentStep.nextText,finishText:this.finishText})}ngAfterContentInit(){const K=this.steps.filter(q=>q.active);this.arraySteps=this.steps.toArray(),0===K.length&&(this.currentStep=this.steps.first,this.selectStep(this.currentStep),this.changeDetector.detectChanges()),this.steps.toArray().forEach(q=>{q.valid.subscribe(se=>{R()(se)||this.handleStepControl(q)})}),this.navigationControl.subscribe(q=>{this.currentStep.busyConfig=q.busyState,q.allowStepChange&&!R()(this.futureStep)&&this.currentStep!==this.futureStep&&(this.enterAnotherStep(),this.futureStep=void 0)})}ngAfterViewChecked(){this.stretchStepLines&&(this.stepLineWidth=Math.round(this.getLargestLabelWidth()/2),this.changeDetector.detectChanges())}ngOnDestroy(){this.steps.toArray().forEach(K=>K.valid.unsubscribe()),this.navigationControl.unsubscribe(),this.dashwizService.component=void 0}addStepDynamic(K,q){const se=this.componentFactoryResolver.resolveComponentFactory(c.u),te=this.dynamicStep.createComponent(se);return te.instance.stepTemplate=K.stepTemplate,this.arraySteps.splice(q,0,te.instance),this.steps.reset(this.arraySteps),te.instance}disableStep(K){const q=this.arraySteps.indexOf(K);this.arraySteps[q].disabled=!0,this.changeDetector.detectChanges()}enableStep(K){const q=this.arraySteps.indexOf(K);this.arraySteps[q].disabled=!1,this.changeDetector.detectChanges()}hideStep(K){const q=this.arraySteps.indexOf(K);this.arraySteps[q].hidden=!0}showStep(K){const q=this.arraySteps.indexOf(K);this.arraySteps[q].hidden=!1}goToStep(K){this.selectStep(this.arraySteps[K])}selectStep(K){K.disabled||(this.futureStep=K,this.currentStep.exitStep({currentStepIndex:this.arraySteps.indexOf(this.futureStep),currentStep:this.futureStep,previousStep:this.arraySteps[this.stepIndex],previousStepIndex:this.stepIndex}),this.navigationControl.value.allowStepChange&&this.enterAnotherStep())}enterAnotherStep(){var K;this.currentStep.applyExitingStep(),null===(K=this.futureStep)||void 0===K||K.enterStep(),this.futureStep&&(this.currentStep=this.futureStep),this.currentStep.applyEnteringStep(),this.stepIndex=this.arraySteps.indexOf(this.currentStep),this.stepNavigatedEvent={currentStepIndex:this.stepIndex,currentStep:this.currentStep,previousStep:this.arraySteps[this.previousStepIndex],previousStepIndex:this.previousStepIndex},this.stepNavigated.emit(this.stepNavigatedEvent),this.previousStepIndex=this.stepIndex}onButtonPortalOutput(K){var q,se;null===(se=(q=this.buttonPortalActionMap)[K.id])||void 0===se||se.call(q)}disableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(K=>{K.disabled=!0})}enableFollowingSteps(){this.arraySteps.slice(this.stepIndex+1).map(K=>{K.disabled=!1})}handleStepControl(K){R()(K.stepControl)||(K.stepControl?this.enableFollowingSteps():this.disableFollowingSteps())}getLargestLabelWidth(){const K=this.stepTitles.map(q=>q.nativeElement.offsetWidth);return Math.round(Math.max(...K))}}return ne.placeholderFinishText="Action",ne.\u0275fac=function(K){return new(K||ne)(r.Y36(r.sBO),r.Y36(r._Vd),r.Y36(g.mQy),r.Y36(L.e))},ne.\u0275cmp=r.Xpm({type:ne,selectors:[["nui-dashwiz"]],contentQueries:function(K,q,se){if(1&K&&r.Suo(se,c.u,4),2&K){let te;r.iGM(te=r.CRH())&&(q.steps=te)}},viewQuery:function(K,q){if(1&K&&(r.Gf(x,5,r.s_b),r.Gf(A,5)),2&K){let se;r.iGM(se=r.CRH())&&(q.dynamicStep=se.first),r.iGM(se=r.CRH())&&(q.stepTitles=se)}},hostAttrs:[1,"flex-grow-1","overflow-auto"],inputs:{hideHeader:"hideHeader",canProceed:"canProceed",canFinish:"canFinish",finishText:"finishText",stretchStepLines:"stretchStepLines",buttonComponentTypes:"buttonComponentTypes",navigationControl:"navigationControl"},outputs:{stepNavigated:"stepNavigated",cancel:"cancel",finish:"finish",next:"next",back:"back"},ngContentSelectors:pe,decls:10,vars:6,consts:[[1,"nui-dashwiz","d-flex","flex-column","h-100"],["class","nui-dashwiz__header",3,"nui-dashwiz__header--lines-stretched",4,"ngIf"],[1,"nui-scroll-shadows","flex-grow-1","overflow-auto"],["container",""],[1,"nui-dashwiz__footer"],["nuiComponentPortal","","componentId","dashwizButtons",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-dashwiz__header"],["class","nui-dashwiz__header-steps",4,"ngIf"],[1,"nui-dashwiz__header-steps"],["class","nui-dashwiz__header-step",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nui-dashwiz__header-step",3,"ngClass","click"],["class","nui-dashwiz__header-step-container",4,"ngIf"],[1,"nui-dashwiz__header-step-container"],[1,"nui-dashwiz__header-step-row"],[1,"nui-dashwiz__header-step-col"],[1,"nui-dashwiz__header-step-content"],[1,"nui-dashwiz__header-step-link"],[1,"nui-dashwiz__header-step-title"],["stepTitle",""],[1,"nui-dashwiz__header-step-link-container"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-right"],[1,"nui-dashwiz__header-step-line",3,"ngStyle"],[3,"icon","iconColor"],[1,"nui-dashwiz__header-step-col","nui-dashwiz__header-step-col-left"]],template:function(K,q){if(1&K){const se=r.EpF();r.F$t(),r.TgZ(0,"div",0),r.YNc(1,w,2,3,"div",1),r.TgZ(2,"div",2),r.Hsn(3),r.YNc(4,H,0,0,"ng-template",null,3,r.W1O),r.qZA(),r.TgZ(6,"div",4),r.ynx(7,5,6),r.NdJ("output",function(fe){return q.onButtonPortalOutput(fe)}),r.YNc(9,Z,0,0,"ng-template",7),r.NdJ("attached",function(fe){return r.CHM(se),r.MAs(8).attached(fe)}),r.BQk(),r.qZA()()}if(2&K){const se=r.MAs(8);r.xp6(1),r.Q6J("ngIf",!q.hideHeader),r.xp6(6),r.Q6J("componentType",1===q.buttonComponentTypes.length?q.buttonComponentTypes[0]:q.buttonComponentTypes[q.stepIndex])("properties",q.buttonProperties)("outputs",r.DdM(5,oe)),r.xp6(2),r.Q6J("cdkPortalOutlet",se.portal)}},directives:[M.O5,M.sg,M.mk,M.PC,g.oJW,F.$,G.Pl],styles:[".nui-dashwiz__header[_ngcontent-%COMP%]{padding:10px 15px;background-color:var(--nui-color-bg-secondary,#fafafa);border-bottom:1px solid #d9d9d9;border-bottom:1px solid var(--nui-color-line-default, #d9d9d9);overflow:hidden;text-align:center;display:flex;justify-content:center;-webkit-user-select:none;-o-user-select:none;user-select:none}.nui-dashwiz__header-steps[_ngcontent-%COMP%]{margin-bottom:0;white-space:nowrap;display:inline-flex}.nui-dashwiz__header-step[_ngcontent-%COMP%]{line-height:normal;display:inline-flex;cursor:pointer}.nui-dashwiz__header-step--disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:default}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.nui-dashwiz__header-step--visited[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--first[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%], .nui-dashwiz__header-step--last[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%]{border-color:transparent;opacity:0}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]{cursor:default}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-bg-dark,#111)}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]:hover   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{text-decoration:none}.nui-dashwiz__header-step--active[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-left[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step--complete[_ngcontent-%COMP%]   .nui-dashwiz__header-step-link[_ngcontent-%COMP%]   .nui-dashwiz__header-step-col-right[_ngcontent-%COMP%] > .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-active,#0079aa)}.nui-dashwiz__header-step-container[_ngcontent-%COMP%]{display:inline-table;width:100%}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]{display:none}.nui-dashwiz__header-step-container-bottom[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0}.nui-dashwiz__header-step-row[_ngcontent-%COMP%]{display:table-row}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.nui-dashwiz__header-step-col[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-color:var(--nui-color-line-default,#d9d9d9)}.nui-dashwiz__header-step-col-right[_ngcontent-%COMP%]   .nui-dashwiz__header-step-line[_ngcontent-%COMP%]{margin-right:-1px}.nui-dashwiz__header-step-line[_ngcontent-%COMP%]{border-bottom:solid 2px;height:2px}.nui-dashwiz__header-step-link[_ngcontent-%COMP%]{color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6));transition:color .3s}.nui-dashwiz__header-step-link-container[_ngcontent-%COMP%]{display:flex;align-content:baseline;justify-content:center;align-items:center}.nui-dashwiz__header-step-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis;vertical-align:middle;display:inline-block;max-width:140px;margin:0 0 5px;text-decoration:inherit}.nui-dashwiz__header.nui-dashwiz__header--lines-stretched[_ngcontent-%COMP%]   .nui-dashwiz__header-step-title[_ngcontent-%COMP%]{max-width:unset}.nui-dashwiz__footer[_ngcontent-%COMP%]{z-index:1080;background-color:var(--nui-color-bg-content,#fff);border-top:solid 1px var(--nui-color-line-default, #d9d9d9)}"]}),ne})()},59551:(ee,U,a)=>{"use strict";a.d(U,{e:()=>d});var r=a(5e3);let d=(()=>{class C{constructor(){}}return C.\u0275fac=function(S){return new(S||C)},C.\u0275prov=r.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},37716:(ee,U,a)=>{"use strict";a.d(U,{F:()=>d});var r=a(52382);function d(C){if(C.valid||C.untouched)return!1;if(C instanceof r.cw)for(const e of Object.keys(C.controls))if(d(C.controls[e]))return!0;if(C instanceof r.Oe)for(let e=0;e<C.length;e++)if(d(C.at(e)))return!0;return(C.touched||C.dirty)&&!!C.errors}},73193:(ee,U,a)=>{"use strict";a.d(U,{l:()=>C});var r=a(32656),d=a(5e3);let C=(()=>{class e{constructor(N){this.widgetTypesService=N}transform(N,R="widget"){var v,c;return(null==N?void 0:N.type)?null===(c=null===(v=this.widgetTypesService.getWidgetType(N.type,N.version).paths)||void 0===v?void 0:v[R])||void 0===c?void 0:c.root:null}}return e.\u0275fac=function(N){return new(N||e)(d.Y36(r.x,16))},e.\u0275pipe=d.Yjl({name:"nuiPizzagnaRoot",type:e,pure:!0}),e})()},16193:(ee,U,a)=>{"use strict";a.d(U,{F:()=>g});var r=a(39841),d=a(54482),C=a(25403),e=a(25032),N=a(68675),R=a(54004),v=a(25878),c=a(37716),O=a(5e3);let g=(()=>{class L{transform(F){if(!F)throw new Error("Provided form is undefined");return(0,r.a)([F.statusChanges,F.valueChanges]).pipe((0,N.O)(null),(0,R.U)(()=>(0,c.F)(F)?v.Nc.CRITICAL:v.Nc.DEFAULT),function S(L,M){return(0,d.e)((F,G)=>{const x=new Set;F.subscribe((0,C.x)(G,A=>{const z=L?L(A):A;x.has(z)||(x.add(z),G.next(A))})),null==M||M.subscribe((0,C.x)(G,()=>x.clear(),e.Z))})}())}}return L.\u0275fac=function(F){return new(F||L)},L.\u0275pipe=O.Yjl({name:"nuiWidgetEditorAccordionFormState",type:L,pure:!1}),L})()},15838:(ee,U,a)=>{"use strict";a.d(U,{d:()=>N});var r=a(39841),d=a(68675),C=a(54004),e=a(37716),S=a(5e3);let N=(()=>{class R{transform(c,O,g=R.ERROR_ICON_DEFAULT){if(!c)throw new Error("Provided form is undefined");return(0,r.a)([c.statusChanges,c.valueChanges]).pipe((0,d.O)(null),(0,C.U)(()=>(0,e.F)(c)?g:O))}}return R.ERROR_ICON_DEFAULT="status_critical",R.\u0275fac=function(c){return new(c||R)},R.\u0275pipe=S.Yjl({name:"nuiFormHeaderIconPipe",type:R,pure:!1}),R})()},61874:(ee,U,a)=>{"use strict";a.d(U,{q:()=>O});var r=a(34235),d=a.n(r),C=a(77579),e=a(61135),S=a(82722),N=a(25878),R=a(81466),v=a(5e3),c=a(59551);let O=(()=>{class g{constructor(M,F){this.eventBus=M,this.dashwizService=F,this.onDestroy$=new C.x,this.dataSourceCreated$=new C.x,this.error$=new C.x,this.busy$=new e.X(!1),this.dataSourceFields$=new e.X([]),this.eventBus.subscribeUntil(R.gg,this.onDestroy$,G=>{!G.payload||this.onDataSourceCreated(G.payload)}),this.eventBus.subscribeUntil(R.PF,this.onDestroy$,G=>{var x;if(null===(x=G.payload)||void 0===x?void 0:x.error)this.error$.next(G.payload.error);else{this.error$.next(null);const A=d()(G.payload.result)?G.payload:G.payload.result||{};(null==A?void 0:A.dataFields)&&this.dataSourceFields$.next(A.dataFields)}})}onDataSourceCreated(M){var F;this.dataSource=M,this.dataSourceCreated$.next(),null===(F=this.dataSource.busy)||void 0===F||F.pipe((0,S.R)(this.dataSourceCreated$)).subscribe(G=>{var x,A;null===(A=null===(x=this.dashwizService)||void 0===x?void 0:x.component)||void 0===A||A.navigationControl.next({busyState:{busy:G},allowStepChange:!G}),this.busy$.next(G)})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return g.\u0275fac=function(M){return new(M||g)(v.LFG(N.nY),v.LFG(c.e))},g.\u0275prov=v.Yz7({token:g,factory:g.\u0275fac}),g})()},32148:(ee,U,a)=>{"use strict";a.d(U,{p:()=>C});var r=a(61135),d=a(5e3);let C=(()=>{class e{constructor(){this.height$=new r.X(0)}}return e.\u0275fac=function(N){return new(N||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},42971:(ee,U,a)=>{"use strict";a.d(U,{J:()=>z});var r=a(11420),d=a(90733),C=a.n(d),e=a(75946),S=a.n(e),N=a(77579),R=a(60515),v=a(39646),c=a(68306),O=a(63900),g=a(70262),L=a(82722),M=a(39300),F=a(30652),G=a(32656),x=a(69155),A=a(5e3);let z=(()=>{class P{constructor(h,b,w,H,Z,oe,pe){this.componentFactoryResolver=h,this.widgetTypesService=b,this.injector=w,this.appRef=H,this.logger=Z,this.router=pe,this.close$=new N.x,this.handleSubmit=(ue,ne)=>ae=>ae.pipe(this.trySubmit(ne,ue),this.updateDashboard(ue.dashboardComponent)),this.trySubmit=(ue,ne)=>ae=>ae.pipe((0,O.w)(K=>K&&S()(ue)?ue(K,ne).pipe((0,g.K)(q=>(this.logger.error(q),this.componentRef.instance.handleSubmitError(),R.E))):(0,v.of)(K))),this.updateDashboard=ue=>ne=>new c.y(ae=>ne.subscribe(K=>{if(K){let q;K.id=K.id||(0,F.VjN)(),q=ue.dashboard.widgets[K.id]?Object.assign(Object.assign({},K),{pizzagna:Object.assign(Object.assign({},this.widgetTypesService.getWidgetType(K.type,K.version).widget),{configuration:K.pizzagna.configuration})}):K,ue.removeWidget(q.id,!1),setTimeout(()=>{ue.updateWidget(q)})}this.close(),ae.next()})),this.renderer=oe.createRenderer(null,null)}open(h){var b;const w={dashboardComponent:h.dashboardComponent,widget:C()(h.widget)};this.componentRef=this.appendComponentToBody();const H=this.componentRef.instance;return H.formPortal=h.portalBundle.portal,H.previewWidget=C()(h.widget),(null===(b=h.portalBundle)||void 0===b?void 0:b.attached)&&H.formPortalAttached.pipe((0,L.R)(this.close$)).subscribe(h.portalBundle.attached),H.changeDetector.detectChanges(),H.result.asObservable().pipe(this.handleSubmit(w,h.trySubmit))}close(){!this.renderer||(this.close$.next(),this.renderer.removeChild(document.body,this.componentRef.hostView.rootNodes[0]),this.appRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.renderer.removeStyle(document.body,"overflow"))}appendComponentToBody(){const b=this.componentFactoryResolver.resolveComponentFactory(x.n).create(this.injector);return this.appRef.attachView(b.hostView),this.renderer.appendChild(document.body,b.hostView.rootNodes[0]),this.renderer.setStyle(document.body,"overflow","hidden"),this.router&&this.router.events.pipe((0,M.h)(w=>w instanceof r.m2),(0,L.R)(this.close$)).subscribe(()=>this.close()),b}}return P.\u0275fac=function(h){return new(h||P)(A.LFG(A._Vd),A.LFG(G.x),A.LFG(A.zs3),A.LFG(A.z2F),A.LFG(F.mQy),A.LFG(A.FYo),A.LFG(r.F0,8))},P.\u0275prov=A.Yz7({token:P,factory:P.\u0275fac}),P})()},36216:(ee,U,a)=>{"use strict";a.d(U,{a:()=>R});var r=a(77579),d=a(42339),C=a(53450),e=a(25878),S=a(5e3),N=a(45122);let R=(()=>{class v{constructor(O,g,L){this.eventBus=O,this.previewService=g,this.pizzagnaService=L,this.destroy$=new r.x}ngAfterViewInit(){this.buildForm(),this.toPreview(this.component.form)}setComponent(O,g){this.component=O,this.componentId=g}getPreview(){return this.previewService.preview}updatePreview(O){this.previewService.preview=O}updateFormPizzagna(O){this.pizzagnaService.updatePizzagna(O),this.eventBus.getStream(C.M).next({payload:{path:"",value:O}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return v.\u0275fac=function(O){return new(O||v)(S.LFG(e.nY),S.LFG(N.m),S.LFG(d.p))},v.\u0275prov=S.Yz7({token:v,factory:v.\u0275fac}),v})()},75675:(ee,U,a)=>{"use strict";a.d(U,{l:()=>F});var r=a(18680),d=a.n(r),C=a(12498),e=a.n(C),S=a(95835),N=a.n(S),R=a(82722),v=a(30652),c=a(42339),O=a(25878),g=a(36216),L=a(5e3),M=a(45122);let F=(()=>{class G extends g.a{constructor(A,z,P){super(A,z,P),this.shouldReadForm=!1}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var A,z,P;const T=this.getPreview(),h=(null===(P=null===(z=null===(A=null==T?void 0:T.tiles)||void 0===A?void 0:A.properties)||void 0===z?void 0:z.nodes)||void 0===P?void 0:P.map(H=>({id:H,componentType:T[H].componentType})))||[],b=null==h?void 0:h.map(H=>H.id);this.pizzagnaService.createComponentsFromTemplate("tiles",b);let w=this.pizzagnaService.pizzagna;w=(0,v.zdu)(w,`${O.xW.Data}.tiles.properties.tiles`,h),setTimeout(()=>this.shouldReadForm=!0),this.updateFormPizzagna(w)}toPreview(A){var z;null===(z=A.get("tiles"))||void 0===z||z.valueChanges.pipe((0,R.R)(this.destroy$)).subscribe(P=>{var T,h;if(!this.shouldReadForm)return;let b=this.getPreview();const w=(P||[]).map(oe=>oe.id),H=d()(null===(h=null===(T=null==b?void 0:b.tiles)||void 0===T?void 0:T.properties)||void 0===h?void 0:h.nodes,w);H.length&&(b=N()(b,H));const Z=e()(P,oe=>oe.id);b=(0,v.zdu)(b,"tiles.properties.nodes",w);for(const oe of w){const pe=Z[oe];if(pe&&!b[pe.id]){const ue=this.getTileConfiguration(pe.id,pe.componentType);b=(0,v.zdu)(b,pe.id,ue)}}this.updatePreview(b)})}getTileConfiguration(A,z){return{id:A,providers:{dataSource:{providerId:void 0}}}}}return G.\u0275fac=function(A){return new(A||G)(L.LFG(O.nY),L.LFG(M.m),L.LFG(c.p))},G.\u0275prov=L.Yz7({token:G,factory:G.\u0275fac}),G})()},60167:(ee,U,a)=>{"use strict";a.d(U,{M:()=>c});var r=a(82722),d=a(30652),C=a(42339),e=a(25878),S=a(55413),N=a(36216),R=a(5e3),v=a(45122);let c=(()=>{class O extends N.a{constructor(L,M,F){super(L,M,F),this.PROPERTIES_PATH=`${e.xW.Configuration}.chartOptionsEditor.properties`}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var L,M,F,G,x,A,z,P,T,h,b;const w=null===(F=null===(M=null===(L=this.getPreview().chart)||void 0===L?void 0:L.properties)||void 0===M?void 0:M.configuration)||void 0===F?void 0:F.chartOptions;let H=this.pizzagnaService.pizzagna;H=(0,d.zdu)(H,`${this.PROPERTIES_PATH}.chartType`,null!==(G=null==w?void 0:w.type)&&void 0!==G?G:void 0),H=(0,d.zdu)(H,`${this.PROPERTIES_PATH}.legendPlacement`,null!==(x=null==w?void 0:w.legendPlacement)&&void 0!==x?x:S.w.None),H=(0,d.zdu)(H,`${this.PROPERTIES_PATH}.legendFormatterComponentType`,null!==(z=null===(A=null==w?void 0:w.legendFormatter)||void 0===A?void 0:A.componentType)&&void 0!==z?z:""),H=(0,d.zdu)(H,`${this.PROPERTIES_PATH}.contentFormatterComponentType`,null!==(T=null===(P=null==w?void 0:w.contentFormatter)||void 0===P?void 0:P.componentType)&&void 0!==T?T:"DonutContentRawFormatterComponent"),H=(0,d.zdu)(H,`${this.PROPERTIES_PATH}.contentFormatterProperties`,null!==(b=null===(h=null==w?void 0:w.contentFormatter)||void 0===h?void 0:h.properties)&&void 0!==b?b:""),this.updateFormPizzagna(H)}toPreview(L){L.valueChanges.pipe((0,r.R)(this.destroy$)).subscribe(M=>{const F=(0,d.zdu)(this.getPreview(),"chart.properties.configuration.chartOptions",M);this.updatePreview(F)})}}return O.\u0275fac=function(L){return new(L||O)(R.LFG(e.nY),R.LFG(v.m),R.LFG(C.p))},O.\u0275prov=R.Yz7({token:O,factory:O.\u0275fac}),O})()},42911:(ee,U,a)=>{"use strict";a.d(U,{c:()=>v});var r=a(82722),d=a(30652),C=a(42339),e=a(25878),S=a(36216),N=a(5e3),R=a(45122);class v extends S.a{constructor(O,g,L){super(O,g,L)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var O,g;let L=this.pizzagnaService.pizzagna;const M=null===(g=null===(O=this.getPreview())||void 0===O?void 0:O.header)||void 0===g?void 0:g.properties;L=(0,d.zdu)(L,`${v.PROPERTIES_PATH}.title`,null==M?void 0:M.title),L=(0,d.zdu)(L,`${v.PROPERTIES_PATH}.subtitle`,null==M?void 0:M.subtitle),L=(0,d.zdu)(L,`${v.PROPERTIES_PATH}.url`,null==M?void 0:M.url),L=(0,d.zdu)(L,`${v.PROPERTIES_PATH}.description`,null==M?void 0:M.description),L=(0,d.zdu)(L,`${v.PROPERTIES_PATH}.collapsible`,null==M?void 0:M.collapsible),this.updateFormPizzagna(L)}toPreview(O){O.valueChanges.pipe((0,r.R)(this.destroy$)).subscribe(g=>{const L=(0,d.zdu)(this.getPreview(),"header.properties",g);this.updatePreview(L)})}}v.PROPERTIES_PATH=`${e.xW.Configuration}.titleAndDescription.properties`,v.\u0275fac=function(O){return new(O||v)(N.LFG(e.nY),N.LFG(R.m),N.LFG(C.p))},v.\u0275prov=N.Yz7({token:v,factory:v.\u0275fac})},41294:(ee,U,a)=>{"use strict";a.d(U,{w:()=>h});var r=a(8817),d=a.n(r),C=a(71973),e=a.n(C),S=a(64509),N=a.n(S),R=a(34235),v=a.n(R),c=a(77579),O=a(39841),g=a(82722),L=a(54004),M=a(71884),F=a(30652),G=a(42339),x=a(25878),A=a(81466),z=a(36216),P=a(5e3),T=a(45122);let h=(()=>{class b extends z.a{constructor(H,Z,oe){super(H,Z,oe),this.indicatorDataKey="indicatorData",this.previewSeriesPath=`providers.${x.Mu.Adapter}.properties.series`,this.formSeriesComponentPath=`${x.xW.Data}.series.properties`,this.dataSourceSeries$=new c.x,this.selectedSeriesIds$=new c.x,this.shouldReadForm=!1,this.subscribeToAvailableDataFieldsChange(),this.eventBus.subscribeUntil(A.ay,this.destroy$,pe=>{const ue=`${x.xW.Structure}.series.properties.nodes`,ne=d()(this.pizzagnaService.pizzagna,ue);this.pizzagnaService.removeComponents(ne);let ae=this.pizzagnaService.pizzagna;ae=(0,F.zdu)(ae,ue,[]),ae=(0,F.zdu)(ae,`${this.formSeriesComponentPath}.series`,[]),this.updateFormPizzagna(ae)}),this.eventBus.subscribeUntil(A.PF,this.destroy$,pe=>{var ue;const{series:ne}=v()(pe.payload.result)?pe.payload:pe.payload.result||{};if(ne){this.dataSourceSeries$.next(ne);let ae=this.pizzagnaService.pizzagna;ae=(0,F.zdu)(ae,`${this.formSeriesComponentPath}.allSeries`,ne);const q=(null===(ue=this.pizzagnaService.pizzagna[x.xW.Structure][this.component.componentId].properties)||void 0===ue?void 0:ue.template).findIndex(Le=>Le.id===this.indicatorDataKey);ae=(0,F.zdu)(ae,`${x.xW.Structure}.series.properties.template[${q}].properties.allSeries`,ne),ae=d()(this.getPreview(),`chart.${this.previewSeriesPath}`,[]).reduce((Le,Oe)=>(0,F.zdu)(Le,`${x.xW.Data}.${Oe.id}/${this.indicatorDataKey}.properties.allSeries`,ne),ae),this.updateFormPizzagna(ae);const fe=`${this.formSeriesComponentPath}.series`,Ee=d()(this.pizzagnaService.pizzagna,fe);if(e()(Ee)){this.shouldReadForm=!1;const Le=ne.map(Se=>({id:Se.id,selectedSeriesId:Se.id,label:Se.name})),Oe=(0,F.zdu)(this.getPreview(),`chart.${this.previewSeriesPath}`,Le);this.updatePreview(Oe),this.buildForm(),setTimeout(()=>{this.updateAvailableSeries([]),this.shouldReadForm=!0})}}})}buildForm(){const H=this.getPreview(),Z=d()(H,`chart.${this.previewSeriesPath}`,[]),oe=Z.map(ae=>({id:ae.id,selectedSeriesId:ae.selectedSeriesId})),pe=Z.map(ae=>ae.id);this.pizzagnaService.createComponentsFromTemplate("series",pe);const ne=(0,F.zdu)(this.pizzagnaService.pizzagna,`${this.formSeriesComponentPath}.series`,oe);this.updateFormPizzagna(ne),this.selectedSeriesIds$.next(oe.map(ae=>ae.selectedSeriesId)),setTimeout(()=>this.shouldReadForm=!0)}toPreview(H){H.valueChanges.pipe((0,g.R)(this.destroy$)).subscribe(Z=>{if(!this.shouldReadForm)return;const oe=this.getPreview(),{chart:pe}=oe,ue=d()(pe,this.previewSeriesPath,[]),ne=Z.map(q=>Object.assign({id:q.id,selectedSeriesId:q.selectedSeriesId},ue.find(se=>se.id===q.id))),ae=(0,F.zdu)(oe,`chart.${this.previewSeriesPath}`,ne);this.updatePreview(ae);const K=Z.map(q=>d()(q,`properties[${q.id}/indicatorData].id`)).filter(q=>!e()(q));this.selectedSeriesIds$.next(K)})}ngOnDestroy(){this.dataSourceSeries$.complete(),this.selectedSeriesIds$.complete(),super.ngOnDestroy()}updateAvailableSeries(H){var Z;if(!this.pizzagnaService.pizzagna)return;let oe=this.pizzagnaService.pizzagna;oe=(0,F.zdu)(oe,`${this.formSeriesComponentPath}.availableSeries`,H);const ue=(null===(Z=this.pizzagnaService.pizzagna[x.xW.Structure][this.component.componentId].properties)||void 0===Z?void 0:Z.template).findIndex(K=>K.id===this.indicatorDataKey);oe=(0,F.zdu)(oe,`${x.xW.Structure}.series.properties.template[${ue}].properties.availableSeries`,H),oe=d()(this.pizzagnaService.pizzagna,`${x.xW.Structure}.series.properties.nodes`).reduce((K,q)=>(0,F.zdu)(K,`${x.xW.Data}.${q}/${this.indicatorDataKey}.properties.availableSeries`,H),oe),this.updateFormPizzagna(oe)}subscribeToAvailableDataFieldsChange(){(0,O.a)([this.dataSourceSeries$,this.selectedSeriesIds$]).pipe((0,g.R)(this.destroy$),(0,L.U)(([H,Z])=>H.filter(oe=>!Z.find(pe=>pe===oe.id))),(0,M.x)(N())).subscribe(this.updateAvailableSeries.bind(this))}}return b.\u0275fac=function(H){return new(H||b)(P.LFG(x.nY),P.LFG(T.m),P.LFG(G.p))},b.\u0275prov=P.Yz7({token:b,factory:b.\u0275fac}),b})()},27463:(ee,U,a)=>{"use strict";a.d(U,{l:()=>d});const d=new(a(5e3).OlP)("CONFIGURATOR_CONVERTER")},45122:(ee,U,a)=>{"use strict";a.d(U,{m:()=>C});var r=a(77579),d=a(5e3);let C=(()=>{class e{constructor(){this.previewChanged=new r.x}get preview(){return this._preview}set preview(N){this._preview=N,this.previewChanged.next(N)}}return e.\u0275fac=function(N){return new(N||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},67517:(ee,U,a)=>{"use strict";a.d(U,{s:()=>v});var r=a(90733),d=a.n(r),C=a(25878),e=a(64406),S=a(42971),N=a(5e3),R=a(94526);let v=(()=>{class c{constructor(g,L){this.configuratorService=g,this.componentPortalService=L}open(g){if(!g.portalBundle){const M={portal:this.componentPortalService.createComponentPortal(e.b,null),attached:F=>{var G;const x=F.instance;x.formPizzagna=g.formPizzagna,x.formRoot=null===(G=g.paths)||void 0===G?void 0:G.root,x.changeDetector.markForCheck()}};g.portalBundle=M}const L=d()(g.widget);return delete L.pizzagna[C.xW.Data],g.widget=L,this.configuratorService.open(g)}}return c.\u0275fac=function(g){return new(g||c)(N.LFG(S.J),N.LFG(R.$))},c.\u0275prov=N.Yz7({token:c,factory:c.\u0275fac}),c})()},81466:(ee,U,a)=>{"use strict";a.d(U,{PF:()=>e,ay:()=>N,gg:()=>R,yX:()=>S});var r=a(4707),d=a(61135),C=a(30652);const e=new C.JRy("DATA_SOURCE_OUTPUT",()=>new r.t(1)),S=new C.JRy("DATA_SOURCE_DESTROYED"),N=new C.JRy("DATA_SOURCE_CHANGE"),R=new C.JRy("DATA_SOURCE_CREATED",()=>new d.X({payload:void 0}))},16041:(ee,U,a)=>{"use strict";a.d(U,{K:()=>C});var r=a(5e3),d=a(33748);let C=(()=>{class e{constructor(N){this.gridsterItem=N}ngOnChanges(N){N.nuiGridsterItemWidgetId&&(this.gridsterItem.widgetId=this.nuiGridsterItemWidgetId)}}return e.\u0275fac=function(N){return new(N||e)(r.Y36(d.IM,3))},e.\u0275dir=r.lG2({type:e,selectors:[["","nuiGridsterItemWidgetId",""]],inputs:{nuiGridsterItemWidgetId:"nuiGridsterItemWidgetId"},features:[r.TTD]}),e})()},44994:(ee,U,a)=>{"use strict";a.d(U,{t:()=>P});var r=a(90733),d=a.n(r),C=a(77579),e=a(63900),S=a(82722),N=a(34575),R=a(67517),v=a(53450),c=a(75946),O=a.n(c),g=a(68306),L=a(60515),M=a(39646),F=a(70262),G=a(5e3),x=a(30652);let A=(()=>{class T{constructor(b){this.logger=b,this.updateDashboard=w=>H=>new g.y(Z=>H.subscribe(oe=>{oe&&w.removeWidget(oe),Z.next()}))}handleRemove(b,w,H,Z){return this.tryRemove(Z,w,H).pipe(this.updateDashboard(b))}tryRemove(b,w,H){return O()(b)?b(w,H).pipe((0,F.K)(Z=>(this.logger.error(Z),L.E))):(0,M.of)(w)}}return T.\u0275fac=function(b){return new(b||T)(G.LFG(x.mQy))},T.\u0275prov=G.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();var z=a(32656);let P=(()=>{class T{constructor(b,w,H,Z){this.dashboardComponent=b,this.widgetEditorService=w,this.widgetRemovalService=H,this.widgetTypesService=Z,this.destroy$=new C.x}ngOnInit(){this.dashboardComponent.eventBus.getStream(v.Ef).pipe((0,e.w)(b=>{const w=this.dashboardComponent.dashboard.widgets[b.widgetId],H=this.widgetTypesService.getWidgetType(w.type,w.version);return this.widgetEditorService.open({dashboardComponent:this.dashboardComponent,formPizzagna:H.configurator,paths:H.paths.configurator,widget:w,trySubmit:this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.trySubmit})}),(0,S.R)(this.destroy$)).subscribe(),this.dashboardComponent.eventBus.getStream(v.y4).pipe((0,e.w)(b=>{if(!b.widgetId)throw new Error("event has to have widgetId");const w=b.widgetId,H=this.dashboardPersistenceHandler&&this.dashboardPersistenceHandler.tryRemove,Z={dashboardComponent:this.dashboardComponent,widget:d()(this.dashboardComponent.dashboard.widgets[w])};return this.widgetRemovalService.handleRemove(this.dashboardComponent,w,Z,H)}),(0,S.R)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return T.\u0275fac=function(b){return new(b||T)(G.Y36(N.M,3),G.Y36(R.s),G.Y36(A),G.Y36(z.x))},T.\u0275dir=G.lG2({type:T,selectors:[["","nuiWidgetEditor",""]],inputs:{dashboardPersistenceHandler:["nuiWidgetEditor","dashboardPersistenceHandler"]}}),T})()},22783:(ee,U,a)=>{"use strict";a.d(U,{n:()=>R});var r=a(21503),d=a.n(r),C=a(50772),e=a.n(C),S=a(68921),N=a.n(S);function R(O,...g){const L=g.filter(x=>void 0!==x.previousValue||void 0!==x.currentValue);if(!e()(L,x=>x.currentValue!==x.previousValue))return O;if(1===L.length)return L[0].currentValue;const M=function c(O){for(const g of O){const L=typeof g.currentValue;if("undefined"!==L&&null!=g.currentValue)return d()(g.currentValue)?"object"==typeof g.currentValue[0]?"object[]":"array":g.currentValue.constructor!==Object?"advanced":L}return"undefined"}(L);return["object","object[]"].includes(M)?N()(...L.map(x=>"object"==typeof x.currentValue?Object.keys(x.currentValue||{}):[])).reduce((x,A)=>{const z=null==O||void 0===O[A]?void 0:O[A],P=L.map(T=>({previousValue:void 0===T.previousValue||null==T.previousValue?void 0:T.previousValue[A],currentValue:void 0===T.currentValue||null==T.currentValue?void 0:T.currentValue[A]}));return x[A]=R(z,...P),x},"object[]"===M?[]:{}):function v(O){for(let g=O.length-1;g>=0;g--){const L=O[g].currentValue;if(void 0!==L)return L}}(L)}},87686:(ee,U,a)=>{"use strict";a.d(U,{R:()=>M});var r=a(5e3),d=a(30652),C=a(22783),e=a(53450),S=a(25878),N=a(1892),R=a(42339),v=a(69808),c=a(47969),O=a(47429);function g(F,G){}function L(F,G){if(1&F){const x=r.EpF();r.ynx(0)(1,1,2),r.NdJ("output",function(z){return r.CHM(x),r.oxw().onOutput(z)}),r.YNc(3,g,0,0,"ng-template",3),r.NdJ("attached",function(z){return r.CHM(x),r.MAs(2).attached(z)}),r.BQk()()}if(2&F){const x=r.MAs(2),A=r.oxw();r.xp6(1),r.Q6J("componentId",A.rootNode)("componentType",null==A.pizza[A.rootNode]?null:A.pizza[A.rootNode].componentType)("properties",null==A.pizza[A.rootNode]?null:A.pizza[A.rootNode].properties)("providers",null==A.pizza[A.rootNode]?null:A.pizza[A.rootNode].providers)("outputs",A.outputs),r.xp6(2),r.Q6J("cdkPortalOutlet",x.portal)}}let M=(()=>{class F{constructor(x,A,z){this.pizzagnaService=x,this.logger=A,this.eventBus=z,this.rootNode=e.XM,this.pizzagnaChange=new r.vpe,this.output=new r.vpe,z.getStream(e.M).subscribe(P=>{const T=(0,d.zdu)(this.pizzagna,P.payload.path,P.payload.value);this._pizzagnaBuffer=T,this.pizzagnaChange.emit(T)})}get pizzagna(){return this._pizzagnaBuffer||this._pizzagna}set pizzagna(x){this._pizzagna=x,this._pizzagnaBuffer=null}ngOnChanges(x){if(x.pizzagna){const A=x.pizzagna.previousValue;this.pizzagnaService.updatePizzagna(this.pizzagna),this.pizza=this.mergePizzagnaIntoPizza(this.pizza,A,this.pizzagna),this.pizza&&!this.pizza[this.rootNode]&&this.logger.warn("Pizzagna doesn't contain root node '"+this.rootNode+"'. Pizzagna = ",this.pizzagna),this.pizzagnaService.updateComponents(this.pizza)}}onOutput(x){this.output.emit(x)}mergePizzagnaIntoPizza(x,A,z){return(0,C.n)(x,this.getLayerChanges(A,z,S.xW.Structure),this.getLayerChanges(A,z,S.xW.Configuration),this.getLayerChanges(A,z,S.xW.Data))}getLayerChanges(x,A,z){return{previousValue:this.getLayerSafe(x,z),currentValue:this.getLayerSafe(A,z)}}getLayerSafe(x,A){return x&&x[A]}}return F.\u0275fac=function(x){return new(x||F)(r.Y36(R.p),r.Y36(d.mQy),r.Y36(S.nY))},F.\u0275cmp=r.Xpm({type:F,selectors:[["nui-pizzagna"]],inputs:{rootNode:"rootNode",pizzagna:"pizzagna",outputs:"outputs"},outputs:{pizzagnaChange:"pizzagnaChange",output:"output"},features:[r._Bn([R.p,N.v,{provide:S.nY,useClass:d.Ndp}]),r.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(x,A){1&x&&r.YNc(0,L,4,6,"ng-container",0),2&x&&r.Q6J("ngIf",A.pizza&&A.pizza[A.rootNode])},directives:[v.O5,c.$,O.Pl],encapsulation:2}),F})()},47969:(ee,U,a)=>{"use strict";a.d(U,{$:()=>F});var r=a(5e3),d=a(21503),C=a.n(d),e=a(90377),S=a.n(e),N=a(19574),R=a.n(N),v=a(4707),c=a(77579),O=a(82722),g=a(98864),L=a(30652),M=a(94526);let F=(()=>{class G{constructor(A,z,P,T,h){this.injector=A,this.logger=z,this.portalService=P,this.renderer=T,this.providerRegistry=h,this.output=new r.vpe,this.propertiesChanges=new v.t,this.providerInstances={},this.destroy$=new c.x}ngOnInit(){this.logger.debug("Portal created:",this.componentId),this.recreatePortal()}ngAfterViewInit(){Object.keys(this.providerInstances).forEach(A=>{const z=this.providerInstances[A];z.ngAfterViewInit&&z.ngAfterViewInit()})}ngOnChanges(A){let z=!1;const P=A.providers;P&&!P.isFirstChange()&&(this.checkForProviderChanges(P)?(this.logger.debug("Portal recreated (provider change):",this.componentId),this.recreatePortal(),z=!0):this.updateProviderConfigurations(P)),A.componentType&&!A.componentType.isFirstChange()&&!z&&(this.logger.debug("Portal recreated (component change):",this.componentId),this.recreatePortal()),A.properties&&this.propertiesChanges.next(A.properties)}ngOnDestroy(){this.logger.debug("Portal destroyed:",this.componentId),this.destroyProviders(),this.destroy$.next(),this.destroy$.complete()}attached(A){this.component=A.instance,this.renderer.listen(A.location.nativeElement,"click",z=>{(z.ctrlKey||z.metaKey)&&z.shiftKey&&0===z.button&&(console.log("==================== PIZZAGNA DUMP ========================="),console.log("componentId:",this.componentId),console.log("component:",this.component),console.log("componentType:",this.componentType),console.log("properties:",this.properties),console.log("providers:",this.providers),console.log("providerInstances:",this.providerInstances),console.log("============================================================"))});for(const z of Object.keys(this.providerInstances)){const P=this.providerInstances[z];P.setComponent&&P.setComponent(this.component,this.componentId),P.setProviders&&P.setProviders(this.providerInstances,this.componentId)}this.subscribeToOutputs(),this.changesSubscription=this.propertiesChanges.pipe((0,O.R)(this.destroy$)).subscribe(z=>this.applyPropertiesChange(z))}recreatePortal(){this.changesSubscription&&(this.changesSubscription.unsubscribe(),this.changesSubscription=void 0,this.propertiesChanges=new v.t);let A=this.injector;if(this.destroyProviders(),this.providers&&(A=this.updateProviders(A)),this.portal=this.portalService.createComponentPortal(this.componentType,A),this.properties)for(const z of Object.keys(this.properties))this.propertiesChanges.next(new r.WD2(void 0,this.properties,!0))}updateProviders(A){const z=Object.keys(this.providers),P=z.reduce((h,b)=>(this.providers[b].providerId&&(h[b]=this.providerRegistry.getProvider(this.providers[b].providerId)),h),{}),T=this.portalService.createInjector({injector:A,providers:S()(P)});this.providerInstances=z.reduce((h,b)=>{const w=P[b],H=this.providers[b];if(w){const Z=T.get(w.provide,null,null),oe=C()(Z)?Z.find(pe=>pe instanceof w.useClass):Z;if(!oe)throw new Error("Provider '"+b+"' does not exist.");oe.updateConfiguration&&H.properties&&oe.updateConfiguration(Object.assign({providerKey:b},H.properties||{})),oe.providerKey=b,h[b]=oe}else H.providerId&&this.logger.error("There's no registered provider for id",b);return h},this.providerInstances);for(const h of Object.keys(this.providerInstances)){const b=this.providerInstances[h];b.ngOnInit&&b.ngOnInit()}return T}updateProviderConfigurations(A){for(const z of Object.keys(this.providers)){if(!this.providers[z].providerId)return;const P=this.providerInstances[z];if(!P)throw new Error("Provider '"+z+"' does not exist.");const T=A.previousValue[z],h=A.currentValue[z],w=h&&h.properties;(T&&T.properties)!==w&&P.updateConfiguration&&P.updateConfiguration(Object.assign({providerKey:z},w))}}subscribeToOutputs(){if(this.outputs)for(const A of this.outputs.filter(z=>this.component[z]instanceof r.vpe))this.component[A].pipe((0,O.R)(this.destroy$)).subscribe(z=>{this.output.emit({id:A,payload:z})})}checkForProviderChanges(A){const z=A.previousValue?Object.keys(A.previousValue):[],P=A.currentValue?Object.keys(A.currentValue):[];if(z.length!==P.length||R()(z,P).length>0)return!0;const T=Object.keys(A.previousValue).map(b=>A.previousValue[b].providerId),h=Object.keys(A.currentValue).map(b=>A.currentValue[b].providerId);return R()(T,h).length>0}destroyProviders(){if(this.providerInstances)for(const A of Object.keys(this.providerInstances)){const z=this.providerInstances[A];z.ngOnDestroy&&z.ngOnDestroy(),delete this.providerInstances[A]}}applyPropertiesChange(A){let z=A.currentValue;if(!z)return;z=Object.assign(Object.assign({},z),{componentId:this.componentId});const P={};let T=!1;for(const h of Object.keys(z)){const b=this.component[h];z[h]!==b&&(T=!0,this.component[h]=z[h],this.component.ngOnChanges&&(P[h]=new r.WD2(b,z[h],A.isFirstChange())))}if(T){this.component.ngOnChanges&&this.component.ngOnChanges(P);const h=this.component.changeDetector;h?h.markForCheck():this.logger.warn(`Property 'changeDetector' is missing on component '${this.componentType}', so dynamic refresh of given component might not work.`)}}}return G.\u0275fac=function(A){return new(A||G)(r.Y36(r.zs3),r.Y36(L.mQy),r.Y36(M.$),r.Y36(r.Qsj),r.Y36(g.C))},G.\u0275dir=r.lG2({type:G,selectors:[["","nuiComponentPortal",""]],inputs:{componentId:"componentId",componentType:"componentType",properties:"properties",providers:"providers",outputs:"outputs"},outputs:{output:"output"},exportAs:["nuiComponentPortal"],features:[r.TTD]}),G})()},29614:(ee,U,a)=>{"use strict";a.d(U,{Z:()=>d});var r=a(25878);function d(C){return C.providerKey?[C.pizzagnaKey||r.xW.Data,C.componentId,"providers",C.providerKey,"properties",...C.propertyPath].join("."):[C.pizzagnaKey||r.xW.Data,C.componentId,"properties",...C.propertyPath].join(".")}},94526:(ee,U,a)=>{"use strict";a.d(U,{$:()=>N});var r=a(47429),d=a(5e3),C=a(69769),e=a(40801),S=a(30652);let N=(()=>{class R{constructor(c,O){this.componentRegistry=c,this.logger=O}createComponentPortal(c,O){let g;return g="string"==typeof c?this.componentRegistry.getComponentType(c):c,g||(this.logger.error(`Cannot Find Component Type ${c}`),g=C.q),new r.C5(g,null,O)}createInjector(c){return d.zs3.create({providers:c.providers||[],parent:c.injector,name:"Component Injector"})}}return R.\u0275fac=function(c){return new(c||R)(d.LFG(e.h),d.LFG(S.mQy))},R.\u0275prov=d.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()},40801:(ee,U,a)=>{"use strict";a.d(U,{h:()=>C});var r=a(5e3),d=a(30652);let C=(()=>{class e{constructor(N){this.logger=N,this.components={}}registerByLateLoadKey(N){this.registerComponentType(N.lateLoadKey,N)}registerComponentType(N,R){this.components[N]=R}getComponentType(N){const R=this.components[N];return R||this.logger.warn("Component '"+N+"' not defined. Available components: "+JSON.stringify(Object.keys(this.components))),R}}return e.\u0275fac=function(N){return new(N||e)(r.LFG(d.mQy))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1892:(ee,U,a)=>{"use strict";a.d(U,{v:()=>S});var r=a(30652),d=a(25878),C=a(5e3);let S=(()=>{class N{getPizzagnaUpdatedWithComponents(v,c,O){var g;const M=null===(g=v[d.xW.Structure][c].properties)||void 0===g?void 0:g.template;return this.getPizzagnaWithChildren(v,O,M,c)}getPizzagnaWithChildren(v,c,O,g){let M=c.map(F=>({id:F,componentType:"WidgetConfiguratorSectionComponent"})).reduce((F,G)=>this.updateChildPizzagna(F,O,G),v);return M=this.getPizzagnaWithNodesSet(M,g,c),M}updateChildPizzagna(v,c,O){let g=(0,r.zdu)(v,`${d.xW.Structure}.${O.id}`,O);const L=c.map(F=>Object.assign(Object.assign({},F),{id:`${O.id}/${F.id}`}));g=L.reduce((F,G)=>(0,r.zdu)(F,`${d.xW.Structure}.${G.id}`,G),g);const M=L.map(F=>F.id);return g=this.getPizzagnaWithNodesSet(g,O.id,M),g}getPizzagnaWithNodesSet(v,c,O){return(0,r.zdu)(v,`${d.xW.Structure}.${c}.properties.nodes`,O)}}return N.\u0275fac=function(v){return new(v||N)},N.\u0275prov=C.Yz7({token:N,factory:N.\u0275fac}),N})()},42339:(ee,U,a)=>{"use strict";a.d(U,{p:()=>L});var r=a(21503),d=a.n(r),C=a(95835),e=a.n(C),S=a(4707),N=a(30652),R=a(53450),v=a(25878),c=a(29614),O=a(1892),g=a(5e3);let L=(()=>{class M{constructor(G,x){this.eventBus=G,this.dynamicComponentCreator=x,this.pizzaChanged=new S.t(1)}updatePizzagna(G){this.pizzagna=G}updateComponents(G){this.components=G,this.pizzaChanged.next(G)}getComponent(G){const x=this.components[G];if(!x)throw new Error("Component '"+G+"' is not defined!");return x}setProperty(G,x){const A="string"==typeof G?G:(0,c.Z)(G);this.eventBus.getStream(R.M).next({payload:{path:A,value:x}})}createComponentsFromTemplateWithProperties(G,x){const A=x.map(P=>P.id);let z=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,G,A);for(const P of x)for(const T of Object.keys(P.children))z=(0,N.zdu)(z,`${v.xW.Data}.${T}.properties`,P.children[T]);this.updatePizzagna(z),this.eventBus.getStream(R.M).next({payload:{path:"",value:z}})}createComponentsFromTemplate(G,x){const A=this.dynamicComponentCreator.getPizzagnaUpdatedWithComponents(this.pizzagna,G,x);this.updatePizzagna(A),this.eventBus.getStream(R.M).next({payload:{path:"",value:A}})}removeComponents(G){d()(G)?G.forEach(x=>this.removeComponent(x)):this.removeComponent(G)}removeComponent(G){var x;const A=Object.assign({},this.pizzagna),P=[G,...null===(x=this.pizzagna[v.xW.Structure][G].properties)||void 0===x?void 0:x.nodes],T=[v.xW.Structure,v.xW.Configuration,v.xW.Data];for(const h of T)if(A[h])for(const b of P)A[h]=e()(A[h],b);this.eventBus.getStream(R.M).next({payload:{path:"",value:A}}),this.updatePizzagna(A)}}return M.\u0275fac=function(G){return new(G||M)(g.LFG(v.nY),g.LFG(O.v))},M.\u0275prov=g.Yz7({token:M,factory:M.\u0275fac}),M})()},29242:(ee,U,a)=>{"use strict";a.d(U,{o:()=>d});var r=a(5e3);let d=(()=>{class C{constructor(){this.events={}}registerEvent(S){this.events[S.id]=S}getEvent(S){const N=this.events[S];if(!N)throw new Error("Event with id '"+S+"' is not registered. Registered events are: "+JSON.stringify(Object.keys(this.events)));return N}}return C.\u0275fac=function(S){return new(S||C)},C.\u0275prov=r.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},60343:(ee,U,a)=>{"use strict";a.d(U,{Z:()=>C});var r=a(5e3);const d={">":{comparatorFn:(e,S)=>e>S,label:"Value is greater than"},"<":{comparatorFn:(e,S)=>e<S,label:"Value is less than"},">=":{comparatorFn:(e,S)=>e>=S,label:"Value is greater, or equal to"},"<=":{comparatorFn:(e,S)=>e<=S,label:"Value is less than, or equal to"},"==":{comparatorFn:(e,S)=>e==S,label:"Value is exactly"}};let C=(()=>{class e{constructor(){this.comparators=Object.assign({},d)}registerComparators(N){this.comparators=Object.assign(Object.assign({},this.comparators),N)}clearComparators(){this.comparators={}}getComparators(){return this.comparators}}return e.\u0275fac=function(N){return new(N||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},98864:(ee,U,a)=>{"use strict";a.d(U,{C:()=>Et});var r=a(69808),d=a(5e3),C=a(30652),e=a(26365),S=a(70655),N=a(82722),R=a(42339),v=a(53450),c=a(25878);let O=class extends e.i{constructor(V,I,y){super(V,I,y),this.dataSource=I,this.drillstate=[],this.eventBus.getStream(v.EC).pipe((0,N.R)(this.destroy$)).subscribe(B=>{var j;(null===(j=this.dataSource.busy)||void 0===j?void 0:j.value)||this.onDrilldown(B)}),this.registerFilters()}updateAdapterProperties(V){this.dataPath=V.dataPath,this.drillstate=V.drillstate||this.drillstate,this.groupBy=V.groupBy,this.componentsConfig=V.componentsConfig,this.navigationBarId=V.navigationBarId}updateOutput(V){const I=this.getWidgetInput(V,this.drillstate.length!==this.groupBy.length);if(this.pizzagnaService.setProperty(`${c.xW.Data}.${this.componentId}.properties`,I),this.navigationBarId){const j=`${c.xW.Data}.${this.navigationBarId}.properties.navBarConfig.isRoot`,ie=`${c.xW.Data}.${this.navigationBarId}.properties.navBarConfig.buttons.back.disabled`;this.pizzagnaService.setProperty(`${c.xW.Data}.${this.navigationBarId}.properties.navBarConfig.label`,this.drillstate[this.drillstate.length-1]),this.pizzagnaService.setProperty(ie,!!this.drillstate.length),this.pizzagnaService.setProperty(j,!this.drillstate.length)}}getWidgetInput(V,I){return{[this.dataPath]:V,configuration:this.componentsConfig[I?"group":"leaf"]}}onDrilldown(V){const{payload:I}=V;return I.reset?(this.drillstate=[],void this.eventBus.next(v.RG,{})):I.back?(this.drillstate.length=this.drillstate.length-1,void this.eventBus.next(v.RG,{})):(this.drillstate.push(I.id),void this.eventBus.next(v.RG,{}))}registerFilters(){this.dataSource.registerComponent({group:{componentInstance:{getFilters:()=>({value:this.groupBy})}},drillstate:{componentInstance:{getFilters:()=>({value:this.drillstate})}}})}};O=(0,S.gn)([(0,S.fM)(0,(0,d.tBr)(c.nY)),(0,S.fM)(1,(0,d.tBr)(c.Fk)),(0,S.w6)("design:paramtypes",[C.Ndp,Object,R.p])],O);var g=a(77579);let L=(()=>{class k{constructor(I){this.eventBus=I,this.destroy$=new g.x,I.streamAdded.pipe((0,N.R)(this.destroy$)).subscribe(y=>{I.getStream({id:y}).pipe((0,N.R)(this.destroy$)).subscribe(B=>{console.log(`${B.id}: `,B.payload)})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})();var M=a(38046),F=a(60343);let G=(()=>{class k{constructor(I,y,B){this.dataSource=I,this.pizzagnaService=y,this.destroy$=new g.x,this.propertyPath="backgroundColor",this.comparators=B.getComparators()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateConfiguration(I){(null==I?void 0:I.rules)&&(this.rules=null==I?void 0:I.rules,this.subscribeToDataChanges(),this.checkColorConditions())}setComponent(I,y){this.subscribeToDataChanges(),this.componentId=y}subscribeToDataChanges(){var I;!this.dataSource||(null===(I=this.dsSubscription$)||void 0===I||I.unsubscribe(),this.dsSubscription$=this.dataSource.outputsSubject.pipe((0,N.R)(this.destroy$)).subscribe(y=>{var B;this.latestValueFromDS=(null===(B=y.result)||void 0===B?void 0:B.value)||this.latestValueFromDS,this.checkColorConditions()}))}checkColorConditions(){var I,y;if(!this.rules)return;if(0===this.rules.length)return this.setColor(void 0),void(null===(I=this.dsSubscription$)||void 0===I||I.unsubscribe());let B;const j=this.rules&&[...this.rules].reverse();for(const ie of j)if(null===(y=this.comparators[ie.comparisonType])||void 0===y?void 0:y.comparatorFn(this.latestValueFromDS,ie.value)){B=ie.color;break}this.setColor(B)}setColor(I){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:[this.propertyPath]},I)}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.Fk,8),d.LFG(R.p),d.LFG(F.Z))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})();var x=a(33816),A=a.n(x),z=(()=>{return(k=z||(z={})).Warning="var(--nui-color-semantic-warning)",k.Critical="var(--nui-color-semantic-critical)",z;var k})();let T=class extends e.i{constructor(V,I,y,B){super(V,I,y),this.numberPipe=B}updateConfiguration(V){this.thresholds=V.thresholds,super.updateConfiguration(V)}processOutput(V){const I=this.processThresholds(V);return this.processNumberFormat(I)}setComponent(V,I){I&&(this.componentId=I)}getThresholdColor(V,I,y){const B=this.getThresholdChecks(V,I,V.reversedThresholds);return B.warningCheck?z.Warning:B.criticalCheck?z.Critical:y}getThresholdChecks(V,I,y){const B=V.warningThresholdValue,j=V.criticalThresholdValue,ie=!A()(B)&&I.value<=B&&I.value>j,re=I.value<=j,ge=!A()(B)&&I.value>=B&&I.value<j;return{warningCheck:y?ie:ge,criticalCheck:y?re:I.value>=j}}processThresholds(V){var I;if(!V||!(null===(I=this.thresholds)||void 0===I?void 0:I.showThresholds)||"number"!=typeof V.value)return V;const y=this.getThresholdColor(this.thresholds,V,V.backgroundColor);return Object.assign(Object.assign({},V),{backgroundColor:y})}processNumberFormat(V){if("number"!=typeof(null==V?void 0:V.value)||!(null==V?void 0:V.numberFormat))return V;const I=this.numberPipe.transform(V.value,V.numberFormat);return Object.assign(Object.assign({},V),{value:I})}};T=(0,S.gn)([(0,S.fM)(0,(0,d.tBr)(c.nY)),(0,S.fM)(1,(0,d.FiY)()),(0,S.fM)(1,(0,d.tBr)(c.Fk)),(0,S.w6)("design:paramtypes",[C.Ndp,Object,R.p,r.JJ])],T);var h=a(21503),b=a.n(h),w=a(61135),H=a(39300),Z=a(71884),oe=a(18505);let pe=(()=>{class k{constructor(I,y){this.eventBus=I,this.pizzagnaService=y,this.brokers=[],this.builder=new ue(this.brokers),this.destroySubscriptions$=new g.x,this.getMin=B=>Math.min(...B),this.getMax=B=>Math.max(...B),this.valuesObject=this.builder.valuesObject}updateConfiguration(I){this.properties=I,this.componentId&&this.createPropertiesAndSubscribeToBrokers()}configure(){return this.builder}getBrokers(){return this.brokers}subscribeToBrokers(){this.destroy(),this.brokers.forEach(I=>{I.in$.pipe((0,H.h)(y=>!!I.in$.observers.length),(0,Z.x)(),(0,oe.b)(y=>this.configureValueModel(y)),(0,oe.b)(y=>this.processAndEmitSyncedValue(y,I)),(0,N.R)(this.destroySubscriptions$)).subscribe()})}setComponent(I,y){this.componentId=y,this.updateConfiguration(this.properties)}destroy(){this.destroySubscriptions$.next(),this.destroySubscriptions$.complete()}processAndEmitSyncedValue(I,y){let B=this.getMin;(null==y?void 0:y.type)&&(B="min"===y.type?this.getMin:this.getMax);const j=this.valuesObject[y.id].filter(ie=>ie.targetID&&ie.targetValue).map(ie=>ie.targetValue);y.out$.next(Object.assign(Object.assign({},I),{targetValue:B([...j])}))}configureValueModel(I){const y=this.valuesObject[I.id].filter(B=>B.targetID===I.targetID);y.length?y[0].targetValue=I.targetValue:this.valuesObject[I.id].push({targetID:I.targetID,targetValue:I.targetValue})}createPropertiesAndSubscribeToBrokers(){var I,y;this.tileNodes=null===(I=this.pizzagnaService.getComponent(this.componentId).properties)||void 0===I?void 0:I.nodes;const{scaleSyncConfig:B}=this.properties;(null===(y=this.tileNodes)||void 0===y?void 0:y.length)&&(this.tileNodes.forEach((j,ie)=>{this.pizzagnaService.setProperty({componentId:j,pizzagnaKey:c.xW.Data,propertyPath:["syncValuesBroker"]},this.getBrokers())}),B&&b()(B)&&(B.forEach(j=>this.configure().addBroker({id:j.id,type:null==j?void 0:j.type})),this.subscribeToBrokers()))}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY),d.LFG(R.p))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})();class ue{constructor(V){this.brokers=V,this.valuesObject={}}addBroker(V){const I={id:V.id,targetID:"",targetValue:1};return this.valuesObject[V.id]=new Array,this.brokers.push(Object.assign(Object.assign({},V),this.getDefaultBrokerObject(I,I))),this}getDefaultBrokerObject(V,I){return{in$:new w.X(V),out$:new w.X(I)}}}var ne=a(71973),ae=a.n(ne),K=a(30836),q=a.n(K),se=a(81466);let te=(()=>{class k{constructor(I,y){this.eventBus=I,this.pizzagnaService=y,this.destroy$=new g.x,this.eventBus.getStream(se.PF).pipe((0,N.R)(this.destroy$)).subscribe(B=>{this.handleDataSourceOutput(B)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(I,y){this.componentId=y}handleDataSourceOutput(I){var y,B,j,ie;this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:c.xW.Data},void 0!==(null===(B=null===(y=I.payload)||void 0===y?void 0:y.error)||void 0===B?void 0:B.type)?null===(ie=null===(j=I.payload)||void 0===j?void 0:j.error)||void 0===ie?void 0:ie.type.toString():void 0)}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY),d.LFG(R.p))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})(),fe=(()=>{class k extends te{constructor(I,y){super(I,y),this.multipleErrorFallbackKey=c.WE.Unknown,this.errorMap={},this.eventBus.getStream(se.yX).pipe((0,N.R)(this.destroy$)).subscribe(B=>{this.handleDataSourceDestroyed(B)})}updateConfiguration(I){I.multipleErrorFallbackKey&&(this.multipleErrorFallbackKey=I.multipleErrorFallbackKey)}handleDataSourceOutput(I){this.errorMap=this.updateErrorMap(I),this.setFallbackKeyProperty()}handleDataSourceDestroyed(I){var y;(null===(y=I.payload)||void 0===y?void 0:y.componentId)&&delete this.errorMap[I.payload.componentId],this.setFallbackKeyProperty()}setFallbackKeyProperty(){this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["fallbackKey"],pizzagnaKey:c.xW.Data},this.getFallbackKey())}getFallbackKey(){if(ae()(this.errorMap))return;const I=q()(Object.values(this.errorMap));return 1===I.length?I[0]:this.multipleErrorFallbackKey}updateErrorMap(I){var y,B,j,ie;const re=this.errorMap,ge=void 0!==(null===(B=null===(y=I.payload)||void 0===y?void 0:y.error)||void 0===B?void 0:B.type)?null===(ie=null===(j=I.payload)||void 0===j?void 0:j.error)||void 0===ie?void 0:ie.type.toString():void 0;return ge?ge&&(re[I.payload.componentId]=ge):delete re[I.payload.componentId],re}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY),d.LFG(R.p))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})(),Ee=(()=>{class k{constructor(I,y){this.eventBus=I,this.pizzagnaService=y,this.loadingMap={},this.destroy$=new g.x,this.eventBus.getStream(v.QD).pipe((0,N.R)(this.destroy$)).subscribe(({payload:B})=>{(null==B?void 0:B.componentId)&&((null==B?void 0:B.busy)?this.loadingMap[B.componentId]=!0:delete this.loadingMap[B.componentId]),this.pizzagnaService.setProperty({componentId:this.componentId,propertyPath:["active"],pizzagnaKey:c.xW.Data},!ae()(this.loadingMap))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(I,y){this.componentId=y}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY),d.LFG(R.p))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})();var Le=a(8817),Oe=a.n(Le),Se=a(54004);const nt=/\{.*?\}/g,rt=/\{|\}/g;function st(k,V){const I=k.match(nt);if(!I)return k;let y=k;for(const B of I){const j=Xe(B);V[j]?y=y.replace(B,V[j]):console.warn(`There's no ${B} key found in the data: ${V}`)}return y}const Xe=k=>k.replace(rt,"");let et=(()=>{class k{constructor(I){this.pizzagnaService=I,this.defaultTrackOn="pizzagna",this.subscriptions=[]}setComponent(I,y){this.component=I,this.componentId=y,this.parentComponentId=function Ye(k){const V=k.split("/");return(null==V?void 0:V.length)>1?V[V.length-2]:k}(y),this.initChangeSubscriptions()}updateConfiguration(I){this.configs=null==I?void 0:I.configs}initChangeSubscriptions(){for(const I of this.configs){const y=this.getObservableFor(I);if(!y)return void console.warn("no observable found on 'PizzagnaBroadcasterService', for part: ",I);const B=y.subscribe(j=>{for(const ie of I.paths){const re=st(ie,this);this.pizzagnaService.setProperty(re,j)}});this.subscriptions.push(B)}}getObservableFor(I){return"component"===(I.trackOn||this.defaultTrackOn)?this.getComponentObservableFor(I):this.getPizzagnaObservableFor(I)}getPizzagnaObservableFor(I){return this.pizzagnaService.pizzaChanged.pipe((0,Se.U)(y=>Oe()(y,I.key)),(0,Z.x)())}getComponentObservableFor(I){const y=Oe()(this.component,I.key);return null==y?void 0:y.pipe((0,Z.x)())}ngOnDestroy(){for(const I of this.subscriptions)I.unsubscribe()}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(R.p))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})();var tt=a(97674),at=a(61455),lt=a(42296),dt=a(10948),it=a(59551),ot=a(61874),le=a(16372),Ne=a.n(le),He=a(36216),ye=a(45122);let ht=(()=>{class k extends He.a{constructor(I,y,B){super(I,y,B)}get previewComponentId(){return this.componentId.split("/")[0]}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),y=this.formParts.reduce((B,j)=>{const ie=`${this.previewComponentId}.${j.previewPath}`,re=Oe()(I,ie);if(re)for(const ge of j.keys)void 0!==re[ge]&&(B=(0,C.zdu)(B,`${c.xW.Data}.${this.componentId}.properties.${ge}`,re[ge]));return B},this.pizzagnaService.pizzagna);this.updateFormPizzagna(y)}toPreview(I){I.valueChanges.pipe((0,N.R)(this.destroy$)).subscribe(y=>{const B=this.formParts.reduce((j,ie)=>{let re=ie.previewOutputPath||ie.previewPath;re=`${this.previewComponentId}.${re}`;const ge=Oe()(j,re),Ie=Ne()(y,ie.keys),ke=Object.assign(Object.assign({},ge),Ie);return(0,C.zdu)(j,`${re}`,ke)},this.getPreview());this.updatePreview(B)})}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY),d.LFG(ye.m),d.LFG(R.p))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})();var Pt=a(75675),vt=a(60167);let xt=(()=>{class k extends He.a{constructor(I,y,B){super(I,y,B)}get previewComponentId(){return this.componentId.split("/")[0]}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),y=this.formParts.reduce((B,j)=>{const ie=Oe()(I,j.previewPath),re=null==ie?void 0:ie.find(Ie=>Ie.id===this.previewComponentId),ge=Ne()(re,j.keys);return(0,C.zdu)(B,`${c.xW.Data}.${this.componentId}.properties`,ge)},this.pizzagnaService.pizzagna);this.updateFormPizzagna(y)}toPreview(I){I.valueChanges.pipe((0,N.R)(this.destroy$)).subscribe(y=>{const B=this.formParts.reduce((j,ie)=>{const re=ie.previewOutputPath||ie.previewPath,ge=Oe()(j,re),Ie=ge.findIndex(Kt=>Kt.id===this.previewComponentId),ke=ge[Ie],ft=Ne()(y,ie.keys),Ht=Object.assign(Object.assign({},ke),ft);return(0,C.zdu)(j,`${re}[${Ie}]`,Ht)},this.getPreview());this.updatePreview(B)})}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY),d.LFG(ye.m),d.LFG(R.p))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})(),Dt=(()=>{class k extends He.a{constructor(I,y,B){super(I,y,B)}updateConfiguration(I){I&&I.formParts&&(this.formParts=I.formParts)}buildForm(){const I=this.getPreview(),y=this.formParts.reduce((B,j)=>{const ie=Oe()(I,j.previewPath);if(ie)for(const re of j.keys)void 0!==ie[re]&&(B=(0,C.zdu)(B,`${c.xW.Data}.${this.componentId}.properties.${re}`,ie[re]));return B},this.pizzagnaService.pizzagna);this.updateFormPizzagna(y)}toPreview(I){I.valueChanges.pipe((0,N.R)(this.destroy$)).subscribe(y=>{const B=this.formParts.reduce((j,ie)=>{const re=ie.previewOutputPath||ie.previewPath,ge=Oe()(j,re),Ie=Ne()(y,ie.keys),ke=Object.assign(Object.assign({},ge),Ie);return(0,C.zdu)(j,re,ke)},this.getPreview());this.updatePreview(B)})}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY),d.LFG(ye.m),d.LFG(R.p))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})();var Y=a(42911),u=a(52382),_=a(64509),m=a.n(_),E=a(68675),J=a(94813);let de=(()=>{class k extends He.a{constructor(I,y,B){super(I,y,B)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var I,y,B,j;const ie=null===(I=this.getPreview())||void 0===I?void 0:I.table,re=null===(y=null==ie?void 0:ie.properties)||void 0===y?void 0:y.dataFields,ge=null===(j=null===(B=null==ie?void 0:ie.properties)||void 0===B?void 0:B.configuration)||void 0===j?void 0:j.columns;let Ie=this.pizzagnaService.pizzagna;Ie=(0,C.zdu)(Ie,`${c.xW.Data}.columns.properties.columns`,null!=ge?ge:[]),Ie=(0,C.zdu)(Ie,`${c.xW.Data}.columns.properties.dataFields`,re),this.updateFormPizzagna(Ie)}toPreview(I){const y=I.contains("columnsOutput")?I.get("columnsOutput"):I.get("columns");if(!y)throw new Error("FormControl is not defined!");y.valueChanges.pipe((0,N.R)(this.destroy$),(0,Z.x)(m())).subscribe(B=>{setTimeout(()=>{const re=this.getPreview();this.updatePreview((0,C.zdu)(re,"table.properties.configuration.columns",B))});let ie=this.pizzagnaService.pizzagna;setTimeout(()=>{var re,ge,Ie,ke,ft;ie=(0,C.zdu)(ie,`${c.xW.Structure}.columns.properties.template`,null===(re=this.pizzagnaService.pizzagna[c.xW.Structure].columns.properties)||void 0===re?void 0:re.template),ie=(0,C.zdu)(ie,`${c.xW.Data}.filters.properties.columns`,B),ie=(0,C.zdu)(ie,`${c.xW.Structure}.presentation.properties.nodes`,[...null!==(ft=null===(ke=null===(Ie=null===(ge=null==ie?void 0:ie.structure)||void 0===ge?void 0:ge.presentation)||void 0===Ie?void 0:Ie.properties)||void 0===ke?void 0:ke.nodes)&&void 0!==ft?ft:[]]),this.updateFormPizzagna(ie)})}),this.subscribeToColumnsValueChange()}subscribeToColumnsValueChange(){var I;null===(I=this.component.form.get("columnsOutput"))||void 0===I||I.valueChanges.pipe((0,E.O)(this.component.form.get("columnsOutput").value),(0,H.h)(y=>y.length>0),(0,oe.b)(()=>this.handleWidthValidation()),(0,Se.U)(y=>this.filterColumnsWithoutSpecifiedWidth(y)),(0,Se.U)(y=>this.handleColumnsWithoutSpecifiedWidth(y)),function W(k,V){return(0,Z.x)((I,y)=>V?V(I[k],y[k]):I[k]===y[k])}("id"),(0,J.j)("id"),(0,N.R)(this.destroy$)).subscribe(y=>this.setWidthMessages(y))}filterColumnsWithoutSpecifiedWidth(I){return I.filter(y=>y.isActive&&!y.width)}handleColumnsWithoutSpecifiedWidth(I){switch(I.length){case 0:{const y=this.component.form.get("columns").controls.filter(j=>Oe()(j,`value.properties[${j.value.id}/description].isActive`));if(ae()(y))return{id:void 0,label:void 0};const B=y[y.length-1];return console.warn(`Cannot set width for all columns. Resetting "${B.value.label}" width.`),B.patchValue({width:null},{emitEvent:!1}),B.value}case 1:return I[0];default:return{id:void 0,label:void 0}}}handleWidthValidation(){this.component.form.get("columns").controls.forEach(I=>{var y;const j=I.get(`properties.${I.value.id}/description`);if(!j)return;const ie=null===(y=j.get("isActive"))||void 0===y?void 0:y.value,re=j.get("width");ie?(null==re||re.setValidators([u.kI.min(62)]),null==re||re.markAllAsTouched(),null==re||re.updateValueAndValidity({emitEvent:!1})):(null==re||re.clearValidators(),null==re||re.updateValueAndValidity({emitEvent:!1}))})}setWidthMessages(I){var y;if(!this.pizzagnaService.pizzagna)return;const B="isWidthMessageDisplayed",{pizzagna:j}=this.pizzagnaService;(null===(y=j.data.columns.properties)||void 0===y?void 0:y.columns).forEach(re=>this.pizzagnaService.setProperty(`${c.xW.Data}.${re.id}/description.properties.${B}`,!1)),I&&this.pizzagnaService.setProperty(`${c.xW.Data}.${I}/description.properties.${B}`,!0)}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY),d.LFG(ye.m),d.LFG(R.p))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})(),me=(()=>{class k extends He.a{constructor(I,y,B){super(I,y,B)}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){var I,y,B,j,ie;let re=this.pizzagnaService.pizzagna;const ge=null===(I=this.getPreview())||void 0===I?void 0:I.table,Ie=null===(B=null===(y=null==ge?void 0:ge.properties)||void 0===y?void 0:y.configuration)||void 0===B?void 0:B.columns,ke=null===(ie=null===(j=null==ge?void 0:ge.properties)||void 0===j?void 0:j.configuration)||void 0===ie?void 0:ie.sorterConfiguration;re=(0,C.zdu)(re,`${c.xW.Data}.filters.properties.columns`,Ie),re=(0,C.zdu)(re,`${c.xW.Data}.filters.properties.sorterConfiguration`,ke),this.updateFormPizzagna(re)}toPreview(I){I.valueChanges.pipe((0,N.R)(this.destroy$)).subscribe(y=>{let B=this.getPreview();B=(0,C.zdu)(B,"table.properties.configuration.sorterConfiguration",y.sorterConfiguration),this.updatePreview(B),this.buildForm()})}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY),d.LFG(ye.m),d.LFG(R.p))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})(),he=(()=>{class k extends He.a{constructor(I,y,B,j){super(I,y,B),this.timeframeService=j}ngAfterViewInit(){super.ngAfterViewInit()}buildForm(){let I=this.pizzagnaService.pizzagna;const y=this.getPreview(),B=Object.keys(this.timeframeService.currentPresets).map(Ie=>({id:Ie,name:this.timeframeService.currentPresets[Ie].name})),j=`${c.xW.Data}.timeseriesMetadata.properties`;I=(0,C.zdu)(I,`${j}.timeSpans`,B);const ie=Oe()(y,"timeframeSelection.properties.timeframe.selectedPresetId","last7Days"),re=B.find(Ie=>Ie.id===ie);re&&(I=(0,C.zdu)(I,`${j}.startingTimespan`,re));const ge=Oe()(y,"chart.properties.configuration");ge&&(I=(0,C.zdu)(I,`${j}.legendPlacement`,ge.legendPlacement),I=(0,C.zdu)(I,`${j}.leftAxisLabel`,ge.leftAxisLabel),I=(0,C.zdu)(I,`${j}.preset`,ge.preset)),this.updateFormPizzagna(I)}toPreview(I){I.valueChanges.pipe((0,N.R)(this.destroy$)).subscribe(y=>{let B=this.getPreview();const j=Oe()(y,"startingTimespan.id");j&&(B=(0,C.zdu)(B,"timeframeSelection.properties.timeframe.selectedPresetId",j));const ie="chart.properties.configuration";B=(0,C.zdu)(B,`${ie}.legendPlacement`,Oe()(y,"legendPlacement","")),B=(0,C.zdu)(B,`${ie}.leftAxisLabel`,Oe()(y,"leftAxisLabel","")),B=(0,C.zdu)(B,`${ie}.preset`,Oe()(y,"preset","")),this.updatePreview(B)})}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY),d.LFG(ye.m),d.LFG(R.p),d.LFG(C.hYR))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})();var Ce=a(41294);let De=(()=>{class k extends He.a{constructor(I,y,B){super(I,y,B),this.previewSeriesPath=`chart.providers.${c.Mu.Adapter}.properties.series`}get previewComponentId(){return this.componentId.split("/")[0]}buildForm(){const y=Oe()(this.getPreview(),this.previewSeriesPath,[]).find(ie=>ie.id===this.previewComponentId),j=(0,C.zdu)(this.pizzagnaService.pizzagna,`${c.xW.Data}.${this.componentId}.properties`,{selectedSeriesId:y&&y.selectedSeriesId});this.updateFormPizzagna(j)}toPreview(I){I.valueChanges.pipe((0,N.R)(this.destroy$)).subscribe(y=>{const B=y.id,j=this.getPreview(),ie=Oe()(j,this.previewSeriesPath,[]),re=ie.findIndex(ge=>ge.id===this.previewComponentId);if(re>-1){const ge=[...ie];ge[re]=Object.assign(Object.assign({},ge[re]),{selectedSeriesId:B});const Ie=(0,C.zdu)(j,`${this.previewSeriesPath}`,ge);this.updatePreview(Ie)}})}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(c.nY),d.LFG(ye.m),d.LFG(R.p))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})();var Ae=a(27463),$e=a(29242),Fe=a(47243),Ue=a(99567),Ke=a(63776),mt=a(294);let Et=(()=>{class k{constructor(I){this.logger=I,this.staticProviders={},this.setProviders({[v.tc]:{provide:tt.q,deps:[c.nY,d.R0b,at.g]},[v.GN]:{provide:mt.q,deps:[c.nY,[new d.FiY,c.Bc],[new d.FiY,Ke.I],$e.o,R.p]},[v.bZ]:{provide:e.i,deps:[c.nY,[new d.FiY,c.Fk],R.p]},[v.l5]:{provide:lt.Y,deps:[c.nY,[new d.FiY,c.Fk],R.p,C.zCP]},[v.R9]:{provide:dt.f,deps:[c.nY,[new d.FiY,c.Fk],R.p]},[v.u1]:{provide:T,deps:[c.nY,[new d.FiY,c.Fk],R.p,r.JJ]},[v.mf]:{provide:O,deps:[c.nY,[new d.FiY,c.Fk],R.p]},[v.tS]:{provide:G,deps:[[new d.FiY,c.Fk],R.p,F.Z]},[v.j4]:{provide:Ae.l,useClass:Y.c,deps:[c.nY,ye.m,R.p]},[v.dz]:{provide:Ae.l,useClass:vt.M,deps:[c.nY,ye.m,R.p]},[v.ns]:{provide:Ae.l,useClass:Pt.l,deps:[c.nY,ye.m,R.p]},[v.YN]:{provide:Ae.l,useClass:ht,deps:[c.nY,ye.m,R.p]},[v.VX]:{provide:Ae.l,useClass:Dt,deps:[c.nY,ye.m,R.p]},[v.Es]:{provide:Ae.l,useClass:xt,deps:[c.nY,ye.m,R.p]},[v.Gq]:{provide:Ae.l,useClass:De,deps:[c.nY,ye.m,R.p,C.hYR]},[v.dZ]:{provide:Ae.l,useClass:he,deps:[c.nY,ye.m,R.p,C.hYR]},[v.Ip]:{provide:Ae.l,useClass:Ce.w,deps:[c.nY,ye.m,R.p]},[v.n5]:{provide:Ae.l,useClass:de,deps:[c.nY,ye.m,R.p]},[v.LU]:{provide:Ae.l,useClass:me,deps:[c.nY,ye.m,R.p]},[v.IG]:{provide:Ee,deps:[c.nY,R.p]},[v.Cz]:{provide:te,deps:[c.nY,R.p]},[v.C]:{provide:fe,deps:[c.nY,R.p]},[v.$u]:{provide:pe,deps:[c.nY,R.p]},[v.DJ]:{provide:M.O,deps:[c.nY,"windowObject",C.mQy,Ue.v]},[v.F]:{provide:L,deps:[c.nY]},[v.Vx]:{provide:C.zCP,deps:[]},[v.m_]:{provide:et,deps:[R.p]},[v.Hp]:{provide:c.m4,useExisting:Fe.C,deps:[R.p]},[v.s6]:{provide:c.m4,useExisting:Fe.YX,deps:[R.p]},[v.rf]:{provide:c.m4,useExisting:Fe.UA,deps:[R.p]},[v.Xh]:{provide:ot.q,deps:[c.nY,[new d.FiY,it.e]]}})}setProviders(I){this.staticProviders=Object.assign({},this.staticProviders,I)}getProvider(I){const y=this.staticProviders[I];return y||(this.logger.warn("No provider registered for id",I),this.logger.warn("Known providers:",Object.keys(this.staticProviders).join(", "))),y}getProviderInstance(I,y){return d.zs3.create({providers:[I],parent:y}).get(c.Fk)}}return k.\u0275fac=function(I){return new(I||k)(d.LFG(C.mQy))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})()},21366:(ee,U,a)=>{"use strict";a.d(U,{k:()=>S});var r=a(61135),d=a(54004),C=a(30652),e=a(5e3);let S=(()=>{class N{constructor(v,c){this.logger=v,this.className=c,this.state$=new r.X({}),this.stateChanged$=this.state$.asObservable().pipe((0,d.U)(()=>this.getItems())),this._isEmpty=!0}get stateVersion(){return this._stateVersion}get isEmpty(){return this._isEmpty}addItems(v,c={overrideExisting:!0}){const O=this.state$.value;v.forEach(g=>{!O[this.getItemKey(g)]||c.overrideExisting?O[this.getItemKey(g)]=Object.assign({},g):this.logger.warn(`Logger - ${this.className}: item with ${this.getItemKey(g)}\n                    is already registered. Skipping.`)}),this.state$.next(O),v.length>0&&this.updateStateFlags(!1)}getItem(v){return this.state$.value[v]}getItems(){return Object.values(this.state$.value)}reset(){this.state$.next({}),this.updateStateFlags(!0)}ngOnDestroy(){this.state$.complete()}updateStateFlags(v){this._isEmpty=v,this._stateVersion=(0,C.VjN)()}}return N.\u0275fac=function(v){e.$Z()},N.\u0275dir=e.lG2({type:N}),N})()},47243:(ee,U,a)=>{"use strict";a.d(U,{C:()=>S,UA:()=>R,YX:()=>N,qy:()=>v});var r=a(21366),d=a(5e3),C=a(30652);class e extends r.k{constructor(){super(...arguments),this.formattersStateChanged$=this.stateChanged$}addFormatters(O,g={overrideExisting:!0}){super.addItems(O,g)}getFormatters(){return super.getItems()}getItemKey(O){return O.componentType}}let S=(()=>{class c extends e{constructor(g){super(g,"TableFormatterRegistryService")}}return c.\u0275fac=function(g){return new(g||c)(d.LFG(C.mQy))},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),N=(()=>{class c extends e{constructor(g){super(g,"KpiFormattersRegistryService")}}return c.\u0275fac=function(g){return new(g||c)(d.LFG(C.mQy))},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),R=(()=>{class c extends e{constructor(g){super(g,"ProportionalDonutContentFormattersRegistryService")}}return c.\u0275fac=function(g){return new(g||c)(d.LFG(C.mQy))},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),v=(()=>{class c extends e{constructor(g){super(g,"ProportionalLegendFormattersRegistryService")}}return c.\u0275fac=function(g){return new(g||c)(d.LFG(C.mQy))},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},53450:(ee,U,a)=>{"use strict";a.d(U,{$u:()=>Xe,C:()=>st,Cz:()=>rt,DJ:()=>et,EC:()=>h,Ef:()=>v,Es:()=>Oe,F:()=>tt,GN:()=>se,Gq:()=>Ye,Hp:()=>dt,IG:()=>nt,Ip:()=>q,LU:()=>fe,M:()=>F,MO:()=>c,N9:()=>z,QD:()=>A,R1:()=>T,R9:()=>H,RG:()=>S,VX:()=>Le,Vx:()=>lt,XM:()=>e,Xh:()=>Ne,Xi:()=>L,YN:()=>Se,b1:()=>P,bZ:()=>w,dZ:()=>K,df:()=>N,dz:()=>ne,j4:()=>ue,j7:()=>O,kV:()=>M,l5:()=>Ee,m_:()=>at,mf:()=>oe,n5:()=>te,ns:()=>ae,pV:()=>g,re:()=>G,rf:()=>ot,s6:()=>it,tS:()=>pe,tc:()=>b,u1:()=>Z,xZ:()=>x,y4:()=>R});var r=a(61135),d=a(4707),C=a(30652);const e="/",S=new C.JRy("REFRESH"),N=new C.JRy("SCROLL_NEXT_PAGE"),R=new C.JRy("WIDGET_REMOVE"),v=new C.JRy("WIDGET_EDIT"),c=new C.JRy("WIDGET_CREATE"),O=new C.JRy("WIDGET_READY"),g=new C.JRy("WIDGET_RESIZE"),L=new C.JRy("WIDGET_POSITION_CHANGE"),M=new C.JRy("WIDGET_SEARCH",()=>new r.X({payload:""})),F=new C.JRy("SET_PROPERTY_VALUE"),G=new C.JRy("SET_TIMEFRAME"),x=new C.JRy("PREVIEW_EVENT"),A=new C.JRy("DATA_SOURCE_BUSY"),z=new C.JRy("DASHBOARD_EDIT_MODE",()=>new d.t(1)),P=new C.JRy("INTERACTION"),T=new C.JRy("DATA_SOURCE_INVOKED"),h=new C.JRy("DRILLDOWN"),b="NOVA_DATASOURCE_INTERVAL_REFRESHER",w="NOVA_DATASOURCE_ADAPTER",H="NOVA_TIMESERIES_DATASOURCE_ADAPTER",Z="NOVA_KPI_DATASOURCE_ADAPTER",oe="NOVA_DRILLDOWN_DATASOURCE_ADAPTER",pe="NOVA_KPI_COLOR_PRIORITIZER",ue="NOVA_TITLE_AND_DESCRIPTION_CONVERTER",ne="NOVA_PROPORTIONAL_WIDGET_CHART_OPTIONS_CONVERTER",ae="NOVA_KPI_TILES_CONVERTER",K="NOVA_TIMESERIES_METADATA_CONVERTER",q="NOVA_TIMESERIES_SERIES_CONVERTER",se="NOVA_DASHBOARD_EVENT_PROXY",te="NOVA_TABLE_COLUMNS_CONVERTER",fe="NOVA_TABLE_FILTERS_CONVERTER",Ee="NOVA_TABLE_DATASOURCE_ADAPTER",Le="NOVA_GENERIC_CONVERTER",Oe="NOVA_GENERIC_ARRAY_CONVERTER",Se="NOVA_KPI_SECTION_CONVERTER",Ye="NOVA_TIMESERIES_TILE_INDICATOR_DATA_CONVERTER",nt="NOVA_LOADING_ADAPTER",rt="NOVA_STATUS_CONTENT_FALLBACK_ADAPTER",st="NOVA_KPI_STATUS_CONTENT_FALLBACK_ADAPTER",Xe="NOVA_KPI_SCALE_SYNC_BROKER",et="NOVA_URL_INTERACTION_HANDLER",tt="NOVA_EVENT_BUS_DEBUGGER",at="NOVA_PIZZAGNA_BROADCASTER",lt="NOVA_VIRTUAL_VIEWPORT_MANAGER",dt="NOVA_TABLE_FORMATTERS_REGISTRY",it="NOVA_KPI_FORMATTERS_REGISTRY",ot="NOVA_PROPORTIONAL_CONTENT_FORMATTERS_REGISTRY",Ne="NOVA_CONFIGURATOR_DATA_SOURCE_MANAGER"},99567:(ee,U,a)=>{"use strict";a.d(U,{v:()=>C});var r=a(5e3),d=a(30652);let C=(()=>{class e{constructor(N){this.logger=N}template(N,R){const v=new RegExp(/\$\{([a-zA-Z0-9.]*)\}/g);return N.replace(v,(c,O)=>{var g;try{return null!==(g=this.evaluate(O.split("."),R))&&void 0!==g?g:""}catch(L){return this.logger.error(L),""}})}evaluate(N,R){return N.reduce((v,c)=>v[c],R)}}return e.\u0275fac=function(N){return new(N||e)(r.LFG(d.mQy))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},63776:(ee,U,a)=>{"use strict";a.d(U,{I:()=>d});var r=a(5e3);let d=(()=>{class C{updateWidget(S){this.widget=S}getWidget(){return this.widget}}return C.\u0275fac=function(S){return new(S||C)},C.\u0275prov=r.Yz7({token:C,factory:C.\u0275fac}),C})()},294:(ee,U,a)=>{"use strict";a.d(U,{q:()=>L});var r=a(12498),d=a.n(r),C=a(30836),e=a.n(C),S=a(77579),N=a(82722),R=a(42339),v=a(25878),c=a(5e3),O=a(63776),g=a(29242);let L=(()=>{class M{constructor(G,x,A,z,P){this.pizzagnaBus=G,this.dashboardBus=x,this.widgetConfigurationService=A,this.eventRegistry=z,this.pizzagnaService=P,this.upstreamSubscriptions={},this.downstreamSubscriptions={},this.destroy$=new S.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setComponent(G){this.component=G}updateConfiguration(G){this.providerKey=G.providerKey,this.upstreams=G.upstreams,this.downstreams=G.downstreams,this.upstreams&&this.registerUpstreamSubscriptions(...this.upstreams),this.downstreams&&this.registerDownstreamSubscriptions(...this.downstreams)}addUpstream(G){this.addStream(G,"upstreams")}addDownstream(G){this.addStream(G,"downstreams")}addStream(G,x){const A=e()((this[x]||[]).concat(G.id));this[x]=A,this.component&&this.pizzagnaService.setProperty({componentId:this.component.componentId,pizzagnaKey:v.xW.Data,providerKey:this.providerKey,propertyPath:[x]},A)}registerUpstreamSubscriptions(...G){!this.dashboardBus||this.registerSubscriptions(G,this.upstreamSubscriptions,this.pizzagnaBus,(x,A)=>{const z=this.widgetConfigurationService.getWidget().id;this.dashboardBus.getStream(x).next(Object.assign({},A,{widgetId:z}))})}registerDownstreamSubscriptions(...G){!this.dashboardBus||this.registerSubscriptions(G,this.downstreamSubscriptions,this.dashboardBus,(x,A)=>{const z=this.widgetConfigurationService.getWidget().id;(void 0===A.widgetId||z===A.widgetId)&&this.pizzagnaBus.getStream(x).next(A)})}registerSubscriptions(G=[],x,A,z){const P=G?d()(G,T=>T):null;for(const T of Object.keys(x))(!P||!P[T])&&(x[T].unsubscribe(),delete x[T]);for(const T of Object.keys(null!=P?P:{}).filter(h=>!x[h])){const h=this.eventRegistry.getEvent(T);x[T]=A.getStream(h).pipe((0,N.R)(this.destroy$)).subscribe(b=>{z(h,b)})}}}return M.\u0275fac=function(G){return new(G||M)(c.LFG(v.nY),c.LFG(v.Bc,8),c.LFG(O.I,8),c.LFG(g.o),c.LFG(R.p))},M.\u0275prov=c.Yz7({token:M,factory:M.\u0275fac}),M})()},32656:(ee,U,a)=>{"use strict";a.d(U,{x:()=>R});var r=a(69754),d=a.n(r),C=a(34793),e=a.n(C),S=a(25878),N=a(5e3);let R=(()=>{class v{constructor(){this.widgetTypes={}}registerWidgetType(O,g,L){let M=this.widgetTypes[O];M||(M=[],this.widgetTypes[O]=M),M.length<g&&(M.length=g),M[g-1]=L}getWidgetType(O,g){const L=this.widgetTypes[O];if(!L||0===L.length)throw new Error("Type '"+O+"' not found in the registry. Available types: "+Object.keys(this.widgetTypes).join(", "));if(void 0!==g&&(g<=0||L.length<g))throw new Error("Version "+g+" for widget type '"+O+"' not registered. Max available version is "+L.length);return L[(void 0===g?L.length:g)-1]}mergeWithWidgetType(O){const g=this.getWidgetType(O.type,O.version);return Object.assign(Object.assign({},O),{pizzagna:d()(O.pizzagna,g.widget)})}setNode(O,g,L,M){var F,G;const z=`${g}.${S.xW.Structure}.${(null===(G=null===(F=O.paths)||void 0===F?void 0:F[g])||void 0===G?void 0:G[L])||L}`;e()(O,z,M)}}return v.\u0275fac=function(O){return new(O||v)},v.\u0275prov=N.Yz7({token:v,factory:v.\u0275fac}),v})()},25878:(ee,U,a)=>{"use strict";a.d(U,{AC:()=>c,B5:()=>R,Bc:()=>C,Fk:()=>e,Mu:()=>v,Nc:()=>L,WE:()=>M,m4:()=>S,nY:()=>d,ni:()=>O,xW:()=>g});var r=a(5e3);const d=new r.OlP("PIZZAGNA_EVENT_BUS"),C=new r.OlP("DASHBOARD_EVENT_BUS"),e=new r.OlP("DATA_SOURCE"),S=new r.OlP("FORMATTERS_REGISTRY"),R=(new r.OlP("TEST_REGISTRY"),new r.OlP("HEADER_LINK_PROVIDER"));var v=(()=>{return(F=v||(v={})).DataSource="dataSource",F.Adapter="adapter",F.Converter="converter",F.Broadcaster="broadcaster",F.Refresher="refresher",F.EventProxy="eventProxy",F.LoadingAdapter="loadingAdapter",F.ContentFallbackAdapter="contentFallbackAdapter",F.InteractionHandler="interactionHandler",F.EventBusDebugger="eventBusDebugger",F.KpiColorPrioritizer="kpiColorPrioritizer",F.FormattersRegistry="formattersRegistry",F.DataSourceManager="dataSourceManager",v;var F})(),c=(()=>{return(F=c||(c={})).Root="root",F.DataSourceConfigComponentType="dataSourceConfigComponentType",F.TileDescriptionConfigComponentType="tileDescriptionConfigComponentType",F.DataSourceProviders="dataSourceProviders",F.Formatters="formatters",F.TileDescriptionBackgroundColors="tileDescriptionBackgroundColors",F.TileBackgroundColorRulesBackgroundColors="tileBackgroundColorRulesBackgroundColors",c;var F})(),O=(()=>{return(F=O||(O={})).Interactivity="interactivity",F.DisableTableColumnGeneration="disableTableColumnGeneration",O;var F})(),g=(()=>{return(F=g||(g={})).Structure="structure",F.Configuration="configuration",F.Data="data",g;var F})(),L=(()=>{return(F=L||(L={})).CRITICAL="critical",F.WARNING="warning",F.DEFAULT="default",L;var F})(),M=(()=>{return(F=M||(M={})).Unknown="0",F.Ok="200",F.Forbidden="403",F.NotFound="404",M;var F})()},55413:(ee,U,a)=>{"use strict";a.d(U,{w:()=>r});var r=(()=>{return(d=r||(r={})).None="None",d.Right="Right",d.Bottom="Bottom",r;var d})()},50793:(ee,U,a)=>{"use strict";a.d(U,{X:()=>e});var r=a(16134),d=a(61621);const e=[{componentType:a(14366).a.lateLoadKey,label:$localize`No Formatter`,dataTypes:{value:null}},{componentType:d.s.lateLoadKey,label:$localize`Link`,configurationComponent:"LinkConfiguratorComponent",dataTypes:{value:"label",link:"link"}},{componentType:r.C.lateLoadKey,label:$localize`Icon`,dataTypes:{value:"string"}}]},45388:(ee,U,a)=>{"use strict";a.d(U,{hiK:()=>pi.h,p3D:()=>We.p,Fk3:()=>h.Fk,ay7:()=>we.ay,PFv:()=>we.PF,vXf:()=>Si,tFi:()=>Bl,XMI:()=>T.XM,wz0:()=>kl,NlZ:()=>Wl,pPd:()=>od,MXM:()=>L.M,cY_:()=>eo,dsi:()=>Wi,vHB:()=>ki,O5k:()=>hi,TAb:()=>mi,gIB:()=>Mt,B:()=>x,lc0:()=>Ri,Ksf:()=>M,PIV:()=>_t,AOA:()=>yi,B5u:()=>h.B5,WEY:()=>h.WE,Cg1:()=>fi.C,ZhR:()=>me.Z,ufE:()=>q,Klf:()=>Yt,woB:()=>y.w,s9y:()=>$t.s,vB5:()=>ot,fp5:()=>ht,mf:()=>T.mf,VXI:()=>T.VX,tSO:()=>T.tS,u1$:()=>T.u1,$uq:()=>T.$u,j4g:()=>T.j4,DJm:()=>T.DJ,Qpk:()=>xo,Pi:()=>td,nYw:()=>h.nY,ntI:()=>Ti,xW5:()=>h.xW,khc:()=>Ce,UAh:()=>de.UA,qy4:()=>de.qy,EMX:()=>V,CNH:()=>E.C,aDR:()=>Nt.a,g4s:()=>Xt.g,PEA:()=>Ut,aAT:()=>Se,Car:()=>de.C,CKZ:()=>Ge,D9N:()=>je,Usc:()=>ut,Q$d:()=>Je,MOJ:()=>T.MO,zer:()=>pt,CyH:()=>It,niB:()=>h.ni,ACc:()=>h.AC,Muk:()=>h.Mu,$Ie:()=>Fo,jFY:()=>ze,xTe:()=>J.x,GE5:()=>id,Amp:()=>Vt,j5E:()=>qe,LtV:()=>Jt,O9d:()=>gt});var r=a(69808),d=a(30652),C=a(92120),e=a(5e3);let S=(()=>{class o{constructor(t){this.changeDetector=t,this.defaultClasses="d-flex flex-column justify-content-center w-100 p-3",this.elementClass=""}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`}}return o.lateLoadKey="WidgetErrorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-error"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{image:"image",title:"title",description:"description",elementClass:"elementClass"},decls:6,vars:3,consts:[[3,"image"],[1,"widget-error__title"],[1,"d-flex","justify-content-center","text-center"]],template:function(t,i){1&t&&(e._UZ(0,"nui-image",0),e.TgZ(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._uU(5),e.qZA()),2&t&&(e.Q6J("image",i.image),e.xp6(3),e.Oqu(i.title),e.xp6(2),e.Oqu(i.description))},directives:[d.cuP],styles:[".widget-error__title[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center;margin-top:20px;margin-bottom:10px}"]}),o})(),R=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[r.ez,d.sF0],r.ez]}),o})();var v=a(8083),c=a(52382),O=a(33748),g=a(23913),L=a(34575),M=(()=>{return(o=M||(M={}))[o.URL=0]="URL",o[o.HTML=1]="HTML",M;var o})(),F=a(22313);const G=["anchor"];let x=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.document=i,this.domSanitizer=n,this.sanitized=!0,this.elementClass=""}ngOnInit(){this.validateAndApplyEmbeddedContent()}ngOnChanges(t){t.customEmbeddedContent&&!t.customEmbeddedContent.firstChange&&this.validateAndApplyEmbeddedContent()}validateAndApplyEmbeddedContent(){const t=this.sanitized&&this.sanitizeContext(this.mode===M.URL?e.q3G.URL:e.q3G.HTML);if(this.anchor.nativeElement.innerHTML="",this.mode===M.URL){const i=this.document.createElement("iframe");i.src=this.sanitized?t:this.customEmbeddedContent,i.width="100%",i.height="100%",this.anchor.nativeElement.appendChild(i)}else this.anchor.nativeElement.innerHTML=this.sanitized?t:this.customEmbeddedContent}sanitizeContext(t){var i;return this.domSanitizer.sanitize(t,null===(i=this.customEmbeddedContent)||void 0===i?void 0:i.trim())}}return o.lateLoadKey="EmbeddedContentComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(r.K0),e.Y36(F.H7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-embedded-content"]],viewQuery:function(t,i){if(1&t&&e.Gf(G,7),2&t){let n;e.iGM(n=e.CRH())&&(i.anchor=n.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{mode:"mode",customEmbeddedContent:"customEmbeddedContent",sanitized:"sanitized",elementClass:"elementClass"},features:[e.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["anchor",""]],template:function(t,i){1&t&&e._UZ(0,"div",0,1)},encapsulation:2,changeDetection:0}),o})();var A=a(33816),z=a.n(A);function P(o,l){const{dataFieldIds:t}=o.properties||{};let i;return i=t?Object.keys(t).reduce((n,s)=>(n[s]=l[t[s]],n),{}):{value:l.value},i}var T=a(53450),h=a(25878),b=a(47969),w=a(47429);function H(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"a",4),e.GkF(2,5),e.qZA(),e.BQk()),2&o){const t=e.oxw(),i=e.MAs(4);e.xp6(1),e.Q6J("href",t.widgetData.link,e.LSH),e.xp6(1),e.Q6J("ngTemplateOutlet",i)}}function Z(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().onInteraction()}),e.GkF(2,5),e.qZA(),e.BQk()}if(2&o){e.oxw();const t=e.MAs(4);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}function oe(o,l){}function pe(o,l){if(1&o){const t=e.EpF();e.ynx(0,15,16),e.TgZ(2,"div",17)(3,"span",18),e.YNc(4,oe,0,0,"ng-template",19),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.qZA()(),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw(2);let n,s;e.Q6J("componentType",null==i.configuration||null==i.configuration.formatters||null==i.configuration.formatters.Value||null==i.configuration.formatters.Value.formatter?null:i.configuration.formatters.Value.formatter.componentType)("properties",i.formattersProperties.Value),e.xp6(3),e.Q6J("ngClass","IconFormatterComponent"===(null==i.configuration||null==i.configuration.formatters||null==i.configuration.formatters.Value||null==i.configuration.formatters.Value.formatter?null:i.configuration.formatters.Value.formatter.componentType)?"without-filter":"")("useZoom",!1)("scaleIN$",null==(n=i.getScaleBroker("value"))?null:n.out$)("scaleOUT$",null==(s=i.getScaleBroker("value"))?null:s.in$),e.xp6(1),e.Q6J("cdkPortalOutlet",t.portal)}}const ue=function(o){return{"background-color":o}},ne=function(o){return{color:o}};function ae(o,l){if(1&o&&(e._UZ(0,"div",7),e.TgZ(1,"div",8)(2,"div",9)(3,"div",10)(4,"span",11),e._uU(5),e.qZA()(),e.YNc(6,pe,5,7,"ng-container",12),e.TgZ(7,"div",13)(8,"span",14),e._uU(9),e.qZA()()()()),2&o){const t=e.oxw(),i=e.MAs(6);let n,s,p,f;e.ekj("nui-kpi-indicator--interactive",t.interactive),e.Q6J("ngStyle",e.VKq(18,ue,t.backgroundColor||(null==t.widgetData?null:t.widgetData.backgroundColor))),e.xp6(1),e.Q6J("ngStyle",e.VKq(20,ne,(null==t.widgetData?null:t.widgetData.textColor)||t.backgroundColor||(null==t.widgetData?null:t.widgetData.backgroundColor)||t.defaultColor)),e.xp6(2),e.Q6J("title",null==t.widgetData?null:t.widgetData.label),e.xp6(1),e.Q6J("useZoom",!1)("minScale",.5)("scaleIN$",null==(n=t.getScaleBroker("label"))?null:n.out$)("scaleOUT$",null==(s=t.getScaleBroker("label"))?null:s.in$),e.xp6(1),e.Oqu(null==t.widgetData?null:t.widgetData.label),e.xp6(1),e.Q6J("ngIf",null==t.configuration||null==t.configuration.formatters?null:t.configuration.formatters.Value)("ngIfElse",i),e.xp6(1),e.Q6J("title",null==t.widgetData?null:t.widgetData.units),e.xp6(1),e.Q6J("useZoom",!1)("scaleIN$",null==(p=t.getScaleBroker("units"))?null:p.out$)("scaleOUT$",null==(f=t.getScaleBroker("units"))?null:f.in$)("minScale",.5),e.xp6(1),e.Oqu(null==t.widgetData?null:t.widgetData.units)}}function K(o,l){if(1&o&&(e.TgZ(0,"div",20)(1,"span",21),e._uU(2),e.qZA()()),2&o){const t=e.oxw();let i,n;e.Udp("font-size",null==t.widgetData?null:t.widgetData.fontSize),e.Q6J("title",null==t.widgetData?null:t.widgetData.value),e.xp6(1),e.Q6J("useZoom",!1)("scaleIN$",null==(i=t.getScaleBroker("value"))?null:i.out$)("scaleOUT$",null==(n=t.getScaleBroker("value"))?null:n.in$),e.xp6(1),e.hij(" ",null==t.widgetData?null:t.widgetData.value,"")}}let q=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.dataSource=i,this.eventBus=n,this.busy=!1,this.elementClass="",this.defaultColor="var(--nui-color-bg-secondary)"}get interactive(){var t,i,n,s,p;return((null===(t=this.configuration)||void 0===t?void 0:t.interactive)||(null===(s=null===(n=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===n?void 0:n.getFeatureConfig(h.ni.Interactivity))||void 0===s?void 0:s.enabled))&&!z()(null===(p=this.widgetData)||void 0===p?void 0:p.value)||!1}onInteraction(){!this.interactive||this.eventBus.getStream(T.b1).next({payload:{data:this.widgetData}})}getScaleBroker(t){if(this.syncValuesBroker)return this.syncValuesBroker.find(i=>i.id===t)}ngOnChanges(t){var i;if(t.configuration){const n=t.configuration.currentValue.formatters;n&&(this.formattersProperties=this.getFormatterProperties(n))}t.widgetData&&(null===(i=this.configuration)||void 0===i?void 0:i.formatters)&&(this.formattersProperties=this.getFormatterProperties(this.configuration.formatters))}getFormatterProperties(t){return Object.keys(t).reduce((s,p)=>{var f;const D=null===(f=t[p])||void 0===f?void 0:f.formatter;return D&&(s[p]={data:P(D,this.widgetData)}),s},{})}}return o.lateLoadKey="KpiComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(h.Fk,8),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-kpi"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",backgroundColor:"backgroundColor",syncValuesBroker:"syncValuesBroker",configuration:"configuration",busy:"busy"},features:[e.TTD],decls:7,vars:3,consts:[["nui-busy","",1,"w-100","h-100",3,"busy"],[4,"ngIf"],["kpiContent",""],["kpiValueRaw",""],[1,"nui-kpi-indicator",3,"href"],[3,"ngTemplateOutlet"],[1,"nui-kpi-indicator",3,"click"],[1,"nui-kpi-indicator__background",3,"ngStyle"],[1,"nui-kpi-indicator__text",3,"ngStyle"],[1,"nui-kpi-indicator__zoom-container"],[1,"nui-kpi-indicator__description",3,"title"],["nuiZoomContent","",3,"useZoom","minScale","scaleIN$","scaleOUT$"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties",4,"ngIf","ngIfElse"],[1,"nui-kpi-indicator__units",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$","minScale"],["nuiComponentPortal","","componentId","KpiValueFormatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[1,"nui-kpi-indicator__value"],["nuiZoomContent","",3,"ngClass","useZoom","scaleIN$","scaleOUT$"],[3,"cdkPortalOutlet","attached"],[1,"nui-kpi-indicator__value",3,"title"],["nuiZoomContent","",3,"useZoom","scaleIN$","scaleOUT$"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,H,3,2,"ng-container",1),e.YNc(2,Z,3,1,"ng-container",1),e.qZA(),e.YNc(3,ae,10,22,"ng-template",null,2,e.W1O),e.YNc(5,K,3,7,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("busy",i.busy),e.xp6(1),e.Q6J("ngIf",null==i.widgetData?null:i.widgetData.link),e.xp6(1),e.Q6J("ngIf",!(null!=i.widgetData&&i.widgetData.link)))},directives:[d.ERI,r.O5,r.tP,r.PC,d.mEK,b.$,r.mk,w.Pl],styles:[".nui-kpi-indicator[_ngcontent-%COMP%]{position:relative;display:block;height:100%;width:100%}.nui-kpi-indicator__background[_ngcontent-%COMP%]{height:100%;width:100%;background-color:var(--nui-color-bg-secondary,#fafafa);color:var(--nui-color-text-default,#111)}.nui-kpi-indicator__text[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;pointer-events:none}.nui-kpi-indicator__text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}.nui-kpi-indicator__value[_ngcontent-%COMP%]{font-size:54px;font-weight:600;margin:auto 0;min-width:100%;white-space:nowrap;display:flex;align-items:center;justify-content:center;height:100%;min-height:5px;max-height:200px}.nui-kpi-indicator__value[_ngcontent-%COMP%] > span.without-filter[_ngcontent-%COMP%]{filter:unset}.nui-kpi-indicator__units[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-bottom:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__units[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__description[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:0;margin-top:auto;display:flex;align-items:center;justify-content:center;height:100%;min-height:10px;max-height:45px}.nui-kpi-indicator__description[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-kpi-indicator__zoom-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:30% 40% 30%;width:100%;height:100%}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]{cursor:pointer}.nui-kpi-indicator--interactive[_ngcontent-%COMP%]:hover{filter:brightness(90%)}"],changeDetection:0}),o})();var se=a(42339),te=a(77579),fe=a(22783);let Ee=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.pizzagnaService=i,this.logger=n,this.destroyed$=new te.x}ngOnChanges(t){(t.nodes||t.template)&&this.updateNodeConfigs({changesNodes:t.nodes,changesTemplate:t.template})}ngDoCheck(){this.checkNodeConfigs()&&(this.updateNodeConfigs(),this.changeDetector.detectChanges())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}trackByFn(t,i){return i.id}checkNodeConfigs(){const t=this.getNodes();if(!this.nodeComponentsConfigs||t.length!==this.nodeComponentsConfigs.length)return!0;for(let i=0;i<t.length;i++)if(this.pizzagnaService.getComponent(t[i])!==this.nodeComponentsConfigs[i])return!0;return!1}updateNodeComponentConfigs(){const t=this.getNodes();this.nodeComponentsConfigs=t&&t.map(i=>{const n=this.pizzagnaService.getComponent(i);if(void 0===n)throw new Error("No component with id '"+i+"' was defined in the configuration.");return n})}updateNodeConfigs(t){this.nodeConfigs=(0,fe.n)(this.nodeConfigs,this.getTemplateChangeForNodes(t),this.getNodeComponentsConfigs())}getNodeComponentsConfigs(){const t={currentValue:void 0,previousValue:this.nodeComponentsConfigs?[...this.nodeComponentsConfigs]:void 0};return this.updateNodeComponentConfigs(),t.currentValue=this.nodeComponentsConfigs,t}getTemplateChangeForNodes(t){const{changesNodes:i,changesTemplate:n}=t||{},s=p=>{var f;return p&&(null===(f=this.getNodes())||void 0===f?void 0:f.map(()=>p))};return{currentValue:s(n?n.currentValue:this.template),previousValue:i?this.template:s(n?n.previousValue:this.template)}}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.sBO),e.LFG(se.p),e.LFG(d.mQy))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function Le(o,l){}function Oe(o,l){if(1&o){const t=e.EpF();e.ynx(0)(1,1,2),e.YNc(3,Le,0,0,"ng-template",3),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk()()}if(2&o){const t=l.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let Se=(()=>{class o extends Ee{constructor(t,i,n){super(t,i,n),this.nodes=[],this.direction="column",this.elementClass="",this.defaultClassNames="h-100 w-100 d-flex"}ngOnInit(){this.classNames=`${this.defaultClassNames} flex-${this.direction} ${this.elementClass}`}ngOnDestroy(){super.ngOnDestroy()}getNodes(){return this.nodes}}return o.lateLoadKey="StackComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(se.p),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-stack"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{nodes:"nodes",direction:"direction",elementClass:"elementClass"},features:[e.qOj],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,Oe,4,5,"ng-container",0),2&t&&e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn)},directives:[r.sg,b.$,w.Pl],encapsulation:2}),o})();const Ye=["gridItemsContainer"];function nt(o,l){}function rt(o,l){if(1&o){const t=e.EpF();e.ynx(0)(1,3,4),e.YNc(3,nt,0,0,"ng-template",5),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk()()}if(2&o){const t=l.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("properties",t.properties)("providers",t.providers),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}const st=function(o){return{"prioritize-rows":o}};let Xe=(()=>{class o extends Ee{constructor(t,i,n,s){super(t,i,n),this.ngZone=s,this.nodes=[],this.direction="column",this.prioritizeGridRows=!1}ngAfterViewInit(){this.handleGridFlowOnResize()}ngOnDestroy(){var t;null===(t=this.tilesResizeObserver)||void 0===t||t.disconnect(),super.ngOnDestroy()}getNodes(){return this.nodes}handleGridFlowOnResize(){this.tilesResizeObserver=new ResizeObserver(()=>this.onResize()),this.ngZone.runOutsideAngular(()=>{this.tilesResizeObserver.observe(this.gridItemsContainer.nativeElement)})}onResize(){var t;if((null===(t=this.nodes)||void 0===t?void 0:t.length)<2)return;const i=this.gridItemsContainer.nativeElement.getBoundingClientRect(),{height:n,width:s}=i,p=n/s,f=et(this.nodes.length);return p-.05>f&&!this.prioritizeGridRows?(this.prioritizeGridRows=!0,void this.changeDetector.detectChanges()):p+.05<f&&this.prioritizeGridRows?(this.prioritizeGridRows=!1,void this.changeDetector.detectChanges()):void 0}}return o.lateLoadKey="TilesComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(se.p),e.Y36(d.mQy),e.Y36(e.R0b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-tiles"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ye,7),2&t){let n;e.iGM(n=e.CRH())&&(i.gridItemsContainer=n.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{nodes:"nodes",direction:"direction"},features:[e.qOj],decls:3,vars:5,consts:[[1,"nui-grid-layout",3,"ngClass"],["gridItemsContainer",""],[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","properties","providers"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,rt,4,5,"ng-container",2),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(3,st,i.prioritizeGridRows)),e.xp6(2),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn))},directives:[r.mk,r.sg,b.$,w.Pl],styles:[".nui-grid-layout[_ngcontent-%COMP%]{display:grid;height:100%;grid-gap:10px;gap:10px;grid-template-columns:repeat(auto-fit,minmax(94.8px,1fr));grid-template-rows:repeat(auto-fit,minmax(15px,1fr));line-height:1.2}.nui-grid-layout.prioritize-rows[_ngcontent-%COMP%]{grid-auto-flow:column;grid-template-columns:minmax(1px,1fr)}.mobile[_nghost-%COMP%], .mobile   [_nghost-%COMP%]{min-height:160px}"]}),o})();const et=o=>.25*o+.7;function tt(o,l){if(1&o&&(e.TgZ(0,"div",6),e._UZ(1,"nui-icon",7),e.TgZ(2,"span",8),e._uU(3),e.qZA()()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("icon",t.key),e.xp6(1),e.Q6J("title",t.value),e.xp6(1),e.Oqu(t.value)}}function at(o,l){1&o&&e._UZ(0,"nui-icon",9)}const lt=function(o,l){return{"widget-medium":o,"widget-small":l}};let ot=(()=>{class o{constructor(t){this.changeDetector=t,this.navigated=new e.vpe}set widgetWidth(t){this.isMedium=t<=600&&t>480,this.isSmall=t<=480}onButtonClick(){this.canNavigate&&this.navigated.emit(this)}}return o.lateLoadKey="ListGroupItemComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-list-group-item"]],hostAttrs:[1,"w-100"],inputs:{id:"id",label:"label",statuses:"statuses",canNavigate:"canNavigate",widgetWidth:"widgetWidth"},outputs:{navigated:"navigated"},decls:7,vars:8,consts:[[1,"list-group-item",3,"ngClass","click"],[1,"list-group-item__label",3,"title"],[1,"list-group-item__statuses"],[1,"statuses"],["class","status-column",4,"ngFor","ngForOf"],["icon","caret-right",4,"ngIf"],[1,"status-column"],[1,"mr-2",3,"icon"],[1,"status-column__label",3,"title"],["icon","caret-right"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onButtonClick()}),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,tt,4,3,"div",4),e.qZA(),e.YNc(6,at,1,0,"nui-icon",5),e.qZA()()),2&t&&(e.Q6J("ngClass",e.WLB(5,lt,i.isMedium,i.isSmall)),e.xp6(1),e.Q6J("title",i.label),e.xp6(1),e.Oqu(i.label),e.xp6(3),e.Q6J("ngForOf",i.statuses),e.xp6(1),e.Q6J("ngIf",i.canNavigate))},directives:[r.mk,r.sg,d.oJW,r.O5],styles:[".list-group-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.list-group-item__label[_ngcontent-%COMP%]{width:25%;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item__statuses[_ngcontent-%COMP%]{width:75%;display:flex;align-items:center}.list-group-item[_ngcontent-%COMP%]   .status-column[_ngcontent-%COMP%]{display:flex;width:75px;min-width:75px;max-width:100%;justify-content:flex-start;align-items:center;padding-right:10px}.list-group-item[_ngcontent-%COMP%]   .status-column__label[_ngcontent-%COMP%]{margin-left:5px;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.list-group-item[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]{justify-content:flex-end}.widget-medium[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%], .widget-medium[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]{justify-content:flex-end}.widget-small[_ngcontent-%COMP%]   .list-group-item__label[_ngcontent-%COMP%], .widget-small[_ngcontent-%COMP%]   .list-group-item__statuses[_ngcontent-%COMP%]{width:100%!important}.widget-small[_ngcontent-%COMP%]   .statuses[_ngcontent-%COMP%]{justify-content:space-between}"],changeDetection:0}),o})();var le=a(82722);function Ne(o,l){if(1&o&&e._UZ(0,"nui-icon",9),2&o){const t=e.oxw();e.Q6J("icon",t.icon)("status",t.status)}}function He(o,l){if(1&o&&e._uU(0),2&o){const t=e.oxw();e.Oqu(t.status)}}function ye(o,l){1&o&&e._UZ(0,"nui-icon",10)}let ht=(()=>{class o{constructor(t,i){this.changeDetector=t,this.eventBus=i,this.navigated=new e.vpe,this.searchTerm="",this.destroy$=new te.x}onButtonClick(){this.canNavigate&&this.navigated.emit(this)}ngOnInit(){this.eventBus.getStream(T.kV).pipe((0,le.R)(this.destroy$)).subscribe(t=>{this.searchTerm=t.payload,this.changeDetector.markForCheck()})}}return o.lateLoadKey="ListLeafItemComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-list-leaf-item"]],hostAttrs:[1,"w-100"],inputs:{icon:"icon",status:"status",detailedUrl:"detailedUrl",label:"label",canNavigate:"canNavigate",url:"url"},outputs:{navigated:"navigated"},decls:12,vars:14,consts:[[1,"nui-list-leaf-item",3,"click"],[1,"nui-list-leaf-item__info-container"],[1,"nui-list-leaf-item__icon-container"],["class","mr-1",3,"icon","status",4,"ngIf","ngIfElse"],[1,"nui-list-leaf-item__description"],[1,"nui-text-ellipsis",3,"ngClass","innerHTML"],[1,"nui-text-secondary","nui-text-ellipsis",3,"innerHTML"],["statusTpl",""],["icon","caret-right",4,"ngIf"],[1,"mr-1",3,"icon","status"],["icon","caret-right"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onButtonClick()}),e.TgZ(1,"div",1)(2,"div",2),e.YNc(3,Ne,1,2,"nui-icon",3),e.qZA(),e.TgZ(4,"div",4),e._UZ(5,"a",5),e.ALo(6,"nuiHighlight"),e._UZ(7,"div",6),e.ALo(8,"nuiHighlight"),e.qZA(),e.YNc(9,He,1,1,"ng-template",null,7,e.W1O),e.qZA(),e.YNc(11,ye,1,0,"nui-icon",8),e.qZA()),2&t){const n=e.MAs(10);e.xp6(3),e.Q6J("ngIf",i.icon)("ngIfElse",n),e.xp6(2),e.Q6J("ngClass",i.url?"":"not-active")("innerHTML",e.xi3(6,8,i.label,i.searchTerm),e.oJD),e.uIk("target",i.url?"_blank":null)("href",i.url||null,e.LSH),e.xp6(2),e.Q6J("innerHTML",e.xi3(8,11,i.detailedUrl,i.searchTerm),e.oJD),e.xp6(4),e.Q6J("ngIf",i.canNavigate)}},directives:[r.O5,d.oJW,r.mk],pipes:[d.SgB],styles:[".nui-list-leaf-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nui-list-leaf-item__info-container[_ngcontent-%COMP%]{display:flex;height:40px}.nui-list-leaf-item__icon-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:30px}.nui-list-leaf-item__description[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr 1fr;grid-template-columns:1fr;max-width:100%}a.not-active[_ngcontent-%COMP%]{text-decoration:none;color:#111}"],changeDetection:0}),o})();function Pt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"button",2),e.NdJ("click",function(){return e.CHM(t),e.oxw().onBack()}),e.qZA(),e.TgZ(2,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().onHome()}),e.qZA(),e.TgZ(3,"div",4),e._uU(4),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("isRepeat",!0)("disabled",!(null!=t.navBarConfig&&null!=t.navBarConfig.buttons&&null!=t.navBarConfig.buttons.back&&t.navBarConfig.buttons.back.disabled)),e.xp6(1),e.Q6J("isRepeat",!0),e.xp6(2),e.Oqu(null==t.navBarConfig?null:t.navBarConfig.label)}}let vt=(()=>{class o{constructor(t,i){this.changeDetector=t,this.eventBus=i,this.navigated=new e.vpe}onBack(){var t,i,n;this.navBarConfig&&this.eventBus.getStream(T.EC).next({payload:{back:null===(n=null===(i=null===(t=this.navBarConfig)||void 0===t?void 0:t.buttons)||void 0===i?void 0:i.back)||void 0===n?void 0:n.disabled}})}onHome(){this.eventBus.getStream(T.EC).next({payload:{reset:!0}})}}return o.lateLoadKey="ListNavigationBarComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-navigation-bar"]],inputs:{navBarConfig:"navBarConfig"},outputs:{navigated:"navigated"},decls:1,vars:1,consts:[["class","list-nav-bar",4,"ngIf"],[1,"list-nav-bar"],["nui-button","","type","button","displayStyle","action","icon","arrow-left",3,"isRepeat","disabled","click"],["nui-button","","type","button","displayStyle","action","icon","overview",3,"isRepeat","click"],[1,"list-nav-bar__label"]],template:function(t,i){1&t&&e.YNc(0,Pt,5,4,"div",0),2&t&&e.Q6J("ngIf",i.navBarConfig&&!(null!=i.navBarConfig&&i.navBarConfig.isRoot))},directives:[r.O5,d.r0F],styles:[".list-nav-bar[_ngcontent-%COMP%]{width:100%;margin:2px 0;padding:0 15px;display:flex;align-items:center}.list-nav-bar__label[_ngcontent-%COMP%]{padding-left:5px;color:#1119}"],changeDetection:0}),o})();function xt(o,l){}const Dt=function(){return["navigated"]};function Y(o,l){if(1&o){const t=e.EpF();e.ynx(0,2,3),e.NdJ("output",function(){const s=e.CHM(t).item;return e.oxw().onListItemEvent(s)}),e.YNc(2,xt,0,0,"ng-template",4),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=l.item,i=e.MAs(1),n=e.oxw();e.Q6J("componentId",n.configuration.componentType)("componentType",n.configuration.componentType)("properties",n.getPropsFor(t))("outputs",e.DdM(5,Dt)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let _=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.zone=i,this.host=n,this.eventBus=s,this.itemFormatterProps=new Map,this.destroy$=new te.x}ngOnInit(){this.initResizeObserver()}ngOnChanges(t){var i;(null===(i=t.data)||void 0===i?void 0:i.currentValue)&&t.data.currentValue.forEach(n=>this.itemFormatterProps.set(n,this.calcItemProps(n)))}onListItemEvent(t){this.eventBus.getStream(T.EC).next({payload:t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.itemFormatterProps.clear()}getPropsFor(t){return Object.assign(Object.assign({},this.itemFormatterProps.get(t)),{widgetWidth:this.widgetWidth})}calcItemProps(t){return this.configuration?Object.assign(Object.assign({},P(this.configuration,t)),this.configuration.itemProperties):t}initResizeObserver(){const t=new d.Pa2(this.host,this.zone);t.debounceTime=10,t.ngAfterViewInit(),t.containerResize.pipe((0,le.R)(this.destroy$)).subscribe(()=>{this.widgetWidth=this.host.nativeElement.offsetWidth})}}return o.lateLoadKey="ListWidgetComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-list-widget"]],hostAttrs:[2,"overflow","scroll"],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{data:"data",configuration:"configuration",elementClass:"elementClass"},features:[e.TTD],decls:3,vars:2,consts:[[3,"itemsSource","repeatItemTemplateRef"],["repeatItemTemplate",""],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){if(1&t&&(e._UZ(0,"nui-repeat",0),e.YNc(1,Y,3,6,"ng-template",null,1,e.W1O)),2&t){const n=e.MAs(2);e.Q6J("itemsSource",i.data)("repeatItemTemplateRef",n)}},directives:[d.$N6,b.$,w.Pl],styles:[""]}),o})();var m=a(92474),E=a(98864),W=a(294),J=a(32656),de=a(47243),me=a(60343),he=a(21366);let Ce=(()=>{class o extends he.k{constructor(t){super(t,"ProportionalContentAggregatorsRegistryService")}getItemKey(t){return t.aggregatorType}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.mQy))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function De(o,l){}function Ae(o,l){if(1&o){const t=e.EpF();e.ynx(0,1,2),e.YNc(2,De,0,0,"ng-template",3),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",null==i.contentFormatter?null:i.contentFormatter.componentType)("properties",i.contentFormatterProperties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let $e=(()=>{class o{constructor(t,i,n,s){this.aggregatorRegistry=t,this.formatterRegistry=i,this.changeDetector=n,this.logger=s,this.destroy$=new te.x}ngOnChanges(t){if(t.donutConfig){const i=t.donutConfig.currentValue,{formatter:n,aggregator:s}=i;(null==s?void 0:s.aggregatorType)&&(this.updateAggregatorDefinition(s),this.updateAggregatedValue()),(null==n?void 0:n.componentType)&&(this.contentFormatter=n,this.updateFormatterDefinition(n),this.updateFormatterProperties())}t.widgetData&&(this.updateAggregatedValue(),this.updateFormatterProperties()),t.chartAssist&&this.subscribeToChartAssist()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getFormatterProperties(t){var i;if(t)return Object.assign(Object.assign({},null===(i=this.contentFormatterDefinition)||void 0===i?void 0:i.properties),{data:P(t,{value:this.aggregatedValue})})}updateAggregatorDefinition(t){const i=this.aggregatorRegistry.getItem(t.aggregatorType);i?this.contentAggregatorDefinition=i:this.logger.warn(`No aggregator with key ${t.aggregatorType} found in registry.`)}updateFormatterDefinition(t){const i=this.formatterRegistry.getItem(t.componentType);i?this.contentFormatterDefinition=i:this.logger.warn(`No aggregator with key ${t.componentType} found in registry.`)}updateAggregatedValue(){var t;if(!this.widgetData||!this.contentAggregatorDefinition)return void this.logger.warn(`Can't aggregate value. Aggregator key: ${null===(t=this.contentAggregatorDefinition)||void 0===t?void 0:t.aggregatorType}. Data: ${this.widgetData}`);const i=this.getAggregatorProperties();this.aggregatedValue=this.contentAggregatorDefinition.fn(this.widgetData,Object.assign(Object.assign({},i),{activeMetricId:this.emphasizedSeriesId||i.activeMetricId})).toString()}updateFormatterProperties(){this.contentFormatterProperties=this.getFormatterProperties(this.contentFormatter)}getAggregatorProperties(){var t,i,n;return Object.assign(Object.assign({},null===(t=this.contentAggregatorDefinition)||void 0===t?void 0:t.properties),null===(n=null===(i=this.donutConfig)||void 0===i?void 0:i.aggregator)||void 0===n?void 0:n.properties)}subscribeToChartAssist(){var t,i,n;null===(t=this.chartAssistSubscription)||void 0===t||t.unsubscribe(),this.chartAssistSubscription=null===(n=null===(i=this.chartAssist)||void 0===i?void 0:i.chartAssistSubject)||void 0===n?void 0:n.pipe((0,le.R)(this.destroy$)).subscribe(s=>{var p;this.emphasizedSeriesId=null===(p=s.payload)||void 0===p?void 0:p.seriesId,this.updateAggregatedValue(),this.updateFormatterProperties(),this.changeDetector.detectChanges()})}}return o.lateLoadKey="ProportionalDonutContentComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(Ce),e.Y36(de.UA),e.Y36(e.sBO),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-proportional-donut-content"]],inputs:{widgetData:"widgetData",donutConfig:"donutConfig",chartAssist:"chartAssist"},features:[e.TTD],decls:1,vars:1,consts:[["nuiComponentPortal","",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,Ae,3,3,"ng-container",0),2&t&&e.Q6J("ngIf",null==i.contentFormatter?null:i.contentFormatter.componentType)},directives:[r.O5,b.$,w.Pl],styles:[""],changeDetection:0}),o})();var Fe=a(64509),Ue=a.n(Fe),Ke=a(50772),mt=a.n(Ke);let k=(()=>{class o{constructor(t){this.unitConversionService=t,this.transform=(i,n="generic",s=1e6)=>{const p="string"==typeof i?parseFloat(i):i;if(void 0===p||isNaN(p)||p<s)return(null==i?void 0:i.toString())||"";const f=this.unitConversionService.convert(p,"bytes"===n?d.Qln.Bytes:d.Qln.Standard,1);return this.unitConversionService.getFullDisplay(f,n)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.CrH,16))},o.\u0275pipe=e.Yjl({name:"nuiDashboardUnitConversion",type:o,pure:!0}),o})();var V=(()=>{return(o=V||(V={})).DonutChart="DonutChart",o.PieChart="PieChart",o.VerticalBarChart="VerticalBarChart",o.HorizontalBarChart="HorizontalBarChart",V;var o})();let I=(()=>{class o{static buildChartSeries(t,i,n,s){return(t||[]).map(f=>Object.assign(Object.assign({},f),{accessors:i,renderer:n,scales:s}))}static getChartAttributes(t,i,n){const s=o.getChartTools(t),p={grid:s.gridFunction(),accessors:s.accessorFunction(i,n),renderer:s.rendererFunction(),scales:s.scaleFunction()};return s.preprocessor&&(p.preprocessor=s.preprocessor),p}static getChartTools(t){const i=p=>{const f=new g.UDz(p);return f.series.color=(D,$)=>{var Q;return null!==(Q=$.color)&&void 0!==Q?Q:p.get(D)},f};function n(p,f){const D=(0,g.Q6e)(this.config,p,f);return D.series.color=($,Q)=>{var X;return null!==(X=Q.color)&&void 0!==X?X:null==p?void 0:p.get($)},D.data.value=$=>Number.isFinite($)?$:$.value,D}return{[V.DonutChart]:{preprocessor:g.fy$,gridFunction:g.Y6Q,rendererFunction:()=>new g.E8N,accessorFunction:i,scaleFunction:g._N$},[V.PieChart]:{preprocessor:g.fy$,gridFunction:g.Y6Q,rendererFunction:()=>new g.bOg,accessorFunction:i,scaleFunction:g._N$},[V.HorizontalBarChart]:{config:{horizontal:!0},gridFunction(){return(0,g.skL)(this.config)},rendererFunction:()=>new g.Z7w({highlightStrategy:new g.TrQ("y")}),accessorFunction:n,scaleFunction(){return(0,g.CQI)(this.config)}},[V.VerticalBarChart]:{config:{horizontal:!1},gridFunction(){return(0,g.skL)(this.config)},rendererFunction:()=>new g.Z7w({highlightStrategy:new g.TrQ("x")}),accessorFunction:n,scaleFunction(){return(0,g.CQI)(this.config)}}}[t]}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var y=a(55413);const B=["gridContainer"];function j(o,l){}function ie(o,l){if(1&o){const t=e.EpF();e.ynx(0)(1,12,13),e.YNc(3,j,0,0,"ng-template",14),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk()()}if(2&o){const t=e.MAs(2),i=e.oxw(3);e.xp6(1),e.Q6J("componentType",(null==i.contentFormatter?null:i.contentFormatter.componentType)||"DonutContentRawFormatterComponent")("properties",i.contentFormatterProperties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function re(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"nui-proportional-donut-content",15),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("widgetData",t.widgetData)("donutConfig",null==t.configuration||null==t.configuration.chartOptions?null:t.configuration.chartOptions.donutContentConfig)("chartAssist",t.chartAssist)}}function ge(o,l){if(1&o&&(e.TgZ(0,"nui-chart-donut-content",8)(1,"div",9)(2,"div",10),e.YNc(3,ie,4,3,"ng-container",11),e.YNc(4,re,2,3,"ng-container",11),e.qZA()()()),2&o){const t=e.oxw(2);e.Q6J("plugin",t.donutContentPlugin),e.xp6(2),e.Q6J("useZoom",!1),e.xp6(1),e.Q6J("ngIf",!(null!=t.configuration&&null!=t.configuration.chartOptions&&t.configuration.chartOptions.donutContentConfig)),e.xp6(1),e.Q6J("ngIf",null==t.configuration||null==t.configuration.chartOptions?null:t.configuration.chartOptions.donutContentConfig)}}function Ie(o,l){if(1&o&&(e.TgZ(0,"div",5),e._UZ(1,"nui-chart",6),e.YNc(2,ge,5,4,"nui-chart-donut-content",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("chart",t.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",t.donutContentPlugin)}}function ke(o,l){}const ft=function(o){return{data:o}};function Ht(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",22),e.ynx(2,12,23),e.YNc(4,ke,0,0,"ng-template",14),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(3).attached(n)}),e.BQk(),e.qZA()()}if(2&o){const t=e.MAs(3),i=e.oxw().index,n=e.oxw(2);e.xp6(2),e.Q6J("componentType",n.legendFormatter.componentType)("properties",e.VKq(3,ft,n.widgetData[i])),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function Kt(o,l){if(1&o&&e._UZ(0,"nui-icon",29),2&o){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("icon",i.seriesToIconMap[t.id])}}const $o=function(o){return{"nui-text-link-small link":o}};function Uo(o,l){if(1&o&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,$o,i.interactive)),e.xp6(1),e.hij(" ",t.name," ")}}function zo(o,l){if(1&o&&(e.TgZ(0,"a",31),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.Q6J("href",t.link,e.LSH)("title",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function Bo(o,l){if(1&o&&(e._UZ(0,"nui-rich-legend-tile",24),e.ALo(1,"nuiDashboardUnitConversion"),e.YNc(2,Kt,1,1,"nui-icon",25),e.TgZ(3,"div",26),e.YNc(4,Uo,2,4,"div",27),e.YNc(5,zo,2,3,"a",28),e.qZA()),2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("value",e.lcZ(1,7,i.computeLegendTileValue(t.data[0])))("unitLabel",i.legendUnitLabel)("color",i.chartAssist.palette.textColors.get(t.id))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",i.seriesToIconMap&&i.seriesToIconMap[t.id]),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link)}}function Wo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-legend-series",19),e.NdJ("isSelectedChange",function(n){const p=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(p.id,n)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).onInteraction(s)}),e.YNc(1,Ht,5,5,"div",20),e.YNc(2,Bo,6,9,"ng-template",null,21,e.W1O),e.qZA()}if(2&o){const t=l.$implicit,i=e.MAs(3),n=e.oxw(2);e.ekj("nui-proportional-widget__legend--interactive",n.interactive),e.Q6J("ngClass",(n.prioritizedGridRows.right||n.prioritizedGridRows.bottom)&&"description-min-width--unset")("isSelected",!n.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==n.chartAssist.renderStatesIndex[t.id]?null:n.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("ngIf",n.legendFormatter&&n.legendFormatter.componentType)("ngIfElse",i)}}const ko=function(o){return[o]};function Zo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"nui-legend",17),e.NdJ("mouseleave",function(){return e.CHM(t),e.oxw().chartAssist.resetVisibleSeries()}),e.YNc(2,Wo,4,7,"nui-legend-series",18),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(5,ko,t.legendShouldBeAlignedRight()?"scrollable":"legend-bottom")),e.xp6(1),e.Q6J("interactive",!1)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}function Vo(o,l){1&o&&(e.TgZ(0,"div",32),e._UZ(1,"nui-image",33),e.qZA())}const Jo=function(o,l,t){return{"prioritize-rows__right":o,"prioritize-rows__bottom":l,"empty-grid":t}};let Qt=(()=>{class o{constructor(t,i,n,s,p,f,D){this.changeDetector=t,this.ngZone=i,this.kvDiffers=n,this.eventBus=s,this.dataSource=p,this.logger=f,this.prioritizedGridRows={right:!1,bottom:!1},this.chartPalette=new g.syg((0,g.GUR)()),this.differ=this.kvDiffers.find(this.prioritizedGridRows).create(),this.unitConversionPipe=new k(D)}get interactive(){var t,i,n,s;return(null===(t=this.configuration)||void 0===t?void 0:t.interactive)||(null===(s=null===(n=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===n?void 0:n.getFeatureConfig(h.ni.Interactivity))||void 0===s?void 0:s.enabled)||!1}computeLegendTileValue(t){var i,n;return null===(n=null===(i=this.accessors.data)||void 0===i?void 0:i.value)||void 0===n?void 0:n.call(i,t,0,null,null)}ngOnChanges(t){var i,n,s,p;const f=null===(n=null===(i=t.configuration)||void 0===i?void 0:i.currentValue)||void 0===n?void 0:n.chartColors,D=null===(p=null===(s=t.configuration)||void 0===s?void 0:s.previousValue)||void 0===p?void 0:p.chartColors;if((t.widgetData||!Ue()(f,D))&&this.updateChartColors(),t.configuration){const $=t.configuration.currentValue.chartOptions.type,Q=t.configuration.previousValue&&t.configuration.previousValue.chartOptions.type;$&&$!==Q&&(this.buildChart($),this.widgetData&&this.updateChart()),this.legendFormatter=this.configuration.chartOptions.legendFormatter,this.contentFormatter=this.configuration.chartOptions.contentFormatter,this.chartFormatterComponentType=this.configuration.chartOptions.chartFormatterComponentType,this.getContentFormatterProperties(),this.changeDetector.markForCheck()}t.widgetData&&this.chartAssist&&(this.updateChart(),this.getContentFormatterProperties(),this.changeDetector.markForCheck())}ngAfterViewInit(){this.handleGridFlowOnResize()}ngOnDestroy(){var t,i;null===(t=this.proportionalWidgetResizeObserver)||void 0===t||t.disconnect(),null===(i=this.chartTypeSubscription$)||void 0===i||i.unsubscribe()}getContentFormatterProperties(){var t;this.contentFormatterProperties={data:this.widgetData,config:this.configuration,chartAssist:this.chartAssist,properties:null===(t=this.contentFormatter)||void 0===t?void 0:t.properties}}isDonutChart(){return this.configuration.chartOptions.type===V.DonutChart}isRadialChart(){return-1!==[V.DonutChart,V.PieChart].indexOf(this.configuration.chartOptions.type)}hasLegend(){return this.configuration.chartOptions.legendPlacement!==y.w.None}legendShouldBeAlignedRight(){return this.configuration.chartOptions.legendPlacement===y.w.Right}onInteraction(t){!this.interactive||this.eventBus.getStream(T.b1).next({payload:{data:t}})}buildChart(t){var i,n;this.donutContentPlugin=null;const{grid:s,accessors:p,renderer:f,scales:D,preprocessor:$}=I.getChartAttributes(t,null===(i=this.chartPalette)||void 0===i?void 0:i.standardColors);this.chartAssist=new g.doR(new g.kL2(s),$,this.chartPalette),this.renderer=f,this.accessors=p,this.scales=D,this.isDonutChart()&&(this.donutContentPlugin=new g.iM,this.chartAssist.chart.addPlugin(this.donutContentPlugin)),this.configuration.chartOptions.type===V.HorizontalBarChart?(this.scales.x.formatters.tick=Q=>this.unitConversionPipe.transform(Q),this.applyTickLabelMaxWidths()):this.configuration.chartOptions.type===V.VerticalBarChart&&(this.scales.y.formatters.tick=Q=>this.unitConversionPipe.transform(Q)),null===(n=this.chartTypeSubscription$)||void 0===n||n.unsubscribe(),this.chartTypeSubscription$=this.chartAssist.chart.getEventBus().getStream(g.q7O).subscribe(Q=>{const X=this.widgetData.find(ce=>ce.id===Q.data.seriesId);this.onInteraction(X)})}handleGridFlowOnResize(){this.proportionalWidgetResizeObserver=new ResizeObserver(()=>this.onResize()),this.ngZone.runOutsideAngular(()=>{this.proportionalWidgetResizeObserver.observe(this.gridContainer.nativeElement)})}applyTickLabelMaxWidths(){var t,i,n,s,p,f;const D=this.chartAssist.chart.getGrid().config().axis;D.left.tickLabel.maxWidth=null!==(n=null===(i=null===(t=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===t?void 0:t.maxWidth)||void 0===i?void 0:i.left)&&void 0!==n?n:o.TICK_LABEL_MAX_WIDTH,D.right.tickLabel.maxWidth=null!==(f=null===(p=null===(s=this.configuration.chartOptions.horizontalBarTickLabelConfig)||void 0===s?void 0:s.maxWidth)||void 0===p?void 0:p.right)&&void 0!==f?f:o.TICK_LABEL_MAX_WIDTH}onResize(){if(!this.isContainerInNoSwitchLayoutInterval()){switch(this.configuration.chartOptions.legendPlacement){case y.w.Bottom:this.prioritizedGridRows.bottom=this.containerHasRowLayoutWidth();break;case y.w.Right:this.prioritizedGridRows.right=this.containerHasRowLayoutWidth()}this.differ.diff(this.prioritizedGridRows)&&this.changeDetector.detectChanges()}}isContainerInNoSwitchLayoutInterval(){const t=this.gridContainer.nativeElement.getBoundingClientRect().width;return t>o.MAX_ROW_LAYOUT_SIZE-o.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2&&t<o.MAX_ROW_LAYOUT_SIZE+o.NO_SWITCH_LAYOUT_INTERVAL_SIZE/2}containerHasRowLayoutWidth(){return this.gridContainer.nativeElement.getBoundingClientRect().width<o.MAX_ROW_LAYOUT_SIZE}updateChart(){this.chartAssist.update(I.buildChartSeries(this.widgetData,this.accessors,this.renderer,this.scales))}updateChartColors(){var t,i;let n;const s=null===(t=this.widgetData)||void 0===t?void 0:t.map(f=>f.color),p=this.configuration.chartColors;n=!this.configuration.prioritizeWidgetColors&&mt()(s)?this.getDataDriverColorProvider(this.widgetData):p?this.getConfigurationColorProvider(p):(0,g.GUR)(),this.chartPalette=new g.syg(n),this.buildChart(null===(i=this.configuration)||void 0===i?void 0:i.chartOptions.type),this.chartAssist&&(this.chartAssist.palette=this.chartPalette,this.updateChart())}getDataDriverColorProvider(t){let i;if((null==t?void 0:t.map(s=>s.color).filter(s=>!!s)).length===t.length){const s=t.reduce((p,f)=>(p[f.id]=f.color,p),{});i=new g.oki(s)}else{const s=t.filter(p=>p.color);this.logger.warn(`Not all series have colors set, setting default pallette. Current series color config: ${JSON.stringify(s)}`),i=(0,g.GUR)()}return i}getConfigurationColorProvider(t){var i;let n;return this.configuration.prioritizeWidgetColors&&this.widgetData&&(this.widgetData=this.widgetData.map(s=>{const p=Object.assign({},s);return p.color&&delete p.color,p})),Array.isArray(t)?n=new g.jpW(t):Object.keys(t).length===(null===(i=this.widgetData)||void 0===i?void 0:i.length)?n=new g.oki(t):(this.logger.warn(`Not all series have colors set, setting default pallette. Current series color config: ${JSON.stringify(t)}`),n=(0,g.GUR)()),n}}return o.lateLoadKey="ProportionalWidgetComponent",o.NO_SWITCH_LAYOUT_INTERVAL_SIZE=20,o.MAX_ROW_LAYOUT_SIZE=360,o.TICK_LABEL_MAX_WIDTH=75,o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(e.aQg),e.Y36(h.nY),e.Y36(h.Fk),e.Y36(d.mQy),e.Y36(d.CrH))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-proportional-widget"]],viewQuery:function(t,i){if(1&t&&e.Gf(B,7),2&t){let n;e.iGM(n=e.CRH())&&(i.gridContainer=n.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",elementClass:"elementClass",seriesToIconMap:"seriesToIconMap"},features:[e.TTD],decls:5,vars:8,consts:[[1,"w-100","nui-chart-layout","flex-grow-1","p-3",3,"ngClass"],["gridContainer",""],["class","d-flex chart has-overlay",4,"ngIf"],["class","w-100 d-flex legend",3,"ngClass",4,"ngIf"],["class","mb-3 mt-3 d-flex align-items-center justify-content-center",4,"ngIf"],[1,"d-flex","chart","has-overlay"],[1,"w-100",3,"chart"],["class","nui-proportional-widget__chart-donut-content",3,"plugin",4,"ngIf"],[1,"nui-proportional-widget__chart-donut-content",3,"plugin"],[1,"h-100","w-100","d-flex","justify-content-center","align-items-center","text-center"],["nuiZoomContent","",1,"d-inline-block",3,"useZoom"],[4,"ngIf"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal2","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"widgetData","donutConfig","chartAssist"],[1,"w-100","d-flex","legend",3,"ngClass"],[1,"w-100","m-auto",3,"interactive","orientation","mouseleave"],["class","proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","nui-proportional-widget__legend--interactive","isSelectedChange","mouseenter","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"proportional-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","click"],[4,"ngIf","ngIfElse"],["legendDefaultTile",""],["description",""],["componentPortal","nuiComponentPortal"],[3,"value","unitLabel","color","backgroundColor"],["legendTransclusion","","class","align-items-center",3,"icon",4,"ngIf"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["legendTransclusion","",1,"align-items-center",3,"icon"],[1,"description","description-primary",3,"ngClass"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"mb-3","mt-3","d-flex","align-items-center","justify-content-center"],["image","no-data-to-show"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Ie,3,2,"div",2),e.YNc(3,Zo,3,7,"div",3),e.YNc(4,Vo,2,0,"div",4),e.qZA()),2&t&&(e.Q6J("ngClass",e.kEZ(4,Jo,i.prioritizedGridRows.right,i.prioritizedGridRows.bottom,!(i.widgetData&&i.widgetData.length>0&&i.chartAssist))),e.xp6(2),e.Q6J("ngIf",i.widgetData&&i.widgetData.length>0&&i.chartAssist),e.xp6(1),e.Q6J("ngIf",i.hasLegend()&&i.chartAssist),e.xp6(1),e.Q6J("ngIf",!i.widgetData||0===i.widgetData.length||!i.chartAssist))},directives:[r.mk,r.O5,g.xH4,g.kwD,d.mEK,b.$,w.Pl,$e,g.FVX,r.sg,g.kJo,g.wHi,d.oJW,d.cuP],pipes:[k],styles:['.nui-proportional-widget__chart-donut-content[_ngcontent-%COMP%]{position:absolute}.nui-proportional-widget__legend--interactive[_ngcontent-%COMP%]{cursor:pointer!important}.has-overlay[_ngcontent-%COMP%]{overflow:auto}.nui-chart-layout[_ngcontent-%COMP%]{grid-template:"axis-label-left    axis-label-right    ." 0fr "chart              chart               legend" minmax(60%,auto) "axis-label-bottom  axis-label-bottom   ." 0fr "legend-bottom      legend-bottom       ." minmax(auto,min-content) / 1fr 1fr auto}.nui-chart-layout[_ngcontent-%COMP%]   .legend-bottom[_ngcontent-%COMP%]{overflow:auto;align-self:auto;padding-left:0}.prioritize-rows__right[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%], .prioritize-rows__bottom[_ngcontent-%COMP%]   .nui-legend-series[_ngcontent-%COMP%]{max-width:unset;width:100%}.prioritize-rows[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{justify-self:start}.prioritize-rows__right[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend      legend       ." 40%}.prioritize-rows__bottom[_ngcontent-%COMP%]{grid-template:"chart       chart        ." 60% "legend-bottom      legend-bottom      ." 40%}.empty-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:1fr}.proportional-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}']}),o})();var Xt=a(61455);let Pi=(()=>{class o{constructor(){this.enabled=!0,this.delay=500}onHostMouseenter(){!this.enabled||(this.timeout=setTimeout(()=>{this.mousePresentSubject.next(!0)},this.delay))}onHostClick(){!this.enabled||this.mousePresentSubject.next(!0)}onHostMouseleave(){!this.enabled||(clearTimeout(this.timeout),this.mousePresentSubject.next(!1))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.lG2({type:o,selectors:[["","nuiDelayedMousePresenceDetection",""]],hostBindings:function(t,i){1&t&&e.NdJ("mouseenter",function(){return i.onHostMouseenter()})("click",function(){return i.onHostClick()})("mouseleave",function(){return i.onHostMouseleave()})},inputs:{enabled:["nuiDelayedMousePresenceDetection","enabled"],mousePresentSubject:"mousePresentSubject",delay:"delay"}}),o})();var Yo=a(8817),Ft=a.n(Yo),Ho=a(95835),Ko=a.n(Ho),Di=a(61135),St=a(56451),Fi=a(39646),Qe=a(18505),Lt=a(39300),ct=a(54004),jt=a(95698),bi=a(78372);let xi=(()=>{class o{constructor(){this.searchDebounceTime=500}initWidget(t){this.widget=t,this.initSearch()}initSearch(){var t,i;this.defineSearch();const n=null===(i=null===(t=this.widget.dataSource)||void 0===t?void 0:t.features)||void 0===i?void 0:i.featuresChanged;n&&n.pipe((0,le.R)(this.widget.onDestroy$)).subscribe(()=>{this.defineSearch()})}registerSearch(){this.widget.dataSource&&this.widget.dataSource.registerComponent({search:{componentInstance:{getFilters:()=>({type:"search",value:this.widget.searchValue})}}})}deregisterSearch(){var t,i;this.widget.dataSource&&(null===(i=(t=this.widget.dataSource).deregisterComponent)||void 0===i||i.call(t,"search"))}defineSearch(){var t,i;const n=null===(t=this.widget.configuration)||void 0===t?void 0:t.searchConfiguration,s=null===(i=this.widget.dataSource.features)||void 0===i?void 0:i.getFeatureConfig("search");this.widget.isSearchEnabled=!(!(null==n?void 0:n.enabled)||!(null==s?void 0:s.enabled)),this.widget.isSearchEnabled?(this.widget.searchValue=(null==n?void 0:n.searchTerm)||"",this.registerSearch(),this.searchDebounceTime=z()(null==n?void 0:n.searchDebounce)?this.searchDebounceTime:null==n?void 0:n.searchDebounce,this.watchSearchTerm()):this.deregisterSearch()}watchSearchTerm(){this.widget.searchTerm$.pipe((0,bi.b)(this.searchDebounceTime),(0,le.R)(this.widget.onDestroy$)).subscribe(()=>{this.widget.pizzagnaService.setProperty({pizzagnaKey:h.xW.Configuration,componentId:this.widget.componentId,propertyPath:["configuration.searchConfiguration.searchTerm"]},this.widget.searchValue),this.widget.eventBus.getStream(T.RG).next({})})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),Li=(()=>{class o{constructor(){this.visibleItems=[]}initWidget(t){this.widget=t}initVirtualScroll(){this.widget.hasVirtualScroll?this.registerVirtualScroll():this.deregisterVirtualScroll()}registerVirtualScroll(){this.widget.dataSource&&this.widget.dataSource.registerComponent({[(0,d.$0I)("virtualScroll")]:{componentInstance:this.widget.viewportManager}})}deregisterVirtualScroll(){var t,i;this.widget.dataSource&&(null===(i=(t=this.widget.dataSource).deregisterComponent)||void 0===i||i.call(t,(0,d.$0I)("virtualScroll")))}subscribeToVirtualScroll(){!this.widget.vscrollViewport||((0,St.T)(this.widget.vscrollViewport.renderedRangeStream,this.widget.tableUpdate$.pipe((0,ct.U)(()=>{var t;return null===(t=this.widget.vscrollViewport)||void 0===t?void 0:t.getRenderedRange()}))).pipe((0,Qe.b)(t=>{this.visibleItems=this.widget.tableData.slice(null==t?void 0:t.start,null==t?void 0:t.end),this.widget.changeDetector.detectChanges()}),(0,le.R)(this.widget.onDestroy$)).subscribe(),this.widget.viewportManager.setViewport(this.widget.vscrollViewport).observeNextPage$({pageSize:this.widget.range,emitFirstPage:!0}).pipe((0,Lt.h)(t=>{var i,n;return t.end>=(null!==(n=null===(i=this.widget.vscrollViewport)||void 0===i?void 0:i.getDataLength())&&void 0!==n?n:0)}),(0,Qe.b)(t=>this.widget.zone.run(()=>{this.widget.dataSource.page=t.end/(t.end-t.start),this.widget.eventBus.getStream(T.df).next({}),this.widget.changeDetector.detectChanges()})),(0,le.R)(this.widget.onDestroy$)).subscribe())}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var Qo=a(63776);const Xo=["widgetTable"];function jo(o,l){1&o&&(e.TgZ(0,"div",10),e._UZ(1,"nui-image",11),e.qZA())}function qo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"nui-search",13),e.NdJ("inputChange",function(n){return e.CHM(t),e.oxw().onSearchInputChanged(n)})("cancel",function(n){return e.CHM(t),e.oxw().onSearchInputChanged(n)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("value",t.searchValue)}}function en(o,l){if(1&o&&(e.TgZ(0,"th",17),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,i=e.oxw();e.Udp("width",i.columnsWidthMap.get(t.id),"px")("max-width",i.columnsWidthMap.get(t.id),"px")("min-width",i.columnsWidthMap.get(t.id),"px"),e.Q6J("isColumnSortingDisabled",!t.sortable)("title",t.label)("tooltipText",i.headerTooltipsEnabled?t.label:void 0)("alignment",i.getColumnAlignment(t)),e.xp6(1),e.hij(" ",t.label," ")}}function tn(o,l){}function on(o,l){if(1&o){const t=e.EpF();e.ynx(0,20,21),e.YNc(2,tn,0,0,"ng-template",22),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw().$implicit,n=e.oxw().$implicit;e.Q6J("componentType",null==n.formatter?null:n.formatter.componentType)("properties",i[n.id]),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function nn(o,l){if(1&o&&(e.TgZ(0,"td",18),e.YNc(1,on,3,3,"ng-container",19),e.qZA()),2&o){const t=l.$implicit,i=e.oxw().$implicit,n=e.oxw();e.Udp("width",n.columnsWidthMap.get(i.id),"px")("max-width",n.columnsWidthMap.get(i.id),"px")("min-width",n.columnsWidthMap.get(i.id),"px"),e.Q6J("alignment",n.getColumnAlignment(i)),e.xp6(1),e.Q6J("ngIf",t[i.id]&&i.formatter)}}function rn(o,l){1&o&&(e.ynx(0,14),e.YNc(1,en,2,11,"th",15),e.ynx(2),e.YNc(3,nn,2,8,"td",16),e.BQk()()),2&o&&e.s9C("nuiColumnDef",l.$implicit.id)}function sn(o,l){1&o&&e._UZ(0,"tr",23)}function an(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr",24),e.NdJ("click",function(n){const p=e.CHM(t).$implicit;return e.oxw().onInteraction(p,n)}),e.qZA()}if(2&o){const t=e.oxw();e.uIk("role",t.interactive?"button":"")}}const ln=function(o){return{"virtual-scroll-disabled":o}};let qt=(()=>{class o{constructor(t,i,n,s,p,f,D,$,Q,X,ce,Te){this.eventBus=t,this.dataSource=i,this.widgetConfigurationService=n,this.changeDetector=s,this.pizzagnaService=p,this.viewportManager=f,this.zone=D,this.el=$,this.logger=Q,this.searchAddon=X,this.virtualScrollAddon=ce,this.formattersRegistryService=Te,this.indentFromTop=70,this.sortable=!0,this.delayedMousePresenceDetectionEnabled=!0,this.tableData=[],this.columns=[],this.columnsWidthMap=new Map,this.hasVirtualScroll=!0,this.isSearchEnabled=!1,this.searchTerm$=new te.x,this.onDestroy$=new te.x,this.tableUpdate$=new te.x,this.mousePresent$=new Di.X(!1),this.rowHeight=24,this._scrollBuffer=0,this.totalPages=0,this.lastPageFetched=0,this.sortableSet={},this.defaultColumnAlignment="left",this.idle=!1,this.isBusy=this.lastPageFetched!==this.totalPages}set range(t){this._range=t}get range(){return this.getTableScrollRange()}get headerTooltipsEnabled(){var t;return null===(t=this.configuration.headerTooltipsEnabled)||void 0===t||t}set scrollBuffer(t){if(t>100||t<0)throw new Error("Invalid scroll buffer provided. Required range 1..100");this._scrollBuffer=t}get interactive(){var t,i,n,s,p,f;return null!==(f=null!==(i=null===(t=this.configuration)||void 0===t?void 0:t.interactive)&&void 0!==i?i:null===(p=null===(s=null===(n=this.dataSource)||void 0===n?void 0:n.features)||void 0===s?void 0:s.getFeatureConfig(h.ni.Interactivity))||void 0===p?void 0:p.enabled)&&void 0!==f&&f}ngOnChanges(t){var i,n,s,p;if(t.dataFields&&(null===(i=this.dataFields)||void 0===i?void 0:i.length)&&this.setSortableSet(),(t.widgetData||t.configuration||t.dataFields)&&(this.updateTable(),null===(n=this.vscrollViewport)||void 0===n||n.checkViewportSize()),t.configuration){this.isSortByUpdated(t.configuration)&&(null===(s=t.configuration.currentValue.sortable)||void 0===s||s)&&this.onSortOrderChanged({direction:t.configuration.currentValue.sorterConfiguration.descendantSorting?d.aQE.descending:d.aQE.ascending,sortBy:t.configuration.currentValue.sorterConfiguration.sortBy});const f=Ft()(t,"configuration.currentValue.hasVirtualScroll",!0);this.hasVirtualScroll!==f&&(this.hasVirtualScroll=f,this.virtualScrollAddon.initVirtualScroll())}t.totalItems&&(this.totalPages=Math.floor((null!==(p=this.totalItems)&&void 0!==p?p:0)/this.range))}ngOnInit(){this.dataSource&&(this.setSortFilter(),this.registerSorter(),this.virtualScrollAddon.initWidget(this))}ngAfterViewInit(){var t;if(!this.dataSource)return;null===(t=this.dataSource.busy)||void 0===t||t.pipe((0,Qe.b)(n=>this.isBusy=n),(0,le.R)(this.onDestroy$)).subscribe(),this.virtualScrollAddon.initVirtualScroll(),this.searchAddon.initWidget(this);const i=this.eventBus.getStream(T.pV).pipe((0,Lt.h)(n=>{var s,p;return(null===(p=null===(s=n.payload)||void 0===s?void 0:s.widgetId)||void 0===p?void 0:p.toString())===this.widgetConfigurationService.getWidget().id}),(0,ct.U)(n=>{var s,p;return null!==(p=null===(s=n.payload)||void 0===s?void 0:s.height)&&void 0!==p?p:0}));i.pipe((0,le.R)(this.onDestroy$)).subscribe(n=>{var s;this.tableContainerHeight=n-this.indentFromTop,null===(s=this.vscrollViewport)||void 0===s||s.checkViewportSize(),this.changeDetector.detectChanges()}),setTimeout(()=>{(0,St.T)((0,Fi.of)(this.range*this.rowHeight),i,(0,Fi.of)(this.el.nativeElement.getBoundingClientRect().height)).pipe((0,Lt.h)(n=>!!n),(0,jt.q)(1),(0,Qe.b)(n=>{this.tableWidgetHeight=n,this.virtualScrollAddon.subscribeToVirtualScroll(),this.eventBus.getStream(T.j7).next({})})).subscribe()})}ngOnDestroy(){var t;this.onDestroy$.next(),this.onDestroy$.complete(),this.tableUpdate$.complete(),null===(t=this.searchTerm$)||void 0===t||t.complete(),this.pizzagnaService.setProperty({componentId:"bodyContent",propertyPath:["fallbackKey"],pizzagnaKey:h.xW.Data},void 0)}shouldDisplayTable(){var t;const i=this.columns.length>0,n=(null===(t=this.tableData)||void 0===t?void 0:t.length)>0;return this.isSearchEnabled||this.hasVirtualScroll&&(this.isBusy||this.idle)?i:i&&n}dataTrackBy(t,i){return i?i.id:t}columnTrackBy(t,i){return i.id}updateColumns(t){this.headers=t.columns.filter(s=>s.isActive).map(s=>s.id);const i=t.columns.every(s=>Boolean(s.width)),n=t.columns.map((s,p,f)=>{var D,$,Q,X;return this.columnsWidthMap.set(s.id,s.width),i&&this.columnsWidthMap.set(f[f.length-1].id,void 0),Object.assign(Object.assign({},s),{sortable:null===(X=this.sortableSet[null===(Q=null===($=null===(D=null==s?void 0:s.formatter)||void 0===D?void 0:D.properties)||void 0===$?void 0:$.dataFieldIds)||void 0===Q?void 0:Q.value])||void 0===X||X})});n.length>0&&i&&this.logger.warn("Cannot set width for all columns. Resetting last column width."),this.columns.length!==n.length?this.columns=[...n]:this.columns.forEach((s,p)=>{Object.assign(s,n[p],{})})}mapTableData(t,i,n){return n&&0!==n.length?t.map(s=>{const p=i.reduce((f,D)=>{var $,Q,X;const ce=null===(Q=null===($=D.formatter)||void 0===$?void 0:$.properties)||void 0===Q?void 0:Q.dataFieldIds;if(!ce)return f;const Te=Object.keys(ce).reduce((_e,xe)=>(_e[xe]=s[ce[xe]],_e),{});return f[D.id]=Object.assign({data:Te},Ko()(null===(X=D.formatter)||void 0===X?void 0:X.properties,"dataFieldIds")),f},{});return p.__record=s,p}):(this.logger.warn("There are no data fields defined, so table data cannot be displayed."),[])}onSortOrderChanged(t){var i,n;this.sortedColumn=t;const s=this.columns.find($=>$.id===t.sortBy);if(!s)return;const p=null===(n=null===(i=s.formatter)||void 0===i?void 0:i.properties)||void 0===n?void 0:n.dataFieldIds,f=null==p?void 0:p.value;if(!f)return;const D={sortBy:f,direction:t.direction};Ue()(D,this.sortFilter)||(this.sortFilter=D,this.flushTableData(),this.eventBus.getStream(T.RG).next({}))}onInteraction(t,i){this.interactive&&(i.target.closest((this.configuration.interactionIgnoredSelectors||d.hrM).join(","))||this.eventBus.getStream(T.b1).next({payload:{data:t.__record}}))}onSearchInputChanged(t){this.searchValue=t,this.searchTerm$.next("")}getColumnAlignment(t){var i,n,s;return!(null===(i=null==t?void 0:t.formatter)||void 0===i?void 0:i.componentType)||this.formattersRegistryService.isEmpty?this.defaultColumnAlignment:((null===(n=this.formatters)||void 0===n?void 0:n.version)!==this.formattersRegistryService.stateVersion&&(this.formatters={items:this.formattersRegistryService.getItems().reduce((p,f)=>Object.assign(Object.assign({},p),{[f.componentType]:f}),{}),version:this.formattersRegistryService.stateVersion}),(null===(s=this.formatters.items[t.formatter.componentType])||void 0===s?void 0:s.alignment)||this.defaultColumnAlignment)}setSortFilter(){var t,i,n,s,p,f,D;if(this.configuration){const $=null===(t=this.configuration.sorterConfiguration)||void 0===t?void 0:t.sortBy,Q=null===(f=null===(p=null===(s=null===(n=null===(i=this.configuration.columns)||void 0===i?void 0:i.find(X=>X.id===$))||void 0===n?void 0:n.formatter)||void 0===s?void 0:s.properties)||void 0===p?void 0:p.dataFieldIds)||void 0===f?void 0:f.value;this.sortFilter={direction:(null===(D=this.configuration.sorterConfiguration)||void 0===D?void 0:D.descendantSorting)?d.aQE.descending:d.aQE.ascending,sortBy:Q}}}isSortByUpdated(t){var i;const n=null===(i=t.previousValue)||void 0===i?void 0:i.sorterConfiguration,s=t.currentValue.sorterConfiguration,p=null==n?void 0:n.sortBy,f=null==s?void 0:s.sortBy;return f?!(p===f&&s.descendantSorting===n.descendantSorting):Boolean(p)}updateTable(){this.widgetData&&this.dataFields&&this.configuration.columns&&(this.updateColumns(this.configuration),this.idle=!1,this.tableData=this.mapTableData(this.widgetData,this.configuration.columns,this.dataFields),this.tableUpdate$.next(),this.changeDetector.detectChanges())}registerSorter(){this.dataSource.registerComponent({sorter:{componentInstance:{getFilters:()=>({type:"sorter",value:this.sortFilter})}}})}setSortableSet(){this.sortableSet={},this.dataFields.forEach(t=>{var i;this.sortableSet[t.id]=null===(i=t.sortable)||void 0===i||i})}flushTableData(){this.idle=!0,this.tableData=[]}getTableScrollRange(){var t;const n=(null!==(t=this._scrollBuffer)&&void 0!==t?t:0)/100+1;return this._range?Math.floor(this._range*n):Math.floor(this.tableWidgetHeight/this.rowHeight*2*n)}}return o.lateLoadKey="TableWidgetComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(Qo.I,8),e.Y36(e.sBO),e.Y36(se.p),e.Y36(d.zCP),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(d.mQy),e.Y36(xi),e.Y36(Li),e.Y36(de.C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-widget"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Xo,5),e.Gf(v.N7,5),e.Gf(d.xhB,5,e.SBq)),2&t){let n;e.iGM(n=e.CRH())&&(i.table=n.first),e.iGM(n=e.CRH())&&(i.vscrollViewport=n.first),e.iGM(n=e.CRH())&&(i.tableRows=n)}},hostVars:4,hostBindings:function(t,i){2&t&&(e.Tol(i.elementClass),e.ekj("table-widget-fullwidth",!0))},inputs:{widgetData:"widgetData",componentId:"componentId",configuration:"configuration",dataFields:"dataFields",totalItems:"totalItems",indentFromTop:"indentFromTop",sortable:"sortable",delayedMousePresenceDetectionEnabled:"delayedMousePresenceDetectionEnabled",range:"range",elementClass:"elementClass"},features:[e._Bn([xi,Li]),e.TTD],decls:11,vars:24,consts:[["class","h-100 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"nui-table-widget","d-flex","flex-column",3,"ngClass"],["class","mr-2 mb-2 flex-row",4,"ngIf"],[1,"flex-row","h-100","nui-table-widget-container",3,"nuiDelayedMousePresenceDetection","delay","mousePresentSubject"],["tableStickyHeader","",1,"calc-height",2,"height","calc(100% - 2px)",3,"itemSize","ngClass"],["nui-table","",1,"nui-table-widget__main",3,"reorderable","sortable","totalItems","dataSource","sortedColumn","trackBy","sortOrderChanged"],["widgetTable",""],[3,"nuiColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["nui-header-row","",4,"nuiHeaderRowDef"],["nuiRowDef","","cdkVirtualFor","",3,"nuiRowDefColumns","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"h-100","d-flex","justify-content-center","align-items-center"],["image","no-data-to-show"],[1,"mr-2","mb-2","flex-row"],[1,"unlimited-width","d-flex","justify-content-end","flex-grow-1",3,"value","inputChange","cancel"],[3,"nuiColumnDef"],["nui-header-cell","",3,"isColumnSortingDisabled","width","max-width","min-width","title","tooltipText","alignment",4,"nuiHeaderCellDef"],["nui-cell","",3,"width","max-width","min-width","alignment",4,"nuiCellDef"],["nui-header-cell","",3,"isColumnSortingDisabled","title","tooltipText","alignment"],["nui-cell","",3,"alignment"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties",4,"ngIf"],["nuiComponentPortal","","componentId","formatter",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["nui-header-row",""],["nui-row","","density","tiny",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,jo,2,0,"div",0),e.TgZ(1,"div",1),e.YNc(2,qo,2,1,"div",2),e.TgZ(3,"div",3)(4,"cdk-virtual-scroll-viewport",4),e.ALo(5,"async"),e.TgZ(6,"table",5,6),e.NdJ("sortOrderChanged",function(s){return i.onSortOrderChanged(s)}),e.YNc(8,rn,4,1,"ng-container",7),e.YNc(9,sn,1,0,"tr",8),e.YNc(10,an,1,1,"ng-template",9),e.qZA()()()()),2&t&&(e.Q6J("ngIf",!i.shouldDisplayTable()),e.xp6(1),e.Q6J("ngClass",i.shouldDisplayTable()?"h-100":"invisible"),e.xp6(1),e.Q6J("ngIf",i.isSearchEnabled),e.xp6(1),e.Q6J("nuiDelayedMousePresenceDetection",i.delayedMousePresenceDetectionEnabled)("delay",i.configuration.scrollActivationDelayMs)("mousePresentSubject",i.mousePresent$),e.xp6(1),e.Q6J("itemSize",i.rowHeight)("ngClass",e.VKq(22,ln,!1===e.lcZ(5,20,i.mousePresent$)&&i.delayedMousePresenceDetectionEnabled)),e.xp6(2),e.Q6J("reorderable",null==i.configuration?null:i.configuration.reorderable)("sortable",i.sortable)("totalItems",i.totalItems)("dataSource",i.virtualScrollAddon.visibleItems)("sortedColumn",i.sortedColumn)("trackBy",i.dataTrackBy),e.xp6(2),e.Q6J("ngForOf",i.columns)("ngForTrackBy",i.columnTrackBy),e.xp6(1),e.Q6J("nuiHeaderRowDef",i.headers),e.xp6(1),e.Q6J("nuiRowDefColumns",i.headers)("cdkVirtualForOf",i.tableData)("cdkVirtualForTrackBy",i.dataTrackBy))},directives:[r.O5,d.cuP,r.mk,d.gSk,Pi,v.N7,d.Fpu,v.xd,d.ac$,r.sg,d.yNF,d.Go6,d.Asp,d.wCL,d.tNH,b.$,w.Pl,d.Pu4,d.ue9,d.l6o,v.x0,d.xhB],pipes:[r.Ov],styles:[".nui-table-widget[_ngcontent-%COMP%]{overflow:auto;width:100%}.nui-table-widget[_ngcontent-%COMP%]   .display-contents[_ngcontent-%COMP%]{display:contents}.nui-table-widget__main[_ngcontent-%COMP%]{flex:1 1 auto}.nui-table-widget__paginator[_ngcontent-%COMP%]{margin-top:10px}.nui-table-widget__overflow[_ngcontent-%COMP%]{overflow-y:auto}.nui-table-widget[_ngcontent-%COMP%]   .nui-table-widget-container[_ngcontent-%COMP%]   .virtual-scroll-disabled.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{overflow:hidden!important}.mobile[_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%], .mobile   [_nghost-%COMP%]   .calc-height[_ngcontent-%COMP%]{min-height:200px}.table-widget-fullwidth[_nghost-%COMP%]{width:calc(100% - 10px)}.invisible[_ngcontent-%COMP%]{height:0}@-moz-document url-prefix(){.nui-table-widget-container{margin-right:10px}}"],changeDetection:0}),o})();var Gi=a(69769),ei=a(15439),Be=a.n(ei);let dn=(()=>{class o{convertToSerializable(t){return{startDatetime:t.startDatetime.format(),endDatetime:t.endDatetime.format(),selectedPresetId:t.selectedPresetId,title:t.title}}convertFromSerializable(t){return{startDatetime:Be()(t.startDatetime,Be().defaultFormat),endDatetime:Be()(t.endDatetime,Be().defaultFormat),selectedPresetId:t.selectedPresetId,title:t.title}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),ti=(()=>{class o{constructor(t,i,n,s,p,f,D){this.pizzagnaService=t,this.timeframeService=i,this.tfSerialization=n,this.history=s,this.dataSource=p,this.eventBus=f,this.changeDetector=D,this.currentTimeframe=this.timeframeService.getTimeframeByPresetId("last7Days")}ngOnChanges(t){if(t.timeframe){let i=this.tfSerialization.convertFromSerializable(this.timeframe);i=this.timeframeService.reconcileTimeframe(i),i.selectedPresetId&&(i=this.timeframeService.getTimeframeByPresetId(i.selectedPresetId)),this.currentTimeframe=i,t.timeframe.isFirstChange()||this.eventBus.getStream(T.RG).next({})}t.minDate&&(this.minDateAsMoment=Be()(this.minDate,Be().defaultFormat)),t.maxDate&&(this.maxDateAsMoment=Be()(this.maxDate,Be().defaultFormat))}ngOnInit(){this.history.restart(this.currentTimeframe),this.eventBus.getStream(T.re).subscribe(t=>{if(!t.payload)throw new Error("Unable to set timeframe. Event payload is undefined");this.onTimeframeChange(this.history.save(this.tfSerialization.convertFromSerializable(t.payload)))}),this.dataSource&&this.dataSource.registerComponent({timeframe:{componentInstance:{getFilters:()=>({type:"timeframe",value:this.timeframeService.reconcileTimeframe(this.currentTimeframe)})}}})}onTimeframeChange(t){const i=this.timeframeService.reconcileTimeframe(t);i.selectedPresetId=i.selectedPresetId||"",this.timeframeService.isEqual(i,this.currentTimeframe)||this.pizzagnaService.setProperty({pizzagnaKey:h.xW.Data,componentId:this.componentId,propertyPath:["timeframe"]},this.tfSerialization.convertToSerializable(i))}}return o.lateLoadKey="TimeframeSelectionComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(se.p),e.Y36(d.hYR),e.Y36(dn),e.Y36(d.vpR),e.Y36(h.Fk,8),e.Y36(h.nY),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-timeframe-selection"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{componentId:"componentId",minDate:"minDate",maxDate:"maxDate",timeframe:"timeframe"},features:[e._Bn([d.vpR]),e.TTD],decls:6,vars:8,consts:[[3,"minDate","maxDate","timeFrame","historyIndex","timeFrameChange","undo","clear"],["icon","calendar",1,"pr-3"],["timeFrameSelection","",3,"presets"]],template:function(t,i){1&t&&(e.TgZ(0,"nui-time-frame-bar",0),e.NdJ("timeFrameChange",function(s){return i.onTimeframeChange(i.history.restart(s))})("undo",function(){return i.onTimeframeChange(i.history.undo())})("clear",function(){return i.onTimeframeChange(i.history.restart())}),e._UZ(1,"nui-icon",1),e._uU(2),e.ALo(3,"timeFrame"),e.TgZ(4,"nui-quick-picker",2),e._UZ(5,"nui-time-frame-picker"),e.qZA()()),2&t&&(e.Q6J("minDate",i.minDateAsMoment)("maxDate",i.maxDateAsMoment)("timeFrame",i.currentTimeframe)("historyIndex",i.history.index),e.xp6(2),e.hij(" ",e.lcZ(3,6,i.currentTimeframe)," "),e.xp6(2),e.Q6J("presets",i.timeframeService.currentPresets))},directives:[d.y0H,d.oJW,d.mtp,d.xlZ],pipes:[d.aEp],styles:["[_nghost-%COMP%]{border-top:1px solid;border-top-color:var(--nui-color-line-default,#d9d9d9);border-bottom:1px solid;border-bottom-color:var(--nui-color-line-default,#d9d9d9)}"]}),o})();var Rt=(()=>{return(o=Rt||(Rt={})).DataPoints="dataPoints",o.Series="series",o.Values="values",Rt;var o})(),je=(()=>{return(o=je||(je={})).Time="time",o.TimeInterval="timeInterval",o.Linear="linear",je;var o})(),Ge=(()=>{return(o=Ge||(Ge={})).Line="line",o.StackedArea="stackedArea",o.StackedPercentageArea="stackedPercentageArea",o.StackedBar="stackedBar",o.StatusBar="statusBar",Ge;var o})();let Tt=(()=>{class o{constructor(t){this.unitConversionService=t,this.unitConversionPipe=new k(this.unitConversionService)}getScale(t,i){let n;switch(t.type){case je.Time:n=new g.FBd;break;case je.Linear:n=new g.f$s,n.formatters.tick=s=>this.unitConversionPipe.transform(s,i,d.Qln.Standard);break;case je.TimeInterval:n=new g.lTH((0,ei.duration)(1,"hour"))}return this.updateConfiguration(n,t),n}updateConfiguration(t,i){var n;if(i.type===je.TimeInterval&&t instanceof g.lTH){const s=null===(n=i.properties)||void 0===n?void 0:n.interval;if("number"==typeof s){if(s<=0)throw new Error("Interval value must be greater than zero.");t.interval((0,ei.duration)(s,"seconds"))}}}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.CrH))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),wi=(()=>{class o{constructor(t,i){this.timeseriesScalesService=t,this.dataSource=i,this.widgetData={},this.configuration={},this.scales={},this.destroy$=new te.x,this.buildChart$=new te.x,this.resetChart=!1,this.chartBuilt=!1,this.buildChart$.pipe((0,le.R)(this.destroy$)).subscribe(()=>{this.chartBuilt=!0})}get seriesInteractive(){var t,i,n,s;return"series"===(null===(t=this.configuration)||void 0===t?void 0:t.interaction)||(null===(s=null===(n=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===n?void 0:n.getFeatureConfig(h.ni.Interactivity))||void 0===s?void 0:s.enabled)||!1}ngOnChanges(t){var i,n,s,p,f,D;let $=!1,Q=!1;if(t.configuration){const X=t.configuration.currentValue,ce=t.configuration.previousValue;if((null==X?void 0:X.preset)!==(null==ce?void 0:ce.preset)&&(Q=!0),(null==X?void 0:X.scales)!==(null==ce?void 0:ce.scales))for(const Te of Object.keys(null==X?void 0:X.scales)){const _e=null===(i=null==X?void 0:X.scales)||void 0===i?void 0:i[Te],xe=null===(n=null==ce?void 0:ce.scales)||void 0===n?void 0:n[Te];(null==_e?void 0:_e.type)===(null==xe?void 0:xe.type)&&this.scales[Te]?(null==_e?void 0:_e.properties)!==(null==xe?void 0:xe.properties)&&(this.timeseriesScalesService.updateConfiguration(this.scales[Te],_e),$=!0):(this.scales[Te]=this.timeseriesScalesService.getScale(_e,X.units),$=!0)}}(Q||!this.chartBuilt)&&this.buildChart(),t.widgetData&&!t.widgetData.isFirstChange()&&(0===(null===(p=null===(s=this.widgetData)||void 0===s?void 0:s.series)||void 0===p?void 0:p.length)&&(this.resetChart=!0),this.widgetData&&this.widgetData.series&&(this.resetChart&&(null===(D=null===(f=this.widgetData)||void 0===f?void 0:f.series)||void 0===D?void 0:D.length)>0&&(this.resetChart=!1,this.buildChart()),$=!0)),$&&this.updateChartData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.buildChart$.complete()}}return o.\u0275fac=function(t){e.$Z()},o.\u0275dir=e.lG2({type:o,inputs:{widgetData:"widgetData",configuration:"configuration"},features:[e.TTD]}),o})();function cn(o,l){1&o&&e._UZ(0,"nui-icon",12),2&o&&e.Q6J("icon",l.$implicit)}function _n(o,l){if(1&o&&(e.TgZ(0,"div",6)(1,"nui-legend",7)(2,"nui-legend-series",8)(3,"div",9),e._UZ(4,"div",10),e.YNc(5,cn,1,1,"nui-icon",11),e.qZA()()()()),2&o){const t=l.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("active",i.chartAssist.isLegendActive),e.xp6(1),e.Q6J("descriptionPrimary",t.legendDescriptionPrimary)("descriptionSecondary",t.legendDescriptionSecondary),e.xp6(2),e.Udp("background-color",i.getDataPointData(t,"color")),e.xp6(1),e.Q6J("ngIf",i.getDataPointData(t,"icon"))}}function un(o,l){if(1&o&&(e.TgZ(0,"div",3),e._UZ(1,"nui-chart",4),e.YNc(2,_n,6,6,"div",5),e.qZA()),2&o){const t=l.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("chart",t.chart)("nuiChartCollectionId",i.collectionId),e.xp6(1),e.Q6J("ngIf",(null==t.chartSeriesSet?null:t.chartSeriesSet.length)>0&&t.chartSeriesSet[0])}}function pn(o,l){if(1&o&&(e.TgZ(0,"div",1),e.YNc(1,un,3,3,"div",2),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.chartAssist.sparks)("ngForTrackBy",t.chartAssist.trackByFn)}}let ii=(()=>{class o extends wi{constructor(t,i,n,s,p){super(n,i),this.iconService=t,this.timeseriesScalesService=n,this.changeDetector=s,this.eventBus=p,this.collectionId=(0,d.VjN)("timeseries-status-charts"),this.chartUpdate$=new te.x}ngOnInit(){}getDataPointData(t,i){var n;const s=null===(n=this.chartAssist.highlightedDataPoints[t.id])||void 0===n?void 0:n.data;return s?s[i]:t.data.length>0?t.data[t.data.length-1][i]:void 0}buildChart(){this.buildChart$.next(),this.chartAssist=new g.ruA,this.accessors=(0,g.s_I)(this.chartAssist.palette.standardColors),this.accessors.data.color=(i,n,s,p)=>void 0===i.color?"var(--nui-color-semantic-unknown)":i.color,this.accessors.data.thickness=i=>void 0===i.thick||i.thick?g.Z7w.THICK:g.Z7w.THIN,this.accessors.data.marker=i=>i.icon?this.iconService.getIconResized(this.iconService.getIconData(i.icon).code,8):void 0,this.renderer=new g.Z7w({highlightStrategy:new g.Pkp("x"),pointerEvents:!1}),this.scales.y=new g.jS7,this.scales.y.fixDomain(g.s1E.STATUS_DOMAIN)}updateChartData(){var t,i;this.chartUpdate$.next();const n=this.widgetData.series.map(s=>Object.assign(Object.assign({},s),{data:this.transformData(s.data,this.scales.x instanceof g.lTH),accessors:this.accessors,renderer:this.renderer,scales:this.scales}));this.chartAssist.update(n),this.configuration.enableZoom&&(this.chartAssist.sparks.forEach(s=>{var p,f;(null===(p=null==s?void 0:s.chart)||void 0===p?void 0:p.hasPlugin(g.Rbc))||null===(f=null==s?void 0:s.chart)||void 0===f||f.addPlugin(new g.Rbc({enableExternalEvents:!0}))}),null===(t=this.chartAssist.sparks[0].chart)||void 0===t||t.getEventBus().getStream(g.bdF).pipe((0,le.R)((0,St.T)(this.chartUpdate$,null===(i=this.chartAssist.sparks[0].chart)||void 0===i?void 0:i.eventBus.getStream(g.wu_),this.buildChart$))).subscribe(s=>{const p=s.data,f=p[Object.keys(p)[0]];this.eventBus.getStream(T.re).next({payload:{startDatetime:f[0],endDatetime:f[1],selectedPresetId:void 0}})}))}transformData(t,i){const n=[];return t.forEach((s,p)=>{(i||t.length-1!==p)&&n.push({start:s.x,end:i?s.x:t[p+1].x,status:s.y,color:s.color,thick:s.thick,icon:s.icon})}),n}}return o.lateLoadKey="StatusChartComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(d.C6t),e.Y36(h.Fk,8),e.Y36(Tt),e.Y36(e.sBO),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-status-bar-chart"]],features:[e.qOj],decls:1,vars:1,consts:[["class","p-3 status-bar-chart",4,"ngIf"],[1,"p-3","status-bar-chart"],["class","d-flex",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex"],[1,"d-flex","flex-grow-1",3,"chart","nuiChartCollectionId"],["class","d-flex flex-column pl-2",4,"ngIf"],[1,"d-flex","flex-column","pl-2"],[1,"status-bar-chart__legend",3,"active"],[3,"descriptionPrimary","descriptionSecondary"],[1,"status-bar-chart__legend__tile","d-flex","justify-content-center","align-items-center"],[1,"w-100","h-100","status-bar-chart__legend__tile__background"],["class","status-bar-chart__legend__tile__icon",3,"icon",4,"ngIf"],[1,"status-bar-chart__legend__tile__icon",3,"icon"]],template:function(t,i){1&t&&e.YNc(0,pn,2,2,"div",0),2&t&&e.Q6J("ngIf",i.chartAssist)},directives:[r.O5,r.sg,g.xH4,g.VMb,g.FVX,g.kJo,d.oJW],styles:[".status-bar-chart__legend__tile[_ngcontent-%COMP%]{width:60px;position:relative}.status-bar-chart__legend__tile__background[_ngcontent-%COMP%]{position:absolute;opacity:.4}.status-bar-chart__legend__tile__icon[_ngcontent-%COMP%]{position:absolute}"]}),o})(),Gt=(()=>{class o extends wi{constructor(t,i,n,s){super(n,i),this.eventBus=t,this.timeseriesScalesService=n,this.changeDetector=s,this.valueAccessorKey="y",this.collectionId=""}mapSeriesSet(t,i){return t.map(n=>Object.assign(Object.assign({},n),{scales:i,renderer:this.renderer,accessors:this.accessors}))}hasLegend(){return this.configuration.legendPlacement&&this.configuration.legendPlacement!==y.w.None}legendShouldBeAlignedRight(){return this.configuration.legendPlacement===y.w.Right}onPrimaryDescClick(t,i){!this.seriesInteractive||(t.stopPropagation(),this.eventBus.getStream(T.b1).next({payload:{data:i,interactionType:Rt.Series}}))}updateChartData(){this.chartAssist.update(this.mapSeriesSet(this.widgetData.series,this.scales))}buildChart(){var t;this.buildChart$.next();const i=this.configuration.chartColors&&(null===(t=this.configuration.chartColors)||void 0===t?void 0:t.length)>0?new g.jpW(this.configuration.chartColors):(0,g.GUR)(),n=new g.syg(i);this.accessors=this.createAccessors(n.standardColors),this.chartAssist=this.createChartAssist(n);const s=this.chartAssist.chart;this.configuration.enableZoom&&s.addPlugin(new g.Rbc),s.getEventBus().getStream(g.bdF).pipe((0,le.R)((0,St.T)(this.destroy$,this.buildChart$))).subscribe(p=>{const f=p.data,D=f[Object.keys(f)[0]];this.eventBus.getStream(T.re).next({payload:{startDatetime:D[0],endDatetime:D[1],selectedPresetId:void 0}})}),this.setupInteraction()}setupInteraction(){this.chartAssist.chart.getEventBus().getStream(g.C1c).pipe((0,le.R)((0,St.T)(this.destroy$,this.buildChart$))).subscribe(t=>{const i=t.data;i.interactionType===g.s_5.Click&&this.eventBus.getStream(T.b1).next({payload:{data:i.dataPoints,interactionType:Rt.DataPoints}})}),this.chartAssist.chart.getEventBus().getStream(g.hkV).pipe((0,le.R)((0,St.T)(this.destroy$,this.buildChart$))).subscribe(t=>{const i=t.data;i.interactionType===g.s_5.Click&&this.eventBus.getStream(T.b1).next({payload:{data:i.values,interactionType:Rt.Values}})})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(h.nY),e.LFG(h.Fk,8),e.LFG(Tt),e.LFG(e.sBO))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const gn=function(o){return{"nui-text-link-small link":o}};function hn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(n,s)}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,gn,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function mn(o,l){if(1&o&&(e.TgZ(0,"a",17),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function fn(o,l){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Tn(o,l){if(1&o&&(e.TgZ(0,"a",19),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Cn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-legend-series",8),e.NdJ("isSelectedChange",function(n){const p=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(p.id,n)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",9),e._UZ(2,"nui-chart-marker",10),e.qZA(),e.TgZ(3,"div",11),e.YNc(4,hn,2,4,"div",12),e.YNc(5,mn,2,3,"a",13),e.YNc(6,fn,2,2,"div",14),e.YNc(7,Tn,2,3,"a",15),e.qZA()()}if(2&o){const t=l.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const On=function(o){return[o]};function In(o,l){if(1&o&&(e.TgZ(0,"div",5)(1,"nui-legend",6),e.YNc(2,Cn,8,12,"nui-legend-series",7),e.qZA()()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,On,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let oi=(()=>{class o extends Gt{constructor(t,i,n,s){super(t,i,n,s),this.renderer=new g.Med}createAccessors(t){return new g.qxh(t)}createChartAssist(t){const i=new g.c_e;i.axis.left.fit=!0;const n=new g.kL2(new g.Be5(i));return new g.doR(n,null,t)}}return o.lateLoadKey="LineChartComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(Tt),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-line-chart"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._UZ(5,"nui-chart",3),e.qZA(),e.YNc(6,In,3,8,"div",4),e.qZA()),2&t&&(e.xp6(3),e.Oqu(i.configuration.leftAxisLabel),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[g.xH4,g.VMb,r.O5,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}"]}),o})();const vn=function(o){return{"nui-text-link-small link":o}};function En(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(n,s)}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,vn,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Sn(o,l){if(1&o&&(e.TgZ(0,"a",17),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Rn(o,l){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Nn(o,l){if(1&o&&(e.TgZ(0,"a",19),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function An(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-legend-series",8),e.NdJ("isSelectedChange",function(n){const p=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(p.id,n)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",9),e._UZ(2,"nui-chart-marker",10),e.qZA(),e.TgZ(3,"div",11),e.YNc(4,En,2,4,"div",12),e.YNc(5,Sn,2,3,"a",13),e.YNc(6,Rn,2,2,"div",14),e.YNc(7,Nn,2,3,"a",15),e.qZA()()}if(2&o){const t=l.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const yn=function(o){return[o]};function Mn(o,l){if(1&o&&(e.TgZ(0,"div",5)(1,"nui-legend",6),e.YNc(2,An,8,12,"nui-legend-series",7),e.qZA()()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,yn,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let ni=(()=>{class o extends Gt{constructor(t,i,n,s){super(t,i,n,s),this.renderer=new g.QtU,this.valueAccessorKey="y1"}createAccessors(t){return(0,g.mIe)(t)}createChartAssist(t){const i=(0,g.nuZ)();i.config().axis.left.fit=!0;const n=new g.kL2(i);return new g.doR(n,g.aCj,t)}}return o.lateLoadKey="StackedAreaChartComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(Tt),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-stacked-area-chart"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._UZ(5,"nui-chart",3),e.qZA(),e.YNc(6,Mn,3,8,"div",4),e.qZA()),2&t&&(e.xp6(3),e.Oqu(i.configuration.leftAxisLabel),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[g.xH4,g.VMb,r.O5,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}"]}),o})();const Pn=function(o){return{"nui-text-link-small link":o}};function Dn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(n,s)}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Pn,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Fn(o,l){if(1&o&&(e.TgZ(0,"a",17),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function bn(o,l){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function xn(o,l){if(1&o&&(e.TgZ(0,"a",19),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Ln(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-legend-series",8),e.NdJ("isSelectedChange",function(n){const p=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(p.id,n)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",9),e._UZ(2,"nui-chart-marker",10),e.qZA(),e.TgZ(3,"div",11),e.YNc(4,Dn,2,4,"div",12),e.YNc(5,Fn,2,3,"a",13),e.YNc(6,bn,2,2,"div",14),e.YNc(7,xn,2,3,"a",15),e.qZA()()}if(2&o){const t=l.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const Gn=function(o){return[o]};function wn(o,l){if(1&o&&(e.TgZ(0,"div",5)(1,"nui-legend",6),e.YNc(2,Ln,8,12,"nui-legend-series",7),e.qZA()()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,Gn,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let ri=(()=>{class o extends Gt{constructor(t,i,n,s){super(t,i,n,s),this.valueAccessorKey="value",this.renderer=new g.Z7w({highlightStrategy:new g.Pkp("x"),pointerEvents:!1})}mapSeriesSet(t,i){return this.accessors.data.thickness=i.x instanceof g.lTH?void 0:()=>5,super.mapSeriesSet(t,i)}createAccessors(t){const i=(0,g.Q6e)({horizontal:!1},t);return i.data.category=n=>n.x,i.data.value=n=>n.y,i}createChartAssist(t){const i=new g.kL2((0,g.skL)());return i.addPlugin(new g.$fK),new g.doR(i,g.knu,t)}}return o.lateLoadKey="StackedBarChartComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(Tt),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-stacked-bar-chart"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._UZ(5,"nui-chart",3),e.qZA(),e.YNc(6,wn,3,8,"div",4),e.qZA()),2&t&&(e.xp6(3),e.Oqu(i.configuration.leftAxisLabel),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[g.xH4,g.VMb,r.O5,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}"]}),o})();const $n=function(o){return{"nui-text-link-small link":o}};function Un(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).onPrimaryDescClick(n,s)}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,$n,i.seriesInteractive)),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function zn(o,l){if(1&o&&(e.TgZ(0,"a",17),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH)("title",t.legendDescriptionPrimary),e.xp6(1),e.hij(" ",t.legendDescriptionPrimary," ")}}function Bn(o,l){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function Wn(o,l){if(1&o&&(e.TgZ(0,"a",19),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("href",t.secondaryLink,e.LSH)("title",t.legendDescriptionSecondary),e.xp6(1),e.hij(" ",t.legendDescriptionSecondary," ")}}function kn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-legend-series",8),e.NdJ("isSelectedChange",function(n){const p=e.CHM(t).$implicit;return e.oxw(2).chartAssist.toggleSeries(p.id,n)})("mouseenter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).chartAssist.emphasizeSeries(s.id)})("mouseleave",function(){return e.CHM(t),e.oxw(2).chartAssist.resetVisibleSeries()}),e.TgZ(1,"nui-rich-legend-tile",9),e._UZ(2,"nui-chart-marker",10),e.qZA(),e.TgZ(3,"div",11),e.YNc(4,Un,2,4,"div",12),e.YNc(5,zn,2,3,"a",13),e.YNc(6,Bn,2,2,"div",14),e.YNc(7,Wn,2,3,"a",15),e.qZA()()}if(2&o){const t=l.$implicit,i=e.oxw(2);e.Q6J("ngClass","xy-chart__legend-series--state-"+(null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state))("isSelected",!i.chartAssist.isSeriesHidden(t.id))("seriesRenderState",null==i.chartAssist.renderStatesIndex[t.id]?null:i.chartAssist.renderStatesIndex[t.id].state),e.xp6(1),e.Q6J("value",i.chartAssist.getHighlightedValue(t,"y","tick",i.valueAccessorKey))("backgroundColor",i.chartAssist.palette.standardColors.get(t.id))("color",i.chartAssist.palette.textColors.get(t.id)),e.xp6(1),e.Q6J("marker",i.chartAssist.markers.get(t.id))("color",i.chartAssist.palette.standardColors.get(t.id)),e.xp6(2),e.Q6J("ngIf",!t.link),e.xp6(1),e.Q6J("ngIf",t.link),e.xp6(1),e.Q6J("ngIf",!t.secondaryLink),e.xp6(1),e.Q6J("ngIf",t.secondaryLink)}}const Zn=function(o){return[o]};function Vn(o,l){if(1&o&&(e.TgZ(0,"div",5)(1,"nui-legend",6),e.YNc(2,kn,8,12,"nui-legend-series",7),e.qZA()()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,Zn,t.legendShouldBeAlignedRight()?"legend scrollable":"legend-bottom")),e.xp6(1),e.Q6J("active",t.chartAssist.isLegendActive)("interactive",!0)("orientation",t.legendShouldBeAlignedRight()?"vertical":"horizontal"),e.xp6(1),e.Q6J("ngForOf",t.chartAssist.legendSeriesSet)("ngForTrackBy",t.chartAssist.seriesTrackByFn)}}let si=(()=>{class o extends Gt{constructor(t,i,n,s){super(t,i,n,s),this.renderer=new g.QtU,this.valueAccessorKey="y1"}createAccessors(t){return(0,g.mIe)(t)}createChartAssist(t){const i=(0,g.nuZ)();i.config().axis.left.fit=!0;const n=new g.kL2(i);return new g.doR(n,g.HAP,t)}}return o.lateLoadKey="StackedPercentageAreaChartComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(h.Fk,8),e.Y36(Tt),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-stacked-percentage-area-chart"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"nui-chart-layout","h-100","px-3","py-3"],[1,"axis-label-left","nui-text-small"],[1,"chart"],[1,"w-100",3,"nuiChartCollectionId","chart"],["class","d-flex",3,"ngClass",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"m-auto",3,"active","interactive","orientation"],["class","xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"xy-chart__legend-series",3,"ngClass","isSelected","seriesRenderState","isSelectedChange","mouseenter","mouseleave"],[3,"value","backgroundColor","color"],["rightEdge","",3,"marker","color"],["description","",1,"description-container","d-flex","flex-column","nui-text-small","justify-content-center"],["class","description description-primary",3,"ngClass","click",4,"ngIf"],["class","description description-primary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],["class","description description-secondary",3,"title",4,"ngIf"],["class","description description-secondary nui-text-link-small link","rel","noopener noreferrer",3,"href","title","click",4,"ngIf"],[1,"description","description-primary",3,"ngClass","click"],["rel","noopener noreferrer",1,"description","description-primary","nui-text-link-small","link",3,"href","title","click"],[1,"description","description-secondary",3,"title"],["rel","noopener noreferrer",1,"description","description-secondary","nui-text-link-small","link",3,"href","title","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2),e._UZ(5,"nui-chart",3),e.qZA(),e.YNc(6,Vn,3,8,"div",4),e.qZA()),2&t&&(e.xp6(3),e.Oqu(i.configuration.leftAxisLabel),e.xp6(2),e.Q6J("nuiChartCollectionId",i.collectionId)("chart",i.chartAssist.chart),e.xp6(1),e.Q6J("ngIf",i.hasLegend()))},directives:[g.xH4,g.VMb,r.O5,r.mk,g.FVX,r.sg,g.kJo,g.wHi,g.sRf],styles:[".xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-link,#0079aa)}.xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-primary[_ngcontent-%COMP%], .xy-chart__legend-series[_ngcontent-%COMP%]:not(:hover).xy-chart__legend-series--state-hidden   .link.description-secondary[_ngcontent-%COMP%]{color:var(--nui-color-text-default,#111)}"]}),o})(),$i=(()=>{class o{constructor(){this.presets={[Ge.Line]:{componentType:oi.lateLoadKey},[Ge.StackedArea]:{componentType:ni.lateLoadKey},[Ge.StackedPercentageArea]:{componentType:si.lateLoadKey},[Ge.StackedBar]:{componentType:ri.lateLoadKey},[Ge.StatusBar]:{componentType:ii.lateLoadKey}}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Jn(o,l){}const Yn=function(o,l,t){return{widgetData:o,configuration:l,collectionId:t}};function Hn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.ynx(1,3,4),e.YNc(3,Jn,0,0,"ng-template",5),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk(),e.qZA()}if(2&o){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentType",i.chartPreset.componentType)("properties",e.kEZ(3,Yn,i.widgetData,i.configuration,i.collectionId||(null==i.configuration?null:i.configuration.collectionId))),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function Kn(o,l){1&o&&(e.TgZ(0,"div"),e._UZ(1,"nui-image",6),e.qZA())}let ai=(()=>{class o{constructor(t,i){this.timeseriesChartPresetService=t,this.changeDetector=i,this.elementClass=""}ngOnChanges(t){var i,n;if(t.configuration){const s=t.configuration.currentValue,p=t.configuration.previousValue;(null==s?void 0:s.preset)!==(null==p?void 0:p.preset)&&(this.chartPreset=this.timeseriesChartPresetService.presets[null!==(n=null===(i=this.configuration)||void 0===i?void 0:i.preset)&&void 0!==n?n:Ge.Line])}}shouldShowChart(){var t,i,n;return(null!==(n=null===(i=null===(t=this.widgetData)||void 0===t?void 0:t.series)||void 0===i?void 0:i.length)&&void 0!==n?n:0)>0}}return o.lateLoadKey="TimeseriesWidgetComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36($i),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-timeseries-widget"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{widgetData:"widgetData",configuration:"configuration",collectionId:"collectionId",elementClass:"elementClass"},features:[e.TTD],decls:2,vars:2,consts:[["class","h-100",4,"ngIf"],[4,"ngIf"],[1,"h-100"],["nuiComponentPortal","","componentId","timeseriesWidgetChart",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["image","no-data-to-show"]],template:function(t,i){1&t&&(e.YNc(0,Hn,4,7,"div",0),e.YNc(1,Kn,2,0,"div",1)),2&t&&(e.Q6J("ngIf",i.shouldShowChart()),e.xp6(1),e.Q6J("ngIf",!i.shouldShowChart()))},directives:[r.O5,b.$,w.Pl,d.cuP],encapsulation:2}),o})();function Qn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-search",1),e.NdJ("inputChange",function(n){return e.CHM(t),e.oxw().onSearchInputChanged(n)})("cancel",function(n){return e.CHM(t),e.oxw().onSearch(n)})("search",function(n){return e.CHM(t),e.oxw().onSearch(n)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("value",t.searchValue)}}let li=(()=>{class o{constructor(t,i){this.dataSource=t,this.eventBus=i,this.enabled=!1,this.searchTerm$=new te.x,this.destroy$=new te.x}ngOnInit(){var t,i,n,s;(null===(n=null===(i=null===(t=this.dataSource.features)||void 0===t?void 0:t.getSupportedFeatures())||void 0===i?void 0:i.search)||void 0===n?void 0:n.enabled)&&(this.enabled=!0),this.registerFilters(),this.handleSearchTermSubscription(null===(s=this.configuration)||void 0===s?void 0:s.searchOnKeyUp)}ngOnChanges(t){t.configuration&&this.handleSearchTermSubscription(t.configuration.currentValue.searchOnKeyUp)}onSearchInputChanged(t){var i,n;(null===(n=null===(i=this.configuration)||void 0===i?void 0:i.searchOnKeyUp)||void 0===n?void 0:n.enabled)&&(this.searchValue=t,this.searchTerm$.next(t))}onSearch(t){this.searchValue=t,this.searchTerm$.next(t)}ngOnDestroy(){this.eventBus.getStream(T.kV).next({payload:""}),this.destroy$.next(),this.destroy$.complete()}registerFilters(){var t;null===(t=this.dataSource)||void 0===t||t.registerComponent({search:{componentInstance:{getFilters:()=>({value:this.searchValue})}}})}handleSearchTermSubscription(t){var i;null===(i=this.searchTermSubscription)||void 0===i||i.unsubscribe(),this.searchTermSubscription=this.searchTerm$.pipe((0,le.R)(this.destroy$),(0,bi.b)((null==t?void 0:t.debounceTime)||o.defaultSearchDebounce)).subscribe(n=>{this.eventBus.getStream(T.RG).next({}),this.eventBus.getStream(T.kV).next({payload:n})})}}return o.lateLoadKey="WidgetSearchComponent",o.defaultSearchDebounce=500,o.\u0275fac=function(t){return new(t||o)(e.Y36(h.Fk,8),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-search"]],hostVars:4,hostBindings:function(t,i){2&t&&e.ekj("default",i.enabled)("invisible",!i.enabled)},inputs:{configuration:"configuration",searchValue:"searchValue"},features:[e.TTD],decls:1,vars:1,consts:[["class","unlimited-width",3,"value","inputChange","cancel","search",4,"ngIf"],[1,"unlimited-width",3,"value","inputChange","cancel","search"]],template:function(t,i){1&t&&e.YNc(0,Qn,1,1,"nui-search",0),2&t&&e.Q6J("ngIf",i.enabled)},directives:[r.O5,d.gSk],styles:[".default[_nghost-%COMP%]{padding:5px 10px}.invisible[_nghost-%COMP%]{height:0}"],changeDetection:0}),o})();var Ze=(()=>{return(o=Ze||(Ze={})).ErrorUnknown="errorUnknown",o.ErrorForbidden="errorForbidden",o.ErrorNotFound="errorNotFound",Ze;var o})();function Xn(o,l){}function jn(o,l){}function qn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",5),e.ynx(1,1,2),e.YNc(3,jn,0,0,"ng-template",3),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk(),e.qZA()}if(2&o){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentId",i.nodeConfigs[1].id)("componentType",i.nodeConfigs[1].componentType)("providers",i.nodeConfigs[1].providers)("properties",i.nodeConfigs[1].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}const er=function(o,l){return{"d-none":o,"d-flex":l}};let di=(()=>{class o extends Ee{constructor(t,i,n){super(t,i,n),this.elementClass="",this.defaultClasses="w-100"}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`}ngOnDestroy(){super.ngOnDestroy()}getNodes(){return this.fallbackKey?[this.primaryContent,this.fallbackMap&&this.fallbackMap[this.fallbackKey]||Ze.ErrorUnknown]:[this.primaryContent]}}return o.lateLoadKey="WidgetBodyContentComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(se.p),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-body-content"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{componentId:"componentId",primaryContent:"primaryContent",fallbackKey:"fallbackKey",fallbackMap:"fallbackMap",elementClass:"elementClass"},features:[e.qOj],decls:5,vars:10,consts:[[1,"h-100",3,"ngClass"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["class","d-flex h-100",4,"ngIf"],[1,"d-flex","h-100"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",0),e.ynx(1,1,2),e.YNc(3,Xn,0,0,"ng-template",3),e.NdJ("attached",function(p){return e.CHM(n),e.MAs(2).attached(p)}),e.BQk(),e.qZA(),e.YNc(4,qn,4,5,"div",4)}if(2&t){const n=e.MAs(2);e.Q6J("ngClass",e.WLB(7,er,i.fallbackKey,!i.fallbackKey)),e.xp6(1),e.Q6J("componentId",i.nodeConfigs[0].id)("componentType",i.nodeConfigs[0].componentType)("providers",i.nodeConfigs[0].providers)("properties",i.nodeConfigs[0].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",n.portal),e.xp6(1),e.Q6J("ngIf",i.fallbackKey)}},directives:[r.mk,b.$,w.Pl,r.O5],encapsulation:2}),o})();function tr(o,l){1&o&&e._UZ(0,"nui-preview-overlay")}function ir(o,l){}let ci=(()=>{class o extends Ee{constructor(t,i,n,s){super(i,n,s),this.eventBus=t,this.editMode=!1,this.elementClass="",this.defaultClasses="d-flex h-100 w-100",this.getNodes=()=>[this.content]}ngOnInit(){this.classNames=`${this.defaultClasses} ${this.elementClass}`,this.eventBus.getStream(T.N9).pipe((0,le.R)(this.destroyed$)).subscribe(t=>{this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["editMode"]},!!t.payload)})}ngOnDestroy(){super.ngOnDestroy()}}return o.lateLoadKey="WidgetBodyComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(e.sBO),e.Y36(se.p),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-body"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.classNames)},inputs:{componentId:"componentId",editMode:"editMode",content:"content",elementClass:"elementClass"},features:[e.qOj],decls:4,vars:6,consts:[[4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){if(1&t){const n=e.EpF();e.YNc(0,tr,1,0,"nui-preview-overlay",0),e.ynx(1,1,2),e.YNc(3,ir,0,0,"ng-template",3),e.NdJ("attached",function(p){return e.CHM(n),e.MAs(2).attached(p)}),e.BQk()}if(2&t){const n=e.MAs(2);e.Q6J("ngIf",i.editMode),e.xp6(1),e.Q6J("componentId",i.nodeConfigs[0].id)("componentType",i.nodeConfigs[0].componentType)("providers",i.nodeConfigs[0].providers)("properties",i.nodeConfigs[0].properties),e.xp6(2),e.Q6J("cdkPortalOutlet",n.portal)}},directives:[r.O5,C.b,b.$,w.Pl],styles:["[_nghost-%COMP%]{position:relative}"]}),o})();var Ct=a(41777);const or=["widgetHeaderCustomElement"];function nr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleCollapsed()}),e._UZ(1,"span",19),e.qZA()}}function rr(o,l){1&o&&(e.TgZ(0,"div",20),e._UZ(1,"nui-icon",21),e.qZA())}function sr(o,l){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.Q6J("title",t.title),e.xp6(1),e.hij(" ",t.title," ")}}function ar(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"a",23),e.NdJ("click",function(n){return e.CHM(t),e.oxw().prepareLink(n)})("mouseenter",function(n){return e.CHM(t),e.oxw().prepareLink(n)})("mousedown",function(n){return n.stopPropagation(),n.preventDefault()}),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("href",t.url,e.LSH)("nuiTooltip",t.linkTooltip),e.xp6(1),e.Oqu(t.title)}}function lr(o,l){if(1&o&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.Q6J("title",t.subtitle),e.xp6(1),e.hij(" ",t.subtitle," ")}}function dr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(n){return e.CHM(t),e.oxw().prepareLink(n)})("mouseenter",function(n){return e.CHM(t),e.oxw().prepareLink(n)})("mousedown",function(n){return n.stopPropagation(),n.preventDefault()}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("href",t.url,e.LSH)("nuiTooltip",t.linkTooltip)}}function cr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().onEditWidget()}),e.qZA()}}function _r(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleCollapsed()}),e.qZA()}}function ur(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-menu-action",30),e.NdJ("actionDone",function(){return e.CHM(t),e.oxw(2).onReloadData()}),e._UZ(1,"nui-icon",31),e.TgZ(2,"span"),e.SDv(3,32),e.qZA()()}}function pr(o,l){if(1&o&&(e.TgZ(0,"nui-menu",28),e.YNc(1,ur,4,0,"nui-menu-action",29),e.qZA()),2&o){const t=e.oxw();e.Q6J("appendToBody",!0),e.xp6(1),e.Q6J("ngIf",t.reloadable)}}function gr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"nui-popup",33)(1,"span",34),e._UZ(2,"button",35),e.qZA(),e.TgZ(3,"div",36)(4,"nui-menu-action",37),e.NdJ("actionDone",function(){return e.CHM(t),e.oxw().removeWidget()}),e.SDv(5,38),e.qZA()()()}2&o&&e.Q6J("appendToBody",!0)}function hr(o,l){1&o&&e._UZ(0,"div",39)}const mr=["*"];let _i=(()=>{class o{constructor(t,i,n,s,p){this.eventBus=t,this.pizzagnaService=i,this.changeDetector=n,this.eventProxy=s,this.linkProvider=p,this.editMode=!0,this.editable=!0,this.removable=!0,this.collapsible=!1,this.reloadable=!0,this.hideMenu=!1,this.collapsed=!1,this.onDestroy$=new te.x,this.linkTooltip=$localize`Explore this data`}get hostClass(){return!0}get state(){return this.collapsed&&this.collapsible?"collapsed":"expanded"}ngOnInit(){this.collapsible&&this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["isCollapsed"]},!0),this.eventProxy&&(this.eventProxy.addUpstream(T.Ef),this.eventProxy.addUpstream(T.y4),this.eventProxy.addDownstream(T.N9)),this.eventBus.getStream(T.N9).pipe((0,le.R)(this.onDestroy$)).subscribe(t=>{this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["collapsed"]},!t.payload),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["editMode"]},!!t.payload)})}ngAfterViewInit(){setTimeout(()=>{this.withCustomElement=0!==this.widgetHeaderCustomElement.nativeElement.childNodes.length})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}removeWidget(){this.eventBus.getStream(T.y4).next({})}toggleCollapsed(){this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["collapsed"]},!this.collapsed)}onEditWidget(){this.eventBus.getStream(T.Ef).next({})}onReloadData(){if(!this.reloadable)throw new Error("The widget is not reloadable, so it can't be reloaded manually.");this.eventBus.getStream(T.RG).next({})}prepareLink(t){const i=t.target;if(i&&this.linkProvider){const n=this.linkProvider.getLink(this.url);n&&i.setAttribute("href",n)}return!0}}return o.lateLoadKey="WidgetHeaderComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(h.nY),e.Y36(se.p),e.Y36(e.sBO),e.Y36(W.q,8),e.Y36(h.B5,8))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-header"]],viewQuery:function(t,i){if(1&t&&e.Gf(or,5),2&t){let n;e.iGM(n=e.CRH())&&(i.widgetHeaderCustomElement=n.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.ekj("nui-widget-header",i.hostClass)},inputs:{componentId:"componentId",editMode:"editMode",editable:"editable",removable:"removable",collapsible:"collapsible",reloadable:"reloadable",title:"title",subtitle:"subtitle",hideMenu:"hideMenu",url:"url",collapsed:"collapsed"},ngContentSelectors:mr,decls:19,vars:20,consts:function(){let l,t,i,n;return l=$localize`:␟8028b4b4a38e861642d3d465f1fd0e08ea5bdcd0␟8529558445404824560:Edit widget`,t=$localize`:␟aefc550c9735e4112bc884389f77c619007acb8e␟9121781503543370614:Reload data`,i=$localize`:␟6d4f27e8085712e506aaaee1704b3e0455d15652␟8500807759101015900:Remove widget`,n=$localize`:␟0f0e6eea7e5a63ccfd2d07117d5560cb89936c2c␟495801405190883151:Remove Widget`,[[1,"nui-widget__header"],[1,"nui-widget__header__container"],["class","collapse-container",3,"click",4,"ngIf"],[1,"nui-widget__header__content"],["class","nui-widget__header__content-drag-icon nui-dashboard__widget--drag-handle",4,"ngIf"],[1,"nui-widget__header__content-custom-element"],["widgetHeaderCustomElement",""],[1,"nui-widget__header__content-title-container","nui-dashboard__widget--drag-handle"],["class","nui-text-widget nui-widget__header__content-title",3,"title",4,"ngIf"],[4,"ngIf"],["class","nui-text-hint nui-widget__header__content-help-hint",3,"title",4,"ngIf"],[1,"nui-widget__header__content-actions"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown",4,"ngIf"],["class","nui-widget-header__action-edit","nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",l,3,"click",4,"ngIf"],["class","nui-widget-header__action-toggle-collapsed","nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",3,"click",4,"ngIf"],["class","nui-widget__header__content-actions__menu","icon","menu","displayStyle","action",3,"appendToBody",4,"ngIf"],["class","nui-widget-header__action-remove",3,"appendToBody",4,"ngIf"],["class","collapse-spacer",4,"ngIf"],[1,"collapse-container",3,"click"],[1,"collapse-container__line"],[1,"nui-widget__header__content-drag-icon","nui-dashboard__widget--drag-handle"],["icon","drag","iconColor","gray"],[1,"nui-text-widget","nui-widget__header__content-title",3,"title"],[1,"nui-text-widget","nui-widget__header__content-title",3,"href","nuiTooltip","click","mouseenter","mousedown"],[1,"nui-text-hint","nui-widget__header__content-help-hint",3,"title"],["nui-button","","displayStyle","action","icon","external-link",3,"href","nuiTooltip","click","mouseenter","mousedown"],["nui-button","","type","button","displayStyle","action","icon","edit","nuiTooltip",l,1,"nui-widget-header__action-edit",3,"click"],["nui-button","","type","button","displayStyle","action","nuiTooltip","Collapse header","icon","double-caret-up",1,"nui-widget-header__action-toggle-collapsed",3,"click"],["icon","menu","displayStyle","action",1,"nui-widget__header__content-actions__menu",3,"appendToBody"],[3,"actionDone",4,"ngIf"],[3,"actionDone"],["icon","reload"],t,[1,"nui-widget-header__action-remove",3,"appendToBody"],["nuiTooltip",i],["nui-button","","nuiPopupToggle","","type","button","icon","remove","iconColor","red","displayStyle","action"],["popupAreaContent","",1,"nui-menu"],["type","destructive",3,"actionDone"],n,[1,"collapse-spacer"]]},template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,nr,2,0,"div",2),e.TgZ(3,"div",3),e.YNc(4,rr,2,0,"div",4),e.TgZ(5,"div",5,6),e.Hsn(7),e.qZA(),e.TgZ(8,"div",7),e.YNc(9,sr,2,2,"div",8),e.YNc(10,ar,3,3,"div",9),e.YNc(11,lr,2,2,"div",10),e.qZA(),e.TgZ(12,"div",11),e.YNc(13,dr,1,2,"a",12),e.YNc(14,cr,1,0,"button",13),e.YNc(15,_r,1,0,"button",14),e.YNc(16,pr,2,2,"nui-menu",15),e.YNc(17,gr,6,1,"nui-popup",16),e.qZA()()(),e.YNc(18,hr,1,0,"div",17),e.qZA()),2&t&&(e.xp6(1),e.ekj("nui-widget__header__container--collapsible",i.collapsible)("nui-widget__header__container--collapsed",i.collapsible&&i.collapsed)("nui-widget__header__container--expanded",i.collapsible&&!i.collapsed),e.Q6J("@expandedState",i.state),e.xp6(1),e.Q6J("ngIf",i.collapsed&&i.collapsible),e.xp6(2),e.Q6J("ngIf",i.editMode),e.xp6(4),e.ekj("nui-widget__header__content-title-with-additional-content",i.withCustomElement||i.editMode),e.xp6(1),e.Q6J("ngIf",!i.url||i.editMode),e.xp6(1),e.Q6J("ngIf",i.url&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.subtitle),e.xp6(2),e.Q6J("ngIf",i.url&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.editable&&i.editMode),e.xp6(1),e.Q6J("ngIf",i.collapsible&&!i.editMode),e.xp6(1),e.Q6J("ngIf",!i.hideMenu&&!i.editMode),e.xp6(1),e.Q6J("ngIf",i.removable&&i.editMode),e.xp6(1),e.Q6J("ngIf",i.collapsible))},directives:[r.O5,d.oJW,d.i9q,d.r0F,d.Mnp,d.VDk,d.RXH,d.btB],styles:[".nui-widget__header[_ngcontent-%COMP%]{display:flex;position:relative}.nui-widget__header[_ngcontent-%COMP%]   .collapse-spacer[_ngcontent-%COMP%]{margin-bottom:15px}.nui-widget__header__container[_ngcontent-%COMP%]{z-index:500;width:100%}.nui-widget__header__container--collapsible[_ngcontent-%COMP%]{width:100%}.nui-widget__header__container--collapsed[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .collapse-container__line[_ngcontent-%COMP%]{width:16px;height:1px;background:var(--nui-color-line-active,#0079aa);margin:5px 0;cursor:pointer}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content[_ngcontent-%COMP%]{align-items:flex-start;display:flex;opacity:1}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-drag-icon[_ngcontent-%COMP%]{align-items:center;cursor:move;display:flex;height:30px;justify-content:center;margin:5px;width:30px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title[_ngcontent-%COMP%]{display:block;max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-container[_ngcontent-%COMP%]{flex:1;min-width:0;padding:10px 0 5px 10px}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-title-with-additional-content[_ngcontent-%COMP%]{padding-left:0}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-help-hint[_ngcontent-%COMP%]{max-width:100%;white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-widget__header__container[_ngcontent-%COMP%]   .nui-widget__header__content-actions[_ngcontent-%COMP%]{display:flex;padding:5px 10px 0 5px}"],data:{animation:[(0,Ct.X$)("expandedState",[(0,Ct.SB)("expanded",(0,Ct.oB)({height:"*"})),(0,Ct.SB)("collapsed",(0,Ct.oB)({height:"11px"})),(0,Ct.eR)("expanded <=> collapsed",[(0,Ct.jt)("350ms ease-in-out")])])]}}),o})();a(43046);var Ve=a(53737);let Ui=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[w.eL,R],w.eL]}),o})();const Tr=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred ","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgrey","#d3d3d3"],["lightgreen","#90ee90"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370d8"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#d87093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]);let zi=(()=>{class o{RGBToHexRGBToHex(t){const i=t.indexOf(",")>-1?",":" ",n=t.substr(4).split(")")[0].split(i);let s=(+n[0]).toString(16),p=(+n[1]).toString(16),f=(+n[2]).toString(16);return 1===s.length&&(s="0"+s),1===p.length&&(p="0"+p),1===f.length&&(f="0"+f),"#"+s+p+f}isHEX(t){return/^#[0-9A-F]{6}$/i.test(t)||/^#([0-9A-F]{3}){1,2}$/i.test(t)}colorKeywordsToHex(t){const i=Tr.get(t);return z()(i)?"":i}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var Cr=a(91314);function Or(o,l){if(1&o&&e._UZ(0,"div",10),2&o){const t=e.oxw().$implicit,i=e.oxw();e.ekj("black-tick",i.isBlackTick||(null==t?null:t.color)===i.defaultColor)}}function Ir(o,l){if(1&o&&(e.TgZ(0,"div",4)(1,"nui-select-v2-option",5,6)(3,"div",7)(4,"div",8),e.YNc(5,Or,1,2,"div",9),e.qZA()()()()),2&o){const t=l.$implicit,i=e.MAs(2),n=e.oxw();e.xp6(1),e.Q6J("value",null==t?null:t.color)("displayValueContext",t),e.xp6(2),e.ekj("color-picker-option--selected",null==i?null:i.selected),e.uIk("title",null==t?null:t.label),e.xp6(1),e.Q6J("ngStyle",n.setStyles(null==t?null:t.color)),e.xp6(1),e.Q6J("ngIf",null==i?null:i.selected)}}function vr(o,l){if(1&o&&(e.TgZ(0,"div",11)(1,"div",12),e._UZ(2,"div",13),e.qZA(),e.TgZ(3,"div",14),e._UZ(4,"nui-icon",15),e.qZA()()),2&o){const t=l.$implicit,i=l.open,n=e.oxw();e.xp6(1),e.uIk("title",null==t?null:t.label),e.xp6(1),e.Q6J("ngStyle",n.setStyles(null==t?null:t.color)),e.xp6(2),e.Udp("transform",i?"rotate(180deg)":"")}}let ui=(()=>{class o{constructor(t,i,n){this.changeDetection=t,this.colorService=i,this.cdkOverlay=n,this.defaultColor="var(--nui-color-bg-secondary)",this.overlayUtilities=new d.KcF,this.destroy$=new te.x,this.setStyles=s=>({"background-color":s||this.defaultColor})}ngOnChanges(t){t.colors&&(this.colors=t.colors.currentValue),t.colorPalette&&(this.colorPalette=t.colorPalette.currentValue)}ngAfterViewInit(){var t;this.value&&(null===(t=this.select)||void 0===t||t.writeValue(this.value),this.isBlackTick=this.determineBlackTick(this.value.toString())),this.palette=this.colorPalette||this.colors.map(s=>({color:s})),this.initOverlayUtilities(),this.select.valueSelected.pipe((0,Qe.b)(s=>this.writeValue(s)),(0,Qe.b)(s=>this.onChange(s)),(0,le.R)(this.destroy$)).subscribe(s=>{s&&(this.isBlackTick=this.determineBlackTick(s.toString()))});const i=(0,d.gpG)(),n=this.cdkOverlay.position().flexibleConnectedTo(this.select.elRef.nativeElement).withPush(!1).withViewportMargin(0).withPositions([i["bottom-right"],i["bottom-left"],i["top-right"],i["top-left"]]);this.overlayConfig={maxWidth:this.cols?30*this.cols+20+"px":"260px",positionStrategy:n}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onChange(t){}_onTouched(){}writeValue(t){var i;this.value=t,null===(i=this.select)||void 0===i||i.writeValue(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this._onTouched=t}determineBlackTick(t){let i="#fff";return i=this.colorService.isHEX(t)?t:(0,g.ruO)(t)||this.colorService.RGBToHexRGBToHex(t)||this.colorService.colorKeywordsToHex(t),"#fff"===this.getContrastOnBgColor(i)}initOverlayUtilities(){const t=this.select.dropdown;this.selectResizeObserver=this.overlayUtilities.setPopupComponent(this.select.dropdown).getResizeObserver({updateSize:!1}),t.show$.pipe((0,le.R)(this.destroy$)).subscribe(()=>{this.overlayUtilities.syncWidth(),this.selectResizeObserver.observe(this.select.elRef.nativeElement)}),t.hide$.pipe((0,le.R)(this.destroy$)).subscribe(()=>{this.selectResizeObserver.unobserve(this.select.elRef.nativeElement)})}getContrastOnBgColor(t){return t?parseInt(t.replace("#",""),16)>8388607.5?"#fff":"#000":""}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(zi),e.Y36(Cr.aV))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-color-picker"]],viewQuery:function(t,i){if(1&t&&e.Gf(d.j_n,5),2&t){let n;e.iGM(n=e.CRH())&&(i.select=n.first)}},inputs:{colors:"colors",colorPalette:"colorPalette",cols:"cols"},features:[e._Bn([{provide:d.MDN,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:c.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},zi]),e.TTD],decls:5,vars:4,consts:[[1,"color-picker-select",3,"overlayConfig","syncWidth","displayValueTemplate"],[1,"color-picker-container"],["class","d-inline-flex flex-wrap box",4,"ngFor","ngForOf"],["colorSelectTemplate",""],[1,"d-inline-flex","flex-wrap","box"],[1,"w-100","h-100","reset-box-sizes",3,"value","displayValueContext"],["option",""],[1,"color-picker-option"],[1,"color-picker-option__color-box",3,"ngStyle"],["class","color-picker-option__glyph",3,"black-tick",4,"ngIf"],[1,"color-picker-option__glyph"],[1,"color-picker-input"],[1,"color-picker-input__box"],[1,"color-picker-input__color-box",3,"ngStyle"],[1,"color-picker-input__toggle"],["icon","caret-down"]],template:function(t,i){if(1&t&&(e.TgZ(0,"nui-select-v2",0)(1,"div",1),e.YNc(2,Ir,6,7,"div",2),e.qZA()(),e.YNc(3,vr,5,4,"ng-template",null,3,e.W1O)),2&t){const n=e.MAs(4);e.Q6J("overlayConfig",i.overlayConfig)("syncWidth",!1)("displayValueTemplate",n),e.xp6(2),e.Q6J("ngForOf",i.palette)}},directives:[d.j_n,r.sg,d.rLF,r.PC,r.O5,d.oJW],styles:[".box[_ngcontent-%COMP%]{width:30px;height:30px}.color-picker-container[_ngcontent-%COMP%]{padding:5px 10px}.color-picker-select[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;min-width:unset;cursor:pointer}.color-picker-input[_ngcontent-%COMP%]{display:flex}.color-picker-input__box[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.color-picker-input__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);width:17px;height:17px;flex-grow:1;margin:0 10px}.color-picker-input__toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);width:30px;height:30px}.color-picker-option[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.color-picker-option__color-box[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9);padding:1px 0 0 1px}.color-picker-option--selected[_ngcontent-%COMP%]{background-color:var(--nui-color-selected,rgba(0, 196, 210, .1))}.color-picker-option--selected[_ngcontent-%COMP%]:focus{outline:none}.color-picker-option__glyph[_ngcontent-%COMP%]{width:100%;height:100%;background-size:12px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMjAgMjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAgMjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS54dWktY2hlY2tib3gtZ2x5cGh7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDozO3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1saW5lY2FwOnJvdW5kO30KPC9zdHlsZT4KPHBvbHlsaW5lIGNsYXNzPSJ4dWktY2hlY2tib3gtZ2x5cGgiIHBvaW50cz0iMTcsNCA4LDE1IDMsOSAiLz4KPC9zdmc+);background-repeat:no-repeat}.color-picker-option__glyph.black-tick[_ngcontent-%COMP%]{filter:invert(1) grayscale(1) contrast(100)}"],changeDetection:0}),o})();var Bi=a(69155);let wt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-drop-area"]],decls:0,vars:0,template:function(t,i){},styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;border:3px solid;border-color:var(--nui-color-selected-contrast,#00c4d2);background-color:var(--nui-color-busy-default,rgba(0, 196, 210, .2))}"]}),o})();function Rr(o,l){}const Nr=function(){return["formReady"]};function Ar(o,l){if(1&o){const t=e.EpF();e.ynx(0)(1,1,2),e.NdJ("output",function(n){const p=e.CHM(t).$implicit;return e.oxw().onEvent(p.id,n)}),e.YNc(3,Rr,0,0,"ng-template",3),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk()()}if(2&o){const t=l.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties)("outputs",e.DdM(6,Nr)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}let _t=(()=>{class o extends Ee{constructor(t,i,n,s,p){super(t,i,n),this.formDirective=s,this.eventBus=p,this.elementClass=""}ngOnInit(){this.form=this.formDirective.form}ngOnChanges(t){super.ngOnChanges(t)}onEvent(t,i){"formReady"===i.id&&this.addFormGroup(t,i.payload)}addFormGroup(t,i){this.form.addControl(t,i)}getNodes(){return this.nodes}}return o.lateLoadKey="FormStackComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(se.p),e.Y36(d.mQy),e.Y36(c.sg),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-form-stack"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{nodes:"nodes"},features:[e._Bn([],[{provide:c.gN,useExisting:c.sg}]),e.qOj,e.TTD],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&e.YNc(0,Ar,4,7,"ng-container",0),2&t&&e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn)},directives:[r.sg,b.$,w.Pl],encapsulation:2}),o})();var pi=a(40801),yr=(a(1892),a(87686));a(29614);let Wi=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.formBuilder=i,this.logger=n,this.formReady=new e.vpe}ngOnChanges(t){var i,n;this.form||this.initForm(),this.contentFormatterProperties?Object.keys(this.contentFormatterProperties).forEach(s=>{var p,f;null===(f=null===(p=this.form)||void 0===p?void 0:p.get(s))||void 0===f||f.setValue(this.contentFormatterProperties[s])}):null===(n=null===(i=this.form)||void 0===i?void 0:i.get("currentMetric"))||void 0===n||n.patchValue(this.properMetric)}ngOnInit(){this.initForm()}initForm(){this.form=this.formBuilder.group({currentMetric:[this.properMetric,c.kI.required]}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}get currentMetric(){return this.form.get("currentMetric")}get properMetric(){var t,i,n,s;const p=null===(t=this.contentFormatterProperties)||void 0===t?void 0:t.currentMetric;return(null===(i=this.dsOutput)||void 0===i?void 0:i.result.find(D=>D.id===p))?p:null===(s=null===(n=this.dsOutput)||void 0===n?void 0:n.result[0])||void 0===s?void 0:s.id}addCustomFormControls(t){}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.sBO),e.LFG(c.qu),e.LFG(d.mQy))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function Mr(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",7),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}let ki=(()=>{class o extends Wi{constructor(t,i,n,s){super(t,i,n),this.pizzagnaService=s}}return o.lateLoadKey="DonutContentPercentageConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu),e.Y36(d.mQy),e.Y36(se.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-donut-content-configurator"]],features:[e.qOj],decls:7,vars:3,consts:function(){let l,t;return l=$localize`:␟447ffd4cbfd3d8c3ca8dd216c0a82ecadc24a7de␟4196232656388343089:Metrics`,t=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup"],[1,"mt-4"],["caption",l,1,"mb-3",3,"control"],["formControlName","currentMetric"],[3,"value",4,"ngFor","ngForOf"],["for","required"],t,[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nui-form-field",2)(3,"nui-select-v2",3),e.YNc(4,Mr,2,2,"nui-select-v2-option",4),e.qZA(),e.TgZ(5,"nui-validation-message",5),e.SDv(6,6),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("control",i.currentMetric),e.xp6(2),e.Q6J("ngForOf",null==i.dsOutput?null:i.dsOutput.result))},directives:[c.JL,c.sg,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,d.CfE],encapsulation:2}),o})();var Pr=a(10912),gi=a.n(Pr);let hi=(()=>{class o{constructor(t){this.changeDetector=t,this.destroy$=new te.x}ngOnChanges(t){var i;t.data&&(this.sum=gi()(this.data,n=>n.data[0])),t.properties&&(this.currentMetricData=(null===(i=this.data.find(n=>{var s;return n.id===(null===(s=this.properties)||void 0===s?void 0:s.currentMetric)}))||void 0===i?void 0:i.data[0])||this.data[0].data[0]),this.getProperContentValue()}ngOnInit(){this.chartAssist.chartAssistSubject.pipe((0,Qe.b)(t=>this.emphasizedSeriesData=this.data.find(i=>i.id===t.payload.seriesId)),(0,Qe.b)(()=>this.getProperContentValue()),(0,le.R)(this.destroy$)).subscribe()}getProperSeriesData(){var t;return this.emphasizedSeriesData?null===(t=this.emphasizedSeriesData)||void 0===t?void 0:t.data[0]:this.currentMetricData}getProperContentValue(){this.chartContent=(this.getProperSeriesData()/this.sum*100).toFixed(2)+"%"}}return o.lateLoadKey="DonutContentPercentageFormatterComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],inputs:{data:"data",chartAssist:"chartAssist",properties:"properties"},features:[e.TTD],decls:4,vars:1,consts:[[1,"nui-text-page"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"div",0),e._uU(3),e.qZA()(),e.BQk()),2&t&&(e.xp6(3),e.hij(" ",i.chartContent," "))},encapsulation:2}),o})();function Dr(o,l){if(1&o&&e._UZ(0,"nui-icon",5),2&o){const t=e.oxw();e.Q6J("icon",null==t.config?null:t.config.chartDonutContentIcon)}}function Fr(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(e.xi3(2,1,t.sum,"1.0-3"))}}function br(o,l){if(1&o&&e._uU(0),2&o){const t=e.oxw();e.Oqu(t.convertedValue)}}function xr(o,l){if(1&o&&(e.TgZ(0,"div",6),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.config?null:t.config.chartDonutContentLabel," ")}}let Zi=(()=>{class o{constructor(t,i){this.changeDetector=t,this.conversionThreshold=1e6,this.unitConversionPipe=new k(i)}ngOnChanges(){this.sum=gi()(this.data,t=>t.data[0]),this.convertedValue=this.unitConversionPipe.transform(this.sum)}}return o.lateLoadKey="DonutContentRawFormatterComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(d.CrH))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],inputs:{data:"data",config:"config"},features:[e.TTD],decls:7,vars:4,consts:[["iconSize","medium",3,"icon",4,"ngIf"],[1,"nui-text-page"],[4,"ngIf","ngIfElse"],["convertedValueDisplay",""],["class","nui-text-secondary",4,"ngIf"],["iconSize","medium",3,"icon"],[1,"nui-text-secondary"]],template:function(t,i){if(1&t&&(e.ynx(0),e.YNc(1,Dr,1,1,"nui-icon",0),e.TgZ(2,"div",1),e.YNc(3,Fr,3,4,"span",2),e.YNc(4,br,1,1,"ng-template",null,3,e.W1O),e.qZA(),e.YNc(6,xr,2,1,"div",4),e.BQk()),2&t){const n=e.MAs(5);e.xp6(1),e.Q6J("ngIf",null==i.config?null:i.config.chartDonutContentIcon),e.xp6(2),e.Q6J("ngIf",i.sum<i.conversionThreshold)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",null==i.config?null:i.config.chartDonutContentLabel)}},directives:[r.O5,d.oJW],pipes:[r.JJ],encapsulation:2}),o})(),mi=(()=>{class o{constructor(t){this.changeDetector=t}ngOnChanges(){this.sum=gi()(this.data,t=>t.data[0])}}return o.lateLoadKey="DonutContentSumFormatterComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],inputs:{data:"data"},features:[e.TTD],decls:3,vars:1,consts:[[1,"nui-text-page"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0),e._uU(2),e.qZA(),e.BQk()),2&t&&(e.xp6(2),e.Oqu(i.sum))},encapsulation:2}),o})();var fi=a(16134),$t=a(61621),Nt=a(14366);let Ti=(()=>{class o extends Nt.a{}return o.lateLoadKey="PercentageFormatterComponent",o.\u0275fac=function(){let l;return function(i){return(l||(l=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:1,template:function(t,i){1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t&&(e.xp6(1),e.hij(" ",null==i.data?null:i.data.value,"% "))},encapsulation:2}),o})();var Lr=a(51467),Gr=a.n(Lr),wr=a(73943),$r=a.n(wr);const Ur=[{power:1,prefix:"",label:""},{power:3,prefix:"k",label:"kilo"},{power:6,prefix:"M",label:"mega"},{power:9,prefix:"G",label:"giga"},{power:12,prefix:"T",label:"tera"},{power:15,prefix:"P",label:"peta"},{power:18,prefix:"E",label:"exa"},{power:21,prefix:"Z",label:"zetta"},{power:24,prefix:"Y",label:"yotta"}],zr=[{power:-24,prefix:"y",label:"yocto"},{power:-21,prefix:"z",label:"zepto"},{power:-18,prefix:"a",label:"atto"},{power:-15,prefix:"f",label:"femto"},{power:-12,prefix:"p",label:"pico"},{power:-9,prefix:"n",label:"nano"},{power:-6,prefix:"\xb5",label:"micro"},{power:-3,prefix:"m",label:"milli"},{power:1,prefix:"",label:""}];let Ut=(()=>{class o{constructor(t){this.changeDetector=t,this.value="0"}ngOnChanges(t){if(t.data){const{value:i}=t.data.currentValue;i&&this.processSiUnitsValue($r()(i))}}processSiUnitsValue(t){const i=this.getTransformPrefix(Gr()(t));this.value=this.getTransformedValue(t,i),this.modifier=null==i?void 0:i.prefix}getTransformedValue(t,i){if(!i)return t;const n=1!==i.power?+t*Math.pow(10,-i.power):+t;return(Math.round(10*n)/10).toString()}getTransformPrefix(t){var i;const n=Math.abs(t);if(Number.isNaN(n))return;const s=(null===(i=this.data)||void 0===i?void 0:i.shiftPoint)||o.SHIFT_POINT_DEFAULT;if(n>=1){const D=Math.round(n).toString().length;return[...Ur].reverse().find(Q=>D>=Q.power+1+s)}{const p=Vi(n);return[...zr].reverse().find(D=>p<=Math.abs(D.power)+1+s)}}}return o.lateLoadKey="SiUnitsFormatterComponent",o.SHIFT_POINT_DEFAULT=0,o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],hostVars:2,hostBindings:function(t,i){2&t&&e.Tol(i.elementClass)},inputs:{data:"data",elementClass:"elementClass"},features:[e.TTD],decls:6,vars:2,consts:[[1,"d-flex","flex-nowrap"]],template:function(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.BQk()),2&t&&(e.xp6(3),e.Oqu(i.value),e.xp6(2),e.hij(" ",i.modifier,""))},encapsulation:2}),o})();function Vi(o,l=1){const t=Math.abs(o);if(t>=1)return 1;const i=l+1;return t*Math.pow(10,i)>1?i:Vi(t,i)}function Br(o,l){if(1&o&&(e.TgZ(0,"div")(1,"a",6),e.NdJ("click",function(i){return i.stopPropagation()}),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("href",null==t.data?null:t.data.link,e.LSH)("title",t.data.name),e.xp6(1),e.hij(" ",t.data.name," ")}}function Wr(o,l){if(1&o&&(e.TgZ(0,"span",7),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.Udp("font-size",11,"px"),e.xp6(1),e.Oqu(t.data.name)}}function kr(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"div",1)(2,"span",2),e._uU(3),e.qZA(),e._UZ(4,"nui-icon",3),e.YNc(5,Br,3,3,"div",4),e.YNc(6,Wr,2,3,"ng-template",null,5,e.W1O),e.qZA(),e.BQk()),2&o){const t=e.MAs(7),i=e.oxw();e.xp6(3),e.Oqu(i.data.data),e.xp6(1),e.Q6J("icon",i.data.icon),e.xp6(1),e.Q6J("ngIf",null==i.data?null:i.data.link)("ngIfElse",t)}}let Ci=(()=>{class o{constructor(t){this.changeDetector=t,this.isValid=!1}ngOnChanges(){this.isValid=!!(this.data&&this.data.icon&&this.data.name&&this.data.data)}}return o.lateLoadKey="StatusWithIconFormatterComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],inputs:{data:"data"},features:[e.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nui-text-label","align-items-center","status-icon-formatter"],[1,"nui-text-ellipsis","text-right","pl-3"],[1,"nui-icon","nui-icon-line-height","mx-2",3,"icon"],[4,"ngIf","ngIfElse"],["noLink",""],["rel","noopener noreferrer",1,"nui-text-link-small","nui-text-ellipsis","link",3,"href","title","click"],[1,"nui-text-ellipsis"]],template:function(t,i){1&t&&e.YNc(0,kr,8,4,"ng-container",0),2&t&&e.Q6J("ngIf",i.isValid)},directives:[r.O5,d.oJW],styles:[".status-icon-formatter[_ngcontent-%COMP%]{display:grid;grid-template-columns:50px auto minmax(114px,1fr)}"]}),o})();var Ji=a(85822),Oi=a(68675);let Ii=(()=>{class o{constructor(){this.defaultHeaderPrefix=$localize`Value`}transform(t,i,n=this.defaultHeaderPrefix){return`${n} ${i+1}${t?" - ":""}${t||""}`}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"nuiWidgetConfiguratorSectionHeader",type:o,pure:!0}),o})();var Zr=a(21503),Yi=a.n(Zr);let vi=(()=>{class o{transform(t,i,n){if(!z()(t)){if(Yi()(t)){if(!i)return t;const p=[...t];return p.push(i),p}return Object.assign({},t,{[void 0===n?"undefined":n]:i})}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"nuiAddData",type:o,pure:!0}),o})();function Vr(o,l){if(1&o&&e._UZ(0,"nui-drop-area",9),2&o){const t=e.oxw(2);e.Udp("height",t.height,"px")}}function Jr(o,l){1&o&&(e.ynx(0),e.TgZ(1,"div",12),e._UZ(2,"nui-icon",13),e.qZA(),e.BQk())}function Yr(o,l){if(1&o&&(e.YNc(0,Jr,3,0,"ng-container",10),e.TgZ(1,"span",11),e.ALo(2,"nuiWidgetConfiguratorSectionHeader"),e._uU(3),e.ALo(4,"nuiWidgetConfiguratorSectionHeader"),e.qZA()),2&o){const t=e.oxw(),i=t.$implicit,n=t.index,s=e.oxw();e.Q6J("ngIf",s.moveButtons),e.xp6(1),e.Q6J("title",e.Dn7(2,3,s.headerMap.get(i.id),n,s.headerPrefix)),e.xp6(2),e.hij(" ",e.Dn7(4,7,s.headerMap.get(i.id),n,s.headerPrefix)," ")}}function Hr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),s=n.$implicit,p=n.index,f=e.oxw();return f.removeItem(f.getItemForNode(s),p)}),e.qZA()()}if(2&o){const t=e.oxw().index;e.xp6(1),e.MGl("id","kpi-widget-remove-btn-",t,"")}}function Kr(o,l){}const Qr=function(){return["formReady","formDestroy"]};function Xr(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("cdkDragStarted",function(n){return e.CHM(t),e.oxw().cdkDragStarted(n)}),e.YNc(1,Vr,1,2,"nui-drop-area",3),e.YNc(2,Yr,5,11,"ng-template",null,4,e.W1O),e.YNc(4,Hr,2,1,"ng-template",null,5,e.W1O),e.ynx(6,6,7),e.NdJ("output",function(n){const p=e.CHM(t).$implicit;return e.oxw().onEvent(p.id,n)}),e.ALo(8,"nuiAddData"),e.ALo(9,"nuiAddData"),e.YNc(10,Kr,0,0,"ng-template",8),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(7).attached(n)}),e.BQk(),e.qZA()}if(2&o){const t=l.$implicit,i=e.MAs(3),n=e.MAs(5),s=e.MAs(7);e.xp6(6),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",e.Dn7(8,6,e.Dn7(9,10,t.properties,i,"headerTextTemplate"),n,"headerButtonsTemplate"))("outputs",e.DdM(14,Qr)),e.xp6(4),e.Q6J("cdkPortalOutlet",s.portal)}}let zt=(()=>{class o extends Ee{constructor(t,i,n,s){super(t,i,n),this.formBuilder=s,this.items=[],this.moveButtons=!0,this.formReady=new e.vpe,this.itemsChange=new e.vpe,this.headerMap=new Map}getItemForNode(t){return this.items.find(i=>i.id===t.id)}getNodes(){return this.nodes}ngOnInit(){this.form=this.formBuilder.array([],c.kI.required),this.formReady.emit(this.form)}onEvent(t,i){const n=this.items.find(p=>p.id===t),s=this.items.findIndex(p=>p.id===t);"formReady"===i.id&&n&&this.onFormReady(n,i.payload,s),"formDestroy"===i.id&&this.onFormDestroy(i.payload)}onFormReady(t,i,n){const s=this.formBuilder.group({id:[t.id],componentType:[t.componentType],properties:i});this.form.setControl(n,s),setTimeout(()=>{var p;const f=null===(p=i.get(`${t.id}/description`))||void 0===p?void 0:p.get("label");null==f||f.valueChanges.pipe((0,Oi.O)(f.value),(0,le.R)(this.destroyed$)).subscribe(D=>{this.headerMap.set(t.id,D||""),this.changeDetector.markForCheck()})})}onFormDestroy(t){setTimeout(()=>{let i=0;for(;i<this.form.length&&this.form.at(i).get("properties")!==t;i++);this.form.removeAt(i),this.form.patchValue(this.form.value,{emitEvent:!0})})}trackBy(t,i){return i.id}removeItem(t,i){if(!t)throw new Error("Unable to remove undefined item from pizzagna");this.itemsChange.emit(this.items.filter(n=>n!==t)),this.items.splice(i,1),this.nodes.splice(i,1),this.pizzagnaService.removeComponents(t.id)}moveItem(t,i){const n=[...this.items],s=n.splice(t,1);n.splice(i,0,...s);const p=[...this.nodes],f=p.splice(t,1);p.splice(i,0,...f),this.nodes=[...p],this.moveFormValues(t,i),this.itemsChange.emit(n),setTimeout(()=>{this.form.setValue(this.form.value,{emitEvent:!0})})}drop(t){this.moveItem(t.previousIndex,t.currentIndex)}cdkDragStarted(t){this.height=t.source.element.nativeElement.offsetHeight}moveFormValues(t,i){const n=this.form.at(t);this.form.removeAt(t),this.form.insert(i,n)}ngOnDestroy(){super.ngOnDestroy()}}return o.lateLoadKey="ItemsDynamicComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(se.p),e.Y36(d.mQy),e.Y36(c.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-items-dynamic"]],inputs:{items:"items",moveButtons:"moveButtons",nodes:"nodes",headerPrefix:"headerPrefix"},outputs:{formReady:"formReady",itemsChange:"itemsChange"},features:[e.qOj],decls:2,vars:3,consts:[["cdkDropList","",1,"nui-items-dynamic",3,"formGroup","cdkDropListDropped"],["cdkDrag","","class","nui-items-dynamic__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"nui-items-dynamic__node-item",3,"cdkDragStarted"],["class","nui-items-dynamic__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[1,"nui-items-dynamic__drop-area"],[4,"ngIf"],[1,"nui-items-dynamic__header-text",3,"title"],["cdkDragHandle","",1,"nui-items-dynamic__drag-handler"],["icon","drag"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),e.YNc(1,Xr,11,15,"div",1),e.qZA()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackBy))},directives:[Ve.Wj,c.JL,c.sg,r.sg,Ve.Zt,Ve.Hk,wt,r.O5,Ve.Bh,d.oJW,d.r0F,b.$,w.Pl],pipes:[Ii,vi],styles:[".nui-items-dynamic__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-items-dynamic__drag-handler{cursor:move;display:flex}.nui-items-dynamic__node-item{background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-items-dynamic__node-item .widget-configurator-section{margin:0}.nui-items-dynamic__drop-area{margin:15px}.kpi-indicators-configuration__color-preview{width:16px;height:16px;margin-right:15px;border-radius:3px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),o})(),Hi=(()=>{class o{}return o.lateLoadKey="PreviewPlaceholderComponent",o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-preview-placeholder"]],decls:6,vars:0,consts:function(){let l,t;return l=$localize`:␟2dddb51ea396d77c6eae240cec72bcac05cbd28b␟7484658843094717966:This is a preview of your widget`,t=$localize`:␟fd2e41589bd70eddf4486b814980d2891ec182f9␟3997823842478388980: As you make configuration changes, this area will update to match. To get started, select a widget type on the configuration panel.
`,[l,t]},template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"b"),e.SDv(2,0),e.qZA(),e._uU(3,"."),e.qZA(),e.TgZ(4,"div"),e.SDv(5,1),e.qZA())},styles:["[_nghost-%COMP%]{max-width:300px;padding:0 10px;margin:auto}"]}),o})();var jr=a(90733),qr=a.n(jr),es=a(45122),Ki=a(61842),Qi=a(10628);function ts(o,l){}const is=function(){return["widgetSelected"]};function os(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",6),e.ynx(1,7,8),e.NdJ("output",function(n){return e.CHM(t),e.oxw().onSelect(n.payload)}),e.YNc(3,ts,0,0,"ng-template",9),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk(),e.qZA()}if(2&o){const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("componentType",i.cloneSelectionComponentType)("outputs",e.DdM(3,is)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function ns(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"nui-pizzagna",11,12),e.NdJ("pizzagnaChange",function(n){return e.CHM(t),e.oxw().formPizzagna=n}),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("pizzagna",t.formPizzagna)}}let Xi=(()=>{class o{constructor(t,i,n,s,p){this.changeDetector=t,this.configurator=i,this.previewService=n,this.formBuilder=s,this.widgetTypesService=p,this.navigationControl=new Di.X({busyState:{busy:!1},allowStepChange:!0}),this.destroy$=new te.x,this.resetForm$=new te.x,this.busy=!1,this.isFormDisplayed=!1,this.resetForm()}ngOnInit(){this.previewService.previewChanged.pipe((0,le.R)(this.destroy$)).subscribe(t=>{this.onPreviewPizzagnaUpdate(t)}),this.configurator.submitError.pipe((0,le.R)(this.destroy$)).subscribe(()=>{this.toggleBusy()})}ngAfterViewInit(){this.changeDetector.markForCheck()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.resetForm$.complete()}onPreviewPizzagnaUpdate(t){var i;if(!this.isFormDisplayed)return;const n=Object.assign(Object.assign({},this.configurator.previewWidget),{pizzagna:Object.assign(Object.assign({},null===(i=this.configurator.previewWidget)||void 0===i?void 0:i.pizzagna),{[h.xW.Configuration]:t})});this.configurator.updateWidget(n)}canFinish(){var t,i,n,s;return!!(null===(i=null===(t=this.widgetTemplate)||void 0===t?void 0:t.pizzagna)||void 0===i?void 0:i.configuration)&&!(null===(s=null===(n=this.widgetTemplate)||void 0===n?void 0:n.metadata)||void 0===s?void 0:s.needsConfiguration)}onFinish(){if(this.form.invalid)return this.form.markAllAsTouched(),this.form.patchValue(this.form.value),void this.form.updateValueAndValidity({onlySelf:!1});this.toggleBusy(),this.configurator.formSubmit()}onCancel(){this.configurator.formCancel()}onStepNavigated(t){this.isFormDisplayed=1===t.currentStepIndex,0===t.currentStepIndex&&1===t.previousStepIndex?(this.formPizzagna=void 0,this.resetForm(),this.onSelect(this.widgetTemplate)):1===t.currentStepIndex&&(this.formPizzagna=this.widgetTypesService.getWidgetType(this.widgetTemplate.type,this.widgetTemplate.version).configurator,this.previewService.preview=this.widgetTemplate.pizzagna[h.xW.Configuration])}onSelect(t){var i;this.widgetTemplate=t;const n=Object.assign(Object.assign({},t),{id:(null===(i=this.configurator.previewWidget)||void 0===i?void 0:i.id)||null});this.configurator.updateWidget(null),setTimeout(()=>{this.configurator.updateWidget(qr()(n))})}toggleBusy(){this.busy=!this.busy,this.navigationControl.next({busyState:{busy:this.busy},allowStepChange:!this.busy})}resetForm(){this.resetForm$.next(),this.form=this.formBuilder.group({}),this.form.statusChanges.pipe((0,le.R)(this.resetForm$),(0,le.R)(this.destroy$)).subscribe(()=>{this.changeDetector.markForCheck()})}}return o.lateLoadKey="WidgetClonerComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Bi.n),e.Y36(es.m),e.Y36(c.qu),e.Y36(J.x))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-cloner"]],hostAttrs:[1,"d-flex","flex-column","h-100"],inputs:{formPizzagna:"formPizzagna",cloneSelectionComponentType:"cloneSelectionComponentType"},decls:8,vars:7,consts:function(){let l,t,i;return l=$localize`:␟a638e97aa8422948b3e628089bbc9e0cd89e0087␟696117927395958397:Creating Widget`,t=$localize`:␟1af9862ac515933a9a72e92970c3e92bda63f6e8␟8076137290276236439:Create Widget`,i=$localize`:␟072d4d4ec83a5a97345a1c13b90c213b47326d09␟6673660887182833564:Customize`,[["configuratorTitle",l,3,"disableCloseButton","close"],["finishText",t,3,"hideHeader","canProceed","canFinish","navigationControl","finish","cancel","stepNavigated"],["nextText",i,3,"stepTemplate"],[3,"stepTemplate"],["step1",""],["step2",""],[1,"p-4","h-100"],["nuiComponentPortal","",3,"componentType","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"formGroup"],[3,"pizzagna","pizzagnaChange"],["formPizzagnaComponent",""]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-configurator-heading",0),e.NdJ("close",function(){return i.onCancel()}),e.qZA(),e.TgZ(1,"nui-dashwiz",1),e.NdJ("finish",function(){return i.onFinish()})("cancel",function(){return i.onCancel()})("stepNavigated",function(s){return i.onStepNavigated(s)}),e._UZ(2,"nui-dashwiz-step",2)(3,"nui-dashwiz-step",3),e.qZA(),e.YNc(4,os,4,4,"ng-template",null,4,e.W1O),e.YNc(6,ns,3,2,"ng-template",null,5,e.W1O)),2&t){const n=e.MAs(5),s=e.MAs(7);e.Q6J("disableCloseButton",i.busy),e.xp6(1),e.Q6J("hideHeader",!0)("canProceed",!!i.widgetTemplate)("canFinish",i.canFinish())("navigationControl",i.navigationControl),e.xp6(1),e.Q6J("stepTemplate",n),e.xp6(1),e.Q6J("stepTemplate",s)}},directives:[Ji.Q,Ki.i,Qi.u,b.$,w.Pl,c.JL,c.sg,yr.R],encapsulation:2,changeDetection:0}),o})();var rs=a(71536);function ss(o,l){1&o&&e.GkF(0)}function as(o,l){1&o&&e.GkF(0)}function ls(o,l){if(1&o&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.Q6J("title",t.headerText),e.xp6(1),e.hij(" ",t.headerText," ")}}function ds(o,l){}const cs=function(){return["formReady"]};function _s(o,l){if(1&o){const t=e.EpF();e.ynx(0)(1,6,7),e.NdJ("output",function(n){const p=e.CHM(t).$implicit;return e.oxw().onEvent(p.id,n)}),e.YNc(3,ds,0,0,"ng-template",8),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(2).attached(n)}),e.BQk()()}if(2&o){const t=l.$implicit,i=e.MAs(2);e.xp6(1),e.Q6J("componentId",t.id)("componentType",t.componentType)("providers",t.providers)("properties",t.properties)("outputs",e.DdM(6,cs)),e.xp6(2),e.Q6J("cdkPortalOutlet",i.portal)}}const us=[[["","headerText",""]],[["","headerButtons",""]],"*"],ps=["[headerText]","[headerButtons]","*"];let ze=(()=>{class o extends Ee{constructor(t,i,n,s){super(t,i,n),this.formBuilder=s,this.nodes=[],this.headerText="",this.formReady=new e.vpe,this.formDestroy=new e.vpe}getNodes(){return this.nodes}ngOnInit(){this.form=this.formBuilder.group({})}onEvent(t,i){"formReady"===i.id&&this.addFormGroup(t,i.payload),Object.keys(this.form.controls).length===this.getNodes().length&&this.formReady.emit(this.form)}addFormGroup(t,i){this.form.addControl(t,i)}ngOnDestroy(){this.formDestroy.emit(this.form),super.ngOnDestroy()}}return o.lateLoadKey="WidgetConfiguratorSectionComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(se.p),e.Y36(d.mQy),e.Y36(c.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-widget-configurator-section"]],hostAttrs:[1,"nui-widget-configurator-section"],inputs:{headerTextTemplate:"headerTextTemplate",headerButtonsTemplate:"headerButtonsTemplate",nodes:"nodes",headerText:"headerText"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.qOj],ngContentSelectors:ps,decls:9,vars:5,consts:[[1,"widget-configurator-section"],[1,"widget-configurator-section__header","d-flex","justify-content-between","align-items-center"],[4,"ngTemplateOutlet"],["headerText","","class","widget-configurator-section__header-text",3,"title",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["headerText","",1,"widget-configurator-section__header-text",3,"title"],["nuiComponentPortal","",3,"componentId","componentType","providers","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]],template:function(t,i){1&t&&(e.F$t(us),e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,ss,1,0,"ng-container",2),e.YNc(3,as,1,0,"ng-container",2),e.YNc(4,ls,2,2,"div",3),e.Hsn(5),e.Hsn(6,1),e.qZA(),e.YNc(7,_s,4,7,"ng-container",4),e.Hsn(8,2),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngTemplateOutlet",i.headerTextTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",i.headerButtonsTemplate),e.xp6(1),e.Q6J("ngIf",i.headerText),e.xp6(3),e.Q6J("ngForOf",i.nodeConfigs)("ngForTrackBy",i.trackByFn))},directives:[r.tP,r.O5,r.sg,b.$,w.Pl],styles:[".widget-configurator-section{margin:15px;border-radius:3px;border:1px solid;border-color:var(--nui-color-line-default,#d9d9d9)}.widget-configurator-section__header{padding:15px 5px 15px 15px;height:40px;font-size:16px;font-weight:600;background-color:var(--nui-color-bg-table_header,#f0f0f0);color:var(--nui-color-text-secondary,rgba(17, 17, 17, .6))}.widget-configurator-section__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),o})();var Me=a(19837),gs=a(64406),hs=a(21617);const fs=[$localize`Blue`,$localize`Blue Light`,$localize`Blue Dark`,$localize`Pink`,$localize`Pink Light`,$localize`Pink Dark`,$localize`Sea Green`,$localize`Sea Green Light`,$localize`Sea Green Dark`,$localize`Violet`,$localize`Violet Light`,$localize`Violet Dark`,$localize`Lime Green`,$localize`Lime Green Light`,$localize`Lime Green Dark`,$localize`Orange`,$localize`Orange Light`,$localize`Orange Dark`,$localize`Ultramarine`,$localize`Ultramarine Light`,$localize`Ultramarine Dark`,$localize`Bordeaux`,$localize`Bordeaux Light`,$localize`Bordeaux Dark`,$localize`Ochroid`,$localize`Ochroid Light`,$localize`Ochroid Dark`,$localize`Anthracite`,$localize`Anthracite Light`,$localize`Anthracite Dark`],Ts=[$localize`Down`,$localize`Down Light`,$localize`Critical`,$localize`Critical Light`,$localize`Warning`,$localize`Warning Light`,$localize`Unknown`,$localize`Unknown Light`,$localize`Ok`,$localize`Ok Light`,$localize`Info`,$localize`Info Light`],ji=a.n(hs)()([...g.wlb,...g.Sj$],[...fs,...Ts]),Ei="var(--nui-color-bg-secondary)",Si=[...g.wlb,...g.Sj$].map(o=>({color:o,label:ji[o]}));var Pe=a(16193),be=a(15838);function Cs(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",27),e._uU(1),e.qZA()),2&o){const t=l.$implicit,i=e.oxw(2);e.Q6J("value",t.key),e.xp6(1),e.hij(" ",i.getLabel(t.key)," ")}}function Os(o,l){if(1&o&&e._UZ(0,"nui-drop-area"),2&o){const t=e.oxw(2);e.Udp("height",t.height,"px")}}function Is(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",14),e.NdJ("cdkDragStarted",function(n){return e.CHM(t),e.oxw().cdkDragStarted(n)}),e.TgZ(2,"div",15),e._UZ(3,"nui-icon",16),e.qZA(),e.TgZ(4,"div",17)(5,"nui-form-field",18)(6,"nui-select-v2",19),e.YNc(7,Cs,2,2,"nui-select-v2-option",20),e.ALo(8,"keyvalue"),e.qZA()(),e.TgZ(9,"nui-form-field",21),e._UZ(10,"nui-textbox",22),e.qZA(),e.TgZ(11,"nui-form-field",23),e._UZ(12,"nui-color-picker",24),e.qZA()(),e.TgZ(13,"button",25),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().removeRule(s)}),e.qZA(),e.YNc(14,Os,1,2,"nui-drop-area",26),e.qZA(),e.BQk()}if(2&o){const t=l.$implicit,i=e.oxw();e.xp6(1),e.Q6J("formGroup",t),e.xp6(4),e.Q6J("control",t.get("comparisonType")),e.xp6(1),e.Q6J("formControl",t.get("comparisonType")),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,7,i.availableComparators)),e.xp6(2),e.Q6J("control",t.get("value")),e.xp6(2),e.Q6J("control",t.get("color")),e.xp6(1),e.Q6J("colorPalette",i.palette)}}let qi=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.formBuilder=i,this.formReady=new e.vpe,this.destroy$=new te.x,this.availableComparators=n.getComparators()}ngOnInit(){var t;this.palette=[{color:Ei,label:$localize`Default color`}].concat(this.backgroundColors),this.formLocal=this.initDefaultRulesGroup(),this.form=this.formBuilder.group({rules:[[]]}),null===(t=this.formLocal.get("rules"))||void 0===t||t.value.valueChanges.pipe((0,Qe.b)(i=>{var n;return null===(n=this.form.get("rules"))||void 0===n?void 0:n.patchValue([...i])}),(0,le.R)(this.destroy$)).subscribe(),this.formReady.emit(this.form)}ngOnChanges(t){var i,n;t.rules&&((null===(n=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===n?void 0:n.value).setValue([]),this.rules&&Yi()(this.rules)&&this.rules.forEach(s=>{var p;(null===(p=this.formLocal.get("rules"))||void 0===p?void 0:p.value).push(this.formBuilder.group({comparisonType:[s.comparisonType,[c.kI.required]],value:[s.value,[c.kI.required]],color:[s.color]}))}))}getColorRulesSubtitle(){var t,i,n,s;return 0===(null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).controls.length?$localize`No color rules`:$localize`${(null===(s=null===(n=this.formLocal)||void 0===n?void 0:n.get("rules"))||void 0===s?void 0:s.value).controls.length} color rules`}getLabel(t){var i;return(null===(i=this.availableComparators[t])||void 0===i?void 0:i.label)||"Custom Comparator"}removeRule(t){var i,n;(null===(n=null===(i=this.formLocal)||void 0===i?void 0:i.get("rules"))||void 0===n?void 0:n.value).removeAt(t)}addRule(){var t,i;(null===(i=null===(t=this.formLocal)||void 0===t?void 0:t.get("rules"))||void 0===i?void 0:i.value).push(this.formBuilder.group({comparisonType:[">",[c.kI.required]],value:[0,[c.kI.required]],color:[Ei]}))}drop(t){this.move(t.currentIndex,t.previousIndex)}cdkDragStarted(t){this.height=t.source.element.nativeElement.offsetHeight}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initDefaultRulesGroup(){return this.formBuilder.group({rules:[this.formBuilder.array([],c.kI.required)]})}move(t,i){var n,s;const p=null===(s=null===(n=this.formLocal)||void 0===n?void 0:n.get("rules"))||void 0===s?void 0:s.value,f=t>i?1:-1;if(!p)return;const D=p.at(i);for(let $=i;$*f<t*f;$+=f){const Q=p.at($+f);p.setControl($,Q)}p.setControl(t,D)}}return o.lateLoadKey="BackgroundColorRulesConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu),e.Y36(me.Z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-background-color-rules-configuration"]],inputs:{rules:"rules",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:15,consts:function(){let l,t,i;return l=$localize`:␟3b53b67118a64c409177ae5a41f5978d0e5a95bd␟4898023314284497772:Background color rules`,t=$localize`:␟9c8318d49f867d23436872f260ebf9263e9d0120␟2303161252907317626: Add new rule `,i=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"kpi-color-rules-configuration__accordion-content"],[1,"mb-4"],[1,"mb-3"],["cdkDropList","",3,"cdkDropListDropped"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],t,["cdkDrag","",1,"kpi-color-rule","d-flex","pt-3",3,"formGroup","cdkDragStarted"],[1,"kpi-color-rule__control","justify-content-center","d-flex"],["icon","drag","cdkDragHandle","",1,"kpi-color-rule__drag","align-items-center"],[1,"d-flex","flex-grow-1","flex-wrap"],[1,"mr-3","mb-3","flex-grow-1",3,"control"],["placeholder",i,2,"min-width","220px",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"mr-3","mb-3",2,"max-width","100px",3,"control"],["formControlName","value"],[1,"mr-3","mb-3",3,"control"],["formControlName","color",3,"colorPalette"],["nui-button","","icon","delete","displayStyle","action","type","button",1,"kpi-color-rule__control",3,"click"],[3,"height",4,"cdkDragPlaceholder"],[3,"value"]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"p",9),e._uU(15," We can automatically change the background color when the value meets certain conditions. "),e.qZA(),e.TgZ(16,"div",10),e.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),e.YNc(17,Is,15,9,"ng-container",11),e.qZA(),e.TgZ(18,"button",12),e.NdJ("click",function(){return i.addRule()}),e.SDv(19,13),e.qZA()()()()),2&t){let n;e.Q6J("formGroup",i.formLocal)("state",e.lcZ(1,6,e.lcZ(2,8,i.formLocal))),e.xp6(4),e.Q6J("icon",e.lcZ(5,10,e.xi3(6,12,i.formLocal,"color"))),e.xp6(6),e.Q6J("title",i.getColorRulesSubtitle()),e.xp6(1),e.hij(" ",i.getColorRulesSubtitle()," "),e.xp6(6),e.Q6J("ngForOf",null==(n=i.formLocal.get("rules"))?null:n.value.controls)}},directives:[Me.J,c.JL,c.sg,d.oJW,Ve.Wj,r.sg,Ve.Zt,Ve.Bh,d.hgI,d.j_n,c.JJ,c.oH,d.rLF,d.XHW,c.u,ui,d.r0F,Ve.Hk,wt],pipes:[r.Ov,Pe.F,be.d,r.Nd],styles:[".kpi-color-rules-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-color-rules-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-color-rules-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-color-rules-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:10px}.kpi-color-rules-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}.kpi-color-rule[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-content,#fff)}.kpi-color-rule__drag[_ngcontent-%COMP%]{cursor:move}.kpi-color-rule__control[_ngcontent-%COMP%]{min-width:30px;height:30px}"],changeDetection:0}),o})();var we=a(81466),Es=a(34235),Bt=a.n(Es);function Ss(o,l){1&o&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,3),e.qZA()()),2&o&&e.Q6J("allowDismiss",!1)}function Rs(o,l){if(1&o&&(e.TgZ(0,"nui-message",4)(1,"b"),e.SDv(2,5),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.Q6J("allowDismiss",!1),e.xp6(3),e.hij(" ",t.dataSourceError.message||t.dataSourceError.type," ")}}let Ot=(()=>{class o{constructor(t){this.changeDetector=t,this.errorState=new e.vpe,this.onDestroy$=new te.x,this.dataSourceClear$=new te.x}ngOnChanges(t){t.dataSource&&this.onDataSourceChanged()}onDataSourceChanged(){var t,i,n;this.dataSourceClear$.next(),null===(i=null===(t=this.dataSource)||void 0===t?void 0:t.busy)||void 0===i||i.pipe((0,le.R)(this.dataSourceClear$)).subscribe(s=>{this.busy=s,this.changeDetector.markForCheck()}),null===(n=this.dataSource)||void 0===n||n.outputsSubject.pipe((0,le.R)(this.dataSourceClear$)).subscribe(s=>{this.data=Bt()(null==s?void 0:s.result)?s:null==s?void 0:s.result,this.dataSourceError=null==s?void 0:s.error,this.errorState.emit(!!this.dataSourceError),this.changeDetector.markForCheck()})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete(),this.dataSourceClear$.next(),this.dataSourceClear$.complete()}}return o.lateLoadKey="DataSourceErrorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-data-source-error"]],inputs:{dataSource:"dataSource"},outputs:{errorState:"errorState"},features:[e.TTD],decls:3,vars:2,consts:function(){let l,t;return l=$localize`:␟7471accb59033b8bee2f7d6907d8deefcfe7d5de␟8643306703234832815:Select a data source`,t=$localize`:␟c399afe21627dcfed1a9865c0e084fac997896c2␟4016661485141937765:Something went wrong with the data source: `,[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],l,["type","critical",1,"mt-4","d-block",3,"allowDismiss"],t]},template:function(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,Ss,3,1,"nui-message",0),e.YNc(2,Rs,4,2,"nui-message",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!i.dataSource),e.xp6(1),e.Q6J("ngIf",i.dataSourceError))},directives:[r.O5,d.qqZ],encapsulation:2,changeDetection:0}),o})();var We=a(32148);function Ns(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("title",null==t?null:t.label)("value",t),e.xp6(1),e.hij(" ",t.label," ")}}function As(o,l){}const ys=function(){return["errorState"]},Ms=function(o){return{dataSource:o}};let eo=(()=>{class o{constructor(t,i,n,s,p,f,D){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.providerRegistryService=s,this.eventBus=p,this.injector=f,this.logger=D,this.dataSourceProviders=[],this.errorComponent=Ot.lateLoadKey,this.formReady=new e.vpe,this.hasDataSourceError=!1,this.dataFieldIds=new te.x}ngOnInit(){var t;this.form=this.formBuilder.group({providerId:[this.providerId||"",[c.kI.required]],properties:[this.properties||{}],dataSource:[null,[c.kI.required]]}),this.form.setValidators([()=>this.hasDataSourceError?{dataSourceError:!0}:null]),null===(t=this.form.get("dataSource"))||void 0===t||t.valueChanges.subscribe(i=>{var n,s;null===(n=this.form.get("providerId"))||void 0===n||n.setValue(null==i?void 0:i.providerId),(null==i?void 0:i.properties)&&(null===(s=this.form.get("properties"))||void 0===s||s.setValue(null==i?void 0:i.properties))}),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,p,f,D,$,Q,X;if(t.providerId&&!t.providerId.isFirstChange()||t.properties&&!t.properties.isFirstChange()){const ce=null===(i=t.providerId)||void 0===i?void 0:i.previousValue,Te=null===(n=t.properties)||void 0===n?void 0:n.previousValue;if(ce!==this.providerId||Te!==this.properties){const _e=this.dataSourceProviders.find(xe=>{var ve,bt;return xe.providerId===this.providerId&&Ue()(null!==(ve=xe.properties)&&void 0!==ve?ve:{},null!==(bt=this.properties)&&void 0!==bt?bt:{})});_e?(null===(Q=null===($=this.form)||void 0===$?void 0:$.get("dataSource"))||void 0===Q||Q.setValue(_e),this.invokeDataSource(_e)):(null===(p=null===(s=this.form)||void 0===s?void 0:s.get("providerId"))||void 0===p||p.setValue(this.providerId),null===(D=null===(f=this.form)||void 0===f?void 0:f.get("properties"))||void 0===D||D.setValue(this.properties),this.invokeDataSource({properties:this.properties,providerId:this.providerId}))}}if(t.dataSourceProviders&&!t.dataSourceProviders.isFirstChange()&&1===this.dataSourceProviders.length){const ce=this.dataSourceProviders[0];null===(X=this.form.get("dataSource"))||void 0===X||X.setValue(ce),this.invokeDataSource(ce)}}ngAfterViewInit(){var t;if(this.dataSourceProviders&&1===this.dataSourceProviders.length){const i=this.dataSourceProviders[0];null===(t=this.form.get("dataSource"))||void 0===t||t.setValue(i),this.invokeDataSource(i)}}onDataSourceSelected(t){this.eventBus.next(we.ay,{}),this.invokeDataSource(t)}invokeDataSource(t){var i;if(!t.providerId)return;const n=this.providerRegistryService.getProvider(t.providerId);if(n){this.dataSource=this.providerRegistryService.getProviderInstance(n,this.injector),this.eventBus.next(we.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,jt.q)(1)).subscribe(p=>{this.eventBus.next(we.PF,{payload:p}),this.dataFieldIds.next(Object.keys(p.result||p))});const s=this.dataSource;(null==s?void 0:s.updateConfiguration)&&s.updateConfiguration(null!==(i=t.properties)&&void 0!==i?i:{}),setTimeout(()=>{this.dataSource.applyFilters()})}else this.logger.warn("No provider found for id:",t.providerId)}onErrorState(t){this.hasDataSourceError=t,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}return o.lateLoadKey="DataSourceConfigurationV2Component",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(We.p),e.Y36(c.qu),e.Y36(E.C),e.Y36(h.nY),e.Y36(e.zs3),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",properties:"properties",providerId:"providerId",errorComponent:"errorComponent"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:28,consts:function(){let l,t;return l=$localize`:␟1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0␟1107354728956440783:Data Source`,t=$localize`:␟87aabb92d16c162e46a9ef3703445351a3e41739␟6527825109146827187:Select data source`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],[3,"control"],["placeholder",t,"formControlName","dataSource",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-select-v2",9),e.NdJ("valueSelected",function(p){return i.onDataSourceSelected(p)}),e.ALo(15,"async"),e.YNc(16,Ns,2,3,"nui-select-v2-option",10),e.qZA()(),e.ynx(17,11,12),e.NdJ("output",function(p){return i.onErrorState(p.payload)}),e.YNc(19,As,0,0,"ng-template",13),e.NdJ("attached",function(p){return e.CHM(n),e.MAs(18).attached(p)}),e.BQk(),e.qZA()()}if(2&t){const n=e.MAs(18);let s,p,f;e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"database"))),e.xp6(6),e.Q6J("title",null==(s=i.form.get("dataSource"))||null==s.value?null:s.value.label),e.xp6(1),e.hij(" ",null==(p=i.form.get("dataSource"))||null==p.value?null:p.value.label," "),e.xp6(2),e.Q6J("control",i.form.get("dataSource")),e.xp6(1),e.Q6J("title",null==(f=i.form.get("dataSource"))||null==f.value?null:f.value.label)("popupViewportMargin",e.lcZ(15,23,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.dataSourceProviders),e.xp6(1),e.Q6J("componentId",i.errorComponent)("componentType",i.errorComponent)("outputs",e.DdM(25,ys))("properties",e.VKq(26,Ms,i.dataSource)),e.xp6(2),e.Q6J("cdkPortalOutlet",n.portal)}},directives:[Me.J,c.JL,c.sg,d.oJW,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,b.$,w.Pl],pipes:[r.Ov,Pe.F,be.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Ps(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("title",t)("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ds(o,l){}const Fs=function(){return["errorState"]},bs=function(o){return{dataSource:o}};let At=(()=>{class o{constructor(t,i,n,s,p,f,D){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.providerRegistryService=s,this.eventBus=p,this.injector=f,this.logger=D,this.dataSourceProviders=[],this.errorComponent=Ot.lateLoadKey,this.formReady=new e.vpe,this.hasDataSourceError=!1,this.dsOutput=new te.x,this.dataFieldIds=new te.x}ngOnInit(){this.form=this.formBuilder.group({providerId:[this.providerId||"",[c.kI.required]],properties:this.formBuilder.group(this.properties||{})}),this.form.setValidators([()=>this.hasDataSourceError?{dataSourceError:!0}:null]),this.formReady.emit(this.form)}ngOnChanges(t){var i;t.providerId&&!t.providerId.isFirstChange()&&t.providerId.previousValue!==this.providerId&&(null===(i=this.form.get("providerId"))||void 0===i||i.setValue(this.providerId),this.invokeDataSource(this.providerId))}onDataSourceChange(t){this.eventBus.next(we.ay,{}),this.invokeDataSource(t)}invokeDataSource(t){if(!t)return;const i=this.providerRegistryService.getProvider(t);i?(this.dataSource=this.providerRegistryService.getProviderInstance(i,this.injector),this.eventBus.next(we.gg,{payload:this.dataSource}),this.dataSource.outputsSubject.pipe((0,jt.q)(1)).subscribe(n=>{this.eventBus.next(we.PF,{payload:n}),this.dsOutput.next(n);const s=(null==n?void 0:n.result)||n;s&&this.dataFieldIds.next(Object.keys(s))}),setTimeout(()=>{this.dataSource.applyFilters()})):this.logger.warn("No provider found for id:",t)}onErrorState(t){this.hasDataSourceError=t,this.form.markAsTouched({onlySelf:!0}),this.form.updateValueAndValidity({emitEvent:!1}),this.changeDetector.detectChanges()}}return o.lateLoadKey="DataSourceConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(We.p),e.Y36(c.qu),e.Y36(E.C),e.Y36(h.nY),e.Y36(e.zs3),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-data-source-configuration"]],inputs:{dataSourceProviders:"dataSourceProviders",errorComponent:"errorComponent",properties:"properties",providerId:"providerId"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:28,consts:function(){let l,t,i;return l=$localize`:␟1b6bc6d5daaa6ec75d201690bb6f782f30bf98a0␟1107354728956440783:Data Source`,t=$localize`:␟7f3bce5049b2c517378a6624460b84d2da9ce332␟7245698475792706694:Select Data Source`,i=$localize`:␟18c18c5d61f92ef5c3caa37df00fc514fef3d90c␟4806513497858020797:Data Sources`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"datasource-configuration__accordion-content"],["caption",t,3,"control"],["placeholder",i,"formControlName","providerId",1,"datasource-configuration__accordion-content__datasource-input",3,"title","popupViewportMargin","valueSelected"],[3,"title","value",4,"ngFor","ngForOf"],["nuiComponentPortal","",3,"componentId","componentType","outputs","properties","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],[3,"title","value"]]},template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-select-v2",9),e.NdJ("valueSelected",function(p){return i.onDataSourceChange(p)}),e.ALo(15,"async"),e.YNc(16,Ps,2,3,"nui-select-v2-option",10),e.qZA()(),e.ynx(17,11,12),e.NdJ("output",function(p){return i.onErrorState(p.payload)}),e.YNc(19,Ds,0,0,"ng-template",13),e.NdJ("attached",function(p){return e.CHM(n),e.MAs(18).attached(p)}),e.BQk(),e.qZA()()}if(2&t){const n=e.MAs(18);let s,p,f;e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"database"))),e.xp6(6),e.Q6J("title",null==(s=i.form.get("providerId"))?null:s.value),e.xp6(1),e.hij(" ",null==(p=i.form.get("providerId"))?null:p.value," "),e.xp6(2),e.Q6J("control",i.form.get("providerId")),e.xp6(1),e.Q6J("title",null==(f=i.form.get("providerId"))?null:f.value)("popupViewportMargin",e.lcZ(15,23,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.dataSourceProviders),e.xp6(1),e.Q6J("componentId",i.errorComponent)("componentType",i.errorComponent)("outputs",e.DdM(25,Fs))("properties",e.VKq(26,bs,i.dataSource)),e.xp6(2),e.Q6J("cdkPortalOutlet",n.portal)}},directives:[Me.J,c.JL,c.sg,d.oJW,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,b.$,w.Pl],pipes:[r.Ov,Pe.F,be.d],styles:[".datasource-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function xs(o,l){1&o&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,3),e.qZA()()),2&o&&e.Q6J("allowDismiss",!1)}function Ls(o,l){1&o&&(e.TgZ(0,"nui-message",2)(1,"b"),e.SDv(2,4),e.qZA()()),2&o&&e.Q6J("allowDismiss",!1)}function Gs(o,l){if(1&o&&(e.TgZ(0,"nui-message",5)(1,"b"),e.SDv(2,6),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.Q6J("allowDismiss",!1),e.xp6(3),e.hij(" ",t.dataSourceError.message||t.dataSourceError.type," ")}}let to=(()=>{class o extends Ot{constructor(t){super(t),this.changeDetector=t}ngOnDestroy(){super.ngOnDestroy()}}return o.lateLoadKey="TableDataSourceErrorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-data-source-error"]],features:[e.qOj],decls:4,vars:3,consts:function(){let l,t,i;return l=$localize`:␟f4720e7c5bf93bfef522f919823f31793a4a09fb␟3836782658203534481:Data source needs to be configured`,t=$localize`:␟7471accb59033b8bee2f7d6907d8deefcfe7d5de␟8643306703234832815:Select a data source`,i=$localize`:␟c399afe21627dcfed1a9865c0e084fac997896c2␟4016661485141937765:Something went wrong with the data source: `,[["class","mt-4 d-block","type","info",3,"allowDismiss",4,"ngIf"],["class","mt-4 d-block","type","critical",3,"allowDismiss",4,"ngIf"],["type","info",1,"mt-4","d-block",3,"allowDismiss"],l,t,["type","critical",1,"mt-4","d-block",3,"allowDismiss"],i]},template:function(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,xs,3,1,"nui-message",0),e.YNc(2,Ls,3,1,"nui-message",0),e.YNc(3,Gs,4,2,"nui-message",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.dataSource&&!(null!=i.data&&i.data.dataFields.length)&&!i.dataSourceError&&!i.busy),e.xp6(1),e.Q6J("ngIf",!i.dataSource),e.xp6(1),e.Q6J("ngIf",i.dataSourceError))},directives:[r.O5,d.qqZ],encapsulation:2,changeDetection:0}),o})();function ws(o,l){}let Ri=(()=>{class o{constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.mode=M.URL,this.formReady=new e.vpe,this.destroy$=new te.x,this.form=this.formBuilder.group({mode:[this.mode],urlCustomContent:[""],htmlCustomContent:[""],customEmbeddedContent:[""]}),this.modes=[{value:M.URL,displayValue:$localize`Show the contents of a specific URL`},{value:M.HTML,displayValue:$localize`Show the exact HTML I supply below`}]}get urlCustomContent(){return this.form.get("urlCustomContent")}get htmlCustomContent(){return this.form.get("htmlCustomContent")}get modeValue(){return this.form.get("mode")}get customEmbeddedContentValue(){return this.form.get("customEmbeddedContent")}ngOnInit(){this.initializeForm(),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s;t.customEmbeddedContent&&(this.mode===M.URL?null===(i=this.urlCustomContent)||void 0===i||i.setValue(this.customEmbeddedContent):this.mode===M.HTML&&(null===(n=this.htmlCustomContent)||void 0===n||n.setValue(this.customEmbeddedContent))),t.mode&&(null===(s=this.modeValue)||void 0===s||s.setValue(t.mode.currentValue))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){var t,i,n;null===(t=this.modeValue)||void 0===t||t.valueChanges.pipe((0,le.R)(this.destroy$)).subscribe(s=>{var p,f,D,$,Q,X,ce,Te;s===M.URL?(null===(p=this.customEmbeddedContentValue)||void 0===p||p.setValue(null===(f=this.form.get("urlCustomContent"))||void 0===f?void 0:f.value),null===(D=this.htmlCustomContent)||void 0===D||D.disable(),null===($=this.urlCustomContent)||void 0===$||$.enable()):s===M.HTML&&(null===(Q=this.customEmbeddedContentValue)||void 0===Q||Q.setValue(null===(X=this.form.get("htmlCustomContent"))||void 0===X?void 0:X.value),null===(ce=this.urlCustomContent)||void 0===ce||ce.disable(),null===(Te=this.htmlCustomContent)||void 0===Te||Te.enable())}),null===(i=this.urlCustomContent)||void 0===i||i.valueChanges.pipe((0,le.R)(this.destroy$)).subscribe(s=>{var p;null===(p=this.customEmbeddedContentValue)||void 0===p||p.setValue(s)}),null===(n=this.htmlCustomContent)||void 0===n||n.valueChanges.pipe((0,le.R)(this.destroy$)).subscribe(s=>{var p;null===(p=this.customEmbeddedContentValue)||void 0===p||p.setValue(s)})}}return o.lateLoadKey="EmbeddedContentConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-embedded-content-configuration"]],inputs:{mode:"mode",messageComponent:"messageComponent",customEmbeddedContent:"customEmbeddedContent"},outputs:{formReady:"formReady"},features:[e.TTD],decls:26,vars:23,consts:function(){let l,t;return l=$localize`:␟d18bb86a09ed7c63d7d00a1dad418e5328f59406␟5492801901920760741:Embedded Content`,t=$localize`:␟6a175ac244e51f9c713f8829e3ba9192f6728ba2␟9012225804233265629:What do you want to show in the widget?`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","pl-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt1"],[1,"nui-text-label"],l,[1,"nui-text-secondary"],[1,"embedded-configurator-section__accordion-content"],["nuiComponentPortal","",3,"componentType","properties"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"],["caption",t,3,"control"],["formControlName","mode","name","mode","required","",3,"value","valueChange"],[3,"value"],[3,"control"],["formControlName","urlCustomContent"],["formControlName","htmlCustomContent","rows","7",1,"textarea-scrollable"]]},template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11," Show the specific HTML I supply "),e.qZA()()(),e.TgZ(12,"div",7),e.ynx(13,8,9),e.YNc(15,ws,0,0,"ng-template",10),e.NdJ("attached",function(p){return e.CHM(n),e.MAs(14).attached(p)}),e.BQk(),e.TgZ(16,"nui-form-field",11)(17,"nui-radio-group",12),e.NdJ("valueChange",function(p){return i.mode=p}),e.TgZ(18,"nui-radio",13),e._uU(19),e.qZA(),e.TgZ(20,"nui-form-field",14),e._UZ(21,"nui-textbox",15),e.qZA(),e.TgZ(22,"nui-radio",13),e._uU(23),e.qZA(),e.TgZ(24,"nui-form-field",14),e._UZ(25,"nui-textbox",16),e.qZA()()()()()}if(2&t){const n=e.MAs(14);e.Q6J("formGroup",i.form)("state",e.lcZ(1,14,e.lcZ(2,16,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,18,e.xi3(6,20,i.form,"tag"))),e.xp6(9),e.Q6J("componentType",i.messageComponent.componentType)("properties",i.messageComponent.properties),e.xp6(2),e.Q6J("cdkPortalOutlet",n.portal),e.xp6(1),e.Q6J("control",i.form.get("mode")),e.xp6(1),e.Q6J("value",i.mode),e.xp6(1),e.Q6J("value",i.modes[0].value),e.xp6(1),e.hij(" ",i.modes[0].displayValue," "),e.xp6(1),e.Q6J("control",i.form.get("urlCustomContent")),e.xp6(2),e.Q6J("value",i.modes[1].value),e.xp6(1),e.hij(" ",i.modes[1].displayValue," "),e.xp6(1),e.Q6J("control",i.form.get("htmlCustomContent"))}},directives:[Me.J,c.JL,c.sg,d.oJW,b.$,w.Pl,d.hgI,d.wTj,c.JJ,c.u,c.Q7,d.UKb,d.XHW],pipes:[r.Ov,Pe.F,be.d],styles:[".embedded-configurator-section__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function $s(o,l){if(1&o&&(e.tHW(0,1,1),e._UZ(1,"a",3),e.N_p()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("href",t.link.href,e.LSH)("target",t.link.target),e.pQV(t.link.text),e.QtT(0)}}let io=(()=>{class o{constructor(t){this.changeDetector=t}}return o.lateLoadKey="InfoMessageConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-info-message-configuration"]],inputs:{emphasizeText:"emphasizeText",generalText:"generalText",link:"link",allowDismiss:"allowDismiss"},decls:4,vars:4,consts:function(){let l;return l=$localize`:␟a533c3d45bdc55cc7b8fce70d448ffafc70b0f5b␟4231249583296268212:${"\ufffd#2\ufffd"}:START_BOLD_TEXT: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT: ${"\ufffd1\ufffd"}:INTERPOLATION_1: ${"\ufffd*3:1\ufffd\ufffd#1:1\ufffd"}:START_LINK:${"\ufffd0:1\ufffd"}:INTERPOLATION_2:${"\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd"}:CLOSE_LINK:`,[["type","info",3,"allowDismiss"],l,[3,"href","target",4,"ngIf"],[3,"href","target"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-message",0),e.tHW(1,1),e._UZ(2,"b"),e.YNc(3,$s,2,3,"a",2),e.N_p(),e.qZA()),2&t&&(e.Q6J("allowDismiss",i.allowDismiss),e.xp6(3),e.Q6J("ngIf",i.link),e.pQV(i.emphasizeText)(i.generalText),e.QtT(1))},directives:[d.qqZ,r.O5],encapsulation:2,changeDetection:0}),o})();var oo=a(39841);function Us(o,l){if(1&o&&(e.TgZ(0,"div",14)(1,"nui-form-field",15),e._UZ(2,"nui-textbox",16),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("control",t.form.get("units"))}}let no=(()=>{class o{constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.defaultColor={label:$localize`Default color`,color:Ei},this.label="",this.backgroundColor=this.defaultColor.color,this.units="",this.formReady=new e.vpe}ngOnInit(){this.backgroundColors=[...this.backgroundColors],this.backgroundColors.unshift(this.defaultColor),this.form=this.formBuilder.group({label:[this.label,[c.kI.required]],backgroundColor:[this.backgroundColor,[c.kI.required]]}),this.configurableUnits&&this.form.addControl("units",this.formBuilder.control(this.units));const t=this.form.get("label"),i=null==t?void 0:t.valueChanges.pipe((0,Oi.O)(t.value)),n=this.form.get("backgroundColor"),s=null==n?void 0:n.valueChanges.pipe((0,Oi.O)(null==n?void 0:n.value));this.subtitle$=(0,oo.a)([null==i?void 0:i.pipe((0,ct.U)(p=>p||$localize`no label`)),null==s?void 0:s.pipe((0,ct.U)(p=>ji[p]||$localize`Default Color`))]).pipe((0,ct.U)(p=>p.join(", "))),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s;t.label&&(null===(i=this.form)||void 0===i||i.patchValue({label:t.label.currentValue})),t.backgroundColor&&(null===(n=this.form)||void 0===n||n.patchValue({backgroundColor:t.backgroundColor.currentValue})),t.units&&(null===(s=this.form)||void 0===s||s.patchValue({units:t.units.currentValue}))}}return o.lateLoadKey="KpiDescriptionConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-kpi-description-configuration"]],inputs:{componentId:"componentId",configurableUnits:"configurableUnits",label:"label",backgroundColor:"backgroundColor",units:"units",backgroundColors:"backgroundColors"},outputs:{formReady:"formReady"},features:[e.TTD],decls:21,vars:22,consts:function(){let l,t,i,n,s,p;return l=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`,n=$localize`:␟e088252c0e2ede83d27a24702b1f77c90cee60b7␟3468485835384597147:Background Color`,s=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,p=$localize`:␟be537f4ddb09e1a2856314f2cbe84063ab6b4170␟9074327260054432941:Units`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"kpi-description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"form-group",3,"control"],["formControlName","label","placeholder",i],["caption",n,1,"form-group",3,"control"],["formControlName","backgroundColor",1,"kpi-description-configuration__accordion-content__color-picker",3,"colorPalette"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",s,1,"form-group",3,"control"],["formControlName","units","placeholder",p]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e.ALo(11,"async"),e._uU(12),e.ALo(13,"async"),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",8)(16,"nui-form-field",9),e._UZ(17,"nui-textbox",10),e.qZA()(),e.TgZ(18,"nui-form-field",11),e._UZ(19,"nui-color-picker",12),e.qZA(),e.YNc(20,Us,3,1,"div",13),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,9,e.lcZ(2,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,13,e.xi3(6,15,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",e.lcZ(11,18,i.subtitle$)),e.xp6(2),e.hij(" ",e.lcZ(13,20,i.subtitle$)," "),e.xp6(4),e.Q6J("control",i.form.get("label")),e.xp6(2),e.Q6J("control",i.form.get("backgroundColor")),e.xp6(1),e.Q6J("colorPalette",i.backgroundColors),e.xp6(1),e.Q6J("ngIf",i.configurableUnits))},directives:[Me.J,c.JL,c.sg,d.oJW,d.hgI,d.XHW,c.JJ,c.u,ui,r.O5],pipes:[r.Ov,Pe.F,be.d],styles:[".kpi-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-description-configuration__color-select[_ngcontent-%COMP%]{display:flex;align-items:center}.kpi-description-configuration__color-preview[_ngcontent-%COMP%]{width:100%;height:20px;border-radius:3px}.kpi-description-configuration__color-preview.with-arrow[_ngcontent-%COMP%]{width:calc(100% - 40px);margin-left:10px}.kpi-description-configuration__selector-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-left:1px solid;border-left-color:var(--nui-color-line-default,#d9d9d9);margin-left:10px}"],changeDetection:0}),o})();var zs=a(25032),Re=(()=>{return(o=Re||(Re={})).Second="second",o.Minute="minute",o.Hour="hour",Re;var o})();const ro={[Re.Second]:1e3,[Re.Minute]:6e4,[Re.Hour]:36e5},Bs={[Re.Hour]:$localize`:hours unit (long):hours`,[Re.Minute]:$localize`:minutes unit (long):minutes`,[Re.Second]:$localize`:seconds unit (long):seconds`},Wt={[Re.Hour]:$localize`:hours unit (short):h`,[Re.Minute]:$localize`:minutes unit (short):min`,[Re.Second]:$localize`:seconds unit (short):sec`};function yt(o,l){return ro[o]/ro[l]}function Ws(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",7),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.label," ")}}let Ni=(()=>{class o{constructor(t,i){this.fb=t,this.cd=i,this.possibleUnits=[Re.Second,Re.Minute,Re.Hour],this.unitItems=[],this.displayedUnitItems=[],this.currentUnit=null,this.valueChangeFix=zs.Z,this.destroy$=new te.x}ngOnInit(){this.generateUnitItems(),this.filterUnitItems(),this.createForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getNumberMin(){if(!this.unitControl.value||null==this.minSeconds)return;const t=yt(Re.Second,this.unitControl.value.id);return Math.ceil(this.minSeconds*t)}getNumberMax(){if(!this.unitControl.value||null==this.maxSeconds)return;const t=yt(Re.Second,this.unitControl.value.id);return Math.floor(this.maxSeconds*t)}writeValue(t){if(isFinite(t)&&this.isRangeValid()&&this.unitControl.value){const i=yt(Re.Second,this.unitControl.value.id);this.numberControl.setValue(t*i)}else this.numberControl.setValue(null);this.cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){}setDisabledState(t){t?(this.numberControl.disable({emitEvent:!1}),this.unitControl.disable({emitEvent:!1})):(this.numberControl.enable({emitEvent:!1}),this.unitControl.enable({emitEvent:!1})),this.cd.markForCheck()}resetUnits(){this.unitControl.setValue(this.displayedUnitItems[0])}generateUnitItems(){this.possibleUnits.forEach((t,i)=>{this.unitItems[i]={id:t,label:Bs[t]}})}filterUnitItems(){this.displayedUnitItems=this.unitItems.filter(t=>{let i=!1;if(null!=this.maxSeconds){const n=yt(Re.Second,t.id);i=Math.floor(this.maxSeconds*n)<=0}return!i})}createForm(){this.form=this.fb.group({number:[1,[c.kI.required]],unit:this.displayedUnitItems[0]}),this.numberControl=this.form.get("number"),this.unitControl=this.form.get("unit"),this.unitControl.value&&(this.currentUnit=this.unitControl.value.id),this.form.valueChanges.pipe((0,le.R)(this.destroy$)).subscribe(()=>{this.updateError(),this.emitValueChange()})}updateError(){this.isNumberValid()?this.numberControl.setErrors(null):this.numberControl.setErrors({invalidNumber:!0})}emitValueChange(){const t=this.numberControl.value,i=this.unitControl.value;if(null==t||null==i)return void(this.onChange&&this.onChange(null));const n=yt(i.id,Re.Second);this.onChange&&this.onChange(t*n)}isRangeValid(){return this.minSeconds<=this.maxSeconds||null==this.maxSeconds}isNumberValid(){const t=this.numberControl.value;return!(t<this.minSeconds||t%1!=0)&&(!(t*yt(this.unitControl.value.id,Re.Second)>this.maxSeconds)&&this.isRangeValid())}getNumberValidationMessage(){const t={min:this.getNumberMin(),max:this.getNumberMax(),whole:!0};return this.getLocalizedNumberValidationMessage(t)}getLocalizedNumberValidationMessage(t){const{min:i,max:n,whole:s}=t,p=s?$localize`a whole number`:$localize`a number`;return null!=i&&null!=n?i===n?$localize`Must be ${p} equal to ${i}`:$localize`Must be ${p} between ${i} and ${n}`:null==i&&null!=n?$localize`Must be ${p} not larger than ${n}`:null!=i&&null==n?$localize`Must be ${p} not smaller than ${i}`:$localize`Must be ${p}`}validate(){var t;return(null===(t=this.form.get("number"))||void 0===t?void 0:t.errors)||null}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-refresh-rate-configurator"]],inputs:{minSeconds:"minSeconds",maxSeconds:"maxSeconds"},features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:c.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}])],decls:8,vars:6,consts:[[1,"d-flex","flex-column",3,"formGroup"],[1,"d-flex","flex-row"],["formControlName","number","customBoxWidth","90px",3,"minValue","maxValue","valueChange"],["formControlName","unit",1,"ml-3"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["for","invalidNumber"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"nui-textbox-number",2),e.NdJ("valueChange",function(){return i.valueChangeFix()}),e.qZA(),e.TgZ(3,"nui-select-v2",3),e.YNc(4,Ws,2,2,"nui-select-v2-option",4),e.qZA()(),e.TgZ(5,"nui-form-field",5)(6,"nui-validation-message",6),e._uU(7),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("minValue",i.minSeconds)("maxValue",i.maxSeconds),e.xp6(2),e.Q6J("ngForOf",i.displayedUnitItems),e.xp6(1),e.Q6J("control",i.form.get("number")),e.xp6(2),e.hij(" ",i.getNumberValidationMessage()," "))},directives:[c._Y,c.JL,c.sg,d.I5I,c.JJ,c.u,d.j_n,r.sg,d.rLF,d.hgI,d.CfE],encapsulation:2,changeDetection:0}),o})();function ks(o,l){if(1&o&&(e.TgZ(0,"div",15),e.SDv(1,16),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.pQV(t.getDurationLabel(t.refresherSettings.refreshRateSeconds)),e.QtT(1)}}let so=(()=>{class o{constructor(t,i,n,s,p){this.changeDetector=t,this.formBuilder=i,this.logger=n,this.refresherSettings=s,this.cd=p,this.minSeconds=1,this.maxSeconds=86400,this.overrideDefaultSettingsCaption=$localize`Custom refresh rate`,this.overrideDefaultSettings=!0,this.formReady=new e.vpe,this.destroyed$=new te.x,this.resetInterval=()=>{var f;this.refreshRateComp.resetUnits(),null===(f=this.form.get("interval"))||void 0===f||f.setValue(this.interval||this.minSeconds)}}ngOnInit(){var t;this.form=this.formBuilder.group({enabled:[!0,[c.kI.required]],overrideDefaultSettings:[this.overrideDefaultSettings,[c.kI.required]],interval:[null!==(t=this.interval)&&void 0!==t?t:0,[c.kI.required]]}),this.form.statusChanges.pipe((0,le.R)(this.destroyed$)).subscribe(()=>{this.form.markAllAsTouched(),this.cd.detectChanges()}),(0,oo.a)([this.form.controls.enabled.valueChanges,this.form.controls.overrideDefaultSettings.valueChanges]).pipe((0,Lt.h)(i=>i.some(n=>!n)),(0,Qe.b)(this.resetInterval),(0,le.R)(this.destroyed$)).subscribe(),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,p,f,D;t.enabled&&(null===(n=null===(i=this.form)||void 0===i?void 0:i.get("enabled"))||void 0===n||n.patchValue(this.enabled)),t.interval&&(null===(p=null===(s=this.form)||void 0===s?void 0:s.get("interval"))||void 0===p||p.patchValue(this.interval)),t.overrideDefaultSettings&&(null===(D=null===(f=this.form)||void 0===f?void 0:f.get("overrideDefaultSettings"))||void 0===D||D.patchValue(this.overrideDefaultSettings))}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getHeaderSubtitle(){var t,i,n;let s="";return(null===(t=this.form.get("enabled"))||void 0===t?void 0:t.value)?(s+=$localize`Enabled`,s+=", ",(null===(i=this.form.get("overrideDefaultSettings"))||void 0===i?void 0:i.value)?s+=this.getDurationLabel(null===(n=this.form.get("interval"))||void 0===n?void 0:n.value):s+=$localize`Use default value`+" ("+this.getDurationLabel(this.refresherSettings.refreshRateSeconds)+")"):s+=$localize`Disabled`,s}getDurationLabel(t){let i=t,n="";const s=Math.floor(i/3600);i%=3600;const p=Math.floor(i/60),f=i%60;return s>0&&(n+=s+" "+Wt[Re.Hour]+" "),p>0&&(n+=p+" "+Wt[Re.Minute]+" "),f>0&&(n+=f+" "+Wt[Re.Second]+" "),n=n.trim(),""===n?"0 "+Wt[Re.Second]:n}}return o.lateLoadKey="RefresherConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu),e.Y36(d.mQy),e.Y36(Xt.g),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-refresher-configuration"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ni,5),2&t){let n;e.iGM(n=e.CRH())&&(i.refreshRateComp=n.first)}},inputs:{enabled:"enabled",interval:"interval",minSeconds:"minSeconds",maxSeconds:"maxSeconds",overrideDefaultSettingsCaption:"overrideDefaultSettingsCaption",overrideDefaultSettings:"overrideDefaultSettings"},outputs:{formReady:"formReady"},features:[e.TTD],decls:26,vars:25,consts:function(){let l,t,i;return l=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`,t=$localize`:␟913ac9d5354818a43028659e12bb79cc3a8d19e3␟2148212086281974142:Refresh widget periodically`,i=$localize`:␟094103d9c7a2be810d7fc6a1935e14695f19925f␟4443005292001830097: By default, the widget will refresh every ${"\ufffd0\ufffd"}:INTERPOLATION:. `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"d-flex","flex-column","nui-refresher-configuration__accordion-content"],[3,"control"],["formControlName","enabled"],t,[1,"mt-4"],["formControlName","overrideDefaultSettings"],["class","nui-help-hint",4,"ngIf"],["formControlName","interval",3,"minSeconds","maxSeconds"],[1,"nui-help-hint"],i]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div")(14,"nui-form-field",8)(15,"nui-switch",9),e.SDv(16,10),e.qZA()()(),e.TgZ(17,"div")(18,"div",11)(19,"nui-form-field",8)(20,"nui-switch",12),e._uU(21),e.YNc(22,ks,2,1,"div",13),e.qZA()()(),e.TgZ(23,"div",11)(24,"nui-form-field",8),e._UZ(25,"nui-refresh-rate-configurator",14),e.qZA()()()()()),2&t){let n,s,p;e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"reset"))),e.xp6(6),e.Q6J("title",i.getHeaderSubtitle()),e.xp6(1),e.hij(" ",i.getHeaderSubtitle()," "),e.xp6(3),e.Q6J("control",i.form.get("enabled")),e.xp6(3),e.ekj("hidden",!(null!=(n=i.form.get("enabled"))&&n.value)),e.xp6(2),e.Q6J("control",i.form.get("overrideDefaultSettings")),e.xp6(2),e.hij("",i.overrideDefaultSettingsCaption," "),e.xp6(1),e.Q6J("ngIf",!(null!=(s=i.form.get("overrideDefaultSettings"))&&s.value)),e.xp6(1),e.ekj("hidden",!(null!=(p=i.form.get("overrideDefaultSettings"))&&p.value)),e.xp6(1),e.Q6J("control",i.form.get("interval")),e.xp6(1),e.Q6J("minSeconds",i.minSeconds)("maxSeconds",i.maxSeconds)}},directives:[Me.J,c.JL,c.sg,d.oJW,d.hgI,d.qUD,c.JJ,c.u,r.O5,Ni],pipes:[r.Ov,Pe.F,be.d],styles:[".nui-refresher-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),o})();var Zs=a(45588),Vs=a.n(Zs);const Js=o=>{const l=o.get("criticalThresholdValue"),t=o.get("warningThresholdValue"),i=o.get("reversedThresholds"),n=o.get("showThresholds");if(!l)throw new Error("criticalThresholdValue formControl is not defined");if((0,d.fS1)(l,"min","max"),!t)throw new Error("warningThresholdValue formControl is not defined");if((0,d.fS1)(t,"min","max"),null==n?void 0:n.value){if(z()(t.value))return null;if(null==i?void 0:i.value){if(l.value>=t.value)return t.setErrors({min:!0}),l.setErrors({max:!0}),{thresholds:!0}}else if(l.value<=t.value)return t.setErrors({max:!0}),l.setErrors({min:!0}),{thresholds:!0}}return null};function Ys(o,l){if(1&o&&(e.TgZ(0,"nui-radio",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.displayValue," ")}}function Hs(o,l){if(1&o&&(e.TgZ(0,"div",15)(1,"div",16)(2,"nui-form-field",17),e._UZ(3,"nui-textbox-number",18),e.TgZ(4,"nui-validation-message",11),e.SDv(5,19),e.qZA(),e.TgZ(6,"nui-validation-message",20),e.SDv(7,21),e.qZA(),e.TgZ(8,"nui-validation-message",22),e.SDv(9,23),e.qZA()()(),e.TgZ(10,"div",16)(11,"nui-form-field",24),e._UZ(12,"nui-textbox-number",25),e.TgZ(13,"nui-validation-message",11),e.SDv(14,26),e.qZA(),e.TgZ(15,"nui-validation-message",20),e.SDv(16,27),e.qZA(),e.TgZ(17,"nui-validation-message",22),e.SDv(18,28),e.qZA()()(),e.TgZ(19,"nui-form-field",29),e._UZ(20,"nui-checkbox",30),e.TgZ(21,"nui-validation-message",11),e.SDv(22,31),e.qZA()()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("control",t.form.get("warningThresholdValue")),e.xp6(9),e.Q6J("control",t.form.get("criticalThresholdValue")),e.xp6(8),e.Q6J("control",t.form.get("reversedThresholds"))("showOptionalText",!1)}}let ao=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.formBuilder=i,this.logger=n,this.cd=s,this.formReady=new e.vpe,this.thresholdOptions=[{value:!1,displayValue:$localize`Never show critical or warning states for this KPI`},{value:!0,displayValue:$localize`Set custom thresholds for this widget`}],this.destroy$=new te.x}ngOnInit(){this.validateRadioButtonsGroupValue(),this.form=this.formBuilder.group({criticalThresholdValue:[this.criticalThresholdValue||0,[c.kI.required]],warningThresholdValue:[this.warningThresholdValue||0],showThresholds:[this.showThresholds||!1,[c.kI.required]],reversedThresholds:[this.reversedThresholds||!1]},{validators:Js}),this.handleWarningThreshold(this.warningThresholdValue),this.form.statusChanges.pipe((0,le.R)(this.destroy$)).subscribe(t=>{this.form.markAllAsTouched(),this.cd.detectChanges()}),this.formReady.emit(this.form)}ngOnChanges(t){var i;const n=["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"];if(t){for(const s of Object.keys(t))if(Vs()(n,s)){const p=t[s].currentValue;p&&(null===(i=this.form)||void 0===i||i.patchValue({[s]:p}))}t.showThresholds&&setTimeout(()=>this.validateRadioButtonsGroupValue())}t.warningThresholdValue&&this.handleWarningThreshold(t.warningThresholdValue.currentValue)}getThresholdsSubtitle(t){return t?$localize`Custom thresholds`:$localize`No thresholds`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}validateRadioButtonsGroupValue(){this.radioButtonGroupValue=this.showThresholds}handleWarningThreshold(t){var i;const n=null===(i=this.form)||void 0===i?void 0:i.get("warningThresholdValue");z()(t)&&(null==n||n.setValue(null))}}return o.lateLoadKey="ThresholdsConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu),e.Y36(d.mQy),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-thresholds-configuration"]],inputs:{criticalThresholdValue:"criticalThresholdValue",warningThresholdValue:"warningThresholdValue",showThresholds:"showThresholds",reversedThresholds:"reversedThresholds"},outputs:{formReady:"formReady"},features:[e.TTD],decls:19,vars:18,consts:function(){let l,t,i,n,s,p,f,D,$,Q,X,ce,Te,_e,xe;return l=$localize`:␟784fdd6b2dc26499eca6e15094b55f0b1c1e1b7a␟8815471757829352344:Thresholds`,t=$localize`:␟6875687abe0982b513f60d230d71b9cc2d9eef3e␟9007062817247777645:How do you want to set warning/critical thresholds?`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,n=$localize`:␟5dda34ec4b693f2b13afdf28a4e5f00062f4c896␟4003830139037367407:Warning value`,s=$localize`:␟cae671d9eb277eadfd7752518814d3f852369cc9␟6643132921042050963:Never show the warning state`,p=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,f=$localize`:␟19d6eb371557c8ab18db5332a2e1955f18c2f16d␟3184669981998118637: Warning threshold should be greater than critical threshold `,D=$localize`:␟6c62f1e33dd914743cb977df6baba31779d7aed6␟1030183925045576042: Warning threshold should be lower than critical threshold `,$=$localize`:␟f8baa78544aa27624d43d59e5a225216aff1042f␟6033897450960508846:Critical value`,Q=$localize`:␟9b66a7e6fdeb05f4c1ffdc78ea8f4a7a2fb64d79␟7643729389671069649:Set critical value`,X=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,ce=$localize`:␟540b9b0f637cc0605bc00ccc586a3eab73aabcfc␟4465977748799047247: Critical threshold should be greater than warning threshold `,Te=$localize`:␟2efae84e117a2639681a8e5c0e4ce4eee42af17d␟9156849514888688496: Critical threshold should be lower than warning threshold `,_e=$localize`:␟18bcbeb2b14e6064ec6fe9276db140a4e800da3c␟5716867848923884165:Warning and critical when below threshold values`,xe=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"kpi-thresholds-configuration__accordion-content"],["caption",t,3,"control"],["formControlName","showThresholds","name","showThresholds","required","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],i,["class","mt-4",4,"ngIf"],[3,"value"],[1,"mt-4"],[1,"mb-4"],["caption",n,3,"control"],["formControlName","warningThresholdValue","placeholder",s],p,["for","min"],f,["for","max"],D,["caption",$,3,"control"],["formControlName","criticalThresholdValue","placeholder",Q],X,ce,Te,["caption",_e,3,"control","showOptionalText"],["formControlName","reversedThresholds","required",""],xe]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"nui-form-field",8)(14,"nui-radio-group",9),e.YNc(15,Ys,2,2,"nui-radio",10),e.qZA(),e.TgZ(16,"nui-validation-message",11),e.SDv(17,12),e.qZA()(),e.YNc(18,Hs,23,4,"div",13),e.qZA()()),2&t){let n,s,p;e.Q6J("formGroup",i.form)("state",e.lcZ(1,9,e.lcZ(2,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,13,e.xi3(6,15,i.form,"thresholds"))),e.xp6(6),e.Q6J("title",i.getThresholdsSubtitle(null==(n=i.form.get("showThresholds"))?null:n.value)),e.xp6(1),e.hij(" ",i.getThresholdsSubtitle(null==(s=i.form.get("showThresholds"))?null:s.value)," "),e.xp6(2),e.Q6J("control",i.form.get("showThresholds")),e.xp6(1),e.Q6J("value",i.radioButtonGroupValue),e.xp6(1),e.Q6J("ngForOf",i.thresholdOptions),e.xp6(3),e.Q6J("ngIf",null==(p=i.form.get("showThresholds"))?null:p.value)}},directives:[Me.J,c.JL,c.sg,d.oJW,d.hgI,d.wTj,c.JJ,c.u,c.Q7,r.sg,d.UKb,d.CfE,r.O5,d.I5I,d.bK4],pipes:[r.Ov,Pe.F,be.d],styles:[".kpi-thresholds-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Ks(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Qs(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Xs(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}let lo=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.eventBus=s,this.legendPlacements=[],this.timeSpans=[],this.availableChartTypes=[{label:$localize`Line`,value:Ge.Line},{label:$localize`Stacked area`,value:Ge.StackedArea},{label:$localize`Stacked % area`,value:Ge.StackedPercentageArea},{label:$localize`Bar`,value:Ge.StackedBar},{label:$localize`Status`,value:Ge.StatusBar}],this.formReady=new e.vpe,this.destroy$=new te.x,this.form=this.formBuilder.group({leftAxisLabel:[""],startingTimespan:[null,c.kI.required],legendPlacement:[y.w.None,[c.kI.required]],preset:[Ge.Line,[c.kI.required]]})}ngOnInit(){var t;null===(t=this.form.get("startingTimespan"))||void 0===t||t.valueChanges.pipe((0,le.R)(this.destroy$)).subscribe(i=>{setTimeout(()=>{this.eventBus.next(T.xZ,{payload:{id:T.RG}})})}),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,p;const f=this.form.get("startingTimespan");t.leftAxisLabel&&(null===(i=this.form.get("leftAxisLabel"))||void 0===i||i.setValue(this.leftAxisLabel,{emitEvent:!1})),t.startingTimespan&&(null==f||f.setValue(this.startingTimespan,{emitEvent:!1})),t.legendPlacement&&(null===(n=this.form.get("legendPlacement"))||void 0===n||n.setValue(this.legendPlacement,{emitEvent:!1})),t.preset&&(null===(s=this.form.get("preset"))||void 0===s||s.setValue(this.preset,{emitEvent:!1})),t.timeSpans&&!(null==f?void 0:f.value)&&(null===(p=this.timeSpans)||void 0===p?void 0:p.length)>0&&(null==f||f.setValue(this.timeSpans[0]))}getSecondaryText(){const t=this.form.controls.startingTimespan.value;return`${t&&t.name||$localize`No timespan`}, ${this.form.controls.legendPlacement.value||$localize`No legend`}, ${this.form.controls.leftAxisLabel.value||$localize`No y-axis label`}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.lateLoadKey="TimeseriesMetadataConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(We.p),e.Y36(c.qu),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-timeseries-metadata-configuration"]],inputs:{legendPlacements:"legendPlacements",timeSpans:"timeSpans",startingTimespan:"startingTimespan",legendPlacement:"legendPlacement",leftAxisLabel:"leftAxisLabel",preset:"preset",availableChartTypes:"availableChartTypes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:40,vars:37,consts:function(){let l,t,i,n,s,p,f,D,$,Q,X,ce,Te;return l=$localize`:␟82fac4002b38b13e6e76cab565857c651740e8d4␟7635587638460371959:Timeseries metadata`,t=$localize`:␟7c1e198b83571c6f6d6774bbf5e8ef469b8ed3f8␟83369046626581484:Starting timespan`,i=$localize`:␟cea52b8401042ba9c3aac1cd5a7507d754f0d809␟4391839922437157830:Starting Timespan`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟a9e3fc4b717bf285f084fc443a97f4c08b345203␟2498436426359230001:Chart legend`,p=$localize`:␟8137d4a0a1b9974f796c96ea5b70f4ec4304af97␟9008417256629743113:Select Legend Orientation`,f=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,D=$localize`:␟20f8b383236e858a2369abf573aa3a662a61dc2c␟7603862017185374134:Chart y-axis label`,$=$localize`:␟da1b3b8ad86495e008972fe0f8dfca60c9c60ac5␟5670370419656051485:Set chart y-axis label`,Q=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,X=$localize`:␟d4821e6eaad5b45a36e2873de2a6e0075c4b7621␟8983610989099122824:Chart type`,ce=$localize`:␟d4821e6eaad5b45a36e2873de2a6e0075c4b7621␟8983610989099122824:Chart type`,Te=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"timeseries-metadata-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","startingTimespan",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],n,["caption",s,3,"control"],["placeholder",p,"formControlName","legendPlacement",3,"popupViewportMargin"],f,["caption",D,3,"control"],["formControlName","leftAxisLabel","placeholder",$],Q,["caption",X,3,"control"],["placeholder",ce,"formControlName","preset",3,"popupViewportMargin"],Te,[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.ALo(7,"async"),e.ALo(8,"nuiFormHeaderIconPipe"),e.TgZ(9,"div",3)(10,"span",4),e.SDv(11,5),e.qZA(),e.TgZ(12,"div",6),e._uU(13),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",8)(16,"nui-form-field",9)(17,"nui-select-v2",10),e.ALo(18,"async"),e.YNc(19,Ks,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(20,"nui-validation-message",12),e.SDv(21,13),e.qZA()()(),e.TgZ(22,"div",8)(23,"nui-form-field",14)(24,"nui-select-v2",15),e.ALo(25,"async"),e.YNc(26,Qs,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(27,"nui-validation-message",12),e.SDv(28,16),e.qZA()()(),e.TgZ(29,"div",8)(30,"nui-form-field",17),e._UZ(31,"nui-textbox",18),e.TgZ(32,"nui-validation-message",12),e.SDv(33,19),e.qZA()()(),e.TgZ(34,"nui-form-field",20)(35,"nui-select-v2",21),e.ALo(36,"async"),e.YNc(37,Xs,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(38,"nui-validation-message",12),e.SDv(39,22),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"edit")))("iconColor",e.lcZ(7,25,e.Dn7(8,27,i.form,"gray",""))),e.xp6(8),e.Q6J("title",i.getSecondaryText()),e.xp6(1),e.hij(" ",i.getSecondaryText()," "),e.xp6(3),e.Q6J("control",i.form.controls.startingTimespan),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(18,31,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.timeSpans),e.xp6(4),e.Q6J("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(25,33,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendPlacements),e.xp6(4),e.Q6J("control",i.form.controls.leftAxisLabel),e.xp6(4),e.Q6J("control",i.form.controls.preset),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(36,35,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.availableChartTypes))},directives:[Me.J,c.JL,c.sg,d.oJW,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,d.CfE,d.XHW],pipes:[r.Ov,Pe.F,be.d],styles:[".timeseries-metadata-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),o})(),ut=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.formBuilder=i,this.logger=n,this.formReady=new e.vpe,this.form=this.formBuilder.group({title:["",c.kI.required],subtitle:[""],url:[""],description:[""],collapsible:[!1],collapsed:[!0]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,p,f;t.title&&(null===(i=this.form.get("title"))||void 0===i||i.setValue(this.title)),t.url&&(null===(n=this.form.get("url"))||void 0===n||n.setValue(this.url)),t.subtitle&&(null===(s=this.form.get("subtitle"))||void 0===s||s.setValue(this.subtitle)),t.description&&(null===(p=this.form.get("description"))||void 0===p||p.setValue(this.description)),t.collapsible&&(null===(f=this.form.get("collapsible"))||void 0===f||f.setValue(this.collapsible))}getSecondaryText(){return`${this.form.controls.title.value||$localize`No title`}, ${this.form.controls.subtitle.value||$localize`no subtitle`}`}}return o.lateLoadKey="TitleAndDescriptionConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-title-and-description-configuration"]],inputs:{title:"title",url:"url",subtitle:"subtitle",description:"description",collapsible:"collapsible"},outputs:{formReady:"formReady"},features:[e.TTD],decls:31,vars:20,consts:function(){let l,t,i,n,s,p,f,D,$,Q,X,ce,Te;return l=$localize`:␟c1f3e3c0c4876967ade530f67b0696f7c1f5aa76␟6274813085792990828:Title and Description`,t=$localize`:␟f75e29ac7734f16cad4d02017646720be3030367␟1720994052291036243:Widget title`,i=$localize`:␟eb94f6289d261b9d7b1288cf92c4099023695dd9␟2301126677959299103:Set widget title`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟d2b3deab155463fe2b5ac59000b6e3aa7771afc8␟2073684406211180788:Widget subtitle`,p=$localize`:␟b6d324cd44176b6e2bfe2ff16bbc7e7ee1c412fc␟8934433387734849172:Do not show a subtitle`,f=$localize`:␟cb04bfea86b30d40d2d30630c957bf3fd2e50b83␟9207103926988831681:Widget link URL`,D=$localize`:␟02773997819c014e0f299deb7cb8e054003850e1␟3668070782949850100:Do not link to another page`,$=$localize`:␟ab83c23bd6135460422e95fca32b4ec38ddff9e6␟3861388441030158101:Widget description`,Q=$localize`:␟2f50115d11fc3e29acafe6f99228c2304cffb722␟3301579533722588311:This won't be shown on the widget, but can be helpful for
                          other users who want to re-use this widget on their own dashboards`,X=$localize`:␟37b56526e384f843a15323dc730b484a97b4c968␟3830487495946043372:No description`,ce=$localize`:␟9de5a44cd2d54fe77e5c12131ab7a21792ce91df␟5450302501374652801:Hide widget header`,Te=$localize`:␟6570353e3fb49053e2327cb92f257eab8ccdd274␟5369485165489692848:Collapsible`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"title-and-description-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["id","kpi-widget-title","formControlName","title","placeholder",i],["for","required"],n,["caption",s,3,"control"],["id","kpi-widget-subtitle","formControlName","subtitle","placeholder",p],["caption",f,3,"control"],["id","kpi-widget-url","formControlName","url","placeholder",D],["caption",$,"hint",Q,3,"control"],["formControlName","description","placeholder",X],["caption",ce,3,"showOptionalText","control"],["formControlName","collapsible"],Te]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9),e._UZ(15,"nui-textbox",10),e.TgZ(16,"nui-validation-message",11),e.SDv(17,12),e.qZA()()(),e.TgZ(18,"div",8)(19,"nui-form-field",13),e._UZ(20,"nui-textbox",14),e.qZA()(),e.TgZ(21,"div",8)(22,"nui-form-field",15),e._UZ(23,"nui-textbox",16),e.qZA()(),e.TgZ(24,"div",8)(25,"nui-form-field",17),e._UZ(26,"nui-textbox",18),e.qZA()(),e.TgZ(27,"div")(28,"nui-form-field",19)(29,"nui-checkbox",20),e.SDv(30,21),e.qZA()()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,11,e.lcZ(2,13,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,15,e.xi3(6,17,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.getSecondaryText()),e.xp6(1),e.hij(" ",i.getSecondaryText()," "),e.xp6(3),e.Q6J("control",i.form.get("title")),e.xp6(5),e.Q6J("control",i.form.get("subtitle")),e.xp6(3),e.Q6J("control",i.form.get("url")),e.xp6(3),e.Q6J("control",i.form.get("description")),e.xp6(3),e.Q6J("showOptionalText",!1)("control",i.form.get("collapsible")))},directives:[Me.J,c.JL,c.sg,d.oJW,d.hgI,d.XHW,c.JJ,c.u,d.CfE,d.bK4],pipes:[r.Ov,Pe.F,be.d],styles:[".title-and-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function js(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function qs(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ea(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ta(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ia(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let co=(()=>{class o{constructor(t,i){this.changeDetector=t,this.formBuilder=i,this.formReady=new e.vpe,this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group({icon:"",status:"",detailedUrl:"",label:"",url:""})})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){t.dataFieldIds&&this.getFieldMappingsControl.setValue(t.dataFieldIds.currentValue)}get getFieldMappingsControl(){return this.form.get("dataFieldIds")}}return o.lateLoadKey="EntityFormattingComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-entity-formatting-configuration"]],inputs:{mappingKeys:"mappingKeys",dataFieldIds:"dataFieldIds"},outputs:{formReady:"formReady"},features:[e.TTD],decls:46,vars:17,consts:function(){let l,t,i,n,s,p,f,D,$,Q,X;return l=$localize`:␟38ddd26fc749a9c493e70c642d321c868c47f178␟5252376970414591923:Entity formatting`,t=$localize`:␟14688213d67b2f0e553d66f8255281db245502fb␟3074987902485823708:Icon`,i=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,n=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`,s=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,p=$localize`:␟06ae2001bf7ffd3cbe977e0c4ce0951f660ca197␟4936125302941310356:Details URL`,f=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,D=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,$=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,Q=$localize`:␟ec044db4c57a4750f8bec4371dc39e94f2e26d46␟994779223497739731:Label URL`,X=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,["title","Show status icon",1,"nui-text-secondary"],["formGroupName","dataFieldIds",1,"entity-formatting__accordion-content"],[1,"mb-3"],t,[1,"d-flex","flex-grow-1"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",i,"formControlName","icon"],[3,"value",4,"ngFor","ngForOf"],n,["placeholder",s,"formControlName","status"],p,["placeholder",f,"formControlName","detailedUrl"],D,["placeholder",$,"formControlName","label"],Q,["placeholder",X,"formControlName","url"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.TgZ(5,"div",3)(6,"span",4),e.SDv(7,5),e.qZA(),e.TgZ(8,"div",6),e._uU(9," Show status icon "),e.qZA()()(),e.TgZ(10,"div",7)(11,"div",8)(12,"label",4),e.SDv(13,9),e.qZA(),e.TgZ(14,"div",10)(15,"nui-form-field",11)(16,"nui-select-v2",12),e.YNc(17,js,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(18,"div",8)(19,"label",4),e.SDv(20,14),e.qZA(),e.TgZ(21,"div",10)(22,"nui-form-field",11)(23,"nui-select-v2",15),e.YNc(24,qs,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(25,"div",8)(26,"label",4),e.SDv(27,16),e.qZA(),e.TgZ(28,"div",10)(29,"nui-form-field",11)(30,"nui-select-v2",17),e.YNc(31,ea,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(32,"div",8)(33,"label",4),e.SDv(34,18),e.qZA(),e.TgZ(35,"div",10)(36,"nui-form-field",11)(37,"nui-select-v2",19),e.YNc(38,ta,2,2,"nui-select-v2-option",13),e.qZA()()()(),e.TgZ(39,"div",8)(40,"label",4),e.SDv(41,20),e.qZA(),e.TgZ(42,"div",10)(43,"nui-form-field",11)(44,"nui-select-v2",21),e.YNc(45,ia,2,2,"nui-select-v2-option",13),e.qZA()()()()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,13,e.lcZ(2,15,i.form))),e.xp6(4),e.Q6J("icon","tag"),e.xp6(11),e.Q6J("control",i.getFieldMappingsControl.get("icon")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("status")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("detailedUrl")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("label")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys),e.xp6(5),e.Q6J("control",i.getFieldMappingsControl.get("url")),e.xp6(2),e.Q6J("ngForOf",i.mappingKeys))},directives:[Me.J,c.JL,c.sg,d.oJW,c.x0,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF],pipes:[r.Ov,Pe.F],styles:[".entity-formatting__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"]}),o})();var oa=a(18680),_o=a.n(oa);function na(o,l){1&o&&(e.TgZ(0,"label",18),e.SDv(1,19),e.qZA())}function ra(o,l){1&o&&(e.TgZ(0,"label",20),e.SDv(1,21),e.qZA())}function sa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function aa(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,na,2,0,"label",10),e.YNc(2,ra,2,0,"label",11),e.TgZ(3,"div",12)(4,"nui-form-field",13)(5,"nui-select-v2",14),e.YNc(6,sa,2,2,"nui-select-v2-option",15),e.qZA()(),e.TgZ(7,"div",16)(8,"button",17),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().removeRule(s)}),e.qZA()()(),e.BQk()}if(2&o){const t=l.$implicit,i=l.index,n=e.oxw();e.xp6(1),e.Q6J("ngIf",0!==i),e.xp6(1),e.Q6J("ngIf",0===i),e.xp6(2),e.Q6J("control",t),e.xp6(1),e.Q6J("formControlName",i),e.xp6(1),e.Q6J("ngForOf",n.selectData[i])}}function la(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().addGrouping()}),e.SDv(1,24),e.qZA()}}let uo=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.formBuilder=i,this.eventBus=n,this.formReady=new e.vpe,this.form=this.formBuilder.group({groups:[],groupBy:this.formBuilder.array([]),drillstate:[void 0]}),this.destroy$=new te.x}get getGroupByControl(){return this.form.get("groupBy")}get getDrillStateControl(){return this.form.get("drillstate")}get getGroupsControl(){return this.form.get("groups")}ngOnInit(){this.eventBus.getStream(we.gg).pipe((0,le.R)(this.destroy$)).subscribe(t=>this.onDataSourceCreated(t)),this.getGroupByControl.valueChanges.pipe((0,le.R)(this.destroy$)).subscribe(()=>this.fillGroupsOptions()),this.fillGroupsOptions(),this.formReady.emit(this.form)}ngOnChanges(t){t.groups&&this.getGroupsControl.setValue(t.groups.currentValue),t.groupBy&&!t.groupBy.firstChange&&(this.getGroupByControl.clear(),this.groupBy.forEach(i=>this.getGroupByControl.push(this.createControl(i))),this.fillGroupsOptions())}createControl(t){return this.formBuilder.control(t||"",c.kI.required)}addGrouping(){const t=this.createControl();this.getGroupByControl.push(t),this.fillGroupsOptions(),t.setValue(this.selectData[this.getGroupByControl.controls.length-1][0])}removeRule(t){this.getGroupByControl.removeAt(t),this.fillGroupsOptions()}isAddRestricted(){return this.selectData.some(t=>1===t.length)}getSubtitle(){var t;const i=this.getGroupByControl.controls.map((n,s)=>`${0===s?"By":"then"} ${n.value}`).join(", ");return 0===(null===(t=this.getGroupByControl)||void 0===t?void 0:t.value.length)?$localize`No groups`:$localize`${i}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onDataSourceCreated(t){var i,n,s;null===(s=null===(n=null===(i=null==t?void 0:t.payload)||void 0===i?void 0:i.dataFieldsConfig)||void 0===n?void 0:n.dataFields$)||void 0===s||s.pipe((0,le.R)(this.destroy$)).subscribe(p=>{var f;if(p){const D=p.map(Q=>Q.id);(_o()(this.groups,D).length||!(null===(f=this.groups)||void 0===f?void 0:f.length))&&(this.groups=D,this.getGroupsControl.setValue(D),this.getGroupByControl.clear(),this.getDrillStateControl.setValue([]),this.fillGroupsOptions())}})}fillGroupsOptions(){this.selectData=[];const t=this.getGroupByControl.value;this.getGroupByControl.controls.forEach((i,n)=>{this.selectData[n]=[];const s=_o()(this.groups,t);t[n]&&this.selectData[n].push(t[n]),this.selectData[n]=[...this.selectData[n],...s]})}}return o.lateLoadKey="DrilldownConfiguratorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-grouping-configuration"]],inputs:{groups:"groups",groupBy:"groupBy"},outputs:{formReady:"formReady"},features:[e.TTD],decls:13,vars:11,consts:function(){let l,t,i,n,s;return l=$localize`:␟8658ad3b268c50fe2c1106dfb7bccdaa2e4290b2␟877780134171662191:Grouping`,t=$localize`:␟42daf87f19836ef3d1b8f58a5cf93e2c43b82c1c␟8325381706328570325:Select Item`,i=$localize`:␟e2feaa48e92bd996631d6a90911db46fe38cd1a3␟4620310062886462675:Then`,n=$localize`:␟788a575e9f2466abeee0e51ab8f77e9cf19243de␟3653048554215358825:Group by`,s=$localize`:␟b8c2733945af01b52afbf8d2c9993bd9abda4c94␟3960498895552401303: Add another level `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["iconColor","gray",1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],["formArrayName","groupBy",1,"grouping-configuration__accordion-content"],[4,"ngFor","ngForOf"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click",4,"ngIf"],["class","d-flex nui-text-secondary mb-1",4,"ngIf"],["class","d-flex nui-text-panel mb-2",4,"ngIf"],[1,"d-flex","flex-row","flex-grow-1","mb-4"],[1,"d-flex","flex-grow-1",3,"control"],["placeholder",t,3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"justify-content-center"],["nui-button","","icon","delete","displayStyle","action","type","button",3,"click"],[1,"d-flex","nui-text-secondary","mb-1"],i,[1,"d-flex","nui-text-panel","mb-2"],n,[3,"value"],["nui-button","","icon","add","displayStyle","action","type","button",3,"click"],s]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.TgZ(5,"div",3)(6,"span",4),e.SDv(7,5),e.qZA(),e.TgZ(8,"div",6),e._uU(9),e.qZA()()(),e.TgZ(10,"div",7),e.YNc(11,aa,9,5,"ng-container",8),e.YNc(12,la,2,0,"button",9),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,7,e.lcZ(2,9,i.form))),e.xp6(4),e.Q6J("icon","tag"),e.xp6(4),e.Q6J("title",i.getSubtitle()),e.xp6(1),e.hij(" ",i.getSubtitle()," "),e.xp6(2),e.Q6J("ngForOf",i.getGroupByControl.controls),e.xp6(1),e.Q6J("ngIf",!i.isAddRestricted()))},directives:[Me.J,c.JL,c.sg,d.oJW,c.CE,r.sg,r.O5,d.hgI,d.j_n,c.JJ,c.u,d.rLF,d.r0F],pipes:[r.Ov,Pe.F],styles:[".grouping-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function da(o,l){1&o&&(e.TgZ(0,"div",4)(1,"nui-message",5),e.tHW(2,6),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("allowDismiss",!1))}let po=(()=>{class o{constructor(t,i,n,s){this.pizzagnaService=t,this.changeDetector=i,this.formBuilder=n,this.eventBus=s,this.tiles=[],this.formReady=new e.vpe}ngOnChanges(t){}onFormReady(t){this.form=this.formBuilder.group({tiles:t}),this.emptyItems$=this.form.valueChanges.pipe((0,ct.U)(i=>0===i.tiles.length)),this.formReady.emit(this.form)}onItemsChange(t){const n=t.map(p=>p.id);this.pizzagnaService.createComponentsFromTemplate("tiles",n),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["tiles"]},t)}addTile(){this.onItemsChange([...this.tiles,{id:(0,d.VjN)("kpi"),componentType:q.lateLoadKey}])}}return o.lateLoadKey="KpiTilesConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(se.p),e.Y36(e.sBO),e.Y36(c.qu),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-kpi-tiles-configuration-component"]],inputs:{componentId:"componentId",tiles:"tiles",nodes:"nodes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:5,vars:5,consts:function(){let l,t;return l=$localize`:␟79e4ae6fc9c1cd1ee331414b873fb40154ad1e95␟5306337511240259794: Add new value
`,t=$localize`:␟7ca16fec6555e99e64e1cbd41a9ce7a4f4cae2fd␟4636957726236815999:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one value must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","kpi-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],l,[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],t]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(s){return i.onItemsChange(s)})("formReady",function(s){return i.onFormReady(s)}),e.qZA(),e.YNc(1,da,4,1,"div",1),e.ALo(2,"async"),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.addTile()}),e.SDv(4,3),e.qZA()),2&t&&(e.Q6J("items",i.tiles)("nodes",i.nodes),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,i.emptyItems$)&&i.form.touched))},directives:[zt,r.O5,d.qqZ,d.r0F],pipes:[r.Ov],encapsulation:2,changeDetection:0}),o})();const ca=["metricsSelect"];function _a(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",9),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function ua(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div")(2,"nui-form-field",2)(3,"nui-select-v2",3,4)(5,"nui-overlay-item",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().unsetMetric()}),e._uU(6,"Unset"),e.qZA(),e.YNc(7,_a,2,3,"nui-select-v2-option",6),e.qZA(),e.TgZ(8,"nui-validation-message",7),e.SDv(9,8),e.qZA()()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.form.controls.activeMetricId),e.xp6(5),e.Q6J("ngForOf",t.metrics)}}let kt=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.formBuilder=i,this.logger=n,this.formReady=new e.vpe,this.form=this.formBuilder.group({activeMetricId:[]})}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i;t.activeMetricId&&(null===(i=this.form.get("activeMetricId"))||void 0===i||i.setValue(t.activeMetricId.currentValue),this.metrics.find(s=>s.id===t.activeMetricId.currentValue)||this.logger.warn(`AggregatorMetricSelectorConfigurationComponent: No metric found for id: ${t.activeMetricId.currentValue}`))}unsetMetric(){this.form.controls.activeMetricId.reset(),this.meticsSelect.hideDropdown()}}return o.lateLoadKey="AggregatorMetricSelectorConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-aggregator-configurator"]],viewQuery:function(t,i){if(1&t&&e.Gf(ca,5),2&t){let n;e.iGM(n=e.CRH())&&(i.meticsSelect=n.first)}},inputs:{metrics:"metrics",activeMetricId:"activeMetricId"},outputs:{formReady:"formReady"},features:[e.TTD],decls:1,vars:1,consts:function(){let l,t,i;return l=$localize`:␟f43d8212e6ffbc04ea0190118e7f893824ec2686␟8120854355855055890:Default Metric`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["caption",l,1,"mb-3",3,"control"],["formControlName","activeMetricId","placeholder",t],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,ua,10,3,"div",0),2&t&&e.Q6J("ngIf",i.form)},directives:[r.O5,c.JL,c.sg,d.hgI,d.j_n,c.JJ,c.u,d.A4p,r.sg,d.rLF,d.CfE],encapsulation:2,changeDetection:0}),o})();function pa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function ga(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function ha(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"nui-form-field",3)(3,"nui-select-v2",4,5)(5,"nui-overlay-item",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().unsetMetric()}),e._uU(6,"Unset"),e.qZA(),e.YNc(7,pa,2,3,"nui-select-v2-option",7),e.qZA(),e.TgZ(8,"nui-validation-message",8),e.SDv(9,9),e.qZA()()(),e.TgZ(10,"div",2)(11,"nui-form-field",10)(12,"nui-select-v2",11),e.YNc(13,ga,2,3,"nui-select-v2-option",7),e.qZA(),e.TgZ(14,"nui-validation-message",8),e.SDv(15,12),e.qZA()()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.form.controls.activeMetricId),e.xp6(5),e.Q6J("ngForOf",t.metrics),e.xp6(4),e.Q6J("control",t.form.controls.chartSeriesDataFieldId),e.xp6(2),e.Q6J("ngForOf",t.chartSeriesDataFields)}}const ma={id:"data[0]",label:"data",dataType:null};let go=(()=>{class o extends kt{constructor(t,i,n,s){super(t,i,n),this.eventBus=s,this.chartSeriesDataFields=[ma],this.form=this.formBuilder.group({activeMetricId:[],chartSeriesDataFieldId:[]}),this.destroy$=new te.x,this.eventBus.getStream(we.gg).pipe((0,le.R)(this.destroy$)).subscribe(p=>{var f,D;const $=p.payload;$&&(null===(D=null===(f=$.dataFieldsConfig)||void 0===f?void 0:f.chartSeriesDataFields$)||void 0===D||D.pipe((0,le.R)(this.destroy$)).subscribe(Q=>this.chartSeriesDataFields=Q))})}ngOnChanges(t){var i;super.ngOnChanges(t),t.chartSeriesDataFieldId&&(null===(i=this.form.get("chartSeriesDataFieldId"))||void 0===i||i.setValue(t.chartSeriesDataFieldId.currentValue))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.lateLoadKey="FieldMapperAggregatorConfiguratorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu),e.Y36(d.mQy),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-field-mapper-aggregator-configurator"]],inputs:{chartSeriesDataFieldId:"chartSeriesDataFieldId"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:function(){let l,t,i,n,s,p;return l=$localize`:␟f43d8212e6ffbc04ea0190118e7f893824ec2686␟8120854355855055890:Default Metric`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,n=$localize`:␟8e67f0d2aff5ba1a2d509b591efa53a4d2076369␟5258061076548910132:Chart Series Data Field`,s=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,p=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"mb-4"],["caption",l,1,"mb-4",3,"control"],["formControlName","activeMetricId","placeholder",t],["metricsSelect",""],[1,"nui-combobox-v2__popup-box",2,"cursor","pointer",3,"click"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,["caption",n,1,"mb-4",3,"control"],["formControlName","chartSeriesDataFieldId","placeholder",s],p,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,ha,16,5,"div",0),2&t&&e.Q6J("ngIf",i.form)},directives:[r.O5,c.JL,c.sg,d.hgI,d.j_n,c.JJ,c.u,d.A4p,r.sg,d.rLF,d.CfE],encapsulation:2,changeDetection:0}),o})();function fa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Ta(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Ca(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",23),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}let ho=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.formReady=new e.vpe,this.form=this.formBuilder.group({type:[void 0,c.kI.required],legendPlacement:[void 0],legendFormatter:this.formBuilder.group({componentType:[void 0]})}),this.chartTypeChanged$=new te.x,this.destroy$=new te.x,this.legendFormatters=s.getItems(),this.form.controls.type.valueChanges.pipe((0,le.R)(this.destroy$)).subscribe(p=>this.chartTypeChanged$.next(p))}ngOnInit(){this.formReady.emit(this.form)}ngOnChanges(t){var i;t.type&&this.form.controls.type.setValue(t.type.currentValue),t.legendPlacement&&this.form.controls.legendPlacement.setValue(t.legendPlacement.currentValue),t.legendFormatter&&(null===(i=this.form.get("legendFormatter.componentType"))||void 0===i||i.setValue(t.legendFormatter.currentValue.componentType))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.chartTypeChanged$.complete()}get chartTitle(){var t;const i=null===(t=this.form.get("type"))||void 0===t?void 0:t.value,n=this.chartTypes.find(s=>s.id===i);return null==n?void 0:n.label}get legendFormatterControl(){return this.form.get("legendFormatter.componentType")}}return o.lateLoadKey="ProportionalChartOptionsEditorV2Component",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(We.p),e.Y36(c.qu),e.Y36(de.qy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-proportional-chart-options-editor-v2-component"]],inputs:{type:"type",legendPlacement:"legendPlacement",legendFormatter:"legendFormatter",chartTypes:"chartTypes",legendPlacementOptions:"legendPlacementOptions"},outputs:{formReady:"formReady"},features:[e.TTD],decls:35,vars:31,consts:function(){let l,t,i,n,s,p,f,D;return l=$localize`:␟f3ecd72a8d0f15303a8f7f61c278783962a6d00c␟4926288099895660391:Chart Options`,t=$localize`:␟f2102c0b996b067ab2a46c7743fe5931fa47f16d␟7337152278540773645:Chart Type`,i=$localize`:␟35a0bc25979ae578aea9594e8c587200628713e1␟5551943712413491013:Select chart type`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`,p=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,f=$localize`:␟7f0b920b08ab06e490eff4f718ef3fecc87a719b␟5989769742900149410:Legend format`,D=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","type",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],n,["caption",s,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],p,["formGroupName","legendFormatter"],["caption",f,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],D,[3,"displayValueContext","value"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.ALo(16,"async"),e.YNc(17,fa,2,3,"nui-select-v2-option",11),e.qZA(),e.TgZ(18,"nui-validation-message",12),e.SDv(19,13),e.qZA()()(),e.TgZ(20,"div",8)(21,"nui-form-field",14)(22,"nui-select-v2",15),e.ALo(23,"async"),e.YNc(24,Ta,2,2,"nui-select-v2-option",16),e.qZA(),e.TgZ(25,"nui-validation-message",12),e.SDv(26,17),e.qZA()()(),e.TgZ(27,"div",8),e.ynx(28,18),e.TgZ(29,"nui-form-field",19)(30,"nui-select-v2",20),e.ALo(31,"async"),e.YNc(32,Ca,2,2,"nui-select-v2-option",16),e.qZA(),e.TgZ(33,"nui-validation-message",12),e.SDv(34,21),e.qZA()(),e.BQk(),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form)("state",e.lcZ(1,16,e.lcZ(2,18,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,20,e.xi3(6,22,i.form,"widget_pie-chart"))),e.xp6(6),e.Q6J("title",i.chartTitle),e.xp6(1),e.hij(" ",i.chartTitle," "),e.xp6(3),e.Q6J("control",i.form.controls.type),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(16,25,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartTypes),e.xp6(4),e.Q6J("showOptionalText",!1)("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(23,27,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendPlacementOptions),e.xp6(5),e.Q6J("showOptionalText",!1)("control",i.legendFormatterControl),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(31,29,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendFormatters))},directives:[Me.J,c.JL,c.sg,d.oJW,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,d.CfE,c.x0],pipes:[r.Ov,Pe.F,be.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Oa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Ia(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function va(o,l){}const Ea=function(){return["formReady"]};function Sa(o,l){if(1&o){const t=e.EpF();e.ynx(0,27,28),e.NdJ("output",function(n){return e.CHM(t),e.oxw(2).onFormReady(n.payload)}),e.YNc(2,va,0,0,"ng-template",29),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentId",i.getConfigurationComponent())("componentType",i.getConfigurationComponent())("properties",i.configurationComponentProperties)("outputs",e.DdM(5,Ea)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function Ra(o,l){if(1&o&&(e.ynx(0,23),e.TgZ(1,"nui-form-field",24)(2,"nui-select-v2",20),e.ALo(3,"async"),e.YNc(4,Ia,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(5,"nui-validation-message",12),e.SDv(6,25),e.qZA()(),e.YNc(7,Sa,3,6,"ng-container",26),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("showOptionalText",!1)("control",t.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(3,5,t.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",t.contentFormatters),e.xp6(3),e.Q6J("ngIf",!!t.getConfigurationComponent())}}function Na(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function Aa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}const ya={[V.DonutChart]:$localize`Donut`,[V.PieChart]:$localize`Pie`,[V.VerticalBarChart]:$localize`Vertical Bar`,[V.HorizontalBarChart]:$localize`Horizontal Bar`};let mo=(()=>{class o{constructor(t,i,n){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.legendPlacement=y.w.None,this.formReady=new e.vpe,this.chartTypeNamesMap=ya,this.legendFormatters=[],this.contentFormatters=[],this.formatterHasConfigurationComponent=!1,this.currentConfigurationComponent="",this.chartFormatters=[],this.cachedChartOptionsViewModels=[],this.rawFormatter={componentType:"",label:$localize`Raw`,dataTypes:{value:null}}}get chartTypeSelectViewModels(){var t,i,n;return(!this.cachedChartOptionsViewModels||this.cachedChartOptionsViewModels.length!==(null===(i=null===(t=this.chartOptions)||void 0===t?void 0:t.chartTypes)||void 0===i?void 0:i.length))&&(this.cachedChartOptionsViewModels=((null===(n=this.chartOptions)||void 0===n?void 0:n.chartTypes)||[]).map(s=>({label:this.chartTypeNamesMap[s],value:s}))),this.cachedChartOptionsViewModels}get chartTitle(){return this.chartTypeNamesMap[this.form.controls.type.value]}getConfigurationComponent(){var t;return(null===(t=this.getCurrentFormatterDefinition())||void 0===t?void 0:t.configurationComponent)||""}getConfigurationComponentProperties(){this.configurationComponentProperties={contentFormatterProperties:this.contentFormatterProperties,contentFormatterDefinition:this.getCurrentFormatterDefinition(),dsOutput:this.dsOutput}}getCurrentFormatterDefinition(){var t;const i=null===(t=this.form.get("contentFormatter.componentType"))||void 0===t?void 0:t.value;return this.contentFormatters.find(n=>n.componentType===i)}ngOnInit(){this.form=this.formBuilder.group({type:[this.chartType||"",c.kI.required],legendPlacement:this.legendPlacement,legendFormatter:this.formBuilder.group({componentType:this.legendFormatterComponentType||this.rawFormatter.componentType}),contentFormatter:this.formBuilder.group({componentType:this.contentFormatterComponentType})}),this.legendFormatters=[this.rawFormatter,...this.chartOptions.legendFormatters||[]],this.contentFormatters=[...this.chartOptions.contentFormatters||[]],this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,p;t.chartType&&!t.chartType.isFirstChange()&&(null===(i=this.form.get("type"))||void 0===i||i.setValue(t.chartType.currentValue)),t.legendPlacement&&!t.legendPlacement.isFirstChange()&&(null===(n=this.form.get("legendPlacement"))||void 0===n||n.setValue(t.legendPlacement.currentValue)),t.legendFormatterComponentType&&!t.legendFormatterComponentType.isFirstChange()&&(null===(s=this.form.get("legendFormatter").get("componentType"))||void 0===s||s.setValue(this.legendFormatterComponentType)),t.contentFormatterComponentType&&!t.contentFormatterComponentType.isFirstChange()&&(null===(p=this.form.get("contentFormatter").get("componentType"))||void 0===p||p.setValue(this.contentFormatterComponentType)),this.form&&this.getConfigurationComponentProperties()}onFormReady(t){this.form.get("contentFormatter").setControl("properties",t)}}return o.lateLoadKey="ProportionalChartOptionsEditorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(We.p),e.Y36(c.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-proportional-chart-options-editor-component"]],inputs:{chartOptions:"chartOptions",chartType:"chartType",legendPlacement:"legendPlacement",legendFormatterComponentType:"legendFormatterComponentType",contentFormatterComponentType:"contentFormatterComponentType",contentFormatterProperties:"contentFormatterProperties",dsOutput:"dsOutput"},outputs:{formReady:"formReady"},features:[e.TTD],decls:36,vars:32,consts:function(){let l,t,i,n,s,p,f,D,$,Q;return l=$localize`:␟f3ecd72a8d0f15303a8f7f61c278783962a6d00c␟4926288099895660391:Chart Options`,t=$localize`:␟f2102c0b996b067ab2a46c7743fe5931fa47f16d␟7337152278540773645:Chart Type`,i=$localize`:␟35a0bc25979ae578aea9594e8c587200628713e1␟5551943712413491013:Select chart type`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`,p=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,f=$localize`:␟7f0b920b08ab06e490eff4f718ef3fecc87a719b␟5989769742900149410:Legend format`,D=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,$=$localize`:␟7aad3a4ab45c0132aefc2da9c78cde45d3593850␟4108378864701615700:Content format`,Q=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"proportional-widget-chart-options-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["formControlName","type","placeholder",i,3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],["for","required"],n,["formGroupName","contentFormatter",4,"ngIf"],["caption",s,3,"showOptionalText","control"],["formControlName","legendPlacement",3,"popupViewportMargin"],p,["formGroupName","legendFormatter"],["caption",f,3,"showOptionalText","control"],["formControlName","componentType",3,"popupViewportMargin"],D,[3,"value"],["formGroupName","contentFormatter"],["caption",$,1,"mb-4",3,"showOptionalText","control"],Q,["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output",4,"ngIf"],["nuiComponentPortal","",3,"componentId","componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){if(1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0),e.ALo(1,"async"),e.ALo(2,"nuiWidgetEditorAccordionFormState"),e.TgZ(3,"div",1),e._UZ(4,"nui-icon",2),e.ALo(5,"async"),e.ALo(6,"nuiFormHeaderIconPipe"),e.TgZ(7,"div",3)(8,"span",4),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.ALo(16,"async"),e.YNc(17,Oa,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(18,"nui-validation-message",12),e.SDv(19,13),e.qZA()()(),e.TgZ(20,"div",8),e.YNc(21,Ra,8,7,"ng-container",14),e.qZA(),e.TgZ(22,"div",8)(23,"nui-form-field",15)(24,"nui-select-v2",16),e.ALo(25,"async"),e.YNc(26,Na,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(27,"nui-validation-message",12),e.SDv(28,17),e.qZA()()(),e.ynx(29,18),e.TgZ(30,"nui-form-field",19)(31,"nui-select-v2",20),e.ALo(32,"async"),e.YNc(33,Aa,2,2,"nui-select-v2-option",11),e.qZA(),e.TgZ(34,"nui-validation-message",12),e.SDv(35,21),e.qZA()(),e.BQk(),e.qZA()()),2&t){let n;e.Q6J("formGroup",i.form)("state",e.lcZ(1,17,e.lcZ(2,19,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(5,21,e.xi3(6,23,i.form,"widget_pie-chart"))),e.xp6(6),e.Q6J("title",i.chartTitle),e.xp6(1),e.hij(" ",i.chartTitle," "),e.xp6(3),e.Q6J("control",i.form.controls.type),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(16,26,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartTypeSelectViewModels),e.xp6(4),e.Q6J("ngIf","DonutChart"===(null==(n=i.form.get("type"))?null:n.value)),e.xp6(2),e.Q6J("showOptionalText",!1)("control",i.form.controls.legendPlacement),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(25,28,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.chartOptions.legendPlacementOptions),e.xp6(4),e.Q6J("showOptionalText",!1)("control",i.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(32,30,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.legendFormatters)}},directives:[Me.J,c.JL,c.sg,d.oJW,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,d.CfE,r.O5,c.x0,b.$,w.Pl],pipes:[r.Ov,Pe.F,be.d],styles:[".proportional-widget-chart-options-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Ma(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.aggregatorType),e.xp6(1),e.hij(" ",t.label," ")}}function Pa(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function Da(o,l){}const fo=function(){return["formReady"]};function Fa(o,l){if(1&o){const t=e.EpF();e.ynx(0,19,20),e.NdJ("output",function(n){return e.CHM(t),e.oxw(2).onFormReady("aggregator",n.payload)}),e.YNc(2,Da,0,0,"ng-template",21),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentType",null==i.currentAggregatorDefinition?null:i.currentAggregatorDefinition.configurationComponent)("properties",i.aggregatorConfiguratorProps)("outputs",e.DdM(4,fo)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function ba(o,l){}function xa(o,l){if(1&o){const t=e.EpF();e.ynx(0,19,20),e.NdJ("output",function(n){return e.CHM(t),e.oxw(2).onFormReady("formatter",n.payload)}),e.YNc(2,ba,0,0,"ng-template",21),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw(2);e.Q6J("componentType",null==i.currentFormatterDefinition?null:i.currentFormatterDefinition.configurationComponent)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,fo)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}function La(o,l){if(1&o&&(e.ynx(0,1),e.TgZ(1,"nui-widget-editor-accordion",2),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",3),e._UZ(5,"nui-icon",4),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",5)(9,"span",6),e.SDv(10,7),e.qZA(),e.TgZ(11,"div",8),e._uU(12),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"nui-form-field",11)(16,"nui-select-v2",12),e.YNc(17,Ma,2,3,"nui-select-v2-option",13),e.qZA()()(),e.TgZ(18,"div",14)(19,"nui-form-field",15)(20,"nui-select-v2",16),e.YNc(21,Pa,2,3,"nui-select-v2-option",13),e.qZA()()(),e.YNc(22,Fa,3,5,"ng-container",17),e.YNc(23,xa,3,5,"ng-container",17),e.qZA()(),e.BQk()),2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("state",e.lcZ(2,11,e.lcZ(3,13,t.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,15,e.xi3(7,17,t.form,"customize"))),e.xp6(6),e.Q6J("title",t.subtitleText),e.xp6(1),e.hij(" ",t.subtitleText," "),e.xp6(3),e.Q6J("control",t.form.get("aggregator.aggregatorType")),e.xp6(2),e.Q6J("ngForOf",t.aggregators),e.xp6(2),e.Q6J("control",t.form.get("formatter.componentType")),e.xp6(2),e.Q6J("ngForOf",t.formatters),e.xp6(1),e.Q6J("ngIf",null==t.currentAggregatorDefinition?null:t.currentAggregatorDefinition.configurationComponent),e.xp6(1),e.Q6J("ngIf",null==t.currentFormatterDefinition?null:t.currentFormatterDefinition.configurationComponent)}}let To=(()=>{class o{constructor(t,i,n,s,p){this.formBuilder=t,this.changeDetector=i,this.eventBus=n,this.contentFormattersRegistry=s,this.aggregatorRegistry=p,this.formReady=new e.vpe,this.shown=!0,this.form=this.formBuilder.group({formatter:this.formBuilder.group({componentType:[void 0],properties:[]}),aggregator:this.formBuilder.group({aggregatorType:[void 0],properties:[]})}),this.dataFields=[],this.destroy$=new te.x}ngOnInit(){this.watchFormChanges(),this.setFromRegistry(),this.eventBus.getStream(we.gg).pipe((0,le.R)(this.destroy$)).subscribe(t=>{var i;const n=t.payload;n&&(null===(i=n.dataFieldsConfig)||void 0===i||i.dataFields$.pipe((0,le.R)(this.destroy$)).subscribe(s=>{this.dataFields=s,this.updateAggregatorConfiguratorProps()}))}),this.formReady.emit(this.form)}ngOnChanges(t){var i,n;t.formatter&&(null===(i=this.form.get("formatter"))||void 0===i||i.patchValue(Object.assign({},t.formatter.currentValue))),t.aggregator&&(null===(n=this.form.get("aggregator"))||void 0===n||n.patchValue(Object.assign({},t.aggregator.currentValue))),t.chartType&&(this.shown=t.chartType.currentValue===V.DonutChart)}ngOnDestroy(){this.destroy$.complete()}onFormReady(t,i){this.form.get(t).setControl("properties",i)}get subtitleText(){var t,i;return`${null===(t=this.currentAggregatorDefinition)||void 0===t?void 0:t.label}, ${null===(i=this.currentFormatterDefinition)||void 0===i?void 0:i.label}`}setFromRegistry(){var t,i;this.formatters=this.contentFormattersRegistry.getItems(),this.aggregators=this.aggregatorRegistry.getItems();let n=this.formatters.find(p=>{var f;return p.componentType===(null===(f=this.formatter)||void 0===f?void 0:f.componentType)});n||(n=this.formatters[0]),null===(t=this.form.get("formatter.componentType"))||void 0===t||t.setValue(n.componentType);let s=this.aggregators.find(p=>{var f;return p.aggregatorType===(null===(f=this.aggregator)||void 0===f?void 0:f.aggregatorType)});s||(s=this.aggregators[0]),null===(i=this.form.get("aggregator.aggregatorType"))||void 0===i||i.setValue(s.aggregatorType)}watchFormChanges(){var t,i;null===(t=this.form.get("aggregator.aggregatorType"))||void 0===t||t.valueChanges.pipe((0,le.R)(this.destroy$)).subscribe(n=>{this.currentAggregatorDefinition=this.aggregators.find(s=>s.aggregatorType===n),this.updateAggregatorConfiguratorProps()}),null===(i=this.form.get("formatter.componentType"))||void 0===i||i.valueChanges.pipe((0,le.R)(this.destroy$)).subscribe(n=>{this.currentFormatterDefinition=this.formatters.find(s=>s.componentType===n),this.updateAggregatorConfiguratorProps()})}updateAggregatorConfiguratorProps(){var t,i;this.aggregatorConfiguratorProps=Object.assign(Object.assign(Object.assign({},null===(t=this.currentAggregatorDefinition)||void 0===t?void 0:t.properties),null===(i=this.aggregator)||void 0===i?void 0:i.properties),{metrics:this.dataFields})}}return o.lateLoadKey="DonutContentConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(e.sBO),e.Y36(h.nY),e.Y36(de.UA),e.Y36(Ce))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-donut-content-configuration"]],inputs:{chartType:"chartType",formatter:"formatter",aggregator:"aggregator"},outputs:{formReady:"formReady"},features:[e.TTD],decls:1,vars:1,consts:function(){let l,t,i,n,s;return l=$localize`:␟c488fe848f6a00cefad87ff595b384e4e0f7ff1d␟2010665105219070274:Donut Content Configuration`,t=$localize`:␟87181c5142c58c027d97ac0f37b9c6bb78b624cd␟6056551297792932760:Aggregate`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,n=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,s=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"donut-content-configuration__accordion-content"],["formGroupName","aggregator",1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","aggregatorType"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["formGroupName","formatter",1,"mb-4"],["caption",n,3,"control"],["placeholder",s,"formControlName","componentType"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&e.YNc(0,La,24,20,"ng-container",0),2&t&&e.Q6J("ngIf",i.shown)},directives:[r.O5,c.JL,c.sg,Me.J,d.oJW,c.x0,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,b.$,w.Pl],pipes:[r.Ov,Pe.F,be.d],styles:[".donut-content-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Ai(o,l){const t=o.markAsTouched;o.markAsTouched=()=>{t.apply(o,arguments),l()}}function Ga(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"nui-form-field",20)(3,"nui-textbox-number",21),e.NdJ("valueChange",function(){return e.CHM(t),e.oxw(2).stub()}),e.qZA(),e.TgZ(4,"nui-validation-message",22),e.SDv(5,23),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("control",t.form.controls.width),e.xp6(2),e.Q6J("show",t.form.controls.width.invalid)}}function wa(o,l){1&o&&(e.TgZ(0,"div",19)(1,"nui-message",24),e.tHW(2,25),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function $a(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Ga,6,2,"ng-container",17),e.YNc(2,wa,4,1,"div",18),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isWidthMessageDisplayedForThisColumn()),e.xp6(1),e.Q6J("ngIf",t.isWidthMessageDisplayedForThisColumn())}}let Co=(()=>{class o{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.isWidthMessageDisplayed=!1,this.destroy$=new te.x,this.form=this.formBuilder.group({label:["",[c.kI.required]],isActive:!0,width:void 0}),this.form.valueChanges.pipe((0,le.R)(this.destroy$)).subscribe(n=>{var s;null===(s=this.changeFn)||void 0===s||s.call(this,n)})}registerOnChange(t){this.changeFn=t}registerOnTouched(t){}setDisabledState(t){t?this.form.disable():this.form.enable()}validate(t){return this.form.valid?null:{nestedForm:!0}}writeValue(t){this.form.patchValue({label:t.label,isActive:t.isActive,width:t.width},{emitEvent:!1}),this.changeDetector.markForCheck()}ngOnInit(){Ai(this.formControl,()=>{this.form.markAllAsTouched()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}stub(){}isWidthMessageDisplayedForThisColumn(){return this.isWidthMessageDisplayed&&"number"!=typeof this.form.controls.width.value}}return o.lateLoadKey="DescriptionConfigurationV2Component",o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-description-configuration-v2"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:c.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}])],decls:23,vars:17,consts:function(){let l,t,i,n,s,p,f,D;return l=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,n=$localize`:␟49e97f1ac4309fd5992a9520d74fa732c4a77481␟5413084173448405143:Show this column`,s=$localize`:␟6b3f02f1feab94e0f0a6823f49a009fa7be7dfa9␟8419094197651631948:Column width (px)`,p=$localize`:␟455a91268699c6879146b5fe44595de6628e6d32␟4319439665214681027:Auto width`,f=$localize`:␟356aa3e61db78cca0742edfab898c6bf0c8051a6␟3835988025416576743: Minimum width of the column is 62px `,D=$localize`:␟8e3d3c0a38f0221dc5901334290180f5705a0fbf␟2546138047162560558:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:All columns cannot have fixed width.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"mb-3",3,"control"],["formControlName","label"],["for","required"],i,[3,"control"],["formControlName","isActive"],n,[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",s,1,"mb-3",3,"control"],["placeholder",p,"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],f,["type","info",3,"allowDismiss"],D]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10),e._UZ(16,"nui-textbox",11),e.TgZ(17,"nui-validation-message",12),e.SDv(18,13),e.qZA()()(),e.TgZ(19,"nui-form-field",14)(20,"nui-checkbox",15),e.SDv(21,16),e.qZA()(),e.YNc(22,$a,3,2,"ng-container",17),e.qZA()(),e.BQk()),2&t){let n;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,8,e.lcZ(3,10,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,12,e.xi3(7,14,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.form.controls.label.value),e.xp6(1),e.hij(" ",i.form.controls.label.value," "),e.xp6(3),e.Q6J("control",i.form.controls.label),e.xp6(4),e.Q6J("control",i.form.controls.isActive),e.xp6(3),e.Q6J("ngIf",null==(n=i.form.get("isActive"))?null:n.value)}},directives:[c.JL,c.sg,Me.J,d.oJW,d.hgI,d.XHW,c.JJ,c.u,d.CfE,d.bK4,r.O5,d.I5I,d.qqZ],pipes:[r.Ov,Pe.F,be.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();var Oo=a(50793);function Ua(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function za(o,l){}const Ba=function(){return["formReady"]};function Wa(o,l){if(1&o){const t=e.EpF();e.ynx(0,15,16),e.NdJ("output",function(n){return e.CHM(t),e.oxw().onFormReady(n.payload)}),e.YNc(2,za,0,0,"ng-template",17),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",i.formatterConfigurator)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,Ba)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let Io=(()=>{class o{constructor(t,i,n,s,p,f){var D,$,Q;this.formBuilder=t,this.changeDetector=i,this.configuratorHeading=n,this.eventBus=s,this.formattersRegistryCommon=p,this.tableFormattersRegistryService=f,this._dataFields=[],this.onDestroy$=new te.x,this.providedFormatters=[],this._formatters=[],this.propertiesFormReady=new te.x,this.subscribeToFormattersRegistry(),this.form=this.formBuilder.group({componentType:this.formBuilder.control(null===($=null===(D=this.providedFormatters)||void 0===D?void 0:D[0])||void 0===$?void 0:$.componentType,c.kI.required),properties:this.formBuilder.control({},()=>{var X;return(null===(X=this.propertiesForm)||void 0===X?void 0:X.invalid)?{properties:!0}:null})}),null===(Q=this.form.get("componentType"))||void 0===Q||Q.valueChanges.pipe((0,le.R)(this.onDestroy$)).subscribe(()=>this.createFormatterConfigurator()),this.form.valueChanges.pipe((0,le.R)(this.onDestroy$)).subscribe(()=>{this.updateSubtitle(),this.onValueChange(),this.changeDetector.detectChanges()}),this.eventBus.subscribeUntil(we.PF,this.onDestroy$,X=>{const{dataFields:ce}=Bt()(X.payload.result)?X.payload:X.payload.result||{};this.dataFields=ce})}set formatters(t){!this.tableFormattersRegistryService.isEmpty||this.handleFormattersUpdate(t)}get formatters(){return this._formatters}set dataFields(t){this._dataFields=t,this.updateAvailableFormatters()}get dataFields(){return this._dataFields}get formatter(){var t;return null===(t=this.form)||void 0===t?void 0:t.value}ngOnInit(){Ai(this.formControl,()=>{this.form.markAllAsTouched(),this.propertiesForm.markAllAsTouched()})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}ngOnChanges(t){}registerOnChange(t){this.changeFn=t}registerOnTouched(t){this.touchFn=t}setDisabledState(t){}writeValue(t){this.input=t,this.form.patchValue(t,{emitEvent:!1}),this.createFormatterConfigurator(),this.changeDetector.markForCheck()}validate(t){return!this.form.valid||this.propertiesForm&&!this.propertiesForm.valid?{error:"error"}:null}getSelectedFormatterDefinition(){var t,i;if(this.providedFormatters.length>0){const n=null===(t=this.form.get("componentType"))||void 0===t?void 0:t.value;return null!==(i=this.providedFormatters.find(s=>s.componentType===n))&&void 0!==i?i:null}return null}getSelectedDataField(){var t,i;const n=this.form.controls.properties;if(n&&this.dataFields&&this.dataFields.length>0){const s=null===(t=n.value.dataFieldIds)||void 0===t?void 0:t.value;return null!==(i=this.dataFields.find(p=>p.id===s))&&void 0!==i?i:null}return null}ngDoCheck(){if(!this.form||!this.propertiesForm)return;const t=this.form.controls.properties;this.propertiesForm.touched&&t.untouched&&(t.markAsTouched(),this.changeDetector.markForCheck()),this.propertiesForm.untouched&&t.touched&&(t.markAsUntouched(),this.changeDetector.markForCheck())}onFormReady(t){this.propertiesFormReady.next(),this.propertiesForm=t;const i=this.form.controls.properties;i.markAsPristine(),this.propertiesForm.valueChanges.pipe((0,le.R)(this.propertiesFormReady)).subscribe(()=>{i.setValue(this.propertiesForm.value),this.onValueChange()}),this.propertiesForm.patchValue(this.formatter.properties)}onValueChange(){var t;null===(t=this.changeFn)||void 0===t||t.call(this,this.form.value)}updateSubtitle(){var t,i;this.subtitleText=`${null===(t=this.getSelectedFormatterDefinition())||void 0===t?void 0:t.label}`,this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(`, ${null===(i=this.getSelectedDataField())||void 0===i?void 0:i.label}`))}createFormatterConfigurator(){var t,i,n,s;const p=this.providedFormatters.find(f=>{var D;return f.componentType===(null===(D=this.form.get("componentType"))||void 0===D?void 0:D.value)});this.formatterConfigurator=p?null!==(t=p.configurationComponent)&&void 0!==t?t:"ValueSelectorComponent":null,(null==p?void 0:p.componentType)!==(null===(i=this.formatter)||void 0===i?void 0:i.componentType)&&(null===(s=null===(n=this.formatter)||void 0===n?void 0:n.properties)||void 0===s?void 0:s.dataFieldIds)&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:p}}updateAvailableFormatters(){var t;if(!(null===(t=this._dataFields)||void 0===t?void 0:t.length)||!this.providedFormatters.length)return;const i={null:!0};this._dataFields.forEach(n=>i[n.dataType]=!0),this._formatters=this.providedFormatters.filter(n=>(n.dataTypes.value instanceof Array?n.dataTypes.value:[n.dataTypes.value]).some(p=>i[p])),this.form&&this.createFormatterConfigurator()}subscribeToFormattersRegistry(){this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,le.R)(this.onDestroy$)).subscribe(t=>{this.handleFormattersUpdate(t)})}handleFormattersUpdate(t){t!==this.providedFormatters&&(this.providedFormatters=(null==t?void 0:t.length)>0?t:Oo.X,this.updateAvailableFormatters())}get formattersRegistry(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}}return o.lateLoadKey="PresentationConfigurationV2Component",o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(e.sBO),e.Y36(We.p),e.Y36(h.nY),e.Y36(h.m4,8),e.Y36(de.C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-presentation-configuration-v2"]],inputs:{formatters:"formatters",dataFieldIds:"dataFieldIds",formControl:"formControl"},features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:c.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}],[{provide:c.gN,useExisting:c.sg}]),e.TTD],decls:20,vars:20,consts:function(){let l,t,i;return l=$localize`:␟3c991a92a6b04b4f5a42f0b72befa96a8d2e809c␟5065098939944125110:Property and formatting`,t=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10)(16,"nui-select-v2",11),e.ALo(17,"async"),e.YNc(18,Ua,2,3,"nui-select-v2-option",12),e.qZA()()(),e.YNc(19,Wa,3,5,"ng-container",13),e.qZA()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form,"customize"))),e.xp6(6),e.Q6J("title",i.subtitleText),e.xp6(1),e.hij(" ",i.subtitleText," "),e.xp6(3),e.Q6J("control",i.form.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(17,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.formatters),e.xp6(1),e.Q6J("ngIf",i.formatterConfigurator))},directives:[c.JL,c.sg,Me.J,d.oJW,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,r.O5,b.$,w.Pl],pipes:[r.Ov,Pe.F,be.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})(),vo=(()=>{class o{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.destroy$=new te.x,this.isWidthMessageDisplayed=!1,this.form=this.formBuilder.group({description:this.formBuilder.control({}),presentation:this.formBuilder.control({})}),this.form.valueChanges.pipe((0,le.R)(this.destroy$)).subscribe(n=>{var s;const p=Object.assign(Object.assign({id:null===(s=this.input)||void 0===s?void 0:s.id},n.description),{formatter:n.presentation});this.changeFn(p)})}ngOnInit(){Ai(this.formControl,()=>{this.form.markAllAsTouched()})}registerOnChange(t){this.changeFn=t}registerOnTouched(t){}setDisabledState(t){}validate(t){return this.form.valid?null:{error:"error"}}writeValue(t){this.input=t,this.form.setValue({presentation:(null==t?void 0:t.formatter)||{},description:t},{emitEvent:!1}),this.changeDetector.markForCheck()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.lateLoadKey="TableColumnConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-column-configuration"]],inputs:{formControl:"formControl",isWidthMessageDisplayed:"isWidthMessageDisplayed"},features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:c.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}])],decls:3,vars:4,consts:[[3,"formGroup"],[3,"formControl","isWidthMessageDisplayed"],[3,"formControl"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"nui-description-configuration-v2",1)(2,"nui-presentation-configuration-v2",2),e.qZA()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("formControl",i.form.controls.description)("isWidthMessageDisplayed",i.isWidthMessageDisplayed),e.xp6(1),e.Q6J("formControl",i.form.controls.presentation))},directives:[c.JL,c.sg,Co,c.JJ,c.oH,Io],encapsulation:2}),o})();var ka=a(90377),Eo=a.n(ka),Za=a(61874);function Va(o,l){if(1&o&&e._UZ(0,"nui-drop-area",16),2&o){const t=e.oxw(3);e.Udp("height",t.draggedItemHeight,"px")}}function Ja(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"div",17),e._UZ(2,"nui-icon",18),e.qZA(),e.BQk(),e.TgZ(3,"span",19),e.ALo(4,"nuiWidgetConfiguratorSectionHeader"),e._uU(5),e.ALo(6,"nuiWidgetConfiguratorSectionHeader"),e.qZA()),2&o){const t=e.oxw(),i=t.$implicit,n=t.index,s=e.oxw(2);e.xp6(3),e.Q6J("title",e.Dn7(4,2,null==i?null:i.value.label,n,s.columnLabel)),e.xp6(2),e.hij(" ",e.Dn7(6,6,null==i?null:i.value.label,n,s.columnLabel)," ")}}function Ya(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().index;return e.oxw(2).removeItem(n)}),e.qZA()()}if(2&o){const t=e.oxw().index;e.xp6(1),e.MGl("id","table-widget-remove-column-btn-",t,"")}}function Ha(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",10),e.NdJ("cdkDragStarted",function(n){return e.CHM(t),e.oxw(2).cdkDragStarted(n)}),e.YNc(1,Va,1,2,"nui-drop-area",11),e.YNc(2,Ja,7,10,"ng-template",null,12,e.W1O),e.YNc(4,Ya,2,1,"ng-template",null,13,e.W1O),e.TgZ(6,"nui-widget-configurator-section",14),e._UZ(7,"nui-table-column-configuration",15),e.qZA()()}if(2&o){const t=l.$implicit,i=e.MAs(3),n=e.MAs(5),s=e.oxw(2);e.xp6(6),e.Q6J("headerTextTemplate",i)("headerButtonsTemplate",n),e.xp6(1),e.Q6J("formControl",t)("isWidthMessageDisplayed",s.isWidthMessageDisplayed)}}function Ka(o,l){1&o&&(e.TgZ(0,"div",22)(1,"nui-message",23)(2,"b"),e.SDv(3,24),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function Qa(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("cdkDropListDropped",function(n){return e.CHM(t),e.oxw().drop(n)}),e.TgZ(1,"div",3),e.YNc(2,Ha,8,4,"div",4),e.YNc(3,Ka,4,1,"div",5),e.ALo(4,"async"),e.TgZ(5,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().addColumn()}),e.SDv(6,7),e.qZA(),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().onResetColumns()}),e.SDv(8,9),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngForOf",t.columnForms)("ngForTrackBy",t.trackBy),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,4,t.emptyColumns$)&&t.form.touched)}}let So=(()=>{class o{constructor(t,i,n,s,p,f,D){this.formBuilder=t,this.changeDetector=i,this.dialogService=n,this.pizzagnaService=s,this.dataSourceManager=p,this.tableFormatterRegistry=f,this.eventBus=D,this.columns=[],this.formReady=new e.vpe,this.dataSourceFields=[],this.isWidthMessageDisplayed=!1,this.columnLabel=$localize`Column`,this.onDestroy$=new te.x,this.form=this.formBuilder.group({columns:this.formBuilder.array([])}),this.form.controls.columns.valueChanges.pipe((0,le.R)(this.onDestroy$)).subscribe($=>{this.isWidthMessageDisplayed=this.getWidthMessageDisplayed($),this.changeDetector.markForCheck()}),this.eventBus.subscribeUntil(we.gg,this.onDestroy$,$=>{!$.payload||(this.dataSource=$.payload,this.changeDetector.markForCheck())}),this.eventBus.subscribeUntil(we.PF,this.onDestroy$,$=>{var Q,X,ce,Te;if(null===(Q=$.payload)||void 0===Q?void 0:Q.error)return;const{dataFields:_e}=Bt()($.payload.result)?$.payload:$.payload.result||{};this.dataSourceFields=null!=_e?_e:[];const xe=null===(Te=null===(ce=null===(X=this.dataSource)||void 0===X?void 0:X.features)||void 0===ce?void 0:ce.getFeatureConfig(h.ni.DisableTableColumnGeneration))||void 0===Te?void 0:Te.enabled,ve=this.mergeColumns(this.dataSourceFields,this.getColumns());(null==ve?void 0:ve.length)||xe?this.updateColumns(ve):xe||this.resetColumns(!1),this.changeDetector.markForCheck()}),p.error$.pipe((0,le.R)(this.onDestroy$)).subscribe($=>{this.dataSourceError=$,this.changeDetector.markForCheck()})}get columnForms(){return this.form.controls.columns.controls}ngOnInit(){var t,i,n;if(this.formReady.emit(this.form),this.template&&!(null===(t=this.tableFormatterRegistry.getItems())||void 0===t?void 0:t.length)){const s=null===(n=null===(i=this.template)||void 0===i?void 0:i[1].properties)||void 0===n?void 0:n.formatters;this.tableFormatterRegistry.addItems(s)}}ngOnChanges(t){t.columns&&this.updateColumns(this.columns,!1)}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}getColumns(){return this.form.controls.columns.value}updateColumns(t,i=!0){const n=this.form.controls.columns;n.controls=t.map(s=>{const p=new c.NI(s);p.setParent(n);const f=n.controls.find(D=>D.value.id===s.id);return f&&(p.markAsTouched=f.markAsTouched),p}),n.updateValueAndValidity({emitEvent:i}),this.changeDetector.markForCheck()}trackBy(t,i){var n;return null===(n=null==i?void 0:i.value)||void 0===n?void 0:n.id}addColumn(){this.form.controls.columns.push(new c.NI({id:(0,d.VjN)("column"),label:"",isActive:!0,formatter:{}}))}onResetColumns(){var t;this.resetColumns(!!(null===(t=this.getColumns())||void 0===t?void 0:t.length))}resetColumns(t){const i=()=>{var n;const s=null===(n=this.dataSourceFields)||void 0===n?void 0:n.map(p=>({id:(0,d.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:p.id}}},isActive:!0,label:p.label,width:void 0,sortable:p.sortable}));this.updateColumns(s)};t?this.dialogService.confirm({title:$localize`Are you sure?`,message:$localize`Resetting the columns will revert them to their default configurations. Do you wish to proceed?`,confirmText:$localize`Reset Columns`}).result.then(s=>{s&&i()},()=>{}):i()}mergeColumns(t,i){const n=t.map(s=>s.id);return i.filter(s=>{var p,f,D,$;return!!(null===(f=null===(p=s.formatter)||void 0===p?void 0:p.properties)||void 0===f?void 0:f.dataFieldIds)&&Eo()(null===($=null===(D=s.formatter)||void 0===D?void 0:D.properties)||void 0===$?void 0:$.dataFieldIds).some(Q=>n.includes(Q))})}getWidthMessageDisplayed(t){let i=0;for(const n of t)if("number"!=typeof n.width&&i++,i>1)return!1;return!0}moveItem(t,i){const n=this.form.controls.columns,s=n.at(t);n.removeAt(t),n.insert(i,s),this.changeDetector.detectChanges()}removeItem(t){this.form.controls.columns.removeAt(t),this.changeDetector.detectChanges()}drop(t){this.moveItem(t.previousIndex,t.currentIndex)}cdkDragStarted(t){this.draggedItemHeight=t.source.element.nativeElement.offsetHeight}}return o.lateLoadKey="TableColumnsConfigurationV2Component",o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(e.sBO),e.Y36(d.xAy),e.Y36(se.p),e.Y36(Za.q),e.Y36(de.C),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",componentId:"componentId",template:"template"},outputs:{formReady:"formReady"},features:[e.TTD],decls:2,vars:1,consts:function(){let l,t,i;return l=$localize`:␟5d48cb2ef826d59b1522d72e9909067bbffc0cd8␟4528805165676686479: Add new column `,t=$localize`:␟35328f1fffd2017d6248e5e862bef9e325aca7e9␟5405644315909491800: Reset columns `,i=$localize`:␟de46acf5ee4d137a30dbc57e48aef06379e6e500␟8256146955477966251:At least one column must be added.`,[[1,"nui-table-columns-configuration"],["cdkDropList","",3,"formGroup","cdkDropListDropped",4,"ngIf"],["cdkDropList","",3,"formGroup","cdkDropListDropped"],["formArrayName","columns"],["cdkDrag","","class","nui-table-columns-configuration__node-item",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],l,["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],t,["cdkDrag","",1,"nui-table-columns-configuration__node-item",3,"cdkDragStarted"],["class","nui-table-columns-configuration__drop-area",3,"height",4,"cdkDragPlaceholder"],["headerText",""],["headerButtons",""],[1,"no-margin",3,"headerTextTemplate","headerButtonsTemplate"],[3,"formControl","isWidthMessageDisplayed"],[1,"nui-table-columns-configuration__drop-area"],["cdkDragHandle","",1,"nui-table-columns-configuration__drag-handler"],["icon","drag"],[1,"nui-table-columns-configuration__header-text",3,"title"],[1,"d-flex"],["nui-button","","type","button","icon","delete","displayStyle","action",3,"id","click"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],i]},template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Qa,9,6,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!i.dataSourceError&&i.dataSourceFields.length))},directives:[r.O5,Ve.Wj,c.JL,c.sg,c.CE,r.sg,Ve.Zt,Ve.Hk,wt,Ve.Bh,d.oJW,d.r0F,ze,vo,c.JJ,c.oH,d.qqZ],pipes:[Ii,r.Ov],styles:[".nui-table-columns-configuration__header-text{white-space:nowrap;overflow:hidden;-ms-text-overflow:ellipsis;text-overflow:ellipsis}.nui-table-columns-configuration__drag-handler{cursor:move;display:flex}.nui-table-columns-configuration__node-item{background-color:var(--nui-color-bg-light,#fff);margin:15px}.nui-table-columns-configuration__node-item .widget-configurator-section{margin:0}.nui-table-columns-configuration__drop-area{margin:15px}.cdk-drag-preview{z-index:2000!important;opacity:.9;box-shadow:0 0 5px 0 var(--nui-shadow-color, rgba(17, 17, 17, .3))}\n"],encapsulation:2,changeDetection:0}),o})();function Xa(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"nui-form-field",20)(3,"nui-textbox-number",21),e.NdJ("valueChange",function(){return e.CHM(t),e.oxw(2).stub()}),e.qZA(),e.TgZ(4,"nui-validation-message",22),e.SDv(5,23),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("control",t.form.controls.width),e.xp6(2),e.Q6J("show",t.form.controls.width.invalid)}}function ja(o,l){1&o&&(e.TgZ(0,"nui-message",24),e.tHW(1,25),e._UZ(2,"b"),e.N_p(),e.qZA()),2&o&&e.Q6J("allowDismiss",!1)}function qa(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Xa,6,2,"ng-container",17),e.YNc(2,ja,3,1,"nui-message",18),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isWidthMessageDisplayed),e.xp6(1),e.Q6J("ngIf",t.isWidthMessageDisplayed)}}let el=(()=>{class o{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.formReady=new e.vpe,this.formDestroy=new e.vpe}ngOnInit(){var t;this.form=this.formBuilder.group({label:[this.label||null,[c.kI.required]],isActive:null===(t=this.isActive)||void 0===t||t,width:this.width||void 0}),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s;t.label&&(null===(i=this.form)||void 0===i||i.patchValue({label:t.label.currentValue})),t.isActive&&(null===(n=this.form)||void 0===n||n.patchValue({isActive:t.isActive.currentValue})),t.width&&(null===(s=this.form)||void 0===s||s.patchValue({width:t.width.currentValue}))}stub(){}ngOnDestroy(){this.formDestroy.emit(this.form)}}return o.lateLoadKey="DescriptionConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label",isActive:"isActive",width:"width",isWidthMessageDisplayed:"isWidthMessageDisplayed"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:23,vars:17,consts:function(){let l,t,i,n,s,p,f,D;return l=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟c9a9da14b0f8c677efa737185f1232f8537bd2a6␟3224868488156254475: This field is required `,n=$localize`:␟49e97f1ac4309fd5992a9520d74fa732c4a77481␟5413084173448405143:Show this column`,s=$localize`:␟6b3f02f1feab94e0f0a6823f49a009fa7be7dfa9␟8419094197651631948:Column width (px)`,p=$localize`:␟455a91268699c6879146b5fe44595de6628e6d32␟4319439665214681027:Auto width`,f=$localize`:␟356aa3e61db78cca0742edfab898c6bf0c8051a6␟3835988025416576743: Minimum width of the column is 62px `,D=$localize`:␟ed094d9c3b5f802e6adca32349fb4756bfad4786␟5991148749044556035:${"\ufffd#2\ufffd"}:START_BOLD_TEXT:All columns can not have fixed width.${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","w-100","overflow-hidden","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary","nui-text-ellipsis",3,"title"],[1,"description-configuration__accordion-content"],[1,"mb-4"],["caption",t,1,"mb-3",3,"control"],["formControlName","label"],["for","required"],i,[3,"control"],["formControlName","isActive"],n,[4,"ngIf"],["type","info",3,"allowDismiss",4,"ngIf"],[1,"mt-4"],["caption",s,1,"mb-3",3,"control"],["placeholder",p,"formControlName","width",1,"description-configuration__accordion-content__width-input",3,"valueChange"],["for","min",3,"show"],f,["type","info",3,"allowDismiss"],D]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10),e._UZ(16,"nui-textbox",11),e.TgZ(17,"nui-validation-message",12),e.SDv(18,13),e.qZA()()(),e.TgZ(19,"nui-form-field",14)(20,"nui-checkbox",15),e.SDv(21,16),e.qZA()(),e.YNc(22,qa,3,2,"ng-container",17),e.qZA()(),e.BQk()),2&t){let n;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,8,e.lcZ(3,10,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,12,e.xi3(7,14,i.form,"widget_list"))),e.xp6(6),e.Q6J("title",i.form.controls.label.value),e.xp6(1),e.hij(" ",i.form.controls.label.value," "),e.xp6(3),e.Q6J("control",i.form.controls.label),e.xp6(4),e.Q6J("control",i.form.controls.isActive),e.xp6(3),e.Q6J("ngIf",null==(n=i.form.get("isActive"))?null:n.value)}},directives:[c.JL,c.sg,Me.J,d.oJW,d.hgI,d.XHW,c.JJ,c.u,d.CfE,d.bK4,r.O5,d.I5I,d.qqZ],pipes:[r.Ov,Pe.F,be.d],styles:[".description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})(),yi=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.logger=s,this.formReady=new e.vpe,this.dropdownItems={}}ngOnChanges(t){t.formatterDefinition&&(this.mapDropdownItems(),this.initForm()),t.dataFields&&this.mapDropdownItems(),t.formatter&&this.updateForm()}mapDropdownItems(){this.dataFields?this.dropdownItems=Object.keys(this.formatterDefinition.dataTypes).reduce((t,i)=>{const n=this.formatterDefinition.dataTypes[i];return t[i]=n?this.dataFields.filter(s=>"string"==typeof n?s.dataType===n:n.includes(s.dataType)):this.dataFields,t},{}):this.logger.error("There are no dataFields defined for formatter:",this.formatterDefinition)}get dataFieldIds(){return this.form.get("dataFieldIds")}initForm(){const i=Object.keys(this.formatterDefinition.dataTypes||{}).reduce((n,s)=>{var p,f,D,$;return n[s]=[null!==($=null===(D=null===(f=null===(p=this.formatter)||void 0===p?void 0:p.properties)||void 0===f?void 0:f.dataFieldIds)||void 0===D?void 0:D[s])&&void 0!==$?$:null,c.kI.required],n},{});this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group(i)}),this.addCustomFormControls(this.form),this.formReady.emit(this.form)}updateForm(){var t;this.form.patchValue(null!==(t=this.formatter.properties)&&void 0!==t?t:{},{onlySelf:!1,emitEvent:!1})}addCustomFormControls(t){}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.sBO),e.LFG(We.p),e.LFG(c.qu),e.LFG(d.mQy))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function tl(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function il(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",13),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}let ol=(()=>{class o extends yi{constructor(t,i,n,s){super(t,i,n,s)}initForm(){this.form=this.formBuilder.group({dataFieldIds:this.formBuilder.group({link:[null,c.kI.required],value:[null,c.kI.required]}),targetSelf:[!1]}),this.formReady.emit(this.form)}}return o.lateLoadKey="LinkConfiguratorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(We.p),e.Y36(c.qu),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-link-configurator"]],features:[e.qOj],decls:17,vars:6,consts:function(){let l,t,i,n,s;return l=$localize`:label field caption| the entity field to be selected for the
                    html label property␟0b86bb6b0b2a82f208239974d253b86395143503␟7152588193113320722:Label`,t=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,i=$localize`:url field caption| the entity field to be selected for the
                    url html property␟ab9389f13cf14de62c26ae2d6d29351d72d8ca9e␟8752860715344063998:URL`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,s=$localize`:form field caption|switch configuring whether formatted link
                should open in new window/tab␟21e975dab4148f3f1b43017b9df1312910d25a21␟1433694158029413710:Open in the same window`,[[3,"formGroup"],["formGroupName","dataFieldIds"],[1,"mb-4"],["caption",l,1,"mb-3",3,"control"],["formControlName","value"],[3,"value",4,"ngFor","ngForOf"],["for","required"],t,["caption",i,1,"mb-3",3,"control"],["formControlName","link"],n,["caption",s,1,"mb-3",3,"control"],["id","nui-switch-target","formControlName","targetSelf"],[3,"value"]]},template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"nui-form-field",3)(4,"nui-select-v2",4),e.YNc(5,tl,2,2,"nui-select-v2-option",5),e.qZA(),e.TgZ(6,"nui-validation-message",6),e.SDv(7,7),e.qZA()()(),e.TgZ(8,"div")(9,"nui-form-field",8)(10,"nui-select-v2",9),e.YNc(11,il,2,2,"nui-select-v2-option",5),e.qZA(),e.TgZ(12,"nui-validation-message",6),e.SDv(13,10),e.qZA()()()(),e.TgZ(14,"div")(15,"nui-form-field",11),e._UZ(16,"nui-switch",12),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.dataFieldIds.controls.value),e.xp6(2),e.Q6J("ngForOf",i.dropdownItems.value),e.xp6(4),e.Q6J("control",i.dataFieldIds.controls.link),e.xp6(2),e.Q6J("ngForOf",i.dropdownItems.link),e.xp6(4),e.Q6J("control",i.form.controls.targetSelf))},directives:[c.JL,c.sg,c.x0,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,d.CfE,d.qUD],encapsulation:2}),o})();function nl(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",8),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function rl(o,l){if(1&o&&(e.TgZ(0,"div",1)(1,"div",2)(2,"nui-form-field",3)(3,"nui-select-v2",4),e.ALo(4,"async"),e.YNc(5,nl,2,3,"nui-select-v2-option",5),e.qZA(),e.TgZ(6,"nui-validation-message",6),e.SDv(7,7),e.qZA()()()()),2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.dataFieldIds.controls.value),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(4,4,t.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",t.dropdownItems.value)}}let sl=(()=>{class o extends yi{constructor(t,i,n,s){super(t,i,n,s)}}return o.lateLoadKey="ValueSelectorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(We.p),e.Y36(c.qu),e.Y36(d.mQy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-value-selector"]],features:[e.qOj],decls:1,vars:1,consts:function(){let l,t,i;return l=$localize`:␟5049e204c14c648691ac775a64fb504467aeb549␟6555318547274416232:Value`,t=$localize`:␟25b479494f612322c149610b9b2e3cd4c782c313␟4594093405818643397:Select Value`,i=$localize`:␟b17406f843dc33feb81478ae8273dc1aae06bbf6␟2244196281006156184: This field is required `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["formGroupName","dataFieldIds"],["caption",l,1,"mb-3",3,"control"],["formControlName","value","placeholder",t,3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["for","required"],i,[3,"displayValueContext","value"]]},template:function(t,i){1&t&&e.YNc(0,rl,8,6,"div",0),2&t&&e.Q6J("ngIf",i.form)},directives:[r.O5,c.JL,c.sg,c.x0,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,d.CfE],pipes:[r.Ov],encapsulation:2}),o})();var al=a(27501),ll=a.n(al);function dl(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("displayValueContext",t.label)("value",t.componentType),e.xp6(1),e.hij(" ",t.label," ")}}function cl(o,l){}const _l=function(){return["formReady"]};function ul(o,l){if(1&o){const t=e.EpF();e.ynx(0,15,16),e.NdJ("output",function(n){return e.CHM(t),e.oxw().onFormReady(n.payload)}),e.YNc(2,cl,0,0,"ng-template",17),e.NdJ("attached",function(n){return e.CHM(t),e.MAs(1).attached(n)}),e.BQk()}if(2&o){const t=e.MAs(1),i=e.oxw();e.Q6J("componentType",i.formatterConfigurator)("properties",i.formatterConfiguratorProps)("outputs",e.DdM(4,_l)),e.xp6(2),e.Q6J("cdkPortalOutlet",t.portal)}}let Ro=(()=>{class o{constructor(t,i,n,s,p){this.formBuilder=t,this.changeDetector=i,this.configuratorHeading=n,this.formattersRegistryCommon=s,this.tableFormattersRegistryService=p,this._providedFormatters=[],this._formatters=[],this._dataFields=[],this.formReady=new e.vpe,this.formDestroy=new e.vpe,this.formatterForm=this.formBuilder.group({}),this.formatterFormGroupName="formatter",this.onDestroy$=new te.x,this.subscribeToFormattersRegistry()}set formatters(t){!this.tableFormattersRegistryService.isEmpty||this.handleFormattersUpdate(t)}get formatters(){return this._formatters}set dataFields(t){this._dataFields=t,this.updateAvailableFormatters()}get dataFields(){return this._dataFields}ngOnInit(){var t;this.formatterForm=this.formBuilder.group({componentType:[this.formatter&&this.formatter.componentType||this._providedFormatters&&this._providedFormatters.length>0&&this._providedFormatters[0].componentType,[c.kI.required]]}),this.form=this.formBuilder.group({[this.formatterFormGroupName]:this.formatterForm}),null===(t=this.formatterForm.get("componentType"))||void 0===t||t.valueChanges.pipe((0,le.R)(this.onDestroy$)).subscribe(()=>this.createFormatterConfigurator()),this.createFormatterConfigurator(),this.formReady.emit(this.form),this.formatterForm.valueChanges.pipe((0,le.R)(this.onDestroy$)).subscribe(()=>{this.updateSubtitle(),this.changeDetector.detectChanges()})}ngAfterViewInit(){}ngOnChanges(t){var i;if(t.dataFieldIds){const{currentValue:n,previousValue:s}=t.dataFieldIds;if(n&&n!==s){const p=n.map(f=>({id:f,label:ll()(f)}));this.dataFields=p,this.updateSubtitle()}}t.formatter&&(null===(i=this.form)||void 0===i||i.patchValue({[this.formatterFormGroupName]:t.formatter.currentValue},{emitEvent:!1}),this.updateSubtitle()),t.dataFields&&0===t.dataFields.previousValue.length&&this.formatterForm&&this.updateSubtitle()}getSelectedFormatterDefinition(){var t,i;if(this._providedFormatters.length>0){const n=null===(t=this.formatterForm.get("componentType"))||void 0===t?void 0:t.value;return null!==(i=this._providedFormatters.find(s=>s.componentType===n))&&void 0!==i?i:null}return null}getSelectedDataField(){var t,i;const n=this.formatterForm.controls.properties;if(n&&this.dataFields&&this.dataFields.length>0){const s=null===(t=n.get("dataFieldIds"))||void 0===t?void 0:t.value.value;return null!==(i=this.dataFields.find(p=>p.id===s))&&void 0!==i?i:null}return null}onFormReady(t){this.form.get(this.formatterFormGroupName).setControl("properties",t)}updateSubtitle(){var t,i;this.subtitleText=`${null===(t=this.getSelectedFormatterDefinition())||void 0===t?void 0:t.label}`,this.getSelectedDataField()&&(this.subtitleText=this.subtitleText.concat(`, ${null===(i=this.getSelectedDataField())||void 0===i?void 0:i.label}`))}createFormatterConfigurator(){var t,i,n,s;const p=this._providedFormatters.find(f=>{var D;return f.componentType===(null===(D=this.formatterForm.get("componentType"))||void 0===D?void 0:D.value)});this.formatterConfigurator=p?null!==(t=p.configurationComponent)&&void 0!==t?t:"ValueSelectorComponent":null,(null==p?void 0:p.componentType)!==(null===(i=this.formatter)||void 0===i?void 0:i.componentType)&&(null===(s=null===(n=this.formatter)||void 0===n?void 0:n.properties)||void 0===s?void 0:s.dataFieldIds)&&(this.formatter.properties.dataFieldIds={value:null}),this.formatterConfiguratorProps={dataFields:this.dataFields,formatter:this.formatter,formatterDefinition:p}}updateAvailableFormatters(){if(!this._dataFields.length||!this._providedFormatters.length)return;const t={null:!0};this._dataFields.forEach(i=>t[i.dataType]=!0),this._formatters=this._providedFormatters.filter(i=>(i.dataTypes.value instanceof Array?i.dataTypes.value:[i.dataTypes.value]).some(s=>t[s])),this.formatterForm&&this.createFormatterConfigurator()}subscribeToFormattersRegistry(){this.handleFormattersUpdate(this.formattersRegistry.getItems()),this.formattersRegistry.stateChanged$.pipe((0,Qe.b)(this.handleFormattersUpdate.bind(this)),(0,le.R)(this.onDestroy$)).subscribe()}handleFormattersUpdate(t){t!==this._providedFormatters&&(this._providedFormatters=t,this.updateAvailableFormatters())}get formattersRegistry(){return this.formattersRegistryCommon||this.tableFormattersRegistryService}ngOnDestroy(){this.formDestroy.emit(this.form),this.onDestroy$.next(),this.onDestroy$.complete()}}return o.lateLoadKey="PresentationConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(e.sBO),e.Y36(We.p),e.Y36(h.m4,8),e.Y36(de.C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-column-presentation-configuration"]],inputs:{formatter:"formatter",formatters:"formatters",dataFieldIds:"dataFieldIds",dataFields:"dataFields"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e._Bn([],[{provide:c.gN,useExisting:c.sg}]),e.TTD],decls:20,vars:20,consts:function(){let l,t,i;return l=$localize`:␟3c991a92a6b04b4f5a42f0b72befa96a8d2e809c␟5065098939944125110:Property and formatting`,t=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`,i=$localize`:␟408b4f352f2fec5727e6df77cb926194384bbba0␟736196504450716827:Select Format`,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"presentation-configuration__accordion-content"],[1,"mb-4"],["caption",t,3,"control"],["placeholder",i,"formControlName","componentType",3,"popupViewportMargin"],[3,"displayValueContext","value",4,"ngFor","ngForOf"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output",4,"ngIf"],[3,"displayValueContext","value"],["nuiComponentPortal","","componentId","formatterConfigurator",3,"componentType","properties","outputs","output"],["componentPortal","nuiComponentPortal"],[3,"cdkPortalOutlet","attached"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"nui-form-field",10)(16,"nui-select-v2",11),e.ALo(17,"async"),e.YNc(18,dl,2,3,"nui-select-v2-option",12),e.qZA()()(),e.YNc(19,ul,3,5,"ng-container",13),e.qZA()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.formatterForm),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form,"customize"))),e.xp6(6),e.Q6J("title",i.subtitleText),e.xp6(1),e.hij(" ",i.subtitleText," "),e.xp6(3),e.Q6J("control",i.formatterForm.controls.componentType),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(17,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.formatters),e.xp6(1),e.Q6J("ngIf",i.formatterConfigurator))},directives:[c.JL,c.sg,Me.J,d.oJW,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,r.O5,b.$,w.Pl],pipes:[r.Ov,Pe.F,be.d],styles:[".presentation-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function pl(o,l){1&o&&(e.TgZ(0,"div",6)(1,"nui-message",7),e.tHW(2,8),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("allowDismiss",!1))}let gl=(()=>{class o{constructor(t,i,n,s,p){this.formBuilder=t,this.changeDetector=i,this.dialogService=n,this.pizzagnaService=s,this.eventBus=p,this.columns=[],this.formatters=[],this.dataFields=[],this.formReady=new e.vpe,this.onDestroy$=new te.x,this.lastValidDataFields=[],this.eventBus.subscribeUntil(we.gg,this.onDestroy$,f=>{!f.payload||(this.dataSource=f.payload)}),this.eventBus.subscribeUntil(we.PF,this.onDestroy$,f=>{var D;const{dataFields:$}=Bt()(f.payload.result)?f.payload:f.payload.result||{};if($){let Q=this.pizzagnaService.pizzagna;Q=(0,d.zdu)(Q,`${h.xW.Data}.columns.properties.dataFields`,$);const ce=(null===(D=this.pizzagnaService.pizzagna[h.xW.Structure].columns.properties)||void 0===D?void 0:D.template).findIndex(ve=>"presentation"===ve.id);Q=(0,d.zdu)(Q,`${h.xW.Structure}.columns.properties.template[${ce}].properties.dataFields`,$),Q=Ft()(this.pizzagnaService.pizzagna,`${h.xW.Data}.columns.properties.columns`).map(ve=>ve.id).reduce((ve,bt)=>(0,d.zdu)(ve,`${h.xW.Data}.${bt}/presentation.properties.dataFields`,$),Q),this.pizzagnaService.updatePizzagna(Q),this.eventBus.getStream(T.M).next({payload:{path:"",value:Q}})}})}ngOnInit(){}ngOnChanges(t){var i,n,s;if(t.dataFields&&t.dataFields.currentValue){this.lastValidDataFields=t.dataFields.currentValue;const p=null===(s=null===(n=null===(i=this.dataSource)||void 0===i?void 0:i.features)||void 0===n?void 0:n.getFeatureConfig(h.ni.DisableTableColumnGeneration))||void 0===s?void 0:s.enabled,f=this.mergeColumns(t.dataFields.currentValue,this.columns);(null==f?void 0:f.length)||p?this.onItemsChange(f):p||this.resetColumns(!1),setTimeout(()=>this.changeDetector.markForCheck())}if(t.columns){const p=this.columns.map(f=>({id:f.id,children:{[`${f.id}/description`]:Object.assign({},f),[`${f.id}/presentation`]:Object.assign({},f)}}));this.pizzagnaService.createComponentsFromTemplateWithProperties("columns",p),setTimeout(()=>{var f,D,$;null===(f=this.form.get("columns"))||void 0===f||f.setValue([...null!==($=null===(D=this.form.get("columns"))||void 0===D?void 0:D.value)&&void 0!==$?$:[]])})}}onFormReady(t){var i;this.form=this.formBuilder.group({columns:t,columnsOutput:{}}),this.emptyColumns$=this.form.valueChanges.pipe((0,ct.U)(n=>0===n.columns.length)),this.formReady.emit(this.form),null===(i=this.form.get("columns"))||void 0===i||i.valueChanges.subscribe(n=>{var s;const p=n.map(f=>{var D,$;let Q={id:f.id};for(const X of Object.keys(f.properties))Q=Object.assign(Object.assign({},Q),f.properties[X]);return Q.sortable=null===($=null===(D=this.lastValidDataFields)||void 0===D?void 0:D.find(X=>{var ce,Te,_e;return X.id===(null===(_e=null===(Te=null===(ce=Q.formatter)||void 0===ce?void 0:ce.properties)||void 0===Te?void 0:Te.dataFieldIds)||void 0===_e?void 0:_e.value)}))||void 0===$?void 0:$.sortable,Q});null===(s=this.form.get("columnsOutput"))||void 0===s||s.setValue(p)})}onItemsChange(t){const n=t.map(p=>p.id);this.pizzagnaService.createComponentsFromTemplate("columns",n),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["columns"]},t)}addColumn(){this.onItemsChange([...this.columns,{id:(0,d.VjN)("column"),label:"",formatter:void 0}])}onResetColumns(){var t;this.resetColumns(!!(null===(t=this.columns)||void 0===t?void 0:t.length))}resetColumns(t){const i=()=>{const n=this.lastValidDataFields.map(s=>({id:(0,d.VjN)("column"),formatter:{componentType:"RawFormatterComponent",properties:{dataFieldIds:{value:s.id}}},isActive:!0,label:s.label,width:void 0,sortable:s.sortable}));this.onItemsChange(n)};t?this.dialogService.confirm({title:$localize`Are you sure?`,message:$localize`Resetting the columns will revert them to their default configurations. Do you wish to proceed?`,confirmText:$localize`Reset Columns`}).result.then(s=>{s&&i()},()=>{}):i()}mergeColumns(t,i){const n=t.map(s=>s.id);return i.filter(s=>{var p,f,D,$;return!!(null===(f=null===(p=s.formatter)||void 0===p?void 0:p.properties)||void 0===f?void 0:f.dataFieldIds)&&Eo()(null===($=null===(D=s.formatter)||void 0===D?void 0:D.properties)||void 0===$?void 0:$.dataFieldIds).some(Q=>n.includes(Q))})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return o.lateLoadKey="TableColumnsConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(e.sBO),e.Y36(d.xAy),e.Y36(se.p),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-columns-configuration"]],inputs:{columns:"columns",formatters:"formatters",componentId:"componentId",dataFields:"dataFields",nodes:"nodes"},outputs:{formReady:"formReady"},features:[e.TTD],decls:7,vars:5,consts:function(){let l,t,i,n;return l=$localize`:␟e3c2715ed7f11ed4ac89f4153d8557f182a6918e␟763982378603811482:Column`,t=$localize`:␟71b3b6b8f687cdb01eafe73ac62da2e1e5b87af9␟5086057767318144098: Add new column
`,i=$localize`:␟74cee6ce69c809bb4e67d7cc9e16478a67f9e58d␟4978445162559740484: Reset columns
`,n=$localize`:␟67705586cab07e9ae4f2a9822320fa14e7fb60a7␟8157770720263764419:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one column must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,[["headerPrefix",l,3,"items","nodes","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","id","table-widget-add-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],t,["nui-button","","icon","reset","displayStyle","action","id","table-widget-reset-indicator-btn","type","button",1,"ml-4","mb-4",3,"click"],i,[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],n]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(s){return i.onItemsChange(s)})("formReady",function(s){return i.onFormReady(s)}),e.qZA(),e.YNc(1,pl,4,1,"div",1),e.ALo(2,"async"),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.addColumn()}),e.SDv(4,3),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.onResetColumns()}),e.SDv(6,5),e.qZA()),2&t&&(e.Q6J("items",i.columns)("nodes",i.nodes),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,i.emptyColumns$)&&i.form.touched))},directives:[zt,r.O5,d.qqZ,d.r0F],pipes:[r.Ov],encapsulation:2,changeDetection:0}),o})();function hl(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",18),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.label," ")}}function ml(o,l){1&o&&(e.TgZ(0,"nui-message",19),e.tHW(1,20),e._UZ(2,"b"),e.N_p(),e.qZA()),2&o&&e.Q6J("allowDismiss",!1)}let No=(()=>{class o{constructor(t,i,n){this.formBuilder=t,this.configuratorHeading=i,this.changeDetector=n,this.columns=[],this.formReady=new e.vpe,this.sortableColumns=[],this.onDestroy$=new te.x}ngOnInit(){this.form=this.formBuilder.group({sorterConfiguration:this.formBuilder.group({sortBy:Ft()(this.sorterConfiguration,"sortBy",""),descendantSorting:Ft()(this.sorterConfiguration,"descendantSorting",!1)})}),this.form.valueChanges.pipe((0,le.R)(this.onDestroy$)).subscribe(t=>{this.setAccordionSubtitleValues(t)}),this.formReady.emit(this.form)}ngOnChanges(t){var i,n,s,p;const f=null===(i=this.form.get("sorterConfiguration"))||void 0===i?void 0:i.get("sortBy"),D=null===(n=this.form.get("sorterConfiguration"))||void 0===n?void 0:n.get("descendantSorting");if(t.sorterConfiguration){const $=this.sortableColumns.find(Q=>{var X;return Q.id===(null===(X=this.sorterConfiguration)||void 0===X?void 0:X.sortBy)});null==f||f.setValue(null==$?void 0:$.id,{emitEvent:!1}),null==D||D.setValue(null===(s=this.sorterConfiguration)||void 0===s?void 0:s.descendantSorting,{emitEvent:!1})}if(t.columns){this.sortableColumns=this.columns.filter(Q=>{var X;return!!Q.formatter&&(null===(X=Q.sortable)||void 0===X||X)});const $=this.sortableColumns.find(Q=>{var X;return Q.id===(null===(X=this.sorterConfiguration)||void 0===X?void 0:X.sortBy)});null==f||f.setValue(null==$?void 0:$.id,{emitEvent:!1}),null==D||D.setValue(null===(p=this.sorterConfiguration)||void 0===p?void 0:p.descendantSorting,{emitEvent:!1}),0===this.sortableColumns.length?(null==f||f.disable(),null==D||D.disable()):(null==f||f.enable(),null==D||D.enable())}this.changeDetector.detectChanges()}setAccordionSubtitleValues(t){var i,n;if(t.sorterConfiguration){const s=null===(i=this.columns)||void 0===i?void 0:i.find(f=>f.id===t.sorterConfiguration.sortBy);if(!s)return this.selectedSortByValue=$localize`No sorting`,this.selectedSortOrderValue="",void(null===(n=this.form.get("sorterConfiguration"))||void 0===n||n.patchValue({sortBy:"",descendantSorting:""},{emitEvent:!1}));const p=t.sorterConfiguration.descendantSorting?$localize`Descending`:$localize`Ascending`;this.selectedSortByValue=s.label,this.selectedSortOrderValue=", "+p,this.changeDetector.detectChanges()}}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return o.lateLoadKey="TableFiltersEditorComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(We.p),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-filters-editor-component"]],inputs:{sorterConfiguration:"sorterConfiguration",columns:"columns"},outputs:{formReady:"formReady"},features:[e.TTD],decls:20,vars:11,consts:function(){let l,t,i,n,s;return l=$localize`:␟2a63d63538326cdbebb382ee400f9c2ac4ba26eb␟2774613742044941352:Sorting`,t=$localize`:␟ec97f67072a83aaa972536b18d83179f6e4bbec9␟7699622144571229146:Sort by`,i=$localize`:␟e9d403d84c2efea04f713258598abc6dc8fab8bc␟270381191166569688:Select column`,n=$localize`:␟00c361649822cfeeb5fad8e44bf6c9b9fbcc9852␟7343210469772540594: Descending `,s=$localize`:␟73a7df661af2f227feac942adb7cec0474f2b208␟1677678378385679212:${"\ufffd#2\ufffd"}:START_BOLD_TEXT:No columns are sortable.${"\ufffd/#2\ufffd"}:CLOSE_BOLD_TEXT:`,[[3,"formGroup"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],["icon","widget_pie-chart",1,"align-self-start","pt-2"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"table-filters-configuration__accordion-content"],["formGroupName","sorterConfiguration",1,"d-flex","align-items-end"],["caption",t,1,"w-50",3,"control"],["placeholder",i,"formControlName","sortBy",1,"table-filters-configuration__accordion-content__sort-by-input",3,"popupViewportMargin"],[3,"value",4,"ngFor","ngForOf"],[1,"ml-2"],[3,"control"],["formControlName","descendantSorting"],n,[1,"p-5"],["type","info",3,"allowDismiss",4,"ngIf"],[3,"value"],["type","info",3,"allowDismiss"],s]},template:function(t,i){1&t&&(e.TgZ(0,"nui-widget-editor-accordion",0)(1,"div",1),e._UZ(2,"nui-icon",2),e.TgZ(3,"div",3)(4,"span",4),e.SDv(5,5),e.qZA(),e.TgZ(6,"div",6),e._uU(7),e.qZA()()(),e.TgZ(8,"div",7)(9,"div",8)(10,"nui-form-field",9)(11,"nui-select-v2",10),e.ALo(12,"async"),e.YNc(13,hl,2,2,"nui-select-v2-option",11),e.qZA()(),e.TgZ(14,"div",12)(15,"nui-form-field",13)(16,"nui-checkbox",14),e.SDv(17,15),e.qZA()()()()(),e.TgZ(18,"div",16),e.YNc(19,ml,3,1,"nui-message",17),e.qZA()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(6),e.Q6J("title",i.selectedSortByValue+i.selectedSortOrderValue),e.xp6(1),e.AsE(" ",i.selectedSortByValue,"",i.selectedSortOrderValue," "),e.xp6(3),e.Q6J("control",i.form.controls.sortBy),e.xp6(1),e.Q6J("popupViewportMargin",e.lcZ(12,9,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",i.sortableColumns),e.xp6(2),e.Q6J("control",i.form.controls.descendantSorting),e.xp6(4),e.Q6J("ngIf",!i.sortableColumns.length))},directives:[Me.J,c.JL,c.sg,d.oJW,c.x0,d.hgI,d.j_n,c.JJ,c.u,r.sg,d.rLF,d.bK4,r.O5,d.qqZ],pipes:[r.Ov],styles:[".table-filters-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function fl(o,l){1&o&&(e.TgZ(0,"div",3)(1,"nui-message",4),e.tHW(2,5),e._UZ(3,"b"),e.N_p(),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("allowDismiss",!1))}function Tl(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().addSeries()}),e.SDv(1,7),e.qZA()}}let Ao=(()=>{class o{constructor(t,i,n){this.pizzagnaService=t,this.changeDetector=i,this.eventBus=n,this.series=[],this.formReady=new e.vpe,this.destroy$=new te.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnChanges(t){t.allSeries&&!t.allSeries.isFirstChange()&&(this.createSeriesConfigComponents(this.series),setTimeout(()=>this.changeDetector.markForCheck()))}onFormReady(t){this.form=t,this.formReady.emit(t),this.emptySeries$=this.form.valueChanges.pipe((0,ct.U)(i=>0===i.length))}onItemsChange(t){this.createSeriesConfigComponents(t),this.pizzagnaService.setProperty({componentId:this.componentId,pizzagnaKey:h.xW.Data,propertyPath:["series"]},t)}isPossibleToAddSeries(){return(this.allSeries&&this.allSeries.length)>(this.series&&this.series.length)}addSeries(){this.onItemsChange([...this.series,{id:(0,d.VjN)("series"),selectedSeriesId:null}])}createSeriesConfigComponents(t){const n=t.map(s=>s.id);this.pizzagnaService.createComponentsFromTemplate("series",n)}}return o.lateLoadKey="TimeseriesSeriesCollectionConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(se.p),e.Y36(e.sBO),e.Y36(h.nY))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-timeseries-series-collection-configuration"]],inputs:{nodes:"nodes",componentId:"componentId",series:"series",availableSeries:"availableSeries",allSeries:"allSeries"},outputs:{formReady:"formReady"},features:[e.TTD],decls:4,vars:7,consts:function(){let l,t;return l=$localize`:␟46a7534407b391db85f57b5fd207e4288d7901c1␟4355007031052301783:${"\ufffd#3\ufffd"}:START_BOLD_TEXT:At least one series must be added.${"\ufffd/#3\ufffd"}:CLOSE_BOLD_TEXT:`,t=$localize`:␟6231821a0315549db22f614abdf9b5e9b036a0ca␟8188707268253933960: Add new series
`,[[3,"items","nodes","moveButtons","itemsChange","formReady"],["class","pl-4 pr-4",4,"ngIf"],["nui-button","","icon","add","displayStyle","action","type","button","class","ml-4 mb-4",3,"click",4,"ngIf"],[1,"pl-4","pr-4"],["type","critical",3,"allowDismiss"],l,["nui-button","","icon","add","displayStyle","action","type","button",1,"ml-4","mb-4",3,"click"],t]},template:function(t,i){1&t&&(e.TgZ(0,"nui-items-dynamic",0),e.NdJ("itemsChange",function(s){return i.onItemsChange(s)})("formReady",function(s){return i.onFormReady(s)}),e.qZA(),e.YNc(1,fl,4,1,"div",1),e.ALo(2,"async"),e.YNc(3,Tl,2,0,"button",2)),2&t&&(e.Q6J("items",i.series)("nodes",i.nodes)("moveButtons",!1),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,5,i.emptySeries$)&&i.form.touched),e.xp6(2),e.Q6J("ngIf",i.isPossibleToAddSeries()))},directives:[zt,r.O5,d.qqZ,d.r0F],pipes:[r.Ov],encapsulation:2,changeDetection:0}),o})(),yo=(()=>{class o{constructor(t,i){this.formBuilder=t,this.changeDetector=i,this.formReady=new e.vpe,this.formDestroy=new e.vpe}ngOnInit(){this.form=this.formBuilder.group({label:[this.label,c.kI.required]}),this.formReady.emit(this.form)}ngOnChanges(t){if(t.label){const i=t.label.currentValue;i&&this.form.patchValue({label:i})}}ngOnDestroy(){this.formDestroy.emit(this.form)}}return o.lateLoadKey="TimeseriesTileDescriptionConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-table-column-description-configuration"]],inputs:{label:"label"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:20,vars:22,consts:function(){let l,t,i,n;return l=$localize`:␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,t=$localize`:␟863226cffd5b66a6fee9810a9282a5006d6ef576␟4077520913910941990:Label`,i=$localize`:␟8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5␟725093659603391179:Set label`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon","iconColor"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-description-configuration__accordion-content"],["caption",t,3,"control"],["formControlName","label","placeholder",i],["for","required"],n]},template:function(t,i){if(1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.ALo(8,"async"),e.ALo(9,"nuiFormHeaderIconPipe"),e.TgZ(10,"div",4)(11,"span",5),e.SDv(12,6),e.qZA(),e.TgZ(13,"div",7),e._uU(14),e.qZA()()(),e.TgZ(15,"div",8)(16,"nui-form-field",9),e._UZ(17,"nui-textbox",10),e.TgZ(18,"nui-validation-message",11),e.SDv(19,12),e.qZA()()()(),e.BQk()),2&t){let n,s;e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,7,e.lcZ(3,9,i.form.get("label")))),e.xp6(4),e.Q6J("icon",e.lcZ(6,11,e.xi3(7,13,i.form.get("label"),"edit")))("iconColor",e.lcZ(8,16,e.Dn7(9,18,i.form.get("label"),"gray",""))),e.xp6(8),e.Q6J("title",null==(n=i.form.get("label"))?null:n.value),e.xp6(1),e.hij(" ",null==(s=i.form.get("label"))?null:s.value," "),e.xp6(2),e.Q6J("control",i.form.get("label"))}},directives:[c.JL,c.sg,Me.J,d.oJW,d.hgI,d.XHW,c.JJ,c.u,d.CfE],pipes:[r.Ov,Pe.F,be.d],styles:[".timeseries-tile-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();function Cl(o,l){if(1&o&&(e.TgZ(0,"nui-select-v2-option",14),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.description," ")}}let Mo=(()=>{class o{constructor(t,i,n,s){this.changeDetector=t,this.configuratorHeading=i,this.formBuilder=n,this.pizzagnaService=s,this.formReady=new e.vpe,this.formDestroy=new e.vpe,this.destroy$=new te.x}set selectedSeries(t){this._selectedSeries=t,t&&this.form.patchValue({id:t.id})}get selectedSeries(){return this._selectedSeries}ngOnInit(){this.form=this.formBuilder.group({id:[this.selectedSeriesId||null,[c.kI.required]]}),this.formReady.emit(this.form)}ngOnChanges(t){if(t.allSeries&&(this.selectedSeries=this.allSeries.find(i=>this.selectedSeriesId===i.id)),t.selectedSeriesId){if(!this.allSeries)return;this.selectedSeries=this.allSeries.find(i=>this.selectedSeriesId===i.id)}}onSelect(t){this.selectedSeriesId=t.id,this.selectedSeries=t,this.form.patchValue({id:t.id}),setTimeout(()=>{this.pizzagnaService.setProperty(`${h.xW.Data}.${this.componentId}.properties.selectedSeriesId`,t.id),this.changeDetector.markForCheck()})}ngOnDestroy(){this.formDestroy.emit(this.form),this.destroy$.next(),this.destroy$.complete()}}return o.lateLoadKey="TimeseriesTileIndicatorDataConfigurationComponent",o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(We.p),e.Y36(c.qu),e.Y36(se.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["nui-timeseries-tile-indicator-data-configuration"]],inputs:{componentId:"componentId",selectedSeriesId:"selectedSeriesId",allSeries:"allSeries",availableSeries:"availableSeries"},outputs:{formReady:"formReady",formDestroy:"formDestroy"},features:[e.TTD],decls:21,vars:23,consts:function(){let l,t,i,n;return l=$localize`:␟f39271d40a9c081425a980174610625a267d18f7␟8676967573592446270:Indicator data`,t=$localize`:␟c5efb3039d96058120ee5d8148ceeb972d8d4e1f␟3385528249572340947:Series data`,i=$localize`:␟c5efb3039d96058120ee5d8148ceeb972d8d4e1f␟3385528249572340947:Series data`,n=$localize`:␟8eb0e5b7a8ec1199d38c9e92ca26bd4b3aae7f2c␟8999046125839025839: This field is required `,[[3,"formGroup"],[3,"state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],l,[1,"nui-text-secondary",3,"title"],[1,"timeseries-tile-data-configuration__accordion-content"],["caption",t,3,"control"],["placeholder",i,3,"value","popupViewportMargin","valueSelected"],[3,"value",4,"ngFor","ngForOf"],["for","required"],n,[3,"value"]]},template:function(t,i){1&t&&(e.ynx(0,0),e.TgZ(1,"nui-widget-editor-accordion",1),e.ALo(2,"async"),e.ALo(3,"nuiWidgetEditorAccordionFormState"),e.TgZ(4,"div",2),e._UZ(5,"nui-icon",3),e.ALo(6,"async"),e.ALo(7,"nuiFormHeaderIconPipe"),e.TgZ(8,"div",4)(9,"span",5),e.SDv(10,6),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()()(),e.TgZ(13,"div",8)(14,"nui-form-field",9)(15,"nui-select-v2",10),e.NdJ("valueSelected",function(s){return i.onSelect(s)}),e.ALo(16,"async"),e.YNc(17,Cl,2,2,"nui-select-v2-option",11),e.ALo(18,"nuiAddData"),e.qZA(),e.TgZ(19,"nui-validation-message",12),e.SDv(20,13),e.qZA()()()(),e.BQk()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("state",e.lcZ(2,9,e.lcZ(3,11,i.form.get("id")))),e.xp6(4),e.Q6J("icon",e.lcZ(6,13,e.xi3(7,15,i.form.get("id"),"database"))),e.xp6(6),e.Q6J("title",null==i.selectedSeries?null:i.selectedSeries.description),e.xp6(1),e.hij(" ",null==i.selectedSeries?null:i.selectedSeries.description," "),e.xp6(2),e.Q6J("control",i.form.get("id")),e.xp6(1),e.Q6J("value",i.selectedSeries)("popupViewportMargin",e.lcZ(16,18,i.configuratorHeading.height$)),e.xp6(2),e.Q6J("ngForOf",e.xi3(18,20,i.availableSeries,i.selectedSeries)))},directives:[c.JL,c.sg,Me.J,d.oJW,d.hgI,d.j_n,r.sg,d.rLF,d.CfE],pipes:[r.Ov,Pe.F,be.d,vi],styles:[".timeseries-tile-data-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}"],changeDetection:0}),o})();var Ol=a(4235),Po=(a(73193),a(42971));let vl=(()=>{class o{static getTextColor(t){return new g.kJ9(new g.jpW([t]),{light:"white",dark:"black"}).get(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var Do=a(94526);let Fo=(()=>{class o{constructor(t,i){this.configuratorService=t,this.componentPortalService=i}open(t){if(!t.portalBundle){const i={portal:this.componentPortalService.createComponentPortal(Xi,null),attached:n=>{n.instance.cloneSelectionComponentType=t.widgetSelectionComponentType}};t.portalBundle=i}return this.configuratorService.open(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Po.J),e.LFG(Do.$))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var El=a(67517);a(75675),a(41294),a(42911),a(27463),a(60167);const bo=[Bi.n,_t,Ol.P,At,eo,Ot,po,Ri,io,mo,ho,No,lo,Ao,gl,So,vo,to,hi,ki,mi,Zi,fi.C,Ut,ol,sl,$t.s,Hi,Ci,Nt.a,Ti,no,ao,ut,ze,gs.b,Xi,el,Co,Ro,Io,yo,Mo,so,qi,uo,co,To,kt,go];let xo=(()=>{class o{constructor(t){for(const i of bo.filter(n=>n.lateLoadKey))t.registerByLateLoadKey(i)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(pi.h))},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Po.J,We.p,rs.e,El.s,Fo,vl,$i,Tt],imports:[[v.Cl,R,c.UX,O.IX,Ve._t,w.eL,d.Gsl,Ui,d.Ts3,d.r$w,d.cnx,d.F__,d.ILf,d.YMY,d.C6o,d.Az_,d.s2z,d.qAs,d.CUE,d.LRI,d.uCA,d.Ld5,d.CND,d.a51,d.cJ5,d.gkT,d.grO,d.bGb,d.a$t,d.ZuS,d.sF0]]}),o})();a(16041),a(44994);const Nl={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:_t.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]}},presentation:{id:"presentation",componentType:ze.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:ut.lateLoadKey,providers:{converter:{providerId:T.j4}}},dataAndCalculations:{id:"dataAndCalculations",componentType:ze.lateLoadKey,properties:{headerText:$localize`Data and calculations`,nodes:["dataSource","grouping","entityFormatting"]}},dataSource:{id:"dataSource",componentType:At.lateLoadKey,properties:{dataSourceProviders:[]},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId"]}]}}}},grouping:{id:"grouping",componentType:uo.lateLoadKey,properties:{groups:[],groupBy:[]},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:`listWidget.providers.${h.Mu.Adapter}.properties`,keys:["groupBy","drillstate","groups"]}]}}}},entityFormatting:{id:"entityFormatting",componentType:co.lateLoadKey,properties:{mappingKeys:["icon_status","capital","name","icon","url"],dataFieldIds:{icon:"icon",status:"icon_status",detailedUrl:"capital",label:"name",url:"url"}},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:`listWidget.providers.${h.Mu.Adapter}.properties.componentsConfig.leaf.properties`,keys:["dataFieldIds"]}]}}}}}},pt={id:"header",componentType:_i.lateLoadKey,properties:{editMode:!1}},It={id:"loading",componentType:m.N.lateLoadKey,providers:{[h.Mu.LoadingAdapter]:{providerId:T.IG}}},Je={id:"body",componentType:ci.lateLoadKey,properties:{content:"bodyContent"}},Al={[h.WE.Unknown]:Ze.ErrorUnknown,[h.WE.Forbidden]:Ze.ErrorForbidden,[h.WE.NotFound]:Ze.ErrorNotFound},yl={[Ze.ErrorUnknown]:{id:Ze.ErrorUnknown,componentType:S.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`Whoops, something went wrong`,description:$localize`There was an unexpected error.`}},[Ze.ErrorForbidden]:{id:Ze.ErrorForbidden,componentType:S.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`403 - Forbidden`,description:$localize`The requested action was forbidden.`}},[Ze.ErrorNotFound]:{id:Ze.ErrorNotFound,componentType:S.lateLoadKey,properties:{image:"no-data-to-show",title:$localize`404 - Not Found`,description:$localize`The requested resource could not be found.`}}};function gt(o,l=T.Cz,t=Al,i=yl){return Object.assign({bodyContent:{id:"bodyContent",componentType:di.lateLoadKey,properties:{primaryContent:o,fallbackMap:t},providers:{[h.Mu.ContentFallbackAdapter]:{providerId:l}}}},i)}const Mt={providerId:T.GN};function qe(o=!1,l=0){return{providerId:T.tc,properties:{enabled:o,interval:l}}}const Ml={[h.xW.Structure]:Object.assign(Object.assign(Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Se.lateLoadKey,properties:{nodes:["header","loading","search","body"]},providers:{[h.Mu.EventProxy]:Mt}},header:pt,loading:It,body:Object.assign(Object.assign({},Je),{properties:Object.assign(Object.assign({},Je.properties),{elementClass:"overflow-auto"})})},gt("listWidget")),{search:{id:"search",componentType:li.lateLoadKey}}),gt("mainContent")),{mainContent:{id:"mainContent",componentType:Se.lateLoadKey,properties:{nodes:["navigationBar","listWidget"]}},navigationBar:{id:"navigationBar",componentType:vt.lateLoadKey},listWidget:{id:"listWidget",componentType:_.lateLoadKey,providers:{},properties:{elementClass:"w-100 p-3"}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM},header:{properties:{title:$localize`Empty Custom Widget`}}}},Pl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:Ml,configurator:Nl},Dl={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:_t.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","customConfig"]}},presentation:{id:"presentation",componentType:ze.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription"]}},titleAndDescription:{id:"titleAndDescription",componentType:ut.lateLoadKey,providers:{converter:{providerId:T.j4}}},customConfig:{id:"customConfig",componentType:ze.lateLoadKey,properties:{headerText:$localize`Custom Widget Configuration`,nodes:["embeddedContentSelection"]}},embeddedContentSelection:{id:"embeddedContentSelection",componentType:Ri.lateLoadKey,properties:{messageComponent:{componentType:io.lateLoadKey,properties:{emphasizeText:"Some content may not work as expected.",generalText:"Web pages embedded in a widget may not be able to open popup windows or may experience formatting problems.\n                                    If you supply your own HTML, dangerous content like scripts will be removed.",link:{href:"https://www.solarwinds.com/",target:"_blank",text:"Learn more about best practices for the HTML widget"},allowDismiss:!0}}},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"mainContent.properties",keys:["customEmbeddedContent","mode","messageComponent","sanitized"]}]}}}}}},Fl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Se.lateLoadKey,providers:{[h.Mu.Refresher]:qe(),[h.Mu.EventProxy]:Mt},properties:{nodes:["header","loading","body"]}},header:pt,loading:It,body:Je},gt("mainContent")),{mainContent:{id:"mainContent",componentType:x.lateLoadKey,properties:{elementClass:"d-flex w-100 justify-content-center"}}}),[h.xW.Configuration]:{header:{properties:{title:$localize`Empty Embedded Content Widget`}}}},bl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM}},widget:Fl,configurator:Dl},Zt={id:"refresher",componentType:so.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:`${T.XM}.providers.refresher.properties`,keys:["enabled","interval","overrideDefaultSettings"]}]}}},properties:{overrideDefaultSettings:!1}},xl=[{componentType:Nt.a.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:Ut.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null}},{componentType:fi.C.lateLoadKey,label:$localize`Icon`,dataTypes:{value:null}}],Ll={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:_t.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","tiles"]},providers:{[h.Mu.FormattersRegistry]:{providerId:T.s6}}},presentation:{id:"presentation",componentType:ze.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","refresher"]}},titleAndDescription:{id:"titleAndDescription",componentType:ut.lateLoadKey,providers:{converter:{providerId:T.j4}}},refresher:Zt,tiles:{id:"tiles",componentType:po.lateLoadKey,properties:{template:[{id:"description",componentType:no.lateLoadKey,properties:{configurableUnits:!0,backgroundColors:[...Si]},providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"properties.widgetData",keys:["label","backgroundColor","units"]}]}}}},{id:"dataSource",componentType:At.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Ot.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"providers.dataSource",keys:["providerId","properties"]},{previewPath:"providers.adapter.properties.dataSource",keys:["properties"]}]}},[h.Mu.Broadcaster]:{providerId:T.m_,properties:{configs:[{trackOn:"component",key:"dataFieldIds",paths:["data.{parentComponentId}/formatting.properties.dataFieldIds"]}]}}}},{id:"thresholds",componentType:ao.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"providers.adapter.properties.thresholds",keys:["criticalThresholdValue","warningThresholdValue","showThresholds","reversedThresholds"]}]}}}},{id:"backgroundColorRules",componentType:qi.lateLoadKey,properties:{backgroundColors:[...Si]},providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"providers.kpiColorPrioritizer.properties",keys:["rules"]}]}}}},{id:"formatting",componentType:Ro.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.YN,properties:{formParts:[{previewPath:"properties.configuration.formatters.Value",keys:["formatter"]}]}}},properties:{formatter:{componentType:Nt.a.lateLoadKey,properties:{dataFieldIds:{value:"value"}}}}}]},providers:{[h.Mu.Converter]:{providerId:T.ns}}}}},Gl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Se.lateLoadKey,providers:{[h.Mu.Refresher]:qe(),[h.Mu.EventProxy]:Mt},properties:{nodes:["header","loading","body"]}},header:pt,loading:It,body:Object.assign(Object.assign({},Je),{properties:Object.assign(Object.assign({},Je.properties),{elementClass:"overflow-hidden"})})},gt("tiles",T.C)),{tiles:{id:"tiles",componentType:Xe.lateLoadKey,properties:{elementClass:"flex-grow-1 pt-2 px-3 pb-3 w-100",template:{componentType:q.lateLoadKey,providers:{[h.Mu.KpiColorPrioritizer]:{providerId:T.tS,properties:{}},[h.Mu.Adapter]:{providerId:T.u1,properties:{propertyPath:"widgetData"}}},properties:{elementClass:"flex-grow-1"}}}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:qe(!1,60)}},header:{properties:{title:$localize`Empty KPI Widget`}}}},Lo="tiles.properties.template[0]",Go="tiles.properties.template[1]",$l={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:`${Go}.componentType`,[h.AC.TileDescriptionConfigComponentType]:`${Lo}.componentType`,[h.AC.DataSourceProviders]:`${Go}.properties.dataSourceProviders`,[h.AC.TileDescriptionBackgroundColors]:`${Lo}.properties.backgroundColors`,[h.AC.TileBackgroundColorRulesBackgroundColors]:"tiles.properties.template[3].properties.backgroundColors"}},widget:Gl,configurator:Ll},Ul={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM}},widget:{[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:Se.lateLoadKey,properties:{nodes:["header","body"]}},header:pt,body:Je,bodyContent:{id:"bodyContent",componentType:Hi.lateLoadKey}},[h.xW.Configuration]:{header:{properties:{title:$localize`New Widget`}}}}},Mi=(o,l)=>{const t=(null==l?void 0:l.chartSeriesDataFieldId)||"data[0]";let i=o[0];return(null==l?void 0:l.activeMetricId)&&(i=o.find(n=>n.id===(null==l?void 0:l.activeMetricId)),i||console.warn(`No metric with id: ${null==l?void 0:l.activeMetricId} found. Taking first available.`)),Ft()(i,t)};Mi.aggregatorType="fieldMapper";var zl=a(7154),wo=a.n(zl);const Vt=(o,l)=>{var t;const i=o.map(Q=>Q.data[0]),{activeMetricId:n,base100:s}=l||{},p=wo()(i);let f=i[0];n&&(f=null===(t=o.find(Q=>Q.id===n))||void 0===t?void 0:t.data[0],f||console.warn(`No metric with id: ${n} found. Taking first available.`));const D=f/p;let $=s?100*D:D;return $=Math.round(100*$)/100,$.toString()};Vt.aggregatorType="percentageAggregator";const Jt=(o,l)=>{const{activeMetricId:t}=l||{};if(t){const i=o.find(n=>n.id===t);if(i)return i.data[0]}return wo()(o.map(i=>i.data[0])).toString()};Jt.aggregatorType="sumAggregator";const Bl=[{componentType:"",label:$localize`Raw Formatter`,dataTypes:{value:null}},{componentType:Ci.lateLoadKey,label:$localize`Status With Icon`,dataTypes:{value:null}},{componentType:$t.s.lateLoadKey,label:$localize`Link`,dataTypes:{value:null}}],Wl=[{componentType:Nt.a.lateLoadKey,label:$localize`Raw Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:Ut.lateLoadKey,label:$localize`Si Units Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}},{componentType:Ti.lateLoadKey,label:$localize`Percentage Formatter`,dataTypes:{value:null},properties:{elementClass:"nui-text-page"}}],kl=[{aggregatorType:Jt.aggregatorType,label:"Sum Aggregator",fn:Jt,configurationComponent:kt.lateLoadKey},{aggregatorType:Vt.aggregatorType,label:"Percentage Aggregator",fn:Vt,properties:{base100:!0},configurationComponent:kt.lateLoadKey},{aggregatorType:Mi.aggregatorType,label:"Field Mapper Aggregator",fn:Mi,configurationComponent:go.lateLoadKey}],Zl={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:_t.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations"]},providers:{[h.Mu.FormattersRegistry]:{providerId:T.rf}}},presentation:{id:"presentation",componentType:ze.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor"]}},titleAndDescription:{id:"titleAndDescription",componentType:ut.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.j4}}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:mo.lateLoadKey,properties:{chartOptions:{chartTypes:["PieChart","DonutChart","VerticalBarChart","HorizontalBarChart"],legendPlacementOptions:[{id:y.w.None,label:$localize`None`},{id:y.w.Right,label:$localize`Right`},{id:y.w.Bottom,label:$localize`Bottom`}],contentFormatters:[{componentType:Zi.lateLoadKey,label:$localize`Raw`},{componentType:mi.lateLoadKey,label:$localize`Sum`},{componentType:hi.lateLoadKey,label:$localize`Percentage`,configurationComponent:"DonutContentPercentageConfigurationComponent"}],legendFormatters:[{componentType:Ci.lateLoadKey,label:$localize`Status With Icon`},{componentType:$t.s.lateLoadKey,label:$localize`Link`}]}},providers:{[h.Mu.Converter]:{providerId:T.dz}}},refresher:Zt,dataAndCalculations:{id:"dataAndCalculations",componentType:ze.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:At.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Ot.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"chart.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}},[h.Mu.Broadcaster]:{providerId:T.m_,properties:{configs:[{trackOn:"component",key:"dsOutput",paths:["data.chartOptionsEditor.properties.dsOutput"]}]}}}}}},Vl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Se.lateLoadKey,properties:{nodes:["header","loading","body"]},providers:{[h.Mu.Refresher]:qe(),[h.Mu.EventProxy]:Mt}},header:pt,loading:It,body:Object.assign(Object.assign({},Je),{properties:Object.assign(Object.assign({},Je.properties),{elementClass:"overflow-auto"})})},gt("chart")),{chart:{id:"chart",componentType:Qt.lateLoadKey,providers:{[h.Mu.Adapter]:{providerId:T.bZ,properties:{componentId:"chart",propertyPath:"widgetData"}}},properties:{elementClass:"d-flex flex-grow-1 justify-content-center overflow-auto"}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:qe(!1,60)}},header:{properties:{title:$localize`Empty Proportional Widget`}}}},Jl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:"dataSource.componentType",[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[h.AC.Formatters]:"chartOptionsEditor.properties.chartOptions.contentFormatters"}},widget:Vl,configurator:Zl},Yl={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:_t.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","columns"]},providers:{[h.Mu.FormattersRegistry]:{providerId:T.Hp},[h.Mu.DataSourceManager]:{providerId:T.Xh}}},presentation:{id:"presentation",componentType:ze.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","filters"]}},titleAndDescription:{id:"titleAndDescription",componentType:ut.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.j4}}},filters:{id:"filters",componentType:No.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.LU}}},refresher:Zt,dataAndCalculations:{id:"dataAndCalculations",componentType:ze.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:At.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:to.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"table.providers.dataSource",keys:["providerId","properties"]},{previewPath:"table.providers.adapter.properties.dataSource",keys:["properties"]}]}}}},columns:{id:"columns",componentType:So.lateLoadKey,properties:{template:[{},{properties:{formatters:Oo.X}}]},providers:{[h.Mu.Converter]:{providerId:T.n5}}}}},Hl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Se.lateLoadKey,providers:{[h.Mu.Refresher]:qe(),[h.Mu.EventProxy]:{providerId:T.GN,properties:{downstreams:[T.pV.id]}}},properties:{nodes:["header","loading","body"]}},header:pt,loading:It,body:Object.assign(Object.assign({},Je),{properties:Object.assign(Object.assign({},Je.properties),{elementClass:"overflow-auto"})})},gt("table")),{table:{id:"table",componentType:qt.lateLoadKey,providers:{[h.Mu.Adapter]:{providerId:T.l5,properties:{componentId:"table",dataPath:"widgetData",dataFieldsPath:"dataFields",totalItemsPath:"totalItems"}},virtualViewportManager:{providerId:T.Vx}},properties:{elementClass:"flex-grow-1 mx-3 mb-3 mt-2",delayedMousePresenceDetectionEnabled:!0,configuration:{columns:[],scrollActivationDelayMs:500,headerTooltipsEnabled:!0}}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:qe(!1,60)}},header:{properties:{title:$localize`Empty Table Widget`}}}},Kl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:"dataSource.componentType",[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders",[h.AC.Formatters]:"columns.properties.template[1].properties.formatters"}},widget:Hl,configurator:Yl},Ql={[h.xW.Structure]:{[T.XM]:{id:T.XM,componentType:_t.lateLoadKey,properties:{elementClass:"flex-grow-1 overflow-auto nui-scroll-shadows",nodes:["presentation","dataAndCalculations","series"]}},presentation:{id:"presentation",componentType:ze.lateLoadKey,properties:{headerText:$localize`Presentation`,nodes:["titleAndDescription","timeseriesMetadata"]}},titleAndDescription:{id:"titleAndDescription",componentType:ut.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.j4}}},timeseriesMetadata:{id:"timeseriesMetadata",componentType:lo.lateLoadKey,properties:{legendPlacements:[{id:y.w.None,label:$localize`None`},{id:y.w.Right,label:$localize`Right`},{id:y.w.Bottom,label:$localize`Bottom`}]},providers:{[h.Mu.Converter]:{providerId:T.dZ}}},refresher:Zt,dataAndCalculations:{id:"dataAndCalculations",componentType:ze.lateLoadKey,properties:{headerText:$localize`Data and Calculations`,nodes:["dataSource"]}},dataSource:{id:"dataSource",componentType:At.lateLoadKey,properties:{dataSourceProviders:[],errorComponent:Ot.lateLoadKey},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"/.providers.dataSource",keys:["providerId","properties"]},{previewPath:"chart.providers.adapter.properties.dataSource",keys:["properties"]}]}}}},series:{id:"series",componentType:Ao.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.Ip}},properties:{template:[{id:"description",componentType:yo.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.Es,properties:{formParts:[{previewPath:"chart.providers.adapter.properties.series",keys:["label"]}]}}}},{id:"indicatorData",componentType:Mo.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.Gq}}}]}}}},Xl={[h.xW.Structure]:Object.assign(Object.assign({[T.XM]:{id:T.XM,componentType:Se.lateLoadKey,providers:{[h.Mu.Refresher]:qe(),[h.Mu.EventProxy]:Mt},properties:{nodes:["header","loading","body"]}},header:pt,loading:It,body:Object.assign(Object.assign({},Je),{properties:Object.assign(Object.assign({},Je.properties),{elementClass:"overflow-auto"})})},gt("mainContent")),{mainContent:{id:"mainContent",componentType:Se.lateLoadKey,properties:{nodes:["timeframeSelection","chart"]}},timeframeSelection:{id:"timeframeSelection",componentType:ti.lateLoadKey},chart:{id:"chart",componentType:ai.lateLoadKey,properties:{elementClass:"d-flex flex-column justify-content-center h-100 overflow-auto",configuration:{preset:Ge.Line,scales:{y:{type:je.Linear},x:{type:je.Time}}}},providers:{[h.Mu.Adapter]:{providerId:T.R9,properties:{componentId:"chart",propertyPath:"widgetData",series:[]}}}}}),[h.xW.Configuration]:{[T.XM]:{id:T.XM,providers:{[h.Mu.Refresher]:qe(!1,60)}},header:{properties:{title:$localize`Empty Timeseries Widget`}}}},jl={paths:{widget:{[h.AC.Root]:T.XM},configurator:{[h.AC.Root]:T.XM,[h.AC.DataSourceConfigComponentType]:"dataSource.componentType",[h.AC.DataSourceProviders]:"dataSource.properties.dataSourceProviders"}},widget:Xl,configurator:Ql};var ql=a(29242);const ed=[x,q,oi,m.N,Qt,Se,ni,ri,si,ii,qt,Gi.q,Xe,ti,ai,ci,di,_i,S,_,ht,ot,vt,li,$e];let td=(()=>{class o{constructor(t,i,n,s){t.registerWidgetType("kpi",1,$l),t.registerWidgetType("table",1,Kl),t.registerWidgetType("proportional",1,Jl),t.registerWidgetType("timeseries",1,jl),t.registerWidgetType("previewPlaceholder",1,Ul),t.registerWidgetType("embedded-content",1,bl),t.registerWidgetType("drilldown",1,Pl);for(const p of ed.filter(f=>f.lateLoadKey))i.registerByLateLoadKey(p);n.registerEvent(T.RG),n.registerEvent(T.y4),n.registerEvent(T.j7),n.registerEvent(T.Ef),n.registerEvent(T.MO),n.registerEvent(T.pV),n.registerEvent(T.Xi),n.registerEvent(T.M),n.registerEvent(T.re),n.registerEvent(T.xZ),n.registerEvent(T.N9),n.registerEvent(we.PF),n.registerEvent(T.QD),s.addItems(xl)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(J.x),e.LFG(pi.h),e.LFG(ql.o),e.LFG(de.YX))},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Do.$,J.x,r.JJ,Xt.g],imports:[[R,O.IX,d.Gsl,d.Az_,g.$y4,xo,d.Ts3,d.sF0,d.r$w,Ui,d.cnx,d.BSv,d.hvO,d.l70,v.Cl,d.JhO,c.UX,d.ILf,d.VSN,d.a$t,d.lam,d.ZuS,d.w0o]]}),o})();var Yt=(()=>((Yt||(Yt={})).Value="Value",Yt))();function id(o,l,t){const i=l;return t.forEach((n,s)=>{if(0===n.data.length)return;let p=-1,f=-1;const D=l[s].data;D.length>0?(p=n.data.findIndex(X=>Be()(X.x).isSame(D[0].x)),f=n.data.findIndex(X=>Be()(X.x).isSame(D[D.length-1].x))):(p=n.data.findIndex(X=>Be()(X.x).isAfter(o.startDatetime)),f=n.data.findIndex(X=>Be()(X.x).isAfter(o.endDatetime))-1);const $=Be()(o.startDatetime);(0===D.length||!$.isSame(D[0].x))&&$.isBetween(n.data[0].x,n.data[n.data.length-1].x)&&i[s].data.unshift(Object.assign(Object.assign({},n.data[p-1]),{x:o.startDatetime.toDate()}));const Q=Be()(o.endDatetime);(0===D.length||!Q.isSame(D[D.length-1].x))&&Q.isBetween(n.data[0].x,n.data[n.data.length-1].x)&&i[s].data.push(Object.assign(Object.assign({},n.data[f]),{x:o.endDatetime.toDate()}))}),i}a(97674),a(26365),a(10948),a(42296),a(50271),a(38046);const od={presentation:{id:"presentation",componentType:ze.lateLoadKey,properties:{headerText:"Presentation",nodes:["titleAndDescription","chartOptionsEditor","donutContentConfiguration"]}},chartOptionsEditor:{id:"chartOptionsEditor",componentType:ho.lateLoadKey,properties:{chartTypes:[{id:"PieChart",label:$localize`Pie`},{id:"DonutChart",label:$localize`Donut`},{id:"VerticalBarChart",label:$localize`Vertical Bar`},{id:"HorizontalBarChart",label:$localize`Horizontal Bar`}],legendPlacementOptions:[{id:y.w.None,label:$localize`None`},{id:y.w.Right,label:$localize`Right`},{id:y.w.Bottom,label:$localize`Bottom`}]},providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions",keys:["type","legendPlacement","legendFormatter"]}]}},[h.Mu.Broadcaster]:{providerId:T.m_,properties:{configs:[{trackOn:"component",key:"chartTypeChanged$",paths:["data.donutContentConfiguration.properties.chartType"]}]}}}},donutContentConfiguration:{id:"donutContentConfiguration",componentType:To.lateLoadKey,providers:{[h.Mu.Converter]:{providerId:T.VX,properties:{formParts:[{previewPath:"chart.properties.configuration.chartOptions.donutContentConfig",keys:["formatter","aggregator"]}]}}}}}},84493:ee=>{ee.exports=function U(a,r){for(var d,C=-1,e=a.length;++C<e;){var S=r(a[C]);void 0!==S&&(d=void 0===d?S:d+S)}return d}},94133:(ee,U,a)=>{var r=a(42664),d=a(50686),C=a(80707);ee.exports=function e(S,N,R){var v=S.length;if(v<2)return v?C(S[0]):[];for(var c=-1,O=Array(v);++c<v;)for(var g=S[c],L=-1;++L<v;)L!=c&&(O[c]=r(O[c]||g,S[L],N,R));return C(d(O,1),N,R)}},38645:ee=>{ee.exports=function U(a,r,d){for(var C=-1,e=a.length,S=r.length,N={};++C<e;)d(N,a[C],C<S?r[C]:void 0);return N}},18680:(ee,U,a)=>{var r=a(42664),d=a(50686),C=a(23269),e=a(21330),S=C(function(N,R){return e(N)?r(N,d(R,1,e,!0)):[]});ee.exports=S},7154:(ee,U,a)=>{var r=a(84493),d=a(32608);ee.exports=function C(e){return e&&e.length?r(e,d):0}},10912:(ee,U,a)=>{var r=a(96517),d=a(84493);ee.exports=function C(e,S){return e&&e.length?d(e,r(S,2)):0}},68921:(ee,U,a)=>{var r=a(50686),d=a(23269),C=a(80707),e=a(21330),S=d(function(N){return C(r(N,1,e,!0))});ee.exports=S},19574:(ee,U,a)=>{var r=a(69779),d=a(23269),C=a(94133),e=a(21330),S=d(function(N){return C(r(N,e))});ee.exports=S},21617:(ee,U,a)=>{var r=a(89719),d=a(38645);ee.exports=function C(e,S){return d(e||[],S||[],r)}},33748:(ee,U,a)=>{"use strict";a.d(U,{IM:()=>Pt,IX:()=>Dt,KY:()=>T,RU:()=>h,sm:()=>ne,tQ:()=>P});var r=a(5e3),d=a(77579),C=a(78372),e=a(82722),S=a(63900),N=a(5963),R=a(69808);function v(Y,u){if(1&Y&&r._UZ(0,"div",3),2&Y){const _=u.index,m=r.oxw();r.Q6J("ngStyle",m.gridRenderer.getGridColumnStyle(_))}}function c(Y,u){if(1&Y&&r._UZ(0,"div",4),2&Y){const _=u.index,m=r.oxw();r.Q6J("ngStyle",m.gridRenderer.getGridRowStyle(_))}}const O=["*"];function g(Y,u){if(1&Y){const _=r.EpF();r.TgZ(0,"div",8),r.NdJ("mousedown",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function L(Y,u){if(1&Y){const _=r.EpF();r.TgZ(0,"div",9),r.NdJ("mousedown",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function M(Y,u){if(1&Y){const _=r.EpF();r.TgZ(0,"div",10),r.NdJ("mousedown",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function F(Y,u){if(1&Y){const _=r.EpF();r.TgZ(0,"div",11),r.NdJ("mousedown",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function G(Y,u){if(1&Y){const _=r.EpF();r.TgZ(0,"div",12),r.NdJ("mousedown",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function x(Y,u){if(1&Y){const _=r.EpF();r.TgZ(0,"div",13),r.NdJ("mousedown",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function A(Y,u){if(1&Y){const _=r.EpF();r.TgZ(0,"div",14),r.NdJ("mousedown",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}function z(Y,u){if(1&Y){const _=r.EpF();r.TgZ(0,"div",15),r.NdJ("mousedown",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)})("touchstart",function(E){return r.CHM(_),r.oxw().resize.dragStartDelay(E)}),r.qZA()}}var P=(()=>{return(Y=P||(P={})).Fit="fit",Y.ScrollVertical="scrollVertical",Y.ScrollHorizontal="scrollHorizontal",Y.Fixed="fixed",Y.VerticalFixed="verticalFixed",Y.HorizontalFixed="horizontalFixed",P;var Y})(),T=(()=>{return(Y=T||(T={})).Always="always",Y.OnDragAndResize="onDrag&Resize",Y.None="none",T;var Y})(),h=(()=>{return(Y=h||(h={})).None="none",Y.CompactUp="compactUp",Y.CompactLeft="compactLeft",Y.CompactUpAndLeft="compactUp&Left",Y.CompactLeftAndUp="compactLeft&Up",Y.CompactRight="compactRight",Y.CompactUpAndRight="compactUp&Right",Y.CompactRightAndUp="compactRight&Up",Y.CompactDown="compactDown",Y.CompactDownAndLeft="compactDown&Left",Y.CompactLeftAndDown="compactLeft&Down",Y.CompactDownAndRight="compactDown&Right",Y.CompactRightAndDown="compactRight&Down",h;var Y})(),b=(()=>{return(Y=b||(b={})).LTR="ltr",Y.RTL="rtl",b;var Y})();class w{constructor(u){this.gridster=u}destroy(){this.gridster=null}checkCompact(){this.gridster.$options.compactType!==h.None&&(this.gridster.$options.compactType===h.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===h.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===h.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===h.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===h.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===h.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===h.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===h.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===h.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===h.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===h.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===h.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(u){this.gridster.$options.compactType!==h.None&&(this.gridster.$options.compactType===h.CompactUp?this.moveTillCollision(u,"y",-1):this.gridster.$options.compactType===h.CompactLeft?this.moveTillCollision(u,"x",-1):this.gridster.$options.compactType===h.CompactUpAndLeft?(this.moveTillCollision(u,"y",-1),this.moveTillCollision(u,"x",-1)):this.gridster.$options.compactType===h.CompactLeftAndUp?(this.moveTillCollision(u,"x",-1),this.moveTillCollision(u,"y",-1)):this.gridster.$options.compactType===h.CompactUpAndRight?(this.moveTillCollision(u,"y",-1),this.moveTillCollision(u,"x",1)):this.gridster.$options.compactType===h.CompactDown?this.moveTillCollision(u,"y",1):this.gridster.$options.compactType===h.CompactDownAndLeft?(this.moveTillCollision(u,"y",1),this.moveTillCollision(u,"x",-1)):this.gridster.$options.compactType===h.CompactLeftAndDown?(this.moveTillCollision(u,"x",-1),this.moveTillCollision(u,"y",1)):this.gridster.$options.compactType===h.CompactDownAndRight?(this.moveTillCollision(u,"y",1),this.moveTillCollision(u,"x",1)):this.gridster.$options.compactType===h.CompactRightAndDown&&(this.moveTillCollision(u,"x",1),this.moveTillCollision(u,"y",1)))}checkCompactMovement(u,_){let m=!1;this.gridster.grid.forEach(E=>{!1!==E.$item.compactEnabled&&this.moveTillCollision(E.$item,u,_)&&(m=!0,E.item[u]=E.$item[u],E.itemChanged())}),m&&this.checkCompact()}moveTillCollision(u,_,m){return u[_]+=m,this.gridster.checkCollision(u)?(u[_]-=m,!1):(this.moveTillCollision(u,_,m),!0)}}const H={gridType:P.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:h.None,mobileBreakpoint:640,useBodyForBreakpoint:!1,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:T.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,enableBoundaryControl:!1,disableAutoPositionOnConflict:!1,dirType:b.LTR};class Z{static merge(u,_,m){for(const E in _)void 0!==_[E]&&m.hasOwnProperty(E)&&(u[E]="object"==typeof _[E]?Z.merge(u[E],_[E],m[E]):_[E]);return u}static checkTouchEvent(u){void 0===u.clientX&&u.touches&&(u.touches&&u.touches.length?(u.clientX=u.touches[0].clientX,u.clientY=u.touches[0].clientY):u.changedTouches&&u.changedTouches.length&&(u.clientX=u.changedTouches[0].clientX,u.clientY=u.changedTouches[0].clientY))}static checkContentClassForEvent(u,_){if(u.$options.draggable.ignoreContent){if(!Z.checkDragHandleClass(_.target,_.currentTarget,u.$options.draggable.dragHandleClass,u.$options.draggable.ignoreContentClass))return!0}else if(Z.checkContentClass(_.target,_.currentTarget,u.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(u,_){return Z.checkContentClass(_.target,_.currentTarget,u.$options.draggable.ignoreContentClass)||Z.checkContentClass(_.target,_.currentTarget,u.$options.draggable.dragHandleClass)}static checkDragHandleClass(u,_,m,E){if(!u||u===_)return!1;if(u.hasAttribute("class")){const W=u.getAttribute("class").split(" ");if(W.indexOf(m)>-1)return!0;if(W.indexOf(E)>-1)return!1}return Z.checkDragHandleClass(u.parentNode,_,m,E)}static checkContentClass(u,_,m){return!(!u||u===_)&&(!!(u.hasAttribute("class")&&u.getAttribute("class").split(" ").indexOf(m)>-1)||Z.checkContentClass(u.parentNode,_,m))}static compareItems(u,_){return u.y>_.y?-1:u.y<_.y?1:u.x>_.x?-1:1}}class oe{constructor(u){this.gridster=u,this.emptyCellClickCb=_=>{if(!this.gridster||this.gridster.movingItem||Z.checkContentClassForEmptyCellClickEvent(this.gridster,_))return;const m=this.getValidItemFromEvent(_);!m||(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(_,m),this.gridster.cdRef.markForCheck())},this.emptyCellContextMenuCb=_=>{if(this.gridster.movingItem||Z.checkContentClassForEmptyCellClickEvent(this.gridster,_))return;_.preventDefault(),_.stopPropagation();const m=this.getValidItemFromEvent(_);!m||(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(_,m),this.gridster.cdRef.markForCheck())},this.emptyCellDragDrop=_=>{const m=this.getValidItemFromEvent(_);!m||(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(_,m),this.gridster.cdRef.markForCheck())},this.emptyCellDragOver=_=>{_.preventDefault(),_.stopPropagation();const m=this.getValidItemFromEvent(_);m?(_.dataTransfer&&(_.dataTransfer.dropEffect="move"),this.gridster.movingItem=m):(_.dataTransfer&&(_.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()},this.emptyCellMouseDown=_=>{if(Z.checkContentClassForEmptyCellClickEvent(this.gridster,_))return;_.preventDefault(),_.stopPropagation();const m=this.getValidItemFromEvent(_);!m||1!==_.buttons&&!(_ instanceof TouchEvent)||(this.initialItem=m,this.gridster.movingItem=m,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.removeWindowMousemoveListenerFn=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove),this.removeWindowTouchmoveListenerFn=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove)}),this.removeWindowMouseupListenerFn=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp),this.removeWindowTouchendListenerFn=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp))},this.emptyCellMouseMove=_=>{_.preventDefault(),_.stopPropagation();const m=this.getValidItemFromEvent(_,this.initialItem);!m||(this.gridster.movingItem=m,this.gridster.previewStyle())},this.emptyCellMouseUp=_=>{this.removeWindowMousemoveListenerFn(),this.removeWindowTouchmoveListenerFn(),this.removeWindowMouseupListenerFn(),this.removeWindowTouchendListenerFn();const m=this.getValidItemFromEvent(_,this.initialItem);m&&(this.gridster.movingItem=m),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(_,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()}}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),this.gridster.movingItem=null,this.initialItem=this.gridster=null,this.removeDocumentDragendListenerFn&&(this.removeDocumentDragendListenerFn(),this.removeDocumentDragendListenerFn=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.removeEmptyCellClickListenerFn&&this.gridster.options.emptyCellClickCallback?(this.removeEmptyCellClickListenerFn=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb),this.removeEmptyCellTouchendListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb)):!this.gridster.$options.enableEmptyCellClick&&this.removeEmptyCellClickListenerFn&&this.removeEmptyCellTouchendListenerFn&&(this.removeEmptyCellClickListenerFn(),this.removeEmptyCellTouchendListenerFn(),this.removeEmptyCellClickListenerFn=null,this.removeEmptyCellTouchendListenerFn=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.removeEmptyCellContextMenuListenerFn&&this.gridster.options.emptyCellContextMenuCallback?this.removeEmptyCellContextMenuListenerFn=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb):!this.gridster.$options.enableEmptyCellContextMenu&&this.removeEmptyCellContextMenuListenerFn&&(this.removeEmptyCellContextMenuListenerFn(),this.removeEmptyCellContextMenuListenerFn=null),this.gridster.$options.enableEmptyCellDrop&&!this.removeEmptyCellDropListenerFn&&this.gridster.options.emptyCellDropCallback?(this.removeEmptyCellDropListenerFn=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop),this.gridster.zone.runOutsideAngular(()=>{this.removeEmptyCellDragoverListenerFn=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver)}),this.removeDocumentDragendListenerFn=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.removeEmptyCellDropListenerFn&&this.removeEmptyCellDragoverListenerFn&&this.removeDocumentDragendListenerFn&&(this.removeEmptyCellDropListenerFn(),this.removeEmptyCellDragoverListenerFn(),this.removeDocumentDragendListenerFn(),this.removeEmptyCellDragoverListenerFn=null,this.removeEmptyCellDropListenerFn=null,this.removeDocumentDragendListenerFn=null),this.gridster.$options.enableEmptyCellDrag&&!this.removeEmptyCellMousedownListenerFn&&this.gridster.options.emptyCellDragCallback?(this.removeEmptyCellMousedownListenerFn=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown),this.removeEmptyCellTouchstartListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown)):!this.gridster.$options.enableEmptyCellDrag&&this.removeEmptyCellMousedownListenerFn&&this.removeEmptyCellTouchstartListenerFn&&(this.removeEmptyCellMousedownListenerFn(),this.removeEmptyCellTouchstartListenerFn(),this.removeEmptyCellMousedownListenerFn=null,this.removeEmptyCellTouchstartListenerFn=null)}getPixelsX(u,_){const m=this.gridster.options.scale;return m?(u.clientX-_.left)/m+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():u.clientX+this.gridster.el.scrollLeft-_.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(u,_){const m=this.gridster.options.scale;return m?(u.clientY-_.top)/m+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():u.clientY+this.gridster.el.scrollTop-_.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(u,_){u.preventDefault(),u.stopPropagation(),Z.checkTouchEvent(u);const m=this.gridster.el.getBoundingClientRect(),E=this.getPixelsX(u,m),W=this.getPixelsY(u,m),J={x:this.gridster.pixelsToPositionX(E,Math.floor,!0),y:this.gridster.pixelsToPositionY(W,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(_&&(J.cols=Math.min(Math.abs(_.x-J.x)+1,this.gridster.$options.emptyCellDragMaxCols),J.rows=Math.min(Math.abs(_.y-J.y)+1,this.gridster.$options.emptyCellDragMaxRows),_.x<J.x?J.x=_.x:_.x-J.x>this.gridster.$options.emptyCellDragMaxCols-1&&(J.x=this.gridster.movingItem?this.gridster.movingItem.x:0),_.y<J.y?J.y=_.y:_.y-J.y>this.gridster.$options.emptyCellDragMaxRows-1&&(J.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(J))return J}}class pe{constructor(u){this.gridster=u}destroy(){this.gridster=null}updateItem(u,_,m){if(this.gridster.mobile)this.clearCellPosition(m,u),m.setStyle(u,"height",this.gridster.$options.keepFixedHeightInMobile?(_.rows-1)*this.gridster.$options.margin+_.rows*this.gridster.$options.fixedRowHeight+"px":_.rows*this.gridster.curWidth/_.cols+"px"),m.setStyle(u,"width",this.gridster.$options.keepFixedWidthInMobile?this.gridster.$options.fixedColWidth+"px":""),m.setStyle(u,"margin-bottom",this.gridster.$options.margin+"px"),m.setStyle(u,b.LTR?"margin-right":"margin-left","");else{const E=Math.round(this.gridster.curColWidth*_.x),W=Math.round(this.gridster.curRowHeight*_.y),J=this.gridster.curColWidth*_.cols-this.gridster.$options.margin,de=this.gridster.curRowHeight*_.rows-this.gridster.$options.margin;this.setCellPosition(m,u,E,W),m.setStyle(u,"width",J+"px"),m.setStyle(u,"height",de+"px");let me=null,he=null;this.gridster.$options.outerMargin&&(this.gridster.rows===_.rows+_.y&&(me=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===_.cols+_.x&&(he=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),m.setStyle(u,"margin-bottom",me),m.setStyle(u,b.LTR?"margin-right":"margin-left",he)}}updateGridster(){let u="",_="",m="",E="";if(this.gridster.$options.gridType===P.Fit)u=P.Fit,_=P.ScrollVertical,m=P.ScrollHorizontal,E=P.Fixed;else if(this.gridster.$options.gridType===P.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,u=P.ScrollVertical,_=P.Fit,m=P.ScrollHorizontal,E=P.Fixed;else if(this.gridster.$options.gridType===P.ScrollHorizontal){const W=this.gridster.$options.rowHeightRatio;this.gridster.curColWidth=this.gridster.curRowHeight*(W>=1?W:W+1),u=P.ScrollHorizontal,_=P.Fit,m=P.ScrollVertical,E=P.Fixed}else this.gridster.$options.gridType===P.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),u=P.Fixed,_=P.Fit,m=P.ScrollVertical,E=P.ScrollHorizontal):this.gridster.$options.gridType===P.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),u=P.ScrollVertical,_=P.Fit,m=P.ScrollHorizontal,E=P.Fixed):this.gridster.$options.gridType===P.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),u=P.ScrollHorizontal,_=P.Fit,m=P.ScrollVertical,E=P.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==P.Fit?this.gridster.renderer.removeClass(this.gridster.el,u):this.gridster.renderer.addClass(this.gridster.el,u),this.gridster.renderer.removeClass(this.gridster.el,_),this.gridster.renderer.removeClass(this.gridster.el,m),this.gridster.renderer.removeClass(this.gridster.el,E)}getGridColumnStyle(u){return Object.assign(Object.assign({},this.getLeftPosition(this.gridster.curColWidth*u)),{width:this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}getGridRowStyle(u){return Object.assign(Object.assign({},this.getTopPosition(this.gridster.curRowHeight*u)),{width:this.gridster.gridColumns.length*this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}getLeftPosition(u){const _=this.gridster.$options.dirType===b.RTL?-u:u;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+_+"px)"}:{left:this.getLeftMargin()+_+"px"}}getTopPosition(u){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+u+"px)"}:{top:this.getTopMargin()+u+"px"}}clearCellPosition(u,_){this.gridster.$options.useTransformPositioning?u.setStyle(_,"transform",""):(u.setStyle(_,"top",""),u.setStyle(_,"left",""))}setCellPosition(u,_,m,E){const W=this.gridster.$options.dirType===b.RTL?-m:m;this.gridster.$options.useTransformPositioning?u.setStyle(_,"transform","translate3d("+W+"px, "+E+"px, 0)"):(u.setStyle(_,"left",this.getLeftMargin()+W+"px"),u.setStyle(_,"top",this.getTopMargin()+E+"px"))}getLeftMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}let K,q,te,fe,Ee,Le,Oe,Se,Ye,ue=(()=>{class Y{constructor(_,m){this.renderer=m,this.el=_.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(_=>this.previewStyle(_))}ngOnDestroy(){this.sub.unsubscribe()}previewStyle(_){_?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,_,this.renderer)):this.renderer.setStyle(this.el,"display","")}}return Y.\u0275fac=function(_){return new(_||Y)(r.Y36(r.SBq),r.Y36(r.Qsj))},Y.\u0275cmp=r.Xpm({type:Y,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},decls:0,vars:0,template:function(_,m){},styles:["gridster-preview{position:absolute;display:none;background:rgba(0,0,0,.15)}\n"],encapsulation:2}),Y})(),ne=(()=>{class Y{constructor(_,m,E,W){this.renderer=m,this.cdRef=E,this.zone=W,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.previewStyle$=new r.vpe,this.calculateLayout$=new d.x,this.resize$=new d.x,this.destroy$=new d.x,this.optionsChanged=()=>{this.setOptions();let de,J=this.grid.length-1;for(;J>=0;J--)de=this.grid[J],de.updateOptions();this.calculateLayout()},this.onResize=()=>{this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())},this.getNextPossiblePosition=(J,de={})=>{-1===J.cols&&(J.cols=this.$options.defaultItemCols),-1===J.rows&&(J.rows=this.$options.defaultItemRows),this.setGridDimensions();let he,me=de.y||0;for(;me<this.rows;me++)for(J.y=me,he=de.x||0;he<this.columns;he++)if(J.x=he,!this.checkCollision(J))return!0;const Ce=this.$options.maxRows>=this.rows+J.rows;return this.rows<=this.columns&&Ce||!(this.$options.maxCols>=this.columns+J.cols)?!!Ce&&(J.y=this.rows,J.x=0,!0):(J.x=this.columns,J.y=0,!0)},this.getFirstPossiblePosition=J=>{const de=Object.assign({},J);return this.getNextPossiblePosition(de),de},this.getLastPossiblePosition=J=>{let de={y:0,x:0};de=this.grid.reduce((he,Ce)=>{const De={y:Ce.$item.y+Ce.$item.rows-1,x:Ce.$item.x+Ce.$item.cols-1};return 1===Z.compareItems(he,De)?De:he},de);const me=Object.assign({},J);return this.getNextPossiblePosition(me,de),me},this.el=_.nativeElement,this.$options=JSON.parse(JSON.stringify(H)),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new oe(this),this.compact=new w(this),this.gridRenderer=new pe(this)}static checkCollisionTwoItemsForSwaping(_,m){return _.x+(1===_.cols?0:1)<m.x+m.cols&&_.x+_.cols>m.x+(1===m.cols?0:1)&&_.y+(1===_.rows?0:1)<m.y+m.rows&&_.y+_.rows>m.y+(1===m.rows?0:1)}checkCollisionTwoItems(_,m){if(!(_.x<m.x+m.cols&&_.x+_.cols>m.x&&_.y<m.y+m.rows&&_.y+_.rows>m.y))return!1;if(!this.$options.allowMultiLayer)return!0;const W=this.$options.defaultLayerIndex;return(void 0===_.layerIndex?W:_.layerIndex)===(void 0===m.layerIndex?W:m.layerIndex)}ngOnInit(){this.options.initCallback&&this.options.initCallback(this),this.calculateLayout$.pipe((0,C.b)(0),(0,e.R)(this.destroy$)).subscribe(()=>this.calculateLayout()),this.resize$.pipe((0,S.w)(()=>(0,N.H)(100)),(0,e.R)(this.destroy$)).subscribe(()=>this.resize())}ngOnChanges(_){_.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged,resize:this.onResize,getNextPossiblePosition:this.getNextPossiblePosition,getFirstPossiblePosition:this.getFirstPossiblePosition,getLastPossiblePosition:this.getLastPossiblePosition,getItemComponent:m=>this.getItemComponent(m)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}resize(){let _,m;"fit"!==this.$options.gridType||this.mobile?(m=this.el.clientWidth,_=this.el.clientHeight):(m=this.el.offsetWidth,_=this.el.offsetHeight),(m!==this.curWidth||_!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=Z.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize),this.emptyCell.updateOptions()}ngOnDestroy(){this.destroy$.next(),this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),this.emptyCell=null,this.compact.destroy(),this.compact=null}checkIfToResize(){const _=this.el.clientWidth,m=this.el.offsetWidth,E=this.el.scrollWidth,W=this.el.clientHeight,J=this.el.offsetHeight,de=this.el.scrollHeight;return!(_<m&&de>J&&de-J<m-_||W<J&&E>m&&E-m<J-W)}checkIfMobile(){return this.$options.useBodyForBreakpoint?this.$options.mobileBreakpoint>document.body.clientWidth:this.$options.mobileBreakpoint>this.curWidth}setGridSize(){const _=this.el;let m,E;this.$options.setGridSize||this.$options.gridType===P.Fit&&!this.mobile?(m=_.offsetWidth,E=_.offsetHeight):(m=_.clientWidth,E=_.clientHeight),this.curWidth=m,this.curHeight=E}setGridDimensions(){this.setGridSize(),!this.mobile&&this.checkIfMobile()?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&!this.checkIfMobile()&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let W,_=this.$options.minRows,m=this.$options.minCols,E=this.grid.length-1;for(;E>=0;E--)W=this.grid[E],W.notPlaced||(_=Math.max(_,W.$item.y+W.$item.rows),m=Math.max(m,W.$item.x+W.$item.cols));_+=this.$options.addEmptyRowsCount,(this.columns!==m||this.rows!==_)&&(this.columns=m,this.rows=_,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let E=-this.$options.margin;null!==this.$options.outerMarginLeft?(E+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(E+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(E+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(E+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-E)/this.columns;let W=-this.$options.margin;null!==this.$options.outerMarginTop?(W+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(W+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?(W+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(W+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-W)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let m,_=this.grid.length-1;for(;_>=0;_--)m=this.grid[_],m.setSize(),m.drag.toggle(),m.resize.toggle();this.resize$.next()}updateGrid(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):("none"===this.$options.displayGrid||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=Y.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=Y.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(_){void 0===_.$item.cols&&(_.$item.cols=this.$options.defaultItemCols,_.item.cols=_.$item.cols,_.itemChanged()),void 0===_.$item.rows&&(_.$item.rows=this.$options.defaultItemRows,_.item.rows=_.$item.rows,_.itemChanged()),-1===_.$item.x||-1===_.$item.y?this.autoPositionItem(_):this.checkCollision(_.$item)&&(this.$options.disableWarnings||(_.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(_.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?_.notPlaced=!0:this.autoPositionItem(_)),this.grid.push(_),this.calculateLayout$.next()}removeItem(_){this.grid.splice(this.grid.indexOf(_),1),this.calculateLayout$.next(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(_.item,_)}checkCollision(_){let m=!1;if(this.options.itemValidateCallback&&(m=!this.options.itemValidateCallback(_)),!m&&this.checkGridCollision(_)&&(m=!0),!m){const E=this.findItemWithItem(_);E&&(m=E)}return m}checkGridCollision(_){const Fe=_.cols*_.rows;return!(_.y>-1&&_.x>-1&&_.cols+_.x<=this.$options.maxCols&&_.rows+_.y<=this.$options.maxRows&&_.cols<=(void 0===_.maxItemCols?this.$options.maxItemCols:_.maxItemCols)&&_.cols>=(void 0===_.minItemCols?this.$options.minItemCols:_.minItemCols)&&_.rows<=(void 0===_.maxItemRows?this.$options.maxItemRows:_.maxItemRows)&&_.rows>=(void 0===_.minItemRows?this.$options.minItemRows:_.minItemRows)&&(void 0===_.minItemArea?this.$options.minItemArea:_.minItemArea)<=Fe&&(void 0===_.maxItemArea?this.$options.maxItemArea:_.maxItemArea)>=Fe)}findItemWithItem(_){let E,m=0;for(;m<this.grid.length;m++)if(E=this.grid[m],E.$item!==_&&this.checkCollisionTwoItems(E.$item,_))return E;return!1}findItemsWithItem(_){const m=[];let W,E=0;for(;E<this.grid.length;E++)W=this.grid[E],W.$item!==_&&this.checkCollisionTwoItems(W.$item,_)&&m.push(W);return m}autoPositionItem(_){this.getNextPossiblePosition(_.$item)?(_.notPlaced=!1,_.item.x=_.$item.x,_.item.y=_.$item.y,_.itemChanged()):(_.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(_.item,["cols","rows","x","y"])))}pixelsToPositionX(_,m,E){const W=m(_/this.curColWidth);return E?W:Math.max(W,0)}pixelsToPositionY(_,m,E){const W=m(_/this.curRowHeight);return E?W:Math.max(W,0)}positionXToPixels(_){return _*this.curColWidth}positionYToPixels(_){return _*this.curRowHeight}getItemComponent(_){return this.grid.find(m=>m.item===_)}checkCollisionForSwaping(_){let m=!1;if(this.options.itemValidateCallback&&(m=!this.options.itemValidateCallback(_)),!m&&this.checkGridCollision(_)&&(m=!0),!m){const E=this.findItemWithItemForSwapping(_);E&&(m=E)}return m}findItemWithItemForSwapping(_){let E,m=this.grid.length-1;for(;m>-1;m--)if(E=this.grid[m],E.$item!==_&&Y.checkCollisionTwoItemsForSwaping(E.$item,_))return E;return!1}previewStyle(_=!1){this.movingItem?(this.compact&&_&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}static getNewArrayLength(_,m,E){const W=Math.max(_,Math.floor(m/E));return W<0?0:Number.isFinite(W)?Math.floor(W):0}}return Y.\u0275fac=function(_){return new(_||Y)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.sBO),r.Y36(r.R0b))},Y.\u0275cmp=r.Xpm({type:Y,selectors:[["gridster"]],inputs:{options:"options"},features:[r.TTD],ngContentSelectors:O,decls:4,vars:4,consts:[["class","gridster-column",3,"ngStyle",4,"ngFor","ngForOf"],["class","gridster-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"],[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"]],template:function(_,m){1&_&&(r.F$t(),r.YNc(0,v,1,1,"div",0),r.YNc(1,c,1,1,"div",1),r.Hsn(2),r._UZ(3,"gridster-preview",2)),2&_&&(r.Q6J("ngForOf",m.gridColumns),r.xp6(1),r.Q6J("ngForOf",m.gridRows),r.xp6(2),r.Q6J("gridRenderer",m.gridRenderer)("previewStyle$",m.previewStyle$))},directives:[ue,R.sg,R.PC],styles:["gridster{position:relative;box-sizing:border-box;background:grey;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}\n"],encapsulation:2}),Y})();class ae{constructor(u){this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=u,this.gridster=u.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(u,_){if(this.gridster.$options.pushItems&&!_){this.pushedItemsOrder=[],this.iteration=0;const m=this.push(this.gridsterItem,u);return m||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],m}return!1}restoreTempItems(){let u=this.pushedItemsTemp.length-1;for(;u>-1;u--)this.removeFromTempPushed(this.pushedItemsTemp[u])}restoreItems(){let u=0;const _=this.pushedItems.length;let m;for(;u<_;u++)m=this.pushedItems[u],m.$item.x=m.item.x||0,m.$item.y=m.item.y||0,m.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let u=0;const _=this.pushedItems.length;let m;for(;u<_;u++)m=this.pushedItems[u],m.checkItemChanges(m.$item,m.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let u=this.pushedItems.length-1,_=!1;for(;u>-1;u--)this.checkPushedItem(this.pushedItems[u],u)&&(_=!0);_&&this.checkPushBack()}push(u,_){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(u.$item)||""===_)return!1;const m=this.gridster.findItemsWithItem(u.$item),E=_===this.fromNorth||_===this.fromWest;m.sort((he,Ce)=>E?Ce.$item.y-he.$item.y||Ce.$item.x-he.$item.x:he.$item.y-Ce.$item.y||he.$item.x-Ce.$item.x);let J,W=0,de=!0;const me=[];for(;W<m.length;W++){if(J=m[W],J===this.gridsterItem)continue;if(!J.canBeDragged()){de=!1;break}const he=this.pushedItemsTemp.indexOf(J);if(he>-1&&this.pushedItemsTempPath[he].length>10){de=!1;break}if(this.tryPattern[_][0].call(this,J,u))this.pushedItemsOrder.push(J),me.push(J);else if(this.tryPattern[_][1].call(this,J,u))this.pushedItemsOrder.push(J),me.push(J);else if(this.tryPattern[_][2].call(this,J,u))this.pushedItemsOrder.push(J),me.push(J);else{if(!this.tryPattern[_][3].call(this,J,u)){de=!1;break}this.pushedItemsOrder.push(J),me.push(J)}}if(!de&&(W=this.pushedItemsOrder.lastIndexOf(me[0]),W>-1)){let he=this.pushedItemsOrder.length-1;for(;he>=W;he--)J=this.pushedItemsOrder[he],this.pushedItemsOrder.pop(),this.removeFromTempPushed(J),this.removeFromPushedItem(J)}return this.iteration++,de}trySouth(u,_){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(u),u.$item.y=_.$item.y+_.$item.rows,this.push(u,this.fromNorth)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}tryNorth(u,_){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(u),u.$item.y=_.$item.y-u.$item.rows,this.push(u,this.fromSouth)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}tryEast(u,_){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(u),u.$item.x=_.$item.x+_.$item.cols,this.push(u,this.fromWest)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}tryWest(u,_){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(u),u.$item.x=_.$item.x-u.$item.cols,this.push(u,this.fromEast)?(u.setSize(),this.addToPushed(u),!0):(this.removeFromTempPushed(u),!1))}addToTempPushed(u){let _=this.pushedItemsTemp.indexOf(u);-1===_&&(_=this.pushedItemsTemp.push(u)-1,this.pushedItemsTempPath[_]=[]),this.pushedItemsTempPath[_].push({x:u.$item.x,y:u.$item.y})}removeFromTempPushed(u){const _=this.pushedItemsTemp.indexOf(u),m=this.pushedItemsTempPath[_].pop();!m||(u.$item.x=m.x,u.$item.y=m.y,u.setSize(),this.pushedItemsTempPath[_].length||(this.pushedItemsTemp.splice(_,1),this.pushedItemsTempPath.splice(_,1)))}addToPushed(u){if(this.pushedItems.indexOf(u)<0)this.pushedItems.push(u),this.pushedItemsPath.push([{x:u.item.x||0,y:u.item.y||0},{x:u.$item.x,y:u.$item.y}]);else{const _=this.pushedItems.indexOf(u);this.pushedItemsPath[_].push({x:u.$item.x,y:u.$item.y})}}removeFromPushed(u){u>-1&&(this.pushedItems.splice(u,1),this.pushedItemsPath.splice(u,1))}removeFromPushedItem(u){const _=this.pushedItems.indexOf(u);_>-1&&(this.pushedItemsPath[_].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(_,1),this.pushedItemsPath.splice(_,1)))}checkPushedItem(u,_){const m=this.pushedItemsPath[_];let W,J,de,E=m.length-2,me=!1;for(;E>-1;E--)W=m[E],J=u.$item.x,de=u.$item.y,u.$item.x=W.x,u.$item.y=W.y,this.gridster.findItemWithItem(u.$item)?(u.$item.x=J,u.$item.y=de):(u.setSize(),m.splice(E+1,m.length-E-1),me=!0);return m.length<2&&this.removeFromPushed(_),me}}function nt(Y,u,_,m,E,W,J,de,me,he){K=Y.$options.scrollSensitivity,q=Y.$options.scrollSpeed,te=Y.el,fe=me,Ee=he;const Ce=te.offsetWidth,Ae=te.scrollLeft,$e=te.scrollTop,Fe=_-$e,Ue=te.offsetHeight+$e-_-E,{clientX:Ke,clientY:mt}=W;if(!Y.$options.disableScrollVertical)if(J.clientY<mt&&Ue<K){if(it(),fe&&Ee&&!Ee.south||Ye)return;Ye=rt(1,de,J)}else if(J.clientY>mt&&$e>0&&Fe<K){if(dt(),fe&&Ee&&!Ee.north||Se)return;Se=rt(-1,de,J)}else J.clientY!==mt&&tt();const k=u-Ae;if(!Y.$options.disableScrollHorizontal)if(J.clientX<Ke&&Ae+Ce-u-m<=K){if(lt(),fe&&Ee&&!Ee.east||Le)return;Le=st(1,de,J)}else if(J.clientX>Ke&&Ae>0&&k<K){if(at(),fe&&Ee&&!Ee.west||Oe)return;Oe=st(-1,de,J)}else J.clientX!==Ke&&et()}function rt(Y,u,_){let m=_.clientY;return window.setInterval(()=>{(!te||-1===Y&&te.scrollTop-q<0)&&tt(),te.scrollTop+=Y*q,m+=Y*q,u({clientX:_.clientX,clientY:m})},50)}function st(Y,u,_){let m=_.clientX;return window.setInterval(()=>{(!te||-1===Y&&te.scrollLeft-q<0)&&et(),te.scrollLeft+=Y*q,m+=Y*q,u({clientX:m,clientY:_.clientY})},50)}function Xe(){et(),tt(),te=null}function et(){at(),lt()}function tt(){it(),dt()}function at(){Le&&(clearInterval(Le),Le=0)}function lt(){Oe&&(clearInterval(Oe),Oe=0)}function dt(){Ye&&(clearInterval(Ye),Ye=0)}function it(){Se&&(clearInterval(Se),Se=0)}class ot{constructor(u){this.gridsterItem=u,this.gridster=u.gridster}destroy(){this.gridster=this.gridsterItem=this.swapedItem=null}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){const u=this.swapedItem.$item.x,_=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=u,this.swapedItem.$item.y=_):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(u){let _;if(_=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(u.$item):this.gridster.checkCollision(u.$item),_&&!0!==_&&_.canBeDragged()){const m=_,E=m.$item.x,W=m.$item.y,J=u.$item.x,de=u.$item.y,me=J-E,he=de-W;m.$item.x=u.item.x-me,m.$item.y=u.item.y-he,u.$item.x=m.item.x+me,u.$item.y=m.item.y+he,this.gridster.checkCollision(m.$item)||this.gridster.checkCollision(u.$item)?(u.$item.x=J,u.$item.y=de,m.$item.x=E,m.$item.y=W):(m.setSize(),this.swapedItem=m,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}var Ne=(()=>{return(Y=Ne||(Ne={})).UP="UP",Y.DOWN="DOWN",Y.LEFT="LEFT",Y.RIGHT="RIGHT",Ne;var Y})();class He{constructor(u,_,m){this.zone=m,this.collision=!1,this.dragMove=E=>{E.stopPropagation(),E.preventDefault(),Z.checkTouchEvent(E);let W=this.getDirections(E);this.gridster.options.enableBoundaryControl&&(W.includes(Ne.UP)&&this.gridsterItem.el.getBoundingClientRect().top<=this.gridster.el.getBoundingClientRect().top+this.margin&&(W=W.filter(J=>J!=Ne.UP),E=new MouseEvent(E.type,{clientX:E.clientX,clientY:this.lastMouse.clientY})),W.includes(Ne.LEFT)&&this.gridsterItem.el.getBoundingClientRect().left<=this.gridster.el.getBoundingClientRect().left+this.margin&&(W=W.filter(J=>J!=Ne.LEFT),E=new MouseEvent(E.type,{clientX:this.lastMouse.clientX,clientY:E.clientY})),W.includes(Ne.RIGHT)&&this.gridsterItem.el.getBoundingClientRect().right>=this.gridster.el.getBoundingClientRect().right-this.margin&&(W=W.filter(J=>J!=Ne.RIGHT),E=new MouseEvent(E.type,{clientX:this.lastMouse.clientX,clientY:E.clientY})),W.includes(Ne.DOWN)&&this.gridsterItem.el.getBoundingClientRect().bottom>=this.gridster.el.getBoundingClientRect().bottom-this.margin&&(W=W.filter(J=>J!=Ne.DOWN),E=new MouseEvent(E.type,{clientX:E.clientX,clientY:this.lastMouse.clientY}))),W.length&&(this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,nt(this.gridster,this.left,this.top,this.width,this.height,E,this.lastMouse,this.calculateItemPositionFromMousePosition),this.calculateItemPositionFromMousePosition(E))},this.calculateItemPositionFromMousePosition=E=>{this.gridster.options.scale?this.calculateItemPositionWithScale(E,this.gridster.options.scale):this.calculateItemPositionWithoutScale(E),this.calculateItemPosition(),this.lastMouse.clientX=E.clientX,this.lastMouse.clientY=E.clientY,this.zone.run(()=>{this.gridster.updateGrid()})},this.dragStop=E=>{E.stopPropagation(),E.preventDefault(),Xe(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,E)).then(this.makeDrag,this.cancelDrag):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})},this.cancelDrag=()=>{this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)},this.makeDrag=()=>{this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&!0!==this.collision&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)},this.dragStartDelay=E=>{if(E.target.classList.contains("gridster-item-resizable-handler")||Z.checkContentClassForEvent(this.gridster,E))return;if(Z.checkTouchEvent(E),!this.gridster.$options.draggable.delayStart)return void this.dragStart(E);const J=setTimeout(()=>{this.dragStart(E),Fe()},this.gridster.$options.draggable.delayStart),de=this.gridsterItem.renderer.listen("document","mouseup",Fe),me=this.gridsterItem.renderer.listen("document","mouseleave",Fe),he=this.gridsterItem.renderer.listen("window","blur",Fe),Ce=this.gridsterItem.renderer.listen("document","touchmove",function $e(Ue){Z.checkTouchEvent(Ue),(Math.abs(Ue.clientX-E.clientX)>9||Math.abs(Ue.clientY-E.clientY)>9)&&Fe()}),De=this.gridsterItem.renderer.listen("document","touchend",Fe),Ae=this.gridsterItem.renderer.listen("document","touchcancel",Fe);function Fe(){clearTimeout(J),he(),de(),me(),Ce(),De(),Ae()}},this.gridsterItem=u,this.gridster=_,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),this.gridsterItem=this.gridster=this.collision=null,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(u){u.which&&1!==u.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,u),u.stopPropagation(),u.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=u.clientX,this.originalClientY=u.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.diffLeft=this.gridster.$options.dirType===b.RTL?u.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:u.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=u.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new ae(this.gridsterItem),this.swap=new ot(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}calculateItemPositionWithScale(u,_){this.left=this.gridster.$options.dirType===b.RTL?this.gridster.el.scrollWidth-this.originalClientX+(u.clientX-this.originalClientX)/_+this.diffLeft:this.originalClientX+(u.clientX-this.originalClientX)/_+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(u.clientY-this.originalClientY)/_+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(u){this.left=this.gridster.$options.dirType===b.RTL?this.gridster.el.scrollWidth-u.clientX+this.diffLeft:u.clientX+this.offsetLeft-this.diffLeft,this.top=u.clientY+this.offsetTop-this.diffTop}calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){const u=this.path[this.path.length-1];let _="";u.x<this.gridsterItem.$item.x?_=this.push.fromWest:u.x>this.gridsterItem.$item.x?_=this.push.fromEast:u.y<this.gridsterItem.$item.y?_=this.push.fromNorth:u.y>this.gridsterItem.$item.y&&(_=this.push.fromSouth),this.push.pushItems(_,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}this.gridster.previewStyle(!0)}toggle(){const u=this.gridsterItem.canBeDragged();!this.enabled&&u?(this.enabled=!this.enabled,this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartDelay),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartDelay)):this.enabled&&!u&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}getDirections(u){const _=[];return this.lastMouse.clientY>u.clientY&&_.push(Ne.UP),this.lastMouse.clientY<u.clientY&&_.push(Ne.DOWN),this.lastMouse.clientX<u.clientX&&_.push(Ne.RIGHT),this.lastMouse.clientX>u.clientX&&_.push(Ne.LEFT),_}}class ye{constructor(u){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=u,this.gridster=u.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(u){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,u)}restoreItems(){let u=0;const _=this.pushedItems.length;let m;for(;u<_;u++)m=this.pushedItems[u],m.$item.x=m.item.x||0,m.$item.y=m.item.y||0,m.$item.cols=m.item.cols||1,m.$item.row=m.item.row||1,m.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let u=0;const _=this.pushedItems.length;let m;for(;u<_;u++)m=this.pushedItems[u],m.checkItemChanges(m.$item,m.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let u=this.pushedItems.length-1,_=!1;for(;u>-1;u--)this.checkPushedItem(this.pushedItems[u],u)&&(_=!0);_&&this.checkPushBack()}push(u,_){const m=this.gridster.checkCollision(u.$item);if(m&&!0!==m&&m!==this.gridsterItem&&m.canBeResized()){if(this.tryPattern[_].call(this,m,u,_))return!0}else if(!1===m)return!0;return!1}trySouth(u,_,m){const E=u.$item.y,W=u.$item.rows;return u.$item.y=_.$item.y+_.$item.rows,u.$item.rows=W+E-u.$item.y,this.gridster.checkCollisionTwoItems(u.$item,_.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.y=E,u.$item.rows=W,!1):(u.setSize(),this.addToPushed(u),this.push(_,m),!0)}tryNorth(u,_,m){const E=u.$item.rows;return u.$item.rows=_.$item.y-u.$item.y,this.gridster.checkCollisionTwoItems(u.$item,_.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.rows=E,!1):(u.setSize(),this.addToPushed(u),this.push(_,m),!0)}tryEast(u,_,m){const E=u.$item.x,W=u.$item.cols;return u.$item.x=_.$item.x+_.$item.cols,u.$item.cols=W+E-u.$item.x,this.gridster.checkCollisionTwoItems(u.$item,_.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.x=E,u.$item.cols=W,!1):(u.setSize(),this.addToPushed(u),this.push(_,m),!0)}tryWest(u,_,m){const E=u.$item.cols;return u.$item.cols=_.$item.x-u.$item.x,this.gridster.checkCollisionTwoItems(u.$item,_.$item)||this.gridster.checkGridCollision(u.$item)?(u.$item.cols=E,!1):(u.setSize(),this.addToPushed(u),this.push(_,m),!0)}addToPushed(u){if(this.pushedItems.indexOf(u)<0)this.pushedItems.push(u),this.pushedItemsPath.push([{x:u.item.x||0,y:u.item.y||0,cols:u.item.cols||0,rows:u.item.rows||0},{x:u.$item.x,y:u.$item.y,cols:u.$item.cols,rows:u.$item.rows}]);else{const _=this.pushedItems.indexOf(u);this.pushedItemsPath[_].push({x:u.$item.x,y:u.$item.y,cols:u.$item.cols,rows:u.$item.rows})}}removeFromPushed(u){u>-1&&(this.pushedItems.splice(u,1),this.pushedItemsPath.splice(u,1))}checkPushedItem(u,_){const m=this.pushedItemsPath[_];let W,J,de,me,he,E=m.length-2;for(;E>-1;E--)W=m[E],J=u.$item.x,de=u.$item.y,me=u.$item.cols,he=u.$item.rows,u.$item.x=W.x,u.$item.y=W.y,u.$item.cols=W.cols,u.$item.rows=W.rows,this.gridster.findItemWithItem(u.$item)?(u.$item.x=J,u.$item.y=de,u.$item.cols=me,u.$item.rows=he):(u.setSize(),m.splice(E+1,m.length-1-E));return m.length<2&&(this.removeFromPushed(_),!0)}}class ht{constructor(u,_,m){this.zone=m,this.directionFunction=null,this.dragMove=E=>{if(null===this.directionFunction)throw new Error("The `directionFunction` has not been set before calling `dragMove`.");E.stopPropagation(),E.preventDefault(),Z.checkTouchEvent(E),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,nt(this.gridster,this.left,this.top,this.width,this.height,E,this.lastMouse,this.directionFunction,!0,this.resizeEventScrollType);const W=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(E.clientX-this.originalClientX)/W,clientY:this.originalClientY+(E.clientY-this.originalClientY)/W}),this.lastMouse.clientX=E.clientX,this.lastMouse.clientY=E.clientY,this.zone.run(()=>{this.gridster.updateGrid()})},this.dragStop=E=>{E.stopPropagation(),E.preventDefault(),Xe(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,E)).then(this.makeResize,this.cancelResize):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})},this.cancelResize=()=>{this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null},this.makeResize=()=>{this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null},this.handleNorth=E=>{if(this.top=E.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight,this.top=this.bottom-this.minHeight),this.newPosition=this.gridster.pixelsToPositionY(this.top+this.margin,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)},this.handleWest=E=>{if(this.left=(this.gridster.$options.dirType===b.RTL?this.originalClientX+(this.originalClientX-E.clientX):E.clientX)+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width&&(this.width=this.minWidth,this.left=this.right-this.minWidth),this.newPosition=this.gridster.pixelsToPositionX(this.left+this.margin,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)},this.handleSouth=E=>{if(this.height=E.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.newPosition=this.gridster.pixelsToPositionY(this.bottom,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.rows=this.itemBackup[3],void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)},this.handleEast=E=>{if(this.width=(this.gridster.$options.dirType===b.RTL?this.originalClientX+(this.originalClientX-E.clientX):E.clientX)+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.newPosition=this.gridster.pixelsToPositionX(this.right,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.cols=this.itemBackup[2],void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)},this.handleNorthWest=E=>{this.handleNorth(E),this.handleWest(E)},this.handleNorthEast=E=>{this.handleNorth(E),this.handleEast(E)},this.handleSouthWest=E=>{this.handleSouth(E),this.handleWest(E)},this.handleSouthEast=E=>{this.handleSouth(E),this.handleEast(E)},this.gridsterItem=u,this.gridster=_,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={west:!1,east:!1,north:!1,south:!1}}destroy(){var u;null===(u=this.gridster)||void 0===u||u.previewStyle(),this.gridster=this.gridsterItem=null}dragStart(u){if(u.which&&1!==u.which)return;this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,u),u.stopPropagation(),u.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=u.clientX,this.lastMouse.clientY=u.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=u.clientX,this.originalClientY=u.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=u.clientX+this.offsetLeft-this.left,this.diffRight=u.clientX+this.offsetLeft-this.right,this.diffTop=u.clientY+this.offsetTop-this.top,this.diffBottom=u.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new ae(this.gridsterItem),this.pushResize=new ye(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid();const{classList:_}=u.target;_.contains("handle-n")?(this.resizeEventScrollType.north=!0,this.directionFunction=this.handleNorth):_.contains("handle-w")?this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):_.contains("handle-s")?(this.resizeEventScrollType.south=!0,this.directionFunction=this.handleSouth):_.contains("handle-e")?this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):_.contains("handle-nw")?this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):_.contains("handle-ne")?this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):_.contains("handle-sw")?this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):_.contains("handle-se")&&(this.gridster.$options.dirType===b.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast))}toggle(){this.resizeEnabled=this.gridsterItem.canBeResized()}dragStartDelay(u){if(Z.checkTouchEvent(u),!this.gridster.$options.resizable.delayStart)return void this.dragStart(u);const _=setTimeout(()=>{this.dragStart(u),Ce()},this.gridster.$options.resizable.delayStart),{cancelMouse:m,cancelMouseLeave:E,cancelOnBlur:W,cancelTouchMove:J,cancelTouchEnd:de,cancelTouchCancel:me}=this.zone.runOutsideAngular(()=>({cancelMouse:this.gridsterItem.renderer.listen("document","mouseup",Ce),cancelMouseLeave:this.gridsterItem.renderer.listen("document","mouseleave",Ce),cancelOnBlur:this.gridsterItem.renderer.listen("window","blur",Ce),cancelTouchMove:this.gridsterItem.renderer.listen("document","touchmove",he),cancelTouchEnd:this.gridsterItem.renderer.listen("document","touchend",Ce),cancelTouchCancel:this.gridsterItem.renderer.listen("document","touchcancel",Ce)}));function he(De){Z.checkTouchEvent(De),(Math.abs(De.clientX-u.clientX)>9||Math.abs(De.clientY-u.clientY)>9)&&Ce()}function Ce(){clearTimeout(_),W(),m(),E(),J(),de(),me()}}setItemTop(u){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,u)}setItemLeft(u){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,u,this.top)}setItemHeight(u){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",u+"px")}setItemWidth(u){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",u+"px")}}let Pt=(()=>{class Y{constructor(_,m,E,W){this.renderer=E,this.zone=W,this.itemInit=new r.vpe,this.itemChange=new r.vpe,this.itemResize=new r.vpe,this.el=_.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=m,this.drag=new He(this,m,this.zone),this.resize=new ht(this,m,this.zone)}get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(_){_.item&&(this.updateOptions(),this.init||this.gridster.calculateLayout$.next()),_.item&&_.item.previousValue&&this.setSize()}updateOptions(){this.$item=Z.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0})}ngOnDestroy(){this.gridster.removeItem(this),this.drag.destroy(),this.resize.destroy(),this.gridster=this.drag=this.resize=null}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){const m=this.$item.x*this.gridster.curColWidth,E=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,W=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=this.$item.y*this.gridster.curRowHeight,this.left=m,!this.init&&E>0&&W>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(E!==this.width||W!==this.height)&&(this.width=E,this.height=W,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(_,m){_.rows===m.rows&&_.cols===m.cols&&_.x===m.x&&_.y===m.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=m.x||0,this.$item.y=m.y||0,this.$item.cols=m.cols||1,this.$item.rows=m.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayout$.next(),this.itemChanged()))}canBeDragged(){const _=this.gridster.$options.draggable.enabled;return!this.gridster.mobile&&_&&(void 0===this.$item.dragEnabled?_:this.$item.dragEnabled)}canBeResized(){const _=this.gridster.$options.resizable.enabled;return!this.gridster.mobile&&_&&(void 0===this.$item.resizeEnabled?_:this.$item.resizeEnabled)}bringToFront(_){if(_&&_<=0)return;const m=this.getLayerIndex(),E=this.gridster.$options.maxLayerIndex;if(m<E){const W=_?m+_:E;this.item.layerIndex=this.$item.layerIndex=W>E?E:W}}sendToBack(_){if(_&&_<=0)return;const m=this.getLayerIndex();if(m>0){const E=_?m-_:0;this.item.layerIndex=this.$item.layerIndex=E<0?0:E}}getLayerIndex(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}}return Y.\u0275fac=function(_){return new(_||Y)(r.Y36(r.SBq),r.Y36(ne),r.Y36(r.Qsj),r.Y36(r.R0b))},Y.\u0275cmp=r.Xpm({type:Y,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(_,m){2&_&&r.Udp("z-index",m.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},features:[r.TTD],ngContentSelectors:O,decls:9,vars:8,consts:[["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(_,m){1&_&&(r.F$t(),r.Hsn(0),r.YNc(1,g,1,0,"div",0),r.YNc(2,L,1,0,"div",1),r.YNc(3,M,1,0,"div",2),r.YNc(4,F,1,0,"div",3),r.YNc(5,G,1,0,"div",4),r.YNc(6,x,1,0,"div",5),r.YNc(7,A,1,0,"div",6),r.YNc(8,z,1,0,"div",7)),2&_&&(r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.s&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.e&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.n&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.w&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.se&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.ne&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.sw&&m.resize.resizeEnabled),r.xp6(1),r.Q6J("ngIf",m.gridster.$options.resizable.handles.nw&&m.resize.resizeEnabled))},directives:[R.O5],styles:["gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:white;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}\n"],encapsulation:2}),Y})(),Dt=(()=>{class Y{}return Y.\u0275fac=function(_){return new(_||Y)},Y.\u0275mod=r.oAB({type:Y}),Y.\u0275inj=r.cJS({imports:[[R.ez]]}),Y})()}}]);