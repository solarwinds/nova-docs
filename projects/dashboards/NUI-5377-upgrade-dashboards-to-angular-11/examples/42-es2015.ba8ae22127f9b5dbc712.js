(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{F9Zb:function(e,r,t){"use strict";t.r(r),t.d(r,"OverviewModule",function(){return S});var i=t("tyNb"),o=t("Rr1A"),s=t("gKry"),d=t("4uQc"),a=t("bTxs"),n=t("FupF"),p=t("M+5T"),l=t("WqJa"),c=t("QVEU"),b=t.n(c),g=t("XNiG"),u=t("fXoL");let v=(()=>{class e{constructor(e){this.toastService=e,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=(e,r)=>{const t=new g.a;return setTimeout(()=>{if(this.allowSubmit)t.next(e);else{const e=$localize`Submit failed.`;this.toastService.error({title:e}),t.error(e)}},1e3),t.asObservable()},this.tryRemove=e=>{const r=new g.a;return setTimeout(()=>{if(this.allowRemoval)r.next(e);else{const e=$localize`Widget removal failed.`;this.toastService.error({title:e}),r.error(e)}},200),r.asObservable()},this.toastService.setConfig({timeOut:2e3})}}return e.\u0275fac=function(r){return new(r||e)(u.fc(o.Yb))},e.\u0275prov=u.Lb({token:e,factory:e.\u0275fac}),e})();var h=t("bPcI");const m={widget1:{cols:6,rows:6,y:0,x:0},widget2:{cols:6,rows:6,y:0,x:6},widget3:{cols:7,rows:6,y:6,x:0},widget4:{cols:5,rows:6,y:6,x:7}},w=[{id:"widget1",type:"kpi",pizzagna:{[s.Q.Configuration]:{header:{properties:{title:"KPI Widget!",subtitle:"A bunch of number boxes"}},tiles:{properties:{nodes:["kpi1","kpi2"]}},kpi1:{id:"kpi1",componentType:s.z.lateLoadKey,providers:{[s.kb.DataSource]:{providerId:a.a.providerId},[s.kb.Adapter]:{providerId:s.I,properties:{componentId:"kpi1",propertyPath:"widgetData",thresholds:{showThresholds:!0,warningThresholdValue:5,criticalThresholdValue:8}}}},properties:{elementClass:"flex-grow-1",widgetData:{id:"totalStorage",value:0,label:"Total storage"}}},kpi2:{id:"kpi2",componentType:s.z.lateLoadKey,providers:{[s.kb.DataSource]:{providerId:a.b.providerId},[s.kb.Adapter]:{providerId:s.I,properties:{componentId:"kpi2",propertyPath:"widgetData",thresholds:{warningThresholdValue:120,criticalThresholdValue:150}}}},properties:{elementClass:"flex-grow-1",widgetData:{id:"downloadSpeed",value:0,label:"Download speed"}}}}}},{id:"widget2",type:"proportional",pizzagna:{[s.Q.Configuration]:{header:{properties:{title:"Proportional Widget!",subtitle:"Proportional widget with legend formatters"}},chart:{providers:{[s.kb.DataSource]:{providerId:n.b.providerId}},properties:{configuration:{chartOptions:{type:s.U.PieChart,legendPlacement:s.B.Right,legendFormatter:{componentType:s.C.lateLoadKey}}}}}}}},{id:"widget3",type:"timeseries",pizzagna:{[s.Q.Configuration]:{[s.g]:{providers:{[s.kb.DataSource]:{providerId:l.a.providerId}}},header:{properties:{title:"Timeseries Widget!",subtitle:"Basic timeseries widget"}},chart:{providers:{[s.kb.Adapter]:{properties:{series:[{id:"series-1",label:"Average CPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"},{id:"series-3",label:"Average CPU Load",selectedSeriesId:"series-3"}]}}},properties:{configuration:{legendPlacement:s.B.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)"}}},timeframeSelection:{properties:{timeframe:{startDatetime:Object(h.e)().subtract(7,"day").format(),endDatetime:Object(h.e)().format(),selectedPresetId:null}}}}}},{id:"widget4",type:"table",pizzagna:{[s.Q.Configuration]:{header:{properties:{title:"Table Widget!",subtitle:"Basic table widget"}},table:{providers:{[s.kb.DataSource]:{providerId:p.a.providerId}},properties:{configuration:{columns:[{id:"column1",label:"No",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Location",isActive:!0,formatter:{componentType:s.C.lateLoadKey,properties:{dataFieldIds:{value:"firstUrlLabel",link:"firstUrl"}}}}],sorterConfiguration:{descendantSorting:!0,sortBy:"column1"},hasVirtualScroll:!0}}}}}}];var f=t("BJxG"),y=t("sleA"),C=t("MJAs");const I=[{path:"",component:(()=>{class e{constructor(e,r,t,i){this.providerRegistry=e,this.submitHandler=r,this.themeSwitcherService=t,this.widgetTypesService=i,this.dashboard={positions:{},widgets:{}},this.gridsterConfig={minCols:12,maxCols:12,minRows:12},this.editMode=!1,this.dsError=!1,this.providerRegistry.setProviders({[a.a.providerId]:{provide:s.b,useClass:a.a,deps:[]},[a.b.providerId]:{provide:s.b,useClass:a.b,deps:[]},[n.a.providerId]:{provide:s.b,useClass:n.a,deps:[]},[n.b.providerId]:{provide:s.b,useClass:n.b,deps:[]},[n.c.providerId]:{provide:s.b,useClass:n.c,deps:[]},[p.a.providerId]:{provide:s.b,useClass:p.a,deps:[o.wb,s.O]},[p.b.providerId]:{provide:s.b,useClass:p.b,deps:[o.wb,s.O]},[l.a.providerId]:{provide:s.b,useClass:l.a,deps:[]},[l.b.providerId]:{provide:s.b,useClass:l.b,deps:[]}})}ngOnInit(){const e=w.map(e=>Object.assign(Object.assign({},e),{pizzagna:Object.assign(Object.assign({},this.widgetTypesService.getWidgetType(e.type,e.version).widget),e.pizzagna)})),r=b()(e,e=>e.id);this.dashboard={positions:m,widgets:r}}onDsErrorChange(e){a.a.mockError=e,l.a.mockError=e,p.a.mockError=e,n.b.mockError=e}}return e.\u0275fac=function(r){return new(r||e)(u.Pb(s.V),u.Pb(v),u.Pb(o.Tb),u.Pb(s.nb))},e.\u0275cmp=u.Jb({type:e,selectors:[["acme-dashboard"]],features:[u.Cb([v])],decls:3,vars:6,consts:[[3,"editMode","dsError","editModeChange","dsErrorChange"],[1,"dashboard"],[3,"nuiWidgetEditor","dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"]],template:function(e,r){1&e&&(u.Vb(0,"dashboard-test-harness",0),u.jc("editModeChange",function(e){return r.editMode=e})("dsErrorChange",function(e){return r.onDsErrorChange(e)}),u.Vb(1,"div",1),u.Vb(2,"nui-dashboard",2),u.jc("dashboardChange",function(e){return r.dashboard=e})("gridsterConfigChange",function(e){return r.gridsterConfig=e}),u.Ub(),u.Ub(),u.Ub()),2&e&&(u.uc("editMode",r.editMode)("dsError",r.dsError),u.Db(2),u.uc("nuiWidgetEditor",r.submitHandler)("dashboard",r.dashboard)("gridsterConfig",r.gridsterConfig)("editMode",r.editMode))},directives:[f.a,y.a,C.a],styles:[".dashboard[_ngcontent-%COMP%]{height:725px;width:1000px}"]}),e})(),data:{srlc:{hideIndicator:!0}}}];let S=(()=>{class e{constructor(e){var r;this.widgetTypesService=e,null===(r=this.widgetTypesService.getWidgetType("proportional",1).widget.structure[s.g].providers)||void 0===r||delete r.refresher,this.setDataSourceProviders("table",[p.a.providerId,p.b.providerId]),this.setDataSourceProviders("kpi",[a.a.providerId,a.b.providerId]),this.setDataSourceProviders("proportional",[n.a.providerId,n.b.providerId,n.c.providerId]),this.setDataSourceProviders("timeseries",[l.a.providerId,l.b.providerId])}setDataSourceProviders(e,r){const t=this.widgetTypesService.getWidgetType(e,1);this.widgetTypesService.setNode(t,"configurator",s.jb.DataSourceProviders,r)}}return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(r){return new(r||e)(u.fc(s.nb))},providers:[s.V],imports:[[d.a,s.N,o.z,o.A,o.F,o.Z,o.J,i.d.forChild(I)]]}),e})()}}]);