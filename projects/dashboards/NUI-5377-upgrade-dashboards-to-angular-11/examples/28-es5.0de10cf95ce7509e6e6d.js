!function(){function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=s(e);if(t){var n=s(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"8uex":function(r,a,s){"use strict";var c,d;s.r(a),s.d(a,"DataSourceSetupModule",function(){return S});var u,b,l,p,h=s("ofXK"),f=s("tk/3"),g=s("tyNb"),m=s("Rr1A"),y=s("gKry"),v=s("fXoL"),w=s("mrSG"),O=s("2Vo4"),V=s("nYR2"),U=s("sleA"),k=((b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(a,e);var r=i(a);function a(e){var o;return t(this,a),(o=r.call(this)).http=e,o.busy=new O.a(!1),o}return o(a,[{key:"getFilteredData",value:function(){return Object(w.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.busy.next(!0),new Promise(function(e){t.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(Object(V.a)(function(){return t.busy.next(!1)})).subscribe({next:function(t){e({result:{value:t.volumeInfo.averageRating}})},error:function(t){e({result:null,error:{type:t.status}})}})})));case 1:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){this.outputsSubject.complete()}}]),a}(m.g)).providerId="AverageRatingKpiDataSource",b.\u0275fac=function(e){return new(e||b)(v.fc(f.b))},b.\u0275prov=v.Lb({token:b,factory:b.\u0275fac}),b),D=((u=function(){function r(e,o){t(this,r),this.widgetTypesService=e,this.providerRegistry=o,this.gridsterConfig={}}return o(r,[{key:"ngOnInit",value:function(){this.providerRegistry.setProviders(e({},k.providerId,{provide:y.b,useClass:k,deps:[f.b]}));var t=I,r=e({},t.id,this.widgetTypesService.mergeWithWidgetType(t));this.dashboard={positions:e({},t.id,{cols:4,rows:6,y:0,x:0}),widgets:r}}}]),r}()).\u0275fac=function(e){return new(e||u)(v.Pb(y.nb),v.Pb(y.V))},u.\u0275cmp=v.Jb({type:u,selectors:[["data-source-setup"]],decls:2,vars:2,consts:[[1,"w-100","dashboard"],[3,"dashboard","gridsterConfig","dashboardChange","gridsterConfigChange"]],template:function(e,t){1&e&&(v.Vb(0,"div",0),v.Vb(1,"nui-dashboard",1),v.jc("dashboardChange",function(e){return t.dashboard=e})("gridsterConfigChange",function(e){return t.gridsterConfig=e}),v.Ub(),v.Ub()),2&e&&(v.Db(1),v.uc("dashboard",t.dashboard)("gridsterConfig",t.gridsterConfig))},directives:[U.a],styles:[".dashboard[_ngcontent-%COMP%]{height:800px}"]}),u),I={id:"widget1",type:"kpi",pizzagna:e({},y.Q.Configuration,(d={},e(d,y.g,{providers:e({},y.kb.Refresher,{properties:{interval:600,enabled:!0}})}),e(d,"header",{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}}),e(d,"tiles",{properties:{nodes:["kpi1"]}}),e(d,"kpi1",{id:"kpi1",componentType:y.z.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating"}},providers:(c={},e(c,y.kb.DataSource,{providerId:k.providerId}),e(c,y.kb.Adapter,{providerId:y.I,properties:{componentId:"kpi1",propertyPath:"widgetData"}}),c)}),d))},C=[{path:"",component:(l=function e(){t(this,e)},l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=v.Jb({type:l,selectors:[["nui-dashboard-data-source-docs"]],decls:86,vars:4,consts:[["href","../components/DashboardComponent.html","target","_blank"],["href","../injectables/ProviderRegistryService.html","target","_blank"],["href","../classes/WidgetTypesService.html","target","_blank"],["href","../additional-documentation/getting-started.html","target","_parent"],["href","../additional-documentation/tutorials/hello-dashboards.html","target","_parent"],["type","info",3,"allowDismiss"],["href","https://angular.io/guide/http#setup","target","_blank"],["type","warning",3,"allowDismiss"],["filenamePrefix","data-source-setup.component","exampleTitle","Adding a Data Source"]],template:function(e,t){1&e&&(v.Vb(0,"h1"),v.Oc(1,"Adding a Data Source"),v.Ub(),v.Vb(2,"p"),v.Oc(3," In basic terms, a data source is an entity from which a widget on the dashboard gets its data. In the context of the dashboards framework, a data source is a dependency that gets injected just like any other provider for use by a widget via Angular's built-in dependency injection (DI) mechanism. As we'll see, the DI for a dependency in Nova Dashboards is very similar to that used in Nova Bits and other Angular-based libraries with one major difference: a dependency must be registered with a provider registry to make the dashboard framework aware of its availability for injection. In this tutorial, we'll go into some detail about this and other basics of how to set up a data source.\n"),v.Ub(),v.Vb(4,"h2"),v.Oc(5,"Fundamental Concepts"),v.Ub(),v.Vb(6,"ul"),v.Vb(7,"li"),v.Vb(8,"a",0),v.Vb(9,"code"),v.Oc(10,"DashboardComponent"),v.Ub(),v.Ub(),v.Ub(),v.Vb(11,"li"),v.Vb(12,"a",1),v.Vb(13,"code"),v.Oc(14,"ProviderRegistryService"),v.Ub(),v.Ub(),v.Ub(),v.Vb(15,"li"),v.Vb(16,"a",2),v.Vb(17,"code"),v.Oc(18,"WidgetTypesService"),v.Ub(),v.Ub(),v.Ub(),v.Vb(19,"li"),v.Oc(20,"Custom data source component"),v.Ub(),v.Vb(21,"li"),v.Oc(22,"Widget configuration (including its associated data)"),v.Ub(),v.Vb(23,"li"),v.Oc(24,"Widget position definition"),v.Ub(),v.Ub(),v.Vb(25,"h2"),v.Oc(26,"Basic Steps"),v.Ub(),v.Vb(27,"ol"),v.Vb(28,"li"),v.Oc(29," Follow the instructions "),v.Vb(30,"a",3),v.Oc(31,"here"),v.Ub(),v.Oc(32," to set up your environment for dashboard development. "),v.Ub(),v.Vb(33,"li"),v.Oc(34," Follow the instructions from the "),v.Vb(35,"a",4),v.Oc(36,"Hello Dashboards"),v.Ub(),v.Oc(37," tutorial to get a basic dashboard up and running. "),v.Ub(),v.Vb(38,"li"),v.Oc(39," Implement your data source (See the example source below for a basic implementation). "),v.Vb(40,"nui-message",5),v.Vb(41,"strong"),v.Oc(42,"Note:"),v.Ub(),v.Oc(43," It's recommended to have the data source in a separate file. If you do put it in a separate file, don't forget to add "),v.Vb(44,"code"),v.Oc(45,"@Injectable()"),v.Ub(),v.Oc(46," to the top of the data source class. This lets Angular know that you plan on injecting dependencies into it. "),v.Ub(),v.Ub(),v.Vb(47,"li"),v.Oc(48," Ensure that Angular's "),v.Vb(49,"code"),v.Oc(50,"HttpClientModule"),v.Ub(),v.Oc(51," is included in the imports of the module that contains the data source. You can go "),v.Vb(52,"a",6),v.Oc(53,"here"),v.Ub(),v.Oc(54," for more information about http setup. "),v.Vb(55,"nui-message",5),v.Vb(56,"strong"),v.Oc(57,"Note:"),v.Ub(),v.Oc(58," Importing "),v.Vb(59,"code"),v.Oc(60,"HttpClientModule"),v.Ub(),v.Oc(61," is required in this example because the data source depends on the "),v.Vb(62,"code"),v.Oc(63,"HttpClient"),v.Ub(),v.Oc(64," service. "),v.Ub(),v.Ub(),v.Vb(65,"li"),v.Oc(66," Register the data source as a dynamically injectable provider using the "),v.Vb(67,"a",1),v.Vb(68,"code"),v.Oc(69,"ProviderRegistryService"),v.Ub(),v.Ub(),v.Oc(70,". "),v.Vb(71,"nui-message",7),v.Vb(72,"strong"),v.Oc(73,"Note:"),v.Ub(),v.Oc(74," When registering a class provider using the ProviderRegistryService, be sure to include in the "),v.Vb(75,"code"),v.Oc(76,"deps"),v.Ub(),v.Oc(77," array any dependencies that need to be injected into the provider. This is demonstrated in the example below. "),v.Ub(),v.Ub(),v.Vb(78,"li"),v.Oc(79,"Set the data source's provider ID in the widget configuration."),v.Ub(),v.Ub(),v.Vb(80,"p"),v.Oc(81," In the example below, we're statically setting the data source providerId for the tile inside the KPI widget. In a real-world scenario, the tile configuration would more likely come from a database or from the widget configurator output. We'll cover configurator usage in the Widget Editing and Widget Cloning tutorials.\n"),v.Ub(),v.Vb(82,"nui-message",5),v.Oc(83," For more detailed information about adding a data source, take a look at the inline comments under the source expander of the following example.\n"),v.Ub(),v.Vb(84,"nui-example-wrapper",8),v.Qb(85,"data-source-setup"),v.Ub()),2&e&&(v.Db(40),v.uc("allowDismiss",!1),v.Db(15),v.uc("allowDismiss",!1),v.Db(16),v.uc("allowDismiss",!1),v.Db(11),v.uc("allowDismiss",!1))},directives:[m.y,m.l,D],encapsulation:2}),l),data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}},{path:"example",component:D,data:{srlc:{hideIndicator:!0}}}],S=((p=function e(){t(this,e)}).\u0275mod=v.Nb({type:p}),p.\u0275inj=v.Mb({factory:function(e){return new(e||p)},imports:[[h.c,f.c,y.N,m.F,m.M,g.d.forChild(C)]]}),p)}}])}();