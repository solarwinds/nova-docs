!function(){var e,t,o,n,i,r,a,c,s;function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var o,n=f(e);if(t){var i=f(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return p(this,o)}}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,o){return t&&m(e.prototype,t),o&&m(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{SMqf:function(d,p,f){"use strict";var m,y;f.r(p),f.d(p,"CustomConfiguratorSectionModule",function(){return Y});var w=f("ofXK"),O=f("tk/3"),U=f("3Pt+"),V=f("tyNb"),k=f("Rr1A"),C=f("gKry"),x=f("fXoL"),D=f("mrSG"),_=f("itXk"),I=f("2Vo4"),R=f("JX91"),S=f("lJxs"),j=f("nYR2"),M=f("phhy"),P=f("jLQL"),T=f("kw4N"),z=f("sleA"),A=f("MJAs");function F(e,t){if(1&e&&(x.Vb(0,"div",17),x.Vb(1,"nui-form-field",18),x.Qb(2,"nui-textbox",19),x.Ub(),x.Ub()),2&e){var o=x.nc();x.Db(1),x.uc("control",o.form.get("units"))}}function K(e,t){if(1&e){var o=x.Wb();x.Vb(0,"button",6),x.jc("click",function(){return x.Gc(o),x.nc().initializeDashboard()}),x.Oc(1,"Restore Widget"),x.Ub()}}var N,J,$,L,W,E,Q=".dashboard[_ngcontent-%COMP%]{height:800px}.kpi-description-configuration__accordion-content[_ngcontent-%COMP%]{padding:15px 15px 15px 46px}.kpi-description-configuration__custom-content-container[_ngcontent-%COMP%]{background-color:var(--nui-color-bg-dark,#111);border-radius:3px}.kpi-description-configuration__custom-content[_ngcontent-%COMP%], .kpi-description-configuration__custom-content-header[_ngcontent-%COMP%]{color:var(--nui-color-text-light,#fff)}",B=((L=function(){function t(e,o){g(this,t),this.changeDetector=e,this.formBuilder=o,this.label="",this.units="",this.formReady=new x.o}return v(t,[{key:"ngOnInit",value:function(){this.form=this.formBuilder.group({label:[this.label,[U.u.required]]}),this.configurableUnits&&this.form.addControl("units",this.formBuilder.control(this.units));var t=this.form.get("label"),o=null==t?void 0:t.valueChanges.pipe(Object(R.a)(null==t?void 0:t.value));this.subtitle$=Object(_.a)([null==o?void 0:o.pipe(Object(S.a)(function(t){return t||$localize(e||(e=h(["no label"])))}))]).pipe(Object(S.a)(function(e){return e.join(", ")})),this.formReady.emit(this.form)}},{key:"ngOnChanges",value:function(e){e.label&&this.form.patchValue({label:e.label.currentValue}),e.units&&this.form.patchValue({units:e.units.currentValue})}}]),t}()).lateLoadKey="CustomKpiDescriptionConfigurationComponent",L.\u0275fac=function(e){return new(e||L)(x.Pb(x.h),x.Pb(U.f))},L.\u0275cmp=x.Jb({type:L,selectors:[["custom-kpi-description-configuration"]],inputs:{componentId:"componentId",configurableUnits:"configurableUnits",label:"label",units:"units"},outputs:{formReady:"formReady"},features:[x.Bb],decls:24,vars:20,consts:function(){return[[3,"formGroup","state"],["accordionHeader","",1,"d-flex","align-items-center","px-4","py-2"],[1,"align-self-start","pt-2",3,"icon"],[1,"d-flex","flex-column","ml-4","pt-1"],[1,"nui-text-label"],$localize(t||(t=h([":\u241feec715de352a6b114713b30b640d319fa78207a0\u241f4902817035128594900:Description"]))),[1,"nui-text-secondary",3,"title"],[1,"kpi-description-configuration__accordion-content"],[1,"mb-4"],["caption",$localize(o||(o=h([":\u241f863226cffd5b66a6fee9810a9282a5006d6ef576\u241f4077520913910941990:Label"]))),1,"form-group",3,"control"],["formControlName","label","placeholder",$localize(n||(n=h([":\u241f8f40d8c34a1e732d86581f53b3ed6ff4e1baf8b5\u241f725093659603391179:Set label"])))],[1,"my-4","pt-1","px-3","pb-3","kpi-description-configuration__custom-content-container"],[1,"kpi-description-configuration__custom-content-header"],$localize(i||(i=h([":\u241f18999a4535cfb171ce51fdd913e4225788160961\u241f3329605396058571239:Custom Content"]))),[1,"kpi-description-configuration__custom-content"],$localize(r||(r=h([":\u241f51c6a11f71ecdab77f2ee769b94a1500b5bf50bb\u241f7436257570592171744: The default version of this configurator section displays a background color selector here. "]))),["class","mt-4",4,"ngIf"],[1,"mt-4"],["caption",$localize(a||(a=h([":\u241fbe537f4ddb09e1a2856314f2cbe84063ab6b4170\u241f9074327260054432941:Units"]))),1,"form-group",3,"control"],["formControlName","units","placeholder",$localize(c||(c=h([":\u241fbe537f4ddb09e1a2856314f2cbe84063ab6b4170\u241f9074327260054432941:Units"])))]]},template:function(e,t){1&e&&(x.Vb(0,"nui-widget-editor-accordion",0),x.oc(1,"async"),x.oc(2,"nuiWidgetEditorAccordionFormState"),x.Vb(3,"div",1),x.Qb(4,"nui-icon",2),x.oc(5,"async"),x.oc(6,"nuiFormHeaderIconPipe"),x.Vb(7,"div",3),x.Vb(8,"span",4),x.Zb(9,5),x.Ub(),x.Vb(10,"div",6),x.oc(11,"async"),x.Oc(12),x.oc(13,"async"),x.Ub(),x.Ub(),x.Ub(),x.Vb(14,"div",7),x.Vb(15,"div",8),x.Vb(16,"nui-form-field",9),x.Qb(17,"nui-textbox",10),x.Ub(),x.Ub(),x.Vb(18,"div",11),x.Vb(19,"h5",12),x.Zb(20,13),x.Ub(),x.Vb(21,"div",14),x.Zb(22,15),x.Ub(),x.Ub(),x.Mc(23,F,3,1,"div",16),x.Ub(),x.Ub()),2&e&&(x.uc("formGroup",t.form)("state",x.pc(1,7,x.pc(2,9,t.form))),x.Db(4),x.uc("icon",x.pc(5,11,x.qc(6,13,t.form,"widget_list"))),x.Db(6),x.uc("title",x.pc(11,16,t.subtitle$)),x.Db(2),x.Qc(" ",x.pc(13,18,t.subtitle$)," "),x.Db(4),x.uc("control",t.form.get("label")),x.Db(7),x.uc("ngIf",t.configurableUnits))},directives:[M.a,U.p,U.j,k.q,k.n,k.Rb,U.o,U.h,w.o],pipes:[w.b,P.a,T.a],styles:[Q],changeDetection:0}),L),q=(($=function(e){l(o,e);var t=b(o);function o(e){var n;return g(this,o),(n=t.call(this)).http=e,n.busy=new I.a(!1),n}return v(o,[{key:"getFilteredData",value:function(){return Object(D.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.busy.next(!0),new Promise(function(e){t.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(Object(j.a)(function(){return t.busy.next(!1)})).subscribe({next:function(t){e({result:{value:t.volumeInfo.averageRating}})},error:function(t){e({result:null,error:{type:t.status}})}})})));case 1:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){this.outputsSubject.complete()}}]),o}(k.g)).providerId="AverageRatingKpiDataSource",$.\u0275fac=function(e){return new(e||$)(x.fc(O.b))},$.\u0275prov=x.Lb({token:$,factory:$.\u0275fac}),$),Z=((J=function(e){l(o,e);var t=b(o);function o(e){var n;return g(this,o),(n=t.call(this)).http=e,n.busy=new I.a(!1),n}return v(o,[{key:"getFilteredData",value:function(){return Object(D.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.busy.next(!0),new Promise(function(e){t.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(Object(j.a)(function(){return t.busy.next(!1)})).subscribe({next:function(t){e({result:{value:t.volumeInfo.ratingsCount}})},error:function(t){e({result:null,error:{type:t.status}})}})})));case 1:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){this.outputsSubject.complete()}}]),o}(k.g)).providerId="RatingsCountKpiDataSource",J.\u0275fac=function(e){return new(e||J)(x.fc(O.b))},J.\u0275prov=x.Lb({token:J,factory:J.\u0275fac}),J),G=((N=function(){function e(t,o,n){g(this,e),this.widgetTypesService=t,this.providerRegistry=o,this.componentRegistry=n,this.gridsterConfig={},this.editMode=!1}return v(e,[{key:"ngOnInit",value:function(){var e,t=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(t,"configurator",C.jb.TileDescriptionConfigComponentType,B.lateLoadKey),this.componentRegistry.registerByLateLoadKey(B),this.widgetTypesService.setNode(t,"configurator",C.jb.DataSourceProviders,[q.providerId,Z.providerId]),this.providerRegistry.setProviders((u(e={},q.providerId,{provide:C.b,useClass:q,deps:[O.b]}),u(e,Z.providerId,{provide:C.b,useClass:Z,deps:[O.b]}),e)),this.initializeDashboard()}},{key:"initializeDashboard",value:function(){var e=X,t=u({},e.id,this.widgetTypesService.mergeWithWidgetType(e));this.dashboard={positions:u({},e.id,{cols:4,rows:6,y:0,x:0}),widgets:t}}}]),e}()).\u0275fac=function(e){return new(e||N)(x.Pb(C.nb),x.Pb(C.V),x.Pb(C.a))},N.\u0275cmp=x.Jb({type:N,selectors:[["custom-configurator-section"]],decls:6,vars:5,consts:function(){return[[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"value","valueChange"],$localize(s||(s=h([":\u241f18d630a3c524dbab6dc528571782a939a7bc95b1\u241f861097914887003123: Edit Mode "]))),["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"],["type","button","displayStyle","action","nui-button","",3,"click"]]},template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Vb(1,"nui-switch",1),x.jc("valueChange",function(e){return t.editMode=e}),x.Zb(2,2),x.Ub(),x.Mc(3,K,2,0,"button",3),x.Ub(),x.Vb(4,"div",4),x.Vb(5,"nui-dashboard",5),x.jc("dashboardChange",function(e){return t.dashboard=e})("gridsterConfigChange",function(e){return t.gridsterConfig=e}),x.Ub(),x.Ub()),2&e&&(x.Db(1),x.uc("value",t.editMode),x.Db(2),x.uc("ngIf",!(null!=t.dashboard&&t.dashboard.widgets.widget1)),x.Db(2),x.uc("dashboard",t.dashboard)("gridsterConfig",t.gridsterConfig)("editMode",t.editMode))},directives:[k.Fb,w.o,z.a,A.a,k.b],styles:[Q]}),N),X={id:"widget1",type:"kpi",pizzagna:u({},C.Q.Configuration,(y={},u(y,C.g,{providers:u({},C.kb.Refresher,{properties:{interval:600,enabled:!0}})}),u(y,"header",{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}}),u(y,"tiles",{properties:{nodes:["kpi1"]}}),u(y,"kpi1",{id:"kpi1",componentType:C.z.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating"}},providers:(m={},u(m,C.kb.DataSource,{providerId:q.providerId}),u(m,C.kb.Adapter,{providerId:C.I,properties:{componentId:"kpi1",propertyPath:"widgetData"}}),m)}),y))},H=[{path:"",component:(W=function e(){g(this,e)},W.\u0275fac=function(e){return new(e||W)},W.\u0275cmp=x.Jb({type:W,selectors:[["custom-configurator-section-docs"]],decls:89,vars:2,consts:[["href","../additional-documentation/tutorials/customization/widget.html","target","_parent"],["href","../classes/WidgetTypesService.html","target","_blank"],["href","../injectables/ComponentRegistryService.html","target","_blank"],["href","../additional-documentation/getting-started.html","target","_parent"],["href","../components/KpiDescriptionConfigurationComponent.html","target","_blank"],["href","../modules/NuiDashboardConfiguratorModule.html","target","_blank"],["href","https://angular.io/api/forms/ReactiveFormsModule","target","_blank"],["type","info",3,"allowDismiss"],["filenamePrefix","custom-configurator-section.component","exampleTitle","Custom Configurator Section"]],template:function(e,t){1&e&&(x.Vb(0,"h1"),x.Oc(1,"Implementing a Custom Configurator Section"),x.Ub(),x.Vb(2,"p"),x.Oc(3," While developing a dashboard, you may find yourself wanting to give users the ability to configure a widget behavior or layout that's not configurable out of the box. For example, you may want to provide a product-specific way for users to configure a data source. The first step to achieving something like this is to replace an existing widget configurator (editor) section with your own implementation. In this tutorial, we'll do our best to give you an understanding of what's needed to accomplish this first step.\n"),x.Ub(),x.Vb(4,"p"),x.Oc(5," For now, we'll keep things simple and create a custom version of the KPI description configuration component to replace the background color selector with some static text content. This will serve mainly as a proof-of-concept for the configurator side. In a later tutorial, we'll create a "),x.Vb(6,"a",0),x.Oc(7,"custom widget"),x.Ub(),x.Oc(8," that can actually be configured via a custom configurator section. And, in another tutorial beyond that, we'll go over the small amount of additional wiring required to give users the ability to change the configuration of a data source.\n"),x.Ub(),x.Vb(9,"h2"),x.Oc(10,"Fundamental Concepts"),x.Ub(),x.Vb(11,"ul"),x.Vb(12,"li"),x.Vb(13,"code"),x.Vb(14,"a",1),x.Oc(15,"WidgetTypesService"),x.Ub(),x.Ub(),x.Ub(),x.Vb(16,"li"),x.Vb(17,"code"),x.Vb(18,"a",2),x.Oc(19,"ComponentRegistryService"),x.Ub(),x.Ub(),x.Ub(),x.Vb(20,"li"),x.Oc(21," Custom configurator section component "),x.Ub(),x.Ub(),x.Vb(22,"h2"),x.Oc(23,"Basic Steps"),x.Ub(),x.Vb(24,"ol"),x.Vb(25,"li"),x.Oc(26," Follow the instructions "),x.Vb(27,"a",3),x.Oc(28,"here"),x.Ub(),x.Oc(29," to set up your environment for dashboard development. "),x.Ub(),x.Vb(30,"li"),x.Oc(31," Follow the instructions from previous tutorials to get a basic dashboard up and running. "),x.Ub(),x.Vb(32,"li"),x.Oc(33," Create a component that will be used to replace an existing framework-provided configurator section. In this tutorial, we'll replace the existing "),x.Vb(34,"code"),x.Vb(35,"a",4),x.Oc(36,"KpiDescriptionConfigurationComponent"),x.Ub(),x.Ub(),x.Oc(37," with a custom one. Our version will insert custom content where there would normally be a tile color selection dropdown. "),x.Ub(),x.Vb(38,"li"),x.Oc(39," Ensure that the following modules are included in the imports of the custom configurator section component's parent module: "),x.Vb(40,"code"),x.Vb(41,"a",5),x.Oc(42,"NuiDashboardConfiguratorModule"),x.Ub(),x.Ub(),x.Oc(43,", "),x.Vb(44,"code"),x.Oc(45,"NuiFormFieldModule"),x.Ub(),x.Oc(46,", "),x.Vb(47,"code"),x.Oc(48,"NuiTextboxModule"),x.Ub(),x.Oc(49,", "),x.Vb(50,"code"),x.Oc(51,"NuiIconModule"),x.Ub(),x.Oc(52,", and Angular's "),x.Vb(53,"code"),x.Vb(54,"a",6),x.Oc(55,"ReactiveFormsModule"),x.Ub(),x.Ub(),x.Oc(56,". "),x.Ub(),x.Vb(57,"li"),x.Oc(58," Add the custom configurator section component class name to the declarations of the module in which it's implemented. In this example, the class name is "),x.Vb(59,"code"),x.Oc(60,"CustomKpiDescriptionConfigurationComponent"),x.Ub(),x.Ub(),x.Vb(61,"li"),x.Oc(62," Prepare the dashboard framework to use our custom configurator section by doing the following: "),x.Vb(63,"ol"),x.Vb(64,"li"),x.Oc(65," Use the "),x.Vb(66,"code"),x.Vb(67,"a",1),x.Oc(68,"WidgetTypesService"),x.Ub(),x.Ub(),x.Oc(69," to replace the existing configurator section component with our custom one. "),x.Ub(),x.Vb(70,"li"),x.Oc(71," Register the custom configurator section component using the "),x.Vb(72,"code"),x.Vb(73,"a",2),x.Oc(74,"ComponentRegistryService"),x.Ub(),x.Ub(),x.Oc(75," to make it available for late load by the dashboard framework. "),x.Ub(),x.Ub(),x.Vb(76,"nui-message",7),x.Vb(77,"strong"),x.Oc(78,"Note:"),x.Ub(),x.Oc(79," In this tutorial, the above two steps are performed in the component's "),x.Vb(80,"code"),x.Oc(81,"ngOnInit"),x.Ub(),x.Oc(82,". But, in a real-world app, widget type modifications and component registrations like this may make more sense in a parent module's constructor. Moving framework initialization procedures such as these to a higher level in an app's hierarchy ensures that multiple dashboard instances within a common parent module have access to the same modifications. "),x.Ub(),x.Ub(),x.Vb(83,"li"),x.Oc(84," At this point you should be able to open the widget editor using the Edit button in the menu at the top-right corner of the widget. Once the editor is open, expand the KPI tile's Description section. The custom component we created should now be displayed in that section of the editor. "),x.Ub(),x.Ub(),x.Vb(85,"nui-message",7),x.Oc(86," For more detailed information about implementing a custom configurator section, take a look at the inline comments under the source expander of the following example.\n"),x.Ub(),x.Vb(87,"nui-example-wrapper",8),x.Qb(88,"custom-configurator-section"),x.Ub()),2&e&&(x.Db(76),x.uc("allowDismiss",!1),x.Db(9),x.uc("allowDismiss",!1))},directives:[k.y,k.l,G],encapsulation:2}),W),data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}},{path:"example",component:G,data:{srlc:{hideIndicator:!0}}}],Y=((E=function e(){g(this,e)}).\u0275mod=x.Nb({type:E}),E.\u0275inj=x.Mb({factory:function(e){return new(e||E)},imports:[[w.c,U.s,O.c,C.N,C.M,k.F,k.I,k.J,k.M,k.Z,k.bb,k.A,V.d.forChild(H)]]}),E)}}])}();