!function(){var e,t,i;function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"o0g+":function(n,d,c){"use strict";var l,p,u;c.r(d),c.d(d,"ConfiguratorTestModule",function(){return $});var g=c("tyNb"),b=c("Rr1A"),h=c("gKry"),v=c("4uQc"),f=c("bTxs"),m=c("FupF"),w=c("M+5T"),y=c("WqJa"),C=c("QVEU"),I=c.n(C),S=c("XNiG"),k=c("IzEk"),T=c("1G5W"),P=c("ofXK"),W=c("fXoL"),D=c("BkRI"),O=c.n(D),z=c("D1y2"),j=c.n(z),x=c("bPcI"),L={widget1:{cols:6,rows:6,y:0,x:0},widget2:{cols:6,rows:6,y:0,x:6},widget3:{cols:7,rows:6,y:6,x:0},widget4:{cols:5,rows:6,y:6,x:7}},U=[{id:"widget1",type:"kpi",pizzagna:s({},h.Q.Configuration,{header:{properties:{title:"KPI Widget!",subtitle:"A bunch of number boxes"}},tiles:{properties:{nodes:["kpi1","kpi2"]}},kpi1:{id:"kpi1",componentType:h.z.lateLoadKey,providers:(l={},s(l,h.kb.DataSource,{providerId:f.a.providerId}),s(l,h.kb.Adapter,{providerId:h.I,properties:{componentId:"kpi1",propertyPath:"widgetData",thresholds:{showThresholds:!0,warningThresholdValue:5,criticalThresholdValue:8}}}),l),properties:{elementClass:"flex-grow-1",widgetData:{id:"totalStorage",value:0,label:"Total storage"}}},kpi2:{id:"kpi2",componentType:h.z.lateLoadKey,providers:(p={},s(p,h.kb.DataSource,{providerId:f.b.providerId}),s(p,h.kb.Adapter,{providerId:h.I,properties:{componentId:"kpi2",propertyPath:"widgetData",thresholds:{warningThresholdValue:120,criticalThresholdValue:150}}}),p),properties:{elementClass:"flex-grow-1",widgetData:{id:"downloadSpeed",value:0,label:"Download speed"}}}})},{id:"widget2",type:"proportional",pizzagna:s({},h.Q.Configuration,{header:{properties:{title:"Proportional Widget!",subtitle:"Proportional widget with legend formatters"}},chart:{providers:s({},h.kb.DataSource,{providerId:m.b.providerId}),properties:{configuration:{chartOptions:{type:h.U.PieChart,legendPlacement:h.B.Right,legendFormatter:{componentType:h.C.lateLoadKey}}}}}})},{id:"widget3",type:"timeseries",pizzagna:s({},h.Q.Configuration,(u={},s(u,h.g,{providers:s({},h.kb.DataSource,{providerId:y.a.providerId})}),s(u,"header",{properties:{title:"Timeseries Widget!",subtitle:"Basic timeseries widget"}}),s(u,"chart",{providers:s({},h.kb.Adapter,{properties:{series:[{id:"series-1",label:"Average CPU Load",selectedSeriesId:"series-1"},{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"},{id:"series-3",label:"Average CPU Load",selectedSeriesId:"series-3"}]}}),properties:{configuration:{legendPlacement:h.B.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)"}}}),s(u,"timeframeSelection",{properties:{timeframe:{startDatetime:Object(x.e)().subtract(7,"day").format(),endDatetime:Object(x.e)().format(),selectedPresetId:null}}}),u))},{id:"widget4",type:"table",pizzagna:s({},h.Q.Configuration,{header:{properties:{title:"Table Widget!",subtitle:"Basic table widget"}},table:{providers:s({},h.kb.DataSource,{providerId:w.a.providerId}),properties:{configuration:{columns:[{id:"column1",label:"No",isActive:!0,formatter:{componentType:h.W.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:h.W.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Location",isActive:!0,formatter:{componentType:h.C.lateLoadKey,properties:{dataFieldIds:{value:"firstUrlLabel",link:"firstUrl"}}}}],sorterConfiguration:{descendantSorting:!0,sortBy:"column1"},hasVirtualScroll:!0}}}})}];function E(e,t){if(1&e&&(W.Vb(0,"div",3),W.Vb(1,"div",4),W.Oc(2),W.Ub(),W.Ub()),2&e){var i=t.item;W.Db(2),W.Qc(" ",i.title," ")}}var M,A,V,R,K=((A=function(){function e(t){o(this,e),this.widgetTypesService=t,this.widgetSelected=new W.o,this.widgetItems=[]}return a(e,[{key:"ngOnInit",value:function(){var e=this,t=new P.x;this.widgetItems=U.map(function(i){return console.log(i),{title:t.transform(i.type),widget:e.widgetTypesService.mergeWithWidgetType(i)}}),this.onSelect([this.widgetItems[0]]),U.forEach(function(t){e.addUnconfiguredWidgetWithConfigLayer(t)})}},{key:"addUnconfiguredWidgetWithConfigLayer",value:function(e){var t=(new P.x).transform(e.type);this.widgetItems.push({title:"Unconfigured ".concat(t," With Config Layer"),widget:Object.assign(Object.assign({},O()(this.widgetTypesService.mergeWithWidgetType(e))),{id:"unconfiguredWithConfigLayer".concat(t),metadata:{needsConfiguration:!0}})}),j()(this.widgetItems[this.widgetItems.length-1].widget.pizzagna,"".concat(h.Q.Configuration,".header.properties.title"),"Unconfigured ".concat(t," With Config Layer"))}},{key:"onSelect",value:function(e){this.widgetSelected.emit(e[0].widget),this.widgetSelection=e}}]),e}()).lateLoadKey="AcmeCloneSelectionComponent",A.\u0275fac=function(e){return new(e||A)(W.Pb(h.nb))},A.\u0275cmp=W.Jb({type:A,selectors:[["acme-clone-selection"]],outputs:{widgetSelected:"widgetSelected"},decls:4,vars:3,consts:[[1,"nui-widget-cloner"],["selectionMode","singleWithRequiredSelection",3,"itemsSource","selection","repeatItemTemplateRef","selectionChange"],["widgetClonerItem",""],[1,"nui-widget-cloner__item","d-flex","pt-2","pb-2","align-items-center"],[1,"text-info","ml-3"]],template:function(e,t){if(1&e&&(W.Vb(0,"div",0),W.Vb(1,"nui-repeat",1),W.jc("selectionChange",function(e){return t.onSelect(e)}),W.Ub(),W.Ub(),W.Mc(2,E,3,1,"ng-template",null,2,W.Nc)),2&e){var i=W.Dc(3);W.Db(1),W.uc("itemsSource",t.widgetItems)("selection",t.widgetSelection)("repeatItemTemplateRef",i)}},directives:[b.tb],styles:[".nui-widget-cloner__item[_ngcontent-%COMP%]{height:60px}"]}),A),Q=((M=function i(n){var a=this;o(this,i),this.toastService=n,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=function(t){var i=new S.a;return setTimeout(function(){if(a.allowSubmit)i.next(t);else{var o=$localize(e||(e=r(["Submit failed."])));a.toastService.error({title:o}),i.error(o)}},1e3),i.asObservable()},this.tryRemove=function(e){var i=new S.a;return setTimeout(function(){if(a.allowRemoval)i.next(e);else{var o=$localize(t||(t=r(["Widget removal failed."])));a.toastService.error({title:o}),i.error(o)}},200),i.asObservable()},this.toastService.setConfig({timeOut:2e3})}).\u0275fac=function(e){return new(e||M)(W.fc(b.Yb))},M.\u0275prov=W.Lb({token:M,factory:M.\u0275fac}),M),J=c("BJxG"),N=c("sleA"),B=c("MJAs"),F=[{path:"",component:(V=function(){function e(t,i,r,n,a){var d;o(this,e),this.providerRegistry=t,this.submitHandler=i,this.themeSwitcherService=r,this.widgetTypesService=n,this.widgetClonerService=a,this.destroy$=new S.a,this.dashboard={positions:{},widgets:{}},this.gridsterConfig={minCols:12,maxCols:12,minRows:12},this.editMode=!1,this.dsError=!1,this.providerRegistry.setProviders((s(d={},f.a.providerId,{provide:h.b,useClass:f.a,deps:[]}),s(d,f.b.providerId,{provide:h.b,useClass:f.b,deps:[]}),s(d,m.a.providerId,{provide:h.b,useClass:m.a,deps:[]}),s(d,m.b.providerId,{provide:h.b,useClass:m.b,deps:[]}),s(d,m.c.providerId,{provide:h.b,useClass:m.c,deps:[]}),s(d,w.a.providerId,{provide:h.b,useClass:w.a,deps:[b.wb,h.O]}),s(d,w.b.providerId,{provide:h.b,useClass:w.b,deps:[b.wb,h.O]}),s(d,y.a.providerId,{provide:h.b,useClass:y.a,deps:[]}),s(d,y.b.providerId,{provide:h.b,useClass:y.b,deps:[]}),d))}return a(e,[{key:"ngOnInit",value:function(){var e=this,t=U.map(function(t){return Object.assign(Object.assign({},t),{pizzagna:Object.assign(Object.assign({},e.widgetTypesService.getWidgetType(t.type,t.version).widget),t.pizzagna)})}),i=I()(t,function(e){return e.id});this.dashboard={positions:L,widgets:i}}},{key:"onDsErrorChange",value:function(e){f.a.mockError=e,y.a.mockError=e,w.a.mockError=e,m.b.mockError=e}},{key:"onCloneWidget",value:function(){this.widgetClonerService.open({dashboardComponent:this.dashboardComponent,trySubmit:this.submitHandler.trySubmit,widgetSelectionComponentType:K}).pipe(Object(k.a)(1),Object(T.a)(this.destroy$)).subscribe()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}(),V.\u0275fac=function(e){return new(e||V)(W.Pb(h.V),W.Pb(Q),W.Pb(b.Tb),W.Pb(h.nb),W.Pb(h.lb))},V.\u0275cmp=W.Jb({type:V,selectors:[["acme-dashboard"]],viewQuery:function(e,t){var i;1&e&&W.Sc(h.k,3),2&e&&W.Cc(i=W.kc())&&(t.dashboardComponent=i.first)},features:[W.Cb([Q])],decls:5,vars:6,consts:function(){return[["type","button","nui-button","",1,"mb-3","ml-4","nui-widget-cloner-test-button",3,"click"],$localize(i||(i=r([":\u241f08a1b409eac8269dd4dce8a2b3bd976356ba40ee\u241f7260316479095556147:Create Widget Clone"]))),[3,"editMode","dsError","editModeChange","dsErrorChange"],[1,"dashboard"],[3,"nuiWidgetEditor","dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"]]},template:function(e,t){1&e&&(W.Vb(0,"button",0),W.jc("click",function(){return t.onCloneWidget()}),W.Zb(1,1),W.Ub(),W.Vb(2,"dashboard-test-harness",2),W.jc("editModeChange",function(e){return t.editMode=e})("dsErrorChange",function(e){return t.onDsErrorChange(e)}),W.Vb(3,"div",3),W.Vb(4,"nui-dashboard",4),W.jc("dashboardChange",function(e){return t.dashboard=e})("gridsterConfigChange",function(e){return t.gridsterConfig=e}),W.Ub(),W.Ub(),W.Ub()),2&e&&(W.Db(2),W.uc("editMode",t.editMode)("dsError",t.dsError),W.Db(2),W.uc("nuiWidgetEditor",t.submitHandler)("dashboard",t.dashboard)("gridsterConfig",t.gridsterConfig)("editMode",t.editMode))},directives:[b.b,J.a,N.a,B.a],styles:[".dashboard[_ngcontent-%COMP%]{height:725px;width:1000px}"]}),V),data:{srlc:{hideIndicator:!0}}}],$=((R=function(){function e(t){var i;o(this,e),this.widgetTypesService=t,null===(i=this.widgetTypesService.getWidgetType("proportional",1).widget.structure[h.g].providers)||void 0===i||delete i.refresher,this.setDataSourceProviders("table",[w.a.providerId,w.b.providerId]),this.setDataSourceProviders("kpi",[f.a.providerId,f.b.providerId]),this.setDataSourceProviders("proportional",[m.a.providerId,m.b.providerId,m.c.providerId]),this.setDataSourceProviders("timeseries",[y.a.providerId,y.b.providerId])}return a(e,[{key:"setDataSourceProviders",value:function(e,t){var i=this.widgetTypesService.getWidgetType(e,1);this.widgetTypesService.setNode(i,"configurator",h.jb.DataSourceProviders,t)}}]),e}()).\u0275mod=W.Nb({type:R}),R.\u0275inj=W.Mb({factory:function(e){return new(e||R)(W.fc(h.nb))},providers:[h.V],imports:[[v.a,h.N,b.z,b.A,b.F,b.Z,b.J,b.T,g.d.forChild(F)]]}),R)}}])}();