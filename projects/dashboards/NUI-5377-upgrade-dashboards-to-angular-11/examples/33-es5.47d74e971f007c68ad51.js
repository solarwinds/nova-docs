!function(){var e;function t(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var o,i=d(e);if(t){var r=d(this).constructor;o=Reflect.construct(i,arguments,r)}else o=i.apply(this,arguments);return c(this,o)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{xR4R:function(i,a,c){"use strict";var d,u;c.r(a),c.d(a,"WidgetEditorSetupModule",function(){return M});var b=c("ofXK"),l=c("tk/3"),h=c("tyNb"),p=c("Rr1A"),g=c("gKry"),f=c("fXoL"),m=c("mrSG"),v=c("2Vo4"),w=c("nYR2"),y=c("sleA"),O=c("MJAs");function V(e,t){if(1&e){var o=f.Wb();f.Vb(0,"button",6),f.jc("click",function(){return f.Gc(o),f.nc().initializeDashboard()}),f.Oc(1,"Restore Widget"),f.Ub()}}var U,D,k,S,C,I=((k=function(e){n(i,e);var t=s(i);function i(e){var r;return o(this,i),(r=t.call(this)).http=e,r.busy=new v.a(!1),r}return r(i,[{key:"getFilteredData",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.busy.next(!0),new Promise(function(e){t.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(Object(w.a)(function(){return t.busy.next(!1)})).subscribe({next:function(t){e({result:{value:t.volumeInfo.averageRating}})},error:function(t){e({result:null,error:{type:t.status}})}})})));case 1:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){this.outputsSubject.complete()}}]),i}(p.g)).providerId="AverageRatingKpiDataSource",k.\u0275fac=function(e){return new(e||k)(f.fc(l.b))},k.\u0275prov=f.Lb({token:k,factory:k.\u0275fac}),k),j=((D=function(e){n(i,e);var t=s(i);function i(e){var r;return o(this,i),(r=t.call(this)).http=e,r.busy=new v.a(!1),r}return r(i,[{key:"getFilteredData",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.busy.next(!0),new Promise(function(e){t.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(Object(w.a)(function(){return t.busy.next(!1)})).subscribe({next:function(t){e({result:{value:t.volumeInfo.ratingsCount}})},error:function(t){e({result:null,error:{type:t.status}})}})})));case 1:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){this.outputsSubject.complete()}}]),i}(p.g)).providerId="RatingsCountKpiDataSource",D.\u0275fac=function(e){return new(e||D)(f.fc(l.b))},D.\u0275prov=f.Lb({token:D,factory:D.\u0275fac}),D),R=((U=function(){function e(t,i){o(this,e),this.widgetTypesService=t,this.providerRegistry=i,this.gridsterConfig={},this.editMode=!1}return r(e,[{key:"ngOnInit",value:function(){var e,o=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(o,"configurator",g.jb.DataSourceProviders,[I.providerId,j.providerId]),this.providerRegistry.setProviders((t(e={},I.providerId,{provide:g.b,useClass:I,deps:[l.b]}),t(e,j.providerId,{provide:g.b,useClass:j,deps:[l.b]}),e)),this.initializeDashboard()}},{key:"initializeDashboard",value:function(){var e=x,o=t({},e.id,this.widgetTypesService.mergeWithWidgetType(e));this.dashboard={positions:t({},e.id,{cols:4,rows:6,y:0,x:0}),widgets:o}}}]),e}()).\u0275fac=function(e){return new(e||U)(f.Pb(g.nb),f.Pb(g.V))},U.\u0275cmp=f.Jb({type:U,selectors:[["widget-editor-setup"]],decls:6,vars:5,consts:function(){var t,o;return[[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"value","valueChange"],$localize(e||(t=[":\u241f18d630a3c524dbab6dc528571782a939a7bc95b1\u241f861097914887003123: Edit Mode "],o||(o=t.slice(0)),e=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(o)}})))),["type","button","displayStyle","action","nui-button","",3,"click",4,"ngIf"],[1,"w-100","dashboard"],["nuiWidgetEditor","",3,"dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"],["type","button","displayStyle","action","nui-button","",3,"click"]]},template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Vb(1,"nui-switch",1),f.jc("valueChange",function(e){return t.editMode=e}),f.Zb(2,2),f.Ub(),f.Mc(3,V,2,0,"button",3),f.Ub(),f.Vb(4,"div",4),f.Vb(5,"nui-dashboard",5),f.jc("dashboardChange",function(e){return t.dashboard=e})("gridsterConfigChange",function(e){return t.gridsterConfig=e}),f.Ub(),f.Ub()),2&e&&(f.Db(1),f.uc("value",t.editMode),f.Db(2),f.uc("ngIf",!(null!=t.dashboard&&t.dashboard.widgets.widget1)),f.Db(2),f.uc("dashboard",t.dashboard)("gridsterConfig",t.gridsterConfig)("editMode",t.editMode))},directives:[p.Fb,b.o,y.a,O.a,p.b],styles:[".dashboard[_ngcontent-%COMP%]{height:800px}"]}),U),x={id:"widget1",type:"kpi",pizzagna:t({},g.Q.Configuration,(u={},t(u,g.g,{providers:t({},g.kb.Refresher,{properties:{interval:600,enabled:!0}})}),t(u,"header",{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}}),t(u,"tiles",{properties:{nodes:["kpi1"]}}),t(u,"kpi1",{id:"kpi1",componentType:g.z.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating"}},providers:(d={},t(d,g.kb.DataSource,{providerId:I.providerId}),t(d,g.kb.Adapter,{providerId:g.I,properties:{componentId:"kpi1",propertyPath:"widgetData"}}),d)}),u))},P=[{path:"",component:(S=function e(){o(this,e)},S.\u0275fac=function(e){return new(e||S)},S.\u0275cmp=f.Jb({type:S,selectors:[["nui-dashboard-widget-editor-docs"]],decls:122,vars:6,consts:[["href","../additional-documentation/tutorials/customization/configurator-section.html","target","_parent"],["href","../components/DashboardComponent.html","target","_blank"],["href","../classes/WidgetTypesService.html","target","_blank"],["href","../directives/WidgetEditorDirective.html","target","_blank"],["href","../additional-documentation/getting-started.html","target","_parent"],["type","info",3,"allowDismiss"],["href","../additional-documentation/tutorials/adding-a-data-source.html","target","_parent"],["href","../injectables/ProviderRegistryService.html","target","_blank"],["type","warning",3,"allowDismiss"],["href","https://angular.io/guide/http#setup","target","_blank"],["target","_blank","href","../classes/WidgetTypesService.html#setNode"],["href","../components/DashboardComponent.html#editMode","target","_blank"],["filenamePrefix","widget-editor-setup.component","exampleTitle","Adding a widget editor"]],template:function(e,t){1&e&&(f.Vb(0,"h1"),f.Oc(1,"Widget and Dashboard Editing"),f.Ub(),f.Vb(2,"p"),f.Oc(3," In this tutorial we'll cover how to provide the ability to edit widgets using the framework-provided widget editor. For now we'll stop short of implementing any customizations to the editor, but in a "),f.Vb(4,"a",0),f.Oc(5,"later step"),f.Ub(),f.Oc(6,", we'll go over how to customize parts of it to accommodate specific needs you may have.\n"),f.Ub(),f.Vb(7,"p"),f.Oc(8," We'll also go over how to enable/disable edit mode for the dashboard itself. When a dashboard is in edit mode, widgets can be moved around, resized, or removed.\n"),f.Ub(),f.Vb(9,"h2"),f.Oc(10,"Fundamental Concepts"),f.Ub(),f.Vb(11,"ul"),f.Vb(12,"li"),f.Vb(13,"a",1),f.Vb(14,"code"),f.Oc(15,"DashboardComponent"),f.Ub(),f.Ub(),f.Ub(),f.Vb(16,"li"),f.Vb(17,"a",2),f.Vb(18,"code"),f.Oc(19,"WidgetTypesService"),f.Ub(),f.Ub(),f.Ub(),f.Vb(20,"li"),f.Vb(21,"a",3),f.Vb(22,"code"),f.Oc(23,"nuiWidgetEditor"),f.Ub(),f.Ub(),f.Oc(24,"directive "),f.Ub(),f.Vb(25,"li"),f.Oc(26,"Widget configuration (including its associated data)"),f.Ub(),f.Vb(27,"li"),f.Oc(28,"Custom data source"),f.Ub(),f.Vb(29,"li"),f.Oc(30,"Dashboard edit mode"),f.Ub(),f.Ub(),f.Vb(31,"h2"),f.Oc(32,"Basic Steps"),f.Ub(),f.Vb(33,"ol"),f.Vb(34,"li"),f.Oc(35," Follow the instructions "),f.Vb(36,"a",4),f.Oc(37,"here"),f.Ub(),f.Oc(38," to set up your environment for dashboard development. "),f.Ub(),f.Vb(39,"li"),f.Oc(40," Follow the instructions from previous tutorials to get a basic dashboard up and running. "),f.Ub(),f.Vb(41,"li"),f.Oc(42," Ensure that the "),f.Vb(43,"code"),f.Oc(44,"NuiSwitchModule"),f.Ub(),f.Oc(45," and "),f.Vb(46,"code"),f.Oc(47,"NuiButtonModule"),f.Ub(),f.Oc(48," are included in the imports of the parent module. "),f.Vb(49,"nui-message",5),f.Vb(50,"strong"),f.Oc(51,"Note:"),f.Ub(),f.Oc(52," Importing these modules is required because the example uses Nova's switch and button components. "),f.Ub(),f.Ub(),f.Vb(53,"li"),f.Oc(54," In the "),f.Vb(55,"a",6),f.Oc(56," Adding a Data Source "),f.Ub(),f.Oc(57," tutorial, we created a single data source. But, for this step, let's create a second data source so that the dropdown options for selecting a data source will be populated with more than one option in the editor. As in the previous tutorial it's recommended to have each data source class in a different file. "),f.Vb(58,"nui-message",5),f.Vb(59,"strong"),f.Oc(60,"Note:"),f.Ub(),f.Oc(61," Don't forget to add "),f.Vb(62,"code"),f.Oc(63,"@Injectable()"),f.Ub(),f.Oc(64," to the top of the data source class. This lets Angular know that you plan on injecting dependencies into it. "),f.Ub(),f.Ub(),f.Vb(65,"li"),f.Oc(66," As before, register the data sources as a dynamically injectable providers using the "),f.Vb(67,"a",7),f.Vb(68,"code"),f.Oc(69,"ProviderRegistryService"),f.Ub(),f.Ub(),f.Oc(70,". "),f.Vb(71,"nui-message",8),f.Vb(72,"strong"),f.Oc(73,"Note:"),f.Ub(),f.Oc(74," When registering a class provider using the ProviderRegistryService, be sure to include in the "),f.Vb(75,"code"),f.Oc(76,"deps"),f.Ub(),f.Oc(77," array any dependencies that need to be injected into the provider. This is demonstrated in the example below. "),f.Ub(),f.Vb(78,"nui-message",5),f.Vb(79,"strong"),f.Oc(80,"Note:"),f.Ub(),f.Oc(81," In the example, "),f.Vb(82,"code"),f.Oc(83,"HttpClient"),f.Ub(),f.Oc(84," is injected into the data source class. This means you'll need to "),f.Vb(85,"a",9),f.Oc(86,"include the "),f.Vb(87,"code"),f.Oc(88,"HttpClientModule"),f.Ub(),f.Ub(),f.Oc(89," in the imports of the parent NgModule in order to successfully resolve that dependency. "),f.Ub(),f.Ub(),f.Vb(90,"li"),f.Oc(91," Use the "),f.Vb(92,"a",10),f.Vb(93,"code"),f.Oc(94,"widgetTypesService.setNode()"),f.Ub(),f.Ub(),f.Oc(95," method to register the data sources for the editor to allow users to choose which data source will be used by which KPI tile. In the Adding a Data Source tutorial, we didn't need to do this because we weren't using the editor. "),f.Vb(96,"nui-message",5),f.Vb(97,"strong"),f.Oc(98,"Note:"),f.Ub(),f.Oc(99," In the following example, we do this step in the component's ngOnInit, but widget template modifications such as this could also be done in the parent module's constructor thereby allowing multiple dashboard instances to have access to the same widget template change. "),f.Ub(),f.Ub(),f.Vb(100,"li"),f.Oc(101," In your template, add the "),f.Vb(102,"a",3),f.Vb(103,"code"),f.Oc(104,"nuiWidgetEditor"),f.Ub(),f.Ub(),f.Oc(105," directive which will allow the widgets to open the widget editor. "),f.Ub(),f.Vb(106,"li"),f.Oc(107," In your template, set the "),f.Vb(108,"a",11),f.Vb(109,"code"),f.Oc(110,"editMode"),f.Ub(),f.Ub(),f.Oc(111," input on the dashboard component. This input enables/disables the user's ability to remove, move, and resize widgets. "),f.Ub(),f.Vb(112,"li"),f.Oc(113," You should now be able to click the ellipsis button at the top right of the widget to open the widget editor. "),f.Ub(),f.Vb(114,"li"),f.Oc(115," Once the editor is open, expand the Data Source accordion for a KPI tile to change the data source used by the tile. "),f.Ub(),f.Vb(116,"li"),f.Oc(117," Click Save Changes and the widget's KPI tile will be updated to use the newly selected data source. "),f.Ub(),f.Ub(),f.Vb(118,"nui-message",5),f.Oc(119," For more detailed information about setting up the widget editor, take a look at the inline comments under the source expander of the following example.\n"),f.Ub(),f.Vb(120,"nui-example-wrapper",12),f.Qb(121,"widget-editor-setup"),f.Ub()),2&e&&(f.Db(49),f.uc("allowDismiss",!1),f.Db(9),f.uc("allowDismiss",!1),f.Db(13),f.uc("allowDismiss",!1),f.Db(7),f.uc("allowDismiss",!1),f.Db(18),f.uc("allowDismiss",!1),f.Db(22),f.uc("allowDismiss",!1))},directives:[p.y,p.l,R],encapsulation:2}),S),data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}},{path:"example",component:R,data:{srlc:{hideIndicator:!0}}}],M=((C=function e(){o(this,e)}).\u0275mod=f.Nb({type:C}),C.\u0275inj=f.Mb({factory:function(e){return new(e||C)},imports:[[b.c,l.c,g.N,p.F,p.M,p.Z,p.A,h.d.forChild(P)]]}),C)}}])}();