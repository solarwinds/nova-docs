!function(){var e,t,i,n,r,o;function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=u(e);if(t){var r=u(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d(this,i)}}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"M+S4":function(c,d,u){"use strict";var h,f;u.r(d),u.d(d,"WidgetCreationModule",function(){return G});var m=u("ofXK"),w=u("tk/3"),v=u("tyNb"),y=u("Rr1A"),O=u("gKry"),S=u("fXoL"),k=u("mrSG"),C=u("XNiG"),U=u("2Vo4"),V=u("IzEk"),I=u("1G5W"),W=u("nYR2"),j=u("sleA"),D=u("MJAs");function M(e,t){if(1&e&&(S.Vb(0,"div",3),S.Vb(1,"div",4),S.Oc(2),S.Ub(),S.Ub()),2&e){var i=t.item;S.Db(2),S.Pc(i.name)}}var R,P,T,x,_,z,A,N,F=".dashboard[_ngcontent-%COMP%]{height:800px}.nui-widget-cloner__item[_ngcontent-%COMP%]{height:60px}",E=((z=function(){function e(t){p(this,e),this.widgetTypesService=t,this.widgetSelected=new S.o,this.widgetItems=[]}return g(e,[{key:"ngOnInit",value:function(){this.widgetItems=[{name:"Fully Configured KPI Widget",widget:this.widgetTypesService.mergeWithWidgetType(Q)},{name:"Unconfigured Proportional Widget",widget:this.widgetTypesService.mergeWithWidgetType(B)}]}},{key:"onSelect",value:function(e){this.widgetSelected.emit(e[0].widget),this.widgetSelection=e}}]),e}()).\u0275fac=function(e){return new(e||z)(S.Pb(O.nb))},z.\u0275cmp=S.Jb({type:z,selectors:[["widget-template-selection"]],outputs:{widgetSelected:"widgetSelected"},decls:4,vars:3,consts:[[1,"nui-widget-cloner"],["selectionMode","singleWithRequiredSelection",3,"itemsSource","selection","repeatItemTemplateRef","selectionChange"],["widgetClonerItem",""],[1,"nui-widget-cloner__item","d-flex","pt-2","pb-2","align-items-center"],[1,"text-info","ml-3"]],template:function(e,t){if(1&e&&(S.Vb(0,"div",0),S.Vb(1,"nui-repeat",1),S.jc("selectionChange",function(e){return t.onSelect(e)}),S.Ub(),S.Ub(),S.Mc(2,M,3,1,"ng-template",null,2,S.Nc)),2&e){var i=S.Dc(3);S.Db(1),S.uc("itemsSource",t.widgetItems)("selection",t.widgetSelection)("repeatItemTemplateRef",i)}},directives:[y.tb],styles:[F]}),z),K=((_=function r(o){var a=this;p(this,r),this.toastService=o,this.persistenceSucceeded=!0,this.trySubmit=function(i){var n=new C.a;return i.id||(i.id=Object(y.ic)()),setTimeout(function(){if(a.persistenceSucceeded)n.next(i),a.toastService.success({title:$localize(e||(e=b(["Submit succeeded."])))});else{var r=$localize(t||(t=b(["Submit failed."])));a.toastService.error({title:r}),n.error(r)}n.complete()},1e3),n.asObservable()},this.tryRemove=function(e){var t=new C.a;return setTimeout(function(){if(a.persistenceSucceeded)t.next(e),a.toastService.success({title:$localize(i||(i=b(["Removal success"])))});else{var r=$localize(n||(n=b(["Removal failed."])));a.toastService.error({title:r}),t.error(r)}t.complete()},1e3),t.asObservable()},this.toastService.setConfig({timeOut:2e3})}).\u0275fac=function(e){return new(e||_)(S.fc(y.Yb))},_.\u0275prov=S.Lb({token:_,factory:_.\u0275fac}),_),J=((x=function(){function e(t,i,n,r){p(this,e),this.widgetTypesService=t,this.providerRegistry=i,this.persistenceHandler=n,this.widgetClonerService=r,this.gridsterConfig={defaultItemCols:3,defaultItemRows:5},this.editMode=!1,this.destroy$=new C.a}return g(e,[{key:"ngOnInit",value:function(){var e,t=this.widgetTypesService.getWidgetType("kpi",1),i=this.widgetTypesService.getWidgetType("proportional",1);this.widgetTypesService.setNode(i,"configurator",O.jb.DataSourceProviders,[L.providerId]),this.widgetTypesService.setNode(t,"configurator",O.jb.DataSourceProviders,[$.providerId,q.providerId]),this.providerRegistry.setProviders((l(e={},$.providerId,{provide:O.b,useClass:$,deps:[w.b]}),l(e,q.providerId,{provide:O.b,useClass:q,deps:[w.b]}),l(e,L.providerId,{provide:O.b,useClass:L,deps:[]}),e)),this.initializeDashboard()}},{key:"onCreateWidget",value:function(){this.widgetClonerService.open({dashboardComponent:this.dashboardComponent,trySubmit:this.persistenceHandler.trySubmit,widgetSelectionComponentType:E}).pipe(Object(V.a)(1),Object(I.a)(this.destroy$)).subscribe()}},{key:"initializeDashboard",value:function(){var e=Q,t=l({},e.id,this.widgetTypesService.mergeWithWidgetType(e));this.dashboard={positions:l({},e.id,{cols:3,rows:5,y:0,x:0}),widgets:t}}}]),e}()).\u0275fac=function(e){return new(e||x)(S.Pb(O.nb),S.Pb(O.V),S.Pb(K),S.Pb(O.lb))},x.\u0275cmp=S.Jb({type:x,selectors:[["widget-creation"]],viewQuery:function(e,t){var i;1&e&&S.Sc(O.k,3),2&e&&S.Cc(i=S.kc())&&(t.dashboardComponent=i.first)},features:[S.Cb([K])],decls:7,vars:5,consts:function(){return[[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"value","valueChange"],$localize(r||(r=b([":\u241f8c375764db42f5d736fb56d01b8052c006ccc8e2\u241f6407712033679505505:Edit Mode"]))),["type","button","nui-button","",1,"ml-4",3,"click"],$localize(o||(o=b([":\u241f1af9862ac515933a9a72e92970c3e92bda63f6e8\u241f8076137290276236439:Create Widget"]))),[1,"w-100","dashboard"],[3,"dashboard","gridsterConfig","editMode","nuiWidgetEditor","dashboardChange","gridsterConfigChange"]]},template:function(e,t){1&e&&(S.Vb(0,"div",0),S.Vb(1,"nui-switch",1),S.jc("valueChange",function(e){return t.editMode=e}),S.Zb(2,2),S.Ub(),S.Vb(3,"button",3),S.jc("click",function(){return t.onCreateWidget()}),S.Zb(4,4),S.Ub(),S.Ub(),S.Vb(5,"div",5),S.Vb(6,"nui-dashboard",6),S.jc("dashboardChange",function(e){return t.dashboard=e})("gridsterConfigChange",function(e){return t.gridsterConfig=e}),S.Ub(),S.Ub()),2&e&&(S.Db(1),S.uc("value",t.editMode),S.Db(5),S.uc("dashboard",t.dashboard)("gridsterConfig",t.gridsterConfig)("editMode",t.editMode)("nuiWidgetEditor",t.persistenceHandler))},directives:[y.Fb,y.b,j.a,D.a],styles:[F]}),x),L=((T=function(){function e(){p(this,e),this.outputsSubject=new C.a}return g(e,[{key:"applyFilters",value:function(){var e=this;setTimeout(function(){e.outputsSubject.next({result:e.getRandomProportionalWidgetData()})},1e3)}},{key:"ngOnDestroy",value:function(){this.outputsSubject.complete()}},{key:"getRandomProportionalWidgetData",value:function(){return[{id:"Down",name:"Down",data:[Math.round(100*Math.random())],icon:"status_down",link:"https://en.wikipedia.org/wiki/Brno",value:"Brno"},{id:"Critical",name:"Critical",data:[Math.round(100*Math.random())],icon:"status_critical",link:"https://en.wikipedia.org/wiki/Kyiv",value:"Kyiv"},{id:"Warning",name:"Warning",data:[Math.round(100*Math.random())],icon:"status_warning",link:"https://en.wikipedia.org/wiki/Austin",value:"Austin"},{id:"Unknown",name:"Unknown",data:[Math.round(100*Math.random())],icon:"status_unknown",link:"https://en.wikipedia.org/wiki/Lisbon",value:"Lisbon"},{id:"Up",name:"Up",data:[Math.round(100*Math.random())],icon:"status_up",link:"https://en.wikipedia.org/wiki/Sydney",value:"Sydney"},{id:"Unmanaged",name:"Unmanaged",data:[Math.round(100*Math.random())],icon:"status_unmanaged",link:"https://en.wikipedia.org/wiki/Nur-Sultan",value:"Nur-Sultan"}]}}]),e}()).providerId="RandomCitiesProportionalDataSource",T.\u0275fac=function(e){return new(e||T)},T.\u0275prov=S.Lb({token:T,factory:T.\u0275fac}),T),$=((P=function(e){a(i,e);var t=s(i);function i(e){var n;return p(this,i),(n=t.call(this)).http=e,n.busy=new U.a(!1),n}return g(i,[{key:"getFilteredData",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.busy.next(!0),new Promise(function(e){t.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(Object(W.a)(function(){return t.busy.next(!1)})).subscribe({next:function(t){e({result:{value:t.volumeInfo.averageRating}})},error:function(t){e({result:null,error:{type:t.status}})}})})));case 1:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){this.outputsSubject.complete()}}]),i}(y.g)).providerId="AverageRatingKpiDataSource",P.\u0275fac=function(e){return new(e||P)(S.fc(w.b))},P.\u0275prov=S.Lb({token:P,factory:P.\u0275fac}),P),q=((R=function(e){a(i,e);var t=s(i);function i(e){var n;return p(this,i),(n=t.call(this)).http=e,n.busy=new U.a(!1),n}return g(i,[{key:"getFilteredData",value:function(){return Object(k.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.busy.next(!0),new Promise(function(e){t.http.get("https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ").pipe(Object(W.a)(function(){return t.busy.next(!1)})).subscribe({next:function(t){e({result:{value:t.volumeInfo.ratingsCount}})},error:function(t){e({result:null,error:{type:t.status}})}})})));case 1:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){this.outputsSubject.complete()}}]),i}(y.g)).providerId="RatingsCountKpiDataSource",R.\u0275fac=function(e){return new(e||R)(S.fc(w.b))},R.\u0275prov=S.Lb({token:R,factory:R.\u0275fac}),R),Q={id:"widget1",type:"kpi",pizzagna:l({},O.Q.Configuration,(f={},l(f,O.g,{providers:l({},O.kb.Refresher,{properties:{interval:600,enabled:!0}})}),l(f,"header",{properties:{title:"Harry Potter and the Sorcerer's Stone",subtitle:"By J. K. Rowling"}}),l(f,"tiles",{properties:{nodes:["kpi1"]}}),l(f,"kpi1",{id:"kpi1",componentType:O.z.lateLoadKey,properties:{widgetData:{units:"out of 5 Stars",label:"Average Rating"}},providers:(h={},l(h,O.kb.DataSource,{providerId:$.providerId}),l(h,O.kb.Adapter,{providerId:O.I,properties:{componentId:"kpi1",propertyPath:"widgetData"}}),h)}),f))},B={id:"widget2",type:"proportional",metadata:{needsConfiguration:!0},pizzagna:l({},O.Q.Configuration,{header:{properties:{title:"*New Proportional Widget*"}}})},H=[{path:"",component:(A=function e(){p(this,e)},A.\u0275fac=function(e){return new(e||A)},A.\u0275cmp=S.Jb({type:A,selectors:[["nui-dashboard-widget-creation-docs"]],decls:87,vars:3,consts:[["href","../injectables/ProviderRegistryService.html","target","_blank"],["href","../injectables/WidgetClonerService.html","target","_blank"],["href","../additional-documentation/getting-started.html","target","_parent"],["href","../interfaces/IWidgetTemplateSelector.html","target","_blank"],["href","../interfaces/IWidgetMetadata.html#needsConfiguration","target","_blank"],["type","info",3,"allowDismiss"],["href","../interfaces/IWidgetSelector.html","target","_blank"],["href","../injectables/WidgetClonerService.html#open","target","_blank"],["filenamePrefix","widget-creation.component","exampleTitle","Widget Creation"]],template:function(e,t){1&e&&(S.Vb(0,"h1"),S.Oc(1,"Widget Creation"),S.Ub(),S.Vb(2,"p"),S.Oc(3," In this tutorial we'll cover how to add a widget creation wizard which allows end-users to create new widget instances based on existing widget configurations. The wizard's first step, or page, will use a custom component that lets users choose a widget to create. In the example below we'll implement a sample widget selection component that provides a proportional widget and a kpi widget as options.\n"),S.Ub(),S.Vb(4,"h2"),S.Oc(5,"Fundamental Concepts"),S.Ub(),S.Vb(6,"ul"),S.Vb(7,"li"),S.Vb(8,"a",0),S.Vb(9,"code"),S.Oc(10,"ProviderRegistryService"),S.Ub(),S.Ub(),S.Ub(),S.Vb(11,"li"),S.Vb(12,"a",1),S.Vb(13,"code"),S.Oc(14,"WidgetClonerService"),S.Ub(),S.Ub(),S.Ub(),S.Vb(15,"li"),S.Oc(16,"Widget configurations"),S.Ub(),S.Vb(17,"li"),S.Oc(18,"Custom component for widget selection"),S.Ub(),S.Ub(),S.Vb(19,"h2"),S.Oc(20,"Basic Steps"),S.Ub(),S.Vb(21,"ol"),S.Vb(22,"li"),S.Oc(23," Follow the instructions "),S.Vb(24,"a",2),S.Oc(25,"here"),S.Ub(),S.Oc(26," to set up your environment for dashboard development. "),S.Ub(),S.Vb(27,"li"),S.Oc(28," Follow the instructions from previous tutorials to get a basic dashboard up and running. "),S.Ub(),S.Vb(29,"li"),S.Oc(30," Create a widget template selector component which will act as the first step in the wizard. The selector component should implement the "),S.Vb(31,"a",3),S.Vb(32,"code"),S.Oc(33,"IWidgetTemplateSelector"),S.Ub(),S.Ub(),S.Oc(34," interface which requires a widgetSelected output that should emit a widget to be cloned. For any widgets that require further configuration before they should be placed on the dashboard, set the widget's "),S.Vb(35,"code"),S.Vb(36,"a",4),S.Oc(37,"metadata.needsConfiguration"),S.Ub(),S.Ub(),S.Oc(38," property to "),S.Vb(39,"code"),S.Oc(40,"true"),S.Ub(),S.Oc(41,'. This will hide the "Create Widget" button whenever an unconfigured widget is selected. '),S.Vb(42,"nui-message",5),S.Vb(43,"strong"),S.Oc(44,"Note:"),S.Ub(),S.Oc(45," In the example below, the widget selector is implemented in the same file as the dashboard component, but it's recommended to define it in a separate file. Additionally, after implementing it, remember to add it to your module declarations. "),S.Ub(),S.Ub(),S.Vb(46,"li"),S.Oc(47," Ensure that "),S.Vb(48,"code"),S.Oc(49,"NuiRepeatModule"),S.Ub(),S.Oc(50," and "),S.Vb(51,"code"),S.Oc(52,"NuiImageModule"),S.Ub(),S.Oc(53," are included in the imports of the widget template selector component's parent module. "),S.Vb(54,"nui-message",5),S.Vb(55,"strong"),S.Oc(56,"Note:"),S.Ub(),S.Oc(57," Importing these modules is required in this example because, in this case, the widget template selector uses the Nova repeat component and a couple of images from the Nova image repository. "),S.Ub(),S.Ub(),S.Vb(58,"li"),S.Oc(59," Invoke the "),S.Vb(60,"code"),S.Oc(61,"open"),S.Ub(),S.Oc(62," method on the "),S.Vb(63,"a",1),S.Vb(64,"code"),S.Oc(65,"WidgetClonerService"),S.Ub(),S.Ub(),S.Oc(66," with an argument of type "),S.Vb(67,"a",6),S.Vb(68,"code"),S.Oc(69,"IWidgetSelector"),S.Ub(),S.Ub(),S.Oc(70,". Only two things are required in that object: a reference to the dashboardComponent instance and the typename of the widget selector created in the previous step. Optionally, the argument object may also contain a "),S.Vb(71,"code"),S.Oc(72,"trySubmit"),S.Ub(),S.Oc(73," function with logic for persisting the new widget on a backend. "),S.Ub(),S.Vb(74,"li"),S.Oc(75," Subscribe to the "),S.Vb(76,"code"),S.Oc(77,"Observable"),S.Ub(),S.Oc(78," returned by the "),S.Vb(79,"a",7),S.Vb(80,"code"),S.Oc(81,"widgetClonerService.open"),S.Ub(),S.Ub(),S.Oc(82," method in order to activate the handling of form submission and the subsequent updating of the dashboard with a newly created widget. "),S.Ub(),S.Ub(),S.Vb(83,"nui-message",5),S.Oc(84," For more detailed information about widget creation, take a look at the inline comments under the source expander of the following example.\n"),S.Ub(),S.Vb(85,"nui-example-wrapper",8),S.Qb(86,"widget-creation"),S.Ub()),2&e&&(S.Db(42),S.uc("allowDismiss",!1),S.Db(12),S.uc("allowDismiss",!1),S.Db(29),S.uc("allowDismiss",!1))},directives:[y.y,y.l,J],encapsulation:2}),A),data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}},{path:"example",component:J,data:{srlc:{hideIndicator:!0}}}],G=((N=function e(){p(this,e)}).\u0275mod=S.Nb({type:N}),N.\u0275inj=S.Mb({factory:function(e){return new(e||N)},imports:[[m.c,w.c,O.N,y.F,y.M,y.Z,y.eb,y.A,y.T,y.K,v.d.forChild(H)]]}),N)}}])}();