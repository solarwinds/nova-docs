(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{XMBJ:function(e,t,i){"use strict";i.r(t),i.d(t,"TableWidgetPrototypeModule",function(){return O});var r=i("ofXK"),o=i("tk/3"),a=i("tyNb"),n=i("Rr1A"),s=i("gKry"),d=i("AgrY"),c=i("RBoe"),l=i("HNto"),p=i("A//S"),u=i("UJ+P"),b=i("U9RZ"),g=i("tghU"),h=i("k2eP"),m=i("rWRh"),v=i("QVEU"),f=i.n(v),w=i("XNiG"),y=i("IzEk"),S=i("1G5W"),C=i("fXoL"),I=i("BkRI"),W=i.n(I),T=i("D1y2"),D=i.n(T),k=i("wd/R"),L=i.n(k);const z={widget1:{cols:5,rows:6,y:0,x:0},widget2:{cols:7,rows:6,y:0,x:5},widget3:{cols:6,rows:6,y:6,x:0},widget4:{cols:6,rows:6,y:6,x:6},widget5:{cols:7,rows:6,y:12,x:5},widget6:{cols:5,rows:6,y:12,x:0},widget7:{cols:6,rows:6,y:18,x:0},widget8:{cols:6,rows:6,y:18,x:6}},P=[{id:"widget1",type:"table",pizzagna:{[s.Q.Configuration]:{[s.g]:{providers:{[s.kb.InteractionHandler]:{providerId:s.L}}},header:{properties:{title:"Table Widget!",subtitle:"Basic table widget",collapsible:!0}},table:{providers:{[s.kb.DataSource]:{providerId:h.a.providerId}},properties:{configuration:{interactive:!0,columns:[{id:"column1",label:"No.",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Status",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"status"}}}}],sorterConfiguration:{descendantSorting:!1,sortBy:"column1"},hasVirtualScroll:!0,searchConfiguration:{enabled:!0}}}}}}},{id:"widget2",type:"proportional",pizzagna:{[s.Q.Configuration]:{[s.g]:{providers:{[s.kb.InteractionHandler]:{providerId:s.L,properties:{url:"${data.link}"}}}},header:{properties:{title:"Proportional Widget!",subtitle:"Proportional widget with legend formatters"}},chart:{providers:{[s.kb.DataSource]:{providerId:l.a.providerId},[s.kb.Adapter]:{properties:{[s.kb.DataSource]:{properties:{isEuropeOnly:!1}}}}},properties:{configuration:{interactive:!0,chartDonutContentLabel:"Some label",chartDonutContentIcon:"printer",chartOptions:{type:s.U.VerticalBarChart,legendPlacement:s.B.Right},chartColors:["var(--nui-color-chart-eight)","var(--nui-color-chart-nine)","var(--nui-color-chart-ten)"]}}}}}},{id:"widget3",type:"timeseries",pizzagna:{[s.Q.Configuration]:{[s.g]:{providers:{[s.kb.DataSource]:{providerId:m.a.providerId},[s.kb.InteractionHandler]:{providerId:s.L}}},header:{properties:{title:"Timeseries Widget!",subtitle:"Basic timeseries widget"}},chart:{providers:{[s.kb.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:s.B.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",chartColors:["var(--nui-color-chart-eight)","var(--nui-color-chart-nine)","var(--nui-color-chart-ten)"]}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},minDate:L()().subtract(10,"days").format(),maxDate:L()().format()}}}}},{id:"widget4",type:"table",pizzagna:{[s.Q.Configuration]:{[s.g]:{providers:{[s.kb.InteractionHandler]:{providerId:s.L}}},header:{properties:{title:"Table Widget!",subtitle:"Basic table widget",collapsible:!0}},table:{providers:{[s.kb.DataSource]:{providerId:h.a.providerId}},properties:{configuration:{interactive:!0,columns:[{id:"column1",label:"No.",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Status",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"status"}}}}],sorterConfiguration:{descendantSorting:!1,sortBy:"column1"},hasVirtualScroll:!0,searchConfiguration:{enabled:!0}}}}}}},{id:"widget5",type:"proportional",pizzagna:{[s.Q.Configuration]:{[s.g]:{providers:{[s.kb.InteractionHandler]:{providerId:s.L,properties:{url:"${data.link}"}}}},header:{properties:{title:"Proportional Widget!",subtitle:"Proportional widget with legend formatters"}},chart:{providers:{[s.kb.DataSource]:{providerId:l.a.providerId},[s.kb.Adapter]:{properties:{[s.kb.DataSource]:{properties:{isEuropeOnly:!1}}}}},properties:{configuration:{interactive:!0,chartDonutContentLabel:"Some label",chartDonutContentIcon:"printer",chartOptions:{type:s.U.VerticalBarChart,legendPlacement:s.B.Right},chartColors:["var(--nui-color-chart-eight)","var(--nui-color-chart-nine)","var(--nui-color-chart-ten)"]}}}}}},{id:"widget6",type:"table",pizzagna:{[s.Q.Configuration]:{[s.g]:{providers:{[s.kb.InteractionHandler]:{providerId:s.L}}},header:{properties:{title:"Table Widget!",subtitle:"Basic table widget",collapsible:!0}},table:{providers:{[s.kb.DataSource]:{providerId:h.a.providerId}},properties:{configuration:{interactive:!0,columns:[{id:"column1",label:"No.",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Status",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"status"}}}}],sorterConfiguration:{descendantSorting:!1,sortBy:"column1"},hasVirtualScroll:!0,searchConfiguration:{enabled:!0}}}}}}},{id:"widget7",type:"timeseries",pizzagna:{[s.Q.Configuration]:{[s.g]:{providers:{[s.kb.DataSource]:{providerId:m.a.providerId},[s.kb.InteractionHandler]:{providerId:s.L}}},header:{properties:{title:"Timeseries Widget!",subtitle:"Basic timeseries widget"}},chart:{providers:{[s.kb.Adapter]:{properties:{series:[{id:"series-2",label:"Average CPU Load",selectedSeriesId:"series-2"}]}}},properties:{configuration:{legendPlacement:s.B.Right,enableZoom:!0,leftAxisLabel:"Utilization (%)",chartColors:["var(--nui-color-chart-eight)","var(--nui-color-chart-nine)","var(--nui-color-chart-ten)"]}}},timeframeSelection:{properties:{timeframe:{selectedPresetId:"last7Days"},minDate:L()().subtract(10,"days").format(),maxDate:L()().format()}}}}},{id:"widget8",type:"table",pizzagna:{[s.Q.Configuration]:{[s.g]:{providers:{[s.kb.InteractionHandler]:{providerId:s.L}}},header:{properties:{title:"Table Widget!",subtitle:"Basic table widget",collapsible:!0}},table:{providers:{[s.kb.DataSource]:{providerId:h.a.providerId}},properties:{configuration:{interactive:!0,columns:[{id:"column1",label:"No.",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"position"}}}},{id:"column2",label:"Name",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"name"}}}},{id:"column3",label:"Status",isActive:!0,formatter:{componentType:s.W.lateLoadKey,properties:{dataFieldIds:{value:"status"}}}}],sorterConfiguration:{descendantSorting:!1,sortBy:"column1"},hasVirtualScroll:!0,searchConfiguration:{enabled:!0}}}}}}}];function U(e,t){if(1&e&&(C.Vb(0,"div",3),C.Vb(1,"div",4),C.Oc(2),C.Ub(),C.Ub()),2&e){const e=t.item;C.Db(2),C.Qc(" ",e.title," ")}}let A=(()=>{class e{constructor(e){this.widgetTypesService=e,this.widgetSelected=new C.o,this.widgetItems=[]}ngOnInit(){const e=new r.x;this.widgetItems=P.map(t=>({title:e.transform(t.type),widget:this.widgetTypesService.mergeWithWidgetType(t)})),P.forEach(e=>{this.addUnconfiguredWidgetWithConfigLayer(e)})}addUnconfiguredWidget(e){const t=(new r.x).transform(e);this.widgetItems.push({title:`Unconfigured ${t}`,widget:{id:`unconfigured${t}`,type:e,metadata:{needsConfiguration:!0},pizzagna:W()(this.widgetTypesService.getWidgetType(e).widget)}}),D()(this.widgetItems[this.widgetItems.length-1].widget.pizzagna,`${s.Q.Structure}.header.properties.title`,`Unconfigured ${t}`)}addUnconfiguredWidgetWithConfigLayer(e){const t=(new r.x).transform(e.type);this.widgetItems.push({title:`Unconfigured ${t} With Config Layer`,widget:Object.assign(Object.assign({},W()(this.widgetTypesService.mergeWithWidgetType(e))),{id:`unconfiguredWithConfigLayer${t}`,metadata:{needsConfiguration:!0}})}),D()(this.widgetItems[this.widgetItems.length-1].widget.pizzagna,`${s.Q.Configuration}.header.properties.title`,`Unconfigured ${t} With Config Layer`)}onSelect(e){this.widgetSelected.emit(e[0].widget),this.widgetSelection=e}}return e.lateLoadKey="AcmeCloneSelectionComponent",e.\u0275fac=function(t){return new(t||e)(C.Pb(s.nb))},e.\u0275cmp=C.Jb({type:e,selectors:[["acme-clone-selection"]],outputs:{widgetSelected:"widgetSelected"},decls:4,vars:3,consts:[[1,"nui-widget-cloner"],["selectionMode","singleWithRequiredSelection",3,"itemsSource","selection","repeatItemTemplateRef","selectionChange"],["widgetClonerItem",""],[1,"nui-widget-cloner__item","d-flex","pt-2","pb-2","align-items-center"],[1,"text-info","ml-3"]],template:function(e,t){if(1&e&&(C.Vb(0,"div",0),C.Vb(1,"nui-repeat",1),C.jc("selectionChange",function(e){return t.onSelect(e)}),C.Ub(),C.Ub(),C.Mc(2,U,3,1,"ng-template",null,2,C.Nc)),2&e){const e=C.Dc(3);C.Db(1),C.uc("itemsSource",t.widgetItems)("selection",t.widgetSelection)("repeatItemTemplateRef",e)}},directives:[n.tb],styles:[".nui-widget-cloner__item[_ngcontent-%COMP%]{height:60px}"]}),e})();function x(e,t){if(1&e&&(C.Vb(0,"div",3),C.Vb(1,"div",4),C.Oc(2),C.Ub(),C.Ub()),2&e){const e=t.item;C.Db(2),C.Qc(" ",e.title," ")}}let V=(()=>{class e extends A{constructor(e){super(e)}ngOnInit(){const e=new r.x;this.widgetItems=P.map(t=>({title:e.transform(t.type),widget:this.widgetTypesService.mergeWithWidgetType(t)}))}}return e.lateLoadKey="AcmeCloneSelectionComponent",e.\u0275fac=function(t){return new(t||e)(C.Pb(s.nb))},e.\u0275cmp=C.Jb({type:e,selectors:[["acme-clone-selection"]],features:[C.Ab],decls:4,vars:3,consts:[[1,"nui-widget-cloner"],["selectionMode","singleWithRequiredSelection",3,"itemsSource","selection","repeatItemTemplateRef","selectionChange"],["widgetClonerItem",""],[1,"nui-widget-cloner__item","d-flex","pt-2","pb-2","align-items-center"],[1,"text-info","ml-3"]],template:function(e,t){if(1&e&&(C.Vb(0,"div",0),C.Vb(1,"nui-repeat",1),C.jc("selectionChange",function(e){return t.onSelect(e)}),C.Ub(),C.Ub(),C.Mc(2,x,3,1,"ng-template",null,2,C.Nc)),2&e){const e=C.Dc(3);C.Db(1),C.uc("itemsSource",t.widgetItems)("selection",t.widgetSelection)("repeatItemTemplateRef",e)}},directives:[n.tb],styles:[".nui-widget-cloner__item[_ngcontent-%COMP%]{height:60px}"]}),e})(),R=(()=>{class e{constructor(e){this.toastService=e,this.allowSubmit=!0,this.allowRemoval=!0,this.trySubmit=(e,t)=>{const i=new w.a;return setTimeout(()=>{if(this.allowSubmit)i.next(e);else{const e=$localize`Submit failed.`;this.toastService.error({title:e}),i.error(e)}},1e3),i.asObservable()},this.tryRemove=e=>{const t=new w.a;return setTimeout(()=>{if(this.allowRemoval)t.next(e);else{const e=$localize`Widget removal failed.`;this.toastService.error({title:e}),t.error(e)}},200),t.asObservable()},this.toastService.setConfig({timeOut:2e3})}}return e.\u0275fac=function(t){return new(t||e)(C.fc(n.Yb))},e.\u0275prov=C.Lb({token:e,factory:e.\u0275fac}),e})();var $=i("sleA"),B=i("MJAs");const j=[{path:"",component:(()=>{class e{constructor(e,t,i,r){this.providerRegistry=e,this.submitHandler=t,this.widgetTypesService=i,this.widgetClonerService=r,this.dashboard={positions:{},widgets:{}},this.gridsterConfig={minCols:12,maxCols:12,minRows:12},this.editMode=!1,this.destroy$=new w.a,this.providerRegistry.setProviders({[c.a.providerId]:{provide:s.b,useClass:c.a,deps:[o.b]},[c.b.providerId]:{provide:s.b,useClass:c.b,deps:[o.b]},[c.c.providerId]:{provide:s.b,useClass:c.c,deps:[]},[l.a.providerId]:{provide:s.b,useClass:l.a,deps:[o.b]},[l.b.providerId]:{provide:s.b,useClass:l.b,deps:[]},[p.a.providerId]:{provide:s.b,useClass:p.a,deps:[n.v,o.b]},[u.a.providerId]:{provide:s.b,useClass:u.a,deps:[n.v]},[b.a.providerId]:{provide:s.b,useClass:b.a,deps:[n.v]},[h.a.providerId]:{provide:s.b,useClass:h.a,deps:[n.wb]},[m.a.providerId]:{provide:s.b,useClass:m.a,deps:[o.b]},[m.b.providerId]:{provide:s.b,useClass:m.b,deps:[]},[g.a.providerId]:{provide:s.b,useClass:g.a,deps:[n.v,o.b]}})}ngOnInit(){var e,t;null===(t=null===(e=this.widgetTypesService.getWidgetType("table").configurator)||void 0===e?void 0:e[s.Q.Structure].presentation.properties)||void 0===t||t.nodes.push("refresher");const i=P.map(e=>this.widgetTypesService.mergeWithWidgetType(e)),r=f()(i,e=>e.id);this.dashboard={positions:z,widgets:r}}onDsErrorSwitch(e){l.a.mockError=e,c.a.mockError=e,c.b.mockError=e,p.a.mockError=e,m.a.mockError=e}onShowButtonSwitch(e,t){for(const i of Object.keys(this.dashboard.widgets))this.dashboard=Object(n.fc)(this.dashboard,`widgets.${i}.pizzagna.configuration.header.properties.${t}`,e)}ngAfterViewInit(){this.dashboardComponent.eventBus.subscribeUntil(s.fb,this.destroy$,e=>{this.widgetClonerService.open({widget:this.dashboard.widgets[e.widgetId],dashboardComponent:this.dashboardComponent,trySubmit:this.submitHandler.trySubmit,widgetSelectionComponentType:V}).pipe(Object(y.a)(1),Object(S.a)(this.destroy$)).subscribe()})}onCloneWidget(){this.widgetClonerService.open({dashboardComponent:this.dashboardComponent,trySubmit:this.submitHandler.trySubmit,widgetSelectionComponentType:A}).pipe(Object(y.a)(1),Object(S.a)(this.destroy$)).subscribe()}onEditWithCloner(){this.dashboardComponent.eventBus.next(s.fb,{widgetId:P[0].id})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(C.Pb(s.V),C.Pb(R),C.Pb(s.nb),C.Pb(s.lb))},e.\u0275cmp=C.Jb({type:e,selectors:[["acme-dashboard"]],viewQuery:function(e,t){if(1&e&&C.Sc(s.k,3),2&e){let e;C.Cc(e=C.kc())&&(t.dashboardComponent=e.first)}},features:[C.Cb([R])],decls:19,vars:9,consts:function(){let e,t,i,r,o,a,n,s;return e=$localize`:␟08a1b409eac8269dd4dce8a2b3bd976356ba40ee␟7260316479095556147:Create Widget Clone`,t=$localize`:␟4e17d1961186f54a679f7623cd03e5c49c411f65␟639090956363340116:Simulate edit with cloner`,i=$localize`:␟c0390f914462a77b0ab8e053abf7c77af5b1da81␟6640158718767573444: Edit mode `,r=$localize`:␟db70aaa4da7a9f7c0fa3a218907f9fa354a19038␟5855643886473775120: Allow Submit `,o=$localize`:␟d289dfdc6c4e23b49a96db083f95f1087ed1400a␟3687117978364204872: Allow Removal `,a=$localize`:␟3299af3b186d7701f4c0626e41eba58af8382723␟4106211393112768148: Show Edit Button `,n=$localize`:␟30251ad3dcd7facd3a222d48fb2ba02f8503c52c␟8096484277280346189: Show Remove Button `,s=$localize`:␟c355f0feb3f72b3594e6e975456cd0a2dac1d929␟870224976565315483: Data Source Error `,[["type","button","nui-button","",1,"mb-3","ml-4",3,"click"],e,t,[1,"w-100",2,"height","725px"],[3,"nuiWidgetEditor","dashboard","gridsterConfig","editMode","dashboardChange","gridsterConfigChange"],[1,"my-3","d-flex","align-items-center"],[1,"ml-3",3,"value","valueChange"],i,r,o,a,n,[1,"ml-3",3,"valueChange"],s]},template:function(e,t){1&e&&(C.Vb(0,"button",0),C.jc("click",function(){return t.onCloneWidget()}),C.Zb(1,1),C.Ub(),C.Vb(2,"button",0),C.jc("click",function(){return t.onEditWithCloner()}),C.Zb(3,2),C.Ub(),C.Vb(4,"div",3),C.Vb(5,"nui-dashboard",4),C.jc("dashboardChange",function(e){return t.dashboard=e})("gridsterConfigChange",function(e){return t.gridsterConfig=e}),C.Ub(),C.Ub(),C.Vb(6,"div",5),C.Vb(7,"nui-switch",6),C.jc("valueChange",function(e){return t.editMode=e}),C.Zb(8,7),C.Ub(),C.Vb(9,"nui-switch",6),C.jc("valueChange",function(e){return t.submitHandler.allowSubmit=e}),C.Zb(10,8),C.Ub(),C.Vb(11,"nui-switch",6),C.jc("valueChange",function(e){return t.submitHandler.allowRemoval=e}),C.Zb(12,9),C.Ub(),C.Vb(13,"nui-switch",6),C.jc("valueChange",function(e){return t.onShowButtonSwitch(e,"editable")}),C.Zb(14,10),C.Ub(),C.Vb(15,"nui-switch",6),C.jc("valueChange",function(e){return t.onShowButtonSwitch(e,"removable")}),C.Zb(16,11),C.Ub(),C.Vb(17,"nui-switch",12),C.jc("valueChange",function(e){return t.onDsErrorSwitch(e)}),C.Zb(18,13),C.Ub(),C.Ub()),2&e&&(C.Db(5),C.uc("nuiWidgetEditor",t.submitHandler)("dashboard",t.dashboard)("gridsterConfig",t.gridsterConfig)("editMode",t.editMode),C.Db(2),C.uc("value",t.editMode),C.Db(2),C.uc("value",t.submitHandler.allowSubmit),C.Db(2),C.uc("value",t.submitHandler.allowRemoval),C.Db(2),C.uc("value",!0),C.Db(2),C.uc("value",!0))},directives:[n.b,$.a,B.a,n.Fb],styles:[".nui-theme-switcher-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;padding:10px;background-color:var(--nui-color-bg-light,#fff)}"]}),e})(),data:{srlc:{hideIndicator:!0},showThemeSwitcher:!0}}];let O=(()=>{class e{constructor(e,t){this.widgetTypesService=e,this.componentRegistry=t,this.setupDataSourceProviders(),this.setupCustomProportionalWidgetDSConfig()}setupCustomProportionalWidgetDSConfig(){var e;const t=this.widgetTypesService.getWidgetType("proportional",1);null===(e=t.widget.structure[s.g].providers)||void 0===e||delete e.refresher,this.widgetTypesService.setNode(t,"configurator",s.jb.DataSourceConfigComponentType,d.a.lateLoadKey),this.componentRegistry.registerByLateLoadKey(d.a)}setupDataSourceProviders(){this.setDataSourceProviders("table",[p.a.providerId,u.a.providerId,b.a.providerId,h.a.providerId,g.a.providerId]);const e=this.widgetTypesService.getWidgetType("kpi",1);this.widgetTypesService.setNode(e,"configurator",s.jb.DataSourceConfigComponentType,s.l.lateLoadKey),this.setDataSourceProviders("kpi",[{providerId:c.a.providerId,label:"Acme KPI Data Source 1"},{providerId:c.b.providerId,label:"Acme KPI Data Source 2",properties:{numberFormat:"1.1-1"}},{providerId:c.c.providerId,label:"Acme KPI Data Source 3"}]),this.setDataSourceProviders("proportional",[l.a.providerId,l.b.providerId]),this.setDataSourceProviders("timeseries",[m.a.providerId,m.b.providerId])}setDataSourceProviders(e,t){const i=this.widgetTypesService.getWidgetType(e,1);this.widgetTypesService.setNode(i,"configurator",s.jb.DataSourceProviders,t)}}return e.\u0275mod=C.Nb({type:e}),e.\u0275inj=C.Mb({factory:function(t){return new(t||e)(C.fc(s.nb),C.fc(s.a))},providers:[s.V],imports:[[r.c,o.c,s.N,n.z,n.A,n.F,n.Z,n.J,n.K,n.T,a.d.forChild(j)]]}),e})()}}]);