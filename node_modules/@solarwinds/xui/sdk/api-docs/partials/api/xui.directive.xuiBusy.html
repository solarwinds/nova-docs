<h1><code ng:non-bindable="">xuiBusy</code>
<div><span class="hint">directive in module <code ng:non-bindable="">xui</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="xui-directive-page xui-directive-xuibusy-page"><p>Component used for giving feedback to the user that a background task is executing.</p>
</div></div>
<h2 id="usage">Usage</h2>
<div class="usage">as attribute<pre class="prettyprint linenums">&lt;ANY xui-busy
     xui-busy="{expression}"
     [xui-busy-message="{string}"]
     [xui-allow-cancel="{boolean}"]
     [xui-busy-on-cancel="{expression}"]
     [xui-busy-show-progress="{boolean}"]
     [xui-busy-percent="{number}"]
     [xui-busy-help-text="{string}"]&gt;
   ...
&lt;/ANY&gt;</pre>
<h4 id="usage_parameters">Parameters</h4><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>xui-busy</td><td><a href="" class="label type-hint type-hint-expression">expression</a></td><td><div class="xui-directive-page xui-directive-xuibusy-page"><p>Toggles the indicator on and off.</p>
</div></td></tr><tr><td>xui-busy-message <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="xui-directive-page xui-directive-xuibusy-page"><p>A message to show to the user within the busy indicator.</p>
</div></td></tr><tr><td>xui-allow-cancel <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="xui-directive-page xui-directive-xuibusy-page"><p>Indicates whether the cancel button should be shown.</p>
</div></td></tr><tr><td>xui-busy-on-cancel <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-expression">expression</a></td><td><div class="xui-directive-page xui-directive-xuibusy-page"><p>Evaluated when the user wants to cancel the operation.
If this is not specified then the user is not presented
with an option to cancel.</p>
</div></td></tr><tr><td>xui-busy-show-progress <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="xui-directive-page xui-directive-xuibusy-page"><p>Indicates whether a progress bar should be displayed.</p>
</div></td></tr><tr><td>xui-busy-percent <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-number">number</a></td><td><div class="xui-directive-page xui-directive-xuibusy-page"><p>Value for progress completion.</p>
</div></td></tr><tr><td>xui-busy-help-text <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="xui-directive-page xui-directive-xuibusy-page"><p>Additional information displayed below the progress.</p>
</div></td></tr></tbody></table></div>
<h2 id="example">Example</h2>
<div class="example"><div class="xui-directive-page xui-directive-xuibusy-page"><h4 id="example_source">Source</h4>
<div source-edit="xui" source-edit-deps="angular.js app.js" source-edit-html="index.html-6" source-edit-css="" source-edit-js="app.js" source-edit-json="" source-edit-unit="" source-edit-scenario=""></div>
<div class="tabbable"><div class="tab-pane" title="index.html">
<pre class="prettyprint linenums" ng-set-text="index.html-6" ng-html-wrap-loaded="xui angular.js app.js"></pre>
<script type="text/ng-template" id="index.html-6"><link rel="stylesheet" type="text/css" href="http://localhost:8282/dist/css/xui.css">
<base href="/">
<div class="xui" id="xui-demo-components-button" ng-controller="DemoBusyController as vm">
    <div class="component-demo-card">
        <div class="example">
            <form>
                <div xui-busy="vm.isBusy"
                      xui-busy-message="{{ vm.busyMessage }}"
                      xui-allow-cancel="vm.showCancelButton"
                      xui-busy-on-cancel="vm.onCancel()">
                    <xui-textbox ng-model="vm.firstName" caption="First Name"></xui-textbox>
                    <xui-textbox ng-model="vm.lastName" caption="Last Name"></xui-textbox>
                    <xui-textbox ng-model="vm.email" caption="Email" type="email"></xui-textbox>
                    <xui-textbox ng-model="vm.phone" caption="Phone" type="phone"></xui-textbox>
                </div>
            </form>
            <xui-button display-style="primary" is-busy="vm.isBusy" ng-click="vm.save()">Save</xui-button>
            <xui-divider></xui-divider>
            <form>
                <div xui-busy="vm.isBusySavingNotes"
                     xui-busy-message="{{ vm.saveNotesMessage }}"
                     xui-allow-cancel="vm.showCancelButtonNotes"
                     xui-busy-on-cancel="vm.onCancelNotes()"
                     xui-busy-show-progress="{{vm.showProgress}}"
                     xui-busy-percent="{{vm.percent}}"
                     xui-busy-help-text="{{vm.helpText}}">
                    <xui-textbox ng-model="vm.notes" caption="Notes" rows="5"></xui-textbox>
                </div>
            </form>
            <xui-button display-style="primary" is-busy="vm.isBusySavingNotes" ng-click="vm.saveNotes()">Save With Progress</xui-button>
        </div>
    </div>
</div>
</script>
</div>
<div class="tab-pane" title="app.js">
<pre class="prettyprint linenums" ng-set-text="app.js"></pre>
<script type="text/ng-template" id="app.js">(function() {
    "use strict";

    Xui.module
        .controller("DemoBusyController", DemoBusyController, ["$timeout", "$interval", "xuiToastService"]);

    function DemoBusyController($timeout, $interval, toast) {
        var vm = this;
        var cancellation;

        // busy with no progress bar

        vm.isBusy = false;
        vm.isCancelling = false;
        vm.showCancelButton = true;

        vm.save = function() {
            vm.busyMessage = "We're loading something very heavy...";
            vm.isBusy = true;
            vm.showProgress = false;
            vm.showCancelButton = true;

            cancellation = $timeout(function() {
                toast.success("Save complete!");
                vm.isBusy = false;
            }, 5000);
        };

        vm.onCancel = function() {
            if (vm.isCancelling) return;

            $timeout.cancel(cancellation);
            vm.isCancelling = true;
            vm.busyMessage = "Cancelling...";

            vm.showCancelButton = false;
            $timeout(function() {
                toast.error("Save cancelled!");
                vm.isCancelling = vm.isBusy = false;
            }, 2000);
        };

        // busy with progress bar

        var cancellationNotes;
        vm.isBusySavingNotes = false;
        vm.isCancellingNotes = false;
        vm.showCancelButtonNotes = true;

        vm.saveNotes = function() {
            vm.saveNotesMessage = "We're saving lots of notes...";
            vm.isBusySavingNotes = true;
            vm.showCancelButtonNotes = true;
            vm.showProgress = true;
            vm.percent = 0;
            vm.helpText = "This won't take long...";

            cancellationNotes = $interval(vm.updateProgress, 500);
        };

        vm.updateProgress = function() {
            if (vm.percent < 110) {
                vm.percent += 10;
            } else {
                vm.isBusySavingNotes = false;
                vm.stopProgress();
                toast.success("Notes saved!");
            }
        };

        vm.stopProgress = function() {
            $interval.cancel(cancellationNotes);
            vm.percent = 0;
        };

        vm.onCancelNotes = function() {
            if (vm.isCancelling) return;

            vm.stopProgress();
            vm.isCancellingNotes = true;
            vm.saveNotesMessage = "Cancelling notes...";
            vm.helpText = "";

            vm.showCancelButtonNotes = false;
            vm.showProgress = false;
            $timeout(function() {
                toast.error("Save notes cancelled!");
                vm.isCancellingNotes = vm.isBusySavingNotes = false;
            }, 2000);
        };
    }
})();
</script>
</div>
</div><h4 id="example_demo">Demo</h4>
<div class="well doc-example-live animate-container" ng-embed-app="xui" ng-set-html="index.html-6" ng-eval-javascript="app.js"></div>
</div></div>
</div>
