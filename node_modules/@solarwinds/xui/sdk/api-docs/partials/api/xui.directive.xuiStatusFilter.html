<h1><code ng:non-bindable="">xuiStatusFilter</code>
<div><span class="hint">directive in module <code ng:non-bindable="">xui</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="xui-directive-page xui-directive-xuistatusfilter-page"><p>Element that provides objects collection filtration based on object&#39;s attribute.
Might be used with other components like xui-grid or xui-listview</p>
</div></div>
<h2 id="usage">Usage</h2>
<div class="usage">as element:<pre class="prettyprint linenums">&lt;xui-status-filter
       active-filters="{array}"
       filter-source="{IStatusFilter[]}"
       [filter-change="{function}"]&gt;
&lt;/xui-status-filter&gt;</pre>
<h4 id="usage_parameters">Parameters</h4><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>activeFilters</td><td><a href="" class="label type-hint type-hint-array">array</a></td><td><div class="xui-directive-page xui-directive-xuistatusfilter-page"><p>Array of activated filters&#39; names. Populates on filter&#39;s pane click.
Might be predefined from options.</p>
</div></td></tr><tr><td>filterSource</td><td><a href="" class="label type-hint type-hint-istatusfilter">IStatusFilter[]</a></td><td><div class="xui-directive-page xui-directive-xuistatusfilter-page"><p>Collection of available filters.</p>
</div><table><thead><tr><th>Property</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>name</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="xui-directive-page xui-directive-xuistatusfilter-page"><p>Name of the filter.</p>
</div></td></tr><tr><td>number</td><td><a href="" class="label type-hint type-hint-number">number</a></td><td><div class="xui-directive-page xui-directive-xuistatusfilter-page"><p>Number of items, which have current filter type</p>
</div></td></tr><tr><td>tooltip <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="xui-directive-page xui-directive-xuistatusfilter-page"><p>Tooltip which will appear above filter button</p>
</div></td></tr><tr><td>tooltipAppendToBody <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="xui-directive-page xui-directive-xuistatusfilter-page"><p>Appends the tooltip to &#39;$body&#39; instead of the parent element.</p>
</div></td></tr><tr><td>emphasize <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="xui-directive-page xui-directive-xuistatusfilter-page"><p>Emphasize color for active state of filter button.
Semantic colors available: <code>&quot;xui-color-unknown-border&quot; | &quot;xui-color-info-border&quot; | &quot;xui-color-ok-border&quot; |
&quot;xui-color-warning-border&quot; | &quot;xui-color-critical-border&quot; | &quot;xui-color-down-border&quot; | &quot;xui-color-unmanaged-border&quot; |
&quot;xui-color-unrecheable-border&quot; | &quot;xui-color-external-border&quot; | &quot;xui-color-shutdown-border&quot; |
&quot;xui-color-unplugged-border&quot;</code></p>
</div></td></tr><tr><td>icon <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="xui-directive-page xui-directive-xuistatusfilter-page"><p>Filter button icon. If not defined, name will be shown</p>
</div></td></tr></tbody></table></td></tr><tr><td>filterChange <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="xui-directive-page xui-directive-xuistatusfilter-page"><p>Evaluates on filter&#39;s pane click. Might be used for further items array filtration.</p>
</div></td></tr></tbody></table></div>
<h2 id="example">Example</h2>
<div class="example"><div class="xui-directive-page xui-directive-xuistatusfilter-page"><h4 id="example_source">Source</h4>
<div source-edit="xui" source-edit-deps="angular.js app.js" source-edit-html="index.html-71" source-edit-css="" source-edit-js="app.js" source-edit-json="" source-edit-unit="" source-edit-scenario=""></div>
<div class="tabbable"><div class="tab-pane" title="index.html">
<pre class="prettyprint linenums" ng-set-text="index.html-71" ng-html-wrap-loaded="xui angular.js app.js"></pre>
<script type="text/ng-template" id="index.html-71"><link rel="stylesheet" type="text/css" href="http://localhost:8282/dist/css/xui.css">
<base href="/">
<div ng-controller="DemoStatusFilterSimpleController as vm">
    <h3 id="example_basic">Basic</h3>
    <xui-status-filter active-filters="vm.activeFilters"
                       filter-source="vm.filterSource"
                       filter-change="vm.filterChange()">
    </xui-status-filter>
    <div ng-repeat="object in vm.filteredObjects" class="row xui-padding-smv">
        <div class="col-lg-1 col-md-2 col-sm-3 col-xs-4">
            <span class="xui-tag">{{object.type}}</span>
        </div>
        <div class="col-lg-11 col-md-10 col-sm-9 col-xs-8">
            <span class="xui-text-h4">
            <xui-icon icon="{{object.type}}" text-alignment="right"> </xui-icon>
            {{object.name}}
        </span>
        </div>
    </div>
    <xui-divider></xui-divider>
    <div class="xui-color-palette">
        <h6 id="example_basic_choose-emphasize-semantic-color-for-active-status-buttons">Choose emphasize semantic color for active status buttons:</h6>
        <xui-dropdown icon="{{vm.selectedFilter.icon}}"
                      selected-item="selectedFilter"
                      display-value="name"
                      selected-item="vm.selectedFilter"
                      ng-model="vm.selectedFilter"
                      items-source="vm.filterSource"
                      on-secondary-action="void()">
        </xui-dropdown>
        <div class="doc-color-row">
            <div class="doc-color-swatch" ng-repeat="color in vm.semanticColors">
                <div class="doc-color-swatch-block"
                     ng-class="[color, {'activated': color === vm.selectedFilter.emphasize}]"
                     ng-click="vm.selectEmpasize(color)"
                     role="button">
                </div>
                <div class="doc-color-swatch-label doc-color-swatch-label-primary">
                    {{::'@'+color}}
                </div>
            </div>
        </div>

    </div>
</div>

<div ng-controller="DemoStatusFilterComplexController as vm">
    <h3 id="example_with-xui-grid">With xui-grid</h3>
    <xui-status-filter active-filters="vm.activeFilters"
                       filter-source="vm.filterSource"
                       filter-change="vm.filterChange()">
    </xui-status-filter>
    <xui-grid items-source="vm.filteredItems"
              pagination-data="vm.gridPagination"
              smart-mode="vm.smartMode"
              sorting-data="vm.sorting"
              options="vm.gridOptions"
              hide-toolbar="vm.hideToolbar"
              template-url="demo-item-template">
    </xui-grid>
</div>

<div ng-controller="DemoStatusFilterComplexController as vm">
    <h3 id="example_with-xui-listview">With xui-listview</h3>
    <xui-status-filter active-filters="vm.activeFilters"
                       filter-source="vm.filterSource"
                       filter-change="vm.filterChange()">
    </xui-status-filter>
    <xui-listview stripe="true"
                  items-source="vm.filteredItems"
                  template-url="demo-item-template"
                  selection-mode="{{vm.selection.mode}}"
                  selection-property="{{vm.selection.property}}">
    </xui-listview>
</div>

// Styles for color palette
<style>
    .doc-color-swatch {
        display: inline-block;
        vertical-align: top;
        margin-bottom: 15px !important;
        padding: 0 15px;
        width: 150px;
    }

    .doc-color-swatch-block {
        width: 120px;
        height: 40px;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, .4);
    }
    .doc-color-swatch-label {
        font-size: 11px;
        line-height: 1;
        margin-top: 6px;
        text-align: center;
    }

    .doc-color-swatch-block.activated, .doc-color-swatch-block:hover {
        border: 1px solid #23677e;
        box-shadow: 0 6px 6px 0 rgba(33, 101, 113, 0.63);
    }

    .doc-color-swatch-block.activated + .doc-color-swatch-label {
        color: #23677e;
    }
</style></script>
</div>
<div class="tab-pane" title="app.js">
<pre class="prettyprint linenums" ng-set-text="app.js"></pre>
<script type="text/ng-template" id="app.js">(function () {
    "use strict";

    Xui.module
        .controller("DemoStatusFilterSimpleController", DemoStatusFilterSimpleController)
        .controller("DemoStatusFilterComplexController", DemoStatusFilterComplexController, ["$templateCache"]);

    function DemoStatusFilterSimpleController() {
        var vm = this;

        vm.semanticColors = ["xui-color-unknown-border", "xui-color-info-border", "xui-color-ok-border",
            "xui-color-warning-border", "xui-color-critical-border", "xui-color-down-border",
            "xui-color-unmanaged-border", "xui-color-unrecheable-border", "xui-color-external-border",
            "xui-color-shutdown-border", "xui-color-unplugged-border"];

        vm.activeFilters = [];
        vm.items = [
            { type: "network", name: "Source Route Bridge" },
            { type: "network", name: "Gateway" },
            { type: "network", name: "Integrated Services Digital Network" },
            { type: "network", name: "Multilayer switch" },
            { type: "application", name: "Enterprise Software App" },
            { type: "application", name: "Engineering and Product Development App" },
            { type: "website", name: "Orion Website" },
            { type: "website", name: "Helpdesk" },
            { type: "website", name: "Confluence" },
            { type: "topography", name: "Point-to-point" },
            { type: "tools", name: "Container" },
            { type: "tools", name: "Widget" }
        ];

        vm.filteredObjects = _.cloneDeep(vm.items);

        vm.filterSource = transformFilterSource();

        vm.selectedFilter = vm.filterSource[0];

        vm.filterChange = function () {
            if (_.isEmpty(vm.activeFilters)) {
                return vm.filteredObjects = _.cloneDeep(vm.items);
            }
            vm.filteredObjects = _.filter(vm.items, function (item) {
                var isFiltered = false;
                _.each(vm.activeFilters, function (filter) {
                    if (item.type === filter) {
                        return isFiltered = true;
                    }
                });
                return isFiltered;
            });
        };

        vm.selectEmpasize = function (color) {
            vm.selectedFilter.emphasize = color;
        };

        function transformFilterSource() {
            var transformedFilterSource = [];
            var filterCounts = _.countBy(vm.items, "type");
            _.forEach(filterCounts, function (value, key) {
                transformedFilterSource.push({
                    name: key,
                    value: value,
                    tooltip: key,
                    tooltipAppendToBody: true,
                    emphasize: "xui-color-unknown-border",
                    icon: key
                });
            });
            return transformedFilterSource;
        }
    }

    function DemoStatusFilterComplexController($templateCache) {
        var vm = this;

        vm.activeFilters = [];
        vm.selectedItems = [];
        vm.items = [
            {
                id: 0, severity: "critical", name: "Alert me when a component goes into critical state",
                description: "Some custom description for critical alert"
            },
            {
                id: 1, severity: "critical", name: "Alert me when a component goes into critical state",
                description: "Some custom description for critical alert"
            },
            {
                id: 2, severity: "critical", name: "Alert me when a component goes into critical state",
                description: "Some custom description for critical alert"
            },
            {
                id: 3, severity: "critical", name: "Alert me when a component goes into critical state",
                description: "Some custom description for critical alert"
            },
            {
                id: 5, severity: "warning", name: "Alert me when a component needs to be updated",
                description: "Some custom description for warning alert"
            },
            {
                id: 6, severity: "warning", name: "Alert me when a component needs to be updated",
                description: "Some custom description for warning alert"
            },
            {
                id: 7, severity: "info", name: "Notify me when a component change his status",
                description: "Some custom description for info alert"
            },
            {
                id: 8, severity: "info", name: "Notify me when a component change his status",
                description: "Some custom description for info alert"
            }
        ];

        _.each(vm.items, function (item) {
            item.filterIcon = "severity_" + item.severity
        });

        vm.smartMode = true;
        vm.hideToolbar = true;

        vm.gridOptions = {
            triggerSearchOnChange: true,
            searchDebounce: 500,
            hidePagination: false,
            pagerAdjacent: 0
        };

        vm.gridPagination = {
            page: 1,
            pageSize: 5
        };

        vm.sorting = {
            sortableColumns: [{
                id: "name",
                label: "Name"
            }, {
                id: "severity",
                label: "Severity"
            }
            ],
            sortBy: {
                id: "name",
                label: "Name"
            },
            direction: "asc"
        };

        vm.selection = {
            mode: "single",
            property: "id"
        };

        vm.filteredItems = _.cloneDeep(vm.items);

        vm.filterSource = transformFilterSource();

        vm.filterChange = function () {
            if (_.isEmpty(vm.activeFilters)) {
                return vm.filteredItems = _.cloneDeep(vm.items);
            }
            vm.filteredItems = _.filter(vm.items, function (item) {
                var isFiltered = false;
                _.each(vm.activeFilters, function (filter) {
                    if (item.filterIcon === filter) {
                        return isFiltered = true;
                    }
                });
                return isFiltered;
            });
        };

        function transformFilterSource() {
            var transformedFilterSource = [];
            var filterCounts = _.countBy(vm.items, "filterIcon");
            _.forEach(filterCounts, function (value, key) {
                transformedFilterSource.push({
                    name: key,
                    value: value,
                    tooltip: key,
                    tooltipAppendToBody: true,
                    emphasize: resolveEmphasize(key),
                    icon: key
                });
            });
            return transformedFilterSource;
        }

        function resolveEmphasize(name) {
            var vocabulary = {
                "severity_critical": "xui-color-critical-border",
                "severity_warning": "xui-color-warning-border",
                "severity_info": "xui-color-info-border"
            };
            return vocabulary[name] || "xui-color-ok-border"
        }

        $templateCache.put("demo-item-template",
            "<div style='display:flex; justify-content:flex-start;'><xui-icon icon='{{item.filterIcon}}'></xui-icon>" +
            "<div style='margin-left:20px;' class='xui-text-warning'>{{item.name}}</div><div style='margin-left:20px;'>{{item.description}}</div></div>");
    }

})();
</script>
</div>
</div><h4 id="example_with-xui-listview_demo">Demo</h4>
<div class="well doc-example-live animate-container" ng-embed-app="xui" ng-set-html="index.html-71" ng-eval-javascript="app.js"></div>
</div></div>
</div>
