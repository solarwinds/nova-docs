"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const protractor_1 = require("@solarwinds/uzi/protractor");
const helpers_1 = require("../helpers");
const uzi_1 = require("@solarwinds/uzi");
const index_atom_1 = require("../index.atom");
describe("USERCONTROL Dropdown >", () => {
    beforeEach(() => {
        helpers_1.default.prepareBrowser("dropdown");
    });
    describe("dropdown >", () => {
        describe("basic >", () => {
            let ddBasic;
            beforeEach(() => {
                ddBasic = uzi_1.Atom.find(index_atom_1.DropdownAtom, "dropdownBasic");
            });
            it("contains expected items", () => {
                expect(ddBasic.getNumberOfItems()).toBe(20);
                expect(ddBasic.getItemText(0)).toBe("Item 1");
                expect(ddBasic.getItemText(19)).toBe("Item 20");
            });
            describe("when a value is picked from dropdown, it", () => {
                it("should display selected item on dropdown button", () => {
                    let target = "Item 2";
                    ddBasic.select(target);
                    expect(ddBasic.getCurrentValue()).toEqual(target);
                });
                it("should mark the selected item in the dropdown menu", () => {
                    let target = "Item 2";
                    ddBasic.select(target);
                    expect(ddBasic.getCurrentValue()).toEqual(target);
                    let items = ddBasic.getItemsWithClass("xui-listitem--selected");
                    ddBasic.click();
                    expect(items.count()).toEqual(1);
                    expect(items.get(0).getText()).toEqual("Item 2");
                });
            });
        });
        describe("complex >", () => {
            let ddComplex;
            beforeEach(() => {
                ddComplex = uzi_1.Atom.find(index_atom_1.DropdownAtom, "dropdownComplex");
            });
            it("applies the correct template", () => {
                expect(ddComplex.getItemsWithNestedClass("custom-template-class").count()).toBe(5);
            });
        });
        describe("required >", () => {
            let ddRequired;
            beforeEach(() => {
                ddRequired = uzi_1.Atom.find(index_atom_1.DropdownAtom, "dropdownRequired");
            });
            it("should display placeholder", () => {
                const placeholder = "(select item)";
                expect(ddRequired.getPlaceholder()).toBe(placeholder);
            });
            it("should not display selection-required hints when pristine when is-required is true", () => {
                expect(ddRequired.isValidationTextDisplayed()).toBe(false);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(false);
            });
            it("should not display selection-required hints when focused when is-required is true", () => {
                // pristine
                expect(ddRequired.isValidationTextDisplayed()).toBe(false);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(false);
                // focus
                ddRequired.click();
                expect(ddRequired.isValidationTextDisplayed()).toBe(false);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(false);
            });
            it("should display selection-required hints on-blur when is-required is true", () => {
                // pristine
                expect(ddRequired.isValidationTextDisplayed()).toBe(false);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(false);
                // focus
                ddRequired.click();
                expect(ddRequired.isValidationTextDisplayed()).toBe(false);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(false);
                // blur
                ddRequired.getLabelElement().click();
                expect(ddRequired.isValidationTextDisplayed()).toBe(true);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(true);
                // focus again
                ddRequired.click();
                expect(ddRequired.isValidationTextDisplayed()).toBe(false);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(false);
                // blur again
                ddRequired.getLabelElement().click();
                expect(ddRequired.isValidationTextDisplayed()).toBe(true);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(true);
            });
            it("should not indicate invalid on-blur if item is selected", () => {
                // pristine
                expect(ddRequired.isValidationTextDisplayed()).toBe(false);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(false);
                // focus and select
                ddRequired.select("Item 5");
                expect(ddRequired.isValidationTextDisplayed()).toBe(false);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(false);
                // blur after select
                ddRequired.getLabelElement().click();
                expect(ddRequired.isValidationTextDisplayed()).toBe(false);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(false);
                // focus again
                ddRequired.click();
                expect(ddRequired.isValidationTextDisplayed()).toBe(false);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(false);
                // blur again
                ddRequired.getLabelElement().click();
                expect(ddRequired.isValidationTextDisplayed()).toBe(false);
                expect(ddRequired.isRequiredStyleDisplayed()).toBe(false);
            });
        });
        describe("justified >", () => {
            it("should not indicate invalid on-blur if item is selected", () => {
                const ddJustified = uzi_1.Atom.find(index_atom_1.DropdownAtom, "dropdownjustified");
                ddJustified.getGroupElement().getSize().then((directiveSize) => {
                    protractor_1.element(protractor_1.by.className("xui-dropdown--justified")).getSize().then((containerSize) => {
                        expect(directiveSize.width).toEqual(containerSize.width);
                    });
                });
            });
        });
        describe("divided", () => {
            it("should divide items based on their separator property is set to true", () => {
                const ddDivided = uzi_1.Atom.find(index_atom_1.DropdownAtom, "dropdownWithSeparators");
                ddDivided.click().then(() => {
                    ddDivided.getDividers().count().then((count) => {
                        expect(count).toEqual(2);
                    });
                });
            });
        });
    });
    describe("combobox >", () => {
        let combobox;
        beforeEach(() => {
            combobox = uzi_1.Atom.find(index_atom_1.DropdownAtom, "combobox");
        });
        it("should display initial value in textbox", () => {
            expect(combobox.getInputValue()).toBe("unset");
        });
        it("should change the model after changing the text input", () => {
            combobox.clearText();
            const something = "There is something in the way she moves ...";
            combobox.acceptText(something);
            expect(combobox.getInputValue()).toBe(something);
            expect(protractor_1.element(protractor_1.by.id("combobox-model")).getText()).toBe(something);
        });
        it("should change the input value and model after clicking on dropdown item", () => {
            combobox.select("Item 1");
            expect(combobox.getInputValue()).toBe("Item 1");
            expect(protractor_1.element(protractor_1.by.id("combobox-model")).getText()).toBe("Item 1");
        });
        describe("Zooming: it should always show the selected element >", () => {
            it("after scrolling to the bottom and selected item is at the top", () => {
                let lastItem = 0;
                combobox.getNumberOfItems().then(function (result) {
                    expect(result).toBeGreaterThan(10); // with less than 11 items there will be no scroll
                    lastItem = result - 1;
                    let selectedElementInitialLocation = 0;
                    let selectedElementFinalLocation = 0;
                    let selectedItemText = "Item 1";
                    let selectedElement = combobox.getItemByText(selectedItemText);
                    combobox.select(selectedItemText);
                    // open the combobox and get the location of the selected item
                    combobox.click();
                    selectedElement.getLocation().then(function (initialLocation) {
                        selectedElementInitialLocation = initialLocation.y;
                        // scroll to the first element in the top and close combobox
                        let scrollToScript = "document.getElementById('combobox').getElementsByTagName('LI')" +
                            "[" + lastItem + "].scrollIntoView()";
                        protractor_1.browser.executeScript(scrollToScript).then(function () {
                            // check location after scrolling is different
                            selectedElement.getLocation().then(function (location) {
                                expect(location.y).not.toEqual(selectedElementInitialLocation);
                            });
                            combobox.click();
                        });
                    });
                    // open the combobox and get the location of the selected item
                    combobox.click();
                    selectedElement.getLocation().then(function (location) {
                        selectedElementFinalLocation = location.y;
                        // with zooming implemented both locations must be the same
                        // checked that location is in a range because of padding of the LU element
                        // 10 because of @padding-base-vertical*2
                        expect(selectedElementFinalLocation - 10 <= selectedElementInitialLocation &&
                            selectedElementInitialLocation <= selectedElementFinalLocation + 10).toBeTruthy();
                    });
                });
            });
            it("after scrolling to the top and selected item is at the bottom", () => {
                combobox.getNumberOfItems().then(function (result) {
                    expect(result).toBeGreaterThan(10); // with less than 11 items there will be no scroll
                });
                let selectedElementInitialLocation = 0;
                let selectedElementFinalLocation = 0;
                let selectedItemText = "Item 20";
                let selectedElement = combobox.getItemByText(selectedItemText);
                combobox.scrollToAndSelect(selectedItemText);
                // open the combobox and get the location of the selected item
                combobox.click();
                selectedElement.getLocation().then(function (initialLocation) {
                    selectedElementInitialLocation = initialLocation.y;
                    // scroll to the first element in the top and close combobox
                    let scrollToScript = "document.getElementById('combobox').getElementsByTagName('LI')[0]" +
                        ".scrollIntoView()";
                    protractor_1.browser.executeScript(scrollToScript).then(function () {
                        // check location after scrolling is different
                        selectedElement.getLocation().then(function (location) {
                            expect(location.y).not.toEqual(selectedElementInitialLocation);
                        });
                        combobox.click();
                    });
                });
                // open the combobox and get the location of the selected item
                combobox.click();
                selectedElement.getLocation().then(function (location) {
                    selectedElementFinalLocation = location.y;
                    // with zooming implemented both locations must be the same
                    // checked that location is in a range because of padding of the LU element
                    // 10 because of @padding-base-vertical*2
                    expect(selectedElementFinalLocation - 10 <= selectedElementInitialLocation &&
                        selectedElementInitialLocation <= selectedElementFinalLocation + 10).toBeTruthy();
                });
            });
        });
        describe("Type ahead >", () => {
            beforeEach(() => {
                combobox.clearText();
            });
            it("should not show type ahead text when control is empty", () => {
                expect(combobox.areSuggestionsDisplayed()).toBe(false);
            });
            it("should show type ahead suggestions which contain input text", () => {
                combobox.acceptInput("Ite");
                expect(combobox.areSuggestionsDisplayed()).toBe(true);
                expect(combobox.getSuggestions().count()).toBe(10); // no more than 10 suggestions are shown
            });
            it("should not show type ahead suggestions which not contain input text", () => {
                combobox.acceptInput("3");
                expect(combobox.areSuggestionsDisplayed()).toBe(true);
                expect(combobox.getSuggestions().count()).toBe(2); // Item 3 and Item 13
            });
            it("should select the correct type ahead suggestion", () => {
                combobox.acceptInput("item");
                let suggestion = combobox.getSuggestionLink(2);
                expect(suggestion.getText()).toEqual("Item 3");
                suggestion.click();
                expect(combobox.getValueAttr()).toEqual("Item 3");
            });
        });
        describe("Clear on blur >", () => {
            let comboClearOnBlur;
            beforeEach(() => {
                comboClearOnBlur = uzi_1.Atom.find(index_atom_1.DropdownAtom, "comboClearOnBlur");
            });
            it("should clear input on blur if its value is not in a source array", () => {
                comboClearOnBlur.acceptInput("Not in a source array");
                comboClearOnBlur.click();
                expect(comboClearOnBlur.getInputValue()).toBe("");
                expect(protractor_1.element(protractor_1.by.id("combo-clear-on-blur-model")).getText()).toBe("");
            });
            it("should remain input value on blur if its value is in a source array", () => {
                comboClearOnBlur.acceptInput("Item 1");
                comboClearOnBlur.click();
                expect(comboClearOnBlur.getInputValue()).toBe("Item 1");
                expect(protractor_1.element(protractor_1.by.id("combo-clear-on-blur-model")).getText()).toBe("Item 1");
            });
        });
    });
    describe("edge detection", () => {
        describe("a top right aligned component opens dropdown", () => {
            let topRightItem;
            beforeEach(() => {
                topRightItem = uzi_1.Atom.find(index_atom_1.DropdownAtom, "test-alignments-top-right");
                topRightItem.click();
            });
            it("downside if there is no place to upside", () => {
                topRightItem.isChildElementPresent(protractor_1.by.className("dropup")).then((isPresented) => {
                    expect(isPresented).toBeFalsy();
                });
            });
            it("right aligned if there is no place to right side", () => {
                topRightItem.isChildElementPresent(protractor_1.by.className("dropdown-menu-right")).then((isPresented) => {
                    expect(isPresented).toBeTruthy();
                });
            });
        });
        describe("a bottom left aligned component opens dropdown", () => {
            let topLeftItem;
            beforeEach(() => {
                topLeftItem = uzi_1.Atom.find(index_atom_1.DropdownAtom, "test-alignments-left-bottom");
                topLeftItem.click();
            });
            it("upside if there is no place to downside", () => {
                topLeftItem.isChildElementPresent(protractor_1.by.className("dropup")).then((isPresented) => {
                    expect(isPresented).toBeTruthy();
                });
            });
            it("left aligned if there is no place to left side", () => {
                topLeftItem.isChildElementPresent(protractor_1.by.className("dropdown-menu-right")).then((isPresented) => {
                    expect(isPresented).toBeFalsy();
                });
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZHJvcGRvd24vZHJvcGRvd24uZTJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsMkRBQXlFO0FBQ3pFLHdDQUFpQztBQUNqQyx5Q0FBcUM7QUFDckMsOENBQTJDO0FBRTNDLFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxHQUFHLEVBQUU7SUFDcEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNaLGlCQUFPLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLFlBQVksRUFBRSxHQUFFLEVBQUU7UUFDdkIsUUFBUSxDQUFDLFNBQVMsRUFBRSxHQUFFLEVBQUU7WUFDcEIsSUFBSSxPQUFxQixDQUFDO1lBRTFCLFVBQVUsQ0FBQyxHQUFFLEVBQUU7Z0JBQ1gsT0FBTyxHQUFHLFVBQUksQ0FBQyxJQUFJLENBQUMseUJBQVksRUFBRSxlQUFlLENBQUMsQ0FBQztZQUN2RCxDQUFDLENBQUMsQ0FBQztZQUVILEVBQUUsQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7Z0JBQy9CLE1BQU0sQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDNUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQzlDLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3BELENBQUMsQ0FBQyxDQUFDO1lBRUgsUUFBUSxDQUFDLDBDQUEwQyxFQUFFLEdBQUUsRUFBRTtnQkFDckQsRUFBRSxDQUFDLGlEQUFpRCxFQUFFLEdBQUcsRUFBRTtvQkFDdkQsSUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDO29CQUN0QixPQUFPLENBQUMsTUFBTSxDQUFDLE1B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RSxDQUFDO2dCQUNwQyxDQUFDLENBQUMsQ0FBQztZQUNQLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6ImNvbXBvbmVudHMvZHJvcGRvd24vZHJvcGRvd24uZTJlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHticm93c2VyLCBieSwgZWxlbWVudCwgcHJvbWlzZX0gZnJvbSBcIkBzb2xhcndpbmRzL3V6aS9wcm90cmFjdG9yXCI7XG5pbXBvcnQgSGVscGVycyBmcm9tIFwiLi4vaGVscGVyc1wiO1xuaW1wb3J0IHtBdG9tfSBmcm9tIFwiQHNvbGFyd2luZHMvdXppXCI7XG5pbXBvcnQge0Ryb3Bkb3duQXRvbX0gZnJvbSBcIi4uL2luZGV4LmF0b21cIjtcblxuZGVzY3JpYmUoXCJVU0VSQ09OVFJPTCBEcm9wZG93biA+XCIsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgSGVscGVycy5wcmVwYXJlQnJvd3NlcihcImRyb3Bkb3duXCIpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJkcm9wZG93biA+XCIsICgpPT4ge1xuICAgICAgICBkZXNjcmliZShcImJhc2ljID5cIiwgKCk9PiB7XG4gICAgICAgICAgICBsZXQgZGRCYXNpYzogRHJvcGRvd25BdG9tO1xuXG4gICAgICAgICAgICBiZWZvcmVFYWNoKCgpPT4ge1xuICAgICAgICAgICAgICAgIGRkQmFzaWMgPSBBdG9tLmZpbmQoRHJvcGRvd25BdG9tLCBcImRyb3Bkb3duQmFzaWNcIik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXQoXCJjb250YWlucyBleHBlY3RlZCBpdGVtc1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGRkQmFzaWMuZ2V0TnVtYmVyT2ZJdGVtcygpKS50b0JlKDIwKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRCYXNpYy5nZXRJdGVtVGV4dCgwKSkudG9CZShcIkl0ZW0gMVwiKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRCYXNpYy5nZXRJdGVtVGV4dCgxOSkpLnRvQmUoXCJJdGVtIDIwXCIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRlc2NyaWJlKFwid2hlbiBhIHZhbHVlIGlzIHBpY2tlZCBmcm9tIGRyb3Bkb3duLCBpdFwiLCAoKT0+IHtcbiAgICAgICAgICAgICAgICBpdChcInNob3VsZCBkaXNwbGF5IHNlbGVjdGVkIGl0ZW0gb24gZHJvcGRvd24gYnV0dG9uXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IFwiSXRlbSAyXCI7XG4gICAgICAgICAgICAgICAgICAgIGRkQmFzaWMuc2VsZWN0KHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChkZEJhc2ljLmdldEN1cnJlbnRWYWx1ZSgpKS50b0VxdWFsKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpdChcInNob3VsZCBtYXJrIHRoZSBzZWxlY3RlZCBpdGVtIGluIHRoZSBkcm9wZG93biBtZW51XCIsICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gXCJJdGVtIDJcIjtcbiAgICAgICAgICAgICAgICAgICAgZGRCYXNpYy5zZWxlY3QodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGRkQmFzaWMuZ2V0Q3VycmVudFZhbHVlKCkpLnRvRXF1YWwodGFyZ2V0KTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgaXRlbXMgPSBkZEJhc2ljLmdldEl0ZW1zV2l0aENsYXNzKFwieHVpLWxpc3RpdGVtLS1zZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgZGRCYXNpYy5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICBleHBlY3QoaXRlbXMuY291bnQoKSkudG9FcXVhbCgxKTtcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGl0ZW1zLmdldCgwKS5nZXRUZXh0KCkpLnRvRXF1YWwoXCJJdGVtIDJcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzY3JpYmUoXCJjb21wbGV4ID5cIiwgKCk9PiB7XG4gICAgICAgICAgICBsZXQgZGRDb21wbGV4OiBEcm9wZG93bkF0b207XG5cbiAgICAgICAgICAgIGJlZm9yZUVhY2goKCk9PiB7XG4gICAgICAgICAgICAgICAgZGRDb21wbGV4ID0gQXRvbS5maW5kKERyb3Bkb3duQXRvbSwgXCJkcm9wZG93bkNvbXBsZXhcIik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXQoXCJhcHBsaWVzIHRoZSBjb3JyZWN0IHRlbXBsYXRlXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRDb21wbGV4LmdldEl0ZW1zV2l0aE5lc3RlZENsYXNzKFwiY3VzdG9tLXRlbXBsYXRlLWNsYXNzXCIpLmNvdW50KCkpLnRvQmUoNSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzY3JpYmUoXCJyZXF1aXJlZCA+XCIsICgpPT4ge1xuICAgICAgICAgICAgbGV0IGRkUmVxdWlyZWQ6IERyb3Bkb3duQXRvbTtcblxuICAgICAgICAgICAgYmVmb3JlRWFjaCgoKT0+IHtcbiAgICAgICAgICAgICAgICBkZFJlcXVpcmVkID0gQXRvbS5maW5kKERyb3Bkb3duQXRvbSwgXCJkcm9wZG93blJlcXVpcmVkXCIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KFwic2hvdWxkIGRpc3BsYXkgcGxhY2Vob2xkZXJcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gXCIoc2VsZWN0IGl0ZW0pXCI7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGRkUmVxdWlyZWQuZ2V0UGxhY2Vob2xkZXIoKSkudG9CZShwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXQoXCJzaG91bGQgbm90IGRpc3BsYXkgc2VsZWN0aW9uLXJlcXVpcmVkIGhpbnRzIHdoZW4gcHJpc3RpbmUgd2hlbiBpcy1yZXF1aXJlZCBpcyB0cnVlXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRSZXF1aXJlZC5pc1ZhbGlkYXRpb25UZXh0RGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChkZFJlcXVpcmVkLmlzUmVxdWlyZWRTdHlsZURpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdChcInNob3VsZCBub3QgZGlzcGxheSBzZWxlY3Rpb24tcmVxdWlyZWQgaGludHMgd2hlbiBmb2N1c2VkIHdoZW4gaXMtcmVxdWlyZWQgaXMgdHJ1ZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gcHJpc3RpbmVcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRSZXF1aXJlZC5pc1ZhbGlkYXRpb25UZXh0RGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChkZFJlcXVpcmVkLmlzUmVxdWlyZWRTdHlsZURpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAvLyBmb2N1c1xuICAgICAgICAgICAgICAgIGRkUmVxdWlyZWQuY2xpY2soKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRSZXF1aXJlZC5pc1ZhbGlkYXRpb25UZXh0RGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChkZFJlcXVpcmVkLmlzUmVxdWlyZWRTdHlsZURpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdChcInNob3VsZCBkaXNwbGF5IHNlbGVjdGlvbi1yZXF1aXJlZCBoaW50cyBvbi1ibHVyIHdoZW4gaXMtcmVxdWlyZWQgaXMgdHJ1ZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gcHJpc3RpbmVcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRSZXF1aXJlZC5pc1ZhbGlkYXRpb25UZXh0RGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChkZFJlcXVpcmVkLmlzUmVxdWlyZWRTdHlsZURpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAvLyBmb2N1c1xuICAgICAgICAgICAgICAgIGRkUmVxdWlyZWQuY2xpY2soKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRSZXF1aXJlZC5pc1ZhbGlkYXRpb25UZXh0RGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChkZFJlcXVpcmVkLmlzUmVxdWlyZWRTdHlsZURpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAvLyBibHVyXG4gICAgICAgICAgICAgICAgZGRSZXF1aXJlZC5nZXRMYWJlbEVsZW1lbnQoKS5jbGljaygpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChkZFJlcXVpcmVkLmlzVmFsaWRhdGlvblRleHREaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRSZXF1aXJlZC5pc1JlcXVpcmVkU3R5bGVEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAvLyBmb2N1cyBhZ2FpblxuICAgICAgICAgICAgICAgIGRkUmVxdWlyZWQuY2xpY2soKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRSZXF1aXJlZC5pc1ZhbGlkYXRpb25UZXh0RGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChkZFJlcXVpcmVkLmlzUmVxdWlyZWRTdHlsZURpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAvLyBibHVyIGFnYWluXG4gICAgICAgICAgICAgICAgZGRSZXF1aXJlZC5nZXRMYWJlbEVsZW1lbnQoKS5jbGljaygpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChkZFJlcXVpcmVkLmlzVmFsaWRhdGlvblRleHREaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRSZXF1aXJlZC5pc1JlcXVpcmVkU3R5bGVEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdChcInNob3VsZCBub3QgaW5kaWNhdGUgaW52YWxpZCBvbi1ibHVyIGlmIGl0ZW0gaXMgc2VsZWN0ZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHByaXN0aW5lXG4gICAgICAgICAgICAgICAgZXhwZWN0KGRkUmVxdWlyZWQuaXNWYWxpZGF0aW9uVGV4dERpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRSZXF1aXJlZC5pc1JlcXVpcmVkU3R5bGVEaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgLy8gZm9jdXMgYW5kIHNlbGVjdFxuICAgICAgICAgICAgICAgIGRkUmVxdWlyZWQuc2VsZWN0KFwiSXRlbSA1XCIpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChkZFJlcXVpcmVkLmlzVmFsaWRhdGlvblRleHREaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGRkUmVxdWlyZWQuaXNSZXF1aXJlZFN0eWxlRGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIC8vIGJsdXIgYWZ0ZXIgc2VsZWN0XG4gICAgICAgICAgICAgICAgZGRSZXF1aXJlZC5nZXRMYWJlbEVsZW1lbnQoKS5jbGljaygpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChkZFJlcXVpcmVkLmlzVmFsaWRhdGlvblRleHREaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGRkUmVxdWlyZWQuaXNSZXF1aXJlZFN0eWxlRGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIC8vIGZvY3VzIGFnYWluXG4gICAgICAgICAgICAgICAgZGRSZXF1aXJlZC5jbGljaygpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChkZFJlcXVpcmVkLmlzVmFsaWRhdGlvblRleHREaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGRkUmVxdWlyZWQuaXNSZXF1aXJlZFN0eWxlRGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIC8vIGJsdXIgYWdhaW5cbiAgICAgICAgICAgICAgICBkZFJlcXVpcmVkLmdldExhYmVsRWxlbWVudCgpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGRkUmVxdWlyZWQuaXNWYWxpZGF0aW9uVGV4dERpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoZGRSZXF1aXJlZC5pc1JlcXVpcmVkU3R5bGVEaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzY3JpYmUoXCJqdXN0aWZpZWQgPlwiLCAoKT0+IHtcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIG5vdCBpbmRpY2F0ZSBpbnZhbGlkIG9uLWJsdXIgaWYgaXRlbSBpcyBzZWxlY3RlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGRKdXN0aWZpZWQgPSBBdG9tLmZpbmQoRHJvcGRvd25BdG9tLCBcImRyb3Bkb3duanVzdGlmaWVkXCIpO1xuICAgICAgICAgICAgICAgIGRkSnVzdGlmaWVkLmdldEdyb3VwRWxlbWVudCgpLmdldFNpemUoKS50aGVuKChkaXJlY3RpdmVTaXplOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudChieS5jbGFzc05hbWUoXCJ4dWktZHJvcGRvd24tLWp1c3RpZmllZFwiKSkuZ2V0U2l6ZSgpLnRoZW4oKGNvbnRhaW5lclNpemU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGRpcmVjdGl2ZVNpemUud2lkdGgpLnRvRXF1YWwoY29udGFpbmVyU2l6ZS53aWR0aCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlc2NyaWJlKFwiZGl2aWRlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBpdChcInNob3VsZCBkaXZpZGUgaXRlbXMgYmFzZWQgb24gdGhlaXIgc2VwYXJhdG9yIHByb3BlcnR5IGlzIHNldCB0byB0cnVlXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZERpdmlkZWQgPSBBdG9tLmZpbmQoRHJvcGRvd25BdG9tLCBcImRyb3Bkb3duV2l0aFNlcGFyYXRvcnNcIik7XG4gICAgICAgICAgICAgICAgZGREaXZpZGVkLmNsaWNrKCkudGhlbiggKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkZERpdmlkZWQuZ2V0RGl2aWRlcnMoKS5jb3VudCgpLnRoZW4oKGNvdW50OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChjb3VudCkudG9FcXVhbCgyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiY29tYm9ib3ggPlwiLCAoKT0+IHtcbiAgICAgICAgbGV0IGNvbWJvYm94OiBEcm9wZG93bkF0b207XG5cbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBjb21ib2JveCA9IEF0b20uZmluZChEcm9wZG93bkF0b20sIFwiY29tYm9ib3hcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGRpc3BsYXkgaW5pdGlhbCB2YWx1ZSBpbiB0ZXh0Ym94XCIsICgpPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGNvbWJvYm94LmdldElucHV0VmFsdWUoKSkudG9CZShcInVuc2V0XCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBjaGFuZ2UgdGhlIG1vZGVsIGFmdGVyIGNoYW5naW5nIHRoZSB0ZXh0IGlucHV0XCIsICgpPT4ge1xuICAgICAgICAgICAgY29tYm9ib3guY2xlYXJUZXh0KCk7XG4gICAgICAgICAgICBjb25zdCBzb21ldGhpbmcgPSBcIlRoZXJlIGlzIHNvbWV0aGluZyBpbiB0aGUgd2F5IHNoZSBtb3ZlcyAuLi5cIjtcbiAgICAgICAgICAgIGNvbWJvYm94LmFjY2VwdFRleHQoc29tZXRoaW5nKTtcbiAgICAgICAgICAgIGV4cGVjdChjb21ib2JveC5nZXRJbnB1dFZhbHVlKCkpLnRvQmUoc29tZXRoaW5nKTtcbiAgICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKFwiY29tYm9ib3gtbW9kZWxcIikpLmdldFRleHQoKSkudG9CZShzb21ldGhpbmcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBjaGFuZ2UgdGhlIGlucHV0IHZhbHVlIGFuZCBtb2RlbCBhZnRlciBjbGlja2luZyBvbiBkcm9wZG93biBpdGVtXCIsICgpPT4ge1xuICAgICAgICAgICAgY29tYm9ib3guc2VsZWN0KFwiSXRlbSAxXCIpO1xuXG4gICAgICAgICAgICBleHBlY3QoY29tYm9ib3guZ2V0SW5wdXRWYWx1ZSgpKS50b0JlKFwiSXRlbSAxXCIpO1xuICAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoXCJjb21ib2JveC1tb2RlbFwiKSkuZ2V0VGV4dCgpKS50b0JlKFwiSXRlbSAxXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZShcIlpvb21pbmc6IGl0IHNob3VsZCBhbHdheXMgc2hvdyB0aGUgc2VsZWN0ZWQgZWxlbWVudCA+XCIsICgpPT4ge1xuXG4gICAgICAgICAgICBpdChcImFmdGVyIHNjcm9sbGluZyB0byB0aGUgYm90dG9tIGFuZCBzZWxlY3RlZCBpdGVtIGlzIGF0IHRoZSB0b3BcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBsYXN0SXRlbSA9IDA7XG4gICAgICAgICAgICAgICAgY29tYm9ib3guZ2V0TnVtYmVyT2ZJdGVtcygpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdDogbnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVHcmVhdGVyVGhhbigxMCk7Ly8gd2l0aCBsZXNzIHRoYW4gMTEgaXRlbXMgdGhlcmUgd2lsbCBiZSBubyBzY3JvbGxcbiAgICAgICAgICAgICAgICAgICAgbGFzdEl0ZW0gPSByZXN1bHQgLSAxO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZEVsZW1lbnRJbml0aWFsTG9jYXRpb24gPSAwO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRFbGVtZW50RmluYWxMb2NhdGlvbiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZEl0ZW1UZXh0ID0gXCJJdGVtIDFcIjtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkRWxlbWVudDogYW55ID0gY29tYm9ib3guZ2V0SXRlbUJ5VGV4dChzZWxlY3RlZEl0ZW1UZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICBjb21ib2JveC5zZWxlY3Qoc2VsZWN0ZWRJdGVtVGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gb3BlbiB0aGUgY29tYm9ib3ggYW5kIGdldCB0aGUgbG9jYXRpb24gb2YgdGhlIHNlbGVjdGVkIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgY29tYm9ib3guY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50LmdldExvY2F0aW9uKCkudGhlbihmdW5jdGlvbiAoaW5pdGlhbExvY2F0aW9uOiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudEluaXRpYWxMb2NhdGlvbiA9IGluaXRpYWxMb2NhdGlvbi55O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgdG8gdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHRvcCBhbmQgY2xvc2UgY29tYm9ib3hcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY3JvbGxUb1NjcmlwdCA9IFwiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbWJvYm94JykuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0xJJylcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJbXCIgKyBsYXN0SXRlbSArIFwiXS5zY3JvbGxJbnRvVmlldygpXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2Nyb2xsVG9TY3JpcHQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGxvY2F0aW9uIGFmdGVyIHNjcm9sbGluZyBpcyBkaWZmZXJlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnQuZ2V0TG9jYXRpb24oKS50aGVuKGZ1bmN0aW9uIChsb2NhdGlvbjogYW55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChsb2NhdGlvbi55KS5ub3QudG9FcXVhbChzZWxlY3RlZEVsZW1lbnRJbml0aWFsTG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJvYm94LmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gb3BlbiB0aGUgY29tYm9ib3ggYW5kIGdldCB0aGUgbG9jYXRpb24gb2YgdGhlIHNlbGVjdGVkIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgY29tYm9ib3guY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50LmdldExvY2F0aW9uKCkudGhlbihmdW5jdGlvbiAobG9jYXRpb246IGFueSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50RmluYWxMb2NhdGlvbiA9IGxvY2F0aW9uLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIHpvb21pbmcgaW1wbGVtZW50ZWQgYm90aCBsb2NhdGlvbnMgbXVzdCBiZSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2tlZCB0aGF0IGxvY2F0aW9uIGlzIGluIGEgcmFuZ2UgYmVjYXVzZSBvZiBwYWRkaW5nIG9mIHRoZSBMVSBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAxMCBiZWNhdXNlIG9mIEBwYWRkaW5nLWJhc2UtdmVydGljYWwqMlxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHNlbGVjdGVkRWxlbWVudEZpbmFsTG9jYXRpb24gLSAxMCA8PSBzZWxlY3RlZEVsZW1lbnRJbml0aWFsTG9jYXRpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJbml0aWFsTG9jYXRpb24gPD0gc2VsZWN0ZWRFbGVtZW50RmluYWxMb2NhdGlvbiArIDEwKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KFwiYWZ0ZXIgc2Nyb2xsaW5nIHRvIHRoZSB0b3AgYW5kIHNlbGVjdGVkIGl0ZW0gaXMgYXQgdGhlIGJvdHRvbVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29tYm9ib3guZ2V0TnVtYmVyT2ZJdGVtcygpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdDogbnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVHcmVhdGVyVGhhbigxMCk7Ly8gd2l0aCBsZXNzIHRoYW4gMTEgaXRlbXMgdGhlcmUgd2lsbCBiZSBubyBzY3JvbGxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZEVsZW1lbnRJbml0aWFsTG9jYXRpb24gPSAwO1xuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZEVsZW1lbnRGaW5hbExvY2F0aW9uID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRJdGVtVGV4dCA9IFwiSXRlbSAyMFwiO1xuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZEVsZW1lbnQ6IGFueSA9IGNvbWJvYm94LmdldEl0ZW1CeVRleHQoc2VsZWN0ZWRJdGVtVGV4dCk7XG5cbiAgICAgICAgICAgICAgICBjb21ib2JveC5zY3JvbGxUb0FuZFNlbGVjdChzZWxlY3RlZEl0ZW1UZXh0KTtcblxuICAgICAgICAgICAgICAgIC8vIG9wZW4gdGhlIGNvbWJvYm94IGFuZCBnZXQgdGhlIGxvY2F0aW9uIG9mIHRoZSBzZWxlY3RlZCBpdGVtXG4gICAgICAgICAgICAgICAgY29tYm9ib3guY2xpY2soKTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnQuZ2V0TG9jYXRpb24oKS50aGVuKGZ1bmN0aW9uIChpbml0aWFsTG9jYXRpb246IGFueSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJbml0aWFsTG9jYXRpb24gPSBpbml0aWFsTG9jYXRpb24ueTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgdG8gdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHRvcCBhbmQgY2xvc2UgY29tYm9ib3hcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNjcm9sbFRvU2NyaXB0ID0gXCJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tYm9ib3gnKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnTEknKVswXVwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiLnNjcm9sbEludG9WaWV3KClcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJvd3Nlci5leGVjdXRlU2NyaXB0KHNjcm9sbFRvU2NyaXB0KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGxvY2F0aW9uIGFmdGVyIHNjcm9sbGluZyBpcyBkaWZmZXJlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudC5nZXRMb2NhdGlvbigpLnRoZW4oZnVuY3Rpb24gKGxvY2F0aW9uOiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QobG9jYXRpb24ueSkubm90LnRvRXF1YWwoc2VsZWN0ZWRFbGVtZW50SW5pdGlhbExvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tYm9ib3guY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBvcGVuIHRoZSBjb21ib2JveCBhbmQgZ2V0IHRoZSBsb2NhdGlvbiBvZiB0aGUgc2VsZWN0ZWQgaXRlbVxuICAgICAgICAgICAgICAgIGNvbWJvYm94LmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50LmdldExvY2F0aW9uKCkudGhlbihmdW5jdGlvbiAobG9jYXRpb246IGFueSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRGaW5hbExvY2F0aW9uID0gbG9jYXRpb24ueTtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCB6b29taW5nIGltcGxlbWVudGVkIGJvdGggbG9jYXRpb25zIG11c3QgYmUgdGhlIHNhbWVcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2tlZCB0aGF0IGxvY2F0aW9uIGlzIGluIGEgcmFuZ2UgYmVjYXVzZSBvZiBwYWRkaW5nIG9mIHRoZSBMVSBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIDEwIGJlY2F1c2Ugb2YgQHBhZGRpbmctYmFzZS12ZXJ0aWNhbCoyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChzZWxlY3RlZEVsZW1lbnRGaW5hbExvY2F0aW9uIC0gMTAgPD0gc2VsZWN0ZWRFbGVtZW50SW5pdGlhbExvY2F0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJbml0aWFsTG9jYXRpb24gPD0gc2VsZWN0ZWRFbGVtZW50RmluYWxMb2NhdGlvbiArIDEwKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzY3JpYmUoXCJUeXBlIGFoZWFkID5cIiwgKCk9PiB7XG5cbiAgICAgICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbWJvYm94LmNsZWFyVGV4dCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KFwic2hvdWxkIG5vdCBzaG93IHR5cGUgYWhlYWQgdGV4dCB3aGVuIGNvbnRyb2wgaXMgZW1wdHlcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGV4cGVjdChjb21ib2JveC5hcmVTdWdnZXN0aW9uc0Rpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdChcInNob3VsZCBzaG93IHR5cGUgYWhlYWQgc3VnZ2VzdGlvbnMgd2hpY2ggY29udGFpbiBpbnB1dCB0ZXh0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb21ib2JveC5hY2NlcHRJbnB1dChcIkl0ZVwiKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoY29tYm9ib3guYXJlU3VnZ2VzdGlvbnNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoY29tYm9ib3guZ2V0U3VnZ2VzdGlvbnMoKS5jb3VudCgpKS50b0JlKDEwKTsgLy8gbm8gbW9yZSB0aGFuIDEwIHN1Z2dlc3Rpb25zIGFyZSBzaG93blxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXQoXCJzaG91bGQgbm90IHNob3cgdHlwZSBhaGVhZCBzdWdnZXN0aW9ucyB3aGljaCBub3QgY29udGFpbiBpbnB1dCB0ZXh0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb21ib2JveC5hY2NlcHRJbnB1dChcIjNcIik7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGNvbWJvYm94LmFyZVN1Z2dlc3Rpb25zRGlzcGxheWVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGNvbWJvYm94LmdldFN1Z2dlc3Rpb25zKCkuY291bnQoKSkudG9CZSgyKTsgLy8gSXRlbSAzIGFuZCBJdGVtIDEzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXQoXCJzaG91bGQgc2VsZWN0IHRoZSBjb3JyZWN0IHR5cGUgYWhlYWQgc3VnZ2VzdGlvblwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29tYm9ib3guYWNjZXB0SW5wdXQoXCJpdGVtXCIpO1xuICAgICAgICAgICAgICAgIGxldCBzdWdnZXN0aW9uID0gY29tYm9ib3guZ2V0U3VnZ2VzdGlvbkxpbmsoMik7XG5cbiAgICAgICAgICAgICAgICBleHBlY3Qoc3VnZ2VzdGlvbi5nZXRUZXh0KCkpLnRvRXF1YWwoXCJJdGVtIDNcIik7XG4gICAgICAgICAgICAgICAgc3VnZ2VzdGlvbi5jbGljaygpO1xuXG4gICAgICAgICAgICAgICAgZXhwZWN0KGNvbWJvYm94LmdldFZhbHVlQXR0cigpKS50b0VxdWFsKFwiSXRlbSAzXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlc2NyaWJlKFwiQ2xlYXIgb24gYmx1ciA+XCIsICgpPT4ge1xuICAgICAgICAgICAgbGV0IGNvbWJvQ2xlYXJPbkJsdXI6IERyb3Bkb3duQXRvbTtcblxuICAgICAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29tYm9DbGVhck9uQmx1ciA9IEF0b20uZmluZChEcm9wZG93bkF0b20sIFwiY29tYm9DbGVhck9uQmx1clwiKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdChcInNob3VsZCBjbGVhciBpbnB1dCBvbiBibHVyIGlmIGl0cyB2YWx1ZSBpcyBub3QgaW4gYSBzb3VyY2UgYXJyYXlcIiwgKCk9PiB7XG4gICAgICAgICAgICAgICAgY29tYm9DbGVhck9uQmx1ci5hY2NlcHRJbnB1dChcIk5vdCBpbiBhIHNvdXJjZSBhcnJheVwiKTtcbiAgICAgICAgICAgICAgICBjb21ib0NsZWFyT25CbHVyLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGNvbWJvQ2xlYXJPbkJsdXIuZ2V0SW5wdXRWYWx1ZSgpKS50b0JlKFwiXCIpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKFwiY29tYm8tY2xlYXItb24tYmx1ci1tb2RlbFwiKSkuZ2V0VGV4dCgpKS50b0JlKFwiXCIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJlbWFpbiBpbnB1dCB2YWx1ZSBvbiBibHVyIGlmIGl0cyB2YWx1ZSBpcyBpbiBhIHNvdXJjZSBhcnJheVwiLCAoKT0+IHtcbiAgICAgICAgICAgICAgICBjb21ib0NsZWFyT25CbHVyLmFjY2VwdElucHV0KFwiSXRlbSAxXCIpO1xuICAgICAgICAgICAgICAgIGNvbWJvQ2xlYXJPbkJsdXIuY2xpY2soKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoY29tYm9DbGVhck9uQmx1ci5nZXRJbnB1dFZhbHVlKCkpLnRvQmUoXCJJdGVtIDFcIik7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoXCJjb21iby1jbGVhci1vbi1ibHVyLW1vZGVsXCIpKS5nZXRUZXh0KCkpLnRvQmUoXCJJdGVtIDFcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZGVzY3JpYmUoXCJlZGdlIGRldGVjdGlvblwiLCAoKSA9PiB7XG4gICAgICAgIGRlc2NyaWJlKFwiYSB0b3AgcmlnaHQgYWxpZ25lZCBjb21wb25lbnQgb3BlbnMgZHJvcGRvd25cIiwgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHRvcFJpZ2h0SXRlbTogRHJvcGRvd25BdG9tO1xuICAgICAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9wUmlnaHRJdGVtID0gQXRvbS5maW5kKERyb3Bkb3duQXRvbSwgXCJ0ZXN0LWFsaWdubWVudHMtdG9wLXJpZ2h0XCIpO1xuICAgICAgICAgICAgICAgIHRvcFJpZ2h0SXRlbS5jbGljaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpdChcImRvd25zaWRlIGlmIHRoZXJlIGlzIG5vIHBsYWNlIHRvIHVwc2lkZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9wUmlnaHRJdGVtLmlzQ2hpbGRFbGVtZW50UHJlc2VudChieS5jbGFzc05hbWUoXCJkcm9wdXBcIikpLnRoZW4oKGlzUHJlc2VudGVkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChpc1ByZXNlbnRlZCkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGl0KFwicmlnaHQgYWxpZ25lZCBpZiB0aGVyZSBpcyBubyBwbGFjZSB0byByaWdodCBzaWRlXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0b3BSaWdodEl0ZW0uaXNDaGlsZEVsZW1lbnRQcmVzZW50KGJ5LmNsYXNzTmFtZShcImRyb3Bkb3duLW1lbnUtcmlnaHRcIikpLnRoZW4oKGlzUHJlc2VudGVkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChpc1ByZXNlbnRlZCkudG9CZVRydXRoeSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkZXNjcmliZShcImEgYm90dG9tIGxlZnQgYWxpZ25lZCBjb21wb25lbnQgb3BlbnMgZHJvcGRvd25cIiwgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHRvcExlZnRJdGVtOiBEcm9wZG93bkF0b207XG4gICAgICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0b3BMZWZ0SXRlbSA9IEF0b20uZmluZChEcm9wZG93bkF0b20sIFwidGVzdC1hbGlnbm1lbnRzLWxlZnQtYm90dG9tXCIpO1xuICAgICAgICAgICAgICAgIHRvcExlZnRJdGVtLmNsaWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGl0KFwidXBzaWRlIGlmIHRoZXJlIGlzIG5vIHBsYWNlIHRvIGRvd25zaWRlXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0b3BMZWZ0SXRlbS5pc0NoaWxkRWxlbWVudFByZXNlbnQoYnkuY2xhc3NOYW1lKFwiZHJvcHVwXCIpKS50aGVuKChpc1ByZXNlbnRlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBleHBlY3QoaXNQcmVzZW50ZWQpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaXQoXCJsZWZ0IGFsaWduZWQgaWYgdGhlcmUgaXMgbm8gcGxhY2UgdG8gbGVmdCBzaWRlXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0b3BMZWZ0SXRlbS5pc0NoaWxkRWxlbWVudFByZXNlbnQoYnkuY2xhc3NOYW1lKFwiZHJvcGRvd24tbWVudS1yaWdodFwiKSkudGhlbigoaXNQcmVzZW50ZWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGlzUHJlc2VudGVkKS50b0JlRmFsc3koKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
