"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const helpers_1 = require("../helpers");
const index_atom_1 = require("../index.atom");
const uzi_1 = require("@solarwinds/uzi");
describe("USERCONTROL Selector:", () => {
    let atom;
    beforeEach(() => {
        helpers_1.default.prepareBrowser("selector");
        atom = uzi_1.Atom.find(index_atom_1.SelectorAtom, "selectorTestTopLeft");
    });
    describe("when left (checkbox) button is clicked twice", () => {
        it("should check and uncheck ", () => {
            expect(atom).toBeDefined();
            expect(atom.isIndeterminate()).toBe(true);
            atom.getCheckboxButton().click();
            expect(atom.isChecked()).toBe(true);
            atom.getCheckboxButton().click();
            expect(atom.isChecked()).toBe(false);
        });
    });
    describe("when no button is clicked", () => {
        it("should not display elements list", () => {
            expect(atom).toBeDefined();
            expect(atom.getElementsList().isDisplayed()).toBe(false);
        });
    });
    describe("when is clicked,", () => {
        it("should run the callback", () => {
            expect(atom.isIndeterminate()).toBe(true);
            atom.getCheckboxButton().click();
            expect(atom.isIndeterminate()).toBe(false);
        });
    });
    describe("when right (dropdown) button is clicked", () => {
        it("should toggle elements list visibility", () => {
            expect(atom).toBeDefined();
            atom.getDropdownButton().click();
            expect(atom.getElementsList().isDisplayed()).toBe(true);
            atom.getDropdownButton().click();
            expect(atom.getElementsList().isDisplayed()).toBe(false);
        });
    });
    describe("when the selector is in the TOP LEFT position and an element of the list is clicked", () => {
        it("should trigger defined action in onItemsClick()", () => {
            // in this case we have set onItemsClick() to set vm.indeterminate to !vm.indeterminate
            expect(atom).toBeDefined();
            expect(atom.isIndeterminate()).toBe(true);
            atom.getDropdownButton().click();
            atom.getElementFromListByIndex(0).click();
            expect(atom.isIndeterminate()).toBe(false);
            atom.getDropdownButton().click();
            atom.getElementFromListByIndex(2).click();
            expect(atom.isIndeterminate()).toBe(true);
        });
    });
    describe("when the selector is in the TOP RIGHT position and an element of the list is clicked", () => {
        it("should trigger defined action in onItemsClick()", () => {
            // in this case we have set onItemsClick() to set vm.indeterminate to !vm.indeterminate
            atom = uzi_1.Atom.find(index_atom_1.SelectorAtom, "selectorTestTopRight");
            expect(atom).toBeDefined();
            expect(atom.isIndeterminate()).toBe(true);
            atom.getDropdownButton().click();
            atom.getElementFromListByIndex(0).click();
            expect(atom.isIndeterminate()).toBe(false);
            atom.getDropdownButton().click();
            atom.getElementFromListByIndex(2).click();
            expect(atom.isIndeterminate()).toBe(true);
        });
    });
    describe("when the selector is in the BOTTOM LEFT position and an element of the list is clicked", () => {
        it("should trigger defined action in onItemsClick()", () => {
            // in this case we have set onItemsClick() to set vm.indeterminate to !vm.indeterminate
            atom = uzi_1.Atom.find(index_atom_1.SelectorAtom, "selectorTestBottomLeft");
            expect(atom).toBeDefined();
            expect(atom.isIndeterminate()).toBe(true);
            atom.getDropdownButton().click();
            atom.getElementFromListByIndex(0).click();
            expect(atom.isIndeterminate()).toBe(false);
            atom.getDropdownButton().click();
            atom.getElementFromListByIndex(2).click();
            expect(atom.isIndeterminate()).toBe(true);
        });
    });
    describe("when the selector is in the BOTTOM RIGHT position and an element of the list is clicked", () => {
        it("should trigger defined action in onItemsClick()", () => {
            // in this case we have set onItemsClick() to set vm.indeterminate to !vm.indeterminate
            atom = uzi_1.Atom.find(index_atom_1.SelectorAtom, "selectorTestBottomRight");
            expect(atom).toBeDefined();
            expect(atom.isIndeterminate()).toBe(true);
            atom.getDropdownButton().click();
            atom.getElementFromListByIndex(0).click();
            expect(atom.isIndeterminate()).toBe(false);
            atom.getDropdownButton().click();
            atom.getElementFromListByIndex(2).click();
            expect(atom.isIndeterminate()).toBe(true);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvc2VsZWN0b3Ivc2VsZWN0b3IuZTJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0Esd0NBQWlDO0FBQ2pDLDhDQUEyQztBQUMzQyx5Q0FBcUM7QUFFckMsUUFBUSxDQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRTtJQUNuQyxJQUFJLElBQWtCLENBQUM7SUFFdkIsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNaLGlCQUFPLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ25DLElBQUksR0FBRyxVQUFJLENBQUMsSUFBSSxDQUFDLHlCQUFZLEVBQUUscUJBQXFCLENBQUMsQ0FBQztJQUMxRCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyw4Q0FBOEMsRUFBRSxHQUFHLEVBQUU7UUFDMUQsRUFBRSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtZQUNqQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDM0IsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUUxQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNqQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRXBDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2pDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUU7UUFDdkMsRUFBRSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtZQUN4QyxNQUFNLENBQUMs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QUFFLENBQUM7WUFFMUMsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUU5QyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHlGQUF5RixFQUFFLEdBQUcsRUFBRTtRQUNyRyxFQUFFLENBQUMsaURBQWlELEVBQUUsR0FBRyxFQUFFO1lBQ3ZELHVGQUF1RjtZQUN2RixJQUFJLEdBQUcsVUFBSSxDQUFDLElBQUksQ0FBQyx5QkFBWSxFQUFFLHlCQUF5QixDQUFDLENBQUM7WUFDMUQsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzNCLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFMUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDakMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBRTFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFM0MsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDakMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBRTFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFOUMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6ImNvbXBvbmVudHMvc2VsZWN0b3Ivc2VsZWN0b3IuZTJlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtwcm9taXNlfSBmcm9tIFwiQHNvbGFyd2luZHMvdXppL3Byb3RyYWN0b3JcIjtcbmltcG9ydCBIZWxwZXJzIGZyb20gXCIuLi9oZWxwZXJzXCI7XG5pbXBvcnQge1NlbGVjdG9yQXRvbX0gZnJvbSBcIi4uL2luZGV4LmF0b21cIjtcbmltcG9ydCB7QXRvbX0gZnJvbSBcIkBzb2xhcndpbmRzL3V6aVwiO1xuXG5kZXNjcmliZShcIlVTRVJDT05UUk9MIFNlbGVjdG9yOlwiLCAoKSA9PiB7XG4gICAgbGV0IGF0b206IFNlbGVjdG9yQXRvbTtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBIZWxwZXJzLnByZXBhcmVCcm93c2VyKFwic2VsZWN0b3JcIik7XG4gICAgICAgIGF0b20gPSBBdG9tLmZpbmQoU2VsZWN0b3JBdG9tLCBcInNlbGVjdG9yVGVzdFRvcExlZnRcIik7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIndoZW4gbGVmdCAoY2hlY2tib3gpIGJ1dHRvbiBpcyBjbGlja2VkIHR3aWNlXCIsICgpID0+IHtcbiAgICAgICAgaXQoXCJzaG91bGQgY2hlY2sgYW5kIHVuY2hlY2sgXCIsICgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChhdG9tKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNJbmRldGVybWluYXRlKCkpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgICAgIGF0b20uZ2V0Q2hlY2tib3hCdXR0b24oKS5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNDaGVja2VkKCkpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgICAgIGF0b20uZ2V0Q2hlY2tib3hCdXR0b24oKS5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNDaGVja2VkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwid2hlbiBubyBidXR0b24gaXMgY2xpY2tlZFwiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwic2hvdWxkIG5vdCBkaXNwbGF5IGVsZW1lbnRzIGxpc3RcIiwgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGF0b20pLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmdldEVsZW1lbnRzTGlzdCgpLmlzRGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwid2hlbiBpcyBjbGlja2VkLFwiLCAoKT0+IHtcbiAgICAgICAgaXQoXCJzaG91bGQgcnVuIHRoZSBjYWxsYmFja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc0luZGV0ZXJtaW5hdGUoKSkudG9CZSh0cnVlKTtcblxuICAgICAgICAgICAgYXRvbS5nZXRDaGVja2JveEJ1dHRvbigpLmNsaWNrKCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzSW5kZXRlcm1pbmF0ZSgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcIndoZW4gcmlnaHQgKGRyb3Bkb3duKSBidXR0b24gaXMgY2xpY2tlZFwiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwic2hvdWxkIHRvZ2dsZSBlbGVtZW50cyBsaXN0IHZpc2liaWxpdHlcIiwgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGF0b20pLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgICAgICAgIGF0b20uZ2V0RHJvcGRvd25CdXR0b24oKS5jbGljaygpO1xuXG4gICAgICAgICAgICBleHBlY3QoYXRvbS5nZXRFbGVtZW50c0xpc3QoKS5pc0Rpc3BsYXllZCgpKS50b0JlKHRydWUpO1xuXG4gICAgICAgICAgICBhdG9tLmdldERyb3Bkb3duQnV0dG9uKCkuY2xpY2soKTtcblxuICAgICAgICAgICAgZXhwZWN0KGF0b20uZ2V0RWxlbWVudHNMaXN0KCkuaXNEaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJ3aGVuIHRoZSBzZWxlY3RvciBpcyBpbiB0aGUgVE9QIExFRlQgcG9zaXRpb24gYW5kIGFuIGVsZW1lbnQgb2YgdGhlIGxpc3QgaXMgY2xpY2tlZFwiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwic2hvdWxkIHRyaWdnZXIgZGVmaW5lZCBhY3Rpb24gaW4gb25JdGVtc0NsaWNrKClcIiwgKCkgPT4ge1xuICAgICAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHdlIGhhdmUgc2V0IG9uSXRlbXNDbGljaygpIHRvIHNldCB2bS5pbmRldGVybWluYXRlIHRvICF2bS5pbmRldGVybWluYXRlXG4gICAgICAgICAgICBleHBlY3QoYXRvbSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzSW5kZXRlcm1pbmF0ZSgpKS50b0JlKHRydWUpO1xuXG4gICAgICAgICAgICBhdG9tLmdldERyb3Bkb3duQnV0dG9uKCkuY2xpY2soKTtcbiAgICAgICAgICAgIGF0b20uZ2V0RWxlbWVudEZyb21MaXN0QnlJbmRleCgwKS5jbGljaygpO1xuXG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc0luZGV0ZXJtaW5hdGUoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgICAgICAgIGF0b20uZ2V0RHJvcGRvd25CdXR0b24oKS5jbGljaygpO1xuICAgICAgICAgICAgYXRvbS5nZXRFbGVtZW50RnJvbUxpc3RCeUluZGV4KDIpLmNsaWNrKCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzSW5kZXRlcm1pbmF0ZSgpKS50b0JlKHRydWUpO1xuXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJ3aGVuIHRoZSBzZWxlY3RvciBpcyBpbiB0aGUgVE9QIFJJR0hUIHBvc2l0aW9uIGFuZCBhbiBlbGVtZW50IG9mIHRoZSBsaXN0IGlzIGNsaWNrZWRcIiwgKCkgPT4ge1xuICAgICAgICBpdChcInNob3VsZCB0cmlnZ2VyIGRlZmluZWQgYWN0aW9uIGluIG9uSXRlbXNDbGljaygpXCIsICgpID0+IHtcbiAgICAgICAgICAgIC8vIGluIHRoaXMgY2FzZSB3ZSBoYXZlIHNldCBvbkl0ZW1zQ2xpY2soKSB0byBzZXQgdm0uaW5kZXRlcm1pbmF0ZSB0byAhdm0uaW5kZXRlcm1pbmF0ZVxuICAgICAgICAgICAgYXRvbSA9IEF0b20uZmluZChTZWxlY3RvckF0b20sIFwic2VsZWN0b3JUZXN0VG9wUmlnaHRcIik7XG4gICAgICAgICAgICBleHBlY3QoYXRvbSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzSW5kZXRlcm1pbmF0ZSgpKS50b0JlKHRydWUpO1xuXG4gICAgICAgICAgICBhdG9tLmdldERyb3Bkb3duQnV0dG9uKCkuY2xpY2soKTtcbiAgICAgICAgICAgIGF0b20uZ2V0RWxlbWVudEZyb21MaXN0QnlJbmRleCgwKS5jbGljaygpO1xuXG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc0luZGV0ZXJtaW5hdGUoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgICAgICAgIGF0b20uZ2V0RHJvcGRvd25CdXR0b24oKS5jbGljaygpO1xuICAgICAgICAgICAgYXRvbS5nZXRFbGVtZW50RnJvbUxpc3RCeUluZGV4KDIpLmNsaWNrKCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzSW5kZXRlcm1pbmF0ZSgpKS50b0JlKHRydWUpO1xuXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJ3aGVuIHRoZSBzZWxlY3RvciBpcyBpbiB0aGUgQk9UVE9NIExFRlQgcG9zaXRpb24gYW5kIGFuIGVsZW1lbnQgb2YgdGhlIGxpc3QgaXMgY2xpY2tlZFwiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwic2hvdWxkIHRyaWdnZXIgZGVmaW5lZCBhY3Rpb24gaW4gb25JdGVtc0NsaWNrKClcIiwgKCkgPT4ge1xuICAgICAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHdlIGhhdmUgc2V0IG9uSXRlbXNDbGljaygpIHRvIHNldCB2bS5pbmRldGVybWluYXRlIHRvICF2bS5pbmRldGVybWluYXRlXG4gICAgICAgICAgICBhdG9tID0gQXRvbS5maW5kKFNlbGVjdG9yQXRvbSwgXCJzZWxlY3RvclRlc3RCb3R0b21MZWZ0XCIpO1xuICAgICAgICAgICAgZXhwZWN0KGF0b20pLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc0luZGV0ZXJtaW5hdGUoKSkudG9CZSh0cnVlKTtcblxuICAgICAgICAgICAgYXRvbS5nZXREcm9wZG93bkJ1dHRvbigpLmNsaWNrKCk7XG4gICAgICAgICAgICBhdG9tLmdldEVsZW1lbnRGcm9tTGlzdEJ5SW5kZXgoMCkuY2xpY2soKTtcblxuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNJbmRldGVybWluYXRlKCkpLnRvQmUoZmFsc2UpO1xuXG4gICAgICAgICAgICBhdG9tLmdldERyb3Bkb3duQnV0dG9uKCkuY2xpY2soKTtcbiAgICAgICAgICAgIGF0b20uZ2V0RWxlbWVudEZyb21MaXN0QnlJbmRleCgyKS5jbGljaygpO1xuXG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc0luZGV0ZXJtaW5hdGUoKSkudG9CZSh0cnVlKTtcblxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwid2hlbiB0aGUgc2VsZWN0b3IgaXMgaW4gdGhlIEJPVFRPTSBSSUdIVCBwb3NpdGlvbiBhbmQgYW4gZWxlbWVudCBvZiB0aGUgbGlzdCBpcyBjbGlja2VkXCIsICgpID0+IHtcbiAgICAgICAgaXQoXCJzaG91bGQgdHJpZ2dlciBkZWZpbmVkIGFjdGlvbiBpbiBvbkl0ZW1zQ2xpY2soKVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBpbiB0aGlzIGNhc2Ugd2UgaGF2ZSBzZXQgb25JdGVtc0NsaWNrKCkgdG8gc2V0IHZtLmluZGV0ZXJtaW5hdGUgdG8gIXZtLmluZGV0ZXJtaW5hdGVcbiAgICAgICAgICAgIGF0b20gPSBBdG9tLmZpbmQoU2VsZWN0b3JBdG9tLCBcInNlbGVjdG9yVGVzdEJvdHRvbVJpZ2h0XCIpO1xuICAgICAgICAgICAgZXhwZWN0KGF0b20pLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc0luZGV0ZXJtaW5hdGUoKSkudG9CZSh0cnVlKTtcblxuICAgICAgICAgICAgYXRvbS5nZXREcm9wZG93bkJ1dHRvbigpLmNsaWNrKCk7XG4gICAgICAgICAgICBhdG9tLmdldEVsZW1lbnRGcm9tTGlzdEJ5SW5kZXgoMCkuY2xpY2soKTtcblxuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNJbmRldGVybWluYXRlKCkpLnRvQmUoZmFsc2UpO1xuXG4gICAgICAgICAgICBhdG9tLmdldERyb3Bkb3duQnV0dG9uKCkuY2xpY2soKTtcbiAgICAgICAgICAgIGF0b20uZ2V0RWxlbWVudEZyb21MaXN0QnlJbmRleCgyKS5jbGljaygpO1xuXG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc0luZGV0ZXJtaW5hdGUoKSkudG9CZSh0cnVlKTtcblxuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
