"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const protractor_1 = require("@solarwinds/uzi/protractor");
const uzi_1 = require("@solarwinds/uzi");
const index_atom_1 = require("../index.atom");
const helpers_1 = require("../helpers");
describe("USERCONTROL resizable:", () => {
    const demo = protractor_1.element(protractor_1.by.className("demo-resizable"));
    const demoAbsolute = protractor_1.element(protractor_1.by.className("demo-resizable--absolute"));
    let resizableAtom;
    let resizableAtomAbsolute;
    const widthFromStyleAttributeOf = (element) => {
        return element.getAttribute("style").then((attr) => {
            return parseInt(attr.replace("px;", "").replace("width: ", ""), 10);
        });
    };
    describe("Dragging resizable:", () => {
        beforeEach(() => {
            helpers_1.default.prepareBrowser("resizable");
            resizableAtom = uzi_1.Atom.findIn(index_atom_1.ResizableAtom, demo);
            resizableAtomAbsolute = uzi_1.Atom.findIn(index_atom_1.ResizableAtom, demoAbsolute);
            expect(resizableAtom.getElement().isDisplayed()).toBeTruthy();
            expect(widthFromStyleAttributeOf(demo)).toEqual(800);
        });
        it("should not drag right", () => {
            resizableAtom.setOffset(300, 0);
            const resizer = demo.element(protractor_1.by.className("xui-resizer"));
            protractor_1.browser.actions()
                .dragAndDrop(resizer, resizableAtom.offset)
                .perform();
            expect(widthFromStyleAttributeOf(demo)).toEqual(800);
        });
        it("should dragg left", () => {
            resizableAtom.setOffset(-300, 0);
            const resizer = demo.element(protractor_1.by.className("xui-resizer"));
            protractor_1.browser.actions()
                .dragAndDrop(resizer, resizableAtom.offset)
                .perform();
            expect(widthFromStyleAttributeOf(demo)).toBeLessThan(800);
        });
        it("should not drag left (absolute element)", () => {
            resizableAtomAbsolute.setOffset(-300, 0);
            const resizer = demoAbsolute.element(protractor_1.by.className("xui-resizer"));
            resizer.getLocation().then((location) => {
                protractor_1.browser.actions()
                    .mouseMove({ x: location.x + 2, y: location.y })
                    .mouseDown()
                    .mouseMove({ x: location.x - 300, y: location.y })
                    .mouseUp()
                    .perform();
            });
            expect(widthFromStyleAttributeOf(demoAbsolute)).toEqual(500);
        });
        it("should dragg right (absolute element)", () => {
            resizableAtomAbsolute.setOffset(300, 0);
            const resizer = demoAbsolute.element(protractor_1.by.className("xui-resizer"));
            protractor_1.browser.actions()
                .dragAndDrop(resizer, resizableAtom.offset)
                .perform();
            expect(widthFromStyleAttributeOf(demoAbsolute)).toBeLessThan(500);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvcmVzaXphYmxlL3Jlc2l6YWJsZS5lMmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwyREFBa0U7QUFFbEUseUNBQXdDO0FBR3hDLDhDQUE4QztBQUM5Qyx3Q0FBaUM7QUFFakMsUUFBUSxDQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtJQUVwQyxNQUFNLElBQUksR0FBRyxvQkFBTyxDQUFDLGVBQUUsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sWUFBWSxHQUFHLG9CQUFPLENBQUMsZUFBRSxDQUFDLFNBQVMsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLENBQUM7SUFFdkUsSUFBSSxhQUE0QixDQUFDO0lBQ2pDLElBQUkscUJBQW9DLENBQUM7SUFFekMsTUFBTSx5QkFBeUIsR0FBRyxDQUFDLE9BQXNCLEVBQUUsRUFBRTtRQUN6RCxNQUFNLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUMvQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDeEUsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUM7SUFFRixRQUFRLENBQUMscUJBQXFCLEVBQUUsR0FBRyxFQUFFO1FBRWpDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDWixpQkFBTyxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNwQyxhQUFhLEdBQUcsVUFBSSxDQUFDLE1BQU0sQ0FBQywwQkFBYSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ2pELHFCQUFxQixHQUFHLFVBQUksQ0FBQyxNQUFNLENBQUMsMEJBQWEsRUFBRSxZQUFZLENBQUMsQ0FBQztZQUVqRSxNQUFNLENBQUMs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QyxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RFLENBQUMsQ0FBQyxDQUFDO0lBRVAsQ0FBQyxDQUFDLENBQUM7QUFFUCxDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiJjb21wb25lbnRzL3Jlc2l6YWJsZS9yZXNpemFibGUuZTJlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnJvd3NlciwgYnksIGVsZW1lbnQgfSBmcm9tIFwiQHNvbGFyd2luZHMvdXppL3Byb3RyYWN0b3JcIjtcbmltcG9ydCB7IEVsZW1lbnRGaW5kZXIgfSBmcm9tIFwiQHNvbGFyd2luZHMvdXppL25vZGVfbW9kdWxlcy9wcm90cmFjdG9yL2J1aWx0L2VsZW1lbnRcIjtcbmltcG9ydCB7IEF0b20sIH0gZnJvbSBcIkBzb2xhcndpbmRzL3V6aVwiO1xuaW1wb3J0IHsgSUxvY2F0aW9uIH0gZnJvbSBcIkBzb2xhcndpbmRzL3V6aS93ZWJkcml2ZXJcIjtcblxuaW1wb3J0IHsgUmVzaXphYmxlQXRvbSB9IGZyb20gXCIuLi9pbmRleC5hdG9tXCI7XG5pbXBvcnQgSGVscGVycyBmcm9tIFwiLi4vaGVscGVyc1wiO1xuXG5kZXNjcmliZShcIlVTRVJDT05UUk9MIHJlc2l6YWJsZTpcIiwgKCkgPT4ge1xuXG4gICAgY29uc3QgZGVtbyA9IGVsZW1lbnQoYnkuY2xhc3NOYW1lKFwiZGVtby1yZXNpemFibGVcIikpO1xuICAgIGNvbnN0IGRlbW9BYnNvbHV0ZSA9IGVsZW1lbnQoYnkuY2xhc3NOYW1lKFwiZGVtby1yZXNpemFibGUtLWFic29sdXRlXCIpKTtcblxuICAgIGxldCByZXNpemFibGVBdG9tOiBSZXNpemFibGVBdG9tO1xuICAgIGxldCByZXNpemFibGVBdG9tQWJzb2x1dGU6IFJlc2l6YWJsZUF0b207XG5cbiAgICBjb25zdCB3aWR0aEZyb21TdHlsZUF0dHJpYnV0ZU9mID0gKGVsZW1lbnQ6IEVsZW1lbnRGaW5kZXIpID0+IHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikudGhlbigoYXR0cikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGF0dHIucmVwbGFjZShcInB4O1wiLCBcIlwiKS5yZXBsYWNlKFwid2lkdGg6IFwiLCBcIlwiKSwgMTApO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZGVzY3JpYmUoXCJEcmFnZ2luZyByZXNpemFibGU6XCIsICgpID0+IHtcblxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgICAgIEhlbHBlcnMucHJlcGFyZUJyb3dzZXIoXCJyZXNpemFibGVcIik7XG4gICAgICAgICAgICByZXNpemFibGVBdG9tID0gQXRvbS5maW5kSW4oUmVzaXphYmxlQXRvbSwgZGVtbyk7XG4gICAgICAgICAgICByZXNpemFibGVBdG9tQWJzb2x1dGUgPSBBdG9tLmZpbmRJbihSZXNpemFibGVBdG9tLCBkZW1vQWJzb2x1dGUpO1xuXG4gICAgICAgICAgICBleHBlY3QocmVzaXphYmxlQXRvbS5nZXRFbGVtZW50KCkuaXNEaXNwbGF5ZWQoKSkudG9CZVRydXRoeSgpO1xuICAgICAgICAgICAgZXhwZWN0KHdpZHRoRnJvbVN0eWxlQXR0cmlidXRlT2YoZGVtbykpLnRvRXF1YWwoODAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgbm90IGRyYWcgcmlnaHRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgcmVzaXphYmxlQXRvbS5zZXRPZmZzZXQoMzAwLCAwKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc2l6ZXIgPSBkZW1vLmVsZW1lbnQoYnkuY2xhc3NOYW1lKFwieHVpLXJlc2l6ZXJcIikpO1xuXG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKVxuICAgICAgICAgICAgICAgIC5kcmFnQW5kRHJvcChyZXNpemVyLCByZXNpemFibGVBdG9tLm9mZnNldClcbiAgICAgICAgICAgICAgICAucGVyZm9ybSgpO1xuXG4gICAgICAgICAgICBleHBlY3Qod2lkdGhGcm9tU3R5bGVBdHRyaWJ1dGVPZihkZW1vKSkudG9FcXVhbCg4MDApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBkcmFnZyBsZWZ0XCIsICgpID0+IHtcbiAgICAgICAgICAgIHJlc2l6YWJsZUF0b20uc2V0T2Zmc2V0KC0zMDAsIDApO1xuICAgICAgICAgICAgY29uc3QgcmVzaXplciA9IGRlbW8uZWxlbWVudChieS5jbGFzc05hbWUoXCJ4dWktcmVzaXplclwiKSk7XG5cbiAgICAgICAgICAgIGJyb3dzZXIuYWN0aW9ucygpXG4gICAgICAgICAgICAgICAgLmRyYWdBbmREcm9wKHJlc2l6ZXIsIHJlc2l6YWJsZUF0b20ub2Zmc2V0KVxuICAgICAgICAgICAgICAgIC5wZXJmb3JtKCk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh3aWR0aEZyb21TdHlsZUF0dHJpYnV0ZU9mKGRlbW8pKS50b0JlTGVzc1RoYW4oODAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgbm90IGRyYWcgbGVmdCAoYWJzb2x1dGUgZWxlbWVudClcIiwgKCkgPT4ge1xuICAgICAgICAgICAgcmVzaXphYmxlQXRvbUFic29sdXRlLnNldE9mZnNldCgtMzAwLCAwKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc2l6ZXIgPSBkZW1vQWJzb2x1dGUuZWxlbWVudChieS5jbGFzc05hbWUoXCJ4dWktcmVzaXplclwiKSk7XG5cbiAgICAgICAgICAgIHJlc2l6ZXIuZ2V0TG9jYXRpb24oKS50aGVuKChsb2NhdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGJyb3dzZXIuYWN0aW9ucygpXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mZnNldCBiZWZvcmUgY2xpY2tcbiAgICAgICAgICAgICAgICAgICAgLm1vdXNlTW92ZSh7IHg6IGxvY2F0aW9uLnggKyAyLCB5OiBsb2NhdGlvbi55IH0pXG4gICAgICAgICAgICAgICAgICAgIC5tb3VzZURvd24oKVxuICAgICAgICAgICAgICAgICAgICAubW91c2VNb3ZlKHsgeDogbG9jYXRpb24ueCAtIDMwMCwgeTogbG9jYXRpb24ueSB9KVxuICAgICAgICAgICAgICAgICAgICAubW91c2VVcCgpXG4gICAgICAgICAgICAgICAgICAgIC5wZXJmb3JtKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZXhwZWN0KHdpZHRoRnJvbVN0eWxlQXR0cmlidXRlT2YoZGVtb0Fic29sdXRlKSkudG9FcXVhbCg1MDApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBkcmFnZyByaWdodCAoYWJzb2x1dGUgZWxlbWVudClcIiwgKCkgPT4ge1xuICAgICAgICAgICAgcmVzaXphYmxlQXRvbUFic29sdXRlLnNldE9mZnNldCgzMDAsIDApO1xuICAgICAgICAgICAgY29uc3QgcmVzaXplciA9IGRlbW9BYnNvbHV0ZS5lbGVtZW50KGJ5LmNsYXNzTmFtZShcInh1aS1yZXNpemVyXCIpKTtcblxuICAgICAgICAgICAgYnJvd3Nlci5hY3Rpb25zKClcbiAgICAgICAgICAgICAgICAuZHJhZ0FuZERyb3AocmVzaXplciwgcmVzaXphYmxlQXRvbS5vZmZzZXQpXG4gICAgICAgICAgICAgICAgLnBlcmZvcm0oKTtcblxuICAgICAgICAgICAgZXhwZWN0KHdpZHRoRnJvbVN0eWxlQXR0cmlidXRlT2YoZGVtb0Fic29sdXRlKSkudG9CZUxlc3NUaGFuKDUwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
