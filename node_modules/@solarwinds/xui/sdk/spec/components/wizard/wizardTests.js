"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const protractor_1 = require("@solarwinds/uzi/protractor");
const uzi_1 = require("@solarwinds/uzi");
const index_atom_1 = require("../index.atom");
class WizardTests {
}
WizardTests.run = () => {
    const expectedPromiseDelay = 1000;
    it("should be defined", () => {
        expect(WizardTests.wizard).toBeDefined();
    });
    it("should have 3 steps", () => {
        WizardTests.wizard.getSteps().then((steps) => {
            expect(steps.length).toBe(3);
        });
    });
    it("clicking on additional button should do something", () => {
        WizardTests.wizard.additionalButtons.then((buttons) => {
            buttons[0].click();
            const clicked = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "additionalButtonClicked");
            expect(clicked.isChecked()).toBe(true);
        });
    });
    it("should display title & short title", () => {
        WizardTests.wizard.getHeaderSteps().then((steps) => {
            expect(steps[0]).toBe("Step One");
            expect(steps[1]).toBe("2");
        });
    });
    it("should not show back button on first step", () => {
        expect(WizardTests.wizard.backButton.isVisible()).toBe(false);
    });
    it("should be able to go next", () => {
        const el = protractor_1.element(protractor_1.by.id("elementOnStep2"));
        expect(el.isDisplayed()).toBe(false);
        WizardTests.wizard.next();
        expect(WizardTests.wizard.getCurrentStepTitle().then((text) => {
            return text.toLowerCase();
        })).toBe("step two");
        expect(el.isDisplayed()).toBe(true);
    });
    it("should not be able to click on header steps until visited", () => {
        const el = protractor_1.element(protractor_1.by.id("elementOnStep2"));
        expect(el.isDisplayed()).toBe(false);
        WizardTests.wizard.goToStep(1);
        expect(el.isDisplayed()).toBe(false);
        WizardTests.wizard.next();
        expect(el.isDisplayed()).toBe(true);
    });
    it("should be able to move by clicking on header steps", () => {
        const el = protractor_1.element(protractor_1.by.id("elementOnStep1"));
        expect(el.isDisplayed()).toBe(true);
        WizardTests.wizard.next();
        WizardTests.wizard.next();
        expect(el.isDisplayed()).toBe(false);
        // Wait for step to finish.
        protractor_1.browser.sleep(expectedPromiseDelay);
        WizardTests.wizard.goToStep(0);
        expect(el.isDisplayed()).toBe(true);
    });
    it("should be able to go back", () => {
        const el = protractor_1.element(protractor_1.by.id("elementOnStep1"));
        expect(el.isDisplayed()).toBe(true);
        WizardTests.wizard.next();
        expect(el.isDisplayed()).toBe(false);
        WizardTests.wizard.back();
        expect(el.isDisplayed()).toBe(true);
    });
    it("should be able to disable forward/back navigation", () => {
        const canGoNext = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "canGoNext");
        const canGoBack = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "canGoBack");
        WizardTests.wizard.next();
        expect(WizardTests.wizard.backButton.isDisabled()).toBe(false);
        expect(WizardTests.wizard.nextButton.isDisabled()).toBe(false);
        canGoNext.click();
        canGoBack.click();
        expect(WizardTests.wizard.backButton.isDisabled()).toBe(true);
        expect(WizardTests.wizard.nextButton.isDisabled()).toBe(true);
    });
    it("should evaluate onNextStep,onEnterStep,onExitStep", () => {
        const step1Entered = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "step1StateEntered");
        const step1Exited = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "step1StateExited");
        const step2Entered = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "step2StateEntered");
        const step2Exited = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "step2StateExited");
        const step3Entered = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "step3StateEntered");
        const step3Exited = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "step3StateExited");
        expect(step1Entered.isChecked()).toBe(true);
        expect(step1Exited.isChecked()).toBe(false);
        expect(step2Entered.isChecked()).toBe(false);
        expect(step2Exited.isChecked()).toBe(false);
        expect(step3Entered.isChecked()).toBe(false);
        expect(step3Exited.isChecked()).toBe(false);
        WizardTests.wizard.next();
        expect(step1Entered.isChecked()).toBe(true);
        expect(step1Exited.isChecked()).toBe(true);
        expect(step2Entered.isChecked()).toBe(true);
        expect(step2Exited.isChecked()).toBe(false);
        expect(step3Entered.isChecked()).toBe(false);
        expect(step3Exited.isChecked()).toBe(false);
        WizardTests.wizard.next();
        expect(step1Entered.isChecked()).toBe(true);
        expect(step1Exited.isChecked()).toBe(true);
        expect(step2Entered.isChecked()).toBe(true);
        expect(step2Exited.isChecked()).toBe(true);
        expect(step3Entered.isChecked()).toBe(true);
        expect(step3Exited.isChecked()).toBe(false);
        WizardTests.wizard.back();
        expect(step1Entered.isChecked()).toBe(true);
        expect(step1Exited.isChecked()).toBe(true);
        expect(step2Entered.isChecked()).toBe(true);
        expect(step2Exited.isChecked()).toBe(true);
        expect(step3Entered.isChecked()).toBe(true);
        expect(step3Exited.isChecked()).toBe(true);
    });
    it("should maintain consumer state", () => {
        const inputValue = "input for textbox";
        WizardTests.wizard.next();
        const input = uzi_1.Atom.find(index_atom_1.TextboxAtom, "step2InputField");
        expect(input).toBeDefined();
        input.acceptText(inputValue);
        WizardTests.wizard.next();
        const elResult = protractor_1.element(protractor_1.by.id("step2InputResult"));
        expect(elResult).toBeDefined();
        expect(elResult.getText()).toBe(inputValue);
    });
    it("should be able to track currentStepIndex", () => {
        WizardTests.wizard.next();
        const indexInput = protractor_1.element(protractor_1.by.id("currentStepIndex"));
        expect(indexInput.getAttribute("value")).toBe("1");
    });
    it("should be able to set currentStep by currentStepIndex", () => {
        const indexInput = protractor_1.element(protractor_1.by.id("currentStepIndex"));
        indexInput.clear();
        indexInput.sendKeys("2");
        const el = protractor_1.element(protractor_1.by.id("elementOnStep3"));
        expect(el.isDisplayed()).toBe(true);
    });
    it("should be able to get to last step", () => {
        WizardTests.wizard.next();
        WizardTests.wizard.next();
        // Wait for step to finish.
        protractor_1.browser.sleep(expectedPromiseDelay);
        const el = protractor_1.element(protractor_1.by.id("elementOnStep3"));
        expect(el.isDisplayed()).toBe(true);
    });
    it("should be able to cancel next", () => {
        const el = protractor_1.element(protractor_1.by.id("elementOnStep2"));
        expect(el.isDisplayed()).toBe(false);
        WizardTests.wizard.next();
        // Wait for step to finish.
        protractor_1.browser.sleep(expectedPromiseDelay);
        expect(el.isDisplayed()).toBe(true);
        const shouldCancel = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "shouldCancelNext");
        shouldCancel.click();
        expect(shouldCancel.isChecked()).toBe(true);
        WizardTests.wizard.next();
        expect(el.isDisplayed()).toBe(true);
    });
    it("should be able to cancel finish", () => {
        WizardTests.wizard.next();
        WizardTests.wizard.next();
        // Wait for step to finish.
        protractor_1.browser.sleep(expectedPromiseDelay);
        const shouldCancel = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "shouldCancelNext");
        shouldCancel.click();
        expect(shouldCancel.isChecked()).toBe(true);
        WizardTests.wizard.finish();
        // Wait for step to finish.
        protractor_1.browser.sleep(expectedPromiseDelay);
        const finished = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "wizardFinished");
        expect(finished.isChecked()).toBe(false);
    });
    it("should be able to cancel", () => {
        const cancelled = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "wizardCancelled");
        expect(cancelled.isChecked()).toBe(false);
        WizardTests.wizard.cancel();
        expect(cancelled.isChecked()).toBe(true);
    });
    it("should be able to finish", () => {
        WizardTests.wizard.next();
        WizardTests.wizard.next();
        // Wait for step to finish.
        protractor_1.browser.sleep(expectedPromiseDelay);
        WizardTests.wizard.finish();
        const finished = uzi_1.Atom.find(index_atom_1.CheckboxAtom, "wizardFinished");
        expect(finished.isChecked()).toBe(true);
    });
    it("should be able to insert a step", () => {
        const insertBtn = uzi_1.Atom.find(index_atom_1.ButtonAtom, "insertStepButton");
        insertBtn.click();
        WizardTests.wizard.next();
        const el = protractor_1.element(protractor_1.by.id("elementOnInsertedStep"));
        expect(el.isDisplayed()).toBe(true);
        expect(WizardTests.wizard.getCurrentStepTitle()).toBe("Inserted Step");
    });
};
exports.default = WizardTests;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvd2l6YXJkL3dpemFyZFRlc3RzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsMkRBQXlFO0FBQ3pFLHlDQUFxQztBQUNyQyw4Q0FBZ0Y7QUFFaEY7O0FBRWtCLGVBQUcsR0FBRyxHQUFHLEVBQUU7SUFDckIsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLENBQUM7SUFFbEMsRUFBRSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtRQUN6QixNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzdDLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLHFCQUFxQixFQUFFLEdBQUcsRUFBRTtRQUMzQixXQUFXLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBQyxFQUFFO1lBQ3hDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsbURBQW1ELEVBQUUsR0FBRyxFQUFFO1FBQ3pELFdBQVcsQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7WUFDbEQsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ25CLE1BQU0sT0FBTyxHQUFHLFVBQUksQ0FBQyxJQUFJLENBQUMseUJBQVksRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO1lBQ25FLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7UUFDMUMsV0FBVyxD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QUM7UUFDN0MsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM1QyxNQUFNLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzdDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFNUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUMxQixNQUFNLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QyxNQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDN0MsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUU1QyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzFCLE1BQU0sQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDNUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxNQUFNLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QyxNQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRTVDLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDMUIsTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QyxNQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNDLE1BQU0sQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDNUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxNQUFNLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0MsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsZ0NBQWdDLEVBQUUsR0FBRyxFQUFFO1FBQ3RDLE1BQU0sVUFBVSxHQUFHLG1CQUFtQixDQUFDO1FBRXZDLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDMUIsTUFBTSxLQUFLLEdBQUcsVUFBSSxDQUFDLElBQUksQ0FBQyx3QkFBVyxFQUFF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LE1BQU0sQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQzNFLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDO0FBblBOLDhCQW9QQyIsImZpbGUiOiJjb21wb25lbnRzL3dpemFyZC93aXphcmRUZXN0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YnJvd3NlciwgYnksIGVsZW1lbnQsIHByb21pc2V9IGZyb20gXCJAc29sYXJ3aW5kcy91emkvcHJvdHJhY3RvclwiO1xuaW1wb3J0IHtBdG9tfSBmcm9tIFwiQHNvbGFyd2luZHMvdXppXCI7XG5pbXBvcnQge0J1dHRvbkF0b20sIENoZWNrYm94QXRvbSwgVGV4dGJveEF0b20sIFdpemFyZEF0b219IGZyb20gXCIuLi9pbmRleC5hdG9tXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpemFyZFRlc3RzIHtcbiAgICBwdWJsaWMgc3RhdGljIHdpemFyZDogV2l6YXJkQXRvbTtcbiAgICBwdWJsaWMgc3RhdGljIHJ1biA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRQcm9taXNlRGVsYXkgPSAxMDAwO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGRlZmluZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KFdpemFyZFRlc3RzLndpemFyZCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgaGF2ZSAzIHN0ZXBzXCIsICgpID0+IHtcbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5nZXRTdGVwcygpLnRoZW4oKHN0ZXBzKT0+IHtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc3RlcHMubGVuZ3RoKS50b0JlKDMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2xpY2tpbmcgb24gYWRkaXRpb25hbCBidXR0b24gc2hvdWxkIGRvIHNvbWV0aGluZ1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQuYWRkaXRpb25hbEJ1dHRvbnMudGhlbigoYnV0dG9ucykgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbnNbMF0uY2xpY2soKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGlja2VkID0gQXRvbS5maW5kKENoZWNrYm94QXRvbSwgXCJhZGRpdGlvbmFsQnV0dG9uQ2xpY2tlZFwiKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoY2xpY2tlZC5pc0NoZWNrZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBkaXNwbGF5IHRpdGxlICYgc2hvcnQgdGl0bGVcIiwgKCkgPT4ge1xuICAgICAgICAgICAgV2l6YXJkVGVzdHMud2l6YXJkLmdldEhlYWRlclN0ZXBzKCkudGhlbigoc3RlcHMpPT4ge1xuICAgICAgICAgICAgICAgIGV4cGVjdChzdGVwc1swXSkudG9CZShcIlN0ZXAgT25lXCIpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChzdGVwc1sxXSkudG9CZShcIjJcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgbm90IHNob3cgYmFjayBidXR0b24gb24gZmlyc3Qgc3RlcFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QoV2l6YXJkVGVzdHMud2l6YXJkLmJhY2tCdXR0b24uaXNWaXNpYmxlKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBiZSBhYmxlIHRvIGdvIG5leHRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWwgPSBlbGVtZW50KGJ5LmlkKFwiZWxlbWVudE9uU3RlcDJcIikpO1xuICAgICAgICAgICAgZXhwZWN0KGVsLmlzRGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuXG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQubmV4dCgpO1xuXG4gICAgICAgICAgICBleHBlY3QoV2l6YXJkVGVzdHMud2l6YXJkLmdldEN1cnJlbnRTdGVwVGl0bGUoKS50aGVuKCh0ZXh0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfSkpLnRvQmUoXCJzdGVwIHR3b1wiKTtcblxuICAgICAgICAgICAgZXhwZWN0KGVsLmlzRGlzcGxheWVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIG5vdCBiZSBhYmxlIHRvIGNsaWNrIG9uIGhlYWRlciBzdGVwcyB1bnRpbCB2aXNpdGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsID0gZWxlbWVudChieS5pZChcImVsZW1lbnRPblN0ZXAyXCIpKTtcbiAgICAgICAgICAgIGV4cGVjdChlbC5pc0Rpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5nb1RvU3RlcCgxKTtcbiAgICAgICAgICAgIGV4cGVjdChlbC5pc0Rpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5uZXh0KCk7XG4gICAgICAgICAgICBleHBlY3QoZWwuaXNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgYmUgYWJsZSB0byBtb3ZlIGJ5IGNsaWNraW5nIG9uIGhlYWRlciBzdGVwc1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbCA9IGVsZW1lbnQoYnkuaWQoXCJlbGVtZW50T25TdGVwMVwiKSk7XG4gICAgICAgICAgICBleHBlY3QoZWwuaXNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcblxuICAgICAgICAgICAgV2l6YXJkVGVzdHMud2l6YXJkLm5leHQoKTtcbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5uZXh0KCk7XG4gICAgICAgICAgICBleHBlY3QoZWwuaXNEaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIHN0ZXAgdG8gZmluaXNoLlxuICAgICAgICAgICAgYnJvd3Nlci5zbGVlcChleHBlY3RlZFByb21pc2VEZWxheSk7XG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQuZ29Ub1N0ZXAoMCk7XG4gICAgICAgICAgICBleHBlY3QoZWwuaXNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgYmUgYWJsZSB0byBnbyBiYWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsID0gZWxlbWVudChieS5pZChcImVsZW1lbnRPblN0ZXAxXCIpKTtcbiAgICAgICAgICAgIGV4cGVjdChlbC5pc0Rpc3BsYXllZCgpKS50b0JlKHRydWUpO1xuXG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQubmV4dCgpO1xuXG4gICAgICAgICAgICBleHBlY3QoZWwuaXNEaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQuYmFjaygpO1xuICAgICAgICAgICAgZXhwZWN0KGVsLmlzRGlzcGxheWVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGFibGUgdG8gZGlzYWJsZSBmb3J3YXJkL2JhY2sgbmF2aWdhdGlvblwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5Hb05leHQgPSBBdG9tLmZpbmQoQ2hlY2tib3hBdG9tLCBcImNhbkdvTmV4dFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbkdvQmFjayA9IEF0b20uZmluZChDaGVja2JveEF0b20sIFwiY2FuR29CYWNrXCIpO1xuXG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQubmV4dCgpO1xuXG4gICAgICAgICAgICBleHBlY3QoV2l6YXJkVGVzdHMud2l6YXJkLmJhY2tCdXR0b24uaXNEaXNhYmxlZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChXaXphcmRUZXN0cy53aXphcmQubmV4dEJ1dHRvbi5pc0Rpc2FibGVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgY2FuR29OZXh0LmNsaWNrKCk7XG4gICAgICAgICAgICBjYW5Hb0JhY2suY2xpY2soKTtcbiAgICAgICAgICAgIGV4cGVjdChXaXphcmRUZXN0cy53aXphcmQuYmFja0J1dHRvbi5pc0Rpc2FibGVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QoV2l6YXJkVGVzdHMud2l6YXJkLm5leHRCdXR0b24uaXNEaXNhYmxlZCgpKS50b0JlKHRydWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBldmFsdWF0ZSBvbk5leHRTdGVwLG9uRW50ZXJTdGVwLG9uRXhpdFN0ZXBcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RlcDFFbnRlcmVkID0gQXRvbS5maW5kKENoZWNrYm94QXRvbSwgXCJzdGVwMVN0YXRlRW50ZXJlZFwiKTtcbiAgICAgICAgICAgIGNvbnN0IHN0ZXAxRXhpdGVkID0gQXRvbS5maW5kKENoZWNrYm94QXRvbSwgXCJzdGVwMVN0YXRlRXhpdGVkXCIpO1xuICAgICAgICAgICAgY29uc3Qgc3RlcDJFbnRlcmVkID0gQXRvbS5maW5kKENoZWNrYm94QXRvbSwgXCJzdGVwMlN0YXRlRW50ZXJlZFwiKTtcbiAgICAgICAgICAgIGNvbnN0IHN0ZXAyRXhpdGVkID0gQXRvbS5maW5kKENoZWNrYm94QXRvbSwgXCJzdGVwMlN0YXRlRXhpdGVkXCIpO1xuICAgICAgICAgICAgY29uc3Qgc3RlcDNFbnRlcmVkID0gQXRvbS5maW5kKENoZWNrYm94QXRvbSwgXCJzdGVwM1N0YXRlRW50ZXJlZFwiKTtcbiAgICAgICAgICAgIGNvbnN0IHN0ZXAzRXhpdGVkID0gQXRvbS5maW5kKENoZWNrYm94QXRvbSwgXCJzdGVwM1N0YXRlRXhpdGVkXCIpO1xuXG4gICAgICAgICAgICBleHBlY3Qoc3RlcDFFbnRlcmVkLmlzQ2hlY2tlZCgpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHN0ZXAxRXhpdGVkLmlzQ2hlY2tlZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGVwMkVudGVyZWQuaXNDaGVja2VkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgZXhwZWN0KHN0ZXAyRXhpdGVkLmlzQ2hlY2tlZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGVwM0VudGVyZWQuaXNDaGVja2VkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgZXhwZWN0KHN0ZXAzRXhpdGVkLmlzQ2hlY2tlZCgpKS50b0JlKGZhbHNlKTtcblxuICAgICAgICAgICAgV2l6YXJkVGVzdHMud2l6YXJkLm5leHQoKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGVwMUVudGVyZWQuaXNDaGVja2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RlcDFFeGl0ZWQuaXNDaGVja2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RlcDJFbnRlcmVkLmlzQ2hlY2tlZCgpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHN0ZXAyRXhpdGVkLmlzQ2hlY2tlZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGVwM0VudGVyZWQuaXNDaGVja2VkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgZXhwZWN0KHN0ZXAzRXhpdGVkLmlzQ2hlY2tlZCgpKS50b0JlKGZhbHNlKTtcblxuICAgICAgICAgICAgV2l6YXJkVGVzdHMud2l6YXJkLm5leHQoKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGVwMUVudGVyZWQuaXNDaGVja2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RlcDFFeGl0ZWQuaXNDaGVja2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RlcDJFbnRlcmVkLmlzQ2hlY2tlZCgpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHN0ZXAyRXhpdGVkLmlzQ2hlY2tlZCgpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHN0ZXAzRW50ZXJlZC5pc0NoZWNrZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGVwM0V4aXRlZC5pc0NoZWNrZWQoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5iYWNrKCk7XG4gICAgICAgICAgICBleHBlY3Qoc3RlcDFFbnRlcmVkLmlzQ2hlY2tlZCgpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHN0ZXAxRXhpdGVkLmlzQ2hlY2tlZCgpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHN0ZXAyRW50ZXJlZC5pc0NoZWNrZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGVwMkV4aXRlZC5pc0NoZWNrZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGVwM0VudGVyZWQuaXNDaGVja2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RlcDNFeGl0ZWQuaXNDaGVja2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIG1haW50YWluIGNvbnN1bWVyIHN0YXRlXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0VmFsdWUgPSBcImlucHV0IGZvciB0ZXh0Ym94XCI7XG5cbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5uZXh0KCk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IEF0b20uZmluZChUZXh0Ym94QXRvbSwgXCJzdGVwMklucHV0RmllbGRcIik7XG4gICAgICAgICAgICBleHBlY3QoaW5wdXQpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgICAgICAgIGlucHV0LmFjY2VwdFRleHQoaW5wdXRWYWx1ZSk7XG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQubmV4dCgpO1xuXG4gICAgICAgICAgICBjb25zdCBlbFJlc3VsdCA9IGVsZW1lbnQoYnkuaWQoXCJzdGVwMklucHV0UmVzdWx0XCIpKTtcbiAgICAgICAgICAgIGV4cGVjdChlbFJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgICAgIGV4cGVjdChlbFJlc3VsdC5nZXRUZXh0KCkpLnRvQmUoaW5wdXRWYWx1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGFibGUgdG8gdHJhY2sgY3VycmVudFN0ZXBJbmRleFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQubmV4dCgpO1xuXG4gICAgICAgICAgICBjb25zdCBpbmRleElucHV0ID0gZWxlbWVudChieS5pZChcImN1cnJlbnRTdGVwSW5kZXhcIikpO1xuICAgICAgICAgICAgZXhwZWN0KGluZGV4SW5wdXQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIikpLnRvQmUoXCIxXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBiZSBhYmxlIHRvIHNldCBjdXJyZW50U3RlcCBieSBjdXJyZW50U3RlcEluZGV4XCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4SW5wdXQgPSBlbGVtZW50KGJ5LmlkKFwiY3VycmVudFN0ZXBJbmRleFwiKSk7XG5cbiAgICAgICAgICAgIGluZGV4SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICAgIGluZGV4SW5wdXQuc2VuZEtleXMoXCIyXCIpO1xuXG4gICAgICAgICAgICBjb25zdCBlbCA9IGVsZW1lbnQoYnkuaWQoXCJlbGVtZW50T25TdGVwM1wiKSk7XG4gICAgICAgICAgICBleHBlY3QoZWwuaXNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgYmUgYWJsZSB0byBnZXQgdG8gbGFzdCBzdGVwXCIsICgpID0+IHtcbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5uZXh0KCk7XG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQubmV4dCgpO1xuXG4gICAgICAgICAgICAvLyBXYWl0IGZvciBzdGVwIHRvIGZpbmlzaC5cbiAgICAgICAgICAgIGJyb3dzZXIuc2xlZXAoZXhwZWN0ZWRQcm9taXNlRGVsYXkpO1xuICAgICAgICAgICAgY29uc3QgZWwgPSBlbGVtZW50KGJ5LmlkKFwiZWxlbWVudE9uU3RlcDNcIikpO1xuICAgICAgICAgICAgZXhwZWN0KGVsLmlzRGlzcGxheWVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGFibGUgdG8gY2FuY2VsIG5leHRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWwgPSBlbGVtZW50KGJ5LmlkKFwiZWxlbWVudE9uU3RlcDJcIikpO1xuICAgICAgICAgICAgZXhwZWN0KGVsLmlzRGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuXG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQubmV4dCgpO1xuICAgICAgICAgICAgLy8gV2FpdCBmb3Igc3RlcCB0byBmaW5pc2guXG4gICAgICAgICAgICBicm93c2VyLnNsZWVwKGV4cGVjdGVkUHJvbWlzZURlbGF5KTtcbiAgICAgICAgICAgIGV4cGVjdChlbC5pc0Rpc3BsYXllZCgpKS50b0JlKHRydWUpO1xuXG4gICAgICAgICAgICBjb25zdCBzaG91bGRDYW5jZWwgPSBBdG9tLmZpbmQoQ2hlY2tib3hBdG9tLCBcInNob3VsZENhbmNlbE5leHRcIik7XG4gICAgICAgICAgICBzaG91bGRDYW5jZWwuY2xpY2soKTtcbiAgICAgICAgICAgIGV4cGVjdChzaG91bGRDYW5jZWwuaXNDaGVja2VkKCkpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5uZXh0KCk7XG4gICAgICAgICAgICBleHBlY3QoZWwuaXNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgYmUgYWJsZSB0byBjYW5jZWwgZmluaXNoXCIsICgpID0+IHtcbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5uZXh0KCk7XG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQubmV4dCgpO1xuXG4gICAgICAgICAgICAvLyBXYWl0IGZvciBzdGVwIHRvIGZpbmlzaC5cbiAgICAgICAgICAgIGJyb3dzZXIuc2xlZXAoZXhwZWN0ZWRQcm9taXNlRGVsYXkpO1xuXG4gICAgICAgICAgICBjb25zdCBzaG91bGRDYW5jZWwgPSBBdG9tLmZpbmQoQ2hlY2tib3hBdG9tLCBcInNob3VsZENhbmNlbE5leHRcIik7XG4gICAgICAgICAgICBzaG91bGRDYW5jZWwuY2xpY2soKTtcbiAgICAgICAgICAgIGV4cGVjdChzaG91bGRDYW5jZWwuaXNDaGVja2VkKCkpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5maW5pc2goKTtcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIHN0ZXAgdG8gZmluaXNoLlxuICAgICAgICAgICAgYnJvd3Nlci5zbGVlcChleHBlY3RlZFByb21pc2VEZWxheSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGZpbmlzaGVkID0gQXRvbS5maW5kKENoZWNrYm94QXRvbSwgXCJ3aXphcmRGaW5pc2hlZFwiKTtcbiAgICAgICAgICAgIGV4cGVjdChmaW5pc2hlZC5pc0NoZWNrZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGFibGUgdG8gY2FuY2VsXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbGxlZCA9IEF0b20uZmluZChDaGVja2JveEF0b20sIFwid2l6YXJkQ2FuY2VsbGVkXCIpO1xuICAgICAgICAgICAgZXhwZWN0KGNhbmNlbGxlZC5pc0NoZWNrZWQoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5jYW5jZWwoKTtcbiAgICAgICAgICAgIGV4cGVjdChjYW5jZWxsZWQuaXNDaGVja2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGFibGUgdG8gZmluaXNoXCIsICgpID0+IHtcbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5uZXh0KCk7XG4gICAgICAgICAgICBXaXphcmRUZXN0cy53aXphcmQubmV4dCgpO1xuXG4gICAgICAgICAgICAvLyBXYWl0IGZvciBzdGVwIHRvIGZpbmlzaC5cbiAgICAgICAgICAgIGJyb3dzZXIuc2xlZXAoZXhwZWN0ZWRQcm9taXNlRGVsYXkpO1xuICAgICAgICAgICAgV2l6YXJkVGVzdHMud2l6YXJkLmZpbmlzaCgpO1xuXG4gICAgICAgICAgICBjb25zdCBmaW5pc2hlZCA9IEF0b20uZmluZChDaGVja2JveEF0b20sIFwid2l6YXJkRmluaXNoZWRcIik7XG4gICAgICAgICAgICBleHBlY3QoZmluaXNoZWQuaXNDaGVja2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGFibGUgdG8gaW5zZXJ0IGEgc3RlcFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnNlcnRCdG4gPSBBdG9tLmZpbmQoQnV0dG9uQXRvbSwgXCJpbnNlcnRTdGVwQnV0dG9uXCIpO1xuICAgICAgICAgICAgaW5zZXJ0QnRuLmNsaWNrKCk7XG5cbiAgICAgICAgICAgIFdpemFyZFRlc3RzLndpemFyZC5uZXh0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGVsID0gZWxlbWVudChieS5pZChcImVsZW1lbnRPbkluc2VydGVkU3RlcFwiKSk7XG4gICAgICAgICAgICBleHBlY3QoZWwuaXNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChXaXphcmRUZXN0cy53aXphcmQuZ2V0Q3VycmVudFN0ZXBUaXRsZSgpKS50b0JlKFwiSW5zZXJ0ZWQgU3RlcFwiKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
