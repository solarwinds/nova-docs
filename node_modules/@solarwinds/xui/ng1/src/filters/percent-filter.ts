import IPercentFilter = xui.IPercentFilter;

/** @ngInject */
function percentFilter($filter:ng.IFilterService): IPercentFilter {

    return function (input:number, decimals:number, suffix:string) {
        decimals = angular.isNumber(decimals) ? decimals : 2;
        suffix = suffix || "%";
        console.log(input);
        if (isNaN(input)) {
            return "---";
        }

        if (input > 1) {
            input = input / 100;
        }

        let result = Math.round(input * Math.pow(10, decimals + 2)) / Math.pow(10, decimals);
        return $filter("number")(result, decimals) + suffix;
    };
}

export default percentFilter;
