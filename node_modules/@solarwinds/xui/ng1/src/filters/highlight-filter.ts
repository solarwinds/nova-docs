 /**
 * @ngdoc filter
 * @name xui.filter:xuiHighlight
 * @restrict A
 *
 * @description
 * Filter used for highlighting part of the plain text in a search and returns HTML. It is recommended to be used
  * with the `ng-bind-html` directive.
 *
 * @param {string} text The source text.
 * @param {string} searchTerm The search term to be highlighted.
 *
 * @example xuiHighlightFilter example
 * <example module="xui">
     <file src="src/filters/docs/highlight-example.html" name="index.html"></file>
     <file src="src/filters/docs/highlight-example.js" name="app.js"></file>
   </example>
 */

function highlight($sce:ng.ISCEService) {
    return function(text:string, search:string) {
        if (!search) {
            return $sce.trustAsHtml(text);
        }

        // escaping search string to be used as Regex pattern
        const escSearch = search.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
        return $sce.trustAsHtml(text.replace(new RegExp(escSearch, "gi"), "<span class=\"xui-highlighted\">$&</span>"));
      };
}
highlight.$inject = ["$sce"];

export default highlight;
