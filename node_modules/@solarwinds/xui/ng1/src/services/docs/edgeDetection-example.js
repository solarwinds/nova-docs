(function () {
    "use strict";

    Xui.module
        .controller("DemoEdgeDetectionController", DemoEdgeDetectionController, ["xuiEdgeDetectionService", "$element"]);

    function DemoEdgeDetectionController(edgeDetection, $element) {
        var vm = this;

        vm.showPlaced = {};
        vm.showAligned = {};
        vm.deposit = {
            width: 100,
            height: 50
        };
        vm.parentComponent = {
            width: 300,
            height: 150
        };
        vm.addEdgeDefinerClass = false;

        vm.update = function () {
            var basePointElement = $element.find(".base-point-element");
            var toBePlacedElement = $element.find(".deposit-reference");

            if (vm.parentComponent.width < 300) vm.parentComponent.width = 300;
            if (vm.parentComponent.height < 50) vm.parentComponent.height = 50;

            if (vm.addEdgeDefinerClass) {
                angular.element(".parent-component").addClass("xui-edge-definer");
            } else {
                angular.element(".parent-component").removeClass("xui-edge-definer");
            }

            vm.canBe = edgeDetection.canBe(basePointElement, toBePlacedElement);
        };

        vm.update();
    }
})();