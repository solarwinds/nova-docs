<div class="xui-wizard">
    <div class="xui-wizard__header-wrapper" xui-busy="wizCtrl.isBusy" xui-busy-message="{{wizCtrl.nextBusyText}}">
        <div class="xui-wizard__header" ng-if="wizCtrl.hideHeader !== 'true' && !(wizCtrl.isLastStep() && wizCtrl.hasSummaryStep)">
            <ul class="xui-wizard__header-steps">
                <li ng-repeat="step in wizCtrl.steps"
                    uib-tooltip="{{ ::step.title }}"
                    ng-click="wizCtrl.allowNavigation && !wizCtrl.disableHeaderNav && step.visited && !step.active && wizCtrl.goToStep(step)"
                    ng-disabled="!step.visited || (!wizCtrl.canGoBack() && wizCtrl.currentStepIndex>wizCtrl.getStepIndex(step))"
                    class="xui-wizard__header-step"
                    ng-class="{
                        'xui-wizard__header-step--first':$first,
                        'xui-wizard__header-step--last':$last,
                        'xui-wizard__header-step--visited':step.visited,
                        'xui-wizard__header-step--active':wizCtrl.isCurrentStep(step),
                        'xui-wizard__header-step--complete':step.complete
                    }">
                    <div class="xui-wizard__header-step-container">
                        <div class="xui-wizard__header-step-row">
                            <div class="xui-wizard__header-step-col left">
                                <div class="xui-wizard__header-step-line"></div>
                            </div>
                            <div class="xui-wizard__header-step-col middle">
                                <div class="xui-wizard__header-step-content">
                                    <span class="xui-wizard__header-step-link">
                                        <xui-icon icon="{{ step.icon }}" is-dynamic="true" icon-size="small"></xui-icon>
                                        <span class="xui-wizard__header-step-title animated fadeIn">{{::step.shortTitle || step.title }}</span>
                                    </span>
                                </div>
                            </div>
                            <div class="xui-wizard__header-step-col right">
                                <div class="xui-wizard__header-step-line"></div>
                            </div>
                        </div>
                    </div>
                    <div class="xui-wizard__header-step-container-bottom">
                        <div class="xui-wizard__header-step-content">
                            <span class="xui-wizard__header-step-link">
                                <span class="xui-wizard__header-step-title animated fadeIn">{{::step.shortTitle || step.title }}</span>
                            </span>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="xui-wizard__steps">
            <h2 class="xui-wizard__title" ng-if="wizCtrl.currentStep.title">{{ wizCtrl.currentStep.title }}</h2>
            <div ng-show="wizCtrl.currentStep.description" class="xui-wizard__description">{{ wizCtrl.currentStep.description }}</div>
            <div ng-transclude></div>
            <xui-wizard-step ng-if="::wizCtrl.hasSummaryStep" label="$xui-summary" title="{{ ::'xui_wizard_summaryStepTitle' | translate }}" on-enter="wizCtrl.summarize()" class="xui-wizard__step-summary">
                <div xui-wizard-summary-transclude="summaryTranscluded"></div>
            </xui-wizard-step>
        </div>
    </div>
    <div class="xui-wizard__footer">
        <xui-button ng-click="wizCtrl.back()" ng-show="wizCtrl.showBack()" is-disabled="!wizCtrl.canGoBack() || wizCtrl.isBusy" class="pull-left xui-wizard__back-button">
            <span>{{ ::'xui_wizard_back' | translate }}</span>
        </xui-button>
        <xui-button ng-repeat="button in wizCtrl.additionalButtons" is-disabled="button.isDisabled" ng-click="button.action()" class="xui-wizard__additional-button">
            <span>{{button.text}}</span>
        </xui-button>
        <xui-button ng-click="wizCtrl.next()" ng-show="wizCtrl.showNext()" is-disabled="!wizCtrl.canGoNext() || wizCtrl.isBusy" display-style="primary" class="xui-wizard__next-button">
            <span>{{ wizCtrl.currentStep.nextText || ('xui_wizard_next' | translate) }}</span>
        </xui-button>
        <xui-button ng-click="wizCtrl.finish()" ng-show="wizCtrl.showFinish()" display-style="primary" is-disabled="wizCtrl.isBusy" class="xui-wizard__finish-button">
            <span>{{ ::wizCtrl.finishText || ('xui_wizard_finish' | translate) }}</span>
        </xui-button>
        <xui-button ng-click="wizCtrl.cancel()" ng-show="wizCtrl.showCancel()" display-style="tertiary" is-disabled="wizCtrl.isBusy" class="xui-wizard__cancel-button">
            <span>{{ ::'xui_wizard_cancel' | translate }}</span>
        </xui-button>
    </div>
</div>
