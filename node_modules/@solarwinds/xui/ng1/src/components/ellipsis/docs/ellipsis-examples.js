(function () {
    "use strict";

    Xui.module
        .controller("DemoEllipsisController", DemoEllipsisController);

    function DemoEllipsisController() {
        var resizableEl = document.getElementById("xui-demo-resizable-div");
        var startX = null;
        var startWidth = null;
        var vm = this;

        vm.title = "HTML is great for declaring static documents, " +
            "but it falters when we try to use it for declaring dynamic views in web-applications.";
        vm.tooltip = "The tooltip differs from actual title";
        vm.options = {
            tooltipText: vm.tooltip,
            htmlBindTemplate: 'vm.title | xuiHighlight:"HTML"'
        };
        vm.optionsWithTooltip = {
            tooltipText: vm.tooltip,
            tooltipOptions: {
                "tooltip-placement": "bottom"
            }
        };

        vm.initDrag = function (event) {
            startX = event.clientX;
            startWidth = _.parseInt(document.defaultView.getComputedStyle(resizableEl).width);
            document.documentElement.addEventListener('mousemove', startDrag, false);
            document.documentElement.addEventListener('mouseup', stopDrag, false);
        };

        function startDrag(event) {
            resizableEl.style.width = (startWidth + event.clientX - startX) + 'px';
        }

        function stopDrag(event) {
            document.documentElement.removeEventListener('mousemove', startDrag, false);
            document.documentElement.removeEventListener('mouseup', stopDrag, false);
        }
    }
})();
