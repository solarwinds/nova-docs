import {PageContentController} from "./pageContent-controller";

describe("components >", ()=> {
    describe("pageContent >", ()=> {
        describe("controller >", ()=> {
            let $compile:ng.ICompileService,
                $controller:ng.IControllerService,
                $scope:ng.IScope,
                ctrl:PageContentController,
                template = ` <xui-page-content>
                                <xui-page-header>
                                    <span>Busy Bee</span>
                                </xui-page-header>
                                <p>
                                    Loading...
                                </p>
                            </xui-page-content>`;

            beforeEach(angular.mock.module("xui"));
            beforeEach(inject(($injector:any)=> {
                $compile = $injector.get("$compile");
                $controller = $injector.get("$controller");
                $scope = $injector.get("$rootScope").$new();
                ctrl = <PageContentController>$controller("xuiPageContentController");
            }));

            it("should initialize default title", () => {
                expect(ctrl.pageTitle).toBeUndefined();
                ctrl.init("my title");
                expect(ctrl.pageTitle).toBe("my title");
            });

            it("should indicate if the title link should be shown", () => {
                expect(ctrl.showLink()).toBe(false);
                ctrl.linkText = "http://myLink.org";
                expect(ctrl.showLink()).toBe(true);
            });

            it("should indicate if the title link-icon should be shown", () => {
                expect(ctrl.showIcon()).toBe(false);
                ctrl.linkIcon = "http://myLink.org/myIcon.png";
                expect(ctrl.showIcon()).toBe(true);
            });

            it("should set pageLayout to fullWidth by default ", () => {
                const element = $compile(template)($scope);
                $scope.$digest();
                ctrl = element.controller("xuiPageContent");
                expect(ctrl.pageLayout).toBe("fullWidth");
            });
        });
    });
});
