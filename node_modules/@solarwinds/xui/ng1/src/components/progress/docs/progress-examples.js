(function () {
    "use strict";

    Xui.module
        .controller("DemoProgressController", DemoProgressController, ["$interval", "xuiToastService"]);

    function DemoProgressController($interval, toastService) {
        var vm = this;
        var stop;

        vm.percent = 0;
        vm.show = false;

        vm.startProgress = function () {
            vm.show = true;
            vm.percent = 0;

            stop = $interval(function () {
                if (vm.percent < 100) {
                    vm.percent += 10;
                }
            }, 1000);
        };

        vm.onCancel = function () {
            if (angular.isDefined(stop)) {
                vm.show = false;
                $interval.cancel(stop);
                stop = undefined;
                vm.percent = 0;
            }
            toastService.info("Progress cancelled by user.");
        };
    }
})();