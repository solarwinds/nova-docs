
import FileUploadController from  "./fileUpload-controller";

describe("components >", () => {
    describe("fileUpload >", () => {
        describe("controller >", () => {
            let $scope: ng.IRootScopeService,
                $controller: ng.IControllerService,
                $timeout: ng.ITimeoutService,
                ctrl: FileUploadController,
                mockFile = new File(["mock content"], "mockfile.txt");

            beforeEach( () => {
                angular.mock.module("xui");
                angular.mock.inject(($injector: any) => {
                    $scope = $injector.get("$rootScope");
                    $controller = $injector.get("$controller");
                    $timeout = $injector.get("$timeout");
                    ctrl = <FileUploadController>$controller("xuiFileUploadController",
                        {$scope: $scope, $timeout: $timeout});
                });
            });

            it("isFileSelected should be equal to false initially", () => {
                expect(ctrl.isFileSelected).toBe(false);
            });

            it("remove function should clear information about file", () => {
                ctrl.file = mockFile;
                ctrl.isFileSelected = true;
                ctrl.fileName = mockFile.name;
                ctrl.remove();
                expect(ctrl.file).toBeNull();
                expect(ctrl.isFileSelected).toBe(false);
                expect(ctrl.fileName).toBe("");
            });
        });
    });
});
