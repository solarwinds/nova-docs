<div class="xui-textbox"
     ng-class="{ 'has-error': textCtrl.isInErrorState(), 'has-warning':textCtrl.isInWarningState() && !textCtrl.isInErrorState(),
      'xui-textbox--disabled': textCtrl.isDisabled }">
    <div class="xui-textbox__control-label-container">
        <label for="{{::name}}" class="xui-textbox__control-label">{{::textCtrl.caption}}</label>
        <span class="xui-textbox__state-text">{{textCtrl.stateText()}}</span>
    </div>
    <div class="has-feedback" ng-class="{'xui-textbox__input-wrapper--inline' : textCtrl.suffix}"
         ng-style="{ 'width': textCtrl.customBoxWidth }">
        <!--One of these elements will be removed in the compile stage, based on the rows property-->
        <input ng-non-bindable name="{{::name}}"
               class="form-control xui-textbox__input"
               ng-class="{ 'xui-textbox__input--icon': textCtrl.showFeedback()}"
               placeholder="{{::textCtrl.placeholder}}"
               type="{{::textCtrl.type || 'text'}}"
               xui-model-warning
               ng-model="textCtrl.value"
               ng-model-options="textCtrl.modelOptions || { updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 } }"
               ng-disabled="textCtrl.isDisabled"
               ng-readonly="textCtrl.isReadOnly"
               ng-change="textCtrl.onChange()"
               ng-blur="textCtrl.onBlur($event)"
               ng-focus="textCtrl.onFocus($event)"
               ng-required="textCtrl.isRequired"/>

        <textarea ng-non-bindable name="{{::name}}"
                  class="form-control xui-textbox__input xui-textbox__input--multiline"
                  ng-attr-placeholder="{{::textCtrl.placeholder}}"
                  type="{{::textCtrl.type || 'text'}}"
                  rows="{{::textCtrl.rows}}"
                  xui-model-warning
                  ng-model="textCtrl.value"
                  ng-model-options="textCtrl.modelOptions || { updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 } }"
                  ng-disabled="textCtrl.isDisabled"
                  ng-readonly="textCtrl.isReadOnly"
                  ng-change="textCtrl.onChange()"
                  ng-blur="textCtrl.onBlur($event)"
                  ng-focus="textCtrl.onFocus($event)"
                  ng-required="textCtrl.isRequired"></textarea>


            <xui-icon icon="{{textCtrl.iconValidationState}}" css-class="form-control-feedback" is-dynamic="true"
                      icon-size="small" ng-if="textCtrl.isInErrorState() || textCtrl.isPending() || textCtrl.isInWarningState()"           
                      aria-hidden="true">
            </xui-icon>

        <div class="form-control-feedback xui-textbox__busy">
            <xui-spinner show="textCtrl.isPending()"></xui-spinner>
        </div>
        <div ng-if="::textCtrl.type == 'number'" >
            <span class="xui-textbox__updown xui-textbox__down-button">
            <xui-button display-style="tertiary" icon="caret-down" xui-repeat="true"
                        is-disabled="textCtrl.isDisabled || textCtrl.isReadOnly"
                        ng-click="textCtrl.addNumber(-1);"></xui-button>
            </span>
            <span class="xui-textbox__updown xui-textbox__updown-divider"></span>
            <span class="xui-textbox__updown xui-textbox__up-button">
            <xui-button display-style="tertiary" icon="caret-up" xui-repeat="true"
                        is-disabled="textCtrl.isDisabled || textCtrl.isReadOnly"
                        ng-click="textCtrl.addNumber(1);"></xui-button>
            </span>
        </div>
    </div>

    <span class="xui-textbox__suffix" ng-show="textCtrl.suffix">{{::textCtrl.suffix}}</span>
    <div ng-messages="textCtrl.input.$error" ng-show="textCtrl.isInErrorState()"
         class="xui-textbox__messages xui-validation" role="alert" ng-transclude></div>
    <div ng-messages="textCtrl.input.$xuiWarning" ng-show="textCtrl.isInWarningState()"
         class="xui-textbox__messages xui-textbox__messages--warning" role="alert" ng-transclude></div>
    <xui-help-hint ng-show="textCtrl.helpText" class="xui-textbox__help">{{::textCtrl.helpText}}</xui-help-hint>
</div>
