<div class="xui-chiclets"
     ng-class="['__' + vm.orientation, {'xui-chiclets__draggable': vm.isDraggable}]"
     ng-show="!(vm.isEmpty() && vm.autoHide)">

    <!--HORIZONTAL mode-->
    <div ng-if="vm.orientation === 'horizontal'" class="media">
        <h4 class="xui-chiclets__title-cell" ng-if="vm.title">
            <span class="xui-chiclets__title">{{ ::vm.title }}:</span>
            <span class="xui-chiclets__count">({{ vm.getItemsCount() }})</span>
        </h4>

        <!--grouped-->
        <div class="xui-chiclets__main-cell" ng-if="vm.hasGroups()">
            <span ng-repeat="groupId in vm.getGroupIds()" role="presentation" class="xui-chiclets__group">
                <span class="xui-chiclets__group-name">{{ vm.itemLabelFn({groupId: groupId}) }}</span>
                <span class="xui-chiclets__group-values">
                    <span ng-repeat="groupItem in vm.itemsSource[groupId]"
                          class="xui-chiclets__value" ng-click="vm.removeItem(groupItem,groupId)" tabindex="0">
                        <xui-icon icon="drag" icon-size="small" css-class="xui-chiclets__value-drag"></xui-icon>
                        <span class="xui-chiclets__value-name">
                            {{ vm.itemLabelFn({itemId: groupItem, groupId: groupId}) }}
                        </span>
                        <xui-icon icon="remove" icon-size="small" css-class="xui-chiclets__value-remove"></xui-icon>
                    </span>
                </span>
            </span>
        </div>

        <!--flat-->
        <div class="xui-chiclets__main-cell" ng-if="!vm.hasGroups()">
            <span class="xui-chiclets__group-values">
                <span ng-repeat="item in vm.itemsSource"
                      class="xui-chiclets__value" ng-click="vm.removeItem(item)" tabindex="0">
                    <xui-icon icon="drag" icon-size="small" css-class="xui-chiclets__value-drag"></xui-icon>
                    <span class="xui-chiclets__value-name">{{ vm.itemLabelFn({itemId: item}) }}</span>
                    <xui-icon icon="remove" icon-size="small" css-class="xui-chiclets__value-remove"></xui-icon>
                </span>
            </span>
        </div>

        <div class="xui-chiclets__clear-cell" ng-if="vm.allowClearAll">
            <a href class="xui-chiclets__clear" ng-click="vm.removeAllItems()">{{ ::vm.clearAllLinkText }}</a>
        </div>
    </div>

    <!--VERTICAL mode-->
    <div ng-if="vm.orientation === 'vertical'" class="media xui-chiclets-wrapper">
        <div>
            <h4 class="xui-chiclets__title-cell" ng-if="vm.title">
                <span class="xui-chiclets__title">{{ ::vm.title }}:</span>
                <span class="xui-chiclets__count">({{ vm.getItemsCount() }})</span>
            </h4>

            <a href ng-if="vm.allowClearAll"
               class="xui-chiclets__clear"
               ng-click="vm.removeAllItems()">{{::vm.clearAllLinkText }}</a>
        </div>

        <!--grouped-->
        <div ng-if="vm.hasGroups()" ng-repeat="groupId in vm.getGroupIds()" role="presentation" class="xui-chiclets__group">
            <div class="xui-chiclets__group-name">{{ vm.itemLabelFn({groupId: groupId}) }}</div>
            <div ng-repeat="groupItem in vm.itemsSource[groupId]"
                 ng-click="vm.removeItem(groupItem,groupId)"
                 class="xui-chiclets__value"
                 tabindex="0">
                <xui-icon icon="drag" icon-size="small" css-class="xui-chiclets__value-drag"></xui-icon>
                <span class="xui-chiclets__value-name">{{ vm.itemLabelFn({itemId: groupItem, groupId: groupId}) }}</span>
                <xui-icon icon="remove" icon-size="small" css-class="xui-chiclets__value-remove"></xui-icon>
            </div>
        </div>

        <!--flat-->
        <div ng-if="!vm.hasGroups()">
            <div ng-repeat="item in vm.itemsSource"
                 ng-click="vm.removeItem(item)"
                 class="xui-chiclets__value"
                 tabindex="0">
                <xui-icon icon="drag" icon-size="small" css-class="xui-chiclets__value-drag"></xui-icon>
                <span class="xui-chiclets__value-name">{{ vm.itemLabelFn({itemId: item}) }}</span>
                <xui-icon icon="remove" icon-size="small" css-class="xui-chiclets__value-remove"></xui-icon>
            </div>
        </div>
    </div>
</div>
