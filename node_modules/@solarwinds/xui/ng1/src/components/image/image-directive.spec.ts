import SpecHelper from "../../specHelper";
import {IImageScope} from "./image-directive";

describe("components >", () => {
    describe("image >", () => {
        let element: ng.IAugmentedJQuery;
        let scope: IImageScope;
        let compile: ng.ICompileService;

        beforeEach(angular.mock.module("xui"));

        beforeEach(inject(function ($compile: ng.ICompileService, $rootScope: IImageScope) {
            compile = $compile;
            scope = $rootScope.$new();
        }));

        const okRobotImage = "<xui-image image='ok-robot' size='200px' float='left' margin='large'></xui-image>";
        const customImage = "<xui-image image='http://oriondemo.solarwinds.com/Orion/LogoImageHandler.ashx?" +
            "f=logo&id=SitelogoImage'></xui-image>";

        it("should set specified size to image", () => {
            element = SpecHelper.getCompiledElement(compile, scope, okRobotImage);
            expect(element.width()).toEqual(200);
        });

        it("should set appropriate floating", () => {
            element = SpecHelper.getCompiledElement(compile, scope, okRobotImage);
            expect(element.hasClass("xui-image__left")).toBeTruthy();
        });

        it("should set appropriate margins", () => {
            element = SpecHelper.getCompiledElement(compile, scope, okRobotImage);
            expect(element.hasClass("xui-image__margin-large")).toBeTruthy();
        });

        it("should render custom path images", () => {
            const path = "http://oriondemo.solarwinds.com/Orion/LogoImageHandler.ashx?f=logo&id=SitelogoImage";
            element = SpecHelper.getCompiledElement(compile, scope, customImage);
            const img = element.children("img");
            expect(img).toBeDefined();
            expect(img.attr("src")).toEqual(path);
        });

    });
});
