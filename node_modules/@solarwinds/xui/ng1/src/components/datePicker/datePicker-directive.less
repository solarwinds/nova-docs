@import (reference) "../../styles/xui-framework-variables.less";
@import (reference) "../../styles/xui-framework-base.less";
@import (reference) "../../styles/xui-icon-backgrounds.less";
@import (reference) "../../styles/mixins.less";

@xui-datepicker-width: 120px;

.xui .xui-datepicker {

    &__textbox {
        padding-left: 32px; //20 icon + 7 right margin + 5 left margin
        color: @xui-color-input-focus;

        &.borderless {
            border: none;
            height: auto;
            width: 0px;
            padding: 0px;
            .no-shadow();
            
        }

        &:disabled {
            pointer-events: none;
        }

        &:not(:focus) {
            cursor: pointer;
        }

        &.ng-invalid-date {
            &:extend(.has-error .form-control all);
        }
    }

    &__input-group {
        width: @xui-datepicker-width;
        min-height: 20px;
    }

    &.has-error {
        & .xui-datepicker__messages div[ng-message] {
            clear: both;
            margin: 0 0 @xui-space-sm 0;
            line-height: @line-height-small;
            font-size: @xui-font-size-small;
            font-weight: @xui-font-weight-bold;
        }
    }

    // removes the X for textboxes in IE
    input.xui-datepicker__textbox::-ms-clear {
        display: none;
    }

    .uib-datepicker-popup.dropdown-menu {
        display: block;
    }

    &__icon {
        position: absolute;
        top: 5px;
        left: 5px;
        z-index: @zindex-active+1;
        &.disabled {
            pointer-events: none;
        }

        &.icon-only {
            border: none;
            margin: -5px 0 0 -5px;
            .no-shadow();
        }
    }

    .dropdown-menu {
        margin-top: 0;
        padding: @padding-base-vertical+@padding-large-vertical @padding-large-horizontal @padding-base-vertical;
    }

    // centers Today button and make it use the whole width
    span.btn-group.pull-left {
        width: 100%;
        top: -10px; // to move up the today button because it has inline styles embeded inside uib-datepicker
    }

    // customizes Today button
    span.pull-left > .btn-info {
        background-color: white;
        border-color: white;
        color: @link-blue;
        font-weight: normal;
        width: 100%;
    }

    // hides Clear and Done buttons
    .btn-success, .btn-danger {
        display: none;
    }

    // sets border and removes shadow for inline datepicker
    > .well {
        padding: @padding-large-horizontal;
        .no-shadow();
        border: 1px solid @xui-color-input-focus;
    }

    table {
        height: 240px; // 30*7 + 15*2 (7 cells + padding) (min-height doesn't work for tables in FF)
        min-width: 242px; // 30*7 + 15*2 (added 2 pixels to compensate extra width of 3 letters day name)
        outline: none;

        .active {
            outline: 1px solid @xui-color-border;
            .no-shadow();
        }

        // removes borders of elements in the calendar
        button.btn.btn-default {
            border: 0;
            font-size: 12px; // sets font size for elements within calendar
        }

        // forces buttons height to make highlighting of the button cover whole table cell (TD)
        td.uib-day > .btn.btn-default {
            min-height: 32px; // 12px for the font,1.5 line height
        }

        td.uib-month {
            width: (100% / 3);

            > .btn.btn-default {
                min-height: 53px;
            }
        }

        td.uib-year > .btn.btn-default {
            min-height: 53px;
        }

        //sets highlighting for hovered elements in calendar
        .btn.btn-default:not(.active):hover {
            color: @xui-color-active-hover;
            background-color: @xui-color-input-bg-hvr;
        }

        // sets font for days in the calendar
        button > span {
            font-weight: normal;
        }

        // sets font for month and year header
        button > strong {
            font-weight: normal;
        }

        // sets font for Today date
        button > span.text-info {
            font-weight: bold;
            color: @hover-blue;
        }

        > thead {
            button.btn.btn-default.btn-sm {
                width: 100%;
                height: 26px;
                padding-top: 0;
                padding-bottom: 0;

                > i {
                    &.glyphicon {
                        width: @icon-size-small;
                        height: @icon-size-small;
                        vertical-align: middle;
                        background-repeat: no-repeat;
                        margin-top: -3px;
                        display: inline-block;
                        background-size: 16px;

                        &.glyphicon-chevron-left {
                            .xui-icon-name-move-left();
                        }
                        &.glyphicon-chevron-right {
                            .xui-icon-name-move-right();
                        }
                        &:before {
                            content: normal;
                        }
                    }
                }
            }
        }

        // sets selected and today's date bold
        button.active.btn-info > span {
            font-weight: bold;
        }

        // sets selected text white
        > tbody {
            .btn-info {
                > .text-info {
                    color: @xui-color-active-text;
                }
            }
        }

        // sets the color for year button disabled (default is opacity 0.4)
        th > button.uib-title:disabled {
            color: @xui-color-inactive;
            opacity: 1;
        }

        th > small {
            font-size: 12px; // sets font size for elements names overriding small element inside bootstrap component
        }

    }

    /***************** MODIFIERS *****************/

    &--inline {
        display: inline-block;
        &.disabled {
            pointer-events: none;
            .opacity(@disabled-opacity);
        }
    }

    &--justified {
        .xui-datepicker__input-group {
            width: 100%;
        }
    }
}
