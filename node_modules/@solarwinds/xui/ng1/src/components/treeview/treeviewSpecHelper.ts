import SpecHelper from "../../specHelper";
import {VirtualNode} from "./treeview-service";

class TreeviewSpecHelper extends SpecHelper {

    static directive = `<xui-treeview model="model" options="options" context="context">' +
    '{{node.$model.label}}</xui-treeview>`;

    static directiveWithState = `<xui-treeview model="model" options="options" context="context" node-identifier="id" 
         on-state-changed="onStateChanged(newState, oldState)" state="{{state}}">{{node.$model.label}}</xui-treeview>`;

    static generateTree = (count:number, depth:number, children?:any[], callbackFn?:any, trackById?:string):any[] => {
        if (depth <= 0) {
            return;
        }
        if (!children) {
            children = [];
        }
        for (let i = 0; i < count; i++) {
            let node = {label: "Node" + (i + 1), children: <any>null};

            if (typeof trackById === "string") {
                (<any>node)[trackById] = "id_" + i;
            }

            if (depth > 1) {
                node.children = [];
            }
            if (callbackFn) {
                callbackFn(node);
            }
            children.push(node);
            TreeviewSpecHelper.generateTree(count, depth - 1, node.children, callbackFn, trackById);
        }
        return children;
    };
}

export default TreeviewSpecHelper;
