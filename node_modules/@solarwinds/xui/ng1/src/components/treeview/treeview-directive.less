@import (reference) "../../styles/mixins";
@import (reference) "../../styles/xui-framework-variables.less";

@treeview-toggle-width: 20px;
@treeview-level-margin: 50px;
@treeview-item-height: 30px;
@treeview-vline-offset: 14px;
@treeview-line: dotted 2px @xui-color-border;

.xui .xui-treeview {
    &:focus {
        outline: none;
    }

    &-list {
        margin-left: 0;
        padding: 0 0 @margin-large-horizontal @treeview-level-margin;
        overflow: visible;
        position: relative;

        &:after {
            content: '';
            position: absolute;
            pointer-events: none;
            border-left: @treeview-line;
            top: 0;
            bottom: @margin-large-horizontal;
            left: @treeview-vline-offset;
        }

        &.ng-enter, &.ng-leave {
            transition: all cubic-bezier(0.250, 0.460, 0.450, 0.940) 0.2s;
        }

        &.ng-enter,
        &.ng-leave.ng-leave-active {
            opacity: 0;
            max-height: 0;
        }

        &.ng-leave,
        &.ng-enter.ng-enter-active {
            opacity: 1;
            max-height: 10000px;
        }
    }

    /* Node list item containing head and children items */
    &-node {
        position: relative;

        &:after {
            left: (-@treeview-toggle-width);
        }
    }

    /* Node head containing expansion toggle icon, node label */
    &-head {
        border-top: solid 1px transparent;
        border-bottom: solid 1px transparent;
        position: relative;
        overflow: visible;
        .no-select();

        &.media {
            margin-top: 0;

            & > .xui-treeview-togglecell {
                padding: 0;
                white-space: nowrap;
            }
        }

        &:hover {
            background-color: @xui-color-zebra-bg-hvr;
            border-color: @xui-color-zebra-bg-hvr;
        }

        &.xui-is-selected {
            background-color: @xui-color-selected-bg;
            border-top-color: @xui-color-light-bg;
            color: @xui-color-selected-text;
        }

        &.xui-is-focused {
            &:after {
                content: '';
                border: solid 1px @xui-color-selected-border;
                pointer-events: none;
                .fill(-1px, 0, -1px, 0);
            }
        }

        &.xui-is-expanded {
            font-weight: @xui-font-weight-bold;
        }
    }

    &-label, &-icon {
        padding-right: 0;
        padding-left: @padding-xs-horizontal;
    }

    &-icon {
        padding-top:4px;
    }

    /* Expand/collapse toggle link */
    &-toggle {
        cursor: pointer;
        display: inline-block;
        overflow: hidden;
        vertical-align: middle;
        width: @icon-size-default;
        margin-left: @padding-xs-horizontal;

        // the toggle-cell can't be aligned as middle because of multi-line label contents,
        // so that's why I had to use this extra wrapper
        &-wrapper {
            display: table-cell;
            vertical-align: middle;
            height: @treeview-item-height - 2;
            text-align: center;
        }

    }

    /* Nested nodes display dotted lines representing tree structure */
    &-node-nested {
        padding-left: 0;

        &:after {
            content: '';
            position: absolute;
            pointer-events: none;
            border-top: @treeview-line;
            top: ((@treeview-item-height / 2) - 1);
            width: @treeview-toggle-width;
        }
    }

    /* Zebra stripes for first level of treeview */
    &-level-1 {
        padding: 0;

        &:after {
            border-left: none;
        }

        > .xui-treeview-node:nth-child(odd) {
            background-color: @xui-color-zebra-bg;
            border-top-color: @xui-color-zebra-bg;
        }
    }

    &-limit-links {
        padding: @padding-xs-horizontal;
    }

    &-showmore, &-showall {
        cursor: pointer;
    }

    &-spinner {
        margin: 0;
        vertical-align: middle;
    }

    &-checkbox {
        display: inline-block;
        margin: 0 0 0 2px;
    }
}
