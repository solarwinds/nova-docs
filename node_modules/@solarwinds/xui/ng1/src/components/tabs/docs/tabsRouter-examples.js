(function () {
    "use strict";

    Xui.module
        .config(config, ["$stateProvider"])
        .controller("DemoTabsRouterController", ["$state", "$window", DemoTabsRouterController]);

    function config($stateProvider) {
        var tabsItem = {id: "tabsRouter"};

        // nested / first
        $stateProvider.state(tabsItem.id + ".first", {
            url: "/first",
            template: '<h2>First Template</h2>' +
            '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ac quam tortor.</p>'
        });

        // nested / second
        $stateProvider.state(tabsItem.id + ".second", {
            url: "/second/:param1",
            template: '<h2>Second template with custom routing:  param1: {{::param1}}</h2>' +
            '<p>Duis volutpat ex lectus, sit amet aliquet ligula iaculis rhoncus.</p>',
            controller: ["$scope", "$stateParams", function ($scope, $stateParams) {
                $scope.param1 = $stateParams.param1;
            }]
        });

        // nested / third
        $stateProvider.state(tabsItem.id + ".third", {
            url: "/third",
            template: '<h2>Third template</h2>' +
            '<p>Vestibulum eu sapien id urna sodales egestas id at tellus</p>'
        });
    }

    function DemoTabsRouterController($state, $window) {
        var vm = this;
        var hostname = $window.location.hostname;
        var origin = $window.location.origin;

        vm.isDemo = $state.current.name; // check if env supports ui-routing (just for demo purposes)

        // check if env is local to generate demo link
        vm.demoLink = origin + ((hostname.indexOf("apollo-docs") > -1) ?
                "/xui/develop/ng1/demo/index.html#/tabsRouter" : "/demo/index.html#/tabsRouter");

        vm.secondTabRouteConfig = {params: {param1: "123"}};
        vm.goTo = function (state, params) {
            $state.go(state, params);
        };
    }
})();
