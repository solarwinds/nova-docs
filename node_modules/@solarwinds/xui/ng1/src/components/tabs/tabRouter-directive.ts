import {ITabsRouterController} from "./tabsRouter-controller";
import {ITabController} from "./tab-controller";
import {ITabRouterController} from "./tabRouter-controller";

/**
 * @ngdoc directive
 * @name xui.directive:xuiTabRouter
 * @restrict A
 * @element xui-tab
 *
 * @requires xui.directive:xuiTabsRouter
 * @requires xui.directive:xuiTabs
 * @requires xui.directive:xuiTab
 *
 * @description
 * Directive for a specific tab's additional routing configuration.
 * Requires xuiTabsRouter to be present on parent xuiTabs.
 *
 * @example
 * <example module="xui">
 *     <file src="src/components/tabs/docs/tabsRouter-examples.html" name="index.html"></file>
 *     <file src="src/components/tabs/docs/tabsRouter-examples.js" name="app.js"></file>
 * </example>
 */

export class TabRouter implements ng.IDirective {
    public require = ["^^xuiTabsRouter", "^xuiTab", "xuiTabRouter"];
    public restrict = "A";
    public scope = false;
    public controller = "xuiTabRouterController";
    public controllerAs = "trCtrl";
    public bindToController = {
        configuration: "<?xuiTabRouter"
    };

    public link = (scope: ng.IScope, elem: ng.IAugmentedJQuery, attrs: ng.IAttributes,
        controllers: any[]): void => {

        const tabsRouterController = controllers[0] as ITabsRouterController;
        const tabController = controllers[1] as ITabController;
        const tabRouterController = controllers[2] as ITabRouterController;

        tabRouterController.init(tabsRouterController, tabController);
    };
};

export default TabRouter;
