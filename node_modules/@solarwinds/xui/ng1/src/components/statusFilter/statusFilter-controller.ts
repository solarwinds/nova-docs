/// <reference path="../../ref.d.ts" />
import IStatusFilter = xui.IStatusFilter;

export default class StatusFilterController {
    public static $inject = ["$log"];
    public activeFilters: string[];
    public filterSource: IStatusFilter[];
    public filterChange: () => void;

    constructor(private $log: ng.ILogService) {
    }

    public activateFilter = (filter: string, $event : JQueryEventObject) => {
        const element: ng.IAugmentedJQuery = angular.element($event.target);

        if (_.indexOf(this.activeFilters, filter) !== -1) {
            _.pull(this.activeFilters, filter);
            element.blur();
        } else {
            this.activeFilters.push(filter);
        }

        if (_.isFunction(this.filterChange)) {
            this.filterChange();
        }
    };

    public filterIsActive = (filter: string) => {
        return _.indexOf(this.activeFilters, filter) !== -1;
    };

}
