import {PagerController} from "./pager-controller";
import SpecHelper from "../../specHelper";

describe("components >", ()=> {
    describe("pager >", ()=> {
        describe("directive >", ()=> {
            let $scope:ng.IRootScopeService;
            let $compile:ng.ICompileService;
            let directive:any;
            const total = 1000;
            const pageSize = 25;
            const page = 3;
            const pagerMarkup = ["<xui-pager class='small'",
                "page='3'",
                "page-size='25'",
                "total='total()'",
                "adjacent='2'",
                "dots='...'",
                "scroll-top='false'",
                "hide-if-empty='true'",
                "ul-class='pagination'",
                "active-class='active'",
                "disabled-class='disabled'",
                "show-prev-next='true'",
                "pager-action='pagerClicked(page, pageSize, total)'>",
                "</xui-pager>"].join("");

            beforeEach(angular.mock.module("xui"));
            beforeEach(inject(($injector:any) => {
                $scope = $injector.get("$rootScope");
                $compile = $injector.get("$compile");
                directive = SpecHelper.getCompiledElement($compile, $scope, pagerMarkup);
                $scope.$digest();
            }));

            it("page number " + page + " should be selected", () => {
                expect(directive.controller("xuiPager").page).toEqual(page);
            });

            it("pageSize should be equal to " + pageSize, () => {
                expect(directive.controller("xuiPager").pageSize).toEqual(pageSize);
            });

            it("adjacent should be equal to ...", () => {
                expect(directive.controller("xuiPager").adjacent).toEqual("2");
            });

            it("dots should be equal to ...", () => {
                expect(directive.controller("xuiPager").dots).toEqual("...");
            });
        });
    });
});
