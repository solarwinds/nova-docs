<div
    class="xui-slider"
    ng-class="{
        'xui-slider--disabled': vm.isDisabled,
        'xui-slider--single': vm.type === 'single',
        'xui-slider--text-input-enabled': vm.isTextinputEnabled,
        'xui-slider--text-labels-aligned-aside': vm.alignLabelsAside,
        'xui-slider--text-labels-connected-by-dash': vm.labelsConnectedByDash,
        'xui-slider--range-line-hovered': vm.isRangeHovered,
        'xui-slider--range-line-active': vm.isRangeDragActive,
     }">

    <div class="xui-slider__header">
        <span class="xui-slider__header-caption xui-text-l">{{::vm.caption}}</span>
        <span class="xui-slider__header-unit xui-text-s">{{::vm.unit}}</span>
    </div>
    <div class="xui-slider__body">
        <div class="xui-slider__lines">
            <div class="xui-slider__lines-background"></div>
            <div class="xui-slider__lines-endside-steps">
                <div
                    class="xui-slider__lines-step"
                    ng-repeat="step in vm.endsideSteps"
                    ng-style="{left: step}"
                ></div>
            </div>
            <div class="xui-slider__lines-startside-steps">
                <div
                    class="xui-slider__lines-step"
                    ng-repeat="step in vm.startsideSteps"
                    ng-style="{left: step}"
                ></div>
            </div>
            <div class="xui-slider__lines-clickbuffer" ng-click="vm.onLineClicked($event)"></div>
            <div class="xui-slider__lines-range"
                 ng-mouseup="vm.onRangeLineClicked($event)"
                 ng-mouseover="vm.onRangeMouseOver()"
                 ng-mouseleave="vm.onRangeMouseLeave()"
                 xui-slidable
                 is-drag-disabled="vm.type === 'single' || vm.isDisabled"
                 on-drag="vm.onRangeDrag(event, position)"
                 on-drag-stop="vm.onRangeDragStopped(event)"
                 on-drag-cancel="vm.onDragCanceled(event)"
                 on-drag-start="vm.onDragStarted(event)"
            >
                <div class="xui-slider__lines-range-clickbuffer"></div>
            </div>
            <div
                class="xui-slider-first-button xui-slider__button"
                ng-show="vm.type !== 'single'"
                xui-slidable
                is-drag-disabled="vm.isDisabled"
                on-drag="vm.onFirstButtonDrag(event, position)"
                on-drag-start="vm.onDragStarted(event)"
                on-drag-stop="vm.onDragStopped(event)"
                on-drag-cancel="vm.onDragCanceled(event)"
            >
                <span class="xui-flex-container xui-flex--nowrap
                             xui-slider-first-label xui-slider__lines-label xui-text-l">
                    {{vm.internalStartValue | number: vm.fractionSize}}
                </span>
            </div>
            <div
                class="xui-slider-end-button xui-slider__button"
                xui-slidable
                is-drag-disabled="vm.isDisabled"
                on-drag="vm.onEndButtonDrag(event, position)"
                on-drag-stop="vm.onDragStopped(event)"
                on-drag-start="vm.onDragStarted(event)"
                on-drag-cancel="vm.onDragCanceled(event)"
                on-resized="vm.onResized()"
            >
                <span
                    class="xui-slider-end-label xui-slider__lines-label xui-text-l"
                    ng-if="vm.type !== 'single' || !vm.isTextinputEnabled"
                >{{vm.internalEndValue | number: vm.fractionSize}}</span>
            </div>
        </div>

        <ng-form class="xui-slider__input" ng-if="vm.type === 'single' && vm.isTextinputEnabled">
            <xui-textbox
                ng-model="vm.textValue"
                ng-change="vm.onTextInputChange(vm.textValue)"

                ng-keyup="vm.onTextInputChange($event)"
                ng-blur="vm.onTextInputChange($event)"

                ng-model-options="{updateOn: 'blur change'}"
                custom-box-width="50px"
                is-disabled="{{vm.isDisabled}}"
                class="xui-textbox--bold xui-textbox--centered"
            >{{vm.internalTextValue}}
            </xui-textbox>
        </ng-form>

    </div>
</div>


