@import (reference) "../../styles/mixins.less";
@import (reference) "../../styles/xui-framework-typography.less";
@import (reference) "../../styles/xui-framework-colors.less";
@slider-button-radius: 8px;
@slider-line-width: 2px;
@slider-range-width: 4px;
@slider-label-height: @xui-line-height-regular + @xui-space-xs;
@slider-step-dot-radius: 1px;
@slider-line-buffer: 5px;
@slider-box-shadow-width: 4px;

.xui-slider {
    min-width: 60px;
    &__body {
        display: flex;
        height: 2 * @slider-button-radius;
        margin-top: @slider-label-height;
    }
    &__lines {
        position: relative;
        width: 100%;
        &-background {
            height: @slider-line-width;
            background: @xui-color-border;
            width: 100%;
            position: absolute;
            top: @slider-button-radius - @slider-line-width / 2;
        }
        &-clickbuffer {
            width: 100%;
            height: @slider-line-width + 2 * @slider-line-buffer;
            position: absolute;
            top: @slider-button-radius - @slider-line-width / 2 - @slider-line-buffer;
        }

        &-range {
            height: @slider-range-width;
            top: @slider-button-radius - @slider-range-width / 2;
            width: 50%;
            background: @xui-color-slider-main;
            position: absolute;
            box-shadow: 0 0 0 @slider-box-shadow-width fade(@xui-color-slider-main-hvr, 0%);
            transition: box-shadow .3s;
            cursor: pointer;
            &-clickbuffer {
                position: absolute;
                width: 100%;
                height: @slider-range-width + 2 * @slider-line-buffer;
                top: -@slider-line-buffer;
            }
            &:hover,
            &:active {
                box-shadow: 0 0 0 @slider-box-shadow-width fade(@xui-color-slider-main-hvr, 70%);
            }
        }
        &-label {
            position: relative;
            top: -@slider-label-height;
        }
        &-endside-steps, &-startside-steps {
            position: absolute;
            height: 2 * @slider-step-dot-radius;
            overflow: hidden;
            top: @slider-button-radius - @slider-step-dot-radius;
            background: @xui-color-border;
        }
        &-endside-steps {
            width: 100%;
        }
        &-step {
            background: @xui-color-slider-step-fill;
            width: 2 * @slider-step-dot-radius;
            height: 2 * @slider-step-dot-radius;
            position: absolute;
        }
    }

    &__header {
        margin-bottom: @xui-space-sm;
    }
    &__input {
        margin-left: @xui-space-lg;
        /*TODO: bring the textbox height as a variable from the same place where textbox is using it too */
        margin-top: -(28px - 2 * @slider-button-radius) / 2;
    }

    &__button {
        width: 2 * @slider-button-radius;
        height: 2 * @slider-button-radius;
        position: absolute;
        display: flex;
        flex-direction: column;
        align-items: center;
        background: @xui-color-slider-main;
        border-radius: 100%;
        border: @xui-color-slider-main solid 4px;
        box-shadow: 0 0 0 @slider-box-shadow-width fade(@xui-color-slider-main-hvr, 0%);
        transition: box-shadow .3s, background .3s;
        .user-select(none);
        &:hover,
        &:active {
            box-shadow: 0 0 0 @slider-box-shadow-width fade(@xui-color-slider-main-hvr, 70%);
            background: @xui-color-slider-secondary;
            cursor: pointer;
        }
    }

    &.xui-slider--text-input-enabled {
        .xui-slider__body {
            margin-top: 0;
        }
    }

    &.xui-slider--disabled {
        .xui-slider__button {
            background:@xui-color-slider-disabled;
            border: @xui-color-slider-disabled solid 4px;
            cursor: default;
            &:hover {
                box-shadow: none;
                background: @xui-color-slider-disabled;
            }
        }
        .xui-slider__lines-range {
            background: @xui-color-slider-disabled;
            box-shadow: none;
            cursor: default;
        }
        .xui-slider__lines-clickbuffer {
            cursor: default;
        }
        .xui-slider__lines-label {
            color: @xui-color-slider-disabled;
        }
        .xui-slider__lines-step {
            display: none;
        }
    }
    &.xui-slider--text-labels-aligned-aside {
        .xui-slider-end-button {
            align-items: flex-start;
        }
        .xui-slider-first-button {
            align-items: flex-end;
        }
        .xui-slider__lines-label.xui-slider-first-label {
            margin-right: -4px;
        }
        .xui-slider__lines-label.xui-slider-end-label {
            margin-left: -4px;
        }
    }
    &.xui-slider--text-labels-connected-by-dash {
        .xui-slider-first-label.xui-slider__lines-label {
            &:after {
                content: '-';
            }
        }
    }
    &.xui-slider--range-line-hovered {
        .xui-slider__button {
            box-shadow: 0 0 0 @slider-box-shadow-width fade(@xui-color-slider-main-hvr, 70%);
            background: @xui-color-slider-secondary;
        }
    }
    &.xui-slider--range-line-active {
        .xui-slider__button {
            box-shadow: 0 0 0 @slider-box-shadow-width fade(@xui-color-slider-main-hvr, 70%);
            background: @xui-color-slider-secondary;
        }
    }
}
