<div class="xui-menu {{::vm.getSizeClass()}}">
    <div class="dropdown" uib-dropdown ng-attr-dropdown-append-to-body="{{vm.menuAppendToBody ? true : undefined    }}">
        <xui-button uib-dropdown-toggle class="xui-menu-button dropdown-toggle"
                    icon="{{::vm.getIcon()}}"
                    icon-right="true"
                    is-empty="{{::!vm.title}}"
                    size="{{::vm.size === 'large' ? '' : vm.size}}"
                    is-disabled="vm.isDisabled"
                    display-style="{{::vm.displayStyle}}"
                    ng-click="vm.adjustMenuPosition($event)">
            <xui-icon ng-if="::vm.titleIcon"
                is-dynamic="true"
                icon="{{::vm.titleIcon}}"
                icon-size="{{::vm.size === 'large' ? '' : vm.size}}"
                css-class="xui-menu-title-icon">
            </xui-icon>
            {{::vm.title}}
        </xui-button>
        <div uib-dropdown-menu
             class="xui-menu-list"
             ng-class="::{'dropdown-menu-right menu-right' : vm.menuAlign.toLowerCase() === 'right'}">
            <!-- container when using sub-directives -->
            <ul ng-if="::!vm.itemsSource"
                ng-transclude
                role="menu">
            </ul>
            <!-- list using json data -->
            <ul ng-if="vm.itemsSource"
                role="menu">
                <li ng-repeat="item in vm.itemsSource"
                    class="{{::vm.getMenuItemClasses(item)}}"
                    ng-class="{'disabled': item.disabled}"
                    role="presentation"
                    sw-auth
                    sw-auth-permissions="{{::item.permissionRequired}}"
                    ng-switch="::item.itemType">
                    <div ng-switch-when="header"
                         class="xui-menu-item-header"
                         role="menuItem"
                         ng-hide="item.hidden"
                         ng-if="!item.removed">
                        {{::item.title}}
                    </div>
                    <a ng-switch-when="link"
                       class="xui-menu-item-link"
                       role="menuItem"
                       ng-hide="item.hidden"
                       ng-if="!item.removed"
                       tabindex="-1"
                       href="{{::item.url}}"
                       ng-click="vm.menuService.handleItemClick($event, item)">
                        <xui-icon ng-if="item.icon" is-dynamic="true" icon="{{item.icon}}"></xui-icon>
                        <span>{{::item.title}}</span>
                    </a>
                    <a ng-switch-when="action"
                       class="xui-menu-item-link"
                       role="menuItem"
                       ng-hide="item.hidden"
                       ng-if="!item.removed"
                       tabindex="-1"
                       href
                       ng-click="vm.menuService.handleItemClick($event, item)">
                        <xui-icon ng-if="item.icon" is-dynamic="true" icon="{{item.icon}}"></xui-icon>
                        <span>{{::item.title}}</span>
                    </a>
                    <div ng-switch-when="option"
                         class="xui-menu-item-option"
                         role="menuItem"
                         ng-hide="item.hidden"
                         ng-if="!item.removed"
                         ng-click="vm.menuService.handleItemClick($event, item)">
                        <xui-checkbox class="xui-menu-item-checkbox"
                                      ng-model="item.checked"
                                      is-disabled="item.disabled">
                            {{::item.title}}
                        </xui-checkbox>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>
