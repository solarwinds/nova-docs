/// <reference path="../../ref.d.ts" />

// Use in the xui-grid template to indicate where you want the toolbar to be transcluded.
// You must provide the property on the xui-grid controller that will hold the transcluded element
// <div class="xui-grid">
//   <div ... xui-grid-toolbar-transclude>...</div>
//   ...
// </div>
export default class GridToolbarTransclude implements ng.IDirective {
    public require = ["?^xuiGrid", "?^swGrid", "?^xuiFilteredList", "?^swFilteredList", "?^xuiFilteredListV2"];
    public link = (scope:ng.IScope, element:ng.IAugmentedJQuery, attr:ng.IAttributes, controllers:any[]) => {
        const gridCtrl = controllers[0] || controllers[1];
        const filteredListCtrl = controllers[2] || controllers[3] || controllers[4];

        // take the toolbar from a xui-filtered-list firstly, if it is not defined there then from a xui-grid
        if (filteredListCtrl && filteredListCtrl.toolbarTranscluded) {
            element.html("");
            element.append(filteredListCtrl.toolbarTranscluded);
        } else if (gridCtrl && gridCtrl.toolbarTranscluded) {
            element.html("");
            element.append(gridCtrl.toolbarTranscluded);
        }
    };
}
