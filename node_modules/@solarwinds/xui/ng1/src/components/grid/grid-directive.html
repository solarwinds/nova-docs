<div class="xui-grid">
    <!-- following div is here just to invoke transclude, needed for toolbar component -->
    <div ng-transclude class="hide"></div>
    <div class="xui-grid__toolbar-container-panel" ng-if="vm.isToolbarPanelVisible()"
         ng-class="{ 'xui-grid__toolbar--active': vm.hasSelectedItems() }">
        <xui-strip-layout>
            <xui-strip-layout-item>
                <!--container for transcluded toolbar component-->
                <div class="xui-grid__toolbar" xui-grid-toolbar-transclude></div>
            </xui-strip-layout-item>
            <xui-strip-layout-splitter ng-if="vm.hasSelectedItems()"></xui-strip-layout-splitter>
            <xui-strip-layout-item ng-if="vm.hasSelectedItems()" class="xui-grid__selection">
                <span class="xui-grid__selection-title">
                    {{vm.getSelectedItemCount()}} {{::'xui_grid_items_selected' | translate}}
                </span>
                <span ng-if="vm.isEverythingOnPageSelected() && !vm.isEverythingSelected() && vm.allowSelectAllPages">
                    <a href=" " ng-click="vm.selectAll()">
                        {{::'xui_grid_select_all' | translate}}
                        <b> {{vm.getTotal()}} </b>
                        {{::'xui_grid_objects' | translate}}
                    </a>
                </span>
                <span ng-if="vm.isEverythingSelected()">
                    <a href=" " ng-click="vm.unselectAll()" href>
                        {{::'xui_grid_clear_selection' | translate}}
                    </a>
                </span>
            </xui-strip-layout-item>
        </xui-strip-layout>
    </div>
    <div class="xui-grid__listview-panel">
        <xui-strip-layout class="xui-grid__listview-tools" ng-if="vm.isListViewPanelVisible()">
            <xui-strip-layout-item ng-if="vm.isSelectorVisible()" class="xui-grid__listview-tools_container">
                <xui-selector items-source="vm.selector.items"
                              display-value="value"
                              on-items-click="vm.selector.onItemsClick(item)"
                              on-checkbox-click="vm.selector.onCheckboxClick()"
                              is-indeterminate="vm.selector.indeterminate"
                              allow-select-all-pages="vm.allowSelectAllPages"
                              checked="vm.selector.checked"
                              class="xui-grid__listview-tools_selector">
                </xui-selector>
            </xui-strip-layout-item>
            <xui-strip-layout-item ng-if="vm.isSorterVisible()">
                <xui-sorter selected-item="vm.sorting.sortBy"
                            items-source="vm.sorting.sortableColumns"
                            display-value="label"
                            sort-direction="vm.sorting.direction"
                            on-change="vm.onSortingChangeInternal(newValue, oldValue)">
                </xui-sorter>
            </xui-strip-layout-item>
            <xui-strip-layout-splitter></xui-strip-layout-splitter>

            <xui-search
                on-search="vm.onSearchInternal(value, cancellation)"
                on-clear="vm.onClearInternal()"
                on-change="vm.onSearchChangeInternal()"
                ng-if="!vm.options.hideSearch"
                value="vm.searchModel"
                search-on-change="vm.options.triggerSearchOnChange"
                search-debounce="vm.options.searchDebounce"
                class="xui-grid__listview-tools_search col-md-4"
                placeholder="{{::vm.options.searchPlaceholder}}">
            </xui-search>
        </xui-strip-layout>

        <div class="xui-grid__listview-container"
             xui-busy="vm.busy"
             xui-busy-message="{{ vm.busyMessage }}"
             xui-allow-cancel="vm.busyShowCancelButton"
             xui-busy-on-cancel="vm.busyOnCancel()">
            <xui-listview stripe="::vm.stripe"
                          items-source="vm.getItemsSource()"
                          track-by="{{::vm.trackBy}}"
                          header-template-url="{{::vm.headerTemplateUrl}}"
                          template-url="{{::vm.templateUrl}}" template-fn="::vm.templateFn()"
                          selection-mode="{{vm.selectionMode}}" selection="vm.selection.items"
                          selection-property="{{::vm.selectionProperty}}" controller="vm.controller"
                          selection-invert="vm.selection.blacklist"
                          empty-text="{{vm.emptyText}}"
                          empty-data="vm.emptyData"
                          show-empty="vm.showEmpty"
                          row-padding="{{::vm.rowPadding}}"
                          empty-template-url="{{::vm.emptyTemplateUrl}}"
                          highlight-text="{{vm.searchModel}}"></xui-listview>
            <div ng-if="vm.isPagerVisible() && !vm.options.hidePagination" class="xui-grid__pager">
                <xui-pager class="small"
                           page="vm.pagination.page"
                           page-size="vm.pagination.pageSize"
                           total="vm.getTotal()"
                           adjacent="{{::vm.options.pagerAdjacent}}"
                           dots="..."
                           scroll-top="false"
                           ul-class="pagination"
                           active-class="active"
                           disabled-class="disabled"
                           show-prev-next="true"
                           pager-action="vm.onPaginationChangeInternal(page, pageSize, total)">
                </xui-pager>
            </div>
        </div>
    </div>
</div>
