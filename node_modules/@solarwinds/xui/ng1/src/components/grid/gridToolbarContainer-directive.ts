/// <reference path="../../ref.d.ts" />

// Use xui-grid-toolbar-container below an xui-filtered-list or an xui-grid to provide a xui-toolbar component
// <xui-filtered-list>
//   <xui-grid-toolbar-container><xui-toolbar>...</xui-toolbar><xui-grid-toolbar-container>
// </xui-filtered-list>
// or
// <xui-grid>
//   <xui-grid-toolbar-container><xui-toolbar>...</xui-toolbar><xui-grid-toolbar-container>
// </xui-grid>
export default class GridToolbarContainer implements ng.IDirective {
    public restrict = "EA";
    public transclude = true; // Grab the contents to be used as the toolbar
    public template = ""; // In effect remove this element!
    public replace = true;
    public require = ["?^xuiGrid", "?^swGrid", "?^xuiFilteredList", "?^swFilteredList", "?^xuiFilteredListV2"];
    public link = (scope:ng.IScope, element:ng.IAugmentedJQuery, attr:ng.IAttributes,
                   controllers:any[], transclude:ng.ITranscludeFunction) => {
        const gridCtrl = controllers[0] || controllers[1];
        const filteredListCtrl = controllers[2] || controllers[3] || controllers[4];

        // [The second parameter to transclude() causes the elements to be cloned so that they work in ng-repeat]
        if (gridCtrl) {
            gridCtrl.setToolbar(transclude(scope, angular.noop));
        } else if (filteredListCtrl) {
            filteredListCtrl.setToolbar(transclude(scope, angular.noop));
        }
    };
}
