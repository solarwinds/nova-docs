(function() {
    "use strict";

    Xui.module.controller("DemoProgressController", progressController, ["$scope", "$interval", "xuiToastService"]);
    function progressController($scope, $interval, toast) {
        $scope.percent = 0;
        $scope.show = false;

        var stop;
        $scope.startProgress = function () {
            $scope.show = true;
            $scope.percent = 0;

            stop = $interval(function () {
                if ($scope.percent < 100) {
                    $scope.percent += 10;
                }
            }, 1000);
        };

        $scope.onCancel = function () {
            if (angular.isDefined(stop)) {
                $interval.cancel(stop);
                stop = undefined;
                $scope.percent = 0;
            }

            toast.info("Progress cancelled by user.");
        };
    }
})();
