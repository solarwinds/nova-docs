(function () {
    "use strict";

    Xui.app().controller("SorterDemoController", ["$scope", '$templateCache',
        function ($scope, $templateCache) {
            var vm = this;

            vm.displayValue = "value";

            vm.direction = "asc";

            vm.items = [{
                name: "animal",
                value: "Animals"
            }, {
                name: "stone",
                value: "Stone"
            }, {
                name: "fruit",
                value: "Fruit"
            }];

            vm.selectedItem = {
                name: "fruit",
                value: "Fruit"
            };

            vm.table = [{
                animal: "Kangaroo",
                stone: "Quartz",
                fruit: "Kiwi"
            }, {
                animal: "Bonobo",
                stone: "Slate",
                fruit: "Banana"
            }, {
                animal: "Ape",
                stone: "Diamond",
                fruit: "Blueberry"
            }, {
                animal: "Zebra",
                stone: "Granite",
                fruit: "Orange"
            }, {
                animal: "Chimp",
                stone: "Marble",
                fruit: "Cherry"
            }, {
                animal: "Whale",
                stone: "Limestone",
                fruit: "Pineapple"
            }];

            vm.onChange = function (newValue, oldValue) {
                console.log("new sort value: " + JSON.stringify(newValue));
                console.log("old sort value: " + JSON.stringify(oldValue));
                vm.table = _.orderBy(vm.table, [newValue.sortBy.name], [newValue.direction]);
            };

            $templateCache.put("demo-listview-header-template",
                "<div class='row'>" +
                "<div class='col-xs-4' style='padding:0px 0px 20px 30px; font-weight:bold;'>Animals</div>" +
                "<div class='col-xs-4' style='padding:0px 0px 20px 15px; font-weight:bold;'>Stone</div>" +
                "<div class='col-xs-4' style='padding:0px 0px 20px 15px; font-weight:bold;'>Fruit</div>" +
                "</div>");
            $templateCache.put("demo-listview-template",
                "<div class='row'>" +
                "<div class='col-xs-4'>{{item.animal}}</div>" +
                "<div class='col-xs-4'>{{item.stone}}</div>" +
                "<div class='col-xs-4'>{{item.fruit}}</div>" +
                "</div>");
        }
    ]);

})();

