<!doctype html>
<html lang="" class="xui xui-demo" xui-global-keys
      ng-app="xui.demo" ng-strict-di ng-class="{ 'xui-fullpage': fullpage }">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description">
    <meta name="keywords">
    <title ng-bind="title"></title>

    <script>
        // Create base, link and script tags dynamically based on current url, inspired by ngdocs's index.tmpl
        (function() {
            var headElement = document.getElementsByTagName('head')[0];
            var basePosition = location.href.lastIndexOf("demo/") + 4;
            var baseUrl = location.href.substr(0, basePosition) + "/";

            // Create base tag
            var baseElement = document.createElement("base");
            baseElement.setAttribute('href', baseUrl);
            headElement.appendChild(baseElement);

            // Add css and script links
            addCss('../dist/css/xui.css');
            addCss('dist/css/demo.css');

            addScript('../dist/js/modernizr.js');
            addScript("../dist/js/vendor.js");
            addScript("../dist/js/xui.js");
            addScript("dist/js/demo.js");

            function addScript(relUrl) {
                addTag('script', {src: baseUrl + relUrl });
            }

            function addCss(relUrl) {
                addTag('link', { rel: 'stylesheet', href: baseUrl + relUrl, type: 'text/css' });
            }

            function addTag(name, attributes) {
                var element = document.createElement(name);
                for (var attrName in attributes) {
                    element.setAttribute(attrName, attributes[attrName]);
                }
                document.write(outerHTML(element));
            }

            function outerHTML(node){
                // if IE, Chrome take the internal method otherwise build one
                return node.outerHTML || (
                    function(n) {
                        var div = document.createElement('div'), h;
                        div.appendChild(n);
                        h = div.innerHTML;
                        div = null;
                        return h;
                    })(node);
            }
        })();
    </script>
</head>

<body>
    <div id="page-wrapper" class="xui-page-wrapper">
        <div class="xui-page-header"></div>
        <div id="content" class="xui-content-area">
            <div class="xui-view animated-view animated fadeIn">
                <xui-demo></xui-demo>
            </div>
        </div>
        <xui-footer>
            <div><span translate>xui_solarwinds_copyright</span>&nbsp;&copy;&nbsp;{{::now() | date:'yyyy'}}&nbsp;<span translate>xui_solarwinds_companyName</span></div>
        </xui-footer>
    </div>

    <!-- Radio button demo scripts ... unfortunately they have to be here until I find a better solution -->
    <script save-content="xui-demo-radio-string-values-js">
        function radioStringCtrl() {
            this.vegetable = 'onion';
        }
        Xui.controller('RadioStringCtrl', radioStringCtrl);
    </script>
    <script save-content="xui-demo-radio-object-values-js">
        function radioObjectCtrl() {
            this.fruit = {};
        }
        Xui.controller('RadioObjectCtrl', radioObjectCtrl);
    </script>
    <script save-content="xui-demo-radio-disabling-options-js">
        function radioDisableCtrl() {
            this.instrument = '';
            this.disabled = false;
        }
        Xui.controller('RadioDisableCtrl', radioDisableCtrl);
    </script>
    <script save-content="xui-demo-radio-generated-options-js">
        function radioGeneratedCtrl() {
            this.generatedOptions = [];
            for (var i = 0; i < 5; i++) {
                this.generatedOptions.push({label: 'Label' + i, value: 'Value' + i});
            }
            this.generated = this.generatedOptions[3].value;
        }
        Xui.controller('RadioGeneratedCtrl', radioGeneratedCtrl);
    </script>
    <script save-content="xui-demo-radio-validation-js">
        function radioValidationCtrl($scope) {
            var vm = this;

            vm.selectedValue = '';
            vm.submit = function () {
                if (!$scope.myForm.$valid) {
                    alert('Not valid!');
                } else {
                    alert('Hooray!');
                }
            }
        }

        Xui.controller('RadioValidationCtrl', radioValidationCtrl, ['$scope']);
    </script>
    <script save-content="xui-demo-radio-images-js">
        Xui.controller('RadioImageCtrl', function() { this.holiday = ''; });
    </script>
    <script save-content="xui-demo-radio-playground-js">
        Xui.controller("RadioPlaygroundCtrl", function($scope) {
            var vm = this;
            vm.json = '[]';
            vm.config = {};
            vm.model = '';

            vm.updateConfig = function() {
                vm.error = false;
                try {
                    vm.config = JSON.parse(vm.json);
                } catch(e) {
                    vm.error = true;
                    vm.config = {};
                }
            }

            function initialize() {
                var config = [];
                for (var i = 0; i < 5; i++) {
                    config.push({label: 'Label ' + (i+1), value: i + 1,
                            required: false, disabled: false})
                }

                vm.json = JSON.stringify(config, null, 2);
                vm.updateConfig();
            }

            initialize();
        }, ['$scope']);
    </script>
    <script type="text/javascript">
        function generateTree(children, count, depth, callbackFn) {
            if (depth <= 0) {
                return;
            }
            for (var i = 0; i < count; i++) {
                var id = 'id_' + i;
                var node = {label: 'Node' + (i + 1) + "." + depth, id: id};
                if (depth > 1) {
                    node.children = [];
                }
                if (callbackFn) {
                    callbackFn(node);
                }
                children.push(node);
                generateTree(node.children, count, depth - 1);
            }
        }
    </script>

    <!-- Treeview example scripts -->
    <script save-content="xui-demo-treeview-basic-js" type="text/javascript">
        'use strict';

        Xui.controller('TreeviewBasicCtrl', function($scope) {
            var vm = this;
            $scope.context = {};

            $scope.options = {
                selectionMode: 'single',
                trackBy: 'id',
                isAlwaysSelected: true
            };

            vm.reverse = function(){
                $scope.model.reverse();
            };

            vm.addChild = function(){
                $scope.model.push({label: "ADDED VIA BINDING", children:[]});
            };

            vm.dump = function(){
                var t = $scope.clone;
                $scope.clone = $scope.model;
                $scope.model = t;
            };



            $scope.model = [];
            generateTree($scope.model, 10, 4);

            //pre-generate replacement tree
            $scope.clone = [];
            generateTree($scope.clone, 10, 4);
            $scope.clone.reverse();
        }, ['$scope']);
    </script>

    <script save-content="xui-demo-treeview-links-js" type="text/javascript">
        'use strict';

        Xui.controller('TreeviewLinksCtrl', function($scope) {
            $scope.context = {};

            $scope.model = [];
            generateTree($scope.model, 10, 3, function(n) { n.icon = 'status_up'; });
            delete $scope.model[9].children;
        }, ['$scope']);
    </script>

    <script save-content="xui-demo-treeview-multi-js" type="text/javascript">
        'use strict';

        Xui.controller('TreeviewMultiCtrl', function($scope) {
            $scope.context = {};

            $scope.options = {
                selectionMode: 'multi'
            };

            $scope.model = [];
            generateTree($scope.model, 10, 3, function(n) { n.icon = 'status_up'; });
        }, ['$scope']);
    </script>

    <script save-content="xui-demo-treeview-async-js" type="text/javascript">
        'use strict';

        Xui.controller('TreeviewAsyncCtrl', function($scope, $q) {
            var icon = 'status_up';

            $scope.context = {};

            $scope.options = {
                selectionMode: 'single',
                load: function(vnode) {
                    var deferred = $q.defer();

                    var children = vnode.$level > 3 ? null : [];

                    setTimeout(function() {
                        deferred.resolve([
                            {label: 'Async #1', children: children, icon: icon, id: 'id_001'},
                            {label: 'Async #2', children: children, icon: icon, id: 'id_002'}]);
                    }, 1000);

                    return deferred.promise;
                }
            };

            $scope.model = [];
        }, ['$scope', '$q']);
    </script>

    <script save-content="xui-demo-treeview-limit-js" type="text/javascript">
        'use strict';

        Xui.controller('TreeviewLimitCtrl', function($scope, $q) {
            $scope.context = {};

            $scope.options = {
                selectionMode: 'single',
                limit: 3
            };

            $scope.model = [];
            generateTree($scope.model, 10, 3, function(n) { n.icon = 'status_up'; });

        }, ['$scope', '$q']);
    </script>

    <script save-content="xui-demo-treeview-highlight-js" type="text/javascript">
        'use strict';

        function generateTree(children, count, depth, callbackFn) {
            if (depth <= 0) {
                return;
            }
            for (var i = 0; i < count; i++) {
                var id = 'id_' + i;
                var node = {label: 'Node' + (i + 1), id: id};
                if (depth > 1) {
                    node.children = [];
                }
                if (callbackFn) {
                    callbackFn(node);
                }
                children.push(node);
                generateTree(node.children, count, depth - 1);
            }
        }

        Xui.app().controller("TreeviewHighlightingCtrl", ["xuiNotificationService", "$interval", "xuiToastService",
            function (notificationService, $interval, toastService) {
                var vm = this;
                vm.model = [];
                generateTree(vm.model, 10, 3);
                vm.highlightNode = function () {
                    toastService.success("Node Highlighted! Hover on me...",
                        "TreeView Highlights",
                        {},
                        [vm.model[0]]);
                };
            }
        ]);
    </script>

    <script save-content="xui-demo-treeview-state-js" type="text/javascript">
        'use strict';

        Xui.controller('TreeviewStateCtrl', function($scope,$q) {
            $scope.context = {};
            $scope.states = [];
            $scope.stateChanged = function (newState, oldSate){
                $scope.states.push($scope.states.length + "    " + newState);
            };
            $scope.model = [];
            generateTree($scope.model, 5, 3);
            $scope.options = {
                selectionMode: 'single'
            }

            setTimeout(function() {
                $scope.state = [
                    {id: "id_0",
                        path: [],
                        expanded:true,
                        checked:false},
                    {id: "id_2",
                        path: ["id_0"],
                        expanded:true,
                        checked:false},
                    {id: "id_3",
                        path: ["id_0", "id_2"],
                        expanded:false,
                        checked:true}];
            });
        }, ['$scope', '$q']);
    </script>

    <!--Menu example script -->
    <script save-content="xui-demo-menu-styles-js">
        function menuStylesCtrl() {
            this.actionMethod = function () {
                console.log("Action done");
            };

            this.actionMethodParams = function (params) {
                console.log("Action done: " + params.a + " "+ params.b);
            };

            this.checked = true;

            this.menuItems = [
                {itemType: "header", title: "Links:"},
                {itemType: "link", title: "Link 1", url: "#anchor-Menu"},
                {itemType: "link", title: "Link 2", url: "#anchor-Menu"},
                {itemType: "link", title: "Link 3", url: "#anchor-Menu"},
                {itemType: "divider"},
                {itemType: "header", title: "Actions:"},
                {itemType: "action", title: "Action 1", action: this.actionMethod },
                {itemType: "action", title: "Action 2", action: this.actionMethodParams, params: { a: "action2a", b: "action2b"}},
                {itemType: "divider"},
                {itemType: "header", title: "Options:"},
                {itemType: "option", title: "Option 1"},
                {itemType: "option", title: "Option 2", checked: this.checked}
            ];
        }
        Xui.controller("MenuStylesCtrl", menuStylesCtrl);
    </script>

    <script save-content="xui-demo-menu-sizes-js">
        function menuSizesCtrl() {
            this.actionMethod = function () {
                console.log("Action done");
            };

            this.actionMethodParams = function (params) {
                console.log("Action done: " + params.a + " "+ params.b);
            };

            this.checked = true;

            this.menuItems = [
                {itemType: "header", title: "Links:"},
                {itemType: "link", title: "Link 1", url: "#anchor-Menu" },
                {itemType: "link", title: "Link 2", url: "#anchor-Menu" },
                {itemType: "link", title: "Link 3", url: "#anchor-Menu" },
                {itemType: "divider" },
                {itemType: "header", title: "Actions:" },
                {itemType: "action", title: "Action 1", action: this.actionMethod },
                {itemType: "action", title: "Action 2", action: this.actionMethodParams, params: { a: "action2a", b: "action2b" } },
                {itemType: "divider" },
                {itemType: "header", title: "Options:" },
                {itemType: "option", title: "Option 1" },
                {itemType: "option", title: "Option 2", checked: this.checked }
            ];
        }
        Xui.controller("MenuSizesCtrl", menuSizesCtrl);
    </script>

    <script save-content="xui-demo-menu-text-align-js">
        function menuTextAlignCtrl() {
            this.actionMethod = function () {
                console.log("Action done");
            };

            this.actionMethodParams = function (params) {
                console.log("Action done: " + params.a + " "+ params.b);
            };

            this.checked = true;

            this.menuItems = [
                {itemType: "header", title: "Links:"},
                {itemType: "link", title: "Link 1", url: "#anchor-Menu"},
                {itemType: "link", title: "Link 2", url: "#anchor-Menu"},
                {itemType: "link", title: "Link 3", url: "#anchor-Menu"},
                {itemType: "divider"},
                {itemType: "header", title: "Actions:"},
                {itemType: "action", title: "Action 1", action: this.actionMethod},
                {itemType: "action", title: "Action 2", action: this.actionMethodParams, params: { a: "action2a", b: "action2b"}},
                {itemType: "divider"},
                {itemType: "header", title: "Options:"},
                {itemType: "option", title: "Option 1"},
                {itemType: "option", title: "Option 2", checked: this.checked}
            ];
        }
        Xui.controller("MenuTextAlignCtrl", menuTextAlignCtrl);
    </script>

    <script save-content="xui-demo-menu-data-sources-js">
        function menuDataSourcesCtrl() {
            this.actionMethod = function () {
                console.log("Action done");
            };

            this.actionMethodParams = function (params) {
                console.log("Action done: " + params.a + " "+ params.b);
            };

            this.checked = true;

            this.menuItems = [
                {itemType: "header", title: "Links:"},
                {itemType: "link", title: "Link 1", url: "#anchor-Menu"},
                {itemType: "link", title: "Link 2", url: "#anchor-Menu"},
                {itemType: "link", title: "Link 3", url: "#anchor-Menu"},
                {itemType: "divider"},
                {itemType: "header", title: "Actions:"},
                {itemType: "action", title: "Action 1", action: this.actionMethod},
                {itemType: "action", title: "Action 2", action: this.actionMethodParams, params: { a: "action2a", b: "action2b"}},
                {itemType: "divider"},
                {itemType: "header", title: "Options:"},
                {itemType: "option", title: "Option 1"},
                {itemType: "option", title: "Option 2", checked: this.checked}
            ];
        }
        Xui.controller("MenuDataSourcesCtrl", menuDataSourcesCtrl);
    </script>

    <script save-content="xui-demo-menu-disabled-js">
        function menuDisabledCtrl() {
            this.actionMethod = function () {
                console.log("Action done");
            };

            this.actionMethodParams = function (params) {
                console.log("Action done: " + params.a + " " + params.b);
            };

            this.disabled = true;
            this.checked = true;

            this.menuItems = [
                {itemType: "header", title: "Links:"},
                {itemType: "link", title: "Link 1", url: "#anchor-Menu"},
                {itemType: "link", title: "Link 2", url: "#anchor-Menu"},
                {itemType: "link", title: "Link 3", url: "#anchor-Menu", disabled: this.disabled },
                {itemType: "divider"},
                {itemType: "header", title: "Actions:"},
                {itemType: "action", title: "Action 1", action: this.actionMethod, disabled: this.disabled },
                {itemType: "action", title: "Action 2", action: this.actionMethodParams, params: { a: "action2a", b: "action2b"}},
                {itemType: "divider"},
                {itemType: "header", title: "Options:"},
                {itemType: "option", title: "Option 1", disabled: this.disabled },
                {itemType: "option", title: "Option 2", checked: this.checked }
            ];

            this.toogle = function () {
                this.disabled = !this.disabled;

                this.menuItems[3].disabled = this.disabled;
                this.menuItems[6].disabled = this.disabled;
                this.menuItems[10].disabled = this.disabled;
            };
        }
        Xui.controller('MenuDisabledCtrl', menuDisabledCtrl);
    </script>
    <script>
        angular.module("xui.demo").constant("xuiDemoConfig", {});
    </script>
</body>
</html>
