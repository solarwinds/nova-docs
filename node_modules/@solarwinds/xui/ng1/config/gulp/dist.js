"use strict";

const gulp = require("gulp");
const path = require("path");
const $ = require("@solarwinds/buildmeister/gulp-load-plugins")(gulp);

gulp.task("dist:resources", ["dist:less", "dist:data", "dist:copy-spec-typings"]);

gulp.task("dist:less", ()=> {
    return gulp.src([
        "src/styles/mixins/*.less",
        "src/styles/mixins.less",
        "src/styles/xui-framework-colors.less",
        "src/styles/xui-framework-variables.less",
        "src/styles/xui-framework-palette.less"
    ], {base: "src/styles"})
        .pipe(gulp.dest(path.resolve("dist/less")));
});

gulp.task("dist:data", ()=> {
    return gulp.src("../data/*.*")
        .pipe(gulp.dest("data"));
});

gulp.task("dist:copy-to-root", ()=> {
    return $.mergeStream([
        gulp.src("dist/**", {base: "dist"})
            .pipe(gulp.dest("../dist")),
        gulp.src("sdk/**", {base: "sdk"})
            .pipe(gulp.dest("../sdk")),
        gulp.src("typings/**", {base: "typings"})
            .pipe(gulp.dest("../typings"))
    ]);
});

gulp.task("dist:copy-spec-typings", ()=> {
    return gulp.src("spec/typings/**")
        .pipe(gulp.dest("sdk/spec/typings"));
});
