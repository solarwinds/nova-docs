<div ng-controller="PerfWizardModalController as vm" class="xui">
    <form>
        <xui-wizard id="wizard"
                    on-cancel="vm.onCancel()"
                    on-exit-step="vm.onExitStep(step)"
                    on-enter-step="vm.onEnterStep(step)"
                    on-next-step="vm.onNextStep(from, to)"
                    on-finish="vm.onFinish()"
                    can-go-next="vm.goNextEnabled"
                    can-go-back="vm.goBackEnabled"
                    can-finish="false"
                    current-step="vm.currentStep"
                    finish-text="Finish This Demo"
                    next-busy-text="{{vm.nextBusyText}}"
                    hide-header="false"
                    ng-model="vm">
            <xui-wizard-step label="first" title="Get Started" description="This is the first step of the wizard">
                <span>Let's Go!</span>
                <br/>
                <br/>
                <br/>
                <xui-checkbox ng-model="vm.goNextEnabled" id="accept">I Accept!</xui-checkbox>
            </xui-wizard-step>
            <xui-wizard-step label="second" title="Second" short-title="2&#x207f;&#x1d48;" next-text="Continue">
                <xui-textbox ng-model="vm.firstName" caption="First Name"></xui-textbox>
                <xui-textbox ng-model="vm.lastName" caption="Last Name"></xui-textbox>
                <xui-textbox ng-model="vm.email" caption="Email" type="email"></xui-textbox>
                <xui-textbox ng-model="vm.phone" caption="Phone" type="phone"></xui-textbox>
                <xui-textbox ng-model="vm.notes" caption="Notes" rows="3" id="notes"></xui-textbox>
                <xui-checkbox ng-model="vm.goNextEnabled" id="checkToContinue">Check to continue</xui-checkbox>
                <xui-checkbox ng-model="vm.goBackEnabled">I want to go back!</xui-checkbox>
            </xui-wizard-step>
            <xui-wizard-step label="activate" title="Choose Your Favorite Fruit" short-title="Choose fav">
                <div id="radios">
                    <xui-radio ng-model="vm.fruit" value="apples">Apples</xui-radio>
                    <xui-radio ng-model="vm.fruit" value="oranges">Oranges</xui-radio>
                    <xui-radio ng-model="vm.fruit" value="grapes" id="grapes">Grapes</xui-radio>
                    <xui-radio ng-model="vm.fruit" value="bananas">Bananas</xui-radio>
                    <xui-radio ng-model="vm.fruit" value="mangos">Mangos</xui-radio>
                    <xui-checkbox ng-model="vm.goNextEnabled" id="checkToContinue2">Check to continue</xui-checkbox>
                    <xui-checkbox ng-model="vm.goBackEnabled">I want to go back!</xui-checkbox>
                </div>
            </xui-wizard-step>
        </xui-wizard>
    </form>
</div>

<script type="text/javascript">
    Xui.controller('PerfWizardModalController', PerfWizardModalController,["$scope", "perfService", "xuiToastService"]);

    function PerfWizardModalController($scope, perfService, toast) {

        var vm = this;

        vm.nextBusyText = "waiting...";
        vm.steps = [{
            label: "label-one",
            title: "title 1",
            description: "description 1",
            templateUrl: "wizard-step-1"
        }];

        vm.onEnterStep = function (step) {
            vm.goNextEnabled = false;
            vm.goBackEnabled = true;
            toast.info("onEnterStep: " + step.label);
        };
        vm.onExitStep = function (step) {
            toast.info("onExitStep: " + step.label);
        };
        vm.onNextStep = function (from, to) {
            toast.info("from: " + from.label + " -> to:" + (to && to.label));
            vm.nextBusyText = "moving to " + (to && to.label);
        };
        vm.onCancel = function () {
            toast.info("onCancel");
            return true;
        };
        vm.onFinish = function () {
            vm.nextBusyText = "finishing";
        };

        perfService.registerMetrics(["watchersCount", "digestLoop", "pageLoad"], $scope);

    }
</script>
