<div ng-controller="PerfGridDemoCtrl as vm" id="grid-page">
    <xui-grid items-source="vm.simple.items"
              selection-property="id"
              smart-mode="vm.smartMode"
              pagination-data="vm.simple.pagination"
              sorting-data="vm.simple.sorting"
              selection-mode="{{vm.simple.slectionMode}}"
              template-url="simple-template"
              selection="vm.simple.selection"
              options="vm.options"
              show-selector="true">

        <xui-grid-toolbar-container>
            <xui-toolbar>
                <xui-toolbar-item>
                    <xui-button icon="add" display-style="tertiary">Add</xui-button>
                </xui-toolbar-item>
                <xui-toolbar-item>
                    <xui-button icon="edit" display-style="tertiary">Custom Property Editor</xui-button>
                </xui-toolbar-item>
                <xui-toolbar-divider></xui-toolbar-divider>
                <xui-toolbar-item>
                    <xui-menu title="more actions" display-style="tertiary">
                        <xui-menu-action action="">Add</xui-menu-action>
                        <xui-menu-action action="">Edit</xui-menu-action>
                        <xui-menu-action action="">Delete</xui-menu-action>
                    </xui-menu>
                </xui-toolbar-item>
                <xui-toolbar-splitter></xui-toolbar-splitter>
            </xui-toolbar>
        </xui-grid-toolbar-container>
    </xui-grid>
    <div>Current page: <span id="pagination-page">{{vm.simple.pagination.page}}</span></div>
</div>

<script type="text/ng-template" id="simple-template">{{::item.name}} : {{::item.value}}</script>

<script type="text/javascript">
    (function () {
        "use strict";

        Xui.controller("PerfGridDemoCtrl", PerfGridDemoCtrl, ["$scope", "perfService"]);

        function PerfGridDemoCtrl($scope, perfService) {

            var vm = this;
            var total = 200;

            vm.smartMode = true;

            vm.simple = {
                sorting: {
                    sortableColumns: [{"id": "name", "label": "Name"}],
                    sortBy: {"id": "name", "label": "Name"},
                    direction: "asc"
                },
                pagination: {
                    page: 1,
                    pageSize: 10,
                    total: total
                },
                items: populateArr(),
                selection: {
                    items: []
                },
                slectionMode: "multi"
            };

            vm.options = {
                triggerSearchOnChange: false,
                hidePagination: false
            };

            function populateArr() {
                var items = [];
                for (var i = 0; i < total; i++) {
                    items.push({
                        id: i + 1,
                        name: "Item " + pad(i, 3),
                        value: makeValue()
                    });
                }
                return items;
            }

            function makeValue() {
                var text = "";
                var possible = "abcdefghijklmnopqrstuvwxyz";

                for (var i = 0; i < 10; i++)
                    text += possible.charAt(Math.floor(Math.random() * possible.length));

                return text;
            }

            function pad(num, size) {
                var s = num + "";
                while (s.length < size) s = "0" + s;
                return s;
            }

            //register custom user metrics
            perfService.registerMetrics(["watchersCount", "digestLoop", "pageLoad"], $scope);

        }

    })();
</script>

