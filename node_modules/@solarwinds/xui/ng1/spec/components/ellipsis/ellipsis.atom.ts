import {browser, by, ElementFinder, promise} from "@solarwinds/uzi/protractor";
import {Atom} from "@solarwinds/uzi";
import SpecHelpers from "../specHelpers";

export class EllipsisAtom extends Atom {
    public static CSS_CLASS = "xui-ellipsis";

    public moveMouseToTarget = (atom: Atom): promise.Promise<void> => {
        return SpecHelpers.mouseOver(atom);
    };

    public getTitle(): promise.Promise<string> {
        return this.getElement()
            .element(by.className("xui-ellipsis-inner__text")).getText();
    }

    public getEllipsedAttribute(attrName: string): promise.Promise<string> {
        return this.getElement().element(by.className("xui-ellipsis-inner")).getAttribute(attrName);
    }

    public isTooltipDisplayed(): promise.Promise<boolean> {
        return this.getTooltip().isPresent();
    }

    public getTooltipAttribute (attribute: string): promise.Promise<string> {
        return this.getTooltip().getAttribute(attribute);
    }

    private getTooltip(): ElementFinder {
        return browser.element(by.className("ellipsis-tooltip"));
    }
}
