import * as protractor from "@solarwinds/uzi/protractor";
import {by, ElementArrayFinder, ElementFinder, promise} from "@solarwinds/uzi/protractor";
import {Atom} from "@solarwinds/uzi";

export class GlobalKeysAtom extends Atom {
    public isXuiRevealActive = (): Promise<boolean> => {
        return super.hasClass("xui-reveal");
    };

    public focus = () => {
        return super.getElement().click();
    };

    public toggleXuiReveal = () => {
        return super.getElement()
            .sendKeys(protractor.Key.chord(protractor.Key.CONTROL, protractor.Key.SHIFT, "`"));
    };

    public getComponents = (name: string): ElementArrayFinder => {
        return super.getElement().all(by.className(name));
    };

    public hasRedOutline = (el: ElementFinder): promise.Promise<boolean> => {
        return el.getCssValue("outline-color")
            .then((val: string) => {
                return val === "rgba(255, 0, 0, 1)";
            });
    };
}
