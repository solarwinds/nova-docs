import {by, element, promise, browser} from "@solarwinds/uzi/protractor";
import {DropdownAtom} from "../index.atom";

export class SorterAtom extends DropdownAtom {
    public static CSS_CLASS = "xui-sorter";

    public getItemCount() {
        return super.getElement().all(by.repeater("item in vm.itemsSource")).count();
    }

    public getItemText(index: number): promise.Promise<string> {
        return browser.executeScript("return arguments[0].innerHTML;",
            super.getElement().all(by.repeater("item in vm.itemsSource")).get(index));
    }

    public clickSortToggle() {
        return super.getElement()
            .element(by.className("xui-dropdown__action"))
            .click();
    }

    public isAscendingSortActionDisplayed() {
        return element(by.id("sortActionAsc")).isDisplayed();
    }

    public isDescendingSortActionDisplayed() {
        return element(by.id("sortActionDesc")).isDisplayed();
    }
}
