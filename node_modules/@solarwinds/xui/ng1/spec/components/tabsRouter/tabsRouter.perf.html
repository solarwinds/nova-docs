<div id="tabs">
    <div ui-view></div>
</div>

<script type="text/ng-template" id="tabs-router-template.html">
    <div>
        <xui-tabs id="mockTabs" xui-tabs-router>
            <xui-tab tab-id="first" title="FIRST TAB"></xui-tab>
            <xui-tab tab-id="second" title="SECOND TAB"></xui-tab>
            <xui-tab tab-id="third" title="THIRD TAB" xui-tab-router="vm.thirdTabSettings"></xui-tab>
        </xui-tabs>
        <br/>
        <hr/>
        <div class="change-state-buttons">
            <xui-button ng-click="vm.stateChange('second')">Set second</xui-button>
            <xui-button ng-click="vm.stateChange('third')">Set third</xui-button>
        </div>
    </div>
</script>

<script>
    (function () {
        "use strict";
        Xui.config(ConfigFunction, ["$locationProvider", "$urlRouterProvider", "$stateProvider"]);
        Xui.controller("PerfTabsRouterController", PerfTabsRouterController, ["$scope", "$state", "perfService"]);

        function ConfigFunction($locationProvider, $urlRouterProvider, $stateProvider) {
            $locationProvider.html5Mode(false);
            $urlRouterProvider.otherwise("/tabsRouter");

            $stateProvider.state("tabsRouter", {
                url: "/tabsRouter",
                controller: "PerfTabsRouterController",
                controllerAs: "vm",
                templateUrl: "tabs-router-template.html"
            });

            $stateProvider.state("tabsRouter.first", {
                url: "/first",
                template: "first template content"
            });

            $stateProvider.state("tabsRouter.second", {
                url: "/second",
                template: "second template content"
            });

            $stateProvider.state("tabsRouter.third", {
                url: "/third/:param1",
                template: "third template content"
            });
        }

        function PerfTabsRouterController($scope, $state, perfService) {

            var vm = this;

            vm.stateChange = function (tab) {
                if (typeof tab === "string") {
                    $state.go("tabsRouter." + tab);
                }
            };

            //register custom user metrics
            perfService.registerMetrics(["watchersCount", "digestLoop", "pageLoad"], $scope);

        }
    })();
</script>

