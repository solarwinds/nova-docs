import {ElementFinder, promise} from "@solarwinds/uzi/protractor";
import {Atom} from "@solarwinds/uzi";
import {ProgressAtom} from "../index.atom";

export class BusyAtom extends Atom {
    public static CSS_CLASS = "xui-busy";

    public isBusy = (): Promise<boolean> => {
        return this.hasClass("xui-busy--active");
    };

    public getProgress = () => {
        return Atom.findIn(ProgressAtom, super.getElement());
    };

    public isDisplayed = (): promise.Promise<boolean> => {
        return this.getElement().isDisplayed();
    };

    public isProgressBarDisplayed = () => {
        return this.getProgress().isProgressBarDisplayed();
    };

    public isAppended = (): promise.Promise<boolean> => {
        return this.getElement().isPresent();
    };

    public getOverflow = (parentContainer: ElementFinder): promise.Promise<string> => {
        return parentContainer.getCssValue("overflow");
    };
}
