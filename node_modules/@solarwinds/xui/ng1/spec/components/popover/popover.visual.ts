import { browser, by, promise } from "@solarwinds/uzi/protractor";
import Helpers from "../helpers";
import { Eyes } from "eyes.protractor";
import { PopoverAtom } from "../index.atom";

describe("Visual tests: Popover", function() {
    let eyes: Eyes;
    let popover: PopoverAtom;
    beforeEach(() => {
        eyes = Helpers.prepareEyes();
        Helpers.prepareBrowser("popover");
    });

    it("Default look", async () => {
        eyes.open(browser, "XUI","Popover");
        eyes.checkWindow("Default");

        await browser.driver.findElement(by.xpath("//*[text()[contains(.,'click me!')]]")).click();
        eyes.checkWindow("Clicked");

        await browser.driver.findElement(by.xpath("//*[text()[contains(.,'Set')]]")).click();
        eyes.checkWindow("Focused");

        await browser.actions()
            .mouseMove(browser.driver.findElement(by.xpath("//*[text()[contains(.,'Hover on me!')]]")))
            .perform();
        eyes.checkWindow("Hovered");

        await browser.driver.findElement(by.xpath("//*[text()[contains(.,'open left')]]")).click();
        eyes.checkWindow("Left popover");

        await browser.driver.findElement(by.xpath("//*[text()[contains(.,'open right')]]")).click();
        eyes.checkWindow("Right popover");
        eyes.close();
    });
});
