import {browser, by, element, promise} from "@solarwinds/uzi/protractor";
import Helpers from "../helpers";
import {Atom} from "@solarwinds/uzi";
import {WatchCounterAtom} from "../index.atom";

describe("USERCONTROL watchCounter", () => {

    let badgeDiv: WatchCounterAtom;
    let badgeHover: WatchCounterAtom;
    const backgroundRed = "rgba(213, 0, 0, 1)";
    const textWhite = "rgba(255, 255, 255, 1)";
    const outlineStyle = "rgb(213, 0, 0) dashed 1px";

    beforeEach(() => {
        Helpers.prepareBrowser("watchCounter");
        browser.ignoreSynchronization = true;
        badgeDiv = Atom.findIn(WatchCounterAtom, element(by.id("watch-counter-checkbox")));

    });

    afterEach(() => {
        browser.ignoreSynchronization = false;
    });

    it("badge should be displayed", () => {
        expect(badgeDiv.isDisplayed()).toBe(true);
    });

    it("should be red in background", () => {
        expect(badgeDiv.getBackgroundColor()).toBe(backgroundRed);
    });

    it("should be white for text color", () => {
        expect(badgeDiv.getTextColor()).toBe(textWhite);
    });

    it("should be number", () => {
        expect(badgeDiv.getTextNum()).toMatch(/^\d+$/);
    });

    it("should be red dashed for outline in background", () => {
        badgeDiv.mouseHover().then(() => {
            badgeHover = WatchCounterAtom.getBadge();
            expect(badgeHover.getBorderStyle()).toBe(outlineStyle);
        });
    });
});
