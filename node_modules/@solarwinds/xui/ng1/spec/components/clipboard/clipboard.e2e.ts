import * as protractor from "@solarwinds/uzi/protractor";
import {promise} from "@solarwinds/uzi/protractor";
import Helpers from "../helpers";
import {ButtonAtom, TextboxAtom} from "../index.atom";
import {Atom} from "@solarwinds/uzi";

describe("USERCONTROL Clipboard", () => {
    let buttonAtom: ButtonAtom;
    let copyTextbox: TextboxAtom;
    let pasteTextbox: TextboxAtom;

    beforeEach(() => {
        Helpers.prepareBrowser("clipboard");
        buttonAtom = Atom.find(ButtonAtom, "copyButton");
        copyTextbox = Atom.find(TextboxAtom, "textToCopy");
        pasteTextbox = Atom.find(TextboxAtom, "textToPaste");
    });

    // Chrome (v46) used in our TeamCity builds doesn't support clipboard
    xit("should copy text to clipboard", () => {
        const textToCopy = "text to copy";
        copyTextbox.acceptText(textToCopy);
        buttonAtom.click();

        const pastedInput = pasteTextbox.getInput();
        pastedInput.sendKeys(protractor.Key.CONTROL, "v");
        expect(pastedInput.getAttribute("value")).toBe(textToCopy);
    });
});
