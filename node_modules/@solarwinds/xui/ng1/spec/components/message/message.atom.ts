import {by, promise, ElementFinder} from "@solarwinds/uzi/protractor";
import {Atom} from "@solarwinds/uzi";

export class MessageAtom extends Atom {
    public static CSS_CLASS = "xui-message";

    public allowDismiss = () => {
        return this.hasClass("xui-message-allow-dismiss");
    };

    public getContent = () => {
        const element = super.getElement().element(by.className("xui-message-content"));
        return element.getText();
    };

    public getDismissButton = (): ElementFinder => {
        return super.getElement().element(by.className("xui-message-dismiss-button"));
    };

    public dismissMessage = () => {
        if (this.allowDismiss()) {
            this.getDismissButton().click();
        }
    };

    public isVisible = () => {
        return super.getElement().isPresent();
    };

    public isDismissable = () => {
        return this.getDismissButton().isDisplayed();
    };
}
