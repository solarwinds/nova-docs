<div ng-controller="DemoProgressController">
    <xui-button class="xui-demo-start-progress-btn" ng-click="startProgress()">Start Progress</xui-button>
    <xui-progress show="true"
                  show-progress="true"
                  allow-cancel="true"
                  on-cancel="onCancel()"
                  percent="{{percent}}"
                  message="Discovering the network, please wait..."
                  help-text="Discovered 10.199.1.2. Trying SNMP credentials...">
    </xui-progress>
    <xui-progress show="true"
                  show-progress="true"
                  allow-cancel="false"
                  percent="{{percent}}"
                  thin="true"
                  message="small text">
    </xui-progress>
    <div class="cancel-indicator" ng-class="{ 'cancel-clicked': isCancelled }"></div>
</div>

<script>
    (function () {
        "use strict";

        Xui.controller("DemoProgressController", progressController, ["$scope", "$interval"]);
        function progressController($scope, $interval) {
            $scope.percent = 0;
            $scope.isCancelled = false;

            var stop;
            $scope.startProgress = function () {
                $scope.show = true;
                $scope.percent = 0;

                stop = $interval(function () {
                    if ($scope.percent < 100) {
                        $scope.percent += 10;
                    }
                }, 1000);
            };

            $scope.onCancel = function () {
                if (angular.isDefined(stop)) {
                    $scope.show = false;
                    $interval.cancel(stop);
                    stop = undefined;
                    $scope.percent = 0;
                }
                $scope.isCancelled = true;
            };
        }
    })();
</script>
