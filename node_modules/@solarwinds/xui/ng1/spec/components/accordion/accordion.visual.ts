import {browser, by, element, promise} from "@solarwinds/uzi/protractor";
import Helpers from "../helpers";
import {Eyes} from "eyes.protractor";
import {AccordionAtom} from "../index.atom";

xdescribe("Visual tests", function () {
    let eyes: Eyes;
    let accordion: AccordionAtom;
    beforeAll(() => {
        eyes = Helpers.prepareEyes();
        Helpers.prepareBrowser("accordion");
        let section = element(by.id("accordion-page"));
        accordion = AccordionAtom.findIn(AccordionAtom, section);
    });

    it("for accordion", function () {
        let group1 = accordion.getGroup("group1");
        let group2 = accordion.getGroup("group2");
        eyes.open(browser, "XUI", "Accordion");
        eyes.checkWindow("Default");
        //browser.actions().mouseMove({x:100, y:160}).perform();
        browser.actions()
            .mouseMove(browser.driver.findElement(by.xpath("//*/span[contains(text(),'status')]")))
            .perform();
        eyes.checkWindow("Hover");
        group1.toggleExpand();
        eyes.checkWindow("Expanded group1");
        group2.toggleExpand();
        eyes.checkWindow("Expanded group2");
        eyes.close();
    },60000);
});
