import {by, element, promise} from "@solarwinds/uzi/protractor";
import Helpers from "../helpers";
import {AccordionAtom} from "../index.atom";

xdescribe("USERCONTROL Accordion", () => {
    let accordion: AccordionAtom;
    beforeEach(() => {
        Helpers.prepareBrowser("accordion");
        let section = element(by.id("accordion-page"));
        accordion = AccordionAtom.findIn(AccordionAtom, section);
    });

    it("will expand when header is clicked", () => {
        let group = accordion.getGroup("group1");
        expect(group.isCollapsed()).toEqual(true);
        group.toggleExpand();
        expect(group.isExpanded()).toEqual(true);
    });

    it("will not collapse original section when new one is expanded by default", () => {
        let group1 = accordion.getGroup("group1");
        let group2 = accordion.getGroup("group2");
        expect(group1.isCollapsed()).toEqual(true);
        expect(group2.isCollapsed()).toEqual(true);
        group1.toggleExpand();
        expect(group1.isExpanded()).toEqual(true);
        group2.toggleExpand();
        expect(group2.isExpanded()).toEqual(true);
    });

    it("will collapse original section when new one is expanded when close-others=true", () => {
        //default value is false so clicking over it sets to true
        element(by.id("oneAtTimeCheckBox")).click();
        let group1 = accordion.getGroup("group1");
        let group2 = accordion.getGroup("group2");
        expect(group1.isCollapsed()).toEqual(true);
        expect(group2.isCollapsed()).toEqual(true);
        group1.toggleExpand();
        expect(group1.isExpanded()).toEqual(true);
        expect(group1.isExpanded()).toEqual(true);
        group2.toggleExpand();
        expect(group1.isCollapsed()).toEqual(true);
        expect(group2.isExpanded()).toEqual(true);
    });
});
