import {browser, by, element, promise} from "@solarwinds/uzi/protractor";
import Helpers from "../helpers";
import {Eyes} from "eyes.protractor";
import {Atom} from "@solarwinds/uzi";
import {CheckboxAtom} from "../index.atom";

describe("Visual tests", function () {
    let atom: CheckboxAtom;
    let eyes: Eyes;

    beforeAll(() => {
        eyes = Helpers.prepareEyes();
        Helpers.prepareBrowser("checkbox");
        atom = Atom.find(CheckboxAtom, "testElement");
    });

    it("for checkbox", function () {
        const disable = element(by.id("disableToggle"));
        const value = element(by.id("valueToggle"));
        eyes.open(browser, "XUI", "Checkbox");
        //default
        eyes.checkWindow("Default - middle state");
        browser.actions()
            .mouseMove(browser.driver.findElement(by.xpath("//*[@id='testElement']/label/div[1]")))
            .perform();
        eyes.checkWindow("Hover - middle state");
        disable.click();
        eyes.checkWindow("Disabled - middle state");
        disable.click();
        // unchecked
        atom.click();
        //double click to lose focus
        value.click();
        value.click();
        eyes.checkWindow("Default - unchecked");
        browser.actions()
            .mouseMove(browser.driver.findElement(by.xpath("//*[@id='testElement']/label/div[1]")))
            .perform();
        eyes.checkWindow("Hover - unchecked");
        disable.click();
        eyes.checkWindow("Disabled - unchecked");
        disable.click();
        //checked
        value.click();
        eyes.checkWindow("Default - checked");
        browser.actions()
            .mouseMove(browser.driver.findElement(by.xpath("//*[@id='testElement']/label/div[1]")))
            .perform();
        eyes.checkWindow("Hover - checked");
        disable.click();
        eyes.checkWindow("Disabled - checked");
        eyes.close();
    }, 90000);
});
