"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const protractor = require("@solarwinds/uzi/protractor");
const protractor_1 = require("@solarwinds/uzi/protractor");
const helpers_1 = require("../helpers");
const uzi_1 = require("@solarwinds/uzi");
const index_atom_1 = require("../index.atom");
describe("USERCONTROL treeview", () => {
    describe("Basic usage section", () => {
        describe("(default child nodes name)", () => {
            basicTestCase("basic-usage");
        });
        describe("(custom child nodes name)", () => {
            basicTestCase("basic-usage-custom-children");
        });
        function basicTestCase(elementSelector) {
            let treeView;
            beforeEach(() => {
                helpers_1.default.prepareBrowser("treeview");
                let section = protractor_1.element(protractor_1.by.id(elementSelector));
                treeView = uzi_1.Atom.findIn(index_atom_1.TreeViewAtom, section);
            });
            it("should have first item selected", () => {
                const treeItem = treeView.getSubItem(0);
                expect(treeItem.isSelected()).toEqual(true);
            });
            it("should be expandable", () => {
                const treeItem = treeView.getSubItem(1);
                expect(treeItem.isExpanded()).toBe(false);
                expect(treeItem.getSubItemsCount()).toBe(0);
                treeItem.toggleExpand();
                expect(treeItem.getSubItemsCount()).toBeGreaterThan(0);
                expect(treeItem.isExpanded()).toBe(true);
                treeItem.toggleExpand();
                expect(treeItem.getSubItemsCount()).toBe(0);
                expect(treeItem.isExpanded()).toBe(false);
            });
            it("should expand after double-click on label", () => {
                const treeItem = treeView.getSubItem(2);
                expect(treeItem.getSubItemsCount()).toBe(0);
                protractor_1.browser.actions().doubleClick(treeItem.getTitleElement()).perform();
                expect(treeItem.getSubItemsCount()).toBeGreaterThan(0);
                protractor_1.browser.actions().doubleClick(treeItem.getTitleElement()).perform();
                expect(treeItem.getSubItemsCount()).toBe(0);
            });
            it("should be selectable", () => {
                const treeItem = treeView.getSubItem(3);
                expect(treeItem.isSelected()).toEqual(false);
                treeItem.getTitleElement().click();
                expect(treeItem.isSelected()).toEqual(true);
            });
            it("should not allow multiple selection", () => {
                const parentItem = treeView.getSubItem(4);
                parentItem.toggleExpand();
                const item1 = treeView.getSubItem(2);
                const item2 = parentItem.getSubItem(1);
                // Check that no item is selected
                expect(item1.isSelected()).toEqual(false);
                expect(item2.isSelected()).toEqual(false);
                // Click first item and check states
                item1.getTitleElement().click();
                expect(item1.isSelected()).toEqual(true);
                expect(item2.isSelected()).toEqual(false);
                // Click second item and check that first is unselected
                item2.getTitleElement().click();
                expect(item1.isSelected()).toEqual(false);
                expect(item2.isSelected()).toEqual(true);
            });
            it("should provide zebra striping just on top level", () => {
                const item1 = treeView.getSubItem(1);
                const item2 = treeView.getSubItem(2);
                expect(item1.getSubItems()).not.toEqual(item2.getBackgroundColor());
                item1.toggleExpand();
                const subItem1 = item1.getSubItem(1);
                const subItem2 = item1.getSubItem(2);
                expect(subItem1.getBackgroundColor()).toEqual(subItem2.getBackgroundColor());
            });
            it("should show currently focused node", () => {
                const getFocusedNodeText = function () {
                    const textElement = protractor_1.element(protractor_1.by.id(`${elementSelector}-focused`));
                    return textElement.getText();
                };
                const node6 = treeView.getSubItem(5);
                node6.toggleExpand();
                const node5 = node6.getSubItem(4);
                node5.getTitleElement().click();
                expect(getFocusedNodeText()).toEqual("Node5");
            });
        }
        ;
    });
    describe("Keyboard controls", () => {
        let treeView;
        beforeEach(() => {
            helpers_1.default.prepareBrowser("treeview");
            let section = protractor_1.element(protractor_1.by.id("basic-usage"));
            treeView = uzi_1.Atom.findIn(index_atom_1.TreeViewAtom, section);
        });
        it("should provide control using arrows", () => {
            const firstItem = treeView.getSubItem(2);
            expect(firstItem.isFocused()).toBe(false);
            // going to the first child of the second child of fourth three element
            firstItem.getTitleElement().click();
            expect(firstItem.isFocused()).toBe(true);
            protractor_1.browser.actions().sendKeys(protractor.Key.DOWN).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.RIGHT).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.DOWN).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.DOWN).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.RIGHT).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.DOWN).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.SPACE).perform();
            const lastItem = treeView.getSubItem(3).getSubItem(1).getSubItem(0);
            expect(firstItem.isFocused()).toBe(false);
            expect(lastItem.isFocused()).toBe(true);
            expect(lastItem.isSelected()).toBe(true);
            // going back to firstItem
            protractor_1.browser.actions().sendKeys(protractor.Key.LEFT).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.LEFT).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.LEFT).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.UP).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.SPACE).perform();
            expect(firstItem.isFocused()).toBe(true);
            expect(firstItem.isSelected()).toBe(true);
        });
        xit("should provide expand current node with (*) functionality from keyboard", () => {
            // Defect UIF-2726
            const firstItem = treeView.getSubItem(0);
            const secondItem = treeView.getSubItem(1);
            firstItem.getTitleElement().click();
            protractor_1.browser.actions().sendKeys(protractor.Key.MULTIPLY).perform();
            expect(firstItem.getSubItemsCount()).toBe(10);
            expect(secondItem.getSubItemsCount()).toBe(0);
            expect(firstItem.getSubItem(0).getSubItemsCount()).toBe(10);
        });
        it("should provide expand/collapse functionality", () => {
            const firstItem = treeView.getSubItem(0);
            const secondItem = treeView.getSubItem(1);
            firstItem.getTitleElement().click();
            protractor_1.browser.actions().sendKeys(protractor.Key.ADD).perform();
            expect(firstItem.getSubItemsCount()).toBe(10);
            expect(secondItem.getSubItemsCount()).toBe(0);
            expect(firstItem.getSubItem(0).getSubItemsCount()).toBe(0);
            protractor_1.browser.actions().sendKeys(protractor.Key.SUBTRACT).perform();
            expect(firstItem.getSubItemsCount()).toBe(0);
            expect(secondItem.getSubItemsCount()).toBe(0);
        });
        it("should provide expand/collapse-all functionality", () => {
            const firstItem = treeView.getSubItem(0);
            const secondItem = treeView.getSubItem(1);
            firstItem.getTitleElement().click();
            protractor_1.browser.actions().sendKeys(protractor.Key.SHIFT, protractor.Key.ADD).perform();
            expect(firstItem.getSubItemsCount()).toBe(10);
            expect(secondItem.getSubItemsCount()).toBe(10);
            expect(firstItem.getSubItem(0).getSubItemsCount()).toBe(0);
            protractor_1.browser.actions().sendKeys(protractor.Key.SHIFT, protractor.Key.SUBTRACT).perform();
            expect(firstItem.getSubItemsCount()).toBe(0);
            expect(secondItem.getSubItemsCount()).toBe(0);
        });
    });
    describe("multi-select section", () => {
        let treeView;
        beforeEach(() => {
            helpers_1.default.prepareBrowser("treeview");
            let section = protractor_1.element(protractor_1.by.id("multi-select"));
            treeView = uzi_1.Atom.findIn(index_atom_1.TreeViewAtom, section);
        });
        it("should be selectable", () => {
            const treeItem = treeView.getSubItem(3);
            expect(treeItem.isSelected()).toEqual(false);
            treeItem.invertSelection();
            expect(treeItem.isSelected()).toEqual(true);
        });
        it("should allow multi selection", () => {
            const item1 = treeView.getSubItem(3);
            const item2 = treeView.getSubItem(4);
            expect(item1.isSelected()).toEqual(false);
            expect(item2.isSelected()).toEqual(false);
            item1.invertSelection();
            item2.invertSelection();
            expect(item1.isSelected()).toEqual(true);
            expect(item2.isSelected()).toEqual(true);
        });
        it("should be controllable by keyboard", () => {
            const firstItem = treeView.getSubItem(0);
            expect(firstItem.isFocused()).toBe(false);
            firstItem.getTitleElement().click();
            protractor_1.browser.actions().sendKeys(protractor.Key.DOWN).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.SPACE).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.DOWN).perform();
            protractor_1.browser.actions().sendKeys(protractor.Key.SPACE).perform();
            const temp1 = treeView.getSubItem(1);
            expect(firstItem.isFocused()).toBe(false);
            expect(firstItem.isSelected()).toBe(true);
            expect(temp1.isFocused()).toBe(true);
            expect(temp1.isSelected()).toBe(true);
        });
    });
    describe("is-always-selected disabled section", () => {
        let treeView;
        beforeEach(() => {
            helpers_1.default.prepareBrowser("treeview");
            let section = protractor_1.element(protractor_1.by.id("is-always-selected-disabled"));
            treeView = uzi_1.Atom.findIn(index_atom_1.TreeViewAtom, section);
        });
        it("should not have first item selected", () => {
            const treeItem = treeView.getSubItem(0);
            expect(treeItem.isSelected()).toEqual(false);
        });
    });
    describe("Links section", () => {
        let treeView;
        beforeEach(() => {
            helpers_1.default.prepareBrowser("treeview");
            let section = protractor_1.element(protractor_1.by.id("links-images"));
            treeView = uzi_1.Atom.findIn(index_atom_1.TreeViewAtom, section);
        });
        it("should not show expander on last item", () => {
            const firstItem = treeView.getSubItem(0);
            const lastItem = treeView.getSubItem(9);
            expect(firstItem.isExpanderVisible()).toEqual(true);
            expect(lastItem.isExpanderVisible()).toEqual(false);
        });
        it("should be expandable by single click on label", () => {
            const treeItem = treeView.getSubItem(2);
            expect(treeItem.getSubItemsCount()).toBe(0);
            treeItem.getTitleElement().click();
            expect(treeItem.getSubItemsCount()).toBeGreaterThan(0);
            treeItem.getTitleElement().click();
            expect(treeItem.getSubItemsCount()).toBe(0);
        });
        it("should return icon atom instance", () => {
            const treeItem = treeView.getSubItem(2);
            const icon = treeItem.getIcon();
            expect(icon).not.toBeNull();
        });
    });
    describe("Limit section", () => {
        let treeView;
        beforeEach(() => {
            helpers_1.default.prepareBrowser("treeview");
            let section = protractor_1.element(protractor_1.by.id("limit"));
            treeView = uzi_1.Atom.findIn(index_atom_1.TreeViewAtom, section);
        });
        it("should display 'show more' and 'show all' links only if needed", () => {
            const limitLinks = protractor_1.element(protractor_1.by.className("xui-treeview-limit-links"));
            const limitLinksShowMore = limitLinks.element(protractor_1.by.className("xui-treeview-showmore"));
            const limitLinksShowAll = limitLinks.element(protractor_1.by.className("xui-treeview-showall"));
            expect(limitLinks.getText()).toBe("show more / show all");
            expect(treeView.getSubItemsCount()).toBe(4); // it happened that "show more/all" links are also "li"
            limitLinksShowMore.click();
            expect(treeView.getSubItemsCount()).toBe(7); // it happened that "show more/all" links are also "li"
            limitLinksShowAll.click();
            expect(treeView.getSubItemsCount()).toBe(10);
            expect(protractor_1.element(protractor_1.by.className("xui-treeview-limit-links")).isPresent()).toBe(false);
        });
    });
    describe("Sort behavior", () => {
        let treeView;
        let sortroot;
        let sortchild;
        beforeEach(() => {
            helpers_1.default.prepareBrowser("treeview");
            let section = protractor_1.element(protractor_1.by.id("sorter"));
            treeView = uzi_1.Atom.findIn(index_atom_1.TreeViewAtom, section);
            sortroot = uzi_1.Atom.findIn(index_atom_1.ButtonAtom, section, 0);
            sortchild = uzi_1.Atom.findIn(index_atom_1.ButtonAtom, section, 1);
        });
        it("should be able to reorder root nodes", () => {
            let treeItem = treeView.getSubItem(0);
            expect(treeItem.getTitleElement().getText()).toBe("Node1");
            sortroot.click();
            treeItem = treeView.getSubItem(0);
            protractor_1.browser.wait(() => {
                return treeItem.getTitleElement().getText().then((text) => {
                    return text === "Node10";
                });
            }, 4000); //wait up to 4 seconds
            expect(treeItem.getTitleElement().getText()).toBe("Node10");
        });
        it("should be able to reorder child nodes", () => {
            const treeItem = treeView.getSubItem(0);
            treeItem.toggleExpand();
            let child = treeItem.getSubItem(0);
            expect(child.getTitleElement().getText()).toBe("Node1");
            sortchild.click();
            child = treeItem.getSubItem(0);
            expect(child.getTitleElement().getText()).toBe("Node10");
        });
    });
    describe("Treeview state", () => {
        let treeView;
        beforeEach(() => {
            helpers_1.default.prepareBrowser("treeview");
            let section = protractor_1.element(protractor_1.by.id("state"));
            treeView = uzi_1.Atom.findIn(index_atom_1.TreeViewAtom, section);
        });
        it("should draw treeview with setted state", () => {
            const treeItem = treeView.getSubItem(0);
            expect(treeItem.getSubItemsCount()).toBe(5);
            let subItem = treeItem.getSubItem(2);
            expect(subItem.isSelected()).toBe(true);
        });
    });
    describe("Treeview events", () => {
        let treeView;
        beforeEach(() => {
            helpers_1.default.prepareBrowser("treeview");
            let section = protractor_1.element(protractor_1.by.id("events"));
            treeView = uzi_1.Atom.findIn(index_atom_1.TreeViewAtom, section);
        });
        it("should fire onExpand", () => {
            const parentItem = treeView.getSubItem(0);
            parentItem.toggleExpand();
            expect(protractor_1.element(protractor_1.by.id("events-last-fired")).getText()).toBe("expanded");
        });
        it("should fire onCollapse", () => {
            const parentItem = treeView.getSubItem(0);
            parentItem.toggleExpand();
            parentItem.toggleExpand();
            expect(protractor_1.element(protractor_1.by.id("events-last-fired")).getText()).toBe("collapsed");
        });
        it("should fire onSelect", () => {
            const parentItem = treeView.getSubItem(0);
            parentItem.getTitleElement().click();
            expect(protractor_1.element(protractor_1.by.id("events-last-fired")).getText()).toBe("selected");
        });
        it("should fire onDblClick", () => {
            protractor_1.browser.actions().doubleClick(treeView.getSubItem(0).getTitleElement()).perform();
            expect(protractor_1.element(protractor_1.by.id("events-last-fired")).getText()).toBe("dbClicked");
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvdHJlZXZpZXcvdHJlZXZpZXcuZTJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEseURBQXlEO0FBQ3pELDJEQUF5RTtBQUN6RSx3Q0FBaUM7QUFDakMseUNBQXFDO0FBQ3JDLDhDQUF1RDtBQUV2RCxRQUFRLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO0lBQ2xDLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxHQUFHLEVBQUU7UUFDakMsUUFBUSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsRUFBRTtZQUN4QyxhQUFhLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDakMsQ0FBQyxDQUFDLENBQUM7UUFDSCxRQUFRLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1lBQ3ZDLGFBQWEsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO1FBQ2pELENBQUMsQ0FBQyxDQUFDO1FBQ0gsdUJBQXVCLGVBQXNCO1lBQ3pDLElBQUksUUFBc0IsQ0FBQztZQUMzQixVQUFVLENBQUMsR0FBRyxFQUFFO2dCQUNaLGlCQUFPLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUNuQyxJQUFJLE9BQU8sR0FBRyxvQkFBTyxDQUFDLGVBQUUsQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQztnQkFDOUMsUUFBUSxHQUFHLFVBQUksQ0FBQyxNQUFNLENBQUMseUJBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztZQUNsRCxDQUFDLENBQUMsQ0FBQztZQUNILEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7Z0JBQ3ZDLE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDaEQsQ0FBQyxDQUFDLENBQUM7WUFDSCxFQUFFLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO2dC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QUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUMxQixVQUFVLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDMUIsTUFBTSxDQUFDLG9CQUFPLENBQUMsZUFBRSxDQUFDLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDNUUsQ0FBQyxDQUFDLENBQUM7UUFDSCxFQUFFLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO1lBQzVCLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDMUMsVUFBVSxDQUFDLGVBQWUsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ3JDLE1BQU0sQ0FBQyxvQkFBTyxDQUFDLGVBQUUsQ0FBQyxFQUFFLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzNFLENBQUMsQ0FBQyxDQUFDO1FBQ0gsRUFBRSxDQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtZQUM5QixvQkFBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLFdBQVcsQ0FBTSxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDdkYsTUFBTSxDQUFDLG9CQUFPLENBQUMsZUFBRSxDQUFDLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDNUUsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6ImNvbXBvbmVudHMvdHJlZXZpZXcvdHJlZXZpZXcuZTJlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcHJvdHJhY3RvciBmcm9tIFwiQHNvbGFyd2luZHMvdXppL3Byb3RyYWN0b3JcIjtcbmltcG9ydCB7YnJvd3NlciwgYnksIGVsZW1lbnQsIHByb21pc2V9IGZyb20gXCJAc29sYXJ3aW5kcy91emkvcHJvdHJhY3RvclwiO1xuaW1wb3J0IEhlbHBlcnMgZnJvbSBcIi4uL2hlbHBlcnNcIjtcbmltcG9ydCB7QXRvbX0gZnJvbSBcIkBzb2xhcndpbmRzL3V6aVwiO1xuaW1wb3J0IHtCdXR0b25BdG9tLCBUcmVlVmlld0F0b219IGZyb20gXCIuLi9pbmRleC5hdG9tXCI7XG5cbmRlc2NyaWJlKFwiVVNFUkNPTlRST0wgdHJlZXZpZXdcIiwgKCkgPT4ge1xuICAgIGRlc2NyaWJlKFwiQmFzaWMgdXNhZ2Ugc2VjdGlvblwiLCAoKSA9PiB7XG4gICAgICAgIGRlc2NyaWJlKFwiKGRlZmF1bHQgY2hpbGQgbm9kZXMgbmFtZSlcIiwgKCkgPT4ge1xuICAgICAgICAgICAgYmFzaWNUZXN0Q2FzZShcImJhc2ljLXVzYWdlXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgZGVzY3JpYmUoXCIoY3VzdG9tIGNoaWxkIG5vZGVzIG5hbWUpXCIsICgpID0+IHtcbiAgICAgICAgICAgIGJhc2ljVGVzdENhc2UoXCJiYXNpYy11c2FnZS1jdXN0b20tY2hpbGRyZW5cIik7XG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBiYXNpY1Rlc3RDYXNlKGVsZW1lbnRTZWxlY3RvcjpzdHJpbmcpIHtcbiAgICAgICAgICAgIGxldCB0cmVlVmlldzogVHJlZVZpZXdBdG9tO1xuICAgICAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgSGVscGVycy5wcmVwYXJlQnJvd3NlcihcInRyZWV2aWV3XCIpO1xuICAgICAgICAgICAgICAgIGxldCBzZWN0aW9uID0gZWxlbWVudChieS5pZChlbGVtZW50U2VsZWN0b3IpKTtcbiAgICAgICAgICAgICAgICB0cmVlVmlldyA9IEF0b20uZmluZEluKFRyZWVWaWV3QXRvbSwgc2VjdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIGhhdmUgZmlyc3QgaXRlbSBzZWxlY3RlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHJlZUl0ZW0gPSB0cmVlVmlldy5nZXRTdWJJdGVtKDApO1xuICAgICAgICAgICAgICAgIGV4cGVjdCh0cmVlSXRlbS5pc1NlbGVjdGVkKCkpLnRvRXF1YWwodHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIGJlIGV4cGFuZGFibGVcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyZWVJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgxKTtcbiAgICAgICAgICAgICAgICBleHBlY3QodHJlZUl0ZW0uaXNFeHBhbmRlZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBleHBlY3QodHJlZUl0ZW0uZ2V0U3ViSXRlbXNDb3VudCgpKS50b0JlKDApO1xuICAgICAgICAgICAgICAgIHRyZWVJdGVtLnRvZ2dsZUV4cGFuZCgpO1xuICAgICAgICAgICAgICAgIGV4cGVjdCh0cmVlSXRlbS5nZXRTdWJJdGVtc0NvdW50KCkpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgICAgICAgICBleHBlY3QodHJlZUl0ZW0uaXNFeHBhbmRlZCgpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgICAgIHRyZWVJdGVtLnRvZ2dsZUV4cGFuZCgpO1xuICAgICAgICAgICAgICAgIGV4cGVjdCh0cmVlSXRlbS5nZXRTdWJJdGVtc0NvdW50KCkpLnRvQmUoMCk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHRyZWVJdGVtLmlzRXhwYW5kZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIGV4cGFuZCBhZnRlciBkb3VibGUtY2xpY2sgb24gbGFiZWxcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyZWVJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgyKTtcbiAgICAgICAgICAgICAgICBleHBlY3QodHJlZUl0ZW0uZ2V0U3ViSXRlbXNDb3VudCgpKS50b0JlKDApO1xuICAgICAgICAgICAgICAgIGJyb3dzZXIuYWN0aW9ucygpLmRvdWJsZUNsaWNrKDxhbnk+dHJlZUl0ZW0uZ2V0VGl0bGVFbGVtZW50KCkpLnBlcmZvcm0oKTtcbiAgICAgICAgICAgICAgICBleHBlY3QodHJlZUl0ZW0uZ2V0U3ViSXRlbXNDb3VudCgpKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgICAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkuZG91YmxlQ2xpY2soPGFueT50cmVlSXRlbS5nZXRUaXRsZUVsZW1lbnQoKSkucGVyZm9ybSgpO1xuICAgICAgICAgICAgICAgIGV4cGVjdCh0cmVlSXRlbS5nZXRTdWJJdGVtc0NvdW50KCkpLnRvQmUoMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIGJlIHNlbGVjdGFibGVcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyZWVJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgzKTtcbiAgICAgICAgICAgICAgICBleHBlY3QodHJlZUl0ZW0uaXNTZWxlY3RlZCgpKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0cmVlSXRlbS5nZXRUaXRsZUVsZW1lbnQoKS5jbGljaygpO1xuICAgICAgICAgICAgICAgIGV4cGVjdCh0cmVlSXRlbS5pc1NlbGVjdGVkKCkpLnRvRXF1YWwodHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIG5vdCBhbGxvdyBtdWx0aXBsZSBzZWxlY3Rpb25cIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudEl0ZW0gPSB0cmVlVmlldy5nZXRTdWJJdGVtKDQpO1xuICAgICAgICAgICAgICAgIHBhcmVudEl0ZW0udG9nZ2xlRXhwYW5kKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbTEgPSB0cmVlVmlldy5nZXRTdWJJdGVtKDIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0yID0gcGFyZW50SXRlbS5nZXRTdWJJdGVtKDEpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCBubyBpdGVtIGlzIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgZXhwZWN0KGl0ZW0xLmlzU2VsZWN0ZWQoKSkudG9FcXVhbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGl0ZW0yLmlzU2VsZWN0ZWQoKSkudG9FcXVhbChmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDbGljayBmaXJzdCBpdGVtIGFuZCBjaGVjayBzdGF0ZXNcbiAgICAgICAgICAgICAgICBpdGVtMS5nZXRUaXRsZUVsZW1lbnQoKS5jbGljaygpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChpdGVtMS5pc1NlbGVjdGVkKCkpLnRvRXF1YWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGl0ZW0yLmlzU2VsZWN0ZWQoKSkudG9FcXVhbChmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDbGljayBzZWNvbmQgaXRlbSBhbmQgY2hlY2sgdGhhdCBmaXJzdCBpcyB1bnNlbGVjdGVkXG4gICAgICAgICAgICAgICAgaXRlbTIuZ2V0VGl0bGVFbGVtZW50KCkuY2xpY2soKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoaXRlbTEuaXNTZWxlY3RlZCgpKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoaXRlbTIuaXNTZWxlY3RlZCgpKS50b0VxdWFsKHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpdChcInNob3VsZCBwcm92aWRlIHplYnJhIHN0cmlwaW5nIGp1c3Qgb24gdG9wIGxldmVsXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtMSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbTIgPSB0cmVlVmlldy5nZXRTdWJJdGVtKDIpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChpdGVtMS5nZXRTdWJJdGVtcygpKS5ub3QudG9FcXVhbChpdGVtMi5nZXRCYWNrZ3JvdW5kQ29sb3IoKSk7XG4gICAgICAgICAgICAgICAgaXRlbTEudG9nZ2xlRXhwYW5kKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViSXRlbTEgPSBpdGVtMS5nZXRTdWJJdGVtKDEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1Ykl0ZW0yID0gaXRlbTEuZ2V0U3ViSXRlbSgyKTtcbiAgICAgICAgICAgICAgICBleHBlY3Qoc3ViSXRlbTEuZ2V0QmFja2dyb3VuZENvbG9yKCkpLnRvRXF1YWwoc3ViSXRlbTIuZ2V0QmFja2dyb3VuZENvbG9yKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpdChcInNob3VsZCBzaG93IGN1cnJlbnRseSBmb2N1c2VkIG5vZGVcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdldEZvY3VzZWROb2RlVGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dEVsZW1lbnQgPSBlbGVtZW50KGJ5LmlkKGAke2VsZW1lbnRTZWxlY3Rvcn0tZm9jdXNlZGApKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRleHRFbGVtZW50LmdldFRleHQoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGU2ID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSg1KTtcbiAgICAgICAgICAgICAgICBub2RlNi50b2dnbGVFeHBhbmQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlNSA9IG5vZGU2LmdldFN1Ykl0ZW0oNCk7XG4gICAgICAgICAgICAgICAgbm9kZTUuZ2V0VGl0bGVFbGVtZW50KCkuY2xpY2soKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoZ2V0Rm9jdXNlZE5vZGVUZXh0KCkpLnRvRXF1YWwoXCJOb2RlNVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKFwiS2V5Ym9hcmQgY29udHJvbHNcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgdHJlZVZpZXc6IFRyZWVWaWV3QXRvbTtcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBIZWxwZXJzLnByZXBhcmVCcm93c2VyKFwidHJlZXZpZXdcIik7XG4gICAgICAgICAgICBsZXQgc2VjdGlvbiA9IGVsZW1lbnQoYnkuaWQoXCJiYXNpYy11c2FnZVwiKSk7XG4gICAgICAgICAgICB0cmVlVmlldyA9IEF0b20uZmluZEluKFRyZWVWaWV3QXRvbSwgc2VjdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcInNob3VsZCBwcm92aWRlIGNvbnRyb2wgdXNpbmcgYXJyb3dzXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMik7XG4gICAgICAgICAgICBleHBlY3QoZmlyc3RJdGVtLmlzRm9jdXNlZCgpKS50b0JlKGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gZ29pbmcgdG8gdGhlIGZpcnN0IGNoaWxkIG9mIHRoZSBzZWNvbmQgY2hpbGQgb2YgZm91cnRoIHRocmVlIGVsZW1lbnRcbiAgICAgICAgICAgIGZpcnN0SXRlbS5nZXRUaXRsZUVsZW1lbnQoKS5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KGZpcnN0SXRlbS5pc0ZvY3VzZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGJyb3dzZXIuYWN0aW9ucygpLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LkRPV04pLnBlcmZvcm0oKTtcbiAgICAgICAgICAgIGJyb3dzZXIuYWN0aW9ucygpLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LlJJR0hUKS5wZXJmb3JtKCk7XG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5ET1dOKS5wZXJmb3JtKCk7XG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5ET1dOKS5wZXJmb3JtKCk7XG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5SSUdIVCkucGVyZm9ybSgpO1xuICAgICAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuRE9XTikucGVyZm9ybSgpO1xuICAgICAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuU1BBQ0UpLnBlcmZvcm0oKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgzKS5nZXRTdWJJdGVtKDEpLmdldFN1Ykl0ZW0oMCk7XG4gICAgICAgICAgICBleHBlY3QoZmlyc3RJdGVtLmlzRm9jdXNlZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChsYXN0SXRlbS5pc0ZvY3VzZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChsYXN0SXRlbS5pc1NlbGVjdGVkKCkpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIGdvaW5nIGJhY2sgdG8gZmlyc3RJdGVtXG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5MRUZUKS5wZXJmb3JtKCk7XG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5MRUZUKS5wZXJmb3JtKCk7XG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5MRUZUKS5wZXJmb3JtKCk7XG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5VUCkucGVyZm9ybSgpO1xuICAgICAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuU1BBQ0UpLnBlcmZvcm0oKTtcbiAgICAgICAgICAgIGV4cGVjdChmaXJzdEl0ZW0uaXNGb2N1c2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QoZmlyc3RJdGVtLmlzU2VsZWN0ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHhpdChcInNob3VsZCBwcm92aWRlIGV4cGFuZCBjdXJyZW50IG5vZGUgd2l0aCAoKikgZnVuY3Rpb25hbGl0eSBmcm9tIGtleWJvYXJkXCIsICgpID0+IHtcbiAgICAgICAgICAgIC8vIERlZmVjdCBVSUYtMjcyNlxuICAgICAgICAgICAgY29uc3QgZmlyc3RJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgwKTtcbiAgICAgICAgICAgIGNvbnN0IHNlY29uZEl0ZW0gPSB0cmVlVmlldy5nZXRTdWJJdGVtKDEpO1xuICAgICAgICAgICAgZmlyc3RJdGVtLmdldFRpdGxlRWxlbWVudCgpLmNsaWNrKCk7XG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5NVUxUSVBMWSkucGVyZm9ybSgpO1xuICAgICAgICAgICAgZXhwZWN0KGZpcnN0SXRlbS5nZXRTdWJJdGVtc0NvdW50KCkpLnRvQmUoMTApO1xuICAgICAgICAgICAgZXhwZWN0KHNlY29uZEl0ZW0uZ2V0U3ViSXRlbXNDb3VudCgpKS50b0JlKDApO1xuICAgICAgICAgICAgZXhwZWN0KGZpcnN0SXRlbS5nZXRTdWJJdGVtKDApLmdldFN1Ykl0ZW1zQ291bnQoKSkudG9CZSgxMCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcInNob3VsZCBwcm92aWRlIGV4cGFuZC9jb2xsYXBzZSBmdW5jdGlvbmFsaXR5XCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMCk7XG4gICAgICAgICAgICBjb25zdCBzZWNvbmRJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgxKTtcbiAgICAgICAgICAgIGZpcnN0SXRlbS5nZXRUaXRsZUVsZW1lbnQoKS5jbGljaygpO1xuICAgICAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuQUREKS5wZXJmb3JtKCk7XG4gICAgICAgICAgICBleHBlY3QoZmlyc3RJdGVtLmdldFN1Ykl0ZW1zQ291bnQoKSkudG9CZSgxMCk7XG4gICAgICAgICAgICBleHBlY3Qoc2Vjb25kSXRlbS5nZXRTdWJJdGVtc0NvdW50KCkpLnRvQmUoMCk7XG4gICAgICAgICAgICBleHBlY3QoZmlyc3RJdGVtLmdldFN1Ykl0ZW0oMCkuZ2V0U3ViSXRlbXNDb3VudCgpKS50b0JlKDApO1xuICAgICAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuU1VCVFJBQ1QpLnBlcmZvcm0oKTtcbiAgICAgICAgICAgIGV4cGVjdChmaXJzdEl0ZW0uZ2V0U3ViSXRlbXNDb3VudCgpKS50b0JlKDApO1xuICAgICAgICAgICAgZXhwZWN0KHNlY29uZEl0ZW0uZ2V0U3ViSXRlbXNDb3VudCgpKS50b0JlKDApO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoXCJzaG91bGQgcHJvdmlkZSBleHBhbmQvY29sbGFwc2UtYWxsIGZ1bmN0aW9uYWxpdHlcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgwKTtcbiAgICAgICAgICAgIGNvbnN0IHNlY29uZEl0ZW0gPSB0cmVlVmlldy5nZXRTdWJJdGVtKDEpO1xuICAgICAgICAgICAgZmlyc3RJdGVtLmdldFRpdGxlRWxlbWVudCgpLmNsaWNrKCk7XG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5TSElGVCwgcHJvdHJhY3Rvci5LZXkuQUREKS5wZXJmb3JtKCk7XG4gICAgICAgICAgICBleHBlY3QoZmlyc3RJdGVtLmdldFN1Ykl0ZW1zQ291bnQoKSkudG9CZSgxMCk7XG4gICAgICAgICAgICBleHBlY3Qoc2Vjb25kSXRlbS5nZXRTdWJJdGVtc0NvdW50KCkpLnRvQmUoMTApO1xuICAgICAgICAgICAgZXhwZWN0KGZpcnN0SXRlbS5nZXRTdWJJdGVtKDApLmdldFN1Ykl0ZW1zQ291bnQoKSkudG9CZSgwKTtcbiAgICAgICAgICAgIGJyb3dzZXIuYWN0aW9ucygpLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LlNISUZULCBwcm90cmFjdG9yLktleS5TVUJUUkFDVCkucGVyZm9ybSgpO1xuICAgICAgICAgICAgZXhwZWN0KGZpcnN0SXRlbS5nZXRTdWJJdGVtc0NvdW50KCkpLnRvQmUoMCk7XG4gICAgICAgICAgICBleHBlY3Qoc2Vjb25kSXRlbS5nZXRTdWJJdGVtc0NvdW50KCkpLnRvQmUoMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKFwibXVsdGktc2VsZWN0IHNlY3Rpb25cIiwgKCkgPT4ge1xuICAgICAgICBsZXQgdHJlZVZpZXc6IFRyZWVWaWV3QXRvbTtcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBIZWxwZXJzLnByZXBhcmVCcm93c2VyKFwidHJlZXZpZXdcIik7XG4gICAgICAgICAgICBsZXQgc2VjdGlvbiA9IGVsZW1lbnQoYnkuaWQoXCJtdWx0aS1zZWxlY3RcIikpO1xuICAgICAgICAgICAgdHJlZVZpZXcgPSBBdG9tLmZpbmRJbihUcmVlVmlld0F0b20sIHNlY3Rpb24pO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoXCJzaG91bGQgYmUgc2VsZWN0YWJsZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0cmVlSXRlbSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMyk7XG4gICAgICAgICAgICBleHBlY3QodHJlZUl0ZW0uaXNTZWxlY3RlZCgpKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgIHRyZWVJdGVtLmludmVydFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgZXhwZWN0KHRyZWVJdGVtLmlzU2VsZWN0ZWQoKSkudG9FcXVhbCh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KFwic2hvdWxkIGFsbG93IG11bHRpIHNlbGVjdGlvblwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtMSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMyk7XG4gICAgICAgICAgICBjb25zdCBpdGVtMiA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oNCk7XG4gICAgICAgICAgICBleHBlY3QoaXRlbTEuaXNTZWxlY3RlZCgpKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChpdGVtMi5pc1NlbGVjdGVkKCkpLnRvRXF1YWwoZmFsc2UpO1xuICAgICAgICAgICAgaXRlbTEuaW52ZXJ0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBpdGVtMi5pbnZlcnRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGV4cGVjdChpdGVtMS5pc1NlbGVjdGVkKCkpLnRvRXF1YWwodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QoaXRlbTIuaXNTZWxlY3RlZCgpKS50b0VxdWFsKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoXCJzaG91bGQgYmUgY29udHJvbGxhYmxlIGJ5IGtleWJvYXJkXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMCk7XG4gICAgICAgICAgICBleHBlY3QoZmlyc3RJdGVtLmlzRm9jdXNlZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGZpcnN0SXRlbS5nZXRUaXRsZUVsZW1lbnQoKS5jbGljaygpO1xuICAgICAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuRE9XTikucGVyZm9ybSgpO1xuICAgICAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuU1BBQ0UpLnBlcmZvcm0oKTtcbiAgICAgICAgICAgIGJyb3dzZXIuYWN0aW9ucygpLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LkRPV04pLnBlcmZvcm0oKTtcbiAgICAgICAgICAgIGJyb3dzZXIuYWN0aW9ucygpLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LlNQQUNFKS5wZXJmb3JtKCk7XG4gICAgICAgICAgICBjb25zdCB0ZW1wMSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMSk7XG4gICAgICAgICAgICBleHBlY3QoZmlyc3RJdGVtLmlzRm9jdXNlZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChmaXJzdEl0ZW0uaXNTZWxlY3RlZCgpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHRlbXAxLmlzRm9jdXNlZCgpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHRlbXAxLmlzU2VsZWN0ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZGVzY3JpYmUoXCJpcy1hbHdheXMtc2VsZWN0ZWQgZGlzYWJsZWQgc2VjdGlvblwiLCAoKSA9PiB7XG4gICAgICAgIGxldCB0cmVlVmlldzogVHJlZVZpZXdBdG9tO1xuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgICAgIEhlbHBlcnMucHJlcGFyZUJyb3dzZXIoXCJ0cmVldmlld1wiKTtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uID0gZWxlbWVudChieS5pZChcImlzLWFsd2F5cy1zZWxlY3RlZC1kaXNhYmxlZFwiKSk7XG4gICAgICAgICAgICB0cmVlVmlldyA9IEF0b20uZmluZEluKFRyZWVWaWV3QXRvbSwgc2VjdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcInNob3VsZCBub3QgaGF2ZSBmaXJzdCBpdGVtIHNlbGVjdGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRyZWVJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgwKTtcbiAgICAgICAgICAgIGV4cGVjdCh0cmVlSXRlbS5pc1NlbGVjdGVkKCkpLnRvRXF1YWwoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuICAgIGRlc2NyaWJlKFwiTGlua3Mgc2VjdGlvblwiLCAoKSA9PiB7XG4gICAgICAgIGxldCB0cmVlVmlldzogVHJlZVZpZXdBdG9tO1xuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgICAgIEhlbHBlcnMucHJlcGFyZUJyb3dzZXIoXCJ0cmVldmlld1wiKTtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uID0gZWxlbWVudChieS5pZChcImxpbmtzLWltYWdlc1wiKSk7XG4gICAgICAgICAgICB0cmVlVmlldyA9IEF0b20uZmluZEluKFRyZWVWaWV3QXRvbSwgc2VjdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcInNob3VsZCBub3Qgc2hvdyBleHBhbmRlciBvbiBsYXN0IGl0ZW1cIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgwKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSg5KTtcbiAgICAgICAgICAgIGV4cGVjdChmaXJzdEl0ZW0uaXNFeHBhbmRlclZpc2libGUoKSkudG9FcXVhbCh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChsYXN0SXRlbS5pc0V4cGFuZGVyVmlzaWJsZSgpKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGV4cGFuZGFibGUgYnkgc2luZ2xlIGNsaWNrIG9uIGxhYmVsXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRyZWVJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgyKTtcbiAgICAgICAgICAgIGV4cGVjdCh0cmVlSXRlbS5nZXRTdWJJdGVtc0NvdW50KCkpLnRvQmUoMCk7XG4gICAgICAgICAgICB0cmVlSXRlbS5nZXRUaXRsZUVsZW1lbnQoKS5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KHRyZWVJdGVtLmdldFN1Ykl0ZW1zQ291bnQoKSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICAgICAgdHJlZUl0ZW0uZ2V0VGl0bGVFbGVtZW50KCkuY2xpY2soKTtcbiAgICAgICAgICAgIGV4cGVjdCh0cmVlSXRlbS5nZXRTdWJJdGVtc0NvdW50KCkpLnRvQmUoMCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcInNob3VsZCByZXR1cm4gaWNvbiBhdG9tIGluc3RhbmNlXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRyZWVJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgyKTtcbiAgICAgICAgICAgIGNvbnN0IGljb24gPSAgdHJlZUl0ZW0uZ2V0SWNvbigpO1xuICAgICAgICAgICAgZXhwZWN0KGljb24pLm5vdC50b0JlTnVsbCgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBkZXNjcmliZShcIkxpbWl0IHNlY3Rpb25cIiwgKCkgPT4ge1xuICAgICAgICBsZXQgdHJlZVZpZXc6IFRyZWVWaWV3QXRvbTtcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBIZWxwZXJzLnByZXBhcmVCcm93c2VyKFwidHJlZXZpZXdcIik7XG4gICAgICAgICAgICBsZXQgc2VjdGlvbiA9IGVsZW1lbnQoYnkuaWQoXCJsaW1pdFwiKSk7XG4gICAgICAgICAgICB0cmVlVmlldyA9IEF0b20uZmluZEluKFRyZWVWaWV3QXRvbSwgc2VjdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcInNob3VsZCBkaXNwbGF5ICdzaG93IG1vcmUnIGFuZCAnc2hvdyBhbGwnIGxpbmtzIG9ubHkgaWYgbmVlZGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0TGlua3MgPSBlbGVtZW50KGJ5LmNsYXNzTmFtZShcInh1aS10cmVldmlldy1saW1pdC1saW5rc1wiKSk7XG4gICAgICAgICAgICBjb25zdCBsaW1pdExpbmtzU2hvd01vcmUgPSBsaW1pdExpbmtzLmVsZW1lbnQoYnkuY2xhc3NOYW1lKFwieHVpLXRyZWV2aWV3LXNob3dtb3JlXCIpKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0TGlua3NTaG93QWxsID0gbGltaXRMaW5rcy5lbGVtZW50KGJ5LmNsYXNzTmFtZShcInh1aS10cmVldmlldy1zaG93YWxsXCIpKTtcbiAgICAgICAgICAgIGV4cGVjdChsaW1pdExpbmtzLmdldFRleHQoKSkudG9CZShcInNob3cgbW9yZSAvIHNob3cgYWxsXCIpO1xuICAgICAgICAgICAgZXhwZWN0KHRyZWVWaWV3LmdldFN1Ykl0ZW1zQ291bnQoKSkudG9CZSg0KTsgLy8gaXQgaGFwcGVuZWQgdGhhdCBcInNob3cgbW9yZS9hbGxcIiBsaW5rcyBhcmUgYWxzbyBcImxpXCJcblxuICAgICAgICAgICAgbGltaXRMaW5rc1Nob3dNb3JlLmNsaWNrKCk7XG4gICAgICAgICAgICBleHBlY3QodHJlZVZpZXcuZ2V0U3ViSXRlbXNDb3VudCgpKS50b0JlKDcpOyAvLyBpdCBoYXBwZW5lZCB0aGF0IFwic2hvdyBtb3JlL2FsbFwiIGxpbmtzIGFyZSBhbHNvIFwibGlcIlxuXG4gICAgICAgICAgICBsaW1pdExpbmtzU2hvd0FsbC5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KHRyZWVWaWV3LmdldFN1Ykl0ZW1zQ291bnQoKSkudG9CZSgxMCk7XG4gICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5jbGFzc05hbWUoXCJ4dWktdHJlZXZpZXctbGltaXQtbGlua3NcIikpLmlzUHJlc2VudCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZGVzY3JpYmUoXCJTb3J0IGJlaGF2aW9yXCIsICgpID0+IHtcbiAgICAgICAgbGV0IHRyZWVWaWV3OiBUcmVlVmlld0F0b207XG4gICAgICAgIGxldCBzb3J0cm9vdDpCdXR0b25BdG9tO1xuICAgICAgICBsZXQgc29ydGNoaWxkOkJ1dHRvbkF0b207XG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAgICAgSGVscGVycy5wcmVwYXJlQnJvd3NlcihcInRyZWV2aWV3XCIpO1xuICAgICAgICAgICAgbGV0IHNlY3Rpb24gPSBlbGVtZW50KGJ5LmlkKFwic29ydGVyXCIpKTtcbiAgICAgICAgICAgIHRyZWVWaWV3ID0gQXRvbS5maW5kSW4oVHJlZVZpZXdBdG9tLCBzZWN0aW9uKTtcbiAgICAgICAgICAgIHNvcnRyb290ID0gQXRvbS5maW5kSW4oQnV0dG9uQXRvbSwgc2VjdGlvbiwgMCk7XG4gICAgICAgICAgICBzb3J0Y2hpbGQgPSBBdG9tLmZpbmRJbihCdXR0b25BdG9tLCBzZWN0aW9uLCAxKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGFibGUgdG8gcmVvcmRlciByb290IG5vZGVzXCIsICgpID0+IHtcbiAgICAgICAgICAgIGxldCB0cmVlSXRlbSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMCk7XG4gICAgICAgICAgICBleHBlY3QodHJlZUl0ZW0uZ2V0VGl0bGVFbGVtZW50KCkuZ2V0VGV4dCgpKS50b0JlKFwiTm9kZTFcIik7XG4gICAgICAgICAgICBzb3J0cm9vdC5jbGljaygpO1xuICAgICAgICAgICAgdHJlZUl0ZW0gPSB0cmVlVmlldy5nZXRTdWJJdGVtKDApO1xuICAgICAgICAgICAgYnJvd3Nlci53YWl0KCgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJlZUl0ZW0uZ2V0VGl0bGVFbGVtZW50KCkuZ2V0VGV4dCgpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgICh0ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dCA9PT0gXCJOb2RlMTBcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCA0MDAwKTsgLy93YWl0IHVwIHRvIDQgc2Vjb25kc1xuICAgICAgICAgICAgZXhwZWN0KHRyZWVJdGVtLmdldFRpdGxlRWxlbWVudCgpLmdldFRleHQoKSkudG9CZShcIk5vZGUxMFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KFwic2hvdWxkIGJlIGFibGUgdG8gcmVvcmRlciBjaGlsZCBub2Rlc1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0cmVlSXRlbSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMCk7XG4gICAgICAgICAgICB0cmVlSXRlbS50b2dnbGVFeHBhbmQoKTtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IHRyZWVJdGVtLmdldFN1Ykl0ZW0oMCk7XG4gICAgICAgICAgICBleHBlY3QoY2hpbGQuZ2V0VGl0bGVFbGVtZW50KCkuZ2V0VGV4dCgpKS50b0JlKFwiTm9kZTFcIik7XG4gICAgICAgICAgICBzb3J0Y2hpbGQuY2xpY2soKTtcbiAgICAgICAgICAgIGNoaWxkID0gdHJlZUl0ZW0uZ2V0U3ViSXRlbSgwKTtcbiAgICAgICAgICAgIGV4cGVjdChjaGlsZC5nZXRUaXRsZUVsZW1lbnQoKS5nZXRUZXh0KCkpLnRvQmUoXCJOb2RlMTBcIik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKFwiVHJlZXZpZXcgc3RhdGVcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgdHJlZVZpZXc6IFRyZWVWaWV3QXRvbTtcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBIZWxwZXJzLnByZXBhcmVCcm93c2VyKFwidHJlZXZpZXdcIik7XG4gICAgICAgICAgICBsZXQgc2VjdGlvbiA9IGVsZW1lbnQoYnkuaWQoXCJzdGF0ZVwiKSk7XG4gICAgICAgICAgICB0cmVlVmlldyA9IEF0b20uZmluZEluKFRyZWVWaWV3QXRvbSwgc2VjdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcInNob3VsZCBkcmF3IHRyZWV2aWV3IHdpdGggc2V0dGVkIHN0YXRlXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRyZWVJdGVtID0gdHJlZVZpZXcuZ2V0U3ViSXRlbSgwKTtcbiAgICAgICAgICAgIGV4cGVjdCh0cmVlSXRlbS5nZXRTdWJJdGVtc0NvdW50KCkpLnRvQmUoNSk7XG4gICAgICAgICAgICBsZXQgc3ViSXRlbSA9IHRyZWVJdGVtLmdldFN1Ykl0ZW0oMik7XG4gICAgICAgICAgICBleHBlY3Qoc3ViSXRlbS5pc1NlbGVjdGVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKFwiVHJlZXZpZXcgZXZlbnRzXCIsICgpID0+IHtcbiAgICAgICAgbGV0IHRyZWVWaWV3OiBUcmVlVmlld0F0b207XG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAgICAgSGVscGVycy5wcmVwYXJlQnJvd3NlcihcInRyZWV2aWV3XCIpO1xuICAgICAgICAgICAgbGV0IHNlY3Rpb24gPSBlbGVtZW50KGJ5LmlkKFwiZXZlbnRzXCIpKTtcbiAgICAgICAgICAgIHRyZWVWaWV3ID0gQXRvbS5maW5kSW4oVHJlZVZpZXdBdG9tLCBzZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KFwic2hvdWxkIGZpcmUgb25FeHBhbmRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50SXRlbSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMCk7XG4gICAgICAgICAgICBwYXJlbnRJdGVtLnRvZ2dsZUV4cGFuZCgpO1xuICAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoXCJldmVudHMtbGFzdC1maXJlZFwiKSkuZ2V0VGV4dCgpKS50b0JlKFwiZXhwYW5kZWRcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcInNob3VsZCBmaXJlIG9uQ29sbGFwc2VcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50SXRlbSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMCk7XG4gICAgICAgICAgICBwYXJlbnRJdGVtLnRvZ2dsZUV4cGFuZCgpO1xuICAgICAgICAgICAgcGFyZW50SXRlbS50b2dnbGVFeHBhbmQoKTtcbiAgICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKFwiZXZlbnRzLWxhc3QtZmlyZWRcIikpLmdldFRleHQoKSkudG9CZShcImNvbGxhcHNlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KFwic2hvdWxkIGZpcmUgb25TZWxlY3RcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50SXRlbSA9IHRyZWVWaWV3LmdldFN1Ykl0ZW0oMCk7XG4gICAgICAgICAgICBwYXJlbnRJdGVtLmdldFRpdGxlRWxlbWVudCgpLmNsaWNrKCk7XG4gICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZChcImV2ZW50cy1sYXN0LWZpcmVkXCIpKS5nZXRUZXh0KCkpLnRvQmUoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KFwic2hvdWxkIGZpcmUgb25EYmxDbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5kb3VibGVDbGljayg8YW55PnRyZWVWaWV3LmdldFN1Ykl0ZW0oMCkuZ2V0VGl0bGVFbGVtZW50KCkpLnBlcmZvcm0oKTtcbiAgICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKFwiZXZlbnRzLWxhc3QtZmlyZWRcIikpLmdldFRleHQoKSkudG9CZShcImRiQ2xpY2tlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
