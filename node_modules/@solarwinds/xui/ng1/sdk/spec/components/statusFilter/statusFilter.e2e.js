"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const uzi_1 = require("@solarwinds/uzi");
const statusFilter_atom_1 = require("./statusFilter.atom");
const grid_atom_1 = require("../grid/grid.atom");
const helpers_1 = require("../helpers");
const protractor_1 = require("@solarwinds/uzi/protractor");
describe("USERCONTROL statusFilter", () => {
    beforeEach(() => {
        helpers_1.default.prepareBrowser("statusFilter");
    });
    const statusFilterAtom = uzi_1.Atom.find(statusFilter_atom_1.StatusFilterAtom, "testStatusFilter");
    const gridAtom = uzi_1.Atom.find(grid_atom_1.GridAtom, "testGrid");
    const compareDescription = (expectedDescription) => {
        gridAtom.getListView().getItems().each((item) => {
            let description = item.element(protractor_1.by.css(".xui-text-warning"));
            expect(description.getText()).toBe(expectedDescription);
        });
    };
    const criticalFilter = "xui-color-critical-border";
    const warningFilter = "xui-color-warning-border";
    const infoFilter = "xui-color-info-border";
    it("should show all alerts by default", () => {
        const expectedCount = "12";
        expect(statusFilterAtom.isAppended()).toBe(true);
        expect(statusFilterAtom.filterIsActive(criticalFilter)).toBeFalsy();
        expect(statusFilterAtom.filterIsActive(warningFilter)).toBeFalsy();
        expect(statusFilterAtom.filterIsActive(infoFilter)).toBeFalsy();
        expect(gridAtom.getPager().itemCountText()).toEqual(expectedCount);
    });
    it("should show only critical alerts", () => {
        const expectedCount = 4;
        const expectedDescription = "Alert me when a component goes into critical state";
        statusFilterAtom.filter(criticalFilter);
        compareDescription(expectedDescription);
        expect(statusFilterAtom.filterIsActive(criticalFilter)).toBeTruthy();
        expect(gridAtom.getListView().itemCount()).toEqual(expectedCount);
    });
    it("should show only warning alerts", () => {
        const expectedCount = 5;
        const expectedDescription = "Alert me when a component needs to be updated";
        statusFilterAtom.filter(warningFilter);
        compareDescription(expectedDescription);
        expect(statusFilterAtom.filterIsActive(warningFilter)).toBeTruthy();
        expect(gridAtom.getListView().itemCount()).toEqual(expectedCount);
    });
    it("should show only info alerts", () => {
        const expectedCount = 3;
        const expectedDescription = "Notify me when a component change his status";
        statusFilterAtom.filter(infoFilter);
        compareDescription(expectedDescription);
        expect(statusFilterAtom.filterIsActive(infoFilter)).toBeTruthy();
        expect(gridAtom.getListView().itemCount()).toEqual(expectedCount);
    });
    it("should show only warning and info alerts", () => {
        const expectedCount = "8";
        const expectedDescription1 = "Alert me when a component needs to be updated";
        const expectedDescription2 = "Notify me when a component change his status";
        statusFilterAtom.filter(warningFilter);
        statusFilterAtom.filter(infoFilter);
        compareDescription(expectedDescription1);
        gridAtom.getPager().nextLink().click();
        compareDescription(expectedDescription2);
        expect(statusFilterAtom.filterIsActive(criticalFilter)).toBeFalsy();
        expect(statusFilterAtom.filterIsActive(warningFilter)).toBeTruthy();
        expect(statusFilterAtom.filterIsActive(infoFilter)).toBeTruthy();
        expect(gridAtom.getPager().itemCountText()).toEqual(expectedCount);
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvc3RhdHVzRmlsdGVyL3N0YXR1c0ZpbHRlci5lMmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx5Q0FBdUM7QUFDdkMsMkRBQXVEO0FBQ3ZELGlEQUE2QztBQUM3Qyx3Q0FBaUM7QUFDakMsMkRBQWdEO0FBRWhELFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7SUFFdEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNaLGlCQUFPLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzNDLENBQUMsQ0FBQyxDQUFDO0lBRUgsTUFBTSxnQkFBZ0IsR0FBRyxVQUFJLENBQUMsSUFBSSxDQUFDLG9DQUFnQixFQUFFLGtCQUFrQixDQUFDLENBQUM7SUFDekUsTUFBTSxRQUFRLEdBQUcsVUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxtQkFBMkIsRUFBRSxFQUFFO1FBQ3ZELFFBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUM1QyxJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGVBQUUsQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDO1lBQzVELE1BQU0sQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUM1RCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQztJQUNGLE1BQU0sY0FBYyxHQUFHLDJCQUEyQixDQUFDO0lBQ25ELE1BQU0sYUFBYSxHQUFHLDBCQUEwQixDQUFDO0lBQ2pELE1BQU0sVUFBVSxHQUFHLHVCQUF1QixDQUFDO0lBRTNDLEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7UUFDekMsTUFBTSxhQUFhLEdBQUcsSUFBSSxD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LENBQUM7UUFDdkMsa0JBQWtCLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUN6QyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDcEUsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3BFLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNqRSxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3ZFLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy9zdGF0dXNGaWx0ZXIvc3RhdHVzRmlsdGVyLmUyZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEF0b20gfSBmcm9tIFwiQHNvbGFyd2luZHMvdXppXCI7XG5pbXBvcnQgeyBTdGF0dXNGaWx0ZXJBdG9tIH0gZnJvbSBcIi4vc3RhdHVzRmlsdGVyLmF0b21cIjtcbmltcG9ydCB7IEdyaWRBdG9tIH0gZnJvbSBcIi4uL2dyaWQvZ3JpZC5hdG9tXCI7XG5pbXBvcnQgSGVscGVycyBmcm9tIFwiLi4vaGVscGVyc1wiO1xuaW1wb3J0IHsgYnkgfSBmcm9tIFwiQHNvbGFyd2luZHMvdXppL3Byb3RyYWN0b3JcIjtcblxuZGVzY3JpYmUoXCJVU0VSQ09OVFJPTCBzdGF0dXNGaWx0ZXJcIiwgKCkgPT4ge1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIEhlbHBlcnMucHJlcGFyZUJyb3dzZXIoXCJzdGF0dXNGaWx0ZXJcIik7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzdGF0dXNGaWx0ZXJBdG9tID0gQXRvbS5maW5kKFN0YXR1c0ZpbHRlckF0b20sIFwidGVzdFN0YXR1c0ZpbHRlclwiKTtcbiAgICBjb25zdCBncmlkQXRvbSA9IEF0b20uZmluZChHcmlkQXRvbSwgXCJ0ZXN0R3JpZFwiKTtcbiAgICBjb25zdCBjb21wYXJlRGVzY3JpcHRpb24gPSAoZXhwZWN0ZWREZXNjcmlwdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGdyaWRBdG9tLmdldExpc3RWaWV3KCkuZ2V0SXRlbXMoKS5lYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBpdGVtLmVsZW1lbnQoYnkuY3NzKFwiLnh1aS10ZXh0LXdhcm5pbmdcIikpO1xuICAgICAgICAgICAgZXhwZWN0KGRlc2NyaXB0aW9uLmdldFRleHQoKSkudG9CZShleHBlY3RlZERlc2NyaXB0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBjcml0aWNhbEZpbHRlciA9IFwieHVpLWNvbG9yLWNyaXRpY2FsLWJvcmRlclwiO1xuICAgIGNvbnN0IHdhcm5pbmdGaWx0ZXIgPSBcInh1aS1jb2xvci13YXJuaW5nLWJvcmRlclwiO1xuICAgIGNvbnN0IGluZm9GaWx0ZXIgPSBcInh1aS1jb2xvci1pbmZvLWJvcmRlclwiO1xuXG4gICAgaXQoXCJzaG91bGQgc2hvdyBhbGwgYWxlcnRzIGJ5IGRlZmF1bHRcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBleHBlY3RlZENvdW50ID0gXCIxMlwiO1xuXG4gICAgICAgIGV4cGVjdChzdGF0dXNGaWx0ZXJBdG9tLmlzQXBwZW5kZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHN0YXR1c0ZpbHRlckF0b20uZmlsdGVySXNBY3RpdmUoY3JpdGljYWxGaWx0ZXIpKS50b0JlRmFsc3koKTtcbiAgICAgICAgZXhwZWN0KHN0YXR1c0ZpbHRlckF0b20uZmlsdGVySXNBY3RpdmUod2FybmluZ0ZpbHRlcikpLnRvQmVGYWxzeSgpO1xuICAgICAgICBleHBlY3Qoc3RhdHVzRmlsdGVyQXRvbS5maWx0ZXJJc0FjdGl2ZShpbmZvRmlsdGVyKSkudG9CZUZhbHN5KCk7XG4gICAgICAgIGV4cGVjdChncmlkQXRvbS5nZXRQYWdlcigpLml0ZW1Db3VudFRleHQoKSkudG9FcXVhbChleHBlY3RlZENvdW50KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHNob3cgb25seSBjcml0aWNhbCBhbGVydHNcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBleHBlY3RlZENvdW50ID0gNDtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWREZXNjcmlwdGlvbiA9IFwiQWxlcnQgbWUgd2hlbiBhIGNvbXBvbmVudCBnb2VzIGludG8gY3JpdGljYWwgc3RhdGVcIjtcblxuICAgICAgICBzdGF0dXNGaWx0ZXJBdG9tLmZpbHRlcihjcml0aWNhbEZpbHRlcik7XG4gICAgICAgIGNvbXBhcmVEZXNjcmlwdGlvbihleHBlY3RlZERlc2NyaXB0aW9uKTtcbiAgICAgICAgZXhwZWN0KHN0YXR1c0ZpbHRlckF0b20uZmlsdGVySXNBY3RpdmUoY3JpdGljYWxGaWx0ZXIpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIGV4cGVjdChncmlkQXRvbS5nZXRMaXN0VmlldygpLml0ZW1Db3VudCgpKS50b0VxdWFsKGV4cGVjdGVkQ291bnQpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgc2hvdyBvbmx5IHdhcm5pbmcgYWxlcnRzXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRDb3VudCA9IDU7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkRGVzY3JpcHRpb24gPSBcIkFsZXJ0IG1lIHdoZW4gYSBjb21wb25lbnQgbmVlZHMgdG8gYmUgdXBkYXRlZFwiO1xuXG4gICAgICAgIHN0YXR1c0ZpbHRlckF0b20uZmlsdGVyKHdhcm5pbmdGaWx0ZXIpO1xuICAgICAgICBjb21wYXJlRGVzY3JpcHRpb24oZXhwZWN0ZWREZXNjcmlwdGlvbik7XG4gICAgICAgIGV4cGVjdChzdGF0dXNGaWx0ZXJBdG9tLmZpbHRlcklzQWN0aXZlKHdhcm5pbmdGaWx0ZXIpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIGV4cGVjdChncmlkQXRvbS5nZXRMaXN0VmlldygpLml0ZW1Db3VudCgpKS50b0VxdWFsKGV4cGVjdGVkQ291bnQpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgc2hvdyBvbmx5IGluZm8gYWxlcnRzXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRDb3VudCA9IDM7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkRGVzY3JpcHRpb24gPSBcIk5vdGlmeSBtZSB3aGVuIGEgY29tcG9uZW50IGNoYW5nZSBoaXMgc3RhdHVzXCI7XG5cbiAgICAgICAgc3RhdHVzRmlsdGVyQXRvbS5maWx0ZXIoaW5mb0ZpbHRlcik7XG4gICAgICAgIGNvbXBhcmVEZXNjcmlwdGlvbihleHBlY3RlZERlc2NyaXB0aW9uKTtcbiAgICAgICAgZXhwZWN0KHN0YXR1c0ZpbHRlckF0b20uZmlsdGVySXNBY3RpdmUoaW5mb0ZpbHRlcikpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgZXhwZWN0KGdyaWRBdG9tLmdldExpc3RWaWV3KCkuaXRlbUNvdW50KCkpLnRvRXF1YWwoZXhwZWN0ZWRDb3VudCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBzaG93IG9ubHkgd2FybmluZyBhbmQgaW5mbyBhbGVydHNcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBleHBlY3RlZENvdW50ID0gXCI4XCI7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkRGVzY3JpcHRpb24xID0gXCJBbGVydCBtZSB3aGVuIGEgY29tcG9uZW50IG5lZWRzIHRvIGJlIHVwZGF0ZWRcIjtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWREZXNjcmlwdGlvbjIgPSBcIk5vdGlmeSBtZSB3aGVuIGEgY29tcG9uZW50IGNoYW5nZSBoaXMgc3RhdHVzXCI7XG5cbiAgICAgICAgc3RhdHVzRmlsdGVyQXRvbS5maWx0ZXIod2FybmluZ0ZpbHRlcik7XG4gICAgICAgIHN0YXR1c0ZpbHRlckF0b20uZmlsdGVyKGluZm9GaWx0ZXIpO1xuXG4gICAgICAgIGNvbXBhcmVEZXNjcmlwdGlvbihleHBlY3RlZERlc2NyaXB0aW9uMSk7XG4gICAgICAgIGdyaWRBdG9tLmdldFBhZ2VyKCkubmV4dExpbmsoKS5jbGljaygpO1xuICAgICAgICBjb21wYXJlRGVzY3JpcHRpb24oZXhwZWN0ZWREZXNjcmlwdGlvbjIpO1xuICAgICAgICBleHBlY3Qoc3RhdHVzRmlsdGVyQXRvbS5maWx0ZXJJc0FjdGl2ZShjcml0aWNhbEZpbHRlcikpLnRvQmVGYWxzeSgpO1xuICAgICAgICBleHBlY3Qoc3RhdHVzRmlsdGVyQXRvbS5maWx0ZXJJc0FjdGl2ZSh3YXJuaW5nRmlsdGVyKSkudG9CZVRydXRoeSgpO1xuICAgICAgICBleHBlY3Qoc3RhdHVzRmlsdGVyQXRvbS5maWx0ZXJJc0FjdGl2ZShpbmZvRmlsdGVyKSkudG9CZVRydXRoeSgpO1xuICAgICAgICBleHBlY3QoZ3JpZEF0b20uZ2V0UGFnZXIoKS5pdGVtQ291bnRUZXh0KCkpLnRvRXF1YWwoZXhwZWN0ZWRDb3VudCk7XG4gICAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
