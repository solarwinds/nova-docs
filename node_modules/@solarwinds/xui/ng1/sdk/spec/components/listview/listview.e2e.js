"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const protractor_1 = require("@solarwinds/uzi/protractor");
const index_atom_1 = require("../index.atom");
const helpers_1 = require("../helpers");
const uzi_1 = require("@solarwinds/uzi");
describe("USERCONTROL listview", () => {
    let stripedListView;
    let nonStripedListView;
    beforeEach(() => {
        helpers_1.default.prepareBrowser("listview");
        stripedListView = uzi_1.Atom.find(index_atom_1.ListViewAtom, "testListViewStriped");
        nonStripedListView = uzi_1.Atom.find(index_atom_1.ListViewAtom, "testListViewNoStripes");
    });
    it("should contain 10 items", () => {
        expect(stripedListView.itemCount()).toEqual(10);
    });
    it("should display given item in proper place", () => {
        expect(stripedListView.getItem(0).getText()).toEqual("horse");
        expect(stripedListView.getItem(1).getText()).toEqual("elk");
        expect(stripedListView.getItem(2).getText()).toEqual("bobcat");
        expect(stripedListView.getItem(9).getText()).toEqual("snake");
    });
    it("should apply the specified padding", () => {
        const multiSelectLV = uzi_1.Atom.find(index_atom_1.ListViewAtom, "multiSelect");
        expect(multiSelectLV.isNarrow()).toEqual(true);
        expect(multiSelectLV.isRegular()).toEqual(false);
        const singleSelectLV = uzi_1.Atom.find(index_atom_1.ListViewAtom, "singleSelect");
        expect(singleSelectLV.isNarrow()).toEqual(false);
        expect(singleSelectLV.isRegular()).toEqual(true);
    });
    it("should apply 'regular' padding by default", () => {
        expect(stripedListView.isNarrow()).toEqual(false);
        expect(stripedListView.isRegular()).toEqual(true);
        expect(nonStripedListView.isNarrow()).toEqual(false);
        expect(nonStripedListView.isRegular()).toEqual(true);
    });
    it("should honor 'striped' attribute", () => {
        expect(stripedListView.isStriped()).toEqual(true);
        expect(nonStripedListView.isStriped()).toEqual(false);
    });
    it("have the correct header", () => {
        expect(stripedListView.getHeaderText("h3")).toBe("STRIPED LISTVIEW, ITEM TEMPLATE");
        expect(nonStripedListView.getHeaderText("h3")).toBe("PLAIN LISTVIEW, COLOR-BOX TEMPLATE");
    });
    it("applies the correct template", () => {
        const horseItem = stripedListView.getItem(0);
        expect(horseItem.getText()).toEqual("horse");
        const blueColorBoxItem = nonStripedListView.getItem(0);
        expect(blueColorBoxItem.element(protractor_1.by.css(".color-box.blue"))).toBeDefined();
        expect(blueColorBoxItem.getText()).toEqual("blue");
    });
    it("allows checkbox/multi selection of items", () => {
        expect(protractor_1.element(protractor_1.by.id("multiSelectValues")).getText()).toBe("");
        const multiSelectListView = uzi_1.Atom.find(index_atom_1.ListViewAtom, "multiSelect");
        multiSelectListView.selectCheckbox(0);
        multiSelectListView.selectCheckbox(1);
        multiSelectListView.selectCheckbox(2);
        expect(protractor_1.element(protractor_1.by.id("multiSelectValues")).getText()).toBe("blue,green,yellow");
        multiSelectListView.selectCheckbox(0);
        multiSelectListView.selectCheckbox(1);
        multiSelectListView.selectCheckbox(2);
        expect(protractor_1.element(protractor_1.by.id("multiSelectValues")).getText()).toBe("");
    });
    it("allows checkbox/multi inverted selection of items", () => {
        expect(protractor_1.element(protractor_1.by.id("multiSelectValues")).getText()).toBe("");
        const multiSelectListView = uzi_1.Atom.find(index_atom_1.ListViewAtom, "multiSelectInvert");
        multiSelectListView.selectCheckbox(0);
        multiSelectListView.selectCheckbox(1);
        multiSelectListView.selectCheckbox(2);
        expect(protractor_1.element(protractor_1.by.id("multiSelectValues")).getText()).toBe("blue,green,yellow");
        multiSelectListView.selectCheckbox(0);
        multiSelectListView.selectCheckbox(1);
        multiSelectListView.selectCheckbox(2);
        expect(protractor_1.element(protractor_1.by.id("multiSelectValues")).getText()).toBe("");
    });
    it("does not allow change selection for disabled items", () => {
        const multiSelectListView = uzi_1.Atom.find(index_atom_1.ListViewAtom, "multiSelectDisabledItems");
        expect(multiSelectListView.getCheckbox(0).isDisabled()).toBe(true);
        expect(multiSelectListView.getCheckbox(1).isDisabled()).toBe(true);
    });
    it("allows single selection of items for single mode", () => {
        expect(protractor_1.element(protractor_1.by.id("singleSelectValue")).getText()).toBe("medium");
        const singleSelectListView = uzi_1.Atom.find(index_atom_1.ListViewAtom, "singleSelect");
        singleSelectListView.selectRow(0);
        expect(protractor_1.element(protractor_1.by.id("singleSelectValue")).getText()).toBe(JSON.stringify(["small"]));
        singleSelectListView.selectRow(3);
        expect(protractor_1.element(protractor_1.by.id("singleSelectValue")).getText()).toBe(JSON.stringify(["xlarge"]));
    });
    it("allows single selection of items for radio mode", () => {
        expect(protractor_1.element(protractor_1.by.id("radioSelectValue")).getText()).toBe("medium");
        const singleSelectListView = uzi_1.Atom.find(index_atom_1.ListViewAtom, "singleSelect");
        singleSelectListView.selectRow(0);
        expect(protractor_1.element(protractor_1.by.id("radioSelectValue")).getText()).toBe(JSON.stringify(["small"]));
        singleSelectListView.selectRow(3);
        expect(protractor_1.element(protractor_1.by.id("radioSelectValue")).getText()).toBe(JSON.stringify(["xlarge"]));
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvbGlzdHZpZXcvbGlzdHZpZXcuZTJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsMkRBQWdFO0FBQ2hFLDhDQUEyQztBQUMzQyx3Q0FBaUM7QUFDakMseUNBQXFDO0FBRXJDLFFBQVEsQ0FBQyxzQkFBc0IsRUFBRSxHQUFHLEVBQUU7SUFDbEMsSUFBSSxlQUE2QixDQUFDO0lBQ2xDLElBQUksa0JBQWdDLENBQUM7SUFFckMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNaLGlCQUFPLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ25DLGVBQWUsR0FBRyxVQUFJLENBQUMsSUFBSSxDQUFDLHlCQUFZLEVBQUUscUJBQXFCLENBQUMsQ0FBQztRQUNqRSxrQkFBa0IsR0FBRyxVQUFJLENBQUMsSUFBSSxDQUFDLHlCQUFZLEVBQUUsdUJBQXVCLENBQUMsQ0FBQztJQUMxRSxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7UUFDL0IsTUFBTSxDQUFDLGVBQWUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNwRCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxHQUFHLEVBQUU7UUFDakQsTUFBTSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDOUQsTUFBTSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDNUQsTUFBTSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDL0Qs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QkFBa0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyRixvQkFBb0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEMsTUFBTSxDQUFDLG9CQUFPLENBQUMsZUFBRSxDQUFDLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxRixDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6ImNvbXBvbmVudHMvbGlzdHZpZXcvbGlzdHZpZXcuZTJlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtieSwgZWxlbWVudCwgcHJvbWlzZX0gZnJvbSBcIkBzb2xhcndpbmRzL3V6aS9wcm90cmFjdG9yXCI7XG5pbXBvcnQge0xpc3RWaWV3QXRvbX0gZnJvbSBcIi4uL2luZGV4LmF0b21cIjtcbmltcG9ydCBIZWxwZXJzIGZyb20gXCIuLi9oZWxwZXJzXCI7XG5pbXBvcnQge0F0b219IGZyb20gXCJAc29sYXJ3aW5kcy91emlcIjtcblxuZGVzY3JpYmUoXCJVU0VSQ09OVFJPTCBsaXN0dmlld1wiLCAoKSA9PiB7XG4gICAgbGV0IHN0cmlwZWRMaXN0VmlldzogTGlzdFZpZXdBdG9tO1xuICAgIGxldCBub25TdHJpcGVkTGlzdFZpZXc6IExpc3RWaWV3QXRvbTtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBIZWxwZXJzLnByZXBhcmVCcm93c2VyKFwibGlzdHZpZXdcIik7XG4gICAgICAgIHN0cmlwZWRMaXN0VmlldyA9IEF0b20uZmluZChMaXN0Vmlld0F0b20sIFwidGVzdExpc3RWaWV3U3RyaXBlZFwiKTtcbiAgICAgICAgbm9uU3RyaXBlZExpc3RWaWV3ID0gQXRvbS5maW5kKExpc3RWaWV3QXRvbSwgXCJ0ZXN0TGlzdFZpZXdOb1N0cmlwZXNcIik7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBjb250YWluIDEwIGl0ZW1zXCIsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KHN0cmlwZWRMaXN0Vmlldy5pdGVtQ291bnQoKSkudG9FcXVhbCgxMCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBkaXNwbGF5IGdpdmVuIGl0ZW0gaW4gcHJvcGVyIHBsYWNlXCIsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KHN0cmlwZWRMaXN0Vmlldy5nZXRJdGVtKDApLmdldFRleHQoKSkudG9FcXVhbChcImhvcnNlXCIpO1xuICAgICAgICBleHBlY3Qoc3RyaXBlZExpc3RWaWV3LmdldEl0ZW0oMSkuZ2V0VGV4dCgpKS50b0VxdWFsKFwiZWxrXCIpO1xuICAgICAgICBleHBlY3Qoc3RyaXBlZExpc3RWaWV3LmdldEl0ZW0oMikuZ2V0VGV4dCgpKS50b0VxdWFsKFwiYm9iY2F0XCIpO1xuICAgICAgICBleHBlY3Qoc3RyaXBlZExpc3RWaWV3LmdldEl0ZW0oOSkuZ2V0VGV4dCgpKS50b0VxdWFsKFwic25ha2VcIik7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBhcHBseSB0aGUgc3BlY2lmaWVkIHBhZGRpbmdcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBtdWx0aVNlbGVjdExWID0gQXRvbS5maW5kKExpc3RWaWV3QXRvbSwgXCJtdWx0aVNlbGVjdFwiKTtcbiAgICAgICAgZXhwZWN0KG11bHRpU2VsZWN0TFYuaXNOYXJyb3coKSkudG9FcXVhbCh0cnVlKTtcbiAgICAgICAgZXhwZWN0KG11bHRpU2VsZWN0TFYuaXNSZWd1bGFyKCkpLnRvRXF1YWwoZmFsc2UpO1xuXG4gICAgICAgIGNvbnN0IHNpbmdsZVNlbGVjdExWID0gQXRvbS5maW5kKExpc3RWaWV3QXRvbSwgXCJzaW5nbGVTZWxlY3RcIik7XG4gICAgICAgIGV4cGVjdChzaW5nbGVTZWxlY3RMVi5pc05hcnJvdygpKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KHNpbmdsZVNlbGVjdExWLmlzUmVndWxhcigpKS50b0VxdWFsKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgYXBwbHkgJ3JlZ3VsYXInIHBhZGRpbmcgYnkgZGVmYXVsdFwiLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzdHJpcGVkTGlzdFZpZXcuaXNOYXJyb3coKSkudG9FcXVhbChmYWxzZSk7XG4gICAgICAgIGV4cGVjdChzdHJpcGVkTGlzdFZpZXcuaXNSZWd1bGFyKCkpLnRvRXF1YWwodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChub25TdHJpcGVkTGlzdFZpZXcuaXNOYXJyb3coKSkudG9FcXVhbChmYWxzZSk7XG4gICAgICAgIGV4cGVjdChub25TdHJpcGVkTGlzdFZpZXcuaXNSZWd1bGFyKCkpLnRvRXF1YWwodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBob25vciAnc3RyaXBlZCcgYXR0cmlidXRlXCIsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KHN0cmlwZWRMaXN0Vmlldy5pc1N0cmlwZWQoKSkudG9FcXVhbCh0cnVlKTtcbiAgICAgICAgZXhwZWN0KG5vblN0cmlwZWRMaXN0Vmlldy5pc1N0cmlwZWQoKSkudG9FcXVhbChmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdChcImhhdmUgdGhlIGNvcnJlY3QgaGVhZGVyXCIsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KHN0cmlwZWRMaXN0Vmlldy5nZXRIZWFkZXJUZXh0KFwiaDNcIikpLnRvQmUoXCJTVFJJUEVEIExJU1RWSUVXLCBJVEVNIFRFTVBMQVRFXCIpO1xuICAgICAgICBleHBlY3Qobm9uU3RyaXBlZExpc3RWaWV3LmdldEhlYWRlclRleHQoXCJoM1wiKSkudG9CZShcIlBMQUlOIExJU1RWSUVXLCBDT0xPUi1CT1ggVEVNUExBVEVcIik7XG4gICAgfSk7XG5cbiAgICBpdChcImFwcGxpZXMgdGhlIGNvcnJlY3QgdGVtcGxhdGVcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBob3JzZUl0ZW0gPSBzdHJpcGVkTGlzdFZpZXcuZ2V0SXRlbSgwKTtcbiAgICAgICAgZXhwZWN0KGhvcnNlSXRlbS5nZXRUZXh0KCkpLnRvRXF1YWwoXCJob3JzZVwiKTtcblxuICAgICAgICBjb25zdCBibHVlQ29sb3JCb3hJdGVtID0gbm9uU3RyaXBlZExpc3RWaWV3LmdldEl0ZW0oMCk7XG4gICAgICAgIGV4cGVjdChibHVlQ29sb3JCb3hJdGVtLmVsZW1lbnQoYnkuY3NzKFwiLmNvbG9yLWJveC5ibHVlXCIpKSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGJsdWVDb2xvckJveEl0ZW0uZ2V0VGV4dCgpKS50b0VxdWFsKFwiYmx1ZVwiKTtcbiAgICB9KTtcblxuICAgIGl0KFwiYWxsb3dzIGNoZWNrYm94L211bHRpIHNlbGVjdGlvbiBvZiBpdGVtc1wiLCAoKT0+IHtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoXCJtdWx0aVNlbGVjdFZhbHVlc1wiKSkuZ2V0VGV4dCgpKS50b0JlKFwiXCIpO1xuICAgICAgICBjb25zdCBtdWx0aVNlbGVjdExpc3RWaWV3ID0gQXRvbS5maW5kKExpc3RWaWV3QXRvbSwgXCJtdWx0aVNlbGVjdFwiKTtcbiAgICAgICAgbXVsdGlTZWxlY3RMaXN0Vmlldy5zZWxlY3RDaGVja2JveCgwKTtcbiAgICAgICAgbXVsdGlTZWxlY3RMaXN0Vmlldy5zZWxlY3RDaGVja2JveCgxKTtcbiAgICAgICAgbXVsdGlTZWxlY3RMaXN0Vmlldy5zZWxlY3RDaGVja2JveCgyKTtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoXCJtdWx0aVNlbGVjdFZhbHVlc1wiKSkuZ2V0VGV4dCgpKS50b0JlKFwiYmx1ZSxncmVlbix5ZWxsb3dcIik7XG5cbiAgICAgICAgbXVsdGlTZWxlY3RMaXN0Vmlldy5zZWxlY3RDaGVja2JveCgwKTtcbiAgICAgICAgbXVsdGlTZWxlY3RMaXN0Vmlldy5zZWxlY3RDaGVja2JveCgxKTtcbiAgICAgICAgbXVsdGlTZWxlY3RMaXN0Vmlldy5zZWxlY3RDaGVja2JveCgyKTtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoXCJtdWx0aVNlbGVjdFZhbHVlc1wiKSkuZ2V0VGV4dCgpKS50b0JlKFwiXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJhbGxvd3MgY2hlY2tib3gvbXVsdGkgaW52ZXJ0ZWQgc2VsZWN0aW9uIG9mIGl0ZW1zXCIsICgpPT4ge1xuICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZChcIm11bHRpU2VsZWN0VmFsdWVzXCIpKS5nZXRUZXh0KCkpLnRvQmUoXCJcIik7XG4gICAgICAgIGNvbnN0IG11bHRpU2VsZWN0TGlzdFZpZXcgPSBBdG9tLmZpbmQoTGlzdFZpZXdBdG9tLCBcIm11bHRpU2VsZWN0SW52ZXJ0XCIpO1xuICAgICAgICBtdWx0aVNlbGVjdExpc3RWaWV3LnNlbGVjdENoZWNrYm94KDApO1xuICAgICAgICBtdWx0aVNlbGVjdExpc3RWaWV3LnNlbGVjdENoZWNrYm94KDEpO1xuICAgICAgICBtdWx0aVNlbGVjdExpc3RWaWV3LnNlbGVjdENoZWNrYm94KDIpO1xuICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZChcIm11bHRpU2VsZWN0VmFsdWVzXCIpKS5nZXRUZXh0KCkpLnRvQmUoXCJibHVlLGdyZWVuLHllbGxvd1wiKTtcblxuICAgICAgICBtdWx0aVNlbGVjdExpc3RWaWV3LnNlbGVjdENoZWNrYm94KDApO1xuICAgICAgICBtdWx0aVNlbGVjdExpc3RWaWV3LnNlbGVjdENoZWNrYm94KDEpO1xuICAgICAgICBtdWx0aVNlbGVjdExpc3RWaWV3LnNlbGVjdENoZWNrYm94KDIpO1xuICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZChcIm11bHRpU2VsZWN0VmFsdWVzXCIpKS5nZXRUZXh0KCkpLnRvQmUoXCJcIik7XG4gICAgfSk7XG5cbiAgICBpdChcImRvZXMgbm90IGFsbG93IGNoYW5nZSBzZWxlY3Rpb24gZm9yIGRpc2FibGVkIGl0ZW1zXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgbXVsdGlTZWxlY3RMaXN0VmlldyA9IEF0b20uZmluZChMaXN0Vmlld0F0b20sIFwibXVsdGlTZWxlY3REaXNhYmxlZEl0ZW1zXCIpO1xuICAgICAgICBleHBlY3QobXVsdGlTZWxlY3RMaXN0Vmlldy5nZXRDaGVja2JveCgwKS5pc0Rpc2FibGVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChtdWx0aVNlbGVjdExpc3RWaWV3LmdldENoZWNrYm94KDEpLmlzRGlzYWJsZWQoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KFwiYWxsb3dzIHNpbmdsZSBzZWxlY3Rpb24gb2YgaXRlbXMgZm9yIHNpbmdsZSBtb2RlXCIsICgpPT4ge1xuICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZChcInNpbmdsZVNlbGVjdFZhbHVlXCIpKS5nZXRUZXh0KCkpLnRvQmUoXCJtZWRpdW1cIik7XG4gICAgICAgIGNvbnN0IHNpbmdsZVNlbGVjdExpc3RWaWV3ID0gQXRvbS5maW5kKExpc3RWaWV3QXRvbSwgXCJzaW5nbGVTZWxlY3RcIik7XG4gICAgICAgIHNpbmdsZVNlbGVjdExpc3RWaWV3LnNlbGVjdFJvdygwKTtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoXCJzaW5nbGVTZWxlY3RWYWx1ZVwiKSkuZ2V0VGV4dCgpKS50b0JlKEpTT04uc3RyaW5naWZ5KFtcInNtYWxsXCJdKSk7XG4gICAgICAgIHNpbmdsZVNlbGVjdExpc3RWaWV3LnNlbGVjdFJvdygzKTtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoXCJzaW5nbGVTZWxlY3RWYWx1ZVwiKSkuZ2V0VGV4dCgpKS50b0JlKEpTT04uc3RyaW5naWZ5KFtcInhsYXJnZVwiXSkpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJhbGxvd3Mgc2luZ2xlIHNlbGVjdGlvbiBvZiBpdGVtcyBmb3IgcmFkaW8gbW9kZVwiLCAoKT0+IHtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoXCJyYWRpb1NlbGVjdFZhbHVlXCIpKS5nZXRUZXh0KCkpLnRvQmUoXCJtZWRpdW1cIik7XG4gICAgICAgIGNvbnN0IHNpbmdsZVNlbGVjdExpc3RWaWV3ID0gQXRvbS5maW5kKExpc3RWaWV3QXRvbSwgXCJzaW5nbGVTZWxlY3RcIik7XG4gICAgICAgIHNpbmdsZVNlbGVjdExpc3RWaWV3LnNlbGVjdFJvdygwKTtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoXCJyYWRpb1NlbGVjdFZhbHVlXCIpKS5nZXRUZXh0KCkpLnRvQmUoSlNPTi5zdHJpbmdpZnkoW1wic21hbGxcIl0pKTtcbiAgICAgICAgc2luZ2xlU2VsZWN0TGlzdFZpZXcuc2VsZWN0Um93KDMpO1xuICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZChcInJhZGlvU2VsZWN0VmFsdWVcIikpLmdldFRleHQoKSkudG9CZShKU09OLnN0cmluZ2lmeShbXCJ4bGFyZ2VcIl0pKTtcbiAgICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
