"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const protractor = require("@solarwinds/uzi/protractor");
const protractor_1 = require("@solarwinds/uzi/protractor");
const helpers_1 = require("../helpers");
const uzi_1 = require("@solarwinds/uzi");
const index_atom_1 = require("../index.atom");
describe("USERCONTROL switch", () => {
    let switchComponent;
    let disabledSwitchComponent;
    let button;
    beforeEach(() => {
        helpers_1.default.prepareBrowser("switch");
        switchComponent = uzi_1.Atom.findIn(index_atom_1.SwitchAtom, protractor_1.element(protractor_1.by.className("example")), 0);
        disabledSwitchComponent = uzi_1.Atom.findIn(index_atom_1.SwitchAtom, protractor_1.element(protractor_1.by.className("example")), 1);
        button = uzi_1.Atom.findIn(index_atom_1.ButtonAtom, protractor_1.element(protractor_1.by.className("example")));
    });
    it("should be switched off by default ", () => {
        expect(switchComponent.isOn()).toBe(false);
    });
    it("should toggle css class on click ", () => {
        switchComponent.slider().click();
        expect(switchComponent.isOn()).toBe(true);
        switchComponent.slider().click();
        expect(switchComponent.isOn()).toBe(false);
    });
    it("value should change after click on the switch", () => {
        const modelValue = protractor_1.element(protractor_1.by.id("vmState"));
        expect(modelValue.getText()).toEqual(false.toString());
        switchComponent.slider().click();
        expect(modelValue.getText()).toEqual(true.toString());
    });
    //it("value should change after clicking on the caption", () => {
    //    const modelValue = element(by.id("vmState"));
    //    const caption = switchComponent.caption();
    //
    //    expect(modelValue.getText()).toEqual(false.toString());
    //    caption.click();
    //    expect(modelValue.getText()).toEqual(true.toString());
    //});
    it("value should not change when disabled", () => {
        const modelValue = protractor_1.element(protractor_1.by.id("vmState"));
        expect(modelValue.getText()).toEqual(false.toString());
        //webdriver does not allow clicking on disabled elements, so we have to use js
        protractor_1.browser.executeScript("document.querySelector(\"#second .xui-switch__bar\").click()");
        expect(modelValue.getText()).toEqual(false.toString());
        protractor_1.browser.executeScript("document.querySelector(\"#second .xui-switch__label\").click()");
        expect(modelValue.getText()).toEqual(false.toString());
    });
    it("value should be retained after disable twiddle", () => {
        switchComponent.slider().click();
        expect(switchComponent.isOn()).toBe(true);
        button.click();
        button.click();
        expect(switchComponent.isOn()).toBe(true);
    });
    it("value should change with spacebar", () => {
        expect(switchComponent.isOn()).toBe(false);
        switchComponent.slider().sendKeys(protractor.Key.SPACE);
        expect(switchComponent.isOn()).toBe(true);
    });
    it("isEnabled should return right element state", () => {
        expect(switchComponent.isEnabled()).toBe(true);
        expect(disabledSwitchComponent.isEnabled()).toBe(false);
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvc3dpdGNoL3N3aXRjaC5lMmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx5REFBeUQ7QUFDekQsMkRBQXlFO0FBQ3pFLHdDQUFpQztBQUNqQyx5Q0FBcUM7QUFDckMsOENBQXFEO0FBRXJELFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7SUFDaEMsSUFBSSxlQUEyQixDQUFDO0lBQ2hDLElBQUksdUJBQW1DLENBQUM7SUFDeEMsSUFBSSxNQUFrQixDQUFDO0lBRXZCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDWixpQkFBTyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNqQyxlQUFlLEdBQUcsVUFBSSxDQUFDLE1BQU0sQ0FBQyx1QkFBVSxFQUFFLG9CQUFPLENBQUMsZUFBRSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQy9FLHVCQUF1QixHQUFHLFVBQUksQ0FBQyxNQUFNLENBQUMsdUJBQVUsRUFBRSxvQkFBTyxDQUFDLGVBQUUsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN2RixNQUFNLEdBQUcsVUFBSSxDQUFDLE1BQU0sQ0FBQyx1QkFBVSxFQUFFLG9CQUFPLENBQUMsZUFBRSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkUsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO1FBQzFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0MsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO1FBQ3pDLGVBQWUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNqQyxNQUFNLENBQUMs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QUMsSUFBSSxDQUFDLENBQUM7UUFDL0MsTUFBTSxDQUFDLHVCQUF1QixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVELENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy9zd2l0Y2gvc3dpdGNoLmUyZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHByb3RyYWN0b3IgZnJvbSBcIkBzb2xhcndpbmRzL3V6aS9wcm90cmFjdG9yXCI7XG5pbXBvcnQge2Jyb3dzZXIsIGJ5LCBlbGVtZW50LCBwcm9taXNlfSBmcm9tIFwiQHNvbGFyd2luZHMvdXppL3Byb3RyYWN0b3JcIjtcbmltcG9ydCBIZWxwZXJzIGZyb20gXCIuLi9oZWxwZXJzXCI7XG5pbXBvcnQge0F0b219IGZyb20gXCJAc29sYXJ3aW5kcy91emlcIjtcbmltcG9ydCB7QnV0dG9uQXRvbSwgU3dpdGNoQXRvbX0gZnJvbSBcIi4uL2luZGV4LmF0b21cIjtcblxuZGVzY3JpYmUoXCJVU0VSQ09OVFJPTCBzd2l0Y2hcIiwgKCkgPT4ge1xuICAgIGxldCBzd2l0Y2hDb21wb25lbnQ6IFN3aXRjaEF0b207XG4gICAgbGV0IGRpc2FibGVkU3dpdGNoQ29tcG9uZW50OiBTd2l0Y2hBdG9tO1xuICAgIGxldCBidXR0b246IEJ1dHRvbkF0b207XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgSGVscGVycy5wcmVwYXJlQnJvd3NlcihcInN3aXRjaFwiKTtcbiAgICAgICAgc3dpdGNoQ29tcG9uZW50ID0gQXRvbS5maW5kSW4oU3dpdGNoQXRvbSwgZWxlbWVudChieS5jbGFzc05hbWUoXCJleGFtcGxlXCIpKSwgMCk7XG4gICAgICAgIGRpc2FibGVkU3dpdGNoQ29tcG9uZW50ID0gQXRvbS5maW5kSW4oU3dpdGNoQXRvbSwgZWxlbWVudChieS5jbGFzc05hbWUoXCJleGFtcGxlXCIpKSwgMSk7XG4gICAgICAgIGJ1dHRvbiA9IEF0b20uZmluZEluKEJ1dHRvbkF0b20sIGVsZW1lbnQoYnkuY2xhc3NOYW1lKFwiZXhhbXBsZVwiKSkpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgYmUgc3dpdGNoZWQgb2ZmIGJ5IGRlZmF1bHQgXCIsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KHN3aXRjaENvbXBvbmVudC5pc09uKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgdG9nZ2xlIGNzcyBjbGFzcyBvbiBjbGljayBcIiwgKCkgPT4ge1xuICAgICAgICBzd2l0Y2hDb21wb25lbnQuc2xpZGVyKCkuY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KHN3aXRjaENvbXBvbmVudC5pc09uKCkpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgc3dpdGNoQ29tcG9uZW50LnNsaWRlcigpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChzd2l0Y2hDb21wb25lbnQuaXNPbigpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KFwidmFsdWUgc2hvdWxkIGNoYW5nZSBhZnRlciBjbGljayBvbiB0aGUgc3dpdGNoXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgbW9kZWxWYWx1ZSA9IGVsZW1lbnQoYnkuaWQoXCJ2bVN0YXRlXCIpKTtcbiAgICAgICAgZXhwZWN0KG1vZGVsVmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKGZhbHNlLnRvU3RyaW5nKCkpO1xuICAgICAgICBzd2l0Y2hDb21wb25lbnQuc2xpZGVyKCkuY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KG1vZGVsVmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKHRydWUudG9TdHJpbmcoKSk7XG4gICAgfSk7XG5cbiAgICAvL2l0KFwidmFsdWUgc2hvdWxkIGNoYW5nZSBhZnRlciBjbGlja2luZyBvbiB0aGUgY2FwdGlvblwiLCAoKSA9PiB7XG4gICAgLy8gICAgY29uc3QgbW9kZWxWYWx1ZSA9IGVsZW1lbnQoYnkuaWQoXCJ2bVN0YXRlXCIpKTtcbiAgICAvLyAgICBjb25zdCBjYXB0aW9uID0gc3dpdGNoQ29tcG9uZW50LmNhcHRpb24oKTtcbiAgICAvL1xuICAgIC8vICAgIGV4cGVjdChtb2RlbFZhbHVlLmdldFRleHQoKSkudG9FcXVhbChmYWxzZS50b1N0cmluZygpKTtcbiAgICAvLyAgICBjYXB0aW9uLmNsaWNrKCk7XG4gICAgLy8gICAgZXhwZWN0KG1vZGVsVmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKHRydWUudG9TdHJpbmcoKSk7XG4gICAgLy99KTtcblxuICAgIGl0KFwidmFsdWUgc2hvdWxkIG5vdCBjaGFuZ2Ugd2hlbiBkaXNhYmxlZFwiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vZGVsVmFsdWUgPSBlbGVtZW50KGJ5LmlkKFwidm1TdGF0ZVwiKSk7XG5cbiAgICAgICAgZXhwZWN0KG1vZGVsVmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKGZhbHNlLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIC8vd2ViZHJpdmVyIGRvZXMgbm90IGFsbG93IGNsaWNraW5nIG9uIGRpc2FibGVkIGVsZW1lbnRzLCBzbyB3ZSBoYXZlIHRvIHVzZSBqc1xuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoXCJkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxcXCIjc2Vjb25kIC54dWktc3dpdGNoX19iYXJcXFwiKS5jbGljaygpXCIpO1xuXG4gICAgICAgIGV4cGVjdChtb2RlbFZhbHVlLmdldFRleHQoKSkudG9FcXVhbChmYWxzZS50b1N0cmluZygpKTtcblxuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoXCJkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxcXCIjc2Vjb25kIC54dWktc3dpdGNoX19sYWJlbFxcXCIpLmNsaWNrKClcIik7XG4gICAgICAgIGV4cGVjdChtb2RlbFZhbHVlLmdldFRleHQoKSkudG9FcXVhbChmYWxzZS50b1N0cmluZygpKTtcbiAgICB9KTtcblxuICAgIGl0KFwidmFsdWUgc2hvdWxkIGJlIHJldGFpbmVkIGFmdGVyIGRpc2FibGUgdHdpZGRsZVwiLCAoKSA9PiB7XG4gICAgICAgIHN3aXRjaENvbXBvbmVudC5zbGlkZXIoKS5jbGljaygpO1xuICAgICAgICBleHBlY3Qoc3dpdGNoQ29tcG9uZW50LmlzT24oKSkudG9CZSh0cnVlKTtcbiAgICAgICAgYnV0dG9uLmNsaWNrKCk7XG4gICAgICAgIGJ1dHRvbi5jbGljaygpO1xuICAgICAgICBleHBlY3Qoc3dpdGNoQ29tcG9uZW50LmlzT24oKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KFwidmFsdWUgc2hvdWxkIGNoYW5nZSB3aXRoIHNwYWNlYmFyXCIsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KHN3aXRjaENvbXBvbmVudC5pc09uKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICBzd2l0Y2hDb21wb25lbnQuc2xpZGVyKCkuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuU1BBQ0UpO1xuICAgICAgICBleHBlY3Qoc3dpdGNoQ29tcG9uZW50LmlzT24oKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KFwiaXNFbmFibGVkIHNob3VsZCByZXR1cm4gcmlnaHQgZWxlbWVudCBzdGF0ZVwiLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzd2l0Y2hDb21wb25lbnQuaXNFbmFibGVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChkaXNhYmxlZFN3aXRjaENvbXBvbmVudC5pc0VuYWJsZWQoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
