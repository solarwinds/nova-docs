"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const protractor_1 = require("@solarwinds/uzi/protractor");
const helpers_1 = require("../helpers");
const index_atom_1 = require("../index.atom");
const uzi_1 = require("@solarwinds/uzi");
describe("USERCONTROL tabs", () => {
    let atom, respTabsAtom;
    beforeEach(() => {
        helpers_1.default.prepareBrowser("tabs");
        atom = uzi_1.Atom.find(index_atom_1.TabsAtom, "mockTabs");
        respTabsAtom = uzi_1.Atom.find(index_atom_1.TabsAtom, "responsiveTabs");
    });
    const expectedTabCount = 3;
    const expectedTabTitle = "SECOND TAB";
    const secondTabContent = "Content of second tab";
    const thirdTabContent = "Content of third tab";
    it("should be " + expectedTabCount + " tabs in tab panel", () => {
        expect(atom.tabCount()).toBe(expectedTabCount);
    });
    it("second tab should have tab-title " + expectedTabTitle, () => {
        expect(atom.getTabTitle(1)).toBe(expectedTabTitle);
    });
    it("second tab should be selected by default ", () => {
        expect(atom.isTabSelected(0)).toBe(false);
        expect(atom.isTabSelected(1)).toBe(true);
        expect(atom.isTabSelected(2)).toBe(false);
        expect(atom.getContent(1).element(protractor_1.by.css(".payload")).getText()).toBe(secondTabContent);
    });
    it("third tab should be selected on click ", () => {
        expect(atom.isTabSelected(0)).toBe(false);
        expect(atom.isTabSelected(1)).toBe(true);
        expect(atom.isTabSelected(2)).toBe(false);
        expect(atom.getContent(1).element(protractor_1.by.css(".payload")).getText()).toBe(secondTabContent);
        atom.click(2);
        expect(atom.isTabSelected(0)).toBe(false);
        expect(atom.isTabSelected(1)).toBe(false);
        expect(atom.isTabSelected(2)).toBe(true);
        expect(atom.getContent(2).element(protractor_1.by.css(".payload")).getText()).toBe(thirdTabContent);
    });
    describe("responsive tabs", () => {
        it("left caret should be disabled by default and right caret enabled", () => {
            expect(uzi_1.Atom.hasClass(respTabsAtom.getLeftCaret(), "disabled")).toBeTruthy();
            expect(uzi_1.Atom.hasClass(respTabsAtom.getRightCaret(), "disabled")).toBeFalsy();
        });
        it("should move tabs after click on right caret", () => {
            respTabsAtom.getRightCaret().click();
            protractor_1.browser.wait(() => {
                return respTabsAtom.getTranslateX(respTabsAtom.getTabsSlidingPanel()).then(x => x > 0);
            });
            expect(respTabsAtom.getTranslateX(respTabsAtom.getTabsSlidingPanel())).not.toBe(0);
            expect(uzi_1.Atom.hasClass(respTabsAtom.getLeftCaret(), "disabled")).toBeFalsy();
        });
        it("should move tabs after click on left caret", () => {
            respTabsAtom.getRightCaret().click();
            respTabsAtom.getLeftCaret().click();
            expect(respTabsAtom.getTranslateX(respTabsAtom.getTabsSlidingPanel())).toBe(0);
            expect(uzi_1.Atom.hasClass(respTabsAtom.getLeftCaret(), "disabled")).toBeTruthy();
            expect(uzi_1.Atom.hasClass(respTabsAtom.getRightCaret(), "disabled")).toBeFalsy();
        });
        it("should disable right caret after showing last tab", () => {
            respTabsAtom.getRightCaret().click();
            protractor_1.browser.wait(() => {
                return respTabsAtom.getTranslateX(respTabsAtom.getTabsSlidingPanel()).then(x => x > 0);
            });
            respTabsAtom.getRightCaret().click();
            protractor_1.browser.wait(() => {
                return uzi_1.Atom.hasClass(respTabsAtom.getRightCaret(), "disabled");
            });
            expect(uzi_1.Atom.hasClass(respTabsAtom.getRightCaret(), "disabled")).toBeTruthy();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvdGFicy90YWJzLmUyZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDJEQUFnRTtBQUNoRSx3Q0FBaUM7QUFDakMsOENBQXVDO0FBQ3ZDLHlDQUFxQztBQUVyQyxRQUFRLENBQUMsa0JBQWtCLEVBQUUsR0FBRyxFQUFFO0lBQzlCLElBQUksSUFBYyxFQUNkLFlBQXNCLENBQUM7SUFFM0IsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNaLGlCQUFPLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQy9CLElBQUksR0FBRyxVQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDdkMsWUFBWSxHQUFHLFVBQUksQ0FBQyxJQUFJLENBQUMscUJBQVEsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3pELENBQUMsQ0FBQyxDQUFDO0lBRUgsTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLENBQUM7SUFDM0IsTUFBTSxnQkFBZ0IsR0FBRyxZQUFZLENBQUM7SUFDdEMsTUFBTSxnQkFBZ0IsR0FBRyx1QkFBdUIsQ0FBQztJQUNqRCxNQUFNLGVBQWUsR0FBRyxzQkFBc0IsQ0FBQztJQUUvQyxFQUFFLENBQUMsWUFBWSxHQUFHLGdCQUFnQixHQUFHLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtRQUM1RCxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDbkQsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsbUNBQW1DLEdBQUcsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzVELE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDdkQsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsMkNBQTJDLEVBQUUsR0FBRyxFQUFFO1FBQ2pELE1B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LENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMzRixDQUFDLENBQUMsQ0FBQztZQUNILFlBQVksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNyQyxvQkFBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7Z0JBQ2QsTUFBTSxDQUFDLFVBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLGFBQWEsRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQ25FLENBQUMsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxDQUFDLFVBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLGFBQWEsRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDakYsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6ImNvbXBvbmVudHMvdGFicy90YWJzLmUyZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YnJvd3NlciwgYnksIHByb21pc2V9IGZyb20gXCJAc29sYXJ3aW5kcy91emkvcHJvdHJhY3RvclwiO1xuaW1wb3J0IEhlbHBlcnMgZnJvbSBcIi4uL2hlbHBlcnNcIjtcbmltcG9ydCB7VGFic0F0b219IGZyb20gXCIuLi9pbmRleC5hdG9tXCI7XG5pbXBvcnQge0F0b219IGZyb20gXCJAc29sYXJ3aW5kcy91emlcIjtcblxuZGVzY3JpYmUoXCJVU0VSQ09OVFJPTCB0YWJzXCIsICgpID0+IHtcbiAgICBsZXQgYXRvbTogVGFic0F0b20sXG4gICAgICAgIHJlc3BUYWJzQXRvbTogVGFic0F0b207XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgSGVscGVycy5wcmVwYXJlQnJvd3NlcihcInRhYnNcIik7XG4gICAgICAgIGF0b20gPSBBdG9tLmZpbmQoVGFic0F0b20sIFwibW9ja1RhYnNcIik7XG4gICAgICAgIHJlc3BUYWJzQXRvbSA9IEF0b20uZmluZChUYWJzQXRvbSwgXCJyZXNwb25zaXZlVGFic1wiKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGV4cGVjdGVkVGFiQ291bnQgPSAzO1xuICAgIGNvbnN0IGV4cGVjdGVkVGFiVGl0bGUgPSBcIlNFQ09ORCBUQUJcIjtcbiAgICBjb25zdCBzZWNvbmRUYWJDb250ZW50ID0gXCJDb250ZW50IG9mIHNlY29uZCB0YWJcIjtcbiAgICBjb25zdCB0aGlyZFRhYkNvbnRlbnQgPSBcIkNvbnRlbnQgb2YgdGhpcmQgdGFiXCI7XG5cbiAgICBpdChcInNob3VsZCBiZSBcIiArIGV4cGVjdGVkVGFiQ291bnQgKyBcIiB0YWJzIGluIHRhYiBwYW5lbFwiLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChhdG9tLnRhYkNvdW50KCkpLnRvQmUoZXhwZWN0ZWRUYWJDb3VudCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNlY29uZCB0YWIgc2hvdWxkIGhhdmUgdGFiLXRpdGxlIFwiICsgZXhwZWN0ZWRUYWJUaXRsZSwgKCkgPT4ge1xuICAgICAgICBleHBlY3QoYXRvbS5nZXRUYWJUaXRsZSgxKSkudG9CZShleHBlY3RlZFRhYlRpdGxlKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2Vjb25kIHRhYiBzaG91bGQgYmUgc2VsZWN0ZWQgYnkgZGVmYXVsdCBcIiwgKCkgPT4ge1xuICAgICAgICBleHBlY3QoYXRvbS5pc1RhYlNlbGVjdGVkKDApKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGF0b20uaXNUYWJTZWxlY3RlZCgxKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGF0b20uaXNUYWJTZWxlY3RlZCgyKSkudG9CZShmYWxzZSk7XG5cbiAgICAgICAgZXhwZWN0KGF0b20uZ2V0Q29udGVudCgxKS5lbGVtZW50KGJ5LmNzcyhcIi5wYXlsb2FkXCIpKS5nZXRUZXh0KCkpLnRvQmUoc2Vjb25kVGFiQ29udGVudCk7XG4gICAgfSk7XG5cbiAgICBpdChcInRoaXJkIHRhYiBzaG91bGQgYmUgc2VsZWN0ZWQgb24gY2xpY2sgXCIsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KGF0b20uaXNUYWJTZWxlY3RlZCgwKSkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChhdG9tLmlzVGFiU2VsZWN0ZWQoMSkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChhdG9tLmlzVGFiU2VsZWN0ZWQoMikpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoYXRvbS5nZXRDb250ZW50KDEpLmVsZW1lbnQoYnkuY3NzKFwiLnBheWxvYWRcIikpLmdldFRleHQoKSkudG9CZShzZWNvbmRUYWJDb250ZW50KTtcblxuICAgICAgICBhdG9tLmNsaWNrKDIpO1xuICAgICAgICBleHBlY3QoYXRvbS5pc1RhYlNlbGVjdGVkKDApKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGF0b20uaXNUYWJTZWxlY3RlZCgxKSkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChhdG9tLmlzVGFiU2VsZWN0ZWQoMikpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChhdG9tLmdldENvbnRlbnQoMikuZWxlbWVudChieS5jc3MoXCIucGF5bG9hZFwiKSkuZ2V0VGV4dCgpKS50b0JlKHRoaXJkVGFiQ29udGVudCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcInJlc3BvbnNpdmUgdGFic1wiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwibGVmdCBjYXJldCBzaG91bGQgYmUgZGlzYWJsZWQgYnkgZGVmYXVsdCBhbmQgcmlnaHQgY2FyZXQgZW5hYmxlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QoQXRvbS5oYXNDbGFzcyhyZXNwVGFic0F0b20uZ2V0TGVmdENhcmV0KCksIFwiZGlzYWJsZWRcIikpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgICAgIGV4cGVjdChBdG9tLmhhc0NsYXNzKHJlc3BUYWJzQXRvbS5nZXRSaWdodENhcmV0KCksIFwiZGlzYWJsZWRcIikpLnRvQmVGYWxzeSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChcInNob3VsZCBtb3ZlIHRhYnMgYWZ0ZXIgY2xpY2sgb24gcmlnaHQgY2FyZXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgcmVzcFRhYnNBdG9tLmdldFJpZ2h0Q2FyZXQoKS5jbGljaygpO1xuICAgICAgICAgICAgYnJvd3Nlci53YWl0KCgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcFRhYnNBdG9tLmdldFRyYW5zbGF0ZVgocmVzcFRhYnNBdG9tLmdldFRhYnNTbGlkaW5nUGFuZWwoKSkudGhlbih4ID0+IHggPiAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3BUYWJzQXRvbS5nZXRUcmFuc2xhdGVYKHJlc3BUYWJzQXRvbS5nZXRUYWJzU2xpZGluZ1BhbmVsKCkpKS5ub3QudG9CZSgwKTtcbiAgICAgICAgICAgIGV4cGVjdChBdG9tLmhhc0NsYXNzKHJlc3BUYWJzQXRvbS5nZXRMZWZ0Q2FyZXQoKSwgXCJkaXNhYmxlZFwiKSkudG9CZUZhbHN5KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwic2hvdWxkIG1vdmUgdGFicyBhZnRlciBjbGljayBvbiBsZWZ0IGNhcmV0XCIsICgpID0+IHtcbiAgICAgICAgICAgIHJlc3BUYWJzQXRvbS5nZXRSaWdodENhcmV0KCkuY2xpY2soKTtcbiAgICAgICAgICAgIHJlc3BUYWJzQXRvbS5nZXRMZWZ0Q2FyZXQoKS5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3BUYWJzQXRvbS5nZXRUcmFuc2xhdGVYKHJlc3BUYWJzQXRvbS5nZXRUYWJzU2xpZGluZ1BhbmVsKCkpKS50b0JlKDApO1xuICAgICAgICAgICAgZXhwZWN0KEF0b20uaGFzQ2xhc3MocmVzcFRhYnNBdG9tLmdldExlZnRDYXJldCgpLCBcImRpc2FibGVkXCIpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgICAgICBleHBlY3QoQXRvbS5oYXNDbGFzcyhyZXNwVGFic0F0b20uZ2V0UmlnaHRDYXJldCgpLCBcImRpc2FibGVkXCIpKS50b0JlRmFsc3koKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgZGlzYWJsZSByaWdodCBjYXJldCBhZnRlciBzaG93aW5nIGxhc3QgdGFiXCIsICgpID0+IHtcbiAgICAgICAgICAgIHJlc3BUYWJzQXRvbS5nZXRSaWdodENhcmV0KCkuY2xpY2soKTtcbiAgICAgICAgICAgIGJyb3dzZXIud2FpdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BUYWJzQXRvbS5nZXRUcmFuc2xhdGVYKHJlc3BUYWJzQXRvbS5nZXRUYWJzU2xpZGluZ1BhbmVsKCkpLnRoZW4oeCA9PiB4ID4gMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc3BUYWJzQXRvbS5nZXRSaWdodENhcmV0KCkuY2xpY2soKTtcbiAgICAgICAgICAgIGJyb3dzZXIud2FpdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEF0b20uaGFzQ2xhc3MocmVzcFRhYnNBdG9tLmdldFJpZ2h0Q2FyZXQoKSwgXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXhwZWN0KEF0b20uaGFzQ2xhc3MocmVzcFRhYnNBdG9tLmdldFJpZ2h0Q2FyZXQoKSwgXCJkaXNhYmxlZFwiKSkudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
