"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const protractor_1 = require("@solarwinds/uzi/protractor");
const helpers_1 = require("../helpers");
const uzi_1 = require("@solarwinds/uzi");
const index_atom_1 = require("../index.atom");
describe("USERCONTROL tabs router", () => {
    let tabs;
    beforeEach(() => {
        helpers_1.default.prepareBrowser("tabsRouter");
        tabs = uzi_1.Atom.find(index_atom_1.TabsAtom, "mockTabs");
    });
    it("automatically gets redirected to first tab", () => {
        expect(tabs.isTabSelected(0)).toBe(true);
        expect(protractor_1.browser.getCurrentUrl()).toMatch("tabsRouter/first");
        expect(tabs.getRouterView().getText()).toMatch("first template content");
    });
    it("should be redirected after clicking on second tab", () => {
        expect(tabs.isTabSelected(1)).toBe(false);
        tabs.click(1);
        expect(tabs.isTabSelected(1)).toBe(true);
        expect(protractor_1.browser.getCurrentUrl()).toMatch("tabsRouter/second");
    });
    it("should be redirected after clicking on third tab with custom params", () => {
        expect(tabs.isTabSelected(2)).toBe(false);
        tabs.click(2);
        protractor_1.browser.waitForAngular();
        expect(tabs.isTabSelected(2)).toBe(true);
        expect(protractor_1.browser.getCurrentUrl()).toMatch("tabsRouter/third/myValue");
    });
    it("should be redirected after clicking on third tab with custom params being changed through input", () => {
        const input = protractor_1.element(protractor_1.by.id("param1Input"));
        input.clear().then(() => input.sendKeys("mySuperNewValue"));
        tabs.click(2);
        expect(tabs.isTabSelected(2)).toBe(true);
        expect(protractor_1.browser.getCurrentUrl()).toMatch("tabsRouter/third/mySuperNewValue");
    });
    describe("when state is changed externally, it", () => {
        it("changes the selected tab", () => {
            expect(tabs.isTabSelected(0)).toBe(true);
            expect(tabs.isTabSelected(1)).toBe(false);
            const changeStateButton = uzi_1.Atom.findIn(index_atom_1.ButtonAtom, protractor_1.element(protractor_1.by.id("change-state-button")));
            changeStateButton.click();
            expect(protractor_1.browser.getCurrentUrl()).toMatch("tabsRouter/second");
            expect(tabs.isTabSelected(0)).toBe(false);
            expect(tabs.isTabSelected(1)).toBe(true);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvdGFic1JvdXRlci90YWJzUm91dGVyLmUyZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDJEQUF5RTtBQUN6RSx3Q0FBaUM7QUFDakMseUNBQXFDO0FBQ3JDLDhDQUFtRDtBQUVuRCxRQUFRLENBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO0lBQ3JDLElBQUksSUFBYyxDQUFDO0lBRW5CLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDWixpQkFBTyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNyQyxJQUFJLEdBQUcsVUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQzNDLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEdBQUcsRUFBRTtRQUNsRCxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QyxNQUFNLENBQUMsb0JBQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQzVELE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUM3RSxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxtREFBbUQsRUFBRSxHQUFHLEVBQUU7UUFDekQsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDMUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNkLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLE1BQU0sQ0FBQyxvQkFBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDakUsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMscUVBQXFFLEVBQUUsR0FBRyxFQUFFO1FBQzNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZCxvQkFBTyxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLE1BQU0sQ0FBQyxvQkFBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7SUFDeEUsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsaUdBQWlHLEVBQUUsR0FBRyxFQUFFO1FBQ3ZHLE1BQU0sS0FBSyxHQUFHLG9CQUFPLENBQUMsZUFBRSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO1FBQzVDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7UUFDNUQsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNkLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLE1BQU0sQ0FBQyxvQkFBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7SUFDaEYsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsc0NBQXNDLEVBQUUsR0FBRSxFQUFFO1FBQ2pELEVBQUUsQ0FBQywwQkFBMEIsRUFBRSxHQUFFLEVBQUU7WUFDL0IsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekMsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFMUMsTUFBTSxpQkFBaUIsR0FBRyxVQUFJLENBQUMsTUFBTSxDQUFDLHVCQUFVLEVBQUUsb0JBQU8sQ0FBQyxlQUFFLENBQUMsRUFBRSxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pGLGlCQUFpQixDQUFDLEtBQUssRUFBRSxDQUFDO1lBRTFCLE1BQU0sQ0FBQyxvQkFBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDN0QsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUMsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0MsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6ImNvbXBvbmVudHMvdGFic1JvdXRlci90YWJzUm91dGVyLmUyZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YnJvd3NlciwgYnksIGVsZW1lbnQsIHByb21pc2V9IGZyb20gXCJAc29sYXJ3aW5kcy91emkvcHJvdHJhY3RvclwiO1xuaW1wb3J0IEhlbHBlcnMgZnJvbSBcIi4uL2hlbHBlcnNcIjtcbmltcG9ydCB7QXRvbX0gZnJvbSBcIkBzb2xhcndpbmRzL3V6aVwiO1xuaW1wb3J0IHtCdXR0b25BdG9tLCBUYWJzQXRvbX0gZnJvbSBcIi4uL2luZGV4LmF0b21cIjtcblxuZGVzY3JpYmUoXCJVU0VSQ09OVFJPTCB0YWJzIHJvdXRlclwiLCAoKSA9PiB7XG4gICAgbGV0IHRhYnM6IFRhYnNBdG9tO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIEhlbHBlcnMucHJlcGFyZUJyb3dzZXIoXCJ0YWJzUm91dGVyXCIpO1xuICAgICAgICB0YWJzID0gQXRvbS5maW5kKFRhYnNBdG9tLCBcIm1vY2tUYWJzXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJhdXRvbWF0aWNhbGx5IGdldHMgcmVkaXJlY3RlZCB0byBmaXJzdCB0YWJcIiwgKCkgPT4ge1xuICAgICAgICBleHBlY3QodGFicy5pc1RhYlNlbGVjdGVkKDApKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoYnJvd3Nlci5nZXRDdXJyZW50VXJsKCkpLnRvTWF0Y2goXCJ0YWJzUm91dGVyL2ZpcnN0XCIpO1xuICAgICAgICBleHBlY3QodGFicy5nZXRSb3V0ZXJWaWV3KCkuZ2V0VGV4dCgpKS50b01hdGNoKFwiZmlyc3QgdGVtcGxhdGUgY29udGVudFwiKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGJlIHJlZGlyZWN0ZWQgYWZ0ZXIgY2xpY2tpbmcgb24gc2Vjb25kIHRhYlwiLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdCh0YWJzLmlzVGFiU2VsZWN0ZWQoMSkpLnRvQmUoZmFsc2UpO1xuICAgICAgICB0YWJzLmNsaWNrKDEpO1xuICAgICAgICBleHBlY3QodGFicy5pc1RhYlNlbGVjdGVkKDEpKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoYnJvd3Nlci5nZXRDdXJyZW50VXJsKCkpLnRvTWF0Y2goXCJ0YWJzUm91dGVyL3NlY29uZFwiKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGJlIHJlZGlyZWN0ZWQgYWZ0ZXIgY2xpY2tpbmcgb24gdGhpcmQgdGFiIHdpdGggY3VzdG9tIHBhcmFtc1wiLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdCh0YWJzLmlzVGFiU2VsZWN0ZWQoMikpLnRvQmUoZmFsc2UpO1xuICAgICAgICB0YWJzLmNsaWNrKDIpO1xuICAgICAgICBicm93c2VyLndhaXRGb3JBbmd1bGFyKCk7XG4gICAgICAgIGV4cGVjdCh0YWJzLmlzVGFiU2VsZWN0ZWQoMikpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChicm93c2VyLmdldEN1cnJlbnRVcmwoKSkudG9NYXRjaChcInRhYnNSb3V0ZXIvdGhpcmQvbXlWYWx1ZVwiKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGJlIHJlZGlyZWN0ZWQgYWZ0ZXIgY2xpY2tpbmcgb24gdGhpcmQgdGFiIHdpdGggY3VzdG9tIHBhcmFtcyBiZWluZyBjaGFuZ2VkIHRocm91Z2ggaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGVsZW1lbnQoYnkuaWQoXCJwYXJhbTFJbnB1dFwiKSk7XG4gICAgICAgIGlucHV0LmNsZWFyKCkudGhlbigoKSA9PiBpbnB1dC5zZW5kS2V5cyhcIm15U3VwZXJOZXdWYWx1ZVwiKSk7XG4gICAgICAgIHRhYnMuY2xpY2soMik7XG4gICAgICAgIGV4cGVjdCh0YWJzLmlzVGFiU2VsZWN0ZWQoMikpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChicm93c2VyLmdldEN1cnJlbnRVcmwoKSkudG9NYXRjaChcInRhYnNSb3V0ZXIvdGhpcmQvbXlTdXBlck5ld1ZhbHVlXCIpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJ3aGVuIHN0YXRlIGlzIGNoYW5nZWQgZXh0ZXJuYWxseSwgaXRcIiwgKCk9PiB7XG4gICAgICAgIGl0KFwiY2hhbmdlcyB0aGUgc2VsZWN0ZWQgdGFiXCIsICgpPT4ge1xuICAgICAgICAgICAgZXhwZWN0KHRhYnMuaXNUYWJTZWxlY3RlZCgwKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdCh0YWJzLmlzVGFiU2VsZWN0ZWQoMSkpLnRvQmUoZmFsc2UpO1xuXG4gICAgICAgICAgICBjb25zdCBjaGFuZ2VTdGF0ZUJ1dHRvbiA9IEF0b20uZmluZEluKEJ1dHRvbkF0b20sIGVsZW1lbnQoYnkuaWQoXCJjaGFuZ2Utc3RhdGUtYnV0dG9uXCIpKSk7XG4gICAgICAgICAgICBjaGFuZ2VTdGF0ZUJ1dHRvbi5jbGljaygpO1xuXG4gICAgICAgICAgICBleHBlY3QoYnJvd3Nlci5nZXRDdXJyZW50VXJsKCkpLnRvTWF0Y2goXCJ0YWJzUm91dGVyL3NlY29uZFwiKTtcbiAgICAgICAgICAgIGV4cGVjdCh0YWJzLmlzVGFiU2VsZWN0ZWQoMCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgZXhwZWN0KHRhYnMuaXNUYWJTZWxlY3RlZCgxKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
