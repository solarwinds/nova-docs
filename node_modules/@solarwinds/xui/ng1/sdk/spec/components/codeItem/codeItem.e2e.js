"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const protractor_1 = require("@solarwinds/uzi/protractor");
const helpers_1 = require("../helpers");
const index_atom_1 = require("../index.atom");
const uzi_1 = require("@solarwinds/uzi");
describe("USERCONTROL code item: ", () => {
    let listView_case1;
    let listView_case2;
    let listView_case3;
    let firstCodeItem;
    let secondCodeItem;
    let transcludedCodeItem;
    let noLineNumberCodeItem;
    beforeEach(() => {
        helpers_1.default.prepareBrowser("codeItem");
        listView_case1 = uzi_1.Atom.findIn(index_atom_1.ListViewAtom, protractor_1.element(protractor_1.by.id("listview_004")));
        listView_case2 = uzi_1.Atom.findIn(index_atom_1.ListViewAtom, protractor_1.element(protractor_1.by.id("listview_006")));
        listView_case3 = uzi_1.Atom.findIn(index_atom_1.ListViewAtom, protractor_1.element(protractor_1.by.id("listview_008")));
        firstCodeItem = uzi_1.Atom.findIn(index_atom_1.CodeItemAtom, listView_case1.getItem(0));
        secondCodeItem = uzi_1.Atom.findIn(index_atom_1.CodeItemAtom, listView_case1.getItem(1));
        noLineNumberCodeItem = uzi_1.Atom.findIn(index_atom_1.CodeItemAtom, listView_case2.getItem(1));
        transcludedCodeItem = uzi_1.Atom.findIn(index_atom_1.CodeItemAtom, listView_case3.getItem(1));
    });
    it("should display line numbers", () => __awaiter(this, void 0, void 0, function* () {
        let lineNumberText = yield firstCodeItem.getTextFromLineNumber("xui-code-item__line-number-text");
        //getTextFromLineNumber uses getComputedStyles to get pseudo-element's content
        // and it returns string with extra double-quotes, so it was decided to remove them
        return expect(lineNumberText.replace(/["]+/g, "")).toBe("1");
    }));
    it("should not display line numbers if 'line-number' is not set", () => {
        let lineNumberText = secondCodeItem.getTextByClassName("xui-code-item__line-number");
        return expect(lineNumberText).not.toBe("1");
    });
    it("should have a black-colored background", () => {
        return expect(firstCodeItem.getBgColorAndHexIt()).toBe("#1d1d1d");
    });
    it("should have a correct number color", () => {
        return expect(secondCodeItem.getTextColorAndHexIt("hljs-number")).toBe("#d36363");
    });
    it("should have a correct text color", () => {
        return expect(firstCodeItem.getTextColorAndHexIt("hljs-built_in")).toBe("#ffffaa");
    });
    it("should have a correct color of the transcluded text", () => {
        return expect(transcludedCodeItem.getTranscludedColorAndHexIt()).toBe("#0079aa");
    });
    it("should not be able to select line numbers (checked using ctrl+a)", () => __awaiter(this, void 0, void 0, function* () {
        //This component has a problem with protractor's mouse movement, so it was decided to use CTRL+A,
        // hence we need to remove all except one example pages, to select less text.
        protractor_1.browser.executeScript(() => {
            document.querySelectorAll(".xui-page-content__header")[0].remove();
            _.each(document.querySelectorAll(".example"), ((element, index) => {
                if (index !== 0) {
                    element.remove();
                }
            }));
        });
        //hardcoded string to be selected with one listview element
        let hardcodedString = `Example listview with source code

 deny IP anti-spoofing PRIVATE-IP any log
777
 permit TCP any host 10.12.3.76 eq 80
130456
 permit TCP any host 10.12.3.76 eq 443
133
 permit TCP any host 10.12.3.231 eq 21
0
 deny IP any any log
15`;
        let selectedText = yield firstCodeItem.getSelectedText();
        expect(selectedText).toEqual(hardcodedString);
    }));
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29kZUl0ZW0vY29kZUl0ZW0uZTJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSwyREFBa0U7QUFDbEUsd0NBQWlDO0FBQ2pDLDhDQUEyRDtBQUMzRCx5Q0FBdUM7QUFFdkMsUUFBUSxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtJQUNyQyxJQUFJLGNBQTRCLENBQUM7SUFDakMsSUFBSSxjQUE0QixDQUFDO0lBQ2pDLElBQUksY0FBNEIsQ0FBQztJQUNqQyxJQUFJLGFBQTJCLENBQUM7SUFDaEMsSUFBSSxjQUE0QixDQUFDO0lBQ2pDLElBQUksbUJBQWlDLENBQUM7SUFDdEMsSUFBSSxvQkFBa0MsQ0FBQztJQUV2QyxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ1osaUJBQU8sQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFbkMsY0FBYyxHQUFHLFVBQUksQ0FBQyxNQUFNLENBQUMseUJBQVksRUFBRSxvQkFBTyxDQUFDLGVBQUUsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNFLGNBQWMsR0FBRyxVQUFJLENBQUMsTUFBTSxDQUFDLHlCQUFZLEVBQUUsb0JBQU8sQ0FBQyxlQUFFLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzRSxjQUFjLEdBQUcsVUFBSSxDQUFDLE1BQU0sQ0FBQyx5QkFBWSxFQUFFLG9CQUFPLENBQUMsZUFBRSxDQUFDLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFM0UsYUFBYSxHQUFHLFVBQUksQ0FBQyxNQUFNLENBQUMseUJBQVksRUFBRSxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckUsY0FBYyxHQUFHLFVBQUksQ0FBQyxNQUFNLENBQUMseUJBQVksRUFBRSxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEUsb0JB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QUNsRCxDQUFDLENBQUEsQ0FBQyxDQUFDO0FBRVAsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy9jb2RlSXRlbS9jb2RlSXRlbS5lMmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBieSwgYnJvd3NlciwgZWxlbWVudCB9IGZyb20gXCJAc29sYXJ3aW5kcy91emkvcHJvdHJhY3RvclwiO1xuaW1wb3J0IEhlbHBlcnMgZnJvbSBcIi4uL2hlbHBlcnNcIjtcbmltcG9ydCB7IENvZGVJdGVtQXRvbSwgTGlzdFZpZXdBdG9tIH0gZnJvbSBcIi4uL2luZGV4LmF0b21cIjtcbmltcG9ydCB7IEF0b20gfSBmcm9tIFwiQHNvbGFyd2luZHMvdXppXCI7XG5cbmRlc2NyaWJlKFwiVVNFUkNPTlRST0wgY29kZSBpdGVtOiBcIiwgKCkgPT4ge1xuICAgIGxldCBsaXN0Vmlld19jYXNlMTogTGlzdFZpZXdBdG9tO1xuICAgIGxldCBsaXN0Vmlld19jYXNlMjogTGlzdFZpZXdBdG9tO1xuICAgIGxldCBsaXN0Vmlld19jYXNlMzogTGlzdFZpZXdBdG9tO1xuICAgIGxldCBmaXJzdENvZGVJdGVtOiBDb2RlSXRlbUF0b207XG4gICAgbGV0IHNlY29uZENvZGVJdGVtOiBDb2RlSXRlbUF0b207XG4gICAgbGV0IHRyYW5zY2x1ZGVkQ29kZUl0ZW06IENvZGVJdGVtQXRvbTtcbiAgICBsZXQgbm9MaW5lTnVtYmVyQ29kZUl0ZW06IENvZGVJdGVtQXRvbTtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBIZWxwZXJzLnByZXBhcmVCcm93c2VyKFwiY29kZUl0ZW1cIik7XG5cbiAgICAgICAgbGlzdFZpZXdfY2FzZTEgPSBBdG9tLmZpbmRJbihMaXN0Vmlld0F0b20sIGVsZW1lbnQoYnkuaWQoXCJsaXN0dmlld18wMDRcIikpKTtcbiAgICAgICAgbGlzdFZpZXdfY2FzZTIgPSBBdG9tLmZpbmRJbihMaXN0Vmlld0F0b20sIGVsZW1lbnQoYnkuaWQoXCJsaXN0dmlld18wMDZcIikpKTtcbiAgICAgICAgbGlzdFZpZXdfY2FzZTMgPSBBdG9tLmZpbmRJbihMaXN0Vmlld0F0b20sIGVsZW1lbnQoYnkuaWQoXCJsaXN0dmlld18wMDhcIikpKTtcblxuICAgICAgICBmaXJzdENvZGVJdGVtID0gQXRvbS5maW5kSW4oQ29kZUl0ZW1BdG9tLCBsaXN0Vmlld19jYXNlMS5nZXRJdGVtKDApKTtcbiAgICAgICAgc2Vjb25kQ29kZUl0ZW0gPSBBdG9tLmZpbmRJbihDb2RlSXRlbUF0b20sIGxpc3RWaWV3X2Nhc2UxLmdldEl0ZW0oMSkpO1xuICAgICAgICBub0xpbmVOdW1iZXJDb2RlSXRlbSA9IEF0b20uZmluZEluKENvZGVJdGVtQXRvbSwgbGlzdFZpZXdfY2FzZTIuZ2V0SXRlbSgxKSk7XG4gICAgICAgIHRyYW5zY2x1ZGVkQ29kZUl0ZW0gPSBBdG9tLmZpbmRJbihDb2RlSXRlbUF0b20sIGxpc3RWaWV3X2Nhc2UzLmdldEl0ZW0oMSkpO1xuXG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBkaXNwbGF5IGxpbmUgbnVtYmVyc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBsaW5lTnVtYmVyVGV4dCA9IGF3YWl0IGZpcnN0Q29kZUl0ZW0uZ2V0VGV4dEZyb21MaW5lTnVtYmVyKFwieHVpLWNvZGUtaXRlbV9fbGluZS1udW1iZXItdGV4dFwiKTtcbiAgICAgICAgLy9nZXRUZXh0RnJvbUxpbmVOdW1iZXIgdXNlcyBnZXRDb21wdXRlZFN0eWxlcyB0byBnZXQgcHNldWRvLWVsZW1lbnQncyBjb250ZW50XG4gICAgICAgIC8vIGFuZCBpdCByZXR1cm5zIHN0cmluZyB3aXRoIGV4dHJhIGRvdWJsZS1xdW90ZXMsIHNvIGl0IHdhcyBkZWNpZGVkIHRvIHJlbW92ZSB0aGVtXG4gICAgICAgIHJldHVybiBleHBlY3QobGluZU51bWJlclRleHQucmVwbGFjZSgvW1wiXSsvZywgXCJcIikpLnRvQmUoXCIxXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgbm90IGRpc3BsYXkgbGluZSBudW1iZXJzIGlmICdsaW5lLW51bWJlcicgaXMgbm90IHNldFwiLCAoKSA9PiB7XG4gICAgICAgIGxldCBsaW5lTnVtYmVyVGV4dCA9IHNlY29uZENvZGVJdGVtLmdldFRleHRCeUNsYXNzTmFtZShcInh1aS1jb2RlLWl0ZW1fX2xpbmUtbnVtYmVyXCIpO1xuICAgICAgICByZXR1cm4gZXhwZWN0KGxpbmVOdW1iZXJUZXh0KS5ub3QudG9CZShcIjFcIik7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYXZlIGEgYmxhY2stY29sb3JlZCBiYWNrZ3JvdW5kXCIsICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGV4cGVjdChmaXJzdENvZGVJdGVtLmdldEJnQ29sb3JBbmRIZXhJdCgpKS50b0JlKFwiIzFkMWQxZFwiKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhdmUgYSBjb3JyZWN0IG51bWJlciBjb2xvclwiLCAoKSA9PiB7XG4gICAgICAgIHJldHVybiBleHBlY3Qoc2Vjb25kQ29kZUl0ZW0uZ2V0VGV4dENvbG9yQW5kSGV4SXQoXCJobGpzLW51bWJlclwiKSkudG9CZShcIiNkMzYzNjNcIik7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYXZlIGEgY29ycmVjdCB0ZXh0IGNvbG9yXCIsICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGV4cGVjdChmaXJzdENvZGVJdGVtLmdldFRleHRDb2xvckFuZEhleEl0KFwiaGxqcy1idWlsdF9pblwiKSkudG9CZShcIiNmZmZmYWFcIik7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYXZlIGEgY29ycmVjdCBjb2xvciBvZiB0aGUgdHJhbnNjbHVkZWQgdGV4dFwiLCAoKT0+IHtcbiAgICAgICAgcmV0dXJuIGV4cGVjdCh0cmFuc2NsdWRlZENvZGVJdGVtLmdldFRyYW5zY2x1ZGVkQ29sb3JBbmRIZXhJdCgpKS50b0JlKFwiIzAwNzlhYVwiKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIG5vdCBiZSBhYmxlIHRvIHNlbGVjdCBsaW5lIG51bWJlcnMgKGNoZWNrZWQgdXNpbmcgY3RybCthKVwiLCBhc3luYyAoKT0+IHtcbiAgICAgICAgLy9UaGlzIGNvbXBvbmVudCBoYXMgYSBwcm9ibGVtIHdpdGggcHJvdHJhY3RvcidzIG1vdXNlIG1vdmVtZW50LCBzbyBpdCB3YXMgZGVjaWRlZCB0byB1c2UgQ1RSTCtBLFxuICAgICAgICAvLyBoZW5jZSB3ZSBuZWVkIHRvIHJlbW92ZSBhbGwgZXhjZXB0IG9uZSBleGFtcGxlIHBhZ2VzLCB0byBzZWxlY3QgbGVzcyB0ZXh0LlxuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi54dWktcGFnZS1jb250ZW50X19oZWFkZXJcIilbMF0ucmVtb3ZlKCk7XG4gICAgICAgICAgICBfLmVhY2goZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5leGFtcGxlXCIpLFxuICAgICAgICAgICAgICAgICgoZWxlbWVudDogYW55LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgLy9oYXJkY29kZWQgc3RyaW5nIHRvIGJlIHNlbGVjdGVkIHdpdGggb25lIGxpc3R2aWV3IGVsZW1lbnRcbiAgICAgICAgbGV0IGhhcmRjb2RlZFN0cmluZyA9IGBFeGFtcGxlIGxpc3R2aWV3IHdpdGggc291cmNlIGNvZGVcblxuIGRlbnkgSVAgYW50aS1zcG9vZmluZyBQUklWQVRFLUlQIGFueSBsb2dcbjc3N1xuIHBlcm1pdCBUQ1AgYW55IGhvc3QgMTAuMTIuMy43NiBlcSA4MFxuMTMwNDU2XG4gcGVybWl0IFRDUCBhbnkgaG9zdCAxMC4xMi4zLjc2IGVxIDQ0M1xuMTMzXG4gcGVybWl0IFRDUCBhbnkgaG9zdCAxMC4xMi4zLjIzMSBlcSAyMVxuMFxuIGRlbnkgSVAgYW55IGFueSBsb2dcbjE1YDtcbiAgICAgICAgbGV0IHNlbGVjdGVkVGV4dCA9IGF3YWl0IGZpcnN0Q29kZUl0ZW0uZ2V0U2VsZWN0ZWRUZXh0KCk7XG4gICAgICAgIGV4cGVjdChzZWxlY3RlZFRleHQpLnRvRXF1YWwoaGFyZGNvZGVkU3RyaW5nKTtcbiAgICB9KTtcblxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
