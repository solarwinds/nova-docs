"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const protractor = require("@solarwinds/uzi/protractor");
const protractor_1 = require("@solarwinds/uzi/protractor");
const helpers_1 = require("../helpers");
const index_atom_1 = require("../index.atom");
const uzi_1 = require("@solarwinds/uzi");
describe("USERCONTROL radio:", () => {
    let atom;
    const prepareBrowser = () => {
        helpers_1.default.prepareBrowser("radio");
        const section = protractor_1.element(protractor_1.by.id("radio-page"));
        atom = uzi_1.Atom.findIn(index_atom_1.RadioAtom, section);
    };
    describe("String values section:", () => {
        let vegetableRadios, carrotRadio, tomatoRadio, onionRadio;
        beforeEach(() => {
            prepareBrowser();
            // Get all "Vegetables" radios
            const vegetableSection = protractor_1.element(protractor_1.by.css("#xui-demo-radio-string-values"));
            vegetableRadios = vegetableSection.all(protractor_1.by.css(".xui-radio"));
            carrotRadio = atom.findRadioByName(vegetableRadios, "CARROT");
            tomatoRadio = atom.findRadioByName(vegetableRadios, "TOMATO");
            onionRadio = atom.findRadioByName(vegetableRadios, "ONION");
        });
        it("onion item should be selected by default", () => {
            // Check that onion radio is selected by default
            expect(atom.isRadioSelected(onionRadio)).toEqual(true);
            // Check that other elements are not selected
            vegetableRadios.each((radio) => {
                atom.getRadioText(radio).then((text) => {
                    if (text.toLowerCase() !== "onion") {
                        expect(atom.isRadioSelected(radio)).toEqual(false);
                    }
                });
            });
        });
        it("only one item can be selected", () => {
            // Verify that radios are not selected at start
            expect(atom.isRadioSelected(carrotRadio)).toEqual(false);
            expect(atom.isRadioSelected(tomatoRadio)).toEqual(false);
            // Select tomato
            atom.clickOnRadio(tomatoRadio);
            expect(atom.isRadioSelected(carrotRadio)).toEqual(false);
            expect(atom.isRadioSelected(tomatoRadio)).toEqual(true);
            // Select carrot
            atom.clickOnRadio(carrotRadio);
            // Check that onion is selected and tomato got unselected
            expect(atom.isRadioSelected(carrotRadio)).toEqual(true);
            expect(atom.isRadioSelected(tomatoRadio)).toEqual(false);
        });
    });
    describe("Object values section:", () => {
        let fruitRadios, appleRadio, bananaRadio;
        beforeEach(() => {
            prepareBrowser();
            const fruitSection = protractor_1.element(protractor_1.by.css("#xui-demo-radio-object-values"));
            fruitRadios = fruitSection.all(protractor_1.by.css(".xui-radio"));
            appleRadio = atom.findRadioByName(fruitRadios, "APPLE");
            bananaRadio = atom.findRadioByName(fruitRadios, "BANANA");
        });
        it("no item should be selected by default", () => {
            fruitRadios.each((radio) => {
                expect(atom.isRadioSelected(radio)).toEqual(false);
            });
        });
        it("selection should be changeable by cursor keys", () => {
            // Check that radios are not selected
            expect(atom.isRadioSelected(appleRadio)).toEqual(false);
            expect(atom.isRadioSelected(bananaRadio)).toEqual(false);
            // Click on apple radio
            atom.clickOnRadio(appleRadio);
            expect(atom.isRadioSelected(appleRadio)).toEqual(true);
            expect(atom.isRadioSelected(bananaRadio)).toEqual(false);
            // Click on UP arrow button so we check that correct element has focus and that radio
            // from correct group is selected
            protractor_1.browser.actions().sendKeys(protractor.Key.UP).perform();
            expect(atom.isRadioSelected(appleRadio)).toEqual(false);
            expect(atom.isRadioSelected(bananaRadio)).toEqual(true);
        });
    });
    describe("Disabling options section:", () => {
        let instrumentRadios, disableButton, modelLabel, pianoRadio, ukuleleRadio;
        beforeEach(() => {
            prepareBrowser();
            let instrumentSection = protractor_1.element(protractor_1.by.css("#xui-demo-radio-disabling-options"));
            instrumentRadios = instrumentSection.all(protractor_1.by.css(".xui-radio"));
            pianoRadio = atom.findRadioByName(instrumentRadios, "PIANO");
            ukuleleRadio = atom.findRadioByName(instrumentRadios, "UKULELE");
            disableButton = instrumentSection
                .all(protractor_1.by.xpath(".//button[div[normalize-space(text()) = 'Toggle options']]"))
                .first();
            modelLabel = instrumentSection
                .all(protractor_1.by.xpath(".//div[starts-with(text(), 'Model: ')]"))
                .first();
        });
        it("items should not be selectable when disabled", () => {
            // Verify that radio is not selected
            expect(atom.isRadioSelected(pianoRadio)).toEqual(false);
            // Disable radios
            expect(atom.isRadioEnabled(pianoRadio)).toEqual(true);
            disableButton.click();
            expect(atom.isRadioEnabled(pianoRadio)).toEqual(false);
            // Verify that radio can't be selected
            expect(atom.isRadioSelected(pianoRadio)).toEqual(false);
            atom.clickOnRadio(pianoRadio);
            expect(atom.isRadioSelected(pianoRadio)).toEqual(false);
            // Enable radios
            expect(atom.isRadioEnabled(pianoRadio)).toEqual(false);
            disableButton.click();
            expect(atom.isRadioEnabled(pianoRadio)).toEqual(true);
            // Verify that radio can be selected
            expect(atom.isRadioSelected(pianoRadio)).toEqual(false);
            atom.clickOnRadio(pianoRadio);
            expect(atom.isRadioSelected(pianoRadio)).toEqual(true);
        });
        it("radio button should not be clickable when disabled", () => {
            expect(modelLabel.getText()).toEqual("Model:");
            disableButton.click();
            atom.clickOnRadio(pianoRadio);
            expect(modelLabel.getText()).toEqual("Model:");
            disableButton.click();
            atom.clickOnRadio(pianoRadio);
            expect(modelLabel.getText()).toEqual("Model: piano");
        });
        it("selected item should retain its state when disabled", () => {
            // Select ukulele radio
            expect(atom.isRadioSelected(ukuleleRadio)).toEqual(false);
            atom.clickOnRadio(ukuleleRadio);
            expect(atom.isRadioSelected(ukuleleRadio)).toEqual(true);
            // Disable radios
            expect(atom.isRadioEnabled(ukuleleRadio)).toEqual(true);
            disableButton.click();
            expect(atom.isRadioEnabled(ukuleleRadio)).toEqual(false);
            // Check that radio stays selected even after clicking on different one in disabled mode
            expect(atom.isRadioSelected(ukuleleRadio)).toEqual(true);
            atom.clickOnRadio(pianoRadio);
            expect(atom.isRadioSelected(ukuleleRadio)).toEqual(true);
            expect(modelLabel.getText()).toEqual("Model: ukulele");
        });
        it("Model: string should correspond to selected value", () => {
            expect(modelLabel.getText()).toEqual("Model:");
            atom.clickOnRadio(pianoRadio);
            expect(modelLabel.getText()).toEqual("Model: piano");
        });
        it("Should return correct radio value", () => {
            expect(atom.getValue(pianoRadio)).toEqual("piano");
            expect(atom.getValue(ukuleleRadio)).toEqual("ukulele");
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvcmFkaW8vcmFkaW8uZTJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEseURBQXlEO0FBQ3pELDJEQUF5RTtBQUN6RSx3Q0FBaUM7QUFDakMsOENBQXdDO0FBQ3hDLHlDQUFxQztBQUVyQyxRQUFRLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO0lBQ2hDLElBQUksSUFBZSxDQUFDO0lBRXBCLE1BQU0sY0FBYyxHQUFHLEdBQUcsRUFBRTtRQUN4QixpQkFBTyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNoQyxNQUFNLE9BQU8sR0FBRyxvQkFBTyxDQUFDLGVBQUUsQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztRQUM3QyxJQUFJLEdBQUcsVUFBSSxDQUFDLE1BQU0sQ0FBQyxzQkFBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzNDLENBQUMsQ0FBQztJQUVGLFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxHQUFHLEVBQUU7UUFDcEMsSUFBSSxlQUFvQixFQUFFLFdBQWdCLEVBQUUsV0FBZ0IsRUFBRSxVQUFlLENBQUM7UUFDOUUsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNaLGNBQWMsRUFBRSxDQUFDO1lBQ2pCLDhCQUE4QjtZQUM5QixNQUFNLGdCQUFnQixHQUFHLG9CQUFPLENBQUMsZUFBRSxDQUFDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLENBQUM7WUFDMUUsZUFBZSxHQUFHLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxlQUFFLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7WUFDN0QsV0FBVyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsZUFBZSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQzlELFdBQVcsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUM5RCxVQUFVLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxlQUFlLEVBQUUs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QUMzRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxtREFBbUQsRUFBRSxHQUFHLEVBQUU7WUFDekQsTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMvQyxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzlCLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDekQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO1lBQ3pDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ25ELE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzNELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiJjb21wb25lbnRzL3JhZGlvL3JhZGlvLmUyZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHByb3RyYWN0b3IgZnJvbSBcIkBzb2xhcndpbmRzL3V6aS9wcm90cmFjdG9yXCI7XG5pbXBvcnQge2Jyb3dzZXIsIGJ5LCBlbGVtZW50LCBwcm9taXNlfSBmcm9tIFwiQHNvbGFyd2luZHMvdXppL3Byb3RyYWN0b3JcIjtcbmltcG9ydCBIZWxwZXJzIGZyb20gXCIuLi9oZWxwZXJzXCI7XG5pbXBvcnQge1JhZGlvQXRvbX0gZnJvbSBcIi4uL2luZGV4LmF0b21cIjtcbmltcG9ydCB7QXRvbX0gZnJvbSBcIkBzb2xhcndpbmRzL3V6aVwiO1xuXG5kZXNjcmliZShcIlVTRVJDT05UUk9MIHJhZGlvOlwiLCAoKSA9PiB7XG4gICAgbGV0IGF0b206IFJhZGlvQXRvbTtcblxuICAgIGNvbnN0IHByZXBhcmVCcm93c2VyID0gKCkgPT4ge1xuICAgICAgICBIZWxwZXJzLnByZXBhcmVCcm93c2VyKFwicmFkaW9cIik7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBlbGVtZW50KGJ5LmlkKFwicmFkaW8tcGFnZVwiKSk7XG4gICAgICAgIGF0b20gPSBBdG9tLmZpbmRJbihSYWRpb0F0b20sIHNlY3Rpb24pO1xuICAgIH07XG5cbiAgICBkZXNjcmliZShcIlN0cmluZyB2YWx1ZXMgc2VjdGlvbjpcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgdmVnZXRhYmxlUmFkaW9zOiBhbnksIGNhcnJvdFJhZGlvOiBhbnksIHRvbWF0b1JhZGlvOiBhbnksIG9uaW9uUmFkaW86IGFueTtcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBwcmVwYXJlQnJvd3NlcigpO1xuICAgICAgICAgICAgLy8gR2V0IGFsbCBcIlZlZ2V0YWJsZXNcIiByYWRpb3NcbiAgICAgICAgICAgIGNvbnN0IHZlZ2V0YWJsZVNlY3Rpb24gPSBlbGVtZW50KGJ5LmNzcyhcIiN4dWktZGVtby1yYWRpby1zdHJpbmctdmFsdWVzXCIpKTtcbiAgICAgICAgICAgIHZlZ2V0YWJsZVJhZGlvcyA9IHZlZ2V0YWJsZVNlY3Rpb24uYWxsKGJ5LmNzcyhcIi54dWktcmFkaW9cIikpO1xuICAgICAgICAgICAgY2Fycm90UmFkaW8gPSBhdG9tLmZpbmRSYWRpb0J5TmFtZSh2ZWdldGFibGVSYWRpb3MsIFwiQ0FSUk9UXCIpO1xuICAgICAgICAgICAgdG9tYXRvUmFkaW8gPSBhdG9tLmZpbmRSYWRpb0J5TmFtZSh2ZWdldGFibGVSYWRpb3MsIFwiVE9NQVRPXCIpO1xuICAgICAgICAgICAgb25pb25SYWRpbyA9IGF0b20uZmluZFJhZGlvQnlOYW1lKHZlZ2V0YWJsZVJhZGlvcywgXCJPTklPTlwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KFwib25pb24gaXRlbSBzaG91bGQgYmUgc2VsZWN0ZWQgYnkgZGVmYXVsdFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBDaGVjayB0aGF0IG9uaW9uIHJhZGlvIGlzIHNlbGVjdGVkIGJ5IGRlZmF1bHRcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzUmFkaW9TZWxlY3RlZChvbmlvblJhZGlvKSkudG9FcXVhbCh0cnVlKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCBvdGhlciBlbGVtZW50cyBhcmUgbm90IHNlbGVjdGVkXG4gICAgICAgICAgICB2ZWdldGFibGVSYWRpb3MuZWFjaCgocmFkaW86IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIGF0b20uZ2V0UmFkaW9UZXh0KHJhZGlvKS50aGVuKCh0ZXh0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQudG9Mb3dlckNhc2UoKSAhPT0gXCJvbmlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QoYXRvbS5pc1JhZGlvU2VsZWN0ZWQocmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcIm9ubHkgb25lIGl0ZW0gY2FuIGJlIHNlbGVjdGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGF0IHJhZGlvcyBhcmUgbm90IHNlbGVjdGVkIGF0IHN0YXJ0XG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc1JhZGlvU2VsZWN0ZWQoY2Fycm90UmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzUmFkaW9TZWxlY3RlZCh0b21hdG9SYWRpbykpLnRvRXF1YWwoZmFsc2UpO1xuXG4gICAgICAgICAgICAvLyBTZWxlY3QgdG9tYXRvXG4gICAgICAgICAgICBhdG9tLmNsaWNrT25SYWRpbyh0b21hdG9SYWRpbyk7XG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc1JhZGlvU2VsZWN0ZWQoY2Fycm90UmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzUmFkaW9TZWxlY3RlZCh0b21hdG9SYWRpbykpLnRvRXF1YWwodHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIFNlbGVjdCBjYXJyb3RcbiAgICAgICAgICAgIGF0b20uY2xpY2tPblJhZGlvKGNhcnJvdFJhZGlvKTtcbiAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgb25pb24gaXMgc2VsZWN0ZWQgYW5kIHRvbWF0byBnb3QgdW5zZWxlY3RlZFxuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb1NlbGVjdGVkKGNhcnJvdFJhZGlvKSkudG9FcXVhbCh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzUmFkaW9TZWxlY3RlZCh0b21hdG9SYWRpbykpLnRvRXF1YWwoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBkZXNjcmliZShcIk9iamVjdCB2YWx1ZXMgc2VjdGlvbjpcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgZnJ1aXRSYWRpb3M6IGFueSwgYXBwbGVSYWRpbzogYW55LCBiYW5hbmFSYWRpbzogYW55O1xuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgICAgIHByZXBhcmVCcm93c2VyKCk7XG4gICAgICAgICAgICBjb25zdCBmcnVpdFNlY3Rpb24gPSBlbGVtZW50KGJ5LmNzcyhcIiN4dWktZGVtby1yYWRpby1vYmplY3QtdmFsdWVzXCIpKTtcbiAgICAgICAgICAgIGZydWl0UmFkaW9zID0gZnJ1aXRTZWN0aW9uLmFsbChieS5jc3MoXCIueHVpLXJhZGlvXCIpKTtcbiAgICAgICAgICAgIGFwcGxlUmFkaW8gPSBhdG9tLmZpbmRSYWRpb0J5TmFtZShmcnVpdFJhZGlvcywgXCJBUFBMRVwiKTtcbiAgICAgICAgICAgIGJhbmFuYVJhZGlvID0gYXRvbS5maW5kUmFkaW9CeU5hbWUoZnJ1aXRSYWRpb3MsIFwiQkFOQU5BXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoXCJubyBpdGVtIHNob3VsZCBiZSBzZWxlY3RlZCBieSBkZWZhdWx0XCIsICgpID0+IHtcbiAgICAgICAgICAgIGZydWl0UmFkaW9zLmVhY2goKHJhZGlvOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICBleHBlY3QoYXRvbS5pc1JhZGlvU2VsZWN0ZWQocmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoXCJzZWxlY3Rpb24gc2hvdWxkIGJlIGNoYW5nZWFibGUgYnkgY3Vyc29yIGtleXNcIiwgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCByYWRpb3MgYXJlIG5vdCBzZWxlY3RlZFxuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb1NlbGVjdGVkKGFwcGxlUmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzUmFkaW9TZWxlY3RlZChiYW5hbmFSYWRpbykpLnRvRXF1YWwoZmFsc2UpO1xuXG4gICAgICAgICAgICAvLyBDbGljayBvbiBhcHBsZSByYWRpb1xuICAgICAgICAgICAgYXRvbS5jbGlja09uUmFkaW8oYXBwbGVSYWRpbyk7XG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc1JhZGlvU2VsZWN0ZWQoYXBwbGVSYWRpbykpLnRvRXF1YWwodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc1JhZGlvU2VsZWN0ZWQoYmFuYW5hUmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gQ2xpY2sgb24gVVAgYXJyb3cgYnV0dG9uIHNvIHdlIGNoZWNrIHRoYXQgY29ycmVjdCBlbGVtZW50IGhhcyBmb2N1cyBhbmQgdGhhdCByYWRpb1xuICAgICAgICAgICAgLy8gZnJvbSBjb3JyZWN0IGdyb3VwIGlzIHNlbGVjdGVkXG4gICAgICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5VUCkucGVyZm9ybSgpO1xuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb1NlbGVjdGVkKGFwcGxlUmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzUmFkaW9TZWxlY3RlZChiYW5hbmFSYWRpbykpLnRvRXF1YWwodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKFwiRGlzYWJsaW5nIG9wdGlvbnMgc2VjdGlvbjpcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgaW5zdHJ1bWVudFJhZGlvczogYW55LCBkaXNhYmxlQnV0dG9uOiBhbnksIG1vZGVsTGFiZWw6IGFueSwgcGlhbm9SYWRpbzogYW55LCB1a3VsZWxlUmFkaW86IGFueTtcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBwcmVwYXJlQnJvd3NlcigpO1xuICAgICAgICAgICAgbGV0IGluc3RydW1lbnRTZWN0aW9uID0gZWxlbWVudChieS5jc3MoXCIjeHVpLWRlbW8tcmFkaW8tZGlzYWJsaW5nLW9wdGlvbnNcIikpO1xuICAgICAgICAgICAgaW5zdHJ1bWVudFJhZGlvcyA9IGluc3RydW1lbnRTZWN0aW9uLmFsbChieS5jc3MoXCIueHVpLXJhZGlvXCIpKTtcbiAgICAgICAgICAgIHBpYW5vUmFkaW8gPSBhdG9tLmZpbmRSYWRpb0J5TmFtZShpbnN0cnVtZW50UmFkaW9zLCBcIlBJQU5PXCIpO1xuICAgICAgICAgICAgdWt1bGVsZVJhZGlvID0gYXRvbS5maW5kUmFkaW9CeU5hbWUoaW5zdHJ1bWVudFJhZGlvcywgXCJVS1VMRUxFXCIpO1xuICAgICAgICAgICAgZGlzYWJsZUJ1dHRvbiA9IGluc3RydW1lbnRTZWN0aW9uXG4gICAgICAgICAgICAgICAgLmFsbChieS54cGF0aChcIi4vL2J1dHRvbltkaXZbbm9ybWFsaXplLXNwYWNlKHRleHQoKSkgPSAnVG9nZ2xlIG9wdGlvbnMnXV1cIikpXG4gICAgICAgICAgICAgICAgLmZpcnN0KCk7XG4gICAgICAgICAgICBtb2RlbExhYmVsID0gaW5zdHJ1bWVudFNlY3Rpb25cbiAgICAgICAgICAgICAgICAuYWxsKGJ5LnhwYXRoKFwiLi8vZGl2W3N0YXJ0cy13aXRoKHRleHQoKSwgJ01vZGVsOiAnKV1cIikpXG4gICAgICAgICAgICAgICAgLmZpcnN0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdChcIml0ZW1zIHNob3VsZCBub3QgYmUgc2VsZWN0YWJsZSB3aGVuIGRpc2FibGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGF0IHJhZGlvIGlzIG5vdCBzZWxlY3RlZFxuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb1NlbGVjdGVkKHBpYW5vUmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gRGlzYWJsZSByYWRpb3NcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzUmFkaW9FbmFibGVkKHBpYW5vUmFkaW8pKS50b0VxdWFsKHRydWUpO1xuICAgICAgICAgICAgZGlzYWJsZUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb0VuYWJsZWQocGlhbm9SYWRpbykpLnRvRXF1YWwoZmFsc2UpO1xuXG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCByYWRpbyBjYW4ndCBiZSBzZWxlY3RlZFxuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb1NlbGVjdGVkKHBpYW5vUmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgIGF0b20uY2xpY2tPblJhZGlvKHBpYW5vUmFkaW8pO1xuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb1NlbGVjdGVkKHBpYW5vUmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gRW5hYmxlIHJhZGlvc1xuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb0VuYWJsZWQocGlhbm9SYWRpbykpLnRvRXF1YWwoZmFsc2UpO1xuICAgICAgICAgICAgZGlzYWJsZUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb0VuYWJsZWQocGlhbm9SYWRpbykpLnRvRXF1YWwodHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGF0IHJhZGlvIGNhbiBiZSBzZWxlY3RlZFxuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb1NlbGVjdGVkKHBpYW5vUmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgIGF0b20uY2xpY2tPblJhZGlvKHBpYW5vUmFkaW8pO1xuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb1NlbGVjdGVkKHBpYW5vUmFkaW8pKS50b0VxdWFsKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoXCJyYWRpbyBidXR0b24gc2hvdWxkIG5vdCBiZSBjbGlja2FibGUgd2hlbiBkaXNhYmxlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QobW9kZWxMYWJlbC5nZXRUZXh0KCkpLnRvRXF1YWwoXCJNb2RlbDpcIik7XG4gICAgICAgICAgICBkaXNhYmxlQnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICBhdG9tLmNsaWNrT25SYWRpbyhwaWFub1JhZGlvKTtcbiAgICAgICAgICAgIGV4cGVjdChtb2RlbExhYmVsLmdldFRleHQoKSkudG9FcXVhbChcIk1vZGVsOlwiKTtcbiAgICAgICAgICAgIGRpc2FibGVCdXR0b24uY2xpY2soKTtcbiAgICAgICAgICAgIGF0b20uY2xpY2tPblJhZGlvKHBpYW5vUmFkaW8pO1xuICAgICAgICAgICAgZXhwZWN0KG1vZGVsTGFiZWwuZ2V0VGV4dCgpKS50b0VxdWFsKFwiTW9kZWw6IHBpYW5vXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoXCJzZWxlY3RlZCBpdGVtIHNob3VsZCByZXRhaW4gaXRzIHN0YXRlIHdoZW4gZGlzYWJsZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2VsZWN0IHVrdWxlbGUgcmFkaW9cbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzUmFkaW9TZWxlY3RlZCh1a3VsZWxlUmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcbiAgICAgICAgICAgIGF0b20uY2xpY2tPblJhZGlvKHVrdWxlbGVSYWRpbyk7XG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc1JhZGlvU2VsZWN0ZWQodWt1bGVsZVJhZGlvKSkudG9FcXVhbCh0cnVlKTtcblxuICAgICAgICAgICAgLy8gRGlzYWJsZSByYWRpb3NcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzUmFkaW9FbmFibGVkKHVrdWxlbGVSYWRpbykpLnRvRXF1YWwodHJ1ZSk7XG4gICAgICAgICAgICBkaXNhYmxlQnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICBleHBlY3QoYXRvbS5pc1JhZGlvRW5hYmxlZCh1a3VsZWxlUmFkaW8pKS50b0VxdWFsKGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCByYWRpbyBzdGF5cyBzZWxlY3RlZCBldmVuIGFmdGVyIGNsaWNraW5nIG9uIGRpZmZlcmVudCBvbmUgaW4gZGlzYWJsZWQgbW9kZVxuICAgICAgICAgICAgZXhwZWN0KGF0b20uaXNSYWRpb1NlbGVjdGVkKHVrdWxlbGVSYWRpbykpLnRvRXF1YWwodHJ1ZSk7XG4gICAgICAgICAgICBhdG9tLmNsaWNrT25SYWRpbyhwaWFub1JhZGlvKTtcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmlzUmFkaW9TZWxlY3RlZCh1a3VsZWxlUmFkaW8pKS50b0VxdWFsKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KG1vZGVsTGFiZWwuZ2V0VGV4dCgpKS50b0VxdWFsKFwiTW9kZWw6IHVrdWxlbGVcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiTW9kZWw6IHN0cmluZyBzaG91bGQgY29ycmVzcG9uZCB0byBzZWxlY3RlZCB2YWx1ZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QobW9kZWxMYWJlbC5nZXRUZXh0KCkpLnRvRXF1YWwoXCJNb2RlbDpcIik7XG4gICAgICAgICAgICBhdG9tLmNsaWNrT25SYWRpbyhwaWFub1JhZGlvKTtcbiAgICAgICAgICAgIGV4cGVjdChtb2RlbExhYmVsLmdldFRleHQoKSkudG9FcXVhbChcIk1vZGVsOiBwaWFub1wiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJTaG91bGQgcmV0dXJuIGNvcnJlY3QgcmFkaW8gdmFsdWVcIiwgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGF0b20uZ2V0VmFsdWUocGlhbm9SYWRpbykpLnRvRXF1YWwoXCJwaWFub1wiKTtcbiAgICAgICAgICAgIGV4cGVjdChhdG9tLmdldFZhbHVlKHVrdWxlbGVSYWRpbykpLnRvRXF1YWwoXCJ1a3VsZWxlXCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
