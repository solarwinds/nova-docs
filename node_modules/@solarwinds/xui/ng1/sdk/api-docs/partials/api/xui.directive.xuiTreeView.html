<h1><code ng:non-bindable="">xuiTreeView</code>
<div><span class="hint">directive in module <code ng:non-bindable="">xui</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="xui-directive-page xui-directive-xuitreeview-page"><p>XUI Treeview component. Supports row/node toast highlighting via <a href="#/api/xui.services:xuiToastService">ToastService</a>.</p>
<p>Keyboard controls:</p>
<dl class="dl-horizontal">
<dt>up</dt> <dd>Focus previous visible node.</dd>
<dt>down</dt> <dd>Focus next visible node.</dd>
<dt>left</dt> <dd>Collapse node with children / focus parent node.</dd>
<dt>right</dt> <dd>Expand node with children / focus first child node.</dd>
<dt>*</dt> <dd>Expand all under current node.</dd>
<dt>+</dt> <dd>Expand current node.</dd>
<dt>-</dt> <dd>Collapse current node.</dd>
<dt>shift+plus</dt> <dd>Expand all nodes.</dd>
<dt>shift+minus</dt> <dd>Collapse all nodes.</dd>
</dl></div></div>
<h2 id="usage">Usage</h2>
<div class="usage">as element:<pre class="prettyprint linenums">&lt;xui-tree-view
       model="{array}"
       options="{object}"
       context="{object}"
       node-identifier="{string}"
       state="{ITreeviewState}"
       on-state-changed="{function}"&gt;
&lt;/xui-tree-view&gt;</pre>
<h4 id="usage_parameters">Parameters</h4><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>model</td><td><a href="" class="label type-hint type-hint-array">array</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Value containing list of nodes to be used as data for the treeview.</p>
</div></td></tr><tr><td>options</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Object containing values for treeview configuration.</p>
</div><table><thead><tr><th>Property</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>childrenKey</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Key to be used to extract children from node.</p>
</div> <p><em>(default: "children")</em></p></td></tr><tr><td>hasChildrenKey</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Boolean key that shows if the node has children.</p>
</div> <p><em>(default: "has_children")</em></p></td></tr><tr><td>limit</td><td><a href="" class="label type-hint type-hint-number">number</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Number of child nodes to be loaded at a time
(&quot;show more&quot; / &quot;show all&quot; links will appear).</p>
</div> <p><em>(default: null)</em></p></td></tr><tr><td>selectionMode</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Selection mode. Available modes are: <code>single</code>, <code>multi</code></p>
</div> <p><em>(default: null)</em></p></td></tr><tr><td>isAlwaysSelected</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Always keep at least one node selected.</p>
</div> <p><em>(default: false)</em></p></td></tr><tr><td>onExpand</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Callback for node expansion.</p>
</div></td></tr><tr><td>onCollapse</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Callback for node collapse.</p>
</div></td></tr><tr><td>onSelect</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Callback for node selection.</p>
</div></td></tr><tr><td>onDblClick</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Callback for double clicking on node.</p>
</div></td></tr><tr><td>trackBy</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>String that specifies a property on the node for trackBy functionality.
If it is not specified or doesn&#39;t exist, the $index will be used as default.</p>
</div></td></tr></tbody></table></td></tr><tr><td>context</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Object used to store data regarding treeview state.</p>
</div><table><thead><tr><th>Property</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>focusedNode</td><td><a href="" class="label type-hint type-hint-ivirtualnode">IVirtualNode</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Focused virtual node.</p>
</div></td></tr><tr><td>selectedNode</td><td><a href="" class="label type-hint type-hint-ivirtualnode">IVirtualNode</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Selected virtual node (for selectionMode = &#39;single&#39;).</p>
</div></td></tr><tr><td>selectedNodes</td><td><a href="" class="label type-hint type-hint-array">Array.&lt;IVirtualNode&gt;</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>List of selected nodes (for selectionMode = &#39;multi&#39;).</p>
</div></td></tr></tbody></table></td></tr><tr><td>nodeIdentifier</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Value of model used to identify item uniquely.</p>
</div></td></tr><tr><td>state</td><td><a href="" class="label type-hint type-hint-itreeviewstate">ITreeviewState</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Object obtains TreeView state.</p>
</div><table><thead><tr><th>Property</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>id</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Identifier of the VirtualNode.</p>
</div></td></tr><tr><td>path</td><td><a href="" class="label type-hint type-hint-array">array</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Path to the node from root.</p>
</div></td></tr><tr><td>expanded</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>If node has to be expanded.</p>
</div></td></tr><tr><td>checked</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>If node has to be checked.</p>
</div></td></tr></tbody></table></td></tr><tr><td>onStateChanged</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="xui-directive-page xui-directive-xuitreeview-page"><p>Function executes every time state of TreeView is changed.</p>
</div></td></tr></tbody></table></div>
<h2 id="example">Example</h2>
<div class="example"><div class="xui-directive-page xui-directive-xuitreeview-page"><h4 id="example_source">Source</h4>
<div source-edit="xui" source-edit-deps="angular.js app.js" source-edit-html="index.html-85" source-edit-css="" source-edit-js="app.js" source-edit-json="" source-edit-unit="" source-edit-scenario=""></div>
<div class="tabbable"><div class="tab-pane" title="index.html">
<pre class="prettyprint linenums" ng-set-text="index.html-85" ng-html-wrap-loaded="xui angular.js app.js"></pre>
<script type="text/ng-template" id="index.html-85"><link rel="stylesheet" type="text/css" href="http://localhost:8282/dist/css/xui.css">
<base href="/">
<h4 id="example_basic-usage">BASIC USAGE (SINGLE SELECTION + Selected node)</h4>
<div ng-controller="DemoTreeViewBasicController as vm">
    <xui-button ng-click="vm.reverse()">reverse root (in place)</xui-button>
    <xui-button ng-click="vm.addChild()">add child</xui-button>
    <xui-button ng-click="vm.dump()">reverse root (object replacement)</xui-button>
    <xui-treeview model="vm.model" options="vm.options" context="vm.context">
        {{::vm.$model.label}}
        <xui-button display-style="tertiary"
                    ng-click="node.$model.children.reverse()">reverse children
        </xui-button>
        <xui-button display-style="tertiary"
                    ng-click="node.$model.children.push({label: 'ADDED VIA BINDING', children:[]})">add child
        </xui-button>
        <xui-button display-style="tertiary"
                    ng-click="vm.$model.children.pop()">remove child
        </xui-button>
    </xui-treeview>
    <p>Focused node: {{vm.context.focusedNode.$model.label}}</p>
</div>
<xui-divider></xui-divider>

<h4 id="example_links-&-images">Links & images (+no selection)</h4>
<div ng-controller="DemoTreeViewLinksController as vm">
    <xui-treeview model="vm.model" options="vm.options" context="vm.context">
        <a href="http://www.solarwinds.com">{{::node.$model.label}}</a>
    </xui-treeview>
</div>
<xui-divider></xui-divider>

<h4 id="example_multiple-selection">Multiple selection</h4>
<div ng-controller="DemoTreeViewMultiController as vm">
    <xui-treeview model="vm.model"
                  options="vm.options"
                  context="vm.context">{{::node.$model.label}}
        <div>Block text</div>
        <div>Block text2</div>
        <div>Block text3</div>
    </xui-treeview>
</div>

<xui-divider></xui-divider>
<h4 id="example_async-loading">Async loading</h4>
<div ng-controller="DemoTreeViewAsyncController as vm">
    <xui-treeview model="vm.model"
                  options="vm.options"
                  context="vm.context">{{::node.$model.label}}
    </xui-treeview>
</div>
<h4 id="example_limit-max-items">Limit max items</h4>
<div ng-controller="DemoTreeViewLimitController as vm">
    <xui-treeview model="vm.model"
                  options="vm.options"
                  context="vm.context">{{::node.$model.label}}
    </xui-treeview>
</div>
<xui-divider></xui-divider>

<h4 id="example_highlighting">Highlighting</h4>
<div ng-controller="DemoTreeViewHighlightController as vm">
    <div>
        <xui-button ng-click="vm.highlightNode()">Show Highlight</xui-button>
    </div>
    <xui-treeview model="vm.model">
        {{::node.$model.label}}
    </xui-treeview>
</div>
<xui-divider></xui-divider>





<h4 id="example_state-usage">State usage</h4>
<div ng-controller="DemoTreeViewStateController as vm">
    <xui-treeview model="vm.model" options="vm.options" context="vm.context" state="{{vm.state}}"
                  node-identifier="id" on-state-changed="stateChanged(newState, oldState)">
        Node {{::node.$model.id}}
    </xui-treeview>

    <xui-listview stripe="true" items-source="vm.states"></xui-listview>
</div>
</script>
</div>
<div class="tab-pane" title="app.js">
<pre class="prettyprint linenums" ng-set-text="app.js"></pre>
<script type="text/ng-template" id="app.js">(function () {
    "use strict";

    Xui.module
        .controller("DemoTreeViewBasicController", DemoTreeViewBasicController)
        .controller("DemoTreeViewLinksController", DemoTreeViewLinksController)
        .controller("DemoTreeViewMultiController", DemoTreeViewMultiController)
        .controller("DemoTreeViewAsyncController", DemoTreeViewAsyncController, ["$timeout", "$q"])
        .controller("DemoTreeViewLimitController", DemoTreeViewLimitController, ["$q"])
        .controller("DemoTreeViewHighlightController", DemoTreeViewHighlightController, ["xuiToastService"])
        .controller("DemoTreeViewStateController", DemoTreeViewStateController, ["$timeout"]);

    function DemoTreeViewBasicController() {
        var vm = this;

        vm.context = {};
        vm.model = [];
        vm.clone = [];

        vm.options = {
            selectionMode: 'single',
            trackBy: 'id',
            isAlwaysSelected: true
        };

        vm.reverse = function () {
            vm.model.reverse();
        };

        vm.addChild = function () {
            vm.model.push({label: "ADDED VIA BINDING", children: []});
        };

        vm.dump = function () {
            var t = vm.clone;
            vm.clone = vm.model;
            vm.model = t;
        };

        generateTree(vm.model, 10, 4);

        //pre-generate replacement tree
        generateTree(vm.clone, 10, 4);
        vm.clone.reverse();
    }

    function DemoTreeViewLinksController() {
        var vm = this;

        vm.context = {};
        vm.model = [];

        generateTree(vm.model, 10, 3, function (n) {
            n.icon = 'status_up';
        });

        delete vm.model[9].children;
    }

    function DemoTreeViewMultiController() {
        var vm = this;

        vm.context = {};
        vm.model = [];
        vm.options = {
            selectionMode: 'multi'
        };

        generateTree(vm.model, 10, 3, function (n) {
            n.icon = 'status_up';
        });
    }

    function DemoTreeViewAsyncController($timeout, $q) {
        var vm = this;
        var icon = 'status_up';

        vm.context = {};
        vm.model = [];

        generateTree(vm.model, 2, 3);

        vm.options = {
            selectionMode: 'single',
            load: function (vnode) {
                var deferred = $q.defer();

                var children = vnode.$level > 3 ? null : [];

                $timeout(function () {
                    deferred.resolve([
                        {label: 'Async #1', children: children, icon: icon, id: 'id_001'},
                        {label: 'Async #2', children: children, icon: icon, id: 'id_002'}]);
                }, 1000);

                return deferred.promise;
            }
        };


    }

    function DemoTreeViewLimitController($q) {
        var vm = this;

        vm.context = {};
        vm.model = [];
        vm.options = {
            selectionMode: 'single',
            limit: 3
        };

        generateTree(vm.model, 10, 3, function (n) {
            n.icon = 'status_up';
        });
    }

    function DemoTreeViewHighlightController(toastService) {
        var vm = this;

        vm.model = [];

        generateTree(vm.model, 10, 3);

        vm.highlightNode = function () {
            toastService.success("Node Highlighted! Hover on me...", "TreeView Highlights", {}, [vm.model[0]]);
        };
    }

    function DemoTreeViewStateController($timeout) {
        var vm = this;

        vm.context = {};
        vm.states = [];
        vm.model = [];
        vm.state = [];
        vm.options = {
            selectionMode: 'single'
        };

        vm.stateChanged = function (newState, oldSate) {
            vm.states.push(vm.states.length + "    " + newState);
        };

        generateTree(vm.model, 5, 3);

        $timeout(function () {
            vm.state = [
                {
                    id: "id_0",
                    path: [],
                    expanded: true,
                    checked: false
                },
                {
                    id: "id_2",
                    path: ["id_0"],
                    expanded: true,
                    checked: false
                },
                {
                    id: "id_3",
                    path: ["id_0", "id_2"],
                    expanded: false,
                    checked: true
                }];
        });
    }

    function generateTree(children, count, depth, callbackFn) {
        if (depth <= 0) {
            return;
        }
        for (var i = 0; i < count; i++) {
            var id = 'id_' + i;
            var node = {label: 'Node' + (i + 1), id: id};

            if (depth > 1) {
                node.children = [];
            }
            if (callbackFn) {
                callbackFn(node);
            }

            children.push(node);
            generateTree(node.children, count, depth - 1, callbackFn);
        }
    }
})();</script>
</div>
</div><h4 id="example_demo">Demo</h4>
<div class="well doc-example-live animate-container" ng-embed-app="xui" ng-set-html="index.html-85" ng-eval-javascript="app.js"></div>
</div></div>
</div>
