import { browser, by, ElementFinder, promise } from "@solarwinds/uzi/protractor";
import { Atom } from "@solarwinds/uzi";

export class TooltipAtom extends Atom {
    public static CSS_CLASS = "xui-demo-tooltip-target";

    public moveMouseToTarget = (): void => {
        browser.actions()
            .mouseMove(this.getElement().getWebElement())
            .perform();
    };

    public clickOnTarget = (): void => {
        browser.actions()
            .click(this.getElement().getWebElement())
            .perform();
    };

    public getTooltipText(): promise.Promise<string> {
        return this.getTooltip().element(by.className("xui-tooltip__inner")).getText();
    }

    public checkTooltipClasses(): promise.Promise<string> {
        return this.getTooltip().getAttribute("class");
    }

    public isTooltipDisplayed(): promise.Promise<boolean> {
        return this.getTooltip().isPresent();
    }

    private getTooltip(): ElementFinder {
        return super.getElement().element(by.xpath("..")).element(by.className("xui-tooltip"));
    }
}
