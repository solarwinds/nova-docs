import { browser, protractor } from "@solarwinds/uzi/protractor";
import { Atom } from "@solarwinds/uzi";

import { ButtonAtom, TextboxAtom } from "../../components/index.atom";
import Helpers from "../../helpers";

describe("USERCONTROL Clipboard", () => {
    let buttonAtom: ButtonAtom;
    let textbox: TextboxAtom;

    beforeAll(() => {
        browser.ignoreSynchronization = true;
    });

    afterAll(() => {
        browser.ignoreSynchronization = false;
    });

    beforeEach(() => {
        Helpers.prepareBrowser("clipboard");
        buttonAtom = Atom.find(ButtonAtom, "clipboardButton");
        textbox = Atom.find(TextboxAtom, "inputTextbox");
    });
    
    it("should copy text to clipboard", () => {
        const textToCopy = "text to copy";

        textbox.acceptText(textToCopy);
        buttonAtom.click();
        textbox.clearText();
        textbox.input.sendKeys(protractor.Key.CONTROL, "v");

        expect(textbox.value).toBe(textToCopy);
    });
});
