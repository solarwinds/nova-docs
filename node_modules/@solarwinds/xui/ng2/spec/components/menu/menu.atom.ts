import {
    promise,
    by,
    ElementFinder,
    ElementArrayFinder
} from "@solarwinds/uzi/protractor";
import { Atom } from "@solarwinds/uzi";

export class MenuAtom extends Atom {

    public static CSS_CLASS = "xui-menu";

    public toggleMenu(): promise.Promise<void> {
        return this.getElement().click();
    }

    public getItemByText(text: string): ElementFinder {
        return this.getElement().element(by.xpath(`
            //*[contains(@class, "xui-menu-item")]//*[text()="${text}"]
        `));
    }

    public itemCount = (): promise.Promise<number> => {
        return this.getItems().count();
    };

    public isMenuOpened(): promise.Promise<boolean> {
        return this.getElement().element(by.css(".xui-popup__area")).isDisplayed();
    }

    private getItems = (): ElementArrayFinder => {
        return super.getElement().all(by.css(".xui-menu-item"));
    };

}
