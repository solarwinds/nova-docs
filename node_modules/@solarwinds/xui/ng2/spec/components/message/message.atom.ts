import {by, ElementFinder, promise} from "@solarwinds/uzi/protractor";

import {Atom} from "@solarwinds/uzi";

export class MessageAtom extends Atom {
    public static CSS_CLASS = "xui-message";

    public getContent = (): promise.Promise<string> => {
        const element = super.getElement().element(by.className("xui-message-content"));
        return element.getText();
    };

    public getDismissButton = (): ElementFinder => {
        return super.getElement().element(by.className("xui-message-dismiss-button"));
    };

    public dismissMessage = (): promise.Promise<void> => {
        return this.isDismissable()
            .then(allowed => allowed ? this.getDismissButton().click() : null);
    };

    public isVisible = (): promise.Promise<boolean> => {
        return super.getElement().isDisplayed();
    };

    public isPresent = (): promise.Promise<boolean> => {
        return super.getElement().isPresent();
    };

    public isDismissable = (): promise.Promise<boolean> => {
        return this.getDismissButton().isDisplayed();
    };

}
