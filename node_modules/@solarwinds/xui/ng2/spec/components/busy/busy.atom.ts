import {by, promise} from "@solarwinds/uzi/protractor";
import {Atom} from "@solarwinds/uzi";
import {ProgressAtom} from "../index.atom";

export class BusyAtom extends Atom {
    public static CSS_CLASS = "xui-busy";

    public isAppended = (): promise.Promise<boolean> => {
        return super.getElement().element(by.css(".xui-busy__container")).isPresent();
    };

    public isDisplayed = (): promise.Promise<boolean> => {
        return super.getElement().element(by.css(".xui-busy__container")).isDisplayed();
    };

    public isBusy = (): promise.Promise<boolean> => {
        return super.getElement().element(by.css(".xui-busy__overlay")).isPresent();
    };

    public getProgress = () => {
        return Atom.findIn(ProgressAtom, super.getElement());
    };

    public isProgressBarDisplayed = () => {
        return this.getProgress().isProgressBarDisplayed();
    };
}
