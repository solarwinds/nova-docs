import {by, ElementFinder, promise} from "@solarwinds/uzi/protractor";
import {Atom} from "@solarwinds/uzi";
import {CheckboxAtom} from "../index.atom";

export class CheckboxGroupAtom extends Atom {
    public static CSS_CLASS = "xui-checkbox-group";

    // Used to return specific checkbox element from the group
    public getCheckbox(title: string): CheckboxAtom {
        const cbList = super.getElement().all(by.className("xui-checkbox"));

        return new CheckboxAtom(cbList.filter((checkbox: ElementFinder) => {
            const cbAtom = new CheckboxAtom(checkbox);
            return cbAtom.getContent().then((text: string) => {
                return text.toLowerCase() === title.toLowerCase();
            });
        }).first());
    }

    public getFirst(): CheckboxAtom {
        const cbList = super.getElement().all(by.className("xui-checkbox"));
        return new CheckboxAtom(cbList.first());
    }
}
