import { Component, Inject, OnInit, ViewEncapsulation } from "@angular/core";
import { Http } from "@angular/http";
import "rxjs/add/operator/map";
import { MiscService } from "../../../services/misc.service";

// TODO: Use xui-radio for setting selection when it is implemented
// TODO: Put available icons into xui-expander when it is implemented
@Component({
    selector: "xui-icon-example",
    template: require<string>("./icon.example.component.html")
})
export class IconExampleComponent implements OnInit {
    icons: any[];
    categories: any[];

    iconName: string = "add";
    iconSize: string = "small";
    iconStatus: string = "";
    iconColor: string = "";
    iconHoverColor: string = "";

    isNgDocs: boolean;

    constructor( @Inject(Http) private http: Http, @Inject(MiscService) private miscService: MiscService) {
    }

    ngOnInit(): void {
        this.isNgDocs = (window.location.href.indexOf("api-docs") !== -1);

        let pathToFile = this.miscService.getJsonLocation("icons.json");
        this.http.get(pathToFile)
            .map(res => res.json())
            .subscribe(icons => {
                this.icons = icons;
                this.categories = this.getCategories(icons);
            });
    }

    private getCategories(icons: any[]) {
        let categories = [];
        for (let icon of icons) {
            if (categories.indexOf(icon.category) === -1) {
                categories.push(icon.category);
            }
        }
        return categories;
    }
}
