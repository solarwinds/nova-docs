import {IfShowComponent} from "./if-show.components";
import {SimpleChange} from "@angular/core";

describe("components >", () => {
    describe("ifShow >", () => {

        let component: IfShowComponent;

        beforeEach(() => {
            component = new IfShowComponent();
        });

        const verifyState = (comp: IfShowComponent, hasBeenShown: boolean,
                             showNgIf: boolean, showNgShow: boolean): void => {

            expect(comp.hasBeenShown).toBe(hasBeenShown);
            expect(comp.showNgIf).toBe(showNgIf);
            expect(comp.showNgShow).toBe(showNgShow);
        };

        describe("onVisibleChanged() > ", () => {

            it("shows everything on first show", () => {
                component.ngOnChanges({
                    visible: new SimpleChange(false,true,true)
                });
                verifyState(component, true, true, true);
            });

            it("sets just 'showNgShow' to false on first hide", () => {
                component.ngOnChanges({
                    visible: new SimpleChange(false,true,true)
                });
                component.ngOnChanges({
                    visible: new SimpleChange(true,false,false)
                });
                verifyState(component, true, true, false);
            });
        });
    });
});
