@import (reference) "../../styles/xui-framework-variables.less";
@import (reference) "../../styles/mixins.less";
@import (reference) "../../styles/components/buttons.less";

@xui-button-border-width: 2px;
@xui-button-min-width: 100px;

.busy-variant(@color, @background, @ripple1, @ripple2) {
    color: @color;
    background-color: @background;
    .ripple-1 {
        background: @ripple1;
    }
    .ripple-2 {
        background: @ripple2;
    }
}

.xui .xui-button {
    min-width: @xui-button-min-width;
    text-transform: uppercase;
    border-width: @xui-button-border-width;
    padding: (@btn-padding-base-vertical - @xui-button-border-width) (@btn-padding-base-horizontal - @xui-button-border-width);
    position: relative;
    overflow: hidden;

    .xui-icon {
        vertical-align: top;
        position: relative;
        margin-top: 0;
    }

    .xui-button-content {
        .text-overflow(ellipsis);
        position: relative;
    }

    &.icon-right {
        .xui-icon {
            float: right;
        }

        xui-icon {
            + .xui-button-content {
                text-align: right;
                margin-right: (@icon-size-default + @padding-xs-horizontal);
            }
        }
    }
    &.icon-left {
        .xui-icon {
            float: left;
        }

        xui-icon {
            + .xui-button-content {
                text-align: left;
                margin-left: (@icon-size-default + @padding-xs-horizontal);
            }
        }
    }

    &.is-busy {
        pointer-events: none;
        outline: none;
        .xui-icon {
            .opacity(@disabled-opacity);
        }
    }

    &-ripple-container {
        display: block;
        position: absolute;

        .ripple {
            .fill();
            transform: scale(0);
            border-radius: 100%;

            &.ripple-1 {
                animation: ripple1 2s linear infinite;
            }
            &.ripple-2 {
                animation: ripple2 2s linear infinite;
            }
        }
    }

    @keyframes ripple1 {
        50% {
            transform: scale(1.5);
        }
        100% {
            transform: scale(1.5);
        }
    }
    @keyframes ripple2 {
        30% {
            transform: scale(0.0);
        }
        100% {
            transform: scale(1.5);
        }
    }

    &.btn-default,
    &.btn-secondary {
        .button-variant(@btn-secondary-color; @btn-secondary-bg; @btn-secondary-border);

        &:hover, &:active, &:focus {
            background-color: @btn-default-bg-hover;
            border-color: @xui-color-focused-border;
            color: @xui-color-focused-border;
        }
        &[disabled] {
            color: @xui-color-inactive;
            border-color: @xui-color-inactive;
        }
        &.is-busy {
            .busy-variant(
                fade(@xui-color-active-hover, 20%),
                @btn-default-bg-hover,
                fade(@xui-color-selected, 20%),
                @btn-default-bg-hover);
        }
    }

    &.btn-primary {        
        &[disabled] {
            color: @white;
            background-color: @xui-color-inactive;
            border-color: @xui-color-inactive;
        }
        &.is-busy {
            .busy-variant(
                fade(@btn-primary-color, 30%),
                @btn-primary-bg,
                darken(@btn-primary-bg, 5.5%),
                @btn-primary-bg);
        }
    }

    &.xui-btn-tertiary {
        color: @btn-default-color;
        background-color: transparent;

        &:hover, &:active, &:focus {
            background-color: @btn-default-bg-hover;
            border-color: @btn-default-bg-hover;
            color: @xui-color-focused-border;
            outline: none;
        }
        &[disabled] {
            color: @xui-color-inactive;
        }
        &.is-busy {
            .busy-variant(
                fade(@xui-color-active-hover, 20%),
                @btn-default-bg-hover,
                fade(@xui-color-selected, 20%),
                @btn-default-bg-hover);
        }
    }

    &.xui-btn-link {
        text-transform: none;
        color: @xui-color-link-text;
        background-color: transparent;
        font-weight: @xui-font-weight-regular;
        min-width: 0;
        border: none;
        padding: @btn-padding-base-vertical 0;

        &.btn, &.btn-lg, &.btn-sm, &.btn-xs {
            padding-left: 0;
            padding-right: 0;
        }
        &:hover, &:active, &:focus {
            color: @xui-color-link-hover-text;
        }
        &[disabled],
        &.is-busy {
            color: @xui-color-inactive;
        }
    }

    &.btn-lg {
        padding: (@btn-padding-large-vertical - @xui-button-border-width) (@btn-padding-large-horizontal - @xui-button-border-width);

        .xui-icon {
            margin-top: -1px;
            margin-bottom: -1px;
        }
    }

    &.btn-sm {
        padding: (@btn-padding-small-vertical - @xui-button-border-width) (@btn-padding-small-horizontal - @xui-button-border-width);

        .xui-icon {
            margin-top: 0;
        }

        xui-icon {
            + .xui-button-content {
                margin-left: (@icon-size-small + @padding-xs-horizontal);
            }
        }
    }

    &.btn-xs {
        padding: (@btn-padding-xs-vertical - @xui-button-border-width) (@btn-padding-xs-horizontal - @xui-button-border-width);
        font-size: @xui-font-size-small;

        .xui-icon {
            margin-top: 3px;
            margin-right: 3px;
        }

        xui-icon {
            + .xui-button-content {
                margin-left: (@icon-size-xsmall + @padding-xs-horizontal);
            }
        }
    }

    &.is-empty {
        min-width: 0;
        padding-left: 0;
        padding-right: 0;

        .xui-icon {
            margin-left: 0;
            margin-right: 0;
        }

        > .xui-button-content {
            display: none;
        }
    }
}
