@import (reference) "../../styles/xui-framework-variables.less";

@header-step-title-max-width: 150px;

.xui {
    // Make adjustments when we're hosted in xui-dialog.
    .xui-dialog {
        .xui-wizard {
            margin: -@padding-large-horizontal;

            .xui-busy {
                display: none !important;
            }

            &__footer {
                display: none;
            }
        }
    }

    .xui-wizard {
        &.xui-wizard--no-navigate {
            .xui-wizard {
                &__header-step {
                    cursor: default;
                    &-link {
                        &:hover {
                            text-decoration: none;
                        }
                    }
                }
            }
        }

        &--condensed {
            .xui-wizard__header {
                &-steps {
                    width: 100%;
                    display: block;
                }
                &-step {
                    display: inline-block;
                    max-width: @header-step-title-max-width;

                    &:first-child {
                        .xui-wizard__header-step-col {
                            &.left {
                                display: table-cell;
                            }
                            &.middle {
                                .xui-wizard__header-step-content {
                                    margin-left: @padding-large-horizontal;
                                }
                            }
                        }
                    }
                    &:last-child {
                        .xui-wizard__header-step-col {
                            &.right {
                                display: table-cell;
                            }
                            &.middle {
                                .xui-wizard__header-step-content {
                                    margin-right: @padding-large-horizontal;
                                }
                            }
                        }
                    }

                    &-container {
                        .xui-wizard__header-step-title {
                            display: none;
                        }
                        &-bottom {
                            display: block;
                        }
                    }
                }
            }
        }

        &__header {
            margin: 0;
            padding: @padding-large-horizontal;
            background-color: @wizard-steps-bg;
            border-bottom: @wizard-steps-border-thickness solid @wizard-steps-border-color;
            overflow: hidden;
            text-align: center;
            display: flex;
            .no-select();

            &-steps {
                margin: 0 auto;
                padding: 0;
                white-space: nowrap;
                display: inline-flex;
            }

            &-step {
                line-height: normal;
                display: inline-flex;

                &[disabled] {
                    cursor: default;
                }
                &--first {
                    .xui-wizard__header-step-col {
                        &.left {
                            display: none;
                            opacity: 0;
                        }
                        &.middle {
                            .xui-wizard__header-step-content {
                                margin-left: 0;
                            }
                        }
                    }
                }
                &--last {
                    .xui-wizard__header-step-col {
                        &.middle {
                            .xui-wizard__header-step-content {
                                margin-right: 0;
                            }
                        }
                        &.right {
                            display: none;
                            opacity: 0;
                        }
                    }
                }

                &--visited {
                    .xui-wizard__header-step-link {
                        color: @xui-color-link-text;
                        &:hover {
                            text-decoration: underline;
                        }
                    }
                    .xui-wizard__header-step-col {
                        &.left {
                            > .xui-wizard__header-step-line {
                                border-color: @xui-color-selected;
                            }
                        }
                    }
                }
                &--complete {
                    .xui-wizard__header-step-col {
                        &.right {
                            > .xui-wizard__header-step-line {
                                border-color: @xui-color-selected;
                            }
                        }
                    }
                }
                &--active {
                    cursor: default;

                    .xui-wizard__header-step-link {
                        color: @xui-color-selected;
                        font-weight: @xui-font-weight-bold;
                        &:hover {
                            .xui-wizard__header-step-title {
                                text-decoration: none;
                            }
                        }
                    }
                }

                &-container {
                    display: inline-table;
                    width: 100%;

                    &-bottom {
                        display: none;

                        .xui-wizard__header-step-content {
                            margin: 0 @padding-xs-horizontal;
                        }
                        .xui-wizard__header-step-title {
                            width: 100%;
                            max-width: 100%;
                            margin: 0;
                        }
                    }
                }
                &-row {
                    display: table-row;
                }
                &-col {
                    display: table-cell;
                    vertical-align: middle;

                    .xui-wizard__header-step-line {
                        border-color: @xui-color-border;
                    }
                    &.middle {
                        width: 1px;
                    }
                    &.right {
                        .xui-wizard__header-step-line {
                            margin-right: -1px;
                        }
                    }
                }
                &-line {
                    border-bottom: solid 1px;
                    height: 1px;
                    min-width:20px;
                }
                &-content {
                    margin: 0 (@padding-large-horizontal - 1px) 0 @padding-large-horizontal;
                }

                &-link {
                    color: @xui-color-secondary-text;
                    transition: color .3s;
                }

                &-title {
                    .text-overflow(ellipsis);
                    vertical-align: middle;
                    display: inline-block;
                    max-width: @header-step-title-max-width;
                    margin: 0 0 3px @padding-xs-horizontal;
                    text-decoration: inherit;
                }
            }
        }

        &__title {
            margin: 0;
        }

        &__description {
            margin-top: @margin-base-vertical;
        }

        &__steps {
            padding: @padding-large-horizontal;
        }

        &__step {
            margin-top: @margin-large-horizontal;
            display: none;

            &--active {
                display: block;
            }

            &.animated {
                animation-duration: 1s;
                animation-fill-mode: both;
            }
        }

        &__footer {
            border-top: solid 1px @xui-color-border;
            padding: @padding-large-horizontal;
            text-align: right;

            > .xui-button {
                margin-left: @padding-base-horizontal;
                &:first-child {
                    margin-left: 0;
                }
            }
        }
    }
}
