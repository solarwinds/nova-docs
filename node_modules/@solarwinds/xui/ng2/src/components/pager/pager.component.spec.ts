import { PagerComponent } from "./pager.component";
import { Logger } from "angular2-logger/app/core/logger";
import { SimpleChange, SimpleChanges } from "@angular/core";

describe("components >", () => {
    describe("pager >", () => {
        let subject: PagerComponent;
        const total = 1000;
        const pageSize = 25;
        const page = 3;
        beforeEach(() => {
            const logger = new Logger();
            subject = new PagerComponent(logger);
            subject.total = total;
            subject.pageSize = pageSize;
            subject.page = page;
            subject.ngOnInit();
        });

        it("should select page number " + page , () => {
            subject.goToPage(3);
            expect(subject.page).toEqual(3);
        });

        it("should have pageSize equal to " + pageSize, () => {
            subject.setItemsPerPage(pageSize);
            expect(subject.pageSize).toEqual(pageSize);
        });

        it("should have first item on the page equal to 51", () => {
            expect(subject.getFirstItemOnPage()).toEqual(51); 
        });

        it("should have last item on the page equal to 75", () => {
            expect(subject.getLastItemOnPage()).toEqual(75); 
        });

        it("should have page count equal to 40", () => {
            expect(subject.getPageCount()).toEqual(40); 
        });

        it("should have items count in pager equal to 7", () => {
            let changes:SimpleChanges = {"page": new SimpleChange(3, 1, true)};
            subject.ngOnChanges(changes);
            expect(subject.itemsList.length).toEqual(7);
        });
    });
});
