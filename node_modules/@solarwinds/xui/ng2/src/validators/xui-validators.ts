import {AbstractControl, ValidationErrors, ValidatorFn} from "@angular/forms";

/**
 * Class that represents custom Xui validators
 */
export class XuiValidators {
    /**
     * Validator that returns validation function and checks if value matches integer regex.
     * @param {boolean} unsigned
     * @returns {ValidatorFn}
     */
    static integer (unsigned: boolean = false): ValidatorFn {
        return (control: AbstractControl): ValidationErrors | null => {
            let integerRegex: RegExp;
            integerRegex = unsigned ? /^(0|[1-9]\d*)$/ : /^\-?(0|[1-9]\d*)$/;
            const errorObject = {
                value: control.value
            };
            const valid = integerRegex.test(control.value);
            return valid ? null : errorObject;
        };
    }
}
