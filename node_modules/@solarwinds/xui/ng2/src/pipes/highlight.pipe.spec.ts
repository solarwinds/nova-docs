import { DomSanitizer, SafeHtml } from "@angular/platform-browser";
import { HighlightPipe } from "./highlight.pipe";

describe("pipes >", () => {
    describe("highlight pipe >", () => {

        const domSanitizer = {
            bypassSecurityTrustHtml: (code: string) => code as SafeHtml
        } as DomSanitizer;

        let subject: HighlightPipe;
        let text: string;
        let search: string;
        let expectedText: SafeHtml;

        it("should highlight search text in case of concurrency", () => {
            text = "Hello darkness my old friend";
            search = "old friend";
            expectedText = 'Hello darkness my <span class="xui-highlighted">old friend</span>';
            subject = new HighlightPipe(domSanitizer);
            expect(subject.transform(text, search)).toBe(expectedText);
        });

        it("shouldn't highlight search text in case of discrepancy", () => {
            text = "Within the sound of silence";
            search = "old friend";
            expectedText = text;
            subject = new HighlightPipe(domSanitizer);
            expect(subject.transform(text, search)).toBe(expectedText);
        });

    });
});
